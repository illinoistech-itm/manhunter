From java-user-return-27299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 01 07:58:30 2007
Return-Path: <java-user-return-27299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79956 invoked from network); 1 Apr 2007 07:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2007 07:58:29 -0000
Received: (qmail 34985 invoked by uid 500); 1 Apr 2007 07:58:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34953 invoked by uid 500); 1 Apr 2007 07:58:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34942 invoked by uid 99); 1 Apr 2007 07:58:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 00:58:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 00:58:20 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A334D5B764; Sun,  1 Apr 2007 00:58:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 853997F403
	for <java-user@lucene.apache.org>; Sun,  1 Apr 2007 00:58:00 -0700 (PDT)
Date: Sun, 1 Apr 2007 00:58:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Emulating Pages Search
In-Reply-To: <9775141.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0704010056510.7628@hal.rescomp.berkeley.edu>
References: <9775141.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I can see that tops.totalHits, returns all matched documents. So is this
: really "paged search", or I'm just doing a complete search and put a window
: on the returned result each time?

that's all paginated searching is ... you have to know the first 10
results to show 1-10, but you also have to know the first 20 results in
order to be able to show 11-20.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 01 08:39:08 2007
Return-Path: <java-user-return-27300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87245 invoked from network); 1 Apr 2007 08:39:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2007 08:39:07 -0000
Received: (qmail 58416 invoked by uid 500); 1 Apr 2007 08:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58378 invoked by uid 500); 1 Apr 2007 08:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58367 invoked by uid 99); 1 Apr 2007 08:39:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 01:39:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 01:38:57 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 59E0F210B44
	for <java-user@lucene.apache.org>; Sun,  1 Apr 2007 04:38:38 -0400 (EDT)
Received: from web4.messagingengine.com ([10.202.2.213])
  by compute1.internal (MEProxy); Sun, 01 Apr 2007 04:38:37 -0400
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 96946179C61; Sun,  1 Apr 2007 04:38:37 -0400 (EDT)
Message-Id: <1175416717.31966.1182428433@webmail.messagingengine.com>
X-Sasl-Enc: rwc4lH8aH/5ME+tRMSM//58hEWCICLcwGH8H/ux+p2mQ 1175416717
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <f36128690703311609h1cdec6c8r466ef6ad8c840e9d@mail.gmail.com>
   <1175389396.31756.1182405653@webmail.messagingengine.com>
   <f36128690703311830u348ab792p48f135e1d2bb740e@mail.gmail.com>
   <Pine.LNX.4.58.0703311843260.21615@hal.rescomp.berkeley.edu>
Subject: Re: Lock files in a read-only application
In-Reply-To: <Pine.LNX.4.58.0703311843260.21615@hal.rescomp.berkeley.edu>
Date: Sun, 01 Apr 2007 04:38:37 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Chris Hostetter" <hossman_lucene@fucit.org> wrote:
>
> : locks without upgrading to 2.1. Our application uses its own custom
> : locking mechanism, so that lucene locking is actually redundant. We
> : are currently using Lucene version 2.0.
> 
> since before the 2.0.0 release there has been a static
> FSDirectory.setDisableLocks that can be called before opening any indexes
> to prevent locking -- it's only intended to be used on indexes on read
> only disk -- which is not the case in your situation, since a seperate
> process is in fact modifying the index, but if you are confident in your
> own locking mechanism you can use it.

You need to be really certain your own locking protects Lucene
properly.  Specifically, no IndexReader can be created (restarted)
while a writer is open against the index, and, only one writer can be
open on the index at once (it sounds like you already have that).  If
you're sure about that then disabling the locks as Hoss describes
above is OK.

> : The application has multiple threads (different web requests) reading
> : the same index simultaneously (say 20 concurrent threads). Can that be
> : a reason of this problem. Sometimes the lockfiles remain there for
> : long periods of time (more than a few minutes, which is bad).
> 
> mutliple reader threads should not cause the commit lock to stay arround
> that long, even if each thread is opening it's on IndexReader (which they
> should not do, it's better to open one and reuse it among many threads)

This part (commit lock staying around for so long) is definitely odd
and I'd like to get to the root cause.  Multiple threads are fine
(though, you should share one IndexReader).  The only way I know of
for this to happen is if JVM crashes while IndexReader or IndexWriter
is being initialized.  Even then it's quite unlikely because JVM has
to crash right when segments file is being read or written.
 
> : Yes, JVM sometimes crashes when it runs out of memory. There should be
> : someway that the lock files are removed after such crash (any fixes is
> : 2.1?).
> 
> As Michael said, in 2.1 the commit lock doesn't even exist, and in general
> there is a much more robust lock management system that lets you decide
> what type of lock mechanism to use.

In fact with 2.1 we have a new optional locking implementation called
NativeFSLockFactory.  One of its big benefits over the default Lucene
locking (SimpleFSLockFactory) is that if the JVM crashes then the lock
file(s) are correctly released (ie, no more "stale lock files" left in
the filesystem).  This way if the JVM of the writer crashes then the
write.lock that it held is properly freed by the OS.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 01 09:18:23 2007
Return-Path: <java-user-return-27301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92454 invoked from network); 1 Apr 2007 09:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2007 09:18:23 -0000
Received: (qmail 81299 invoked by uid 500); 1 Apr 2007 09:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81260 invoked by uid 500); 1 Apr 2007 09:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81249 invoked by uid 99); 1 Apr 2007 09:18:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 02:18:24 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 02:18:16 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1362717ugc
        for <java-user@lucene.apache.org>; Sun, 01 Apr 2007 02:17:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aPilAELdrR6ndwIOYiQKcPt0UyPVNyiWBZP61G+8lCkerT2oHf+rQCDeq0CSL75sr5VPTwgqwEY6VPEIro2rklpzqXfPo0ioK08J4TpxtW4h54OsaZWUN28NTBbL7brZn8jVtrexNzqg1PXckvkQvDZ5gZTdxH6YduQhbIulNFw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I61Wxn6nCR426NgTotzVc9hq6JOC3/Tii5x5xVmszAwAUHzGbNYNUu4CXtxeaJ0XftZWhg7d8+el524J22Qa64c8u5LFosqqFT1lRJjx2Z73gYJl+wlHeuJmkPyOGaE6rWZn/fvvJSayroYVvHyjxVQgvfix254VCf4HWojtsyA=
Received: by 10.78.172.20 with SMTP id u20mr1323897hue.1175419075257;
        Sun, 01 Apr 2007 02:17:55 -0700 (PDT)
Received: by 10.78.133.19 with HTTP; Sun, 1 Apr 2007 02:17:55 -0700 (PDT)
Message-ID: <34b8543c0704010217s2d6e4e1code0e7756048438e7@mail.gmail.com>
Date: Sun, 1 Apr 2007 12:47:55 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Emulating Pages Search
In-Reply-To: <Pine.LNX.4.58.0704010056510.7628@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57756_21925191.1175419075216"
References: <9775141.post@talk.nabble.com>
	 <Pine.LNX.4.58.0704010056510.7628@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57756_21925191.1175419075216
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mosen,
In order to support pagination, I wrapped the Hits is a class just like
java.sql.ResultSet
You can create a wrapper class and put the Hits in that and implement some
methods like next() prev() to forward and backward through the docuements.

Hope this help you.

-- 
Regards,
Mohammad

------=_Part_57756_21925191.1175419075216--

From java-user-return-27302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 01 11:10:57 2007
Return-Path: <java-user-return-27302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6314 invoked from network); 1 Apr 2007 11:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2007 11:10:56 -0000
Received: (qmail 46767 invoked by uid 500); 1 Apr 2007 11:10:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46729 invoked by uid 500); 1 Apr 2007 11:10:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46718 invoked by uid 99); 1 Apr 2007 11:10:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 04:10:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 04:10:47 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HXxx5-0001oo-1Y
	for java-user@lucene.apache.org; Sun, 01 Apr 2007 04:10:27 -0700
Message-ID: <9776722.post@talk.nabble.com>
Date: Sun, 1 Apr 2007 04:10:27 -0700 (PDT)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Emulating Pages Search
In-Reply-To: <34b8543c0704010217s2d6e4e1code0e7756048438e7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
References: <9775141.post@talk.nabble.com> <Pine.LNX.4.58.0704010056510.7628@hal.rescomp.berkeley.edu> <34b8543c0704010217s2d6e4e1code0e7756048438e7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


This is possible, but the problem here is performance. Why is it not possible
to support pagination in a more efficient way? Suppose, a Searcher looks
through Documents and find the matching ones. Theoretically, it can stop
searching when the result hit number gets more than a threshold. Searcher
may save it's state (reference to the last matched document) whithin the
searcher instance, making it possible for incremental search.

What is the restriction here in Lucene indices structure, which prevents us
from having this kind of search?


is_maximum wrote:
> 
> Mosen,
> In order to support pagination, I wrapped the Hits is a class just like
> java.sql.ResultSet
> You can create a wrapper class and put the Hits in that and implement some
> methods like next() prev() to forward and backward through the docuements.
> 
> Hope this help you.
> 
> -- 
> Regards,
> Mohammad
> 

-- 
View this message in context: http://www.nabble.com/Emulating-Pages-Search-tf3500169.html#a9776722
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 01 11:35:01 2007
Return-Path: <java-user-return-27303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14110 invoked from network); 1 Apr 2007 11:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2007 11:35:00 -0000
Received: (qmail 68083 invoked by uid 500); 1 Apr 2007 11:35:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68048 invoked by uid 500); 1 Apr 2007 11:35:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68037 invoked by uid 99); 1 Apr 2007 11:35:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 04:35:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 04:34:51 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1384835ugc
        for <java-user@lucene.apache.org>; Sun, 01 Apr 2007 04:34:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UURJwLqVEXXL+op3kyxJwqie6MW++bY0MebfiNGrqv4BZfXVYGAffcLJjeqR1YirYFTkRSuOsBRXE5xYjSorR28Bv3dwYUeZJ+rFIMXQPydJeBxCN5XZzRxU/cQEYft228xlOC4GV99WfprC1Buj8uCjADplz4bdUR/+2yuIxE0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d2j1/OBU6gR1kq0lD4nCYhfdsvtHGAfdMzeo0lUtAP060WqsL3jnrfPz1/LDUgCdl8CVVeacS4ztSHkgyBUaSeHJc588L7XvOq50lzHhIdQPXhXNwik40juyUvUnLmfrOrq8zOi+VZx32cQFikVdx5nHIxIiA6nO+EnPxIZWIBM=
Received: by 10.78.123.4 with SMTP id v4mr1318556huc.1175427269893;
        Sun, 01 Apr 2007 04:34:29 -0700 (PDT)
Received: by 10.78.133.19 with HTTP; Sun, 1 Apr 2007 04:34:29 -0700 (PDT)
Message-ID: <34b8543c0704010434v1243c5d8pa3977390aaa38335@mail.gmail.com>
Date: Sun, 1 Apr 2007 15:04:29 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Emulating Pages Search
In-Reply-To: <9776722.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58688_30444158.1175427269861"
References: <9775141.post@talk.nabble.com>
	 <Pine.LNX.4.58.0704010056510.7628@hal.rescomp.berkeley.edu>
	 <34b8543c0704010217s2d6e4e1code0e7756048438e7@mail.gmail.com>
	 <9776722.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58688_30444158.1175427269861
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It has no performance problem and works fine.
whenever you are going to access a document the searcher will load the
document from the index.

On 4/1/07, Mohsen Saboorian <mohsens@gmail.com> wrote:
>
>
> This is possible, but the problem here is performance. Why is it not
> possible
> to support pagination in a more efficient way? Suppose, a Searcher looks
> through Documents and find the matching ones. Theoretically, it can stop
> searching when the result hit number gets more than a threshold. Searcher
> may save it's state (reference to the last matched document) whithin the
> searcher instance, making it possible for incremental search.
>
> What is the restriction here in Lucene indices structure, which prevents
> us
> from having this kind of search?
>
>
> is_maximum wrote:
> >
> > Mosen,
> > In order to support pagination, I wrapped the Hits is a class just like
> > java.sql.ResultSet
> > You can create a wrapper class and put the Hits in that and implement
> some
> > methods like next() prev() to forward and backward through the
> docuements.
> >
> > Hope this help you.
> >
> > --
> > Regards,
> > Mohammad
> >
>
> --
> View this message in context:
> http://www.nabble.com/Emulating-Pages-Search-tf3500169.html#a9776722
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad

------=_Part_58688_30444158.1175427269861--

From java-user-return-27304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 01 12:36:34 2007
Return-Path: <java-user-return-27304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25709 invoked from network); 1 Apr 2007 12:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2007 12:36:32 -0000
Received: (qmail 14806 invoked by uid 500); 1 Apr 2007 12:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14764 invoked by uid 500); 1 Apr 2007 12:36:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14753 invoked by uid 99); 1 Apr 2007 12:36:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 05:36:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 05:36:24 -0700
Received: by wx-out-0506.google.com with SMTP id i29so912882wxd
        for <java-user@lucene.apache.org>; Sun, 01 Apr 2007 05:36:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ulRLFAG5sA+6OzyWzSUd8eU6ZAmdOk2h9gnze6B2NV0rmeB1tFRp9qwStaCtKZZvNzGvRiC/QDks7sxUyGHMAnvVJ8A3wboa5mLDTnfyjP/ddqmtzwiujYNkkvSVke0L4ByXG2m+Ogp5gpHg6CL9vXrlWXqoGTfU70UbXuXRVFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JjX5scqSXrvxM2JvSBHz6MP2Fj9+9Bw1JzzNEJVGMgNGHVp3nVop2Bq9RgF0gZo1Ku4tVdOfcbVK1yxFN+b8AzVndCBDhLFaSb4+taxbuxtgPzFVSBgQun43Y6kZ6LnpyoUSmdz6ZGc9IweDJ8C8mE5e67NF2w6piWm4lkDdl70=
Received: by 10.114.181.1 with SMTP id d1mr1445762waf.1175430962372;
        Sun, 01 Apr 2007 05:36:02 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Sun, 1 Apr 2007 05:36:02 -0700 (PDT)
Message-ID: <359a92830704010536s70d687f1ta5b25b9b6eb8f197@mail.gmail.com>
Date: Sun, 1 Apr 2007 08:36:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Emulating Pages Search
In-Reply-To: <9776722.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_94785_1539342.1175430962331"
References: <9775141.post@talk.nabble.com>
	 <Pine.LNX.4.58.0704010056510.7628@hal.rescomp.berkeley.edu>
	 <34b8543c0704010217s2d6e4e1code0e7756048438e7@mail.gmail.com>
	 <9776722.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_94785_1539342.1175430962331
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Efficient in your situation, maybe. Good for everybody? Probably not.
The key is exactly your use of the word "state". Personally, I do
NOT want the core search engine to be stateful, that brings a whole
raft of problems with it. And Lucene is a search engine, not a search
application.

I really don't want my underlying search engine to keep track of the
states of many thousands of, say, web users. This, without even
asking the question of how to keep track of the state for each
user in a complex web application. Not to mention the added
requirements that I somehow indicate to Lucene which user's state
to use.

And I'm not even going to go down the path of how to accomplish
the bookkeeping for dropped sessions, timeouts, coordinating
underlying index changes with all these states, etc. etc. etc. I think
that if you consider the larger community, asking Lucene to
"save its state" is much more complex that you think.

That said, I can certainly imagine that there are situations where
making the search process stateful is a good thing. But do you
have any evidence that the current architecture actually is hurting
you other than "theoretically"? I certainly wouldn't go down the
stateful path until I'd demonstrated this in my situation.

If, however, you'd like to make a stateful way to do things and
submit it to the contrib section, I'm sure the guys would be
thrilled.

Erick

On 4/1/07, Mohsen Saboorian <mohsens@gmail.com> wrote:
>
>
> This is possible, but the problem here is performance. Why is it not
> possible
> to support pagination in a more efficient way? Suppose, a Searcher looks
> through Documents and find the matching ones. Theoretically, it can stop
> searching when the result hit number gets more than a threshold. Searcher
> may save it's state (reference to the last matched document) whithin the
> searcher instance, making it possible for incremental search.
>
> What is the restriction here in Lucene indices structure, which prevents
> us
> from having this kind of search?
>
>
> is_maximum wrote:
> >
> > Mosen,
> > In order to support pagination, I wrapped the Hits is a class just like
> > java.sql.ResultSet
> > You can create a wrapper class and put the Hits in that and implement
> some
> > methods like next() prev() to forward and backward through the
> docuements.
> >
> > Hope this help you.
> >
> > --
> > Regards,
> > Mohammad
> >
>
> --
> View this message in context:
> http://www.nabble.com/Emulating-Pages-Search-tf3500169.html#a9776722
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_94785_1539342.1175430962331--

From java-user-return-27305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 01 14:28:58 2007
Return-Path: <java-user-return-27305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54010 invoked from network); 1 Apr 2007 14:28:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2007 14:28:56 -0000
Received: (qmail 26652 invoked by uid 500); 1 Apr 2007 14:28:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26608 invoked by uid 500); 1 Apr 2007 14:28:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26597 invoked by uid 99); 1 Apr 2007 14:28:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 07:28:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.196.97.113] (HELO web57009.mail.re3.yahoo.com) (66.196.97.113)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 01 Apr 2007 07:28:46 -0700
Received: (qmail 36434 invoked by uid 60001); 1 Apr 2007 14:28:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=lDb64WRJQ5udI2AKCSVoGOWErCXRPlT2gwE7Bj/kHZaUMftENj2V+5xzzQZsj8EzOxqXqUhWaur6zLmQpYFjy8z3+h2dBBZwIVkILL4mE7msJujY7xtTZyTmWP1dVaEg2SjUPSJY/q2VX5+558+ejjUV0i1CK0xGXECLG0LLcC4=;
X-YMail-OSG: Pu5BFwgVM1mfet3B9xy23qJ1aUKR09IHJVSNsG7nWF5ce0FspMywvlkSYbdnL2n.dzd2wCZMJOmOUKhaZW8OpMgGqWcqmsek1LTfu.cHzQZec6_693hbGgpClsOjQQ--
Received: from [69.255.227.192] by web57009.mail.re3.yahoo.com via HTTP; Sun, 01 Apr 2007 07:28:24 PDT
Date: Sun, 1 Apr 2007 07:28:24 -0700 (PDT)
From: Xiaocheng Luan <jenaluan@yahoo.com>
Subject: Re: Emulating Pages Search
To: java-user@lucene.apache.org
In-Reply-To: <9775141.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1832818301-1175437704=:36431"
Content-Transfer-Encoding: 8bit
Message-ID: <415546.36431.qm@web57009.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1832818301-1175437704=:36431
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Just to add to the thoughtful responses from the others, it isn't really that bad to do a new search each time. First, the later searches may likely be "warm" searches and thus won't take as long as the first search; second, it's the searcher.doc(docId) part that will likely hurt the most, but hopefully you'll only need to do that for one "page" at a time only (for each request).

Thanks,
Xiaocheng

Mohsen Saboorian <mohsens@gmail.com> wrote: 
Hi,
Is there a way to do emulate paged search in Lucene? I can use the following
peace of code for returning the first page (10 items in each page), but
don't know how to navigate to the next page :-)

 IndexSearcher is = new ...
 ...
 TopFieldDocs tops = is.search(query, null /*filter*/, 10, Sort.RELEVANCE);
 for (int i = 0; i < tops.scoreDocs.length; i++) {
  ScoreDoc scoreDoc = tops.scoreDocs[i];
  System.out.println(is.doc(scoreDoc.doc));
 }

I can see that tops.totalHits, returns all matched documents. So is this
really "paged search", or I'm just doing a complete search and put a window
on the returned result each time?

Thanks.
-- 
View this message in context: http://www.nabble.com/Emulating-Pages-Search-tf3500169.html#a9775141
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
Sucker-punch spam with award-winning protection.
 Try the free Yahoo! Mail Beta.
--0-1832818301-1175437704=:36431--

From java-user-return-27306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 01 21:17:36 2007
Return-Path: <java-user-return-27306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66814 invoked from network); 1 Apr 2007 21:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Apr 2007 21:17:35 -0000
Received: (qmail 17580 invoked by uid 500); 1 Apr 2007 21:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17228 invoked by uid 500); 1 Apr 2007 21:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17217 invoked by uid 99); 1 Apr 2007 21:17:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 14:17:35 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 14:17:26 -0700
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l31LGvdd004332
	for <java-user@lucene.apache.org>; Mon, 2 Apr 2007 00:16:59 +0300
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id m420gje8; 2 Apr 2007 00:16:00 +0300
Message-ID: <4610214B.9000008@teamware.com>
Date: Mon, 02 Apr 2007 07:16:59 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Help - FileNotFoundException during IndexWriter.init()
References: <460E159A.2080403@teamware.com>   <1175329701.15890.1182336787@webmail.messagingengine.com>   <460E2979.90105@teamware.com> <1175347037.2916.1182354097@webmail.messagingengine.com>
In-Reply-To: <1175347037.2916.1182354097@webmail.messagingengine.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Mon, 02 Apr 2007 00:16:59 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:

>> Yes, I've disabled it currently while the new test runs.  Let's see. 
>> I'll re-run the test a few more times and see if I can re-create the problem.
> 
> OK let's see if that makes it go away!  Hopefully :)

I ran the tests several times over the weekend with no virus checker in the DB 
directory and haven't managed to reproduce the problem.

Thanks for the help Mike.  Nothing like an exception never seen before, two days 
before the product is due to go live, to induce mild panic ;)

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 00:22:32 2007
Return-Path: <java-user-return-27307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95447 invoked from network); 2 Apr 2007 00:22:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 00:22:31 -0000
Received: (qmail 50937 invoked by uid 500); 2 Apr 2007 00:22:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50901 invoked by uid 500); 2 Apr 2007 00:22:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50890 invoked by uid 99); 2 Apr 2007 00:22:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 17:22:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 17:22:23 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id EC6E2210E91
	for <java-user@lucene.apache.org>; Sun,  1 Apr 2007 20:22:04 -0400 (EDT)
Received: from web4.messagingengine.com ([10.202.2.213])
  by compute2.internal (MEProxy); Sun, 01 Apr 2007 20:22:03 -0400
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 61EC416852F; Sun,  1 Apr 2007 20:22:03 -0400 (EDT)
Message-Id: <1175473323.26332.1182503411@webmail.messagingengine.com>
X-Sasl-Enc: aw3sv87i9ilQwCv1hk0Fiw/Yhs4jZZ+aP0BgCHHRxu/i 1175473323
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <460E159A.2080403@teamware.com>
   <1175329701.15890.1182336787@webmail.messagingengine.com>
   <460E2979.90105@teamware.com>
   <1175347037.2916.1182354097@webmail.messagingengine.com>
   <4610214B.9000008@teamware.com>
Subject: Re: Help - FileNotFoundException during IndexWriter.init()
In-Reply-To: <4610214B.9000008@teamware.com>
Date: Sun, 01 Apr 2007 20:22:03 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Antony Bowesman" <adb@teamware.com> wrote:
> Michael McCandless wrote:
> 
> >> Yes, I've disabled it currently while the new test runs.  Let's see. 
> >> I'll re-run the test a few more times and see if I can re-create the problem.
> > 
> > OK let's see if that makes it go away!  Hopefully :)
> 
> I ran the tests several times over the weekend with no virus checker in the DB 
> directory and haven't managed to reproduce the problem.
> 
> Thanks for the help Mike.  Nothing like an exception never seen before, two days 
> before the product is due to go live, to induce mild panic ;)

Phew, I'm glad to hear that!  Thanks for bringing closure to this.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 06:11:44 2007
Return-Path: <java-user-return-27308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72138 invoked from network); 2 Apr 2007 06:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 06:11:43 -0000
Received: (qmail 61192 invoked by uid 500); 2 Apr 2007 06:11:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61160 invoked by uid 500); 2 Apr 2007 06:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61148 invoked by uid 99); 2 Apr 2007 06:11:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 23:11:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nileshbansal@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2007 23:11:33 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1568824ugc
        for <java-user@lucene.apache.org>; Sun, 01 Apr 2007 23:11:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=tsjrlm81BWU7dp8p5YzUeGqDu49JRiuCv6fqmkP0rEje5EoBuvBja6Oshl7bNGwgg0fG3OJb5YYgGvTTKya4sDiU/bG9yLnkN4Ts3DRI4SgmY82PSBZTmOk4dlkFeEkvgmBJ2xfU9ZQlv9oRO4yT+avFZhF2jkAmsgmld0GQMts=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OqH+LAfdsn7HNLldgxv4FlgcfUPiLafQ0RuRw24xjb5RPAS7HWunyxfqpEA0p8iSZn72vrKXFIWXKD42ShVzl3nJR12PZ5SsEL7VIGjr+swx0CbuX4MQ3Z6bnYImYLJKHnopl6sXjJ85OIqzR7IFgWXICLXTXa4Cf8PbIk28Rhk=
Received: by 10.78.189.5 with SMTP id m5mr1392542huf.1175494272505;
        Sun, 01 Apr 2007 23:11:12 -0700 (PDT)
Received: by 10.78.52.2 with HTTP; Sun, 1 Apr 2007 23:11:12 -0700 (PDT)
Message-ID: <f36128690704012311t2698db52jab5c70f8bdc46b3e@mail.gmail.com>
Date: Mon, 2 Apr 2007 02:11:12 -0400
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lock files in a read-only application
In-Reply-To: <1175416717.31966.1182428433@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f36128690703311609h1cdec6c8r466ef6ad8c840e9d@mail.gmail.com>
	 <1175389396.31756.1182405653@webmail.messagingengine.com>
	 <f36128690703311830u348ab792p48f135e1d2bb740e@mail.gmail.com>
	 <Pine.LNX.4.58.0703311843260.21615@hal.rescomp.berkeley.edu>
	 <1175416717.31966.1182428433@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

thanks for your replies. i have two more questions.
> You need to be really certain your own locking protects Lucene
> properly.  Specifically, no IndexReader can be created (restarted)
> while a writer is open against the index, and, only one writer can be
> open on the index at once (it sounds like you already have that).  If
> you're sure about that then disabling the locks as Hoss describes
> above is OK.
1. If our locking fails, what will happen in the worst case, i.e., an
IndexSearcher tries to read while an IndexWriter is updating the
index. Can it lead to index corruption, or just that the searcher will
give garbage results (or fail with exception) for that query.

2. Currently we are not using any IndexReader. When a request arrives,
we create a new IndexSearcher, and destroy it when it finishes
searching. Is it more efficient to create just one IndexSearcher and
share it with all threads? Or create one IndexReader and use it for
creating all IndexSearchers.

thanks again,
Nilesh

-- 
Nilesh Bansal.
http://queens.db.toronto.edu/~nilesh/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 08:42:45 2007
Return-Path: <java-user-return-27309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18255 invoked from network); 2 Apr 2007 08:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 08:42:44 -0000
Received: (qmail 52095 invoked by uid 500); 2 Apr 2007 08:42:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52065 invoked by uid 500); 2 Apr 2007 08:42:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52054 invoked by uid 99); 2 Apr 2007 08:42:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 01:42:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 01:42:35 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 55ED621147C
	for <java-user@lucene.apache.org>; Mon,  2 Apr 2007 04:42:17 -0400 (EDT)
Received: from web2.messagingengine.com ([10.202.2.211])
  by compute1.internal (MEProxy); Mon, 02 Apr 2007 04:42:15 -0400
Received: by web2.messagingengine.com (Postfix, from userid 99)
	id 623593801C; Mon,  2 Apr 2007 04:42:15 -0400 (EDT)
Message-Id: <1175503335.15866.1182550165@webmail.messagingengine.com>
X-Sasl-Enc: rdf4cnq/R34hD4o2co0TQgi1kO/YF3tgSUNFw3zyCrB+ 1175503335
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <f36128690703311609h1cdec6c8r466ef6ad8c840e9d@mail.gmail.com>
   <1175389396.31756.1182405653@webmail.messagingengine.com>
   <f36128690703311830u348ab792p48f135e1d2bb740e@mail.gmail.com>
   <Pine.LNX.4.58.0703311843260.21615@hal.rescomp.berkeley.edu>
   <1175416717.31966.1182428433@webmail.messagingengine.com>
   <f36128690704012311t2698db52jab5c70f8bdc46b3e@mail.gmail.com>
Subject: Re: Lock files in a read-only application
In-Reply-To: <f36128690704012311t2698db52jab5c70f8bdc46b3e@mail.gmail.com>
Date: Mon, 02 Apr 2007 04:42:15 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Nilesh Bansal" <nileshbansal@gmail.com> wrote:
> thanks for your replies. i have two more questions.
> > You need to be really certain your own locking protects Lucene
> > properly.  Specifically, no IndexReader can be created (restarted)
> > while a writer is open against the index, and, only one writer can be
> > open on the index at once (it sounds like you already have that).  If
> > you're sure about that then disabling the locks as Hoss describes
> > above is OK.
> 1. If our locking fails, what will happen in the worst case, i.e., an
> IndexSearcher tries to read while an IndexWriter is updating the
> index. Can it lead to index corruption, or just that the searcher will
> give garbage results (or fail with exception) for that query.

As long as you only have one writer and the only risk is that
IndexSearcher is opening without proper locking, I believe the worst
that will happen is actually quite benign and quickly detected: the
IndexReader (IndexSearcher just creates IndexReader under the hood)
will hit some sort of IOException while instantiating.  If it
instantiates without an IOException it should then do searches just
fine, correctly.  I *think* this is the case but I honestly haven't
explored this area too heavily so this is somewhat speculation :)
But I'm quite sure your index will not be corrupted, ie, the worst
that happens is the IndexReader has problems.

And, this is assuming your index is not on NFS, which has its own
challenges (even beyond locking).

> 2. Currently we are not using any IndexReader. When a request arrives,
> we create a new IndexSearcher, and destroy it when it finishes
> searching. Is it more efficient to create just one IndexSearcher and
> share it with all threads? Or create one IndexReader and use it for
> creating all IndexSearchers.

You don't need to use IndexReader; IndexSearcher creates its own
IndexReader.  But, it is substantially more efficient to create a
single IndexSearcher and then use it for all threads that need to do
searching, periodically re-instantiating it when you want index
changes to be visible to your users.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 11:38:56 2007
Return-Path: <java-user-return-27310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72248 invoked from network); 2 Apr 2007 11:38:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 11:38:56 -0000
Received: (qmail 537 invoked by uid 500); 2 Apr 2007 11:38:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 249 invoked by uid 500); 2 Apr 2007 11:38:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 232 invoked by uid 99); 2 Apr 2007 11:38:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 04:38:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 04:38:47 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HYKri-0008T5-O9
	for java-user@lucene.apache.org; Mon, 02 Apr 2007 04:38:26 -0700
Message-ID: <9789072.post@talk.nabble.com>
Date: Mon, 2 Apr 2007 04:38:26 -0700 (PDT)
From: baronDodd <campbaron@hotmail.com>
To: java-user@lucene.apache.org
Subject: Searches fail while indexwriter is open
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: campbaron@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am currently writing a Lucene application and having a huge headache with
concurrency.

My requirements are that each time a file is indexed a search on its path is
performed to see if an update (delete then re-index) is required. If a
document with the same path exists then an IndexReader deletes the doc and
then a writer reindexes the fiel. Sadly due to requirements the deletes and
indexes can not be batch performed and I am constantly opening and closing
the IndexReader and IndexWriter between multiple threads. Everything has
been working fine and seems thread safe apart from this:

 If I index a test batch of 10 files and then once again a few minutes later
repeat the operation on the same files then all 10 are updated ok. However
when I perform the same test with more than about 10 files then my searches
fail to find about 25% of the already existing files and I end up with
duplicate entries in the index. I have managed to fix this by closing the
indexWriter every time an update search is performed but this has taken
performance to almost embarrasing levels! My understanding was that you
could search a Lucene index with an IndexSearcher while any write operations
are taking place? Is it possible that the search skips segments which are
currently being written to?
-- 
View this message in context: http://www.nabble.com/Searches-fail-while-indexwriter-is-open-tf3505182.html#a9789072
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 11:58:34 2007
Return-Path: <java-user-return-27311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77549 invoked from network); 2 Apr 2007 11:58:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 11:58:33 -0000
Received: (qmail 36934 invoked by uid 500); 2 Apr 2007 11:58:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36888 invoked by uid 500); 2 Apr 2007 11:58:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36877 invoked by uid 99); 2 Apr 2007 11:58:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 04:58:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [196.204.161.5] (HELO sexgw3k-h2035.local.bibalex.dom) (196.204.161.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 04:58:22 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7751E.3344A70E"
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: Morphological Search Problem
Date: Mon, 2 Apr 2007 13:57:42 +0200
Message-ID: <AFB7D5AE9669D9489F6DA33E6981B7E301E9DC45@sexgw3k-h2035.local.bibalex.dom>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Morphological Search Problem
Thread-Index: Acd1Hh60LIz7X0qQQii+NAfRKj8WnQ==
From: "Shaimaa Mohamed" <Shaimaa.Mohamed@bibalex.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7751E.3344A70E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Dear all,

We are using a Unified Analyzer as the analyzer of Lucene so as to be
able to index and search Arabic and English documents as well.

Here is the code:

=20

public TokenStream tokenStream(String FieldName, Reader reader)

    {

           =20

            switch(analysisMode) {

                  case UNIFIED:

                        return new ExactTokensContructorFilter(=20

                                    new SnowballFilter(

                                                      new ArabicStemmer(

                                                                  new
ExactTokensSpecifierFilter(

=20
getStandardAnalyzerStream(

=20
reader)),=20

                                                            false,false)

                                ,latinLanguage));

                  case EXACT:

                        return new ExactTokensContructorFilter(=20

                                                new
ExactTokensSpecifierFilter(

=20
getStandardAnalyzerStream(

=20
reader)));

            }

            return null;

    }

=20

But the problem is that the results of the morphological search in
English and Arabic are not good, for example:

The data in which I search contains "test", "testing" and "tested", then
when I search for "testing", it doesn't give "test" in the search
results, although that when I traced it I found that the tokens of
"testing" contains "test". But when I search for "manage", it gives me
"management" in the search results which is correct. So what's the
difference between both cases?

=20

Beside that I tried to use only the Snowball Analyzer instead of the
Unified Analyzer and apply the same test but this time it gives correct
and good results!!

So can anyone help, why using Unified Analyzer affects the results?

=20

Note: latinLanguage in the above code =3D "English"

=20

Thanks & Best Regards,

------------------------------------

Shaimaa Mohamed

Team Leader

ICT Department

Bibliotheca Alexandrina

P.O. Box 138, Chatby

Alexandria 21526, Egypt

Tel: +(203) 483 9999, Ext:1418

Fax: +(203) 482 0405

Email: Shaimaa.Mohamed@bibalex.org
<BLOCKED::mailto:Shaimaa.Mohamed@bibalex.org>=20

Web Site: www.bibalex.org <blocked::http://www.bibalex.org>=20

=20

=20


------_=_NextPart_001_01C7751E.3344A70E--

From java-user-return-27312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 12:56:12 2007
Return-Path: <java-user-return-27312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97640 invoked from network); 2 Apr 2007 12:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 12:56:12 -0000
Received: (qmail 30304 invoked by uid 500); 2 Apr 2007 12:56:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30268 invoked by uid 500); 2 Apr 2007 12:56:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30247 invoked by uid 99); 2 Apr 2007 12:56:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 05:56:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 05:55:59 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1138617wxd
        for <java-user@lucene.apache.org>; Mon, 02 Apr 2007 05:55:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=q3Q7Wr45d1h0bGto0FnHh8g7e/1GEefGujz4emauN4LyI1UvCe0JL3TF7YDaAtUDqRYO4g07b97JoEsKz6D+SxHt/XMKNxurnsGhH4oSUQebxWG+DLefCWrvrFEed0EfPfR/cumtVx43zZ1wQ3vYAK20wsTOa2MYychRa7On7rA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ANPXy/eUYLeBbf2JJR97RggAyQ3qpK3ZHt5quhhhBZT+9ocAS1okWzHQa8jksN4CiQZ29YD/KhlLALg9XrcVYCUZFlYoZcGCZdCbr3ZuJZpqHY88aT1jPvai9LiajjT+Aoc9+if5h07CR7nokmyleO8N24w5YdtfVTHMuDm3bNc=
Received: by 10.70.113.16 with SMTP id l16mr8655919wxc.1175518538505;
        Mon, 02 Apr 2007 05:55:38 -0700 (PDT)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id h10sm6308017wxd.2007.04.02.05.55.36;
        Mon, 02 Apr 2007 05:55:36 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <AFB7D5AE9669D9489F6DA33E6981B7E301E9DC45@sexgw3k-h2035.local.bibalex.dom>
References: <AFB7D5AE9669D9489F6DA33E6981B7E301E9DC45@sexgw3k-h2035.local.bibalex.dom>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <47A1E203-9DBA-492C-BA1B-7996E1EDF91C@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Morphological Search Problem
Date: Mon, 2 Apr 2007 08:55:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have you used Luke to see what is actually in the index?  Or written  
some test cases for your analyzer to know that the appropriate tokens  
are coming out of your analyzer?

Also, could you give more details about the filters you are using?  I  
am not familiar w/ ExactTokensConstructorFilter, etc.

The formatting is a little hard to read, but I think it says you are  
passing the ArabicStemmer to the SnowballFilter, correct?  I assume  
you are dealing w/ mixed content, correct?  That is, you have Arabic  
and English in the same token stream? I know when I was working on  
our Arabic/English project, we had to be careful about mixed content  
like this.



On Apr 2, 2007, at 7:57 AM, Shaimaa Mohamed wrote:

> Dear all,
>
> We are using a Unified Analyzer as the analyzer of Lucene so as to be
> able to index and search Arabic and English documents as well.
>
> Here is the code:
>
>
>
> public TokenStream tokenStream(String FieldName, Reader reader)
>
>     {
>
>
>
>             switch(analysisMode) {
>
>                   case UNIFIED:
>
>                         return new ExactTokensContructorFilter(
>
>                                     new SnowballFilter(
>
>                                                       new  
> ArabicStemmer(
>
>                                                                   new
> ExactTokensSpecifierFilter(
>
>
> getStandardAnalyzerStream(
>
>
> reader)),
>
>                                                              
> false,false)
>
>                                 ,latinLanguage));
>
>                   case EXACT:
>
>                         return new ExactTokensContructorFilter(
>
>                                                 new
> ExactTokensSpecifierFilter(
>
>
> getStandardAnalyzerStream(
>
>
> reader)));
>
>             }
>
>             return null;
>
>     }
>
>
>
> But the problem is that the results of the morphological search in
> English and Arabic are not good, for example:
>
> The data in which I search contains "test", "testing" and "tested",  
> then
> when I search for "testing", it doesn't give "test" in the search
> results, although that when I traced it I found that the tokens of
> "testing" contains "test". But when I search for "manage", it gives me
> "management" in the search results which is correct. So what's the
> difference between both cases?
>
>
>
> Beside that I tried to use only the Snowball Analyzer instead of the
> Unified Analyzer and apply the same test but this time it gives  
> correct
> and good results!!
>
> So can anyone help, why using Unified Analyzer affects the results?
>
>
>
> Note: latinLanguage in the above code = "English"
>
>
>
> Thanks & Best Regards,
>
> ------------------------------------
>
> Shaimaa Mohamed
>
> Team Leader
>
> ICT Department
>
> Bibliotheca Alexandrina
>
> P.O. Box 138, Chatby
>
> Alexandria 21526, Egypt
>
> Tel: +(203) 483 9999, Ext:1418
>
> Fax: +(203) 482 0405
>
> Email: Shaimaa.Mohamed@bibalex.org
> <BLOCKED::mailto:Shaimaa.Mohamed@bibalex.org>
>
> Web Site: www.bibalex.org <blocked::http://www.bibalex.org>
>
>
>
>
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 13:32:59 2007
Return-Path: <java-user-return-27313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16825 invoked from network); 2 Apr 2007 13:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 13:32:58 -0000
Received: (qmail 9046 invoked by uid 500); 2 Apr 2007 13:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9016 invoked by uid 500); 2 Apr 2007 13:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9001 invoked by uid 99); 2 Apr 2007 13:32:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 06:32:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 06:32:49 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1661968ugc
        for <java-user@lucene.apache.org>; Mon, 02 Apr 2007 06:32:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ez+Eohgwf5BCdjnkOPCaq+tbXhPzYYGDDZ0USlEa9NBREfMZPkxBgChRbAhGTYTOTM9r3sopUSQ37eC28Cmsf+yqYmfqdj3lMS0RsWAMwVLHC8BIVg1YqePaMSsA/lsGRAAY/BJklfxJiWzRWrthWOXz61veW+Eox8H8PrPG0sQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gJ+xEkxT3U6wR3DLRBbylt8XK3Mp6RlGNY0aNnrmQtHWVMo1Qw9cXza+HK1vg+zTsiAgttlUau9L3aJ49/mKZ/8TR0NPsbMWLmY3l+UBf5u1nKbFhTQVHy8JzxhzQBtF/oR6q6soNh0XI7fIqkgZhzzOpIvpaT14fxpzxx9EqFc=
Received: by 10.114.52.1 with SMTP id z1mr1790176waz.1175520745359;
        Mon, 02 Apr 2007 06:32:25 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Mon, 2 Apr 2007 06:32:25 -0700 (PDT)
Message-ID: <359a92830704020632w6a8d4178w259ccdbb00070bf1@mail.gmail.com>
Date: Mon, 2 Apr 2007 09:32:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searches fail while indexwriter is open
In-Reply-To: <9789072.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_108772_9397154.1175520745299"
References: <9789072.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_108772_9397154.1175520745299
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, you can search while index writes are taking place, but....

When you open an index reader, it essentially takes a snapshot
of the index and further modifications of the index are not visible to
that searcher as long as it's open. You must close and re-open the
reader (and associated searchers) to see your changes. How this
interacts with index writer flushing is...er...well I don't exactly know,
but this could well be an issue...

I wonder if this is what you're seeing. In broad terms, the base
question is how quickly you need to see changes in the index reflected
in your search results.

I suspect that the 10 file thing is a red herring, what do you have your
indexwriter parameters set at? Especially maxbuffereddocs (which has
a default value, perhaps not coincidentally, of 10).......

Lucene 2.1 has an IndexWriter.flush() method that could help......

Erick

On 4/2/07, baronDodd <campbaron@hotmail.com> wrote:
>
>
> I am currently writing a Lucene application and having a huge headache
> with
> concurrency.
>
> My requirements are that each time a file is indexed a search on its path
> is
> performed to see if an update (delete then re-index) is required. If a
> document with the same path exists then an IndexReader deletes the doc and
> then a writer reindexes the fiel. Sadly due to requirements the deletes
> and
> indexes can not be batch performed and I am constantly opening and closing
> the IndexReader and IndexWriter between multiple threads. Everything has
> been working fine and seems thread safe apart from this:
>
> If I index a test batch of 10 files and then once again a few minutes
> later
> repeat the operation on the same files then all 10 are updated ok. However
> when I perform the same test with more than about 10 files then my
> searches
> fail to find about 25% of the already existing files and I end up with
> duplicate entries in the index. I have managed to fix this by closing the
> indexWriter every time an update search is performed but this has taken
> performance to almost embarrasing levels! My understanding was that you
> could search a Lucene index with an IndexSearcher while any write
> operations
> are taking place? Is it possible that the search skips segments which are
> currently being written to?
> --
> View this message in context:
> http://www.nabble.com/Searches-fail-while-indexwriter-is-open-tf3505182.html#a9789072
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_108772_9397154.1175520745299--

From java-user-return-27314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 14:57:43 2007
Return-Path: <java-user-return-27314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50555 invoked from network); 2 Apr 2007 14:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 14:57:42 -0000
Received: (qmail 80022 invoked by uid 500); 2 Apr 2007 14:57:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79316 invoked by uid 500); 2 Apr 2007 14:57:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79300 invoked by uid 99); 2 Apr 2007 14:57:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 07:57:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 07:57:33 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HYNy4-00007m-TA
	for java-user@lucene.apache.org; Mon, 02 Apr 2007 07:57:12 -0700
Message-ID: <9792429.post@talk.nabble.com>
Date: Mon, 2 Apr 2007 07:57:12 -0700 (PDT)
From: baronDodd <campbaron@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searches fail while indexwriter is open
In-Reply-To: <359a92830704020632w6a8d4178w259ccdbb00070bf1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: campbaron@hotmail.com
References: <9789072.post@talk.nabble.com> <359a92830704020632w6a8d4178w259ccdbb00070bf1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Many thanks for your response, some good points which I had not thought of,
but unfortunately the problem remains.

To clarify my index sequence in pseudo-code is this:

if( fileExists( filePath ) ){
       
       createIndexReader();
       delectDoc( docNumber );
}
createIndexWriter();
indexDoc();

I am indexing 30 files, and then repeating the same index job minutes later
which should result in 30 updates. My createIndexReader and writer methods
close the opposite modifier ok. My isExisting() method also creates a new
IndexSearcher instance. The question regarding the need to see index
modfications so quickly is not quite relevant as it is documents indexed
minutes or hours ago durin the first index job which are not being found,
simply because I have an indexWriter open at the time.

Sample from the first job:

Index Writer Open
Failed to find: C:\CBIS_test\updatetest\7.txt
7.txt written to index 
Failed to find: C:\CBIS_test\updatetest\5.txt
5.txt written to index 
Totals : Indexed 30 Updated: 0 (content analyzed: 30) files in 859
milliseconds
flushing
Index Writer Open
optimizing index

And then the 2nd job:

8.txt deleted 
Index Reader closed
Index Writer Open
8.txt written to index 
Failed to find: C:\CBIS_test\updatetest\7.txt
7.txt written to index 
Index Writer closed
Totals : Indexed 10 Updated: 20 (content analyzed: 30) files in 3606
milliseconds
flushing
Index Writer Open
optimizing index

I may be missing something obvious, the maxbuffereddocs value made no
difference when I changed it.



Erick Erickson wrote:
> 
> Yes, you can search while index writes are taking place, but....
> 
> When you open an index reader, it essentially takes a snapshot
> of the index and further modifications of the index are not visible to
> that searcher as long as it's open. You must close and re-open the
> reader (and associated searchers) to see your changes. How this
> interacts with index writer flushing is...er...well I don't exactly know,
> but this could well be an issue...
> 
> I wonder if this is what you're seeing. In broad terms, the base
> question is how quickly you need to see changes in the index reflected
> in your search results.
> 
> I suspect that the 10 file thing is a red herring, what do you have your
> indexwriter parameters set at? Especially maxbuffereddocs (which has
> a default value, perhaps not coincidentally, of 10).......
> 
> Lucene 2.1 has an IndexWriter.flush() method that could help......
> 
> Erick
> 
> On 4/2/07, baronDodd <campbaron@hotmail.com> wrote:
>>
>>
>> I am currently writing a Lucene application and having a huge headache
>> with
>> concurrency.
>>
>> My requirements are that each time a file is indexed a search on its path
>> is
>> performed to see if an update (delete then re-index) is required. If a
>> document with the same path exists then an IndexReader deletes the doc
>> and
>> then a writer reindexes the fiel. Sadly due to requirements the deletes
>> and
>> indexes can not be batch performed and I am constantly opening and
>> closing
>> the IndexReader and IndexWriter between multiple threads. Everything has
>> been working fine and seems thread safe apart from this:
>>
>> If I index a test batch of 10 files and then once again a few minutes
>> later
>> repeat the operation on the same files then all 10 are updated ok.
>> However
>> when I perform the same test with more than about 10 files then my
>> searches
>> fail to find about 25% of the already existing files and I end up with
>> duplicate entries in the index. I have managed to fix this by closing the
>> indexWriter every time an update search is performed but this has taken
>> performance to almost embarrasing levels! My understanding was that you
>> could search a Lucene index with an IndexSearcher while any write
>> operations
>> are taking place? Is it possible that the search skips segments which are
>> currently being written to?
>> --
>> View this message in context:
>> http://www.nabble.com/Searches-fail-while-indexwriter-is-open-tf3505182.html#a9789072
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Searches-fail-while-indexwriter-is-open-tf3505182.html#a9792429
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 16:51:14 2007
Return-Path: <java-user-return-27315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1034 invoked from network); 2 Apr 2007 16:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 16:51:13 -0000
Received: (qmail 76441 invoked by uid 500); 2 Apr 2007 16:51:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76411 invoked by uid 500); 2 Apr 2007 16:51:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76400 invoked by uid 99); 2 Apr 2007 16:51:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 09:51:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dziadgba@googlemail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 09:51:04 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1212383wxd
        for <java-user@lucene.apache.org>; Mon, 02 Apr 2007 09:50:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=googlemail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E2X8EyCUGWr0w61osLrU0SUgQogHEZEj+L71mZ7EXqrbzQS0VnriDDSTIkgKKK1WyCBU2KCqBdp6P6barrxTXv8r+D4AhrA+Y1jXGBWBU/Vk8HBWFP1CLLW07XkRMJV3iFJkmAlN36yKVbWHMF4/YyTJePQyohEhgK+StqX4IIU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ur6ZzOdUJNq7QBqTg6C99kgF/7hMwBYX7gS1rzrEEHadG16VUnkg0f2bODXm35TYzHh9DC6EnGgdhlChcW3QZcPuSXP0ohCHJW7E7HewiF2HC11XhE0IJ9CYTAHisnGR0iNxvAk5Q6BvISBTsS8aXjp6hob+98sxGTbZYdg3w9Q=
Received: by 10.90.120.13 with SMTP id s13mr3521694agc.1175532643593;
        Mon, 02 Apr 2007 09:50:43 -0700 (PDT)
Received: by 10.90.80.11 with HTTP; Mon, 2 Apr 2007 09:50:43 -0700 (PDT)
Message-ID: <59f453130704020950v5b83b490p4c0f598025934d5a@mail.gmail.com>
Date: Mon, 2 Apr 2007 18:50:43 +0200
From: "dziadgba dziadgba" <dziadgba@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: HITS and termDoc give different results
In-Reply-To: <OF3E98B691.F7BA4E83-ON8825729B.00251599-8825729B.0025F436@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85505_30692333.1175532643518"
References: <op.toy6ldi0329srq@idefix.residential.fw>
	 <OF3E98B691.F7BA4E83-ON8825729B.00251599-8825729B.0025F436@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85505_30692333.1175532643518
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

you were right
thanks for help
dziadgba

2007/3/11, Doron Cohen <DORONC@il.ibm.com>:
>
> Is "Text" the only field in the index?
>
> Note that the search only looks at field "Text", while the terms()
> iteration as appears in that code might bump into a term with same text
> but
> in another field. A better comparison would be to create a Term
> ("Text",<your-word>), and compare TermQuery(thatTerm) to
> termDocs(thatTerm). Btw, if iterating all terms is ever a must, note
> TermEnum.skipTo(Term).
>
> Hope this helps,
> Doron
>
> dziadgba <dziadgba@googlemail.com> wrote on 10/03/2007 05:33:03:
>
> > hye,
> > I want to extract documents which contain a specific term.
> > I tried to do it in two different ways:
> >
> > 1 Using the 'iterator' termdocs = reader.termDocs(term);
> > 2 Using search and examing Hits
> >
> > turns out that the result are sometimes equal, sometimes the first is a
> > subset of the
> > second and sometimes there is no connection between the two results.
> >
> > can somebody give me a hint?
> >
> > bye
> >
> >
> >     public void addDocumentsToTerm(int debug, String myterm) throws
> > Exception
> >      { TermEnum terms=reader.terms();
> >
> >        MyDocument doc;
> >        Document docLucene;
> >        int count=0;
> >        boolean b=false;
> >        if(debug==1) System.out.print("Checking (MyTerm) "+myterm+" ...
> ");
> >
> >        while (terms.next())
> >        { Term t = terms.term();
> >          if(t.text().compareTo(myterm)==0)
> >          { TermDocs termDocs = reader.termDocs(t);
> >            while(termDocs.next())
> >            {
> >              if(debug==1 && count==0) System.out.println("equal to
> (Term)
>
> > "+t.text());
> >              count++;
> >              docLucene = reader.document(termDocs.doc());
> >                if(debug==1) System.out.println("  docLucene:
> > ["+termDocs.doc()+"-
> >
> "+docLucene.getField("Code").stringValue()+"]
> > ");
> >              b=true;
> >            }
> >              System.out.println();
> >
> >              QueryParser pars = new QueryParser("Text",new
> > StandardAnalyzer());
> >              Query q= pars.parse(t.text());
> >              Hits hits = searcher.search(q);
> >
> >              System.out.println("Found "+hits.length()+" matches for
> query
> > "+q);
> >              for(int i=0;i<hits.length();i++)
> >              {  Document d = hits.doc(i);
> >                 System.out.println("        doc:
> > ["+d.+"-"+d.getField("Code").stringValue()+"]");
> >
> >              }
> >
> >            System.out.println();
> >            if(b==false)
> >              System.out.println("No Document found for term:
> > "+myterm.getTerm());
> >            if(debug==1)if(count < myterm.getDocFreq()&&count>0)
> > System.out.println("        Error term: "+myterm.getTerm()+", documents
> > found: "
> >                                                             +count+",
> > docFreq: "+myterm.getDocFreq());
> >
> >            return;
> >          }
> >        }
> >      }
> >
> > OUPUT
> >
> > Checking (Myterm) zucca ... equal to (Term) zucca
> >    docLucene: [9963-356 U.S. 256]
> >
> > Found 8 matches for query Text:zucca
> >          doc: [0-356 U.S. 256]
> >          doc: [1-365 U.S. 290]
> >          doc: [2-351 U.S. 91]
> >          doc: [3-356 U.S. 660]
> >          doc: [4-365 U.S. 265]
> >          doc: [5-377 U.S. 235]
> >          doc: [6-435 U.S. 519]
> >          doc: [7-441 U.S. 281]
> >
> >          Error term: zucca, documents found: 1, docFreq: 8
> >
> > Checking (Myterm) zimroth ... equal to (Term) zimroth
> >          doc: [16478-476 U.S. 467]
> >          doc: [17142-492 U.S. 257]
> >          doc: [17208-488 U.S. 235]
> >          doc: [17911-484 U.S. 1]
> >          doc: [17920-487 U.S. 1]
> >          doc: [18010-484 U.S. 301]
> >
> > Found 8 matches for query Text:zimroth
> >          doc: [0-389 U.S. 143]
> >          doc: [1-468 U.S. 981]
> >          doc: [2-489 U.S. 688]
> >          doc: [3-491 U.S. 781]
> >          doc: [4-436 U.S. 412]
> >          doc: [5-445 U.S. 573]
> >          doc: [6-462 U.S. 213]
> >          doc: [7-468 U.S. 897]
> >
> >          Error term: zimroth, documents found: 6, docFreq: 8
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_85505_30692333.1175532643518--

From java-user-return-27316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 17:23:42 2007
Return-Path: <java-user-return-27316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13316 invoked from network); 2 Apr 2007 17:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 17:23:41 -0000
Received: (qmail 34834 invoked by uid 500); 2 Apr 2007 17:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34806 invoked by uid 500); 2 Apr 2007 17:23:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34795 invoked by uid 99); 2 Apr 2007 17:23:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 10:23:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ofer@smarter.com designates 66.161.95.153 as permitted sender)
Received: from [66.161.95.153] (HELO mail.mezimedia.com) (66.161.95.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 10:23:32 -0700
Received: from [192.168.2.139] (unknown [192.168.2.139])
	by mail.mezimedia.com (Postfix) with SMTP id 1AA9A35BC7
	for <java-user@lucene.apache.org>; Mon,  2 Apr 2007 10:23:16 -0700 (PDT)
Message-ID: <46113BFF.9060309@smarter.com>
Date: Mon, 02 Apr 2007 10:23:11 -0700
From: Ofer Nave <ofer@smarter.com>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: list@herse.apache.org:java-user <java-user@lucene.apache.org>
Subject: search-time boosting
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'd like to be able to boost documents at search-time, and I'm not sure 
how to do it.

Example:

I'm building a search engine for products (comparison shopping).  Many 
queries tend to indicate a category (i.e., 'digital cameras') as opposed 
to a product (i.e., 'canon powershot').  I have the name of the category 
the product is in indexed in a separate field.  My intention was to 
query both the title field and the category field, and when the category 
field relevancy is extremely high, boost the documents in that category.

Is there a way to do this?  Or an alternative approach to the problem?

-ofer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 18:16:30 2007
Return-Path: <java-user-return-27317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37010 invoked from network); 2 Apr 2007 18:16:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 18:16:29 -0000
Received: (qmail 33941 invoked by uid 500); 2 Apr 2007 18:16:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33912 invoked by uid 500); 2 Apr 2007 18:16:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33892 invoked by uid 99); 2 Apr 2007 18:16:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 11:16:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 11:16:14 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1383514wra
        for <java-user@lucene.apache.org>; Mon, 02 Apr 2007 11:15:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=q3a7giRE/TMHK/SGlELmVjy69SfPfE1NIqkjFmaZXkdlpHJn4QtaJE+uvJl67knLD1c3206u/6wClUc8RDVECX7usGlIAVSriHY94u0VnKT1beGuDDCEoYnVXrZnM3tfyDmqpMjyUSy9f+5y+2w77gbQckiguNC5jZfkzV3LNAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=G+715MeNETcCxlbpqPjsg8woS++JpCHt/0B5qlokLMGrVhmYIZo32IONRtmITGG2aY7cpaP+u4why59UhYisHL49nYX3LF3qZctZ8b+Pd30qqyHcabGYbA0q+mTvTr95093bPxEL5D6fbTjzuR4g0KMkOG6mSv6AuZR0sPKIrGc=
Received: by 10.114.155.1 with SMTP id c1mr1913457wae.1175537752249;
        Mon, 02 Apr 2007 11:15:52 -0700 (PDT)
Received: by 10.114.196.6 with HTTP; Mon, 2 Apr 2007 11:15:50 -0700 (PDT)
Message-ID: <3d2ce8cb0704021115i642d383br6602077124efaeea@mail.gmail.com>
Date: Mon, 2 Apr 2007 11:15:50 -0700
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search-time boosting
In-Reply-To: <46113BFF.9060309@smarter.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <46113BFF.9060309@smarter.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/2/07, Ofer Nave <ofer@smarter.com> wrote:
> I'd like to be able to boost documents at search-time, and I'm not sure
> how to do it.
>
> Example:
>
> I'm building a search engine for products (comparison shopping).  Many
> queries tend to indicate a category (i.e., 'digital cameras') as opposed
> to a product (i.e., 'canon powershot').  I have the name of the category
> the product is in indexed in a separate field.  My intention was to
> query both the title field and the category field, and when the category
> field relevancy is extremely high, boost the documents in that category.
>
> Is there a way to do this?  Or an alternative approach to the problem?

title:"digital cameras"^0.7 category:"digital cameras"^4.5

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 18:39:30 2007
Return-Path: <java-user-return-27318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49817 invoked from network); 2 Apr 2007 18:39:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 18:39:29 -0000
Received: (qmail 73338 invoked by uid 500); 2 Apr 2007 18:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73302 invoked by uid 500); 2 Apr 2007 18:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73290 invoked by uid 99); 2 Apr 2007 18:39:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 11:39:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of johnkleven@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 11:39:21 -0700
Received: by ug-out-1314.google.com with SMTP id k40so25096ugc
        for <java-user@lucene.apache.org>; Mon, 02 Apr 2007 11:38:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=b06lAR3ubNkHzCC0lWXx5alyYflJvhsThUE8BYQDqiRnRXMcFk+UhhbW8JVq1/o4Yeixv8WSktuMQYMCtq20aLP9t0JGivJLdgheNNAaxMK+1jmpMag3ixb6xfrECCq5kq0n8MzKvVeIlLrIZzPo32VExCCV5S2ZVGjCM4zlyws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=pU+iFwdXo8Sa5PAEVMx31QdGgmSkA9e6ZY76dOBuNzoC2HG/FhlkQCnbqKw0kA0i6/ah1B3wtcDYtmOkJA0zfwcYqQr8YXh2OnEmmTAkm22T5Pfn3gEuEZxj8jZEzQBwKMNV8OUUUWKBN+hBcEaT2D+vfIUK5OFTBvcXmOtYDmk=
Received: by 10.114.151.13 with SMTP id y13mr1905599wad.1175539135635;
        Mon, 02 Apr 2007 11:38:55 -0700 (PDT)
Received: by 10.114.15.12 with HTTP; Mon, 2 Apr 2007 11:38:55 -0700 (PDT)
Message-ID: <94243d370704021138n2490aacfr60f0f93110307b11@mail.gmail.com>
Date: Mon, 2 Apr 2007 11:38:55 -0700
From: "John Kleven" <johnkleven@gmail.com>
To: java-user@lucene.apache.org
Subject: short documents = help me tweak Similarity??
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122845_4412774.1175539135509"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122845_4412774.1175539135509
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My documents are cars...
i.e.,
Nissan Altima Sports Package
Nissan Altima Standard

The problem I have is when i search "Nissan Altima", I want to get the 2nd
hit back first, i.e. "Nissan Altima Standard", because it is shorter.
However, this doesn't happen.  They are both scored the exact same.

I know that the lengthNorm in Similarity is using 1/sqrt(numTerms), and you
would think that would be enuff to make sure the order is correct.  However,
it is not, and I assume this is because of the encode/decode functions that
pack this value into a single byte do not have the granularity to represent
differences between numbers like 1/sqrt(3) vs 1/sqrt(4)??

Is the suggested approach here to re-write the encode/decode operations, or
is there any easier way?

Thanks kindly -
John

------=_Part_122845_4412774.1175539135509--

From java-user-return-27319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 19:05:02 2007
Return-Path: <java-user-return-27319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58637 invoked from network); 2 Apr 2007 19:05:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 19:05:02 -0000
Received: (qmail 8913 invoked by uid 500); 2 Apr 2007 19:05:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8877 invoked by uid 500); 2 Apr 2007 19:05:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 7791 invoked by uid 99); 2 Apr 2007 19:03:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <CDFA9336-7A90-4A36-92A7-45E7043DEC93@marketingbrokers.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: MB Leasing <leasing@marketingbrokers.com>
Subject: precision double sortable String
Date: Mon, 2 Apr 2007 12:02:58 -0700
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm trying to turn a double with decimal point
precision fifteen digits to the left into a sortable
String for Lucene (.346210426731253).

NumberTools is for longs so doesn't apply.

In Solr, NumberUtils.double2sortableStr prints
out a literal question mark character '?' .

I tried making it a float first but the formatting
also did not work w/NumberUtils.float2sortableStr.

Interestingly, I was able to write a BigDecimal
helper class, use setScale(15), longValue() then
pass it to NumberTools and get a padded result.

.346210426731253 becomes 000000
1.346210426731253 becomes 000001
2.346210426731253 becomes 000002

etc...

Any ideas?

Thanks.

Peter W.







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 20:45:12 2007
Return-Path: <java-user-return-27320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19012 invoked from network); 2 Apr 2007 20:45:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 20:45:11 -0000
Received: (qmail 87844 invoked by uid 500); 2 Apr 2007 20:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87818 invoked by uid 500); 2 Apr 2007 20:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87803 invoked by uid 99); 2 Apr 2007 20:45:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 13:45:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Apr 2007 13:45:01 -0700
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 957
          for <java-user@lucene.apache.org>;
          Mon, 2 Apr 2007 13:44:20 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <CDFA9336-7A90-4A36-92A7-45E7043DEC93@marketingbrokers.com>
References: <CDFA9336-7A90-4A36-92A7-45E7043DEC93@marketingbrokers.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1DF63854-1596-46D6-B782-CF4B401B9D27@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: precision double sortable String
Date: Mon, 2 Apr 2007 13:44:19 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

One more thing...

It could optionally be indexed and stored as a String
then contents of the Hits object could be placed into
a Collection with a comparator that sorts double
values in reverse order.

Regards,

Peter W.


On Apr 2, 2007, at 12:02 PM, "Peter W." <peter@marketingbrokers.com>   
wrote:

> Hi,
>
> I'm trying to turn a double with decimal point
> precision fifteen digits to the left into a sortable
> String for Lucene (.346210426731253).
>
> NumberTools is for longs so doesn't apply.
>
> In Solr, NumberUtils.double2sortableStr prints
> out a literal question mark character '?' .
>
> I tried making it a float first but the formatting
> also did not work w/NumberUtils.float2sortableStr.
>
> Interestingly, I was able to write a BigDecimal
> helper class, use setScale(15), longValue() then
> pass it to NumberTools and get a padded result.
>
> .346210426731253 becomes 000000
> 1.346210426731253 becomes 000001
> 2.346210426731253 becomes 000002

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 21:08:27 2007
Return-Path: <java-user-return-27321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30555 invoked from network); 2 Apr 2007 21:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 21:08:26 -0000
Received: (qmail 28367 invoked by uid 500); 2 Apr 2007 21:08:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28335 invoked by uid 500); 2 Apr 2007 21:08:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28324 invoked by uid 99); 2 Apr 2007 21:08:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 14:08:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 14:08:18 -0700
Received: by ug-out-1314.google.com with SMTP id k40so73501ugc
        for <java-user@lucene.apache.org>; Mon, 02 Apr 2007 14:07:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=JIZPJMzzLV8v8xlW1+fdAEgTYrVw7tMXtRgovPjYzSsXnPhu5ZOGq1D6SerhfDO+HwdqFtIAwZ4Zw6AMG7vR0QqLsU1qFYtWpmUtKuTO7oQq0OfLTNXJykVf3zySD2ShAC8d0QoCCBPkWAz+5ywimhc3J0zBjF0eCApLs1Gux5k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=GeQXE/l8ofQRbZMYk0TjjOk1d+OWvdwjfStKDTs8uqyp2WVwaEKsKTSQliWZmveOQ2BrsQ2Qx9AjvlmIMecVirkjk5PFUGfx71lHQpKjOv9h8iQr/ch6I0qj2f04ctqRArgnxZbxmwUPBqeVkhcMhVpksKNYg4JeejzMtnSzQww=
Received: by 10.82.177.3 with SMTP id z3mr8340539bue.1175548074210;
        Mon, 02 Apr 2007 14:07:54 -0700 (PDT)
Received: by 10.82.126.8 with HTTP; Mon, 2 Apr 2007 14:07:54 -0700 (PDT)
Message-ID: <c68e39170704021407t4d29cd14rdc43a21048e14af@mail.gmail.com>
Date: Mon, 2 Apr 2007 17:07:54 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: precision double sortable String
In-Reply-To: <CDFA9336-7A90-4A36-92A7-45E7043DEC93@marketingbrokers.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <CDFA9336-7A90-4A36-92A7-45E7043DEC93@marketingbrokers.com>
X-Google-Sender-Auth: c827595d228341a5
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/2/07, MB Leasing <leasing@marketingbrokers.com> wrote:
> In Solr, NumberUtils.double2sortableStr prints
> out a literal question mark character '?' .

You shouldn't try to print it out... it's essentially binary :-)

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 21:31:10 2007
Return-Path: <java-user-return-27322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40919 invoked from network); 2 Apr 2007 21:31:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 21:31:09 -0000
Received: (qmail 71054 invoked by uid 500); 2 Apr 2007 21:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71028 invoked by uid 500); 2 Apr 2007 21:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71012 invoked by uid 99); 2 Apr 2007 21:31:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 14:31:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Apr 2007 14:31:01 -0700
Received: (qmail 76544 invoked by uid 60001); 2 Apr 2007 21:30:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=wclXq3AlJwNbIqYBIdGqAgX+kx/DUX3XqJPNs7FNpnq++baXmNRT1sU0pDpCKRGfY2pk2RDoSuGl+GRVEl2WoQG6dJP8G2kR+1VRQww2shdULSfRNJy/fp8fg0OuqKvxK3hhB35+hEbxdlMEsLBS2qLrUuGnqpQQI+OSmpny3a4=;
X-YMail-OSG: uP2sDhwVM1k.Z_.vXkI.fiR3JvNlhgSl2zf8lGC.Y0dKsxafVGR6ej_YdTYqE1GA9j4skzfK133SJkEmAkPOnsKRBg--
Received: from [66.92.187.33] by web50301.mail.re2.yahoo.com via HTTP; Mon, 02 Apr 2007 14:30:39 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Mon, 2 Apr 2007 14:30:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Deeper Ranking Issues in Lucene
To: java-user@lucene.apache.org
Cc: "xj3a@cs.virginia.edu" <xj3a@cs.virginia.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
Message-ID: <730780.75466.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

=0AXiangyu Jin, a better place to ask is the java-user list.  You'll want t=
o subscribe to that.  You didn't mention Similarity/DefaultSimilarity class=
es.  Maybe that's what you missed.=0A=0AOtis=0A . . . . . . . . . . . . . .=
 . . . . . . . . . . . . . . . .=0ASimpy -- http://www.simpy.com/  -  Tag  =
-  Search  -  Share=0A=0A----- Original Message ----=0AFrom: "xj3a@cs.virgi=
nia.edu" <xj3a@cs.virginia.edu>=0ATo: general@lucene.apache.org=0ASent: Mon=
day, April 2, 2007 3:35:30 PM=0ASubject: Deeper Ranking Issues in Lucene=0A=
=0AI=92ve been working on ranking/scoring issues for full text search for=
=0Ayears. When I try to implement different ranking inside the Lucene engin=
e,=0AI face some problems. I list some of my experience and questions here.=
=0A=0AThe major task I want to implement inside Lucene is different=0Aranki=
ng/scoring algorithms. I may not find the correct source of=0Ainformation, =
but I really cannot find a detailed document describing the=0Arelations amo=
ng ranking/scoring related classes in Lucene on web. =93Lucene=0Ain Action=
=94 concerns mostly about applications level usage but not these=0Alower-le=
vel APIs.=0A=0A(1) The first thing I tried is the abstract class Scorer. Th=
e description=0Afor this class is:=0A/** Expert: Implements scoring for a c=
lass of queries. */=0A=0AIf you looked IndexSearcher class, one possible se=
arch process is=0Aimplemented inside=0Apublic TopDocs search(Query query, F=
ilter filter, final int nDocs). If you=0Alook in detail how it is implement=
ed, you will find out it first acquires=0Asuch a scorer instance by:=0AScor=
er scorer =3D query.weight(this).scorer(reader);=0A=0AThe magic happens ins=
ide the method call scorer.score(new HitCollector());=0AWhat the score meth=
od does is something similar to an Iterator. The=0Ascorer.score continuousl=
y call scorer.next() to acquire next qualified=0Adocument (I guess the qual=
ified documents inside this iterator is from=0ABitSet operations from the g=
iven query. I did not looked into the detail=0Aimplementation of that), and=
 calls scorer.score() to get the score for the=0Acurrent document that the =
iterator pointed at.=0A=0AWhat the HitCollector does is merely simple. It o=
nly implement a method=0Acalled collect(int doc, float score). This method =
is called every time=0Awhen a new document=92s score are calculated. In the=
 IndexSearcher.search=0Amethod, the documents and their scores are sent to =
a PriorityQueue and=0Aranked according to the scores.=0A=0A(2) My first pla=
n is to modify the scorer.score()method. Unfortunately, I=0Afound this is e=
xtremely complex. score() is an abstract method which is=0Aimplemented insi=
de its subclasses like Boolean Scorer, Conjunction Scorer,=0APhrase Score, =
=85 Since I do not need to consider the complex Boolean query=0Asyntax (in =
my experiments, query is defined as a list of terms connected=0Aby disjunct=
ions), I implement the score method inside Scorer rather inside=0Asub class=
es.=0A=0AWhat I did is every time when Scorer.score are called, I pass the =
current=0Adocument number via doc(), and read out the term frequencies from=
=0AIndexReader. getTermFreqVector(int docNumber, String field)  method. I=
=0Afound this operation is super slow. The major cost is spent on the metho=
d=0AgetTermFreqVector.=0A=0A(3) Later I notice in the implementation in Ter=
mScorer, there is a=0Afunction call=0AIndexReader.termDocs.read(docs, freqs=
);    // refill buffer=0AAnd I read the comments for this function in Index=
Reader, it says=0A=0A/** Attempts to read multiple entries from the enumera=
tion, up to length of=0A   * <i>docs</i>.  Document numbers are stored in <=
i>docs</i>, and term=0A   * frequencies are stored in <i>freqs</i>.  The <i=
>freqs</i> array must=0Abe as=0A   * long as the <i>docs</i> array.=0A   *=
=0A   * <p>Returns the number of entries read.  Zero is only returned when =
the=0A   * stream has been exhausted.  */=0A=0ASo different from IndexReade=
r.getTermFreqVector, which read out term-freq=0Avectors for a document, thi=
s function read doc-freq vectors for a term. I=0Afind this method call is e=
xtremely faster. At least two magnitudes faster=0Athan getTermFreqVector, i=
f I want to get all term-freqs for given terms=0Afor all docs. I do not kno=
w the reason why there is such difference, I=0Acannot find a document descr=
ibing the implementation difference and=0Apurpose among these two.=0A=0A(4)=
 About extending Lucene=92s scoring function.=0AIf we want to implement any=
 arbitrary ranking/scoring for term-frequency=0Abased algorithms, we need t=
he scoring fits the following framework=0A=0AAny term-frequency scoring can=
 be expressed in the following ways (let=92s=0Asimplify that there is only =
one field so that we can ignore boost factor=0Aat this time):=0A=0ASigma (t=
 in q) [TermWeight(t in d)*TermWeight(t in q) / lengthNorm(d) /=0AlengthNor=
m(q)]=0A=0ASince lengthNorm(q) is the same for each document, it will not a=
ffect=0Aranking, we just ignore it. We further separate term weight into th=
ree=0Aparts, term weight related to document, term weight related to query,=
 term=0Aweight related to corpus (not related to document or query) and doc=
ument=0Alength norm.=0A=0ASigma (t in q) [TW(t in d)*TW(t in q) * TW (t) / =
lengthNorm(d)]=0A=0AWe can notice this matches Lucene=92 ranking function=
=0A=0ASigma (t in q) [tf(t in d)*1*idf (t) / lengthNorm(d)]. To save=0Acomp=
utational cost, lengthNorm(d) is pre-calculated when indexing the=0Acorpus.=
 So Lucene=92 lengthNorm(d) does not involve any corpus statistics=0Ainto c=
alculation, it is merely the # of terms inside this document. On the=0Aothe=
r hand, it treats the term weight in query is the same as 1. That is=0ALuce=
ne does not differentiate terms important inside query. If we want to=0Aemp=
hasis a term twice we need to put two terms inside the query. For=0Aexample=
, instead of search =93boat=94 we put =93boat boat=94, do I understand=0Aco=
rrectly?=0A=0ASo, generally, if we can update the lengthNorm(d) inside the =
indexing code=0Aor via post-processing after all documents are indexed, Luc=
ene can=0Aimplement any arbitrary ranking function such as BM25. A pity is =
that it=0Adoes not directly support query term weight in the query language=
.=0A=0A(5) My final big question would be how Lucene really implement=0Aran=
king/scoring. We could notice there are two possible strategies. Each=0Aof =
them will result in different flexibility if we need modify current=0Aranki=
ng algorithms.=0A=0AThe first strategy is Lucene generate document scores i=
n a document by=0Adocument manner. In Scorer.score, we notice the framework=
 is each time the=0Ascorer meet a new document, Lucene will generate a scor=
e for this=0Adocument. This framework is simple and intuitive. And all we d=
iscussed in=0A(4) will fit this framework. When you processing the current =
document,=0AlengthNorm(d) can be read, even if TW(t in d) has relation to=
=0AlengthNorm(d) we can calculate that accordingly. Unfortunately, I cannot=
=0Afind any low-level code could be thinked related to this implementation=
=0Astrategy. This makes me think the Scorer.score method is not the real=0A=
place Lucene implement its ranking. I am pretty confused about this part.=
=0AWho can help me with this?=0A=0AThe second strategy is Lucene generate d=
ocument scores in a term by term=0Amanner. For each term inside the query, =
Lucene calls termDocs.read(docs,=0Afreqs) to accumulate scores over the spe=
cific term dimension over all the=0Adocuments.  Under this framework (which=
 I feel is current Lucene=92s=0Aimplementation), what we discussed in (4) i=
s not held. We need extend=0Acurrent Lucene=92s tf(float freq) function to =
tf(float freq, float norm), so=0Athat arbitrary ranking could be implemente=
d.=0A=0A(6) I have implemented a search module outside Lucene IndexSearcher=
 which=0Acould implement any arbitrary ranking over vector query (a list of=
=0Adisjunctive terms). The term-by-term implementation is much faster than =
my=0Aprevious document-by-document implementation. But I currently still ca=
nnot=0Aencode the ranking module under Lucene=92 Boolean engines, that is o=
nly rank=0Athe documents retrieved (only rank the documents satisfy the con=
dition=0Aspecified by the query).=0A=0A____________________________________=
______________________________=0A=0AI do not know whether I described my po=
ints clear, it is complex and hard=0Ato write in a short plain text message=
. Maybe I should post a PDF version=0Atech-report online so that the proble=
m is stated clearer. I am not sure my=0Aunderstanding is correct. Thanks fo=
r any help and comments.=0A=0A=0AXiangyu Jin=0ADepartment of Computer Scien=
ce=0AUniversity of Virginia=0ACharlottesville, VA 22903=0A=0A=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 22:36:27 2007
Return-Path: <java-user-return-27323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72448 invoked from network); 2 Apr 2007 22:36:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 22:36:26 -0000
Received: (qmail 83607 invoked by uid 500); 2 Apr 2007 22:36:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83557 invoked by uid 500); 2 Apr 2007 22:36:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83537 invoked by uid 99); 2 Apr 2007 22:36:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 15:36:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Apr 2007 15:36:19 -0700
Received: (qmail 66384 invoked by uid 60001); 2 Apr 2007 22:35:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=drOYWOb5o3NMuvxWbB/0bF+nhE/HDsjSC4i7JiTH9Pr69YOfgfzIjlGhloiQw4i6/3bw2kCMF/cfKv+eZ41TUnDR+iCQYSfdIh5TvVo12WLtFf4ZBTDQe7yUyt2KMXb/3e9jLHpkMnyvwyEPiXf0EKCkWRJnJxqYcuZnvYNyB88=;
X-YMail-OSG: jgL1nl4VM1lbXIbOPDBhDhrl8zRip6StSy2_k7U9RS9haqitWfwzZaurPCtj4KPeRwWeLjBfJdg6UcTEzbZvwhjs3H4JZI_nhAdL
Received: from [66.92.187.33] by web50307.mail.re2.yahoo.com via HTTP; Mon, 02 Apr 2007 15:35:57 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Mon, 2 Apr 2007 15:35:57 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Benchmarking LUCENE-584 with contrib/benchmark
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <879061.64686.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm looking at benchmarking Paul's http://issues.apache.org/jira/browse/LUCENE-584 code.
I'd like to compare either:
  HitCollector.collect(doc, score) vs. MatchCollector.collect(doc)
  or
  IndexSearcher.search(Weight, Filter, HitCollector) vs. IndexSearcher.match(Query, MatchCollector)

...and see what the performance difference is when one skips scoring.  I can cook up my own benchmark, but I'd rather try using contrib/benchmark, if it can be used for this purpose.  Can it?  I browsed around contrib/benchmark looking for a place where I could plug in calls to IndexSearcher.match(Query, MatchCollector), and found that the only search calls are in the  StandardBenchmarker class.  From what I can tell, I can't really plug in any other calls in there, can I?  It looks like I simply need to write my own MatcherBenchmarker and implement my own benchmark(File, BenchmarkOptions) method.  Once that's in place, I'd have to run one benchmark with the StandardBenchmarker and the other one with my MatcherBenchmarker and manually compare the numbers.

Is that the right approach, or am I missing a shortcut?

Thanks,
Otis



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 02 23:30:13 2007
Return-Path: <java-user-return-27324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89540 invoked from network); 2 Apr 2007 23:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Apr 2007 23:30:12 -0000
Received: (qmail 62932 invoked by uid 500); 2 Apr 2007 23:30:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62698 invoked by uid 500); 2 Apr 2007 23:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62687 invoked by uid 99); 2 Apr 2007 23:30:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 16:30:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Apr 2007 16:30:04 -0700
Received: (qmail 42745 invoked by uid 60001); 2 Apr 2007 23:29:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=v3MBod0OolFXCkzNund5lAZCCWg5snb/ltdpdo8WncLbdY+HHAw6bi8XP7io/b5sKoFXqrFcH8w6jNP5oxym/NyUwHt4hiOUezaXZyZJWlCMZYZPSOcAajoGXCe2QgSGeuyMCkDOLE2xpx/ZpIPMraDc+fPOhxmSVbG5XP9bz+A=;
X-YMail-OSG: doUGm_oVM1m.R5QwTvcJeGKfpYuTmbNkV0zQFxi2adebs3_AIPdHEBqfrUVxZELzHA--
Received: from [66.92.187.33] by web50305.mail.re2.yahoo.com via HTTP; Mon, 02 Apr 2007 16:29:43 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Mon, 2 Apr 2007 16:29:43 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Benchmarking LUCENE-584 with contrib/benchmark
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <423720.41860.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Here is one more related question.
It looks like the o.a.l.benchmark.Driver class is supposed to be a generic driver class that uses the Benchmarker configured in one of those conf/*.xml files.  However, I see StandardBenchmarker.class hard-coded there:

        digester.addObjectCreate("benchmark/benchmarker", "class", StandardBenchmarker.class);  <==
        digester.addSetProperties("benchmark/benchmarker");
        digester.addSetNext("benchmark/benchmarker", "setBenchmarker");

Is this by design?  Is there any way for me to get the Driver aware of my MatcherBenchmarker other than by modifying Driver directly?

Thanks,
Otis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
To: java-user@lucene.apache.org
Sent: Monday, April 2, 2007 6:35:57 PM
Subject: Benchmarking LUCENE-584 with contrib/benchmark

Hi,

I'm looking at benchmarking Paul's http://issues.apache.org/jira/browse/LUCENE-584 code.
I'd like to compare either:
  HitCollector.collect(doc, score) vs. MatchCollector.collect(doc)
  or
  IndexSearcher.search(Weight, Filter, HitCollector) vs. IndexSearcher.match(Query, MatchCollector)

...and see what the performance difference is when one skips scoring.  I can cook up my own benchmark, but I'd rather try using contrib/benchmark, if it can be used for this purpose.  Can it?  I browsed around contrib/benchmark looking for a place where I could plug in calls to IndexSearcher.match(Query, MatchCollector), and found that the only search calls are in the  StandardBenchmarker class.  From what I can tell, I can't really plug in any other calls in there, can I?  It looks like I simply need to write my own MatcherBenchmarker and implement my own benchmark(File, BenchmarkOptions) method.  Once that's in place, I'd have to run one benchmark with the StandardBenchmarker and the other one with my MatcherBenchmarker and manually compare the numbers.

Is that the right approach, or am I missing a shortcut?

Thanks,
Otis



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 00:22:29 2007
Return-Path: <java-user-return-27325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2827 invoked from network); 3 Apr 2007 00:22:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 00:22:28 -0000
Received: (qmail 26819 invoked by uid 500); 3 Apr 2007 00:22:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26783 invoked by uid 500); 3 Apr 2007 00:22:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26772 invoked by uid 99); 3 Apr 2007 00:22:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 17:22:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 17:22:20 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l330Lwav076224
	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 00:21:58 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l330LwJP2810062
	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 02:21:58 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l330LwfW026705
	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 02:21:58 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l330LvLW026702
	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 02:21:57 +0200
In-Reply-To: <879061.64686.qm@web50307.mail.re2.yahoo.com>
Subject: Re: Benchmarking LUCENE-584 with contrib/benchmark
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFB3B828F5.BADEC1D2-ON882572B1.0081BC93-882572B2.0001EB8E@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 2 Apr 2007 17:20:58 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 03/04/2007 03:21:57
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis, you could use the byTask package - add your-type-of-search-task.
Suffix the new task class name by "Task" - e.g. NewNameTask - and then you
can use the 'command' "NewName" in an alg file.

I am not sure you can extend/reuse the existing ReadTask for this, because
its implementation of search/retrieve/traverse assumes using certain
Lucene's API's.

Does this make sense?

Regards,
Doron

Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote on 02/04/2007 15:35:57:

> Hi,
>
> I'm looking at benchmarking Paul's http://issues.apache.
> org/jira/browse/LUCENE-584 code.
> I'd like to compare either:
>   HitCollector.collect(doc, score) vs. MatchCollector.collect(doc)
>   or
>   IndexSearcher.search(Weight, Filter, HitCollector) vs.
> IndexSearcher.match(Query, MatchCollector)
>
> ...and see what the performance difference is when one skips
> scoring.  I can cook up my own benchmark, but I'd rather try using
> contrib/benchmark, if it can be used for this purpose.  Can it?  I
> browsed around contrib/benchmark looking for a place where I could
> plug in calls to IndexSearcher.match(Query, MatchCollector), and
> found that the only search calls are in the  StandardBenchmarker
> class.  From what I can tell, I can't really plug in any other calls
> in there, can I?  It looks like I simply need to write my own
> MatcherBenchmarker and implement my own benchmark(File,
> BenchmarkOptions) method.  Once that's in place, I'd have to run one
> benchmark with the StandardBenchmarker and the other one with my
> MatcherBenchmarker and manually compare the numbers.
>
> Is that the right approach, or am I missing a shortcut?
>
> Thanks,
> Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 02:15:00 2007
Return-Path: <java-user-return-27326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34778 invoked from network); 3 Apr 2007 02:14:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 02:14:59 -0000
Received: (qmail 66668 invoked by uid 500); 3 Apr 2007 02:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66630 invoked by uid 500); 3 Apr 2007 02:14:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66619 invoked by uid 99); 3 Apr 2007 02:14:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 19:14:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 19:14:50 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HYYXW-0006Og-0P
	for java-user@lucene.apache.org; Mon, 02 Apr 2007 19:14:30 -0700
Message-ID: <9802563.post@talk.nabble.com>
Date: Mon, 2 Apr 2007 19:14:29 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: How to calculate centroid from HITS?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

I have queried and have got a HITS object which is a collection of
documents. I want to find out the centroid of these documents. Centroid =
Top Most 35(for eg)common  terms across all the documents in the HITS
object. 

Is there any API in Lucene for this?

Thanks in Advance.
-- 
View this message in context: http://www.nabble.com/How-to-calculate-centroid-from-HITS--tf3509432.html#a9802563
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 04:01:48 2007
Return-Path: <java-user-return-27327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65960 invoked from network); 3 Apr 2007 04:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 04:01:47 -0000
Received: (qmail 87606 invoked by uid 500); 3 Apr 2007 04:01:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87570 invoked by uid 500); 3 Apr 2007 04:01:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87559 invoked by uid 99); 3 Apr 2007 04:01:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 21:01:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.144.27.9] (HELO surfers.oz.agile.tv) (203.144.27.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 21:01:38 -0700
Received: from [192.168.16.9] (woodgate.oz.agile.tv [192.168.16.9])
	by surfers.oz.agile.tv (Postfix) with ESMTP id 38D49A68DA
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 14:01:08 +1000 (EST)
Message-ID: <4611D184.7050209@promptu.com>
Date: Tue, 03 Apr 2007 14:01:08 +1000
From: Kun Hong <khong@promptu.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.0.9) Gecko/20070213 Fedora/1.0.7-0.6.0.1.fc5 SeaMonkey/1.0.7
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Can Query.toString() output be parsed to the same query?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am new to Lucene. I find that the output
of the Query.toString() method cannot be parsed
back to the same query. Is it true? If it is
true, I am wondering why not make the output of
Query.toString() parsable to the same query again?
Unless there is something prevent us to do so, such
as: not every query has a feasible string representation
that can be parsed to it.

I have one example here to clarify what I am talking about:
I construct a MultiPhraseQuery to search  the title field
that is equivalent to searhching "rolling stone" as a prefix.
The output of the query's toString method is

title:"rolling (stone stoned stones)"

But this string will not be parsed back to a MultiPhrase query
but instead to a PhraseQuery consisting of Terms "rolling",
"stone", "stoned" and "stones".

Thanks in advance for any answers.

Kun

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 06:07:04 2007
Return-Path: <java-user-return-27328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98372 invoked from network); 3 Apr 2007 06:07:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 06:07:04 -0000
Received: (qmail 32330 invoked by uid 500); 3 Apr 2007 06:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32302 invoked by uid 500); 3 Apr 2007 06:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32291 invoked by uid 99); 3 Apr 2007 06:07:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 23:07:02 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2007 23:06:53 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l3366PFd019910
	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 09:06:25 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m4395j3d; 3 Apr 2007 09:05:00 +0300
Message-ID: <4611EEC7.8010304@teamware.com>
Date: Tue, 03 Apr 2007 16:05:59 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Benchmarking LUCENE-584 with contrib/benchmark
References: <423720.41860.qm@web50305.mail.re2.yahoo.com>
In-Reply-To: <423720.41860.qm@web50305.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 03 Apr 2007 09:06:25 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> Here is one more related question.
> It looks like the o.a.l.benchmark.Driver class is supposed to be a generic driver class that uses the Benchmarker configured in one of those conf/*.xml files.  However, I see StandardBenchmarker.class hard-coded there:
> 
>         digester.addObjectCreate("benchmark/benchmarker", "class", StandardBenchmarker.class);  <==

Maybe I'm missing something, but isn't the 3rd param to addObjectCreate just a 
default and the real class is defined by the "class" attribute in the XML file.

e.g.

<benchmarker class="...MatcherBenchmarker"/>

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 11:50:52 2007
Return-Path: <java-user-return-27329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39592 invoked from network); 3 Apr 2007 11:50:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 11:50:49 -0000
Received: (qmail 30222 invoked by uid 500); 3 Apr 2007 11:50:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30184 invoked by uid 500); 3 Apr 2007 11:50:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30173 invoked by uid 99); 3 Apr 2007 11:50:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 04:50:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 04:50:39 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1HYhWi-000KMe-SU
	for java-user@lucene.apache.org; Tue, 03 Apr 2007 12:50:16 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l33BoEXT078283
	for java-user@lucene.apache.org; Tue, 3 Apr 2007 12:50:14 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Tue, 3 Apr 2007 12:50:14 +0100
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: flush, optimize and FileNotFound exceptions
Message-ID: <20070403115014.GV27177@thegestalt.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

I have an Indexer which inserts tasks onto a queue and then has a thread 
which consumes the tasks (Index, Update or Delete) and executes them. If 
the Indexer is shut down it stops the thread, waits until it's finished 
its current task and then consumes any other tasks on the queue. Then it 
runs 

    writer.optimize();
    writer.flush();
    writer.close();

However occasionally we're seeing that optimize() produces a 
FileNotFound exception and refers to an .fnm file.

There are no other IndexWriters open on the index and, by that stage, no 
IndexReaders either. If I remove the optimize() then everything's fine.

Should I be worried about this - are the optimize() and the flush() 
necessary? Are they in the wrong order? I've tried various combos but 
since the bug is unpredictable I can't tell if they're working or not.

Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 12:24:26 2007
Return-Path: <java-user-return-27330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52329 invoked from network); 3 Apr 2007 12:24:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 12:24:24 -0000
Received: (qmail 89510 invoked by uid 500); 3 Apr 2007 12:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89452 invoked by uid 500); 3 Apr 2007 12:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89441 invoked by uid 99); 3 Apr 2007 12:24:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 05:24:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 05:24:13 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 2227A5B52F
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 05:23:50 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <9802563.post@talk.nabble.com>
References: <9802563.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E97ED3A2-22B5-473F-973A-0324DDBC6D7C@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How to calculate centroid from HITS?
Date: Tue, 3 Apr 2007 08:23:50 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You could use Term Vectors (TVs) to do this, but I don't know of any  
existing code for it.  Might be a good contrib module, though.   
Search this list or see Lucene In Action or I have some TV sample  
code at http://www.cnlp.org/apachecon2005/

You might also check the Carrot2 project, which has a number of  
clustering algorithms and some Lucene support, although I don't know  
if it does specifically what you want.

On Apr 2, 2007, at 10:14 PM, Lokeya wrote:

>
> Hi All,
>
> I have queried and have got a HITS object which is a collection of
> documents. I want to find out the centroid of these documents.  
> Centroid =
> Top Most 35(for eg)common  terms across all the documents in the HITS
> object.
>
> Is there any API in Lucene for this?
>
> Thanks in Advance.
> -- 
> View this message in context: http://www.nabble.com/How-to- 
> calculate-centroid-from-HITS--tf3509432.html#a9802563
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 12:27:08 2007
Return-Path: <java-user-return-27331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53139 invoked from network); 3 Apr 2007 12:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 12:27:06 -0000
Received: (qmail 96539 invoked by uid 500); 3 Apr 2007 12:27:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96508 invoked by uid 500); 3 Apr 2007 12:27:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96497 invoked by uid 99); 3 Apr 2007 12:27:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 05:27:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 05:26:55 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id A2D1811807
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 05:26:28 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4611EEC7.8010304@teamware.com>
References: <423720.41860.qm@web50305.mail.re2.yahoo.com> <4611EEC7.8010304@teamware.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <17258F90-4B6A-4B4F-AF85-D538FA86135C@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Benchmarking LUCENE-584 with contrib/benchmark
Date: Tue, 3 Apr 2007 08:26:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Apr 3, 2007, at 2:05 AM, Antony Bowesman wrote:

> Otis Gospodnetic wrote:
>> Here is one more related question.
>> It looks like the o.a.l.benchmark.Driver class is supposed to be a  
>> generic driver class that uses the Benchmarker configured in one  
>> of those conf/*.xml files.  However, I see  
>> StandardBenchmarker.class hard-coded there:
>>         digester.addObjectCreate("benchmark/benchmarker", "class",  
>> StandardBenchmarker.class);  <==
>
> Maybe I'm missing something, but isn't the 3rd param to  
> addObjectCreate just a default and the real class is defined by the  
> "class" attribute in the XML file.
>

Yes, this is the case.

FWIW, we will most likely be deprecating these classes and eventually  
removing them as the Task based approach is proving to be much more  
flexible and useful and contains all (or almost all) the  
functionality of StandardBenchmarker.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 12:35:19 2007
Return-Path: <java-user-return-27332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54497 invoked from network); 3 Apr 2007 12:35:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 12:35:19 -0000
Received: (qmail 13896 invoked by uid 500); 3 Apr 2007 12:35:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13869 invoked by uid 500); 3 Apr 2007 12:35:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13851 invoked by uid 99); 3 Apr 2007 12:35:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 05:34:57 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 56BA8211220
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 08:31:24 -0400 (EDT)
Received: from web2.messagingengine.com ([10.202.2.211])
  by compute1.internal (MEProxy); Tue, 03 Apr 2007 08:31:21 -0400
Received: by web2.messagingengine.com (Postfix, from userid 99)
	id F1CE0193AE; Tue,  3 Apr 2007 08:31:20 -0400 (EDT)
Message-Id: <1175603480.21223.1182785253@webmail.messagingengine.com>
X-Sasl-Enc: wqnnSJeFlKKg6/cKSVtwrQmCJYjA/Zy+K5Ej3eADIeux 1175603480
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <20070403115014.GV27177@thegestalt.org>
Subject: Re: flush, optimize and FileNotFound exceptions
In-Reply-To: <20070403115014.GV27177@thegestalt.org>
Date: Tue, 03 Apr 2007 08:31:20 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Simon Wistow" <simon@thegestalt.org> wrote:
> I have an Indexer which inserts tasks onto a queue and then has a thread 
> which consumes the tasks (Index, Update or Delete) and executes them. If 
> the Indexer is shut down it stops the thread, waits until it's finished 
> its current task and then consumes any other tasks on the queue. Then it 
> runs 
> 
>     writer.optimize();
>     writer.flush();
>     writer.close();
> 
> However occasionally we're seeing that optimize() produces a 
> FileNotFound exception and refers to an .fnm file.
> 
> There are no other IndexWriters open on the index and, by that stage, no 
> IndexReaders either. If I remove the optimize() then everything's fine.
> 
> Should I be worried about this - are the optimize() and the flush() 
> necessary? Are they in the wrong order? I've tried various combos but 
> since the bug is unpredictable I can't tell if they're working or not.

Optimize actually does its own flush before optimizing, so you don't
need to call it yourself and in fact calling it after optimize will
just be a harmless no-op.

You should be worried about this exception.  It means there's some
sort of index corruption going on.  What version of Lucene are you on?
If you haven't upgraded to 2.1 you should try to do so; 2.1 has fixed
a number of cases that can lead to errant IOExceptions.

I would double and triple check that indeed you indeed only have one
writer against the index; accidentally having 2 writers on the same
index (which is normally prevented by the write lock) could cause
exactly this exception.

Can you make this error happen in a tiny test case?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 12:42:27 2007
Return-Path: <java-user-return-27333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55973 invoked from network); 3 Apr 2007 12:42:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 12:42:25 -0000
Received: (qmail 37507 invoked by uid 500); 3 Apr 2007 12:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37476 invoked by uid 500); 3 Apr 2007 12:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37465 invoked by uid 99); 3 Apr 2007 12:42:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 05:42:18 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1HYiJO-000MGF-RK
	for java-user@lucene.apache.org; Tue, 03 Apr 2007 13:40:34 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l33CeYBJ085574
	for java-user@lucene.apache.org; Tue, 3 Apr 2007 13:40:34 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Tue, 3 Apr 2007 13:40:34 +0100
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org
Subject: Re: flush, optimize and FileNotFound exceptions
Message-ID: <20070403124034.GY27177@thegestalt.org>
References: <20070403115014.GV27177@thegestalt.org> <1175603480.21223.1182785253@webmail.messagingengine.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1175603480.21223.1182785253@webmail.messagingengine.com>
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Apr 03, 2007 at 08:31:20AM -0400, Michael McCandless said:
> Optimize actually does its own flush before optimizing, so you don't
> need to call it yourself and in fact calling it after optimize will
> just be a harmless no-op.

Ah, that's good to know.
 
> You should be worried about this exception.  It means there's some
> sort of index corruption going on.  What version of Lucene are you on?
> If you haven't upgraded to 2.1 you should try to do so; 2.1 has fixed
> a number of cases that can lead to errant IOExceptions.

Oops, no, still running on 2.0


> I would double and triple check that indeed you indeed only have one
> writer against the index; accidentally having 2 writers on the same
> index (which is normally prevented by the write lock) could cause
> exactly this exception.

Thanks for the advice - I'll try the upgrade and then try and get it 
down to a test case. 

Simon


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 14:09:35 2007
Return-Path: <java-user-return-27334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94046 invoked from network); 3 Apr 2007 14:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 14:09:33 -0000
Received: (qmail 15729 invoked by uid 500); 3 Apr 2007 14:09:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15686 invoked by uid 500); 3 Apr 2007 14:09:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15675 invoked by uid 99); 3 Apr 2007 14:09:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:09:33 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,MIME_BASE64_TEXT
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.192.192.42] (HELO ren.xcom.de) (62.192.192.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:09:21 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by ren.xcom.de (Postfix) with ESMTP id E4A6679C049
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 16:06:27 +0200 (CEST)
Received: from ren.xcom.de ([127.0.0.1])
	by localhost (ren.xcom.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id bdKhTYvcibao for <java-user@lucene.apache.org>;
	Tue,  3 Apr 2007 16:06:26 +0200 (CEST)
Received: from jmail1.xcom.de (jmail1.xcom.de [62.192.192.139])
	by ren.xcom.de (Postfix) with ESMTP id 5575479C048
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 16:06:26 +0200 (CEST)
Received: (from mail@localhost)
	by jmail1.xcom.de (8.12.10/8.12.10) id l33E8vcI024896
	for java-user@lucene.apache.org; Tue, 3 Apr 2007 16:08:57 +0200
Received: from xgate1.xcom.de (virus [62.192.192.130])
 	by jmail1.xcom.de (8.12.10/8.12.10) with ESMTP id l33E8vm5024891
 	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 16:08:57 +0200
In-Reply-To: <1174299031.6246.13.camel@localhost>
Subject: Design Problem: Searching large set of protected documents
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
From: "Jonathan O'Connor" <jonathan.oconnor@xcom.de>
Message-ID: <OF8304FC9E.E340D68F-ON802572B2.004D0CC2-802572B2.004DC797@xcom.de>
Date: Tue, 3 Apr 2007 15:09:33 +0100
X-MIMETrack: Serialize by Router on xgate1/SRV/XCOM(Release 6.5.5FP2|October 23, 2006) at
 03.04.2007 16:08:57
MIME-Version: 1.0
Content-Type: multipart/alternative; 
 	Boundary="0__=0FBBF821DFDE8A528f9e8a93df938690918c0FBBF821DFDE8A52"
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=0FBBF821DFDE8A528f9e8a93df938690918c0FBBF821DFDE8A52
Content-type: text/plain; charset=ISO-8859-15
Content-transfer-encoding: base64


SGksDQpJIGhhdmUgYSBkYXRhYmFzZSBvZiBhIG1pbGxpb24gZG9jdW1lbnRzIGFuZCBhYm91dCAx
MDAgdXNlcnMuIFRoZSBkb2N1bWVudHMNCmNhbiBoYXZlIGFuIGFjY2VzcyBjb250cm9sIGxpc3Qs
IGFuZCB0aGVyZSBpcyBhIGNvbXBsZXgsIHJlY3Vyc2l2ZQ0KYWxnb3JpdGhtIHRvIHNheSBpZiBh
IHBhcnRpY3VsYXIgdXNlciBjYW4gc2VlIGEgcGFydGljdWxhciBkb2N1bWVudC4NCg0KTXkgcHJv
YmxlbSBpcyB0aGF0IG15IHNlYXJjaCBhbGdvcml0aG0gaXMgdG8gZmlyc3QgZG8gYSBzdGFuZGFy
ZCBsdWNlbmUNCnNlYXJjaCBmb3IgbWF0Y2hpbmcgZG9jdW1lbnRzLCBhbmQgdGhlbiBjaGVjayBz
ZWN1cml0eSBvbiBlYWNoIG9uZSBmb3VuZCwNCmp1c3QgcmV0dXJuaW5nIHRoZSBhbGxvd2VkIGRv
Y3VtZW50cy4gSG93ZXZlciwgaWYgSSBkbyB0aGlzLCBhbmQgdGhlIGx1Y2VuZQ0KcmV0dXJucyAx
MDAwMDAgZG9jcywgYnV0IHRoZSB1c2VyIGNhbiBvbmx5IHNlZSAxMCBvZiB0aGVzZSwgdGhlbiBv
YnZpb3VzbHkNCnRoZSBzZWFyY2ggaXMgZ29pbmcgdG8gdGFrZSBhbiBhd2Z1bCBsb25nIHRpbWUu
DQoNCkhhcyBhbnlvbmUgY29tZSBhY3Jvc3MgdGhpcyBwcm9ibGVtIGJlZm9yZSwgYW5kIGlmIHNv
IHdoYXQgYXBwcm9hY2ggZGlkIHlvdQ0KdGFrZT8gSSBndWVzcyBJIGNvdWxkIHByZWNhbGN1bGF0
ZSB0aGUgcGVybWlzc2lvbnMgZm9yIGV2ZXJ5IHVzZXItZG9jdW1lbnQNCnBhaXIsIGJ1dCB0aGF0
J3MgYWxvdCBvZiBzdG9yYWdlLCBhbmQgYSBsb3Qgb2YgcHJlY2FsY3VsYXRpb24hDQoNCkkgYXdh
aXQgdGhlIGxpc3QncyBhY2N1bXVsYXRlZCB3aXNkb20gd2l0aCBlYWdlcm5lc3MgYW5kIGludGVy
ZXN0Lg0KVGhhbmtzLA0KSm9uYXRoYW4gTydDb25ub3INClhDT00gRHVibGluDQoNCg0KDQoqKiog
WENPTSBBRyBMZWdhbCBEaXNjbGFpbWVyICoqKg0KDQpEaWVzZSBFLU1haWwgZWluc2NobGllc3Ns
aWNoIGlocmVyIEFuaGFlbmdlIGlzdCB2ZXJ0cmF1bGljaCB1bmQgaXN0IGFsbGVpbg0KZvxyIGRl
biBHZWJyYXVjaCBkdXJjaCBkZW4gdm9yZ2VzZWhlbmVuIEVtcGZhZW5nZXIgYmVzdGltbXQuIERy
aXR0ZW4gaXN0DQpkYXMgTGVzZW4sIFZlcnRlaWxlbiBvZGVyIFdlaXRlcmxlaXRlbiBkaWVzZXIg
RS1NYWlsIHVudGVyc2FndC4gV2lyIGJpdHRlbiwNCmVpbmUgZmVobGdlbGVpdGV0ZSBFLU1haWwg
dW52ZXJ6dWVnbGljaCB2b2xsc3RhZW5kaWcgenUgbG9lc2NoZW4gdW5kIHVucw0KZWluZSBOYWNo
cmljaHQgenVrb21tZW4genUgbGFzc2VuLg0KDQpUaGlzIGVtYWlsIG1heSBjb250YWluIG1hdGVy
aWFsIHRoYXQgaXMgY29uZmlkZW50aWFsIGFuZCBmb3IgdGhlIHNvbGUgdXNlDQpvZiB0aGUgaW50
ZW5kZWQgcmVjaXBpZW50LiBBbnkgcmV2aWV3LCBkaXN0cmlidXRpb24gYnkgb3RoZXJzIG9yIGZv
cndhcmRpbmcNCndpdGhvdXQgZXhwcmVzcyBwZXJtaXNzaW9uIGlzIHN0cmljdGx5IHByb2hpYml0
ZWQuIElmIHlvdSBhcmUgbm90IHRoZQ0KaW50ZW5kZWQgcmVjaXBpZW50LCBwbGVhc2UgY29udGFj
dCB0aGUgc2VuZGVyIGFuZCBkZWxldGUgYWxsIGNvcGllcy4NCg0KSGF1cHRzaXR6OiBCYWhuc3Ry
YXNzZSAzNywgRC00Nzg3NyBXaWxsaWNoLCBVU3QtSWROci46IERFIDgxMiA4ODUgNjY0DQpLb21t
dW5pa2F0aW9uOiBUZWxlZm9uICs0OSAyMTU0IDkyMDktNzAsIFRlbGVmYXggKzQ5IDIxNTQgOTIw
OS05MDAsDQp3d3cueGNvbS5kZQ0KSGFuZGVsc3JlZ2lzdGVyOiBBbXRzZ2VyaWNodCBLcmVmZWxk
LCBIUkIgMTAzNDANClZvcnN0YW5kOiBNYXR0aGlhcyBBbGJyZWNodCwgUmVuYXRlIEJlY2tlci1H
cm9wZSwgTWFyY28gTWFydHksIERyLiBSYWluZXINCkZ1Y2hzDQpWb3JzaXR6ZW5kZXIgZGVzIEF1
ZnNpY2h0c3JhdGVzOiBTdGVwaGFuIFN0ZXVlcg==

--0__=0FBBF821DFDE8A528f9e8a93df938690918c0FBBF821DFDE8A52--

From java-user-return-27335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 14:29:03 2007
Return-Path: <java-user-return-27335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7454 invoked from network); 3 Apr 2007 14:29:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 14:29:01 -0000
Received: (qmail 76058 invoked by uid 500); 3 Apr 2007 14:29:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76014 invoked by uid 500); 3 Apr 2007 14:29:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76003 invoked by uid 99); 3 Apr 2007 14:29:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:29:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.198.207] (HELO smtp108.sbc.mail.mud.yahoo.com) (68.142.198.207)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Apr 2007 07:28:49 -0700
Received: (qmail 89131 invoked from network); 3 Apr 2007 14:28:27 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@75.45.67.217 with plain)
  by smtp108.sbc.mail.mud.yahoo.com with SMTP; 3 Apr 2007 14:28:27 -0000
X-YMail-OSG: MWLwgOgVM1kU19Sx0LtgDueqBm_bPqPNlMetUVHtb.AifOgqhvH.YyyFWcVrQ4nVLSPKkftn1A--
Message-ID: <4612648D.6070102@curtin.com>
Date: Tue, 03 Apr 2007 10:28:29 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Design Problem: Searching large set of protected documents
References: <OF8304FC9E.E340D68F-ON802572B2.004D0CC2-802572B2.004DC797@xcom.de>
In-Reply-To: <OF8304FC9E.E340D68F-ON802572B2.004D0CC2-802572B2.004DC797@xcom.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jonathan O'Connor wrote:

> I have a database of a million documents and about 100 users. The documents
> can have an access control list, and there is a complex, recursive
> algorithm to say if a particular user can see a particular document.
> 
> My problem is that my search algorithm is to first do a standard lucene
> search for matching documents, and then check security on each one found,
> just returning the allowed documents. However, if I do this, and the lucene
> returns 100000 docs, but the user can only see 10 of these, then obviously
> the search is going to take an awful long time.
> 
> Has anyone come across this problem before, and if so what approach did you
> take? I guess I could precalculate the permissions for every user-document
> pair, but that's alot of storage, and a lot of precalculation!

My knee-jerk reaction is to suggest a simpler document security model, 
but I'm guessing that that option isn't available to you.

In your example the security attributes of a document are far more 
discriminating than the query terms.  If that relationship is indicative 
of most of your users and most of the documents, the users and documents 
aren't updated much, and you have a lot of searching to do, 
precalculation (results into an additional document field) seems the way 
to go.  It might even turn out that, if you start from a presumption of 
calculating every user--document security attribute, you come up with an 
algorithm that is much more efficient than a one-off, 
can-this-user-see-this-document type of algorithm.

Precalculation isn't necessarily a bad thing.  Often, it's quite 
beneficial -- for example, the indexing process itself is a pretty 
substantial precalculation step!

If this seems unwieldy or impractical for some reason, perhaps you could 
post more attributes of your situation, such as user and data update and 
addition frequency, query attributes and frequency, and so on.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 14:33:41 2007
Return-Path: <java-user-return-27336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8146 invoked from network); 3 Apr 2007 14:33:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 14:33:40 -0000
Received: (qmail 83072 invoked by uid 500); 3 Apr 2007 14:33:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82577 invoked by uid 500); 3 Apr 2007 14:33:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82562 invoked by uid 99); 3 Apr 2007 14:33:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:33:40 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rosherd@googlemail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:33:30 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1625802wra
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 07:33:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=googlemail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mAaplWVOcseiWEO7FYOoLo/rFcSF0rDA6+UXq09jRJCCWsksVybcEe7kMcjeQNtojWsDkiUNOTT6eT9BrPSd+XpPYNXAzUytcNWWVuy7w9gSCuuqtWhQatH+yOQMG014WcwRo5d5kybq8GaRs/DqvUSsYtsx/LCZojQTU3zjYYs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ebubb6ji/6ve5jlgs+MtVOatl5WtjmRLMV6+ZBSKU0msUIE/nEFwcnpI381dkpCpUVmknfIy1ErQ4tzoLGhQyPcYm+rqfkMZ1hXTWzNADJE1dTpZxnTogCX0Feq+G2h/b2+ViNX6VgyilWv00rIgu4i0gFJ3a7AIySl/qAt8Xyk=
Received: by 10.114.167.2 with SMTP id p2mr2243244wae.1175610788869;
        Tue, 03 Apr 2007 07:33:08 -0700 (PDT)
Received: by 10.115.93.12 with HTTP; Tue, 3 Apr 2007 07:33:08 -0700 (PDT)
Message-ID: <1c36b0de0704030733s44aec318id2bfe58c44dbaa13@mail.gmail.com>
Date: Tue, 3 Apr 2007 15:33:08 +0100
From: "Daniel Rosher" <rosherd@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Design Problem: Searching large set of protected documents
In-Reply-To: <OF8304FC9E.E340D68F-ON802572B2.004D0CC2-802572B2.004DC797@xcom.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10012_4391101.1175610788834"
References: <1174299031.6246.13.camel@localhost>
	 <OF8304FC9E.E340D68F-ON802572B2.004D0CC2-802572B2.004DC797@xcom.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10012_4391101.1175610788834
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Jonathon,

Since the number of users in your application is small, perhaps you could
apply a pre-generated filter per user, and apply this to the search, howeve=
r
this won't scale well if the number of users grow.

Another idea might be to have several filters,each of which detail a
particular type of access rather than a filter / user. Then using the
ChainedFilter chain together these filters, depending on the user, at query
time.

Regards,
Dan

On 4/3/07, Jonathan O'Connor <jonathan.oconnor@xcom.de> wrote:
>
> Hi,
> I have a database of a million documents and about 100 users. The
> documents
> can have an access control list, and there is a complex, recursive
> algorithm to say if a particular user can see a particular document.
>
> My problem is that my search algorithm is to first do a standard lucene
> search for matching documents, and then check security on each one found,
> just returning the allowed documents. However, if I do this, and the
> lucene
> returns 100000 docs, but the user can only see 10 of these, then obviousl=
y
> the search is going to take an awful long time.
>
> Has anyone come across this problem before, and if so what approach did
> you
> take? I guess I could precalculate the permissions for every user-documen=
t
> pair, but that's alot of storage, and a lot of precalculation!
>
> I await the list's accumulated wisdom with eagerness and interest.
> Thanks,
> Jonathan O'Connor
> XCOM Dublin
>
>
>
> *** XCOM AG Legal Disclaimer ***
>
> Diese E-Mail einschliesslich ihrer Anhaenge ist vertraulich und ist allei=
n
> f=FCr den Gebrauch durch den vorgesehenen Empfaenger bestimmt. Dritten is=
t
> das Lesen, Verteilen oder Weiterleiten dieser E-Mail untersagt. Wir
> bitten,
> eine fehlgeleitete E-Mail unverzueglich vollstaendig zu loeschen und uns
> eine Nachricht zukommen zu lassen.
>
> This email may contain material that is confidential and for the sole use
> of the intended recipient. Any review, distribution by others or
> forwarding
> without express permission is strictly prohibited. If you are not the
> intended recipient, please contact the sender and delete all copies.
>
> Hauptsitz: Bahnstrasse 37, D-47877 Willich, USt-IdNr.: DE 812 885 664
> Kommunikation: Telefon +49 2154 9209-70, Telefax +49 2154 9209-900,
> www.xcom.de
> Handelsregister: Amtsgericht Krefeld, HRB 10340
> Vorstand: Matthias Albrecht, Renate Becker-Grope, Marco Marty, Dr. Rainer
> Fuchs
> Vorsitzender des Aufsichtsrates: Stephan Steuer

------=_Part_10012_4391101.1175610788834--

From java-user-return-27337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 14:40:45 2007
Return-Path: <java-user-return-27337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11369 invoked from network); 3 Apr 2007 14:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 14:40:44 -0000
Received: (qmail 3959 invoked by uid 500); 3 Apr 2007 14:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3929 invoked by uid 500); 3 Apr 2007 14:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3905 invoked by uid 99); 3 Apr 2007 14:40:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:40:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cwho.work@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:40:39 -0700
Received: by an-out-0708.google.com with SMTP id c3so1568105ana
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 07:40:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=eIm66914xg2s8SOXtLsJzuZtPc+gjYNktJzU+uMUhHfI61WeDEZ/4BJkdnfwfaIBfX2VHnzAq6sJWMw6S8b4ULlJtP/Skc1im7dajAABrfwoVJOHyjaYyArCy+9Vzrs/jSyqw7VtisIOzaGuUnfm6oiKyznEjn9DCcAkPiDv/6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=tNsvXa+J/eCMclyDxFnZFCCTpDt1p6KXCxMcJFZY8XoMfiiQGV7Qq5CyctzhrTkNBY/SERtexemOT0Ye5hRblwV9A38OS/EbwQqJ3nrFWLPIyV+Kt5JKVTDeL2YYeGvhRR9xtIe+Tt2I8fPYyw2cTdha5qoQRuh3Nuis6PMOTFg=
Received: by 10.100.196.3 with SMTP id t3mr4389180anf.1175611216946;
        Tue, 03 Apr 2007 07:40:16 -0700 (PDT)
Received: by 10.100.43.3 with HTTP; Tue, 3 Apr 2007 07:40:16 -0700 (PDT)
Message-ID: <6c33f9950704030740q5614b1f7i3379d88f1a14abfa@mail.gmail.com>
Date: Tue, 3 Apr 2007 23:40:16 +0900
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: java-user@lucene.apache.org
Subject: Index updates between machines
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

We are running a search service on the internet using two machines. We
have a crawler machine which crawls the web and merges new documents
found into the Lucene index. We have a searcher machine which allows
users to perform searches on the Lucene index.

Periodically, we would copy the newest version of the index from the
crawler machine over to the searcher machine (via copy over a NFS
mount). The searcher would then detect the new version, close the old
index, open the new index and resume the search service.

As the index have been growing in size, we have been noticing that the
search response time on the searcher machine increases drastically
when an index (about 15GB) is being copied from the crawler to the
searcher. Both machines run Fedora Core 4 and are on a gbps lan.

We've tried a number of ways to reduce the impact of the copy over NFS
on searching performance, such as "nice"ing the copy process, but to
no avail. I wonder if anyone is running a lucene search service over a
similar architecture and how you are managing the updates to the
lucene index.

Thanks!

Regards,
CW

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 14:52:15 2007
Return-Path: <java-user-return-27338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17736 invoked from network); 3 Apr 2007 14:52:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 14:52:13 -0000
Received: (qmail 43907 invoked by uid 500); 3 Apr 2007 14:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43874 invoked by uid 500); 3 Apr 2007 14:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43860 invoked by uid 99); 3 Apr 2007 14:52:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:52:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rosherd@googlemail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:52:03 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1632028wra
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 07:51:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=googlemail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qhObFX6TNWDYlahIfw1V+fqEYCzv4Rl4HbKU0v7XQ4W5TTRglry74ggsSrK1gYT42n2/0D63QvL2aIrVnMndka+xI4flr0XUzkI67geaoFdCnjVVMQyFNfzwN+bfqKk+W/VBnCbj50N8ZtfMSgMt1vbGJHXKSCQS4LjuL7oquh8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dkkWxZ76jIBKmtnyWRGYLzYkMJJN+614KHbJLhcQC+fYF1fLwo1HOEmS7n979uMfdSzwzm1zGfTVJr9EK6tLlglmQ0kOK4qErlXXL6tg8gL3v/DC9vS97/GjUOsEVo381nApdrNFB4V1qj+CpU5AlN040SBSLBbPmqbzmljxtOc=
Received: by 10.114.151.13 with SMTP id y13mr2247331wad.1175611901821;
        Tue, 03 Apr 2007 07:51:41 -0700 (PDT)
Received: by 10.115.93.12 with HTTP; Tue, 3 Apr 2007 07:51:41 -0700 (PDT)
Message-ID: <1c36b0de0704030751q44f9af44paaf95aa79a8a6d8@mail.gmail.com>
Date: Tue, 3 Apr 2007 15:51:41 +0100
From: "Daniel Rosher" <rosherd@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Index updates between machines
In-Reply-To: <6c33f9950704030740q5614b1f7i3379d88f1a14abfa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10260_12080095.1175611901713"
References: <6c33f9950704030740q5614b1f7i3379d88f1a14abfa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10260_12080095.1175611901713
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi CW,

You might find this email from Doug Cutting useful, not NFS but using rsync
and hard links ... besides NFS without failover introduces a single point of
faliure.

http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html

Regards,
Dan


On 4/3/07, Chun Wei Ho <cwho.work@gmail.com> wrote:
>
> We are running a search service on the internet using two machines. We
> have a crawler machine which crawls the web and merges new documents
> found into the Lucene index. We have a searcher machine which allows
> users to perform searches on the Lucene index.
>
> Periodically, we would copy the newest version of the index from the
> crawler machine over to the searcher machine (via copy over a NFS
> mount). The searcher would then detect the new version, close the old
> index, open the new index and resume the search service.
>
> As the index have been growing in size, we have been noticing that the
> search response time on the searcher machine increases drastically
> when an index (about 15GB) is being copied from the crawler to the
> searcher. Both machines run Fedora Core 4 and are on a gbps lan.
>
> We've tried a number of ways to reduce the impact of the copy over NFS
> on searching performance, such as "nice"ing the copy process, but to
> no avail. I wonder if anyone is running a lucene search service over a
> similar architecture and how you are managing the updates to the
> lucene index.
>
> Thanks!
>
> Regards,
> CW
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10260_12080095.1175611901713--

From java-user-return-27339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 14:55:44 2007
Return-Path: <java-user-return-27339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18743 invoked from network); 3 Apr 2007 14:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 14:55:43 -0000
Received: (qmail 53158 invoked by uid 500); 3 Apr 2007 14:55:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53124 invoked by uid 500); 3 Apr 2007 14:55:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53111 invoked by uid 99); 3 Apr 2007 14:55:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:55:43 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 07:55:34 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1507411wxd
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 07:55:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=AYvZqSk7Bkmvkv00RLM8SYQSzp7jVt2+/N5FU366HPfMcXNHQrjdtTebZLmzT7CFJmTGBXkwjR9WpPNaZJUkWksXNyOJLXPGVaRIaHygQwCPgjmjqx7Xds0G2O3qChxnVZ6ScsEaro0HjF4zK59WTkCe8tXTlqKwdUYNIcU/Bw8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=MeOCxoyL2W/6I7h7PSOaRNurD5ztvK0thyVAtg28dKQBi28sd2G56ljYGe3F1iEyh4udZs9OywKoWNOGwW5rnOHvZVDEaIQSBSdxLGjz3LXUKuYFr2uhBu3nEC4QaLo0ymhg6jBn2pYbUc5tSN4zaxha5jDsCQUXF1mmsmInL2E=
Received: by 10.70.53.7 with SMTP id b7mr11137058wxa.1175612113622;
        Tue, 03 Apr 2007 07:55:13 -0700 (PDT)
Received: by 10.70.29.10 with HTTP; Tue, 3 Apr 2007 07:55:13 -0700 (PDT)
Message-ID: <bddd3c950704030755i1cae78fag57a56447b990d614@mail.gmail.com>
Date: Tue, 3 Apr 2007 19:25:13 +0430
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Extracting a subset of an index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3239_2198607.1175612113475"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3239_2198607.1175612113475
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi folks,
I need to extract a subset of an index so that I can move some documents to
another isolated machine to be searched locally. I'm not sure whether the
following scenario is correct:
- extracting the documents from the index by using one of the doc(i) methods
- adding the same Document objects to a fresh index.

Am I right?

--Jaf

------=_Part_3239_2198607.1175612113475--

From java-user-return-27340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 15:20:50 2007
Return-Path: <java-user-return-27340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31218 invoked from network); 3 Apr 2007 15:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 15:20:48 -0000
Received: (qmail 30779 invoked by uid 500); 3 Apr 2007 15:20:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30751 invoked by uid 500); 3 Apr 2007 15:20:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30723 invoked by uid 99); 3 Apr 2007 15:20:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:20:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rosherd@googlemail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:20:25 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1641924wra
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 08:20:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=googlemail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=atq+bfqEf7YZ+yNUszL0E74hrPw09wbmBBDPyhH5BXkZ1+QLntmQBEcIEagZ09Rp1QJoj2OwJSqDprX5Z6RLMq1//LuWndvQupAFfTN+y/nM8jp1lkQYcaNdTYYGJlNYefQaZj0t+AbOMnfpzwKakSyP03PuaWRlWLzkZE/ctZg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uLHf1ws1Zlo9CVAbZQ2+chbVArzgKNMAYOLN8HB40Aojql27CwE+SLKKyCciTKQSZz1Q0PHo5QIgF6d1ezaYCy03LgnxNARI2ImnEda5U+pWUoLT+OzIZwbKhfz0Dp+AIsoT9/1UUOY3jjLzf4oc2ZhjZpSX8rb2i+5NPWRUNXs=
Received: by 10.115.77.1 with SMTP id e1mr2269324wal.1175613603839;
        Tue, 03 Apr 2007 08:20:03 -0700 (PDT)
Received: by 10.115.93.12 with HTTP; Tue, 3 Apr 2007 08:20:03 -0700 (PDT)
Message-ID: <1c36b0de0704030820x273741a6t80f52477a85dd24c@mail.gmail.com>
Date: Tue, 3 Apr 2007 16:20:03 +0100
From: "Daniel Rosher" <rosherd@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: search-time boosting
In-Reply-To: <46113BFF.9060309@smarter.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10796_30630703.1175613603791"
References: <46113BFF.9060309@smarter.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10796_30630703.1175613603791
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ofer,

I think your best option is to boost the field for your category field
during index time with Field.setBoost(floatBoost)

You will have to reindex your corpus however.

Regards,
Dan

On 4/2/07, Ofer Nave <ofer@smarter.com> wrote:
>
> I'd like to be able to boost documents at search-time, and I'm not sure
> how to do it.
>
> Example:
>
> I'm building a search engine for products (comparison shopping).  Many
> queries tend to indicate a category (i.e., 'digital cameras') as opposed
> to a product (i.e., 'canon powershot').  I have the name of the category
> the product is in indexed in a separate field.  My intention was to
> query both the title field and the category field, and when the category
> field relevancy is extremely high, boost the documents in that category.
>
> Is there a way to do this?  Or an alternative approach to the problem?
>
> -ofer
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10796_30630703.1175613603791--

From java-user-return-27341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 15:25:11 2007
Return-Path: <java-user-return-27341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33800 invoked from network); 3 Apr 2007 15:25:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 15:25:09 -0000
Received: (qmail 47873 invoked by uid 500); 3 Apr 2007 15:25:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47841 invoked by uid 500); 3 Apr 2007 15:25:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47821 invoked by uid 99); 3 Apr 2007 15:25:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:25:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:25:01 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1517340wxd
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 08:24:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pO3TW8plLIN7VB9Xe2Q9EdJq53TliC4w1Exo9qDdMwN+5mqtKwha941CFfnWmTKrmebikFaJlgoC2PFqI5qEEj/1oIHwc8d5BIQCaJdHxZV651Hu8ke8Tk9DZFsigrd+FysC3LEjP0FchXAA5Gg9487bALPg5CQ8dsKxB25GbaM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FATO1m77+4TYTu5rJrjGH96w7LMZGqXy9UllihkGLQQ1g5CTQNa9kJ6WPa2IlKr8WBUp/XqqjwxnVbqdSFgoFhmplEpbFrKNzgzM5Cene03/ruTv4jlVUZclLO3XipxL7GC25MtfTIUj1C5JJ/Ibf2Z54q9ZtsAXh4dPTlSIZqc=
Received: by 10.114.79.1 with SMTP id c1mr2279832wab.1175613879981;
        Tue, 03 Apr 2007 08:24:39 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Tue, 3 Apr 2007 08:24:39 -0700 (PDT)
Message-ID: <359a92830704030824nef000d9tc5dfab2917fd9d9f@mail.gmail.com>
Date: Tue, 3 Apr 2007 11:24:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extracting a subset of an index
In-Reply-To: <bddd3c950704030755i1cae78fag57a56447b990d614@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11434_16170465.1175613879922"
References: <bddd3c950704030755i1cae78fag57a56447b990d614@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11434_16170465.1175613879922
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In the immortal words of Erik H.  ...it depends...

The big issue is whether you have fields in your index that are NOT
stored (i.e. Field.Store.NO). If this is the case, your documents
will not be complete, and adding it to the fresh index will not
include the un-stored data.

It's actually pretty common to store a field as
...Field.Store.NO, Field.Index.(UN_)TOKENIZED

Field.Store.COMPRESSED should be OK.

>From the Document API doc

"note that fields which are *not*
stored<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/document/Fieldable.html#isStored%28%29>are
*not* available in
documents retrieved from the index, e.g. with
Hits.doc(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Hits.html#doc%28int%29>,
Searcher.doc(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Searcher.html#doc%28int%29>or
IndexReader.document(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/index/IndexReader.html#document%28int%29>
."

Otherwise, it would *probably* work, but I haven't tried it. At worst,
you could create a new document and add the fields from the old
document to it......

Best
Erick

On 4/3/07, jafarim <jafarim@gmail.com> wrote:
>
> Hi folks,
> I need to extract a subset of an index so that I can move some documents
> to
> another isolated machine to be searched locally. I'm not sure whether the
> following scenario is correct:
> - extracting the documents from the index by using one of the doc(i)
> methods
> - adding the same Document objects to a fresh index.
>
> Am I right?
>
> --Jaf
>

------=_Part_11434_16170465.1175613879922--

From java-user-return-27342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 15:28:16 2007
Return-Path: <java-user-return-27342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36099 invoked from network); 3 Apr 2007 15:28:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 15:28:14 -0000
Received: (qmail 58726 invoked by uid 500); 3 Apr 2007 15:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58694 invoked by uid 500); 3 Apr 2007 15:28:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58679 invoked by uid 99); 3 Apr 2007 15:28:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:28:12 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_TEXT
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.192.192.42] (HELO ren.xcom.de) (62.192.192.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:28:01 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by ren.xcom.de (Postfix) with ESMTP id 8006879C04D
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 17:25:07 +0200 (CEST)
Received: from ren.xcom.de ([127.0.0.1])
	by localhost (ren.xcom.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0QwFhk9cr8wt for <java-user@lucene.apache.org>;
	Tue,  3 Apr 2007 17:25:02 +0200 (CEST)
Received: from jmail1.xcom.de (jmail1.xcom.de [62.192.192.139])
	by ren.xcom.de (Postfix) with ESMTP id 8A3B579C048
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 17:25:02 +0200 (CEST)
Received: (from mail@localhost)
	by jmail1.xcom.de (8.12.10/8.12.10) id l33FRYZE029462
	for java-user@lucene.apache.org; Tue, 3 Apr 2007 17:27:34 +0200
Received: from xgate1.xcom.de (virus [62.192.192.130])
 	by jmail1.xcom.de (8.12.10/8.12.10) with ESMTP id l33FRXm5029457
 	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 17:27:33 +0200
In-Reply-To: <4612648D.6070102@curtin.com>
Subject: Re: Design Problem: Searching large set of protected documents
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
From: "Jonathan O'Connor" <jonathan.oconnor@xcom.de>
Message-ID: <OF21D5DC55.FE68125A-ON802572B2.005396D5-802572B2.0053FE3E@xcom.de>
Date: Tue, 3 Apr 2007 16:17:25 +0100
X-MIMETrack: Serialize by Router on xgate1/SRV/XCOM(Release 6.5.5FP2|October 23, 2006) at
 03.04.2007 17:27:33
MIME-Version: 1.0
Content-Type: multipart/related; 
 	Boundary="0__=0FBBF821DFC010458f9e8a93df938690918c0FBBF821DFC01045"
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=0FBBF821DFC010458f9e8a93df938690918c0FBBF821DFC01045
Content-type: multipart/alternative; 
	Boundary="1__=0FBBF821DFC010458f9e8a93df938690918c0FBBF821DFC01045"

--1__=0FBBF821DFC010458f9e8a93df938690918c0FBBF821DFC01045
Content-type: text/plain; charset=ISO-8859-15
Content-transfer-encoding: base64


TWljaGFlbCwNCmFzIHVzdWFsIGl0cyBuZXZlciBzbyBlYXN5ISBTb21lIHVzZXJzIGNhbiBzZWUg
YWxtb3N0IGFsbCBkb2N1bWVudHMsIGFuZA0Kc29tZSBvdGhlciB1c2VycyBjYW4gc2VlIHZlcnkg
ZmV3Lg0KDQpJIGRpZCBmaW5kIGFuIGludGVyZXN0aW5nIGRvY3VtZW50IHRoYXQgZGVzY3JpYmVz
IHRoZSBwcm9ibGVtIChidXQgb2ZmZXJzDQpubyBzb2x1dGlvbnMgOi0oKSBodHRwOi8vd3d3Lmlk
ZWFlbmcuY29tL3B1Yi9lbnRzcmNoL3YzbjQvYXJ0aWNsZTAxLmh0bWwuDQoNClRoaXMgYXJ0aWNs
ZSB0YWxrcyBhYm91dCBlYXJseSBhbmQgbGF0ZSBiaW5kaW5nIG9mIHNlY3VyaXR5IGluZm9ybWF0
aW9uLg0KRWFybHkgYmluZGluZyBpcyBmYXN0ZXIsIGJ1dCBoYXJkZXIgdG8gaW1wbGVtZW50LiBB
bmQgb2YgY291cnNlLCBJDQppbXBsZW1lbnRlZCB0aGUgZWFzaWVyIG9uZS4NCg0KSSdtIGdvaW5n
IHRvIHNlZSB3aGF0IHRoZSBjb21wdXRhdGlvbmFsIGFuZCBzdG9yYWdlIGNvc3Qgd2lsbCBiZSBp
ZiBJDQpwcmVjYWxjdWxhdGUgdGhpcyBpbmZvLg0KQ2lhbywNCkpvbmF0aGFuIE8nQ29ubm9yDQpY
Q09NIER1Ymxpbg0KDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICJNaWNoYWVs
IEQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQog
ICAgICAgICAgICAgQ3VydGluIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICA8bWlrZUBjdXJ0aW4uY29tPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvIA0KICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnICAgICAgICAg
DQogICAgICAgICAgICAgMDMvMDQvMjAwNyAxNToyOCAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjYyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN1Ympl
Y3QgDQogICAgICAgICAgICAgUGxlYXNlIHJlc3BvbmQgdG8gICAgICAgICBSZTogRGVzaWduIFBy
b2JsZW06IFNlYXJjaGluZyBsYXJnZSANCiAgICAgICAgICAgICBqYXZhLXVzZXJAbHVjZW5lLiAg
ICAgICAgIHNldCBvZiBwcm90ZWN0ZWQgZG9jdW1lbnRzICAgICAgICAgIA0KICAgICAgICAgICAg
ICAgIGFwYWNoZS5vcmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KDQoNCg0K
DQpKb25hdGhhbiBPJ0Nvbm5vciB3cm90ZToNCg0KPiBJIGhhdmUgYSBkYXRhYmFzZSBvZiBhIG1p
bGxpb24gZG9jdW1lbnRzIGFuZCBhYm91dCAxMDAgdXNlcnMuIFRoZQ0KZG9jdW1lbnRzDQo+IGNh
biBoYXZlIGFuIGFjY2VzcyBjb250cm9sIGxpc3QsIGFuZCB0aGVyZSBpcyBhIGNvbXBsZXgsIHJl
Y3Vyc2l2ZQ0KPiBhbGdvcml0aG0gdG8gc2F5IGlmIGEgcGFydGljdWxhciB1c2VyIGNhbiBzZWUg
YSBwYXJ0aWN1bGFyIGRvY3VtZW50Lg0KPg0KPiBNeSBwcm9ibGVtIGlzIHRoYXQgbXkgc2VhcmNo
IGFsZ29yaXRobSBpcyB0byBmaXJzdCBkbyBhIHN0YW5kYXJkIGx1Y2VuZQ0KPiBzZWFyY2ggZm9y
IG1hdGNoaW5nIGRvY3VtZW50cywgYW5kIHRoZW4gY2hlY2sgc2VjdXJpdHkgb24gZWFjaCBvbmUg
Zm91bmQsDQo+IGp1c3QgcmV0dXJuaW5nIHRoZSBhbGxvd2VkIGRvY3VtZW50cy4gSG93ZXZlciwg
aWYgSSBkbyB0aGlzLCBhbmQgdGhlDQpsdWNlbmUNCj4gcmV0dXJucyAxMDAwMDAgZG9jcywgYnV0
IHRoZSB1c2VyIGNhbiBvbmx5IHNlZSAxMCBvZiB0aGVzZSwgdGhlbg0Kb2J2aW91c2x5DQo+IHRo
ZSBzZWFyY2ggaXMgZ29pbmcgdG8gdGFrZSBhbiBhd2Z1bCBsb25nIHRpbWUuDQo+DQo+IEhhcyBh
bnlvbmUgY29tZSBhY3Jvc3MgdGhpcyBwcm9ibGVtIGJlZm9yZSwgYW5kIGlmIHNvIHdoYXQgYXBw
cm9hY2ggZGlkDQp5b3UNCj4gdGFrZT8gSSBndWVzcyBJIGNvdWxkIHByZWNhbGN1bGF0ZSB0aGUg
cGVybWlzc2lvbnMgZm9yIGV2ZXJ5DQp1c2VyLWRvY3VtZW50DQo+IHBhaXIsIGJ1dCB0aGF0J3Mg
YWxvdCBvZiBzdG9yYWdlLCBhbmQgYSBsb3Qgb2YgcHJlY2FsY3VsYXRpb24hDQoNCk15IGtuZWUt
amVyayByZWFjdGlvbiBpcyB0byBzdWdnZXN0IGEgc2ltcGxlciBkb2N1bWVudCBzZWN1cml0eSBt
b2RlbCwNCmJ1dCBJJ20gZ3Vlc3NpbmcgdGhhdCB0aGF0IG9wdGlvbiBpc24ndCBhdmFpbGFibGUg
dG8geW91Lg0KDQpJbiB5b3VyIGV4YW1wbGUgdGhlIHNlY3VyaXR5IGF0dHJpYnV0ZXMgb2YgYSBk
b2N1bWVudCBhcmUgZmFyIG1vcmUNCmRpc2NyaW1pbmF0aW5nIHRoYW4gdGhlIHF1ZXJ5IHRlcm1z
LiAgSWYgdGhhdCByZWxhdGlvbnNoaXAgaXMgaW5kaWNhdGl2ZQ0Kb2YgbW9zdCBvZiB5b3VyIHVz
ZXJzIGFuZCBtb3N0IG9mIHRoZSBkb2N1bWVudHMsIHRoZSB1c2VycyBhbmQgZG9jdW1lbnRzDQph
cmVuJ3QgdXBkYXRlZCBtdWNoLCBhbmQgeW91IGhhdmUgYSBsb3Qgb2Ygc2VhcmNoaW5nIHRvIGRv
LA0KcHJlY2FsY3VsYXRpb24gKHJlc3VsdHMgaW50byBhbiBhZGRpdGlvbmFsIGRvY3VtZW50IGZp
ZWxkKSBzZWVtcyB0aGUgd2F5DQp0byBnby4gIEl0IG1pZ2h0IGV2ZW4gdHVybiBvdXQgdGhhdCwg
aWYgeW91IHN0YXJ0IGZyb20gYSBwcmVzdW1wdGlvbiBvZg0KY2FsY3VsYXRpbmcgZXZlcnkgdXNl
ci0tZG9jdW1lbnQgc2VjdXJpdHkgYXR0cmlidXRlLCB5b3UgY29tZSB1cCB3aXRoIGFuDQphbGdv
cml0aG0gdGhhdCBpcyBtdWNoIG1vcmUgZWZmaWNpZW50IHRoYW4gYSBvbmUtb2ZmLA0KY2FuLXRo
aXMtdXNlci1zZWUtdGhpcy1kb2N1bWVudCB0eXBlIG9mIGFsZ29yaXRobS4NCg0KUHJlY2FsY3Vs
YXRpb24gaXNuJ3QgbmVjZXNzYXJpbHkgYSBiYWQgdGhpbmcuICBPZnRlbiwgaXQncyBxdWl0ZQ0K
YmVuZWZpY2lhbCAtLSBmb3IgZXhhbXBsZSwgdGhlIGluZGV4aW5nIHByb2Nlc3MgaXRzZWxmIGlz
IGEgcHJldHR5DQpzdWJzdGFudGlhbCBwcmVjYWxjdWxhdGlvbiBzdGVwIQ0KDQpJZiB0aGlzIHNl
ZW1zIHVud2llbGR5IG9yIGltcHJhY3RpY2FsIGZvciBzb21lIHJlYXNvbiwgcGVyaGFwcyB5b3Ug
Y291bGQNCnBvc3QgbW9yZSBhdHRyaWJ1dGVzIG9mIHlvdXIgc2l0dWF0aW9uLCBzdWNoIGFzIHVz
ZXIgYW5kIGRhdGEgdXBkYXRlIGFuZA0KYWRkaXRpb24gZnJlcXVlbmN5LCBxdWVyeSBhdHRyaWJ1
dGVzIGFuZCBmcmVxdWVuY3ksIGFuZCBzbyBvbi4NCg0KLS1NREMNCg0KLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnDQoNCg0KDQoNCg0KDQoqKiogWENPTSBBRyBMZWdhbCBEaXNjbGFpbWVy
ICoqKg0KDQpEaWVzZSBFLU1haWwgZWluc2NobGllc3NsaWNoIGlocmVyIEFuaGFlbmdlIGlzdCB2
ZXJ0cmF1bGljaCB1bmQgaXN0IGFsbGVpbg0KZvxyIGRlbiBHZWJyYXVjaCBkdXJjaCBkZW4gdm9y
Z2VzZWhlbmVuIEVtcGZhZW5nZXIgYmVzdGltbXQuIERyaXR0ZW4gaXN0DQpkYXMgTGVzZW4sIFZl
cnRlaWxlbiBvZGVyIFdlaXRlcmxlaXRlbiBkaWVzZXIgRS1NYWlsIHVudGVyc2FndC4gV2lyIGJp
dHRlbiwNCmVpbmUgZmVobGdlbGVpdGV0ZSBFLU1haWwgdW52ZXJ6dWVnbGljaCB2b2xsc3RhZW5k
aWcgenUgbG9lc2NoZW4gdW5kIHVucw0KZWluZSBOYWNocmljaHQgenVrb21tZW4genUgbGFzc2Vu
Lg0KDQpUaGlzIGVtYWlsIG1heSBjb250YWluIG1hdGVyaWFsIHRoYXQgaXMgY29uZmlkZW50aWFs
IGFuZCBmb3IgdGhlIHNvbGUgdXNlDQpvZiB0aGUgaW50ZW5kZWQgcmVjaXBpZW50LiBBbnkgcmV2
aWV3LCBkaXN0cmlidXRpb24gYnkgb3RoZXJzIG9yIGZvcndhcmRpbmcNCndpdGhvdXQgZXhwcmVz
cyBwZXJtaXNzaW9uIGlzIHN0cmljdGx5IHByb2hpYml0ZWQuIElmIHlvdSBhcmUgbm90IHRoZQ0K
aW50ZW5kZWQgcmVjaXBpZW50LCBwbGVhc2UgY29udGFjdCB0aGUgc2VuZGVyIGFuZCBkZWxldGUg
YWxsIGNvcGllcy4NCg0KSGF1cHRzaXR6OiBCYWhuc3RyYXNzZSAzNywgRC00Nzg3NyBXaWxsaWNo
LCBVU3QtSWROci46IERFIDgxMiA4ODUgNjY0DQpLb21tdW5pa2F0aW9uOiBUZWxlZm9uICs0OSAy
MTU0IDkyMDktNzAsIFRlbGVmYXggKzQ5IDIxNTQgOTIwOS05MDAsDQp3d3cueGNvbS5kZQ0KSGFu
ZGVsc3JlZ2lzdGVyOiBBbXRzZ2VyaWNodCBLcmVmZWxkLCBIUkIgMTAzNDANClZvcnN0YW5kOiBN
YXR0aGlhcyBBbGJyZWNodCwgUmVuYXRlIEJlY2tlci1Hcm9wZSwgTWFyY28gTWFydHksIERyLiBS
YWluZXINCkZ1Y2hzDQpWb3JzaXR6ZW5kZXIgZGVzIEF1ZnNpY2h0c3JhdGVzOiBTdGVwaGFuIFN0
ZXVlcg==

--1__=0FBBF821DFC010458f9e8a93df938690918c0FBBF821DFC01045
Content-type: text/html; charset=ISO-8859-15
Content-Disposition: inline
Content-transfer-encoding: base64

PGh0bWw+PGJvZHk+DQo8cD5NaWNoYWVsLDxicj4NCmFzIHVzdWFsIGl0cyBuZXZlciBzbyBlYXN5
ISBTb21lIHVzZXJzIGNhbiBzZWUgYWxtb3N0IGFsbCBkb2N1bWVudHMsIGFuZCBzb21lIG90aGVy
IHVzZXJzIGNhbiBzZWUgdmVyeSBmZXcuPGJyPg0KPGJyPg0KSSBkaWQgZmluZCBhbiBpbnRlcmVz
dGluZyBkb2N1bWVudCB0aGF0IGRlc2NyaWJlcyB0aGUgcHJvYmxlbSAoYnV0IG9mZmVycyBubyBz
b2x1dGlvbnMgOi0oKSA8YSBocmVmPSJodHRwOi8vd3d3LmlkZWFlbmcuY29tL3B1Yi9lbnRzcmNo
L3YzbjQvYXJ0aWNsZTAxLmh0bWwiPmh0dHA6Ly93d3cuaWRlYWVuZy5jb20vcHViL2VudHNyY2gv
djNuNC9hcnRpY2xlMDEuaHRtbDwvYT4uPGJyPg0KPGJyPg0KVGhpcyBhcnRpY2xlIHRhbGtzIGFi
b3V0IGVhcmx5IGFuZCBsYXRlIGJpbmRpbmcgb2Ygc2VjdXJpdHkgaW5mb3JtYXRpb24uIEVhcmx5
IGJpbmRpbmcgaXMgZmFzdGVyLCBidXQgaGFyZGVyIHRvIGltcGxlbWVudC4gQW5kIG9mIGNvdXJz
ZSwgSSBpbXBsZW1lbnRlZCB0aGUgZWFzaWVyIG9uZS48YnI+DQo8YnI+DQpJJ20gZ29pbmcgdG8g
c2VlIHdoYXQgdGhlIGNvbXB1dGF0aW9uYWwgYW5kIHN0b3JhZ2UgY29zdCB3aWxsIGJlIGlmIEkg
cHJlY2FsY3VsYXRlIHRoaXMgaW5mby48YnI+DQpDaWFvLDxicj4NCkpvbmF0aGFuIE8nQ29ubm9y
PGJyPg0KWENPTSBEdWJsaW48YnI+DQo8aW1nIHNyYz0iY2lkOjEwX189MEZCQkY4MjFERkMwMTA0
NThmOWU4YTkzZGY5Mzg2OTBAeGNvbS5kZSIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBhbHQ9Iklu
YWN0aXZlIGhpZGUgZGV0YWlscyBmb3IgJnF1b3Q7TWljaGFlbCBELiBDdXJ0aW4mcXVvdDsgJmx0
O21pa2VAY3VydGluLmNvbSZndDsiPiZxdW90O01pY2hhZWwgRC4gQ3VydGluJnF1b3Q7ICZsdDtt
aWtlQGN1cnRpbi5jb20mZ3Q7PGJyPg0KPGJyPg0KPGJyPg0KDQo8dGFibGUgd2lkdGg9IjEwMCUi
IGJvcmRlcj0iMCIgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIj4NCjx0ciB2YWxpZ249
InRvcCI+PHRkIHN0eWxlPSJiYWNrZ3JvdW5kLWltYWdlOnVybChjaWQ6MjBfXz0wRkJCRjgyMURG
QzAxMDQ1OGY5ZThhOTNkZjkzODY5MEB4Y29tLmRlKTsgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJl
cGVhdDsgIiB3aWR0aD0iNDAlIj4NCjx1bD4NCjx1bD4NCjx1bD4NCjx1bD48Yj48Zm9udCBzaXpl
PSIyIj4mcXVvdDtNaWNoYWVsIEQuIEN1cnRpbiZxdW90OyAmbHQ7bWlrZUBjdXJ0aW4uY29tJmd0
OzwvZm9udD48L2I+PGZvbnQgc2l6ZT0iMiI+IDwvZm9udD4NCjxwPjxmb250IHNpemU9IjIiPjAz
LzA0LzIwMDcgMTU6Mjg8L2ZvbnQ+DQo8dGFibGUgYm9yZGVyPSIxIj4NCjx0ciB2YWxpZ249InRv
cCI+PHRkIHdpZHRoPSIxNjgiIGJnY29sb3I9IiNGRkZGRkYiPjxkaXYgYWxpZ249ImNlbnRlciI+
PGZvbnQgc2l6ZT0iMiI+UGxlYXNlIHJlc3BvbmQgdG88YnI+DQpqYXZhLXVzZXJAbHVjZW5lLmFw
YWNoZS5vcmc8L2ZvbnQ+PC9kaXY+PC90ZD48L3RyPg0KPC90YWJsZT4NCjwvdWw+DQo8L3VsPg0K
PC91bD4NCjwvdWw+DQo8L3RkPjx0ZCB3aWR0aD0iNjAlIj4NCjx0YWJsZSB3aWR0aD0iMTAwJSIg
Ym9yZGVyPSIwIiBjZWxsc3BhY2luZz0iMCIgY2VsbHBhZGRpbmc9IjAiPg0KPHRyIHZhbGlnbj0i
dG9wIj48dGQgd2lkdGg9IjElIiB2YWxpZ249Im1pZGRsZSI+PGltZyBzcmM9ImNpZDozMF9fPTBG
QkJGODIxREZDMDEwNDU4ZjllOGE5M2RmOTM4NjkwQHhjb20uZGUiIGJvcmRlcj0iMCIgaGVpZ2h0
PSIxIiB3aWR0aD0iNTgiIGFsdD0iIj48YnI+DQo8ZGl2IGFsaWduPSJyaWdodCI+PGZvbnQgc2l6
ZT0iMiI+VG88L2ZvbnQ+PC9kaXY+PC90ZD48dGQgd2lkdGg9IjEwMCUiPjxpbWcgc3JjPSJjaWQ6
MzBfXz0wRkJCRjgyMURGQzAxMDQ1OGY5ZThhOTNkZjkzODY5MEB4Y29tLmRlIiBib3JkZXI9IjAi
IGhlaWdodD0iMSIgd2lkdGg9IjEiIGFsdD0iIj48YnI+DQo8Zm9udCBzaXplPSIyIj5qYXZhLXVz
ZXJAbHVjZW5lLmFwYWNoZS5vcmc8L2ZvbnQ+PC90ZD48L3RyPg0KDQo8dHIgdmFsaWduPSJ0b3Ai
Pjx0ZCB3aWR0aD0iMSUiIHZhbGlnbj0ibWlkZGxlIj48aW1nIHNyYz0iY2lkOjMwX189MEZCQkY4
MjFERkMwMTA0NThmOWU4YTkzZGY5Mzg2OTBAeGNvbS5kZSIgYm9yZGVyPSIwIiBoZWlnaHQ9IjEi
IHdpZHRoPSI1OCIgYWx0PSIiPjxicj4NCjxkaXYgYWxpZ249InJpZ2h0Ij48Zm9udCBzaXplPSIy
Ij5jYzwvZm9udD48L2Rpdj48L3RkPjx0ZCB3aWR0aD0iMTAwJSI+PGltZyBzcmM9ImNpZDozMF9f
PTBGQkJGODIxREZDMDEwNDU4ZjllOGE5M2RmOTM4NjkwQHhjb20uZGUiIGJvcmRlcj0iMCIgaGVp
Z2h0PSIxIiB3aWR0aD0iMSIgYWx0PSIiPjxicj4NCjwvdGQ+PC90cj4NCg0KPHRyIHZhbGlnbj0i
dG9wIj48dGQgd2lkdGg9IjElIiB2YWxpZ249Im1pZGRsZSI+PGltZyBzcmM9ImNpZDozMF9fPTBG
QkJGODIxREZDMDEwNDU4ZjllOGE5M2RmOTM4NjkwQHhjb20uZGUiIGJvcmRlcj0iMCIgaGVpZ2h0
PSIxIiB3aWR0aD0iNTgiIGFsdD0iIj48YnI+DQo8ZGl2IGFsaWduPSJyaWdodCI+PGZvbnQgc2l6
ZT0iMiI+U3ViamVjdDwvZm9udD48L2Rpdj48L3RkPjx0ZCB3aWR0aD0iMTAwJSI+PGltZyBzcmM9
ImNpZDozMF9fPTBGQkJGODIxREZDMDEwNDU4ZjllOGE5M2RmOTM4NjkwQHhjb20uZGUiIGJvcmRl
cj0iMCIgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgYWx0PSIiPjxicj4NCjxmb250IHNpemU9IjIiPlJl
OiBEZXNpZ24gUHJvYmxlbTogU2VhcmNoaW5nIGxhcmdlIHNldCBvZiBwcm90ZWN0ZWQgZG9jdW1l
bnRzPC9mb250PjwvdGQ+PC90cj4NCjwvdGFibGU+DQoNCjx0YWJsZSBib3JkZXI9IjAiIGNlbGxz
cGFjaW5nPSIwIiBjZWxscGFkZGluZz0iMCI+DQo8dHIgdmFsaWduPSJ0b3AiPjx0ZCB3aWR0aD0i
NTgiPjxpbWcgc3JjPSJjaWQ6MzBfXz0wRkJCRjgyMURGQzAxMDQ1OGY5ZThhOTNkZjkzODY5MEB4
Y29tLmRlIiBib3JkZXI9IjAiIGhlaWdodD0iMSIgd2lkdGg9IjEiIGFsdD0iIj48L3RkPjx0ZCB3
aWR0aD0iMzM2Ij48aW1nIHNyYz0iY2lkOjMwX189MEZCQkY4MjFERkMwMTA0NThmOWU4YTkzZGY5
Mzg2OTBAeGNvbS5kZSIgYm9yZGVyPSIwIiBoZWlnaHQ9IjEiIHdpZHRoPSIxIiBhbHQ9IiI+PC90
ZD48L3RyPg0KPC90YWJsZT4NCjwvdGQ+PC90cj4NCjwvdGFibGU+DQo8YnI+DQo8dHQ+Sm9uYXRo
YW4gTydDb25ub3Igd3JvdGU6PGJyPg0KPGJyPg0KJmd0OyBJIGhhdmUgYSBkYXRhYmFzZSBvZiBh
IG1pbGxpb24gZG9jdW1lbnRzIGFuZCBhYm91dCAxMDAgdXNlcnMuIFRoZSBkb2N1bWVudHM8YnI+
DQomZ3Q7IGNhbiBoYXZlIGFuIGFjY2VzcyBjb250cm9sIGxpc3QsIGFuZCB0aGVyZSBpcyBhIGNv
bXBsZXgsIHJlY3Vyc2l2ZTxicj4NCiZndDsgYWxnb3JpdGhtIHRvIHNheSBpZiBhIHBhcnRpY3Vs
YXIgdXNlciBjYW4gc2VlIGEgcGFydGljdWxhciBkb2N1bWVudC48YnI+DQomZ3Q7IDxicj4NCiZn
dDsgTXkgcHJvYmxlbSBpcyB0aGF0IG15IHNlYXJjaCBhbGdvcml0aG0gaXMgdG8gZmlyc3QgZG8g
YSBzdGFuZGFyZCBsdWNlbmU8YnI+DQomZ3Q7IHNlYXJjaCBmb3IgbWF0Y2hpbmcgZG9jdW1lbnRz
LCBhbmQgdGhlbiBjaGVjayBzZWN1cml0eSBvbiBlYWNoIG9uZSBmb3VuZCw8YnI+DQomZ3Q7IGp1
c3QgcmV0dXJuaW5nIHRoZSBhbGxvd2VkIGRvY3VtZW50cy4gSG93ZXZlciwgaWYgSSBkbyB0aGlz
LCBhbmQgdGhlIGx1Y2VuZTxicj4NCiZndDsgcmV0dXJucyAxMDAwMDAgZG9jcywgYnV0IHRoZSB1
c2VyIGNhbiBvbmx5IHNlZSAxMCBvZiB0aGVzZSwgdGhlbiBvYnZpb3VzbHk8YnI+DQomZ3Q7IHRo
ZSBzZWFyY2ggaXMgZ29pbmcgdG8gdGFrZSBhbiBhd2Z1bCBsb25nIHRpbWUuPGJyPg0KJmd0OyA8
YnI+DQomZ3Q7IEhhcyBhbnlvbmUgY29tZSBhY3Jvc3MgdGhpcyBwcm9ibGVtIGJlZm9yZSwgYW5k
IGlmIHNvIHdoYXQgYXBwcm9hY2ggZGlkIHlvdTxicj4NCiZndDsgdGFrZT8gSSBndWVzcyBJIGNv
dWxkIHByZWNhbGN1bGF0ZSB0aGUgcGVybWlzc2lvbnMgZm9yIGV2ZXJ5IHVzZXItZG9jdW1lbnQ8
YnI+DQomZ3Q7IHBhaXIsIGJ1dCB0aGF0J3MgYWxvdCBvZiBzdG9yYWdlLCBhbmQgYSBsb3Qgb2Yg
cHJlY2FsY3VsYXRpb24hPGJyPg0KPGJyPg0KTXkga25lZS1qZXJrIHJlYWN0aW9uIGlzIHRvIHN1
Z2dlc3QgYSBzaW1wbGVyIGRvY3VtZW50IHNlY3VyaXR5IG1vZGVsLCA8YnI+DQpidXQgSSdtIGd1
ZXNzaW5nIHRoYXQgdGhhdCBvcHRpb24gaXNuJ3QgYXZhaWxhYmxlIHRvIHlvdS48YnI+DQo8YnI+
DQpJbiB5b3VyIGV4YW1wbGUgdGhlIHNlY3VyaXR5IGF0dHJpYnV0ZXMgb2YgYSBkb2N1bWVudCBh
cmUgZmFyIG1vcmUgPGJyPg0KZGlzY3JpbWluYXRpbmcgdGhhbiB0aGUgcXVlcnkgdGVybXMuICZu
YnNwO0lmIHRoYXQgcmVsYXRpb25zaGlwIGlzIGluZGljYXRpdmUgPGJyPg0Kb2YgbW9zdCBvZiB5
b3VyIHVzZXJzIGFuZCBtb3N0IG9mIHRoZSBkb2N1bWVudHMsIHRoZSB1c2VycyBhbmQgZG9jdW1l
bnRzIDxicj4NCmFyZW4ndCB1cGRhdGVkIG11Y2gsIGFuZCB5b3UgaGF2ZSBhIGxvdCBvZiBzZWFy
Y2hpbmcgdG8gZG8sIDxicj4NCnByZWNhbGN1bGF0aW9uIChyZXN1bHRzIGludG8gYW4gYWRkaXRp
b25hbCBkb2N1bWVudCBmaWVsZCkgc2VlbXMgdGhlIHdheSA8YnI+DQp0byBnby4gJm5ic3A7SXQg
bWlnaHQgZXZlbiB0dXJuIG91dCB0aGF0LCBpZiB5b3Ugc3RhcnQgZnJvbSBhIHByZXN1bXB0aW9u
IG9mIDxicj4NCmNhbGN1bGF0aW5nIGV2ZXJ5IHVzZXItLWRvY3VtZW50IHNlY3VyaXR5IGF0dHJp
YnV0ZSwgeW91IGNvbWUgdXAgd2l0aCBhbiA8YnI+DQphbGdvcml0aG0gdGhhdCBpcyBtdWNoIG1v
cmUgZWZmaWNpZW50IHRoYW4gYSBvbmUtb2ZmLCA8YnI+DQpjYW4tdGhpcy11c2VyLXNlZS10aGlz
LWRvY3VtZW50IHR5cGUgb2YgYWxnb3JpdGhtLjxicj4NCjxicj4NClByZWNhbGN1bGF0aW9uIGlz
bid0IG5lY2Vzc2FyaWx5IGEgYmFkIHRoaW5nLiAmbmJzcDtPZnRlbiwgaXQncyBxdWl0ZSA8YnI+
DQpiZW5lZmljaWFsIC0tIGZvciBleGFtcGxlLCB0aGUgaW5kZXhpbmcgcHJvY2VzcyBpdHNlbGYg
aXMgYSBwcmV0dHkgPGJyPg0Kc3Vic3RhbnRpYWwgcHJlY2FsY3VsYXRpb24gc3RlcCE8YnI+DQo8
YnI+DQpJZiB0aGlzIHNlZW1zIHVud2llbGR5IG9yIGltcHJhY3RpY2FsIGZvciBzb21lIHJlYXNv
biwgcGVyaGFwcyB5b3UgY291bGQgPGJyPg0KcG9zdCBtb3JlIGF0dHJpYnV0ZXMgb2YgeW91ciBz
aXR1YXRpb24sIHN1Y2ggYXMgdXNlciBhbmQgZGF0YSB1cGRhdGUgYW5kIDxicj4NCmFkZGl0aW9u
IGZyZXF1ZW5jeSwgcXVlcnkgYXR0cmlidXRlcyBhbmQgZnJlcXVlbmN5LCBhbmQgc28gb24uPGJy
Pg0KPGJyPg0KLS1NREM8YnI+DQo8YnI+DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS08YnI+DQpUbyB1bnN1YnNjcmli
ZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmc8YnI+DQpG
b3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBh
Y2hlLm9yZzxicj4NCjxicj4NCjwvdHQ+PGJyPg0KPGJyPg0KPGJyPg0KPGJyPg0KPGJyPg0KKioq
IFhDT00gQUcgTGVnYWwgRGlzY2xhaW1lciAqKio8YnI+DQo8YnI+DQpEaWVzZSBFLU1haWwgZWlu
c2NobGllc3NsaWNoIGlocmVyIEFuaGFlbmdlIGlzdCB2ZXJ0cmF1bGljaCB1bmQgaXN0IGFsbGVp
biBm/HIgZGVuIEdlYnJhdWNoIGR1cmNoIGRlbiB2b3JnZXNlaGVuZW4gRW1wZmFlbmdlciBiZXN0
aW1tdC4gRHJpdHRlbiBpc3QgZGFzIExlc2VuLCBWZXJ0ZWlsZW4gb2RlciBXZWl0ZXJsZWl0ZW4g
ZGllc2VyIEUtTWFpbCB1bnRlcnNhZ3QuIFdpciBiaXR0ZW4sIGVpbmUgZmVobGdlbGVpdGV0ZSBF
LU1haWwgdW52ZXJ6dWVnbGljaCB2b2xsc3RhZW5kaWcgenUgbG9lc2NoZW4gdW5kIHVucyBlaW5l
IE5hY2hyaWNodCB6dWtvbW1lbiB6dSBsYXNzZW4uPGJyPg0KPGJyPg0KVGhpcyBlbWFpbCBtYXkg
Y29udGFpbiBtYXRlcmlhbCB0aGF0IGlzIGNvbmZpZGVudGlhbCBhbmQgZm9yIHRoZSBzb2xlIHVz
ZSBvZiB0aGUgaW50ZW5kZWQgcmVjaXBpZW50LiBBbnkgcmV2aWV3LCBkaXN0cmlidXRpb24gYnkg
b3RoZXJzIG9yIGZvcndhcmRpbmcgd2l0aG91dCBleHByZXNzIHBlcm1pc3Npb24gaXMgc3RyaWN0
bHkgcHJvaGliaXRlZC4gSWYgeW91IGFyZSBub3QgdGhlIGludGVuZGVkIHJlY2lwaWVudCwgcGxl
YXNlIGNvbnRhY3QgdGhlIHNlbmRlciBhbmQgZGVsZXRlIGFsbCBjb3BpZXMuPGJyPg0KPGJyPg0K
SGF1cHRzaXR6OiBCYWhuc3RyYXNzZSAzNywgRC00Nzg3NyBXaWxsaWNoLCBVU3QtSWROci46IERF
IDgxMiA4ODUgNjY0PGJyPg0KS29tbXVuaWthdGlvbjogVGVsZWZvbiArNDkgMjE1NCA5MjA5LTcw
LCBUZWxlZmF4ICs0OSAyMTU0IDkyMDktOTAwLCB3d3cueGNvbS5kZTxicj4NCkhhbmRlbHNyZWdp
c3RlcjogQW10c2dlcmljaHQgS3JlZmVsZCwgSFJCIDEwMzQwPGJyPg0KVm9yc3RhbmQ6IE1hdHRo
aWFzIEFsYnJlY2h0LCBSZW5hdGUgQmVja2VyLUdyb3BlLCBNYXJjbyBNYXJ0eSwgRHIuIFJhaW5l
ciBGdWNoczxicj4NClZvcnNpdHplbmRlciBkZXMgQXVmc2ljaHRzcmF0ZXM6IFN0ZXBoYW4gU3Rl
dWVyPGJyPg0KPC9ib2R5PjwvaHRtbD4=


--1__=0FBBF821DFC010458f9e8a93df938690918c0FBBF821DFC01045--


--0__=0FBBF821DFC010458f9e8a93df938690918c0FBBF821DFC01045--

From java-user-return-27343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 15:30:33 2007
Return-Path: <java-user-return-27343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37406 invoked from network); 3 Apr 2007 15:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 15:30:30 -0000
Received: (qmail 63294 invoked by uid 500); 3 Apr 2007 15:30:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63265 invoked by uid 500); 3 Apr 2007 15:30:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63254 invoked by uid 99); 3 Apr 2007 15:30:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:30:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:30:19 -0700
Received: by ug-out-1314.google.com with SMTP id k40so341603ugc
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 08:29:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OlllO/Ug37qZiba+Py6pHK7gJy0Wh+fgYlyaqYY34Hm/l33mSvo2ob3hAY0hWXqyPrrLM2xatyHyXBAx+XpvihfkdRIs+uq7C/SkGSi9o5alTP2TpdQrtCCW8M7NQISKxARk4es7xCcskBwUMstDwQU1LRppbo/lSHmjBbZt6qU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jrPoQN76vGpJgmFbMWRW3BCkso4dRyqs2G4OVh8Oobx0gkexsFqFL5Xq6SVpCKESKKJu6bPQe8zawdz/AT4GP/zrQkApgVs9D0hdK/YWSqgl2Ft0WdKo5UJ/ywke3heGaFwYTvC8zlyQI6HjWlWqhCbs9lCwi+EJXiYJ2/rKAGM=
Received: by 10.115.106.7 with SMTP id i7mr2274039wam.1175614187447;
        Tue, 03 Apr 2007 08:29:47 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Tue, 3 Apr 2007 08:29:47 -0700 (PDT)
Message-ID: <359a92830704030829k14d78986i3f20e6581c6ee184@mail.gmail.com>
Date: Tue, 3 Apr 2007 11:29:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search-time boosting
In-Reply-To: <1c36b0de0704030820x273741a6t80f52477a85dd24c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11574_29070582.1175614187279"
References: <46113BFF.9060309@smarter.com>
	 <1c36b0de0704030820x273741a6t80f52477a85dd24c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11574_29070582.1175614187279
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think index time boosts are the way to go. From a message on
this list that I printed out (from Otis? Yonik? Chris? someone who
knows waaaay more about this topic than I do, probably Chris given
the lack of capitalization <G>)....

'...index time field boosts are a way to express things like
"this documents title is worth twice as much as the title of most
documents" query time boosts are a way to express "i care about
matches on this clause of my query twice as much as i do
about matches to other clauses of my query"...'

So I don't think that index time boosts express what Ofer wants...

Erick

On 4/3/07, Daniel Rosher <rosherd@googlemail.com> wrote:
>
> Hi Ofer,
>
> I think your best option is to boost the field for your category field
> during index time with Field.setBoost(floatBoost)
>
> You will have to reindex your corpus however.
>
> Regards,
> Dan
>
> On 4/2/07, Ofer Nave <ofer@smarter.com> wrote:
> >
> > I'd like to be able to boost documents at search-time, and I'm not sure
> > how to do it.
> >
> > Example:
> >
> > I'm building a search engine for products (comparison shopping).  Many
> > queries tend to indicate a category (i.e., 'digital cameras') as opposed
> > to a product (i.e., 'canon powershot').  I have the name of the category
> > the product is in indexed in a separate field.  My intention was to
> > query both the title field and the category field, and when the category
> > field relevancy is extremely high, boost the documents in that category.
> >
> > Is there a way to do this?  Or an alternative approach to the problem?
> >
> > -ofer
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_11574_29070582.1175614187279--

From java-user-return-27344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 15:44:52 2007
Return-Path: <java-user-return-27344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45030 invoked from network); 3 Apr 2007 15:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 15:44:50 -0000
Received: (qmail 7032 invoked by uid 500); 3 Apr 2007 15:44:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6999 invoked by uid 500); 3 Apr 2007 15:44:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6988 invoked by uid 99); 3 Apr 2007 15:44:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:44:49 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=HTML_MESSAGE,HTML_TAG_EXIST_TBODY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:44:39 -0700
Received: by ug-out-1314.google.com with SMTP id k40so346837ugc
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 08:44:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Wc3usbm+VTRunhrlqLPRIdB1jOGvvS0rqLhDjYAB5bKbXghrMa7lX4ZBQT17YBXtPE7wDsi7ytVmJdy0oSxIwWX0z6qeSuHn636pJlCrjWuviKCFYC+vgebwZNPRH9H6/lXC1iltqcdLqllD+etyuuFOYZK74/ttmqq9Xy6xBPo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sY+unIKASsGlLwW4n5kVdd/ht2jWteN+IlB7/LEH/4jm4LEH8ciMFweYIra/ccL8BtaKA9UpNX/BCPrkvAW0hVnrx///MCm1OSTAMC97dVfGD6bPmMtZIeUwUbsxXbfkaA6Zj7ZOoznDRoA+h8O8LnzGMbrPcSr/l4KUWo6rLQg=
Received: by 10.114.208.8 with SMTP id f8mr2294364wag.1175615049204;
        Tue, 03 Apr 2007 08:44:09 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Tue, 3 Apr 2007 08:44:09 -0700 (PDT)
Message-ID: <359a92830704030844q5e63b6b4ha9824933411a66df@mail.gmail.com>
Date: Tue, 3 Apr 2007 11:44:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design Problem: Searching large set of protected documents
In-Reply-To: <OF21D5DC55.FE68125A-ON802572B2.005396D5-802572B2.0053FE3E@xcom.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11958_14301685.1175615049130"
References: <4612648D.6070102@curtin.com>
	 <OF21D5DC55.FE68125A-ON802572B2.005396D5-802572B2.0053FE3E@xcom.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11958_14301685.1175615049130
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Storage isn't too much of a problem, 12.5 M since a Lucene Filter is just
a BitSet, one bit per document. (plus some trivial overhead).

Computational costs... only you know.....

But, is every user allowed individual permissions or are users part of
groups that have permissions? Filters have logical operators (well,
actually it's the bitset that has operators), so you may be able to
save a bunch of time by calculating group permissions
instead and using the relevant AND/OR/NOT operators. Assuming
your permissions are additive, this becomes something like...

Calculate a filter for each group
for each user
   for each group the user is in, or in the relevant group filter
   or in the users individual permissions
   store the filter away.
endfor

Then simply add the users filter to a BooleanQuery (MUST)
that you use when you search.

Don't know if this help much or not, but it's an idea <G>.

Best
Erick

On 4/3/07, Jonathan O'Connor <jonathan.oconnor@xcom.de> wrote:
>
> Michael,
> as usual its never so easy! Some users can see almost all documents, and
> some other users can see very few.
>
> I did find an interesting document that describes the problem (but offers
> no solutions :-() http://www.ideaeng.com/pub/entsrch/v3n4/article01.html.
>
> This article talks about early and late binding of security information.
> Early binding is faster, but harder to implement. And of course, I
> implemented the easier one.
>
> I'm going to see what the computational and storage cost will be if I
> precalculate this info.
> Ciao,
> Jonathan O'Connor
> XCOM Dublin
> [image: Inactive hide details for "Michael D. Curtin" <mike@curtin.com>]"=
Michael
> D. Curtin" <mike@curtin.com>
>
>
>
>     *"Michael D. Curtin" <mike@curtin.com>*
>
>             03/04/2007 15:28 Please respond to
>             java-user@lucene.apache.org
>
>
> To
>
> java-user@lucene.apache.org
> cc
>
>
> Subject
>
> Re: Design Problem: Searching large set of protected documents
>
> Jonathan O'Connor wrote:
>
> > I have a database of a million documents and about 100 users. The
> documents
> > can have an access control list, and there is a complex, recursive
> > algorithm to say if a particular user can see a particular document.
> >
> > My problem is that my search algorithm is to first do a standard lucene
> > search for matching documents, and then check security on each one
> found,
> > just returning the allowed documents. However, if I do this, and the
> lucene
> > returns 100000 docs, but the user can only see 10 of these, then
> obviously
> > the search is going to take an awful long time.
> >
> > Has anyone come across this problem before, and if so what approach did
> you
> > take? I guess I could precalculate the permissions for every
> user-document
> > pair, but that's alot of storage, and a lot of precalculation!
>
> My knee-jerk reaction is to suggest a simpler document security model,
> but I'm guessing that that option isn't available to you.
>
> In your example the security attributes of a document are far more
> discriminating than the query terms.  If that relationship is indicative
> of most of your users and most of the documents, the users and documents
> aren't updated much, and you have a lot of searching to do,
> precalculation (results into an additional document field) seems the way
> to go.  It might even turn out that, if you start from a presumption of
> calculating every user--document security attribute, you come up with an
> algorithm that is much more efficient than a one-off,
> can-this-user-see-this-document type of algorithm.
>
> Precalculation isn't necessarily a bad thing.  Often, it's quite
> beneficial -- for example, the indexing process itself is a pretty
> substantial precalculation step!
>
> If this seems unwieldy or impractical for some reason, perhaps you could
> post more attributes of your situation, such as user and data update and
> addition frequency, query attributes and frequency, and so on.
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
> *** XCOM AG Legal Disclaimer ***
>
> Diese E-Mail einschliesslich ihrer Anhaenge ist vertraulich und ist allei=
n
> f=FCr den Gebrauch durch den vorgesehenen Empfaenger bestimmt. Dritten is=
t das
> Lesen, Verteilen oder Weiterleiten dieser E-Mail untersagt. Wir bitten, e=
ine
> fehlgeleitete E-Mail unverzueglich vollstaendig zu loeschen und uns eine
> Nachricht zukommen zu lassen.
>
> This email may contain material that is confidential and for the sole use
> of the intended recipient. Any review, distribution by others or forwardi=
ng
> without express permission is strictly prohibited. If you are not the
> intended recipient, please contact the sender and delete all copies.
>
> Hauptsitz: Bahnstrasse 37, D-47877 Willich, USt-IdNr.: DE 812 885 664
> Kommunikation: Telefon +49 2154 9209-70, Telefax +49 2154 9209-900,
> www.xcom.de
> Handelsregister: Amtsgericht Krefeld, HRB 10340
> Vorstand: Matthias Albrecht, Renate Becker-Grope, Marco Marty, Dr. Rainer
> Fuchs
> Vorsitzender des Aufsichtsrates: Stephan Steuer
>
>

------=_Part_11958_14301685.1175615049130--

From java-user-return-27345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 15:53:30 2007
Return-Path: <java-user-return-27345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49314 invoked from network); 3 Apr 2007 15:53:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 15:53:28 -0000
Received: (qmail 32957 invoked by uid 500); 3 Apr 2007 15:53:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32917 invoked by uid 500); 3 Apr 2007 15:53:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32906 invoked by uid 99); 3 Apr 2007 15:53:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:53:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.6.72.243] (HELO annwn13.rutgers.edu) (128.6.72.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:53:17 -0700
Received: from localhost (localhost.rutgers.edu [127.0.0.1])
	by annwn13.rutgers.edu (Postfix) with ESMTP id 53BD632407B
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 11:52:56 -0400 (EDT)
Received: from annwn13.rutgers.edu ([127.0.0.1])
	by localhost (annwn13.rutgers.edu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 15856-08 for <java-user@lucene.apache.org>;
	Tue, 3 Apr 2007 11:52:56 -0400 (EDT)
Received: from [172.16.149.29] (faizan.ad.ess.rutgers.edu [172.16.149.29])
	by annwn13.rutgers.edu (Postfix) with ESMTP id 34DD632407A
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 11:52:56 -0400 (EDT)
Message-ID: <46127857.4070307@pegasus.rutgers.edu>
Date: Tue, 03 Apr 2007 11:52:55 -0400
From: Faizan Ahmed <faizan@pegasus.rutgers.edu>
Reply-To:  faizan@pegasus.rutgers.edu
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Using Lucene to apply LSI
References: <fa05c3d360a2.460afeee@ucm.es>
In-Reply-To: <fa05c3d360a2.460afeee@ucm.es>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: Virus Scanned by NBCS 
X-Virus-Checked: Checked by ClamAV on apache.org

Jos Ramn Prez Agera wrote:
> you need to use JAMA combined with Lucene, using the vectors that are builded by lucene to compute SVD with JAMA
>
> http://math.nist.gov/javanumerics/jama/
>   
Thanks for your help. I am new to Lucene and do not know how to build a 
vector. I will have my input data stored in several files (50+). Can you 
give me little code snippet how to build vector from there.

Thanks for help.

Faizan
> Best
>
>
> jose
>
> Jos Ramn Prez Agera
>
> Dept. de Ingeniera del Software e Inteligencia Artificial
> Despacho 411 tlf. 913947599
> Facultad de Informtica
> Universidad Complutense de Madrid
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 15:56:05 2007
Return-Path: <java-user-return-27346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50221 invoked from network); 3 Apr 2007 15:56:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 15:56:04 -0000
Received: (qmail 41066 invoked by uid 500); 3 Apr 2007 15:56:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41027 invoked by uid 500); 3 Apr 2007 15:56:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41016 invoked by uid 99); 3 Apr 2007 15:56:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:56:04 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gv.ashwin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 08:55:55 -0700
Received: by ug-out-1314.google.com with SMTP id k40so351051ugc
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 08:55:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=Y0pnTlkxnZ7lOUwmNwCxK9S8JqAHFdb5+2k1mKeSsL05UqneerZsZ9Ot4zTl0MUOs3vYBLue06lC/l7GdeoXylKttczOz63MaP8E85JRQDtFlVqXFgAU74YjmSuq7y/LBpHMC1OT5g+a0qLnHyWwdEQ9dELnIJFMpjsxNXHaLIs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=EMBhB4eQTTsuIGIpqZ/nhMVHIHIdbpWwELFYp6/Ii3mb2fN4TIM25lqQSgtAt/2kUPAx9idHZQ95QSgqZdVLVkBzqtD5Un6g12vcOIh6ui/4FKlO1HBfIzn3rn9CNwXo4paH33A4Ruf9K169GSU4r7cIqpbTyivOb4FXL9DwK+Y=
Received: by 10.67.101.10 with SMTP id d10mr735950ugm.1175615734127;
        Tue, 03 Apr 2007 08:55:34 -0700 (PDT)
Received: by 10.67.6.5 with HTTP; Tue, 3 Apr 2007 08:55:34 -0700 (PDT)
Message-ID: <2b817f360704030855n7e712569mb834969030ae184f@mail.gmail.com>
Date: Tue, 3 Apr 2007 21:25:34 +0530
From: "ashwin kumar" <gv.ashwin@gmail.com>
To: java-user@lucene.apache.org
Subject: Limitations of lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2271_32402225.1175615734059"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2271_32402225.1175615734059
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi all i would like to know the limitation of lucene index.if anybody have
any links or ebooks  please forward..

thanks
regards
ashwin

------=_Part_2271_32402225.1175615734059--

From java-user-return-27347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 16:08:33 2007
Return-Path: <java-user-return-27347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55218 invoked from network); 3 Apr 2007 16:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 16:08:32 -0000
Received: (qmail 78639 invoked by uid 500); 3 Apr 2007 16:08:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78596 invoked by uid 500); 3 Apr 2007 16:08:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78584 invoked by uid 99); 3 Apr 2007 16:08:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 09:08:30 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_TEXT
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.192.192.42] (HELO ren.xcom.de) (62.192.192.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 09:08:18 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by ren.xcom.de (Postfix) with ESMTP id 46EDA79C049
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 18:05:24 +0200 (CEST)
Received: from ren.xcom.de ([127.0.0.1])
	by localhost (ren.xcom.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id RSCCwHKgwg52 for <java-user@lucene.apache.org>;
	Tue,  3 Apr 2007 18:05:20 +0200 (CEST)
Received: from jmail1.xcom.de (jmail1.xcom.de [62.192.192.139])
	by ren.xcom.de (Postfix) with ESMTP id 9C0D879C048
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 18:05:20 +0200 (CEST)
Received: (from mail@localhost)
	by jmail1.xcom.de (8.12.10/8.12.10) id l33G7qLk032164
	for java-user@lucene.apache.org; Tue, 3 Apr 2007 18:07:52 +0200
Received: from xgate1.xcom.de (virus [62.192.192.130])
 	by jmail1.xcom.de (8.12.10/8.12.10) with ESMTP id l33G7qm5032159
 	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 18:07:52 +0200
In-Reply-To: <359a92830704030844q5e63b6b4ha9824933411a66df@mail.gmail.com>
Subject: Re: Design Problem: Searching large set of protected documents
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
From: "Jonathan O'Connor" <jonathan.oconnor@xcom.de>
Message-ID: <OF1703AA4F.ECBDD4A4-ON802572B2.00578D16-802572B2.0057ECC4@xcom.de>
Date: Tue, 3 Apr 2007 17:00:22 +0100
X-MIMETrack: Serialize by Router on xgate1/SRV/XCOM(Release 6.5.5FP2|October 23, 2006) at
 03.04.2007 18:07:52
MIME-Version: 1.0
Content-Type: multipart/related; 
 	Boundary="0__=0FBBF821DFC40B868f9e8a93df938690918c0FBBF821DFC40B86"
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=0FBBF821DFC40B868f9e8a93df938690918c0FBBF821DFC40B86
Content-type: multipart/alternative; 
	Boundary="1__=0FBBF821DFC40B868f9e8a93df938690918c0FBBF821DFC40B86"

--1__=0FBBF821DFC40B868f9e8a93df938690918c0FBBF821DFC40B86
Content-type: text/plain; charset=ISO-8859-15
Content-transfer-encoding: base64


RXJpY2ssDQp0aGFua3MgZm9yIHRoZSB0aXBzLiBJIGd1ZXNzIEknbGwgaGF2ZSB0byBkdXN0IG9m
ZiBteSBjb3B5IG9mIExJQSBhbmQgZ2V0DQpjcmFja2luZy4NCg0KQlRXLCBpbiBvdXIgc3lzdGVt
IGEgdXNlciBpcyBqdXN0IGEgZ3JvdXAgd2l0aCBhIHNpbmdsZSBmaXhlZCBtZW1iZXIgb2YNCml0
c2VsZi4NCg0KQ2lhbywNCkpvbmF0aGFuIE8nQ29ubm9yDQpYQ09NIER1Ymxpbg0KDQoNCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIA0KICAgICAgICAgICAgICJFcmljayBFcmlja3NvbiIgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgPGVyaWNrZXJp
Y2tzb25AZ20gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAg
ICAgICAgICAgICBhaWwuY29tPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFRvIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnICAgICAgICAgDQogICAgICAgICAgICAgMDMvMDQv
MjAwNyAxNjo0NCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYyAN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN1YmplY3QgDQogICAgICAgICAgICAgUGxl
YXNlIHJlc3BvbmQgdG8gICAgICAgICBSZTogRGVzaWduIFByb2JsZW06IFNlYXJjaGluZyBsYXJn
ZSANCiAgICAgICAgICAgICBqYXZhLXVzZXJAbHVjZW5lLiAgICAgICAgIHNldCBvZiBwcm90ZWN0
ZWQgZG9jdW1lbnRzICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGFwYWNoZS5vcmcgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KDQoNCg0KDQpTdG9yYWdlIGlzbid0IHRvbyBt
dWNoIG9mIGEgcHJvYmxlbSwgMTIuNSBNIHNpbmNlIGEgTHVjZW5lIEZpbHRlciBpcyBqdXN0DQph
IEJpdFNldCwgb25lIGJpdCBwZXIgZG9jdW1lbnQuIChwbHVzIHNvbWUgdHJpdmlhbCBvdmVyaGVh
ZCkuDQoNCkNvbXB1dGF0aW9uYWwgY29zdHMuLi4gb25seSB5b3Uga25vdy4uLi4uDQoNCkJ1dCwg
aXMgZXZlcnkgdXNlciBhbGxvd2VkIGluZGl2aWR1YWwgcGVybWlzc2lvbnMgb3IgYXJlIHVzZXJz
IHBhcnQgb2YNCmdyb3VwcyB0aGF0IGhhdmUgcGVybWlzc2lvbnM/IEZpbHRlcnMgaGF2ZSBsb2dp
Y2FsIG9wZXJhdG9ycyAod2VsbCwNCmFjdHVhbGx5IGl0J3MgdGhlIGJpdHNldCB0aGF0IGhhcyBv
cGVyYXRvcnMpLCBzbyB5b3UgbWF5IGJlIGFibGUgdG8NCnNhdmUgYSBidW5jaCBvZiB0aW1lIGJ5
IGNhbGN1bGF0aW5nIGdyb3VwIHBlcm1pc3Npb25zDQppbnN0ZWFkIGFuZCB1c2luZyB0aGUgcmVs
ZXZhbnQgQU5EL09SL05PVCBvcGVyYXRvcnMuIEFzc3VtaW5nDQp5b3VyIHBlcm1pc3Npb25zIGFy
ZSBhZGRpdGl2ZSwgdGhpcyBiZWNvbWVzIHNvbWV0aGluZyBsaWtlLi4uDQoNCkNhbGN1bGF0ZSBh
IGZpbHRlciBmb3IgZWFjaCBncm91cA0KZm9yIGVhY2ggdXNlcg0KICAgZm9yIGVhY2ggZ3JvdXAg
dGhlIHVzZXIgaXMgaW4sIG9yIGluIHRoZSByZWxldmFudCBncm91cCBmaWx0ZXINCiAgIG9yIGlu
IHRoZSB1c2VycyBpbmRpdmlkdWFsIHBlcm1pc3Npb25zDQogICBzdG9yZSB0aGUgZmlsdGVyIGF3
YXkuDQplbmRmb3INCg0KVGhlbiBzaW1wbHkgYWRkIHRoZSB1c2VycyBmaWx0ZXIgdG8gYSBCb29s
ZWFuUXVlcnkgKE1VU1QpDQp0aGF0IHlvdSB1c2Ugd2hlbiB5b3Ugc2VhcmNoLg0KDQpEb24ndCBr
bm93IGlmIHRoaXMgaGVscCBtdWNoIG9yIG5vdCwgYnV0IGl0J3MgYW4gaWRlYSA8Rz4uDQoNCkJl
c3QNCkVyaWNrDQoNCk9uIDQvMy8wNywgSm9uYXRoYW4gTydDb25ub3IgPGpvbmF0aGFuLm9jb25u
b3JAeGNvbS5kZT4gd3JvdGU6DQo+DQo+IE1pY2hhZWwsDQo+IGFzIHVzdWFsIGl0cyBuZXZlciBz
byBlYXN5ISBTb21lIHVzZXJzIGNhbiBzZWUgYWxtb3N0IGFsbCBkb2N1bWVudHMsIGFuZA0KPiBz
b21lIG90aGVyIHVzZXJzIGNhbiBzZWUgdmVyeSBmZXcuDQo+DQo+IEkgZGlkIGZpbmQgYW4gaW50
ZXJlc3RpbmcgZG9jdW1lbnQgdGhhdCBkZXNjcmliZXMgdGhlIHByb2JsZW0gKGJ1dCBvZmZlcnMN
Cj4gbm8gc29sdXRpb25zIDotKCkgaHR0cDovL3d3dy5pZGVhZW5nLmNvbS9wdWIvZW50c3JjaC92
M240L2FydGljbGUwMS5odG1sLg0KPg0KPiBUaGlzIGFydGljbGUgdGFsa3MgYWJvdXQgZWFybHkg
YW5kIGxhdGUgYmluZGluZyBvZiBzZWN1cml0eSBpbmZvcm1hdGlvbi4NCj4gRWFybHkgYmluZGlu
ZyBpcyBmYXN0ZXIsIGJ1dCBoYXJkZXIgdG8gaW1wbGVtZW50LiBBbmQgb2YgY291cnNlLCBJDQo+
IGltcGxlbWVudGVkIHRoZSBlYXNpZXIgb25lLg0KPg0KPiBJJ20gZ29pbmcgdG8gc2VlIHdoYXQg
dGhlIGNvbXB1dGF0aW9uYWwgYW5kIHN0b3JhZ2UgY29zdCB3aWxsIGJlIGlmIEkNCj4gcHJlY2Fs
Y3VsYXRlIHRoaXMgaW5mby4NCj4gQ2lhbywNCj4gSm9uYXRoYW4gTydDb25ub3INCj4gWENPTSBE
dWJsaW4NCj4gW2ltYWdlOiBJbmFjdGl2ZSBoaWRlIGRldGFpbHMgZm9yICJNaWNoYWVsIEQuIEN1
cnRpbiINCjxtaWtlQGN1cnRpbi5jb20+XSJNaWNoYWVsDQo+IEQuIEN1cnRpbiIgPG1pa2VAY3Vy
dGluLmNvbT4NCj4NCj4NCj4NCj4gICAgICoiTWljaGFlbCBELiBDdXJ0aW4iIDxtaWtlQGN1cnRp
bi5jb20+Kg0KPg0KPiAgICAgICAgICAgICAwMy8wNC8yMDA3IDE1OjI4IFBsZWFzZSByZXNwb25k
IHRvDQo+ICAgICAgICAgICAgIGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPg0KPg0KPiBU
bw0KPg0KPiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gY2MNCj4NCj4NCj4gU3ViamVj
dA0KPg0KPiBSZTogRGVzaWduIFByb2JsZW06IFNlYXJjaGluZyBsYXJnZSBzZXQgb2YgcHJvdGVj
dGVkIGRvY3VtZW50cw0KPg0KPiBKb25hdGhhbiBPJ0Nvbm5vciB3cm90ZToNCj4NCj4gPiBJIGhh
dmUgYSBkYXRhYmFzZSBvZiBhIG1pbGxpb24gZG9jdW1lbnRzIGFuZCBhYm91dCAxMDAgdXNlcnMu
IFRoZQ0KPiBkb2N1bWVudHMNCj4gPiBjYW4gaGF2ZSBhbiBhY2Nlc3MgY29udHJvbCBsaXN0LCBh
bmQgdGhlcmUgaXMgYSBjb21wbGV4LCByZWN1cnNpdmUNCj4gPiBhbGdvcml0aG0gdG8gc2F5IGlm
IGEgcGFydGljdWxhciB1c2VyIGNhbiBzZWUgYSBwYXJ0aWN1bGFyIGRvY3VtZW50Lg0KPiA+DQo+
ID4gTXkgcHJvYmxlbSBpcyB0aGF0IG15IHNlYXJjaCBhbGdvcml0aG0gaXMgdG8gZmlyc3QgZG8g
YSBzdGFuZGFyZCBsdWNlbmUNCj4gPiBzZWFyY2ggZm9yIG1hdGNoaW5nIGRvY3VtZW50cywgYW5k
IHRoZW4gY2hlY2sgc2VjdXJpdHkgb24gZWFjaCBvbmUNCj4gZm91bmQsDQo+ID4ganVzdCByZXR1
cm5pbmcgdGhlIGFsbG93ZWQgZG9jdW1lbnRzLiBIb3dldmVyLCBpZiBJIGRvIHRoaXMsIGFuZCB0
aGUNCj4gbHVjZW5lDQo+ID4gcmV0dXJucyAxMDAwMDAgZG9jcywgYnV0IHRoZSB1c2VyIGNhbiBv
bmx5IHNlZSAxMCBvZiB0aGVzZSwgdGhlbg0KPiBvYnZpb3VzbHkNCj4gPiB0aGUgc2VhcmNoIGlz
IGdvaW5nIHRvIHRha2UgYW4gYXdmdWwgbG9uZyB0aW1lLg0KPiA+DQo+ID4gSGFzIGFueW9uZSBj
b21lIGFjcm9zcyB0aGlzIHByb2JsZW0gYmVmb3JlLCBhbmQgaWYgc28gd2hhdCBhcHByb2FjaCBk
aWQNCj4geW91DQo+ID4gdGFrZT8gSSBndWVzcyBJIGNvdWxkIHByZWNhbGN1bGF0ZSB0aGUgcGVy
bWlzc2lvbnMgZm9yIGV2ZXJ5DQo+IHVzZXItZG9jdW1lbnQNCj4gPiBwYWlyLCBidXQgdGhhdCdz
IGFsb3Qgb2Ygc3RvcmFnZSwgYW5kIGEgbG90IG9mIHByZWNhbGN1bGF0aW9uIQ0KPg0KPiBNeSBr
bmVlLWplcmsgcmVhY3Rpb24gaXMgdG8gc3VnZ2VzdCBhIHNpbXBsZXIgZG9jdW1lbnQgc2VjdXJp
dHkgbW9kZWwsDQo+IGJ1dCBJJ20gZ3Vlc3NpbmcgdGhhdCB0aGF0IG9wdGlvbiBpc24ndCBhdmFp
bGFibGUgdG8geW91Lg0KPg0KPiBJbiB5b3VyIGV4YW1wbGUgdGhlIHNlY3VyaXR5IGF0dHJpYnV0
ZXMgb2YgYSBkb2N1bWVudCBhcmUgZmFyIG1vcmUNCj4gZGlzY3JpbWluYXRpbmcgdGhhbiB0aGUg
cXVlcnkgdGVybXMuICBJZiB0aGF0IHJlbGF0aW9uc2hpcCBpcyBpbmRpY2F0aXZlDQo+IG9mIG1v
c3Qgb2YgeW91ciB1c2VycyBhbmQgbW9zdCBvZiB0aGUgZG9jdW1lbnRzLCB0aGUgdXNlcnMgYW5k
IGRvY3VtZW50cw0KPiBhcmVuJ3QgdXBkYXRlZCBtdWNoLCBhbmQgeW91IGhhdmUgYSBsb3Qgb2Yg
c2VhcmNoaW5nIHRvIGRvLA0KPiBwcmVjYWxjdWxhdGlvbiAocmVzdWx0cyBpbnRvIGFuIGFkZGl0
aW9uYWwgZG9jdW1lbnQgZmllbGQpIHNlZW1zIHRoZSB3YXkNCj4gdG8gZ28uICBJdCBtaWdodCBl
dmVuIHR1cm4gb3V0IHRoYXQsIGlmIHlvdSBzdGFydCBmcm9tIGEgcHJlc3VtcHRpb24gb2YNCj4g
Y2FsY3VsYXRpbmcgZXZlcnkgdXNlci0tZG9jdW1lbnQgc2VjdXJpdHkgYXR0cmlidXRlLCB5b3Ug
Y29tZSB1cCB3aXRoIGFuDQo+IGFsZ29yaXRobSB0aGF0IGlzIG11Y2ggbW9yZSBlZmZpY2llbnQg
dGhhbiBhIG9uZS1vZmYsDQo+IGNhbi10aGlzLXVzZXItc2VlLXRoaXMtZG9jdW1lbnQgdHlwZSBv
ZiBhbGdvcml0aG0uDQo+DQo+IFByZWNhbGN1bGF0aW9uIGlzbid0IG5lY2Vzc2FyaWx5IGEgYmFk
IHRoaW5nLiAgT2Z0ZW4sIGl0J3MgcXVpdGUNCj4gYmVuZWZpY2lhbCAtLSBmb3IgZXhhbXBsZSwg
dGhlIGluZGV4aW5nIHByb2Nlc3MgaXRzZWxmIGlzIGEgcHJldHR5DQo+IHN1YnN0YW50aWFsIHBy
ZWNhbGN1bGF0aW9uIHN0ZXAhDQo+DQo+IElmIHRoaXMgc2VlbXMgdW53aWVsZHkgb3IgaW1wcmFj
dGljYWwgZm9yIHNvbWUgcmVhc29uLCBwZXJoYXBzIHlvdSBjb3VsZA0KPiBwb3N0IG1vcmUgYXR0
cmlidXRlcyBvZiB5b3VyIHNpdHVhdGlvbiwgc3VjaCBhcyB1c2VyIGFuZCBkYXRhIHVwZGF0ZSBh
bmQNCj4gYWRkaXRpb24gZnJlcXVlbmN5LCBxdWVyeSBhdHRyaWJ1dGVzIGFuZCBmcmVxdWVuY3ks
IGFuZCBzbyBvbi4NCj4NCj4gLS1NREMNCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2Ny
aWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBG
b3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBh
Y2hlLm9yZw0KPg0KPg0KPg0KPg0KPg0KPg0KPiAqKiogWENPTSBBRyBMZWdhbCBEaXNjbGFpbWVy
ICoqKg0KPg0KPiBEaWVzZSBFLU1haWwgZWluc2NobGllc3NsaWNoIGlocmVyIEFuaGFlbmdlIGlz
dCB2ZXJ0cmF1bGljaCB1bmQgaXN0DQphbGxlaW4NCj4gZvxyIGRlbiBHZWJyYXVjaCBkdXJjaCBk
ZW4gdm9yZ2VzZWhlbmVuIEVtcGZhZW5nZXIgYmVzdGltbXQuIERyaXR0ZW4gaXN0DQpkYXMNCj4g
TGVzZW4sIFZlcnRlaWxlbiBvZGVyIFdlaXRlcmxlaXRlbiBkaWVzZXIgRS1NYWlsIHVudGVyc2Fn
dC4gV2lyIGJpdHRlbiwNCmVpbmUNCj4gZmVobGdlbGVpdGV0ZSBFLU1haWwgdW52ZXJ6dWVnbGlj
aCB2b2xsc3RhZW5kaWcgenUgbG9lc2NoZW4gdW5kIHVucyBlaW5lDQo+IE5hY2hyaWNodCB6dWtv
bW1lbiB6dSBsYXNzZW4uDQo+DQo+IFRoaXMgZW1haWwgbWF5IGNvbnRhaW4gbWF0ZXJpYWwgdGhh
dCBpcyBjb25maWRlbnRpYWwgYW5kIGZvciB0aGUgc29sZSB1c2UNCj4gb2YgdGhlIGludGVuZGVk
IHJlY2lwaWVudC4gQW55IHJldmlldywgZGlzdHJpYnV0aW9uIGJ5IG90aGVycyBvcg0KZm9yd2Fy
ZGluZw0KPiB3aXRob3V0IGV4cHJlc3MgcGVybWlzc2lvbiBpcyBzdHJpY3RseSBwcm9oaWJpdGVk
LiBJZiB5b3UgYXJlIG5vdCB0aGUNCj4gaW50ZW5kZWQgcmVjaXBpZW50LCBwbGVhc2UgY29udGFj
dCB0aGUgc2VuZGVyIGFuZCBkZWxldGUgYWxsIGNvcGllcy4NCj4NCj4gSGF1cHRzaXR6OiBCYWhu
c3RyYXNzZSAzNywgRC00Nzg3NyBXaWxsaWNoLCBVU3QtSWROci46IERFIDgxMiA4ODUgNjY0DQo+
IEtvbW11bmlrYXRpb246IFRlbGVmb24gKzQ5IDIxNTQgOTIwOS03MCwgVGVsZWZheCArNDkgMjE1
NCA5MjA5LTkwMCwNCj4gd3d3Lnhjb20uZGUNCj4gSGFuZGVsc3JlZ2lzdGVyOiBBbXRzZ2VyaWNo
dCBLcmVmZWxkLCBIUkIgMTAzNDANCj4gVm9yc3RhbmQ6IE1hdHRoaWFzIEFsYnJlY2h0LCBSZW5h
dGUgQmVja2VyLUdyb3BlLCBNYXJjbyBNYXJ0eSwgRHIuIFJhaW5lcg0KPiBGdWNocw0KPiBWb3Jz
aXR6ZW5kZXIgZGVzIEF1ZnNpY2h0c3JhdGVzOiBTdGVwaGFuIFN0ZXVlcg0KPg0KPg0KDQoNCg0K
DQoNCioqKiBYQ09NIEFHIExlZ2FsIERpc2NsYWltZXIgKioqDQoNCkRpZXNlIEUtTWFpbCBlaW5z
Y2hsaWVzc2xpY2ggaWhyZXIgQW5oYWVuZ2UgaXN0IHZlcnRyYXVsaWNoIHVuZCBpc3QgYWxsZWlu
DQpm/HIgZGVuIEdlYnJhdWNoIGR1cmNoIGRlbiB2b3JnZXNlaGVuZW4gRW1wZmFlbmdlciBiZXN0
aW1tdC4gRHJpdHRlbiBpc3QNCmRhcyBMZXNlbiwgVmVydGVpbGVuIG9kZXIgV2VpdGVybGVpdGVu
IGRpZXNlciBFLU1haWwgdW50ZXJzYWd0LiBXaXIgYml0dGVuLA0KZWluZSBmZWhsZ2VsZWl0ZXRl
IEUtTWFpbCB1bnZlcnp1ZWdsaWNoIHZvbGxzdGFlbmRpZyB6dSBsb2VzY2hlbiB1bmQgdW5zDQpl
aW5lIE5hY2hyaWNodCB6dWtvbW1lbiB6dSBsYXNzZW4uDQoNClRoaXMgZW1haWwgbWF5IGNvbnRh
aW4gbWF0ZXJpYWwgdGhhdCBpcyBjb25maWRlbnRpYWwgYW5kIGZvciB0aGUgc29sZSB1c2UNCm9m
IHRoZSBpbnRlbmRlZCByZWNpcGllbnQuIEFueSByZXZpZXcsIGRpc3RyaWJ1dGlvbiBieSBvdGhl
cnMgb3IgZm9yd2FyZGluZw0Kd2l0aG91dCBleHByZXNzIHBlcm1pc3Npb24gaXMgc3RyaWN0bHkg
cHJvaGliaXRlZC4gSWYgeW91IGFyZSBub3QgdGhlDQppbnRlbmRlZCByZWNpcGllbnQsIHBsZWFz
ZSBjb250YWN0IHRoZSBzZW5kZXIgYW5kIGRlbGV0ZSBhbGwgY29waWVzLg0KDQpIYXVwdHNpdHo6
IEJhaG5zdHJhc3NlIDM3LCBELTQ3ODc3IFdpbGxpY2gsIFVTdC1JZE5yLjogREUgODEyIDg4NSA2
NjQNCktvbW11bmlrYXRpb246IFRlbGVmb24gKzQ5IDIxNTQgOTIwOS03MCwgVGVsZWZheCArNDkg
MjE1NCA5MjA5LTkwMCwNCnd3dy54Y29tLmRlDQpIYW5kZWxzcmVnaXN0ZXI6IEFtdHNnZXJpY2h0
IEtyZWZlbGQsIEhSQiAxMDM0MA0KVm9yc3RhbmQ6IE1hdHRoaWFzIEFsYnJlY2h0LCBSZW5hdGUg
QmVja2VyLUdyb3BlLCBNYXJjbyBNYXJ0eSwgRHIuIFJhaW5lcg0KRnVjaHMNClZvcnNpdHplbmRl
ciBkZXMgQXVmc2ljaHRzcmF0ZXM6IFN0ZXBoYW4gU3RldWVy

--1__=0FBBF821DFC40B868f9e8a93df938690918c0FBBF821DFC40B86
Content-type: text/html; charset=ISO-8859-15
Content-Disposition: inline
Content-transfer-encoding: base64

PGh0bWw+PGJvZHk+DQo8cD5Fcmljayw8YnI+DQp0aGFua3MgZm9yIHRoZSB0aXBzLiBJIGd1ZXNz
IEknbGwgaGF2ZSB0byBkdXN0IG9mZiBteSBjb3B5IG9mIExJQSBhbmQgZ2V0IGNyYWNraW5nLjxi
cj4NCjxicj4NCkJUVywgaW4gb3VyIHN5c3RlbSBhIHVzZXIgaXMganVzdCBhIGdyb3VwIHdpdGgg
YSBzaW5nbGUgZml4ZWQgbWVtYmVyIG9mIGl0c2VsZi48YnI+DQo8YnI+DQpDaWFvLDxicj4NCkpv
bmF0aGFuIE8nQ29ubm9yPGJyPg0KWENPTSBEdWJsaW48YnI+DQo8aW1nIHNyYz0iY2lkOjEwX189
MEZCQkY4MjFERkM0MEI4NjhmOWU4YTkzZGY5Mzg2OTBAeGNvbS5kZSIgd2lkdGg9IjE2IiBoZWln
aHQ9IjE2IiBhbHQ9IkluYWN0aXZlIGhpZGUgZGV0YWlscyBmb3IgJnF1b3Q7RXJpY2sgRXJpY2tz
b24mcXVvdDsgJmx0O2VyaWNrZXJpY2tzb25AZ21haWwuY29tJmd0OyI+JnF1b3Q7RXJpY2sgRXJp
Y2tzb24mcXVvdDsgJmx0O2VyaWNrZXJpY2tzb25AZ21haWwuY29tJmd0Ozxicj4NCjxicj4NCjxi
cj4NCg0KPHRhYmxlIHdpZHRoPSIxMDAlIiBib3JkZXI9IjAiIGNlbGxzcGFjaW5nPSIwIiBjZWxs
cGFkZGluZz0iMCI+DQo8dHIgdmFsaWduPSJ0b3AiPjx0ZCBzdHlsZT0iYmFja2dyb3VuZC1pbWFn
ZTp1cmwoY2lkOjIwX189MEZCQkY4MjFERkM0MEI4NjhmOWU4YTkzZGY5Mzg2OTBAeGNvbS5kZSk7
IGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7ICIgd2lkdGg9IjQwJSI+DQo8dWw+DQo8dWw+
DQo8dWw+DQo8dWw+PGI+PGZvbnQgc2l6ZT0iMiI+JnF1b3Q7RXJpY2sgRXJpY2tzb24mcXVvdDsg
Jmx0O2VyaWNrZXJpY2tzb25AZ21haWwuY29tJmd0OzwvZm9udD48L2I+PGZvbnQgc2l6ZT0iMiI+
IDwvZm9udD4NCjxwPjxmb250IHNpemU9IjIiPjAzLzA0LzIwMDcgMTY6NDQ8L2ZvbnQ+DQo8dGFi
bGUgYm9yZGVyPSIxIj4NCjx0ciB2YWxpZ249InRvcCI+PHRkIHdpZHRoPSIxNjgiIGJnY29sb3I9
IiNGRkZGRkYiPjxkaXYgYWxpZ249ImNlbnRlciI+PGZvbnQgc2l6ZT0iMiI+UGxlYXNlIHJlc3Bv
bmQgdG88YnI+DQpqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc8L2ZvbnQ+PC9kaXY+PC90ZD48
L3RyPg0KPC90YWJsZT4NCjwvdWw+DQo8L3VsPg0KPC91bD4NCjwvdWw+DQo8L3RkPjx0ZCB3aWR0
aD0iNjAlIj4NCjx0YWJsZSB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxsc3BhY2luZz0iMCIg
Y2VsbHBhZGRpbmc9IjAiPg0KPHRyIHZhbGlnbj0idG9wIj48dGQgd2lkdGg9IjElIiB2YWxpZ249
Im1pZGRsZSI+PGltZyBzcmM9ImNpZDozMF9fPTBGQkJGODIxREZDNDBCODY4ZjllOGE5M2RmOTM4
NjkwQHhjb20uZGUiIGJvcmRlcj0iMCIgaGVpZ2h0PSIxIiB3aWR0aD0iNTgiIGFsdD0iIj48YnI+
DQo8ZGl2IGFsaWduPSJyaWdodCI+PGZvbnQgc2l6ZT0iMiI+VG88L2ZvbnQ+PC9kaXY+PC90ZD48
dGQgd2lkdGg9IjEwMCUiPjxpbWcgc3JjPSJjaWQ6MzBfXz0wRkJCRjgyMURGQzQwQjg2OGY5ZThh
OTNkZjkzODY5MEB4Y29tLmRlIiBib3JkZXI9IjAiIGhlaWdodD0iMSIgd2lkdGg9IjEiIGFsdD0i
Ij48YnI+DQo8Zm9udCBzaXplPSIyIj5qYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc8L2ZvbnQ+
PC90ZD48L3RyPg0KDQo8dHIgdmFsaWduPSJ0b3AiPjx0ZCB3aWR0aD0iMSUiIHZhbGlnbj0ibWlk
ZGxlIj48aW1nIHNyYz0iY2lkOjMwX189MEZCQkY4MjFERkM0MEI4NjhmOWU4YTkzZGY5Mzg2OTBA
eGNvbS5kZSIgYm9yZGVyPSIwIiBoZWlnaHQ9IjEiIHdpZHRoPSI1OCIgYWx0PSIiPjxicj4NCjxk
aXYgYWxpZ249InJpZ2h0Ij48Zm9udCBzaXplPSIyIj5jYzwvZm9udD48L2Rpdj48L3RkPjx0ZCB3
aWR0aD0iMTAwJSI+PGltZyBzcmM9ImNpZDozMF9fPTBGQkJGODIxREZDNDBCODY4ZjllOGE5M2Rm
OTM4NjkwQHhjb20uZGUiIGJvcmRlcj0iMCIgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgYWx0PSIiPjxi
cj4NCjwvdGQ+PC90cj4NCg0KPHRyIHZhbGlnbj0idG9wIj48dGQgd2lkdGg9IjElIiB2YWxpZ249
Im1pZGRsZSI+PGltZyBzcmM9ImNpZDozMF9fPTBGQkJGODIxREZDNDBCODY4ZjllOGE5M2RmOTM4
NjkwQHhjb20uZGUiIGJvcmRlcj0iMCIgaGVpZ2h0PSIxIiB3aWR0aD0iNTgiIGFsdD0iIj48YnI+
DQo8ZGl2IGFsaWduPSJyaWdodCI+PGZvbnQgc2l6ZT0iMiI+U3ViamVjdDwvZm9udD48L2Rpdj48
L3RkPjx0ZCB3aWR0aD0iMTAwJSI+PGltZyBzcmM9ImNpZDozMF9fPTBGQkJGODIxREZDNDBCODY4
ZjllOGE5M2RmOTM4NjkwQHhjb20uZGUiIGJvcmRlcj0iMCIgaGVpZ2h0PSIxIiB3aWR0aD0iMSIg
YWx0PSIiPjxicj4NCjxmb250IHNpemU9IjIiPlJlOiBEZXNpZ24gUHJvYmxlbTogU2VhcmNoaW5n
IGxhcmdlIHNldCBvZiBwcm90ZWN0ZWQgZG9jdW1lbnRzPC9mb250PjwvdGQ+PC90cj4NCjwvdGFi
bGU+DQoNCjx0YWJsZSBib3JkZXI9IjAiIGNlbGxzcGFjaW5nPSIwIiBjZWxscGFkZGluZz0iMCI+
DQo8dHIgdmFsaWduPSJ0b3AiPjx0ZCB3aWR0aD0iNTgiPjxpbWcgc3JjPSJjaWQ6MzBfXz0wRkJC
RjgyMURGQzQwQjg2OGY5ZThhOTNkZjkzODY5MEB4Y29tLmRlIiBib3JkZXI9IjAiIGhlaWdodD0i
MSIgd2lkdGg9IjEiIGFsdD0iIj48L3RkPjx0ZCB3aWR0aD0iMzM2Ij48aW1nIHNyYz0iY2lkOjMw
X189MEZCQkY4MjFERkM0MEI4NjhmOWU4YTkzZGY5Mzg2OTBAeGNvbS5kZSIgYm9yZGVyPSIwIiBo
ZWlnaHQ9IjEiIHdpZHRoPSIxIiBhbHQ9IiI+PC90ZD48L3RyPg0KPC90YWJsZT4NCjwvdGQ+PC90
cj4NCjwvdGFibGU+DQo8YnI+DQo8dHQ+U3RvcmFnZSBpc24ndCB0b28gbXVjaCBvZiBhIHByb2Js
ZW0sIDEyLjUgTSBzaW5jZSBhIEx1Y2VuZSBGaWx0ZXIgaXMganVzdDxicj4NCmEgQml0U2V0LCBv
bmUgYml0IHBlciBkb2N1bWVudC4gKHBsdXMgc29tZSB0cml2aWFsIG92ZXJoZWFkKS48YnI+DQo8
YnI+DQpDb21wdXRhdGlvbmFsIGNvc3RzLi4uIG9ubHkgeW91IGtub3cuLi4uLjxicj4NCjxicj4N
CkJ1dCwgaXMgZXZlcnkgdXNlciBhbGxvd2VkIGluZGl2aWR1YWwgcGVybWlzc2lvbnMgb3IgYXJl
IHVzZXJzIHBhcnQgb2Y8YnI+DQpncm91cHMgdGhhdCBoYXZlIHBlcm1pc3Npb25zPyBGaWx0ZXJz
IGhhdmUgbG9naWNhbCBvcGVyYXRvcnMgKHdlbGwsPGJyPg0KYWN0dWFsbHkgaXQncyB0aGUgYml0
c2V0IHRoYXQgaGFzIG9wZXJhdG9ycyksIHNvIHlvdSBtYXkgYmUgYWJsZSB0bzxicj4NCnNhdmUg
YSBidW5jaCBvZiB0aW1lIGJ5IGNhbGN1bGF0aW5nIGdyb3VwIHBlcm1pc3Npb25zPGJyPg0KaW5z
dGVhZCBhbmQgdXNpbmcgdGhlIHJlbGV2YW50IEFORC9PUi9OT1Qgb3BlcmF0b3JzLiBBc3N1bWlu
Zzxicj4NCnlvdXIgcGVybWlzc2lvbnMgYXJlIGFkZGl0aXZlLCB0aGlzIGJlY29tZXMgc29tZXRo
aW5nIGxpa2UuLi48YnI+DQo8YnI+DQpDYWxjdWxhdGUgYSBmaWx0ZXIgZm9yIGVhY2ggZ3JvdXA8
YnI+DQpmb3IgZWFjaCB1c2VyPGJyPg0KICZuYnNwOyBmb3IgZWFjaCBncm91cCB0aGUgdXNlciBp
cyBpbiwgb3IgaW4gdGhlIHJlbGV2YW50IGdyb3VwIGZpbHRlcjxicj4NCiAmbmJzcDsgb3IgaW4g
dGhlIHVzZXJzIGluZGl2aWR1YWwgcGVybWlzc2lvbnM8YnI+DQogJm5ic3A7IHN0b3JlIHRoZSBm
aWx0ZXIgYXdheS48YnI+DQplbmRmb3I8YnI+DQo8YnI+DQpUaGVuIHNpbXBseSBhZGQgdGhlIHVz
ZXJzIGZpbHRlciB0byBhIEJvb2xlYW5RdWVyeSAoTVVTVCk8YnI+DQp0aGF0IHlvdSB1c2Ugd2hl
biB5b3Ugc2VhcmNoLjxicj4NCjxicj4NCkRvbid0IGtub3cgaWYgdGhpcyBoZWxwIG11Y2ggb3Ig
bm90LCBidXQgaXQncyBhbiBpZGVhICZsdDtHJmd0Oy48YnI+DQo8YnI+DQpCZXN0PGJyPg0KRXJp
Y2s8YnI+DQo8YnI+DQpPbiA0LzMvMDcsIEpvbmF0aGFuIE8nQ29ubm9yICZsdDtqb25hdGhhbi5v
Y29ubm9yQHhjb20uZGUmZ3Q7IHdyb3RlOjxicj4NCiZndDs8YnI+DQomZ3Q7IE1pY2hhZWwsPGJy
Pg0KJmd0OyBhcyB1c3VhbCBpdHMgbmV2ZXIgc28gZWFzeSEgU29tZSB1c2VycyBjYW4gc2VlIGFs
bW9zdCBhbGwgZG9jdW1lbnRzLCBhbmQ8YnI+DQomZ3Q7IHNvbWUgb3RoZXIgdXNlcnMgY2FuIHNl
ZSB2ZXJ5IGZldy48YnI+DQomZ3Q7PGJyPg0KJmd0OyBJIGRpZCBmaW5kIGFuIGludGVyZXN0aW5n
IGRvY3VtZW50IHRoYXQgZGVzY3JpYmVzIHRoZSBwcm9ibGVtIChidXQgb2ZmZXJzPGJyPg0KJmd0
OyBubyBzb2x1dGlvbnMgOi0oKSA8L3R0Pjx0dD48YSBocmVmPSJodHRwOi8vd3d3LmlkZWFlbmcu
Y29tL3B1Yi9lbnRzcmNoL3YzbjQvYXJ0aWNsZTAxLmh0bWwiPmh0dHA6Ly93d3cuaWRlYWVuZy5j
b20vcHViL2VudHNyY2gvdjNuNC9hcnRpY2xlMDEuaHRtbDwvYT48L3R0Pjx0dD4uPGJyPg0KJmd0
Ozxicj4NCiZndDsgVGhpcyBhcnRpY2xlIHRhbGtzIGFib3V0IGVhcmx5IGFuZCBsYXRlIGJpbmRp
bmcgb2Ygc2VjdXJpdHkgaW5mb3JtYXRpb24uPGJyPg0KJmd0OyBFYXJseSBiaW5kaW5nIGlzIGZh
c3RlciwgYnV0IGhhcmRlciB0byBpbXBsZW1lbnQuIEFuZCBvZiBjb3Vyc2UsIEk8YnI+DQomZ3Q7
IGltcGxlbWVudGVkIHRoZSBlYXNpZXIgb25lLjxicj4NCiZndDs8YnI+DQomZ3Q7IEknbSBnb2lu
ZyB0byBzZWUgd2hhdCB0aGUgY29tcHV0YXRpb25hbCBhbmQgc3RvcmFnZSBjb3N0IHdpbGwgYmUg
aWYgSTxicj4NCiZndDsgcHJlY2FsY3VsYXRlIHRoaXMgaW5mby48YnI+DQomZ3Q7IENpYW8sPGJy
Pg0KJmd0OyBKb25hdGhhbiBPJ0Nvbm5vcjxicj4NCiZndDsgWENPTSBEdWJsaW48YnI+DQomZ3Q7
IFtpbWFnZTogSW5hY3RpdmUgaGlkZSBkZXRhaWxzIGZvciAmcXVvdDtNaWNoYWVsIEQuIEN1cnRp
biZxdW90OyAmbHQ7bWlrZUBjdXJ0aW4uY29tJmd0O10mcXVvdDtNaWNoYWVsPGJyPg0KJmd0OyBE
LiBDdXJ0aW4mcXVvdDsgJmx0O21pa2VAY3VydGluLmNvbSZndDs8YnI+DQomZ3Q7PGJyPg0KJmd0
Ozxicj4NCiZndDs8YnI+DQomZ3Q7ICZuYnNwOyAmbmJzcDsgKiZxdW90O01pY2hhZWwgRC4gQ3Vy
dGluJnF1b3Q7ICZsdDttaWtlQGN1cnRpbi5jb20mZ3Q7Kjxicj4NCiZndDs8YnI+DQomZ3Q7ICZu
YnNwOyAmbmJzcDsgJm5ic3A7ICZuYnNwOyAmbmJzcDsgJm5ic3A7IDAzLzA0LzIwMDcgMTU6Mjgg
UGxlYXNlIHJlc3BvbmQgdG88YnI+DQomZ3Q7ICZuYnNwOyAmbmJzcDsgJm5ic3A7ICZuYnNwOyAm
bmJzcDsgJm5ic3A7IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZzxicj4NCiZndDs8YnI+DQom
Z3Q7PGJyPg0KJmd0OyBUbzxicj4NCiZndDs8YnI+DQomZ3Q7IGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZzxicj4NCiZndDsgY2M8YnI+DQomZ3Q7PGJyPg0KJmd0Ozxicj4NCiZndDsgU3ViamVj
dDxicj4NCiZndDs8YnI+DQomZ3Q7IFJlOiBEZXNpZ24gUHJvYmxlbTogU2VhcmNoaW5nIGxhcmdl
IHNldCBvZiBwcm90ZWN0ZWQgZG9jdW1lbnRzPGJyPg0KJmd0Ozxicj4NCiZndDsgSm9uYXRoYW4g
TydDb25ub3Igd3JvdGU6PGJyPg0KJmd0Ozxicj4NCiZndDsgJmd0OyBJIGhhdmUgYSBkYXRhYmFz
ZSBvZiBhIG1pbGxpb24gZG9jdW1lbnRzIGFuZCBhYm91dCAxMDAgdXNlcnMuIFRoZTxicj4NCiZn
dDsgZG9jdW1lbnRzPGJyPg0KJmd0OyAmZ3Q7IGNhbiBoYXZlIGFuIGFjY2VzcyBjb250cm9sIGxp
c3QsIGFuZCB0aGVyZSBpcyBhIGNvbXBsZXgsIHJlY3Vyc2l2ZTxicj4NCiZndDsgJmd0OyBhbGdv
cml0aG0gdG8gc2F5IGlmIGEgcGFydGljdWxhciB1c2VyIGNhbiBzZWUgYSBwYXJ0aWN1bGFyIGRv
Y3VtZW50Ljxicj4NCiZndDsgJmd0Ozxicj4NCiZndDsgJmd0OyBNeSBwcm9ibGVtIGlzIHRoYXQg
bXkgc2VhcmNoIGFsZ29yaXRobSBpcyB0byBmaXJzdCBkbyBhIHN0YW5kYXJkIGx1Y2VuZTxicj4N
CiZndDsgJmd0OyBzZWFyY2ggZm9yIG1hdGNoaW5nIGRvY3VtZW50cywgYW5kIHRoZW4gY2hlY2sg
c2VjdXJpdHkgb24gZWFjaCBvbmU8YnI+DQomZ3Q7IGZvdW5kLDxicj4NCiZndDsgJmd0OyBqdXN0
IHJldHVybmluZyB0aGUgYWxsb3dlZCBkb2N1bWVudHMuIEhvd2V2ZXIsIGlmIEkgZG8gdGhpcywg
YW5kIHRoZTxicj4NCiZndDsgbHVjZW5lPGJyPg0KJmd0OyAmZ3Q7IHJldHVybnMgMTAwMDAwIGRv
Y3MsIGJ1dCB0aGUgdXNlciBjYW4gb25seSBzZWUgMTAgb2YgdGhlc2UsIHRoZW48YnI+DQomZ3Q7
IG9idmlvdXNseTxicj4NCiZndDsgJmd0OyB0aGUgc2VhcmNoIGlzIGdvaW5nIHRvIHRha2UgYW4g
YXdmdWwgbG9uZyB0aW1lLjxicj4NCiZndDsgJmd0Ozxicj4NCiZndDsgJmd0OyBIYXMgYW55b25l
IGNvbWUgYWNyb3NzIHRoaXMgcHJvYmxlbSBiZWZvcmUsIGFuZCBpZiBzbyB3aGF0IGFwcHJvYWNo
IGRpZDxicj4NCiZndDsgeW91PGJyPg0KJmd0OyAmZ3Q7IHRha2U/IEkgZ3Vlc3MgSSBjb3VsZCBw
cmVjYWxjdWxhdGUgdGhlIHBlcm1pc3Npb25zIGZvciBldmVyeTxicj4NCiZndDsgdXNlci1kb2N1
bWVudDxicj4NCiZndDsgJmd0OyBwYWlyLCBidXQgdGhhdCdzIGFsb3Qgb2Ygc3RvcmFnZSwgYW5k
IGEgbG90IG9mIHByZWNhbGN1bGF0aW9uITxicj4NCiZndDs8YnI+DQomZ3Q7IE15IGtuZWUtamVy
ayByZWFjdGlvbiBpcyB0byBzdWdnZXN0IGEgc2ltcGxlciBkb2N1bWVudCBzZWN1cml0eSBtb2Rl
bCw8YnI+DQomZ3Q7IGJ1dCBJJ20gZ3Vlc3NpbmcgdGhhdCB0aGF0IG9wdGlvbiBpc24ndCBhdmFp
bGFibGUgdG8geW91Ljxicj4NCiZndDs8YnI+DQomZ3Q7IEluIHlvdXIgZXhhbXBsZSB0aGUgc2Vj
dXJpdHkgYXR0cmlidXRlcyBvZiBhIGRvY3VtZW50IGFyZSBmYXIgbW9yZTxicj4NCiZndDsgZGlz
Y3JpbWluYXRpbmcgdGhhbiB0aGUgcXVlcnkgdGVybXMuICZuYnNwO0lmIHRoYXQgcmVsYXRpb25z
aGlwIGlzIGluZGljYXRpdmU8YnI+DQomZ3Q7IG9mIG1vc3Qgb2YgeW91ciB1c2VycyBhbmQgbW9z
dCBvZiB0aGUgZG9jdW1lbnRzLCB0aGUgdXNlcnMgYW5kIGRvY3VtZW50czxicj4NCiZndDsgYXJl
bid0IHVwZGF0ZWQgbXVjaCwgYW5kIHlvdSBoYXZlIGEgbG90IG9mIHNlYXJjaGluZyB0byBkbyw8
YnI+DQomZ3Q7IHByZWNhbGN1bGF0aW9uIChyZXN1bHRzIGludG8gYW4gYWRkaXRpb25hbCBkb2N1
bWVudCBmaWVsZCkgc2VlbXMgdGhlIHdheTxicj4NCiZndDsgdG8gZ28uICZuYnNwO0l0IG1pZ2h0
IGV2ZW4gdHVybiBvdXQgdGhhdCwgaWYgeW91IHN0YXJ0IGZyb20gYSBwcmVzdW1wdGlvbiBvZjxi
cj4NCiZndDsgY2FsY3VsYXRpbmcgZXZlcnkgdXNlci0tZG9jdW1lbnQgc2VjdXJpdHkgYXR0cmli
dXRlLCB5b3UgY29tZSB1cCB3aXRoIGFuPGJyPg0KJmd0OyBhbGdvcml0aG0gdGhhdCBpcyBtdWNo
IG1vcmUgZWZmaWNpZW50IHRoYW4gYSBvbmUtb2ZmLDxicj4NCiZndDsgY2FuLXRoaXMtdXNlci1z
ZWUtdGhpcy1kb2N1bWVudCB0eXBlIG9mIGFsZ29yaXRobS48YnI+DQomZ3Q7PGJyPg0KJmd0OyBQ
cmVjYWxjdWxhdGlvbiBpc24ndCBuZWNlc3NhcmlseSBhIGJhZCB0aGluZy4gJm5ic3A7T2Z0ZW4s
IGl0J3MgcXVpdGU8YnI+DQomZ3Q7IGJlbmVmaWNpYWwgLS0gZm9yIGV4YW1wbGUsIHRoZSBpbmRl
eGluZyBwcm9jZXNzIGl0c2VsZiBpcyBhIHByZXR0eTxicj4NCiZndDsgc3Vic3RhbnRpYWwgcHJl
Y2FsY3VsYXRpb24gc3RlcCE8YnI+DQomZ3Q7PGJyPg0KJmd0OyBJZiB0aGlzIHNlZW1zIHVud2ll
bGR5IG9yIGltcHJhY3RpY2FsIGZvciBzb21lIHJlYXNvbiwgcGVyaGFwcyB5b3UgY291bGQ8YnI+
DQomZ3Q7IHBvc3QgbW9yZSBhdHRyaWJ1dGVzIG9mIHlvdXIgc2l0dWF0aW9uLCBzdWNoIGFzIHVz
ZXIgYW5kIGRhdGEgdXBkYXRlIGFuZDxicj4NCiZndDsgYWRkaXRpb24gZnJlcXVlbmN5LCBxdWVy
eSBhdHRyaWJ1dGVzIGFuZCBmcmVxdWVuY3ksIGFuZCBzbyBvbi48YnI+DQomZ3Q7PGJyPg0KJmd0
OyAtLU1EQzxicj4NCiZndDs8YnI+DQomZ3Q7IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTxicj4NCiZndDsgVG8gdW5z
dWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3Jn
PGJyPg0KJmd0OyBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZzxicj4NCiZndDs8YnI+DQomZ3Q7PGJyPg0KJmd0Ozxicj4NCiZn
dDs8YnI+DQomZ3Q7PGJyPg0KJmd0Ozxicj4NCiZndDsgKioqIFhDT00gQUcgTGVnYWwgRGlzY2xh
aW1lciAqKio8YnI+DQomZ3Q7PGJyPg0KJmd0OyBEaWVzZSBFLU1haWwgZWluc2NobGllc3NsaWNo
IGlocmVyIEFuaGFlbmdlIGlzdCB2ZXJ0cmF1bGljaCB1bmQgaXN0IGFsbGVpbjxicj4NCiZndDsg
ZvxyIGRlbiBHZWJyYXVjaCBkdXJjaCBkZW4gdm9yZ2VzZWhlbmVuIEVtcGZhZW5nZXIgYmVzdGlt
bXQuIERyaXR0ZW4gaXN0IGRhczxicj4NCiZndDsgTGVzZW4sIFZlcnRlaWxlbiBvZGVyIFdlaXRl
cmxlaXRlbiBkaWVzZXIgRS1NYWlsIHVudGVyc2FndC4gV2lyIGJpdHRlbiwgZWluZTxicj4NCiZn
dDsgZmVobGdlbGVpdGV0ZSBFLU1haWwgdW52ZXJ6dWVnbGljaCB2b2xsc3RhZW5kaWcgenUgbG9l
c2NoZW4gdW5kIHVucyBlaW5lPGJyPg0KJmd0OyBOYWNocmljaHQgenVrb21tZW4genUgbGFzc2Vu
Ljxicj4NCiZndDs8YnI+DQomZ3Q7IFRoaXMgZW1haWwgbWF5IGNvbnRhaW4gbWF0ZXJpYWwgdGhh
dCBpcyBjb25maWRlbnRpYWwgYW5kIGZvciB0aGUgc29sZSB1c2U8YnI+DQomZ3Q7IG9mIHRoZSBp
bnRlbmRlZCByZWNpcGllbnQuIEFueSByZXZpZXcsIGRpc3RyaWJ1dGlvbiBieSBvdGhlcnMgb3Ig
Zm9yd2FyZGluZzxicj4NCiZndDsgd2l0aG91dCBleHByZXNzIHBlcm1pc3Npb24gaXMgc3RyaWN0
bHkgcHJvaGliaXRlZC4gSWYgeW91IGFyZSBub3QgdGhlPGJyPg0KJmd0OyBpbnRlbmRlZCByZWNp
cGllbnQsIHBsZWFzZSBjb250YWN0IHRoZSBzZW5kZXIgYW5kIGRlbGV0ZSBhbGwgY29waWVzLjxi
cj4NCiZndDs8YnI+DQomZ3Q7IEhhdXB0c2l0ejogQmFobnN0cmFzc2UgMzcsIEQtNDc4NzcgV2ls
bGljaCwgVVN0LUlkTnIuOiBERSA4MTIgODg1IDY2NDxicj4NCiZndDsgS29tbXVuaWthdGlvbjog
VGVsZWZvbiArNDkgMjE1NCA5MjA5LTcwLCBUZWxlZmF4ICs0OSAyMTU0IDkyMDktOTAwLDxicj4N
CiZndDsgd3d3Lnhjb20uZGU8YnI+DQomZ3Q7IEhhbmRlbHNyZWdpc3RlcjogQW10c2dlcmljaHQg
S3JlZmVsZCwgSFJCIDEwMzQwPGJyPg0KJmd0OyBWb3JzdGFuZDogTWF0dGhpYXMgQWxicmVjaHQs
IFJlbmF0ZSBCZWNrZXItR3JvcGUsIE1hcmNvIE1hcnR5LCBEci4gUmFpbmVyPGJyPg0KJmd0OyBG
dWNoczxicj4NCiZndDsgVm9yc2l0emVuZGVyIGRlcyBBdWZzaWNodHNyYXRlczogU3RlcGhhbiBT
dGV1ZXI8YnI+DQomZ3Q7PGJyPg0KJmd0Ozxicj4NCjwvdHQ+PGJyPg0KPGJyPg0KPGJyPg0KPGJy
Pg0KPGJyPg0KKioqIFhDT00gQUcgTGVnYWwgRGlzY2xhaW1lciAqKio8YnI+DQo8YnI+DQpEaWVz
ZSBFLU1haWwgZWluc2NobGllc3NsaWNoIGlocmVyIEFuaGFlbmdlIGlzdCB2ZXJ0cmF1bGljaCB1
bmQgaXN0IGFsbGVpbiBm/HIgZGVuIEdlYnJhdWNoIGR1cmNoIGRlbiB2b3JnZXNlaGVuZW4gRW1w
ZmFlbmdlciBiZXN0aW1tdC4gRHJpdHRlbiBpc3QgZGFzIExlc2VuLCBWZXJ0ZWlsZW4gb2RlciBX
ZWl0ZXJsZWl0ZW4gZGllc2VyIEUtTWFpbCB1bnRlcnNhZ3QuIFdpciBiaXR0ZW4sIGVpbmUgZmVo
bGdlbGVpdGV0ZSBFLU1haWwgdW52ZXJ6dWVnbGljaCB2b2xsc3RhZW5kaWcgenUgbG9lc2NoZW4g
dW5kIHVucyBlaW5lIE5hY2hyaWNodCB6dWtvbW1lbiB6dSBsYXNzZW4uPGJyPg0KPGJyPg0KVGhp
cyBlbWFpbCBtYXkgY29udGFpbiBtYXRlcmlhbCB0aGF0IGlzIGNvbmZpZGVudGlhbCBhbmQgZm9y
IHRoZSBzb2xlIHVzZSBvZiB0aGUgaW50ZW5kZWQgcmVjaXBpZW50LiBBbnkgcmV2aWV3LCBkaXN0
cmlidXRpb24gYnkgb3RoZXJzIG9yIGZvcndhcmRpbmcgd2l0aG91dCBleHByZXNzIHBlcm1pc3Np
b24gaXMgc3RyaWN0bHkgcHJvaGliaXRlZC4gSWYgeW91IGFyZSBub3QgdGhlIGludGVuZGVkIHJl
Y2lwaWVudCwgcGxlYXNlIGNvbnRhY3QgdGhlIHNlbmRlciBhbmQgZGVsZXRlIGFsbCBjb3BpZXMu
PGJyPg0KPGJyPg0KSGF1cHRzaXR6OiBCYWhuc3RyYXNzZSAzNywgRC00Nzg3NyBXaWxsaWNoLCBV
U3QtSWROci46IERFIDgxMiA4ODUgNjY0PGJyPg0KS29tbXVuaWthdGlvbjogVGVsZWZvbiArNDkg
MjE1NCA5MjA5LTcwLCBUZWxlZmF4ICs0OSAyMTU0IDkyMDktOTAwLCB3d3cueGNvbS5kZTxicj4N
CkhhbmRlbHNyZWdpc3RlcjogQW10c2dlcmljaHQgS3JlZmVsZCwgSFJCIDEwMzQwPGJyPg0KVm9y
c3RhbmQ6IE1hdHRoaWFzIEFsYnJlY2h0LCBSZW5hdGUgQmVja2VyLUdyb3BlLCBNYXJjbyBNYXJ0
eSwgRHIuIFJhaW5lciBGdWNoczxicj4NClZvcnNpdHplbmRlciBkZXMgQXVmc2ljaHRzcmF0ZXM6
IFN0ZXBoYW4gU3RldWVyPGJyPg0KPC9ib2R5PjwvaHRtbD4=


--1__=0FBBF821DFC40B868f9e8a93df938690918c0FBBF821DFC40B86--


--0__=0FBBF821DFC40B868f9e8a93df938690918c0FBBF821DFC40B86--

From java-user-return-27348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 16:35:59 2007
Return-Path: <java-user-return-27348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65999 invoked from network); 3 Apr 2007 16:35:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 16:35:59 -0000
Received: (qmail 57622 invoked by uid 500); 3 Apr 2007 16:35:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57598 invoked by uid 500); 3 Apr 2007 16:35:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57586 invoked by uid 99); 3 Apr 2007 16:35:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 09:35:59 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 09:35:48 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HYlyh-0005bO-RT
	for java-user@lucene.apache.org; Tue, 03 Apr 2007 09:35:27 -0700
Message-ID: <9818026.post@talk.nabble.com>
Date: Tue, 3 Apr 2007 09:35:27 -0700 (PDT)
From: Kvailis <warthog982@yahoo.com>
To: java-user@lucene.apache.org
Subject: IndexWriter Quandry
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: warthog982@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey, all -
I'm pretty new to Lucene (2.0.0) and and having an issue with the
IndexWriter: if I set the boolean argument to 'true' it goes ahead and
writes indexes that turn out to be perfectly usable; taking the same exact
code and swithing the boolean to 'false' immediately throws a
FileNotFoundException for '.../segments', saying there's no such file or
directory.  I know it's there after the first run because I can see it on
the file system and search it.  Indexing with 'true' and then immediately
with 'false' produces the same result, so I don't think there's any
corruption coming from any searches.  It's not a big deal now, because the
size of the data itself is pretty small and doesn't get updated all that
frequently; that's going to change radically in the near future, so creating
new indexes every time someting changes will undoubtedly be a huuge pain in
the @$$ for the users.  Any clues will be a help and appreciated
accordingly...
-- 
View this message in context: http://www.nabble.com/IndexWriter-Quandry-tf3517598.html#a9818026
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 16:38:57 2007
Return-Path: <java-user-return-27349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66470 invoked from network); 3 Apr 2007 16:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 16:38:57 -0000
Received: (qmail 65183 invoked by uid 500); 3 Apr 2007 16:38:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65151 invoked by uid 500); 3 Apr 2007 16:38:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65140 invoked by uid 99); 3 Apr 2007 16:38:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 09:38:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 09:38:46 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1616C8A3@mailer.syr.edu>; Tue, 3 Apr 2007 12:38:25 -0400
Message-ID: <46128326.1090309@syr.edu>
Date: Tue, 03 Apr 2007 12:39:02 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Extracting a subset of an index
References: <bddd3c950704030755i1cae78fag57a56447b990d614@mail.gmail.com> <359a92830704030824nef000d9tc5dfab2917fd9d9f@mail.gmail.com>
In-Reply-To: <359a92830704030824nef000d9tc5dfab2917fd9d9f@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Karl Wettin's code to facilitate index copying may be useful (the below
link is to a post of Karl's to the java-dev mailing list):

<http://www.nabble.com/Resolving-term-vector-even-when-not-stored--t3412160.html>

Steve

Erick Erickson wrote:
> In the immortal words of Erik H.  ...it depends...
> 
> The big issue is whether you have fields in your index that are NOT
> stored (i.e. Field.Store.NO). If this is the case, your documents
> will not be complete, and adding it to the fresh index will not
> include the un-stored data.
> 
> It's actually pretty common to store a field as
> ...Field.Store.NO, Field.Index.(UN_)TOKENIZED
> 
> Field.Store.COMPRESSED should be OK.
> 
> From the Document API doc
> 
> "note that fields which are *not*
> stored<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/document/Fieldable.html#isStored%28%29>are
> 
> *not* available in
> documents retrieved from the index, e.g. with
> Hits.doc(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Hits.html#doc%28int%29>,
> 
> Searcher.doc(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Searcher.html#doc%28int%29>or
> 
> IndexReader.document(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/index/IndexReader.html#document%28int%29>
> 
> ."
> 
> Otherwise, it would *probably* work, but I haven't tried it. At worst,
> you could create a new document and add the fields from the old
> document to it......
> 
> Best
> Erick
> 
> On 4/3/07, jafarim <jafarim@gmail.com> wrote:
>>
>> Hi folks,
>> I need to extract a subset of an index so that I can move some documents
>> to
>> another isolated machine to be searched locally. I'm not sure whether the
>> following scenario is correct:
>> - extracting the documents from the index by using one of the doc(i)
>> methods
>> - adding the same Document objects to a fresh index.
>>
>> Am I right?
>>
>> --Jaf
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 17:17:14 2007
Return-Path: <java-user-return-27350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86997 invoked from network); 3 Apr 2007 17:17:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 17:17:11 -0000
Received: (qmail 53428 invoked by uid 500); 3 Apr 2007 17:17:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53398 invoked by uid 500); 3 Apr 2007 17:17:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53387 invoked by uid 99); 3 Apr 2007 17:17:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 10:17:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 10:17:03 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 0646D131A20
	for <java-user@lucene.apache.org>; Tue,  3 Apr 2007 10:16:41 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <2b817f360704030855n7e712569mb834969030ae184f@mail.gmail.com>
References: <2b817f360704030855n7e712569mb834969030ae184f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A5C2C51C-618F-4F57-A2FF-5C0F6539F21E@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Limitations of lucene
Date: Tue, 3 Apr 2007 13:16:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Is there some area in particular you are interested in?  Speed, size,  
document length, other?

On Apr 3, 2007, at 11:55 AM, ashwin kumar wrote:

> hi all i would like to know the limitation of lucene index.if  
> anybody have
> any links or ebooks  please forward..
>
> thanks
> regards
> ashwin

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 17:18:51 2007
Return-Path: <java-user-return-27351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87352 invoked from network); 3 Apr 2007 17:18:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 17:18:51 -0000
Received: (qmail 56051 invoked by uid 500); 3 Apr 2007 17:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56023 invoked by uid 500); 3 Apr 2007 17:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56010 invoked by uid 99); 3 Apr 2007 17:18:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 10:18:50 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=HTML_MESSAGE,HTML_TAG_EXIST_TBODY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 10:18:42 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1555588wxd
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 10:18:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:from:subject:date:to:x-mailer;
        b=Cxbvf4eX4BYLNbzD3ZyrtLfwEFVAo+7pqkOTbh8T2/p32OSwuxFT8AXeg9aLFsYx1yPwcHByEYIvB0adXT+tKB/DK2E5+WEwJ411NKfPlyAGEm9pW86X9j9ppzq9GwKDiR6ga2ysLxnvPLD9eZmW16Hss0ghmbDpAnJeMuh2SrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:from:subject:date:to:x-mailer;
        b=STgCVkz5LuvOwQenwc+HD7dRDPeY1ZMD5K3kLwOTSAstdvhSWTUlM7Zf6qXn8LLUNCNEZftC18ADihr+RslnRhyKRZSJ0aJmggWdCIiZHwVQBdEZAW8rEJh7ZuBRkiKBaYzft7yuwgDiX3D+5jTXr73TIDbL4KMzj6BqubB+p/o=
Received: by 10.90.100.2 with SMTP id x2mr4851413agb.1175620700360;
        Tue, 03 Apr 2007 10:18:20 -0700 (PDT)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 71sm6621620wry.2007.04.03.10.18.16;
        Tue, 03 Apr 2007 10:18:17 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <OF1703AA4F.ECBDD4A4-ON802572B2.00578D16-802572B2.0057ECC4@xcom.de>
References: <OF1703AA4F.ECBDD4A4-ON802572B2.00578D16-802572B2.0057ECC4@xcom.de>
Content-Type: multipart/alternative; boundary=Apple-Mail-36--255001675
Message-Id: <89BF4EFE-E136-4D8A-8477-03A6E2696A73@gmail.com>
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Design Problem: Searching large set of protected documents
Date: Tue, 3 Apr 2007 13:18:13 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-36--255001675
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

I seem to recall this type of question coming up from time to time =20
over the years, but don't have any specific pointers, so you may find =20=

it useful to dig into the archives.

-Grant

On Apr 3, 2007, at 12:00 PM, Jonathan O'Connor wrote:

> Erick,
> thanks for the tips. I guess I'll have to dust off my copy of LIA =20
> and get cracking.
>
> BTW, in our system a user is just a group with a single fixed =20
> member of itself.
>
> Ciao,
> Jonathan O'Connor
> XCOM Dublin
> "Erick Erickson" <erickerickson@gmail.com>
>
>
> "Erick Erickson" <erickerickson@gmail.com>
> 03/04/2007 16:44
> Please respond to
> java-user@lucene.apache.org
>
>
> To
>
> java-user@lucene.apache.org
>
> cc
>
>
> Subject
>
> Re: Design Problem: Searching large set of protected documents
> =09
>
> Storage isn't too much of a problem, 12.5 M since a Lucene Filter =20
> is just
> a BitSet, one bit per document. (plus some trivial overhead).
>
> Computational costs... only you know.....
>
> But, is every user allowed individual permissions or are users part of
> groups that have permissions? Filters have logical operators (well,
> actually it's the bitset that has operators), so you may be able to
> save a bunch of time by calculating group permissions
> instead and using the relevant AND/OR/NOT operators. Assuming
> your permissions are additive, this becomes something like...
>
> Calculate a filter for each group
> for each user
>   for each group the user is in, or in the relevant group filter
>   or in the users individual permissions
>   store the filter away.
> endfor
>
> Then simply add the users filter to a BooleanQuery (MUST)
> that you use when you search.
>
> Don't know if this help much or not, but it's an idea <G>.
>
> Best
> Erick
>
> On 4/3/07, Jonathan O'Connor <jonathan.oconnor@xcom.de> wrote:
> >
> > Michael,
> > as usual its never so easy! Some users can see almost all =20
> documents, and
> > some other users can see very few.
> >
> > I did find an interesting document that describes the problem =20
> (but offers
> > no solutions :-() http://www.ideaeng.com/pub/entsrch/v3n4/=20
> article01.html.
> >
> > This article talks about early and late binding of security =20
> information.
> > Early binding is faster, but harder to implement. And of course, I
> > implemented the easier one.
> >
> > I'm going to see what the computational and storage cost will be =20
> if I
> > precalculate this info.
> > Ciao,
> > Jonathan O'Connor
> > XCOM Dublin
> > [image: Inactive hide details for "Michael D. Curtin" =20
> <mike@curtin.com>]"Michael
> > D. Curtin" <mike@curtin.com>
> >
> >
> >
> >     *"Michael D. Curtin" <mike@curtin.com>*
> >
> >             03/04/2007 15:28 Please respond to
> >             java-user@lucene.apache.org
> >
> >
> > To
> >
> > java-user@lucene.apache.org
> > cc
> >
> >
> > Subject
> >
> > Re: Design Problem: Searching large set of protected documents
> >
> > Jonathan O'Connor wrote:
> >
> > > I have a database of a million documents and about 100 users. The
> > documents
> > > can have an access control list, and there is a complex, recursive
> > > algorithm to say if a particular user can see a particular =20
> document.
> > >
> > > My problem is that my search algorithm is to first do a =20
> standard lucene
> > > search for matching documents, and then check security on each one
> > found,
> > > just returning the allowed documents. However, if I do this, =20
> and the
> > lucene
> > > returns 100000 docs, but the user can only see 10 of these, then
> > obviously
> > > the search is going to take an awful long time.
> > >
> > > Has anyone come across this problem before, and if so what =20
> approach did
> > you
> > > take? I guess I could precalculate the permissions for every
> > user-document
> > > pair, but that's alot of storage, and a lot of precalculation!
> >
> > My knee-jerk reaction is to suggest a simpler document security =20
> model,
> > but I'm guessing that that option isn't available to you.
> >
> > In your example the security attributes of a document are far more
> > discriminating than the query terms.  If that relationship is =20
> indicative
> > of most of your users and most of the documents, the users and =20
> documents
> > aren't updated much, and you have a lot of searching to do,
> > precalculation (results into an additional document field) seems =20
> the way
> > to go.  It might even turn out that, if you start from a =20
> presumption of
> > calculating every user--document security attribute, you come up =20
> with an
> > algorithm that is much more efficient than a one-off,
> > can-this-user-see-this-document type of algorithm.
> >
> > Precalculation isn't necessarily a bad thing.  Often, it's quite
> > beneficial -- for example, the indexing process itself is a pretty
> > substantial precalculation step!
> >
> > If this seems unwieldy or impractical for some reason, perhaps =20
> you could
> > post more attributes of your situation, such as user and data =20
> update and
> > addition frequency, query attributes and frequency, and so on.
> >
> > --MDC
> >
> > =20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> > *** XCOM AG Legal Disclaimer ***
> >
> > Diese E-Mail einschliesslich ihrer Anhaenge ist vertraulich und =20
> ist allein
> > f=FCr den Gebrauch durch den vorgesehenen Empfaenger bestimmt. =20
> Dritten ist das
> > Lesen, Verteilen oder Weiterleiten dieser E-Mail untersagt. Wir =20
> bitten, eine
> > fehlgeleitete E-Mail unverzueglich vollstaendig zu loeschen und =20
> uns eine
> > Nachricht zukommen zu lassen.
> >
> > This email may contain material that is confidential and for the =20
> sole use
> > of the intended recipient. Any review, distribution by others or =20
> forwarding
> > without express permission is strictly prohibited. If you are not =20=

> the
> > intended recipient, please contact the sender and delete all copies.
> >
> > Hauptsitz: Bahnstrasse 37, D-47877 Willich, USt-IdNr.: DE 812 885 =20=

> 664
> > Kommunikation: Telefon +49 2154 9209-70, Telefax +49 2154 9209-900,
> > www.xcom.de
> > Handelsregister: Amtsgericht Krefeld, HRB 10340
> > Vorstand: Matthias Albrecht, Renate Becker-Grope, Marco Marty, =20
> Dr. Rainer
> > Fuchs
> > Vorsitzender des Aufsichtsrates: Stephan Steuer
> >
> >
>
>
>
>
>
> *** XCOM AG Legal Disclaimer ***
>
> Diese E-Mail einschliesslich ihrer Anhaenge ist vertraulich und ist =20=

> allein f=FCr den Gebrauch durch den vorgesehenen Empfaenger bestimmt. =20=

> Dritten ist das Lesen, Verteilen oder Weiterleiten dieser E-Mail =20
> untersagt. Wir bitten, eine fehlgeleitete E-Mail unverzueglich =20
> vollstaendig zu loeschen und uns eine Nachricht zukommen zu lassen.
>
> This email may contain material that is confidential and for the =20
> sole use of the intended recipient. Any review, distribution by =20
> others or forwarding without express permission is strictly =20
> prohibited. If you are not the intended recipient, please contact =20
> the sender and delete all copies.
>
> Hauptsitz: Bahnstrasse 37, D-47877 Willich, USt-IdNr.: DE 812 885 664
> Kommunikation: Telefon +49 2154 9209-70, Telefax +49 2154 9209-900, =20=

> www.xcom.de
> Handelsregister: Amtsgericht Krefeld, HRB 10340
> Vorstand: Matthias Albrecht, Renate Becker-Grope, Marco Marty, Dr. =20
> Rainer Fuchs
> Vorsitzender des Aufsichtsrates: Stephan Steuer

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



--Apple-Mail-36--255001675--

From java-user-return-27352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 17:44:54 2007
Return-Path: <java-user-return-27352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93710 invoked from network); 3 Apr 2007 17:44:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 17:44:53 -0000
Received: (qmail 96033 invoked by uid 500); 3 Apr 2007 17:44:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96001 invoked by uid 500); 3 Apr 2007 17:44:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95990 invoked by uid 99); 3 Apr 2007 17:44:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 10:44:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 10:44:44 -0700
Received: from [192.168.128.140] ([192.168.128.140])
	(authenticated bits=0)
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id l33HiIVi013022
	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 20:44:21 +0300
Message-ID: <46129271.4060205@sirma.bg>
Date: Tue, 03 Apr 2007 20:44:17 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Range search in numeric fields
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,
I have the following problem:
I have to implement range search for fields that contain numbers. For 
example the field size that contains file size. The problem is that the 
numbers are not kept in strings with strikt length. There are field 
values like this: "32", "421", "1201". So when makeing search like this: 
+size:[10 TO 50], as the order for string is lexicorafical the result 
contains the documents with size 32 and 1201. I can see the following 
possible aproaches:
1. Changing indexing process so that all data entered in those fields is 
with fixed length. Example 0000032, 0000421, 0001201.
Disadvantages here are:
    - Have to be reindexed all existng indexes;
    - The index will grow a bit.

2. Generating query without ranges but including all numbers between the 
bounds - +size=10 +size=11 +size=12........ +size=49 + size=50. For 
narrow ranges it makes sense but for large ones... :)

3. Generating query with intervals (inclusive and exclusive) but the 
number of this intervals will be the same (or one more) than the 
conditions in point 2. +size:[10 TO 50] -size:[10 TO 11999999999] - 
size:[11 TO 129999999999] ... etc.

So if someone can help with some new oportunity please mail.

Thanks in advance.
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 18:00:21 2007
Return-Path: <java-user-return-27353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98339 invoked from network); 3 Apr 2007 18:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 18:00:19 -0000
Received: (qmail 31901 invoked by uid 500); 3 Apr 2007 18:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31864 invoked by uid 500); 3 Apr 2007 18:00:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31853 invoked by uid 99); 3 Apr 2007 18:00:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 11:00:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andyliu1227@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 11:00:11 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1088474nzh
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 10:59:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pXuu8UnsvXTuRg6kekpPu6wNDT4FgaD7NbMocFz4gd8Fw/7SkrBMR0XRRz+158nrZHnv4jkr6mUWyhUtMzBh92jqMy3Ps/o59bMb3SyatSF4rbZhSWnhvtUUzN10daojk+TV97b8P3+D0SdjxpeVNOc67TQJniEt1d4vcbNzRWs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mupf5cgqOopY9NrhVypKfSei5O9IqvC9HFNV7JOpKrcaMscaaHICZOZkzREUacAvhnAPqpaPtPwhQOLv407piS1l8CSvV7CaRpLN12DKNF+3M/zsrr2ubUeMsu1fEeZhqo6nIAtiDJ748jGtaszRNBlG0JQPjCP0mpA6+F4DQYM=
Received: by 10.114.52.1 with SMTP id z1mr2332810waz.1175623190544;
        Tue, 03 Apr 2007 10:59:50 -0700 (PDT)
Received: by 10.114.149.11 with HTTP; Tue, 3 Apr 2007 10:59:50 -0700 (PDT)
Message-ID: <32dca9ed0704031059p520ff3f3le360b73f493ca4f9@mail.gmail.com>
Date: Tue, 3 Apr 2007 13:59:50 -0400
From: "Andy Liu" <andyliu1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Range search in numeric fields
In-Reply-To: <46129271.4060205@sirma.bg>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14591_23666712.1175623190268"
References: <46129271.4060205@sirma.bg>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14591_23666712.1175623190268
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can try using MemoryCachedRangeFilter.

https://issues.apache.org/jira/browse/LUCENE-855

It stores field values in memory as longs so your values don't have to be
lexigraphically comparable.  Also, MemoryCachedRangeFilter can be orders of
magnitude faster than standard RangeFilter, depending on your data.

Andy

On 4/3/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>
> Hi All,
> I have the following problem:
> I have to implement range search for fields that contain numbers. For
> example the field size that contains file size. The problem is that the
> numbers are not kept in strings with strikt length. There are field
> values like this: "32", "421", "1201". So when makeing search like this:
> +size:[10 TO 50], as the order for string is lexicorafical the result
> contains the documents with size 32 and 1201. I can see the following
> possible aproaches:
> 1. Changing indexing process so that all data entered in those fields is
> with fixed length. Example 0000032, 0000421, 0001201.
> Disadvantages here are:
>     - Have to be reindexed all existng indexes;
>     - The index will grow a bit.
>
> 2. Generating query without ranges but including all numbers between the
> bounds - +size=10 +size=11 +size=12........ +size=49 + size=50. For
> narrow ranges it makes sense but for large ones... :)
>
> 3. Generating query with intervals (inclusive and exclusive) but the
> number of this intervals will be the same (or one more) than the
> conditions in point 2. +size:[10 TO 50] -size:[10 TO 11999999999] -
> size:[11 TO 129999999999] ... etc.
>
> So if someone can help with some new oportunity please mail.
>
> Thanks in advance.
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14591_23666712.1175623190268--

From java-user-return-27354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 18:55:36 2007
Return-Path: <java-user-return-27354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16785 invoked from network); 3 Apr 2007 18:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 18:55:35 -0000
Received: (qmail 56816 invoked by uid 500); 3 Apr 2007 18:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56783 invoked by uid 500); 3 Apr 2007 18:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56772 invoked by uid 99); 3 Apr 2007 18:55:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 11:55:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 11:55:28 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HYo9r-0006To-SU
	for java-user@lucene.apache.org; Tue, 03 Apr 2007 11:55:07 -0700
Message-ID: <9823734.post@talk.nabble.com>
Date: Tue, 3 Apr 2007 11:55:07 -0700 (PDT)
From: davep626 <n@alishabeth.com>
To: java-user@lucene.apache.org
Subject: TestSpellCheck not working
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: n@alishabeth.com
X-Virus-Checked: Checked by ClamAV on apache.org


I can't get TestSpellCheck to work.  Documents appear to be added but all
queries return zero hits.  Is this TestCase working for anyone?
-- 
View this message in context: http://www.nabble.com/TestSpellCheck-not-working-tf3521578.html#a9823734
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 19:24:44 2007
Return-Path: <java-user-return-27355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30050 invoked from network); 3 Apr 2007 19:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 19:24:44 -0000
Received: (qmail 9690 invoked by uid 500); 3 Apr 2007 19:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9651 invoked by uid 500); 3 Apr 2007 19:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9640 invoked by uid 99); 3 Apr 2007 19:24:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 12:24:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 12:24:36 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HYoc4-0000Dw-2r
	for java-user@lucene.apache.org; Tue, 03 Apr 2007 12:24:16 -0700
Message-ID: <9824450.post@talk.nabble.com>
Date: Tue, 3 Apr 2007 12:24:15 -0700 (PDT)
From: davep626 <n@alishabeth.com>
To: java-user@lucene.apache.org
Subject: Re: TestSpellCheck not working
In-Reply-To: <9823734.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: n@alishabeth.com
References: <9823734.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry for the lack of detail, first error is:

junit.framework.AssertionFailedError: expected:<56> but was:<29>
	at junit.framework.Assert.fail(Assert.java:47)
	at junit.framework.Assert.failNotEquals(Assert.java:282)
	at junit.framework.Assert.assertEquals(Assert.java:64)
	at junit.framework.Assert.assertEquals(Assert.java:201)
	at junit.framework.Assert.assertEquals(Assert.java:207)
	at
org.apache.lucene.search.spell.TestSpellChecker.testBuild(TestSpellChecker.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at junit.framework.TestCase.runTest(TestCase.java:154)
	at junit.framework.TestCase.runBare(TestCase.java:127)
	at junit.framework.TestResult$1.protect(TestResult.java:106)
	at junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:118)
	at junit.framework.TestSuite.runTest(TestSuite.java:208)
	at junit.framework.TestSuite.run(TestSuite.java:203)
	at
org.junit.internal.runners.OldTestClassRunner.run(OldTestClassRunner.java:35)
	at
org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
	at
org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)

Following that if I comment out line 60 I get:

junit.framework.AssertionFailedError: expected:<1> but was:<0>
	at junit.framework.Assert.fail(Assert.java:47)
	at junit.framework.Assert.failNotEquals(Assert.java:282)
	at junit.framework.Assert.assertEquals(Assert.java:64)
	at junit.framework.Assert.assertEquals(Assert.java:201)
	at junit.framework.Assert.assertEquals(Assert.java:207)
	at
org.apache.lucene.search.spell.TestSpellChecker.testBuild(TestSpellChecker.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at junit.framework.TestCase.runTest(TestCase.java:154)
	at junit.framework.TestCase.runBare(TestCase.java:127)
	at junit.framework.TestResult$1.protect(TestResult.java:106)
	at junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:118)
	at junit.framework.TestSuite.runTest(TestSuite.java:208)
	at junit.framework.TestSuite.run(TestSuite.java:203)
	at
org.junit.internal.runners.OldTestClassRunner.run(OldTestClassRunner.java:35)
	at
org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
	at
org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)

Any help would be appreciated.


davep626 wrote:
> 
> I can't get TestSpellCheck to work.  Documents appear to be added but all
> queries return zero hits.  Is this TestCase working for anyone?
> 

-- 
View this message in context: http://www.nabble.com/TestSpellCheck-not-working-tf3521578.html#a9824450
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 19:42:14 2007
Return-Path: <java-user-return-27356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37117 invoked from network); 3 Apr 2007 19:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 19:42:13 -0000
Received: (qmail 46721 invoked by uid 500); 3 Apr 2007 19:42:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46696 invoked by uid 500); 3 Apr 2007 19:42:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46685 invoked by uid 99); 3 Apr 2007 19:42:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 12:42:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Apr 2007 12:42:04 -0700
Received: (qmail 95898 invoked by uid 60001); 3 Apr 2007 19:41:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=08ALzdeKydR8sRbQOGH6zTjROUGNJxQ5XMs7fHDsm5Ozb7SPCu+Hk1oIB5YxEDp1+3X4Q91TSpJGFxNA0lVJ+yH4di9o1yqgb/08slTKrf1eZIK2Olsr7B33Fuh1seRSrVZzWjIAe4SZAAuBaBaPty19cUHvxDzXH/AIj+DrJ3Q=;
X-YMail-OSG: 8A87cTEVM1kGFZ15sSnw5b_N4VqjPnEE2h7ovJxYGj2VuL1DEVoepTKJUDVTWWKwA7t2C4SyxRIQnMwIPoYwzDH9Pw--
Received: from [66.92.187.33] by web50302.mail.re2.yahoo.com via HTTP; Tue, 03 Apr 2007 12:41:42 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Tue, 3 Apr 2007 12:41:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index updates between machines
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <900138.95841.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

How fast are your disks?  Perhaps they are having trouble keeping up with simultaneous searches and massive file copying.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Chun Wei Ho <cwho.work@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, April 3, 2007 10:40:16 AM
Subject: Index updates between machines

We are running a search service on the internet using two machines. We
have a crawler machine which crawls the web and merges new documents
found into the Lucene index. We have a searcher machine which allows
users to perform searches on the Lucene index.

Periodically, we would copy the newest version of the index from the
crawler machine over to the searcher machine (via copy over a NFS
mount). The searcher would then detect the new version, close the old
index, open the new index and resume the search service.

As the index have been growing in size, we have been noticing that the
search response time on the searcher machine increases drastically
when an index (about 15GB) is being copied from the crawler to the
searcher. Both machines run Fedora Core 4 and are on a gbps lan.

We've tried a number of ways to reduce the impact of the copy over NFS
on searching performance, such as "nice"ing the copy process, but to
no avail. I wonder if anyone is running a lucene search service over a
similar architecture and how you are managing the updates to the
lucene index.

Thanks!

Regards,
CW

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 19:56:21 2007
Return-Path: <java-user-return-27357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41631 invoked from network); 3 Apr 2007 19:56:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 19:56:20 -0000
Received: (qmail 81407 invoked by uid 500); 3 Apr 2007 19:56:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81379 invoked by uid 500); 3 Apr 2007 19:56:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81368 invoked by uid 99); 3 Apr 2007 19:56:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 12:56:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andyliu1227@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 12:56:11 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1727643wra
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 12:55:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BcHX3tRf3dxjiyKc46BpTlNgJpsbBMlgbcgsdmj2GxpqA5EOro6Ud+bls3fCGcUkal/TKaFbBYIGrcQgvEtg6AW/a2A91QK2UPRwiUh++1WTfLvvow85csUH0nAq60Y1M+CfSYwdx0WXEAriBOpHpb6LuD+zu/d0uCpc7OYc95Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TXy45/PsGmibvaBlGQIDm9p3jfqjHpGFFzN727mf8UiOsBMcXF8LOcyvnwwTsD7gitGm/d2NST3IjxVG1/NZ/wbu2ZHH2psjaHIE+UpYpsHDrXovlzKU3tVFkh6dMQv3nN1ku2VAjK+MIwxNCZ9w6Qz6aCJQ44vyU+Kh0GmjfpE=
Received: by 10.115.76.1 with SMTP id d1mr2408741wal.1175630150264;
        Tue, 03 Apr 2007 12:55:50 -0700 (PDT)
Received: by 10.114.149.11 with HTTP; Tue, 3 Apr 2007 12:55:50 -0700 (PDT)
Message-ID: <32dca9ed0704031255x11c5c317j7134bdab2b69173a@mail.gmail.com>
Date: Tue, 3 Apr 2007 15:55:50 -0400
From: "Andy Liu" <andyliu1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index updates between machines
In-Reply-To: <900138.95841.qm@web50302.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16741_6868726.1175630150139"
References: <900138.95841.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16741_6868726.1175630150139
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sounds like you might have an I/O issue.  If you have multiple partitions /
disks on the searching server you can search from one partition and copy to
another and alternate.  If you're using RAID different RAID levels are
optimized for simultaneous reads and writes.

If you have a 3rd machine you can load balance 2 search servers and take one
out of the cluster when the index is being copied.  Alternatively, if it's
possible, you can copy the index at an offpeak hour.

Andy

On 4/3/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> How fast are your disks?  Perhaps they are having trouble keeping up with
> simultaneous searches and massive file copying.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Chun Wei Ho <cwho.work@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, April 3, 2007 10:40:16 AM
> Subject: Index updates between machines
>
> We are running a search service on the internet using two machines. We
> have a crawler machine which crawls the web and merges new documents
> found into the Lucene index. We have a searcher machine which allows
> users to perform searches on the Lucene index.
>
> Periodically, we would copy the newest version of the index from the
> crawler machine over to the searcher machine (via copy over a NFS
> mount). The searcher would then detect the new version, close the old
> index, open the new index and resume the search service.
>
> As the index have been growing in size, we have been noticing that the
> search response time on the searcher machine increases drastically
> when an index (about 15GB) is being copied from the crawler to the
> searcher. Both machines run Fedora Core 4 and are on a gbps lan.
>
> We've tried a number of ways to reduce the impact of the copy over NFS
> on searching performance, such as "nice"ing the copy process, but to
> no avail. I wonder if anyone is running a lucene search service over a
> similar architecture and how you are managing the updates to the
> lucene index.
>
> Thanks!
>
> Regards,
> CW
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16741_6868726.1175630150139--

From java-user-return-27358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 20:17:29 2007
Return-Path: <java-user-return-27358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49300 invoked from network); 3 Apr 2007 20:17:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 20:17:28 -0000
Received: (qmail 18733 invoked by uid 500); 3 Apr 2007 20:17:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18697 invoked by uid 500); 3 Apr 2007 20:17:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18685 invoked by uid 99); 3 Apr 2007 20:17:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 13:17:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 13:17:19 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id l33KGwYa016051
	for <java-user@lucene.apache.org>; Tue, 3 Apr 2007 22:16:58 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Design Problem: Searching large set of protected documents
Date: Tue, 3 Apr 2007 22:16:57 +0200
User-Agent: KMail/1.8.2
References: <4612648D.6070102@curtin.com> <OF21D5DC55.FE68125A-ON802572B2.005396D5-802572B2.0053FE3E@xcom.de> <359a92830704030844q5e63b6b4ha9824933411a66df@mail.gmail.com>
In-Reply-To: <359a92830704030844q5e63b6b4ha9824933411a66df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704032216.57546.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 03 April 2007 17:44, Erick Erickson wrote:
> ...
> Then simply add the users filter to a BooleanQuery (MUST)
> that you use when you search.
> 

Adding a Filter to a BooleanQuery is not (yet) possible.
For the moment one needs to use the Searcher methods that
take a filter and a query.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 03 23:33:20 2007
Return-Path: <java-user-return-27359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17051 invoked from network); 3 Apr 2007 23:33:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Apr 2007 23:33:17 -0000
Received: (qmail 67880 invoked by uid 500); 3 Apr 2007 23:33:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67843 invoked by uid 500); 3 Apr 2007 23:33:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67832 invoked by uid 99); 3 Apr 2007 23:33:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 16:33:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 16:33:10 -0700
Received: by ug-out-1314.google.com with SMTP id k40so501158ugc
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 16:32:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qkC+L+UJE7ClscU/gm+DGXIrB/E5UhRyvyb0vR5DVpSnu14ST9gye+cwDLQJJ0hCZMc1P0Tj/t1nhfztV+fBGOkRtSdU52MF9gsyv6ls0mLa5AEw6m+tknb/xsIb/Ci9hLx12UAwhuyahOp0AHZJLdILDRTdRxzIsiA5TlsXjZo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A9SheTcuRjNNi4+44dWVDJ5gSvR7K/a9DvSUw7ef5aEjFTKJMZj5b2Bf4W3c5f+DI7YpG32pELm3WGb4HwSedpfI61ApAeVbumN84Soy10LjxkzlPFrphAlGTWp5Ryf6xE8pYOwmQJ/VbNIaNcaAd6N/ycay8HjBE9AQNKYuDVQ=
Received: by 10.115.93.16 with SMTP id v16mr6428wal.1175643166663;
        Tue, 03 Apr 2007 16:32:46 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Tue, 3 Apr 2007 16:32:46 -0700 (PDT)
Message-ID: <359a92830704031632i1bc75eafs98993795e98f5f4f@mail.gmail.com>
Date: Tue, 3 Apr 2007 19:32:46 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design Problem: Searching large set of protected documents
In-Reply-To: <200704032216.57546.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20511_19190249.1175643166546"
References: <4612648D.6070102@curtin.com>
	 <OF21D5DC55.FE68125A-ON802572B2.005396D5-802572B2.0053FE3E@xcom.de>
	 <359a92830704030844q5e63b6b4ha9824933411a66df@mail.gmail.com>
	 <200704032216.57546.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20511_19190249.1175643166546
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I thought you could simply add a ConstantScoreQuery (whose
constructor takes a Filter) to a BooleanQuery. It seems that doing
this at the very top level with a MUST would do the trick.....

Erick

On 4/3/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> On Tuesday 03 April 2007 17:44, Erick Erickson wrote:
> > ...
> > Then simply add the users filter to a BooleanQuery (MUST)
> > that you use when you search.
> >
>
> Adding a Filter to a BooleanQuery is not (yet) possible.
> For the moment one needs to use the Searcher methods that
> take a filter and a query.
>
> Regards,
> Paul Elschot
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20511_19190249.1175643166546--

From java-user-return-27360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 00:17:53 2007
Return-Path: <java-user-return-27360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26302 invoked from network); 4 Apr 2007 00:17:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 00:17:52 -0000
Received: (qmail 20661 invoked by uid 500); 4 Apr 2007 00:17:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20621 invoked by uid 500); 4 Apr 2007 00:17:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20607 invoked by uid 99); 4 Apr 2007 00:17:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 17:17:53 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 17:17:44 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l340HIEU008141
	for <java-user@lucene.apache.org>; Wed, 4 Apr 2007 03:17:18 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m443genb; 4 Apr 2007 03:16:00 +0300
Message-ID: <4612EE78.7030808@teamware.com>
Date: Wed, 04 Apr 2007 10:16:56 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Range search in numeric fields
References: <46129271.4060205@sirma.bg>
In-Reply-To: <46129271.4060205@sirma.bg>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 04 Apr 2007 03:17:18 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Ivan Vasilev wrote:
> Hi All,
> I have the following problem:
> I have to implement range search for fields that contain numbers. For 
> example the field size that contains file size. The problem is that the 
> numbers are not kept in strings with strikt length. There are field 
> values like this: "32", "421", "1201". So when makeing search like this: 
> +size:[10 TO 50], as the order for string is lexicorafical the result 
> contains the documents with size 32 and 1201. I can see the following 
> possible aproaches:
> 1. Changing indexing process so that all data entered in those fields is 
> with fixed length. Example 0000032, 0000421, 0001201.
> Disadvantages here are:
>    - Have to be reindexed all existng indexes;
>    - The index will grow a bit.

Look at Sols NumberUtils.int2sortableStr().  It will mean reindexing, but the 
number size has fixed storage size - 6 bytes for ints.  It converts numbers to a 
3 char Unicode representation which is sortable and therefore range searchable.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 00:37:27 2007
Return-Path: <java-user-return-27361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29120 invoked from network); 4 Apr 2007 00:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 00:37:27 -0000
Received: (qmail 42021 invoked by uid 500); 4 Apr 2007 00:37:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41609 invoked by uid 500); 4 Apr 2007 00:37:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41598 invoked by uid 99); 4 Apr 2007 00:37:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 17:37:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 17:37:19 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HYtUg-00014H-GK
	for java-user@lucene.apache.org; Tue, 03 Apr 2007 17:36:58 -0700
Message-ID: <9828966.post@talk.nabble.com>
Date: Tue, 3 Apr 2007 17:36:58 -0700 (PDT)
From: freaktet <mlmyers@gmail.com>
To: java-user@lucene.apache.org
Subject: Unique City, State results from index based on zip
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mlmyers@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am having the following problem.
I have an index I built from a standard US Zip Code table.
Users can search for any combination of City, State and Zip.
If they search for City, State, I want to find unique results, instead of
one result for every zip code that city state has.
For instance, a search for "Mill Vally, CA" (mispelling on purpose), gives
these results:
94941, Mill Valley, CA
29715, Fort Mill, SC
46365, Mill Creek, IN
29708, Fort Mill, SC
94114, Mill Valley, CA... etc.  Notice the duplicates.

Any suggestions?  
-- 
View this message in context: http://www.nabble.com/Unique-City%2C-State-results-from-index-based-on-zip-tf3523168.html#a9828966
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 03:19:17 2007
Return-Path: <java-user-return-27362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70409 invoked from network); 4 Apr 2007 03:19:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 03:19:15 -0000
Received: (qmail 6854 invoked by uid 500); 4 Apr 2007 03:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6459 invoked by uid 500); 4 Apr 2007 03:19:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6448 invoked by uid 99); 4 Apr 2007 03:19:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 20:19:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gv.ashwin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 20:19:05 -0700
Received: by ug-out-1314.google.com with SMTP id k40so551001ugc
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 20:18:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CkV2CFFt2EqKoI5ox5u69bXBAf4pJtI6eJ+ZcEXznIcPR5HD+3sDHgjA327HkdIpQim8OWrjFLCBtwlpzCB/LJuwcC8H8NnrJ82Kt+m39M3gsUQmV5nL1zvra+idPuzZKQwG9XUjk4wO4AkhzrMTtew1AqIh2kcRIJSBCUgrVec=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mwPHquBTeRMOLifE+MyCMCGLZ+kPul6oNoR1htJQPZ3/D0pNU2x0ImJPCmDBPWJlfwOOKcwGRHqTyRy9wXz9TuKZtZcql9VaO7xEWGEECEox4Lcgyg8PGrMgtcTssucSVzi5PQRDuuUaaugJOoT9vWgLvext/fM4QrUpftsEEk0=
Received: by 10.67.89.5 with SMTP id r5mr1106179ugl.1175656720563;
        Tue, 03 Apr 2007 20:18:40 -0700 (PDT)
Received: by 10.67.6.5 with HTTP; Tue, 3 Apr 2007 20:18:40 -0700 (PDT)
Message-ID: <2b817f360704032018x43251dbbu89ec4da783856b30@mail.gmail.com>
Date: Wed, 4 Apr 2007 08:48:40 +0530
From: "ashwin kumar" <gv.ashwin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Limitations of lucene
In-Reply-To: <A5C2C51C-618F-4F57-A2FF-5C0F6539F21E@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5627_29516130.1175656720490"
References: <2b817f360704030855n7e712569mb834969030ae184f@mail.gmail.com>
	 <A5C2C51C-618F-4F57-A2FF-5C0F6539F21E@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5627_29516130.1175656720490
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes pls give me the limitations of lucene in speed, size document length and
other such factors and also security issues concering lucene.

regards
ashwin

On 4/3/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Is there some area in particular you are interested in?  Speed, size,
> document length, other?
>
> On Apr 3, 2007, at 11:55 AM, ashwin kumar wrote:
>
> > hi all i would like to know the limitation of lucene index.if
> > anybody have
> > any links or ebooks  please forward..
> >
> > thanks
> > regards
> > ashwin
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5627_29516130.1175656720490--

From java-user-return-27363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 03:37:05 2007
Return-Path: <java-user-return-27363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78680 invoked from network); 4 Apr 2007 03:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 03:37:04 -0000
Received: (qmail 28658 invoked by uid 500); 4 Apr 2007 03:37:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28629 invoked by uid 500); 4 Apr 2007 03:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 20124 invoked by uid 99); 4 Apr 2007 00:16:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Message-ID: <4612EE56.60609@mindspring.com>
Date: Tue, 03 Apr 2007 17:16:22 -0700
From: Jason Pump <jpump@mindspring.com>
User-Agent: Thunderbird 1.5.0.10 (X11/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: OT re Emulating Pages Search
References: <9775141.post@talk.nabble.com>	 <Pine.LNX.4.58.0704010056510.7628@hal.rescomp.berkeley.edu>	 <34b8543c0704010217s2d6e4e1code0e7756048438e7@mail.gmail.com>	 <9776722.post@talk.nabble.com> <359a92830704010536s70d687f1ta5b25b9b6eb8f197@mail.gmail.com>
In-Reply-To: <359a92830704010536s70d687f1ta5b25b9b6eb8f197@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 04 Apr 2007 00:15:37.0471 (UTC) FILETIME=[5EE178F0:01C7764E]
X-Virus-Checked: Checked by ClamAV on apache.org

If the documents have some sort of fixed ranking value (pageweight) and 
the documents are arranged in the index in that order then at some point 
you can say there is no reason to look for more matches, e.g. even if 
the words were next to each other in query order, the document couldn't 
possibly score higher then my #10 result right now. In this situation 
the idea of supplying a page start/end does become valuable in reducing 
load and does not require maintaining state inside the engine. 

Jason

Erick Erickson wrote:
> Efficient in your situation, maybe. Good for everybody? Probably not.
> The key is exactly your use of the word "state". Personally, I do
> NOT want the core search engine to be stateful, that brings a whole
> raft of problems with it. And Lucene is a search engine, not a search
> application.
>
> I really don't want my underlying search engine to keep track of the
> states of many thousands of, say, web users. This, without even
> asking the question of how to keep track of the state for each
> user in a complex web application. Not to mention the added
> requirements that I somehow indicate to Lucene which user's state
> to use.
>
> And I'm not even going to go down the path of how to accomplish
> the bookkeeping for dropped sessions, timeouts, coordinating
> underlying index changes with all these states, etc. etc. etc. I think
> that if you consider the larger community, asking Lucene to
> "save its state" is much more complex that you think.
>
> That said, I can certainly imagine that there are situations where
> making the search process stateful is a good thing. But do you
> have any evidence that the current architecture actually is hurting
> you other than "theoretically"? I certainly wouldn't go down the
> stateful path until I'd demonstrated this in my situation.
>
> If, however, you'd like to make a stateful way to do things and
> submit it to the contrib section, I'm sure the guys would be
> thrilled.
>
> Erick
>
> On 4/1/07, Mohsen Saboorian <mohsens@gmail.com> wrote:
>>
>>
>> This is possible, but the problem here is performance. Why is it not
>> possible
>> to support pagination in a more efficient way? Suppose, a Searcher looks
>> through Documents and find the matching ones. Theoretically, it can stop
>> searching when the result hit number gets more than a threshold. 
>> Searcher
>> may save it's state (reference to the last matched document) whithin the
>> searcher instance, making it possible for incremental search.
>>
>> What is the restriction here in Lucene indices structure, which prevents
>> us
>> from having this kind of search?
>>
>>
>> is_maximum wrote:
>> >
>> > Mosen,
>> > In order to support pagination, I wrapped the Hits is a class just 
>> like
>> > java.sql.ResultSet
>> > You can create a wrapper class and put the Hits in that and implement
>> some
>> > methods like next() prev() to forward and backward through the
>> docuements.
>> >
>> > Hope this help you.
>> >
>> > --
>> > Regards,
>> > Mohammad
>> >
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Emulating-Pages-Search-tf3500169.html#a9776722
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 05:19:13 2007
Return-Path: <java-user-return-27364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12010 invoked from network); 4 Apr 2007 05:19:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 05:19:12 -0000
Received: (qmail 27730 invoked by uid 500); 4 Apr 2007 05:19:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27696 invoked by uid 500); 4 Apr 2007 05:19:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27683 invoked by uid 99); 4 Apr 2007 05:19:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 22:19:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nileshbansal@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 22:19:03 -0700
Received: by ug-out-1314.google.com with SMTP id k40so573872ugc
        for <java-user@lucene.apache.org>; Tue, 03 Apr 2007 22:18:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=mJ5yRyPgkTjkEl6jYDx4i1vlY6xmRgvbhdZDwCSFxnvEztTbNpF15pK6MttEKBGn55iopOsNHeVksW/BUBe4o8VuqGbdj/47O7BT9cLBQi+jMgaIoUrL9rIT4ULAUA7V65kwGIf8nvE0SA1CCzGlX8DUO+xzo0Arb5cs88mrE2E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=qfcQPtT09PblXpzOBzQKV2bLBHcrnN3IAaxp9wuwwYHqxf34O7zZS9a019MjUX3f7EwHqDVSCOhlLwRwx8Je5Ol8fmWo/uy3mrlbqb7K8R2sfesIBPiMO8VgLzzDEIefSIfIgHkbZKAYPAKYoMWx3NbmdwHPhvWgmJDk7jihAOM=
Received: by 10.82.163.13 with SMTP id l13mr118579bue.1175663921921;
        Tue, 03 Apr 2007 22:18:41 -0700 (PDT)
Received: by 10.82.177.15 with HTTP; Tue, 3 Apr 2007 22:18:41 -0700 (PDT)
Message-ID: <f36128690704032218k3c43f624yf94c36ec01d8d7af@mail.gmail.com>
Date: Wed, 4 Apr 2007 01:18:41 -0400
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Optimizations
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I have a few queries regarding optimizing lucene for search performance.

1. We index around 50 million text documents with index size greater
than 40GB, and hence runtime performance is curcial. Our system has
only simple keyword queries. Each search returns an object of type
Hits which contains all matching results. Since usually only top-10
results are displayed to the user, it does not make sense to search
for all matching hundreds of thousand documents. Is there a way to
specify the maximum number of search results that I want to be
returned (and possibly have peroformance benefit)?

2. We many a timees use the index to only get a count on number of
matching documents. Only the size of answer set of the search query is
required, and not the answer set itself. Is there a way to specify
this while searching for some possible performance benefit.

3. We have really simple conjunctive keyword queries. No phrases, no
fuzzy matching, and no advanced search predicates. Is there a way that
we can specify these restrictions on our querying language to have
some possible performance benefits.

thanks in advance,
Nilesh Bansal

-- 
Nilesh Bansal.
http://queens.db.toronto.edu/~nilesh/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 05:33:57 2007
Return-Path: <java-user-return-27365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20320 invoked from network); 4 Apr 2007 05:33:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 05:33:56 -0000
Received: (qmail 49523 invoked by uid 500); 4 Apr 2007 05:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49089 invoked by uid 500); 4 Apr 2007 05:33:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49074 invoked by uid 99); 4 Apr 2007 05:33:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 22:33:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Apr 2007 22:33:45 -0700
Received: (qmail 96189 invoked by uid 60001); 4 Apr 2007 05:33:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=OmnfMMdvr0eQADvV1zSPZIIkfP/ve56dXNcK2rjuvFZqYt+IrMNRHIXIBm+WxTSwycAYWq4RX49xpwIJRGMWaSe12xr4rEwmiHGcvT06E62Q/5yNXjhP84leiYE0Vu5+xRPeOWMPqLvZ4T7X1Jy9V+VkWOMN24l1LCG8k/XSIPc=;
X-YMail-OSG: AJ_VIsAVM1mW93Gb9CO7fnEXVEraRwv59LKo0qX5nGPZ0cAhobyw1G256oVeB6OY1t0GAU0NCgYM2g06tfHqwJzZj7pmY2nVch8-
Received: from [63.192.54.62] by web50308.mail.re2.yahoo.com via HTTP; Tue, 03 Apr 2007 22:33:24 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Tue, 3 Apr 2007 22:33:24 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene Optimizations
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <630515.95951.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Nilesh,

I have a few queries regarding optimizing lucene for search performance.

1. We index around 50 million text documents with index size greater
than 40GB, and hence runtime performance is curcial. Our system has
only simple keyword queries. Each search returns an object of type
Hits which contains all matching results. Since usually only top-10
results are displayed to the user, it does not make sense to search
for all matching hundreds of thousand documents. Is there a way to
specify the maximum number of search results that I want to be
returned (and possibly have peroformance benefit)?

OG: Not with Hits.  You can use this, though:
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/IndexSearcher.html#search(org.apache.lucene.search.Weight,%20org.apache.lucene.search.Filter,%20int)


2. We many a timees use the index to only get a count on number of
matching documents. Only the size of answer set of the search query is
required, and not the answer set itself. Is there a way to specify
this while searching for some possible performance benefit.

OG:
Write your own HitCollector, say CountingHitCollector, and just count++ inside it.
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/IndexSearcher.html#search(org.apache.lucene.search.Weight,%20org.apache.lucene.search.Filter,%20org.apache.lucene.search.HitCollector)

If you are dealing with just Terms, you could use:
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/IndexSearcher.html#docFreq(org.apache.lucene.index.Term)
or
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/Searcher.html#docFreqs(org.apache.lucene.index.Term[])

3. We have really simple conjunctive keyword queries. No phrases, no
fuzzy matching, and no advanced search predicates. Is there a way that
we can specify these restrictions on our querying language to have
some possible performance benefits.

OG: You can write your own QueryParser and disable types of queries that could be expensive if run, but that is it.

Otis




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 05:35:10 2007
Return-Path: <java-user-return-27366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20757 invoked from network); 4 Apr 2007 05:35:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 05:35:10 -0000
Received: (qmail 51275 invoked by uid 500); 4 Apr 2007 05:35:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51248 invoked by uid 500); 4 Apr 2007 05:35:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51237 invoked by uid 99); 4 Apr 2007 05:35:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 22:35:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Apr 2007 22:35:02 -0700
Received: (qmail 6112 invoked by uid 60001); 4 Apr 2007 05:34:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=0y9NfEgE/tQmHbsTiMnvqeGGiVxYh97X7SPp55WxhGdcUe/ur0kluy2TYfTX+UQCwG0sV1B9aPJAQYAT/uID45ROdSgIrIiVcoqek5P/EVcandfZFYj3+cSldMcj4vnj4EtyM/UwNVLZlkLVgrWsT546PKq2FtkYTVt3pPoOeIc=;
X-YMail-OSG: 9Ld3oPUVM1mioqThJuE8lefiqjUPUHHFOnc8uzF.DXvZn2zii6SAKDmN7PQbYnmhjAMToR6rHwcJYexsyjOXHI.g4A--
Received: from [63.192.54.62] by web50309.mail.re2.yahoo.com via HTTP; Tue, 03 Apr 2007 22:34:41 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Tue, 3 Apr 2007 22:34:41 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Limitations of lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <534058.2452.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

speed - query complexity, concurrency, hardware, size of index
document size - no practical limit, as far as I know
security - lucene doesn't deal with it, your app has to implement security

Otis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: ashwin kumar <gv.ashwin@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, April 3, 2007 11:18:40 PM
Subject: Re: Limitations of lucene

yes pls give me the limitations of lucene in speed, size document length and
other such factors and also security issues concering lucene.

regards
ashwin

On 4/3/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Is there some area in particular you are interested in?  Speed, size,
> document length, other?
>
> On Apr 3, 2007, at 11:55 AM, ashwin kumar wrote:
>
> > hi all i would like to know the limitation of lucene index.if
> > anybody have
> > any links or ebooks  please forward..
> >
> > thanks
> > regards
> > ashwin
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 06:01:28 2007
Return-Path: <java-user-return-27367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29669 invoked from network); 4 Apr 2007 06:01:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 06:01:27 -0000
Received: (qmail 83938 invoked by uid 500); 4 Apr 2007 06:01:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82853 invoked by uid 500); 4 Apr 2007 06:01:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82831 invoked by uid 99); 4 Apr 2007 06:01:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 23:01:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 23:01:18 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HYyYE-0001sM-3E
	for java-user@lucene.apache.org; Tue, 03 Apr 2007 23:00:58 -0700
Message-ID: <9831495.post@talk.nabble.com>
Date: Tue, 3 Apr 2007 23:00:57 -0700 (PDT)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Error-Tolerant
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org



-- 
View this message in context: http://www.nabble.com/Error-Tolerant-tf3524057.html#a9831495
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 06:05:31 2007
Return-Path: <java-user-return-27368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31089 invoked from network); 4 Apr 2007 06:05:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 06:05:30 -0000
Received: (qmail 89733 invoked by uid 500); 4 Apr 2007 06:05:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89706 invoked by uid 500); 4 Apr 2007 06:05:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89695 invoked by uid 99); 4 Apr 2007 06:05:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 23:05:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2007 23:05:22 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HYycA-0005A5-5S
	for java-user@lucene.apache.org; Tue, 03 Apr 2007 23:05:02 -0700
Message-ID: <9831496.post@talk.nabble.com>
Date: Tue, 3 Apr 2007 23:05:02 -0700 (PDT)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Error Tolerant Query Parser
In-Reply-To: <9831495.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
References: <9831495.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry for dual posting. I've just inadvertently submit form before writing
the body :)

Is there any error tolerant query parser ever written for Lucene? What is
the way websites use for advanced searching with Lucene?
-- 
View this message in context: http://www.nabble.com/Error-Tolerant-tf3524057.html#a9831496
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 11:10:48 2007
Return-Path: <java-user-return-27369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32388 invoked from network); 4 Apr 2007 11:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 11:10:47 -0000
Received: (qmail 59215 invoked by uid 500); 4 Apr 2007 11:10:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59173 invoked by uid 500); 4 Apr 2007 11:10:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59162 invoked by uid 99); 4 Apr 2007 11:10:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 04:10:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sengly.heng@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 04:10:39 -0700
Received: by mu-out-0910.google.com with SMTP id i10so251448mue
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 04:10:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=kilAbpW8iELLQ3OM65WWemVNu3hNnTZHk9BpqK4SJIzGERDkcf0TKmSz4PbQ5difCAPBXWiyVnCm+9KK6Ce3XG8YtX9Cw1elSmyM0F4wQ4zpDtU9lee18483dxFU06elt2hqdTS+SOMt6+2pusXLjpYECnZup9zqTI+oNV9/Pyo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qG1j6j0bIHo9qNZ2Tv/TZMOElI2VEyRyaB99coO4h5Sj9eqj+TNCDEtaWvxnJkZXNdZAyRS0od30+HCDP9bq8PTQMH1+eYDGVwrqWy68HjfQ1mw6B8TR+HFNQbkvAW4GuFpXeT/S0eNbjxrVtngZkmCvAwnSdXSYRKBGr0+jJAg=
Received: by 10.82.163.13 with SMTP id l13mr514602bue.1175685016643;
        Wed, 04 Apr 2007 04:10:16 -0700 (PDT)
Received: by 10.82.147.9 with HTTP; Wed, 4 Apr 2007 04:10:16 -0700 (PDT)
Message-ID: <17db983d0704040410g48534a0cva3610facb2596e6e@mail.gmail.com>
Date: Wed, 4 Apr 2007 20:10:16 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing multiple instances of the same field and counting their frequency afterward
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16967_18223711.1175685016425"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16967_18223711.1175685016425
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all,

My problem is a little bit strange. Instead of parsing the content of the
document to the indexer. I am adding one by one. Here is a piece of my code
:

Document doc = new Document();
doc.add(Field.Text("Features", "blue");
doc.add(Field.Text("Features","beautiful");
 doc.add(Field.Text("Features", "black");
doc.add(Field.Text("Features","white");
 doc.add(Field.Text("Features", "blue");
doc.add(Field.Text("Features","blue");

I'd like to know whether the internal representation of this is like when we
add at once the whole content of the document as a long string? I'd like
also to count the number of "blue" occurence from the document. How to do
this?

Thank you very much for your suggestion in advance.

Regards,

Sengly

------=_Part_16967_18223711.1175685016425--

From java-user-return-27370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 11:46:03 2007
Return-Path: <java-user-return-27370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41349 invoked from network); 4 Apr 2007 11:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 11:46:02 -0000
Received: (qmail 12030 invoked by uid 500); 4 Apr 2007 11:45:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11993 invoked by uid 500); 4 Apr 2007 11:45:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11971 invoked by uid 99); 4 Apr 2007 11:45:59 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jokin.c@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 04:45:58 -0700
Received: by ug-out-1314.google.com with SMTP id k40so670785ugc
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 04:44:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=G+QF3eMh6QopEm3kJ0dn2UypH6VRB6zn65IaJN3zzlPV1FFj1iiiE9GoDoUacduI3H+fKj8SNa+hy1unQYYjV7IQsuwuOxQ23S0Vw5DsrthOAd+FMldytPfVyySflcav9jMfOMEX8nLMvF1J0Zp/GbRIaJgcKHPy/AXzDXiVXc8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VqhEEPVIrdm8HJz9T9qJ5mDRBNf1qyb4Uf0ql4ErSz/B+sCuFuzaLOrI+AHsTvVYYTsLzdQlBI22cSO68R2XjUSIziv43oF3WCPJPyPY3XaR21vjjE1qvJ/UHyEAHyxt/NfEoj6YkHn8kNL/wi5jlFJmXcro2h1bbQ2mDlcwfGY=
Received: by 10.82.163.13 with SMTP id l13mr559779bue.1175687065075;
        Wed, 04 Apr 2007 04:44:25 -0700 (PDT)
Received: by 10.82.108.15 with HTTP; Wed, 4 Apr 2007 04:44:25 -0700 (PDT)
Message-ID: <93228c910704040444n21967377i9c9155589f90a18d@mail.gmail.com>
Date: Wed, 4 Apr 2007 13:44:25 +0200
From: "Jokin Cuadrado" <jokin.c@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unique City, State results from index based on zip
In-Reply-To: <9828966.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <9828966.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

don't index the city names with the zip codes.

indexed text - Stored Value
---------------------------------------------------
94941          - 94941  Mill Vallley
94114          -  94114  Mill Vallley
Mill Vallley   - Mill Vallley
29715          - 29715 Fort Mill
29708          - 29708 Fort Mill
Fort Mill       - Fort Mill

so if you search fort milll you will find  only the last one.

--
Jokin

On 4/4/07, freaktet <mlmyers@gmail.com> wrote:
>
> I am having the following problem.
> I have an index I built from a standard US Zip Code table.
> Users can search for any combination of City, State and Zip.
> If they search for City, State, I want to find unique results, instead of
> one result for every zip code that city state has.
> For instance, a search for "Mill Vally, CA" (mispelling on purpose), gives
> these results:
> 94941, Mill Valley, CA
> 29715, Fort Mill, SC
> 46365, Mill Creek, IN
> 29708, Fort Mill, SC
> 94114, Mill Valley, CA... etc.  Notice the duplicates.
>
> Any suggestions?
> --
> View this message in context: http://www.nabble.com/Unique-City%2C-State-results-from-index-based-on-zip-tf3523168.html#a9828966
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 12:57:56 2007
Return-Path: <java-user-return-27371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59263 invoked from network); 4 Apr 2007 12:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 12:57:53 -0000
Received: (qmail 23658 invoked by uid 500); 4 Apr 2007 12:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23627 invoked by uid 500); 4 Apr 2007 12:57:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23616 invoked by uid 99); 4 Apr 2007 12:57:50 -0000
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jafarim@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 05:57:49 -0700
Received: by wx-out-0506.google.com with SMTP id i29so174042wxd
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 05:56:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=czxX1Vybns/jH8aApw9IuuH3WEga+dJq0dpOnN6YEUXkgT4v45K9Fmxb0M/0e3QIYqdMSKTk51ibYL/vcnZ2aDEF5A6zzitDMZCGQlKXMZprY/2gMfeMZo4x64Nb2KTOltLoWjHat4bSOEH3Nukgmvgo3+xEn2ospSdB7x85KHk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=rnXImQCo+vUphl/JHDOlys530kJLvoJ+5nIo9hbXkSteqrZ87aglmTzejreTlMp40IdmEOEqsbPdqSEXikf8te+fx3k7W+16xMBPvIOFG58CAgdyL0vV9+lhMDQYtvcQiWfFZaXD1NfjwyC+KLjrH3r5FvUtIR6N9HGRLt+pk1k=
Received: by 10.70.103.12 with SMTP id a12mr1162900wxc.1175691381558;
        Wed, 04 Apr 2007 05:56:21 -0700 (PDT)
Received: by 10.70.29.10 with HTTP; Wed, 4 Apr 2007 05:56:21 -0700 (PDT)
Message-ID: <bddd3c950704040556jc63a0a1ufe196d6922afcb7a@mail.gmail.com>
Date: Wed, 4 Apr 2007 17:26:21 +0430
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Field.lazy setter method?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8744_23110030.1175691381524"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8744_23110030.1175691381524
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I wonder why there is not setter method for the "lazy" member variable in
Field class. Does that mean the propoerty is nominal and setting it does not
have any effect, or am I missing some point?
Any way, is there any way to tell lucene that a field is to be lazy-loaded,
from the very beginning of field construction?

--jaf

------=_Part_8744_23110030.1175691381524--

From java-user-return-27372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 13:05:15 2007
Return-Path: <java-user-return-27372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61947 invoked from network); 4 Apr 2007 13:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 13:05:14 -0000
Received: (qmail 32540 invoked by uid 500); 4 Apr 2007 13:05:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32506 invoked by uid 500); 4 Apr 2007 13:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32495 invoked by uid 99); 4 Apr 2007 13:05:12 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 06:05:12 -0700
Received: by ug-out-1314.google.com with SMTP id k40so694926ugc
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 06:03:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=OUH4LK/R+LgWlVmzGUnGdcxuQGUMehl6YNjqk10Z6c3Arr88sYpw3XkO3qprW2AlKzEs1vb6QC9kF9Czv3HnKc6jL4m9WLNsh7N98RItY8iwFyPA+tJ4k6D7R6yCMReiUlYSUawMb9JZUboH3lBlLDxS4cP7fKignHulVwrGEQA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=py/jwdPpRVDzyAMDdQDUASwFm75EahH1O7xP+Kdg653Huz1hCH4GiI6WQyMHIJln+75JVZWyI8VCfMRHpruQVgKAFl0UXpjIe5/S8ewd/f1uHYiP1LrNVRuw89XBhLRdMHGXTdAAf7Wnb4S5vvifh5/FLlwBqlUJFS+2HSJb+AI=
Received: by 10.82.187.16 with SMTP id k16mr684665buf.1175691819509;
        Wed, 04 Apr 2007 06:03:39 -0700 (PDT)
Received: by 10.82.126.8 with HTTP; Wed, 4 Apr 2007 06:03:39 -0700 (PDT)
Message-ID: <c68e39170704040603k54f26f0eh1fd5b791f10b572a@mail.gmail.com>
Date: Wed, 4 Apr 2007 09:03:39 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Field.lazy setter method?
In-Reply-To: <bddd3c950704040556jc63a0a1ufe196d6922afcb7a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <bddd3c950704040556jc63a0a1ufe196d6922afcb7a@mail.gmail.com>
X-Google-Sender-Auth: c040b5dfc1794d98
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/4/07, jafarim <jafarim@gmail.com> wrote:
> Any way, is there any way to tell lucene that a field is to be lazy-loaded,
> from the very beginning of field construction?

No, that data is not stored in the index.
Lazy field loading is specified only when retrieving the stored fields
of a document, and it can be different each time one requests a
document.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 13:08:50 2007
Return-Path: <java-user-return-27373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62425 invoked from network); 4 Apr 2007 13:08:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 13:08:48 -0000
Received: (qmail 36686 invoked by uid 500); 4 Apr 2007 13:08:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36643 invoked by uid 500); 4 Apr 2007 13:08:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36632 invoked by uid 99); 4 Apr 2007 13:08:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 06:08:45 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 640105B534
	for <java-user@lucene.apache.org>; Wed,  4 Apr 2007 06:07:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <bddd3c950704040556jc63a0a1ufe196d6922afcb7a@mail.gmail.com>
References: <bddd3c950704040556jc63a0a1ufe196d6922afcb7a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8240F65E-5924-4161-BFC4-1B357A2D534A@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Field.lazy setter method?
Date: Wed, 4 Apr 2007 09:07:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Lazy loading is handled through the FieldSelector interface on  
IndexReader.doc() and some variations.  There is nothing special that  
need be done during indexing to mark a field as lazy.  The isLazy  
method merely lets you know later, after loading a Document, if the  
field is, indeed, lazy.  One caveat, lazy fields become undefined if  
the underlying IndexReader is closed before accessing the field.   
Once a lazy field is loaded, however, this is no longer an issue, as  
the field value stays in memory.

-Grant

On Apr 4, 2007, at 8:56 AM, jafarim wrote:

> Hi
> I wonder why there is not setter method for the "lazy" member  
> variable in
> Field class. Does that mean the propoerty is nominal and setting it  
> does not
> have any effect, or am I missing some point?
> Any way, is there any way to tell lucene that a field is to be lazy- 
> loaded,
> from the very beginning of field construction?
>
> --jaf

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 13:12:11 2007
Return-Path: <java-user-return-27374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63109 invoked from network); 4 Apr 2007 13:12:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 13:12:10 -0000
Received: (qmail 43496 invoked by uid 500); 4 Apr 2007 13:12:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43470 invoked by uid 500); 4 Apr 2007 13:12:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43458 invoked by uid 99); 4 Apr 2007 13:12:00 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jafarim@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 06:11:59 -0700
Received: by wx-out-0506.google.com with SMTP id i29so178236wxd
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 06:10:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rkUMGUBooS9ws1JkAv647/Go6sZIBjgsXL7xBX6jGNWw4dfNZEiFO/HiQfyJ8WLUBQfe7tG/PKjYEnF8IWCE4tL+YA6fkROSeUk25DtK7avuoh/hoeInlNSj/96Iys/UFu+paD5KElAZh9JPWjvA0b2Sypzly8LB9hZtkFHivb4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FmuMohzVVQ7wPjtzXi4lAIV5k3QD3FO9+EgVR7xvXOt53F2hCY95HwztUZwqnA2VLD2j4eyegDy6AhfmjnpeJ3HEuhMYZYShvI4OfHqmSqte4puqKQs33MYEGDFuJpCoeN+ubeFJbY7wwNmqR0C6nwcEmNgx9XcnLJVMA1XzXgo=
Received: by 10.70.60.7 with SMTP id i7mr1241102wxa.1175692231990;
        Wed, 04 Apr 2007 06:10:31 -0700 (PDT)
Received: by 10.70.29.10 with HTTP; Wed, 4 Apr 2007 06:10:31 -0700 (PDT)
Message-ID: <bddd3c950704040610w130bf72i5abd9494a0924c65@mail.gmail.com>
Date: Wed, 4 Apr 2007 17:40:31 +0430
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.lazy setter method?
In-Reply-To: <c68e39170704040603k54f26f0eh1fd5b791f10b572a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8816_5634917.1175692231885"
References: <bddd3c950704040556jc63a0a1ufe196d6922afcb7a@mail.gmail.com>
	 <c68e39170704040603k54f26f0eh1fd5b791f10b572a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8816_5634917.1175692231885
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So, what's the usage of this propoerty in the Field class?

On 4/4/07, Yonik Seeley <yonik@apache.org> wrote:
>
> On 4/4/07, jafarim <jafarim@gmail.com> wrote:
> > Any way, is there any way to tell lucene that a field is to be
> lazy-loaded,
> > from the very beginning of field construction?
>
> No, that data is not stored in the index.
> Lazy field loading is specified only when retrieving the stored fields
> of a document, and it can be different each time one requests a
> document.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8816_5634917.1175692231885--

From java-user-return-27375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 13:18:16 2007
Return-Path: <java-user-return-27375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64421 invoked from network); 4 Apr 2007 13:18:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 13:18:15 -0000
Received: (qmail 56625 invoked by uid 500); 4 Apr 2007 13:18:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56599 invoked by uid 500); 4 Apr 2007 13:18:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56576 invoked by uid 99); 4 Apr 2007 13:18:14 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lmenaria@chambal.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 06:18:12 -0700
Received: by wr-out-0506.google.com with SMTP id 68so139129wra
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 06:16:45 -0700 (PDT)
Received: by 10.114.190.6 with SMTP id n6mr245142waf.1175692603871;
        Wed, 04 Apr 2007 06:16:43 -0700 (PDT)
Received: by 10.114.39.18 with HTTP; Wed, 4 Apr 2007 06:16:43 -0700 (PDT)
Message-ID: <1324e4e20704040616g241e3d88j1a6cd26c82a1d2db@mail.gmail.com>
Date: Wed, 4 Apr 2007 18:46:43 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing multiple instances of the same field and counting their frequency afterward
In-Reply-To: <17db983d0704040410g48534a0cva3610facb2596e6e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21866_1325417.1175692603806"
References: <17db983d0704040410g48534a0cva3610facb2596e6e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21866_1325417.1175692603806
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello,

you can try this code :

IndexReader ISer= IndexReader.open("C:/Testindex");
            TermEnum te=ISer.terms(new Term("Features","blue"));
            Term te1= te.term();
            System.out.println("Frequency of blue "+ISer.docFreq(te1));

regards,
-LM

On 4/4/07, Sengly Heng <sengly.heng@gmail.com> wrote:
>
> Dear all,
>
> My problem is a little bit strange. Instead of parsing the content of the
> document to the indexer. I am adding one by one. Here is a piece of my
> code
> :
>
> Document doc = new Document();
> doc.add(Field.Text("Features", "blue");
> doc.add(Field.Text("Features","beautiful");
> doc.add(Field.Text("Features", "black");
> doc.add(Field.Text("Features","white");
> doc.add(Field.Text("Features", "blue");
> doc.add(Field.Text("Features","blue");
>
> I'd like to know whether the internal representation of this is like when
> we
> add at once the whole content of the document as a long string? I'd like
> also to count the number of "blue" occurence from the document. How to do
> this?
>
> Thank you very much for your suggestion in advance.
>
> Regards,
>
> Sengly
>

------=_Part_21866_1325417.1175692603806--

From java-user-return-27376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 13:37:31 2007
Return-Path: <java-user-return-27376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76295 invoked from network); 4 Apr 2007 13:37:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 13:37:30 -0000
Received: (qmail 115 invoked by uid 500); 4 Apr 2007 13:37:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99941 invoked by uid 500); 4 Apr 2007 13:37:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99930 invoked by uid 99); 4 Apr 2007 13:37:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 06:37:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 06:37:20 -0700
Received: by wr-out-0506.google.com with SMTP id 68so143525wra
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 06:37:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EErFhxDwSuCMvCwdWkDg1eCSirNXB8bodNZ5VE07PDU3ZPAvxIqpM2Rt2+BI/rh9sH7fEXRSj0/GDI2CVLh5kvsrEPBDuwlymvCSQlpVkZQsXK3gQ06en+LJ1s611FjvI35UsklYKFzAyeF43CI78we2lumzwsPRX7CZ29E8Bvg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QxEyut91Vkr8cRz7VrKCneWJTNVr5RXOg0tSj44MIP3EyuNKvCrSTx1HcA5WLEGi0K8Jrl9hUVG/djOapd7V3LP6xAjQZJwN5iYBvfepyBEmGcImCVgOLJT6R812NFiBMiD+TuIVj4yy8TsvWgi4O7KFgsWr0R0LdMeKfZgvip8=
Received: by 10.115.89.1 with SMTP id r1mr255015wal.1175693818828;
        Wed, 04 Apr 2007 06:36:58 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Wed, 4 Apr 2007 06:36:58 -0700 (PDT)
Message-ID: <359a92830704040636x602a0225se48e3cf4e58d5dce@mail.gmail.com>
Date: Wed, 4 Apr 2007 09:36:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unique City, State results from index based on zip
In-Reply-To: <9828966.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29706_9738569.1175693818659"
References: <9828966.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29706_9738569.1175693818659
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The default operator for QueryParser is OR, so what you may really
be getting is hits on Mill, and Vally is irrelevant.

But this is just a guess, it'd be way more helpful if you told us what
your index structure was and what query you actually submitted,
for which query.toString is really helpful.

And if you haven't gotten a copy of Luke, you should. It'll help
you examine your index, see how different queries parse (be sure
to set the Analyzer you use in Luke), etc.

Erick

On 4/3/07, freaktet <mlmyers@gmail.com> wrote:
>
>
> I am having the following problem.
> I have an index I built from a standard US Zip Code table.
> Users can search for any combination of City, State and Zip.
> If they search for City, State, I want to find unique results, instead of
> one result for every zip code that city state has.
> For instance, a search for "Mill Vally, CA" (mispelling on purpose), gives
> these results:
> 94941, Mill Valley, CA
> 29715, Fort Mill, SC
> 46365, Mill Creek, IN
> 29708, Fort Mill, SC
> 94114, Mill Valley, CA... etc.  Notice the duplicates.
>
> Any suggestions?
> --
> View this message in context:
> http://www.nabble.com/Unique-City%2C-State-results-from-index-based-on-zip-tf3523168.html#a9828966
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_29706_9738569.1175693818659--

From java-user-return-27377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 13:47:03 2007
Return-Path: <java-user-return-27377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79568 invoked from network); 4 Apr 2007 13:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 13:47:03 -0000
Received: (qmail 24669 invoked by uid 500); 4 Apr 2007 13:47:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24643 invoked by uid 500); 4 Apr 2007 13:47:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24632 invoked by uid 99); 4 Apr 2007 13:47:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 06:47:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 06:46:53 -0700
Received: by wr-out-0506.google.com with SMTP id 68so145682wra
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 06:46:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sR/Co3yKCQBI/0ZX+TO5m5uEC2x9mY4kIg00rO0DBwncGlQJz8XUod3W6aYC+MCCi5+zQ9WZS29EnMBwZsKzo60FBlH/i4PHs5eW6BeLNELrUGT4zkuuArLApjKxaGoE/bo2x0cF9CVWKLRckOqa3JX57O+3cbbNkbBBiga2tmU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L3OFv5IAJwTRejtBwZ7eeKG9XRv1s/T8vUXSIy2eIkTmxh2j+c2tR0SpTHoIHlLXWjp0WIi2ezqprgUscii/aRHlWk9WG8IjNr//4rCwq7azlegnC1ZjYCe/Z+wUxvUChnYXc/U/IFurElw2T3YJCge715QocQzmB7Q0uYJQ0KA=
Received: by 10.114.151.13 with SMTP id y13mr270736wad.1175694392178;
        Wed, 04 Apr 2007 06:46:32 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Wed, 4 Apr 2007 06:46:32 -0700 (PDT)
Message-ID: <359a92830704040646l5747b36kba7924c955b5f8a9@mail.gmail.com>
Date: Wed, 4 Apr 2007 09:46:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing multiple instances of the same field and counting their frequency afterward
In-Reply-To: <17db983d0704040410g48534a0cva3610facb2596e6e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29863_26431320.1175694392124"
References: <17db983d0704040410g48534a0cva3610facb2596e6e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29863_26431320.1175694392124
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below

On 4/4/07, Sengly Heng <sengly.heng@gmail.com> wrote:
>
> Dear all,
>
> My problem is a little bit strange. Instead of parsing the content of the
> document to the indexer. I am adding one by one. Here is a piece of my
> code
> :
>
> Document doc = new Document();
> doc.add(Field.Text("Features", "blue");
> doc.add(Field.Text("Features","beautiful");
> doc.add(Field.Text("Features", "black");
> doc.add(Field.Text("Features","white");
> doc.add(Field.Text("Features", "blue");
> doc.add(Field.Text("Features","blue");
>
> I'd like to know whether the internal representation of this is like when
> we
> add at once the whole content of the document as a long string?


There's no internal difference unless you implement an Analyzer that
returns a value other than 1 from getPositionIncrementGap(). Why would
you do this you ask? Occasionally, it is useful to index data in the
same field but NOT allow proximity queries to span separate
additions. Imagine indexing a book and, for some reason, you
didn't want span queries to cross, say, chapters. You could
do something like
doc.add("page", <contents of page 1>);
doc.add("page", <contents of page 2>);



then in your Analyzer, have something in getPositionIncrementGap
like
if (page is beginning of chapter)  {
    return 1000;
} else {
return 1;
}

Now, no Span query with a slop of less than 1,000 would
match from the last page in one chapter to the first page of another.

FWIW
Erick

I'd like
> also to count the number of "blue" occurence from the document. How to do
> this?


See the other reply <G>.

Thank you very much for your suggestion in advance.
>
> Regards,
>
> Sengly
>

------=_Part_29863_26431320.1175694392124--

From java-user-return-27378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 14:23:02 2007
Return-Path: <java-user-return-27378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90908 invoked from network); 4 Apr 2007 14:23:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 14:23:01 -0000
Received: (qmail 13571 invoked by uid 500); 4 Apr 2007 14:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13539 invoked by uid 500); 4 Apr 2007 14:22:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13528 invoked by uid 99); 4 Apr 2007 14:22:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 07:22:59 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 07:22:50 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id F2972212414
	for <java-user@lucene.apache.org>; Wed,  4 Apr 2007 10:22:34 -0400 (EDT)
Received: from web4.messagingengine.com ([10.202.2.213])
  by compute1.internal (MEProxy); Wed, 04 Apr 2007 10:22:30 -0400
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 69EFF189D4C; Wed,  4 Apr 2007 10:22:30 -0400 (EDT)
Message-Id: <1175696550.32334.1183005717@webmail.messagingengine.com>
X-Sasl-Enc: gwwmfNq8j6STzSomTkdJc86iv+dFSBHVQM8amOg9ycnt 1175696550
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <9818026.post@talk.nabble.com>
Subject: Re: IndexWriter Quandry
In-Reply-To: <9818026.post@talk.nabble.com>
Date: Wed, 04 Apr 2007 10:22:30 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Kvailis" <warthog982@yahoo.com> wrote:
> I'm pretty new to Lucene (2.0.0) and and having an issue with the
> IndexWriter: if I set the boolean argument to 'true' it goes ahead and
> writes indexes that turn out to be perfectly usable; taking the same exact
> code and swithing the boolean to 'false' immediately throws a
> FileNotFoundException for '.../segments', saying there's no such file or
> directory.  I know it's there after the first run because I can see it on
> the file system and search it.  Indexing with 'true' and then immediately
> with 'false' produces the same result, so I don't think there's any
> corruption coming from any searches.  It's not a big deal now, because the
> size of the data itself is pretty small and doesn't get updated all that
> frequently; that's going to change radically in the near future, so creating
> new indexes every time someting changes will undoubtedly be a huuge pain in
> the @$$ for the users.  Any clues will be a help and appreciated
> accordingly...

I think something sneaky must be happening here because that use case
normally works fine.  If indeed an index is present at the directory
then passing "false" will just open that existing index and add
documents to it.  Can you make the problem happen on a tiny test case?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 14:58:42 2007
Return-Path: <java-user-return-27379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3235 invoked from network); 4 Apr 2007 14:58:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 14:58:41 -0000
Received: (qmail 5609 invoked by uid 500); 4 Apr 2007 14:58:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5583 invoked by uid 500); 4 Apr 2007 14:58:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5572 invoked by uid 99); 4 Apr 2007 14:58:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 07:58:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.252.100.140] (HELO web90303.mail.mud.yahoo.com) (216.252.100.140)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2007 07:58:32 -0700
Received: (qmail 67847 invoked by uid 60001); 4 Apr 2007 14:58:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=C+FjX94FKFIJJKGHGvs0SB5tmq4yityUP+koa/sumzqqBu9G62izLRfFvt5aL4jBLLBTx0ZNaBvjeEJCE57bqc7XlV0K5wxtwE4Vwwzg9GOCdwEZ6F4sMt2oHt08Bmk7m7zBHwliiKlh7pVoGd7x7Zdh+Ipd5i03pCOW0EBM2f8=;
X-YMail-OSG: plmMSFsVM1mD4oHJVUTo.kFjJS3MVk19QZ4QvE_hMT1MMX3ekyB43ppPc.upePdViQ--
Received: from [140.177.203.1] by web90303.mail.mud.yahoo.com via HTTP; Wed, 04 Apr 2007 07:58:11 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Wed, 4 Apr 2007 07:58:11 -0700 (PDT)
From: Annona Keene <annonakeene@yahoo.com>
Subject: Explanation from FunctionQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-747570489-1175698691=:67714"
Message-ID: <739606.67714.qm@web90303.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-747570489-1175698691=:67714
Content-Type: text/plain; charset=ascii

I'm hoping someone can offer some insight into the FunctionQuery.  I've just discovered this, and I think it's exactly what I've been looking for, but I'm having some trouble getting it to work. I can create and execute the query, but if I try to see the Explanation, I get an java.lang.UnsupportedOperationException .  Can someone show me where I'm going wrong?

            Query query = parser.parse(newCriteria);

            LinearFloatFunction lff = new LinearFloatFunction(new IntFieldSource("num"), 1.0f, 1.0f);
            FunctionQuery fQ = new FunctionQuery(lff);
            
            BooleanQuery bQ = new BooleanQuery();
            bQ.add(query, BooleanClause.Occur.MUST);
            bQ.add(fQ, BooleanClause.Occur.SHOULD);

I'm using the FunctionQuery with a Query in a BooleanQuery, based on some information I found on this list.  However, here's where I run into trouble:

//there's code here that executes the query and does other exciting things
ms.explain(bQ, hit.getId());

The ms is a MultiSearcher.  I read that java.lang.UnsupportedOperationException is usually a result of a query not being in it's rewritten form. Is that my problem here? Any help you could offer would be greatly appreciated.

Thanks,
Ann




 
____________________________________________________________________________________
Looking for earth-friendly autos? 
Browse Top Cars by "Green Rating" at Yahoo! Autos' Green Center.
http://autos.yahoo.com/green_center/
--0-747570489-1175698691=:67714--

From java-user-return-27380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 15:08:17 2007
Return-Path: <java-user-return-27380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6169 invoked from network); 4 Apr 2007 15:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 15:08:15 -0000
Received: (qmail 31097 invoked by uid 500); 4 Apr 2007 15:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30838 invoked by uid 500); 4 Apr 2007 15:08:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30827 invoked by uid 99); 4 Apr 2007 15:08:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 08:08:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sengly.heng@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 08:08:05 -0700
Received: by mu-out-0910.google.com with SMTP id i10so353609mue
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 08:07:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xn1NP4EHMMtoIsSu7fZi1OeLm00KdHhU0t5ERoxE5p5BugCg+Luyw3PX1ygbHplIFieSnlbJpx2aNTS8tFgi1Gww8BexumprzIpXeMVmrFz6jIkWOoxGaI62iBlFMpZc9X8NTLGKpT2Wv+xF1UDrP0FL4vBsrU6indE99RQRAkg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lB7cunuOX0Oyc9A8K6Xg76a/3agfAtjEz0JTpMk7rL0Q+UozDExFIGeujQF0wt+BDZw3T57xxpCPEiSLUUzUBH1vRAmjnR2Oyzt6k8fx+uJc5C2lbsNF5ShMIRCJyXZI4orvrJidJIZNvJdcrQbP7gTk9nlx3GSmLj0mTOGDcGo=
Received: by 10.82.104.18 with SMTP id b18mr892745buc.1175699263519;
        Wed, 04 Apr 2007 08:07:43 -0700 (PDT)
Received: by 10.82.147.9 with HTTP; Wed, 4 Apr 2007 08:07:43 -0700 (PDT)
Message-ID: <17db983d0704040807n8e8386clcd620a5b644c2203@mail.gmail.com>
Date: Thu, 5 Apr 2007 00:07:43 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing multiple instances of the same field and counting their frequency afterward
In-Reply-To: <359a92830704040646l5747b36kba7924c955b5f8a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19725_33160682.1175699263485"
References: <17db983d0704040410g48534a0cva3610facb2596e6e@mail.gmail.com>
	 <359a92830704040646l5747b36kba7924c955b5f8a9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19725_33160682.1175699263485
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks so much for your explaination. But there is one thing that I want to
make sure is that in case that i add the same token to the same field,
internally is it redundancy?

And in case, that I have many fields. What is the best way to list up the
frequency of all the tokens from different fields without knowing in advance
what are the tokens that we have.

Once again, thank you very much for your reply.

Best regards,

Sengly


On 4/4/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> See below
>
> On 4/4/07, Sengly Heng <sengly.heng@gmail.com> wrote:
> >
> > Dear all,
> >
> > My problem is a little bit strange. Instead of parsing the content of
> the
> > document to the indexer. I am adding one by one. Here is a piece of my
> > code
> > :
> >
> > Document doc = new Document();
> > doc.add(Field.Text("Features", "blue");
> > doc.add(Field.Text("Features","beautiful");
> > doc.add(Field.Text("Features", "black");
> > doc.add(Field.Text("Features","white");
> > doc.add(Field.Text("Features", "blue");
> > doc.add(Field.Text("Features","blue");
> >
> > I'd like to know whether the internal representation of this is like
> when
> > we
> > add at once the whole content of the document as a long string?
>
>
> There's no internal difference unless you implement an Analyzer that
> returns a value other than 1 from getPositionIncrementGap(). Why would
> you do this you ask? Occasionally, it is useful to index data in the
> same field but NOT allow proximity queries to span separate
> additions. Imagine indexing a book and, for some reason, you
> didn't want span queries to cross, say, chapters. You could
> do something like
> doc.add("page", <contents of page 1>);
> doc.add("page", <contents of page 2>);
>
>
>
> then in your Analyzer, have something in getPositionIncrementGap
> like
> if (page is beginning of chapter)  {
>    return 1000;
> } else {
> return 1;
> }
>
> Now, no Span query with a slop of less than 1,000 would
> match from the last page in one chapter to the first page of another.
>
> FWIW
> Erick
>
> I'd like
> > also to count the number of "blue" occurence from the document. How to
> do
> > this?
>
>
> See the other reply <G>.
>
> Thank you very much for your suggestion in advance.
> >
> > Regards,
> >
> > Sengly
> >
>

------=_Part_19725_33160682.1175699263485--

From java-user-return-27381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 15:09:16 2007
Return-Path: <java-user-return-27381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6660 invoked from network); 4 Apr 2007 15:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 15:09:15 -0000
Received: (qmail 34488 invoked by uid 500); 4 Apr 2007 15:09:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34442 invoked by uid 500); 4 Apr 2007 15:09:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34427 invoked by uid 99); 4 Apr 2007 15:09:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 08:09:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sengly.heng@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 08:09:06 -0700
Received: by ug-out-1314.google.com with SMTP id k40so740899ugc
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 08:08:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XimJPSYpqHx2vqMCEc9IWRUKdbLUcHYPrUhMarfHMK6aMqROb+C7ti59aXnPlIeL2vN/lM7JmMARmsxR7oYdfLnpGZmpmHcMKtwL9jnD1X8wCw/hiaI4LI5yoJEqW2jSfQWnvjolyxo4V4iBOZhbgCNODR5/tRrt23xZjBx3wDA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pKJsTgQMGkS3S9z5uG7/I1hSejVvPZ+GEd9JzwSnCZjNclC5agKI+9zUkJr1Y6AQhYmSht9v6Pqfs7yGqifKwfrJdOSpSsyZsVn/O+ZFAfureLNZ45BToJQ+i3IvJWiVb4Izn4NcfD3km6tGzjylJqj/YIXqOvxZlGyUQNPhD2c=
Received: by 10.82.188.15 with SMTP id l15mr901916buf.1175699323781;
        Wed, 04 Apr 2007 08:08:43 -0700 (PDT)
Received: by 10.82.147.9 with HTTP; Wed, 4 Apr 2007 08:08:43 -0700 (PDT)
Message-ID: <17db983d0704040808m4981b8d6gc66e759111c2f778@mail.gmail.com>
Date: Thu, 5 Apr 2007 00:08:43 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing multiple instances of the same field and counting their frequency afterward
In-Reply-To: <1324e4e20704040616g241e3d88j1a6cd26c82a1d2db@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19737_5011631.1175699323744"
References: <17db983d0704040410g48534a0cva3610facb2596e6e@mail.gmail.com>
	 <1324e4e20704040616g241e3d88j1a6cd26c82a1d2db@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19737_5011631.1175699323744
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you.

But i found that the result is always 1. Even i input the token that I dont
even have in the doc. What happened?

Best,

Sengly


On 4/4/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
>
> hello,
>
> you can try this code :
>
> IndexReader ISer= IndexReader.open("C:/Testindex");
>            TermEnum te=ISer.terms(new Term("Features","blue"));
>            Term te1= te.term();
>            System.out.println("Frequency of blue "+ISer.docFreq(te1));
>
> regards,
> -LM
>
> On 4/4/07, Sengly Heng <sengly.heng@gmail.com> wrote:
> >
> > Dear all,
> >
> > My problem is a little bit strange. Instead of parsing the content of
> the
> > document to the indexer. I am adding one by one. Here is a piece of my
> > code
> > :
> >
> > Document doc = new Document();
> > doc.add(Field.Text("Features", "blue");
> > doc.add(Field.Text("Features","beautiful");
> > doc.add(Field.Text("Features", "black");
> > doc.add(Field.Text("Features","white");
> > doc.add(Field.Text("Features", "blue");
> > doc.add(Field.Text("Features","blue");
> >
> > I'd like to know whether the internal representation of this is like
> when
> > we
> > add at once the whole content of the document as a long string? I'd like
> > also to count the number of "blue" occurence from the document. How to
> do
> > this?
> >
> > Thank you very much for your suggestion in advance.
> >
> > Regards,
> >
> > Sengly
> >
>

------=_Part_19737_5011631.1175699323744--

From java-user-return-27382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 15:19:30 2007
Return-Path: <java-user-return-27382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10975 invoked from network); 4 Apr 2007 15:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 15:19:29 -0000
Received: (qmail 74717 invoked by uid 500); 4 Apr 2007 15:19:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74675 invoked by uid 500); 4 Apr 2007 15:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74660 invoked by uid 99); 4 Apr 2007 15:19:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 08:19:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2007 08:19:19 -0700
Received: (qmail 84171 invoked by uid 60001); 4 Apr 2007 15:18:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=KY7wVQzf7HtAPHJQYL9XMjWf+HqTIAoiU8y+6HxrSdwJ/Jkg8b6KRoyEQIiv09KznUF68NIeMiStbK+p4tyNsbQ/JXW/FcGOMsfWJm5+z2WF4vnGPM+L2ZBm+oqhWTChb8Xfr5/8pqXlMavFpfgdDU7NO2C6jtukvzBP2d0Pdic=  ;
Message-ID: <20070404151858.84169.qmail@web50312.mail.re2.yahoo.com>
X-YMail-OSG: arIkvDEVM1nhHSogzjS3jie53vQy4_skKoJbXrM1EgX1gRuicehZdA_TTv6FkqkA43z4Z1By6zkGS.E7.9RF8uEFYA--
Received: from [63.192.54.62] by web50312.mail.re2.yahoo.com via HTTP; Wed, 04 Apr 2007 08:18:58 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Wed, 4 Apr 2007 08:18:58 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Error Tolerant Query Parser
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hm, error tolerant query parser?  How do you want to handle queries with invalid syntax?

Here is one way:
try {
  QueryParser qp = new QueryParser(.....);
  Query q = qp.parse(....);
} catch (Throwable t) {
  // tolerate any exception
}

;)

Bad but quite tolerant.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, April 4, 2007 2:05:02 AM
Subject: Error Tolerant Query Parser


Sorry for dual posting. I've just inadvertently submit form before writing
the body :)

Is there any error tolerant query parser ever written for Lucene? What is
the way websites use for advanced searching with Lucene?
-- 
View this message in context: http://www.nabble.com/Error-Tolerant-tf3524057.html#a9831496
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 17:27:00 2007
Return-Path: <java-user-return-27383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84228 invoked from network); 4 Apr 2007 17:26:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 17:26:59 -0000
Received: (qmail 4100 invoked by uid 500); 4 Apr 2007 17:26:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3925 invoked by uid 500); 4 Apr 2007 17:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3910 invoked by uid 99); 4 Apr 2007 17:26:57 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.37.71] (HELO web53510.mail.re2.yahoo.com) (206.190.37.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2007 10:26:56 -0700
Received: (qmail 29546 invoked by uid 60001); 4 Apr 2007 17:25:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=drfKFJwphlqeQWL3tP2KI29eAX/yr/ecJAitfAcM1geQat2N66uixZBh0PyAyBCIWhJTEM8cjg2WWMayneY2oGU7HpcpLBKbARRQ2pHiT8TqpQpt72oORU1fnjtJ8MupKICt7G4wY2aMQmtU2kOgo2043RCP4a8yVw/SKC2qznU=  ;
Message-ID: <20070404172528.29544.qmail@web53510.mail.re2.yahoo.com>
X-YMail-OSG: p6yCusQVM1nfZ9wDtU0GPTwQKzSVt3tiK5GwJFRNE3MvqZd95sojaJgLjsSPnz1FjmGAg4Sbaxffms_xqmqdT1PwMELKdmOUW9ox
Received: from [66.7.242.34] by web53510.mail.re2.yahoo.com via HTTP; Wed, 04 Apr 2007 10:25:28 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Wed, 4 Apr 2007 10:25:27 -0700 (PDT)
From: Craig W Conway <craigwconway@yahoo.com>
Subject: How many Searches is a Searcher Worth?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-899381255-1175707527=:27023"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-899381255-1175707527=:27023
Content-Type: text/plain; charset=ascii

I am using an RMI architecture for calling a remote service which uses an IndexSearcher in its own JVM. I am starting the service with the following provisions for memory allocation and garbage collection: java -server -Xmx1024m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC

After about 1000 search calls I start to run out of memory, and I have to close and re-open the IndexSearcher, loosing any cached data and filters... Is there any reason why I shouldn't be able to use my IndexSearcher forever, until I want to close it?

Thanks!

Craig




 
____________________________________________________________________________________
Now that's room service!  Choose from over 150,000 hotels
in 45,000 destinations on Yahoo! Travel to find your fit.
http://farechase.yahoo.com/promo-generic-14795097
--0-899381255-1175707527=:27023--

From java-user-return-27384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 17:40:23 2007
Return-Path: <java-user-return-27384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88754 invoked from network); 4 Apr 2007 17:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 17:40:22 -0000
Received: (qmail 32171 invoked by uid 500); 4 Apr 2007 17:40:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32130 invoked by uid 500); 4 Apr 2007 17:40:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32099 invoked by uid 99); 4 Apr 2007 17:40:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 10:40:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2007 10:40:12 -0700
Received: (qmail 70890 invoked by uid 60001); 4 Apr 2007 17:39:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=H6gcgcCqsS2oZaIREeLIMiIBRmxjhhx8S3u+lyn0CX+a5gAjZggnkpyyNZ3kfa8nbn9vW09JWOWBkOdMUIp7nlK+rK3CAseqHBPT/CIBAUyOumqo9u+qZxnzfUza2wEMgCBNolxlBMA/Kl14aLH3gL3abFkj2wiOkN4kMx60NhQ=;
X-YMail-OSG: EjG_3B4VM1mNuXSryVcGx1QxzmNUB.sX38pBKnhbsBn.wjIe8X6on2ktwAbzpiel7g--
Received: from [66.92.187.33] by web50304.mail.re2.yahoo.com via HTTP; Wed, 04 Apr 2007 10:39:50 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Wed, 4 Apr 2007 10:39:50 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How many Searches is a Searcher Worth?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <924828.70820.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

No reason that I can think of.  What makes you think the problem is with the IndexSearcher?  Maybe it's something else in your code, for instance.
Make sure you have the same version of Java on both ends of the call.  Also, Java 6 made our RMI calls a lot more stable than even 1.5.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Craig W Conway <craigwconway@yahoo.com>
To: java-user@lucene.apache.org
Sent: Wednesday, April 4, 2007 1:25:27 PM
Subject: How many Searches is a Searcher Worth?

I am using an RMI architecture for calling a remote service which uses an IndexSearcher in its own JVM. I am starting the service with the following provisions for memory allocation and garbage collection: java -server -Xmx1024m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC

After about 1000 search calls I start to run out of memory, and I have to close and re-open the IndexSearcher, loosing any cached data and filters... Is there any reason why I shouldn't be able to use my IndexSearcher forever, until I want to close it?

Thanks!

Craig




 
____________________________________________________________________________________
Now that's room service!  Choose from over 150,000 hotels
in 45,000 destinations on Yahoo! Travel to find your fit.
http://farechase.yahoo.com/promo-generic-14795097



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 19:26:11 2007
Return-Path: <java-user-return-27385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37123 invoked from network); 4 Apr 2007 19:26:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 19:26:09 -0000
Received: (qmail 61134 invoked by uid 500); 4 Apr 2007 19:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61103 invoked by uid 500); 4 Apr 2007 19:26:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61083 invoked by uid 99); 4 Apr 2007 19:26:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 12:26:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.37] (HELO smtp-vbr17.xs4all.nl) (194.109.24.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 12:26:05 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr17.xs4all.nl (8.13.8/8.13.8) with ESMTP id l34JPiMq009727
	for <java-user@lucene.apache.org>; Wed, 4 Apr 2007 21:25:44 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Design Problem: Searching large set of protected documents
Date: Wed, 4 Apr 2007 21:25:43 +0200
User-Agent: KMail/1.8.2
References: <4612648D.6070102@curtin.com> <200704032216.57546.paul.elschot@xs4all.nl> <359a92830704031632i1bc75eafs98993795e98f5f4f@mail.gmail.com>
In-Reply-To: <359a92830704031632i1bc75eafs98993795e98f5f4f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704042125.43609.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 04 April 2007 01:32, Erick Erickson wrote:
> I thought you could simply add a ConstantScoreQuery (whose
> constructor takes a Filter) to a BooleanQuery. It seems that doing
> this at the very top level with a MUST would do the trick.....

I have not tried this myself, but indeed this must (should) work.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 20:42:45 2007
Return-Path: <java-user-return-27386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63777 invoked from network); 4 Apr 2007 20:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 20:42:44 -0000
Received: (qmail 31683 invoked by uid 500); 4 Apr 2007 20:42:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31650 invoked by uid 500); 4 Apr 2007 20:42:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31637 invoked by uid 99); 4 Apr 2007 20:42:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 13:42:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 13:42:35 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1HZCJ3-000Mt2-7F
	for java-user@lucene.apache.org; Wed, 04 Apr 2007 21:42:13 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l34KgCwu087979
	for java-user@lucene.apache.org; Wed, 4 Apr 2007 21:42:12 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Wed, 4 Apr 2007 21:42:12 +0100
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Better parsing of Queries
Message-ID: <20070404204212.GP27177@thegestalt.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

I'm looking for some advice on dealing with malformed queries.

If a user searches for "yow!" then I get an exception from the query 
parser. I can get round this by using QueryParser.escape(query) first 
but then that prevents them from searching using other bits of the the 
query syntax such as "author:alice".

Is there an easy way to get a query such as 

    "yow! author:alice"

and get back

    "yow\! author:alice"

i.e only escape the special characters when they don't make sense?

Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 21:56:23 2007
Return-Path: <java-user-return-27387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8558 invoked from network); 4 Apr 2007 21:56:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 21:56:22 -0000
Received: (qmail 79009 invoked by uid 500); 4 Apr 2007 21:56:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78979 invoked by uid 500); 4 Apr 2007 21:56:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78954 invoked by uid 99); 4 Apr 2007 21:56:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 14:56:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 14:56:01 -0700
Received: by an-out-0708.google.com with SMTP id c3so392144ana
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 14:55:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=McfW5u0DpMWWpTBEEuaQ3sFrmyuXAvWtViwvVRWszozYOzFcYSpOCO5xm4bMbX2ObpX/S2auPvCVqvTq1uidF+GrkWfzvkj82zX38713ccNHDASkW5LyW9hHLYvC3LtHKIf2gRc0QUFcqKR2vK2aHj55cjFfoo/0d1KAv0i/xYo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Fr+iy9vqUEZxcOUwc5BegugpptNUKp6xsuoArc+MfEB/JAvehMv/jF5GyIrC6WaYiFHg7viZ4RyD3/0p5Al/5F6yAC6T25QUpgYERkBWsl4u9el1M0PnXELqIsgU1fAGxvBMjv6lTcygQhjZrjRQjf0L7aPwm6ejTR3CnCeIO+Y=
Received: by 10.114.14.1 with SMTP id 1mr447911wan.1175723740112;
        Wed, 04 Apr 2007 14:55:40 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Wed, 4 Apr 2007 14:55:40 -0700 (PDT)
Message-ID: <359a92830704041455v6739a312v885c1518cab0c4af@mail.gmail.com>
Date: Wed, 4 Apr 2007 17:55:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Better parsing of Queries
In-Reply-To: <20070404204212.GP27177@thegestalt.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40640_5520453.1175723740054"
References: <20070404204212.GP27177@thegestalt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40640_5520453.1175723740054
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

About all you can do is roll your own. I suspect a decent regular
expression would work, or you could let Lucene escape the
query and then re-replace all \: with :

Erick

On 4/4/07, Simon Wistow <simon@thegestalt.org> wrote:
>
> I'm looking for some advice on dealing with malformed queries.
>
> If a user searches for "yow!" then I get an exception from the query
> parser. I can get round this by using QueryParser.escape(query) first
> but then that prevents them from searching using other bits of the the
> query syntax such as "author:alice".
>
> Is there an easy way to get a query such as
>
>     "yow! author:alice"
>
> and get back
>
>     "yow\! author:alice"
>
> i.e only escape the special characters when they don't make sense?
>
> Simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40640_5520453.1175723740054--

From java-user-return-27388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 04 22:25:18 2007
Return-Path: <java-user-return-27388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17910 invoked from network); 4 Apr 2007 22:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Apr 2007 22:25:16 -0000
Received: (qmail 36555 invoked by uid 500); 4 Apr 2007 22:25:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36524 invoked by uid 500); 4 Apr 2007 22:25:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36513 invoked by uid 99); 4 Apr 2007 22:25:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 15:25:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ryantxu@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 15:25:09 -0700
Received: by an-out-0708.google.com with SMTP id c3so400025ana
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 15:24:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=NhVr6EYMbFB+2mPrvDek7PLlg46itp/EEjmCx1Z6S7Xe8SjiPx8xjuml1LqfdhAz5YZysVk7WiwV2e73riUuHYeBwhLp7+4/o/AXIQGgD2W5nAjzq9w8KbBruD0eqy9W5vnPe09y7iBmUkYVA8RDa6M2tazFK8yG5TgS/rketvk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=WBIVaOIAwIxK6ht/W7SL9LGDdPZb6XF+wcsbO5i3fzt84UFCtKVNQJHir6Jz901lMLPTZhagt13EXHsd/udoxPWgv178427g6zzafqH307XlK/uEYyCUp/u6K8osM2ZWeKEKvd/CUhxjrIW2B7BgrD57f8UTrM8eGTUctD8KJlg=
Received: by 10.100.8.18 with SMTP id 18mr841990anh.1175725487245;
        Wed, 04 Apr 2007 15:24:47 -0700 (PDT)
Received: by 10.100.96.7 with HTTP; Wed, 4 Apr 2007 15:24:47 -0700 (PDT)
Message-ID: <176776ee0704041524s289f627aqaa78cb59e992e01b@mail.gmail.com>
Date: Wed, 4 Apr 2007 15:24:47 -0700
From: "Ryan McKinley" <ryantxu@gmail.com>
To: java-user@lucene.apache.org
Subject: distinct term values?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Is there an efficient way to know how many distinct terms there are
for a given field name?

I know I can walk through a TermEnum and put them into a hash, but it
would be useful to know beforehand if you are going to get 4 distinct
values or 40,000

I don't need to know what the terms are, just how many.

name:A
name:A
name:B

I want a function like:
  getDistinctTermValues( "name" ) -> 2

Thanks
ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 00:50:32 2007
Return-Path: <java-user-return-27389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60195 invoked from network); 5 Apr 2007 00:50:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 00:50:31 -0000
Received: (qmail 39369 invoked by uid 500); 5 Apr 2007 00:50:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38340 invoked by uid 500); 5 Apr 2007 00:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38326 invoked by uid 99); 5 Apr 2007 00:50:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 17:50:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 17:50:23 -0700
Received: by mu-out-0910.google.com with SMTP id i10so615864mue
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 17:50:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=arKvlvMqUD0cT9ZwTBcjNOQllJe3+elE6zMk5j/6a91N9Nx7oVds1SXJs6p4u0Mitcb8kVmsJAUoLYFIPd4kmZcxi0EoW5Efjag+cwiZtIXqiFZYkSwgpYvNjzWAQp5GgGJlFMOWFmJLQ2vwf47uSTC8mDrPVkTro0CRQMT9im0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=No83KrM2J7ncoph9E9gBNlv5eq65KP7tDPBD3Vsbe9RIVhiPAEraV0LWNQZqIiobHPzYYrsRKwb8QG2cxHniT61JbBfBK4WIJ4CIeSSX51Fl2G875wavWzbobn4/4V57EAUUJBa0cp5U03noK0F6wfSoNE9nYtXziMUMtGRMhd8=
Received: by 10.82.108.9 with SMTP id g9mr1854862buc.1175734201143;
        Wed, 04 Apr 2007 17:50:01 -0700 (PDT)
Received: by 10.82.126.8 with HTTP; Wed, 4 Apr 2007 17:50:01 -0700 (PDT)
Message-ID: <c68e39170704041750h7b2178ffk5b8394f62eaf379c@mail.gmail.com>
Date: Wed, 4 Apr 2007 20:50:01 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: distinct term values?
In-Reply-To: <176776ee0704041524s289f627aqaa78cb59e992e01b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <176776ee0704041524s289f627aqaa78cb59e992e01b@mail.gmail.com>
X-Google-Sender-Auth: e50256a4e42098e0
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/4/07, Ryan McKinley <ryantxu@gmail.com> wrote:
> Is there an efficient way to know how many distinct terms there are
> for a given field name?
>
> I know I can walk through a TermEnum and put them into a hash

No hash needed... just walk through the TermEnum and count.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 01:01:52 2007
Return-Path: <java-user-return-27390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63975 invoked from network); 5 Apr 2007 01:01:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 01:01:52 -0000
Received: (qmail 52636 invoked by uid 500); 5 Apr 2007 01:01:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52611 invoked by uid 500); 5 Apr 2007 01:01:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52600 invoked by uid 99); 5 Apr 2007 01:01:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 18:01:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 18:01:43 -0700
Received: by nz-out-0506.google.com with SMTP id i1so199967nzh
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 18:01:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kc2zQcRqtvoEyJDQb2jWYM9FDyjN7lPb8J2RHj4hTYNuXpo5cbnbpLLsWjuJ8lKLQbcgC/h6h6ymwwynue1tbLCiM+e1uLSh+MMUzQwRZKBVT0iiEsD3q8Ei78Vq7dNXffMDpfsaPvMrounUBtIX5ZZLrDFp6YzIRLjw4foA5ps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xw1Nd5/2TrgW9rvujd1c+2G7zlDoz4E2OfQ/zm/i8/nqzIf9oU8JO7dN/a86S4ghfLGbUNO3KZvRT5tTVHa3Agj941iXTZssor77KshesulQrvkRIHHr0GufX7onobTLixjuXp2aK0/BUXAMic4022f4tvEgYFOwPg3hYpmmlps=
Received: by 10.114.57.1 with SMTP id f1mr299703waa.1175734882315;
        Wed, 04 Apr 2007 18:01:22 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Wed, 4 Apr 2007 18:01:22 -0700 (PDT)
Message-ID: <359a92830704041801u5956c912y31427ee9b336b020@mail.gmail.com>
Date: Wed, 4 Apr 2007 21:01:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: distinct term values?
In-Reply-To: <176776ee0704041524s289f627aqaa78cb59e992e01b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43212_18108418.1175734882272"
References: <176776ee0704041524s289f627aqaa78cb59e992e01b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43212_18108418.1175734882272
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry if this is a double post, but my last attempt failed......


Not that I know of, but I think you'll be surprised how fast TermEnum
will walk the list of terms.

I think you misunderstand TermEnum. It will NOT enumerate a term
twice, so there's no need for a hash, just a simple increment of a
counter will do.

And if you're really concerned about efficiency, you could always create
this list for all fields at warm-up or even index time and compute it once.
Assuming that you don't have many thousands of fields......

I'd also mention that there's no reason that every document has the
same fields. So, at index creation time you could easily create a unique
document with fields that were orthogonal to all other documents, and
populate it with the summary information for term counts. Imagine the
following....

Most all your document have field
a, b, c, d, e, f.


Your special meta-data document has field z which contains
an XML-formatted field that looks something like...
<meta>
  <countfielda>32</countfielda>
  <countfieldb>901</countfieldb>
  <countfieldc>14052</countfieldc>
     .
     .
   <countfieldf>403</countfieldf>
</meta>

and a field y that only contains "superspecialmetadocumentdata".

Now, at startup, you perform a simple search on
y:"superspecialmetadocumentdata", get the single document,
read the "z" field and store away all the counts for later lookup.

Now, your lookup time is very, very short.

But I wouldn't do any of this until I was sure that the performance
of the simple approach of walking the TermEnum was too
expensive. Premature optimization and all that......


If this is clear as mud, I'll add details, but I'm 1/2 the way through a
bottle of Merlot <G>....

Best
Erick


On 4/4/07, Ryan McKinley <ryantxu@gmail.com> wrote:
>
> Is there an efficient way to know how many distinct terms there are
> for a given field name?
>
> I know I can walk through a TermEnum and put them into a hash, but it
> would be useful to know beforehand if you are going to get 4 distinct
> values or 40,000
>
> I don't need to know what the terms are, just how many.
>
> name:A
> name:A
> name:B
>
> I want a function like:
>   getDistinctTermValues( "name" ) -> 2
>
> Thanks
> ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43212_18108418.1175734882272--

From java-user-return-27391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 01:30:44 2007
Return-Path: <java-user-return-27391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76042 invoked from network); 5 Apr 2007 01:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 01:30:43 -0000
Received: (qmail 77385 invoked by uid 500); 5 Apr 2007 01:30:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76789 invoked by uid 500); 5 Apr 2007 01:30:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76778 invoked by uid 99); 5 Apr 2007 01:30:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 18:30:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2007 18:30:36 -0700
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 332
          for <java-user@lucene.apache.org>;
          Wed, 4 Apr 2007 18:26:53 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <32dca9ed0704031059p520ff3f3le360b73f493ca4f9@mail.gmail.com>
References: <46129271.4060205@sirma.bg> <32dca9ed0704031059p520ff3f3le360b73f493ca4f9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <090087FD-A8FA-4635-B25E-991D0024F616@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: Peter W. <peter@marketingbrokers.com>
Subject: Re: Range search in numeric fields
Date: Wed, 4 Apr 2007 18:26:52 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Andy,

MemoryCachedRangeFilter looks nice, can't wait for it to be
included with other goodies in the next 2.x point release!

Numeric range search questions come up often for Lucene,
best practices probably include working with BitSets directly
(which I have been unable to grok), using queries like RangeQuery
and ConstantScoreRangeQuery or using a Filter.

The first approach Ivan mentioned(that requires re-indexing) might be  
the best
short term solution because you can use a filter to perform something  
like:

FilteredQuery fq=new FilteredQuery(query,cstm_range("size",30L,1300L));

    private static Filter cstm_range(String sfld,long lmin,long lmax)
       {
       Filter lessthn_f=RangeFilter.Less(sfld,NumberTools.longToString 
(lmax));
       Filter morethn_f=RangeFilter.More(sfld,NumberTools.longToString 
(lmin));
       Filter[] fa=new Filter[]{lessthn_f,morethn_f};

       Filter rf=new ChainedFilter(fa,ChainedFilter.AND);
       return rf;
       }

It's more expensive at index time, has a bigger storage requirement and
is slower than in-memory but should give the desired functionality.

Regards,

Peter W.



On Apr 3, 2007, at 10:59 AM, Andy Liu wrote:

> You can try using MemoryCachedRangeFilter.
>
> https://issues.apache.org/jira/browse/LUCENE-855
>
> It stores field values in memory as longs so your values don't have  
> to be
> lexigraphically comparable.  Also, MemoryCachedRangeFilter can be  
> orders of
> magnitude faster than standard RangeFilter, depending on your data.
>
> Andy
>
> On 4/3/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>>
>> Hi All,
>> I have the following problem:
>> I have to implement range search for fields that contain numbers. For
>> example the field size that contains file size. The problem is  
>> that the
>> numbers are not kept in strings with strikt length. There are field
>> values like this: "32", "421", "1201". So when makeing search like  
>> this:
>> +size:[10 TO 50], as the order for string is lexicorafical the result
>> contains the documents with size 32 and 1201. I can see the following
>> possible aproaches:
>> 1. Changing indexing process so that all data entered in those  
>> fields is
>> with fixed length. Example 0000032, 0000421, 0001201.
>> Disadvantages here are:
>>     - Have to be reindexed all existng indexes;
>>     - The index will grow a bit.
>>
>> 2. Generating query without ranges but including all numbers  
>> between the
>> bounds - +size=10 +size=11 +size=12........ +size=49 + size=50. For
>> narrow ranges it makes sense but for large ones... :)
>>
>> 3. Generating query with intervals (inclusive and exclusive) but the
>> number of this intervals will be the same (or one more) than the
>> conditions in point 2. +size:[10 TO 50] -size:[10 TO 11999999999] -
>> size:[11 TO 129999999999] ... etc.
>>
>> So if someone can help with some new oportunity please mail.
>>
>> Thanks in advance.
>> Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 01:36:07 2007
Return-Path: <java-user-return-27392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77197 invoked from network); 5 Apr 2007 01:36:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 01:36:06 -0000
Received: (qmail 84176 invoked by uid 500); 5 Apr 2007 01:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84145 invoked by uid 500); 5 Apr 2007 01:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84133 invoked by uid 99); 5 Apr 2007 01:36:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 18:36:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2007 18:35:58 -0700
Received: (qmail 49207 invoked by uid 60001); 5 Apr 2007 01:35:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ta/cuP9MibSPKDOfjMgtwHx7SNt3Cu5awcdXY/KxthtRkfAgKjKTr9RYxYdH6hHgoxrjCV32NgdQdM6/s5RTBcswY4RubiXP/hq6AVFTBJmWVQttlKiBYrbzNTGLbSmtSI/Wwuhu6R1EoiHMtJ+e9k0F9v5inOriXG8rcuxLbXE=;
X-YMail-OSG: r8FXaqEVM1nJJg3H0r1Tm3Q.DGFKCdrrrvFOlK_6a_SkXuN1
Received: from [66.92.187.34] by web50307.mail.re2.yahoo.com via HTTP; Wed, 04 Apr 2007 18:35:37 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Wed, 4 Apr 2007 18:35:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Benchmarking LUCENE-584 with contrib/benchmark
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <74789.48297.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Doron,

Yes, this was great help, thanks!  I've got my:
1. MatchTask (just like ReadTask, but with searcher.match(Query, new MatchCollector() ....))
2. SearchMatchTask (just like SearchTask, but extends MatchTask), so I was able to use "SearchMatch" in the alg file where "Search" was before.

I need to compare search with HitCollector to matching with MatchCollector, and leave both of their their collect(...) methods empty in order to see how much time, if any, is shaved off with Paul's patch that simply skips scoring.  Thus, I've modified ReadTask locally to use the search method with HitCollector instead of the one that returns Hits.

I'll put both the new benchmark Tasks and my results in LUCENE-584 once I have something (tomorrow, most likely).

Otis


----- Original Message ----
From: Doron Cohen <DORONC@il.ibm.com>
To: java-user@lucene.apache.org
Sent: Monday, April 2, 2007 8:20:58 PM
Subject: Re: Benchmarking LUCENE-584 with contrib/benchmark

Hi Otis, you could use the byTask package - add your-type-of-search-task.
Suffix the new task class name by "Task" - e.g. NewNameTask - and then you
can use the 'command' "NewName" in an alg file.

I am not sure you can extend/reuse the existing ReadTask for this, because
its implementation of search/retrieve/traverse assumes using certain
Lucene's API's.

Does this make sense?

Regards,
Doron

Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote on 02/04/2007 15:35:57:

> Hi,
>
> I'm looking at benchmarking Paul's http://issues.apache.
> org/jira/browse/LUCENE-584 code.
> I'd like to compare either:
>   HitCollector.collect(doc, score) vs. MatchCollector.collect(doc)
>   or
>   IndexSearcher.search(Weight, Filter, HitCollector) vs.
> IndexSearcher.match(Query, MatchCollector)
>
> ...and see what the performance difference is when one skips
> scoring.  I can cook up my own benchmark, but I'd rather try using
> contrib/benchmark, if it can be used for this purpose.  Can it?  I
> browsed around contrib/benchmark looking for a place where I could
> plug in calls to IndexSearcher.match(Query, MatchCollector), and
> found that the only search calls are in the  StandardBenchmarker
> class.  From what I can tell, I can't really plug in any other calls
> in there, can I?  It looks like I simply need to write my own
> MatcherBenchmarker and implement my own benchmark(File,
> BenchmarkOptions) method.  Once that's in place, I'd have to run one
> benchmark with the StandardBenchmarker and the other one with my
> MatcherBenchmarker and manually compare the numbers.
>
> Is that the right approach, or am I missing a shortcut?
>
> Thanks,
> Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 02:49:35 2007
Return-Path: <java-user-return-27393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90793 invoked from network); 5 Apr 2007 02:49:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 02:49:34 -0000
Received: (qmail 67900 invoked by uid 500); 5 Apr 2007 02:49:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66914 invoked by uid 500); 5 Apr 2007 02:49:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66903 invoked by uid 99); 5 Apr 2007 02:49:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 19:49:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ryantxu@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 19:49:25 -0700
Received: by an-out-0708.google.com with SMTP id c3so466045ana
        for <java-user@lucene.apache.org>; Wed, 04 Apr 2007 19:49:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=l9RL0BtK97YoA8Z+mZA+B2RMkE8B563b8shUDDblBdMV8wN3BgiUPD8dwMzh7hkzgJKd0mjKZEQk8OvcmEDSY1fOuYRPNRGeSwCjhwPxAXp1X+UkvF+1Li8p6UBvzmc2RZqZkll+k97zU9iLqHEAss9S1DFO/kCPKG64qZhypcs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LQbz7wfxb35Xl7Az9SXeUI7BRsGA+9koh05G3CV4TzKnbbMLXXNKPNTKj6gAWow3NIrUtBqr9q0ZVOiaW0Cqu3bONIGIBvIvA/mRkgywQeOGaVaV/6UQHkCgihF0pNDcdhMUoJiEnb7MQJjyAGshy1mJd7m3QBt3FnsBxXpJ/no=
Received: by 10.100.191.5 with SMTP id o5mr1001743anf.1175741345149;
        Wed, 04 Apr 2007 19:49:05 -0700 (PDT)
Received: by 10.100.96.7 with HTTP; Wed, 4 Apr 2007 19:49:04 -0700 (PDT)
Message-ID: <176776ee0704041949t60b5de61nde380354bbf38b3d@mail.gmail.com>
Date: Wed, 4 Apr 2007 19:49:04 -0700
From: "Ryan McKinley" <ryantxu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: distinct term values?
In-Reply-To: <359a92830704041801u5956c912y31427ee9b336b020@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <176776ee0704041524s289f627aqaa78cb59e992e01b@mail.gmail.com>
	 <359a92830704041801u5956c912y31427ee9b336b020@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

TermEnum works like a charm, no need to optimize (yet).

Enjoy the Merlot!


On 4/4/07, Erick Erickson <erickerickson@gmail.com> wrote:
> Sorry if this is a double post, but my last attempt failed......
>
>
> Not that I know of, but I think you'll be surprised how fast TermEnum
> will walk the list of terms.
>
> I think you misunderstand TermEnum. It will NOT enumerate a term
> twice, so there's no need for a hash, just a simple increment of a
> counter will do.
>
> And if you're really concerned about efficiency, you could always create
> this list for all fields at warm-up or even index time and compute it once.
> Assuming that you don't have many thousands of fields......
>
> I'd also mention that there's no reason that every document has the
> same fields. So, at index creation time you could easily create a unique
> document with fields that were orthogonal to all other documents, and
> populate it with the summary information for term counts. Imagine the
> following....
>
> Most all your document have field
> a, b, c, d, e, f.
>
>
> Your special meta-data document has field z which contains
> an XML-formatted field that looks something like...
> <meta>
>   <countfielda>32</countfielda>
>   <countfieldb>901</countfieldb>
>   <countfieldc>14052</countfieldc>
>      .
>      .
>    <countfieldf>403</countfieldf>
> </meta>
>
> and a field y that only contains "superspecialmetadocumentdata".
>
> Now, at startup, you perform a simple search on
> y:"superspecialmetadocumentdata", get the single document,
> read the "z" field and store away all the counts for later lookup.
>
> Now, your lookup time is very, very short.
>
> But I wouldn't do any of this until I was sure that the performance
> of the simple approach of walking the TermEnum was too
> expensive. Premature optimization and all that......
>
>
> If this is clear as mud, I'll add details, but I'm 1/2 the way through a
> bottle of Merlot <G>....
>
> Best
> Erick
>
>
> On 4/4/07, Ryan McKinley <ryantxu@gmail.com> wrote:
> >
> > Is there an efficient way to know how many distinct terms there are
> > for a given field name?
> >
> > I know I can walk through a TermEnum and put them into a hash, but it
> > would be useful to know beforehand if you are going to get 4 distinct
> > values or 40,000
> >
> > I don't need to know what the terms are, just how many.
> >
> > name:A
> > name:A
> > name:B
> >
> > I want a function like:
> >   getDistinctTermValues( "name" ) -> 2
> >
> > Thanks
> > ryan
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 06:19:16 2007
Return-Path: <java-user-return-27394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41749 invoked from network); 5 Apr 2007 06:19:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 06:19:14 -0000
Received: (qmail 79525 invoked by uid 500); 5 Apr 2007 06:19:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79325 invoked by uid 500); 5 Apr 2007 06:19:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79314 invoked by uid 99); 5 Apr 2007 06:19:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 23:19:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2007 23:19:05 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HZLIz-0003th-CA
	for java-user@lucene.apache.org; Wed, 04 Apr 2007 23:18:45 -0700
Message-ID: <9850636.post@talk.nabble.com>
Date: Wed, 4 Apr 2007 23:18:45 -0700 (PDT)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Error Tolerant Query Parser
In-Reply-To: <20070404151858.84169.qmail@web50312.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
References: <9831495.post@talk.nabble.com> <20070404151858.84169.qmail@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks,
Absolute tolerance :)

It seems that there is no other way.
I found somethinig here:
http://www.nabble.com/Error-tolerant-query-parsing-tf108987.html


Otis Gospodnetic wrote:
> 
> Hm, error tolerant query parser?  How do you want to handle queries with
> invalid syntax?
> 
> Here is one way:
> try {
>   QueryParser qp = new QueryParser(.....);
>   Query q = qp.parse(....);
> } catch (Throwable t) {
>   // tolerate any exception
> }
> 
> ;)
> 
> Bad but quite tolerant.
> 
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> 
> ----- Original Message ----
> From: Mohsen Saboorian <mohsens@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, April 4, 2007 2:05:02 AM
> Subject: Error Tolerant Query Parser
> 
> 
> Sorry for dual posting. I've just inadvertently submit form before writing
> the body :)
> 
> Is there any error tolerant query parser ever written for Lucene? What is
> the way websites use for advanced searching with Lucene?
> -- 
> View this message in context:
> http://www.nabble.com/Error-Tolerant-tf3524057.html#a9831496
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Error-Tolerant-tf3524057.html#a9850636
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 07:14:21 2007
Return-Path: <java-user-return-27395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53603 invoked from network); 5 Apr 2007 07:14:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 07:14:20 -0000
Received: (qmail 45329 invoked by uid 500); 5 Apr 2007 07:14:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45293 invoked by uid 500); 5 Apr 2007 07:14:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45280 invoked by uid 99); 5 Apr 2007 07:14:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 00:14:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 00:14:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 091FB5B770; Thu,  5 Apr 2007 00:13:49 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F133D7F403
	for <java-user@lucene.apache.org>; Thu,  5 Apr 2007 00:13:49 -0700 (PDT)
Date: Thu, 5 Apr 2007 00:13:49 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Re: Better parsing of Queries
In-Reply-To: <20070404204212.GP27177@thegestalt.org>
Message-ID: <Pine.LNX.4.58.0704050012150.12188@hal.rescomp.berkeley.edu>
References: <20070404204212.GP27177@thegestalt.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


deja vu ... didn't someone else just asking about "tolerant" query
parsing, and then followup that they have found this suggestion from past
me...

http://www.nabble.com/Error-tolerant-query-parsing-tf108987.html

...inspecting the ParseException should allow you to do all sorts of
iterative "fixing" of the query string.

: Date: Wed, 4 Apr 2007 21:42:12 +0100
: From: Simon Wistow <simon@thegestalt.org>
: Reply-To: java-user@lucene.apache.org
: To: Lucene <java-user@lucene.apache.org>
: Subject: Better parsing of Queries
:
: I'm looking for some advice on dealing with malformed queries.
:
: If a user searches for "yow!" then I get an exception from the query
: parser. I can get round this by using QueryParser.escape(query) first
: but then that prevents them from searching using other bits of the the
: query syntax such as "author:alice".
:
: Is there an easy way to get a query such as
:
:     "yow! author:alice"
:
: and get back
:
:     "yow\! author:alice"
:
: i.e only escape the special characters when they don't make sense?
:
: Simon
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 10:08:03 2007
Return-Path: <java-user-return-27396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24648 invoked from network); 5 Apr 2007 10:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 10:08:01 -0000
Received: (qmail 532 invoked by uid 500); 5 Apr 2007 10:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 494 invoked by uid 500); 5 Apr 2007 10:08:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 478 invoked by uid 99); 5 Apr 2007 10:08:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 03:08:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 03:07:52 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1010012ugc
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 03:07:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=RTFTAvzRtLphpnzu0cEh+sByvVgAzXC6tLTYi/nnpsf+SymKehBLQsJaRPkI1NVmKtVd8Bk1vybBd5aiBpBHFAlxLzl4jaWhSjgzGFnxvHFjqemh+Jv9WnlTJVvEQBD6CFDiemKyfndcfqKZZSL+OQ7+SkfnBzgm/KESc+RQ1vk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=q81nGkrH1wAlSrsjKDlo6eXFe93oCeWbPKkGdPD6V+3GgOUmirO7Nt23tr/CtFEhXUP8Q6PwX5KkascJnqJhtIipteeKLo/7IbCcce1GBKSrlPlLfcW+QetPTP52Xz0MSMGCPtCJySLnpjW8bpa1BGtz3EPxKl6QYw2LBOMaqJo=
Received: by 10.78.193.19 with SMTP id q19mr275053huf.1175767650488;
        Thu, 05 Apr 2007 03:07:30 -0700 (PDT)
Received: by 10.78.136.8 with HTTP; Thu, 5 Apr 2007 03:07:30 -0700 (PDT)
Message-ID: <34b8543c0704050307p7eb9d5ecj54479b82252c736d@mail.gmail.com>
Date: Thu, 5 Apr 2007 13:37:30 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: I need the internal lucene's document id from Hits
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27885_6697525.1175767650461"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27885_6697525.1175767650461
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I need the id of the document that returned by Hits as a result of a query.

Hits result = searchable.find(myQuery....);

now I need something like result.getId()

is there any way to get it?

Thanks so much

-- 
Regards,
Mohammad Norouzi

------=_Part_27885_6697525.1175767650461--

From java-user-return-27397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 10:13:10 2007
Return-Path: <java-user-return-27397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26065 invoked from network); 5 Apr 2007 10:13:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 10:13:09 -0000
Received: (qmail 6919 invoked by uid 500); 5 Apr 2007 10:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6889 invoked by uid 500); 5 Apr 2007 10:13:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6877 invoked by uid 99); 5 Apr 2007 10:13:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 03:13:07 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 03:12:59 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1010895ugc
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 03:12:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gO/7aazD6sKX1iWv4zl4RgiXSNNy+FxfEw87fIbJPjoCPJPJw7KTzD7Qcw/m4MkboxajwyrliJYXP3WQx0zx8gCzDEeJ8qKOoVMIZrx2EH/JCEo3sQwB3nOQmZ/KmMJJ6xfCgob9SnBSJrghXybKcKnaoZ4Pdt9V0j2IgILuI64=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QYIynL2+rfxKwChKEZfA3PSMtrtncCSzoOSpSEk6maG0UJBboqLrd7LYsmk5y13ttvfYJJufZLX+UdpYQ2H3Y3qvuYFZHVs45DYzL8UYU4+J7bU+fK+OkhXwjNojUh8J/jDN67Pd2lanMmA+IXK9/LAmAhpXo6AuwdWEFVGDIF4=
Received: by 10.78.123.4 with SMTP id v4mr273894huc.1175767958059;
        Thu, 05 Apr 2007 03:12:38 -0700 (PDT)
Received: by 10.78.136.8 with HTTP; Thu, 5 Apr 2007 03:12:38 -0700 (PDT)
Message-ID: <34b8543c0704050312s2207f8a8q8e965823ed36a01f@mail.gmail.com>
Date: Thu, 5 Apr 2007 13:42:38 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I need the internal lucene's document id from Hits
In-Reply-To: <34b8543c0704050307p7eb9d5ecj54479b82252c736d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27941_30765951.1175767958018"
References: <34b8543c0704050307p7eb9d5ecj54479b82252c736d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27941_30765951.1175767958018
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

sorry to correct my answer:
I need something like this result.doc( i ).getId();

this id from the result (the i ) is starting from 1 but I need the actual id
in the index.

On 4/5/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
>
> Hi
> I need the id of the document that returned by Hits as a result of a
> query.
>
> Hits result = searchable.find(myQuery....);
>
> now I need something like result.getId ()
>
> is there any way to get it?
>
> Thanks so much
>
> --
> Regards,
> Mohammad Norouzi
>



-- 
Regards,
Mohammad

------=_Part_27941_30765951.1175767958018--

From java-user-return-27398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 10:39:20 2007
Return-Path: <java-user-return-27398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32607 invoked from network); 5 Apr 2007 10:39:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 10:39:18 -0000
Received: (qmail 49501 invoked by uid 500); 5 Apr 2007 10:39:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49468 invoked by uid 500); 5 Apr 2007 10:39:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49457 invoked by uid 99); 5 Apr 2007 10:39:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 03:39:17 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of philippn@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 03:39:10 -0700
Received: by an-out-0708.google.com with SMTP id c3so574423ana
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 03:38:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VKuZFyn82+4z4RH6H4cOMhJr00wNNjNGS/mBzUYCj4dCWduTXeYlWgQy1qCDl5TO3nTJbxvL51ZWBpTDqf2ZzepFf9V0kojVQ1zULzuDV4VvR+DxAuvkmb4s0M4sWI9obAqXYc5H4g9WxcxzjRG0AEuFA1MVFxx4YJylnEGZlEk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=t1/Bf8XhTyb2uuKp0MsiWVeXGmXp28QI9EegSOCDtzA5CWW4VzjTNd29wTtd0AwyBt4TtACTpPF+IGttdTl9dA980NJ945XwxpggWm0/vS8tHsaJDvU4IWpC8BErMHr2BHcNy0OMC3CdtQwEuF2hO5Q5CkAPRBCgA7v3h2CrXHc=
Received: by 10.100.191.5 with SMTP id o5mr1186981anf.1175769529735;
        Thu, 05 Apr 2007 03:38:49 -0700 (PDT)
Received: by 10.100.12.14 with HTTP; Thu, 5 Apr 2007 03:38:49 -0700 (PDT)
Message-ID: <40b852f10704050338t29d7dbf1he81a7532929f294d@mail.gmail.com>
Date: Thu, 5 Apr 2007 12:38:49 +0200
From: "Philipp Nanz" <philippn@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I need the internal lucene's document id from Hits
In-Reply-To: <34b8543c0704050312s2207f8a8q8e965823ed36a01f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <34b8543c0704050307p7eb9d5ecj54479b82252c736d@mail.gmail.com>
	 <34b8543c0704050312s2207f8a8q8e965823ed36a01f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

That *is* the actual id in the index. There is no other.
You should be careful using it outside of Lucene though, because
Lucene may rearrange the document ids during optimization for example.

If you need an application id, add it as an additional stored field to
each document and retrieve that.

Hope this helps
Philipp

2007/4/5, Mohammad Norouzi <mnrz57@gmail.com>:
> sorry to correct my answer:
> I need something like this result.doc( i ).getId();
>
> this id from the result (the i ) is starting from 1 but I need the actual id
> in the index.
>
> On 4/5/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> >
> > Hi
> > I need the id of the document that returned by Hits as a result of a
> > query.
> >
> > Hits result = searchable.find(myQuery....);
> >
> > now I need something like result.getId ()
> >
> > is there any way to get it?
> >
> > Thanks so much
> >
> > --
> > Regards,
> > Mohammad Norouzi
> >
>
>
>
> --
> Regards,
> Mohammad
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 10:41:38 2007
Return-Path: <java-user-return-27399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33363 invoked from network); 5 Apr 2007 10:41:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 10:41:37 -0000
Received: (qmail 52881 invoked by uid 500); 5 Apr 2007 10:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52851 invoked by uid 500); 5 Apr 2007 10:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52840 invoked by uid 99); 5 Apr 2007 10:41:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 03:41:38 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of philippn@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 03:41:30 -0700
Received: by an-out-0708.google.com with SMTP id c3so574948ana
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 03:41:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lcbvt+ZsbEJlnZkIgRLypofJztVGgiLceLlkS2vnj/3+/qFNkYv1aFvE01YNzgsaQQtnwufSU/QSpyOW1tnagWWjzTS5zHfehEka0oiOVxGdusFo2P9IbKiyh03pt0JafwAjE37W5rtiIZbopbDKPIxqNBPECnuDQv/oorP3gm0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IJZvuYb3l/RB6mQ9G0zZyD6SPsxEexx8X6/CaEw/FBLPOj3fxRhffrf1UJ95OyHw3IjslQeTFmI8MQLFRHYrPk2mqA4SdUyrOsGEH+bKxH667IXNzgr+Xa28o18wvcoLpv5WedhHUcoV+At5lrAty6zXzhVqo1qaWDySQSqTKRg=
Received: by 10.100.34.16 with SMTP id h16mr1167697anh.1175769669506;
        Thu, 05 Apr 2007 03:41:09 -0700 (PDT)
Received: by 10.100.12.14 with HTTP; Thu, 5 Apr 2007 03:41:09 -0700 (PDT)
Message-ID: <40b852f10704050341u26f14e2fg65ce62001f78a221@mail.gmail.com>
Date: Thu, 5 Apr 2007 12:41:09 +0200
From: "Philipp Nanz" <philippn@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I need the internal lucene's document id from Hits
In-Reply-To: <40b852f10704050338t29d7dbf1he81a7532929f294d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <34b8543c0704050307p7eb9d5ecj54479b82252c736d@mail.gmail.com>
	 <34b8543c0704050312s2207f8a8q8e965823ed36a01f@mail.gmail.com>
	 <40b852f10704050338t29d7dbf1he81a7532929f294d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ahh, now i know what you mean...

Forget the above :-)

Use result.id( i )

2007/4/5, Philipp Nanz <philippn@gmail.com>:
> That *is* the actual id in the index. There is no other.
> You should be careful using it outside of Lucene though, because
> Lucene may rearrange the document ids during optimization for example.
>
> If you need an application id, add it as an additional stored field to
> each document and retrieve that.
>
> Hope this helps
> Philipp
>
> 2007/4/5, Mohammad Norouzi <mnrz57@gmail.com>:
> > sorry to correct my answer:
> > I need something like this result.doc( i ).getId();
> >
> > this id from the result (the i ) is starting from 1 but I need the actual id
> > in the index.
> >
> > On 4/5/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > >
> > > Hi
> > > I need the id of the document that returned by Hits as a result of a
> > > query.
> > >
> > > Hits result = searchable.find(myQuery....);
> > >
> > > now I need something like result.getId ()
> > >
> > > is there any way to get it?
> > >
> > > Thanks so much
> > >
> > > --
> > > Regards,
> > > Mohammad Norouzi
> > >
> >
> >
> >
> > --
> > Regards,
> > Mohammad
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 11:24:34 2007
Return-Path: <java-user-return-27400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46561 invoked from network); 5 Apr 2007 11:24:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 11:24:33 -0000
Received: (qmail 16032 invoked by uid 500); 5 Apr 2007 11:24:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15991 invoked by uid 500); 5 Apr 2007 11:24:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15980 invoked by uid 99); 5 Apr 2007 11:24:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 04:24:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 04:24:25 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1024003ugc
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 04:24:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C2Rwb6d05VknXzDf4ERg14QZgIvTBXQF7nofMTgZPaopyHAOno69yiIGPFqJNADgj/lCiPVht+4RNqjUdjL11kaGjNLQMl4TQYU7oZsDzI06i8k/Ui9pEENm6rOe+t84kuETOLRJAeGwZeKrjk2pxXjSfNfPwQamiL0dwmQb38U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=s0WXuIt5jmuuVnoQE1dAlzvKRKufERWpL3FfxO5IqvArfhtDq7MghL7LH1NYgkrn9o3V4wbrgwnj62r12FR+h9SSQZP+ybaKfCqEw5t5+k2xjDQQcR/w1Rg5EIBVKQrxrPG4X9jxnFFKs6/JwCInzqvf/QDLlNUZOSyWmzotmFc=
Received: by 10.78.193.19 with SMTP id q19mr283154huf.1175772244119;
        Thu, 05 Apr 2007 04:24:04 -0700 (PDT)
Received: by 10.78.136.8 with HTTP; Thu, 5 Apr 2007 04:24:04 -0700 (PDT)
Message-ID: <34b8543c0704050424rcdf9aeck2ef68d025f96ac7d@mail.gmail.com>
Date: Thu, 5 Apr 2007 14:54:04 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I need the internal lucene's document id from Hits
In-Reply-To: <40b852f10704050341u26f14e2fg65ce62001f78a221@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28313_19485594.1175772244018"
References: <34b8543c0704050307p7eb9d5ecj54479b82252c736d@mail.gmail.com>
	 <34b8543c0704050312s2207f8a8q8e965823ed36a01f@mail.gmail.com>
	 <40b852f10704050338t29d7dbf1he81a7532929f294d@mail.gmail.com>
	 <40b852f10704050341u26f14e2fg65ce62001f78a221@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28313_19485594.1175772244018
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Philipp


> 2007/4/5, Philipp Nanz <philippn@gmail.com>:
> > That *is* the actual id in the index. There is no other.
> > You should be careful using it outside of Lucene though, because
> > Lucene may rearrange the document ids during optimization for example.
> >
> > If you need an application id, add it as an additional stored field to
> > each document and retrieve that.
> >
>

but the question is, if I add, say, a document to my index, is lucene going
to re arrange the internal IDs? can't I trust them?
Would you tell me in exactly which situation or action they will rearrange
the IDs?


-- 
Regards,
Mohammad

------=_Part_28313_19485594.1175772244018--

From java-user-return-27401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 11:46:55 2007
Return-Path: <java-user-return-27401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51195 invoked from network); 5 Apr 2007 11:46:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 11:46:54 -0000
Received: (qmail 43161 invoked by uid 500); 5 Apr 2007 11:46:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43136 invoked by uid 500); 5 Apr 2007 11:46:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43124 invoked by uid 99); 5 Apr 2007 11:46:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 04:46:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.238.164.5] (HELO elvira.its.uu.se) (130.238.164.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 04:46:46 -0700
Received: by elvira.its.uu.se (Postfix, from userid 204)
	id AC66A39E; Thu,  5 Apr 2007 13:46:24 +0200 (MSZ)
Received: from elvira.its.uu.se(127.0.0.1) by elvira.its.uu.se via virus-scan 
	id s274455; Thu, 5 Apr 07 13:46:15 +0200
Received: from [130.238.171.116] (pc171-116.ub.uu.se [130.238.171.116])
	by elvira.its.uu.se (Postfix) with ESMTP id CCF4F376
	for <java-user@lucene.apache.org>; Thu,  5 Apr 2007 13:46:15 +0200 (MSZ)
Message-ID: <4614E187.4080803@ub.uu.se>
Date: Thu, 05 Apr 2007 13:46:15 +0200
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20060330)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: I need the internal lucene's document id from Hits
References: <34b8543c0704050307p7eb9d5ecj54479b82252c736d@mail.gmail.com>	 <34b8543c0704050312s2207f8a8q8e965823ed36a01f@mail.gmail.com>	 <40b852f10704050338t29d7dbf1he81a7532929f294d@mail.gmail.com>	 <40b852f10704050341u26f14e2fg65ce62001f78a221@mail.gmail.com> <34b8543c0704050424rcdf9aeck2ef68d025f96ac7d@mail.gmail.com>
In-Reply-To: <34b8543c0704050424rcdf9aeck2ef68d025f96ac7d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It's in the FAQ:
http://wiki.apache.org/lucene-java/LuceneFAQ#head-e1de2630fe33fb6eb6733747a5bf870f600e1b4c


Mohammad Norouzi wrote:
> 
> but the question is, if I add, say, a document to my index, is lucene going
> to re arrange the internal IDs? can't I trust them?
> Would you tell me in exactly which situation or action they will rearrange
> the IDs?
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 11:54:08 2007
Return-Path: <java-user-return-27402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53964 invoked from network); 5 Apr 2007 11:54:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 11:54:08 -0000
Received: (qmail 61110 invoked by uid 500); 5 Apr 2007 11:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61075 invoked by uid 500); 5 Apr 2007 11:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61064 invoked by uid 99); 5 Apr 2007 11:54:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 04:54:07 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of philippn@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 04:54:00 -0700
Received: by an-out-0708.google.com with SMTP id c3so593924ana
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 04:53:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Ekw7b5jGYCQUPUdQWxmhNhJ647TenWmumKZhLyeTYmCy3UQU06G4btLRMtDRKR2+3mbrdmDwsxId8A+NnWOAyw6w2kzaWcQK92zkaCw1EfPuSYkgj9lZp7GfXaSbztPBqvJ6PlNWDnkz4bySH1hSVCx348FLdq5J6A053rPLmAs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fOo44cQwMFeFpW7lbMqdRq1exLHfbXR1tXR/2rYahCI7Y58YJZwt02JRqGXQNVmwlUVSl27AuAyjhCrcndySv1XSjnfQd/ENenDtAhYtIPiANLNBekzrbV7kp3XBSSPeffoRBD0IU+z6SJ0Ld0sUzBKvrvGgB8ewFr8FC+CAhiE=
Received: by 10.100.124.5 with SMTP id w5mr1214817anc.1175774019342;
        Thu, 05 Apr 2007 04:53:39 -0700 (PDT)
Received: by 10.100.12.14 with HTTP; Thu, 5 Apr 2007 04:53:39 -0700 (PDT)
Message-ID: <40b852f10704050453j245f16f5madd3e9be5fbfa324@mail.gmail.com>
Date: Thu, 5 Apr 2007 13:53:39 +0200
From: "Philipp Nanz" <philippn@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I need the internal lucene's document id from Hits
In-Reply-To: <34b8543c0704050424rcdf9aeck2ef68d025f96ac7d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <34b8543c0704050307p7eb9d5ecj54479b82252c736d@mail.gmail.com>
	 <34b8543c0704050312s2207f8a8q8e965823ed36a01f@mail.gmail.com>
	 <40b852f10704050338t29d7dbf1he81a7532929f294d@mail.gmail.com>
	 <40b852f10704050341u26f14e2fg65ce62001f78a221@mail.gmail.com>
	 <34b8543c0704050424rcdf9aeck2ef68d025f96ac7d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

As long as there are no deletions, the ids will remain unchanged and
it is safe to use them outside.

But in a case where you delete some document, the resulting gap in the
document list will be filled during the next optimize (triggered
manually) or merge operation (may be triggered automatically on adding
a document), which means all following documents are shifted one
position and their ids change respectively.

2007/4/5, Mohammad Norouzi <mnrz57@gmail.com>:
> Thanks Philipp
>
>
> > 2007/4/5, Philipp Nanz <philippn@gmail.com>:
> > > That *is* the actual id in the index. There is no other.
> > > You should be careful using it outside of Lucene though, because
> > > Lucene may rearrange the document ids during optimization for example.
> > >
> > > If you need an application id, add it as an additional stored field to
> > > each document and retrieve that.
> > >
> >
>
> but the question is, if I add, say, a document to my index, is lucene going
> to re arrange the internal IDs? can't I trust them?
> Would you tell me in exactly which situation or action they will rearrange
> the IDs?
>
>
> --
> Regards,
> Mohammad
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 11:59:56 2007
Return-Path: <java-user-return-27403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55301 invoked from network); 5 Apr 2007 11:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 11:59:54 -0000
Received: (qmail 72249 invoked by uid 500); 5 Apr 2007 11:59:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72221 invoked by uid 500); 5 Apr 2007 11:59:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72208 invoked by uid 99); 5 Apr 2007 11:59:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 04:59:53 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 04:59:46 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1030669ugc
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 04:59:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eVYCTFwyzovXddX3i/KTNpnCVdGjdLGV4k7qL7Cwiy2W6V4aSikizpwhVeN7u9+pGSYj0xSEQ65pAp0frWoDjOq4F8WmJIYoXyjtsO7/VaJ/MiG2g6j3Q6Gq50+GesMfsBBN3q/z66a5dr1Q7xFgRPATgoP5mjG1NMcyB30riwg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r0vojEapadGCMy2Nivq6U+jXpKb18I9CZXfokSPICJFQy1nCo9L52DsgYb5ieNO2TUjyzgjm0evNvQORZOM5wZk9JF9s5MxbvYiEwzDc7kw2DqYDlmPEvG3vN0ThkSggfQpHngiyBBfLn9WSfv3FBZoBDI01L97/IrxIZx/j708=
Received: by 10.78.160.2 with SMTP id i2mr286968hue.1175774364629;
        Thu, 05 Apr 2007 04:59:24 -0700 (PDT)
Received: by 10.78.136.8 with HTTP; Thu, 5 Apr 2007 04:59:24 -0700 (PDT)
Message-ID: <34b8543c0704050459w256b295ah985dab79abd708a@mail.gmail.com>
Date: Thu, 5 Apr 2007 15:29:24 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I need the internal lucene's document id from Hits
In-Reply-To: <40b852f10704050453j245f16f5madd3e9be5fbfa324@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28509_25562042.1175774364582"
References: <34b8543c0704050307p7eb9d5ecj54479b82252c736d@mail.gmail.com>
	 <34b8543c0704050312s2207f8a8q8e965823ed36a01f@mail.gmail.com>
	 <40b852f10704050338t29d7dbf1he81a7532929f294d@mail.gmail.com>
	 <40b852f10704050341u26f14e2fg65ce62001f78a221@mail.gmail.com>
	 <34b8543c0704050424rcdf9aeck2ef68d025f96ac7d@mail.gmail.com>
	 <40b852f10704050453j245f16f5madd3e9be5fbfa324@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28509_25562042.1175774364582
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

2YxXZWxsClBoaWxpcHAgYW5kIFJvbm5pZSBUaGFuayB5b3UgdmVyeSBtdWNoIGluZGVlZAoKLS0g
ClJlZ2FyZHMsCk1vaGFtbWFkCg==
------=_Part_28509_25562042.1175774364582--

From java-user-return-27404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 15:07:34 2007
Return-Path: <java-user-return-27404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55825 invoked from network); 5 Apr 2007 15:07:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 15:07:33 -0000
Received: (qmail 87594 invoked by uid 500); 5 Apr 2007 15:07:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87568 invoked by uid 500); 5 Apr 2007 15:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87557 invoked by uid 99); 5 Apr 2007 15:07:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 08:07:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.241.225.140] (HELO ProServer.proxml.be) (81.241.225.140)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 08:07:25 -0700
Received: from ProServer.proxml.be (localhost [127.0.0.1])
	by ProServer.proxml.be (8.13.4/8.13.4/Debian-3sarge1) with ESMTP id l35F5bH0026670
	for <java-user@lucene.apache.org>; Thu, 5 Apr 2007 17:05:37 +0200
Received: from ProServer.proxml.be (root@localhost)
	by ProServer.proxml.be (8.13.4/8.13.4/Submit) with ESMTP id l35F5bwc026665
	for <java-user@lucene.apache.org>; Thu, 5 Apr 2007 17:05:37 +0200
Received: from [192.168.254.4] (mail.proxml.be [81.241.225.140])
    by ProServer.proxml.be (Scalix SMTP Relay 10.0.5.3)
    via ESMTP; Thu, 05 Apr 2007 17:05:37 +0200 (CEST)
Date: Thu, 5 Apr 2007 17:07:02 +0200
From: Paul Hermans <paul@proxml.be>
To: java-user@lucene.apache.org
Message-ID: <46151096.3000306@proxml.be>
Subject: luke v0.7 and SnowBallAnalyzer
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.10 (Macintosh/20070221)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I'm running lukeall-0.7.jar.

In the Search Tab, when I try to use the SnowBallAnalyzer with name 
"German" for a Query,
I do receive the message
"java.lang.ClassNotFound:
net.sf.snowball.ext.GermansStemmer".

In the PlugIns tab, when I'm using the SnowballAnalyzer, I do get
"Couldn't instantiate analyzer - public zero-argument constructor required".

What am I missing?

BTW. I'm not a Java developer.


Thanks,


Paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 15:37:14 2007
Return-Path: <java-user-return-27405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74107 invoked from network); 5 Apr 2007 15:37:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 15:37:13 -0000
Received: (qmail 55401 invoked by uid 500); 5 Apr 2007 15:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55369 invoked by uid 500); 5 Apr 2007 15:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55356 invoked by uid 99); 5 Apr 2007 15:37:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 08:37:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of devquestions@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 08:37:06 -0700
Received: by an-out-0708.google.com with SMTP id c3so675362ana
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 08:36:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=Ml2bYz6B4LyrqOA4Zx21KIScywW4CLISs5zzjzAQtwKJJsC8zTsJ58gkGs2pYqI578+k4fvcm1orvMwboGAYvGNLFegp/XamxUKk491iaYKUV9Q3GBL9oxALX6WSLxdYsUXS4IWV+yPedpiUEc7MgWM907InMIM3JeyNPr4cwsg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QA1IIorBrPx1ndSMMJwbd6co6UXPyDePfa2DLUxltSVuoGKBi1o4DlQE4unguF9G6062jHKPYVexh9r9uY0d65f0V14iMPllgn1CzxaDb8Ob3EOTJTBo0EykChXfDGBaMockhqN0JXxCtrO+m1pcZwwIBcbnJWfsJaUzl+AaHGY=
Received: by 10.100.135.16 with SMTP id i16mr1389833and.1175787405073;
        Thu, 05 Apr 2007 08:36:45 -0700 (PDT)
Received: by 10.100.131.7 with HTTP; Thu, 5 Apr 2007 08:36:45 -0700 (PDT)
Message-ID: <c01704c90704050836y71168d84ma7f7ee64d56d5c3@mail.gmail.com>
Date: Thu, 5 Apr 2007 11:36:45 -0400
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: How does lucene handle content-type
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45158_1219766.1175787405022"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45158_1219766.1175787405022
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am using WGET to download content from the www with ---save-header option.
The save-header option saves the hppt header to the downloaded files.
Does Lucene make use of content type  while indexing  or  I have to parse
the header , determine the content-type and determine the right set of
actions to do ?

Thanks !

------=_Part_45158_1219766.1175787405022--

From java-user-return-27406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 17:32:03 2007
Return-Path: <java-user-return-27406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39578 invoked from network); 5 Apr 2007 17:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 17:32:02 -0000
Received: (qmail 13592 invoked by uid 500); 5 Apr 2007 17:32:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13548 invoked by uid 500); 5 Apr 2007 17:32:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13537 invoked by uid 99); 5 Apr 2007 17:32:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 10:32:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.90.176 as permitted sender)
Received: from [66.249.90.176] (HELO ik-out-1112.google.com) (66.249.90.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 10:31:54 -0700
Received: by ik-out-1112.google.com with SMTP id b35so460809ika
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 10:31:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qFOI0rdEfBY+OMCuwC/I5dTw/u9QBAETNgxiwrlKFrHSTxlLHcuj9WCj9G/n02PNmR3B8J+V9+0wJ07fnl1jlZVetA2jyTa++ETCSY5qLbQy+u/JTljaP+4ADMIgymLccyK2Gzl1QeRUGEoHovX9Bn/eqcoB4gD5x5LQ1U6m5VI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dk/DMsZHE6ZEjH4NF+0B07x4Mr7I2il4mWPdg+p+MqEVteKNeLnrIYElsbr9GCxa/BlPZD966KZURNuqa61ruBcbnDKPVLkfOkCjs5WnhALRZbM/yp6+6ZZTL5sb0Sxl5d8DqEB8CrvMtMv3ytqyfQYO3Wdonh0krOw3zTY+Q8w=
Received: by 10.114.155.1 with SMTP id c1mr814188wae.1175794291936;
        Thu, 05 Apr 2007 10:31:31 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Thu, 5 Apr 2007 10:31:31 -0700 (PDT)
Message-ID: <359a92830704051031u5133ad4ds3f3cce4a4634cd6f@mail.gmail.com>
Date: Thu, 5 Apr 2007 13:31:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How does lucene handle content-type
In-Reply-To: <c01704c90704050836y71168d84ma7f7ee64d56d5c3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55607_19344063.1175794291873"
References: <c01704c90704050836y71168d84ma7f7ee64d56d5c3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55607_19344063.1175794291873
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Lucene has no built-in recognition of anything. You have to parse
the header and index the relevant bits as you need to.

There are projects *based* upon lucene that do web crawls that
you might want to look into, Nutch comes to mind.

Erick

On 4/5/07, Developer Developer <devquestions@gmail.com> wrote:
>
> I am using WGET to download content from the www with ---save-header
> option.
> The save-header option saves the hppt header to the downloaded files.
> Does Lucene make use of content type  while indexing  or  I have to parse
> the header , determine the content-type and determine the right set of
> actions to do ?
>
> Thanks !
>

------=_Part_55607_19344063.1175794291873--

From java-user-return-27407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 17:38:44 2007
Return-Path: <java-user-return-27407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41050 invoked from network); 5 Apr 2007 17:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 17:38:42 -0000
Received: (qmail 23552 invoked by uid 500); 5 Apr 2007 17:38:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23518 invoked by uid 500); 5 Apr 2007 17:38:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23507 invoked by uid 99); 5 Apr 2007 17:38:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 10:38:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 10:38:35 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HZVuY-0004Nv-W1
	for java-user@lucene.apache.org; Thu, 05 Apr 2007 10:38:14 -0700
Message-ID: <9859816.post@talk.nabble.com>
Date: Thu, 5 Apr 2007 10:38:14 -0700 (PDT)
From: Leon <lmikhailov@netzero.net>
To: java-user@lucene.apache.org
Subject: indexing and searching real numbers
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: lmikhailov@netzero.net
X-Virus-Checked: Checked by ClamAV on apache.org


Hello everybody,

I need to index and search real numbers in Lucene. I found NumberUtils clas=
s
in Solr project which permits one to encode doubles into string so that
alpha numeric ordering would correctly correspond to the ordering on
numbers. When I use ConstantScoreRangeQuery programmatically everything
works just fine. However when I convert this query to a string, parse it
with QueryParser and use the resulting query =E2=80=93 no result are found.

ConstantScoreRangeQuery wquery =3D=20
  new ConstantScoreRangeQuery("westbc", null,
NumberUtils.double2sortableStr(-110.500000), false, true);
Hits hits =3D is.search(wquery); //returns expected results

Now if I do

String wqueryString =3D wquery.toString();
QueryParser queryParser =3D new QueryParser("westbc", new KeywordAnalyzer()=
);
Query query =3D queryParser.parse(wqueryString);
Hits hits =3D is.search(query); // returns nothing

Interesting is that System.out.println(wquery.toString()) looks exactly the
same as System.out.println(query.toString()).

Any ideas welcome.

Thanks,

Leon
--=20
View this message in context: http://www.nabble.com/indexing-and-searching-=
real-numbers-tf3532728.html#a9859816
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 17:46:05 2007
Return-Path: <java-user-return-27408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43896 invoked from network); 5 Apr 2007 17:46:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 17:46:04 -0000
Received: (qmail 39824 invoked by uid 500); 5 Apr 2007 17:46:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39791 invoked by uid 500); 5 Apr 2007 17:46:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39779 invoked by uid 99); 5 Apr 2007 17:46:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 10:46:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of johnkleven@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 10:45:55 -0700
Received: by wr-out-0506.google.com with SMTP id 68so401099wra
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 10:45:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=VQfdTbYJLFeocMGRlpWG26Cj1xsZYOllWGDybGie883FkWeX355/O74Lw+l/b4CxKTqHYH1zMZViiJ/q3+gDFg9522Mw7K4HJ+zXaUQumVtyK+yJTjp3sdWw9S2krtKWxR65Vd7rAl9rRIGqx1ptuRCXL8XYOYiF1Udg9V4XjeY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=IWQ24U8R9qVu/t5vQ0Vhghr2ntPqpJGvifKxINC1Adrv5M8gHz0Had4ilabsz6thNfuTx/wp508ddNLG0DGW2HPH6a9VOZTSQ9pwT2YfPz76BpvDmWtmcfyct0V+90qZf7T1l5j6aTZ/0SiybklEiXeFJACaIaq37anF0flB1No=
Received: by 10.115.60.1 with SMTP id n1mr835625wak.1175795134284;
        Thu, 05 Apr 2007 10:45:34 -0700 (PDT)
Received: by 10.114.15.12 with HTTP; Thu, 5 Apr 2007 10:45:34 -0700 (PDT)
Message-ID: <94243d370704051045o155a87abr7b71e87b890b5298@mail.gmail.com>
Date: Thu, 5 Apr 2007 10:45:34 -0700
From: "John Kleven" <jkleven@vinquire.com>
Sender: johnkleven@gmail.com
To: java-user@lucene.apache.org
Subject: Re: short documents = help me tweak Similarity??
In-Reply-To: <94243d370704021138n2490aacfr60f0f93110307b11@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57098_15082920.1175795134193"
References: <94243d370704021138n2490aacfr60f0f93110307b11@mail.gmail.com>
X-Google-Sender-Auth: 835e18a19175c7a8
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57098_15082920.1175795134193
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry to re-post -- is this the correct forum for questions like this?  I
think that writing a new encode/decode operation should help alleviate my
problem, but thought that this must be fairly widespread issue for people
using lucene for "non-web-page" searches (i.e., shorter documents)

Thanks again,
John

On 4/2/07, John Kleven <johnkleven@gmail.com> wrote:
>
> My documents are cars...
> i.e.,
> Nissan Altima Sports Package
> Nissan Altima Standard
>
> The problem I have is when i search "Nissan Altima", I want to get the 2nd
> hit back first, i.e. "Nissan Altima Standard", because it is shorter.
> However, this doesn't happen.  They are both scored the exact same.
>
> I know that the lengthNorm in Similarity is using 1/sqrt(numTerms), and
> you would think that would be enuff to make sure the order is correct.
> However, it is not, and I assume this is because of the encode/decode
> functions that pack this value into a single byte do not have the
> granularity to represent differences between numbers like 1/sqrt(3) vs
> 1/sqrt(4)??
>
> Is the suggested approach here to re-write the encode/decode operations,
> or is there any easier way?
>
> Thanks kindly -
> John

------=_Part_57098_15082920.1175795134193--

From java-user-return-27409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 17:47:20 2007
Return-Path: <java-user-return-27409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45684 invoked from network); 5 Apr 2007 17:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 17:47:16 -0000
Received: (qmail 43720 invoked by uid 500); 5 Apr 2007 17:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43688 invoked by uid 500); 5 Apr 2007 17:47:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43677 invoked by uid 99); 5 Apr 2007 17:47:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 10:47:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2007 10:47:08 -0700
Received: (qmail 80178 invoked by uid 60001); 5 Apr 2007 17:46:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=cVVV8F6W93ueyRtbQIou5RTpFA2EmJ321V9fUyclkMj7BJVWvquNviQSknY56XB73gca5P3W8mQZjTdxw7El3gqE+Vo4n1XJHNtopJOIzRUDww95hYZJotX2KD25Pdr/VxS2okoAYSF8sUzvgEzWxTuux6pLP7/51fxLFG/fOzE=;
X-YMail-OSG: WW9AxbcVM1kzN389DEgw3HazSZvBHikksYikkfMUiZwhkS8ulWsfuMgY4J01ps5jVaIoOmh1Yk3fPbX5Cy452aVZVA--
Received: from [66.92.187.33] by web50302.mail.re2.yahoo.com via HTTP; Thu, 05 Apr 2007 10:46:47 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Thu, 5 Apr 2007 10:46:47 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: indexing and searching real numbers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
Message-ID: <317531.80119.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You can't really rely on Query.toString() to produce a valid query identica=
l to the query in that Query instance.  Are you sure both produce the same =
query string?  You didn't include that.=0A=0AOtis=0A . . . . . . . . . . . =
. . . . . . . . . . . . . . . . . . .=0ASimpy -- http://www.simpy.com/  -  =
Tag  -  Search  -  Share=0A=0A----- Original Message ----=0AFrom: Leon <lmi=
khailov@netzero.net>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, Ap=
ril 5, 2007 1:38:14 PM=0ASubject: indexing and searching real numbers=0A=0A=
=0AHello everybody,=0A=0AI need to index and search real numbers in Lucene.=
 I found NumberUtils class=0Ain Solr project which permits one to encode do=
ubles into string so that=0Aalpha numeric ordering would correctly correspo=
nd to the ordering on=0Anumbers. When I use ConstantScoreRangeQuery program=
matically everything=0Aworks just fine. However when I convert this query t=
o a string, parse it=0Awith QueryParser and use the resulting query =96 no =
result are found.=0A=0AConstantScoreRangeQuery wquery =3D =0A  new Constant=
ScoreRangeQuery("westbc", null,=0ANumberUtils.double2sortableStr(-110.50000=
0), false, true);=0AHits hits =3D is.search(wquery); //returns expected res=
ults=0A=0ANow if I do=0A=0AString wqueryString =3D wquery.toString();=0AQue=
ryParser queryParser =3D new QueryParser("westbc", new KeywordAnalyzer());=
=0AQuery query =3D queryParser.parse(wqueryString);=0AHits hits =3D is.sear=
ch(query); // returns nothing=0A=0AInteresting is that System.out.println(w=
query.toString()) looks exactly the=0Asame as System.out.println(query.toSt=
ring()).=0A=0AAny ideas welcome.=0A=0AThanks,=0A=0ALeon=0A-- =0AView this m=
essage in context: http://www.nabble.com/indexing-and-searching-real-number=
s-tf3532728.html#a9859816=0ASent from the Lucene - Java Users mailing list =
archive at Nabble.com.=0A=0A=0A--------------------------------------------=
-------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@l=
ucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.a=
pache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 18:13:41 2007
Return-Path: <java-user-return-27410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59542 invoked from network); 5 Apr 2007 18:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 18:13:39 -0000
Received: (qmail 95576 invoked by uid 500); 5 Apr 2007 18:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95542 invoked by uid 500); 5 Apr 2007 18:13:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95527 invoked by uid 99); 5 Apr 2007 18:13:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 11:13:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 11:13:31 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 32091190E2D
	for <java-user@lucene.apache.org>; Thu,  5 Apr 2007 11:13:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <94243d370704051045o155a87abr7b71e87b890b5298@mail.gmail.com>
References: <94243d370704021138n2490aacfr60f0f93110307b11@mail.gmail.com> <94243d370704051045o155a87abr7b71e87b890b5298@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A2B16136-F8EA-445D-8D20-DAA08561D88C@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: short documents = help me tweak Similarity??
Date: Thu, 5 Apr 2007 14:13:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It is the right forum, silence just means either no one knows the  
answer or no one who knows the answer has read it...  Such is the  
nature of the community.

Have you looked at overriding similarity with your own  
implementation?  Have you done explain() calls on the docs to see  
where the scores are coming from?  You may be seeing other factors at  
play.

You might also try searching the archives for length normalization.   
I seem to recall someone talking about the opposite problem, calling  
it "fair" similarity, so maybe you could use that as a basis for your  
implementation (by doing the opposite).

-Grant


On Apr 5, 2007, at 1:45 PM, John Kleven wrote:

> Sorry to re-post -- is this the correct forum for questions like  
> this?  I
> think that writing a new encode/decode operation should help  
> alleviate my
> problem, but thought that this must be fairly widespread issue for  
> people
> using lucene for "non-web-page" searches (i.e., shorter documents)
>
> Thanks again,
> John
>
> On 4/2/07, John Kleven <johnkleven@gmail.com> wrote:
>>
>> My documents are cars...
>> i.e.,
>> Nissan Altima Sports Package
>> Nissan Altima Standard
>>
>> The problem I have is when i search "Nissan Altima", I want to get  
>> the 2nd
>> hit back first, i.e. "Nissan Altima Standard", because it is shorter.
>> However, this doesn't happen.  They are both scored the exact same.
>>
>> I know that the lengthNorm in Similarity is using 1/sqrt 
>> (numTerms), and
>> you would think that would be enuff to make sure the order is  
>> correct.
>> However, it is not, and I assume this is because of the encode/decode
>> functions that pack this value into a single byte do not have the
>> granularity to represent differences between numbers like 1/sqrt 
>> (3) vs
>> 1/sqrt(4)??
>>
>> Is the suggested approach here to re-write the encode/decode  
>> operations,
>> or is there any easier way?
>>
>> Thanks kindly -
>> John

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 18:21:42 2007
Return-Path: <java-user-return-27411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63738 invoked from network); 5 Apr 2007 18:21:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 18:21:42 -0000
Received: (qmail 17195 invoked by uid 500); 5 Apr 2007 18:21:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17170 invoked by uid 500); 5 Apr 2007 18:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17159 invoked by uid 99); 5 Apr 2007 18:21:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 11:21:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2007 11:21:35 -0700
Received: (qmail 96913 invoked by uid 60001); 5 Apr 2007 18:21:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=In1t/i54m7Wzcdxu58Q15akODnZkwXLG3maUO7iET7oUrdiiyng3qpROiOhNPkX1rO/wkXUWwdj3CXscn8Xe+h7FVVdW+tlklhnBmYGiXC5Syu+3OPKI07VcWjK09/50g1tbZ3wttlaKwXJ/3Yz+3wcby69HzWEOcJphPVFUItU=;
X-YMail-OSG: nB9TTCMVM1km9sscpPESEW7E7oDhbkDYzV0HK7q6avygmTxouZUlkgQi.MpUeorFlwiTyUTfG4ruQpOQ8PuunWYDNA--
Received: from [66.92.187.33] by web50302.mail.re2.yahoo.com via HTTP; Thu, 05 Apr 2007 11:21:13 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Thu, 5 Apr 2007 11:21:13 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: short documents = help me tweak Similarity??
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <925086.96042.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

As far as I know, this is the case where you want your custom Similarity that knows how to deal with a small number of terms.

  public float lengthNorm(String fieldName, int numTerms) {
    if (numTerms < N)
      // return something smart
    return (float)(1.0 / Math.sqrt(numTerms));
  }

I think the rest of what you said is correct.  Look at this piece of Similarity javadoc:


 *      However the resulted <i>norm</i> value is {@link #encodeNorm(float) encoded} as a single byte
 *      before being stored.
 *      At search time, the norm byte value is read from the index
 *      {@link org.apache.lucene.store.Directory directory} and
 *      {@link #decodeNorm(byte) decoded} back to a float <i>norm</i> value.
 *      This encoding/decoding, while reducing index size, comes with the price of
 *      precision loss - it is not guaranteed that decode(encode(x)) = x.
 *      For instance, decode(encode(0.89)) = 0.75.
 *      Also notice that search time is too late to modify this <i>norm</i> part of scoring, e.g. by
 *      using a different {@link Similarity} for search.


If you come up with a more generic lengthNorm that dels with "overly short" documents/fields well, I'd love to know! :)

Otis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: John Kleven <jkleven@vinquire.com>
To: java-user@lucene.apache.org
Sent: Thursday, April 5, 2007 1:45:34 PM
Subject: Re: short documents = help me tweak Similarity??

Sorry to re-post -- is this the correct forum for questions like this?  I
think that writing a new encode/decode operation should help alleviate my
problem, but thought that this must be fairly widespread issue for people
using lucene for "non-web-page" searches (i.e., shorter documents)

Thanks again,
John

On 4/2/07, John Kleven <johnkleven@gmail.com> wrote:
>
> My documents are cars...
> i.e.,
> Nissan Altima Sports Package
> Nissan Altima Standard
>
> The problem I have is when i search "Nissan Altima", I want to get the 2nd
> hit back first, i.e. "Nissan Altima Standard", because it is shorter.
> However, this doesn't happen.  They are both scored the exact same.
>
> I know that the lengthNorm in Similarity is using 1/sqrt(numTerms), and
> you would think that would be enuff to make sure the order is correct.
> However, it is not, and I assume this is because of the encode/decode
> functions that pack this value into a single byte do not have the
> granularity to represent differences between numbers like 1/sqrt(3) vs
> 1/sqrt(4)??
>
> Is the suggested approach here to re-write the encode/decode operations,
> or is there any easier way?
>
> Thanks kindly -
> John




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 18:57:12 2007
Return-Path: <java-user-return-27412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80049 invoked from network); 5 Apr 2007 18:57:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 18:57:11 -0000
Received: (qmail 73046 invoked by uid 500); 5 Apr 2007 18:57:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73022 invoked by uid 500); 5 Apr 2007 18:57:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73010 invoked by uid 99); 5 Apr 2007 18:57:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 11:57:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 11:57:03 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Thu, 05 Apr 2007 15:00:08 -0500
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <4C668A51-B626-41C8-883A-79D5C240F3DF@genome.chop.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Not able to search on UN_TOKENIZED fields
Date: Thu, 5 Apr 2007 14:56:36 -0400
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hey,

I was just wondering if you are supposed to be able to search on  
UN_TOKENIZED fields?  It seems like you can from the docs, but I have  
been unsuccessful.  I want to do exact string matching on a certain  
field without analyzer interference.

Thanks,
Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 19:09:14 2007
Return-Path: <java-user-return-27413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84213 invoked from network); 5 Apr 2007 19:09:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 19:09:12 -0000
Received: (qmail 94702 invoked by uid 500); 5 Apr 2007 19:09:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94412 invoked by uid 500); 5 Apr 2007 19:09:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94398 invoked by uid 99); 5 Apr 2007 19:09:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 12:09:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 12:09:04 -0700
Received: by an-out-0708.google.com with SMTP id c3so757104ana
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 12:08:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OfJ/yOzoJbu7Z7BWJt/UU1VBm8FMzz3RFPb8VNMVZTcVi+1CjlUmMH2F9KCm6ju/UX8SWjLmQ9SLAtY+y3FfP4EChVN/Aw2+NTob5mc0WoSD77L7IHF+4J5GVAduX5bQTD47lNgeidl0CEH7Ixn7G2CdGxaWMrg6Tg9Hayl1FQY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=izBOBDgkjLFCVgYJzilBtQYVbuLkNecZugkzhQ7dcYdnws3OmJPsdsYG5udVtkqX6Kfx5ugVFZJdfdET6P65amRp8Tb6KBRT/9aR4P+m2aTQxMYDu7WTNxMrxD/saw926BLZQ3lpokV/KtSjGOwOqybGam4EFRi1VzvJ7hhHpCw=
Received: by 10.114.39.16 with SMTP id m16mr839155wam.1175800123525;
        Thu, 05 Apr 2007 12:08:43 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Thu, 5 Apr 2007 12:08:43 -0700 (PDT)
Message-ID: <359a92830704051208m4c28e343k4132008657ac2f5a@mail.gmail.com>
Date: Thu, 5 Apr 2007 15:08:43 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Not able to search on UN_TOKENIZED fields
In-Reply-To: <4C668A51-B626-41C8-883A-79D5C240F3DF@genome.chop.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57887_7803430.1175800123483"
References: <4C668A51-B626-41C8-883A-79D5C240F3DF@genome.chop.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57887_7803430.1175800123483
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, you can search on UN_TOKENIZED fields, but they're exact,
really, really exact <G>.

I'd recommend that you get a copy of Luke (google lucene luke) and
examine your index to see what you actually have in your index.

Also, you haven't provided us a clue what the actual query is. I'd
use Query.toString().

I suspect that the query is getting tokenized if you're using one
of the normal Analyzers...

Erick

On 4/5/07, Ryan O'Hara <ohara@genome.chop.edu> wrote:
>
> Hey,
>
> I was just wondering if you are supposed to be able to search on
> UN_TOKENIZED fields?  It seems like you can from the docs, but I have
> been unsuccessful.  I want to do exact string matching on a certain
> field without analyzer interference.
>
> Thanks,
> Ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_57887_7803430.1175800123483--

From java-user-return-27414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 19:59:03 2007
Return-Path: <java-user-return-27414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4930 invoked from network); 5 Apr 2007 19:59:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 19:59:02 -0000
Received: (qmail 70614 invoked by uid 500); 5 Apr 2007 19:59:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70581 invoked by uid 500); 5 Apr 2007 19:59:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70564 invoked by uid 99); 5 Apr 2007 19:59:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 12:59:01 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 12:58:53 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HZY6L-0007UC-AG
	for java-user@lucene.apache.org; Thu, 05 Apr 2007 12:58:33 -0700
Message-ID: <9862342.post@talk.nabble.com>
Date: Thu, 5 Apr 2007 12:58:33 -0700 (PDT)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Lucene for name matching
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I was wondering if anyone has done people name matching using Lucene.  For
example, I have a name coming from some external source that I would like to
match with the one I have in my DB.  Lets say my DB contains the name "John
Smith".  If the external source has something like "Smith John", "Smith,
John", "J. Smith", etc., I would like to rate this matching based on some %
of closeness for review later.  I've searched around a bit for algorithms
and I kept seeing the Levenshtein distance algorithm which I'm sure Lucene
uses under the hood.  So I trying to guage if Lucene is useful for doing
something specific as this, or are there better algorithms and/or software
out there that does name matching.  Thanks in advance!

-los
-- 
View this message in context: http://www.nabble.com/Lucene-for-name-matching-tf3533454.html#a9862342
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 20:04:07 2007
Return-Path: <java-user-return-27415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6365 invoked from network); 5 Apr 2007 20:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 20:04:05 -0000
Received: (qmail 78033 invoked by uid 500); 5 Apr 2007 20:04:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78001 invoked by uid 500); 5 Apr 2007 20:04:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77990 invoked by uid 99); 5 Apr 2007 20:04:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 13:04:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andrewhudson@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 13:03:57 -0700
Received: by an-out-0708.google.com with SMTP id c3so776193ana
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 13:03:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YumXse2lKnHPVPrSHlKYapzI8AfxV3It5cTjgYxsMDLQyXKByVsIL+umBszfaHut0PwiVklYf5HULFYzHAIesCYH8Mdag0mldt8mzwAx/JeRIz3q+VHEo/UY4Wgo80wZToU2Fyyml5xNDodBHaGMuxPZVpQl8X9c1meAGusVT6U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=aMQ/KOrpL0w3nybNG9JJd/CfGgoPWEkGtH5KWQcM6T0PbEOwmMi4dL8NohG+++5gipBndQMZhNhqq2O8LIzfQtjKc5jY6yMAXXyyRqthX2ZMm30D7ni9hQNZsNIuqajakQ4gAXmRcPLwf9YiToQ64azBdqUyIpjEt7p8/gFybeQ=
Received: by 10.100.127.1 with SMTP id z1mr1605087anc.1175803415540;
        Thu, 05 Apr 2007 13:03:35 -0700 (PDT)
Received: by 10.100.152.5 with HTTP; Thu, 5 Apr 2007 13:03:35 -0700 (PDT)
Message-ID: <9d8b72d90704051303y1a4d37dcwbb84b5ccfa39e323@mail.gmail.com>
Date: Thu, 5 Apr 2007 15:03:35 -0500
From: "Andrew Hudson" <andrewhudson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: short documents = help me tweak Similarity??
In-Reply-To: <925086.96042.qm@web50302.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <925086.96042.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The problem comes when your float value is encoded into that 8 bit
field norm, the 3 length and 4 length both become the same 8 bit
value.  Call Similarity.encodeNorm on the values you calculate for the
different numbers of terms and make sure they return different byte
values.

Andrew

On 4/5/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> As far as I know, this is the case where you want your custom Similarity that knows how to deal with a small number of terms.
>
>   public float lengthNorm(String fieldName, int numTerms) {
>     if (numTerms < N)
>       // return something smart
>     return (float)(1.0 / Math.sqrt(numTerms));
>   }
>
> I think the rest of what you said is correct.  Look at this piece of Similarity javadoc:
>
>
>  *      However the resulted <i>norm</i> value is {@link #encodeNorm(float) encoded} as a single byte
>  *      before being stored.
>  *      At search time, the norm byte value is read from the index
>  *      {@link org.apache.lucene.store.Directory directory} and
>  *      {@link #decodeNorm(byte) decoded} back to a float <i>norm</i> value.
>  *      This encoding/decoding, while reducing index size, comes with the price of
>  *      precision loss - it is not guaranteed that decode(encode(x)) = x.
>  *      For instance, decode(encode(0.89)) = 0.75.
>  *      Also notice that search time is too late to modify this <i>norm</i> part of scoring, e.g. by
>  *      using a different {@link Similarity} for search.
>
>
> If you come up with a more generic lengthNorm that dels with "overly short" documents/fields well, I'd love to know! :)
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: John Kleven <jkleven@vinquire.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, April 5, 2007 1:45:34 PM
> Subject: Re: short documents = help me tweak Similarity??
>
> Sorry to re-post -- is this the correct forum for questions like this?  I
> think that writing a new encode/decode operation should help alleviate my
> problem, but thought that this must be fairly widespread issue for people
> using lucene for "non-web-page" searches (i.e., shorter documents)
>
> Thanks again,
> John
>
> On 4/2/07, John Kleven <johnkleven@gmail.com> wrote:
> >
> > My documents are cars...
> > i.e.,
> > Nissan Altima Sports Package
> > Nissan Altima Standard
> >
> > The problem I have is when i search "Nissan Altima", I want to get the 2nd
> > hit back first, i.e. "Nissan Altima Standard", because it is shorter.
> > However, this doesn't happen.  They are both scored the exact same.
> >
> > I know that the lengthNorm in Similarity is using 1/sqrt(numTerms), and
> > you would think that would be enuff to make sure the order is correct.
> > However, it is not, and I assume this is because of the encode/decode
> > functions that pack this value into a single byte do not have the
> > granularity to represent differences between numbers like 1/sqrt(3) vs
> > 1/sqrt(4)??
> >
> > Is the suggested approach here to re-write the encode/decode operations,
> > or is there any easier way?
> >
> > Thanks kindly -
> > John
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 20:17:41 2007
Return-Path: <java-user-return-27416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15037 invoked from network); 5 Apr 2007 20:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 20:17:39 -0000
Received: (qmail 3349 invoked by uid 500); 5 Apr 2007 20:17:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3306 invoked by uid 500); 5 Apr 2007 20:17:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3295 invoked by uid 99); 5 Apr 2007 20:17:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 13:17:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 13:17:30 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 1A369109F23
	for <java-user@lucene.apache.org>; Thu,  5 Apr 2007 13:17:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <9862342.post@talk.nabble.com>
References: <9862342.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <99B199CC-E3D4-42CE-AAB0-B4419A95A2F4@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Lucene for name matching
Date: Thu, 5 Apr 2007 16:17:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It's like deja vu all over again.  I literally just finished up a  
similar task (about 2 hours ago).  I didn't use Lucene for it,  
although I suppose I could have.  Lucene does have the FuzzyQuery  
(http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/ 
javadoc/org/apache/lucene/search/FuzzyQuery.html) that uses  
Levenshtein as a place to start.

There are other string matching algorithms as well that are used in  
various approaches.  See http://en.wikipedia.org/wiki/Edit_distance.   
Googling record linkage may help.  From there, you can pretty much  
knock yourself out with all the different approaches

On Apr 5, 2007, at 3:58 PM, moraleslos wrote:

>
> I was wondering if anyone has done people name matching using  
> Lucene.  For
> example, I have a name coming from some external source that I  
> would like to
> match with the one I have in my DB.  Lets say my DB contains the  
> name "John
> Smith".  If the external source has something like "Smith John",  
> "Smith,
> John", "J. Smith", etc., I would like to rate this matching based  
> on some %
> of closeness for review later.  I've searched around a bit for  
> algorithms
> and I kept seeing the Levenshtein distance algorithm which I'm sure  
> Lucene
> uses under the hood.  So I trying to guage if Lucene is useful for  
> doing
> something specific as this, or are there better algorithms and/or  
> software
> out there that does name matching.  Thanks in advance!
>
> -los
> -- 
> View this message in context: http://www.nabble.com/Lucene-for-name- 
> matching-tf3533454.html#a9862342
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 20:34:05 2007
Return-Path: <java-user-return-27417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20996 invoked from network); 5 Apr 2007 20:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 20:34:04 -0000
Received: (qmail 29314 invoked by uid 500); 5 Apr 2007 20:34:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29288 invoked by uid 500); 5 Apr 2007 20:34:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29273 invoked by uid 99); 5 Apr 2007 20:34:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 13:34:04 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 13:33:55 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HZYeE-0004V0-U8
	for java-user@lucene.apache.org; Thu, 05 Apr 2007 13:33:34 -0700
Message-ID: <9863587.post@talk.nabble.com>
Date: Thu, 5 Apr 2007 13:33:34 -0700 (PDT)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene for name matching
In-Reply-To: <99B199CC-E3D4-42CE-AAB0-B4419A95A2F4@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
References: <9862342.post@talk.nabble.com> <99B199CC-E3D4-42CE-AAB0-B4419A95A2F4@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Grant!

Thanks for the reply.  I'll look into the links you suggested.  Just curious
though, what did you do to implement this--if you can spill some of the
beans  ;-)  You think what you did was better than the FuzzyQuery approach? 
Was it a custom algorithm or did you utilize some framework for this?  I
basically don't want to reinvent the wheel when doing this name matching
issue.  Thanks in advance!

-los



Grant Ingersoll-6 wrote:
> 
> It's like deja vu all over again.  I literally just finished up a  
> similar task (about 2 hours ago).  I didn't use Lucene for it,  
> although I suppose I could have.  Lucene does have the FuzzyQuery  
> (http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/ 
> javadoc/org/apache/lucene/search/FuzzyQuery.html) that uses  
> Levenshtein as a place to start.
> 
> There are other string matching algorithms as well that are used in  
> various approaches.  See http://en.wikipedia.org/wiki/Edit_distance.   
> Googling record linkage may help.  From there, you can pretty much  
> knock yourself out with all the different approaches
> 
> On Apr 5, 2007, at 3:58 PM, moraleslos wrote:
> 
>>
>> I was wondering if anyone has done people name matching using  
>> Lucene.  For
>> example, I have a name coming from some external source that I  
>> would like to
>> match with the one I have in my DB.  Lets say my DB contains the  
>> name "John
>> Smith".  If the external source has something like "Smith John",  
>> "Smith,
>> John", "J. Smith", etc., I would like to rate this matching based  
>> on some %
>> of closeness for review later.  I've searched around a bit for  
>> algorithms
>> and I kept seeing the Levenshtein distance algorithm which I'm sure  
>> Lucene
>> uses under the hood.  So I trying to guage if Lucene is useful for  
>> doing
>> something specific as this, or are there better algorithms and/or  
>> software
>> out there that does name matching.  Thanks in advance!
>>
>> -los
>> -- 
>> View this message in context: http://www.nabble.com/Lucene-for-name- 
>> matching-tf3533454.html#a9862342
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
> 
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
> LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-for-name-matching-tf3533454.html#a9863587
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 21:15:10 2007
Return-Path: <java-user-return-27418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34688 invoked from network); 5 Apr 2007 21:15:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 21:15:07 -0000
Received: (qmail 89839 invoked by uid 500); 5 Apr 2007 21:15:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89800 invoked by uid 500); 5 Apr 2007 21:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89783 invoked by uid 99); 5 Apr 2007 21:15:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 14:15:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 14:15:00 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Thu, 05 Apr 2007 17:18:07 -0500
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830704051208m4c28e343k4132008657ac2f5a@mail.gmail.com>
References: <4C668A51-B626-41C8-883A-79D5C240F3DF@genome.chop.edu> <359a92830704051208m4c28e343k4132008657ac2f5a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0EAA9B4F-BC53-43CB-89D1-EF108DC161CE@genome.chop.edu>
Content-Transfer-Encoding: 7bit
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Re: Not able to search on UN_TOKENIZED fields
Date: Thu, 5 Apr 2007 17:14:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Erick,

Thanks for the quick response.  I need a truly exact match.  What I  
ended up doing was using a TOKENIZED field, but altering the  
StandardAnalyzer's stop word list to include only the word/letter  
'a'.  Below is my searching code:

String[] stopWords = {"a"};
             StandardAnalyzer sa = new StandardAnalyzer(stopWords);
             QueryParser qp = new QueryParser("symbol", sa);
             Query queryPhrase = qp.parse(symbol.toUpperCase());
             Hits hits = searcher.search(queryPhrase);
             String hit;
             if(hits.length() > 0){
                 hit = hits.doc(0).get("count");
                 count = Integer.parseInt(hit);
             }

Is the reason it wasn't working due to the fact that I'm passing in a  
StandardAnalyzer?  I thought that maybe the searching mechanisms  
would be able to use or not use an analyzer according to what the  
field.index value is.

One other question that you may have an answer to:  I'm eventually  
going to need to alter the stop word list to include all default stop  
words, except those that match certain criteria.  Can this be done?

Thanks,
Ryan


On Apr 5, 2007, at 3:08 PM, Erick Erickson wrote:

> Yes, you can search on UN_TOKENIZED fields, but they're exact,
> really, really exact <G>.
>
> I'd recommend that you get a copy of Luke (google lucene luke) and
> examine your index to see what you actually have in your index.
>
> Also, you haven't provided us a clue what the actual query is. I'd
> use Query.toString().
>
> I suspect that the query is getting tokenized if you're using one
> of the normal Analyzers...
>
> Erick
>
> On 4/5/07, Ryan O'Hara <ohara@genome.chop.edu> wrote:
>>
>> Hey,
>>
>> I was just wondering if you are supposed to be able to search on
>> UN_TOKENIZED fields?  It seems like you can from the docs, but I have
>> been unsuccessful.  I want to do exact string matching on a certain
>> field without analyzer interference.
>>
>> Thanks,
>> Ryan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 21:40:47 2007
Return-Path: <java-user-return-27419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45387 invoked from network); 5 Apr 2007 21:40:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 21:40:46 -0000
Received: (qmail 32243 invoked by uid 500); 5 Apr 2007 21:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32104 invoked by uid 500); 5 Apr 2007 21:40:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32089 invoked by uid 99); 5 Apr 2007 21:40:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 14:40:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 14:40:39 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 40C475B764; Thu,  5 Apr 2007 14:40:19 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 368567F403
	for <java-user@lucene.apache.org>; Thu,  5 Apr 2007 14:40:19 -0700 (PDT)
Date: Thu, 5 Apr 2007 14:40:19 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Can Query.toString() output be parsed to the same query?
In-Reply-To: <4611D184.7050209@promptu.com>
Message-ID: <Pine.LNX.4.58.0704051437060.1304@hal.rescomp.berkeley.edu>
References: <4611D184.7050209@promptu.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I am new to Lucene. I find that the output
: of the Query.toString() method cannot be parsed
: back to the same query. Is it true? If it is
: true, I am wondering why not make the output of
: Query.toString() parsable to the same query again?

some of hte more simplified query classes generate a toString that is
parsable by the QueryParser -- but not all (because there are many more
types of queries then there are special markup in the QueryPArser to
denote them)

In general, no matter how robust a parser you might might write, you can
never get perfect reparsing of a Query.toString unless the "Analyzyer"
you use is extremely simplistic -- Analyzers are not required to be
transitive, ie: analysis(foo) == bar does not imply analysis(bar) == bar

(think of stemming for example)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 21:54:18 2007
Return-Path: <java-user-return-27420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53236 invoked from network); 5 Apr 2007 21:54:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 21:54:17 -0000
Received: (qmail 50206 invoked by uid 500); 5 Apr 2007 21:54:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50173 invoked by uid 500); 5 Apr 2007 21:54:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50155 invoked by uid 99); 5 Apr 2007 21:54:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 14:54:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 14:54:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1C0395B764; Thu,  5 Apr 2007 14:53:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 11CBF7F403
	for <java-user@lucene.apache.org>; Thu,  5 Apr 2007 14:53:50 -0700 (PDT)
Date: Thu, 5 Apr 2007 14:53:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: short documents = help me tweak Similarity??
In-Reply-To: <9d8b72d90704051303y1a4d37dcwbb84b5ccfa39e323@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704051451490.1304@hal.rescomp.berkeley.edu>
References: <925086.96042.qm@web50302.mail.re2.yahoo.com>
 <9d8b72d90704051303y1a4d37dcwbb84b5ccfa39e323@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The problem comes when your float value is encoded into that 8 bit
: field norm, the 3 length and 4 length both become the same 8 bit
: value.  Call Similarity.encodeNorm on the values you calculate for the
: different numbers of terms and make sure they return different byte
: values.

bingo.  You can't change encodeNorm and decodeNorm (because they are
static -- they need to work at query time regardless of what Similarity
was used at index time) but you can change the function of your length
norm to make small deviations in short lengths significant enough to
register even with the encoding.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 21:58:58 2007
Return-Path: <java-user-return-27421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56219 invoked from network); 5 Apr 2007 21:58:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 21:58:57 -0000
Received: (qmail 55096 invoked by uid 500); 5 Apr 2007 21:58:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54872 invoked by uid 500); 5 Apr 2007 21:58:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54861 invoked by uid 99); 5 Apr 2007 21:58:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 14:58:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 14:58:50 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2118A5B770; Thu,  5 Apr 2007 14:58:30 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 19C937F403
	for <java-user@lucene.apache.org>; Thu,  5 Apr 2007 14:58:30 -0700 (PDT)
Date: Thu, 5 Apr 2007 14:58:30 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Explanation from FunctionQuery
In-Reply-To: <739606.67714.qm@web90303.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0704051454330.1304@hal.rescomp.berkeley.edu>
References: <739606.67714.qm@web90303.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


1) which version of FunctionQuery are you using (from the solr repository
or from a Jira issue attachment?)
2) what is hte full stacktrace? (ie: which function/line is throwing the
Exception)

FunctionQuery supports explain just fine, not sure why you'd have
problems, oh wait ... i see exactly what hte problem is...

: The ms is a MultiSearcher.  I read that

...this is the implemnetation for MultiSearcher...

    public Explanation explain(Weight weight,int doc) {
      throw new UnsupportedOperationException();
    }

...it's got nothing to do with FunctionQuery.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 22:14:24 2007
Return-Path: <java-user-return-27422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63312 invoked from network); 5 Apr 2007 22:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 22:14:23 -0000
Received: (qmail 71846 invoked by uid 500); 5 Apr 2007 22:14:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71805 invoked by uid 500); 5 Apr 2007 22:14:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71794 invoked by uid 99); 5 Apr 2007 22:14:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 15:14:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 15:14:16 -0700
Received: by wx-out-0506.google.com with SMTP id i29so660787wxd
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 15:13:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AovH6hm/oFBWEdqjACJbykEmUIUsrbK3eiVqOguVWTUsZB4JzgjIaaYXtGgBYtpIWs+bS8RTP2ETGbkSYWPrQ0AqbZ8sucslJWGRuxc5f6jyYevw4y0heZTHBDOm/SSPFWECMa/Cw2xPEm365xdICakxQW82gP4v1E9dUebsOOs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tWan2M210E4lax2254cIftTdp7oStHKz+GNbVOLDW80yOU9YoBpkdU++tKMtmxQ8yuuQHVJJaOFwQwuzaRGhhJNXD0qZF68Xtm5le5wvcOfPsZAw38Ue9pBe3wvEbkxLavOUR6eMsFE/7xpob4ol+TkoqXF65SepUyZGPBy3zL0=
Received: by 10.114.156.1 with SMTP id d1mr928211wae.1175811234057;
        Thu, 05 Apr 2007 15:13:54 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Thu, 5 Apr 2007 15:13:53 -0700 (PDT)
Message-ID: <359a92830704051513x183249e5ifdd364434ed31126@mail.gmail.com>
Date: Thu, 5 Apr 2007 18:13:54 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Not able to search on UN_TOKENIZED fields
In-Reply-To: <0EAA9B4F-BC53-43CB-89D1-EF108DC161CE@genome.chop.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59843_31781797.1175811234000"
References: <4C668A51-B626-41C8-883A-79D5C240F3DF@genome.chop.edu>
	 <359a92830704051208m4c28e343k4132008657ac2f5a@mail.gmail.com>
	 <0EAA9B4F-BC53-43CB-89D1-EF108DC161CE@genome.chop.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59843_31781797.1175811234000
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below

On 4/5/07, Ryan O'Hara <ohara@genome.chop.edu> wrote:
>
> Hey Erick,
>
> Thanks for the quick response.  I need a truly exact match.  What I
> ended up doing was using a TOKENIZED field, but altering the
> StandardAnalyzer's stop word list to include only the word/letter
> 'a'.  Below is my searching code:



You're heading for a world of hurt here. I flat guarantee that you'll
spend a LOT of time tweaking this to get it right, because you're
not doing what you said you wanted to do, that is match exactly.
You said it yourself, you're "removing stop words" which is NOT exact
matching.

You need to make a clear statement of what you're trying to do
before too much longer. An example or two would help.

String[] stopWords = {"a"};
>              StandardAnalyzer sa = new StandardAnalyzer(stopWords);
>              QueryParser qp = new QueryParser("symbol", sa);
>              Query queryPhrase = qp.parse(symbol.toUpperCase());
>              Hits hits = searcher.search(queryPhrase);
>              String hit;
>              if(hits.length() > 0){
>                  hit = hits.doc(0).get("count");
>                  count = Integer.parseInt(hit);
>              }


You're uppercasing your search string. Did you index things
uppercased? Your QueryParser is trying to work on a field called
"symbol". Is that what you intend? I'm a bit confused when you
use the same word for the field and its value.



Is the reason it wasn't working due to the fact that I'm passing in a
> StandardAnalyzer?



I have no idea why it isn't working. You haven't provided the
query.toString() output. There's no evidence you've used
Luke to look at what you've indexed to know what to expect.
Without those two things, or a self-contained example I can only
guess.




I thought that maybe the searching mechanisms
> would be able to use or not use an analyzer according to what the
> field.index value is.


No, you can't do this. You can make a PerFieldAnalyzerWrapper to
process different *fields* with different analyzers, but not different
field *values*. Step back and consider that the purpose of an
Analyzer is to break up the token stream. Attaching
meaning to those tokens isn't part of an Analyzer's job. You
could create your own analyzer (see Lucene In Action) if you
wanted to do special operations on the tokens, but I really don't
think you need to go there.


One other question that you may have an answer to:  I'm eventually
> going to need to alter the stop word list to include all default stop
> words, except those that match certain criteria.  Can this be done?


Sure, this can be done. Again you've already done it with your
StandardAnalyzer constructor. But you better have *indexed*
the data with the same stop words removed or you'll be disappointed.
Again, you're doing something that directly contradicts
what you stated you are trying to do. So can you come up with
a better problem statement?


I'd also recommend that you use one of the other analyzers for a while
until you get a better feel for what Lucene is doing. StopAnalyzer comes
to mind.

Thanks,
> Ryan
>
>
> On Apr 5, 2007, at 3:08 PM, Erick Erickson wrote:
>
> > Yes, you can search on UN_TOKENIZED fields, but they're exact,
> > really, really exact <G>.
> >
> > I'd recommend that you get a copy of Luke (google lucene luke) and
> > examine your index to see what you actually have in your index.
> >
> > Also, you haven't provided us a clue what the actual query is. I'd
> > use Query.toString().
> >
> > I suspect that the query is getting tokenized if you're using one
> > of the normal Analyzers...
> >
> > Erick
> >
> > On 4/5/07, Ryan O'Hara <ohara@genome.chop.edu> wrote:
> >>
> >> Hey,
> >>
> >> I was just wondering if you are supposed to be able to search on
> >> UN_TOKENIZED fields?  It seems like you can from the docs, but I have
> >> been unsuccessful.  I want to do exact string matching on a certain
> >> field without analyzer interference.
> >>
> >> Thanks,
> >> Ryan
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_59843_31781797.1175811234000--

From java-user-return-27423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 22:44:50 2007
Return-Path: <java-user-return-27423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70665 invoked from network); 5 Apr 2007 22:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 22:44:50 -0000
Received: (qmail 875 invoked by uid 500); 5 Apr 2007 22:44:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 841 invoked by uid 500); 5 Apr 2007 22:44:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 830 invoked by uid 99); 5 Apr 2007 22:44:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 15:44:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nileshbansal@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 15:44:41 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1180951ugc
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 15:44:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FV6+kFbG2WNLiWHTZGP43fMpJQi/G6qGzTtDJ2LfBSI9vVCfJb4w1u95TPT+e+vySuIU+FphDPLTfsXvE7AOv28RqEApYNwvI0Gv+o0VflCdGGYgpaEmEF9KFVPQY8Q9o+rSZlmJl1z54jmJ48wkW7A6RPa1uOVytepLOrPY93Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=o0ZNQ0NCqnYftiXXpRpPNYZk7RRKkkanlt+J6rvE0HqP0aaNrNjFNACB6mSJAfWFGoTcMLhICymYdxUeP6P5n5a4PlzE9f8RNduxHPhz4f+omnVp5Jr7LHi26B16Rd/d45jJoqKwAkIPfm4DOtLGE/FXJH9c3XYWSzXl3/z7Jdc=
Received: by 10.82.153.5 with SMTP id a5mr3557358bue.1175813060517;
        Thu, 05 Apr 2007 15:44:20 -0700 (PDT)
Received: by 10.82.177.15 with HTTP; Thu, 5 Apr 2007 15:44:20 -0700 (PDT)
Message-ID: <f36128690704051544u23b32220s6748985160e7f8b1@mail.gmail.com>
Date: Thu, 5 Apr 2007 18:44:20 -0400
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene for name matching
In-Reply-To: <9862342.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <9862342.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/5/07, moraleslos <moraleslos@hotmail.com> wrote:
> something specific as this, or are there better algorithms and/or software
> out there that does name matching.  Thanks in advance!
Approximate string matching is an active research field. There are
many systems that implement different algorithms to do such
computation efficiently. The one I know of is SPIDER (not open source,
academic project)
http://queens.db.toronto.edu/project/spider/
Look at the web demo that searches strings approximately (there are
7-8 algorithms implemented that you can choose from):
http://queens.db.toronto.edu/project/spider/webdemo/

-Nilesh

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 22:47:25 2007
Return-Path: <java-user-return-27424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70993 invoked from network); 5 Apr 2007 22:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 22:47:25 -0000
Received: (qmail 4002 invoked by uid 500); 5 Apr 2007 22:47:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3967 invoked by uid 500); 5 Apr 2007 22:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3954 invoked by uid 99); 5 Apr 2007 22:47:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 15:47:26 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.104.16.214] (HELO web94304.mail.in2.yahoo.com) (203.104.16.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2007 15:47:18 -0700
Received: (qmail 50405 invoked by uid 60001); 5 Apr 2007 22:46:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=im7j/z1zDuMCg57yDY07/S4yI2CH4tuaDl7ol3VdZ0xwxraVnm4C8Emuc4qNr64vnmWNtJL31ho8j148rOQy+WLStrUKmx82+nZV9jcV4as6KKZt5oiSIKnhsR6mG/pf5kK4Jew6X73WtEaIuq8ybtvcD+4xdxhB7zWc61zwxrk=;
X-YMail-OSG: KED8NooVM1mx9RryC6x.6Yj3JWMG5aeCwmHc9QPJ
Received: from [202.177.160.125] by web94304.mail.in2.yahoo.com via HTTP; Thu, 05 Apr 2007 23:46:54 BST
Date: Thu, 5 Apr 2007 23:46:54 +0100 (BST)
From: nesrka sri <nesrka@yahoo.co.in>
Subject: multi user multi index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-598558648-1175813214=:35447"
Content-Transfer-Encoding: 8bit
Message-ID: <150856.35447.qm@web94304.mail.in2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-598558648-1175813214=:35447
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


Hi,

   Iam currently working on indexing the documents present in a web based document management system. The system currently has around 200,000 users and each user has approximately 10 to 100 documents.We currently have around 50 GB of data. The system should allow the users only to search across his/her documents.

Currently our system is designed such that each user has a separate index. The index size for each user is around 500KB to 5MB approx. For each document added by the user a indexwriter is created and for each search by the user a indexreader is created. ( I think it may not be a good idea). Can some throw some light on what kind of issues we might face with this kind of setup?

Or should we have a single index. add unique user id as a field in each document. Search with user id added as a filter.


Thanks,
nesrka


 				
---------------------------------
 Heres a new way to find what you're looking for - Yahoo! Answers 
--0-598558648-1175813214=:35447--

From java-user-return-27425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 05 23:46:32 2007
Return-Path: <java-user-return-27425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85246 invoked from network); 5 Apr 2007 23:46:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Apr 2007 23:46:30 -0000
Received: (qmail 56529 invoked by uid 500); 5 Apr 2007 23:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56499 invoked by uid 500); 5 Apr 2007 23:46:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56488 invoked by uid 99); 5 Apr 2007 23:46:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 16:46:30 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 16:46:22 -0700
Received: by wr-out-0506.google.com with SMTP id 69so483324wra
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 16:46:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AHNW+zNW2EzT35CcdmuujLT7vn6DiOMknfe8bR0Xa2ZIR9HWmsILjduBYK/iXik+su/22HYSo7VgW+CsFePBH4+KpqCfHMgjGSjjzCvU/qcwZJGwYsveAXp8h47k/0O4viGnk2N9a4Ndpvo0HEzMdrT2+yrs+75KGKjuyBxEm2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PWe0lkT05nkvxp03WyZZkDdh2OC6vN1zxS/bs6/3EBVlYkSchbwq4JdPd6AfJUmE9g9KRVpRYJTjuf2dxbFI3L9aBPTUw6nGsQGmKLLtoKKckyLquAMvCq5bYhaETg0aF78on0fM0c5CxrusOMmR1n01doK7avzM8ekJFw6xH6Y=
Received: by 10.114.113.1 with SMTP id l1mr979237wac.1175816761189;
        Thu, 05 Apr 2007 16:46:01 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Thu, 5 Apr 2007 16:46:01 -0700 (PDT)
Message-ID: <359a92830704051646o1dcb5e3aifcf162e81e366d4c@mail.gmail.com>
Date: Thu, 5 Apr 2007 19:46:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: multi user multi index?
In-Reply-To: <150856.35447.qm@web94304.mail.in2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60708_11112846.1175816761150"
References: <150856.35447.qm@web94304.mail.in2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60708_11112846.1175816761150
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What's the aggregate size of all your user indexes? And how many
servers could you potentially spread the load across? What kind
of queries do you allow? wildcards? simple term? Arbitrary Boolean
expressions? What kind of throughput are you expecting?


Opening and closing a reader for each search is generally a bad idea,
but so is having up to 200,000 concurrently open IndexReaders. Are you
having performance issues? Why do you feel the need to change
anything?

I'm really asking for significantly more information from you in
order to be able to give any meaningful reply....

Best
Erick

On 4/5/07, nesrka sri <nesrka@yahoo.co.in> wrote:
>
>
> Hi,
>
>    Iam currently working on indexing the documents present in a web based
> document management system. The system currently has around 200,000 users
> and each user has approximately 10 to 100 documents.We currently have
> around 50 GB of data. The system should allow the users only to search
> across his/her documents.
>
> Currently our system is designed such that each user has a separate index.
> The index size for each user is around 500KB to 5MB approx. For each
> document added by the user a indexwriter is created and for each search by
> the user a indexreader is created. ( I think it may not be a good idea). Can
> some throw some light on what kind of issues we might face with this kind of
> setup?
>
> Or should we have a single index. add unique user id as a field in each
> document. Search with user id added as a filter.
>
>
> Thanks,
> nesrka
>
>
>
> ---------------------------------
> Here's a new way to find what you're looking for - Yahoo! Answers

------=_Part_60708_11112846.1175816761150--

From java-user-return-27426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 01:09:27 2007
Return-Path: <java-user-return-27426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6979 invoked from network); 6 Apr 2007 01:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 01:09:25 -0000
Received: (qmail 50500 invoked by uid 500); 6 Apr 2007 01:09:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50457 invoked by uid 500); 6 Apr 2007 01:09:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50445 invoked by uid 99); 6 Apr 2007 01:09:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 18:09:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.37.63] (HELO web53502.mail.re2.yahoo.com) (206.190.37.63)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2007 18:09:16 -0700
Received: (qmail 76718 invoked by uid 60001); 6 Apr 2007 01:08:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=jyGBEcHpE0Rkc7eSQCXHExfSuezhxfc5T1LaMUvRrTnQ1B6L+o84L1oMle82Ep6QXmLKA/EXDCJS3e0l1ahgYruaLfGSdFbuM22bijhk1uqi/1koHFsIeKDv3zOZYTV42wN6edCAigpGAPUr6OM2tubd5eTF+t4tjwvoi2w9i/Y=  ;
Message-ID: <20070406010855.76716.qmail@web53502.mail.re2.yahoo.com>
X-YMail-OSG: j_ukgkgVM1lxT.ALiikSGtVedPwjLpJWYmcS_znmav6oUpUzFnMUF8yCAmUG9WUT2w--
Received: from [66.7.242.34] by web53502.mail.re2.yahoo.com via HTTP; Thu, 05 Apr 2007 18:08:55 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Thu, 5 Apr 2007 18:08:55 -0700 (PDT)
From: Craig W Conway <craigwconway@yahoo.com>
Subject: Re: How many Searches is a Searcher Worth?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-490732744-1175821735=:76033"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-490732744-1175821735=:76033
Content-Type: text/plain; charset=ascii

So, forgetting the RMI stuff, I put together a test client very similar to the one in the book "Lucene in Action" page 182. 

The  client:

1. instantiates a IndexSearcher
2. loops through queries, searches, prints hit count, saves nothing

I am only able to run through about 40 searches before I get an OutOfMemoryException.  JDK 1.5

Because of this, I have put a counter in my search server to close and re-open the IndexSearcher after a certian number of searches. But this shouldn't be necessary right? What's eating up all the memory?

Source code @ http://urbanmarsupial.com/share/TestLuceneMemory.java

Any hints would be greatly appreciated!

Thanks,

Craig

----- Original Message ----
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
To: java-user@lucene.apache.org
Sent: Wednesday, April 4, 2007 10:39:50 AM
Subject: Re: How many Searches is a Searcher Worth?

No reason that I can think of.  What makes you think the problem is with the IndexSearcher?  Maybe it's something else in your code, for instance.
Make sure you have the same version of Java on both ends of the call.  Also, Java 6 made our RMI calls a lot more stable than even 1.5.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Craig W Conway <craigwconway@yahoo.com>
To: java-user@lucene.apache.org
Sent: Wednesday, April 4, 2007 1:25:27 PM
Subject: How many Searches is a Searcher Worth?

I am using an RMI architecture for calling a remote service which uses an IndexSearcher in its own JVM. I am starting the service with the following provisions for memory allocation and garbage collection: java -server -Xmx1024m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC

After about 1000 search calls I start to run out of memory, and I have to close and re-open the IndexSearcher, loosing any cached data and filters... Is there any reason why I shouldn't be able to use my IndexSearcher forever, until I want to close it?

Thanks!

Craig




 
____________________________________________________________________________________
Now that's room service!  Choose from over 150,000 hotels
in 45,000 destinations on Yahoo! Travel to find your fit.
http://farechase.yahoo.com/promo-generic-14795097



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org








 
____________________________________________________________________________________
No need to miss a message. Get email on-the-go 
with Yahoo! Mail for Mobile. Get started.
http://mobile.yahoo.com/mail 
--0-490732744-1175821735=:76033--

From java-user-return-27427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 01:53:32 2007
Return-Path: <java-user-return-27427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21434 invoked from network); 6 Apr 2007 01:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 01:53:30 -0000
Received: (qmail 2563 invoked by uid 500); 6 Apr 2007 01:53:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2527 invoked by uid 500); 6 Apr 2007 01:53:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2516 invoked by uid 99); 6 Apr 2007 01:53:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 18:53:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of goodell@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 18:53:23 -0700
Received: by wx-out-0506.google.com with SMTP id i29so694755wxd
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 18:53:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=XlLlQ5lSiK2M1oPYGOhlWfuGNITh4LdL1ZLTnDPiv+yzdfd9gRdO0E71D2KPGmd18+oGaChpS+H3YqiIGzLTDMnTJGeQPcRKqGtq+OLaY9eYWgYTfPCFhcsCoOUJnqEkv7yzOdi2HNF+YZhL1XmffNMEGWT81bZ4IOTbJWwa2ag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=JOxi/aJk9NypGm77+xdZHGqhYnCOlyW/OCxVg+R70GkIWslO5H/oWVxkCs86W9bZH3XfSnDT53qW5TsHuwdEBPDpN899HWTV+6JomDxSAYDlwgdOZA0SXnWwTmsZKU1w8Y0h0ksqH+0ZxgzPX2DS0bYvp/SH/qf+cuT7ofDrBq4=
Received: by 10.115.54.1 with SMTP id g1mr1013356wak.1175824381786;
        Thu, 05 Apr 2007 18:53:01 -0700 (PDT)
Received: by 10.114.61.14 with HTTP; Thu, 5 Apr 2007 18:53:01 -0700 (PDT)
Message-ID: <55b2c6b90704051853x5986a6b0o9b6fb0eae6403045@mail.gmail.com>
Date: Thu, 5 Apr 2007 18:53:01 -0700
From: "Andy Goodell" <agoodell@discoverymining.com>
Sender: goodell@gmail.com
To: java-user@lucene.apache.org
Subject: Re: How many Searches is a Searcher Worth?
In-Reply-To: <20070406010855.76716.qmail@web53502.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1189_21934040.1175824381680"
References: <20070406010855.76716.qmail@web53502.mail.re2.yahoo.com>
X-Google-Sender-Auth: bd9a2fb6610d7a88
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1189_21934040.1175824381680
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My approach to dealing with these kinds of issues (which has worked well for
me thus far) is:

- Run java with -XX:+HeapDumpOnOutOfMemoryError command-line option
- use jhat to inspect the heap dump, like so:
$ /usr/java/jdk1.6/bin/jhat ./java_pid1347.hprof

jhat will take a while to parse the heap dump, and will start an http
listener on port 7000 by default.

Interesting statistics can be found at the bottom of the front page.  These
will enable you to discover whether it is a memory leak in the java runtime
or in the lucene library.

- andy g



On 4/5/07, Craig W Conway <craigwconway@yahoo.com> wrote:
>
> So, forgetting the RMI stuff, I put together a test client very similar to
> the one in the book "Lucene in Action" page 182.
>
> The  client:
>
> 1. instantiates a IndexSearcher
> 2. loops through queries, searches, prints hit count, saves nothing
>
> I am only able to run through about 40 searches before I get an
> OutOfMemoryException.  JDK 1.5
>
> Because of this, I have put a counter in my search server to close and
> re-open the IndexSearcher after a certian number of searches. But this
> shouldn't be necessary right? What's eating up all the memory?
>
> Source code @ http://urbanmarsupial.com/share/TestLuceneMemory.java
>
> Any hints would be greatly appreciated!
>
> Thanks,
>
> Craig
>
> ----- Original Message ----
> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, April 4, 2007 10:39:50 AM
> Subject: Re: How many Searches is a Searcher Worth?
>
> No reason that I can think of.  What makes you think the problem is with
> the IndexSearcher?  Maybe it's something else in your code, for instance.
> Make sure you have the same version of Java on both ends of the
> call.  Also, Java 6 made our RMI calls a lot more stable than even 1.5.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Craig W Conway <craigwconway@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, April 4, 2007 1:25:27 PM
> Subject: How many Searches is a Searcher Worth?
>
> I am using an RMI architecture for calling a remote service which uses an
> IndexSearcher in its own JVM. I am starting the service with the following
> provisions for memory allocation and garbage collection: java -server
> -Xmx1024m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC
>
> After about 1000 search calls I start to run out of memory, and I have to
> close and re-open the IndexSearcher, loosing any cached data and filters...
> Is there any reason why I shouldn't be able to use my IndexSearcher forever,
> until I want to close it?
>
> Thanks!
>
> Craig
>
>
>
>
>
>
> ____________________________________________________________________________________
> Now that's room service!  Choose from over 150,000 hotels
> in 45,000 destinations on Yahoo! Travel to find your fit.
> http://farechase.yahoo.com/promo-generic-14795097
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>
>
>
> ____________________________________________________________________________________
> No need to miss a message. Get email on-the-go
> with Yahoo! Mail for Mobile. Get started.
> http://mobile.yahoo.com/mail

------=_Part_1189_21934040.1175824381680--

From java-user-return-27428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 02:05:26 2007
Return-Path: <java-user-return-27428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26516 invoked from network); 6 Apr 2007 02:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 02:05:25 -0000
Received: (qmail 19359 invoked by uid 500); 6 Apr 2007 02:05:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19325 invoked by uid 500); 6 Apr 2007 02:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19314 invoked by uid 99); 6 Apr 2007 02:05:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 19:05:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 19:05:17 -0700
Received: by an-out-0708.google.com with SMTP id c3so861390ana
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 19:04:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VovQ4l6Wrft35vcznLibrwY6sDFex3LroQ0vlk6qL/bb+5qEpR0SCYxcEL89aMXpOh4sRvbAgpAF73/NcGfMtdh+2xaGaamfgR2hllhx/peWmuzVTe0C6qi6bwPBk0k01SFXhpJZXbuRzRrnsgfb7u3naJBS8GVpQfE9ZLvQGc4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JyrMV9QIn241Fao8TPpw596srDTOhs4U+PdPhWdhIhaNolC5ERmlyY4+0ZLaw1epVaa2VByoXCFpz1cUARIqowLcD68YKBSft/zgx0bjg3AHwD9DmdjsRvB4yiAtnobg6nCzwS3kd6qQyjDeKDsuP3rQjrh//Ow5c2sX9HJDWVQ=
Received: by 10.115.17.1 with SMTP id u1mr1015443wai.1175825095699;
        Thu, 05 Apr 2007 19:04:55 -0700 (PDT)
Received: by 10.114.58.3 with HTTP; Thu, 5 Apr 2007 19:04:55 -0700 (PDT)
Message-ID: <359a92830704051904y58450fb0he1e6f5b3e1dbe69e@mail.gmail.com>
Date: Thu, 5 Apr 2007 22:04:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How many Searches is a Searcher Worth?
In-Reply-To: <20070406010855.76716.qmail@web53502.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_962_21402806.1175825095607"
References: <20070406010855.76716.qmail@web53502.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_962_21402806.1175825095607
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Having to put a counter in and close/open your searcher should not
be necessary. I'm afraid I'm not going to be very helpful, because....

I took your test case and made some very minor modifications
to make it run in an environment I happen to have lying around
(mostly, just instantiated the QueryParser with a field known
to be in my index). I generated a list of all the terms in that field
in my index for the queries.txt file and let it rip.

It executed 1,599,586 queries. Admittedly, they were for one and
only one term each. Each search had just a few hits because of
the peculiarities of my index, usually less than 5.

Just for yucks, I tried instantiating the QueryParser with "", and
tacking my index field in front of the terms I read from queries.txt.
Still no problem.

I'm running Lucene 2.1, JDK 1.5, and running the code from inside
Eclipse on a Windows XP box. I think the Eclipse JVM only
allocates 128M to processes by default......

So, the only thing that comes to mind is the extremely sticky wicket
of the environment you're running in. I wonder if it's possible you're
CLASSPATH is getting incompatible jar files somehow? Perhaps
some jars are coming from from an older JVM? I'm grasping at straws
here.....

We have production systems running complex queries for days at
a time and are processing far more than 40 queries, with no problems
so I'm pretty sure it's not Lucene, but something peculiar to your
environment.

If you're running a Windows machine, depending on how it was
installed, sometimes the java installation process
will put files in one of the Windows system directories so it's possible
that you're hitting something in there even though you aren't trying....

Kudos for writing that test program, by the way. It sure removed
a lot of variables from the situation.

Best
Erick@ItWorksOnMyMachine......

On 4/5/07, Craig W Conway <craigwconway@yahoo.com> wrote:
>
> So, forgetting the RMI stuff, I put together a test client very similar to
> the one in the book "Lucene in Action" page 182.
>
> The  client:
>
> 1. instantiates a IndexSearcher
> 2. loops through queries, searches, prints hit count, saves nothing
>
> I am only able to run through about 40 searches before I get an
> OutOfMemoryException.  JDK 1.5
>
> Because of this, I have put a counter in my search server to close and
> re-open the IndexSearcher after a certian number of searches. But this
> shouldn't be necessary right? What's eating up all the memory?
>
> Source code @ http://urbanmarsupial.com/share/TestLuceneMemory.java
>
> Any hints would be greatly appreciated!
>
> Thanks,
>
> Craig
>
> ----- Original Message ----
> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, April 4, 2007 10:39:50 AM
> Subject: Re: How many Searches is a Searcher Worth?
>
> No reason that I can think of.  What makes you think the problem is with
> the IndexSearcher?  Maybe it's something else in your code, for instance.
> Make sure you have the same version of Java on both ends of the
> call.  Also, Java 6 made our RMI calls a lot more stable than even 1.5.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Craig W Conway <craigwconway@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, April 4, 2007 1:25:27 PM
> Subject: How many Searches is a Searcher Worth?
>
> I am using an RMI architecture for calling a remote service which uses an
> IndexSearcher in its own JVM. I am starting the service with the following
> provisions for memory allocation and garbage collection: java -server
> -Xmx1024m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC
>
> After about 1000 search calls I start to run out of memory, and I have to
> close and re-open the IndexSearcher, loosing any cached data and filters...
> Is there any reason why I shouldn't be able to use my IndexSearcher forever,
> until I want to close it?
>
> Thanks!
>
> Craig
>
>
>
>
>
>
> ____________________________________________________________________________________
> Now that's room service!  Choose from over 150,000 hotels
> in 45,000 destinations on Yahoo! Travel to find your fit.
> http://farechase.yahoo.com/promo-generic-14795097
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>
>
>
> ____________________________________________________________________________________
> No need to miss a message. Get email on-the-go
> with Yahoo! Mail for Mobile. Get started.
> http://mobile.yahoo.com/mail

------=_Part_962_21402806.1175825095607--

From java-user-return-27429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 02:44:07 2007
Return-Path: <java-user-return-27429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34839 invoked from network); 6 Apr 2007 02:44:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 02:44:06 -0000
Received: (qmail 59655 invoked by uid 500); 6 Apr 2007 02:44:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59625 invoked by uid 500); 6 Apr 2007 02:44:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59614 invoked by uid 99); 6 Apr 2007 02:44:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 19:44:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.37.62] (HELO web53501.mail.re2.yahoo.com) (206.190.37.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2007 19:43:57 -0700
Received: (qmail 98136 invoked by uid 60001); 6 Apr 2007 02:43:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=iolc0LAMaez19lh/3BtDIgTlHhFWwWh42DkosC/LNaj43wHIgHTjWZtioJtCGEB5rB8kyTdXQg7wibAP/33NBXmqRqAqKBtAAdmwDat1a5dUhI9Z1fyIYAb3tgXObZZheh5LU4MVC7LZtopefySySvflH2ycET3h2VnUBstnEqU=  ;
Message-ID: <20070406024336.98134.qmail@web53501.mail.re2.yahoo.com>
X-YMail-OSG: znPjOK0VM1mCQQJtXT.by4AGTwvhS_AajicrYBToUs4B84LLnKgF_As..mapDhLLr4qIrTR1Xexm.f4xsp4wW4e5kS_7eR3zF_ad
Received: from [71.202.127.219] by web53501.mail.re2.yahoo.com via HTTP; Thu, 05 Apr 2007 19:43:36 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Thu, 5 Apr 2007 19:43:36 -0700 (PDT)
From: Craig W Conway <craigwconway@yahoo.com>
Subject: Re: How many Searches is a Searcher Worth?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1909306441-1175827416=:97556"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1909306441-1175827416=:97556
Content-Type: text/plain; charset=ascii

Wow. Thanks Erick! So I guess the issue isn't with the test code...

I wonder what kind of environmental problem I could have? I am also running on XP with JDK 1.5, Lucene 2.1, default memory and gc... The queries I am running are a bit more complex, and return 0-10,000 hits. When I close and re-open the IndexSearcher, all the memory get's gc'd fine. But if I leave it open it runs out of memory fast...

I run the test program through ant so that I can specify all my java versions, jars, and classpaths without referencing system vars.


----- Original Message ----
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, April 5, 2007 7:04:55 PM
Subject: Re: How many Searches is a Searcher Worth?

Having to put a counter in and close/open your searcher should not
be necessary. I'm afraid I'm not going to be very helpful, because....

I took your test case and made some very minor modifications
to make it run in an environment I happen to have lying around
(mostly, just instantiated the QueryParser with a field known
to be in my index). I generated a list of all the terms in that field
in my index for the queries.txt file and let it rip.

It executed 1,599,586 queries. Admittedly, they were for one and
only one term each. Each search had just a few hits because of
the peculiarities of my index, usually less than 5.

Just for yucks, I tried instantiating the QueryParser with "", and
tacking my index field in front of the terms I read from queries.txt.
Still no problem.

I'm running Lucene 2.1, JDK 1.5, and running the code from inside
Eclipse on a Windows XP box. I think the Eclipse JVM only
allocates 128M to processes by default......

So, the only thing that comes to mind is the extremely sticky wicket
of the environment you're running in. I wonder if it's possible you're
CLASSPATH is getting incompatible jar files somehow? Perhaps
some jars are coming from from an older JVM? I'm grasping at straws
here.....

We have production systems running complex queries for days at
a time and are processing far more than 40 queries, with no problems
so I'm pretty sure it's not Lucene, but something peculiar to your
environment.

If you're running a Windows machine, depending on how it was
installed, sometimes the java installation process
will put files in one of the Windows system directories so it's possible
that you're hitting something in there even though you aren't trying....

Kudos for writing that test program, by the way. It sure removed
a lot of variables from the situation.

Best
Erick@ItWorksOnMyMachine......

On 4/5/07, Craig W Conway <craigwconway@yahoo.com> wrote:
>
> So, forgetting the RMI stuff, I put together a test client very similar to
> the one in the book "Lucene in Action" page 182.
>
> The  client:
>
> 1. instantiates a IndexSearcher
> 2. loops through queries, searches, prints hit count, saves nothing
>
> I am only able to run through about 40 searches before I get an
> OutOfMemoryException.  JDK 1.5
>
> Because of this, I have put a counter in my search server to close and
> re-open the IndexSearcher after a certian number of searches. But this
> shouldn't be necessary right? What's eating up all the memory?
>
> Source code @ http://urbanmarsupial.com/share/TestLuceneMemory.java
>
> Any hints would be greatly appreciated!
>
> Thanks,
>
> Craig
>
> ----- Original Message ----
> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, April 4, 2007 10:39:50 AM
> Subject: Re: How many Searches is a Searcher Worth?
>
> No reason that I can think of.  What makes you think the problem is with
> the IndexSearcher?  Maybe it's something else in your code, for instance.
> Make sure you have the same version of Java on both ends of the
> call.  Also, Java 6 made our RMI calls a lot more stable than even 1.5.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Craig W Conway <craigwconway@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, April 4, 2007 1:25:27 PM
> Subject: How many Searches is a Searcher Worth?
>
> I am using an RMI architecture for calling a remote service which uses an
> IndexSearcher in its own JVM. I am starting the service with the following
> provisions for memory allocation and garbage collection: java -server
> -Xmx1024m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC
>
> After about 1000 search calls I start to run out of memory, and I have to
> close and re-open the IndexSearcher, loosing any cached data and filters...
> Is there any reason why I shouldn't be able to use my IndexSearcher forever,
> until I want to close it?
>
> Thanks!
>
> Craig
>
>
>
>
>
>
> ____________________________________________________________________________________
> Now that's room service!  Choose from over 150,000 hotels
> in 45,000 destinations on Yahoo! Travel to find your fit.
> http://farechase.yahoo.com/promo-generic-14795097
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>
>
>
> ____________________________________________________________________________________
> No need to miss a message. Get email on-the-go
> with Yahoo! Mail for Mobile. Get started.
> http://mobile.yahoo.com/mail







 
____________________________________________________________________________________
Never miss an email again!
Yahoo! Toolbar alerts you the instant new Mail arrives.
http://tools.search.yahoo.com/toolbar/features/mail/
--0-1909306441-1175827416=:97556--

From java-user-return-27430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 04:14:00 2007
Return-Path: <java-user-return-27430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67013 invoked from network); 6 Apr 2007 04:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 04:14:00 -0000
Received: (qmail 49618 invoked by uid 500); 6 Apr 2007 04:14:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49581 invoked by uid 500); 6 Apr 2007 04:14:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49568 invoked by uid 99); 6 Apr 2007 04:14:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 21:14:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of johnkleven@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 21:13:52 -0700
Received: by an-out-0708.google.com with SMTP id c3so884078ana
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 21:13:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=iTBpLLhn1g1Ov1C/LtHbZGOEmRKOcv1zjSwmtO6sdByxreJRcwwdNYuYX/w7IlBnw2GEG0grvLNcMjPZUrYSm8VsrcgyG/nnNzG5EkXJ/QNlD9S4u0uOYPDzfQongcdnSNa5AYVLsaN7hQvRsTwNKxGdKjRh2PJAdc/v0zD3nvA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=lThM4Y2yj+nuibjlYLBKOaHVYT0Ycn4sH6eT5f8fx9P0f/E2DCbNTNdRet97fVkz32jn3bhZXdEHriZ8rUhPUaXzG3tj2IGh9oointYnkm/d/YxBgBGtUxAzz0p55z+F1fZVy6EjoVlobLR898YTQoiEQuw4CB0+u8xsDn26T3w=
Received: by 10.114.210.2 with SMTP id i2mr1074160wag.1175832810436;
        Thu, 05 Apr 2007 21:13:30 -0700 (PDT)
Received: by 10.114.15.12 with HTTP; Thu, 5 Apr 2007 21:13:30 -0700 (PDT)
Message-ID: <94243d370704052113yda72ccfx9aaaa4dce37410be@mail.gmail.com>
Date: Thu, 5 Apr 2007 21:13:30 -0700
From: "John Kleven" <jkleven@vinquire.com>
Sender: johnkleven@gmail.com
To: java-user@lucene.apache.org
Subject: Re: short documents = help me tweak Similarity??
In-Reply-To: <Pine.LNX.4.58.0704051451490.1304@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1926_5527928.1175832810387"
References: <925086.96042.qm@web50302.mail.re2.yahoo.com>
	 <9d8b72d90704051303y1a4d37dcwbb84b5ccfa39e323@mail.gmail.com>
	 <Pine.LNX.4.58.0704051451490.1304@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: 4101c2a684bed9de
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1926_5527928.1175832810387
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you kindly for the responses.

This was the solution that I dreamed up initially as well (overriding
lengthNorm) and making the returned values for small numTerms values (e.g. 3
and 4) more discrete.

So I did that in multiple ways, and I ran into a different problem.  If
lengthNorm returns something like this...
numTerms    return from lengthNorm()
1                  2.4
2                  2.0
3                  1.6
4                  1.2
5                  0.8
>5                1/sqrt(numTerms)

...you wind up with a weird situation.  What happens is that for a document
like "Nissan Altima SE Sports Package Sunroof CD 2003" -- imagine someone
searching for that exact document with the exact search string (i.e, they
literally search "Nissan Altima SE Sports Package Sunroof CD 2003") then the
*wrong* hits bubble to the top, e.g., "Nissan Altima Sports Package" will be
the #1 hit even though there was an exact document matching every term.

So then i tried a bunch of different lengthNorm implementations (because
obviously the example lengthNorm above is drastic) ... some drastic (ala the
example above) and some less drastic but still hopefully allowing a big
enough lengthNorm value so that encode/decode would still see a difference
in search length.

And i've yet to be able to find a happy medium that works.  I know that i'm
doing something stupid, or not understanding the scoring algorithm enough (
i.e., there's another part of the similarity class that should take into
account when you have lots of search terms and corresponding matches) but I
just couldn't find a way to make it happen.

This is why i was wondering if could just overload encode/decode in both my
indexer and searcher, and thereby just avoid this whole thing entirely.  But
apparently that isn't a solution either?

Also, i don't understand why the encode/decode functions have a range of
7x10^9 to 2x10^-9, when it seems to me the most common values are (boosts
set to 1.0) something between 1.0 and 0.  When would somebody have a monster
huge value like 7x10^9?  Even with a huge index time boost of 20.0 or
something, why would the encode/decode need a range as huge as the current
implementation?

I know I am missing something.  Thanks so much for the reponses, I've been
playing with this for so long I knew it was time to post a message and get
to the bottom of this.  Thank u again -
J



On 4/5/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : The problem comes when your float value is encoded into that 8 bit
> : field norm, the 3 length and 4 length both become the same 8 bit
> : value.  Call Similarity.encodeNorm on the values you calculate for the
> : different numbers of terms and make sure they return different byte
> : values.
>
> bingo.  You can't change encodeNorm and decodeNorm (because they are
> static -- they need to work at query time regardless of what Similarity
> was used at index time) but you can change the function of your length
> norm to make small deviations in short lengths significant enough to
> register even with the encoding.
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1926_5527928.1175832810387--

From java-user-return-27431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 05:05:26 2007
Return-Path: <java-user-return-27431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78400 invoked from network); 6 Apr 2007 05:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 05:05:25 -0000
Received: (qmail 97696 invoked by uid 500); 6 Apr 2007 05:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97664 invoked by uid 500); 6 Apr 2007 05:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97652 invoked by uid 99); 6 Apr 2007 05:05:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 22:05:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andrewhudson@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 22:05:17 -0700
Received: by an-out-0708.google.com with SMTP id c3so892148ana
        for <java-user@lucene.apache.org>; Thu, 05 Apr 2007 22:04:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kMUt6hnKjlV8XgLI2oZAjyEzAiVl6BbuTxzqkaFFtkfCHxegoLhsonWtrvPCAOwFP+pSCuSCN1kpaQELeb4gNjgTc8O4g8WVjLWyQbDiaDmVwKPSisT3pUxem1H4GanfcuMMUnyFT9s1CqlooTrsFM3RFB/zqfxeQXnRNbcx1TE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=r8NpgOmwXCqWmuyrkouHCqghksyZ0fmRXpwFh5tznS9MxfcxuAly9ds62VDODpUgzYtGKdTBP1/aS9UewqH/ae7F6vcvS+zFqLtFMyrhZmy2RF1qZXwWKVq9rMfIxrLY31exs2/EothJ9I5sgXnnOT9y14oQ1cT1dyo/K+eIQvo=
Received: by 10.100.197.15 with SMTP id u15mr1827996anf.1175835896388;
        Thu, 05 Apr 2007 22:04:56 -0700 (PDT)
Received: by 10.100.152.5 with HTTP; Thu, 5 Apr 2007 22:04:56 -0700 (PDT)
Message-ID: <9d8b72d90704052204o13beab3eo4ed6dd126d0e54e3@mail.gmail.com>
Date: Fri, 6 Apr 2007 00:04:56 -0500
From: "Andrew Hudson" <andrewhudson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: short documents = help me tweak Similarity??
In-Reply-To: <94243d370704052113yda72ccfx9aaaa4dce37410be@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <925086.96042.qm@web50302.mail.re2.yahoo.com>
	 <9d8b72d90704051303y1a4d37dcwbb84b5ccfa39e323@mail.gmail.com>
	 <Pine.LNX.4.58.0704051451490.1304@hal.rescomp.berkeley.edu>
	 <94243d370704052113yda72ccfx9aaaa4dce37410be@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

 > Also, i don't understand why the encode/decode functions have a range of
> 7x10^9 to 2x10^-9, when it seems to me the most common values are (boosts
> set to 1.0) something between 1.0 and 0.  When would somebody have a monster
> huge value like 7x10^9?  Even with a huge index time boost of 20.0 or
> something, why would the encode/decode need a range as huge as the current
> implementation?

I have often asked myself the same thing, I have just tried to avoid
depending on the field norms if possible.  For instance, if you have
your own array of how long each of your fields are you can just boost
the documents however you want in your HitCollector by looking up the
value in your array using the docId.  That is the approach we have
generally taken in our application.  You can get how many terms are in
each field by creating an array of length maxDoc and then iterating
over all of the TermPositions for that field and remembering the
maximum position that you saw for each document.  This array is also
useful for implementing exact phrase matching, so suppose someone
wants documents that match *exactly* "Nissan Altima", you would do a
phrase search for "Nissan Altima" and then just ignore all the results
that do not have exactly two terms in that field.  For example "Nissan
Altima Standard" would match that query but you would see in your
array that it has 3 terms, when you only care about results that have
2 terms.  But you have to implement your own HitCollector object and
use that instead of using the "Hits" interface.  To get an idea of how
to do that you can look at the HitCollector that the Hits object uses.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 05:27:29 2007
Return-Path: <java-user-return-27432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86667 invoked from network); 6 Apr 2007 05:27:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 05:27:27 -0000
Received: (qmail 25679 invoked by uid 500); 6 Apr 2007 05:27:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25653 invoked by uid 500); 6 Apr 2007 05:27:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25641 invoked by uid 99); 6 Apr 2007 05:27:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 22:27:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 22:27:20 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HZgyR-0000tL-Ea
	for java-user@lucene.apache.org; Thu, 05 Apr 2007 22:26:59 -0700
Message-ID: <9867984.post@talk.nabble.com>
Date: Thu, 5 Apr 2007 22:26:59 -0700 (PDT)
From: Leon <lmikhailov@netzero.net>
To: java-user@lucene.apache.org
Subject: Re: indexing and searching real numbers
In-Reply-To: <317531.80119.qm@web50302.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: lmikhailov@netzero.net
References: <9859816.post@talk.nabble.com> <317531.80119.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply Otis,

wquery.toString()  returns  westbc:[* TO =03????]
query.toString() returns westbc:[* TO =03????]

If I compare these two strings for equality like
wquery.toString().equals(query.toString()) I get true. I also got bytes of
those strings and compared them bytewise - they are equal this way too.

Ideas are welcome.

Leonid


Otis Gospodnetic wrote:
>=20
> You can't really rely on Query.toString() to produce a valid query
> identical to the query in that Query instance.  Are you sure both produce
> the same query string?  You didn't include that.
>=20
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>=20
> ----- Original Message ----
> From: Leon <lmikhailov@netzero.net>
> To: java-user@lucene.apache.org
> Sent: Thursday, April 5, 2007 1:38:14 PM
> Subject: indexing and searching real numbers
>=20
>=20
> Hello everybody,
>=20
> I need to index and search real numbers in Lucene. I found NumberUtils
> class
> in Solr project which permits one to encode doubles into string so that
> alpha numeric ordering would correctly correspond to the ordering on
> numbers. When I use ConstantScoreRangeQuery programmatically everything
> works just fine. However when I convert this query to a string, parse it
> with QueryParser and use the resulting query =E2=80=93 no result are foun=
d.
>=20
> ConstantScoreRangeQuery wquery =3D=20
>   new ConstantScoreRangeQuery("westbc", null,
> NumberUtils.double2sortableStr(-110.500000), false, true);
> Hits hits =3D is.search(wquery); //returns expected results
>=20
> Now if I do
>=20
> String wqueryString =3D wquery.toString();
> QueryParser queryParser =3D new QueryParser("westbc", new
> KeywordAnalyzer());
> Query query =3D queryParser.parse(wqueryString);
> Hits hits =3D is.search(query); // returns nothing
>=20
> Interesting is that System.out.println(wquery.toString()) looks exactly
> the
> same as System.out.println(query.toString()).
>=20
> Any ideas welcome.
>=20
> Thanks,
>=20
> Leon
> --=20
> View this message in context:
> http://www.nabble.com/indexing-and-searching-real-numbers-tf3532728.html#=
a9859816
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/indexing-and-searching-=
real-numbers-tf3532728.html#a9867984
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 06:02:08 2007
Return-Path: <java-user-return-27433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6591 invoked from network); 6 Apr 2007 06:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 06:02:08 -0000
Received: (qmail 65385 invoked by uid 500); 6 Apr 2007 06:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65347 invoked by uid 500); 6 Apr 2007 06:02:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65336 invoked by uid 99); 6 Apr 2007 06:02:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 23:02:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2007 23:02:01 -0700
Received: (qmail 34026 invoked by uid 60001); 6 Apr 2007 06:01:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=D9KHTAbcM5YFB0nPTeqYIuQX0Jpz6gVE1dX6M4FesWLG5fYTBcQVK+yRN6ehpynVMZIYN+pi5CNBcYVM7VNDu6glxeSwBDaZI8IEx9TzwAM7QI75K5VkNtKQO9lyCQbmixBPczwMh1sbJhWBCU+z5BszXK4/KZz2CxZmGw95Jbc=;
X-YMail-OSG: RWCdLvIVM1nnwB3sy93aYMaclS4xk.l4c4yhR7VhiXLH7AYjBV9hplyRV.g52h0r0bztyvK7ta81acwBujDKTM0ovQ--
Received: from [63.192.54.62] by web50309.mail.re2.yahoo.com via HTTP; Thu, 05 Apr 2007 23:01:36 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Thu, 5 Apr 2007 23:01:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: multi user multi index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-7
Content-Transfer-Encoding: quoted-printable
Message-ID: <664508.32908.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Simpy.com has a similar setup.  You have to be careful about open files, ma=
king sure you don't run out of open file descriptors.  You'll also want to =
minimize IndexReader/Searcher/Writer open/close as much as you can.  The go=
od side of this setup is that searches go against small indices, you don't =
need to always add "AND user:XXX", and if anything goes wrong with one user=
's index, it's easy and fast to rebuild.=0A=0AOtis=0A . . . . . . . . . . .=
 . . . . . . . . . . . . . . . . . . .=0ASimpy -- http://www.simpy.com/  - =
 Tag  -  Search  -  Share=0A=0A----- Original Message ----=0AFrom: nesrka s=
ri <nesrka@yahoo.co.in>=0ATo: java-user@lucene.apache.org=0ASent: Thursday,=
 April 5, 2007 6:46:54 PM=0ASubject: multi user multi index?=0A=0A=0AHi,=0A=
=0A   Iam currently working on indexing the documents present in a web base=
d document management system. The system currently has around 200,000 users=
 and each user has approximately 10 to 100 documents.We currently have arou=
nd 50 GB of data. The system should allow the users only to search across h=
is/her documents.=0A=0ACurrently our system is designed such that each user=
 has a separate index. The index size for each user is around 500KB to 5MB =
approx. For each document added by the user a indexwriter is created and fo=
r each search by the user a indexreader is created. ( I think it may not be=
 a good idea). Can some throw some light on what kind of issues we might fa=
ce with this kind of setup?=0A=0AOr should we have a single index. add uniq=
ue user id as a field in each document. Search with user id added as a filt=
er.=0A=0A=0AThanks,=0Anesrka=0A=0A=0A                 =0A------------------=
---------------=0A Here=A2s a new way to find what you're looking for - Yah=
oo! Answers =0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 06:10:01 2007
Return-Path: <java-user-return-27434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8257 invoked from network); 6 Apr 2007 06:10:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 06:10:00 -0000
Received: (qmail 74457 invoked by uid 500); 6 Apr 2007 06:09:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74434 invoked by uid 500); 6 Apr 2007 06:09:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74423 invoked by uid 99); 6 Apr 2007 06:09:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 23:09:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2007 23:09:49 -0700
Received: (qmail 71962 invoked by uid 60001); 6 Apr 2007 06:09:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=C7CO0ZDEn3ejYDg/lDm2jvb6QWx39rRHPEBL1s6QGa2e+hZkWaIHcLFLVlfWNpVuNC7R1BzR+edEra0y500XttOiycaaZnbdCVZtUOVq4ZoxYbNwABqEXh2c26CcRf6UlPRUqoiuTDXEsiJ9HXCA/aDomf7aLZFpHzf4IR+L8Z0=;
X-YMail-OSG: y0wAFWQVM1m605x6jCQGKaio98CN7S1t5_mVsXwkvJC3ZQd2H34lnA7W0ky9QR6elay0fkFzL4Fmcj0naoWnDTMvGg--
Received: from [63.192.54.62] by web50304.mail.re2.yahoo.com via HTTP; Thu, 05 Apr 2007 23:09:28 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Thu, 5 Apr 2007 23:09:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: short documents = help me tweak Similarity??
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <850041.71892.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

John,

Look at coord Similarity method.  That may help you solve the ....  e.g., "Nissan Altima Sports Package" will be
the #1 hit even though there was an exact document matching every term.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: John Kleven <jkleven@vinquire.com>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 12:13:30 AM
Subject: Re: short documents = help me tweak Similarity??

Thank you kindly for the responses.

This was the solution that I dreamed up initially as well (overriding
lengthNorm) and making the returned values for small numTerms values (e.g. 3
and 4) more discrete.

So I did that in multiple ways, and I ran into a different problem.  If
lengthNorm returns something like this...
numTerms    return from lengthNorm()
1                  2.4
2                  2.0
3                  1.6
4                  1.2
5                  0.8
>5                1/sqrt(numTerms)

...you wind up with a weird situation.  What happens is that for a document
like "Nissan Altima SE Sports Package Sunroof CD 2003" -- imagine someone
searching for that exact document with the exact search string (i.e, they
literally search "Nissan Altima SE Sports Package Sunroof CD 2003") then the
*wrong* hits bubble to the top, e.g., "Nissan Altima Sports Package" will be
the #1 hit even though there was an exact document matching every term.

So then i tried a bunch of different lengthNorm implementations (because
obviously the example lengthNorm above is drastic) ... some drastic (ala the
example above) and some less drastic but still hopefully allowing a big
enough lengthNorm value so that encode/decode would still see a difference
in search length.

And i've yet to be able to find a happy medium that works.  I know that i'm
doing something stupid, or not understanding the scoring algorithm enough (
i.e., there's another part of the similarity class that should take into
account when you have lots of search terms and corresponding matches) but I
just couldn't find a way to make it happen.

This is why i was wondering if could just overload encode/decode in both my
indexer and searcher, and thereby just avoid this whole thing entirely.  But
apparently that isn't a solution either?

Also, i don't understand why the encode/decode functions have a range of
7x10^9 to 2x10^-9, when it seems to me the most common values are (boosts
set to 1.0) something between 1.0 and 0.  When would somebody have a monster
huge value like 7x10^9?  Even with a huge index time boost of 20.0 or
something, why would the encode/decode need a range as huge as the current
implementation?

I know I am missing something.  Thanks so much for the reponses, I've been
playing with this for so long I knew it was time to post a message and get
to the bottom of this.  Thank u again -
J



On 4/5/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : The problem comes when your float value is encoded into that 8 bit
> : field norm, the 3 length and 4 length both become the same 8 bit
> : value.  Call Similarity.encodeNorm on the values you calculate for the
> : different numbers of terms and make sure they return different byte
> : values.
>
> bingo.  You can't change encodeNorm and decodeNorm (because they are
> static -- they need to work at query time regardless of what Similarity
> was used at index time) but you can change the function of your length
> norm to make small deviations in short lengths significant enough to
> register even with the encoding.
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 06:12:28 2007
Return-Path: <java-user-return-27435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9253 invoked from network); 6 Apr 2007 06:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 06:12:27 -0000
Received: (qmail 79072 invoked by uid 500); 6 Apr 2007 06:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78029 invoked by uid 500); 6 Apr 2007 06:12:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78018 invoked by uid 99); 6 Apr 2007 06:12:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2007 23:12:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2007 23:12:20 -0700
Received: (qmail 9011 invoked by uid 60001); 6 Apr 2007 06:11:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=zSOAPpdG+qcIC14OFJGkLk1i4k9dKiAAkkV5QrKP3TQVJUSR0BiB8abbuDq/EnP+zxIDqHiMnb97j+VDi8OV6ooWGQAwqE9+abmKDdGBPU9BgDQrdXP4fkgaeuI6sNePUNn0iP5nIQMVB2be0WREUzpVeG43zR/iXMqn7kMPx/4=;
X-YMail-OSG: Ft4j5.wVM1lZ.hs8PPQFVhGf24haUDvLlx7TsBpUpuUViC6bCXdmbQaQ7sblYXcaMA--
Received: from [63.192.54.62] by web50301.mail.re2.yahoo.com via HTTP; Thu, 05 Apr 2007 23:11:59 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Thu, 5 Apr 2007 23:11:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: indexing and searching real numbers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
Message-ID: <272816.8303.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm... I never use range queries, but that "????" part looks suspicious.  =
Sorry, can't help more now, maybe somebody else will have the answer for yo=
u.  Sit tight.=0A=0AOtis=0A . . . . . . . . . . . . . . . . . . . . . . . .=
 . . . . . .=0ASimpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share=
=0A=0A----- Original Message ----=0AFrom: Leon <lmikhailov@netzero.net>=0AT=
o: java-user@lucene.apache.org=0ASent: Friday, April 6, 2007 1:26:59 AM=0AS=
ubject: Re: indexing and searching real numbers=0A=0A=0AThanks for your rep=
ly Otis,=0A=0Awquery.toString()  returns  westbc:[* TO ????]=0Aquery.toStri=
ng() returns westbc:[* TO ????]=0A=0AIf I compare these two strings for equ=
ality like=0Awquery.toString().equals(query.toString()) I get true. I also =
got bytes of=0Athose strings and compared them bytewise - they are equal th=
is way too.=0A=0AIdeas are welcome.=0A=0ALeonid=0A=0A=0AOtis Gospodnetic wr=
ote:=0A> =0A> You can't really rely on Query.toString() to produce a valid =
query=0A> identical to the query in that Query instance.  Are you sure both=
 produce=0A> the same query string?  You didn't include that.=0A> =0A> Otis=
=0A>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .=0A> Simpy=
 -- http://www.simpy.com/  -  Tag  -  Search  -  Share=0A> =0A> ----- Origi=
nal Message ----=0A> From: Leon <lmikhailov@netzero.net>=0A> To: java-user@=
lucene.apache.org=0A> Sent: Thursday, April 5, 2007 1:38:14 PM=0A> Subject:=
 indexing and searching real numbers=0A> =0A> =0A> Hello everybody,=0A> =0A=
> I need to index and search real numbers in Lucene. I found NumberUtils=0A=
> class=0A> in Solr project which permits one to encode doubles into string=
 so that=0A> alpha numeric ordering would correctly correspond to the order=
ing on=0A> numbers. When I use ConstantScoreRangeQuery programmatically eve=
rything=0A> works just fine. However when I convert this query to a string,=
 parse it=0A> with QueryParser and use the resulting query =96 no result ar=
e found.=0A> =0A> ConstantScoreRangeQuery wquery =3D =0A>   new ConstantSco=
reRangeQuery("westbc", null,=0A> NumberUtils.double2sortableStr(-110.500000=
), false, true);=0A> Hits hits =3D is.search(wquery); //returns expected re=
sults=0A> =0A> Now if I do=0A> =0A> String wqueryString =3D wquery.toString=
();=0A> QueryParser queryParser =3D new QueryParser("westbc", new=0A> Keywo=
rdAnalyzer());=0A> Query query =3D queryParser.parse(wqueryString);=0A> Hit=
s hits =3D is.search(query); // returns nothing=0A> =0A> Interesting is tha=
t System.out.println(wquery.toString()) looks exactly=0A> the=0A> same as S=
ystem.out.println(query.toString()).=0A> =0A> Any ideas welcome.=0A> =0A> T=
hanks,=0A> =0A> Leon=0A> -- =0A> View this message in context:=0A> http://w=
ww.nabble.com/indexing-and-searching-real-numbers-tf3532728.html#a9859816=
=0A> Sent from the Lucene - Java Users mailing list archive at Nabble.com.=
=0A> =0A> =0A> ------------------------------------------------------------=
---------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg=0A> For additional commands, e-mail: java-user-help@lucene.apache.org=0A=
> =0A> =0A> =0A> =0A> =0A> ------------------------------------------------=
---------------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@luc=
ene.apache.org=0A> For additional commands, e-mail: java-user-help@lucene.a=
pache.org=0A> =0A> =0A> =0A=0A-- =0AView this message in context: http://ww=
w.nabble.com/indexing-and-searching-real-numbers-tf3532728.html#a9867984=0A=
Sent from the Lucene - Java Users mailing list archive at Nabble.com.=0A=0A=
=0A---------------------------------------------------------------------=0A=
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor addit=
ional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 08:26:34 2007
Return-Path: <java-user-return-27436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48202 invoked from network); 6 Apr 2007 08:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 08:26:33 -0000
Received: (qmail 13657 invoked by uid 500); 6 Apr 2007 08:26:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13628 invoked by uid 500); 6 Apr 2007 08:26:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13617 invoked by uid 99); 6 Apr 2007 08:26:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 01:26:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.146.189.30] (HELO web23005.mail.ird.yahoo.com) (217.146.189.30)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Apr 2007 01:26:24 -0700
Received: (qmail 8001 invoked by uid 60001); 6 Apr 2007 08:26:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ErMa/6s6nAUkF9IN2ZtajYjMbGeERTbG60FrJa8tbqDfyhfhIk53FLXF+xYA8k2p1UbG8jVj4v96U+P6Y/ldWWRGOi0uq48RJsLwL7rGoMrIRo/9gxzR/GLhZhvm0DEaycEMuf7u2+sO/hBnAJNM9l1+lc5FlkaxZt7M4isn7w0=;
X-YMail-OSG: JnXny4wVM1nKx4yvKFs5wxRC_pyM.1A.7taMRwVkUDh8fmykteJwrhJQtYFqpS7FOzt1OKPnWgGepGoIClrBi0rEz_KaD814X6ssk4xCUz.qLvF4fu6LF_U9wdY-
Received: from [84.131.216.152] by web23005.mail.ird.yahoo.com via HTTP; Fri, 06 Apr 2007 08:26:02 GMT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Fri, 6 Apr 2007 08:26:02 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Lucene for name matching
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <905697.7367.qm@web23005.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I've been doing this in past couple of years, and yes we use Lucene for some key parts of the problem.
Basically, the problem you face is on how to run extremely high recall without compromising precision, hard!

the key problem is performance, imagine you have DB with 10Mio persons you need to match against 10Mio from another list. Where you start is 10E6 * 10E6 comparisons, e.g with pure Edit Distance, it would need a couple of centuries to finish. What you need to do  is to  define clever  "blocking criteria"  in order to reduce this O(n^2) complexity curse. Lucene comes in handy for this. 

Another problem is fuzzy similarity in this game, you need somehow to create kind of "index" for Edit distance, have a look at Lingpipe spell checker. Also, I guess you need to support  synonyms  like  William/Bill (no fuzzy) and other semantics constraints not modelled by Edit Distance likes.

web:
- google for "Record Linkage"   
- look at Cohen's Secondstring project
- http://datamining.anu.edu.au/projects/linkage.html - they have very nice Python prototype

search for "Fellegi- Sunter" articles as these are classics....

it is only hard to do it, but doable, we are doing it on c.a 200Mio lists.

Unfortunately, my  company does not give back  to the community as I would like...
anyhow, I hope this can help you
 
>>
>> I was wondering if anyone has done people name matching using  
>> Lucene.  For
>> example, I have a name coming from some external source that I  
>> would like to
>> match with the one I have in my DB.  Lets say my DB contains the  
>> name "John
>> Smith".  If the external source has something like "Smith John",  
>> "Smith,
>> John", "J. Smith", etc., I would like to rate this matching based  
>> on some %
>> of closeness for review later.  I've searched around a bit for  
>> algorithms
>> and I kept seeing the Levenshtein distance algorithm which I'm sure  
>> Lucene
>> uses under the hood.  So I trying to guage if Lucene is useful for  
>> doing
>> something specific as this, or are there better algorithms and/or  
>> software
>> out there that does name matching.  Thanks in advance!
>>
>> -los
>> -- 
>> View this message in context: http://www.nabble.com/Lucene-for-name- 
>> matching-tf3533454.html#a9862342
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
> 
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
> LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-for-name-matching-tf3533454.html#a9863587
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






		
___________________________________________________________ 
Now you can scan emails quickly with a reading pane. Get the new Yahoo! Mail. http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 09:56:08 2007
Return-Path: <java-user-return-27437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82812 invoked from network); 6 Apr 2007 09:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 09:56:07 -0000
Received: (qmail 50698 invoked by uid 500); 6 Apr 2007 09:56:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50656 invoked by uid 500); 6 Apr 2007 09:56:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50645 invoked by uid 99); 6 Apr 2007 09:56:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 02:56:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.92.5.126] (HELO slim-4a.inet.it) (213.92.5.126)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 02:55:58 -0700
Received: from host130-238-static.34-88-b.business.telecomitalia.it ([::ffff:88.34.238.130]) by slim-4a.inet.it via I-SMTP-5.4.4-547
	id ::ffff:88.34.238.130+C5ptVpe3NeO; Fri, 06 Apr 2007 11:55:27 +0200
Message-ID: <461619F7.2030206@buongiorno.com>
Date: Fri, 06 Apr 2007 11:59:19 +0200
From: Roberto Fonti <roberto.fonti@buongiorno.com>
User-Agent: Mozilla Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: UN_TOKENIZED and StandardAnalyzer
Content-Type: multipart/alternative;
 boundary="------------070202090601030002010801"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070202090601030002010801
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Hi All,
I'm indexing categories with this code:

for (Category category : item.getCategories()) {            
    lucene_doc.add(new Field(
        "CATEGORY",
        category.getName(),
        Field.Store.NO,
        Field.Index.UN_TOKENIZED));               
}

And searching using the query:

String query = "CATEGORY:("+category.getName()+")";

I've configured to use the StandardAnalyzer both in the IndexWriter for 
the QueryParser.

Everything goes fine BUT with categories that contains whitespaces (or 
other chars that get tokenized).

* If category is "sport" - ok, I get the result from the search
* If category is "winter sport" - I get no result from search

I've tried with a number of search syntax:
+CATEGORY:"winter sport"
+CATEGORY:winter +CATEGORY:sport
+CATEGORY:(winter sport)
and other...
but none of them work.

What's wrong with that?
By the way, using the KeywordAnalyzer it works, but it is not the 
correct analyzer for my application.
Shouldn't the Analyzer be ignored for a Field.Index.UN_TOKENIZED field?

Thanks,
Roberto
 


--------------070202090601030002010801--


From java-user-return-27438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 11:10:16 2007
Return-Path: <java-user-return-27438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7289 invoked from network); 6 Apr 2007 11:10:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 11:10:16 -0000
Received: (qmail 34814 invoked by uid 500); 6 Apr 2007 11:10:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34757 invoked by uid 500); 6 Apr 2007 11:10:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34746 invoked by uid 99); 6 Apr 2007 11:10:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 04:10:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 04:10:06 -0700
Received: from [192.168.128.140] ([192.168.128.140])
	(authenticated bits=0)
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id l36B9dVi030471
	for <java-user@lucene.apache.org>; Fri, 6 Apr 2007 14:09:42 +0300
Message-ID: <46162A72.50400@sirma.bg>
Date: Fri, 06 Apr 2007 14:09:38 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Out of memory exception for big indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I have the following problem - we have OutOfMemoryException when 
seraching on the indexes that are of size 20 - 40 GB and contain 10 - 15 
million docs.
When we make searches we perform query that match all the results but we 
DO NOT fetch all the results - we fetch 100 of them. We also make 
sorting by using the class Sort and we really need result to be sorted 
on a field that is randomly defined by the user.
So my questions are:
1) Have Lucene some restrictions on index size on which it can perform 
searches?
2) Is there some approach to estimate beforehand the RAM that will use 
Lucene for sertain query? I mean on what exactly depends this memory 
usage - on index size, on docs stored in the index, on size of this docs...
3) Is there some approach to controll the used RAM. For example when 
searching not to exceed 1GB of used memory?
4) Is there some spcial approach to proceeding with such big indexes (we 
expect in near future even 60 -80 GB indexes).


Best Regards,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 12:15:16 2007
Return-Path: <java-user-return-27439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58074 invoked from network); 6 Apr 2007 12:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 12:15:15 -0000
Received: (qmail 11648 invoked by uid 500); 6 Apr 2007 12:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11604 invoked by uid 500); 6 Apr 2007 12:15:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11593 invoked by uid 99); 6 Apr 2007 12:15:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 05:15:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 05:15:05 -0700
Received: by wx-out-0506.google.com with SMTP id i29so777996wxd
        for <java-user@lucene.apache.org>; Fri, 06 Apr 2007 05:14:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Pi7b1qnux1cWHokdkblgkMgCaQCRdS6GLZu/qGl1m9Mz+d5VX/KeoI8jxBbPs/G8PwNEIelasSybCkbi2xkpEJXGFbGOl7o8ut+g684bKYt/DfyDSSBY+at9P0FrDk/ycGxhlO+/b9l4kX92l9zlQzzWXhyZCm13hpWXc/0ZBSI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=WrPhPHwk+yXZFE6oyyB7L7y4Sn11m5DPrK4G82QDiCBhmgNm0u2ZpW4ghdFvkh+tCElUobL0KQOQe7UooU5OEJA+zx8+Ypfmv87ywVcmeLbcUuAEu8eWaNFyzPIZveZjw+yU60DPIDYICnkzwo+b3/3Fk3crf1jKhbX2vyoVB64=
Received: by 10.70.117.1 with SMTP id p1mr5311746wxc.1175861684319;
        Fri, 06 Apr 2007 05:14:44 -0700 (PDT)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 8sm2904097wrl.2007.04.06.05.14.42;
        Fri, 06 Apr 2007 05:14:43 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <905697.7367.qm@web23005.mail.ird.yahoo.com>
References: <905697.7367.qm@web23005.mail.ird.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <84A3C846-73CB-4D04-AA7D-FD7D957803D3@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Lucene for name matching
Date: Fri, 6 Apr 2007 08:14:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I agree, SecondString was helpful to me.  Also have a look at William  
Winkler's work at the US Census.  We did similar things to come up  
with blocking criteria to get an initial division into duplicates,  
unique and undecided.  Then we refined on the undecided set.  No  
approach is going to be perfect and you have to make decisions about  
time spent versus quality.


On Apr 6, 2007, at 4:26 AM, eks dev wrote:

> I've been doing this in past couple of years, and yes we use Lucene  
> for some key parts of the problem.
> Basically, the problem you face is on how to run extremely high  
> recall without compromising precision, hard!
>
> the key problem is performance, imagine you have DB with 10Mio  
> persons you need to match against 10Mio from another list. Where  
> you start is 10E6 * 10E6 comparisons, e.g with pure Edit Distance,  
> it would need a couple of centuries to finish. What you need to do   
> is to  define clever  "blocking criteria"  in order to reduce this O 
> (n^2) complexity curse. Lucene comes in handy for this.
>
> Another problem is fuzzy similarity in this game, you need somehow  
> to create kind of "index" for Edit distance, have a look at  
> Lingpipe spell checker. Also, I guess you need to support   
> synonyms  like  William/Bill (no fuzzy) and other semantics  
> constraints not modelled by Edit Distance likes.
>
> web:
> - google for "Record Linkage"
> - look at Cohen's Secondstring project
> - http://datamining.anu.edu.au/projects/linkage.html - they have  
> very nice Python prototype
>
> search for "Fellegi- Sunter" articles as these are classics....
>
> it is only hard to do it, but doable, we are doing it on c.a 200Mio  
> lists.
>
> Unfortunately, my  company does not give back  to the community as  
> I would like...
> anyhow, I hope this can help you
>
>>>
>>> I was wondering if anyone has done people name matching using
>>> Lucene.  For
>>> example, I have a name coming from some external source that I
>>> would like to
>>> match with the one I have in my DB.  Lets say my DB contains the
>>> name "John
>>> Smith".  If the external source has something like "Smith John",
>>> "Smith,
>>> John", "J. Smith", etc., I would like to rate this matching based
>>> on some %
>>> of closeness for review later.  I've searched around a bit for
>>> algorithms
>>> and I kept seeing the Levenshtein distance algorithm which I'm sure
>>> Lucene
>>> uses under the hood.  So I trying to guage if Lucene is useful for
>>> doing
>>> something specific as this, or are there better algorithms and/or
>>> software
>>> out there that does name matching.  Thanks in advance!
>>>
>>> -los
>>> -- 
>>> View this message in context: http://www.nabble.com/Lucene-for-name-
>>> matching-tf3533454.html#a9862342
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> Center for Natural Language Processing
>> http://www.cnlp.org
>>
>> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
>> LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Lucene-for-name- 
> matching-tf3533454.html#a9863587
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
> 		
> ___________________________________________________________
> Now you can scan emails quickly with a reading pane. Get the new  
> Yahoo! Mail. http://uk.docs.yahoo.com/nowyoucan.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 13:50:20 2007
Return-Path: <java-user-return-27440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97331 invoked from network); 6 Apr 2007 13:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 13:50:19 -0000
Received: (qmail 30739 invoked by uid 500); 6 Apr 2007 13:50:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30705 invoked by uid 500); 6 Apr 2007 13:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30688 invoked by uid 99); 6 Apr 2007 13:50:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 06:50:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.252.100.152] (HELO web90315.mail.mud.yahoo.com) (216.252.100.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Apr 2007 06:50:01 -0700
Received: (qmail 57278 invoked by uid 60001); 6 Apr 2007 13:49:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=s75wnFrpOK+qsQuCLUaHvreV346V5pda6n+EjaJz3Sm4xLt/SUiel/6vOcSevSxOwKu83u3b/u5roobKm0tK0djaAULa3wS9ZaCv2pkabrTFZmrGmgm0v4tVDwndyCHAom64uzyPhZz1mrGnm8Dk6IFP5mniuPAyN0qtgzQCWWM=  ;
Message-ID: <20070406134940.57276.qmail@web90315.mail.mud.yahoo.com>
X-YMail-OSG: _6OP5SoVM1k1mk.Z1T7eS1ezLkiEfyD395DEMd.AtX5C3QOeOoyFGSXx6vRwUnSo7vOLhcZsAvF9OuTNbUg92bQPduQlDhFEB0ye
Received: from [140.177.203.1] by web90315.mail.mud.yahoo.com via HTTP; Fri, 06 Apr 2007 06:49:40 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Fri, 6 Apr 2007 06:49:40 -0700 (PDT)
From: Annona Keene <annonakeene@yahoo.com>
Subject: Re: Explanation from FunctionQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-890984648-1175867380=:54733"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-890984648-1175867380=:54733
Content-Type: text/plain; charset=ascii

Ok, glossing over some of the details was not the best idea. ms is a MultiSearcher in that it's something I wrote that extends MultiSearcher.  And this part I should have mentioned before, the explain method being called is the one in org.apache.lucene.search.Searcher. So explain is 

  public Explanation explain(Query query, int doc) throws IOException {
    return explain(createWeight(query), doc);
  }

I've verified that I am in fact calling the explain method that I think I am. Here's the full stack trace:

java.lang.UnsupportedOperationException
    at org.apache.lucene.search.Query.extractTerms(Query.java:163)
    at org.apache.lucene.search.BooleanQuery.extractTerms(BooleanQuery.java:425)
    at org.apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:292)
    at org.apache.lucene.search.Searcher.explain(Searcher.java:143)
    at com.testing.documentationsearch.DocumentationSearcher.search(DocumentationSearcher.java:197)
    at com.testing.documentationsearch.DocumentationSearcher.search(DocumentationSearcher.java:42)
    at com.testing.documentationsearch.Test.main(Test.java:6)

So we reach a problem at extractTerms.  I get an explanation no problem if I do not include the FunctionQuery in my BooleanQuery, so I can't see how this isn't related in some way to FunctionQuery.  Stepping through my code, I can see that the extractTerms in BooleanQuery
  
public void extractTerms(Set terms) {
      for (Iterator i = clauses.iterator(); i.hasNext();) {
          BooleanClause clause = (BooleanClause) i.next();
          clause.getQuery().extractTerms(terms);
        }
  }

goes swimmingly until the clause is the FunctionQuery clause.  extractTerms is being called on LinearFloatFunction:1.0*float(int(num))+1.0)^1.0, and that is where the UnsupportedOperationException occurs.  

So it seems to me like there's something simple here I'm missing. I've used the FunctionQuery as part of a BooleanQuery, which is the advice I found searching this list. Am I not using it correctly in the BooleanQuery? Here is the code I sent previously: 

           Query query = parser.parse(newCriteria);

            LinearFloatFunction lff = new LinearFloatFunction(new IntFieldSource("num"), 1.0f, 1.0f);
            FunctionQuery fQ = new FunctionQuery(lff);
            
            BooleanQuery bQ = new BooleanQuery();
            bQ.add(query, BooleanClause.Occur.MUST);
            bQ.add(fQ, BooleanClause.Occur.SHOULD); 

I'm using the version of FunctionQuery from the JIRA attachment.

I appreciate your input, and I would be very grateful for any other insight you could offer. I am eager to get this working!

Thanks again,
Ann


----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Thursday, April 5, 2007 4:58:30 PM
Subject: Re: Explanation from FunctionQuery


1) which version of FunctionQuery are you using (from the solr repository
or from a Jira issue attachment?)
2) what is hte full stacktrace? (ie: which function/line is throwing the
Exception)

FunctionQuery supports explain just fine, not sure why you'd have
problems, oh wait ... i see exactly what hte problem is...

: The ms is a MultiSearcher.  I read that

...this is the implemnetation for MultiSearcher...

    public Explanation explain(Weight weight,int doc) {
      throw new UnsupportedOperationException();
    }

...it's got nothing to do with FunctionQuery.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org








 
____________________________________________________________________________________
Bored stiff? Loosen up... 
Download and play hundreds of games for free on Yahoo! Games.
http://games.yahoo.com/games/front
--0-890984648-1175867380=:54733--

From java-user-return-27441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 14:11:32 2007
Return-Path: <java-user-return-27441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2444 invoked from network); 6 Apr 2007 14:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 14:11:30 -0000
Received: (qmail 55364 invoked by uid 500); 6 Apr 2007 14:11:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55334 invoked by uid 500); 6 Apr 2007 14:11:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55323 invoked by uid 99); 6 Apr 2007 14:11:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 07:11:30 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 07:11:22 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HZp9Z-0004tF-H7
	for java-user@lucene.apache.org; Fri, 06 Apr 2007 07:11:01 -0700
Message-ID: <9872800.post@talk.nabble.com>
Date: Fri, 6 Apr 2007 07:11:01 -0700 (PDT)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene for name matching
In-Reply-To: <84A3C846-73CB-4D04-AA7D-FD7D957803D3@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
References: <9862342.post@talk.nabble.com> <905697.7367.qm@web23005.mail.ird.yahoo.com> <84A3C846-73CB-4D04-AA7D-FD7D957803D3@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks guys!

I really really appreciate your feedback.  I didn't know a "simple" problem
like People name matching would be this complicated.  I knew there will be
some unusual circumstances or rules, but I did not realize how much work has
been done to solve parts of the problem (string matching in general).  I'll
take a good look at what you've suggested and I'll let you know what
approach I took if I get this thing completed.

-los



Grant Ingersoll-5 wrote:
> 
> I agree, SecondString was helpful to me.  Also have a look at William  
> Winkler's work at the US Census.  We did similar things to come up  
> with blocking criteria to get an initial division into duplicates,  
> unique and undecided.  Then we refined on the undecided set.  No  
> approach is going to be perfect and you have to make decisions about  
> time spent versus quality.
> 
> 
> On Apr 6, 2007, at 4:26 AM, eks dev wrote:
> 
>> I've been doing this in past couple of years, and yes we use Lucene  
>> for some key parts of the problem.
>> Basically, the problem you face is on how to run extremely high  
>> recall without compromising precision, hard!
>>
>> the key problem is performance, imagine you have DB with 10Mio  
>> persons you need to match against 10Mio from another list. Where  
>> you start is 10E6 * 10E6 comparisons, e.g with pure Edit Distance,  
>> it would need a couple of centuries to finish. What you need to do   
>> is to  define clever  "blocking criteria"  in order to reduce this O 
>> (n^2) complexity curse. Lucene comes in handy for this.
>>
>> Another problem is fuzzy similarity in this game, you need somehow  
>> to create kind of "index" for Edit distance, have a look at  
>> Lingpipe spell checker. Also, I guess you need to support   
>> synonyms  like  William/Bill (no fuzzy) and other semantics  
>> constraints not modelled by Edit Distance likes.
>>
>> web:
>> - google for "Record Linkage"
>> - look at Cohen's Secondstring project
>> - http://datamining.anu.edu.au/projects/linkage.html - they have  
>> very nice Python prototype
>>
>> search for "Fellegi- Sunter" articles as these are classics....
>>
>> it is only hard to do it, but doable, we are doing it on c.a 200Mio  
>> lists.
>>
>> Unfortunately, my  company does not give back  to the community as  
>> I would like...
>> anyhow, I hope this can help you
>>
>>>>
>>>> I was wondering if anyone has done people name matching using
>>>> Lucene.  For
>>>> example, I have a name coming from some external source that I
>>>> would like to
>>>> match with the one I have in my DB.  Lets say my DB contains the
>>>> name "John
>>>> Smith".  If the external source has something like "Smith John",
>>>> "Smith,
>>>> John", "J. Smith", etc., I would like to rate this matching based
>>>> on some %
>>>> of closeness for review later.  I've searched around a bit for
>>>> algorithms
>>>> and I kept seeing the Levenshtein distance algorithm which I'm sure
>>>> Lucene
>>>> uses under the hood.  So I trying to guage if Lucene is useful for
>>>> doing
>>>> something specific as this, or are there better algorithms and/or
>>>> software
>>>> out there that does name matching.  Thanks in advance!
>>>>
>>>> -los
>>>> -- 
>>>> View this message in context: http://www.nabble.com/Lucene-for-name-
>>>> matching-tf3533454.html#a9862342
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> Center for Natural Language Processing
>>> http://www.cnlp.org
>>>
>>> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
>>> LuceneFAQ
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context: http://www.nabble.com/Lucene-for-name- 
>> matching-tf3533454.html#a9863587
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>>
>> 		
>> ___________________________________________________________
>> Now you can scan emails quickly with a reading pane. Get the new  
>> Yahoo! Mail. http://uk.docs.yahoo.com/nowyoucan.html
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
> http://lucene.grantingersoll.com
> http://www.paperoftheweek.com/
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-for-name-matching-tf3533454.html#a9872800
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 14:26:16 2007
Return-Path: <java-user-return-27442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9266 invoked from network); 6 Apr 2007 14:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 14:26:14 -0000
Received: (qmail 84645 invoked by uid 500); 6 Apr 2007 14:26:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84606 invoked by uid 500); 6 Apr 2007 14:26:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84593 invoked by uid 99); 6 Apr 2007 14:26:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 07:26:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 07:26:07 -0700
Received: by wr-out-0506.google.com with SMTP id 69so628492wra
        for <java-user@lucene.apache.org>; Fri, 06 Apr 2007 07:25:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H0x/wUX7wZlNinrMbiwH/WITNHKCdGw0YAj0xBCMUnVD1icmd+L5oYcd19r9JeSKqTNx/RQuyGqndXhQGZjs1exM1O8dC8aK/Sh1jVmvOu7FbShJWjvG+A0CeEYXRuw+Z25JKSo8n/P6TGdExZ1oLCI35V2hj32oWjbqzQk7G44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JSKZCH8SQPoRw7Aaa8obwR4UnPmVIyYY9timWXfOLFL8lyupfXm7i5h9sZBeRRL0cj0OAlbpNNgfsnJXcUuma5t4u5l3TWGxcidxF0melc84ekpcnBzh1rWz502vVQNS8Fsl39zNajbg7ac3/W9iDyHKPHrPLjeCM8eYV4Fah8c=
Received: by 10.115.33.1 with SMTP id l1mr1243527waj.1175869543783;
        Fri, 06 Apr 2007 07:25:43 -0700 (PDT)
Received: by 10.114.61.8 with HTTP; Fri, 6 Apr 2007 07:25:43 -0700 (PDT)
Message-ID: <359a92830704060725p4f97c688s8cfc497bea6aae31@mail.gmail.com>
Date: Fri, 6 Apr 2007 10:25:43 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: UN_TOKENIZED and StandardAnalyzer
In-Reply-To: <461619F7.2030206@buongiorno.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4730_24493957.1175869543704"
References: <461619F7.2030206@buongiorno.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4730_24493957.1175869543704
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Really, really, really get a copy of Luke. Really. Use it to open
your index and run experimental queries, especially to see
how they get rewritten (but be sure to pick the appropriate
analyzer).

Google "lucene luke". Really, really get a copy. It'll help you
make MUCH faster progress than waiting for someone to
get around to answering posts here <G>....

Then use query.toString() to see how things pars in your programs
(or use Luke's search tab to see similar).

If you do, you'll see that parsing the string "winter sport" becomes
CATEGORY:winter CATEGORY:sport

using StandardAnalyzer with the default operator OR will not
match an untokenized field of "winter category".
AND won't work either, it's an UN_TOKENIZED field

Using KeywordAnzlyer gives
CATEGORY:winter CATEGORY:sport
This does NOT match the document
I indexed UN_TOKENIZED 'winter sport'. What the heck?

But using KeywordAnalyzer with
"\"winter sport\""

That is, where the double quotes are port of the query and using
KeywordAnalyzer gives
CATEGORY:winter sport
and produces the correct match on my UN_TOKENIZED field. What's
happening here is the double quotes cause the parser to pass both
words as a single token rather than two tokens.

This has been a source of some confusion on the list, there
is a very long thread you'll find if you search the archives
for KeywordAnalyzer.


Best
Erick

On 4/6/07, Roberto Fonti <roberto.fonti@buongiorno.com> wrote:
>
> Hi All,
> I'm indexing categories with this code:
>
> for (Category category : item.getCategories()) {
>     lucene_doc.add(new Field(
>         "CATEGORY",
>         category.getName(),
>         Field.Store.NO,
>         Field.Index.UN_TOKENIZED));
> }
>
> And searching using the query:
>
> String query = "CATEGORY:("+category.getName()+")";
>
> I've configured to use the StandardAnalyzer both in the IndexWriter for
> the QueryParser.
>
> Everything goes fine BUT with categories that contains whitespaces (or
> other chars that get tokenized).
>
> * If category is "sport" - ok, I get the result from the search
> * If category is "winter sport" - I get no result from search
>
> I've tried with a number of search syntax:
> +CATEGORY:"winter sport"
> +CATEGORY:winter +CATEGORY:sport
> +CATEGORY:(winter sport)
> and other...
> but none of them work.
>
> What's wrong with that?
> By the way, using the KeywordAnalyzer it works, but it is not the
> correct analyzer for my application.
> Shouldn't the Analyzer be ignored for a Field.Index.UN_TOKENIZED field?
>
> Thanks,
> Roberto
>
>
>

------=_Part_4730_24493957.1175869543704--

From java-user-return-27443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 14:31:10 2007
Return-Path: <java-user-return-27443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11010 invoked from network); 6 Apr 2007 14:31:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 14:31:09 -0000
Received: (qmail 92473 invoked by uid 500); 6 Apr 2007 14:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92444 invoked by uid 500); 6 Apr 2007 14:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92433 invoked by uid 99); 6 Apr 2007 14:31:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 07:31:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 07:31:01 -0700
Received: by wr-out-0506.google.com with SMTP id 69so629945wra
        for <java-user@lucene.apache.org>; Fri, 06 Apr 2007 07:30:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b6VZf4GVu41yMnEjxAgVK9SrvhcnGXWrff7TagL0+Cjb7Nb3XE/qzS0B7In7lk271tJlt5bO5yHg6Crt5AEGq28xqVPgZu3SDSQkcm6PWURq+9EQksLuXRWBKWI/vsuoLIVVV3wmHpECwqmW8g3A8ujZLcS6d3cqcgaNHgFeO5g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qsqBe4NQGPdfwyCJVDVWjIOocDMkFw8fAsah9WvNAis0tzNEEB5kCyMO4vuKBU7jmCbIniOYx3/ibJGoKeCaQs81oQ1dsvQpSnvkWMB9qnM/RfA0mx33EUPDBXpDt/5fNgOW/ZdiK5bCHEmYW/NTNiWMzliAiU2pFX8GoQK4ohc=
Received: by 10.115.95.1 with SMTP id x1mr1235604wal.1175869839662;
        Fri, 06 Apr 2007 07:30:39 -0700 (PDT)
Received: by 10.114.61.8 with HTTP; Fri, 6 Apr 2007 07:30:39 -0700 (PDT)
Message-ID: <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
Date: Fri, 6 Apr 2007 10:30:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
In-Reply-To: <46162A72.50400@sirma.bg>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4814_8129678.1175869839593"
References: <46162A72.50400@sirma.bg>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4814_8129678.1175869839593
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can only shed a little light on a couple of points, see below.

On 4/6/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>
> Hi All,
>
> I have the following problem - we have OutOfMemoryException when
> seraching on the indexes that are of size 20 - 40 GB and contain 10 - 15
> million docs.
> When we make searches we perform query that match all the results but we
> DO NOT fetch all the results - we fetch 100 of them. We also make
> sorting by using the class Sort and we really need result to be sorted
> on a field that is randomly defined by the user.
> So my questions are:


The problem I suspect is the sorting. As I understand, Lucene
builds internal caches for sorting and I suspect that this is the root
of your problem. You can test this by trying your problem queries
without sorting.

How much memory are you giving the JVM?


1) Have Lucene some restrictions on index size on which it can perform
> searches?


No theoretical ones that I know of, but practical ones at times. As
you are finding.

2) Is there some approach to estimate beforehand the RAM that will use
> Lucene for sertain query? I mean on what exactly depends this memory
> usage - on index size, on docs stored in the index, on size of this
> docs...



I'd like to know this myself. Hint, hint, hint....

3) Is there some approach to controll the used RAM. For example when
> searching not to exceed 1GB of used memory?
> 4) Is there some spcial approach to proceeding with such big indexes (we
> expect in near future even 60 -80 GB indexes).
>
>
> Best Regards,
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4814_8129678.1175869839593--

From java-user-return-27444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 14:41:26 2007
Return-Path: <java-user-return-27444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14101 invoked from network); 6 Apr 2007 14:41:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 14:41:25 -0000
Received: (qmail 8571 invoked by uid 500); 6 Apr 2007 14:41:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8385 invoked by uid 500); 6 Apr 2007 14:41:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8374 invoked by uid 99); 6 Apr 2007 14:41:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 07:41:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of appler@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 07:41:14 -0700
Received: by an-out-0708.google.com with SMTP id c3so997207ana
        for <java-user@lucene.apache.org>; Fri, 06 Apr 2007 07:40:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=YCu+m41ualKtjUgwZEfdXWRFBzpvoRoiyfFVj2uZPNT3gnZb0lRye/i8HKbXnKqcQfHcSk8BAFe+p9O7pRfI8VUZPn0mY5HQsSe62z9prdKBhVq9mS0EOcFJjQDY+r9HP6f3ukU9vozPDnjmPRnoXMy6hIxNC9EGBAKYAnbo748=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ejd2+a2/o0geWEjdIwEQxCgsDr5mulqjoL4ypPj+GD7VpXZ9Oae8RPBR8n+ubY38zrdj7H6w/jNkPhhgtT65ZjroakzHzf/sQl2uBTzO2glhYmjA+iI/fSFPgNShRp0zQIKa93VjZXs0MPkDcVSZehtgkWnJLrtem7KT9+H8fvI=
Received: by 10.100.47.6 with SMTP id u6mr2109012anu.1175870452977;
        Fri, 06 Apr 2007 07:40:52 -0700 (PDT)
Received: by 10.100.41.3 with HTTP; Fri, 6 Apr 2007 07:40:52 -0700 (PDT)
Message-ID: <48b708490704060740i5bcb5ccs1b89a79ec1d24357@mail.gmail.com>
Date: Fri, 6 Apr 2007 23:40:52 +0900
From: "Cheolgoo Kang" <appler@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexModifier's docCount is inconsistent
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

When we use IndexModifier's docCount() method, it calls it's
underlying IndexReader's numDocs() or IndexWriter's docCount() method.
Here is the problem that IndexReader.numDocs() cares about deleted
documents, but IndexWriter.docCount() ignores it.

So, I've made some modifications in IndexWriter.docCount() and added
SegmentInfo.getDeletedDocCount() to read the number of deleted docs as
in IndexReader. It works great in my application but I'm not sure it's
a right way to handle this.

I found that there is no dependencies using docCount() method anywhere
in lucene trunk except several test cases. If it was a intended
behavior, it's okay but IndexWriter should have provided a method like
deletedNumDocs().

Any comments?

-- 
Cheolgoo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 15:20:50 2007
Return-Path: <java-user-return-27445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29201 invoked from network); 6 Apr 2007 15:20:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 15:20:49 -0000
Received: (qmail 66330 invoked by uid 500); 6 Apr 2007 15:20:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65310 invoked by uid 500); 6 Apr 2007 15:20:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65299 invoked by uid 99); 6 Apr 2007 15:20:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 08:20:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Apr 2007 08:20:42 -0700
Received: (qmail 45558 invoked by uid 60001); 6 Apr 2007 15:20:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=f+FfOr1XVPVKS5PIxQnCgkvhNhJ3JeEWtr+Lk+xmW/nT+usmz6oUrqC8LRU2KbIcSp9L6ek9wJyttCPsRt1IUPXBkkxWjIXIwbr73LVG2FO2QZeDxKG8vq8qpUbTstTXl+4Bpj5JVx6/CrzdjbvjB/bj9UWh7qm3j2oEqGIMQFI=;
X-YMail-OSG: pGOafagVM1lS0nkOxrlrxbXIhZ7HfSUs_PhQVCIJTY4QnrqueJsmK_e74jyREgg4sBBdByujbhszcG8fpMyYRvWEnQ--
Received: from [63.192.54.62] by web50309.mail.re2.yahoo.com via HTTP; Fri, 06 Apr 2007 08:20:21 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Fri, 6 Apr 2007 08:20:21 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Out of memory exception for big indexes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <570311.44475.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ivane,

Sorts will eat your memory, and how much they use depends on what you store in them - ints, String, floats...
A profiler like JProfiler will tell you what's going on, who's eating your memory.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Ivan Vasilev <ivasilev@sirma.bg>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 7:09:38 AM
Subject: Out of memory exception for big indexes

Hi All,

I have the following problem - we have OutOfMemoryException when 
seraching on the indexes that are of size 20 - 40 GB and contain 10 - 15 
million docs.
When we make searches we perform query that match all the results but we 
DO NOT fetch all the results - we fetch 100 of them. We also make 
sorting by using the class Sort and we really need result to be sorted 
on a field that is randomly defined by the user.
So my questions are:
1) Have Lucene some restrictions on index size on which it can perform 
searches?
2) Is there some approach to estimate beforehand the RAM that will use 
Lucene for sertain query? I mean on what exactly depends this memory 
usage - on index size, on docs stored in the index, on size of this docs...
3) Is there some approach to controll the used RAM. For example when 
searching not to exceed 1GB of used memory?
4) Is there some spcial approach to proceeding with such big indexes (we 
expect in near future even 60 -80 GB indexes).


Best Regards,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 15:28:06 2007
Return-Path: <java-user-return-27446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33527 invoked from network); 6 Apr 2007 15:28:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 15:28:04 -0000
Received: (qmail 79700 invoked by uid 500); 6 Apr 2007 15:28:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79666 invoked by uid 500); 6 Apr 2007 15:28:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79655 invoked by uid 99); 6 Apr 2007 15:28:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 08:28:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Apr 2007 08:27:56 -0700
Received: (qmail 93302 invoked by uid 60001); 6 Apr 2007 15:27:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Message-ID;
  b=JdOn3GLTxabXWjWnos1Gc7Ouyx/H6rAVZ5CfJbGaubWBrtlOZraXB4GrXNFlWw5PxgZEC9MExaApVtHvUzUaB71TKCSePCDz8aojITEbFHfpQJvf0i3lY84wPfvjrkne8uXR4CovDvvDCTK3C+WsHiR77pKa/4lS7PDEFC0zfqQ=;
X-YMail-OSG: g7yuG8EVM1kFCYNoe9uU6HoLR39nth_FLk0QMlMgPY1X_XMW_i4xpjPgMxZSn2TAjJmedOW4.DuTpRlBgG9i399W
Received: from [63.192.54.62] by web50302.mail.re2.yahoo.com via HTTP; Fri, 06 Apr 2007 08:27:35 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Fri, 6 Apr 2007 08:27:35 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexReader.deleteDocuement(); How to use it with our code??
To: java-user@lucene.apache.org
Cc: "Ratnesh,V2Solutions India" <ratnesh.srivastava@in.v2solutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <535275.92320.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ratnesh,

1. There is no need to use that many question marks, really.
2. Use java-user list, not java-dev
3. You cannot delete using negative criteria.  You can delete 1 Document using its document ID, or you can delete 1 or more Documents using a Term where you specify a field name and a value.  So, you can delete all Documents that have a field X with value Y, but you cannot delete Documents that do *not* have a value Y in field X.

This must be in the FAQ, is it not?

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: "Ratnesh,V2Solutions India" <ratnesh.srivastava@in.v2solutions.com>
To: java-dev@lucene.apache.org
Sent: Friday, April 6, 2007 9:39:23 AM
Subject: IndexReader.deleteDocuement(); How to use it with our code??


HI,
I have written a plugin which finds out "object" tags url and store it in
the index with "objects" fields.
I am intrested in getting only those url's which has "object" tag but
instead I get all the urls to be indexed.

So what I want is to delete some unwanted urls which don't have "object"
tag.

So how shall I do it??

Can nybody help me resolving this issue???


Ratnesh, V2Solutions India
-- 
View this message in context: http://www.nabble.com/IndexReader.deleteDocuement%28%29--How-to-use-it-with-our-code---tf3536867.html#a9872410
Sent from the Lucene - Java Developer mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-dev-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 15:44:59 2007
Return-Path: <java-user-return-27447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42097 invoked from network); 6 Apr 2007 15:44:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 15:44:58 -0000
Received: (qmail 15681 invoked by uid 500); 6 Apr 2007 15:44:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15638 invoked by uid 500); 6 Apr 2007 15:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15627 invoked by uid 99); 6 Apr 2007 15:44:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 08:44:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 08:44:49 -0700
Received: (qmail 2699 invoked from network); 6 Apr 2007 15:37:47 -0000
Received: from unknown (HELO p5b0dff44.dip.t-dialin.net) ([pbs]695637@[91.13.255.68])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 6 Apr 2007 15:37:47 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: luke v0.7 and SnowBallAnalyzer
Date: Fri, 6 Apr 2007 17:38:41 +0200
User-Agent: KMail/1.8.2
References: <46151096.3000306@proxml.be>
In-Reply-To: <46151096.3000306@proxml.be>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704061738.41815@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 05 April 2007 17:07, Paul Hermans wrote:

> I do receive the message
> "java.lang.ClassNotFound:
> net.sf.snowball.ext.GermansStemmer".

This class is not part of the lukeall-0.7.jar, but it's in lucene-snowball-2.1.0.jar
(which  you can find on the Luke homepage). You will then need to start Luke 
like this to make that file accessible to Luke:

java -classpath lucene-snowball-2.1.0.jar:lukeall-0.7.jar org.getopt.luke.Luke

(use ; instead of : if you're under Windows)

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 15:50:03 2007
Return-Path: <java-user-return-27448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43243 invoked from network); 6 Apr 2007 15:50:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 15:50:02 -0000
Received: (qmail 24307 invoked by uid 500); 6 Apr 2007 15:50:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23918 invoked by uid 500); 6 Apr 2007 15:50:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23907 invoked by uid 99); 6 Apr 2007 15:50:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 08:50:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.92.5.126] (HELO slim-4a.inet.it) (213.92.5.126)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 08:49:55 -0700
Received: from 81-208-125-170.ip.fastwebnet.it ([::ffff:81.208.125.170]) by slim-4a.inet.it via I-SMTP-5.4.4-547
	id ::ffff:81.208.125.170+F3u1VEDBJ6; Fri, 06 Apr 2007 17:49:31 +0200
Message-ID: <46166CEE.4030405@buongiorno.com>
Date: Fri, 06 Apr 2007 17:53:18 +0200
From: Roberto Fonti <roberto.fonti@buongiorno.com>
User-Agent: Mozilla Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: UN_TOKENIZED and StandardAnalyzer
References: <461619F7.2030206@buongiorno.com> <359a92830704060725p4f97c688s8cfc497bea6aae31@mail.gmail.com>
In-Reply-To: <359a92830704060725p4f97c688s8cfc497bea6aae31@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------060607020808070106050409"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060607020808070106050409
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Thanks Erick for your help.
Actually I was already using Luke!
The only thing I was missing was the possibility of using different 
Analyzers at the same time, with PerFieldAnalyzerWrapper.

Thank you again.
Best,
Roberto

Erick Erickson ha scritto:
> Really, really, really get a copy of Luke. Really. Use it to open
> your index and run experimental queries, especially to see
> how they get rewritten (but be sure to pick the appropriate
> analyzer).
>
> Google "lucene luke". Really, really get a copy. It'll help you
> make MUCH faster progress than waiting for someone to
> get around to answering posts here <G>....
>
> Then use query.toString() to see how things pars in your programs
> (or use Luke's search tab to see similar).
>
> If you do, you'll see that parsing the string "winter sport" becomes
> CATEGORY:winter CATEGORY:sport
>
> using StandardAnalyzer with the default operator OR will not
> match an untokenized field of "winter category".
> AND won't work either, it's an UN_TOKENIZED field
>
> Using KeywordAnzlyer gives
> CATEGORY:winter CATEGORY:sport
> This does NOT match the document
> I indexed UN_TOKENIZED 'winter sport'. What the heck?
>
> But using KeywordAnalyzer with
> "\"winter sport\""
>
> That is, where the double quotes are port of the query and using
> KeywordAnalyzer gives
> CATEGORY:winter sport
> and produces the correct match on my UN_TOKENIZED field. What's
> happening here is the double quotes cause the parser to pass both
> words as a single token rather than two tokens.
>
> This has been a source of some confusion on the list, there
> is a very long thread you'll find if you search the archives
> for KeywordAnalyzer.
>
>
> Best
> Erick
>
> On 4/6/07, Roberto Fonti <roberto.fonti@buongiorno.com> wrote:
>>
>> Hi All,
>> I'm indexing categories with this code:
>>
>> for (Category category : item.getCategories()) {
>>     lucene_doc.add(new Field(
>>         "CATEGORY",
>>         category.getName(),
>>         Field.Store.NO,
>>         Field.Index.UN_TOKENIZED));
>> }
>>
>> And searching using the query:
>>
>> String query = "CATEGORY:("+category.getName()+")";
>>
>> I've configured to use the StandardAnalyzer both in the IndexWriter for
>> the QueryParser.
>>
>> Everything goes fine BUT with categories that contains whitespaces (or
>> other chars that get tokenized).
>>
>> * If category is "sport" - ok, I get the result from the search
>> * If category is "winter sport" - I get no result from search
>>
>> I've tried with a number of search syntax:
>> +CATEGORY:"winter sport"
>> +CATEGORY:winter +CATEGORY:sport
>> +CATEGORY:(winter sport)
>> and other...
>> but none of them work.
>>
>> What's wrong with that?
>> By the way, using the KeywordAnalyzer it works, but it is not the
>> correct analyzer for my application.
>> Shouldn't the Analyzer be ignored for a Field.Index.UN_TOKENIZED field?
>>
>> Thanks,
>> Roberto
>>
>>
>>
>

-- 
Roberto Fonti
Technology Group
Buongiorno SpA

roberto.fonti@buongiorno.com
http://www.buongiorno.com
 
Il Girasole, Palazzo Marco Polo 324
20084 Lacchiarella, Milano ITALY


--------------060607020808070106050409--


From java-user-return-27449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 17:11:08 2007
Return-Path: <java-user-return-27449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64990 invoked from network); 6 Apr 2007 17:11:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 17:11:06 -0000
Received: (qmail 37589 invoked by uid 500); 6 Apr 2007 17:11:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37555 invoked by uid 500); 6 Apr 2007 17:11:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37544 invoked by uid 99); 6 Apr 2007 17:11:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 10:11:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.65] (HELO web53511.mail.re2.yahoo.com) (206.190.39.65)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Apr 2007 10:10:57 -0700
Received: (qmail 2676 invoked by uid 60001); 6 Apr 2007 17:10:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=mAyaSV2CS3DlvPf9cNF+X4GFWxKijui8iE1JEqHPmc+Xc80wVubI6NnyuCM66W9wSOodp9lppHLYnYrwt+rMKy2Df+IfV4DV4UoK3vJ3yhA5Kv0G03qsH1aQc3erkxdUL4VCtZsGnDJbRT3f1bfk2IltrISIRjtHsgG9nBBqn5s=  ;
Message-ID: <20070406171036.2674.qmail@web53511.mail.re2.yahoo.com>
X-YMail-OSG: ucRCjYsVM1k_lJEg2jrhGYvYlnu7K6Ay8nzl1o7p0yuOVPMMtYgNclbB0Iw9CunWUOb6BX4oZT9Ji1wnrhzBPietG70CSqSsziHB
Received: from [66.7.242.34] by web53511.mail.re2.yahoo.com via HTTP; Fri, 06 Apr 2007 10:10:36 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Fri, 6 Apr 2007 10:10:36 -0700 (PDT)
From: Craig W Conway <craigwconway@yahoo.com>
Subject: Re: Out of memory exception for big indexes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1508323934-1175879436=:999"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1508323934-1175879436=:999
Content-Type: text/plain; charset=ascii

Would it be fair to say that you can expect OutOfMemory errors if you run complex queries? ie sorts, boosts, weights...

My query looks like this:

+(pathNodeId_2976569:1^5.0 pathNodeId_2976969:1 pathNodeId_2976255:1 pathNodeId_2976571:1) +(pathClassId:1 pathClassId:346 pathClassId:314) -id:369


My OutOfMemory error occurs like so:

java.lang.OutOfMemoryError: Java heap space
Dumping heap to java_pid4512.hprof ...
Heap dump file created [71421503 bytes in 2.640 secs]
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at org.apache.lucene.index.MultiReader.norms(MultiReader.java:173)
        at org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:69)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight2.scorer(BooleanQuery.java:355)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:130)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:100)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:66)
        at org.apache.lucene.search.Hits.<init>(Hits.java:45)
        at org.apache.lucene.search.Searcher.search(Searcher.java:45)
        at org.apache.lucene.search.Searcher.search(Searcher.java:37)

References:

http://www.opensubscriber.com/message/java-user@lucene.apache.org/1961376.html
http://www.opensubscriber.com/message/java-user@lucene.apache.org/6362024.html


----- Original Message ----
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 8:20:21 AM
Subject: Re: Out of memory exception for big indexes

Ivane,

Sorts will eat your memory, and how much they use depends on what you store in them - ints, String, floats...
A profiler like JProfiler will tell you what's going on, who's eating your memory.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Ivan Vasilev <ivasilev@sirma.bg>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 7:09:38 AM
Subject: Out of memory exception for big indexes

Hi All,

I have the following problem - we have OutOfMemoryException when 
seraching on the indexes that are of size 20 - 40 GB and contain 10 - 15 
million docs.
When we make searches we perform query that match all the results but we 
DO NOT fetch all the results - we fetch 100 of them. We also make 
sorting by using the class Sort and we really need result to be sorted 
on a field that is randomly defined by the user.
So my questions are:
1) Have Lucene some restrictions on index size on which it can perform 
searches?
2) Is there some approach to estimate beforehand the RAM that will use 
Lucene for sertain query? I mean on what exactly depends this memory 
usage - on index size, on docs stored in the index, on size of this docs...
3) Is there some approach to controll the used RAM. For example when 
searching not to exceed 1GB of used memory?
4) Is there some spcial approach to proceeding with such big indexes (we 
expect in near future even 60 -80 GB indexes).


Best Regards,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org








 
____________________________________________________________________________________
Bored stiff? Loosen up... 
Download and play hundreds of games for free on Yahoo! Games.
http://games.yahoo.com/games/front
--0-1508323934-1175879436=:999--

From java-user-return-27450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 17:20:39 2007
Return-Path: <java-user-return-27450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66988 invoked from network); 6 Apr 2007 17:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 17:20:39 -0000
Received: (qmail 56545 invoked by uid 500); 6 Apr 2007 17:20:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56512 invoked by uid 500); 6 Apr 2007 17:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56501 invoked by uid 99); 6 Apr 2007 17:20:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 10:20:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 10:20:32 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1315236ugc
        for <java-user@lucene.apache.org>; Fri, 06 Apr 2007 10:20:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=IAdTlUhhbm60b7mDUITPZ/CXLGLslZkN9TBEmflEuU9sqFRhiRTqA3drDvPaq2fAa4t/htIyniKTntnwVPBQTTLQWCCbPATApnOePo/yBlI3q1PpvNdYOqAm/bGuIHW72OAV7JxcfrlMW0BaPUZVa9pSpB1VzN3Ci7k3UzvB1Pk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=OMQzHzDQWrglqSw8d/HzV4Jq4YmuedvvsEMZhQFyaUifASjF7rDRqSsX7cvOuFBOEpE8uAivkhRnRNDht8fBQnXny81Gs+v7MsA3s2Lh/WsylZQnZQoSa+WGYv6i3NxXb5K/NYBB5KVjp2vfU8U3VSVxhSPIxlR5l7xMVWgfDXI=
Received: by 10.82.138.6 with SMTP id l6mr4760151bud.1175880010867;
        Fri, 06 Apr 2007 10:20:10 -0700 (PDT)
Received: by 10.82.126.8 with HTTP; Fri, 6 Apr 2007 10:20:10 -0700 (PDT)
Message-ID: <c68e39170704061020y2361e04me153594fb747155a@mail.gmail.com>
Date: Fri, 6 Apr 2007 13:20:10 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: indexing and searching real numbers
In-Reply-To: <9859816.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <9859816.post@talk.nabble.com>
X-Google-Sender-Auth: 3030c9923fbae974
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/5/07, Leon <lmikhailov@netzero.net> wrote:
> I need to index and search real numbers in Lucene. I found NumberUtils cl=
ass
> in Solr project which permits one to encode doubles into string so that
> alpha numeric ordering would correctly correspond to the ordering on
> numbers. When I use ConstantScoreRangeQuery programmatically everything
> works just fine. However when I convert this query to a string, parse it
> with QueryParser and use the resulting query =96 no result are found.
>
> ConstantScoreRangeQuery wquery =3D
>   new ConstantScoreRangeQuery("westbc", null,
> NumberUtils.double2sortableStr(-110.500000), false, true);
> Hits hits =3D is.search(wquery); //returns expected results
>
> Now if I do
>
> String wqueryString =3D wquery.toString();
> QueryParser queryParser =3D new QueryParser("westbc", new KeywordAnalyzer=
());
> Query query =3D queryParser.parse(wqueryString);
> Hits hits =3D is.search(query); // returns nothing

Query.toString() is really for debugging only, and I don't believe
current implementations try to escape characters that might be interpreted
as something else if reparsed.

Simple example...  I think
(new TermQuery(new Term("foo","\"a\""))).toString() would yield
foo:"a"
which if put through the query parser, would be parsed as
foo:a

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 17:24:00 2007
Return-Path: <java-user-return-27451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67725 invoked from network); 6 Apr 2007 17:23:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 17:23:59 -0000
Received: (qmail 62007 invoked by uid 500); 6 Apr 2007 17:23:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61972 invoked by uid 500); 6 Apr 2007 17:23:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61961 invoked by uid 99); 6 Apr 2007 17:23:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 10:23:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 10:23:51 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 13A425F703; Fri,  6 Apr 2007 10:23:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0A5087F403
	for <java-user@lucene.apache.org>; Fri,  6 Apr 2007 10:23:31 -0700 (PDT)
Date: Fri, 6 Apr 2007 10:23:30 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Explanation from FunctionQuery
In-Reply-To: <20070406134940.57276.qmail@web90315.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0704061020550.13712@hal.rescomp.berkeley.edu>
References: <20070406134940.57276.qmail@web90315.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: So we reach a problem at extractTerms.  I get an explanation no problem

	...

: I'm using the version of FunctionQuery from the JIRA attachment.

that seems like the heart of the problem ... i haven't looked at the
version in Jira for a while, but the version commited into Solr does
provide an implementation of extractTerms (not that it really comes into
play at all).  That's why Yonik put a note in the Jira version that it's
out of date.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 18:01:33 2007
Return-Path: <java-user-return-27452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83004 invoked from network); 6 Apr 2007 18:01:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 18:01:32 -0000
Received: (qmail 21537 invoked by uid 500); 6 Apr 2007 18:01:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21511 invoked by uid 500); 6 Apr 2007 18:01:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21488 invoked by uid 99); 6 Apr 2007 18:01:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 11:01:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 11:01:13 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5B2015B763; Fri,  6 Apr 2007 11:00:53 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 502037F403
	for <java-user@lucene.apache.org>; Fri,  6 Apr 2007 11:00:53 -0700 (PDT)
Date: Fri, 6 Apr 2007 11:00:53 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
In-Reply-To: <20070406171036.2674.qmail@web53511.mail.re2.yahoo.com>
Message-ID: <Pine.LNX.4.58.0704061056480.15801@hal.rescomp.berkeley.edu>
References: <20070406171036.2674.qmail@web53511.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Would it be fair to say that you can expect OutOfMemory errors if you
: run complex queries? ie sorts, boosts, weights...

not intrinsicly ... the amount of memory used has more to do with the size
of hte index and the sorting done then it does with teh number of clauses
in your query (of course, having more complex clauses - like
FunctionQueries that use FieldCaches) can use more memory.

: +(pathNodeId_2976569:1^5.0 pathNodeId_2976969:1 pathNodeId_2976255:1 pathNodeId_2976571:1) +(pathClassId:1 pathClassId:346 pathClassId:314) -id:369

...the big thing that jumps out at me here is that you seem to be using
very dynamic field names for storing boolean values ... have your set the
OMIT_NORMS option on all of those fields? ... having norms makes your
index bigger, and contributes to the memory usage at query time 9and
doesn't add any benefit to a query like this )

: java.lang.OutOfMemoryError: Java heap space
: Dumping heap to java_pid4512.hprof ...
: Heap dump file created [71421503 bytes in 2.640 secs]
: Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
:         at org.apache.lucene.index.MultiReader.norms(MultiReader.java:173)

...that could indicate that norms are your problem, or you could already
have norms turned off on all but one field, and it's just the straw that
breaks the camels back ... looking at a visualization of your heap is the
only thing that's really going to tell you what is taking up all your ram.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 18:06:07 2007
Return-Path: <java-user-return-27453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84398 invoked from network); 6 Apr 2007 18:06:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 18:06:05 -0000
Received: (qmail 37470 invoked by uid 500); 6 Apr 2007 18:06:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37438 invoked by uid 500); 6 Apr 2007 18:06:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37421 invoked by uid 99); 6 Apr 2007 18:06:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 11:06:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 11:05:53 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 103AD5B763; Fri,  6 Apr 2007 11:05:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 03D4C7F403
	for <java-user@lucene.apache.org>; Fri,  6 Apr 2007 11:05:33 -0700 (PDT)
Date: Fri, 6 Apr 2007 11:05:32 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
In-Reply-To: <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
References: <46162A72.50400@sirma.bg> <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The problem I suspect is the sorting. As I understand, Lucene
: builds internal caches for sorting and I suspect that this is the root
: of your problem. You can test this by trying your problem queries
: without sorting.

if Sorting really is the cause of your problems, you may want to try out
this patch...

https://issues.apache.org/jira/browse/LUCENE-769

...it *may* be advantageous in situations where memory is your most
constrained resource, and you are willing to sacrifice speed for sorting
... it looks promising to me, but there haven't been any convincing
usecases/benchmarks of people finding it beneficial (other then the
original contributor)

if you do try it, please post your comments in the issue.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 18:35:48 2007
Return-Path: <java-user-return-27454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92518 invoked from network); 6 Apr 2007 18:35:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 18:35:46 -0000
Received: (qmail 92681 invoked by uid 500); 6 Apr 2007 18:35:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92652 invoked by uid 500); 6 Apr 2007 18:35:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92641 invoked by uid 99); 6 Apr 2007 18:35:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 11:35:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.252.100.150] (HELO web90313.mail.mud.yahoo.com) (216.252.100.150)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Apr 2007 11:35:38 -0700
Received: (qmail 70177 invoked by uid 60001); 6 Apr 2007 18:35:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=fM0Rt5G+/gWZNp+ND7DD/P4KEUlBRIIFoERUbSrPoGbQdpqm0fHxWilzNsnFFHCbdDO1VyBjz6HN+zsmPBsr5+Da+817XEfWSPDKXWaGNF9+Qr+5t1fNE76moR/O7zxHF5qVe92FJzQd5Rs0uDNzXlr19uw+eMOIM/5FeTP0gUI=;
X-YMail-OSG: PdnI3v0VM1kFg4SE2xDjZx0XXZ2kBToG_6pSnER6ApUI9IOzxjJnJEuxrE39AMWvmN4Bf__H2yfj2wCicHOGPIUXpLCY8BvJk9KN
Received: from [140.177.203.1] by web90313.mail.mud.yahoo.com via HTTP; Fri, 06 Apr 2007 11:35:16 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Fri, 6 Apr 2007 11:35:16 -0700 (PDT)
From: Annona Keene <annonakeene@yahoo.com>
Subject: Re: Explanation from FunctionQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1832726298-1175884516=:69664"
Message-ID: <645190.69664.qm@web90313.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1832726298-1175884516=:69664
Content-Type: text/plain; charset=ascii

And it was as easy as all that... 

Thanks.

----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 12:23:30 PM
Subject: Re: Explanation from FunctionQuery


: So we reach a problem at extractTerms.  I get an explanation no problem

    ...

: I'm using the version of FunctionQuery from the JIRA attachment.

that seems like the heart of the problem ... i haven't looked at the
version in Jira for a while, but the version commited into Solr does
provide an implementation of extractTerms (not that it really comes into
play at all).  That's why Yonik put a note in the Jira version that it's
out of date.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org








 
____________________________________________________________________________________
The fish are biting. 
Get more visitors on your site using Yahoo! Search Marketing.
http://searchmarketing.yahoo.com/arp/sponsoredsearch_v2.php
--0-1832726298-1175884516=:69664--

From java-user-return-27455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 18:39:59 2007
Return-Path: <java-user-return-27455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93731 invoked from network); 6 Apr 2007 18:39:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 18:39:58 -0000
Received: (qmail 4920 invoked by uid 500); 6 Apr 2007 18:39:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4890 invoked by uid 500); 6 Apr 2007 18:39:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4879 invoked by uid 99); 6 Apr 2007 18:39:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 11:39:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Apr 2007 11:39:50 -0700
Received: (qmail 61631 invoked by uid 60001); 6 Apr 2007 18:39:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=zRh/7WcseTBUwhCh33n6XpD7W/puXKTfgAGdgk0M6+kF/z6pKUo9AAtHUq8whs/Lecl91fXg27oj5gyyHUTk0ZpXWqVcua0zxZXRPrlj+Vv88WeoS2te6FubtyN1soAFmNDrlAqMaf0EweG1UnvQABJP7kenkbhkCxpuvzdM0BY=;
Received: from [66.92.187.33] by web50304.mail.re2.yahoo.com via HTTP; Fri, 06 Apr 2007 11:39:28 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.8
Date: Fri, 6 Apr 2007 11:39:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Out of memory exception for big indexes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <395741.61251.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Craig,

This just shows you that the JVM OOMed while running thar particular method, and does not necessarily mean that that method is what's consuming your RAM.
Run your app and, if you are using Java 1.5/1.6 run jmap against that java process and tell it to show you how much memory objects are consuming.  Sort it by the appropriate column and you'll get your top memoty hogs.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Craig W Conway <craigwconway@yahoo.com>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 1:10:36 PM
Subject: Re: Out of memory exception for big indexes

Would it be fair to say that you can expect OutOfMemory errors if you run complex queries? ie sorts, boosts, weights...

My query looks like this:

+(pathNodeId_2976569:1^5.0 pathNodeId_2976969:1 pathNodeId_2976255:1 pathNodeId_2976571:1) +(pathClassId:1 pathClassId:346 pathClassId:314) -id:369


My OutOfMemory error occurs like so:

java.lang.OutOfMemoryError: Java heap space
Dumping heap to java_pid4512.hprof ...
Heap dump file created [71421503 bytes in 2.640 secs]
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at org.apache.lucene.index.MultiReader.norms(MultiReader.java:173)
        at org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:69)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight2.scorer(BooleanQuery.java:355)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:130)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:100)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:66)
        at org.apache.lucene.search.Hits.<init>(Hits.java:45)
        at org.apache.lucene.search.Searcher.search(Searcher.java:45)
        at org.apache.lucene.search.Searcher.search(Searcher.java:37)

References:

http://www.opensubscriber.com/message/java-user@lucene.apache.org/1961376.html
http://www.opensubscriber.com/message/java-user@lucene.apache.org/6362024.html


----- Original Message ----
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 8:20:21 AM
Subject: Re: Out of memory exception for big indexes

Ivane,

Sorts will eat your memory, and how much they use depends on what you store in them - ints, String, floats...
A profiler like JProfiler will tell you what's going on, who's eating your memory.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Ivan Vasilev <ivasilev@sirma.bg>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 7:09:38 AM
Subject: Out of memory exception for big indexes

Hi All,

I have the following problem - we have OutOfMemoryException when 
seraching on the indexes that are of size 20 - 40 GB and contain 10 - 15 
million docs.
When we make searches we perform query that match all the results but we 
DO NOT fetch all the results - we fetch 100 of them. We also make 
sorting by using the class Sort and we really need result to be sorted 
on a field that is randomly defined by the user.
So my questions are:
1) Have Lucene some restrictions on index size on which it can perform 
searches?
2) Is there some approach to estimate beforehand the RAM that will use 
Lucene for sertain query? I mean on what exactly depends this memory 
usage - on index size, on docs stored in the index, on size of this docs...
3) Is there some approach to controll the used RAM. For example when 
searching not to exceed 1GB of used memory?
4) Is there some spcial approach to proceeding with such big indexes (we 
expect in near future even 60 -80 GB indexes).


Best Regards,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org








 
____________________________________________________________________________________
Bored stiff? Loosen up... 
Download and play hundreds of games for free on Yahoo! Games.
http://games.yahoo.com/games/front



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 19:04:16 2007
Return-Path: <java-user-return-27456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5053 invoked from network); 6 Apr 2007 19:04:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 19:04:15 -0000
Received: (qmail 56092 invoked by uid 500); 6 Apr 2007 19:04:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56063 invoked by uid 500); 6 Apr 2007 19:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56050 invoked by uid 99); 6 Apr 2007 19:04:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 12:04:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of abublic@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 12:04:06 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1329773ugc
        for <java-user@lucene.apache.org>; Fri, 06 Apr 2007 12:03:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BjWWZXq7UYKPWfopS3CuZHUKAO3c0TNJI5HHyncWgu0XovHmvkEsHpFgOcpcLBodFeYhi3F1jjTbvwNgDjww+VlLLOdUZFSHef87Njcr3qtn/kcM7HgE1gE50wEUG6opDrHaR4itCk1zzIOgYvqUCd0V5NaBtOdpWqj5ayB2e8o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=alHbY2hSpU+wZmITrs0it9SeIn4dPrdZNFVVHyQ3uFo5HTVvWKUmzJ8JYQyclNyDB7CxAImFI9Ubru3ptAGzZ975wuzLvySGFL9uDz4C6hoikjG7S/9QbGRTdHB3LVasac6/lYqDJTymfL9ekGZy1U7oz2xJXAP2nvczEFV3uAg=
Received: by 10.67.71.15 with SMTP id y15mr3183929ugk.1175886225107;
        Fri, 06 Apr 2007 12:03:45 -0700 (PDT)
Received: by 10.67.11.2 with HTTP; Fri, 6 Apr 2007 12:03:45 -0700 (PDT)
Message-ID: <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
Date: Fri, 6 Apr 2007 23:03:45 +0400
From: "Bublic Online" <abublic@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
In-Reply-To: <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7571_16603832.1175886225052"
References: <46162A72.50400@sirma.bg>
	 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
	 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7571_16603832.1175886225052
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ivan, Chris and all!

I'm that contributor of LUCENE-769 and I recommend it too :)
OutOfMemory error was one of main reasons for me to make it.

Regards,
Artem Vasiliev

On 4/6/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : The problem I suspect is the sorting. As I understand, Lucene
> : builds internal caches for sorting and I suspect that this is the root
> : of your problem. You can test this by trying your problem queries
> : without sorting.
>
> if Sorting really is the cause of your problems, you may want to try out
> this patch...
>
> https://issues.apache.org/jira/browse/LUCENE-769
>
> ...it *may* be advantageous in situations where memory is your most
> constrained resource, and you are willing to sacrifice speed for sorting
> ... it looks promising to me, but there haven't been any convincing
> usecases/benchmarks of people finding it beneficial (other then the
> original contributor)
>
> if you do try it, please post your comments in the issue.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7571_16603832.1175886225052--

From java-user-return-27457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 06 22:41:40 2007
Return-Path: <java-user-return-27457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96632 invoked from network); 6 Apr 2007 22:41:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Apr 2007 22:41:38 -0000
Received: (qmail 52103 invoked by uid 500); 6 Apr 2007 22:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52073 invoked by uid 500); 6 Apr 2007 22:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52053 invoked by uid 99); 6 Apr 2007 22:41:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 15:41:38 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.199.151] (HELO web81511.mail.mud.yahoo.com) (68.142.199.151)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Apr 2007 15:41:30 -0700
Received: (qmail 72506 invoked by uid 60001); 6 Apr 2007 22:41:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=YDfjjDobVwlDr5qnnsrtM01W/iNZ63EbBMQDidgWdZgX0xlN83QuOqSQRd6GgY77sE0+RR7pMyZKAKRAbswt9ktaQLaGFHw5BU5XO9kySb4xzL9LTXVgM9uWO2hcqGpkpY0tUcS7F7zCASqSf6+7zl/5kf5s17teYFhu7qdJm8A=;
X-YMail-OSG: QwcT5aAVM1kuWunif84rwISSWNzEIDuHHkIjLM02cGvfFqM5zk.DenlN7cKQyMt9qC6yNESTwGStwnKg7J3dvmB2HA--
Received: from [71.146.21.193] by web81511.mail.mud.yahoo.com via HTTP; Fri, 06 Apr 2007 15:41:09 PDT
Date: Fri, 6 Apr 2007 15:41:09 -0700 (PDT)
From: Felix Litman <f_litman@pacbell.net>
Subject: Re: search on colon ":" ending words
To: java-user@lucene.apache.org
In-Reply-To: <45BD1025.3000709@curtin.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1997775357-1175899269=:71704"
Content-Transfer-Encoding: 8bit
Message-ID: <260554.71704.qm@web81511.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1997775357-1175899269=:71704
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


We ended up using String newquery = query.replace(query, ":", 
with space in quotes after the ":".   It worked great. Now results come back even if you use
colon in the query.  And one can still use ":" as a special operator if there is no space 
afterwards.  Great suggestion.

Thanks!

Felix
-----------------------------------------------------
Finervista - http://www.finervista.com 

"Michael D. Curtin" <mike@curtin.com> wrote: Felix Litman wrote:
> We want to be able to return a result regardless if users use a colon or not in the query.  So 'work:' and 'work' query should still return same result.
> 
> With the current parser if a user enters 'work:'  with a ":" , Lucene does not return anything :-(.   It seems to me the Lucene parser issue.... we are wondering if there is any simple way to make the Lucene parser ignore the ":" in the query?

The StandardAnalyzer already strips out the colons from the indexed 
text, so all you need to do is get rid of them in the query.  Would

   String newquery = query.replace(query, ":", " ");

work?  It uses a space as the new text so that two query words that 
happened to be separated by the colon would still be separate words ...

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--0-1997775357-1175899269=:71704--

From java-user-return-27458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 07 02:22:24 2007
Return-Path: <java-user-return-27458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48527 invoked from network); 7 Apr 2007 02:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2007 02:22:23 -0000
Received: (qmail 40933 invoked by uid 500); 7 Apr 2007 02:22:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40905 invoked by uid 500); 7 Apr 2007 02:22:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40894 invoked by uid 99); 7 Apr 2007 02:22:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 19:22:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cwho.work@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2007 19:22:15 -0700
Received: by an-out-0708.google.com with SMTP id c3so1122647ana
        for <java-user@lucene.apache.org>; Fri, 06 Apr 2007 19:21:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=RXm1WvWKdv73eGtWe84YDp52YWSBipilUzqrNWfrnNmSL+e/aSISR/jChED1raWtTRoIQF4egzfr8IYdsnO9RVj5rdaiQwst8wTVnXlUeqsHyMoKXffHk9Qz7KK97SOFew/WGVL+NV7hEbq/o+BX17PBSeXfoPwgaFRIHSMHuzE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=JYJmqSuFTaSBEa1WCqpnqZh5+8ODJHxu2mFBKUgX8O4T8/Y6Go3GS2Oao7mBQX6PRthYdAikup/qhNq3gHv5Twy3Mwa93jQxDRV8sLRlIMyQCG2cmed1pnasvKo7LTaKToGn0JKrKkjawXXI69g8rGSh+rxeM203idCynPcD9zg=
Received: by 10.100.152.9 with SMTP id z9mr2519569and.1175912514752;
        Fri, 06 Apr 2007 19:21:54 -0700 (PDT)
Received: by 10.100.58.14 with HTTP; Fri, 6 Apr 2007 19:21:54 -0700 (PDT)
Message-ID: <6c33f9950704061921v36f159eao31d32c3016f2a7a0@mail.gmail.com>
Date: Sat, 7 Apr 2007 11:21:54 +0900
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index updates between machines
In-Reply-To: <32dca9ed0704031255x11c5c317j7134bdab2b69173a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <900138.95841.qm@web50302.mail.re2.yahoo.com>
	 <32dca9ed0704031255x11c5c317j7134bdab2b69173a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the ideas.

We are testing out the methods and changes suggested to see if they
work with our current set up, and are checking if the disks are the
bottleneck in this case, but feel free to drop more hints. :)

At the moment we are copying the index at an offpeak hour, but we
would also like to provide updates throughout the day where possible.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 07 10:06:17 2007
Return-Path: <java-user-return-27459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43316 invoked from network); 7 Apr 2007 10:06:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2007 10:06:15 -0000
Received: (qmail 52558 invoked by uid 500); 7 Apr 2007 10:06:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52482 invoked by uid 500); 7 Apr 2007 10:06:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52471 invoked by uid 99); 7 Apr 2007 10:06:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2007 03:06:13 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2007 03:06:05 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Ha7nl-0001KH-7H
	for java-user@lucene.apache.org; Sat, 07 Apr 2007 03:05:45 -0700
Message-ID: <9882808.post@talk.nabble.com>
Date: Sat, 7 Apr 2007 03:05:45 -0700 (PDT)
From: "Ratnesh,V2Solutions India" <ratnesh.srivastava@in.v2solutions.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.deleteDocuement(); How to use it with our code??
In-Reply-To: <535275.92320.qm@web50302.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ratnesh.srivastava@in.v2solutions.com
References: <535275.92320.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I am trying like this in my code but  control is going in catch instead of
try block

else {
			//if (LOG.isInfoEnabled())
				//LOG.info("Document " + url + " has no OBJECT links.");
				try{
					//LOG.info("Document " + url + " has no OBJECT links.");
					surl1=url.toString();
										
				String indexDir="E:\\eclipse\\310307\\objtest\\crawl-result\\index";
				FSDirectory directory = FSDirectory.getDirectory(indexDir,true);
				//LOG.info("Document " + directory + " is the  DIRECTORY VALUES.");
				IndexReader reader = IndexReader.open(directory);
				if(true){
				System.out.println("The value of Deleted Document is " +directory);
				Term term = new Term("url", surl1);
			    int deleted = reader.deleteDocuments(term);
			    
				}
				directory.close();
			    reader.close();
				}
				catch(Exception e){System.out.println("Exception Found In Block");}
				
				//IndexReader ir=new IndexReader(dir);
				//setNonObjectUrl(surl1);
				//return surl1;
		}

		return doc;

can you brief me where did I go wrong??

Ratnesh, V2Solutions India

Otis Gospodnetic wrote:
> 
> Hi Ratnesh,
> 
> 1. There is no need to use that many question marks, really.
> 2. Use java-user list, not java-dev
> 3. You cannot delete using negative criteria.  You can delete 1 Document
> using its document ID, or you can delete 1 or more Documents using a Term
> where you specify a field name and a value.  So, you can delete all
> Documents that have a field X with value Y, but you cannot delete
> Documents that do *not* have a value Y in field X.
> 
> This must be in the FAQ, is it not?
> 
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> 
> ----- Original Message ----
> From: "Ratnesh,V2Solutions India" <ratnesh.srivastava@in.v2solutions.com>
> To: java-dev@lucene.apache.org
> Sent: Friday, April 6, 2007 9:39:23 AM
> Subject: IndexReader.deleteDocuement(); How to use it with our code??
> 
> 
> HI,
> I have written a plugin which finds out "object" tags url and store it in
> the index with "objects" fields.
> I am intrested in getting only those url's which has "object" tag but
> instead I get all the urls to be indexed.
> 
> So what I want is to delete some unwanted urls which don't have "object"
> tag.
> 
> So how shall I do it??
> 
> Can nybody help me resolving this issue???
> 
> 
> Ratnesh, V2Solutions India
> -- 
> View this message in context:
> http://www.nabble.com/IndexReader.deleteDocuement%28%29--How-to-use-it-with-our-code---tf3536867.html#a9872410
> Sent from the Lucene - Java Developer mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-dev-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-IndexReader.deleteDocuement%28%29--How-to-use-it-with-our-code---tf3537305.html#a9882808
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 07 13:42:55 2007
Return-Path: <java-user-return-27460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28196 invoked from network); 7 Apr 2007 13:42:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Apr 2007 13:42:54 -0000
Received: (qmail 13008 invoked by uid 500); 7 Apr 2007 13:42:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12678 invoked by uid 500); 7 Apr 2007 13:42:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12663 invoked by uid 99); 7 Apr 2007 13:42:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2007 06:42:52 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=HTML_MESSAGE,INFO_TLD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2007 06:42:44 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1719522mue
        for <java-user@lucene.apache.org>; Sat, 07 Apr 2007 06:42:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A4/SYndFup1FWS3B0uTBLyTdnzzKQmAfqQr2AbQanQU9R+4InlDfNyDxgJg+zBg5KxNL8tjXoIYZf7RmUla5Ij1Tdign20KBXsLt/5qGVZiWW+cFWn9FVCWdP2n+QIEdZzkyY6WbPlg3oba8xVQJaUOUt1J2Xfqfr+m0ouPtWEE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Nm0NbrLZVGe/9KAQKXNNT6sfcNrf1spIaZ/8ZjXpjLbbb2w1OAWmqHKRDgkYLNUIx37ujLVXFl9JQ/+i53I3xkMuU3Ui1QDjjcwWWrBnWceTf6vyxaLSXR+oUqMDruoaHfUXYsHEq1mqzevQWn70PZoR4J7nrhbjp6vI6IMY2vs=
Received: by 10.82.163.13 with SMTP id l13mr5370905bue.1175953342878;
        Sat, 07 Apr 2007 06:42:22 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Sat, 7 Apr 2007 06:42:22 -0700 (PDT)
Message-ID: <359a92830704070642m39aac70av1fb4644aa0793ea3@mail.gmail.com>
Date: Sat, 7 Apr 2007 09:42:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.deleteDocuement(); How to use it with our code??
In-Reply-To: <9882808.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11199_33286516.1175953342836"
References: <535275.92320.qm@web50302.mail.re2.yahoo.com>
	 <9882808.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11199_33286516.1175953342836
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, you're not giving us much to go on here other than code inspection.
It would be much more useful to give us the exception trace, try using
e.printStackTrace();
As an added benefit, that often allows me to figure out the problem
myself, which is faster.....

But at a guess, you're destroying your index with the call
FSDirectory directory = FSDirectory.getDirectory(indexDir,true)

because the second parameter is set to true, causing a new
directory to be created or the old one to be erased. This call
as been deprecated in Lucene 2.1, what version are you using?

And the line
System.out.println("The value of Deleted Document is " +directory);

confuses me a lot since directory is an FSDirectory, not a string.

Best
Erick

On 4/7/07, Ratnesh,V2Solutions India <ratnesh.srivastava@in.v2solutions.com>
wrote:
>
>
> Hi,
> I am trying like this in my code but  control is going in catch instead of
> try block
>
> else {
>                         //if (LOG.isInfoEnabled())
>                                 //LOG.info("Document " + url + " has no
> OBJECT links.");
>                                 try{
>                                         //LOG.info("Document " + url + "
> has no OBJECT links.");
>                                         surl1=url.toString();
>
>                                 String
> indexDir="E:\\eclipse\\310307\\objtest\\crawl-result\\index";
>                                 FSDirectory directory =
> FSDirectory.getDirectory(indexDir,true);
>                                 //LOG.info("Document " + directory + " is
> the  DIRECTORY VALUES.");
>                                 IndexReader reader = IndexReader.open
> (directory);
>                                 if(true){
>                                 System.out.println("The value of Deleted
> Document is " +directory);
>                                 Term term = new Term("url", surl1);
>                             int deleted = reader.deleteDocuments(term);
>
>                                 }
>                                 directory.close();
>                             reader.close();
>                                 }
>                                 catch(Exception e){System.out.println("Exception
> Found In Block");}
>
>                                 //IndexReader ir=new IndexReader(dir);
>                                 //setNonObjectUrl(surl1);
>                                 //return surl1;
>                 }
>
>                 return doc;
>
> can you brief me where did I go wrong??
>
> Ratnesh, V2Solutions India
>
> Otis Gospodnetic wrote:
> >
> > Hi Ratnesh,
> >
> > 1. There is no need to use that many question marks, really.
> > 2. Use java-user list, not java-dev
> > 3. You cannot delete using negative criteria.  You can delete 1 Document
> > using its document ID, or you can delete 1 or more Documents using a
> Term
> > where you specify a field name and a value.  So, you can delete all
> > Documents that have a field X with value Y, but you cannot delete
> > Documents that do *not* have a value Y in field X.
> >
> > This must be in the FAQ, is it not?
> >
> > Otis
> >  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> > Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> >
> > ----- Original Message ----
> > From: "Ratnesh,V2Solutions India" <ratnesh.srivastava@in.v2solutions.com
> >
> > To: java-dev@lucene.apache.org
> > Sent: Friday, April 6, 2007 9:39:23 AM
> > Subject: IndexReader.deleteDocuement(); How to use it with our code??
> >
> >
> > HI,
> > I have written a plugin which finds out "object" tags url and store it
> in
> > the index with "objects" fields.
> > I am intrested in getting only those url's which has "object" tag but
> > instead I get all the urls to be indexed.
> >
> > So what I want is to delete some unwanted urls which don't have "object"
> > tag.
> >
> > So how shall I do it??
> >
> > Can nybody help me resolving this issue???
> >
> >
> > Ratnesh, V2Solutions India
> > --
> > View this message in context:
> >
> http://www.nabble.com/IndexReader.deleteDocuement%28%29--How-to-use-it-with-our-code---tf3536867.html#a9872410
> > Sent from the Lucene - Java Developer mailing list archive at Nabble.com
> .
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-dev-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Re%3A-IndexReader.deleteDocuement%28%29--How-to-use-it-with-our-code---tf3537305.html#a9882808
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11199_33286516.1175953342836--

From java-user-return-27461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 05:03:36 2007
Return-Path: <java-user-return-27461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29755 invoked from network); 8 Apr 2007 05:03:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 05:03:35 -0000
Received: (qmail 22288 invoked by uid 500); 8 Apr 2007 05:03:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22257 invoked by uid 500); 8 Apr 2007 05:03:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22246 invoked by uid 99); 8 Apr 2007 05:03:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2007 22:03:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nileshbansal@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2007 22:03:28 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1501785ugc
        for <java-user@lucene.apache.org>; Sat, 07 Apr 2007 22:03:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=NZTWXCBTL7YWQqL3eVzyKq7H4EUqabMgYfN3KUEJk/PVGNI7qWCV1xC/Nj1KAPR5Gm5lCIQxXmyHL42Zl4veF2mCeEWbdH59RzDeyli0ux76ilmBXaatxD9a9rztiI1ieoncrSmtJ61nTdew2gS4YOPyMEykgBt+l2Nkl81qErw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XP82Evh9nvPbHxYXynFrWm0/Zxq/LhoqaC22l6f+fIdzEckE3GAO6c5U8YvQ96eOYWMFDPemLg6m5KRheQ3+jvp4JURVQkGM0AtHaZL47zAYTGtDi8A8Y6i0Opcx/f5WW5d6t2ASZq9zJXFYuYvRAOpHKDyk/ouM1lrNBMT98yU=
Received: by 10.82.136.4 with SMTP id j4mr6216127bud.1176008586933;
        Sat, 07 Apr 2007 22:03:06 -0700 (PDT)
Received: by 10.82.177.15 with HTTP; Sat, 7 Apr 2007 22:03:06 -0700 (PDT)
Message-ID: <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
Date: Sun, 8 Apr 2007 01:03:06 -0400
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
In-Reply-To: <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <46162A72.50400@sirma.bg>
	 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
	 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
	 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This seems like a very useful patch. Our application searches over 50
million doc in a 40GB index. We only have simple conjunctive queries
on a single field. Currently, the command line search program that
prints top-10 results requires at least 200mb memory. Our web
application, that searches the same index crashes with OOM when there
are more than 10-12 concurrent requests (heap size set to 3GB). Will
this patch help in such a situation?

It seems that there are some issues with this patch and that was the
reason it is not yet in the main source tree. Can someone please
summerize what are the downsides of using such an approach. It will be
really good if Lucene had it in main source tree and a flag to turn ON
or OFF this feature.

Bublic, can you tell me what exactly I need to do if I want to use this patch?

thanks
Nilesh

On 4/6/07, Bublic Online <abublic@gmail.com> wrote:
> Hi Ivan, Chris and all!
>
> I'm that contributor of LUCENE-769 and I recommend it too :)
> OutOfMemory error was one of main reasons for me to make it.
>
> Regards,
> Artem Vasiliev
>
> On 4/6/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> >
> > : The problem I suspect is the sorting. As I understand, Lucene
> > : builds internal caches for sorting and I suspect that this is the root
> > : of your problem. You can test this by trying your problem queries
> > : without sorting.
> >
> > if Sorting really is the cause of your problems, you may want to try out
> > this patch...
> >
> > https://issues.apache.org/jira/browse/LUCENE-769
> >
> > ...it *may* be advantageous in situations where memory is your most
> > constrained resource, and you are willing to sacrifice speed for sorting
> > ... it looks promising to me, but there haven't been any convincing
> > usecases/benchmarks of people finding it beneficial (other then the
> > original contributor)
> >
> > if you do try it, please post your comments in the issue.
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>


-- 
Nilesh Bansal.
http://queens.db.toronto.edu/~nilesh/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 16:59:13 2007
Return-Path: <java-user-return-27462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32337 invoked from network); 8 Apr 2007 16:59:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 16:59:12 -0000
Received: (qmail 41231 invoked by uid 500); 8 Apr 2007 16:59:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41056 invoked by uid 500); 8 Apr 2007 16:59:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41044 invoked by uid 99); 8 Apr 2007 16:59:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:11 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.140.23.26] (HELO s526.evanzo-server.de) (62.140.23.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:04 -0700
Received: (qmail 5136 invoked from network); 8 Apr 2007 18:58:42 +0200
Received: from e178212134.adsl.alicedsl.de (HELO server.localdomain) (85.178.212.134)
  by s23026.evanzo-server.de with SMTP; 8 Apr 2007 18:58:42 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 7458E3CD3
	for <java-user@lucene.apache.org>; Sun,  8 Apr 2007 18:58:13 +0200 (CEST)
From: lucene@nitwit.de
To: java-user@lucene.apache.org
Subject: built index doesn't contain a segments file
Date: Sun, 8 Apr 2007 18:58:13 +0200
User-Agent: KMail/1.9.5
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704081858.13343.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I feel somewhat stupid for asking this but...I let two thread build an index 
and the merge it into one on disk via addIndexes(), optimize() and close(). 
This is what it looks like on disk:

-rw-r--r-- 1 root root 25608841 Apr  8 18:37 _4.cfs
-rw-r--r-- 1 root root       20 Apr  8 18:37 segments.gen
-rw-r--r-- 1 root root       41 Apr  8 18:37 segments_4

However if I try to IndexReader.open() the index lucene complains about a 
missing segments file.

Well, right, it's not there. But why not?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 16:59:21 2007
Return-Path: <java-user-return-27463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32408 invoked from network); 8 Apr 2007 16:59:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 16:59:20 -0000
Received: (qmail 42226 invoked by uid 500); 8 Apr 2007 16:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42196 invoked by uid 500); 8 Apr 2007 16:59:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42180 invoked by uid 99); 8 Apr 2007 16:59:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:17 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.140.23.26] (HELO s526.evanzo-server.de) (62.140.23.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:10 -0700
Received: (qmail 5136 invoked from network); 8 Apr 2007 18:58:42 +0200
Received: from e178212134.adsl.alicedsl.de (HELO server.localdomain) (85.178.212.134)
  by s23026.evanzo-server.de with SMTP; 8 Apr 2007 18:58:42 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 7458E3CD3
	for <java-user@lucene.apache.org>; Sun,  8 Apr 2007 18:58:13 +0200 (CEST)
From: lucene@nitwit.de
To: java-user@lucene.apache.org
Subject: built index doesn't contain a segments file
Date: Sun, 8 Apr 2007 18:58:13 +0200
User-Agent: KMail/1.9.5
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704081858.13343.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I feel somewhat stupid for asking this but...I let two thread build an index 
and the merge it into one on disk via addIndexes(), optimize() and close(). 
This is what it looks like on disk:

-rw-r--r-- 1 root root 25608841 Apr  8 18:37 _4.cfs
-rw-r--r-- 1 root root       20 Apr  8 18:37 segments.gen
-rw-r--r-- 1 root root       41 Apr  8 18:37 segments_4

However if I try to IndexReader.open() the index lucene complains about a 
missing segments file.

Well, right, it's not there. But why not?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 16:59:35 2007
Return-Path: <java-user-return-27464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32473 invoked from network); 8 Apr 2007 16:59:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 16:59:34 -0000
Received: (qmail 42771 invoked by uid 500); 8 Apr 2007 16:59:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42726 invoked by uid 500); 8 Apr 2007 16:59:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42706 invoked by uid 99); 8 Apr 2007 16:59:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:19 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.140.23.26] (HELO s526.evanzo-server.de) (62.140.23.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:12 -0700
Received: (qmail 5136 invoked from network); 8 Apr 2007 18:58:42 +0200
Received: from e178212134.adsl.alicedsl.de (HELO server.localdomain) (85.178.212.134)
  by s23026.evanzo-server.de with SMTP; 8 Apr 2007 18:58:42 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 7458E3CD3
	for <java-user@lucene.apache.org>; Sun,  8 Apr 2007 18:58:13 +0200 (CEST)
From: lucene@nitwit.de
To: java-user@lucene.apache.org
Subject: built index doesn't contain a segments file
Date: Sun, 8 Apr 2007 18:58:13 +0200
User-Agent: KMail/1.9.5
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704081858.13343.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I feel somewhat stupid for asking this but...I let two thread build an index 
and the merge it into one on disk via addIndexes(), optimize() and close(). 
This is what it looks like on disk:

-rw-r--r-- 1 root root 25608841 Apr  8 18:37 _4.cfs
-rw-r--r-- 1 root root       20 Apr  8 18:37 segments.gen
-rw-r--r-- 1 root root       41 Apr  8 18:37 segments_4

However if I try to IndexReader.open() the index lucene complains about a 
missing segments file.

Well, right, it's not there. But why not?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 16:59:36 2007
Return-Path: <java-user-return-27465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32482 invoked from network); 8 Apr 2007 16:59:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 16:59:34 -0000
Received: (qmail 42791 invoked by uid 500); 8 Apr 2007 16:59:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42731 invoked by uid 500); 8 Apr 2007 16:59:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42708 invoked by uid 99); 8 Apr 2007 16:59:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:19 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.140.23.26] (HELO s526.evanzo-server.de) (62.140.23.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:12 -0700
Received: (qmail 5136 invoked from network); 8 Apr 2007 18:58:42 +0200
Received: from e178212134.adsl.alicedsl.de (HELO server.localdomain) (85.178.212.134)
  by s23026.evanzo-server.de with SMTP; 8 Apr 2007 18:58:42 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 7458E3CD3
	for <java-user@lucene.apache.org>; Sun,  8 Apr 2007 18:58:13 +0200 (CEST)
From: lucene@nitwit.de
To: java-user@lucene.apache.org
Subject: built index doesn't contain a segments file
Date: Sun, 8 Apr 2007 18:58:13 +0200
User-Agent: KMail/1.9.5
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704081858.13343.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I feel somewhat stupid for asking this but...I let two thread build an index 
and the merge it into one on disk via addIndexes(), optimize() and close(). 
This is what it looks like on disk:

-rw-r--r-- 1 root root 25608841 Apr  8 18:37 _4.cfs
-rw-r--r-- 1 root root       20 Apr  8 18:37 segments.gen
-rw-r--r-- 1 root root       41 Apr  8 18:37 segments_4

However if I try to IndexReader.open() the index lucene complains about a 
missing segments file.

Well, right, it's not there. But why not?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 16:59:36 2007
Return-Path: <java-user-return-27466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32493 invoked from network); 8 Apr 2007 16:59:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 16:59:34 -0000
Received: (qmail 44865 invoked by uid 500); 8 Apr 2007 16:59:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44832 invoked by uid 500); 8 Apr 2007 16:59:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44821 invoked by uid 99); 8 Apr 2007 16:59:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:30 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.140.23.26] (HELO s526.evanzo-server.de) (62.140.23.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 09:59:23 -0700
Received: (qmail 5136 invoked from network); 8 Apr 2007 18:58:42 +0200
Received: from e178212134.adsl.alicedsl.de (HELO server.localdomain) (85.178.212.134)
  by s23026.evanzo-server.de with SMTP; 8 Apr 2007 18:58:42 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 7458E3CD3
	for <java-user@lucene.apache.org>; Sun,  8 Apr 2007 18:58:13 +0200 (CEST)
From: lucene@nitwit.de
To: java-user@lucene.apache.org
Subject: built index doesn't contain a segments file
Date: Sun, 8 Apr 2007 18:58:13 +0200
User-Agent: KMail/1.9.5
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704081858.13343.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I feel somewhat stupid for asking this but...I let two thread build an index 
and the merge it into one on disk via addIndexes(), optimize() and close(). 
This is what it looks like on disk:

-rw-r--r-- 1 root root 25608841 Apr  8 18:37 _4.cfs
-rw-r--r-- 1 root root       20 Apr  8 18:37 segments.gen
-rw-r--r-- 1 root root       41 Apr  8 18:37 segments_4

However if I try to IndexReader.open() the index lucene complains about a 
missing segments file.

Well, right, it's not there. But why not?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 17:28:49 2007
Return-Path: <java-user-return-27467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36357 invoked from network); 8 Apr 2007 17:28:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 17:28:49 -0000
Received: (qmail 80555 invoked by uid 500); 8 Apr 2007 17:28:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79516 invoked by uid 500); 8 Apr 2007 17:28:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79500 invoked by uid 99); 8 Apr 2007 17:28:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 10:28:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 10:28:41 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1559966ugc
        for <java-user@lucene.apache.org>; Sun, 08 Apr 2007 10:28:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kZPRlAGiyK0JKEFNiZM+sHTZEoklveaMjdQkUcqVg1LBDGKlr8wkdhFNg73f0Ys+wI6PydoS2h/9c+fDktZG5lfXYgtaLSN0zgwEwzspCdRaY5X4UPzWgUneP5blIPTUU/B9maLn/kGcEJOt9ThtZ4EN3zSsIfL3v5CtO4pqcUc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cj4h9VVIdTBBY6oSl730Fqj4NKZCPg08vovK7G1+Y8olHJP4QEjG/15oIeBeMjfQNrll1WEQrT+hF2Je6niBnfifiPp0aZwMDJLGNaVNQe6EmGmiIkWakmjdtM2E/vN5yd1vAycHVL2v5Bajm04v5mXGVoO9UzZlCQuXisT8nkc=
Received: by 10.82.138.6 with SMTP id l6mr6680174bud.1176053296972;
        Sun, 08 Apr 2007 10:28:16 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Sun, 8 Apr 2007 10:28:16 -0700 (PDT)
Message-ID: <359a92830704081028i530e3c17g7967286703a2b0f9@mail.gmail.com>
Date: Sun, 8 Apr 2007 13:28:16 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: built index doesn't contain a segments file
In-Reply-To: <200704081858.13343.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15877_14506348.1176053296928"
References: <200704081858.13343.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15877_14506348.1176053296928
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Please explain a little more what "I let two threads build an index"
means. If it means two threads operate on the *same* index, that's
a problem (but you're probably not doing this or you'd be getting
lock violations I expect).

 If it means they are two are completely separate
operations working with two different indexes in two separate
directories, that's a different situation.....

But are you completely sure you're closing both indexwriters etc.
before you try to merge them?

Also, what version of Lucene are you using? I ask because
there has been some work in that area for Lucene 2.1, so it
could point towards different issues if you're using an older
version.

Best
Erick@ItsUnseasonablyColdInMichiganOrIdBeOutside

On 4/8/07, lucene@nitwit.de <lucene@nitwit.de> wrote:
>
> Hi!
>
> I feel somewhat stupid for asking this but...I let two thread build an
> index
> and the merge it into one on disk via addIndexes(), optimize() and
> close().
> This is what it looks like on disk:
>
> -rw-r--r-- 1 root root 25608841 Apr  8 18:37 _4.cfs
> -rw-r--r-- 1 root root       20 Apr  8 18:37 segments.gen
> -rw-r--r-- 1 root root       41 Apr  8 18:37 segments_4
>
> However if I try to IndexReader.open() the index lucene complains about a
> missing segments file.
>
> Well, right, it's not there. But why not?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15877_14506348.1176053296928--

From java-user-return-27468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 17:33:44 2007
Return-Path: <java-user-return-27468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36779 invoked from network); 8 Apr 2007 17:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 17:33:44 -0000
Received: (qmail 84685 invoked by uid 500); 8 Apr 2007 17:33:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84652 invoked by uid 500); 8 Apr 2007 17:33:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84635 invoked by uid 99); 8 Apr 2007 17:33:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 10:33:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of abublic@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 10:33:33 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1560352ugc
        for <java-user@lucene.apache.org>; Sun, 08 Apr 2007 10:33:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=aBnATG+ePIiJZQoqJqN1MUHMqnXyl4+ItKxnmsCMQsS10GEIT8Shf+SOt01O7H8L82doU9mKAx7nl77Rls0T+3UjVobztfgd/Z+Z8+Y3ZOWGkRSTuIRgXAtGzyKk+ySqXoAupoAwOK/8ugARHcRpejhhFbXtg5jjDRfFPntjLWY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=P3Qe8UmV4GyATWtkDFPGD/nwDaR0K6UKxF69U5OTF7tyIjqxiwsrAhQHmkuc7UUvCyhpanSRWUmFQPcuzMO/WULYZD50TEj9XXViXtJ/j/srzMh0Nz6L0sdjNOnBtxw3uaIUwk/V1pAkoL85DzbiEC/5l5oNAmyL8KOEJ9z74Tg=
Received: by 10.82.167.5 with SMTP id p5mr6654307bue.1176053590986;
        Sun, 08 Apr 2007 10:33:10 -0700 (PDT)
Received: from ?81.195.137.185? ( [81.195.137.185])
        by mx.google.com with ESMTP id b36sm10521310ika.2007.04.08.10.33.10;
        Sun, 08 Apr 2007 10:33:10 -0700 (PDT)
Date: Sun, 8 Apr 2007 21:32:29 +0400
From: Artem <abublic@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem <abublic@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <814127511.20070408213229@gmail.com>
To: Nilesh Bansal <java-user@lucene.apache.org>
Subject: Re[2]: Out of memory exception for big indexes
In-Reply-To: <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
References: <46162A72.50400@sirma.bg>
 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Nilesh,

Sunday, April 8, 2007, 9:03:06 AM, you wrote:

NB> This seems like a very useful patch. Our application searches over 50
NB> million doc in a 40GB index. We only have simple conjunctive queries
NB> on a single field. Currently, the command line search program that
NB> prints top-10 results requires at least 200mb memory. Our web
NB> application, that searches the same index crashes with OOM when there
NB> are more than 10-12 concurrent requests (heap size set to 3GB). Will
NB> this patch help in such a situation?

I must note that my patch only helps in lucene-OOM situations related to
_sorted_ queries. If this is your case than I think yes it will help.

In my app currently index is not so big, only 1mln docs. With the patch applied
sample query giving first 30 of 120,000 sorted results made memory consumption
jump from 18M to 20M according to jconsole.

NB> It seems that there are some issues with this patch and that was the
NB> reason it is not yet in the main source tree. Can someone please
NB> summerize what are the downsides of using such an approach. It will be
NB> really good if Lucene had it in main source tree and a flag to turn ON
NB> or OFF this feature.

First there's performance cost (for second and further queries with the
same IndexSearcher). In default implementation all the index values of sorted
field are cached during the first sorted search - this takes memory and time;
but next queries run fast if there still some memory left. My implementation
doesn't cache field values but loads them from respective documents on the fly -
so it's slower but takes less memory. The query mentioned took about 3s (with
rather small sorted fields values - about 20-100 chars).
There's a limitation also - my implementation requires sorted field to be
"stored" in index (Field.Store.YES in doc.add())

NB> Bublic, can you tell me what exactly I need to do if I want to use this patch?

You can include StoredFieldSortFactory class source file into your sources and
then use StoredFieldSortFactory.create(sortFieldName, sortDescending) to get
Sort object for sorting query.
StoredFieldSortFactory source file can be extracted from LUCENE-769 patch or
from sharehound sources: http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/apache/lucene/search/StoredFieldSortFactory.java

Regards,
Artem

NB> thanks
NB> Nilesh

NB> On 4/6/07, Bublic Online <abublic@gmail.com> wrote:
>> Hi Ivan, Chris and all!
>>
>> I'm that contributor of LUCENE-769 and I recommend it too :)
>> OutOfMemory error was one of main reasons for me to make it.
>>
>> Regards,
>> Artem Vasiliev
>>
>> On 4/6/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>> >
>> >
>> > : The problem I suspect is the sorting. As I understand, Lucene
>> > : builds internal caches for sorting and I suspect that this is the root
>> > : of your problem. You can test this by trying your problem queries
>> > : without sorting.
>> >
>> > if Sorting really is the cause of your problems, you may want to try out
>> > this patch...
>> >
>> > https://issues.apache.org/jira/browse/LUCENE-769
>> >
>> > ...it *may* be advantageous in situations where memory is your most
>> > constrained resource, and you are willing to sacrifice speed for sorting
>> > ... it looks promising to me, but there haven't been any convincing
>> > usecases/benchmarks of people finding it beneficial (other then the
>> > original contributor)
>> >
>> > if you do try it, please post your comments in the issue.
>> >
>> >
>> >
>> > -Hoss
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>





-- 
Best regards,
 Artem                            mailto:abublic@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 17:38:12 2007
Return-Path: <java-user-return-27469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37440 invoked from network); 8 Apr 2007 17:38:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 17:38:11 -0000
Received: (qmail 90801 invoked by uid 500); 8 Apr 2007 17:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90603 invoked by uid 500); 8 Apr 2007 17:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90592 invoked by uid 99); 8 Apr 2007 17:38:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 10:38:11 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.140.23.26] (HELO s526.evanzo-server.de) (62.140.23.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 10:38:04 -0700
Received: (qmail 24669 invoked from network); 8 Apr 2007 19:37:42 +0200
Received: from e178212134.adsl.alicedsl.de (HELO server.localdomain) (85.178.212.134)
  by s23026.evanzo-server.de with SMTP; 8 Apr 2007 19:37:42 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 57609617D0
	for <java-user@lucene.apache.org>; Sun,  8 Apr 2007 19:37:13 +0200 (CEST)
From: lucene@nitwit.de
To: java-user@lucene.apache.org
Subject: Re: built index doesn't contain a segments file
Date: Sun, 8 Apr 2007 19:37:13 +0200
User-Agent: KMail/1.9.5
References: <200704081858.13343.lucene@nitwit.de> <359a92830704081028i530e3c17g7967286703a2b0f9@mail.gmail.com>
In-Reply-To: <359a92830704081028i530e3c17g7967286703a2b0f9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704081937.13170.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Sunday 08 April 2007 19:28, Erick Erickson wrote:
>  If it means they are two are completely separate
> operations working with two different indexes in two separate
> directories, that's a different situation.....

That's what I do.

> But are you completely sure you're closing both indexwriters etc.
> before you try to merge them?

Well, at the end of run() I explicitly close the index and I wait for all 
threads to finished (join()) before I merge. So, I'm pretty sure, yes.

But if it's absolutely mandatory to close the indices addIndexes() should 
throw some exception in case they haven't closed.

> Also, what version of Lucene are you using? I ask because
> there has been some work in that area for Lucene 2.1, so it
> could point towards different issues if you're using an older
> version.

I actually build the index with 2.1.0 but open it with 2.0.0....oh, it comes 
to my mind that there have been some changes in the index format, I cannot 
open an index built with 2.1.0 using 2.0.0, right?

Oops, my fault :) Sorry...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 17:38:29 2007
Return-Path: <java-user-return-27470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37501 invoked from network); 8 Apr 2007 17:38:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 17:38:28 -0000
Received: (qmail 92158 invoked by uid 500); 8 Apr 2007 17:38:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92127 invoked by uid 500); 8 Apr 2007 17:38:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92116 invoked by uid 99); 8 Apr 2007 17:38:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 10:38:29 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.140.23.26] (HELO s526.evanzo-server.de) (62.140.23.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 10:38:22 -0700
Received: (qmail 24669 invoked from network); 8 Apr 2007 19:37:42 +0200
Received: from e178212134.adsl.alicedsl.de (HELO server.localdomain) (85.178.212.134)
  by s23026.evanzo-server.de with SMTP; 8 Apr 2007 19:37:42 +0200
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 57609617D0
	for <java-user@lucene.apache.org>; Sun,  8 Apr 2007 19:37:13 +0200 (CEST)
From: lucene@nitwit.de
To: java-user@lucene.apache.org
Subject: Re: built index doesn't contain a segments file
Date: Sun, 8 Apr 2007 19:37:13 +0200
User-Agent: KMail/1.9.5
References: <200704081858.13343.lucene@nitwit.de> <359a92830704081028i530e3c17g7967286703a2b0f9@mail.gmail.com>
In-Reply-To: <359a92830704081028i530e3c17g7967286703a2b0f9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704081937.13170.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Sunday 08 April 2007 19:28, Erick Erickson wrote:
>  If it means they are two are completely separate
> operations working with two different indexes in two separate
> directories, that's a different situation.....

That's what I do.

> But are you completely sure you're closing both indexwriters etc.
> before you try to merge them?

Well, at the end of run() I explicitly close the index and I wait for all 
threads to finished (join()) before I merge. So, I'm pretty sure, yes.

But if it's absolutely mandatory to close the indices addIndexes() should 
throw some exception in case they haven't closed.

> Also, what version of Lucene are you using? I ask because
> there has been some work in that area for Lucene 2.1, so it
> could point towards different issues if you're using an older
> version.

I actually build the index with 2.1.0 but open it with 2.0.0....oh, it comes 
to my mind that there have been some changes in the index format, I cannot 
open an index built with 2.1.0 using 2.0.0, right?

Oops, my fault :) Sorry...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 18:15:41 2007
Return-Path: <java-user-return-27471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42475 invoked from network); 8 Apr 2007 18:15:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 18:15:40 -0000
Received: (qmail 25803 invoked by uid 500); 8 Apr 2007 18:15:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25677 invoked by uid 500); 8 Apr 2007 18:15:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25659 invoked by uid 99); 8 Apr 2007 18:15:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 11:15:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 11:15:18 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1563934ugc
        for <java-user@lucene.apache.org>; Sun, 08 Apr 2007 11:14:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Gn//QnH7gkm5FJ7ZIbfj+1qxblW7UpuZfjAsslSdIFGsB5N3eU/ACcg4PTha2OTNbSU5pZJosb5gtmx2C4LSem/7FNyjJ3LJRMuRZIBr7D48OwdpPYrsL12hszHDChp4G1PUfFtvdX6Qx9wxLLxAy/3ADNokSdsPSMTdbEqoJeA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eA+p7uOsHxJc0JoZRA2bVjPMicJL+FN5zaiqtaRLtDX/OcZ6xefCJivsIe4795aekBHmrxDZirKmi72M9V5wnpp4NW3d1l5RfPY1IqKKdDQfU6Y9SJmMHpc0uINgVigXk5aYDcvD7tVtQDs2XXPJzf9ztTn+7hBUU60ys7HpnhI=
Received: by 10.82.134.12 with SMTP id h12mr6740019bud.1176056096823;
        Sun, 08 Apr 2007 11:14:56 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Sun, 8 Apr 2007 11:14:56 -0700 (PDT)
Message-ID: <359a92830704081114i4197724m24f9819f5d9a30fd@mail.gmail.com>
Date: Sun, 8 Apr 2007 14:14:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: built index doesn't contain a segments file
In-Reply-To: <200704081937.13170.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16049_13520083.1176056096776"
References: <200704081858.13343.lucene@nitwit.de>
	 <359a92830704081028i530e3c17g7967286703a2b0f9@mail.gmail.com>
	 <200704081937.13170.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16049_13520083.1176056096776
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yep, you got it....


On 4/8/07, lucene@nitwit.de <lucene@nitwit.de> wrote:
>
> On Sunday 08 April 2007 19:28, Erick Erickson wrote:
> >  If it means they are two are completely separate
> > operations working with two different indexes in two separate
> > directories, that's a different situation.....
>
> That's what I do.
>
> > But are you completely sure you're closing both indexwriters etc.
> > before you try to merge them?
>
> Well, at the end of run() I explicitly close the index and I wait for all
> threads to finished (join()) before I merge. So, I'm pretty sure, yes.
>
> But if it's absolutely mandatory to close the indices addIndexes() should
> throw some exception in case they haven't closed.
>
> > Also, what version of Lucene are you using? I ask because
> > there has been some work in that area for Lucene 2.1, so it
> > could point towards different issues if you're using an older
> > version.
>
> I actually build the index with 2.1.0 but open it with 2.0.0....oh, it
> comes
> to my mind that there have been some changes in the index format, I cannot
> open an index built with 2.1.0 using 2.0.0, right?
>
> Oops, my fault :) Sorry...
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16049_13520083.1176056096776--

From java-user-return-27472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 18:59:02 2007
Return-Path: <java-user-return-27472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48463 invoked from network); 8 Apr 2007 18:59:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 18:59:02 -0000
Received: (qmail 68798 invoked by uid 500); 8 Apr 2007 18:59:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68771 invoked by uid 500); 8 Apr 2007 18:59:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68759 invoked by uid 99); 8 Apr 2007 18:59:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 11:59:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nileshbansal@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 11:58:54 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1567814ugc
        for <java-user@lucene.apache.org>; Sun, 08 Apr 2007 11:58:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Q7E2SRYgpbd8U8qlDLeDnm4Yht03tq+vjfzgpAQzwKcdT7lc71bN0WwU+YgGYPHndfdMHsTq6s5K+k3KoXYpaM2mAfN8kwIp+L7G36w370ixgV0L6XdZ4rYxyWicq8/iGoHtE9P1tqPF9Mt7lNa2efz6ap0r0csGWaUACoRttsI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=l8tTlLoMyFXKv3M52KkL0P9V0fwnHv5Ga1DHe3qIlPhIS/i7MCeMtU5ZwJk3l67aNmNRoDmAbM+WUCMhpTLLDTL+3vODSJEVGCu7ZbV3S1x0OiTN437JyugQKD2dyFrqLddMrmqZoJD1oNrlJBBBH6gNxbWIL+iX0uBFGdvgbWc=
Received: by 10.82.163.13 with SMTP id l13mr6804145bue.1176058712449;
        Sun, 08 Apr 2007 11:58:32 -0700 (PDT)
Received: by 10.82.177.15 with HTTP; Sun, 8 Apr 2007 11:58:32 -0700 (PDT)
Message-ID: <f36128690704081158g3eb47189q2cd1d03bc89145df@mail.gmail.com>
Date: Sun, 8 Apr 2007 14:58:32 -0400
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org, Artem <abublic@gmail.com>
Subject: Re: Re[2]: Out of memory exception for big indexes
In-Reply-To: <814127511.20070408213229@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <46162A72.50400@sirma.bg>
	 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
	 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
	 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
	 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
	 <814127511.20070408213229@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/8/07, Artem <abublic@gmail.com> wrote:
> I must note that my patch only helps in lucene-OOM situations related to
> _sorted_ queries. If this is your case than I think yes it will help.
Probably a newbie question, but can you please explain what sorted
queries mean? Is simple keyword search a sorted query?

> In my app currently index is not so big, only 1mln docs. With the patch applied
> sample query giving first 30 of 120,000 sorted results made memory consumption
> jump from 18M to 20M according to jconsole.
>
> NB> It seems that there are some issues with this patch and that was the
> NB> reason it is not yet in the main source tree. Can someone please
> NB> summerize what are the downsides of using such an approach. It will be
> NB> really good if Lucene had it in main source tree and a flag to turn ON
> NB> or OFF this feature.
>
> First there's performance cost (for second and further queries with the
> same IndexSearcher). In default implementation all the index values of sorted
> field are cached during the first sorted search - this takes memory and time;
> but next queries run fast if there still some memory left. My implementation
> doesn't cache field values but loads them from respective documents on the fly -
> so it's slower but takes less memory. The query mentioned took about 3s (with
> rather small sorted fields values - about 20-100 chars).
> There's a limitation also - my implementation requires sorted field to be
> "stored" in index (Field.Store.YES in doc.add())
>
> NB> Bublic, can you tell me what exactly I need to do if I want to use this patch?
>
> You can include StoredFieldSortFactory class source file into your sources and
> then use StoredFieldSortFactory.create(sortFieldName, sortDescending) to get
> Sort object for sorting query.
> StoredFieldSortFactory source file can be extracted from LUCENE-769 patch or
> from sharehound sources: http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/apache/lucene/search/StoredFieldSortFactory.java
>
> Regards,
> Artem
>
> NB> thanks
> NB> Nilesh
>
> NB> On 4/6/07, Bublic Online <abublic@gmail.com> wrote:
> >> Hi Ivan, Chris and all!
> >>
> >> I'm that contributor of LUCENE-769 and I recommend it too :)
> >> OutOfMemory error was one of main reasons for me to make it.
> >>
> >> Regards,
> >> Artem Vasiliev
> >>
> >> On 4/6/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >> >
> >> >
> >> > : The problem I suspect is the sorting. As I understand, Lucene
> >> > : builds internal caches for sorting and I suspect that this is the root
> >> > : of your problem. You can test this by trying your problem queries
> >> > : without sorting.
> >> >
> >> > if Sorting really is the cause of your problems, you may want to try out
> >> > this patch...
> >> >
> >> > https://issues.apache.org/jira/browse/LUCENE-769
> >> >
> >> > ...it *may* be advantageous in situations where memory is your most
> >> > constrained resource, and you are willing to sacrifice speed for sorting
> >> > ... it looks promising to me, but there haven't been any convincing
> >> > usecases/benchmarks of people finding it beneficial (other then the
> >> > original contributor)
> >> >
> >> > if you do try it, please post your comments in the issue.
> >> >
> >> >
> >> >
> >> > -Hoss
> >> >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
>
>
>
>
>
> --
> Best regards,
>  Artem                            mailto:abublic@gmail.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Nilesh Bansal.
http://queens.db.toronto.edu/~nilesh/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 08 20:53:02 2007
Return-Path: <java-user-return-27473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71641 invoked from network); 8 Apr 2007 20:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Apr 2007 20:53:01 -0000
Received: (qmail 57287 invoked by uid 500); 8 Apr 2007 20:53:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57152 invoked by uid 500); 8 Apr 2007 20:53:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57141 invoked by uid 99); 8 Apr 2007 20:53:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 13:53:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 13:52:54 -0700
Received: by mu-out-0910.google.com with SMTP id i10so2043387mue
        for <java-user@lucene.apache.org>; Sun, 08 Apr 2007 13:52:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nnFTbP61bEL/Ck5r+ylTC53vMc2HigrDKpmAtqG+f/eRgNX5gTqLlWHjmLbr5CTC6iELeAs+s5NDzvL57CkgoAQwxg5T3AR1aGAD49slw0VxLEDfiA5fQxqWo2R6n3mTpUavjjii92hqbSWLtQOSAIDVVObPMikydAXaH1iDqRs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bjKm2u8LCwV63ydYzt6815SZI5Hvufv22e0KAQGPXudWIvX1FyvLeIXIsxsU5P99LssoMAZkduEgCIgynK9u752OnsLfjj6GoQWsBVX8SQk+f7MKegZjL087ip7+nLOKPWzZd0Lkh7ocVxInA1CGsf9n7GaiPR39eDcxxJsdVtA=
Received: by 10.82.120.14 with SMTP id s14mr6938768buc.1176065551370;
        Sun, 08 Apr 2007 13:52:31 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Sun, 8 Apr 2007 13:52:31 -0700 (PDT)
Message-ID: <359a92830704081352i4c393868xeb9705547df3267d@mail.gmail.com>
Date: Sun, 8 Apr 2007 16:52:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re[2]: Out of memory exception for big indexes
In-Reply-To: <f36128690704081158g3eb47189q2cd1d03bc89145df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16501_8231620.1176065551323"
References: <46162A72.50400@sirma.bg>
	 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
	 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
	 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
	 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
	 <814127511.20070408213229@gmail.com>
	 <f36128690704081158g3eb47189q2cd1d03bc89145df@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16501_8231620.1176065551323
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It *is* a bit confusing, since every search is sorted, kinda....

Practically, a sorted query is one where you call one of the search
methods (on, say, Searcher) with a Sort object, which sorts
on one or more of the fields in your index (which ones are
used are specified in the (array of) Sort objects).

Searches that do NOT have a Sort object default to using
relevance ranking, which is not nearly so memory-intensive. This is,
after all, one float or so....

The difference is that the fields referenced in the Sort object
have to be read into memory and compared against all other
values, and the aggregate may be quite large memory-wise.

Erick

On 4/8/07, Nilesh Bansal <nileshbansal@gmail.com> wrote:
>
> On 4/8/07, Artem <abublic@gmail.com> wrote:
> > I must note that my patch only helps in lucene-OOM situations related to
> > _sorted_ queries. If this is your case than I think yes it will help.
> Probably a newbie question, but can you please explain what sorted
> queries mean? Is simple keyword search a sorted query?
>
> > In my app currently index is not so big, only 1mln docs. With the patch
> applied
> > sample query giving first 30 of 120,000 sorted results made memory
> consumption
> > jump from 18M to 20M according to jconsole.
> >
> > NB> It seems that there are some issues with this patch and that was the
> > NB> reason it is not yet in the main source tree. Can someone please
> > NB> summerize what are the downsides of using such an approach. It will
> be
> > NB> really good if Lucene had it in main source tree and a flag to turn
> ON
> > NB> or OFF this feature.
> >
> > First there's performance cost (for second and further queries with the
> > same IndexSearcher). In default implementation all the index values of
> sorted
> > field are cached during the first sorted search - this takes memory and
> time;
> > but next queries run fast if there still some memory left. My
> implementation
> > doesn't cache field values but loads them from respective documents on
> the fly -
> > so it's slower but takes less memory. The query mentioned took about 3s
> (with
> > rather small sorted fields values - about 20-100 chars).
> > There's a limitation also - my implementation requires sorted field to
> be
> > "stored" in index (Field.Store.YES in doc.add())
> >
> > NB> Bublic, can you tell me what exactly I need to do if I want to use
> this patch?
> >
> > You can include StoredFieldSortFactory class source file into your
> sources and
> > then use StoredFieldSortFactory.create(sortFieldName, sortDescending) to
> get
> > Sort object for sorting query.
> > StoredFieldSortFactory source file can be extracted from LUCENE-769
> patch or
> > from sharehound sources:
> http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/apache/lucene/search/StoredFieldSortFactory.java
> >
> > Regards,
> > Artem
> >
> > NB> thanks
> > NB> Nilesh
> >
> > NB> On 4/6/07, Bublic Online <abublic@gmail.com> wrote:
> > >> Hi Ivan, Chris and all!
> > >>
> > >> I'm that contributor of LUCENE-769 and I recommend it too :)
> > >> OutOfMemory error was one of main reasons for me to make it.
> > >>
> > >> Regards,
> > >> Artem Vasiliev
> > >>
> > >> On 4/6/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > >> >
> > >> >
> > >> > : The problem I suspect is the sorting. As I understand, Lucene
> > >> > : builds internal caches for sorting and I suspect that this is the
> root
> > >> > : of your problem. You can test this by trying your problem queries
> > >> > : without sorting.
> > >> >
> > >> > if Sorting really is the cause of your problems, you may want to
> try out
> > >> > this patch...
> > >> >
> > >> > https://issues.apache.org/jira/browse/LUCENE-769
> > >> >
> > >> > ...it *may* be advantageous in situations where memory is your most
> > >> > constrained resource, and you are willing to sacrifice speed for
> sorting
> > >> > ... it looks promising to me, but there haven't been any convincing
> > >> > usecases/benchmarks of people finding it beneficial (other then the
> > >> > original contributor)
> > >> >
> > >> > if you do try it, please post your comments in the issue.
> > >> >
> > >> >
> > >> >
> > >> > -Hoss
> > >> >
> > >> >
> > >> >
> ---------------------------------------------------------------------
> > >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >> >
> > >> >
> > >>
> >
> >
> >
> >
> >
> > --
> > Best regards,
> >  Artem                            mailto:abublic@gmail.com
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Nilesh Bansal.
> http://queens.db.toronto.edu/~nilesh/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16501_8231620.1176065551323--

From java-user-return-27474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 03:28:13 2007
Return-Path: <java-user-return-27474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58204 invoked from network); 9 Apr 2007 03:28:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 03:28:12 -0000
Received: (qmail 82378 invoked by uid 500); 9 Apr 2007 03:28:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82240 invoked by uid 500); 9 Apr 2007 03:28:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82229 invoked by uid 99); 9 Apr 2007 03:28:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 20:28:10 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.234 as permitted sender)
Received: from [64.233.162.234] (HELO nz-out-0506.google.com) (64.233.162.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 20:28:03 -0700
Received: by nz-out-0506.google.com with SMTP id i1so918311nzh
        for <java-user@lucene.apache.org>; Sun, 08 Apr 2007 20:27:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=CL949n98TUmFx14cJku1aZaMg6uKm3ZktvX0AYpkIqltBsCcawnL09mQNOInJwL2GNn9Pja43AeAhWZmw9jkHDwW5LncV58xUe76n4pXszJr0ttMQGPEc2Qtfz1sH6FRu12adrIHgpEdw0q2KeV3MHpNzL8NoJq2eNoAXJnWoBk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=XWMsTAQa+MHVUHkMfrjzzu5BsttEOgZa7gvhxlA1QMvFpjtFJxKpI036KXKssVoMuy5CKzT88Tui6yISqPSM8nhm3i5THDOTeX+ZELjRghZPZ82rjqq4Xofp8fRkRCSK3RXkigAlZTovGuHAE9YhcuK9GsVnGhxfYg0t/n/z5Wk=
Received: by 10.114.72.1 with SMTP id u1mr2137642waa.1176089262244;
        Sun, 08 Apr 2007 20:27:42 -0700 (PDT)
Received: by 10.114.108.2 with HTTP; Sun, 8 Apr 2007 20:27:42 -0700 (PDT)
Message-ID: <ae6f38f60704082027v57cfe652yb1ae3ecc71adc62e@mail.gmail.com>
Date: Sun, 8 Apr 2007 23:27:42 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Standard Parser Behavior
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28743_11307149.1176089262181"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28743_11307149.1176089262181
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm trying to understand the specifics behind the notation +(...) and -(...)
as it applies to the standard parser.

I have three lists of words.  I want documents that have at least one word
from list A and also at least one word from list B (just one list isn't
enough), and, finally, no documents can contain any words in list C.

I believe the correct syntax for that is:
+(apple animal aspirin)  +(bacon banana book)  -candle -computer -currency

Can someone confirm that?

What I'm trying to convincing myself of is that -(candle computer currency)
doesn't do what one thinks it might at first glance.  However, Lucene seems
to be giving the correct answer, though I'm having a hard time understanding
why.  Let me explain with some simple pseudo code

X = 1
IF (X != 1 OR X !=2) THEN True ELSE False

It ought to come as no surprise that this actually evaluates to True.  The
reason is that X != 1 is false, and X != 2 is true, and false or true is
...true.  More interestingly, this statement should always be true (because
if X is 2, it can't also be 1, making that part of the subexpression true).

Thus, moving back to Lucene from trivial boolean algebra, the notation
-(candle OR computer OR currency), would, in my mind, match any and all
documents unless every word in the negation list was found.  Clearly this
can't be right.

Is the minus operator distributive?  I suspect what I'm seeing is the
reality that Lucene is not doing boolean logic at all, but set operations.

A co-worker of mine came up with an interesting syntax, and I had no idea
what it meant either:  +( -A -B )   ...which to him it meat "must have no A
and no B".

Can anyone clarify how + and - work on groups, and if the above has any
coherent meaning?

-Walt Stoneburner

------=_Part_28743_11307149.1176089262181--

From java-user-return-27475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 03:42:16 2007
Return-Path: <java-user-return-27475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61067 invoked from network); 9 Apr 2007 03:42:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 03:42:16 -0000
Received: (qmail 95645 invoked by uid 500); 9 Apr 2007 03:42:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94880 invoked by uid 500); 9 Apr 2007 03:42:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94869 invoked by uid 99); 9 Apr 2007 03:42:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2007 20:42:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 08 Apr 2007 20:42:09 -0700
Received: (qmail 75587 invoked by uid 60001); 9 Apr 2007 03:41:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=iqhbgsBfVFmZ8n3i+W2i9UPnBSI2YSxpgzmpAJCzsA7Q0xinVy29O0PlHAFjMXCMtpkvzXLjn4GYzTZD/GVOfJMM/99w5GkhBs7FDwYTvIo8DZUCpshFpoPZMrK/H50ZPY2olu1+mYIJB4p7O9rpEL67nAOkjySecPxXH2DeWEA=;
X-YMail-OSG: x4hmmgIVM1kUPZmbf6QIk27_Kk_bm45i_FrPq0XCnzeQZt0HDETSKXrzkeNk0fKHxfvmvqgP87IPVybbe9CUZxM1KQ--
Received: from [72.231.8.153] by web50311.mail.re2.yahoo.com via HTTP; Sun, 08 Apr 2007 20:41:47 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.8
Date: Sun, 8 Apr 2007 20:41:47 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Standard Parser Behavior
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <940110.75576.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Purely negative queries don't work.  Example: -A will not find all documents that do not have "A".
+ means a term or phrase is required
- means a term or phrase is prohibited

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Walt Stoneburner <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Sent: Sunday, April 8, 2007 11:27:42 PM
Subject: Standard Parser Behavior

I'm trying to understand the specifics behind the notation +(...) and -(...)
as it applies to the standard parser.

I have three lists of words.  I want documents that have at least one word
from list A and also at least one word from list B (just one list isn't
enough), and, finally, no documents can contain any words in list C.

I believe the correct syntax for that is:
+(apple animal aspirin)  +(bacon banana book)  -candle -computer -currency

Can someone confirm that?

What I'm trying to convincing myself of is that -(candle computer currency)
doesn't do what one thinks it might at first glance.  However, Lucene seems
to be giving the correct answer, though I'm having a hard time understanding
why.  Let me explain with some simple pseudo code

X = 1
IF (X != 1 OR X !=2) THEN True ELSE False

It ought to come as no surprise that this actually evaluates to True.  The
reason is that X != 1 is false, and X != 2 is true, and false or true is
...true.  More interestingly, this statement should always be true (because
if X is 2, it can't also be 1, making that part of the subexpression true).

Thus, moving back to Lucene from trivial boolean algebra, the notation
-(candle OR computer OR currency), would, in my mind, match any and all
documents unless every word in the negation list was found.  Clearly this
can't be right.

Is the minus operator distributive?  I suspect what I'm seeing is the
reality that Lucene is not doing boolean logic at all, but set operations.

A co-worker of mine came up with an interesting syntax, and I had no idea
what it meant either:  +( -A -B )   ...which to him it meat "must have no A
and no B".

Can anyone clarify how + and - work on groups, and if the above has any
coherent meaning?

-Walt Stoneburner




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 09:27:25 2007
Return-Path: <java-user-return-27476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25666 invoked from network); 9 Apr 2007 09:27:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 09:27:25 -0000
Received: (qmail 52107 invoked by uid 500); 9 Apr 2007 09:27:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52079 invoked by uid 500); 9 Apr 2007 09:27:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52066 invoked by uid 99); 9 Apr 2007 09:27:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 02:27:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [219.118.71.125] (HELO mail.kai.ad.jp) (219.118.71.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 02:27:16 -0700
Received: from mail.kai.ad.jp by mail.kai.ad.jp
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Mon, 9 Apr 2007 18:26:55 +0900
Received: from linkclub-staff.com [219.118.70.66] by mail.kai.ad.jp
  (SMTPD32-7.07) id A6DA706100E8; Mon, 09 Apr 2007 18:26:50 +0900
From: anson <anson@linkclub-staff.com>
To: java-user@lucene.apache.org
Subject: How to update index dynamically
Date: Mon, 09 Apr 2007 18:25:57 +0900
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: HidemaruMail 4.59 (WinNT,501)
Message-Id: <85C77A89149353anson@linkclub-staff.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I have build a blog project under tomcat5.5 with Lucene2.0.
And I want to search my blog by full text, but there is somthing wrong:

----------------------------------------------
The project flow:

(1) On tomcat start I wrote a listener to create a index file if the 
index is never created.(It's works well)


(2) When I create/update/delete an article on the blog, I wrote a method 
to update the index.(It's also works well)

(3) Then I want to search the new/updated article in the front of my 
blog page. But I can't get the new article. But when I restart the 
tomcat, I can get the new one that I want. Why. 


-----------------------------------------------
The index update flow:

(1) Firsrt I delete the old document in index:

IndexReader reader = 
    IndexReader.open($INDEX_DIRECTORY);

Term term = new Term("INDEX_ID", $entryId);

if (term != null) {
    reader.deleteDocuments(term);
}

//finally:
reader.close();
    
    
(2) Add the article to the index:
// Get the singleton IndexWriter instance
IndexWriter writer = 
    IndexManager.getInstance().getIndexWriter();
    
// add document
// Document() is method of make Lucene document
writer.addDocument(Document($EntryBean));

writer.optimize();


// finally:
writer.close();


Could anybody tell me anything can help me out. Or I made a wrong flow?


Best regards.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 10:19:31 2007
Return-Path: <java-user-return-27477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48401 invoked from network); 9 Apr 2007 10:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 10:19:29 -0000
Received: (qmail 13739 invoked by uid 500); 9 Apr 2007 10:19:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12701 invoked by uid 500); 9 Apr 2007 10:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12690 invoked by uid 99); 9 Apr 2007 10:19:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 03:19:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 03:19:20 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2B0B930EFC18; Mon,  9 Apr 2007 04:19:00 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-76-4-75-10.dhcp.embarqhsd.net [76.4.75.10])
	by ehatchersolutions.com (Postfix) with ESMTP id DC84030EFC17
	for <java-user@lucene.apache.org>; Mon,  9 Apr 2007 04:18:56 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <85C77A89149353anson@linkclub-staff.com>
References: <85C77A89149353anson@linkclub-staff.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <69B60642-18C5-40DE-8AD7-CA3BDA6CF865@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to update index dynamically
Date: Mon, 9 Apr 2007 06:18:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

After indexing, you have to open a new IndexSearcher to in order to  
see new documents.

	Erik


On Apr 9, 2007, at 5:25 AM, anson wrote:

>
> I have build a blog project under tomcat5.5 with Lucene2.0.
> And I want to search my blog by full text, but there is somthing  
> wrong:
>
> ----------------------------------------------
> The project flow:
>
> (1) On tomcat start I wrote a listener to create a index file if the
> index is never created.(It's works well)
>
>
> (2) When I create/update/delete an article on the blog, I wrote a  
> method
> to update the index.(It's also works well)
>
> (3) Then I want to search the new/updated article in the front of my
> blog page. But I can't get the new article. But when I restart the
> tomcat, I can get the new one that I want. Why.
>
>
> -----------------------------------------------
> The index update flow:
>
> (1) Firsrt I delete the old document in index:
>
> IndexReader reader =
>     IndexReader.open($INDEX_DIRECTORY);
>
> Term term = new Term("INDEX_ID", $entryId);
>
> if (term != null) {
>     reader.deleteDocuments(term);
> }
>
> //finally:
> reader.close();
>
>
> (2) Add the article to the index:
> // Get the singleton IndexWriter instance
> IndexWriter writer =
>     IndexManager.getInstance().getIndexWriter();
>
> // add document
> // Document() is method of make Lucene document
> writer.addDocument(Document($EntryBean));
>
> writer.optimize();
>
>
> // finally:
> writer.close();
>
>
> Could anybody tell me anything can help me out. Or I made a wrong  
> flow?
>
>
> Best regards.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 14:41:48 2007
Return-Path: <java-user-return-27478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20826 invoked from network); 9 Apr 2007 14:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 14:41:47 -0000
Received: (qmail 11296 invoked by uid 500); 9 Apr 2007 14:41:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11270 invoked by uid 500); 9 Apr 2007 14:41:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11257 invoked by uid 99); 9 Apr 2007 14:41:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 07:41:45 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 07:41:37 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hav3V-0008GE-1m
	for java-user@lucene.apache.org; Mon, 09 Apr 2007 07:41:17 -0700
Message-ID: <9903109.post@talk.nabble.com>
Date: Mon, 9 Apr 2007 07:41:17 -0700 (PDT)
From: "Ratnesh,V2Solutions India" <ratnesh.srivastava@in.v2solutions.com>
To: java-user@lucene.apache.org
Subject: IndexReader.deleteDocuement(); How to use it with our code??
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ratnesh.srivastava@in.v2solutions.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi this is  my code snippets. I am using Lucene 1.9.1 API . and Getting the
following exception please someone help me .....................,,, Getting
over from this problem 

/**

  * Adds searchable fields to a document, that can be used to find if the

  * document has links to OBJECT tag information or not.

  */

public class OBJECTLinkIndexingFilter implements IndexingFilter {

      public static final Log LOG =
LogFactory.getLog(OBJECTLinkIndexingFilter. class); 

      public static String FIELD = "objects";

      private String surl1;

      private String surl;

      int doc;

      private Configuration conf; 

      /**

        * Searches through the parse object's metadata to add the indexing
links

        * references.

        */

      public Document filter(Document doc, Parse parse, UTF8 url,

                  CrawlDatum datum, Inlinks inlinks) throws
IndexingException {

            

            Metadata metadata = parse.getData().getParseMeta();

            // index if the object has RDF metadata or not

            String hasOBJECT = metadata.get(OBJECT.HAS_OBJECT_LINK);

            if (hasOBJECT != null && hasOBJECT.equals( "true")) {

                  if (LOG.isInfoEnabled()) { 

                        LOG.info( "OBJECT: document " + url + " has OBJECT
links"); 

                  }

 

                  // For each metadata tag beginning with our RDF prefix,
add it to

                  // the

                  // searchable fields

                  for (String s : metadata.names()) { 

                        if (s.startsWith(OBJECT.HAS_OBJECT_LINK)) { 

                              surl = url.toString(); 

                              addFeature(doc, surl );

 

                              if (LOG.isInfoEnabled()) { 

                                    LOG.info( "\ts");

                              } 

                        } 

                  }

            } else {

                  try{

                              surl1=url.toString(); 

                              String
indexDir="E:/eclipse/310307/objtest/crawl-result/index/" ;

                              FSDirectory directory =
FSDirectory.getDirectory(indexDir,false );                         

                              IndexReader reader =
IndexReader.open(directory);

                        

                        Term term = new Term("url" , surl1 );

                        int deleted = reader.deleteDocuments(term);

                        LOG.info( "Document is the RATNESH
SRIVASTAVA."+deleted); 

                        directory.close();

                        reader.close();

                        } 

                        catch(Exception e) 

                        { 

                              e.printStackTrace(); 

                        } 

                        

                  }

 

            return doc;

      }

 

      /**

        * Adds an index field to the document.

        */

      private void addFeature(Document doc, String feature) { 

            doc.add( new Field( FIELD, feature, Field.Store.YES, 

                        Field.Index.UN_TOKENIZED)); 

      }

      

      public void setConf(Configuration conf) { 

            this.conf = conf; 

      }

 

      public Configuration getConf() { 

            return this.conf;

      } 

 

 

 

Instead of true , I made Boolean call inside getDirectory to false. and if I
give path

String indexDir=
"E:/eclipse/310307/objtest/crawl-result/indexes/part-00000"; it does not
show 

any exception Instead doing nothing?? But mentioning as above for "index"
directory gives exception .

 

java.io.IOException: E:\eclipse\310307\objtest\crawl-result\index not a
directory
        at org.apache.lucene.store.FSDirectory.init(FSDirectory.java:180)
        at org.apache.lucene.store.FSDirectory.getDirectory
(FSDirectory.java:141)
        at
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:117)
        at
in.v2solutions.com.OBJECTLinkIndexingFilter.filter(OBJECTLinkIndexingFilter.java:88)
        at
org.apache.nutch.indexer.IndexingFilters.filter(IndexingFilters.java:72)
        at org.apache.nutch.indexer.Indexer.reduce(Indexer.java:235)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:247)
        at
org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:112

 

Why is this?? Please bear with me as I am new bie to face the problem with
Lucene indexes.

 

Regards,


-- 
View this message in context: http://www.nabble.com/IndexReader.deleteDocuement%28%29--How-to-use-it-with-our-code---tf3547568.html#a9903109
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 16:15:13 2007
Return-Path: <java-user-return-27479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53642 invoked from network); 9 Apr 2007 16:15:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 16:15:11 -0000
Received: (qmail 77800 invoked by uid 500); 9 Apr 2007 16:15:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77626 invoked by uid 500); 9 Apr 2007 16:15:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77615 invoked by uid 99); 9 Apr 2007 16:15:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 09:15:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Apr 2007 09:15:02 -0700
Received: (qmail 29418 invoked by uid 60001); 9 Apr 2007 16:14:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=DPsk+O2vXEPdyWbVYYGLoeorZ/0GG/5pqrxYTZFrNN24Epc/ftqqYyhaRjQigHDv71EysqwMsAPkKTHoTwJ9OO8qE1HVcxhIUdgmxS8wFct7Tb3HD0fKN/Y3joDSscbfa/+ZR/ti99OuW1b+QPmrM8aCRblZYsCf/WVIU3tx6aQ=;
X-YMail-OSG: FbZ3aXQVM1l39deJFv7KrvBIIsLREha6Du5eoTOxuqU5jOUjwExZYtR6kRxcOHME3N3qaJGR6xArvsH5bf8W2GuMAFaruHDMCZl3uZNhL7O.BBF0yxuVHKdH8lgGUjJ5dVe98l6AAxwJ084-
Received: from [72.231.8.153] by web50301.mail.re2.yahoo.com via HTTP; Mon, 09 Apr 2007 09:14:40 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.10
Date: Mon, 9 Apr 2007 09:14:40 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to update index dynamically
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <586809.28892.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Anson,

That's not your real code, is it?  Those $ characters in it look incorrect.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: anson <anson@linkclub-staff.com>
To: java-user@lucene.apache.org
Sent: Monday, April 9, 2007 5:25:57 AM
Subject: How to update index dynamically


I have build a blog project under tomcat5.5 with Lucene2.0.
And I want to search my blog by full text, but there is somthing wrong:

----------------------------------------------
The project flow:

(1) On tomcat start I wrote a listener to create a index file if the 
index is never created.(It's works well)


(2) When I create/update/delete an article on the blog, I wrote a method 
to update the index.(It's also works well)

(3) Then I want to search the new/updated article in the front of my 
blog page. But I can't get the new article. But when I restart the 
tomcat, I can get the new one that I want. Why. 


-----------------------------------------------
The index update flow:

(1) Firsrt I delete the old document in index:

IndexReader reader = 
    IndexReader.open($INDEX_DIRECTORY);

Term term = new Term("INDEX_ID", $entryId);

if (term != null) {
    reader.deleteDocuments(term);
}

//finally:
reader.close();
    
    
(2) Add the article to the index:
// Get the singleton IndexWriter instance
IndexWriter writer = 
    IndexManager.getInstance().getIndexWriter();
    
// add document
// Document() is method of make Lucene document
writer.addDocument(Document($EntryBean));

writer.optimize();


// finally:
writer.close();


Could anybody tell me anything can help me out. Or I made a wrong flow?


Best regards.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 16:16:18 2007
Return-Path: <java-user-return-27480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53958 invoked from network); 9 Apr 2007 16:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 16:16:17 -0000
Received: (qmail 81597 invoked by uid 500); 9 Apr 2007 16:16:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81416 invoked by uid 500); 9 Apr 2007 16:16:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81405 invoked by uid 99); 9 Apr 2007 16:16:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 09:16:17 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Apr 2007 09:16:09 -0700
Received: (qmail 89003 invoked by uid 60001); 9 Apr 2007 16:15:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=FzXrdHDPftesM8VHX6soXfgVWFkTqh8c4DUcB2yG+tQK52XfxkIwfIh+yFLJOMDEY2ViMNCV0PKNU7xme/dy5e2DZtLvGA0pA+ss+xCHc/HWWp5CgOKEU/Uhyz07N3oWHLwb5KUcq1+dVIx2OLSSFbS46ODdbZGEVFUBBQ+u2Cw=;
X-YMail-OSG: 9xu.tMEVM1mMgloNCC8OBzhy1rpIA7HwwB98NZ09XSLN1zIPU.Z8OA0GMjGHL3cMJjkydA8TMWYZbnMB7wtBrq8uBx9oGfT4jVQrtj8ZldF_GULHWhE-
Received: from [72.231.8.153] by web50310.mail.re2.yahoo.com via HTTP; Mon, 09 Apr 2007 09:15:48 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.10
Date: Mon, 9 Apr 2007 09:15:48 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexReader.deleteDocuement(); How to use it with our code??
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <425713.48269.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Look at that E:\... path.
"indexes" vs. "index".

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: "Ratnesh,V2Solutions India" <ratnesh.srivastava@in.v2solutions.com>
To: java-user@lucene.apache.org
Sent: Monday, April 9, 2007 10:41:17 AM
Subject: IndexReader.deleteDocuement(); How to use it with our code??


Hi this is  my code snippets. I am using Lucene 1.9.1 API . and Getting the
following exception please someone help me .....................,,, Getting
over from this problem 

/**

  * Adds searchable fields to a document, that can be used to find if the

  * document has links to OBJECT tag information or not.

  */

public class OBJECTLinkIndexingFilter implements IndexingFilter {

      public static final Log LOG =
LogFactory.getLog(OBJECTLinkIndexingFilter. class); 

      public static String FIELD = "objects";

      private String surl1;

      private String surl;

      int doc;

      private Configuration conf; 

      /**

        * Searches through the parse object's metadata to add the indexing
links

        * references.

        */

      public Document filter(Document doc, Parse parse, UTF8 url,

                  CrawlDatum datum, Inlinks inlinks) throws
IndexingException {

            

            Metadata metadata = parse.getData().getParseMeta();

            // index if the object has RDF metadata or not

            String hasOBJECT = metadata.get(OBJECT.HAS_OBJECT_LINK);

            if (hasOBJECT != null && hasOBJECT.equals( "true")) {

                  if (LOG.isInfoEnabled()) { 

                        LOG.info( "OBJECT: document " + url + " has OBJECT
links"); 

                  }

 

                  // For each metadata tag beginning with our RDF prefix,
add it to

                  // the

                  // searchable fields

                  for (String s : metadata.names()) { 

                        if (s.startsWith(OBJECT.HAS_OBJECT_LINK)) { 

                              surl = url.toString(); 

                              addFeature(doc, surl );

 

                              if (LOG.isInfoEnabled()) { 

                                    LOG.info( "\ts");

                              } 

                        } 

                  }

            } else {

                  try{

                              surl1=url.toString(); 

                              String
indexDir="E:/eclipse/310307/objtest/crawl-result/index/" ;

                              FSDirectory directory =
FSDirectory.getDirectory(indexDir,false );                         

                              IndexReader reader =
IndexReader.open(directory);

                        

                        Term term = new Term("url" , surl1 );

                        int deleted = reader.deleteDocuments(term);

                        LOG.info( "Document is the RATNESH
SRIVASTAVA."+deleted); 

                        directory.close();

                        reader.close();

                        } 

                        catch(Exception e) 

                        { 

                              e.printStackTrace(); 

                        } 

                        

                  }

 

            return doc;

      }

 

      /**

        * Adds an index field to the document.

        */

      private void addFeature(Document doc, String feature) { 

            doc.add( new Field( FIELD, feature, Field.Store.YES, 

                        Field.Index.UN_TOKENIZED)); 

      }

      

      public void setConf(Configuration conf) { 

            this.conf = conf; 

      }

 

      public Configuration getConf() { 

            return this.conf;

      } 

 

 

 

Instead of true , I made Boolean call inside getDirectory to false. and if I
give path

String indexDir=
"E:/eclipse/310307/objtest/crawl-result/indexes/part-00000"; it does not
show 

any exception Instead doing nothing?? But mentioning as above for "index"
directory gives exception .

 

java.io.IOException: E:\eclipse\310307\objtest\crawl-result\index not a
directory
        at org.apache.lucene.store.FSDirectory.init(FSDirectory.java:180)
        at org.apache.lucene.store.FSDirectory.getDirectory
(FSDirectory.java:141)
        at
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:117)
        at
in.v2solutions.com.OBJECTLinkIndexingFilter.filter(OBJECTLinkIndexingFilter.java:88)
        at
org.apache.nutch.indexer.IndexingFilters.filter(IndexingFilters.java:72)
        at org.apache.nutch.indexer.Indexer.reduce(Indexer.java:235)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:247)
        at
org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:112

 

Why is this?? Please bear with me as I am new bie to face the problem with
Lucene indexes.

 

Regards,


-- 
View this message in context: http://www.nabble.com/IndexReader.deleteDocuement%28%29--How-to-use-it-with-our-code---tf3547568.html#a9903109
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 16:32:35 2007
Return-Path: <java-user-return-27481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59952 invoked from network); 9 Apr 2007 16:32:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 16:32:34 -0000
Received: (qmail 29168 invoked by uid 500); 9 Apr 2007 16:32:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29128 invoked by uid 500); 9 Apr 2007 16:32:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29113 invoked by uid 99); 9 Apr 2007 16:32:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 09:32:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of abublic@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 09:32:23 -0700
Received: by mu-out-0910.google.com with SMTP id i10so2307788mue
        for <java-user@lucene.apache.org>; Mon, 09 Apr 2007 09:32:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=IwCfIOfFHfpVeXFH+VLHaSfjtdQQDmU9QYFi4NnfE3Be5NB+HId2Q/6eDMt70U52e6oUqzWBenRsbgPd3f+RQCchrdCZfOI74+kShGX6cpx4Qyxu/YdrVCxO5RAbaxBku6ImvkbLUzFqeTU1Tayjdy94252cNsXeVcXUdPYj2xg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=Df6jU32fuaJNdzi2RryZKrdihXnjdQ1vlWFBZ/B4tnGe+ipsyXiRB3oADVfTKg/2IGui/C12nHUzCikD4adAhMkwjmEsw2BvSyn+3E6+nTUbOwgqoN+eFfgMZHpFkS18kzijznLucZu4VqJZqVFmYe94EMgBpwEUrREQrnjncdE=
Received: by 10.82.102.4 with SMTP id z4mr7874301bub.1176136321386;
        Mon, 09 Apr 2007 09:32:01 -0700 (PDT)
Received: from ?81.195.137.185? ( [81.195.137.185])
        by mx.google.com with ESMTP id b33sm12451776ika.2007.04.09.09.31.59;
        Mon, 09 Apr 2007 09:31:59 -0700 (PDT)
Date: Mon, 9 Apr 2007 20:31:17 +0400
From: Artem <abublic@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem <abublic@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <1652206393.20070409203117@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: Re[2]: Out of memory exception for big indexes
In-Reply-To: <814127511.20070408213229@gmail.com>
References: <46162A72.50400@sirma.bg>
 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
 <814127511.20070408213229@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Nilesh and all!

NB> This seems like a very useful patch. Our application searches over 50
NB> million doc in a 40GB index. We only have simple conjunctive queries
NB> on a single field. Currently, the command line search program that
NB> prints top-10 results requires at least 200mb memory. Our web
NB> application, that searches the same index crashes with OOM when there
NB> are more than 10-12 concurrent requests (heap size set to 3GB). Will
NB> this patch help in such a situation?

I must note that my patch only helps in lucene-OOM situations related to
_sorted_ queries. If this is your case than I think yes it will help.

In my app currently index is not so big, only 1mln docs. With the patch applied
sample query giving first 30 of 120,000 sorted results made memory consumption
jump from 18M to 20M according to jconsole.

NB> It seems that there are some issues with this patch and that was the
NB> reason it is not yet in the main source tree. Can someone please
NB> summerize what are the downsides of using such an approach. It will be
NB> really good if Lucene had it in main source tree and a flag to turn ON
NB> or OFF this feature.

First there's performance cost (for second and further queries with the
same IndexSearcher). In default implementation all the index values of sorted
field are cached during the first sorted search - this takes memory and time;
but next queries run fast if there still some memory left. My implementation
doesn't cache field values but loads them from respective documents on the fly -
so it's slower but takes less memory. The query mentioned took about 3s (with
rather small sorted fields values - about 20-100 chars).
There's a limitation also - my implementation requires sorted field to be
"stored" in index (Field.Store.YES in doc.add())

NB> Bublic, can you tell me what exactly I need to do if I want to use this patch?

You can include StoredFieldSortFactory class source file into your sources and
then use StoredFieldSortFactory.create(sortFieldName, sortDescending) to get
Sort object for sorting query.
StoredFieldSortFactory source file can be extracted from LUCENE-769 patch or
from sharehound sources: http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/apache/lucene/search/StoredFieldSortFactory.java

Regards,
Artem

NB> thanks
NB> Nilesh

NB> On 4/6/07, Bublic Online <abublic@gmail.com> wrote:
>> Hi Ivan, Chris and all!
>>
>> I'm that contributor of LUCENE-769 and I recommend it too :)
>> OutOfMemory error was one of main reasons for me to make it.
>>
>> Regards,
>> Artem Vasiliev
>>
>> On 4/6/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>> >
>> >
>> > : The problem I suspect is the sorting. As I understand, Lucene
>> > : builds internal caches for sorting and I suspect that this is the root
>> > : of your problem. You can test this by trying your problem queries
>> > : without sorting.
>> >
>> > if Sorting really is the cause of your problems, you may want to try out
>> > this patch...
>> >
>> > https://issues.apache.org/jira/browse/LUCENE-769
>> >
>> > ...it *may* be advantageous in situations where memory is your most
>> > constrained resource, and you are willing to sacrifice speed for sorting
>> > ... it looks promising to me, but there haven't been any convincing
>> > usecases/benchmarks of people finding it beneficial (other then the
>> > original contributor)
>> >
>> > if you do try it, please post your comments in the issue.
>> >
>> >
>> >
>> > -Hoss
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>





-- 
Best regards,
 Artem                            mailto:abublic@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 17:03:44 2007
Return-Path: <java-user-return-27482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69493 invoked from network); 9 Apr 2007 17:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 17:03:43 -0000
Received: (qmail 80635 invoked by uid 500); 9 Apr 2007 17:03:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80606 invoked by uid 500); 9 Apr 2007 17:03:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80595 invoked by uid 99); 9 Apr 2007 17:03:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 10:03:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of abublic@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 10:03:32 -0700
Received: by mu-out-0910.google.com with SMTP id i10so2318572mue
        for <java-user@lucene.apache.org>; Mon, 09 Apr 2007 10:03:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=oQEl3kdiiCwdRgnrt0VIjeQkP3NhpeLSXURTTDU803Oc31/IbA1pqQzY6C6x4d16mWL4nNDPB0oS7Ji8cWm+gRe/14CJRP+0mqTmkmOILLo5dqE6Tof+OYA53Yl2YTySMXBW2h9VlS9BocTfAo9fmYo2mSA2kBs7TZF7JuHCqG8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=qBQSEs0K6QHg4Wa9uToC0NOff2M4p8lajCvWcWI3lMAUOaZvdQPrvmQ0cft0XSeGUUeB4m4Qy0jSsFd13N50MRZNgL3ymU0+WXL9uuNlsMQ4IL/nxWxeRalc3AqV6/nqyLy5sXlLEqs9bl4DP3+NZTIymRpvxG8h7MAf30kTCVI=
Received: by 10.82.134.12 with SMTP id h12mr7945488bud.1176138191006;
        Mon, 09 Apr 2007 10:03:11 -0700 (PDT)
Received: from ?81.195.137.185? ( [81.195.137.185])
        by mx.google.com with ESMTP id b36sm12467916ika.2007.04.09.10.03.09;
        Mon, 09 Apr 2007 10:03:09 -0700 (PDT)
Date: Mon, 9 Apr 2007 21:02:29 +0400
From: Artem <abublic@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem <abublic@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <1710192239.20070409210229@gmail.com>
To: "Nilesh Bansal" <nileshbansal@gmail.com>, java-user@lucene.apache.org
Subject: Re[4]: Out of memory exception for big indexes
In-Reply-To: <f36128690704081158g3eb47189q2cd1d03bc89145df@mail.gmail.com>
References: <46162A72.50400@sirma.bg>
 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
 <814127511.20070408213229@gmail.com>
 <f36128690704081158g3eb47189q2cd1d03bc89145df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Nilesh,

Sunday, April 8, 2007, 10:58:32 PM, you wrote:

[talkin' about LUCENE-769]

>> I must note that my patch only helps in lucene-OOM situations related to
>> _sorted_ queries. If this is your case than I think yes it will help.
NB> Probably a newbie question, but can you please explain what sorted
NB> queries mean? Is simple keyword search a sorted query?

That's simple - if results presented on screen sorted by that keyword it's
sorted query :)
Another test is your system's code. Sorted queries I mean are calls to
IndexSearcher.search(query, sort).

-- 
Best regards,
 Artem                            mailto:abublic@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 18:55:42 2007
Return-Path: <java-user-return-27483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1868 invoked from network); 9 Apr 2007 18:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 18:55:41 -0000
Received: (qmail 94724 invoked by uid 500); 9 Apr 2007 18:55:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94692 invoked by uid 500); 9 Apr 2007 18:55:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94681 invoked by uid 99); 9 Apr 2007 18:55:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 11:55:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Apr 2007 11:55:33 -0700
Received: (qmail 6670 invoked by uid 60001); 9 Apr 2007 18:55:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=fUvmT7T1XC9/N0VyLgq8nlUvwWpFZWRVm9c0y7FlpGpA2/gDP6K5sbkDxmSWpFnp2dCnD0S5pfPg2Ox0GgTqVRSe/LBO6Ak1AUsbkT+ibdMgCU2pYc1fsw+HTliSTeiWHB7XdwI6PCs6RC3fbK/k1ZyE6cdMvIJsH6Srsnq7bIE=;
X-YMail-OSG: QL..XK0VM1njW43ULqrIzPm6f6ehxz5mC9.axUwDqFuPT.fvEpGt5BAJELlZnQId4puj5O1tn9eyXGmc2jcXTOSYRkqnoWlQp.375XHBPYYx_KpT_Rc-
Received: from [72.231.8.153] by web50301.mail.re2.yahoo.com via HTTP; Mon, 09 Apr 2007 11:55:12 PDT
X-Mailer: YahooMailRC/476 YahooMailWebService/0.7.41.10
Date: Mon, 9 Apr 2007 11:55:12 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexModifier's docCount is inconsistent
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <194895.4762.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I have actually added a method to get the number of deleted documents to all *Reader classes just the other day.  I'll provide a patch soon.  It still won't make the IndexWriter aware of deletes, but will that help you?

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Cheolgoo Kang <appler@gmail.com>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 10:40:52 AM
Subject: IndexModifier's docCount is inconsistent

When we use IndexModifier's docCount() method, it calls it's
underlying IndexReader's numDocs() or IndexWriter's docCount() method.
Here is the problem that IndexReader.numDocs() cares about deleted
documents, but IndexWriter.docCount() ignores it.

So, I've made some modifications in IndexWriter.docCount() and added
SegmentInfo.getDeletedDocCount() to read the number of deleted docs as
in IndexReader. It works great in my application but I'm not sure it's
a right way to handle this.

I found that there is no dependencies using docCount() method anywhere
in lucene trunk except several test cases. If it was a intended
behavior, it's okay but IndexWriter should have provided a method like
deletedNumDocs().

Any comments?

-- 
Cheolgoo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 22:36:33 2007
Return-Path: <java-user-return-27484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74984 invoked from network); 9 Apr 2007 22:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 22:36:32 -0000
Received: (qmail 52152 invoked by uid 500); 9 Apr 2007 22:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52121 invoked by uid 500); 9 Apr 2007 22:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52110 invoked by uid 99); 9 Apr 2007 22:36:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 15:36:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.163.178.93] (HELO web34012.mail.mud.yahoo.com) (66.163.178.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Apr 2007 15:36:24 -0700
Received: (qmail 97557 invoked by uid 60001); 9 Apr 2007 22:36:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=lCt4ulEnBCzXWzD8ApZGGeDp6sHXZWGfmXcnHWx2RiK3RgODVKkQqOAwIRTBH32Esjq0cCEaqGUSdecKu1ig3caA6cDiiJXMAmrUrAHhNptjG4dmJEk54QvfHS7kvkPDI424Gwu3LNCovychdSYuG/S4EGM6yFFvFTvZWV822ik=  ;
Message-ID: <20070409223604.97555.qmail@web34012.mail.mud.yahoo.com>
X-YMail-OSG: qVhkifsVM1mB3aMzgmjB7xSnd0MLOFi6q9pShAvHtm5MrtntXoPu8kDIpz7Wk1W_lF_KMvJskGrLN.hZNB_bwYaMVk9d5G_gfj5X5ON.Z.2id87tA2S3nbh7567oCA--
Received: from [64.121.58.140] by web34012.mail.mud.yahoo.com via HTTP; Mon, 09 Apr 2007 15:36:04 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Mon, 9 Apr 2007 15:36:04 -0700 (PDT)
From: Ted Chen <nehcdet@yahoo.com>
Subject: keywords in a document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1460096203-1176158164=:93140"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1460096203-1176158164=:93140
Content-Type: text/plain; charset=ascii

Hi, 
    I'm new to Lucene, but I did spend quite some time trying to find an answer to the problem before turning to you gurus for help.
    I'm given a text file.  My task is to extract some top keywords from the file so that these words can describe this document.  Ideally, terms with the highest tfidf should be returned.   I noticed lucene provides a method called QueryTermExtractor.getIdfWeightedTerms(), but to use this method, I need to provide a query and an IndexReader.  In my case, I only have a text file, and don't have a handle on any IndexReader.  Is there any way to indicate I want to use the "default IndexReader", where the default reader represents a typical collection of documents.  Also, do I need to construct a Query out of the text file?  If so, is the best choice a multi-term query?
    Any suggestions?

Thanks,
Ted


 
____________________________________________________________________________________
Sucker-punch spam with award-winning protection. 
Try the free Yahoo! Mail Beta.
http://advision.webevents.yahoo.com/mailbeta/features_spam.html
--0-1460096203-1176158164=:93140--

From java-user-return-27485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 09 23:46:36 2007
Return-Path: <java-user-return-27485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 398 invoked from network); 9 Apr 2007 23:46:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Apr 2007 23:46:34 -0000
Received: (qmail 43251 invoked by uid 500); 9 Apr 2007 23:46:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42994 invoked by uid 500); 9 Apr 2007 23:46:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42979 invoked by uid 99); 9 Apr 2007 23:46:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 16:46:34 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 16:46:27 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l39Njx3C007945
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 02:45:59 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m4a29iw6; 10 Apr 2007 02:45:00 +0300
Message-ID: <461AD03F.4020409@teamware.com>
Date: Tue, 10 Apr 2007 09:46:07 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Not able to search on UN_TOKENIZED fields
References: <4C668A51-B626-41C8-883A-79D5C240F3DF@genome.chop.edu> <359a92830704051208m4c28e343k4132008657ac2f5a@mail.gmail.com> <0EAA9B4F-BC53-43CB-89D1-EF108DC161CE@genome.chop.edu>
In-Reply-To: <0EAA9B4F-BC53-43CB-89D1-EF108DC161CE@genome.chop.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 10 Apr 2007 02:45:59 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

You can either use KeywordAnalyzer with your QueryParser which will correctly 
handle UN_TOKENIZED fields, but that will use KeywordAnalyzer for all fields.

To use a field specific Analyzer you either need to use PerFieldAnalyzerWrapper 
and preload it with all possible fields and use that as the Analyzer for 
QueryParser.  Alternatively, override QueryParser's getFieldQuery() and then 
choose your Analyzer there based on the field being searched.

Antony

Ryan O'Hara wrote:
> Hey Erick,
> 
> Thanks for the quick response.  I need a truly exact match.  What I 
> ended up doing was using a TOKENIZED field, but altering the 
> StandardAnalyzer's stop word list to include only the word/letter 'a'.  
> Below is my searching code:
> 
> String[] stopWords = {"a"};
>             StandardAnalyzer sa = new StandardAnalyzer(stopWords);
>             QueryParser qp = new QueryParser("symbol", sa);
>             Query queryPhrase = qp.parse(symbol.toUpperCase());
>             Hits hits = searcher.search(queryPhrase);
>             String hit;
>             if(hits.length() > 0){
>                 hit = hits.doc(0).get("count");
>                 count = Integer.parseInt(hit);
>             }
> 
> Is the reason it wasn't working due to the fact that I'm passing in a 
> StandardAnalyzer?  I thought that maybe the searching mechanisms would 
> be able to use or not use an analyzer according to what the field.index 
> value is.
> 
> One other question that you may have an answer to:  I'm eventually going 
> to need to alter the stop word list to include all default stop words, 
> except those that match certain criteria.  Can this be done?
> 
> Thanks,
> Ryan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 00:16:40 2007
Return-Path: <java-user-return-27486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11552 invoked from network); 10 Apr 2007 00:16:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 00:16:39 -0000
Received: (qmail 79978 invoked by uid 500); 10 Apr 2007 00:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79390 invoked by uid 500); 10 Apr 2007 00:16:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79379 invoked by uid 99); 10 Apr 2007 00:16:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:16:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:16:31 -0700
Received: by mu-out-0910.google.com with SMTP id i10so2442139mue
        for <java-user@lucene.apache.org>; Mon, 09 Apr 2007 17:16:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YJcR2NthpbYXmM06dlvd7bGVUDLHCXmhZyG5kSG0CuZPsg+myPXuTOzwIsI2isPFve6vpWKBOh3Q7z0omi6q0lAA03B6cb5IaPzwIGHot4WytH967zZIY1BjNBbEpG6foiKtftGgapCOvn8H89t/rOujL3T3azEjcsImXq5U9Tc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=G/Jb0U1jEDdu2kQvM4Je79jZ3aD2l9O6XFJLN8ZJP9FqYFpOFTgxgU0A+ALJF2PD8vQ7sA0F4YxTmEQuK0x1xddYk7jphFopfIqK8Rvfkyo4R0YX+pBldpxPJFIZn2hwWwk8RQwoHMdFtD57e1YH4/L4rfv1GMJDtYOYvxtkKs0=
Received: by 10.82.154.2 with SMTP id b2mr8457007bue.1176164169610;
        Mon, 09 Apr 2007 17:16:09 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Mon, 9 Apr 2007 17:16:09 -0700 (PDT)
Message-ID: <359a92830704091716j20f1e3acn7f7755d5e6fd13d8@mail.gmail.com>
Date: Mon, 9 Apr 2007 20:16:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: keywords in a document
In-Reply-To: <20070409223604.97555.qmail@web34012.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10253_21324281.1176164169542"
References: <20070409223604.97555.qmail@web34012.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10253_21324281.1176164169542
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, a couple of things....

The IndexReader is opened on an already existing index. You need to
have built an index to open a reader on it. So there isn't really a default
reader.

So usually, one uses Lucene to create an index out of some
number of documents, and use that index for searching. One of
the major parts of creating an index is exactly reading in the
raw text and deciding what needs to go into the index in various
fields.

This makes what you're trying to do a bit clumsy, at least it
would have a release or two ago...

However, you're in great luck, because some kind soul created
MemoryIndex, which is a simplified in-memory-only index
intended to be used to create indexes on a single document for
some processing and then throw out. Which may be just what you
need. See the jar in C:\lucene-2.1.0\contrib\memory

But I'm still not sure this is what you need, because you only get
relevancy rankings in Lucene based upon the query you are trying
to submit. If you're doing simple term frequency counting, perhaps
you can get creative with TermFreqVector and other Term* classes...

Perhaps others will be able to chime in here....

Best
Erick


On 4/9/07, Ted Chen <nehcdet@yahoo.com> wrote:
>
> Hi,
>     I'm new to Lucene, but I did spend quite some time trying to find an
> answer to the problem before turning to you gurus for help.
>     I'm given a text file.  My task is to extract some top keywords from
> the file so that these words can describe this document.  Ideally, terms
> with the highest tfidf should be returned.   I noticed lucene provides a
> method called QueryTermExtractor.getIdfWeightedTerms(), but to use this
> method, I need to provide a query and an IndexReader.  In my case, I only
> have a text file, and don't have a handle on any IndexReader.  Is there any
> way to indicate I want to use the "default IndexReader", where the default
> reader represents a typical collection of documents.  Also, do I need to
> construct a Query out of the text file?  If so, is the best choice a
> multi-term query?
>     Any suggestions?
>
> Thanks,
> Ted
>
>
>
>
> ____________________________________________________________________________________
> Sucker-punch spam with award-winning protection.
> Try the free Yahoo! Mail Beta.
> http://advision.webevents.yahoo.com/mailbeta/features_spam.html

------=_Part_10253_21324281.1176164169542--

From java-user-return-27487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 00:36:48 2007
Return-Path: <java-user-return-27487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17426 invoked from network); 10 Apr 2007 00:36:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 00:36:47 -0000
Received: (qmail 6198 invoked by uid 500); 10 Apr 2007 00:36:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6158 invoked by uid 500); 10 Apr 2007 00:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6146 invoked by uid 99); 10 Apr 2007 00:36:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:36:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of appler@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:36:40 -0700
Received: by an-out-0708.google.com with SMTP id c3so1732978ana
        for <java-user@lucene.apache.org>; Mon, 09 Apr 2007 17:36:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AGgvxKIy3Vw2maTFJ871rC1SNZ9E3wf/K+DFSoXn5RXbRXwbKiYC9vJYfoNevN+WQRULKfAZCAXBeZ/eIK6SybZMr3uycXODqfZyaQEBheBbNpRONsFlKX3E+tMERGhBb7S2e9BnAwVe5h3dWSKykUWbLaiFuIaE0I5jqDH+pQQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=oFfAOcGTEt8lRboifjzSp+pLBzV/hrbIqs4S3jrDr7dgCGUtIN859tutXj6mIaoxtiPc7FnrzYRi5MkdBIXjEzQuAE3c804VRy+seT8VHdCR08HGOU9dL/H6VbAraLOogLjsQRI+UhFVYoiEQMmEzct7FTQ6X5gw/yn/NLj4XP8=
Received: by 10.100.38.16 with SMTP id l16mr4434715anl.1176165379159;
        Mon, 09 Apr 2007 17:36:19 -0700 (PDT)
Received: by 10.100.41.3 with HTTP; Mon, 9 Apr 2007 17:36:18 -0700 (PDT)
Message-ID: <48b708490704091736k5541eae8x58d9aeaf1f361c56@mail.gmail.com>
Date: Tue, 10 Apr 2007 09:36:18 +0900
From: "Cheolgoo Kang" <appler@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexModifier's docCount is inconsistent
In-Reply-To: <194895.4762.qm@web50301.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <194895.4762.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Otis,

I've already made some modification to get the number of deleted docs
in IndexWriter.docCount() and using it. It's works great but the
problem is not being aware of deletes within IndexWriter itself. I
have to re-open the IndexWriter to get the updated number of deletes.
Haha! (It's fine cause my index is almost read-only.)

Anyway, I think it's name or functionality of a method should be
consistent through IndexReader, IndexWriter, IndexModifier, etc.
That's just what I've asked before.


On 4/10/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> I have actually added a method to get the number of deleted documents to all *Reader classes just the other day.  I'll provide a patch soon.  It still won't make the IndexWriter aware of deletes, but will that help you?
>
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Cheolgoo Kang <appler@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, April 6, 2007 10:40:52 AM
> Subject: IndexModifier's docCount is inconsistent
>
> When we use IndexModifier's docCount() method, it calls it's
> underlying IndexReader's numDocs() or IndexWriter's docCount() method.
> Here is the problem that IndexReader.numDocs() cares about deleted
> documents, but IndexWriter.docCount() ignores it.
>
> So, I've made some modifications in IndexWriter.docCount() and added
> SegmentInfo.getDeletedDocCount() to read the number of deleted docs as
> in IndexReader. It works great in my application but I'm not sure it's
> a right way to handle this.
>
> I found that there is no dependencies using docCount() method anywhere
> in lucene trunk except several test cases. If it was a intended
> behavior, it's okay but IndexWriter should have provided a method like
> deletedNumDocs().
>
> Any comments?
>
> --
> Cheolgoo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Cheolgoo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 00:37:59 2007
Return-Path: <java-user-return-27488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17611 invoked from network); 10 Apr 2007 00:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 00:37:55 -0000
Received: (qmail 8068 invoked by uid 500); 10 Apr 2007 00:37:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7997 invoked by uid 500); 10 Apr 2007 00:37:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7950 invoked by uid 99); 10 Apr 2007 00:37:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:37:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:37:39 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <320819(1)>; Mon, 9 Apr 2007 17:37:10 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <57996>; Mon, 9 Apr 2007 17:37:05 PDT
To: java-user@lucene.apache.org
Subject: Re: keywords in a document 
In-reply-to: <20070409223604.97555.qmail@web34012.mail.mud.yahoo.com> 
References: <20070409223604.97555.qmail@web34012.mail.mud.yahoo.com>
Comments: In-reply-to Ted Chen <nehcdet@yahoo.com>
    message dated "Mon, 09 Apr 2007 15:36:04 -0700."
Date: Mon, 9 Apr 2007 17:36:55 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <07Apr9.173705pdt."57996"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Try looking at the "retrieveInterestingTerms" method on the class MoreLikeThis.

http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/similar/MoreLikeThis.html

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 00:38:23 2007
Return-Path: <java-user-return-27489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17850 invoked from network); 10 Apr 2007 00:38:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 00:38:23 -0000
Received: (qmail 11534 invoked by uid 500); 10 Apr 2007 00:38:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11494 invoked by uid 500); 10 Apr 2007 00:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11436 invoked by uid 99); 10 Apr 2007 00:38:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:38:15 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:38:08 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1139467nzh
        for <java-user@lucene.apache.org>; Mon, 09 Apr 2007 17:37:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=jLNAyRdrdLxuunS/9LjA3NY1lJjd9tZuyRmMPQvXPvTB9cXuT8GKepKmYhOrNKVuQOwkeobvo7YEJhv1VzjgRcPj87zOBwCsNnmo0aDSc9Y1J0X70R6PLWuz4uaQ3moU/2FY2n6VrG8x94JdUVXJpmBWkB31j12Q3wCKzb9Da/U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Qn3hEPimZURg76QajTkM3DzhXZzY+NWTxmcnjoZmswAK7kgyDTbEHqVBoGVgbDn9nGR5VpKGr9vkacc2PYA6hGi7XIO4LajdBo3UzUflRfUSCvaufMD0NZG1xzm6IInfJxi9aT8sVXPCza39lgFUCQdHJ3/6i1bzBcMv/8vn15o=
Received: by 10.114.202.15 with SMTP id z15mr2573326waf.1176165467375;
        Mon, 09 Apr 2007 17:37:47 -0700 (PDT)
Received: by 10.114.108.2 with HTTP; Mon, 9 Apr 2007 17:37:47 -0700 (PDT)
Message-ID: <ae6f38f60704091737t7947f340j258a828445bcdc7a@mail.gmail.com>
Date: Mon, 9 Apr 2007 20:37:47 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13484_25187144.1176165467309"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13484_25187144.1176165467309
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Otis Gospodnetic <otis_gospodnetic@yahoo.com> responded to Walt Stoneburner:
> Purely negative queries don't work.  Example: -A will not find all
documents that do not have "A".

What I'm trying to do is augment an existing query by appending qualifiers.

If I search for +HORSE -RADISH, I should get only documents with horses but
no radishes.  So far so good.

Now, if I do +HORSE -RADISH -SHOE, I should get only documents with horses,
but none of those will have radish or shoe.  Again, so far so good.

What happens when I write +HORSE -(RADISH SHOE)?

My first impression is that it is exactly like specifying the terms ...
however, the boolean expression in me it telling me that's NOT( RADISH OR
SHOE) ... which, from the programming example I sited before means a
document with HORSE SHOE in it may actually get returned, because RADISH was
not in it.  Effectively this expression would only exclude documents if they
mentioned both RADISH and SHOE in them.  ...however, Lucene seems to be
doing the expected, not the mathematic solution.  That weirds me out.

Why?

Because if I change -(RADISH SHOE) to +(RADISH SHOE) than does that that say
I must have either a radish or a shoe, ...both are not necessary?

Put another way, if +(A B) means I must have at least an A or B (or both),
but +A +B means I have to have both....

Then why doesn't -(X Y) mean I must not have an X or Y (or not both), where
-X -Y means I can't have either.

Did this simplify things or make them more muddy?

-wls

------=_Part_13484_25187144.1176165467309--

From java-user-return-27490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 00:47:58 2007
Return-Path: <java-user-return-27490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19274 invoked from network); 10 Apr 2007 00:47:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 00:47:57 -0000
Received: (qmail 28104 invoked by uid 500); 10 Apr 2007 00:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28064 invoked by uid 500); 10 Apr 2007 00:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28053 invoked by uid 99); 10 Apr 2007 00:47:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:47:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 17:47:50 -0700
Received: by mu-out-0910.google.com with SMTP id i10so2451938mue
        for <java-user@lucene.apache.org>; Mon, 09 Apr 2007 17:47:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ioD1tHsL8F8Na0ujFKAGWe9oVZ9eblIM6O9sTe9wqC7+CfJ4sg+Q50PfXPKtQWDk7VzxEVg0ijN/obguOyLtn2eYajMutI+tFu7oe9efzFlrz8AwdJO9vlJNh3O4J8k0ybkn+fI4rUXfzf8c59rWmoPYGdaL3l5E0UxhSWr5N24=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=NNJF2B2pftmSjWxvr8Zuo8wGoNXdH3WIXkkC7quzBETzekTb65NyYrcgAYJDf9SbSqYXPqTXjEPQpQPHKkX4+8szF2A/gp2GYu13WO3EOO/NWVtpjj0VwtcV4jkBBXsDCusbhSAuFM1GzaRtsWcLDarSxvLxPpTdUxVd5alrhnk=
Received: by 10.82.148.7 with SMTP id v7mr8451064bud.1176166049153;
        Mon, 09 Apr 2007 17:47:29 -0700 (PDT)
Received: by 10.82.126.8 with HTTP; Mon, 9 Apr 2007 17:47:29 -0700 (PDT)
Message-ID: <c68e39170704091747s48b68a8elde25d5f685e2d1b7@mail.gmail.com>
Date: Mon, 9 Apr 2007 20:47:29 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior
In-Reply-To: <ae6f38f60704091737t7947f340j258a828445bcdc7a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ae6f38f60704091737t7947f340j258a828445bcdc7a@mail.gmail.com>
X-Google-Sender-Auth: d07610aa8db81f91
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/9/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
> What happens when I write +HORSE -(RADISH SHOE)?

That is equivalent to +HORSE -RADISH -SHOE
Documents with either RADISH or SHOE will not be returned.
Your comments seem to indicate that you think otherwise... am I
misunderstanding?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 01:30:22 2007
Return-Path: <java-user-return-27491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34400 invoked from network); 10 Apr 2007 01:30:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 01:30:20 -0000
Received: (qmail 78767 invoked by uid 500); 10 Apr 2007 01:30:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78539 invoked by uid 500); 10 Apr 2007 01:30:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78528 invoked by uid 99); 10 Apr 2007 01:30:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 18:30:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 18:30:12 -0700
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id 561EC64B28F
	for <java-user@lucene.apache.org>; Mon,  9 Apr 2007 18:32:14 -0700 (PDT)
X-Quarantine-ID: <xsnWZRhndeb4>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id xsnWZRhndeb4 for <java-user@lucene.apache.org>;
	Mon,  9 Apr 2007 18:32:10 -0700 (PDT)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id BA58B64B0CC
	for <java-user@lucene.apache.org>; Mon,  9 Apr 2007 18:32:00 -0700 (PDT)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Subject: RE: Standard Parser Behavior
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Mon, 9 Apr 2007 18:29:31 -0700
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E3250E7215@professorville.windows.esseff.org>
In-Reply-To: <ae6f38f60704091737t7947f340j258a828445bcdc7a@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Standard Parser Behavior
Thread-Index: Acd7CIwfgtgLJqAhRqmpStj9fg0SZwAA11dQ
References: <ae6f38f60704091737t7947f340j258a828445bcdc7a@mail.gmail.com>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene doesn't use a pure Boolean algebra, so things don't always do
what one might expect and things like De Morgan's law don't hold.

The source of this comes from the combination of IR prefix notation
(+/-) with standard Boolean AND/OR.

If you look at the source, there a number of rules that disambiguate
things. For example, comments in QueryParser.java indicate
 +a OR b
is changed to
 a OR b
as a way to combine + with OR. This isn't the only interpretation one
could make, but it's the one chosen.

As far as I know, this kind of disambiguation isn't documented anywhere.
It's not in queryparsersyntax.html.

-----Original Message-----
From: Walt Stoneburner [mailto:walt.stoneburner@gmail.com]=20
Sent: Monday, April 09, 2007 5:38 PM
To: java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior

Otis Gospodnetic <otis_gospodnetic@yahoo.com> responded to Walt
Stoneburner:
> Purely negative queries don't work.  Example: -A will not find all
documents that do not have "A".

What I'm trying to do is augment an existing query by appending
qualifiers.

If I search for +HORSE -RADISH, I should get only documents with horses
but
no radishes.  So far so good.

Now, if I do +HORSE -RADISH -SHOE, I should get only documents with
horses,
but none of those will have radish or shoe.  Again, so far so good.

What happens when I write +HORSE -(RADISH SHOE)?

My first impression is that it is exactly like specifying the terms ...
however, the boolean expression in me it telling me that's NOT( RADISH
OR
SHOE) ... which, from the programming example I sited before means a
document with HORSE SHOE in it may actually get returned, because RADISH
was
not in it.  Effectively this expression would only exclude documents if
they
mentioned both RADISH and SHOE in them.  ...however, Lucene seems to be
doing the expected, not the mathematic solution.  That weirds me out.

Why?

Because if I change -(RADISH SHOE) to +(RADISH SHOE) than does that that
say
I must have either a radish or a shoe, ...both are not necessary?

Put another way, if +(A B) means I must have at least an A or B (or
both),
but +A +B means I have to have both....

Then why doesn't -(X Y) mean I must not have an X or Y (or not both),
where
-X -Y means I can't have either.

Did this simplify things or make them more muddy?

-wls

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 04:08:29 2007
Return-Path: <java-user-return-27492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71655 invoked from network); 10 Apr 2007 04:08:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 04:08:28 -0000
Received: (qmail 31108 invoked by uid 500); 10 Apr 2007 04:08:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31073 invoked by uid 500); 10 Apr 2007 04:08:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31058 invoked by uid 99); 10 Apr 2007 04:08:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 21:08:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [219.118.71.125] (HELO mail.kai.ad.jp) (219.118.71.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 21:08:19 -0700
Received: from mail.kai.ad.jp by mail.kai.ad.jp
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Tue, 10 Apr 2007 13:07:58 +0900
Received: from linkclub-staff.com [219.118.70.66] by mail.kai.ad.jp
  (SMTPD32-7.07) id AD9EBB530092; Tue, 10 Apr 2007 13:07:58 +0900
From: anson <anson@linkclub-staff.com>
To: java-user@lucene.apache.org
Subject: Re: How to update index dynamically
Date: Tue, 10 Apr 2007 13:07:03 +0900
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: HidemaruMail 4.59 (WinNT,501)
In-Reply-To: <69B60642-18C5-40DE-8AD7-CA3BDA6CF865@ehatchersolutions.com>
References: <85C77A89149353anson@linkclub-staff.com> 
	<69B60642-18C5-40DE-8AD7-CA3BDA6CF865@ehatchersolutions.com>
Message-Id: <87C77B25B2569Aanson@linkclub-staff.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Erik, thanks.

U r right. Once excuting the search action, I will check whether this 
IndexReader still works on a current version of the index by 
IndexSearcher#isCurrent(). If not I will open a new IndexSearcher.
And now it works well.

But I want to know that if index update action offen happens, the 
IndexSearcher also need create many times, what influence well be caused 
on my blog system. Have u know something about it.

Best regards.

>After indexing, you have to open a new IndexSearcher to in order to see new
> documents.
>
>	Erik
>
>
>On Apr 9, 2007, at 5:25 AM, anson wrote:
>
>>
>> I have build a blog project under tomcat5.5 with Lucene2.0.
>> And I want to search my blog by full text, but there is somthing wrong:
>>
>> ----------------------------------------------
>> The project flow:
>>
>> (1) On tomcat start I wrote a listener to create a index file if the
>> index is never created.(It's works well)
>>
>>
>> (2) When I create/update/delete an article on the blog, I wrote a method
>> to update the index.(It's also works well)
>>
>> (3) Then I want to search the new/updated article in the front of my
>> blog page. But I can't get the new article. But when I restart the
>> tomcat, I can get the new one that I want. Why.
>>
>>
>> -----------------------------------------------
>> The index update flow:
>>
>> (1) Firsrt I delete the old document in index:
>>
>> IndexReader reader =
>>     IndexReader.open($INDEX_DIRECTORY);
>>
>> Term term = new Term("INDEX_ID", $entryId);
>>
>> if (term != null) {
>>     reader.deleteDocuments(term);
>> }
>>
>> //finally:
>> reader.close();
>>
>>
>> (2) Add the article to the index:
>> // Get the singleton IndexWriter instance
>> IndexWriter writer =
>>     IndexManager.getInstance().getIndexWriter();
>>
>> // add document
>> // Document() is method of make Lucene document
>> writer.addDocument(Document($EntryBean));
>>
>> writer.optimize();
>>
>>
>> // finally:
>> writer.close();
>>
>>
>> Could anybody tell me anything can help me out. Or I made a wrong flow?
>>
>>
>> Best regards.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 04:13:04 2007
Return-Path: <java-user-return-27493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72082 invoked from network); 10 Apr 2007 04:13:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 04:13:04 -0000
Received: (qmail 34794 invoked by uid 500); 10 Apr 2007 04:13:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34759 invoked by uid 500); 10 Apr 2007 04:13:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34748 invoked by uid 99); 10 Apr 2007 04:13:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 21:13:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [219.118.71.125] (HELO mail.kai.ad.jp) (219.118.71.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 21:12:54 -0700
Received: from mail.kai.ad.jp by mail.kai.ad.jp
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Tue, 10 Apr 2007 13:12:34 +0900
Received: from linkclub-staff.com [219.118.70.66] by mail.kai.ad.jp
  (SMTPD32-7.07) id AEB1BB610092; Tue, 10 Apr 2007 13:12:33 +0900
From: anson <anson@linkclub-staff.com>
To: java-user@lucene.apache.org
Subject: Re: How to update index dynamically
Date: Tue, 10 Apr 2007 13:11:39 +0900
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: HidemaruMail 4.59 (WinNT,501)
In-Reply-To: <586809.28892.qm@web50301.mail.re2.yahoo.com>
References: <586809.28892.qm@web50301.mail.re2.yahoo.com>
Message-Id: <88C77B265687CCanson@linkclub-staff.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis

Thanks for your reply. 
Yes, I just means it's a variable. I guss people can read it.
Pls forgive my lazy.

>Anson,
>
>That's not your real code, is it?  Those $ characters in it look incorrect.
>
>Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
>----- Original Message ----
>From: anson <anson@linkclub-staff.com>
>To: java-user@lucene.apache.org
>Sent: Monday, April 9, 2007 5:25:57 AM
>Subject: How to update index dynamically
>
>
>I have build a blog project under tomcat5.5 with Lucene2.0.
>And I want to search my blog by full text, but there is somthing wrong:
>
>----------------------------------------------
>The project flow:
>
>(1) On tomcat start I wrote a listener to create a index file if the 
>index is never created.(It's works well)
>
>
>(2) When I create/update/delete an article on the blog, I wrote a method 
>to update the index.(It's also works well)
>
>(3) Then I want to search the new/updated article in the front of my 
>blog page. But I can't get the new article. But when I restart the 
>tomcat, I can get the new one that I want. Why. 
>
>
>-----------------------------------------------
>The index update flow:
>
>(1) Firsrt I delete the old document in index:
>
>IndexReader reader = 
>    IndexReader.open($INDEX_DIRECTORY);
>
>Term term = new Term("INDEX_ID", $entryId);
>
>if (term != null) {
>    reader.deleteDocuments(term);
>}
>
>//finally:
>reader.close();
>    
>    
>(2) Add the article to the index:
>// Get the singleton IndexWriter instance
>IndexWriter writer = 
>    IndexManager.getInstance().getIndexWriter();
>    
>// add document
>// Document() is method of make Lucene document
>writer.addDocument(Document($EntryBean));
>
>writer.optimize();
>
>
>// finally:
>writer.close();
>
>
>Could anybody tell me anything can help me out. Or I made a wrong flow?
>
>
>Best regards.
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 04:16:01 2007
Return-Path: <java-user-return-27494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72377 invoked from network); 10 Apr 2007 04:16:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 04:16:00 -0000
Received: (qmail 39885 invoked by uid 500); 10 Apr 2007 04:15:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39841 invoked by uid 500); 10 Apr 2007 04:15:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39830 invoked by uid 99); 10 Apr 2007 04:15:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 21:15:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 21:15:52 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 479BA5B774; Mon,  9 Apr 2007 21:15:32 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2E7437F403
	for <java-user@lucene.apache.org>; Mon,  9 Apr 2007 21:15:32 -0700 (PDT)
Date: Mon, 9 Apr 2007 21:15:32 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior
In-Reply-To: <ae6f38f60704091737t7947f340j258a828445bcdc7a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704092109280.25847@hal.rescomp.berkeley.edu>
References: <ae6f38f60704091737t7947f340j258a828445bcdc7a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: My first impression is that it is exactly like specifying the terms ...
: however, the boolean expression in me it telling me that's NOT( RADISH OR
: SHOE) ... which, from the programming example I sited before means a

http://wiki.apache.org/lucene-java/BooleanQuerySyntax

When dealing with Lucene people are strongly encouraged to think in terms
of MUST, MUST_NOT and SHOULD (which are represented in the query parser as
the prefixes "+", "-" and the default) instead of in terms of AND, OR, and
NOT ... Lucene's Boolean Queries (and thus Lucene's QueryParser) is not a
strict Boolean Logic system, so it's best not to try and think of it like
one.

: Put another way, if +(A B) means I must have at least an A or B (or both),
: but +A +B means I have to have both....
:
: Then why doesn't -(X Y) mean I must not have an X or Y (or not both), where
: -X -Y means I can't have either.

-$FOO means that documents MUST_NOT match the query expressed by $FOO,
if $FOO is (X Y) then documents must not match either X or Y.

+$FOO means that documents MUST match the query expressed by $FOO,
if $FOO is (A B) then documents must match either A or B.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 05:21:07 2007
Return-Path: <java-user-return-27495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84794 invoked from network); 10 Apr 2007 05:21:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 05:21:07 -0000
Received: (qmail 2974 invoked by uid 500); 10 Apr 2007 05:21:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2263 invoked by uid 500); 10 Apr 2007 05:21:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2252 invoked by uid 99); 10 Apr 2007 05:21:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 22:21:06 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 22:20:59 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hb8mU-0006fw-5T
	for java-user@lucene.apache.org; Mon, 09 Apr 2007 22:20:38 -0700
Message-ID: <9914020.post@talk.nabble.com>
Date: Mon, 9 Apr 2007 22:20:38 -0700 (PDT)
From: "Ratnesh,V2Solutions India" <ratnesh.srivastava@in.v2solutions.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.deleteDocuement(); How to use it with our code??
In-Reply-To: <425713.48269.qm@web50310.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ratnesh.srivastava@in.v2solutions.com
References: <9903109.post@talk.nabble.com> <425713.48269.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I din't get the exact message from this sentence what exactly you want to
say??
Can you please brief it with some more sentences???


Ratnesh , V2SolutionsIndia


Otis Gospodnetic wrote:
> 
> Look at that E:\... path.
> "indexes" vs. "index".
> 
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> 
> ----- Original Message ----
> From: "Ratnesh,V2Solutions India" <ratnesh.srivastava@in.v2solutions.com>
> To: java-user@lucene.apache.org
> Sent: Monday, April 9, 2007 10:41:17 AM
> Subject: IndexReader.deleteDocuement(); How to use it with our code??
> 
> 
> Hi this is  my code snippets. I am using Lucene 1.9.1 API . and Getting
> the
> following exception please someone help me .....................,,,
> Getting
> over from this problem 
> 
> /**
> 
>   * Adds searchable fields to a document, that can be used to find if the
> 
>   * document has links to OBJECT tag information or not.
> 
>   */
> 
> public class OBJECTLinkIndexingFilter implements IndexingFilter {
> 
>       public static final Log LOG =
> LogFactory.getLog(OBJECTLinkIndexingFilter. class); 
> 
>       public static String FIELD = "objects";
> 
>       private String surl1;
> 
>       private String surl;
> 
>       int doc;
> 
>       private Configuration conf; 
> 
>       /**
> 
>         * Searches through the parse object's metadata to add the indexing
> links
> 
>         * references.
> 
>         */
> 
>       public Document filter(Document doc, Parse parse, UTF8 url,
> 
>                   CrawlDatum datum, Inlinks inlinks) throws
> IndexingException {
> 
>             
> 
>             Metadata metadata = parse.getData().getParseMeta();
> 
>             // index if the object has RDF metadata or not
> 
>             String hasOBJECT = metadata.get(OBJECT.HAS_OBJECT_LINK);
> 
>             if (hasOBJECT != null && hasOBJECT.equals( "true")) {
> 
>                   if (LOG.isInfoEnabled()) { 
> 
>                         LOG.info( "OBJECT: document " + url + " has OBJECT
> links"); 
> 
>                   }
> 
>  
> 
>                   // For each metadata tag beginning with our RDF prefix,
> add it to
> 
>                   // the
> 
>                   // searchable fields
> 
>                   for (String s : metadata.names()) { 
> 
>                         if (s.startsWith(OBJECT.HAS_OBJECT_LINK)) { 
> 
>                               surl = url.toString(); 
> 
>                               addFeature(doc, surl );
> 
>  
> 
>                               if (LOG.isInfoEnabled()) { 
> 
>                                     LOG.info( "\ts");
> 
>                               } 
> 
>                         } 
> 
>                   }
> 
>             } else {
> 
>                   try{
> 
>                               surl1=url.toString(); 
> 
>                               String
> indexDir="E:/eclipse/310307/objtest/crawl-result/index/" ;
> 
>                               FSDirectory directory =
> FSDirectory.getDirectory(indexDir,false );                         
> 
>                               IndexReader reader =
> IndexReader.open(directory);
> 
>                         
> 
>                         Term term = new Term("url" , surl1 );
> 
>                         int deleted = reader.deleteDocuments(term);
> 
>                         LOG.info( "Document is the RATNESH
> SRIVASTAVA."+deleted); 
> 
>                         directory.close();
> 
>                         reader.close();
> 
>                         } 
> 
>                         catch(Exception e) 
> 
>                         { 
> 
>                               e.printStackTrace(); 
> 
>                         } 
> 
>                         
> 
>                   }
> 
>  
> 
>             return doc;
> 
>       }
> 
>  
> 
>       /**
> 
>         * Adds an index field to the document.
> 
>         */
> 
>       private void addFeature(Document doc, String feature) { 
> 
>             doc.add( new Field( FIELD, feature, Field.Store.YES, 
> 
>                         Field.Index.UN_TOKENIZED)); 
> 
>       }
> 
>       
> 
>       public void setConf(Configuration conf) { 
> 
>             this.conf = conf; 
> 
>       }
> 
>  
> 
>       public Configuration getConf() { 
> 
>             return this.conf;
> 
>       } 
> 
>  
> 
>  
> 
>  
> 
> Instead of true , I made Boolean call inside getDirectory to false. and if
> I
> give path
> 
> String indexDir=
> "E:/eclipse/310307/objtest/crawl-result/indexes/part-00000"; it does not
> show 
> 
> any exception Instead doing nothing?? But mentioning as above for "index"
> directory gives exception .
> 
>  
> 
> java.io.IOException: E:\eclipse\310307\objtest\crawl-result\index not a
> directory
>         at org.apache.lucene.store.FSDirectory.init(FSDirectory.java:180)
>         at org.apache.lucene.store.FSDirectory.getDirectory
> (FSDirectory.java:141)
>         at
> org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:117)
>         at
> in.v2solutions.com.OBJECTLinkIndexingFilter.filter(OBJECTLinkIndexingFilter.java:88)
>         at
> org.apache.nutch.indexer.IndexingFilters.filter(IndexingFilters.java:72)
>         at org.apache.nutch.indexer.Indexer.reduce(Indexer.java:235)
>         at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:247)
>         at
> org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:112
> 
>  
> 
> Why is this?? Please bear with me as I am new bie to face the problem with
> Lucene indexes.
> 
>  
> 
> Regards,
> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/IndexReader.deleteDocuement%28%29--How-to-use-it-with-our-code---tf3547568.html#a9903109
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/IndexReader.deleteDocuement%28%29--How-to-use-it-with-our-code---tf3547568.html#a9914020
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 06:40:45 2007
Return-Path: <java-user-return-27496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9197 invoked from network); 10 Apr 2007 06:40:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 06:40:45 -0000
Received: (qmail 86349 invoked by uid 500); 10 Apr 2007 06:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85689 invoked by uid 500); 10 Apr 2007 06:40:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85678 invoked by uid 99); 10 Apr 2007 06:40:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 23:40:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 23:40:36 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HbA1X-0006N9-Te
	for java-user@lucene.apache.org; Mon, 09 Apr 2007 23:40:15 -0700
Message-ID: <9914639.post@talk.nabble.com>
Date: Mon, 9 Apr 2007 23:40:15 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Issue with search() Help Appreciated.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have indexed the docs successfully under the directory "LUCENE" under
current directory, which have segments, _1.cfs and deletable.

Now trying to use the following code to search the index but not getting any
HITS. But when I try to read through Reader and get the document with field
mentioned it works which means the index done properly and its just that
search is not working. Code is as follows:

The following code gets a Hits object like :
org.apache.lucene.search.Hits@14a9972
But when i try to get hits.length() it is 0. 

Can anyone point out whats wrong ?

IndexSearcher isearcher = new IndexSearcher("./LUCENE");
QueryParser parser = new QueryParser("Description", analyzer);
Query query = parser.parse("based");
Hits hits = isearcher.search(query);
for (int i = 0; i < hits.length(); i++) 
{
	Document hitDoc = hits.doc(i);
}
isearcher.close();
directory.close();
-- 
View this message in context: http://www.nabble.com/Issue-with-search%28%29-Help-Appreciated.-tf3551357.html#a9914639
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 06:58:59 2007
Return-Path: <java-user-return-27497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20411 invoked from network); 10 Apr 2007 06:58:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 06:58:58 -0000
Received: (qmail 6946 invoked by uid 500); 10 Apr 2007 06:59:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5806 invoked by uid 500); 10 Apr 2007 06:58:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5794 invoked by uid 99); 10 Apr 2007 06:58:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 23:58:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2007 23:58:49 -0700
Received: (qmail 3604 invoked from network); 10 Apr 2007 06:58:27 -0000
Received: from unknown (HELO p5b0ddb26.dip.t-dialin.net) ([pbs]695637@[91.13.219.38])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 10 Apr 2007 06:58:27 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Issue with search() Help Appreciated.
Date: Tue, 10 Apr 2007 08:59:37 +0200
User-Agent: KMail/1.8.2
References: <9914639.post@talk.nabble.com>
In-Reply-To: <9914639.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704100859.37820@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 10 April 2007 08:40, Lokeya wrote:

> But when i try to get hits.length() it is 0.
>
> Can anyone point out whats wrong ?

Please check the FAQ first:
http://wiki.apache.org/lucene-java/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 08:56:16 2007
Return-Path: <java-user-return-27498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82030 invoked from network); 10 Apr 2007 08:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 08:56:15 -0000
Received: (qmail 96987 invoked by uid 500); 10 Apr 2007 08:56:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96959 invoked by uid 500); 10 Apr 2007 08:56:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96948 invoked by uid 99); 10 Apr 2007 08:56:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 01:56:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.222.48.13] (HELO tkpsp701-int0.prod.tradingscreen.com) (203.222.48.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 10 Apr 2007 01:56:06 -0700
Received: from tkdwi001.dev.tradingscreen.com ([172.21.16.56])
 by tkpsp701-int0.prod.tradingscreen.com (SMSSMTP 4.1.5.31) with SMTP id M2007041017554400045
 for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 17:55:44 +0900
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C77B4E.0625C477"
Subject: distinct results
Date: Tue, 10 Apr 2007 17:55:44 +0900
Message-ID: <847893AE8EE17A48A3725E82C10DE9E58841F5@tkdwi001.dev.tradingscreen.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: distinct results
Thread-Index: Acd7TgZ1KVhMOA60TbOIwg9D7OhIgQ==
From: "Melanie Langlois" <Melanie.Langlois@tradingscreen.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C77B4E.0625C477
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I'm indexing documents, and some of them are provided in several =
languages. Thanks to this mailing list participants, I know that I have =
two choices to index these multiple instances of documents. Either, I =
create languages specific field, either I index the translations in =
different documents, adding the language field.

I choose the second solution, because first, the translated documents =
will not be the majority of documents that I need to index, second is =
that at search time, if I don't want to restrict the search to one =
language, with solution one, I have a query with potentially lot of =
fields to cover all languages. Also, the second option makes it faster =
to filter the results by language, if specified.=20

=20

However, with this solution, when the query is not filtered by a =
language and that the user search for fields common to any language, =
such as author for instance, I will have as much results as I have =
translations. I'm wondering if there is a way to have a "distinct =
filter". For instance, I have a common field "docId" for the =
translations of one document, and I don't want to have two documents =
with the same "docId" in my results.

Also, even if the user didn't put restrictions on language, I want to =
give back the results in its default language if it's available, but I =
don't want to do a filter query, because I don't want to restrict the =
search to only this language.

So basically, if the default language of the user is English, and that I =
have translations of the matching documents in English, it will be the =
only one send, otherwise, it should take the first translation available =
for this document.

Any hint of how I could do this?

=20

Thanks,

=20

M=E9lanie

=20

=20


------_=_NextPart_001_01C77B4E.0625C477--

From java-user-return-27499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 10:36:09 2007
Return-Path: <java-user-return-27499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25272 invoked from network); 10 Apr 2007 10:35:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 10:35:57 -0000
Received: (qmail 44933 invoked by uid 500); 10 Apr 2007 10:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44854 invoked by uid 500); 10 Apr 2007 10:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44806 invoked by uid 99); 10 Apr 2007 10:35:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 03:35:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mforce2@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 03:35:45 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1238655nzh
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 03:35:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=F6t15AO6holI3V8xhLlS1ZTk6fiLsiTs57ZaZAZ4bba2DZOIPsBBddy56ATl2UUBD9A0AiqaTVVILIbc6kWYQUj8Kh8/3TvSLEQE60F6De0dSZ/dcTqDDMtF3zPZ7ECk7Go5jUmEKqg3PtTUxy2gxl7M6b02CuRkWg2Nb88j7fU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IpWYnG9H6PuQFAlQM+3T98psiDXlkmNJN4ehHPugWxUop9+KYjBPH2Hlics6GmVX8ERds1XnWD+OyJgHJsY5Hx7aqqozf2tm+MxtsQZcFy2zridfZ/gLhG4iZ2jHzvDXL+eXSlZRbSOxCBHg7er+/eV6csFZY3mUlSAzFoHgW1o=
Received: by 10.114.169.2 with SMTP id r2mr2748205wae.1176201324203;
        Tue, 10 Apr 2007 03:35:24 -0700 (PDT)
Received: by 10.114.166.17 with HTTP; Tue, 10 Apr 2007 03:35:24 -0700 (PDT)
Message-ID: <d6fc22450704100335o59aba74axb706be16f87315f8@mail.gmail.com>
Date: Tue, 10 Apr 2007 13:35:24 +0300
From: "Marius Cirsta" <mforce2@gmail.com>
To: java-user@lucene.apache.org
Subject: Search text file and return position
In-Reply-To: <d6fc22450704100332i2effa98exc025d29f3f14638f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <d6fc22450704100332i2effa98exc025d29f3f14638f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello
 Please excuse my newbiness but I need Lucene to do a simple taks and
I haven't been able to find out how. I just need to search some text
files for a given string, say "brown fox" and get the filename , which
I found out how but I also need the position in that file ( so I can
replace that text ).
 Any help , hints would be appreciated and I'm not afraid to read the
doc , I just don't know where tot look.
 Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 13:04:14 2007
Return-Path: <java-user-return-27500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88475 invoked from network); 10 Apr 2007 13:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 13:04:12 -0000
Received: (qmail 81250 invoked by uid 500); 10 Apr 2007 13:04:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81204 invoked by uid 500); 10 Apr 2007 13:04:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81193 invoked by uid 99); 10 Apr 2007 13:04:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 06:04:10 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 06:04:03 -0700
Received: by ug-out-1314.google.com with SMTP id k40so65214ugc
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 06:03:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nmqzthfTZPFDWHqrAEU1g2XQu8hpWDYc0nnAyd3vPucMsuyHdNC9ExeozCCP5NlkMTudbCiUP5VarYWLIZ8bGbDB2DMJe9k/6xWjvqswbVBemufpt0qqRtMbAGIFyPf7Xh0xpIGs42gtuLkbchhBH3nyg55p9EjCqOVwAvq1Zsc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OW+RWPUBzuAotPuExuW6kG4TvOHzh/PSEX3M3YTR5Deyo7JpLhO56vhQj5LxMaHkpSkG48PZ57pwzKDf5Ds1g0am7cV8YlBN0T0Y1v+CpiaPfx22ftpEEwyG07YnAPWI0c4IBvROexMOEEPnP+TjybjfGaZFoLutkEuWGEjSwt4=
Received: by 10.82.163.13 with SMTP id l13mr4218444bue.1176210221528;
        Tue, 10 Apr 2007 06:03:41 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Tue, 10 Apr 2007 06:03:41 -0700 (PDT)
Message-ID: <359a92830704100603i5dca2b42qb6569d89271803d8@mail.gmail.com>
Date: Tue, 10 Apr 2007 09:03:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: distinct results
In-Reply-To: <847893AE8EE17A48A3725E82C10DE9E58841F5@tkdwi001.dev.tradingscreen.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16451_5922749.1176210221480"
References: <847893AE8EE17A48A3725E82C10DE9E58841F5@tkdwi001.dev.tradingscreen.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16451_5922749.1176210221480
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You might get some good pointers by searching the mail archive for
"faceted search", or perhaps just "faceted". I vaguely remember that
the whole notion of sub-dividing result sets into bags of documents
was discussed under that heading, quite an extensive discussion
as I remember, and certainly not a term that jumps to mind <G>.


The other thing you might be able to do is combine a HitCollector with
a FieldSortedHitQueue. The idea here is to use a HitCollector to
gather the hits, and put the results in a FieldSortedHitQueue whose
comparator is sensitive to your unique doc ID (Not Lucene's id, but
the one it looks like you've assigned to your docs) and the user's
preferred language.

One caution about the second approach, you may slow your search
down dramatically if you go out and fetch each document to get
its ID and language. But if the fields are indexed, you can use TermDocs/
TermEnum to get them quickly.

Best
Erick

On 4/10/07, Melanie Langlois <Melanie.Langlois@tradingscreen.com> wrote:
>
> Hi,
>
>
>
> I'm indexing documents, and some of them are provided in several
> languages. Thanks to this mailing list participants, I know that I have t=
wo
> choices to index these multiple instances of documents. Either, I create
> languages specific field, either I index the translations in different
> documents, adding the language field.
>
> I choose the second solution, because first, the translated documents wil=
l
> not be the majority of documents that I need to index, second is that at
> search time, if I don't want to restrict the search to one language, with
> solution one, I have a query with potentially lot of fields to cover all
> languages. Also, the second option makes it faster to filter the results =
by
> language, if specified.
>
>
>
> However, with this solution, when the query is not filtered by a language
> and that the user search for fields common to any language, such as autho=
r
> for instance, I will have as much results as I have translations. I'm
> wondering if there is a way to have a "distinct filter". For instance, I
> have a common field "docId" for the translations of one document, and I
> don't want to have two documents with the same "docId" in my results.
>
> Also, even if the user didn't put restrictions on language, I want to giv=
e
> back the results in its default language if it's available, but I don't w=
ant
> to do a filter query, because I don't want to restrict the search to only
> this language.
>
> So basically, if the default language of the user is English, and that I
> have translations of the matching documents in English, it will be the on=
ly
> one send, otherwise, it should take the first translation available for t=
his
> document.
>
> Any hint of how I could do this?
>
>
>
> Thanks,
>
>
>
> M=E9lanie
>
>
>
>
>
>

------=_Part_16451_5922749.1176210221480--

From java-user-return-27501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 13:16:59 2007
Return-Path: <java-user-return-27501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97528 invoked from network); 10 Apr 2007 13:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 13:16:57 -0000
Received: (qmail 993 invoked by uid 500); 10 Apr 2007 13:16:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 947 invoked by uid 500); 10 Apr 2007 13:16:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 933 invoked by uid 99); 10 Apr 2007 13:16:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 06:16:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 06:16:49 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e4.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l3ADGSMO028683
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 09:16:28 -0400
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3ADGSLu311426
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 09:16:28 -0400
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3ADGRS5005245
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 09:16:27 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3ADGRjx005227
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 09:16:27 -0400
In-Reply-To: <9914020.post@talk.nabble.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: IndexReader.deleteDocuement(); How to use it with our code??
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFC77C444A.21E5FE7B-ON852572B9.00485480-852572B9.0048EA99@us.ibm.com>
Date: Tue, 10 Apr 2007 09:16:26 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M4_03042007|March 04, 2007) at
 04/10/2007 09:16:28,
	Serialize complete at 04/10/2007 09:16:28
Content-Type: multipart/alternative; boundary="=_alternative 0048E99C852572B9_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0048E99C852572B9_=
Content-Type: text/plain; charset="US-ASCII"

>Hi,
>I din't get the exact message from this sentence what exactly you want to
>say??
>Can you please brief it with some more sentences???

I believe he meant that in one place (with no error) you have
"E:/eclipse/310307/objtest/crawl-result/indexes/part-00000";

but in the other you have
indexDir="E:/eclipse/310307/objtest/crawl-result/index/"

Notice the difference between "indexes" and "index".
The error message is explicitly saying that the index directory does not 
exist. 


Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 0048E99C852572B9_=--

From java-user-return-27502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 14:02:33 2007
Return-Path: <java-user-return-27502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56788 invoked from network); 10 Apr 2007 14:02:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 14:02:07 -0000
Received: (qmail 79303 invoked by uid 500); 10 Apr 2007 14:02:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79260 invoked by uid 500); 10 Apr 2007 14:02:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79032 invoked by uid 99); 10 Apr 2007 14:02:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 07:02:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sengly.heng@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 07:01:53 -0700
Received: by mu-out-0910.google.com with SMTP id i10so2653017mue
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 07:01:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=SiQTtukbwOpE+V+qhnPV8ta3+k3X1qayH2rjZZothnPd5x/hJx0hfh0qPj3o50dKJ/RXPjcGxlnh962pBpnZRbTSwrzz7vEywR19EP8OsONIKAw+mWiy5JgnGQUl0XWqorGcsENUSUtgHVB/OijOCpb5KG+dONWkKWUl7xiB+b8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TkfOMr37T9uEqh07LaHVeocS0Jyw2UyCsu+wjTAF6eUj1Aogps0NmPqCaeycLKiAduW29sarAtjBAghiUQzWwpXbKMpOn4IgI9+z0jLqc7Q3kQrILrTfka2LeJjmc8BIGUe0FqEeq2gRvewv24nYLKZEPZGWBTpwwza3mEZZnjk=
Received: by 10.82.107.15 with SMTP id f15mr4318532buc.1176213692210;
        Tue, 10 Apr 2007 07:01:32 -0700 (PDT)
Received: by 10.82.147.9 with HTTP; Tue, 10 Apr 2007 07:01:31 -0700 (PDT)
Message-ID: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com>
Date: Tue, 10 Apr 2007 23:01:31 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Get the total term frequency vector of a specific field from the hit results
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11121_6178849.1176213691964"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11121_6178849.1176213691964
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello all,

I would like to extract the term freq vector from the hit results as a total
vector not by document.

I have searched the mailing and I found many have talked about this issue
but I still could not find the right solution to this matter. Everyone just
suggested to look at getTermFreqVector and TermEnum.

I wonder if there someone has already done this before and what was your
solution? Would you please share?

Also how to get a list of top n keywords from that hit results. I have also
looked at HighFreqTerms (in the contribution repositories as well as the
one implemented by Luke) but still this class is rather for the usage when
we want to get the top n keywords from an index and not from the hit
results.

Thank you.

Best regards,

Sengly

------=_Part_11121_6178849.1176213691964--

From java-user-return-27503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 14:28:54 2007
Return-Path: <java-user-return-27503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79407 invoked from network); 10 Apr 2007 14:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 14:28:54 -0000
Received: (qmail 38355 invoked by uid 500); 10 Apr 2007 14:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38320 invoked by uid 500); 10 Apr 2007 14:28:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38305 invoked by uid 99); 10 Apr 2007 14:28:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 07:28:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [160.85.104.50] (HELO mx1.zhwin.ch) (160.85.104.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 07:28:45 -0700
Received: from orwell.zhwin.ch ([160.85.104.31])
	by mx1.zhwin.ch with esmtp (Exim 4.54)
	id 1HbHKZ-0006lM-Af
	for java-user@lucene.apache.org; Tue, 10 Apr 2007 16:28:23 +0200
Received: from [160.85.232.45] (Not Verified[160.85.232.45]) by orwell.zhwin.ch with NetIQ MailMarshal 6.0 Service Pack 1a (v6,0,3,33)
	id <B461b9ec70000>; Tue, 10 Apr 2007 16:27:19 +0200
Message-ID: <461B9F0B.3010408@zhwin.ch>
Date: Tue, 10 Apr 2007 16:28:27 +0200
From: thomas arni <art@zhwin.ch>
User-Agent: Thunderbird 1.5.0.10 (X11/20070306)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Get the total term frequency vector of a specific field from
 the hit results
References: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com>
In-Reply-To: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Sengly

First of all you have to make sure, that you create new Fields, which 
you add to a Document, with the appropriate constructor. You have to 
specify the usage of term vectors (Field.TermVector.YES):

new Field("text", "your text...", Field.Store.YES, 
Field.Index.TOKENIZED,Field.TermVector.YES));

Without the explicit storage of the term vectors it is not possible to 
get the term vectors during searching.

Once you build the index, you can use the suggested method 
getTermFreqVector().

To get the top n keywords from the hits object you can iterate over the 
first results.
Here is an example:

            for (int i = 0; i < 10; i++) {
                int docNumber = hits.id(i);
                TermFreqVector[] termsV = 
ir.getTermFreqVectors(docNumber); //return an array of term frequency 
vectors for the specified document.
                for (int xy = 0; xy < termsV.length; xy++) { //loop over 
all terms-vectors in the current document
                    String[] terms = termsV[xy].getTerms();
                    for (int termsInArray = 0;    termsInArray < 
terms.length; termsInArray++) {                                 
                            //toDo: count the occurrence of the terms
                    }

                }
            }

Hope this helps.
Thomas


Sengly Heng wrote:
> Hello all,
>
> I would like to extract the term freq vector from the hit results as a 
> total
> vector not by document.
>
> I have searched the mailing and I found many have talked about this issue
> but I still could not find the right solution to this matter. Everyone 
> just
> suggested to look at getTermFreqVector and TermEnum.
>
> I wonder if there someone has already done this before and what was your
> solution? Would you please share?
>
> Also how to get a list of top n keywords from that hit results. I have 
> also
> looked at HighFreqTerms (in the contribution repositories as well as the
> one implemented by Luke) but still this class is rather for the usage 
> when
> we want to get the top n keywords from an index and not from the hit
> results.
>
> Thank you.
>
> Best regards,
>
> Sengly
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 14:58:46 2007
Return-Path: <java-user-return-27504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9492 invoked from network); 10 Apr 2007 14:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 14:58:45 -0000
Received: (qmail 5317 invoked by uid 500); 10 Apr 2007 14:58:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5261 invoked by uid 500); 10 Apr 2007 14:58:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5153 invoked by uid 99); 10 Apr 2007 14:58:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 07:58:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sengly.heng@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 07:58:33 -0700
Received: by ug-out-1314.google.com with SMTP id k40so86725ugc
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 07:58:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Um3dcyFDi6JsWn7MszFIU7MfaCdevSvImvxoqccoaLs6IE81iiKK900tqLfOlmcig/kB9XeumQVtDF0gm/Z3Wf8qsEDnHV0HS30rNDwJicPPTsfta6I9p/TLLtp0oj5LJZJmc01LXqudg1/HPSdYx2bRK10y/P4uKB+fMPvtOUg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FnVSXuMcBKAqE5nwt6uN/SHeCzSjgZGCbqpwsA/Scc53zOo7ltXKlEW5Fq5Ucpu+XDoVTtQRISatu7kBNhQzCT/IRJxN8+wAh0Zmj/Bf/kWO562B2EqL+x0rkDVXfYBIxDDA35CmVYKRAj7Q6F8In+l5KcP0cB2Ob8Co1c41Hlw=
Received: by 10.82.120.14 with SMTP id s14mr9524074buc.1176217092356;
        Tue, 10 Apr 2007 07:58:12 -0700 (PDT)
Received: by 10.82.147.9 with HTTP; Tue, 10 Apr 2007 07:58:12 -0700 (PDT)
Message-ID: <17db983d0704100758rb629b90t3700554059c9ee23@mail.gmail.com>
Date: Tue, 10 Apr 2007 23:58:12 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get the total term frequency vector of a specific field from the hit results
In-Reply-To: <461B9F0B.3010408@zhwin.ch>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11989_5352199.1176217092296"
References: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com>
	 <461B9F0B.3010408@zhwin.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11989_5352199.1176217092296
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks so much Thomas for your prompt reply.


>
> First of all you have to make sure, that you create new Fields, which
> you add to a Document, with the appropriate constructor. You have to
> specify the usage of term vectors (Field.TermVector.YES):
>
> new Field("text", "your text...", Field.Store.YES,
> Field.Index.TOKENIZED,Field.TermVector.YES));


I did set up like this.

Without the explicit storage of the term vectors it is not possible to
> get the term vectors during searching.
>
> Once you build the index, you can use the suggested method
> getTermFreqVector().
>
> To get the top n keywords from the hits object you can iterate over the
> first results.
> Here is an example:
>
>            for (int i = 0; i < 10; i++) {
>                int docNumber = hits.id(i);
>                TermFreqVector[] termsV =
> ir.getTermFreqVectors(docNumber); //return an array of term frequency
> vectors for the specified document.
>                for (int xy = 0; xy < termsV.length; xy++) { //loop over
> all terms-vectors in the current document
>                    String[] terms = termsV[xy].getTerms();
>                    for (int termsInArray = 0;    termsInArray <
> terms.length; termsInArray++) {
>                            //toDo: count the occurrence of the terms
>                    }
>
>                }
>            }


I wanted to do this way as well but I am a bit worrying about computational
time as I have many documents and each document is a bit large.

I am looking for more solutions.

Please do contribute if you have any. Your help is hightly appreciated.

Best,

Sengly

Sengly Heng wrote:
> > Hello all,
> >
> > I would like to extract the term freq vector from the hit results as a
> > total
> > vector not by document.
> >
> > I have searched the mailing and I found many have talked about this
> issue
> > but I still could not find the right solution to this matter. Everyone
> > just
> > suggested to look at getTermFreqVector and TermEnum.
> >
> > I wonder if there someone has already done this before and what was your
> > solution? Would you please share?
> >
> > Also how to get a list of top n keywords from that hit results. I have
> > also
> > looked at HighFreqTerms (in the contribution repositories as well as the
> > one implemented by Luke) but still this class is rather for the usage
> > when
> > we want to get the top n keywords from an index and not from the hit
> > results.
> >
> > Thank you.
> >
> > Best regards,
> >
> > Sengly
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11989_5352199.1176217092296--

From java-user-return-27505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 15:21:39 2007
Return-Path: <java-user-return-27505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26975 invoked from network); 10 Apr 2007 15:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 15:21:37 -0000
Received: (qmail 53459 invoked by uid 500); 10 Apr 2007 15:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53429 invoked by uid 500); 10 Apr 2007 15:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53416 invoked by uid 99); 10 Apr 2007 15:21:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 08:21:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 08:21:28 -0700
Received: by ug-out-1314.google.com with SMTP id k40so91435ugc
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 08:21:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=uLMMHCa10B1DniZtGdZwudaj2sayWpmn8gInUwBnZXJ5phBSS0OYsfM5cR8D5j6KudYDX7IrdiyJz7cyTdKdg68PTxLu1LQscCx3QxcKEtICXSNXCUHEZK1ra4coFLvrIGLvRy/ebfh/wMH5zSoX2YBbVF3PIRSlZ00cziSEUM4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=SStKlyys4ZZcOL8tRYRpx/+dD3a8yfza66+jr6c8qndojTQbKvQ9bh9c/RHZ1OqeNt/KGYONgw9nnGFyHLiznNfLtPE4tJZ0GM6pwVdj0KFUxgiTq3eI6ewGHTEvVlziWx0Uq8QNIiK75cLT7cLNG2Mqe7pAwal3QIar5kN39/4=
Received: by 10.78.149.13 with SMTP id w13mr1100236hud.1176218466065;
        Tue, 10 Apr 2007 08:21:06 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id w5sm360604mue.2007.04.10.08.21.04;
        Tue, 10 Apr 2007 08:21:04 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <17db983d0704100758rb629b90t3700554059c9ee23@mail.gmail.com>
References: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com> <461B9F0B.3010408@zhwin.ch> <17db983d0704100758rb629b90t3700554059c9ee23@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CFF34C0C-4316-44B2-A249-2C18D997C920@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Get the total term frequency vector of a specific field from the hit results
Date: Tue, 10 Apr 2007 17:20:35 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


10 apr 2007 kl. 16.58 skrev Sengly Heng:

> I wanted to do this way as well but I am a bit worrying about  
> computational
> time as I have many documents and each document is a bit large.

> I am looking for more solutions.

We don't really know what your problem is. Explaining that rathern  
than the solution you have thought of might render a couple of  
alternate solutions. Perhaps something could be precalculated and  
stored in the documents. Perhaps feature selection (reduction) of the  
terms might do the trick for you. And so on.

Let me pull some questions out of nowhere that might help: How slow  
is it, and how fast did you expect it to be? How many documents does  
your queries normally yeild in? Can you limit the evaulation to the  
top n documents?

> Please do contribute if you have any. Your help is hightly  
> appreciated.

As Lucene primarily is an inverted index the document vector space  
model is not available in any other fashion than the term frequency  
vectors, or building them from scratch by enumerating the whole  
index. The latter of course beeing horrible slow in most cases.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 15:49:09 2007
Return-Path: <java-user-return-27506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56420 invoked from network); 10 Apr 2007 15:49:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 15:49:08 -0000
Received: (qmail 28848 invoked by uid 500); 10 Apr 2007 15:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28815 invoked by uid 500); 10 Apr 2007 15:49:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28790 invoked by uid 99); 10 Apr 2007 15:49:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 08:49:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sengly.heng@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 08:48:57 -0700
Received: by mu-out-0910.google.com with SMTP id i10so2693031mue
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 08:48:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cXNcsbPWMceFjE0nzoSlsFTMJFWOHXvEZFdq1k+MIG5/ePjyKhVeDLoD0oEso+JeiTRSb8nZuSfsZJXfqlZZN/9WZ6RiSDgd4rTL7NIWb67OsQifUl/QRSPWMKHwW1D1wRXDHUQ0rGNHXyPltINRwFvzigO5yTIjmlle3UF8Dxk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=D/wKFqlpbBntXvPjbKYMYKp3bv84XWqtiLDbeXLfMyRMiYEgfELNn7zy8HdrBatVEW3kVXy7S7zdvw1OrA3RNetCj60iWK76lgGKmbFoXKpDzM0faj8OpMlIteWDzBrUdCAKhtplK4mzfE9vdhf4B+Jc/Db2O6fcus6n3rlMOH4=
Received: by 10.82.102.4 with SMTP id z4mr9593074bub.1176220115197;
        Tue, 10 Apr 2007 08:48:35 -0700 (PDT)
Received: by 10.82.147.9 with HTTP; Tue, 10 Apr 2007 08:48:35 -0700 (PDT)
Message-ID: <17db983d0704100848v405800bcm2d57205f80030417@mail.gmail.com>
Date: Wed, 11 Apr 2007 00:48:35 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get the total term frequency vector of a specific field from the hit results
In-Reply-To: <CFF34C0C-4316-44B2-A249-2C18D997C920@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12813_1499247.1176220115149"
References: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com>
	 <461B9F0B.3010408@zhwin.ch>
	 <17db983d0704100758rb629b90t3700554059c9ee23@mail.gmail.com>
	 <CFF34C0C-4316-44B2-A249-2C18D997C920@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12813_1499247.1176220115149
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear Karl,

Thank you for taking your time in my problem.


>
> We don't really know what your problem is. Explaining that rathern
> than the solution you have thought of might render a couple of
> alternate solutions. Perhaps something could be precalculated and
> stored in the documents. Perhaps feature selection (reduction) of the
> terms might do the trick for you. And so on.


Here is the description of my problem :

I have a corpus of documents indexed with different fields. Approximately
each document indexed has an average of 30 fields. Each field has about 100
terms.

Normally, the hit will return less than 100 documents. For each of the 30
fields of the documents, I have to calculate the top 35 keywords from all
the documents as well as the top 30 popular keywords (the keywords that are
distributed in many documents - something like docFreq or IDF). And time is
critical in my case as it is an interactive system. Users cannot wait
long to get the results.

Please let me know if you are still have some more questions.

Thank in advance for your time and help.

Best regards,

Sengly

------=_Part_12813_1499247.1176220115149--

From java-user-return-27507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 15:58:55 2007
Return-Path: <java-user-return-27507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67279 invoked from network); 10 Apr 2007 15:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 15:58:54 -0000
Received: (qmail 57582 invoked by uid 500); 10 Apr 2007 15:58:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57551 invoked by uid 500); 10 Apr 2007 15:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57540 invoked by uid 99); 10 Apr 2007 15:58:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 08:58:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.62.196.100] (HELO maui.ebi.ac.uk) (193.62.196.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 08:58:46 -0700
Received: from tahiti.ebi.ac.uk (tahiti.ebi.ac.uk [193.62.196.39])
	by maui.ebi.ac.uk (8.11.7+Sun/8.11.7) with ESMTP id l3AFwJe16562
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 16:58:19 +0100 (BST)
Received: from [172.22.8.11] (chepalle.ebi.ac.uk [172.22.8.11])
	by tahiti.ebi.ac.uk (8.13.3+Sun/8.13.3) with ESMTP id l3AFwJkW006506
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 16:58:19 +0100 (BST)
Message-ID: <461BB41B.907@ebi.ac.uk>
Date: Tue, 10 Apr 2007 16:58:19 +0100
From: Chen Li <chenli@ebi.ac.uk>
User-Agent: Thunderbird 1.5 (X11/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: index the whole plain text file's content
References: <847893AE8EE17A48A3725E82C10DE9E58841F5@tkdwi001.dev.tradingscreen.com> <359a92830704100603i5dca2b42qb6569d89271803d8@mail.gmail.com>
In-Reply-To: <359a92830704100603i5dca2b42qb6569d89271803d8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I used demo code(IndexFiles.java) from lucene to index around 100 text 
files.

doc.add(new Field("contents", new FileReader(f)));

Which is interesting that, for some larger files (around 500kb), only 
the query term on the top of the file is searchable, once the term is at 
the end or after an unknown point of the file, I couldn't use 
SearchFiles.java, which also came with demo code, to find it.

I even tried to convert the file to String and index it as Store.YES. 
But no luck, still same resultset was returned.

Does anybody have same experience to share the solution with me? I would 
so appreciate.

Cheers,
Chen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 16:06:46 2007
Return-Path: <java-user-return-27508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73847 invoked from network); 10 Apr 2007 16:06:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 16:06:45 -0000
Received: (qmail 70447 invoked by uid 500); 10 Apr 2007 16:06:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70405 invoked by uid 500); 10 Apr 2007 16:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70394 invoked by uid 99); 10 Apr 2007 16:06:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 09:06:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 09:06:36 -0700
Received: from mailhyd1.hyd.deshaw.com (mailhyd1-hba1.hyd.deshaw.com [149.77.160.72])
 by master.hyd.deshaw.com (8.13.7/8.13.7/2.0.kim.desco.357) with ESMTP id l3AG6CdL009030
 for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 21:36:13 +0530 (IST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Copy index while updating the index
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 10 Apr 2007 21:36:12 +0530
Message-ID: <A1C9CFAF5B94574892B0B5AD7874E8BE010E49D7@mailhyd1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Copy index while updating the index
Thread-Index: Acd7iiimw6+0PMzGSKOcKCyT03/eKg==
From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have a scenario, where we need to set up our application, that uses
Lucene (and has on-demand indexing of documents) in Disaster-recovery
site.

The simple files/attachments used by our application can be simply
copied to the DR site just by syncing (manual copying).

Yes, we can also copy the index directory, but problem arises when we
have copy the index directory, while the index directory is being
updated, that means the Index is open.

Wont this corrupt the index directory.

Does Lucene 2.0 have support for copying opened index directory, without
corrupting it.

Please do let me know.


Thanks,
Divya.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 16:07:17 2007
Return-Path: <java-user-return-27509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74228 invoked from network); 10 Apr 2007 16:07:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 16:07:16 -0000
Received: (qmail 72443 invoked by uid 500); 10 Apr 2007 16:07:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72417 invoked by uid 500); 10 Apr 2007 16:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72403 invoked by uid 99); 10 Apr 2007 16:07:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 09:07:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 09:06:59 -0700
Received: by wr-out-0506.google.com with SMTP id 69so1408690wra
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 09:06:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=FHbac9zRjjZCSGs96Jjw21QMEPRFr5NWWHtxKGPbheycqhioJvPiuQ83gCY961yA0wxVfQjuWcln0S6FK3hXFAlIf2KYODV4aLF5kvubekz19yeyZlLUpbyJJoKr0x2VnKagQSK9Z1dGoUBNOyBipCMDgcZoHFT8Tw3sD3CyDrs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=dUqtR/7m+PKDMx1tRT9IofQyKdBPXHdlpGFrQlCvofMZnRxuYi4AwCD6ZNFeqRJi4lKwhTy8i4cv4jPZHdCq7Y6/MKlkRr+pm8ZdGXFwey/WXmNQ+supZSieHu58TlHuY9/rwMn8KH0v2tteh4S2TYLOSOFc77xUuEqPm5k+gUg=
Received: by 10.78.100.1 with SMTP id x1mr1111098hub.1176221198017;
        Tue, 10 Apr 2007 09:06:38 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id i5sm1148552mue.2007.04.10.09.06.35;
        Tue, 10 Apr 2007 09:06:35 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <17db983d0704100848v405800bcm2d57205f80030417@mail.gmail.com>
References: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com> <461B9F0B.3010408@zhwin.ch> <17db983d0704100758rb629b90t3700554059c9ee23@mail.gmail.com> <CFF34C0C-4316-44B2-A249-2C18D997C920@gmail.com> <17db983d0704100848v405800bcm2d57205f80030417@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B8CE66F2-ACA5-45C2-B44C-2B798D3677FC@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Get the total term frequency vector of a specific field from the hit results
Date: Tue, 10 Apr 2007 18:06:06 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


10 apr 2007 kl. 17.48 skrev Sengly Heng:

>> We don't really know what your problem is. Explaining that rathern
>> than the solution you have thought of might render a couple of
>> alternate solutions. Perhaps something could be precalculated and
>> stored in the documents. Perhaps feature selection (reduction) of the
>> terms might do the trick for you. And so on.
>
> I have a corpus of documents indexed with different fields.  
> Approximately
> each document indexed has an average of 30 fields. Each field has  
> about 100
> terms.
>
> Normally, the hit will return less than 100 documents. For each of  
> the 30
> fields of the documents, I have to calculate the top 35 keywords  
> from all
> the documents as well as the top 30 popular keywords (the keywords  
> that are
> distributed in many documents - something like docFreq or IDF).

Right, but /why/ do you need these values? Do you present them as  
they are, or do you use them for some secondary calculation? Then  
what is the result of this secondary calculation?

> Please let me know if you are still have some more questions.

I'll reask of of the questions I placed in my previous reply:

>> How slow is it, and how fast did you expect it to be?

>> Can you limit the evaulation to the top n documents?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 16:09:02 2007
Return-Path: <java-user-return-27510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75772 invoked from network); 10 Apr 2007 16:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 16:09:01 -0000
Received: (qmail 77810 invoked by uid 500); 10 Apr 2007 16:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77777 invoked by uid 500); 10 Apr 2007 16:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77766 invoked by uid 99); 10 Apr 2007 16:09:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 09:09:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 09:08:53 -0700
Received: by ug-out-1314.google.com with SMTP id k40so101049ugc
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 09:08:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=m88W4I3MEWb7VmMN5xwAyrl97hIoQ6dkLn1y8KOY5z1o8uvTOwRL3/MPxfQX7+CR4YTNxUlkvnpIBKKMNZ8K7OXYzFe72+KDbAjWbHr01OqH+UHrb5QBWXBqTuUUD7seOszCJH1u0Jkt/qIdgk1YAUj8i5EZlX4OOjHIm7Nkfvg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=nMMZf/SEX3HeiK2OAbjn9nAwp5aFB5ARCIt2NktHaP1Q0JXcLCScWzKBRsQk2G86tfutKFmSoqz6Yk0trAmEwnfc4N1EVtMBrjwZoMKmclQ82CG61KW4cW8TdGK+aDK2R7Kfc6PsFsB867tkam9zvQdwvLk8NPo8Wvbh9B376h8=
Received: by 10.82.113.6 with SMTP id l6mr9666111buc.1176221312210;
        Tue, 10 Apr 2007 09:08:32 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id i5sm1155845mue.2007.04.10.09.08.30;
        Tue, 10 Apr 2007 09:08:31 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <461BB41B.907@ebi.ac.uk>
References: <847893AE8EE17A48A3725E82C10DE9E58841F5@tkdwi001.dev.tradingscreen.com> <359a92830704100603i5dca2b42qb6569d89271803d8@mail.gmail.com> <461BB41B.907@ebi.ac.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <656F32AD-E8E4-4E5C-8E49-DB74C1E5651D@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: index the whole plain text file's content
Date: Tue, 10 Apr 2007 18:08:02 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


10 apr 2007 kl. 17.58 skrev Chen Li:

> Which is interesting that, for some larger files (around 500kb),  
> only the query term on the top of the file is searchable, once the  
> term is at the end or after an unknown point of the file, I  
> couldn't use SearchFiles.java, which also came with demo code, to  
> find it.
>
> I even tried to convert the file to String and index it as  
> Store.YES. But no luck, still same resultset was returned.
>
> Does anybody have same experience to share the solution with me? I  
> would so appreciate.

Could it perhaps be this:

<http://lucene.apache.org/java/docs/api/org/apache/lucene/index/ 
IndexWriter.html#setMaxFieldLength(int)>

?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 16:33:31 2007
Return-Path: <java-user-return-27511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88200 invoked from network); 10 Apr 2007 16:33:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 16:33:30 -0000
Received: (qmail 39228 invoked by uid 500); 10 Apr 2007 16:33:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39193 invoked by uid 500); 10 Apr 2007 16:33:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39182 invoked by uid 99); 10 Apr 2007 16:33:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 09:33:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 10 Apr 2007 09:33:22 -0700
Received: (qmail 25183 invoked by uid 60001); 10 Apr 2007 16:33:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=E52cTxsgPLapgQFsakzgXmGDAxiFQTxlZ58IcjZMWn2yPW7N8UP0a8v8PT5d2Btt9gYTBT+v5I+VKGAz8lH3pXoa43tGJ+wmB1qTGxBPqHQ8HR0rl+n7p08e882hPmwfb7hJKCocuT4EEuvQp++IcojdZHt0RpPQGTwvf/m6uPk=;
Received: from [72.231.8.153] by web50311.mail.re2.yahoo.com via HTTP; Tue, 10 Apr 2007 09:33:01 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Tue, 10 Apr 2007 09:33:01 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Copy index while updating the index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <335064.23080.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Here is one way to do it:
You can read/open an index at any point, even when it's being modified.  You can then open a new FSDirectory pointing to a new directory and add your original FSDirectory to that new FSDirectory.  That will copy the index.  Of course, any new documents you add to the original index after you've opened it will not be copied.  The same goes for any documents that were still buffered in memory when you opened the index, and were not yet flushed to disk.

See also: http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html

Otis



----- Original Message ----
From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
To: java-user@lucene.apache.org
Sent: Tuesday, April 10, 2007 12:06:12 PM
Subject: Copy index while updating the index

Hello,

I have a scenario, where we need to set up our application, that uses
Lucene (and has on-demand indexing of documents) in Disaster-recovery
site.

The simple files/attachments used by our application can be simply
copied to the DR site just by syncing (manual copying).

Yes, we can also copy the index directory, but problem arises when we
have copy the index directory, while the index directory is being
updated, that means the Index is open.

Wont this corrupt the index directory.

Does Lucene 2.0 have support for copying opened index directory, without
corrupting it.

Please do let me know.


Thanks,
Divya.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 16:56:49 2007
Return-Path: <java-user-return-27512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94519 invoked from network); 10 Apr 2007 16:56:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 16:56:48 -0000
Received: (qmail 81858 invoked by uid 500); 10 Apr 2007 16:56:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81823 invoked by uid 500); 10 Apr 2007 16:56:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81812 invoked by uid 99); 10 Apr 2007 16:56:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 09:56:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 09:56:39 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3AGuHBd075064
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 16:56:17 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3AGuGFQ4104362
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 18:56:16 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3AGuGfR025853
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 18:56:16 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3AGuGNR025850
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 18:56:16 +0200
In-Reply-To: <359a92830704100603i5dca2b42qb6569d89271803d8@mail.gmail.com>
Subject: Re: distinct results
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFA901C116.0C6BC0F8-ON882572B9.005B6DE9-882572B9.005CC938@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 10 Apr 2007 09:53:28 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 10/04/2007 19:56:15
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> > I'm indexing documents, and some of them are provided in several
> > languages.   ...   Either, I create
> > languages specific field, either I index the translations in different
> > documents, adding the language field.
> >
> > I choose the second solution, because first, the translated documents
will
> > not be the majority of documents that I need to index, second is that
at
> > search time, if I don't want to restrict the search to one language,
with
> > solution one, I have a query with potentially lot of fields to cover
all
> > languages. Also, the second option makes it faster to filter the
results by
> > language, if specified.
> >
> > However, with this solution, when the query is not filtered by a
language
> > and that the user search for fields common to any language, such as
author
> > for instance, I will have as much results as I have translations.

If space can be afforded, perhaps a simple setting is: one Lucene doc per
"page", with N+1 fields: one per each existing translation for the page,
and an additional ALL field == union of all the translations of the page.
Then, if only language L is requested, search in field L only; if there is
no language specification and the user locale is unknown, search in the ALL
field; and if there is no language specification but the user locale is
known to be L, search in both L and ALL, optionally boost the L part of the
query.

HTH, Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 19:21:59 2007
Return-Path: <java-user-return-27513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61213 invoked from network); 10 Apr 2007 19:21:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 19:21:58 -0000
Received: (qmail 50697 invoked by uid 500); 10 Apr 2007 19:21:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50660 invoked by uid 500); 10 Apr 2007 19:21:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50649 invoked by uid 99); 10 Apr 2007 19:21:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 12:21:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 12:21:50 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 8118B217074
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 15:21:47 -0400 (EDT)
Received: from web2.messagingengine.com ([10.202.2.211])
  by compute1.internal (MEProxy); Tue, 10 Apr 2007 15:21:30 -0400
Received: by web2.messagingengine.com (Postfix, from userid 99)
	id EAB5642B60; Tue, 10 Apr 2007 15:21:29 -0400 (EDT)
Message-Id: <1176232889.28232.1183911416@webmail.messagingengine.com>
X-Sasl-Enc: apfUgy59hLGDcfFWMSPhQRxMTbwuK6TrIwAjwOII9+Qa 1176232889
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <335064.23080.qm@web50311.mail.re2.yahoo.com>
Subject: Re: Copy index while updating the index
In-Reply-To: <335064.23080.qm@web50311.mail.re2.yahoo.com>
Date: Tue, 10 Apr 2007 15:21:29 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


You do need to be careful with this because if a writer commits while
you are copying you can easily get a copy that's unusable (is missing
files).

When you instantiate an IndexReader, it actually holds open most files
that it uses which protects them from being deleted.  So in theory if
you could open a reader successfully, ask it which files it is using,
then copy those files.  Hmmm actually some files it does not hold open
(eg the *.del files, and the segments_N file) which means this
approach won't work.  Also on Unix the filenames disappear even though
the underlying files are still held open.

One way that would work is to use the new custom deletion policy
feature.

Unfortunately, this is not yet released (only available on trunk).
The idea is fairly simple.  Make your own deletion policy which at
normal times (no backup running) is the default policy (delete all but
the last commit point).  Then, when you want to start a backup, this
policy would mark the one commit point its now on as not deletable.
This ensures the writer will not remove any of its files, even as new
commits are being done.  Then, your backup copies these files off, and
it's OK if this takes a while (eg if it runs with low priority or
something) since writer won't delete the files.  Finally when backup
is done, the deletion policy lets that commit point be deleted again
and writer will remove its files.

This should allow you to do "live" (not pause indexing) backups of
a Lucene index, cross platform.

Mike

"Otis Gospodnetic" <otis_gospodnetic@yahoo.com> wrote:
> Here is one way to do it:
> You can read/open an index at any point, even when it's being modified. 
> You can then open a new FSDirectory pointing to a new directory and add
> your original FSDirectory to that new FSDirectory.  That will copy the
> index.  Of course, any new documents you add to the original index after
> you've opened it will not be copied.  The same goes for any documents
> that were still buffered in memory when you opened the index, and were
> not yet flushed to disk.
> 
> See also:
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html
> 
> Otis
> 
> 
> 
> ----- Original Message ----
> From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, April 10, 2007 12:06:12 PM
> Subject: Copy index while updating the index
> 
> Hello,
> 
> I have a scenario, where we need to set up our application, that uses
> Lucene (and has on-demand indexing of documents) in Disaster-recovery
> site.
> 
> The simple files/attachments used by our application can be simply
> copied to the DR site just by syncing (manual copying).
> 
> Yes, we can also copy the index directory, but problem arises when we
> have copy the index directory, while the index directory is being
> updated, that means the Index is open.
> 
> Wont this corrupt the index directory.
> 
> Does Lucene 2.0 have support for copying opened index directory, without
> corrupting it.
> 
> Please do let me know.
> 
> 
> Thanks,
> Divya.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 19:28:53 2007
Return-Path: <java-user-return-27514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64752 invoked from network); 10 Apr 2007 19:28:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 19:28:53 -0000
Received: (qmail 72562 invoked by uid 500); 10 Apr 2007 19:28:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72248 invoked by uid 500); 10 Apr 2007 19:28:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72237 invoked by uid 99); 10 Apr 2007 19:28:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 12:28:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saihariharan@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 12:28:46 -0700
Received: by an-out-0708.google.com with SMTP id c3so2031248ana
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 12:28:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NxcCqnjIRqF32gVJCniyX7OOzFtApmKN/DuFkWo9CAEIFob0R3wmM7SzXXLBcyuTxVjmFLm9fR3E4qQ4hLCYCg2yrxLYvb+E7/qPjIgw8XicOcugSoWIBjXJt8QdvDKTB+Lj4nasEnkAroQklKC96wfJO6edevz2qFWBAbDXOM8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oNTFYF0L7bpxohQeYtstLFIkJgmEGwEAXNXzWuK4PmdZB+WBU+FQ5XgIYUTzPxfen2j+gYlcns3JHZYoDrQFwo/f4fYkcRjfc7qtW7tjPZwF/2xg4HRifB9S8L4dmkBfVqs48P1s0nR3VcGQnIV786NVEo8VjNIUGdUXI26k+mU=
Received: by 10.100.124.5 with SMTP id w5mr5205150anc.1176233304780;
        Tue, 10 Apr 2007 12:28:24 -0700 (PDT)
Received: by 10.100.38.11 with HTTP; Tue, 10 Apr 2007 12:28:24 -0700 (PDT)
Message-ID: <98b0a44c0704101228j3e6b7d13xd6a79aa9588894e6@mail.gmail.com>
Date: Wed, 11 Apr 2007 00:58:24 +0530
From: "sai hariharan" <saihariharan@gmail.com>
To: java-user@lucene.apache.org
Subject: StopAnalyzer- Stop List Words
In-Reply-To: <98b0a44c0704101220m3afe70eetcc735cc17a173790@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28347_23324260.1176233304543"
References: <98b0a44c0704101220m3afe70eetcc735cc17a173790@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28347_23324260.1176233304543
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGksCgpXaGVyZSBjYW4gaSBmaW5kIHRoZSBsaXN0IG9mIHdvcmRzIHRoYXQgaXMgdXNlZCBmb3Ig
cmVtb3ZhbCBvZgpjb21tb24gRW5nbGlzaCB3b3JkcyBieSBTdG9wQW5sYXl6ZXIgPwpDYW4gaSBh
ZGQgYWRkaXRpb25hbCB3b3JkcyB0byB0aGUgc3RvcCBsaXN0ID8KClJlZ2FyZHMsCi0tIArgrprg
rr7grq/gr40gSGFyaQo=
------=_Part_28347_23324260.1176233304543--

From java-user-return-27515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 19:53:14 2007
Return-Path: <java-user-return-27515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76423 invoked from network); 10 Apr 2007 19:53:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 19:53:13 -0000
Received: (qmail 24057 invoked by uid 500); 10 Apr 2007 19:53:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23559 invoked by uid 500); 10 Apr 2007 19:53:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23548 invoked by uid 99); 10 Apr 2007 19:53:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 12:53:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 12:53:06 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Tue, 10 Apr 2007 15:56:24 -0500
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <98b0a44c0704101228j3e6b7d13xd6a79aa9588894e6@mail.gmail.com>
References: <98b0a44c0704101220m3afe70eetcc735cc17a173790@mail.gmail.com> <98b0a44c0704101228j3e6b7d13xd6a79aa9588894e6@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1-359069407
Message-Id: <64C39DF3-D6EA-4031-928E-A79DDF596CF4@genome.chop.edu>
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Re: StopAnalyzer- Stop List Words
Date: Tue, 10 Apr 2007 15:52:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1-359069407
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=UTF-8;
	delsp=yes;
	format=flowed

You can find the list in StopAnalyzer.java:

public static final String[] ENGLISH_STOP_WORDS =3D {
     "a", "an", "and", "are", "as", "at", "be", "but", "by",
     "for", "if", "in", "into", "is", "it",
     "no", "not", "of", "on", "or", "such",
     "that", "the", "their", "then", "there", "these",
     "they", "this", "to", "was", "will", "with"
   };

To include additional words, you can use one of the 4 constructors =20
that allow you to set the stop word list:

StopAnalyzer(File stopwordsFile)
           Builds an analyzer with the stop words from the given file.
StopAnalyzer(Reader stopwords)
           Builds an analyzer with the stop words from the given reader.
StopAnalyzer(Set stopWords)
           Builds an analyzer with the stop words from the given set.
StopAnalyzer(String[] stopWords)
           Builds an analyzer which removes words in the provided array.


Good luck,
Ryan

On Apr 10, 2007, at 3:28 PM, sai hariharan wrote:

> Hi,
>
> Where can i find the list of words that is used for removal of
> common English words by StopAnlayzer ?
> Can i add additional words to the stop list ?
>
> Regards,
> --=20
> =E0=AE=9A=E0=AE=BE=E0=AE=AF=E0=AF=8D Hari


--Apple-Mail-1-359069407--

From java-user-return-27516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 19:54:13 2007
Return-Path: <java-user-return-27516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77378 invoked from network); 10 Apr 2007 19:54:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 19:54:09 -0000
Received: (qmail 26496 invoked by uid 500); 10 Apr 2007 19:54:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26464 invoked by uid 500); 10 Apr 2007 19:54:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26443 invoked by uid 99); 10 Apr 2007 19:54:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 12:54:08 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 12:54:00 -0700
Received: by wr-out-0506.google.com with SMTP id 69so1485802wra
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 12:53:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=tdwSk/MZHdo4T0qhL2HGUUeZt/CQd1iTsrEXvi0XNMVpQwpo9tM9CQL4E5J6qhxXfBJ0YnWCGYU/t0T8Xk3BGM8/leK239UTZ8sKofuzDZuvWyAg3FIJvZi9zXs9VlhJLth5qqs/OmE8LnudP2GkfBMD5BD8t0HARKJbybf2VhI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=IrlNlaChIp3yAIf0y3Ob4CmN8WoA9ggIqK+5LSPQ/ZWeSqaZVeOCkS+W3KJ5YLKAdUoIVQ64xnuHK8hBQTdCnVHX/AoLaKuuuPsgzTgdORwFv3b1ME/9JBusH/1sC9nxy7/U0br5WtM1f3fB4wVTLGcELNMGyvgg8uHND9I0l20=
Received: by 10.114.57.1 with SMTP id f1mr2746899waa.1176234819738;
        Tue, 10 Apr 2007 12:53:39 -0700 (PDT)
Received: by 10.114.108.2 with HTTP; Tue, 10 Apr 2007 12:53:39 -0700 (PDT)
Message-ID: <ae6f38f60704101253l54fd2a67ncc8de415d1672b4d@mail.gmail.com>
Date: Tue, 10 Apr 2007 15:53:39 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31628_7810731.1176234819665"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31628_7810731.1176234819665
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Steven Parkes points out:
> Lucene doesn't use a pure Boolean algebra, so things don't always do
> what one might expect and things like De Morgan's law don't hold.

You're exactly on to what I was pondering about.  With boolean logic, I
understand the operators inside and out, so something like De Morgan's law
makes intuitive sense to me.

I also understand, as Chris Hostetter points out, that things must be
thought of as MUST, MUST_NOT, and SHOULD.

My simple question involves neither boolean expressions, nor does it involve
comprehending Luence's operators.  I understand both.



The problem is the grouping operator ( ) and how it works with distributed
operators, I don't quite get what the specific transformation rules are.

I want to assume that:
+(A B) = +A +B
-(A B) = -A -B

...however, in running Luke, I see that +A +B generates a different query
than +(A B).  The first says must have both, but the second is must have at
least one.

And, while -A and -B means neither must not be there, can someone explain
what -(A B) means?

Furthermore syntax like +(-A +B) and -(-A +B) appear to be legal to Luke,
though I have no clue what this even means in simple English.

Thanks all so far!
-wls

------=_Part_31628_7810731.1176234819665--

From java-user-return-27517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 20:16:46 2007
Return-Path: <java-user-return-27517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88842 invoked from network); 10 Apr 2007 20:16:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 20:16:45 -0000
Received: (qmail 78544 invoked by uid 500); 10 Apr 2007 20:16:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78503 invoked by uid 500); 10 Apr 2007 20:16:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78477 invoked by uid 99); 10 Apr 2007 20:16:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 13:16:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 13:16:38 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HbMlF-0001cY-MU
	for java-user@lucene.apache.org; Tue, 10 Apr 2007 13:16:17 -0700
Message-ID: <9927597.post@talk.nabble.com>
Date: Tue, 10 Apr 2007 13:16:17 -0700 (PDT)
From: Joe Tang <joe.tang@workmetro.com>
To: java-user@lucene.apache.org
Subject: How to sort on a tokenised field?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: joe.tang@workmetro.com
X-Virus-Checked: Checked by ClamAV on apache.org


My task is to index lots of documents with different fields. Some of the
fields are tokenized and are going to be sorted later on when a list of
result set is need to particular field. Unfortunately, Lucene complains
about sort on a tokenized field.

So is there any way to get around of it?

Thanks in advance!!
-- 
View this message in context: http://www.nabble.com/How-to-sort-on-a-tokenised-field--tf3555450.html#a9927597
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 20:26:32 2007
Return-Path: <java-user-return-27518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94761 invoked from network); 10 Apr 2007 20:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 20:26:31 -0000
Received: (qmail 95041 invoked by uid 500); 10 Apr 2007 20:26:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95007 invoked by uid 500); 10 Apr 2007 20:26:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94996 invoked by uid 99); 10 Apr 2007 20:26:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 13:26:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 13:26:24 -0700
Received: by ug-out-1314.google.com with SMTP id k40so149263ugc
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 13:26:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l9ajNBp9bQ2aMwZSxJe8N9bL6gdy27LRMMI4FzX5pkPwrXl8XYILb16woZGkOx0W+7ywMiKcarINk5fAupF/nJ7+njLhU+nUYwAzRknoc4qrMdsVa/E8WE1LoRgN8Wjx4AmJh/AJibxCjRlljvSg9c4JFiNms5f1b+vThiH308A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QEzV0KHEmIqWiTJIl9/DBnBAlkKiJU4AHYYjJOEoMNtSZ2G2lJlfg0QXCDkfcRDO4CQXM9/NRBssmmJ3KmF/LTBzwYz3W6thiuydwambHK6WrRlmKy9TzLdBWnSCi4Kib85IIUSm744BqWqSMD0fuLBa7jW176zm62MC/SehktM=
Received: by 10.82.138.6 with SMTP id l6mr10031994bud.1176236762954;
        Tue, 10 Apr 2007 13:26:02 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Tue, 10 Apr 2007 13:26:02 -0700 (PDT)
Message-ID: <359a92830704101326x1ab95705j5bd983021bbcef85@mail.gmail.com>
Date: Tue, 10 Apr 2007 16:26:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to sort on a tokenised field?
In-Reply-To: <9927597.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23934_29869586.1176236762911"
References: <9927597.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23934_29869586.1176236762911
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Lucene sorting is intended to sort documents relative to each other.
So it makes no sense to allow sorts on tokenized fields in the
Lucene context. Imagine the separate tokens in a field for doc1 of
a, c and e, and for doc2 b, d and f. Where should doc1 go in
relation to doc2 when sorting on that field? There's no good
*general* answer that I've been able to see.

So I suspect you really want to do something that's not
document sorting, and if you'd make a clearer statement of
what you're trying to accomplish I'm sure you'd get better
answers than mine.

Best
Erick

On 4/10/07, Joe Tang <joe.tang@workmetro.com> wrote:
>
>
> My task is to index lots of documents with different fields. Some of the
> fields are tokenized and are going to be sorted later on when a list of
> result set is need to particular field. Unfortunately, Lucene complains
> about sort on a tokenized field.
>
> So is there any way to get around of it?
>
> Thanks in advance!!
> --
> View this message in context:
> http://www.nabble.com/How-to-sort-on-a-tokenised-field--tf3555450.html#a9927597
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23934_29869586.1176236762911--

From java-user-return-27519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 20:42:18 2007
Return-Path: <java-user-return-27519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1223 invoked from network); 10 Apr 2007 20:42:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 20:42:17 -0000
Received: (qmail 27719 invoked by uid 500); 10 Apr 2007 20:42:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27680 invoked by uid 500); 10 Apr 2007 20:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27669 invoked by uid 99); 10 Apr 2007 20:42:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 13:42:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 13:42:10 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HbN9y-0004Km-BC
	for java-user@lucene.apache.org; Tue, 10 Apr 2007 13:41:50 -0700
Message-ID: <9928177.post@talk.nabble.com>
Date: Tue, 10 Apr 2007 13:41:50 -0700 (PDT)
From: Joe Tang <joe.tang@workmetro.com>
To: java-user@lucene.apache.org
Subject: Re: How to sort on a tokenised field?
In-Reply-To: <359a92830704101326x1ab95705j5bd983021bbcef85@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: joe.tang@workmetro.com
References: <9927597.post@talk.nabble.com> <359a92830704101326x1ab95705j5bd983021bbcef85@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I understand what you are trying to say about the problem of sorting a
tokenized field. 

The reason why i try to sort a tokenized field is that I need to have a 
field to be both sortable and searchable in different time. Searchable field
requires tokenized field while sortable field requires un-tokenized field. 

The worse solution is to have another duplicated field which is un-tokenized
but it is not scalable when we have lots of fields need to be searchable.

And that's why I was asking for a good solution other than a quick fix.



Erick Erickson wrote:
> 
> Lucene sorting is intended to sort documents relative to each other.
> So it makes no sense to allow sorts on tokenized fields in the
> Lucene context. Imagine the separate tokens in a field for doc1 of
> a, c and e, and for doc2 b, d and f. Where should doc1 go in
> relation to doc2 when sorting on that field? There's no good
> *general* answer that I've been able to see.
> 
> So I suspect you really want to do something that's not
> document sorting, and if you'd make a clearer statement of
> what you're trying to accomplish I'm sure you'd get better
> answers than mine.
> 
> Best
> Erick
> 
> On 4/10/07, Joe Tang <joe.tang@workmetro.com> wrote:
>>
>>
>> My task is to index lots of documents with different fields. Some of the
>> fields are tokenized and are going to be sorted later on when a list of
>> result set is need to particular field. Unfortunately, Lucene complains
>> about sort on a tokenized field.
>>
>> So is there any way to get around of it?
>>
>> Thanks in advance!!
>> --
>> View this message in context:
>> http://www.nabble.com/How-to-sort-on-a-tokenised-field--tf3555450.html#a9927597
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-sort-on-a-tokenised-field--tf3555450.html#a9928177
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 21:32:13 2007
Return-Path: <java-user-return-27520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28631 invoked from network); 10 Apr 2007 21:32:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 21:32:12 -0000
Received: (qmail 69137 invoked by uid 500); 10 Apr 2007 21:32:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69109 invoked by uid 500); 10 Apr 2007 21:32:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69098 invoked by uid 99); 10 Apr 2007 21:32:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 14:32:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 14:32:04 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2A40F5B766; Tue, 10 Apr 2007 14:31:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F06E67F403
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 14:31:42 -0700 (PDT)
Date: Tue, 10 Apr 2007 14:31:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to sort on a tokenised field?
In-Reply-To: <9928177.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0704101428010.31027@hal.rescomp.berkeley.edu>
References: <9927597.post@talk.nabble.com> <359a92830704101326x1ab95705j5bd983021bbcef85@mail.gmail.com>
 <9928177.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The worse solution is to have another duplicated field which is un-tokenized
: but it is not scalable when we have lots of fields need to be searchable.

That is really the only solution that exists in in Lucene at the moment.

Typically the number of fields people want to sort on isn't that big
(even if "lots" is 10 it's still feasible to duplicate those 10 fields)
and this appraoch works very well -- people tend to run into more problems
relating to the size of the FieldCache neeeded for each sort field because
they have too many documents long before they have to worry about having
too many sort fields.

There is a fairly low impact patch for people who want to sort on
the "stored" string value of a field if you'd like to try it, but you
should search the archives for discussion about it's tradeoffs.

https://issues.apache.org/jira/browse/LUCENE-769




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 21:41:23 2007
Return-Path: <java-user-return-27521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32431 invoked from network); 10 Apr 2007 21:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 21:41:22 -0000
Received: (qmail 87830 invoked by uid 500); 10 Apr 2007 21:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87798 invoked by uid 500); 10 Apr 2007 21:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87783 invoked by uid 99); 10 Apr 2007 21:41:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 14:41:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 14:41:14 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 92B855B766; Tue, 10 Apr 2007 14:40:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8768C7F403
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 14:40:54 -0700 (PDT)
Date: Tue, 10 Apr 2007 14:40:54 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior
In-Reply-To: <ae6f38f60704101253l54fd2a67ncc8de415d1672b4d@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704101433140.31027@hal.rescomp.berkeley.edu>
References: <ae6f38f60704101253l54fd2a67ncc8de415d1672b4d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The problem is the grouping operator ( ) and how it works with distributed
: operators, I don't quite get what the specific transformation rules are.

you shouldnt' think if parens as a groiuping operator, you should think of
it as a way to force the explicit creation of a BooleanQuery object.

This is a BooleanQuery containing 6 SHOULD clauses...

	A B C D E F

This is a BooleanQuery contain 2 SHOULD clauses, each containing 3 SHOULD
clauses...

        (A B C) (D E F)

...those two queries will match on the same set of documents, but the
scores will be very different because of the way the coord factor comes
into play for *each* BooleanQuery in the hierarchy.

: I want to assume that:
: +(A B) = +A +B
: -(A B) = -A -B

...in the left side of your "equations" the + and - are meaningless unless
they are part of larger queries ... a + only means that wha comes after it
is a MUST clause of the enclosing boolean query; no enclosing query means
the + is meaningless

This is a BooleanQuery containing two clauses, X which is a SHOULD clause,
and another BooleanQuery which is a MUST clause, that second BoolenaQuery
contains two SHOULD clauses (A and B)...

	X +(A B)

This is a BooleanQuery containing two clauses, X which is a SHOULD clause,
and another BooleanQuery which is a SHOULD clause, that second
BoolenaQuery contains two MUST clauses (A and B)...

        X (+A +B)

...wo while the first query requires A or B match, the second query
requires neither: X is sufficient, or both A and B together are
sufficient.


does this make more sense?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 10 23:58:20 2007
Return-Path: <java-user-return-27522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89190 invoked from network); 10 Apr 2007 23:58:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Apr 2007 23:58:18 -0000
Received: (qmail 67009 invoked by uid 500); 10 Apr 2007 23:58:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66700 invoked by uid 500); 10 Apr 2007 23:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66685 invoked by uid 99); 10 Apr 2007 23:58:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 16:58:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 64.233.162.224 as permitted sender)
Received: from [64.233.162.224] (HELO nz-out-0506.google.com) (64.233.162.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 16:58:10 -0700
Received: by nz-out-0506.google.com with SMTP id i1so2324nzh
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 16:57:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Y7Uz9BqA7un33NLsIztQWFwsL5hEvTq3LRDJHH8wGf1LIwtRPvmIq9vARxK/fK+CFndWrfPStXFUz5qGDos5DkCiaaXFTLS0IkZuZOXur9TEiONdfOVxCzJSrTmq1kjCUOL1YB9vIhKQJP72QRCeENl/tiayihk7RnpgP2A5ToU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FB2jXfuwo2gtA42GlfIwMhBQbk8EqAjSoBBy8UcGfXo7Z9pnTI9v9f5+vOx4uB14VPdgPyJeUr/InQcEEscBATMcwoiyMbWNe8eqKtlmrFnhAIUzzXaS0mGhZ3rhatVzIyARFa3itA7xOQZtpFo+Lk5Z72Od/64tizpRpB8BqcM=
Received: by 10.114.211.1 with SMTP id j1mr3572wag.1176249468856;
        Tue, 10 Apr 2007 16:57:48 -0700 (PDT)
Received: by 10.114.198.18 with HTTP; Tue, 10 Apr 2007 16:57:48 -0700 (PDT)
Message-ID: <3d2ce8cb0704101657k5945c522l2e8bf33e28be3539@mail.gmail.com>
Date: Tue, 10 Apr 2007 16:57:48 -0700
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior
In-Reply-To: <ae6f38f60704101253l54fd2a67ncc8de415d1672b4d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ae6f38f60704101253l54fd2a67ncc8de415d1672b4d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/10/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:

> Furthermore syntax like +(-A +B) and -(-A +B) appear to be legal to Luke,
> though I have no clue what this even means in simple English.

Let me try:

+(-A +B) -> must match (-A +B) -> must contain B and must not contain A
-(-A +B) -> must not match (-A +B) -> must not (match B and not contain A)

As chris mentioned, they don't mean much outside the rest of the
query... tack on "X Y " to both, and you get:

SHOULD contain X, SHOULD contain Y, MUST contain B, MUST NOT contain A

SHOULD contain X, SHOULD contain Y (effectively, MUST contain X or Y),
MUST NOT (contain B without containing A)

HTH,
-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 00:04:03 2007
Return-Path: <java-user-return-27523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90382 invoked from network); 11 Apr 2007 00:04:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 00:04:01 -0000
Received: (qmail 74055 invoked by uid 500); 11 Apr 2007 00:04:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74018 invoked by uid 500); 11 Apr 2007 00:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74006 invoked by uid 99); 11 Apr 2007 00:04:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 17:04:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 17:03:53 -0700
Received: by ug-out-1314.google.com with SMTP id k40so4486ugc
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 17:03:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nQaDwM6rfqUnV6Pg/PtpTVyvD5Y0V6dwfki3izUSonmsa+lw0POSZzThILlSovcpl0++KXH+KbIBP41MsV7Q4xxPBkagptQ2r2U221M1ozAsvV+mtxEf49t6Xw63UmEf1rpQlfopn0qxT3z6K0B4RaIU0Yo3y8MnZHwEMpzRAsM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nFAfs3IdS7dCwN5tEToTEt8nQQJJ2l5SG69b7Wgbkj8QQk4Ej1ZZhf855YM0byJMe6TchqHBXZHSfuEV7aSE/HkbuC8ds/Vo4PNTo0Co6ruV4KCcxZIka64McZc6BPEthyAEjuJCLvWjVJ0rgOFyfyerJ5dIhq6TSANL8QaifS0=
Received: by 10.82.102.4 with SMTP id z4mr6960bub.1176249812262;
        Tue, 10 Apr 2007 17:03:32 -0700 (PDT)
Received: by 10.82.119.10 with HTTP; Tue, 10 Apr 2007 17:03:32 -0700 (PDT)
Message-ID: <f81fa4180704101703x3c48d42ei529da26c6c8132ac@mail.gmail.com>
Date: Tue, 10 Apr 2007 20:03:32 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Ideas for a relevance score that could be considered stable across multiple searches with the same query structure?
In-Reply-To: <f81fa4180704100504q142073c2n5ad0e88f0fff7579@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f81fa4180704100504q142073c2n5ad0e88f0fff7579@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I asked this question on the Solr user list because that is the
current lucene server implementation I'm using, but I didn't get any
feedback there and the problem isn't really Solr specific so I thought
I'd cross post here just in case any non-Solr users might have some
ideas.

Thank you very much for your time,
Daniel

---------- Forwarded message ----------
From: Daniel Einspanjer <deinspanjer@gmail.com>
Date: Apr 10, 2007 8:04 AM
Subject: Ideas for a relevance score that could be considered stable
across multiple searches with the same query structure?
To: solr-user@lucene.apache.org


I did a bit of research on the list for prior discussions of
normalized scores and such.  Please forgive me if I overlooked
something relevant, but I didn't see anything exactly what I'm looking
for.

I am building a replacement for our current text matching engine that
takes a list of documents from feed A and finds the best match for
each of those in the list of documents from feed B.  For purposes of
this example, feed A and B might have the fields:
     title; director; year

The people reviewing this matching process need some way of
determining why a particular match was made other than the overall
score.  Was it because the title was a perfect match or was it because
the title wasn't that close, but the director and year were dead on?

The current idea I have for a strategy to provide this information
would be to run my query four times (n + 1 where n is each scoring
section), once to find the overall best match (a regular query) then
each additional query grouping, requiring, and boosting a different
section of the query. I would then store the rank of the "best" item
returned by the overall query.  That rank can be used to indicate the
relevance of that item based on the defined criteria.

So, following the indexes mentioned above, my queries would be:

The natural "overall" query:
(title:"feed A item one title"^10 (+title:feed~ +title:A~ +title:item~
+title:one~ +title:title~)) director:"Director, Feed A." (year:1974^10
year:[1972 TO 1976])

The query for title relevance:
+((title:"feed A item one title"^10 (+title:feed~ +title:A~
+title:item~ +title:one~ +title:title~)))^100 director:"Director, Feed
A." (year:1974^10 year:[1972 TO 1976])

The query for director relevance:
+(director:"Director, Feed A.")^100 (title:"feed A item one title"^10
(+title:feed~ +title:A~ +title:item~ +title:one~ +title:title~))
(year:1974^10 year:[1972 TO 1976])

The query for year relevance:
+((year:1974^10 year:[1972 TO 1976]))^100 (title:"feed A item one
title"^10 (+title:feed~ +title:A~ +title:item~ +title:one~
+title:title~)) director:"Director, Feed A."

If the #1 item returned by the overall query was 1/10 for title, 3/10
for director, and 5/10 for year and those three scoring sections had
equal weights of 1.0 to .10 then I would be able to display the
following scores:
title: 1.0
director: .8
year: .6
overall: 2.4


I looked at the javadocs related to the FunctionQuery class because it
looked interesting, but the actual docs were a bit light and I wasn't
able to determine if it might help me out with this need.

Does this sound unreasonable to anyone? Is there a clearly better way
I might have overlooked?

Thank you very much for your ideas and comments,

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 00:39:04 2007
Return-Path: <java-user-return-27524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1158 invoked from network); 11 Apr 2007 00:39:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 00:39:03 -0000
Received: (qmail 17460 invoked by uid 500); 11 Apr 2007 00:39:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17427 invoked by uid 500); 11 Apr 2007 00:39:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17412 invoked by uid 99); 11 Apr 2007 00:39:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 17:39:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 17:38:55 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 826734ED907
	for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 10:38:05 +1000 (EST)
Message-ID: <461C2E40.9000704@nuix.com>
Date: Wed, 11 Apr 2007 10:39:28 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070409)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to update index dynamically
References: <586809.28892.qm@web50301.mail.re2.yahoo.com>
In-Reply-To: <586809.28892.qm@web50301.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> Anson,
> 
> That's not your real code, is it?  Those $ characters in it look incorrect.

Are you sure?  $ is legal at the front of a variable in Java. :-)

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 01:39:06 2007
Return-Path: <java-user-return-27525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23549 invoked from network); 11 Apr 2007 01:39:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 01:39:05 -0000
Received: (qmail 75915 invoked by uid 500); 11 Apr 2007 01:39:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75851 invoked by uid 500); 11 Apr 2007 01:39:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75840 invoked by uid 99); 11 Apr 2007 01:39:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 18:39:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sengly.heng@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 18:38:57 -0700
Received: by ug-out-1314.google.com with SMTP id k40so16898ugc
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 18:38:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tPW6WTd7lTtstMq5Nki3g6d999zVb/UPFaPgG4eQV/TzgK9GsUTDGIcyCvgDwbeX9uJjRqgZtjKkpRFiqOs51i1U2xJvj++6kfq5yGX/RP1lQyXu2Sui9g1O2col929ccW0aTrmd9m9QMmDf8kNm6YQjXVgJqmBJFjPvcqFWhd0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Dp+Z0KgCieGip8B3nFMoaoHPUdZ4B0WiL+G/DCoOWwYDvPmSXno53RiT+t4VH40e1kdYIgmX7jMipPef4VNS3bp6DndLnNOlKaLyjPkn5JtdHQPuaFuDtX4aiWxObV+zuj0XD8Fon5Z4QR5poYMTlm3ceS3RKxz+icJR5ambeck=
Received: by 10.82.167.5 with SMTP id p5mr46786bue.1176255516250;
        Tue, 10 Apr 2007 18:38:36 -0700 (PDT)
Received: by 10.82.147.9 with HTTP; Tue, 10 Apr 2007 18:38:36 -0700 (PDT)
Message-ID: <17db983d0704101838n773538bcx4ab0dd2dfe80922a@mail.gmail.com>
Date: Wed, 11 Apr 2007 10:38:36 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get the total term frequency vector of a specific field from the hit results
In-Reply-To: <B8CE66F2-ACA5-45C2-B44C-2B798D3677FC@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_437_30845140.1176255516200"
References: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com>
	 <461B9F0B.3010408@zhwin.ch>
	 <17db983d0704100758rb629b90t3700554059c9ee23@mail.gmail.com>
	 <CFF34C0C-4316-44B2-A249-2C18D997C920@gmail.com>
	 <17db983d0704100848v405800bcm2d57205f80030417@mail.gmail.com>
	 <B8CE66F2-ACA5-45C2-B44C-2B798D3677FC@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_437_30845140.1176255516200
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Once again, thank you for your help.

>
> >> We don't really know what your problem is. Explaining that rathern
> >> than the solution you have thought of might render a couple of
> >> alternate solutions. Perhaps something could be precalculated and
> >> stored in the documents. Perhaps feature selection (reduction) of the
> >> terms might do the trick for you. And so on.
> >
> > I have a corpus of documents indexed with different fields.
> > Approximately
> > each document indexed has an average of 30 fields. Each field has
> > about 100
> > terms.
> >
> > Normally, the hit will return less than 100 documents. For each of
> > the 30
> > fields of the documents, I have to calculate the top 35 keywords
> > from all
> > the documents as well as the top 30 popular keywords (the keywords
> > that are
> > distributed in many documents - something like docFreq or IDF).
>
> Right, but /why/ do you need these values? Do you present them as
> they are, or do you use them for some secondary calculation? Then
> what is the result of this secondary calculation?


Yes, I just want those values as they are. No second calculation is to be
performed.

> Please let me know if you are still have some more questions.
>
> I'll reask of of the questions I placed in my previous reply:
>
> >> How slow is it, and how fast did you expect it to be?


We expect to get those values sorted as fast as possible. Currently for 100
documents, the process is about 1~1.5 minutes. I believe this is because of
the loop.

>> Can you limit the evaulation to the top n documents?


Yes, we limit to only the top 100 documents.

Thank you.

Regards,

Sengly

------=_Part_437_30845140.1176255516200--

From java-user-return-27526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 01:52:08 2007
Return-Path: <java-user-return-27526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27832 invoked from network); 11 Apr 2007 01:52:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 01:52:07 -0000
Received: (qmail 93246 invoked by uid 500); 11 Apr 2007 01:52:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93219 invoked by uid 500); 11 Apr 2007 01:52:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93205 invoked by uid 99); 11 Apr 2007 01:52:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 18:52:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 10 Apr 2007 18:51:58 -0700
Received: (qmail 85330 invoked by uid 60001); 11 Apr 2007 01:51:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=cv0tf/88/IoSTQeKr4Br5W+yGkXcsyyQQtyNgZqD3o4t0I9ohdsxMmPBC2Srnf4DuFjHaxq3sG93/pvEkP9HppRE1RSrsLQxxxSGxcVkaiHTgYua+h5szvw3amh0mMwTue6DTx2iHghoqzBj1TuOrBe2paPIol/L9nK9ON6pteI=;
X-YMail-OSG: zN9ldeoVM1mYQoZQF3WlasRJ0CLl.B3MprvOCFfkSM72uZ5ANky2_w.qTcoZv.srB9SRejNkY7gOeqr6o9kgLU7G9yM5r8Mwltv1Mm94riGCS_jjJ3w-
Received: from [72.231.8.153] by web50310.mail.re2.yahoo.com via HTTP; Tue, 10 Apr 2007 18:51:16 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Tue, 10 Apr 2007 18:51:16 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to update index dynamically
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <470537.79832.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Wow, you are right.  I never realized that!



----- Original Message ----
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Sent: Tuesday, April 10, 2007 8:39:28 PM
Subject: Re: How to update index dynamically

Otis Gospodnetic wrote:
> Anson,
> 
> That's not your real code, is it?  Those $ characters in it look incorrect.

Are you sure?  $ is legal at the front of a variable in Java. :-)

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 02:10:40 2007
Return-Path: <java-user-return-27527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31203 invoked from network); 11 Apr 2007 02:10:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 02:10:39 -0000
Received: (qmail 13185 invoked by uid 500); 11 Apr 2007 02:10:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13159 invoked by uid 500); 11 Apr 2007 02:10:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13148 invoked by uid 99); 11 Apr 2007 02:10:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 19:10:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 19:10:33 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id F14AD109F2F
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 19:10:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <f81fa4180704101703x3c48d42ei529da26c6c8132ac@mail.gmail.com>
References: <f81fa4180704100504q142073c2n5ad0e88f0fff7579@mail.gmail.com> <f81fa4180704101703x3c48d42ei529da26c6c8132ac@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0315F020-F9E4-41FB-AABA-E02D2B5D0649@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Ideas for a relevance score that could be considered stable across multiple searches with the same query structure?
Date: Tue, 10 Apr 2007 22:10:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Apr 10, 2007, at 8:03 PM, Daniel Einspanjer wrote:

> The people reviewing this matching process need some way of
> determining why a particular match was made other than the overall
> score.  Was it because the title was a perfect match or was it because
> the title wasn't that close, but the director and year were dead on?
>

Does the explain() method shed any light for you?


--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 02:22:27 2007
Return-Path: <java-user-return-27528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32880 invoked from network); 11 Apr 2007 02:22:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 02:22:27 -0000
Received: (qmail 27385 invoked by uid 500); 11 Apr 2007 02:22:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27360 invoked by uid 500); 11 Apr 2007 02:22:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27349 invoked by uid 99); 11 Apr 2007 02:22:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 19:22:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 19:22:19 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 5CA85FFAC9
	for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 19:21:58 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <17db983d0704101838n773538bcx4ab0dd2dfe80922a@mail.gmail.com>
References: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com> <461B9F0B.3010408@zhwin.ch> <17db983d0704100758rb629b90t3700554059c9ee23@mail.gmail.com> <CFF34C0C-4316-44B2-A249-2C18D997C920@gmail.com> <17db983d0704100848v405800bcm2d57205f80030417@mail.gmail.com> <B8CE66F2-ACA5-45C2-B44C-2B798D3677FC@gmail.com> <17db983d0704101838n773538bcx4ab0dd2dfe80922a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EEE7B734-18AD-498E-A05F-B65FF5EBADF4@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Get the total term frequency vector of a specific field from the hit results
Date: Tue, 10 Apr 2007 22:21:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Would some sort of caching strategy work?  How big is your overall  
collection?

Also, lately there have been a few threads on TV (term vector)  
performance.  I don't recall anyone having actively profiled or  
examined it for improvements, so perhaps that would be helpful.

Another thought: could you have a stored field that contains the top  
X terms for a given document with their freqs and then just do a  
merge based on your hit results?  Part of the problem w/ TVs is that  
not only do you have to load them, but then you have to iterate  
through them to sort them by frequency.  I could see that it might be  
beneficial to have alternate strategies for loading them, say into a  
map of terms -> frequencies or terms to TVInfo (freqs, offsets,  
positions) or parallel arrays sorted by frequency or something like  
that.

It _might_ be possible to do this in a HitCollector or FieldSelector  
style way.  This way, perhaps, you could build the TV structure you  
want as it is read from disk.  Do you have any interest in digging  
down into the Lucene code to help on such an idea?

-Grant



On Apr 10, 2007, at 9:38 PM, Sengly Heng wrote:

> Once again, thank you for your help.
>
>>
>> >> We don't really know what your problem is. Explaining that rathern
>> >> than the solution you have thought of might render a couple of
>> >> alternate solutions. Perhaps something could be precalculated and
>> >> stored in the documents. Perhaps feature selection (reduction)  
>> of the
>> >> terms might do the trick for you. And so on.
>> >
>> > I have a corpus of documents indexed with different fields.
>> > Approximately
>> > each document indexed has an average of 30 fields. Each field has
>> > about 100
>> > terms.
>> >
>> > Normally, the hit will return less than 100 documents. For each of
>> > the 30
>> > fields of the documents, I have to calculate the top 35 keywords
>> > from all
>> > the documents as well as the top 30 popular keywords (the keywords
>> > that are
>> > distributed in many documents - something like docFreq or IDF).
>>
>> Right, but /why/ do you need these values? Do you present them as
>> they are, or do you use them for some secondary calculation? Then
>> what is the result of this secondary calculation?
>
>
> Yes, I just want those values as they are. No second calculation is  
> to be
> performed.
>
>> Please let me know if you are still have some more questions.
>>
>> I'll reask of of the questions I placed in my previous reply:
>>
>> >> How slow is it, and how fast did you expect it to be?
>
>
> We expect to get those values sorted as fast as possible. Currently  
> for 100
> documents, the process is about 1~1.5 minutes. I believe this is  
> because of
> the loop.
>
>>> Can you limit the evaulation to the top n documents?
>
>
> Yes, we limit to only the top 100 documents.
>
> Thank you.
>
> Regards,
>
> Sengly

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 02:26:06 2007
Return-Path: <java-user-return-27529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33268 invoked from network); 11 Apr 2007 02:26:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 02:26:05 -0000
Received: (qmail 32675 invoked by uid 500); 11 Apr 2007 02:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31684 invoked by uid 500); 11 Apr 2007 02:26:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31672 invoked by uid 99); 11 Apr 2007 02:26:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 19:26:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 19:25:58 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HbSWf-00037g-7k
	for java-user@lucene.apache.org; Tue, 10 Apr 2007 19:25:37 -0700
Message-ID: <9932151.post@talk.nabble.com>
Date: Tue, 10 Apr 2007 19:25:37 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue with search() Help Appreciated.
In-Reply-To: <200704100859.37820@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
References: <9914639.post@talk.nabble.com> <200704100859.37820@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


I solved the issue by using:

1.Same Analyser.
2.Making indexing by tokenizing terms.

Now issue with the following code is, I am facing issues which I have pasted
after the code, I searched the forum but couldn't find a relevant post :

QueryParser parser = new QueryParser("Title", analyzer);
Query query = parser.parse("Cache");
 Hits hits = isearcher.search(query);

Issues:
--------
1. Not getting relevant documents.
2. Suprisingly and ugly though -> Getting same number for the Hits.length()
which is 21 and then gives OutOfMemoryError.

Infact I realised I should give details of what I want to do may be that wud
help someone to tell whats the issue:

I have document with field : "Tiltle" and "Description" which I have indexed
and I am searching one of these fields for certain terms. Is my above code
fine or I shud be using the query in some other manner. 

Please Advice.


Daniel Naber-5 wrote:
> 
> On Tuesday 10 April 2007 08:40, Lokeya wrote:
> 
>> But when i try to get hits.length() it is 0.
>>
>> Can anyone point out whats wrong ?
> 
> Please check the FAQ first:
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Issue-with-search%28%29-Help-Appreciated.-tf3551357.html#a9932151
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 04:38:03 2007
Return-Path: <java-user-return-27530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61971 invoked from network); 11 Apr 2007 04:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 04:38:02 -0000
Received: (qmail 58173 invoked by uid 500); 11 Apr 2007 04:38:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57524 invoked by uid 500); 11 Apr 2007 04:38:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57513 invoked by uid 99); 11 Apr 2007 04:38:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 21:38:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 21:37:54 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HbUaM-00042H-8L
	for java-user@lucene.apache.org; Tue, 10 Apr 2007 21:37:34 -0700
Message-ID: <9933089.post@talk.nabble.com>
Date: Tue, 10 Apr 2007 21:37:34 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Issue with : Searcher.search() returning Hits of same length for
 different searches
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am following all the points which are mentioned in the following link:

http://wiki.apache.org/lucene-java/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71

I am having the following issues:

1. For different Queries I give I get a Hits object where there are always
21 documents, but getting different set but same number everytime. Also not
all documents have the query term which I have set.

I have extended the Analyzer and using a new class
:StopStemmingAnalyzer.java. But that should not be the issue because I am
using that again for searching. Also I use  Field.Store.YES,
Field.Index.TOKENIZED for indexing.

Help Appreciated. 
-- 
View this message in context: http://www.nabble.com/Issue-with-%3A-Searcher.search%28%29-returning-Hits-of-same-length-for-different-searches-tf3557277.html#a9933089
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 06:06:46 2007
Return-Path: <java-user-return-27531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80026 invoked from network); 11 Apr 2007 06:06:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 06:06:46 -0000
Received: (qmail 43186 invoked by uid 500); 11 Apr 2007 06:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43158 invoked by uid 500); 11 Apr 2007 06:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43147 invoked by uid 99); 11 Apr 2007 06:06:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 23:06:46 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2007 23:06:39 -0700
Received: by an-out-0708.google.com with SMTP id c3so80770ana
        for <java-user@lucene.apache.org>; Tue, 10 Apr 2007 23:06:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=Q4gqdD68+M3yMRd5x9D/bfcjlpo3TRIt5mwIoH6ZOd8vN8nJlEUZan7RF6WvfV/RhCHwTgcqO9Flg4KQPSkr3PlrAjzXxq6tru/hQyXYRVBUcp0IAXxNnpnMxqdWuo7sr++AGDvQaT0774B8c9ufmNRA2EDQusaQxAJ1N9+SzMM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=H1ASWaM1iGTQxu4sWleXtRNolIhBNmfA+R/xBeX3bsIZzUiNBAegnydb7UYXxNJRqziA+e5cyd7zLvbBb6mG5ULlpvmfx7QfyhzYLzPeMq0w2mdA+aOLYBHmcZ+uMKMQF7Q27E+VtoxXc5tfIQoQBOo7ZBXSq/kSkaraG//79lk=
Received: by 10.100.106.5 with SMTP id e5mr170738anc.1176271578725;
        Tue, 10 Apr 2007 23:06:18 -0700 (PDT)
Received: by 10.100.127.15 with HTTP; Tue, 10 Apr 2007 23:06:18 -0700 (PDT)
Message-ID: <a258c0620704102306t5b97d001w8007bccee26c9b57@mail.gmail.com>
Date: Tue, 10 Apr 2007 23:06:18 -0700
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: How to access Levenstein distance number?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4997_21041482.1176271578655"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4997_21041482.1176271578655
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello.

I am using Lucene to submit fuzzy queries against an index. I have noticed
that relevant matches are often retreived, but the scoring is not at all
what I expected.

For example, if my query is "rightches~", a reference to a text file with
the single word "righteous" is returned with a score of 100 percent.
However, I think the actual score should be somewhere in the neighborhood of
.66, not 1. Anyone follow me?  Degree of similarity is what I want in this
case.

But Lucene score does not take into account how well a term matches a
FuzzyQuery. That just seems to be the way Lucene is built currently. The
score is based on term frequency of the actual matching term. FuzzyQuery
gets rewritten as a BooleanQuery with all matching terms OR'd.

Degree of similarity is what I want in this case.  When "rightches~" matches
"rightheous", I should get a similarity score of about .66.

What I want is to get at the raw difference that Lucene uses:  the
Levenstein distance algorithm.  I think I'll need to use the code in
FuzzyTermEnum.java (or .cs) as a starting point. I figure I can can probably
use that code directly somehow, or at least borrow the similarity
computation.

Frankly, though, I'm not sure I'm treading down the right path on this.  Can
anyone help with specifics, past experience, or examples?

Cheers,
Mike

------=_Part_4997_21041482.1176271578655--

From java-user-return-27532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 09:20:03 2007
Return-Path: <java-user-return-27532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34728 invoked from network); 11 Apr 2007 09:19:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 09:19:54 -0000
Received: (qmail 3627 invoked by uid 500); 11 Apr 2007 09:19:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3582 invoked by uid 500); 11 Apr 2007 09:19:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3571 invoked by uid 99); 11 Apr 2007 09:19:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 02:19:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 02:19:45 -0700
Received: by an-out-0708.google.com with SMTP id c3so120227ana
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 02:19:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=g3XBj6H2RAsuFRs0chbgzC20g/TZflXI4HZU/XdUBOhow5BOAZhs+MwnOyeXLRua43WTLPD9CluJj7irl1uuElR/souabqlrwARDRybzC5Xp8wew6zoYeu2I8oQtpYI66OVCkRXa5MgmX3nDA9KFd07OXwPRSLRvtfdtMD3d4Kw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QpwpfMyqOw8gBKvodurppJlNa+Qi9Ihu7Q2j2rjIFJT2JAImQ7r00Q8qJE/Ff+YDFVg1T/Rm0bYx0tJs2WptO2//95bkxnmqoCa/1NwTV9ND0Zl0YXa811VFqXWjujIs5FqNtDM4GBW9b/OZyPS7OjI5CjEjpdgz7XKq08/UBUk=
Received: by 10.101.14.16 with SMTP id r16mr256382ani.1176283164345;
        Wed, 11 Apr 2007 02:19:24 -0700 (PDT)
Received: by 10.100.173.10 with HTTP; Wed, 11 Apr 2007 02:19:24 -0700 (PDT)
Message-ID: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com>
Date: Wed, 11 Apr 2007 12:49:24 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: question about field equality in query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5326_22394798.1176283164283"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5326_22394798.1176283164283
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
is it possible (or a trickery way)  to search with a given query in which we
can set an equality for two fields
for example:

Document:
field1             field2                field3          field4

Query:
  field1:"test phrase" AND field2:"test" AND field3:field4

in this query we said that do search where field3 is equal to field4 ...
(and rest of the query)

if it is not possible, can we ask it as a new feature from Lucene
developers?

Thank you so much in advance.

-- 
Regards,
M. Norouzi

------=_Part_5326_22394798.1176283164283--

From java-user-return-27533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 10:44:39 2007
Return-Path: <java-user-return-27533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75631 invoked from network); 11 Apr 2007 10:44:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 10:44:37 -0000
Received: (qmail 30404 invoked by uid 500); 11 Apr 2007 10:44:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30078 invoked by uid 500); 11 Apr 2007 10:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30067 invoked by uid 99); 11 Apr 2007 10:44:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 03:44:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a8.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 03:44:28 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a8.g.dreamhost.com (Postfix) with ESMTP id E291C10AED3
	for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 03:44:05 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <a258c0620704102306t5b97d001w8007bccee26c9b57@mail.gmail.com>
References: <a258c0620704102306t5b97d001w8007bccee26c9b57@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <92023240-73B3-4790-842A-A0D7CA9288AB@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How to access Levenstein distance number?
Date: Wed, 11 Apr 2007 06:44:05 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have you looked at the explains to see what is coming out of the  
FuzzyQuery?  Also, are you using Hits to get that score?  Scores get  
normalized to 1 by that process.

-Grant
On Apr 11, 2007, at 2:06 AM, Michael Barbarelli wrote:

> Hello.
>
> I am using Lucene to submit fuzzy queries against an index. I have  
> noticed
> that relevant matches are often retreived, but the scoring is not  
> at all
> what I expected.
>
> For example, if my query is "rightches~", a reference to a text  
> file with
> the single word "righteous" is returned with a score of 100 percent.
> However, I think the actual score should be somewhere in the  
> neighborhood of
> .66, not 1. Anyone follow me?  Degree of similarity is what I want  
> in this
> case.
>
> But Lucene score does not take into account how well a term matches a
> FuzzyQuery. That just seems to be the way Lucene is built  
> currently. The
> score is based on term frequency of the actual matching term.  
> FuzzyQuery
> gets rewritten as a BooleanQuery with all matching terms OR'd.
>
> Degree of similarity is what I want in this case.  When  
> "rightches~" matches
> "rightheous", I should get a similarity score of about .66.
>
> What I want is to get at the raw difference that Lucene uses:  the
> Levenstein distance algorithm.  I think I'll need to use the code in
> FuzzyTermEnum.java (or .cs) as a starting point. I figure I can can  
> probably
> use that code directly somehow, or at least borrow the similarity
> computation.
>
> Frankly, though, I'm not sure I'm treading down the right path on  
> this.  Can
> anyone help with specifics, past experience, or examples?
>
> Cheers,
> Mike

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 13:09:02 2007
Return-Path: <java-user-return-27534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23361 invoked from network); 11 Apr 2007 13:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 13:09:01 -0000
Received: (qmail 81417 invoked by uid 500); 11 Apr 2007 13:08:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81369 invoked by uid 500); 11 Apr 2007 13:08:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81358 invoked by uid 99); 11 Apr 2007 13:08:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:08:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.90.179 as permitted sender)
Received: from [66.249.90.179] (HELO ik-out-1112.google.com) (66.249.90.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:08:51 -0700
Received: by ik-out-1112.google.com with SMTP id b35so188047ika
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 06:08:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=fG0JRlTtZWXQNN7KJIoVb7GArJTZn0KYoO0rolszBA9+zzcnax5L1UVV9LMRPpzFVOVu5EkQo2pl0yMzowByoC4aASzBFJpvPKGj2YD29WXXOyjLSkya4k3MIn4mNylK0w99Mm5652BtEJlnEpa+8CWQR9QHKqhINraMrk0rks0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=RREKMBofsnUNAvooD5o/GSuI7mU/sZb3x6D1dY+5J1z3UVCBO8WqQnbty0T29Qeq8mYfTDO2qpP4lzJE8uoo6fS8dN8mX9Lv+JEKjTGnchOnxtkBf7jbKDFpkpia3UoNxYVkoTI7Q/AyyAbqzIQyjHfPpbZO07LAI94L0TlARFo=
Received: by 10.78.200.3 with SMTP id x3mr99629huf.1176296909977;
        Wed, 11 Apr 2007 06:08:29 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id y2sm272051mug.2007.04.11.06.08.25;
        Wed, 11 Apr 2007 06:08:28 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <EEE7B734-18AD-498E-A05F-B65FF5EBADF4@apache.org>
References: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com> <461B9F0B.3010408@zhwin.ch> <17db983d0704100758rb629b90t3700554059c9ee23@mail.gmail.com> <CFF34C0C-4316-44B2-A249-2C18D997C920@gmail.com> <17db983d0704100848v405800bcm2d57205f80030417@mail.gmail.com> <B8CE66F2-ACA5-45C2-B44C-2B798D3677FC@gmail.com> <17db983d0704101838n773538bcx4ab0dd2dfe80922a@mail.gmail.com> <EEE7B734-18AD-498E-A05F-B65FF5EBADF4@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <364C6F82-C44A-4CCB-ACE5-3E3A56996F69@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Get the total term frequency vector of a specific field from the hit results
Date: Wed, 11 Apr 2007 15:07:51 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


11 apr 2007 kl. 04.21 skrev Grant Ingersoll:

> Would some sort of caching strategy work?  How big is your overall  
> collection?
>
> Also, lately there have been a few threads on TV (term vector)  
> performance.  I don't recall anyone having actively profiled or  
> examined it for improvements, so perhaps that would be helpful.
>
> Another thought: could you have a stored field that contains the  
> top X terms for a given document with their freqs and then just do  
> a merge based on your hit results?  Part of the problem w/ TVs is  
> that not only do you have to load them, but then you have to  
> iterate through them to sort them by frequency.  I could see that  
> it might be beneficial to have alternate strategies for loading  
> them, say into a map of terms -> frequencies or terms to TVInfo  
> (freqs, offsets, positions) or parallel arrays sorted by frequency  
> or something like that.

I personally don't like the idea of putting such information in a  
stored field. It would require parsing or so. I'd go deeper.

Are there any dependencies to the natural order of a term vector?  
Highlightning? What about allowing alternative order such as  
frequency rather than string value? Multiple term vectors per  
documents? Perhaps a new file would be the best way. I can think of  
many uses of a consumer configurable term vector. Actually, I think  
I'll look in to this some day.

Sengly, do you use the term vectors for anything else? I'd look in to  
hacking the order of the values in the term vector. Could be  
problematic if you want to use the default behaviour in the future  
though.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 13:20:55 2007
Return-Path: <java-user-return-27535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29023 invoked from network); 11 Apr 2007 13:20:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 13:20:54 -0000
Received: (qmail 9330 invoked by uid 500); 11 Apr 2007 13:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9297 invoked by uid 500); 11 Apr 2007 13:20:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9125 invoked by uid 99); 11 Apr 2007 13:20:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:20:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:20:34 -0700
Received: by ug-out-1314.google.com with SMTP id k40so108142ugc
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 06:20:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QTOafYkCg7e76CBWlrGjmgPQcBJTObz0Dw4SK1TJ4D58eyqR7jk/seblPYVVLIK5UTrUPsNehemY8GLfSABy4ywL2T0TJqtqe1Uh5ynyYiBdGeUmhyTg7nuvnLRmY8WCqTt0/lU6Qf/IYrtmG+vz7DC3jnNKqfIV4Z2aGyFMWPE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YbcH1meUKY0HxmgRVkXUBch080AEBC4ipf4Hph78KeEQ+AP6d4NGr3b5/6ur2bBYqAebREcPW0VnY0MdZiOULbHsn0xq1dxyc0DfTRQ2YgNsGxJkSlpbO7NH7AIkNmWwezG9mm1N45hT4cYDzhKq76bHcmnnvxzi6hpAuEBfMLE=
Received: by 10.82.188.15 with SMTP id l15mr792189buf.1176297613425;
        Wed, 11 Apr 2007 06:20:13 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Wed, 11 Apr 2007 06:20:13 -0700 (PDT)
Message-ID: <359a92830704110620l6991b4cbjf4ff6ad9fcba8f1d@mail.gmail.com>
Date: Wed, 11 Apr 2007 09:20:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue with : Searcher.search() returning Hits of same length for different searches
In-Reply-To: <9933089.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7193_2906602.1176297613288"
References: <9933089.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7193_2906602.1176297613288
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, there's nothing here to help you with, since you haven't provided
any information to diagnose. Like:

What queries are actually produced in the different cases?
Use query.toString().

I'm immediately suspicious of any statement that "my custom
code shouldn't be the problem". Try the test again using
one of the simplest analyzers you can.

Have you used Luke to query your index interactively and see
what the results are? Or how the queries parse?

Please, when asking for help, try looking at the question
you're asking from the perspective of someone who knows
nothing about your code. Imagine that a coworker had asked
you such a question.

Best
Erick

On 4/11/07, Lokeya <lokeya@gmail.com> wrote:
>
>
> I am following all the points which are mentioned in the following link:
>
>
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71
>
> I am having the following issues:
>
> 1. For different Queries I give I get a Hits object where there are always
> 21 documents, but getting different set but same number everytime. Also
> not
> all documents have the query term which I have set.
>
> I have extended the Analyzer and using a new class
> :StopStemmingAnalyzer.java. But that should not be the issue because I am
> using that again for searching. Also I use  Field.Store.YES,
> Field.Index.TOKENIZED for indexing.
>
> Help Appreciated.
> --
> View this message in context:
> http://www.nabble.com/Issue-with-%3A-Searcher.search%28%29-returning-Hits-of-same-length-for-different-searches-tf3557277.html#a9933089
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7193_2906602.1176297613288--

From java-user-return-27536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 13:22:54 2007
Return-Path: <java-user-return-27536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33591 invoked from network); 11 Apr 2007 13:22:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 13:22:52 -0000
Received: (qmail 15896 invoked by uid 500); 11 Apr 2007 13:22:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15865 invoked by uid 500); 11 Apr 2007 13:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15854 invoked by uid 99); 11 Apr 2007 13:22:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:22:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:22:43 -0700
Received: by mu-out-0910.google.com with SMTP id i10so223252mue
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 06:22:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=h/LrvxdbyM++wfgIx1PrZTo+3zUBkq77dXSnmFZTgl85n7c3tZvpJr9UVHm6YAE3R1LEfeTAxM/cZXFXhGgYPmMfbY5YlPsWuyQilWGNVFzvwRmUM/5lLsgCs7pAN3OAoHFm8dNqI69lOfvRDJL6TYOWm6bKRkPYczUWeBmCUXU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=TAGaww9dWjjH9CYSfeWztdAR+guWz/GkGdQMlgglft0jNFuoaP0+tc0dlaFN2slQuVyOUX86QhZdYfyxKB2sxoDmcB0XvO1oAk5pwup2jTXZ+TGB7vidPSUDS0Br0GnTL78TZhgmxVdgGDGTQzdllancHapauS9WSECTwk/N1wE=
Received: by 10.82.108.9 with SMTP id g9mr788648buc.1176297740904;
        Wed, 11 Apr 2007 06:22:20 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id w5sm34102mue.2007.04.11.06.22.17;
        Wed, 11 Apr 2007 06:22:18 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com>
References: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EA0A1526-4D97-4EC9-8F92-C6365A2E650F@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: question about field equality in query
Date: Wed, 11 Apr 2007 15:21:44 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


11 apr 2007 kl. 11.19 skrev Mohammad Norouzi:

> is it possible (or a trickery way)  to search with a given query in  
> which we
> can set an equality for two fields
> for example:
>
> Document:
> field1             field2                field3          field4
>
> Query:
>  field1:"test phrase" AND field2:"test" AND field3:field4
>
> in this query we said that do search where field3 is equal to  
> field4 ...
> (and rest of the query)
>
> if it is not possible, can we ask it as a new feature from Lucene
> developers?

It could probably be done, but would be quite an expensive query to  
place.

However, a request like this usually tiggers questions about the  
design of an index with such needs. There is probably a better  
solution. Start by telling us about the data you have inserted to the  
index, and what it is you try to achieve.

In essence, Lucene is not a relational database.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 13:37:37 2007
Return-Path: <java-user-return-27537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39258 invoked from network); 11 Apr 2007 13:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 13:37:37 -0000
Received: (qmail 43222 invoked by uid 500); 11 Apr 2007 13:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43182 invoked by uid 500); 11 Apr 2007 13:37:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43171 invoked by uid 99); 11 Apr 2007 13:37:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:37:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:37:28 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id D78AAB6CB2
	for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 06:37:07 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <364C6F82-C44A-4CCB-ACE5-3E3A56996F69@gmail.com>
References: <17db983d0704100701s7b69a83br364758ae5635b3b7@mail.gmail.com> <461B9F0B.3010408@zhwin.ch> <17db983d0704100758rb629b90t3700554059c9ee23@mail.gmail.com> <CFF34C0C-4316-44B2-A249-2C18D997C920@gmail.com> <17db983d0704100848v405800bcm2d57205f80030417@mail.gmail.com> <B8CE66F2-ACA5-45C2-B44C-2B798D3677FC@gmail.com> <17db983d0704101838n773538bcx4ab0dd2dfe80922a@mail.gmail.com> <EEE7B734-18AD-498E-A05F-B65FF5EBADF4@apache.org> <364C6F82-C44A-4CCB-ACE5-3E3A56996F69@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <41ECCB30-372C-485A-86BA-89CC3886086A@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Get the total term frequency vector of a specific field from the hit results
Date: Wed, 11 Apr 2007 09:37:05 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Apr 11, 2007, at 9:07 AM, karl wettin wrote:

>
> 11 apr 2007 kl. 04.21 skrev Grant Ingersoll:
>
>> Would some sort of caching strategy work?  How big is your overall  
>> collection?
>>
>> Also, lately there have been a few threads on TV (term vector)  
>> performance.  I don't recall anyone having actively profiled or  
>> examined it for improvements, so perhaps that would be helpful.
>>
>> Another thought: could you have a stored field that contains the  
>> top X terms for a given document with their freqs and then just do  
>> a merge based on your hit results?  Part of the problem w/ TVs is  
>> that not only do you have to load them, but then you have to  
>> iterate through them to sort them by frequency.  I could see that  
>> it might be beneficial to have alternate strategies for loading  
>> them, say into a map of terms -> frequencies or terms to TVInfo  
>> (freqs, offsets, positions) or parallel arrays sorted by frequency  
>> or something like that.
>
> I personally don't like the idea of putting such information in a  
> stored field. It would require parsing or so. I'd go deeper.

Agreed, but probably not too different from manipulating the arrays.

>
> Are there any dependencies to the natural order of a term vector?  
> Highlightning? What about allowing alternative order such as  
> frequency rather than string value? Multiple term vectors per  
> documents? Perhaps a new file would be the best way. I can think of  
> many uses of a consumer configurable term vector. Actually, I think  
> I'll look in to this some day.

I was thinking something along the lines of (really thinking out loud  
here)
IndexReader.getTermFreqVector(int docid, String fieldName,  
TermVectorLoader tvl)

where TermVectorLoader is an interface that has something like:

void loadTermVector(String term, int frequency, int offset, int  
position);

Then, you could implement this however you wanted.  We could provide  
an initial implementation that is backed by a SortedMap.

>
> Sengly, do you use the term vectors for anything else? I'd look in  
> to hacking the order of the values in the term vector. Could be  
> problematic if you want to use the default behaviour in the future  
> though.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 13:37:46 2007
Return-Path: <java-user-return-27538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39333 invoked from network); 11 Apr 2007 13:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 13:37:45 -0000
Received: (qmail 44758 invoked by uid 500); 11 Apr 2007 13:37:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44705 invoked by uid 500); 11 Apr 2007 13:37:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44691 invoked by uid 99); 11 Apr 2007 13:37:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:37:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:37:37 -0700
Received: by an-out-0708.google.com with SMTP id c3so186938ana
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 06:37:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nKttGjmnz9g9TwQIWaGZcvrerkHyolPJRtVCjU0mEuDWQXidz1yOuUbfHeUdMVFicOwfi5gb584bq9TqHoYoxZajk8Fx4vScly5u/v22O0yQxg6jYLyUBjMHUoLOmcWFYU8tTskrjt2SqNf+rAUWglXhKuXv3cemxfP5jAjNFjg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pGvvYo9DISGtIhR5R0RJdqHOdMbrp2tPF85u5Qawj+/xzbs7wVXZG6nv9M5H5Gshm2RVDBipSvTEqFmFTR0y0RS+d8gvxm9S/x2OeQVDlAg6U9tOonzCJCH4qvP289aQwYcHS2yhvC216ev0uubbfozmkgyVKG1MEenHgKh8tZg=
Received: by 10.100.112.19 with SMTP id k19mr403268anc.1176298636486;
        Wed, 11 Apr 2007 06:37:16 -0700 (PDT)
Received: by 10.100.127.15 with HTTP; Wed, 11 Apr 2007 06:37:16 -0700 (PDT)
Message-ID: <a258c0620704110637j379d17cejcae4f24aa48a397@mail.gmail.com>
Date: Wed, 11 Apr 2007 06:37:16 -0700
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to access Levenstein distance number?
In-Reply-To: <92023240-73B3-4790-842A-A0D7CA9288AB@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12063_21668615.1176298636416"
References: <a258c0620704102306t5b97d001w8007bccee26c9b57@mail.gmail.com>
	 <92023240-73B3-4790-842A-A0D7CA9288AB@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12063_21668615.1176298636416
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Grant.

Yes, I'm getting the score from the Hits collection.  And yes, they get
normalized to 1; which is what I don't want.

Or, I can leave the Hits objects as is, but I know Lucene also must
calculate a raw difference as part of the overall score calculation.
How can I get at that value?

Thanks!

Mike


On 4/11/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Have you looked at the explains to see what is coming out of the
> FuzzyQuery?  Also, are you using Hits to get that score?  Scores get
> normalized to 1 by that process.
>
> -Grant
> On Apr 11, 2007, at 2:06 AM, Michael Barbarelli wrote:
>
> > Hello.
> >
> > I am using Lucene to submit fuzzy queries against an index. I have
> > noticed
> > that relevant matches are often retreived, but the scoring is not
> > at all
> > what I expected.
> >
> > For example, if my query is "rightches~", a reference to a text
> > file with
> > the single word "righteous" is returned with a score of 100 percent.
> > However, I think the actual score should be somewhere in the
> > neighborhood of
> > .66, not 1. Anyone follow me?  Degree of similarity is what I want
> > in this
> > case.
> >
> > But Lucene score does not take into account how well a term matches a
> > FuzzyQuery. That just seems to be the way Lucene is built
> > currently. The
> > score is based on term frequency of the actual matching term.
> > FuzzyQuery
> > gets rewritten as a BooleanQuery with all matching terms OR'd.
> >
> > Degree of similarity is what I want in this case.  When
> > "rightches~" matches
> > "rightheous", I should get a similarity score of about .66.
> >
> > What I want is to get at the raw difference that Lucene uses:  the
> > Levenstein distance algorithm.  I think I'll need to use the code in
> > FuzzyTermEnum.java (or .cs) as a starting point. I figure I can can
> > probably
> > use that code directly somehow, or at least borrow the similarity
> > computation.
> >
> > Frankly, though, I'm not sure I'm treading down the right path on
> > this.  Can
> > anyone help with specifics, past experience, or examples?
> >
> > Cheers,
> > Mike
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12063_21668615.1176298636416--

From java-user-return-27539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 13:43:33 2007
Return-Path: <java-user-return-27539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40906 invoked from network); 11 Apr 2007 13:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 13:43:32 -0000
Received: (qmail 60589 invoked by uid 500); 11 Apr 2007 13:43:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60555 invoked by uid 500); 11 Apr 2007 13:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60544 invoked by uid 99); 11 Apr 2007 13:43:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:43:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 06:43:24 -0700
Received: by ug-out-1314.google.com with SMTP id k40so112728ugc
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 06:43:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SRF52g/LyxIBLPVK57m+zLh+dqC67dZb2CdgM/F/QGDnz2TgWKt7SX92s74UKnZqUCjJ6doEfMdNvrxEIdd7iIP+5k7vUCONriy0uGsPuHfbmmPhpaRc7tqYqmsYvOWhwuC7ztM5X9CeXAxv81LgByUJF/DQqG0mfmnyRJP96bI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rcX1MXLZB7Uj5KG9ClKEOeBi5NoQ4cS34xTcyMpuDwjrLlGcolAJi6rdXX566zNdeNBqWiIPxIGUJKX18+mclYEZUfCJc9JGoLzhdW3qmvi1Cvdw6LKoK6wpVTRBYFWw2PhYS9PPKDkj0qipB+kkU1K8hqIQyeq4j0H9Yv8VXz4=
Received: by 10.82.138.6 with SMTP id l6mr831730bud.1176298982806;
        Wed, 11 Apr 2007 06:43:02 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Wed, 11 Apr 2007 06:43:02 -0700 (PDT)
Message-ID: <359a92830704110643v29af6843x1b5755b21dc0593d@mail.gmail.com>
Date: Wed, 11 Apr 2007 09:43:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to access Levenstein distance number?
In-Reply-To: <a258c0620704110637j379d17cejcae4f24aa48a397@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7537_30390739.1176298982762"
References: <a258c0620704102306t5b97d001w8007bccee26c9b57@mail.gmail.com>
	 <92023240-73B3-4790-842A-A0D7CA9288AB@apache.org>
	 <a258c0620704110637j379d17cejcae4f24aa48a397@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7537_30390739.1176298982762
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Go for a HitCollector. In particular, TopDocs will give you the raw
scores.

Erick

On 4/11/07, Michael Barbarelli <mbarbarelli@gmail.com> wrote:
>
> Hi Grant.
>
> Yes, I'm getting the score from the Hits collection.  And yes, they get
> normalized to 1; which is what I don't want.
>
> Or, I can leave the Hits objects as is, but I know Lucene also must
> calculate a raw difference as part of the overall score calculation.
> How can I get at that value?
>
> Thanks!
>
> Mike
>
>
> On 4/11/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > Have you looked at the explains to see what is coming out of the
> > FuzzyQuery?  Also, are you using Hits to get that score?  Scores get
> > normalized to 1 by that process.
> >
> > -Grant
> > On Apr 11, 2007, at 2:06 AM, Michael Barbarelli wrote:
> >
> > > Hello.
> > >
> > > I am using Lucene to submit fuzzy queries against an index. I have
> > > noticed
> > > that relevant matches are often retreived, but the scoring is not
> > > at all
> > > what I expected.
> > >
> > > For example, if my query is "rightches~", a reference to a text
> > > file with
> > > the single word "righteous" is returned with a score of 100 percent.
> > > However, I think the actual score should be somewhere in the
> > > neighborhood of
> > > .66, not 1. Anyone follow me?  Degree of similarity is what I want
> > > in this
> > > case.
> > >
> > > But Lucene score does not take into account how well a term matches a
> > > FuzzyQuery. That just seems to be the way Lucene is built
> > > currently. The
> > > score is based on term frequency of the actual matching term.
> > > FuzzyQuery
> > > gets rewritten as a BooleanQuery with all matching terms OR'd.
> > >
> > > Degree of similarity is what I want in this case.  When
> > > "rightches~" matches
> > > "rightheous", I should get a similarity score of about .66.
> > >
> > > What I want is to get at the raw difference that Lucene uses:  the
> > > Levenstein distance algorithm.  I think I'll need to use the code in
> > > FuzzyTermEnum.java (or .cs) as a starting point. I figure I can can
> > > probably
> > > use that code directly somehow, or at least borrow the similarity
> > > computation.
> > >
> > > Frankly, though, I'm not sure I'm treading down the right path on
> > > this.  Can
> > > anyone help with specifics, past experience, or examples?
> > >
> > > Cheers,
> > > Mike
> >
> > --------------------------
> > Grant Ingersoll
> > Center for Natural Language Processing
> > http://www.cnlp.org
> >
> > Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> > LuceneFAQ
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_7537_30390739.1176298982762--

From java-user-return-27540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 14:05:19 2007
Return-Path: <java-user-return-27540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46667 invoked from network); 11 Apr 2007 14:05:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 14:05:19 -0000
Received: (qmail 4670 invoked by uid 500); 11 Apr 2007 14:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4636 invoked by uid 500); 11 Apr 2007 14:05:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4624 invoked by uid 99); 11 Apr 2007 14:05:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 07:05:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 07:05:03 -0700
Received: by mu-out-0910.google.com with SMTP id i10so240624mue
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 07:04:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bTl0EktcHKQdRZRBhem8meHfNspRyTP8Du4zgsEIqKlBrywmu60XA9Bf/NK+qNV7CCnKD98zcz5lwWq+hNqfHpMqtjAdGnHhhzJOWDTTP1qtHZ8vsz3lJu09P4jgWsYZT701kRkURs1eoV8THdMGuzWKF2dVNgDE+ABgGKqL6r4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZDWX21MC8T/j2Dmk+4qxUAzK+jDgHpqPuCJH7TewSfu56Jo6EtTubWKE1IDOwU12voXHCYjTLvISScLoxFcZZ5abI1wVt2A+JDyhhc/vbWc2XYBvWzR84ggEuxt67O0gaBoCqvTCGVDykOvGwDIN7CjiibO3QstOyIHK6YSRhW8=
Received: by 10.82.167.5 with SMTP id p5mr866051bue.1176300281614;
        Wed, 11 Apr 2007 07:04:41 -0700 (PDT)
Received: by 10.82.119.10 with HTTP; Wed, 11 Apr 2007 07:04:41 -0700 (PDT)
Message-ID: <f81fa4180704110704mef44a69j1d1b90ead93f0e30@mail.gmail.com>
Date: Wed, 11 Apr 2007 10:04:41 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Ideas for a relevance score that could be considered stable across multiple searches with the same query structure?
In-Reply-To: <0315F020-F9E4-41FB-AABA-E02D2B5D0649@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f81fa4180704100504q142073c2n5ad0e88f0fff7579@mail.gmail.com>
	 <f81fa4180704101703x3c48d42ei529da26c6c8132ac@mail.gmail.com>
	 <0315F020-F9E4-41FB-AABA-E02D2B5D0649@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Not really.  The explain scores aren't normalized and I also couldn't
find a way to get the explain data as anything other than a whitespace
formatted text blob from Solr.  Keep in mind that they need confidence
factors from one query to the next.  With the explain scores, they can
have wildly different value ranges from query to query.  The reviewers
need to be able to see information about the top item of a particular
match. maybe in a layout along the lines of:

A
--     id     title
   title score     director                   director score     year
   year score     overall score
B
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
       A1    T3
                    Jonathan Mostow                             2003

         .3                                                  .7
                        1                  2.0
      B5    Terminator 3: Rise of the machines
    Mostow, J.                                      2003
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      A1    The Kid & I
               Penelope Spheeris                           2005

          .6                                                  0
                         .1                 0.7
       B5    The Kid
                 Jon Turteltaub                                  2000


On 4/10/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> On Apr 10, 2007, at 8:03 PM, Daniel Einspanjer wrote:
>
> > The people reviewing this matching process need some way of
> > determining why a particular match was made other than the overall
> > score.  Was it because the title was a perfect match or was it because
> > the title wasn't that close, but the director and year were dead on?
> >
>
> Does the explain() method shed any light for you?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 14:06:44 2007
Return-Path: <java-user-return-27541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47110 invoked from network); 11 Apr 2007 14:06:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 14:06:43 -0000
Received: (qmail 13565 invoked by uid 500); 11 Apr 2007 14:06:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13524 invoked by uid 500); 11 Apr 2007 14:06:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13512 invoked by uid 99); 11 Apr 2007 14:06:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 07:06:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 07:06:34 -0700
Received: by mu-out-0910.google.com with SMTP id i10so241332mue
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 07:06:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VXpMvCaRhg09Ri6hUNxH1pBIta2e1uy2KA25qzMHo0ss1PbpG0nBVj9H+Bd8Avl0k21jRYOGTQYqZ33kILwjf1p1QTLCEEk69AV3miyC4DDWhYuGGtJznrT4eA/cj9wPQ/u5iMTyaqF6TUHXuHrecSVgZsuaL1U0wfkEaT3OhNI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j6CIKwm74mWys+2+GQb9pX/hQnjhTg3xC4wHW2gg/TdWJcIlR90YKScQBBIaGO4rKNDMTFc/39fKM+xnKVPQqRGN0YnIb0NJOdigJvWxTHLNsoF6lP8Ek0AppDVeBxkw9wdToK8QpwqhV6ou3laAek2kLxIi/+LZnuyrvEV3YB4=
Received: by 10.82.178.11 with SMTP id a11mr868670buf.1176300372714;
        Wed, 11 Apr 2007 07:06:12 -0700 (PDT)
Received: by 10.82.119.10 with HTTP; Wed, 11 Apr 2007 07:06:12 -0700 (PDT)
Message-ID: <f81fa4180704110706q6b7a0deckd8838a181b01b4fb@mail.gmail.com>
Date: Wed, 11 Apr 2007 10:06:12 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Ideas for a relevance score that could be considered stable across multiple searches with the same query structure?
In-Reply-To: <f81fa4180704110704mef44a69j1d1b90ead93f0e30@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9260_15556009.1176300372554"
References: <f81fa4180704100504q142073c2n5ad0e88f0fff7579@mail.gmail.com>
	 <f81fa4180704101703x3c48d42ei529da26c6c8132ac@mail.gmail.com>
	 <0315F020-F9E4-41FB-AABA-E02D2B5D0649@apache.org>
	 <f81fa4180704110704mef44a69j1d1b90ead93f0e30@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9260_15556009.1176300372554
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Oh geeze. Gmail ripped my pretty table to shreds.  Let me try again:
A
--     id     title
title score     director                   director score     year     year
score     overall score
B
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      A1    T3
                                                              Jonathan
Mostow                             2003

.3
.7                                1                  2.0
      B5    Terminator 3: Rise of the machines
Mostow, J.                                      2003
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      A1    The Kid & I
                                                 Penelope Spheeris
                     2005

.6                                                  0
                                .1                 0.7
      B5    The Kid
                            Jon Turteltaub
2000



On 4/11/07, Daniel Einspanjer <deinspanjer@gmail.com> wrote:
> Not really.  The explain scores aren't normalized and I also couldn't
> find a way to get the explain data as anything other than a whitespace
> formatted text blob from Solr.  Keep in mind that they need confidence
> factors from one query to the next.  With the explain scores, they can
> have wildly different value ranges from query to query.  The reviewers
> need to be able to see information about the top item of a particular
> match. maybe in a layout along the lines of:

------=_Part_9260_15556009.1176300372554--

From java-user-return-27542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 14:28:32 2007
Return-Path: <java-user-return-27542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54397 invoked from network); 11 Apr 2007 14:28:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 14:28:31 -0000
Received: (qmail 70007 invoked by uid 500); 11 Apr 2007 14:28:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69978 invoked by uid 500); 11 Apr 2007 14:28:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69967 invoked by uid 99); 11 Apr 2007 14:28:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 07:28:29 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.234 as permitted sender)
Received: from [64.233.162.234] (HELO nz-out-0506.google.com) (64.233.162.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 07:28:21 -0700
Received: by nz-out-0506.google.com with SMTP id i1so134075nzh
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 07:28:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=YdtrYXTi1TZgg+ZL9wneuEei5Tz+9+VhUo/m1begcr3QDIxCOtl26f2u3oi+WCP4PMiFCrY5O5o3WqnA76nB14bTEJ7r7QaV4XjoYr4EysSdWgO2TpTYehRwLVLZnsGV8GDP5DylTUKxPhzYZikTNeuQkMwXWSvQDUnCulRNkc0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=iSZCsmqw9Oz7bHLimkrGNLuzC3SKYrnEY5NtBnlpTrI2xkn/CJ3xpXXe4SpSDYpQpZs86fEO7ssqUsnNJEf4D67a6xGSzra1AvllRpANS2RizZPhqtugIBcs9p5zubrSYzPqikzV7Hwx0K6gaJRiGYqQSzME9XBcNglsiO/Zo9w=
Received: by 10.114.174.2 with SMTP id w2mr287819wae.1176301679946;
        Wed, 11 Apr 2007 07:27:59 -0700 (PDT)
Received: by 10.114.108.2 with HTTP; Wed, 11 Apr 2007 07:27:59 -0700 (PDT)
Message-ID: <ae6f38f60704110727m64604574j42fcf25904b520e9@mail.gmail.com>
Date: Wed, 11 Apr 2007 10:27:59 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9181_30544596.1176301679613"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9181_30544596.1176301679613
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mike Klaas elaborates on syntax:
> +(-A +B) -> must match (-A +B) -> must contain B and must not contain A
> -(-A +B) -> must not match (-A +B) -> must not (match B and not contain A)

Ok, the take-away from this I'm getting is that these clauses read very much
like English and behave just the same.  Good, I can follow that.  Very clear
example, Mike; thanks.  I didn't realize that things reduced in the second
case as they did.  This helped a lot.


Chris Hostetter (Hoss) digs deeper regarding the creation of a BooleanQuery:
> This is a BooleanQuery containing 6 SHOULD clauses...
>    A B C D E F
> This is a BooleanQuery contain 2 SHOULD clauses, each containing 3
> SHOULD clauses...
>   (A B C) (D E F)
>
> ...those two queries will match on the same set of documents, but the
> scores will be very different because of the way the coord factor comes
> into play for *each* BooleanQuery in the hierarchy.

Hoss, again your insights have benefited my understanding.  What I'm getting
here is that it's not that I'm finding different documents, but rather it's
the same set and they will be ranked differently.

Can you point me at a resource that explains the ranking and coord factors?
I'm trying to understand scoring better.  Going to the BooleanQuery
documentation seemed more about function signatures for creating and using
the object rather than explaining what it was doing and how such decisions
affected the larger picture.
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/BooleanQuery.html

Seems that most online tutorials are about selecting documents, and I think
what you've led me to believe is that I'm more interested in how things are
ranked.


But, more importantly, I think with the above information this explains the
original question:

Does +(A1 A2 A3) +(B1 B2 B3) -(C1 C2 C3) find documents that have at least
one A -and- at least one B, but never any Cs?  ...to which I'm now given to
understand the answer is yes.  And understand why.

Thanks for everyone's help at patience!
-wls

------=_Part_9181_30544596.1176301679613--

From java-user-return-27543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 15:16:41 2007
Return-Path: <java-user-return-27543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70756 invoked from network); 11 Apr 2007 15:16:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 15:16:40 -0000
Received: (qmail 2991 invoked by uid 500); 11 Apr 2007 15:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2962 invoked by uid 500); 11 Apr 2007 15:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2951 invoked by uid 99); 11 Apr 2007 15:16:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 08:16:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 08:16:32 -0700
Received: by an-out-0708.google.com with SMTP id c3so225057ana
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 08:16:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jcitxRVe/uZ4/nD5f4oZXmxamYWZcIIoDg+FtmwTmOgtE3Img3sybPRmhyAo5c6aQlzvP34aU6odZzQn1pSwQ0puQWXsE5IPgODPEfIv1pCDB9D2JleQQ7rrCnksLSuA3jdrwcFlyZzmgPOci8V3gUqfUu4Mj8rHvdOkS4hSAJk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mmQ8HguAlT6WF7pDm6N/lixmP4qc3aQ6yMivW65Jy6rexbpt/ytZGkuHGxn+SjymUGlzm0Ub2Xh3TAzqQ1YhPageri15FCRd2HJhDgYxKi4oJtPSEsioj3zbrygNtshGge9dRkSXrEvEny0UoKUa+EMN6LxleRYAsr/o8aMCEpo=
Received: by 10.100.106.5 with SMTP id e5mr492033anc.1176304571456;
        Wed, 11 Apr 2007 08:16:11 -0700 (PDT)
Received: by 10.100.127.15 with HTTP; Wed, 11 Apr 2007 08:16:11 -0700 (PDT)
Message-ID: <a258c0620704110816l230d1963x356e8fb56a64500e@mail.gmail.com>
Date: Wed, 11 Apr 2007 08:16:11 -0700
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to access Levenstein distance number?
In-Reply-To: <359a92830704110643v29af6843x1b5755b21dc0593d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14668_10042611.1176304571412"
References: <a258c0620704102306t5b97d001w8007bccee26c9b57@mail.gmail.com>
	 <92023240-73B3-4790-842A-A0D7CA9288AB@apache.org>
	 <a258c0620704110637j379d17cejcae4f24aa48a397@mail.gmail.com>
	 <359a92830704110643v29af6843x1b5755b21dc0593d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14668_10042611.1176304571412
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you Erick!  Will give it a shot!

On 4/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Go for a HitCollector. In particular, TopDocs will give you the raw
> scores.
>
> Erick
>
> On 4/11/07, Michael Barbarelli <mbarbarelli@gmail.com> wrote:
> >
> > Hi Grant.
> >
> > Yes, I'm getting the score from the Hits collection.  And yes, they get
> > normalized to 1; which is what I don't want.
> >
> > Or, I can leave the Hits objects as is, but I know Lucene also must
> > calculate a raw difference as part of the overall score calculation.
> > How can I get at that value?
> >
> > Thanks!
> >
> > Mike
> >
> >
> > On 4/11/07, Grant Ingersoll <gsingers@apache.org> wrote:
> > >
> > > Have you looked at the explains to see what is coming out of the
> > > FuzzyQuery?  Also, are you using Hits to get that score?  Scores get
> > > normalized to 1 by that process.
> > >
> > > -Grant
> > > On Apr 11, 2007, at 2:06 AM, Michael Barbarelli wrote:
> > >
> > > > Hello.
> > > >
> > > > I am using Lucene to submit fuzzy queries against an index. I have
> > > > noticed
> > > > that relevant matches are often retreived, but the scoring is not
> > > > at all
> > > > what I expected.
> > > >
> > > > For example, if my query is "rightches~", a reference to a text
> > > > file with
> > > > the single word "righteous" is returned with a score of 100 percent.
> > > > However, I think the actual score should be somewhere in the
> > > > neighborhood of
> > > > .66, not 1. Anyone follow me?  Degree of similarity is what I want
> > > > in this
> > > > case.
> > > >
> > > > But Lucene score does not take into account how well a term matches
> a
> > > > FuzzyQuery. That just seems to be the way Lucene is built
> > > > currently. The
> > > > score is based on term frequency of the actual matching term.
> > > > FuzzyQuery
> > > > gets rewritten as a BooleanQuery with all matching terms OR'd.
> > > >
> > > > Degree of similarity is what I want in this case.  When
> > > > "rightches~" matches
> > > > "rightheous", I should get a similarity score of about .66.
> > > >
> > > > What I want is to get at the raw difference that Lucene uses:  the
> > > > Levenstein distance algorithm.  I think I'll need to use the code in
> > > > FuzzyTermEnum.java (or .cs) as a starting point. I figure I can can
> > > > probably
> > > > use that code directly somehow, or at least borrow the similarity
> > > > computation.
> > > >
> > > > Frankly, though, I'm not sure I'm treading down the right path on
> > > > this.  Can
> > > > anyone help with specifics, past experience, or examples?
> > > >
> > > > Cheers,
> > > > Mike
> > >
> > > --------------------------
> > > Grant Ingersoll
> > > Center for Natural Language Processing
> > > http://www.cnlp.org
> > >
> > > Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> > > LuceneFAQ
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_14668_10042611.1176304571412--

From java-user-return-27544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 15:28:28 2007
Return-Path: <java-user-return-27544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78751 invoked from network); 11 Apr 2007 15:28:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 15:28:27 -0000
Received: (qmail 29456 invoked by uid 500); 11 Apr 2007 15:28:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29423 invoked by uid 500); 11 Apr 2007 15:28:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29412 invoked by uid 99); 11 Apr 2007 15:28:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 08:28:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssiren@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 08:28:20 -0700
Received: by ug-out-1314.google.com with SMTP id k40so135220ugc
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 08:27:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:x-enigmail-version:content-type:content-transfer-encoding;
        b=uQFCZHhJjgquOIZk8iQhd+l2u64lCAbKahJX6UOiBQb5NYkvKmEUUbjOrK7aDq4wxaucuy1thll/feAyKhHQ8LTOCpdUzh70Ehsp9xk6ZAt08qjgeERiBHJqGfVzjAgYy4lB6S0NmqsuE68emktGus76fSulHDAXSZpJJ9XMCfE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:x-enigmail-version:content-type:content-transfer-encoding;
        b=ZJzzmiT9o8A7CNFJ/jaZ4gfRMQFuZPNgnkhZhsjAgMTKI5DFG0yekJ/tqXT/CNKgQI9+XMQqFzBlEFqhB8Ho6WMuNScAIRXulVu+n1HHF/IHTLL0TshMAgMTLsf9KwqvTvow2Givk+pxK3PQ8LdRUvG8/XobgJYCR6jlV2UOMCw=
Received: by 10.82.178.11 with SMTP id a11mr1015026buf.1176305278842;
        Wed, 11 Apr 2007 08:27:58 -0700 (PDT)
Received: from ?84.231.94.188? ( [84.231.94.188])
        by mx.google.com with ESMTP id c25sm137801ika.2007.04.11.08.27.58;
        Wed, 11 Apr 2007 08:27:58 -0700 (PDT)
Message-ID: <461CFE7B.5050904@gmail.com>
Date: Wed, 11 Apr 2007 18:27:55 +0300
From: Sami Siren <ssiren@gmail.com>
User-Agent: Thunderbird 1.5.0.10 (X11/20070301)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene BOF @ apachecon.eu ?
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Are there any plans to put together a Lucene BOF at Amsterdam?

--
 Sami Siren



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 15:52:48 2007
Return-Path: <java-user-return-27545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93451 invoked from network); 11 Apr 2007 15:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 15:52:46 -0000
Received: (qmail 86429 invoked by uid 500); 11 Apr 2007 15:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86379 invoked by uid 500); 11 Apr 2007 15:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86359 invoked by uid 99); 11 Apr 2007 15:52:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 08:52:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 08:52:37 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id E857614D6B2
	for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 08:52:14 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <461CFE7B.5050904@gmail.com>
References: <461CFE7B.5050904@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0A480D05-44CF-402C-9BAD-9D2B1C1737DB@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Lucene BOF @ apachecon.eu ?
Date: Wed, 11 Apr 2007 11:52:13 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

+1

On Apr 11, 2007, at 11:27 AM, Sami Siren wrote:

> Are there any plans to put together a Lucene BOF at Amsterdam?
>
> --
>  Sami Siren
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 15:55:19 2007
Return-Path: <java-user-return-27546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94583 invoked from network); 11 Apr 2007 15:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 15:55:18 -0000
Received: (qmail 94776 invoked by uid 500); 11 Apr 2007 15:55:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94745 invoked by uid 500); 11 Apr 2007 15:55:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94723 invoked by uid 99); 11 Apr 2007 15:55:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 08:55:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mathias.herberts@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 08:55:05 -0700
Received: by wx-out-0506.google.com with SMTP id i29so230288wxd
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 08:54:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uCpU6VqbW5f7XFUQZGPg5CxzLFljoR4sbJHnscZueQu6cB66ehXiooXRdRhegcB80YkRSWP9L0bM0Uu6eAAskm2tMmOoHn6mo1OyAn1OBhpMjyMEt83W3q93dvep5z/UFlpZCwPb8kenrlVw6wCYBn5aCUbNyNSjtLVgmpPwrLc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qsmGC65e5UqHNTsVD42k1Rwec0/HhKC8VRpi5UXzLC3ea+2zfKmezacUp/LwQivwx5d0ebRmpfHH2rqeSwbpEJk+cWudjdQkbFNQ/Pkv2zSE8chv7lTqeXeFUulSFDmd6y3XvhLsM7xGSan5M3DptcPw/mIA3tBHHei2bI2NaOU=
Received: by 10.70.52.5 with SMTP id z5mr1448139wxz.1176306885080;
        Wed, 11 Apr 2007 08:54:45 -0700 (PDT)
Received: by 10.70.132.18 with HTTP; Wed, 11 Apr 2007 08:54:45 -0700 (PDT)
Message-ID: <1c5747850704110854m3e01918jdb9a256eaffe86c2@mail.gmail.com>
Date: Wed, 11 Apr 2007 17:54:45 +0200
From: "Mathias Herberts" <mathias.herberts@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene BOF @ apachecon.eu ?
In-Reply-To: <0A480D05-44CF-402C-9BAD-9D2B1C1737DB@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <461CFE7B.5050904@gmail.com>
	 <0A480D05-44CF-402C-9BAD-9D2B1C1737DB@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

+1

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 16:42:27 2007
Return-Path: <java-user-return-27547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12874 invoked from network); 11 Apr 2007 16:42:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 16:42:26 -0000
Received: (qmail 5693 invoked by uid 500); 11 Apr 2007 16:42:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5668 invoked by uid 500); 11 Apr 2007 16:42:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5657 invoked by uid 99); 11 Apr 2007 16:42:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 09:42:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 09:42:18 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HbftL-00057e-Rk
	for java-user@lucene.apache.org; Wed, 11 Apr 2007 09:41:55 -0700
Message-ID: <9943309.post@talk.nabble.com>
Date: Wed, 11 Apr 2007 09:41:55 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue with : Searcher.search() returning Hits of same length
 for different searches
In-Reply-To: <359a92830704110620l6991b4cbjf4ff6ad9fcba8f1d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
References: <9933089.post@talk.nabble.com> <359a92830704110620l6991b4cbjf4ff6ad9fcba8f1d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply. I should have given more information and will keep in
mind this for my future queries.
Regarding this one I have already done most of things you have asked like:

1. I am confirming what query is getting executed by using query.toString()
2. I read lot of posts in the forum particulary,
http://www.nabble.com/Search-matching-tf2030477.html#a5585431
http://wiki.apache.org/lucene-java/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71

I made sure all the above except the case that analyzer used is not the
simple one, which I will now test with some simple one. I like to point out
that my issue is unique for which I didn't see any posts in the forum :
Getting Same number of documents in the Hits when I test for a different set
of queries.



Erick Erickson wrote:
> 
> Well, there's nothing here to help you with, since you haven't provided
> any information to diagnose. Like:
> 
> What queries are actually produced in the different cases?
> Use query.toString().
> 
> I'm immediately suspicious of any statement that "my custom
> code shouldn't be the problem". Try the test again using
> one of the simplest analyzers you can.
> 
> Have you used Luke to query your index interactively and see
> what the results are? Or how the queries parse?
> 
> Please, when asking for help, try looking at the question
> you're asking from the perspective of someone who knows
> nothing about your code. Imagine that a coworker had asked
> you such a question.
> 
> Best
> Erick
> 
> On 4/11/07, Lokeya <lokeya@gmail.com> wrote:
>>
>>
>> I am following all the points which are mentioned in the following link:
>>
>>
>> http://wiki.apache.org/lucene-java/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71
>>
>> I am having the following issues:
>>
>> 1. For different Queries I give I get a Hits object where there are
>> always
>> 21 documents, but getting different set but same number everytime. Also
>> not
>> all documents have the query term which I have set.
>>
>> I have extended the Analyzer and using a new class
>> :StopStemmingAnalyzer.java. But that should not be the issue because I am
>> using that again for searching. Also I use  Field.Store.YES,
>> Field.Index.TOKENIZED for indexing.
>>
>> Help Appreciated.
>> --
>> View this message in context:
>> http://www.nabble.com/Issue-with-%3A-Searcher.search%28%29-returning-Hits-of-same-length-for-different-searches-tf3557277.html#a9933089
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Issue-with-%3A-Searcher.search%28%29-returning-Hits-of-same-length-for-different-searches-tf3557277.html#a9943309
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 16:51:39 2007
Return-Path: <java-user-return-27548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15637 invoked from network); 11 Apr 2007 16:51:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 16:51:38 -0000
Received: (qmail 24117 invoked by uid 500); 11 Apr 2007 16:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24079 invoked by uid 500); 11 Apr 2007 16:51:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23984 invoked by uid 99); 11 Apr 2007 16:51:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 09:51:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 09:51:21 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hbg29-0001HN-FV
	for java-user@lucene.apache.org; Wed, 11 Apr 2007 09:51:01 -0700
Message-ID: <9943315.post@talk.nabble.com>
Date: Wed, 11 Apr 2007 09:51:01 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue with : Searcher.search() returning Hits of same length
 for different searches
In-Reply-To: <359a92830704110620l6991b4cbjf4ff6ad9fcba8f1d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
References: <9933089.post@talk.nabble.com> <359a92830704110620l6991b4cbjf4ff6ad9fcba8f1d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply. I should have given more information and will keep in
mind this for my future queries.
Regarding this one I have already done most of things you have asked like:

1. I am confirming what query is getting executed by using query.toString()
2. I read lot of posts in the forum particulary,
http://www.nabble.com/Search-matching-tf2030477.html#a5585431
http://wiki.apache.org/lucene-java/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71

I made sure all the above except the case that analyzer used is not the
simple one, which I will now test with some simple one. I like to point out
that my issue is unique for which I didn't see any posts in the forum :
Getting Same number of documents in the Hits when I test for a different set
of queries.



Erick Erickson wrote:
> 
> Well, there's nothing here to help you with, since you haven't provided
> any information to diagnose. Like:
> 
> What queries are actually produced in the different cases?
> Use query.toString().
> 
> I'm immediately suspicious of any statement that "my custom
> code shouldn't be the problem". Try the test again using
> one of the simplest analyzers you can.
> 
> Have you used Luke to query your index interactively and see
> what the results are? Or how the queries parse?
> 
> Please, when asking for help, try looking at the question
> you're asking from the perspective of someone who knows
> nothing about your code. Imagine that a coworker had asked
> you such a question.
> 
> Best
> Erick
> 
> On 4/11/07, Lokeya <lokeya@gmail.com> wrote:
>>
>>
>> I am following all the points which are mentioned in the following link:
>>
>>
>> http://wiki.apache.org/lucene-java/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71
>>
>> I am having the following issues:
>>
>> 1. For different Queries I give I get a Hits object where there are
>> always
>> 21 documents, but getting different set but same number everytime. Also
>> not
>> all documents have the query term which I have set.
>>
>> I have extended the Analyzer and using a new class
>> :StopStemmingAnalyzer.java. But that should not be the issue because I am
>> using that again for searching. Also I use  Field.Store.YES,
>> Field.Index.TOKENIZED for indexing.
>>
>> Help Appreciated.
>> --
>> View this message in context:
>> http://www.nabble.com/Issue-with-%3A-Searcher.search%28%29-returning-Hits-of-same-length-for-different-searches-tf3557277.html#a9933089
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Issue-with-%3A-Searcher.search%28%29-returning-Hits-of-same-length-for-different-searches-tf3557277.html#a9943315
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 17:09:00 2007
Return-Path: <java-user-return-27549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20310 invoked from network); 11 Apr 2007 17:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 17:08:59 -0000
Received: (qmail 67126 invoked by uid 500); 11 Apr 2007 17:08:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67099 invoked by uid 500); 11 Apr 2007 17:08:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67040 invoked by uid 99); 11 Apr 2007 17:08:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 10:08:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 10:08:48 -0700
Received: from [192.168.1.4] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id C1F5034AA5
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 02:08:25 +0900 (JST)
Message-ID: <461D15D6.5080408@r.email.ne.jp>
Date: Thu, 12 Apr 2007 02:07:34 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: strange idf in Lucene 2.1
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have the following three documents in my index:

- Java programming is required to write Lucene application.
- Java is a popular computer language. I like Java.
- Perl is not a kind of jewelry. It is a programming language.

With Lucene 2.0, if I search "java" and print explanation, the output is:

1 0.53033006 Java is a popular computer language. I like Java.
0.53033006 = fieldWeight(text:java in 1), product of:
1.4142135 = tf(termFreq(text:java)=2)
1.0 = idf(docFreq=2)
0.375 = fieldNorm(field=text, doc=1)

0 0.375 Java programming is required to write Lucene application.
0.375 = fieldWeight(text:java in 0), product of:
1.0 = tf(termFreq(text:java)=1)
1.0 = idf(docFreq=2)
0.375 = fieldNorm(field=text, doc=0)

But when I use Lucene 2.1, the output is:

4 0.62702066 Java is a popular computer language. I like Java.
0.62702066 = (MATCH) fieldWeight(text:java in 4), product of:
1.4142135 = tf(termFreq(text:java)=2)
1.1823215 = idf(docFreq=4)
0.375 = fieldNorm(field=text, doc=4)

3 0.44337058 Java programming is required to write Lucene application.
0.44337058 = (MATCH) fieldWeight(text:java in 3), product of:
1.0 = tf(termFreq(text:java)=1)
1.1823215 = idf(docFreq=4)
0.375 = fieldNorm(field=text, doc=3)

I don't understand why the idf is not 1.0 (and docFreq is not 2)
when I use Lucene 2.1.

The program is attached at the bottom of this mail.
In the program, I added these three documents to the index,
then deleted all of them, and then added them to the index on purpose.
If I optimize the index, idf gets into 1.0 with Lucene 2.1 (uncomment in
the program).
Is it a feature?

Thank you,

Koji

---

public class Test1 {

private static String[] contents = {
"Java programming is required to write Lucene application.",
"Java is a popular computer language. I like Java.",
"Perl is not a kind of jewelry. It is a programming language."
};
private static String F = "text";
private static String QUERY = "java";
private static Analyzer analyzer = new StandardAnalyzer();
private static Directory dir = new RAMDirectory();

public static void main(String[] args) throws IOException {
makeIndex( true );
deleteAll();
makeIndex( false );
searchIndex();
}

private static void makeIndex( boolean create ) throws IOException{
IndexWriter writer = new IndexWriter( dir, analyzer, create );
for( String content : contents ){
Document doc = new Document();
doc.add( new Field( F, content, Store.YES, Index.TOKENIZED ) );
writer.addDocument( doc );
}
//writer.optimize();
writer.close();
}

private static void deleteAll() throws IOException{
IndexReader reader = IndexReader.open( dir );
int max = reader.maxDoc();
for( int i = 0; i < max; i++ )
reader.deleteDocument( i );
reader.close();
}

private static void searchIndex() throws IOException{
IndexSearcher searcher = new IndexSearcher( dir );
Query query = new TermQuery( new Term( F, QUERY ) );
Hits hits = searcher.search( query );
for( int i = 0; i < hits.length(); i++ ){
int id = hits.id( i );
float score = hits.score( i );
Document doc = hits.doc( i );
System.out.println( id + "\t" + score + "\t" + doc.get( F ) );
Explanation exp = searcher.explain( query, id );
System.out.println( exp.toString() );
}
searcher.close();
}
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 17:20:46 2007
Return-Path: <java-user-return-27550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22273 invoked from network); 11 Apr 2007 17:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 17:20:45 -0000
Received: (qmail 85298 invoked by uid 500); 11 Apr 2007 17:20:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85264 invoked by uid 500); 11 Apr 2007 17:20:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85253 invoked by uid 99); 11 Apr 2007 17:20:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 10:20:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 10:20:38 -0700
Received: by mu-out-0910.google.com with SMTP id i10so322769mue
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 10:20:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=oRo9Bmc45p8Zc6bE4f5n7Cx/UGAzrRhIS7Ik/Fg0BsePE7eMBozortfk8LRW46SRiyiCPVVOvoLp9gd6u5z3dFTkdQOKf13XVDKIrV4P48GGEePWKY+kqeWdJHx7qXUIozDRpXs0Ame5kiyNoOBPYKomRFk3OfzPQu1BYKCD5pI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ra5D5E6yeJeZbgk3x807ISOFRt3K32wnjFkNND+FKJyTLlsWVXWnNphxFNp0JxxtHZcIrf0pJ2ySPavQ6la/TS0NEEN7AmWwvFmkfDX3GGq5gx1FC9xK37unIjKUwqmqv5U590+BtCcb3DVwGP7DqB0ts6L/wKky3NEXYqi6rZE=
Received: by 10.82.188.15 with SMTP id l15mr1229450buf.1176312017155;
        Wed, 11 Apr 2007 10:20:17 -0700 (PDT)
Received: by 10.82.106.19 with HTTP; Wed, 11 Apr 2007 10:20:17 -0700 (PDT)
Message-ID: <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
Date: Wed, 11 Apr 2007 13:20:17 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
In-Reply-To: <461D15D6.5080408@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <461D15D6.5080408@r.email.ne.jp>
X-Google-Sender-Auth: 73644c7b8f3fae67
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/11/07, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
> In the program, I added these three documents to the index,
> then deleted all of them, and then added them to the index on purpose.
> If I optimize the index, idf gets into 1.0 with Lucene 2.1 (uncomment in
> the program).
> Is it a feature?

docfreqs (idfs) do not take into account deleted docs.
This is more of an engineering tradeoff rather than a feature.
If we could cheaply and easily update idfs when documents are deleted
from an index, we would.

This should be the same for Lucene 2.0 and 2.1.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 17:57:10 2007
Return-Path: <java-user-return-27551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31808 invoked from network); 11 Apr 2007 17:57:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 17:57:10 -0000
Received: (qmail 65302 invoked by uid 500); 11 Apr 2007 17:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65264 invoked by uid 500); 11 Apr 2007 17:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65233 invoked by uid 99); 11 Apr 2007 17:57:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 10:57:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 10:57:00 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D3AC15B773; Wed, 11 Apr 2007 10:56:39 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C7A7B7F403
	for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 10:56:39 -0700 (PDT)
Date: Wed, 11 Apr 2007 10:56:39 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior
In-Reply-To: <ae6f38f60704110727m64604574j42fcf25904b520e9@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704111051440.30015@hal.rescomp.berkeley.edu>
References: <ae6f38f60704110727m64604574j42fcf25904b520e9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: here is that it's not that I'm finding different documents, but rather it's
: the same set and they will be ranked differently.
:
: Can you point me at a resource that explains the ranking and coord factors?
: I'm trying to understand scoring better.  Going to the BooleanQuery

The best resource for stuff like this is the Scoring docs...

http://lucene.apache.org/java/docs/scoring.html

...it serves double duty as an explanation of hte underlying
Query/Weight/Scorer interaction works, but also gets ito the basics of the
"core" query/scorer classes (TermQuery, BooleanQuery, etc.)

The best way to understand this however is to try some examples and look
at the Explaination output for varoius queries and various documents.

Even though those Explanations are computed using an alternate code path,
a *LOT* of effort went into making sure they give na accurate picture into
why docs score the way they do against arbitrary query structures -- even
if they don't match at all)

(I know, because i'm the one that wrote all the test cases)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 18:54:16 2007
Return-Path: <java-user-return-27552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52487 invoked from network); 11 Apr 2007 18:54:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 18:54:15 -0000
Received: (qmail 82549 invoked by uid 500); 11 Apr 2007 18:54:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82521 invoked by uid 500); 11 Apr 2007 18:54:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82501 invoked by uid 99); 11 Apr 2007 18:54:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 11:54:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 11:54:05 -0700
Received: (qmail 31333 invoked from network); 11 Apr 2007 18:53:43 -0000
Received: from unknown (HELO p5b0dcd12.dip.t-dialin.net) ([pbs]695637@[91.13.205.18])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay08.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 11 Apr 2007 18:53:43 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Issue with : Searcher.search() returning Hits of same length for different searches
Date: Wed, 11 Apr 2007 20:55:01 +0200
User-Agent: KMail/1.8.2
References: <9933089.post@talk.nabble.com> <359a92830704110620l6991b4cbjf4ff6ad9fcba8f1d@mail.gmail.com> <9943315.post@talk.nabble.com>
In-Reply-To: <9943315.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704112055.02088@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 11 April 2007 18:51, Lokeya wrote:

> Thanks for your reply. I should have given more information and will
> keep in mind this for my future queries.

If nothing else helps, please write a small, standalone test-case that 
shows the problem. This can then easily be debugged by someone else (but 
often you find the problem yourself when writing the test case).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 19:23:56 2007
Return-Path: <java-user-return-27553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65815 invoked from network); 11 Apr 2007 19:23:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 19:23:54 -0000
Received: (qmail 35294 invoked by uid 500); 11 Apr 2007 19:23:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35266 invoked by uid 500); 11 Apr 2007 19:23:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35255 invoked by uid 99); 11 Apr 2007 19:23:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 12:23:52 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saihariharan@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 12:23:45 -0700
Received: by an-out-0708.google.com with SMTP id c3so315439ana
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 12:23:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=qArZnoCGvqDzexEOkVIXI07LT2jjxGlJRRpHTSzw4TOIrkCBSk6YqGLe8TB2zY9cI2MNWavAzooehO9QQ+JU7a41c2B4ln0yuOAIoLSuZ5Kkj5oRzERxDX21z8G9+0gGqk4Egq4NVeKDd1Y1v3MEbPJWxf+p92s3lCRg7r4Arvw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Gdv8BivxXtSDVPGTeSF2sw7o5b+OLCKJPWMRWg0daOqoywBqEI2NE6qZ6z74AFCAWGR8ZSXfz9oBjJfk937A12emiue7dbti9Zl0mkGI2ImC0/pn4wb1vsGdQTbfUEJ4NLsWcjVBXCRwnbeUEL5I99um8mzS/ukI3ydSfTBcW7s=
Received: by 10.100.57.14 with SMTP id f14mr743402ana.1176319404795;
        Wed, 11 Apr 2007 12:23:24 -0700 (PDT)
Received: by 10.100.38.11 with HTTP; Wed, 11 Apr 2007 12:23:24 -0700 (PDT)
Message-ID: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
Date: Thu, 12 Apr 2007 00:53:24 +0530
From: "sai hariharan" <saihariharan@gmail.com>
To: java-user@lucene.apache.org
Subject: Term frequency
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19389_28727983.1176319404753"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19389_28727983.1176319404753
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGksCkkndmUganVzdCBzdGFydGVkIHVzaW5nIEx1Y2VuZS4gQ2FuIGFueWJvZHkgYXNzaXN0IG1l
IGluIGNhbGN1bGF0aW5nCnRoZSB0ZXJtIGZyZXF1ZW5jaWVzIG9mIHRoZSB0ZXJtcyh3b3Jkcykg
dGhhdCBvY2N1ciBpbiBhIGRvY3VtZW50KCoudHh0KSwKd2hlbiBhIHBhcnRpY3VsYXIgZG9jIGlz
IHN1Ym1pdHRlZC4KClNheSB3aGVuIGkgc3VibWl0IHNhbXBsZS50eHQgLCBpIHNob3VsZCBmaXJz
dCBhbmFseXplIHRoZSBkb2N1bWVudAp3aXRoIGEgc3RhbmRhcmQgYW5seXplciwgdGhlbiB0aGUg
dGVybSBmcmVxdWVuY2llcyBzaG91bGQgYmUgY2FsY3VsYXRlZApmb3IgZWFjaCBhbmQgZXZlcnkg
dGVybSBpbiB0aGF0IGRvY3VtZW50LgoKVGhhbmtzIGluIGFkdmFuY2UKLS0gCuCumuCuvuCur+Cv
jSBIYXJpCg==
------=_Part_19389_28727983.1176319404753--

From java-user-return-27554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 20:01:37 2007
Return-Path: <java-user-return-27554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80537 invoked from network); 11 Apr 2007 20:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 20:01:37 -0000
Received: (qmail 3301 invoked by uid 500); 11 Apr 2007 20:01:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3263 invoked by uid 500); 11 Apr 2007 20:01:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3252 invoked by uid 99); 11 Apr 2007 20:01:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 13:01:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.147.137.18] (HELO ntgwgate.loc.gov) (140.147.137.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 13:01:28 -0700
Received: from LCHub-MTA by ntgwgate.loc.gov
	with Novell_GroupWise; Wed, 11 Apr 2007 16:00:50 -0400
Message-Id: <461D0628020000480001068B@ntgwgate.loc.gov>
X-Mailer: Novell GroupWise Internet Agent 7.0.1 
Date: Wed, 11 Apr 2007 16:00:40 -0400
From: "David Woodward" <dwoo@loc.gov>
To: <java-user@lucene.apache.org>
Subject: Unicode Normalization
References: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
In-Reply-To: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi.

I have encountered a problem searching in my application because of =
inconsistant unicode normalization forms in the corpus (and the queries). =
I would like to normalize to form NFKD in an analyzer (I think). I was =
thinking about creating a filter similar to the lowercasefilter that would =
do the unicode normalization. Then I will add that filter to my existing =
snowball analyzer. I am about to embark on creating said analyzer/filter =
using the ICU (http://icu-project.org/) icu4j jar.

Is this already accounted for in standard lucene somewhere and I'm just =
missing it?

Anything similar out there?

Any other advice?

Thanks,
Dave Wooodward
Library of Congress


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 20:29:50 2007
Return-Path: <java-user-return-27555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89469 invoked from network); 11 Apr 2007 20:29:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 20:29:49 -0000
Received: (qmail 41951 invoked by uid 500); 11 Apr 2007 20:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41899 invoked by uid 500); 11 Apr 2007 20:29:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41887 invoked by uid 99); 11 Apr 2007 20:29:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 13:29:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 13:29:42 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id BF93CB8370
	for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 13:29:20 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
References: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <083C52C0-E5AA-440E-88F1-66E73221A732@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Term frequency
Date: Wed, 11 Apr 2007 16:29:19 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Add Term Vectors to your Field during indexing.  See the Field =20
constructors.  To get a Term Vector out, see =20
IndexReader.getTermFreqVector method.

-Grant

On Apr 11, 2007, at 3:23 PM, sai hariharan wrote:

> Hi,
> I've just started using Lucene. Can anybody assist me in calculating
> the term frequencies of the terms(words) that occur in a document=20
> (*.txt),
> when a particular doc is submitted.
>
> Say when i submit sample.txt , i should first analyze the document
> with a standard anlyzer, then the term frequencies should be =20
> calculated
> for each and every term in that document.
>
> Thanks in advance
> --=20
> =E0=AE=9A=E0=AE=BE=E0=AE=AF=E0=AF=8D Hari

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/=20
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 20:33:34 2007
Return-Path: <java-user-return-27556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90786 invoked from network); 11 Apr 2007 20:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 20:33:34 -0000
Received: (qmail 46517 invoked by uid 500); 11 Apr 2007 20:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46491 invoked by uid 500); 11 Apr 2007 20:33:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46480 invoked by uid 99); 11 Apr 2007 20:33:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 13:33:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [81.169.146.190] (HELO mo-p07-ob.rzone.de) (81.169.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 13:33:25 -0700
Received: from [192.168.178.20]
	(p57BB0B6A.dip0.t-ipconnect.de [87.187.11.106])
	by post.webmailer.de (klopstock mo64) (RZmta 5.5)
	with ESMTP id G073a6j3BF81Mo for <java-user@lucene.apache.org>;
	Wed, 11 Apr 2007 22:33:02 +0200 (MEST)
From: "Steffen Heinrich" <lucene-users@atablis.com>
To: java-user@lucene.apache.org
Date: Wed, 11 Apr 2007 22:32:50 +0200
MIME-Version: 1.0
Subject: Turning PrefixQuery into a TermQuery
Message-ID: <461D6212.26693.2FF801A@lucene-users.atablis.com>
Priority: normal
X-mailer: Pegasus Mail for Windows (4.31, DE v4.31 R1)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Content-description: Mail message body
X-RZG-AUTH: jtz0MUsFuuf6oFDp3IiuuL5tq2uJr2xgKjtNOWqOfpGIlwVGYmele5T0IBw8Q45patn2
X-RZG-CLASS-ID: mo07
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Lucene users,

I'm rather new to lucene and java but have done work with other 
search engines some time before.
Right now I'm trying my hands (and luck) on a 'search as you type'-
sort of high performance search a la GoogleSuggest.

There meanwhile are on the net, a number of examples for such script-
driven forms that are suggesting new possible input to the user with 
every keystroke. Mostly for some sort of products.
Some instances are even combining the input from two or more text 
fields or giving fault tolerant feedback.

According to occasional references on this list some people have 
already tried to implement such a search with lucene but did they 
succeed?

My first idea was to run every completed token of the request 
(current user input) through a spellchecker and expand an incomplete 
token to a PrefixQuery.

Example:
artist:'beetles'
title:'yellow submar'

Alternative terms for 'beetles' and 'yellow' would be looked up by 
Spellcheckers for their respective fields and 'submar' being the last 
token of the active textfield with no trailing whitespace would be 
turned into a PrefixQuery.
And of course the performance considerations have to be of major 
concern with these searches.

I'm currently dealing with the problem that short prefixes are 
resulting in BooleanQuery$TooManyClauses exceptions.
That's why I've thought of discarding them in favour of extra fields 
with the first bigrams and trigrams of every indexed token.

artist:'the beatles'
artist_start:'be bea'    ('the' being a stopword)
title:'yellow submarine'
title_start:'ye yel su sub'

Every PrefixQuery of length 2 or 3 could thus be turned into a simple 
TermQuery on the appropriate field. (With searches for 1-letter-
prefixes altogether discarded.)

I've seen Otis Gospodnetic suggesting the very same strategy in a 
former thread but I have no idea about how I could possibly add these 
extra fields.

Normally an IndexWriter uses only one default Analyzer for all its 
tokenizing businesses. And while it is appearantly possible to supply 
a certain other instance when adding a specific document there seems 
to be no way to use different analyzers on different fields within 
one document.

Could this be done in one pass at all, or do I have to copy all 
documents from one index to a new one, parsing field tokens and 
adding new fields on the 2nd go?

I'd appreciate every hint and suggestion on what classes and methods 
to write for this purpose because I definitely lack a knack when it 
comes to OOP.


Thank You In Advance,
Steffen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 21:13:55 2007
Return-Path: <java-user-return-27557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12558 invoked from network); 11 Apr 2007 21:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 21:13:54 -0000
Received: (qmail 20230 invoked by uid 500); 11 Apr 2007 21:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20206 invoked by uid 500); 11 Apr 2007 21:13:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20195 invoked by uid 99); 11 Apr 2007 21:13:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 14:13:53 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 14:13:46 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l3BLDBo9022014
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 00:13:11 +0300
Received: from [10.142.3.11] ([10.142.3.11]) by nimitz with ESMTP
	 id m4c0chqp; 12 Apr 2007 00:12:00 +0300
Message-ID: <461D4F62.1050909@teamware.com>
Date: Thu, 12 Apr 2007 07:13:06 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Turning PrefixQuery into a TermQuery
References: <461D6212.26693.2FF801A@lucene-users.atablis.com>
In-Reply-To: <461D6212.26693.2FF801A@lucene-users.atablis.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 12 Apr 2007 00:13:11 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Steffen Heinrich wrote:
> Normally an IndexWriter uses only one default Analyzer for all its 
> tokenizing businesses. And while it is appearantly possible to supply 
> a certain other instance when adding a specific document there seems 
> to be no way to use different analyzers on different fields within 
> one document.

Use the PerFieldAnalyzerWrapper.

http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html

It allows different analyzers to be used for different fields.
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 22:06:09 2007
Return-Path: <java-user-return-27558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41788 invoked from network); 11 Apr 2007 22:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 22:06:08 -0000
Received: (qmail 6993 invoked by uid 500); 11 Apr 2007 22:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6951 invoked by uid 500); 11 Apr 2007 22:06:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6940 invoked by uid 99); 11 Apr 2007 22:06:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 15:06:06 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 15:05:58 -0700
Received: by mu-out-0910.google.com with SMTP id i10so418466mue
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 15:05:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WKT90yj7IJAU7SZe/McgWCsJ3BGjTGCZj68quW2SW2q6zAXCc3VbEiQeGK9A5RIimtz7UDg04jXPWcSzF3gV9HopvwAzwGc/fZKOptJ3VqPRb1WdoiMRy8Mt5b26hzobFaNDFJgELoPSDKipI+QcKBhID/n+L4n3s8uW6hhU/vk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gm+6QBVFcMTROjaqZUKZ+Oi/G9DNthsdC9ARXRCdbv+kpTWJqpAS0fhuibgTF4XoUiXc0vqmH80/PhJxjXQxGIisIqaD5xKjc7VDTVzZLz1NIAa92pdjEUDdZFx7o8QodwEARzyNkSOUgZ3GxjAybkFxD7n0aMqdqTUtxrELQLE=
Received: by 10.82.162.14 with SMTP id k14mr1626946bue.1176329136439;
        Wed, 11 Apr 2007 15:05:36 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Wed, 11 Apr 2007 15:05:36 -0700 (PDT)
Message-ID: <359a92830704111505i53a5a394va155a9dbf6f9f926@mail.gmail.com>
Date: Wed, 11 Apr 2007 18:05:36 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Turning PrefixQuery into a TermQuery
In-Reply-To: <461D6212.26693.2FF801A@lucene-users.atablis.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15465_4058675.1176329136369"
References: <461D6212.26693.2FF801A@lucene-users.atablis.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15465_4058675.1176329136369
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Rather than using a search, have you thought about using a TermEnum?
It's much, much, much faster than a query. What it allows you to do
is enumerate the terms in the index on a per-field basis. Essentially, this
is what happens when you do a PrefixQuery as BooleanClauses are
added, but you have very few options for restricting the returned list when
you use PrefixQuery.

In particular, WildcardTermEnum will allow you to rapidly enumerate
all the terms that match a particular wildcard pattern and return
whatever portion of that list you want. I'm not sure it's very valuable
to the user to return many thousands of terms for suggestions, but
you'll have to determine that for your situation. But you'll be surprised
by how fast it is <G>.

Parenthetically, there also exists a RegexTermEnum in the contrib
area, but in my experience that's significantly slower than
WildcardTermEnum, which only makes sense since regular expressions
are intrinsically harder to evaluate than simple wildcards.

What I have in mind is something like returning the first N terms
that match a particular prefix pattern. Even if you elect not to do this,
and return all the possibilities, this will be much faster than
executing a query. And won't run afoul of the TooManyClauses
exception, you'll only be restricted by available memory. Not to
mention simplifying your index over the bigram/trigram option <G>.....

BTW, you can alter the limit for returning the TooManyClauses option
by BooleanQuery.setMaxClauseCount, but I'd really recommend the
WildCardTermEnum approach first.

Finally, your question about copying an index... it may not be easy.
Particularly if you have terms that are indexed but not stored, you
won't be able to reconstruct your documents exactly from the index....

Best
Erick

On 4/11/07, Steffen Heinrich <lucene-users@atablis.com> wrote:
>
> Hello Lucene users,
>
> I'm rather new to lucene and java but have done work with other
> search engines some time before.
> Right now I'm trying my hands (and luck) on a 'search as you type'-
> sort of high performance search a la GoogleSuggest.
>
> There meanwhile are on the net, a number of examples for such script-
> driven forms that are suggesting new possible input to the user with
> every keystroke. Mostly for some sort of products.
> Some instances are even combining the input from two or more text
> fields or giving fault tolerant feedback.
>
> According to occasional references on this list some people have
> already tried to implement such a search with lucene but did they
> succeed?
>
> My first idea was to run every completed token of the request
> (current user input) through a spellchecker and expand an incomplete
> token to a PrefixQuery.
>
> Example:
> artist:'beetles'
> title:'yellow submar'
>
> Alternative terms for 'beetles' and 'yellow' would be looked up by
> Spellcheckers for their respective fields and 'submar' being the last
> token of the active textfield with no trailing whitespace would be
> turned into a PrefixQuery.
> And of course the performance considerations have to be of major
> concern with these searches.
>
> I'm currently dealing with the problem that short prefixes are
> resulting in BooleanQuery$TooManyClauses exceptions.
> That's why I've thought of discarding them in favour of extra fields
> with the first bigrams and trigrams of every indexed token.
>
> artist:'the beatles'
> artist_start:'be bea'    ('the' being a stopword)
> title:'yellow submarine'
> title_start:'ye yel su sub'
>
> Every PrefixQuery of length 2 or 3 could thus be turned into a simple
> TermQuery on the appropriate field. (With searches for 1-letter-
> prefixes altogether discarded.)
>
> I've seen Otis Gospodnetic suggesting the very same strategy in a
> former thread but I have no idea about how I could possibly add these
> extra fields.
>
> Normally an IndexWriter uses only one default Analyzer for all its
> tokenizing businesses. And while it is appearantly possible to supply
> a certain other instance when adding a specific document there seems
> to be no way to use different analyzers on different fields within
> one document.
>
> Could this be done in one pass at all, or do I have to copy all
> documents from one index to a new one, parsing field tokens and
> adding new fields on the 2nd go?
>
> I'd appreciate every hint and suggestion on what classes and methods
> to write for this purpose because I definitely lack a knack when it
> comes to OOP.
>
>
> Thank You In Advance,
> Steffen
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15465_4058675.1176329136369--

From java-user-return-27559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 22:30:03 2007
Return-Path: <java-user-return-27559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48942 invoked from network); 11 Apr 2007 22:30:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 22:30:02 -0000
Received: (qmail 50221 invoked by uid 500); 11 Apr 2007 22:30:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50065 invoked by uid 500); 11 Apr 2007 22:30:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50050 invoked by uid 99); 11 Apr 2007 22:30:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 15:30:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 15:29:54 -0700
Received: by mu-out-0910.google.com with SMTP id i10so424456mue
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 15:29:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ARrhdHm9LGlZentZ5G0yZc7OYa7H2ECqvQhuKEY/DfFouuCE4k7yJeqtM30SQIHaelUYfe8At6NLmJCeH9ElHaYPxD6DNortkJzvCmzr6+0tqjSgtwuWr6mSf7UnpeAoVux9EucBW8SUyow47n13veaCUTOn1/AN6ZsKnqJVN14=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=bs4U03eYr+5gWjMD8fDbhETuuizIWEjqBI7zvRrU9+sk/T7oa0BZXz4dICHfN2JDngnFUS04bRUku/42vt4l7cfKDmzLWVhtA0xUtqlrC/MVYMM/wvzjOyoos28vDeyaiyEWvmzJU77elSinb3DtOLZrfkarAywWIiPvvo/Ny+4=
Received: by 10.82.177.3 with SMTP id z3mr1591113bue.1176330572985;
        Wed, 11 Apr 2007 15:29:32 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id g1sm16121muf.2007.04.11.15.29.31;
        Wed, 11 Apr 2007 15:29:31 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <461D6212.26693.2FF801A@lucene-users.atablis.com>
References: <461D6212.26693.2FF801A@lucene-users.atablis.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <96E3C0BD-550F-403E-AB4A-C23B7AE8C3A3@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Turning PrefixQuery into a TermQuery
Date: Thu, 12 Apr 2007 00:28:58 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


11 apr 2007 kl. 22.32 skrev Steffen Heinrich:

> According to occasional references on this list some people have
> already tried to implement such a search with lucene but did they
> succeed?
>
> My first idea was to run every completed token of the request
> (current user input) through a spellchecker and expand an incomplete
> token to a PrefixQuery.

I've posted a solution in the Jira that use sucessful user queries as  
a cropus rather than bashing a Lucene index, and is thus best suited  
for systems with a bit of user activity. The data is stored in a trie- 
pattern with meta data at each node, allowing for extra data such as  
number of hits, available facet classifications or what not. I've had  
it running for a couple of days in a system with one user query every  
ten milliseconds, so it ought to be stable(tm).

https://issues.apache.org/jira/browse/LUCENE-625

There is a memoryleak in the trie at optimize() that has been fixed  
locally. Might be available in LUCENE-626 too. Not sure right now,  
but let me know and I'll make sure to post it.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 22:33:12 2007
Return-Path: <java-user-return-27560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50556 invoked from network); 11 Apr 2007 22:33:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 22:33:11 -0000
Received: (qmail 56672 invoked by uid 500); 11 Apr 2007 22:33:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56635 invoked by uid 500); 11 Apr 2007 22:33:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56624 invoked by uid 99); 11 Apr 2007 22:33:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 15:33:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 15:33:04 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B5CF05B778; Wed, 11 Apr 2007 15:32:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AC0C57F403
	for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 15:32:43 -0700 (PDT)
Date: Wed, 11 Apr 2007 15:32:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Ideas for a relevance score that could be considered stable
 across multiple searches with the same query structure?
In-Reply-To: <f81fa4180704110704mef44a69j1d1b90ead93f0e30@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704111528010.5697@hal.rescomp.berkeley.edu>
References: <f81fa4180704100504q142073c2n5ad0e88f0fff7579@mail.gmail.com> 
 <f81fa4180704101703x3c48d42ei529da26c6c8132ac@mail.gmail.com> 
 <0315F020-F9E4-41FB-AABA-E02D2B5D0649@apache.org>
 <f81fa4180704110704mef44a69j1d1b90ead93f0e30@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: Not really.  The explain scores aren't normalized and I also couldn't
: find a way to get the explain data as anything other than a whitespace
: formatted text blob from Solr.  Keep in mind that they need confidence

the defualt way Solr dumps score explainations is just as plain text, but
the Explanation objects are actually fairly well structured, and easy to
walk in a custom request handler -- this would let you make direct
comparisons of the various peices of the Explanations from doc 1 with doc
2 if you wanted.

A custom Similaity class with simplified tf, idf, and queryNorm functions
might also help you get scores from the Explain method that are more
easily manageable since you'll have predictible query structures hard
coded into your application.

ie: run the large query once, get the results back, and for each result
look at the explanation and pull out the individual pieces of hte
explanation and compare them with those of hte other matches to create
your own "normalization".




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 22:48:31 2007
Return-Path: <java-user-return-27561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54557 invoked from network); 11 Apr 2007 22:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 22:48:30 -0000
Received: (qmail 86389 invoked by uid 500); 11 Apr 2007 22:48:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86033 invoked by uid 500); 11 Apr 2007 22:48:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86022 invoked by uid 99); 11 Apr 2007 22:48:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 15:48:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 15:48:23 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 81E5E5B778; Wed, 11 Apr 2007 15:48:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7DE057F403
	for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 15:48:03 -0700 (PDT)
Date: Wed, 11 Apr 2007 15:48:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Unicode Normalization
In-Reply-To: <461D0628020000480001068B@ntgwgate.loc.gov>
Message-ID: <Pine.LNX.4.58.0704111540180.5697@hal.rescomp.berkeley.edu>
References: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
 <461D0628020000480001068B@ntgwgate.loc.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have encountered a problem searching in my application because of
: inconsistant unicode normalization forms in the corpus (and the
: queries). I would like to normalize to form NFKD in an analyzer (I
: think). I was thinking about creating a filter similar to the

i'm very naive to the multitudes of issues with charsets and
charencodings, but isn't the a problem best solved well when
First constructing the java String or Reader object -- either from a file
on disk or from a network socket of some kind?

or am i missunderstanding your meaning of the word Normalization?  at
first i thought you might be talking about something like the
ISOLatin1AccentFilter but then i looked at the ICU url you mentioned and
it seems to be all about byte=>character issues ... that doesn't sound
like something you would really want to be doing in an Analyzer.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 11 23:16:30 2007
Return-Path: <java-user-return-27562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59989 invoked from network); 11 Apr 2007 23:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Apr 2007 23:16:30 -0000
Received: (qmail 37776 invoked by uid 500); 11 Apr 2007 23:16:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37742 invoked by uid 500); 11 Apr 2007 23:16:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37731 invoked by uid 99); 11 Apr 2007 23:16:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 16:16:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 16:16:23 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id A90D14ED904
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 09:15:34 +1000 (EST)
Message-ID: <461D6C6D.7000605@nuix.com>
Date: Thu, 12 Apr 2007 09:17:01 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070410)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Standard Parser Behavior
References: <ae6f38f60704110727m64604574j42fcf25904b520e9@mail.gmail.com>
In-Reply-To: <ae6f38f60704110727m64604574j42fcf25904b520e9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Walt Stoneburner wrote:
> Does +(A1 A2 A3) +(B1 B2 B3) -(C1 C2 C3) find documents that have at least
> one A -and- at least one B, but never any Cs?  ...to which I'm now given to
> understand the answer is yes.  And understand why.

Well, that example would follow standard boolean logic if that's the 
case, since "NOT (C1 OR C2)" would be equal to "NOT(C1) AND NOT(C2)".

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 00:16:42 2007
Return-Path: <java-user-return-27563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73926 invoked from network); 12 Apr 2007 00:16:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 00:16:41 -0000
Received: (qmail 11313 invoked by uid 500); 12 Apr 2007 00:16:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11281 invoked by uid 500); 12 Apr 2007 00:16:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11270 invoked by uid 99); 12 Apr 2007 00:16:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 17:16:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 17:16:32 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hbmyy-0004sS-A6
	for java-user@lucene.apache.org; Wed, 11 Apr 2007 17:16:12 -0700
Message-ID: <9950831.post@talk.nabble.com>
Date: Wed, 11 Apr 2007 17:16:12 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: OutOfMemory Error while searching Index - Help Appreciated.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have gone through the mailing list in search of posts for this error.
Though there are many, I feel my problem is little different from that and
like to get some advice on this.

Details: 
1. Using a machine with RAM 2GB
2. Created an Index of size 200 MB.
3. Trying to do a search on this for certain fields.
4. Retrieves Hits with 22 documents(each doc size is around 1KB in size).[I
have issue with the results returned and I have posted that already].
5. I use a for loop like below to retrieve the Hits documents as below which
throws a OutOfMemory Error, and how I am saying the for loop only throws
error because when i comment the following code there is no error:

for (int i = 0; i < hits.length(); i++) 
{
  Document hitDoc = hits.doc(i);
  System.out.println("Valuee Title  ---------------> "+hitDoc.get("Title"));
  System.out.println("Valuee Desc --------------->
"+hitDoc.get("Description"));
}

Thanks in advance.
-- 
View this message in context: http://www.nabble.com/OutOfMemory-Error-while-searching-Index---Help-Appreciated.-tf3562699.html#a9950831
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 00:43:38 2007
Return-Path: <java-user-return-27564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77156 invoked from network); 12 Apr 2007 00:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 00:43:37 -0000
Received: (qmail 34242 invoked by uid 500); 12 Apr 2007 00:43:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34197 invoked by uid 500); 12 Apr 2007 00:43:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34186 invoked by uid 99); 12 Apr 2007 00:43:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 17:43:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 17:43:29 -0700
Received: by mu-out-0910.google.com with SMTP id i10so453896mue
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 17:43:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=p9V79sbqdOD0/2TdZe8y7K7aXyBwvPqj3iZhHCNBo1HiRCGuTzN9kq6kTDZP6cUZc5UNecXWvHW8cjq5aPHQ3yLjWGNDN04LIRGcFEY+XKChFzohkyVdqhmE0HxKqqRqIMDY70b1IdOFh+9OW79qu0Uo6iBo5oQ7RobFdaWqlZs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YXpkMfO5sA9znCYU219noQ/lnlR15csthgcdkJmbKfAYsaW6fol2lCcOKdF6+Ktkln7skcqzvD/gQgwS1uxnvhkH45hcIhKYvY3yNVW45ZPsOjqXGCLXKOmTxLO3QvWzK22RPwYgdLBLgm4FJxtfUX9f172mgHJeQxxCauiv66U=
Received: by 10.82.148.7 with SMTP id v7mr1749929bud.1176338587766;
        Wed, 11 Apr 2007 17:43:07 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Wed, 11 Apr 2007 17:43:07 -0700 (PDT)
Message-ID: <359a92830704111743t4f949636t46d471cc51482128@mail.gmail.com>
Date: Wed, 11 Apr 2007 20:43:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Error while searching Index - Help Appreciated.
In-Reply-To: <9950831.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16641_14137185.1176338587704"
References: <9950831.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16641_14137185.1176338587704
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That certainly seems odd. How much memory are you allocating
your JVM?

Erick

On 4/11/07, Lokeya <lokeya@gmail.com> wrote:
>
>
> I have gone through the mailing list in search of posts for this error.
> Though there are many, I feel my problem is little different from that and
> like to get some advice on this.
>
> Details:
> 1. Using a machine with RAM 2GB
> 2. Created an Index of size 200 MB.
> 3. Trying to do a search on this for certain fields.
> 4. Retrieves Hits with 22 documents(each doc size is around 1KB in
> size).[I
> have issue with the results returned and I have posted that already].
> 5. I use a for loop like below to retrieve the Hits documents as below
> which
> throws a OutOfMemory Error, and how I am saying the for loop only throws
> error because when i comment the following code there is no error:
>
> for (int i = 0; i < hits.length(); i++)
> {
>   Document hitDoc = hits.doc(i);
>   System.out.println("Valuee Title  --------------->
> "+hitDoc.get("Title"));
>   System.out.println("Valuee Desc --------------->
> "+hitDoc.get("Description"));
> }
>
> Thanks in advance.
> --
> View this message in context:
> http://www.nabble.com/OutOfMemory-Error-while-searching-Index---Help-Appreciated.-tf3562699.html#a9950831
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16641_14137185.1176338587704--

From java-user-return-27565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 01:04:18 2007
Return-Path: <java-user-return-27565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81935 invoked from network); 12 Apr 2007 01:04:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 01:04:17 -0000
Received: (qmail 59604 invoked by uid 500); 12 Apr 2007 01:04:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59572 invoked by uid 500); 12 Apr 2007 01:04:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59561 invoked by uid 99); 12 Apr 2007 01:04:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 18:04:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 18:04:10 -0700
Received: from [192.168.1.4] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 13D663120C
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 10:03:49 +0900 (JST)
Message-ID: <461D853F.9010401@r.email.ne.jp>
Date: Thu, 12 Apr 2007 10:02:55 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
References: <461D15D6.5080408@r.email.ne.jp> <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
In-Reply-To: <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik,

Thank you for your explanation.
In passing, I realized this issue by my customer. They are using Solr.
To reproduce the issue with Solr, post exampledocs/*.xml twice
and issue a query with q=ipod&debugQuery=on.

 > This should be the same for Lucene 2.0 and 2.1.

I understand. But I think we could well come accross this issue
with Lucene 2.1 than 2.0?

Thank you again,

Koji



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 02:21:40 2007
Return-Path: <java-user-return-27566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5278 invoked from network); 12 Apr 2007 02:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 02:21:37 -0000
Received: (qmail 47803 invoked by uid 500); 12 Apr 2007 02:21:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47476 invoked by uid 500); 12 Apr 2007 02:21:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47465 invoked by uid 99); 12 Apr 2007 02:21:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 19:21:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 19:21:29 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hbovt-00079w-4C
	for java-user@lucene.apache.org; Wed, 11 Apr 2007 19:21:09 -0700
Message-ID: <9951856.post@talk.nabble.com>
Date: Wed, 11 Apr 2007 19:21:09 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Error while searching Index - Help Appreciated.
In-Reply-To: <359a92830704111743t4f949636t46d471cc51482128@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
References: <9950831.post@talk.nabble.com> <359a92830704111743t4f949636t46d471cc51482128@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It  is using the default size allocated by the OS, which I don't have any
idea how much exactly. But when I use the -Xmx1024m and run this is not
occuring. Also I make some change in that loop now keeping only the Document
hitDoc = hits.doc(i); line and thats where it starts throwing error. But I
am not very sure why this should throw and error.



Erick Erickson wrote:
> 
> That certainly seems odd. How much memory are you allocating
> your JVM?
> 
> Erick
> 
> On 4/11/07, Lokeya <lokeya@gmail.com> wrote:
>>
>>
>> I have gone through the mailing list in search of posts for this error.
>> Though there are many, I feel my problem is little different from that
>> and
>> like to get some advice on this.
>>
>> Details:
>> 1. Using a machine with RAM 2GB
>> 2. Created an Index of size 200 MB.
>> 3. Trying to do a search on this for certain fields.
>> 4. Retrieves Hits with 22 documents(each doc size is around 1KB in
>> size).[I
>> have issue with the results returned and I have posted that already].
>> 5. I use a for loop like below to retrieve the Hits documents as below
>> which
>> throws a OutOfMemory Error, and how I am saying the for loop only throws
>> error because when i comment the following code there is no error:
>>
>> for (int i = 0; i < hits.length(); i++)
>> {
>>   Document hitDoc = hits.doc(i);
>>   System.out.println("Valuee Title  --------------->
>> "+hitDoc.get("Title"));
>>   System.out.println("Valuee Desc --------------->
>> "+hitDoc.get("Description"));
>> }
>>
>> Thanks in advance.
>> --
>> View this message in context:
>> http://www.nabble.com/OutOfMemory-Error-while-searching-Index---Help-Appreciated.-tf3562699.html#a9950831
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/OutOfMemory-Error-while-searching-Index---Help-Appreciated.-tf3562699.html#a9951856
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 02:25:01 2007
Return-Path: <java-user-return-27567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6122 invoked from network); 12 Apr 2007 02:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 02:25:01 -0000
Received: (qmail 54008 invoked by uid 500); 12 Apr 2007 02:25:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53491 invoked by uid 500); 12 Apr 2007 02:25:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53480 invoked by uid 99); 12 Apr 2007 02:25:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 19:25:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 19:24:53 -0700
Received: by mu-out-0910.google.com with SMTP id i10so474205mue
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 19:24:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=H1opNF0Et0yiItdAoh49eEyEBhIW4DVI71hoxA1qCfGiR6FJibDRv1bENWZB/kTM2UqS6XPGhm8QnUJ3UqKH94rbVhLz3XIzFhGg6zwsu8wzY5qcY+vXh/pDQOhPt6MD1wouJCd2+2vaLXXYRCMyNq3ekW4pbcZQ65HkoVPdXpo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lXONbt13k38LCWWeXN/aq3TCdy7iB3I/vuuvW3ZrDKlkYQ6NsIfgHVZ8TqNNU/jeI9oN/v7I5WFxU35wr+8k2JvdqJk4O42ebqRKM27r4XrrMlXyC7xwGSovTQgBh4U+tzj4GevmAUcxsoapQ9ga3G0NBbXI+q6JC8Q8rL027K4=
Received: by 10.82.188.15 with SMTP id l15mr1807086buf.1176344672628;
        Wed, 11 Apr 2007 19:24:32 -0700 (PDT)
Received: by 10.82.163.6 with HTTP; Wed, 11 Apr 2007 19:24:32 -0700 (PDT)
Message-ID: <3d2ce8cb0704111924h7aa138d9h320b3c049038fff8@mail.gmail.com>
Date: Wed, 11 Apr 2007 19:24:32 -0700
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unicode Normalization
In-Reply-To: <Pine.LNX.4.58.0704111540180.5697@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
	 <461D0628020000480001068B@ntgwgate.loc.gov>
	 <Pine.LNX.4.58.0704111540180.5697@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/11/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : I have encountered a problem searching in my application because of
> : inconsistant unicode normalization forms in the corpus (and the
> : queries). I would like to normalize to form NFKD in an analyzer (I
> : think). I was thinking about creating a filter similar to the
>
> i'm very naive to the multitudes of issues with charsets and
> charencodings, but isn't the a problem best solved well when
> First constructing the java String or Reader object -- either from a file
> on disk or from a network socket of some kind?
>
> or am i missunderstanding your meaning of the word Normalization?  at
> first i thought you might be talking about something like the
> ISOLatin1AccentFilter but then i looked at the ICU url you mentioned and
> it seems to be all about byte=>character issues ... that doesn't sound
> like something you would really want to be doing in an Analyzer.

Unfortunately, there is a whole level of unicode "encoding" issues
above the level of byte encoding.  Unicode characters do not map
precisely to code points:  a single character can often be represented
via a single codepoint or a combination of two (surrogate pair).  I
have no idea how java's String class handles this--I doubt it does any
intelligent normalization.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 03:03:01 2007
Return-Path: <java-user-return-27568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13527 invoked from network); 12 Apr 2007 03:03:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 03:03:00 -0000
Received: (qmail 768 invoked by uid 500); 12 Apr 2007 03:03:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 732 invoked by uid 500); 12 Apr 2007 03:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 719 invoked by uid 99); 12 Apr 2007 03:03:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 20:03:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 20:02:52 -0700
Received: by an-out-0708.google.com with SMTP id c3so417200ana
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 20:02:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=dlm4NuRocTJkoJq3SOZj4o1IhQgqKLGdT/E0xVGPSYU10dy+gZxx1vVRcOmjE5wdzJamVs6EmJhnN30J0qoGfY5WZaQgK67DmVQAeGltxc1Xoz3CjSSeskEJ7NxwFYNL4PeY/R0rjHVSLoMllwCO+QQjWsF6UGCuAKNH1bdmblw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=jx50K9A8S0gL7X6UnL04NCwqcRzpSD+QsVwXAbNlmjsDD2HDmHG+h1Z4e+kvrPUIU8E412mGD9e9ZWv8dAuocwcTcb9dDZ3pqmyQQNyi5B7wOc7Cga1W1gDbeQmkfAjDtVWM7xDAkJ8AFUi99Ei3+6iyf68AV2xEfmkKDjHcPmg=
Received: by 10.100.125.5 with SMTP id x5mr983091anc.1176346951724;
        Wed, 11 Apr 2007 20:02:31 -0700 (PDT)
Received: by 10.100.107.7 with HTTP; Wed, 11 Apr 2007 20:02:31 -0700 (PDT)
Message-ID: <c68e39170704112002n24a07c75l1aff40305a7d9ab0@mail.gmail.com>
Date: Wed, 11 Apr 2007 23:02:31 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Unicode Normalization
In-Reply-To: <3d2ce8cb0704111924h7aa138d9h320b3c049038fff8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
	 <461D0628020000480001068B@ntgwgate.loc.gov>
	 <Pine.LNX.4.58.0704111540180.5697@hal.rescomp.berkeley.edu>
	 <3d2ce8cb0704111924h7aa138d9h320b3c049038fff8@mail.gmail.com>
X-Google-Sender-Auth: 9a630f54fb423337
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/11/07, Mike Klaas <mike.klaas@gmail.com> wrote:
> Unicode characters do not map
> precisely to code points:  a single character can often be represented
> via a single codepoint or a combination of two (surrogate pair).

I normally hear surrogates in the context of UTF-16 after the code point space
became too large for UTF-16 to represent.  AFAIK it's more of an
encoding thing, not a code point thing... for example, you would never
see the surrogates if you encoded in UTF8 (although the surrogates are
still code points since they needed to be reserved).

But there do seem to be groups of code points that map to a single character:
http://en.wikipedia.org/wiki/Combining_character

> have no idea how java's String class handles this--I doubt it does any
> intelligent normalization.

UTF-16 surrogates are handled as of Java5.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 03:14:18 2007
Return-Path: <java-user-return-27569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14976 invoked from network); 12 Apr 2007 03:14:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 03:14:17 -0000
Received: (qmail 13587 invoked by uid 500); 12 Apr 2007 03:14:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13559 invoked by uid 500); 12 Apr 2007 03:14:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13548 invoked by uid 99); 12 Apr 2007 03:14:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 20:14:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 20:14:08 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 2DB554ED907
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 13:13:19 +1000 (EST)
Message-ID: <461DA427.7010309@nuix.com>
Date: Thu, 12 Apr 2007 13:14:47 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070411)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Unicode Normalization
References: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>	 <461D0628020000480001068B@ntgwgate.loc.gov>	 <Pine.LNX.4.58.0704111540180.5697@hal.rescomp.berkeley.edu>	 <3d2ce8cb0704111924h7aa138d9h320b3c049038fff8@mail.gmail.com> <c68e39170704112002n24a07c75l1aff40305a7d9ab0@mail.gmail.com>
In-Reply-To: <c68e39170704112002n24a07c75l1aff40305a7d9ab0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik Seeley wrote:
>> have no idea how java's String class handles this--I doubt it does any
>> intelligent normalization.
> 
> UTF-16 surrogates are handled as of Java5.

And as of Java6 we have the java.text.Normalizer utility.

Daniel



-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 03:33:15 2007
Return-Path: <java-user-return-27570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22041 invoked from network); 12 Apr 2007 03:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 03:33:14 -0000
Received: (qmail 38546 invoked by uid 500); 12 Apr 2007 03:33:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38507 invoked by uid 500); 12 Apr 2007 03:33:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38496 invoked by uid 99); 12 Apr 2007 03:33:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 20:33:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2007 20:33:07 -0700
Received: by ug-out-1314.google.com with SMTP id k40so242978ugc
        for <java-user@lucene.apache.org>; Wed, 11 Apr 2007 20:32:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=e1cVp2RuAAFXeoJ3KGvMdqmD6WX9vJXAQfGISmadVdJSEkX3MVqd8pdktkkD4ORaZP2UUYMZzmmoifOXg2LOmlN9rSkZG+rApZULpdVbg79ERoGViwuoOcNg6bZPRnBQrps2W0PTSIOdSfps8hCL1E6oDacsC8vPkSnwzrGf8eU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KgAfg7fnQ5YqmYQOi/p8Y7a520UxXoJ2Qvp5bv7VnyxXcGvG1b5YPCPRb6feIupMdN2uhfqTAisJDre8rvWZkT/ffPs/HoVN6b3kyM5o5adhJE4pAvFLLNIh56c4RLRw31DnEu1MnF4HulsNkjUvjwoG4Z8ceUW/X2p1sG6a3is=
Received: by 10.82.163.13 with SMTP id l13mr1816353bue.1176348766058;
        Wed, 11 Apr 2007 20:32:46 -0700 (PDT)
Received: by 10.82.163.6 with HTTP; Wed, 11 Apr 2007 20:32:45 -0700 (PDT)
Message-ID: <3d2ce8cb0704112032t7a73b4f6gdc84d5f15eeef08b@mail.gmail.com>
Date: Wed, 11 Apr 2007 20:32:45 -0700
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unicode Normalization
In-Reply-To: <c68e39170704112002n24a07c75l1aff40305a7d9ab0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
	 <461D0628020000480001068B@ntgwgate.loc.gov>
	 <Pine.LNX.4.58.0704111540180.5697@hal.rescomp.berkeley.edu>
	 <3d2ce8cb0704111924h7aa138d9h320b3c049038fff8@mail.gmail.com>
	 <c68e39170704112002n24a07c75l1aff40305a7d9ab0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/11/07, Yonik Seeley <yonik@apache.org> wrote:
> On 4/11/07, Mike Klaas <mike.klaas@gmail.com> wrote:
> > Unicode characters do not map
> > precisely to code points:  a single character can often be represented
> > via a single codepoint or a combination of two (surrogate pair).
>
> I normally hear surrogates in the context of UTF-16 after the code point space
> became too large for UTF-16 to represent.  AFAIK it's more of an
> encoding thing, not a code point thing... for example, you would never
> see the surrogates if you encoded in UTF8 (although the surrogates are
> still code points since they needed to be reserved).

You're right.  Bringing up surrogate pairs just muddles the discussion.

> But there do seem to be groups of code points that map to a single character:
> http://en.wikipedia.org/wiki/Combining_character
>
> > have no idea how java's String class handles this--I doubt it does any
> > intelligent normalization.
>
> UTF-16 surrogates are handled as of Java5.

And it seems that character composition and normalization is built in to java 6:
http://weblogs.java.net/blog/joconner/archive/2007/02/normalization_c.html

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 07:12:38 2007
Return-Path: <java-user-return-27571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1831 invoked from network); 12 Apr 2007 07:12:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 07:12:37 -0000
Received: (qmail 81307 invoked by uid 500); 12 Apr 2007 07:12:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81263 invoked by uid 500); 12 Apr 2007 07:12:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81252 invoked by uid 99); 12 Apr 2007 07:12:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 00:12:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saihariharan@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 00:12:27 -0700
Received: by an-out-0708.google.com with SMTP id c3so458294ana
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 00:12:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZjQE7hF2JwhjhLTM643Traph6lOe0uQQXobbBoLYIPPDcqn5oooydBHUE2nep8Q71bgyeGRqmjW0UcZgk7HvnQnOzVQv9cH8jYZhg0zLUkwKO1Xv8zBMnS7uywNLOHYUYQR5zVHeWxhzq/NpR/XCCPkxkMiB/KPrinu34TPzDP0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bZqK6S3tvY5dWcUdxoosj75KKGHg/0y8smT+L2yZzRsvJYR4NRZ98z1f9fJ3NWyWUnQ3GFN0QyUYpHfU3E1T+Ni+WOwLrB04q+P23hscuteQBo462E44R1EMWBUYpFDqYQhTcwUZX+AgBbd9TCNhciYghVRMTc9OFugUwgBhOUQ=
Received: by 10.100.143.1 with SMTP id q1mr1090232and.1176361926675;
        Thu, 12 Apr 2007 00:12:06 -0700 (PDT)
Received: by 10.100.38.11 with HTTP; Thu, 12 Apr 2007 00:12:06 -0700 (PDT)
Message-ID: <98b0a44c0704120012h3eccdacav17d4c37de3cf88bb@mail.gmail.com>
Date: Thu, 12 Apr 2007 12:42:06 +0530
From: "sai hariharan" <saihariharan@gmail.com>
To: gsingers@apache.org, java-user@lucene.apache.org
Subject: Re: Term frequency
In-Reply-To: <083C52C0-E5AA-440E-88F1-66E73221A732@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28296_6245857.1176361926593"
References: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com>
	 <083C52C0-E5AA-440E-88F1-66E73221A732@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28296_6245857.1176361926593
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGksClRoYW54IGZvciByZXBseWluZy4gSW4gbXkgc2NlbmFyaW8gaSdtIG5vdCBnb2luZyB0byBp
bmRleCBhbnkgb2YgbXkgZG9jcy4KU28gaXMgdGhlcmUgYSB3YXkgdG8gZmluZCBvdXQgdGVybSBm
cmVxdWVuY2llcyBvZiB0aGUgdGVybXMgaW4gYSBkb2MKd2l0aG91dCBkb2luZyB0aGUgaW5kZXhp
bmcgcGFydD8KClRoYW54IGluIGFkdmFuY2UsCkhhcmkKCk9uIDQvMTIvMDcsIEdyYW50IEluZ2Vy
c29sbCA8Z3NpbmdlcnNAYXBhY2hlLm9yZz4gd3JvdGU6Cj4KPiBBZGQgVGVybSBWZWN0b3JzIHRv
IHlvdXIgRmllbGQgZHVyaW5nIGluZGV4aW5nLiAgU2VlIHRoZSBGaWVsZAo+IGNvbnN0cnVjdG9y
cy4gIFRvIGdldCBhIFRlcm0gVmVjdG9yIG91dCwgc2VlCj4gSW5kZXhSZWFkZXIuZ2V0VGVybUZy
ZXFWZWN0b3IgbWV0aG9kLgo+Cj4gLUdyYW50Cj4KPiBPbiBBcHIgMTEsIDIwMDcsIGF0IDM6MjMg
UE0sIHNhaSBoYXJpaGFyYW4gd3JvdGU6Cj4KPiA+IEhpLAo+ID4gSSd2ZSBqdXN0IHN0YXJ0ZWQg
dXNpbmcgTHVjZW5lLiBDYW4gYW55Ym9keSBhc3Npc3QgbWUgaW4gY2FsY3VsYXRpbmcKPiA+IHRo
ZSB0ZXJtIGZyZXF1ZW5jaWVzIG9mIHRoZSB0ZXJtcyh3b3JkcykgdGhhdCBvY2N1ciBpbiBhIGRv
Y3VtZW50Cj4gPiAoKi50eHQpLAo+ID4gd2hlbiBhIHBhcnRpY3VsYXIgZG9jIGlzIHN1Ym1pdHRl
ZC4KPiA+Cj4gPiBTYXkgd2hlbiBpIHN1Ym1pdCBzYW1wbGUudHh0ICwgaSBzaG91bGQgZmlyc3Qg
YW5hbHl6ZSB0aGUgZG9jdW1lbnQKPiA+IHdpdGggYSBzdGFuZGFyZCBhbmx5emVyLCB0aGVuIHRo
ZSB0ZXJtIGZyZXF1ZW5jaWVzIHNob3VsZCBiZQo+ID4gY2FsY3VsYXRlZAo+ID4gZm9yIGVhY2gg
YW5kIGV2ZXJ5IHRlcm0gaW4gdGhhdCBkb2N1bWVudC4KPiA+Cj4gPiBUaGFua3MgaW4gYWR2YW5j
ZQo+ID4gLS0KPiA+IOCumuCuvuCur+CvjSBIYXJpCj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQo+IEdyYW50IEluZ2Vyc29sbAo+IENlbnRlciBmb3IgTmF0dXJhbCBMYW5ndWFnZSBQcm9j
ZXNzaW5nCj4gaHR0cDovL3d3dy5jbmxwLm9yZwo+Cj4gUmVhZCB0aGUgTHVjZW5lIEphdmEgRkFR
IGF0IGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvamFrYXJ0YS1sdWNlbmUvCj4gTHVjZW5lRkFRCj4K
Pgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVu
c3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUt
bWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0gCuCumuCuvuCu
r+CvjSBIYXJpCg==
------=_Part_28296_6245857.1176361926593--

From java-user-return-27572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 07:27:00 2007
Return-Path: <java-user-return-27572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11992 invoked from network); 12 Apr 2007 07:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 07:27:00 -0000
Received: (qmail 8030 invoked by uid 500); 12 Apr 2007 07:26:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7997 invoked by uid 500); 12 Apr 2007 07:26:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7976 invoked by uid 99); 12 Apr 2007 07:26:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 00:26:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 00:26:43 -0700
Received: by ug-out-1314.google.com with SMTP id k40so262386ugc
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 00:26:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=dobdYRBLZ/quhld5re5qwbmmBKTAur+oxUmTsomUNC3PzLyy2kJDhnJFfEO2AlIKa0k3DMGEMY9fUqtNGHIQVgt5cANGu8u64pKATzgk6QFGKSER3Uei9qs6BOJyDy06MYmHQUihDnuq3TBUVavjWJlo0/rLg/d+uIu3xpRwCOw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=qedd+G/birCoJtMQXN/LxAHgfVA+NrrudLKl3JvmCFgfBA+4Bsm9UwjydCjkNnG4hlE2wk4sn0cOFwooa/HjP+5+9r+wmfOyDrxijq6NXMJkDreNsveY0TslgFcrubVF8rgp6fVSifwHtcq9wp/E1RIQKJd/gz1geAp+XuCwRQo=
Received: by 10.82.136.4 with SMTP id j4mr1919893bud.1176362782314;
        Thu, 12 Apr 2007 00:26:22 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id e9sm1671742muf.2007.04.12.00.26.20;
        Thu, 12 Apr 2007 00:26:21 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <98b0a44c0704120012h3eccdacav17d4c37de3cf88bb@mail.gmail.com>
References: <98b0a44c0704111223r171498c7g92b91a1ea6f894c1@mail.gmail.com> <083C52C0-E5AA-440E-88F1-66E73221A732@apache.org> <98b0a44c0704120012h3eccdacav17d4c37de3cf88bb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F63F98CC-BA93-4F82-A952-ABE2FF261A87@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Term frequency
Date: Thu, 12 Apr 2007 09:25:47 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


12 apr 2007 kl. 09.12 skrev sai hariharan:

> Thanx for replying. In my scenario i'm not going to index any of my  
> docs.
> So is there a way to find out term frequencies of the terms in a doc
> without doing the indexing part?

Using an analyzer (Tokenstream) and a Map<String, Integer>?

while ((t = ts.next)!=null) {
   Integer tf = map.get(t.termtext());
   if (tf == null) {
     tf = 1;
   } else {
     tf++;
   }
   map.put(t.termtext(), tf);
}


-- 
karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 10:20:50 2007
Return-Path: <java-user-return-27574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90724 invoked from network); 12 Apr 2007 10:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 10:20:48 -0000
Received: (qmail 95944 invoked by uid 500); 12 Apr 2007 10:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95875 invoked by uid 500); 12 Apr 2007 10:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95862 invoked by uid 99); 12 Apr 2007 10:20:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 03:20:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [81.169.146.189] (HELO mo-p07-ob.rzone.de) (81.169.146.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 03:20:24 -0700
Received: from [192.168.178.20] (p57bb0c41.dip0.t-ipconnect.de [87.187.12.65])
	by post.webmailer.de (mrclete mo6) (RZmta 5.5)
	with ESMTP id Q0317aj3C9wCBG for <java-user@lucene.apache.org>;
	Thu, 12 Apr 2007 12:20:02 +0200 (MEST)
From: "Steffen Heinrich" <lucene-users@atablis.com>
To: java-user@lucene.apache.org
Date: Thu, 12 Apr 2007 12:19:50 +0200
MIME-Version: 1.0
Subject: Re: Turning PrefixQuery into a TermQuery
Message-ID: <461E23E6.3752.E72120@lucene-users.atablis.com>
Priority: normal
In-reply-to: <461D4F62.1050909@teamware.com>
References: <461D6212.26693.2FF801A@lucene-users.atablis.com>
X-mailer: Pegasus Mail for Windows (4.31, DE v4.31 R1)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Content-description: Mail message body
X-RZG-AUTH: jtz0MUsFuuf6oFDp3IiuuL5tq2uJr2xgKjtNOWqOfpGIlwVGYmele5T0IBw8QI7IZkg=
X-RZG-CLASS-ID: mo07
X-Virus-Checked: Checked by ClamAV on apache.org

On 12 Apr 2007 at 7:13, Antony Bowesman wrote:

> Steffen Heinrich wrote:
> > Normally an IndexWriter uses only one default Analyzer for all its 
> > tokenizing businesses. And while it is appearantly possible to supply 
> > a certain other instance when adding a specific document there seems 
> > to be no way to use different analyzers on different fields within 
> > one document.
> 
> Use the PerFieldAnalyzerWrapper.
> 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html
> 
> It allows different analyzers to be used for different fields.
> Antony
> 
> 
Hello Antony,

that was exactly what I was looking for but failed to see, thank you.

Still, the answers by Karl and Erick make me re-think the approach.

Cheers,
Steffen



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 10:20:50 2007
Return-Path: <java-user-return-27573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90727 invoked from network); 12 Apr 2007 10:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 10:20:48 -0000
Received: (qmail 95952 invoked by uid 500); 12 Apr 2007 10:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95865 invoked by uid 500); 12 Apr 2007 10:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95851 invoked by uid 99); 12 Apr 2007 10:20:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 03:20:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [81.169.146.189] (HELO mo-p07-ob.rzone.de) (81.169.146.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 03:20:24 -0700
Received: from [192.168.178.20] (p57bb0c41.dip0.t-ipconnect.de [87.187.12.65])
	by post.webmailer.de (mrclete mo6) (RZmta 5.5)
	with ESMTP id Q0317aj3C9wCBF for <java-user@lucene.apache.org>;
	Thu, 12 Apr 2007 12:20:02 +0200 (MEST)
From: "Steffen Heinrich" <lucene-users@atablis.com>
To: java-user@lucene.apache.org
Date: Thu, 12 Apr 2007 12:19:50 +0200
MIME-Version: 1.0
Subject: Re: Turning PrefixQuery into a TermQuery
Message-ID: <461E23E6.12755.E720E2@lucene-users.atablis.com>
Priority: normal
In-reply-to: <359a92830704111505i53a5a394va155a9dbf6f9f926@mail.gmail.com>
References: <461D6212.26693.2FF801A@lucene-users.atablis.com>
X-mailer: Pegasus Mail for Windows (4.31, DE v4.31 R1)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Content-description: Mail message body
X-RZG-AUTH: jtz0MUsFuuf6oFDp3IiuuL5tq2uJr2xgKjtNOWqOfpGIlwVGYmele5T0IBw8QI7IZkg=
X-RZG-CLASS-ID: mo07
X-Virus-Checked: Checked by ClamAV on apache.org

On 11 Apr 2007 at 18:05, Erick Erickson wrote:
> Rather than using a search, have you thought about using a TermEnum?
> It's much, much, much faster than a query. What it allows you to do
> is enumerate the terms in the index on a per-field basis. Essentially, this
> is what happens when you do a PrefixQuery as BooleanClauses are
> added, but you have very few options for restricting the returned list when
> you use PrefixQuery.
> 
As I'm still fresh with lucene I did not look into TermEnum yet.
And yes, you are right. I already wondered how to possibly cut down 
on the returns of a prefix query.

...
> What I have in mind is something like returning the first N terms
> that match a particular prefix pattern. Even if you elect not to do this,
> and return all the possibilities, this will be much faster than
> executing a query. And won't run afoul of the TooManyClauses
> exception, you'll only be restricted by available memory. Not to
> mention simplifying your index over the bigram/trigram option <G>.....
> 
If I understand correctly, you are suggesting to look up documents 
that match prefixes with TermDocs.seek(enum) separately, possibly 
restricting them by evaluation of doc boosts, etc. and then merging 
the remainders with the separate search results for the other tokens.
Is that right?

> BTW, you can alter the limit for returning the TooManyClauses option
> by BooleanQuery.setMaxClauseCount, but I'd really recommend the
> WildCardTermEnum approach first.
Yes, that was the point where I thought that turning to the group 
would probably get me some better ideas ;-)

> 
> Finally, your question about copying an index... it may not be easy.
> Particularly if you have terms that are indexed but not stored, you
> won't be able to reconstruct your documents exactly from the index....
Antony Bowesman came up with the PerFieldAnalyzerWrapper which would 
have prevented a need to copy.

> 
> Best
> Erick
> 

Do you also have an idea for how to improve a fault tolerant search 
for the completed terms?
The shortcomings are somewhat similar.
Running each through a spell checker and adding results to a boolean 
query does not help with the performance. 
Besides, with lucene's standard spell checker I think that there is 
no way to influence the sorting of suggestions (because there is no 
criteria). And so the restriction to the first 4-10 suggestions is 
entirely random and might just miss out on the most appropriate one.

I've tried the NGramTokenizer from the Action book (contributed by 
alias-i, now appearently in the LingPipe distribution) and it gives 
better results in that it returns suggestions based on the weight of 
the documents, but at a much bigger cost. Of disk space as well as 
memory as performance.

BTW, my test data is ~ 1.5 million artist / song titles which I 
extracted from a CDDB dump.
This data represents very well the typical applications that I have 
in mind:
Lots of tiny documents with 2-3 indexed fields that allow for faceted 
search. (Possibly associated with some meta data each.)

Ideally the system should scale well with heavy user loads. - 
Certainly not a simple task where every keystroke translates into a 
query for suggestions, but the existing implementations show that it 
can be done. Only that I start wondering if these are done with 
lucene and written in java. :-/

I presume that the need for scalability also forbids any sort of 
result caching with the lucene filter wrappers. Even a bitmap for 
millions of documents must add up to something substantial.
An optimization of the retrieval is probably worth more than the 
additional overhead of a caching strategy can bring.

More thoughts, anyone?

Thank You.

Cheers, Steffen





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 10:21:02 2007
Return-Path: <java-user-return-27575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90839 invoked from network); 12 Apr 2007 10:20:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 10:20:56 -0000
Received: (qmail 96062 invoked by uid 500); 12 Apr 2007 10:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96012 invoked by uid 500); 12 Apr 2007 10:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95980 invoked by uid 99); 12 Apr 2007 10:20:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 03:20:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [81.169.146.189] (HELO mo-p07-ob.rzone.de) (81.169.146.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 03:20:25 -0700
Received: from [192.168.178.20] (p57bb0c41.dip0.t-ipconnect.de [87.187.12.65])
	by post.webmailer.de (mrclete mo6) (RZmta 5.5)
	with ESMTP id Q0317aj3C9wCBH for <java-user@lucene.apache.org>;
	Thu, 12 Apr 2007 12:20:03 +0200 (MEST)
From: "Steffen Heinrich" <lucene-users@atablis.com>
To: java-user@lucene.apache.org
Date: Thu, 12 Apr 2007 12:19:50 +0200
MIME-Version: 1.0
Subject: Re: Turning PrefixQuery into a TermQuery
Message-ID: <461E23E6.13737.E7215F@lucene-users.atablis.com>
Priority: normal
In-reply-to: <96E3C0BD-550F-403E-AB4A-C23B7AE8C3A3@gmail.com>
References: <461D6212.26693.2FF801A@lucene-users.atablis.com>
X-mailer: Pegasus Mail for Windows (4.31, DE v4.31 R1)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Content-description: Mail message body
X-RZG-AUTH: jtz0MUsFuuf6oFDp3IiuuL5tq2uJr2xgKjtNOWqOfpGIlwVGYmele5T0IBw8QI7IZkg=
X-RZG-CLASS-ID: mo07
X-Virus-Checked: Checked by ClamAV on apache.org

On 12 Apr 2007 at 0:28, karl wettin wrote:
> 
> 11 apr 2007 kl. 22.32 skrev Steffen Heinrich:
> 
> > According to occasional references on this list some people have
> > already tried to implement such a search with lucene but did they
> > succeed?
> >
> > My first idea was to run every completed token of the request
> > (current user input) through a spellchecker and expand an incomplete
> > token to a PrefixQuery.
> 
> I've posted a solution in the Jira that use sucessful user queries as  
> a cropus rather than bashing a Lucene index, and is thus best suited  
> for systems with a bit of user activity. The data is stored in a trie- 
> pattern with meta data at each node, allowing for extra data such as  
> number of hits, available facet classifications or what not. I've had  
> it running for a couple of days in a system with one user query every  
> ten milliseconds, so it ought to be stable(tm).
> 
> https://issues.apache.org/jira/browse/LUCENE-625
> 
> There is a memoryleak in the trie at optimize() that has been fixed  
> locally. Might be available in LUCENE-626 too. Not sure right now,  
> but let me know and I'll make sure to post it.
> 
> 
> -- 
> karl
> 
Hello Karl,

thank you for this information. It was the first time I ever heard of 
tries and had to read up on them. Very interesting!

The intended system however can not be trained by user input. The 
suggestions have to come from a given corpus (e.g. an ocasionally 
updated product database).
Do you think adopting your package to set up the tries from a corpus 
would be fairly easy?

Cheers, Steffen



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 11:58:11 2007
Return-Path: <java-user-return-27576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40328 invoked from network); 12 Apr 2007 11:58:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 11:58:09 -0000
Received: (qmail 58848 invoked by uid 500); 12 Apr 2007 11:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58810 invoked by uid 500); 12 Apr 2007 11:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58799 invoked by uid 99); 12 Apr 2007 11:58:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 04:58:08 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 04:58:01 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 53A5021710B
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 07:57:43 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Thu, 12 Apr 2007 07:57:41 -0400
X-Sasl-enc: Z0llmI3wnHAYcf1VBJuSlG433rAaFR1qbG8V4zaXxIXL 1176379060
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id CDD731CF8C
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 07:57:40 -0400 (EDT)
Message-ID: <461E1EE8.6040209@fastmail.fm>
Date: Thu, 12 Apr 2007 12:58:32 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Are KeywordAnalyser and Field.Index.UN_TOKENIZED synonymous.
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Are KeywordAnalyser and Field.Index.UN_TOKENIZED synonymous.
i.e if I create an IndexWriter with a KeywordAnalyser does it make any 
difference whether I index my fields within documents added to this 
index with Field.Index.UN_TOKENIZED or Field.Index.TOKENIZED

thanks paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 13:28:04 2007
Return-Path: <java-user-return-27577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94547 invoked from network); 12 Apr 2007 13:28:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 13:28:03 -0000
Received: (qmail 35745 invoked by uid 500); 12 Apr 2007 13:28:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35713 invoked by uid 500); 12 Apr 2007 13:28:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35702 invoked by uid 99); 12 Apr 2007 13:28:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 06:28:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 06:27:54 -0700
Received: by ug-out-1314.google.com with SMTP id k40so306255ugc
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 06:27:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VzyizosXuoADX7SKpbgWuXoHLlkf16/cgTb9Ye139BCCnj87FrGipf7GLrIM2/jJCLr969JrI25jyjF5ZzzZjw3HXyPyW4jrIFKRcHx8+l4IbKemQWphtG/ppmgNkJ79Vz2zo7JRyvDsawmh4ouhap53yyT54wq/UAkmu52p7Xo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WfdN+ytuHsveyUvtMSMQF3SYDwfmdhL++Be7UEJUKiWJQesN/VB3+u6T1g4QPUOJpAP3hfabb3j13USEK7qciSAIUplJBLKQg1GbFnrzIYGm1PnNEUMWss3vhlHfQgH2epQNA6ZeSxvjR6wp8J+CRfos34HtT5i6kkqb07JqZYI=
Received: by 10.82.107.15 with SMTP id f15mr2472892buc.1176384452117;
        Thu, 12 Apr 2007 06:27:32 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Thu, 12 Apr 2007 06:27:32 -0700 (PDT)
Message-ID: <359a92830704120627l349e8ac4t26b4bdba96912555@mail.gmail.com>
Date: Thu, 12 Apr 2007 09:27:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Turning PrefixQuery into a TermQuery
In-Reply-To: <461E23E6.12755.E720E2@lucene-users.atablis.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23207_12505665.1176384452059"
References: <461D6212.26693.2FF801A@lucene-users.atablis.com>
	 <359a92830704111505i53a5a394va155a9dbf6f9f926@mail.gmail.com>
	 <461E23E6.12755.E720E2@lucene-users.atablis.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23207_12505665.1176384452059
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below....

On 4/12/07, Steffen Heinrich <lucene-users@atablis.com> wrote:
>
> On 11 Apr 2007 at 18:05, Erick Erickson wrote:
> > Rather than using a search, have you thought about using a TermEnum?
> > It's much, much, much faster than a query. What it allows you to do
> > is enumerate the terms in the index on a per-field basis. Essentially,
> this
> > is what happens when you do a PrefixQuery as BooleanClauses are
> > added, but you have very few options for restricting the returned list
> when
> > you use PrefixQuery.
> >
> As I'm still fresh with lucene I did not look into TermEnum yet.
> And yes, you are right. I already wondered how to possibly cut down
> on the returns of a prefix query.
>
> ...
> > What I have in mind is something like returning the first N terms
> > that match a particular prefix pattern. Even if you elect not to do
> this,
> > and return all the possibilities, this will be much faster than
> > executing a query. And won't run afoul of the TooManyClauses
> > exception, you'll only be restricted by available memory. Not to
> > mention simplifying your index over the bigram/trigram option <G>.....
> >
> If I understand correctly, you are suggesting to look up documents
> that match prefixes with TermDocs.seek(enum) separately, possibly
> restricting them by evaluation of doc boosts, etc. and then merging
> the remainders with the separate search results for the other tokens.
> Is that right?


Not quite. As I understand your problem, you want all the terms that
match (or at least a subset) for a field. For this, WildcardTermEnum
is really all you need. Think of it this way...
(Wildcard)TermEnum gives you a list of all the terms for a particular field.
      Each term will be mentioned exactly once regardless of how many
      times it appears in your corpus.
TermDocs will allow you to find documents with those terms.

Since you're trying to do a set of suggestions, you really don't need
to know anything about documents that the terms appear in, or even
how many documents they appear in. All you need is a list of
the unique terms. Thus you don't need TermDocs here at all.

Here's part of a chunk of code I have lying around. It
prints out all the terms that appear in a particular field and you
should easily be able to make it use a WIldcardTermEnum...
This is a hack I made for a one-off, so I don't have to be
proud of it......

    private void enumField(String field) throws Exception
    {
        long start = System.currentTimeMillis();
        TermEnum termEnum = this.reader.getIndexReader().terms(new
Term(field, ""));

        this.writer.println("Values for term " + field);

        Term term = termEnum.term();
        int idx = 0;

        while ((term != null) && term.field().equals(field)) {
            System.out.println(term.text());

            termEnum.next();

            term = termEnum.term();
            ++idx;
        }

        long interval = System.currentTimeMillis() - start;

        System.out.println(
                String.format(
                        "%d terms took %d milliseconds (%d seconds) to
enumerate term %s",
                        idx,
                        interval,
                        interval / CaptureTerms.MILLIS_IN_SECOND,
                        field));
    }



This isn't really very useful for displaying the *best*, say, 10 terms
because it'll just start at the beginning of the list and enumerate
the first N items.

> BTW, you can alter the limit for returning the TooManyClauses option
> > by BooleanQuery.setMaxClauseCount, but I'd really recommend the
> > WildCardTermEnum approach first.
> Yes, that was the point where I thought that turning to the group
> would probably get me some better ideas ;-)
>
> >
> > Finally, your question about copying an index... it may not be easy.
> > Particularly if you have terms that are indexed but not stored, you
> > won't be able to reconstruct your documents exactly from the index....
> Antony Bowesman came up with the PerFieldAnalyzerWrapper which would
> have prevented a need to copy.
>
> >
> > Best
> > Erick
> >
>
> Do you also have an idea for how to improve a fault tolerant search
> for the completed terms?
> The shortcomings are somewhat similar.
> Running each through a spell checker and adding results to a boolean
> query does not help with the performance.
> Besides, with lucene's standard spell checker I think that there is
> no way to influence the sorting of suggestions (because there is no
> criteria). And so the restriction to the first 4-10 suggestions is
> entirely random and might just miss out on the most appropriate one.


You'll have to elaborate what "fault tolerant search" means. If you're
worried about misspellings, that's tough. You could try FuzzyQuery,
or if that doesn't work you could think about working with soundex. But I
can't stress strongly enough that you need to be absolutely sure this
is a real problem *that your users will notice* before you invest time and
energy in solving it. I'm continually amazed how much time and energy
I spend solving non-existent problems <G>....

And for your sanity's sake, don't ask the produce manager anything
remotely like "would you like fault-tolearant searches?". The answer
will be yes. Regardless of whether it makes a difference to the end
user. And I'll only mention briefly that asking Sales if they'd like
a feature is the road to madness.....

And a spell checker isn't very useful with names anyway......

I've tried the NGramTokenizer from the Action book (contributed by
> alias-i, now appearently in the LingPipe distribution) and it gives
> better results in that it returns suggestions based on the weight of
> the documents, but at a much bigger cost. Of disk space as well as
> memory as performance.
>
> BTW, my test data is ~ 1.5 million artist / song titles which I
> extracted from a CDDB dump.
> This data represents very well the typical applications that I have
> in mind:
> Lots of tiny documents with 2-3 indexed fields that allow for faceted
> search. (Possibly associated with some meta data each.)
>
> Ideally the system should scale well with heavy user loads. -
> Certainly not a simple task where every keystroke translates into a
> query for suggestions, but the existing implementations show that it
> can be done. Only that I start wondering if these are done with
> lucene and written in java. :-/
>
> I presume that the need for scalability also forbids any sort of
> result caching with the lucene filter wrappers. Even a bitmap for
> millions of documents must add up to something substantial.
> An optimization of the retrieval is probably worth more than the
> additional overhead of a caching strategy can bring.



well, a million documents is a bitmap of 125K. You can fit a LOT
of these into, say, 256M of memory <G>..... But Filters work
at the Document level, not the term level. So I'm not sure they do
what you want......

I strongly suggest you run some timings on whatever process
you decide to try first. Take out all the printing and just report the
time taken on your corpus when enumerating the terms. I think
you'll be very surprised at just how fast it all is and this will definitely

inform your calculations about how it'll scale.... and remember
that the first time you open a reader, you'll pay some extra
overhead, so pay attention to the 2-N runs on an already
open reader.....

Best
Erick


More thoughts, anyone?
>
> Thank You.
>
> Cheers, Steffen
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23207_12505665.1176384452059--

From java-user-return-27578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 14:50:57 2007
Return-Path: <java-user-return-27578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26501 invoked from network); 12 Apr 2007 14:50:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 14:50:56 -0000
Received: (qmail 20306 invoked by uid 500); 12 Apr 2007 14:50:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20038 invoked by uid 500); 12 Apr 2007 14:50:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20027 invoked by uid 99); 12 Apr 2007 14:50:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 07:50:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 07:50:47 -0700
Received: by mu-out-0910.google.com with SMTP id i10so649536mue
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 07:50:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Ucq6mwsW+dV+jl16jHSmT/BINJ0faTtyUBCVovaOw5bZxbMGFpzbPYDvnw3TOADUDeHU9WCU5kIzu2E2tQr7xFgiIxQ4WMhaoymBim18ntBhe8TqOwOxjA4+czKUD3d7NL7rQ1hLOY/BL8oid5yKtLp0qC7BmjO6U3r8DXqnmTo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=boem2QUmI2fVMLmGm5Snw++xK/xlIaEMpZbjG7zUWMbjVs9vVbTdQH7Cq871Pd63RFWU8WpAnrDiFAy9oXpg6mx65GWjuPU7AkzGIF5DERUgOCy1bvxWX6UO0zfbxQo5WJerpQa1TuhTfdNzSPwhzndXc2KNKxrweuPsvCl5E4k=
Received: by 10.82.138.6 with SMTP id l6mr2643637bud.1176389425961;
        Thu, 12 Apr 2007 07:50:25 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id j9sm779837mue.2007.04.12.07.50.23;
        Thu, 12 Apr 2007 07:50:24 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <461E23E6.13737.E7215F@lucene-users.atablis.com>
References: <461D6212.26693.2FF801A@lucene-users.atablis.com> <461E23E6.13737.E7215F@lucene-users.atablis.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <50333FFF-8181-4145-8D88-AA30363F9380@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Turning PrefixQuery into a TermQuery
Date: Thu, 12 Apr 2007 16:49:49 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


12 apr 2007 kl. 12.19 skrev Steffen Heinrich:

>
> The intended system however can not be trained by user input. The
> suggestions have to come from a given corpus (e.g. an ocasionally
> updated product database).
> Do you think adopting your package to set up the tries from a corpus
> would be fairly easy?

You can train it with any data you want. So you would need to figure  
out what people probably will be searching for. The first thing I can  
think of is to extract the most frequenct n grams at a word level in  
your title field, or so. It is tough to say what might actually work.  
Frequent phrases in the corpus might have nothing to do with consumer  
popularity.

If I understand everyhing, your application is installed locally on  
consumer machines. Perhaps you could allow end users to share  
anonymous data based on taste and build a set per end user.  
Collaborative filtering comes to mind. Reducing a data set to  
something relevant usually equals behavioural analysis.

Hope this helps.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 14:51:17 2007
Return-Path: <java-user-return-27579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26645 invoked from network); 12 Apr 2007 14:51:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 14:51:16 -0000
Received: (qmail 22022 invoked by uid 500); 12 Apr 2007 14:51:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21992 invoked by uid 500); 12 Apr 2007 14:51:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21981 invoked by uid 99); 12 Apr 2007 14:51:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 07:51:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.73 as permitted sender)
Received: from [65.54.246.73] (HELO bay0-omc1-s1.bay0.hotmail.com) (65.54.246.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 07:51:08 -0700
Received: from hotmail.com ([65.55.155.98]) by bay0-omc1-s1.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 12 Apr 2007 07:50:47 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 12 Apr 2007 07:50:47 -0700
Message-ID: <BAY144-F183AFA1107699DF2F77126D45E0@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Thu, 12 Apr 2007 14:50:43 GMT
X-Originating-IP: [64.236.128.27]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
In-Reply-To: <85C77A89149353anson@linkclub-staff.com>
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: RE: How to update index dynamically
Date: Thu, 12 Apr 2007 14:50:43 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 12 Apr 2007 14:50:47.0473 (UTC) FILETIME=[F495EA10:01C77D11]
X-Virus-Checked: Checked by ClamAV on apache.org


You have to refresh your IndexSearcher periodically.

Tony

>From: anson <anson@linkclub-staff.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: How to update index dynamically
>Date: Mon, 09 Apr 2007 18:25:57 +0900
>
>
>I have build a blog project under tomcat5.5 with Lucene2.0.
>And I want to search my blog by full text, but there is somthing wrong:
>
>----------------------------------------------
>The project flow:
>
>(1) On tomcat start I wrote a listener to create a index file if the
>index is never created.(It's works well)
>
>
>(2) When I create/update/delete an article on the blog, I wrote a method
>to update the index.(It's also works well)
>
>(3) Then I want to search the new/updated article in the front of my
>blog page. But I can't get the new article. But when I restart the
>tomcat, I can get the new one that I want. Why.
>
>
>-----------------------------------------------
>The index update flow:
>
>(1) Firsrt I delete the old document in index:
>
>IndexReader reader =
>     IndexReader.open($INDEX_DIRECTORY);
>
>Term term = new Term("INDEX_ID", $entryId);
>
>if (term != null) {
>     reader.deleteDocuments(term);
>}
>
>//finally:
>reader.close();
>
>
>(2) Add the article to the index:
>// Get the singleton IndexWriter instance
>IndexWriter writer =
>     IndexManager.getInstance().getIndexWriter();
>
>// add document
>// Document() is method of make Lucene document
>writer.addDocument(Document($EntryBean));
>
>writer.optimize();
>
>
>// finally:
>writer.close();
>
>
>Could anybody tell me anything can help me out. Or I made a wrong flow?
>
>
>Best regards.
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>

_________________________________________________________________
Download Messenger. Join the im Initiative. Help make a difference today. 
http://im.live.com/messenger/im/home/?source=TAGHM_APR07


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 15:24:13 2007
Return-Path: <java-user-return-27580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43917 invoked from network); 12 Apr 2007 15:24:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 15:24:13 -0000
Received: (qmail 5921 invoked by uid 500); 12 Apr 2007 15:24:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5143 invoked by uid 500); 12 Apr 2007 15:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5132 invoked by uid 99); 12 Apr 2007 15:24:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 08:24:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.93 as permitted sender)
Received: from [65.54.246.93] (HELO bay0-omc1-s21.bay0.hotmail.com) (65.54.246.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 08:24:04 -0700
Received: from hotmail.com ([65.55.155.89]) by bay0-omc1-s21.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 12 Apr 2007 08:23:44 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 12 Apr 2007 08:23:41 -0700
Message-ID: <BAY144-F9CD75F836A43F9B4550F2D45E0@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Thu, 12 Apr 2007 15:23:36 GMT
X-Originating-IP: [64.236.128.27]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: Index performance
Date: Thu, 12 Apr 2007 15:23:36 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 12 Apr 2007 15:23:41.0735 (UTC) FILETIME=[8D566370:01C77D16]
X-Virus-Checked: Checked by ClamAV on apache.org

All,

Sorry for long email. I have two questions on indexing. My data consists of 
an id, short headline and story text. Story text has some html tags. Here is 
an example.

In early 2005, it seemed that Shamita Shetty had finally arrived after a 
high profile debut in <i>Mohabbatein</i> [2000]. <br /><br />With 3 of her 
films releasing in the first half of 2005, <i>Bewafa, Zeher </i>and 
<i>Fareb</i>, and the first two ending up making good money, it seemed that 
the gorgeous girl had finally started making her presence felt. <i>Zeher</i> 
helped her being recognized as an actor and her fans had all the reasons to 
believe that they would be seeing more of her in the coming months. <br 
/><br />Surprisingly there has been absolutely no movement ever since then 
from Shamita&#39;s end as she hasn&#39;t had a single release in almost 2 
years now. All of this would change though with the arrival of <i>Cash</i> 
where she is one of the leading ladies apart from Esha Deol and Dia Mirza. 
<br /><br />An action thriller popcorn entertainer, the film is directed by 
Anubahv Sinha of <i>Dus</i> fame and stars Ajay Devgan, Suneil Shetty, 
Ritesh Deshmukh and Zayed Khan in the lead.<br /><br />

I tried to index it. It took from 7-10 seconds to index about 90 documents. 
Here is my code:

  static void indexContents(IndexWriter writer, List storyContentList)
    throws IOException {
    if (storyContentList != null && storyContentList.size() != 0) {
        try {
            Iterator itr = storyContentList.iterator();
            while (itr.hasNext()){
                StoryContents content = (StoryContents) itr.next();
                Document document = new Document();
                document.add(new Field("storyText", content.getStoryText(),
                             Field.Store.YES, Field.Index.TOKENIZED));
                document.add(new Field("storyIdentity", 
String.valueOf(content.getStoryIdentity()),
                             Field.Store.YES, Field.Index.NO));
                document.add(new Field("headline1", 
String.valueOf(content.getHeadline1()),
                             Field.Store.YES, Field.Index.NO));
                writer.addDocument(document);
            }
        }catch(Exception ex){
             System.out.println(" caught a " + ex.getClass() );
        }
    }
  }

I opened one IndexWriter at very beginning
IndexWriter writer = new IndexWriter(INDEX_DIR, new StandardAnalyzer(), 
true);

I called optimize and closed IndexWriter after indexing documents.
writer.optimize();
writer.close();

My question is why it took so long. Do I need to follow the instruction of 
"How can I index HTML documents?" in FAQ from Lucene web site?

Another question is if I can delete document based on storyIndentity field ( 
using IndexReader.deleteDocuments(term)). Since storyIdentity field is not 
indexed, is there any performance issue or I should index it too (and store 
it)?

Appreciate your help.

Tony

_________________________________________________________________
Mortgage rates near historic lows. Refinance $200,000 loan for as low as 
$771/month* 
https://www2.nextag.com/goto.jsp?product=100000035&url=%2fst.jsp&tm=y&search=mortgage_text_links_88_h27f8&disc=y&vers=689&s=4056&p=5117


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 16:00:58 2007
Return-Path: <java-user-return-27581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70069 invoked from network); 12 Apr 2007 16:00:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 16:00:57 -0000
Received: (qmail 4454 invoked by uid 500); 12 Apr 2007 16:00:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4218 invoked by uid 500); 12 Apr 2007 16:00:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4207 invoked by uid 99); 12 Apr 2007 16:00:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:00:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Apr 2007 09:00:46 -0700
Received: (qmail 83164 invoked by uid 60001); 12 Apr 2007 16:00:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=15p5sNKdbloWOOwi+uTmr3lRes1yQoTpmpIXs2op2t7pht78oQxJwX50aluc1vDeyVPILodeyvRunkwp0Gt0CJEi0BIbWUc5rw6NORcq1FkkLwfL5aBiwMMOvqZSW+78Z0WTm/qdY2v0zfD0gqUWd0G3K65nAozA0rmQuM+sohg=;
X-YMail-OSG: HxD5DEEVM1lfhvcHqSUJ4XhgdrOUq41KQXMXXcVKK6lUnuizxn5tP6okHcakUbRYA81Zr2EYMDwnCkIIklfs34I82r90yePnMViyAXse_lZrjNL0OTXPnbrNESLG314UA2h5pWDxgdtMng--
Received: from [72.231.8.153] by web50303.mail.re2.yahoo.com via HTTP; Thu, 12 Apr 2007 09:00:25 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Thu, 12 Apr 2007 09:00:24 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Are KeywordAnalyser and Field.Index.UN_TOKENIZED synonymous.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <235137.83100.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think you are right.  But for sanity, if you really want the field to be untokenized, use F.I.UN_TOKENIZED.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Paul Taylor <paul_t100@fastmail.fm>
To: java-user@lucene.apache.org
Sent: Thursday, April 12, 2007 7:58:32 AM
Subject: Are KeywordAnalyser and Field.Index.UN_TOKENIZED synonymous.

Are KeywordAnalyser and Field.Index.UN_TOKENIZED synonymous.
i.e if I create an IndexWriter with a KeywordAnalyser does it make any 
difference whether I index my fields within documents added to this 
index with Field.Index.UN_TOKENIZED or Field.Index.TOKENIZED

thanks paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 16:22:46 2007
Return-Path: <java-user-return-27582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78075 invoked from network); 12 Apr 2007 16:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 16:22:45 -0000
Received: (qmail 46107 invoked by uid 500); 12 Apr 2007 16:22:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46075 invoked by uid 500); 12 Apr 2007 16:22:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46064 invoked by uid 99); 12 Apr 2007 16:22:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:22:44 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bikmalharikrishna@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:22:35 -0700
Received: by wr-out-0506.google.com with SMTP id 68so538512wra
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 09:22:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=rPB40WiZ+yP0dGgbFAGnKek9Nf8H2gszIAPsRHoAbXn30kq7bcwyz4sMQEcAiY8H2f2M99LorUYlnChvAnuaBalEftdt6dmssg/GIDWVIvPleJ1tOgcxgcAktFc63Eh1G80bJdArRknwqZyOubSWc+yxxn00QQrsQpFkj+KKl7E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=hJart81XoASqD9ANnJ+H80Nvi3POGCIoY1bBOweG6F8ubHXb2+lrrQSV2iK28pEmghlPFLGtCHY3VEUnnZ0Sz+zeqGdMn8xJob+B2YIXT4d5GZameGMu/QTPfDKeTZ9/VDIQATapKk10EYnDMaag5rE7ex5DKZ2dZPPPrwjFSag=
Received: by 10.114.183.1 with SMTP id g1mr805864waf.1176394934591;
        Thu, 12 Apr 2007 09:22:14 -0700 (PDT)
Received: by 10.114.113.14 with HTTP; Thu, 12 Apr 2007 09:22:14 -0700 (PDT)
Message-ID: <8696ad70704120922v76e1bfddka3411de5d7719e9c@mail.gmail.com>
Date: Thu, 12 Apr 2007 21:52:14 +0530
From: "Hari Krishna Bikmal" <bikmalharikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: filename search with lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28751_32037354.1176394934283"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28751_32037354.1176394934283
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am trying to make a ftp search engine for searching filenames(not the
content). I am thinking of using apache net commons for acessing ftp servers
and want to implement the indexing,searching part      using lucene. Can
anyone tell me how to use lucene in this context.

------=_Part_28751_32037354.1176394934283--

From java-user-return-27583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 16:28:05 2007
Return-Path: <java-user-return-27583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80111 invoked from network); 12 Apr 2007 16:28:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 16:28:04 -0000
Received: (qmail 56830 invoked by uid 500); 12 Apr 2007 16:28:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56803 invoked by uid 500); 12 Apr 2007 16:28:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56792 invoked by uid 99); 12 Apr 2007 16:28:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:28:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:27:54 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <224321(2)>; Thu, 12 Apr 2007 09:27:03 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <57996>; Thu, 12 Apr 2007 09:26:59 PDT
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1 
In-reply-to: <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com> 
References: <461D15D6.5080408@r.email.ne.jp> <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
Comments: In-reply-to "Yonik Seeley" <yonik@apache.org>
    message dated "Wed, 11 Apr 2007 10:20:17 -0700."
Date: Thu, 12 Apr 2007 09:26:55 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <07Apr12.092659pdt."57996"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> docfreqs (idfs) do not take into account deleted docs.
> This is more of an engineering tradeoff rather than a feature.
> If we could cheaply and easily update idfs when documents are deleted
> from an index, we would.

Wow.  So is it fair to say that the stored IDF is really the
cumulative IDF for all the documents that have ever been in the index
since it was last optimized?

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 16:32:22 2007
Return-Path: <java-user-return-27584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82027 invoked from network); 12 Apr 2007 16:32:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 16:32:21 -0000
Received: (qmail 66607 invoked by uid 500); 12 Apr 2007 16:32:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66576 invoked by uid 500); 12 Apr 2007 16:32:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66565 invoked by uid 99); 12 Apr 2007 16:32:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:32:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Apr 2007 09:32:10 -0700
Received: (qmail 26952 invoked by uid 60001); 12 Apr 2007 16:31:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=o+1alcu7hZbZ/G6hBE56tKesvEmI6/IyQYitMUX+EfQWeT46L2sVlB8EboCbamy8jpXvyvzYlMHEeNVJoY1VIOH51BrJlD1U/UsLhdNvr/Xjg86tycfjNEkdA0y4SuTPZO85FBe+pgwTYIGkynC+WZ2laKhCNi/NaAnh/RMt++E=;
X-YMail-OSG: iDWQId4VM1kjxI3.nHgsPt.KlPPJWkaldz4XiS.ZkNp882klXvItBY4cDDb1Wf3iCXFaYf5noqsvSe7xg1ALJuePeo15iDofhk0jcDCOtHmdHqHhwuZSQKUANm844XhZwH.yekM2142eScg-
Received: from [72.231.8.153] by web50306.mail.re2.yahoo.com via HTTP; Thu, 12 Apr 2007 09:31:49 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Thu, 12 Apr 2007 09:31:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index performance
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <182234.26649.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Tony,
Your code looks fine to me.  I'm not sure what you timed - the whole app run, just indexing, indexing + optimizing...  If you times indexing + optimizing, leave optimization out of the timer.  How long do you think this should take?  Try setting maxBufferedDocs to 90.
 
Otis 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Tony Qian <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, April 12, 2007 11:23:36 AM
Subject: Index performance

All,

Sorry for long email. I have two questions on indexing. My data consists of 
an id, short headline and story text. Story text has some html tags. Here is 
an example.

In early 2005, it seemed that Shamita Shetty had finally arrived after a 
high profile debut in <i>Mohabbatein</i> [2000]. <br /><br />With 3 of her 
films releasing in the first half of 2005, <i>Bewafa, Zeher </i>and 
<i>Fareb</i>, and the first two ending up making good money, it seemed that 
the gorgeous girl had finally started making her presence felt. <i>Zeher</i> 
helped her being recognized as an actor and her fans had all the reasons to 
believe that they would be seeing more of her in the coming months. <br 
/><br />Surprisingly there has been absolutely no movement ever since then 
from Shamita&#39;s end as she hasn&#39;t had a single release in almost 2 
years now. All of this would change though with the arrival of <i>Cash</i> 
where she is one of the leading ladies apart from Esha Deol and Dia Mirza. 
<br /><br />An action thriller popcorn entertainer, the film is directed by 
Anubahv Sinha of <i>Dus</i> fame and stars Ajay Devgan, Suneil Shetty, 
Ritesh Deshmukh and Zayed Khan in the lead.<br /><br />

I tried to index it. It took from 7-10 seconds to index about 90 documents. 
Here is my code:

  static void indexContents(IndexWriter writer, List storyContentList)
    throws IOException {
    if (storyContentList != null && storyContentList.size() != 0) {
        try {
            Iterator itr = storyContentList.iterator();
            while (itr.hasNext()){
                StoryContents content = (StoryContents) itr.next();
                Document document = new Document();
                document.add(new Field("storyText", content.getStoryText(),
                             Field.Store.YES, Field.Index.TOKENIZED));
                document.add(new Field("storyIdentity", 
String.valueOf(content.getStoryIdentity()),
                             Field.Store.YES, Field.Index.NO));
                document.add(new Field("headline1", 
String.valueOf(content.getHeadline1()),
                             Field.Store.YES, Field.Index.NO));
                writer.addDocument(document);
            }
        }catch(Exception ex){
             System.out.println(" caught a " + ex.getClass() );
        }
    }
  }

I opened one IndexWriter at very beginning
IndexWriter writer = new IndexWriter(INDEX_DIR, new StandardAnalyzer(), 
true);

I called optimize and closed IndexWriter after indexing documents.
writer.optimize();
writer.close();

My question is why it took so long. Do I need to follow the instruction of 
"How can I index HTML documents?" in FAQ from Lucene web site?

Another question is if I can delete document based on storyIndentity field ( 
using IndexReader.deleteDocuments(term)). Since storyIdentity field is not 
indexed, is there any performance issue or I should index it too (and store 
it)?

Appreciate your help.

Tony

_________________________________________________________________
Mortgage rates near historic lows. Refinance $200,000 loan for as low as 
$771/month* 
https://www2.nextag.com/goto.jsp?product=100000035&url=%2fst.jsp&tm=y&search=mortgage_text_links_88_h27f8&disc=y&vers=689&s=4056&p=5117


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 16:37:02 2007
Return-Path: <java-user-return-27585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86990 invoked from network); 12 Apr 2007 16:37:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 16:37:01 -0000
Received: (qmail 82985 invoked by uid 500); 12 Apr 2007 16:36:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82924 invoked by uid 500); 12 Apr 2007 16:36:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82889 invoked by uid 99); 12 Apr 2007 16:36:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:36:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:36:50 -0700
Received: by an-out-0708.google.com with SMTP id c3so598601ana
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 09:36:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=b0bDZpTO2k9095TOt/gvjvYsFuSwrNvzeA7w+MrgBprjEXrPwzza8ReKgdfilce+powXC4vX45CMtCvsCapFhujcZ4G5B8+AAontVd6dS15XMBmtUFV3C62sH559duOA83+RMVrGu27lYgarW0cXYIWvcEmU10wl4t9p+OyO12w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Hjs5QYO4dcnvgOurFS+p0Ueh9/syQil5pz2vrlj0Hie3uSwE/so9FSGTkE4l8zjQXfY1wP/zwSrd2xRACHeQpw09NbiF4j78W7Ln+yT0aI8mcPF+vqupwAw7Ih0N0uMtEHI4Fd1Qc2X4kVcdDowuLc7JtbikVqduIJKECch4YAk=
Received: by 10.100.10.20 with SMTP id 20mr1530571anj.1176395788975;
        Thu, 12 Apr 2007 09:36:28 -0700 (PDT)
Received: by 10.100.107.7 with HTTP; Thu, 12 Apr 2007 09:36:28 -0700 (PDT)
Message-ID: <c68e39170704120936o7f23171cxd3b163d7f94178b@mail.gmail.com>
Date: Thu, 12 Apr 2007 12:36:28 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
In-Reply-To: <-3949067926090573017@unknownmsgid>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <461D15D6.5080408@r.email.ne.jp>
	 <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
	 <-3949067926090573017@unknownmsgid>
X-Google-Sender-Auth: b3f60dd60f162d01
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/12/07, Bill Janssen <janssen@parc.com> wrote:
> > docfreqs (idfs) do not take into account deleted docs.
> > This is more of an engineering tradeoff rather than a feature.
> > If we could cheaply and easily update idfs when documents are deleted
> > from an index, we would.
>
> Wow.  So is it fair to say that the stored IDF is really the
> cumulative IDF for all the documents that have ever been in the index
> since it was last optimized?

Not quite... all documents that are marked as deleted, but haven't
actually been removed from the index.  Adding new documents sometimes
causes segments to me merged, and the resulting new segment will have
no deleted docs.

The difference between IndexReader.maxDoc() and numDocs() tells you
how many documents have been marked for deletion but still take up
space in the index.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 16:48:43 2007
Return-Path: <java-user-return-27586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91385 invoked from network); 12 Apr 2007 16:48:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 16:48:42 -0000
Received: (qmail 7217 invoked by uid 500); 12 Apr 2007 16:48:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6942 invoked by uid 500); 12 Apr 2007 16:48:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6931 invoked by uid 99); 12 Apr 2007 16:48:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:48:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 09:48:33 -0700
Received: by mu-out-0910.google.com with SMTP id i10so692505mue
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 09:48:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=du/uzfqXouyH+/DndzCZJY1MfjarV822JmDkCh70BUMQl84+JJS5HPT1LWQ6T5LU5G7uuMiZIX2fJpg8XYLBO9fgL84A26LuHTptiMYHMd9kpSxdaJgKrE4LJl1ZheEcZwrz6vxEJzaLIA5D/2L6nAzdXtm/M/98/NQllZNPuFk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Aw2wqXpdW/JsR85azfLEq78C+2IRDcbf0S/8I0GGMhoeCZ5d/a2lvBBZaLoc+D68OmqcR+AO7NjuT6xZxPvRT/DLKgAc12PYyfdUTZzRBrSyBaAaIMg8za2xZT4sbIVSQ4p7iLkNN426bpdIfWxBUTMW48KaOYC6aJgwMsCv9VM=
Received: by 10.82.162.14 with SMTP id k14mr2809136bue.1176396492187;
        Thu, 12 Apr 2007 09:48:12 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Thu, 12 Apr 2007 09:48:12 -0700 (PDT)
Message-ID: <359a92830704120948g74756eb3l1431a7681af95c7d@mail.gmail.com>
Date: Thu, 12 Apr 2007 12:48:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index performance
In-Reply-To: <BAY144-F9CD75F836A43F9B4550F2D45E0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26856_7054627.1176396492112"
References: <BAY144-F9CD75F836A43F9B4550F2D45E0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26856_7054627.1176396492112
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> Another question is if I can delete document based on storyIndentity field
> (
> using IndexReader.deleteDocuments(term)). Since storyIdentity field is not
> indexed, is there any performance issue or I should index it too (and
> store
> it)?
>
>

As to your very last question, No, there'll be no performance penalty.
That's because there won't be any docs deleted <G>....

>From the javadoc (2.1) for IndexReader.deleteDocuments(Term)

" Deletes all documents that have a given term indexed."

You may be ahead if you index it UN_TOKENIZED though since
indexing it tokenized could lead to "interesting" results. Say you
have three of these IDs.
"this is id1"
"this is id2"
"this is id3"

Things would be fine if your terms were "id1", "id2", or "id3".
But if your term were "this", you would remove all your documents
if you indexed the identity TOKENIZED because "this" is a term
in all three docs for the identity field.

And to add to Otis's comment, optimizing is a pretty expensive
step in my experience...

Best
Erick

------=_Part_26856_7054627.1176396492112--

From java-user-return-27587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 17:02:52 2007
Return-Path: <java-user-return-27587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99391 invoked from network); 12 Apr 2007 17:02:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 17:02:51 -0000
Received: (qmail 53368 invoked by uid 500); 12 Apr 2007 17:02:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53333 invoked by uid 500); 12 Apr 2007 17:02:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53322 invoked by uid 99); 12 Apr 2007 17:02:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:02:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:02:42 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hc2gg-0005zG-5c
	for java-user@lucene.apache.org; Thu, 12 Apr 2007 10:02:22 -0700
Message-ID: <9963775.post@talk.nabble.com>
Date: Thu, 12 Apr 2007 10:02:22 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue with search() Help Appreciated.
In-Reply-To: <9932151.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
References: <9914639.post@talk.nabble.com> <200704100859.37820@danielnaber.de> <9932151.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


The issue is solved. Luke was very helpful in debugging, infact it helped to
identify a very basic mistake we were making.


Lokeya wrote:
> 
> I solved the issue by using:
> 
> 1.Same Analyser.
> 2.Making indexing by tokenizing terms.
> 
> Now issue with the following code is, I am facing issues which I have
> pasted after the code, I searched the forum but couldn't find a relevant
> post :
> 
> QueryParser parser = new QueryParser("Title", analyzer);
> Query query = parser.parse("Cache");
>  Hits hits = isearcher.search(query);
> 
> Issues:
> --------
> 1. Not getting relevant documents.
> 2. Suprisingly and ugly though -> Getting same number for the
> Hits.length() which is 21 and then gives OutOfMemoryError.
> 
> Infact I realised I should give details of what I want to do may be that
> wud help someone to tell whats the issue:
> 
> I have document with field : "Tiltle" and "Description" which I have
> indexed and I am searching one of these fields for certain terms. Is my
> above code fine or I shud be using the query in some other manner. 
> 
> Please Advice.
> 
> 
> Daniel Naber-5 wrote:
>> 
>> On Tuesday 10 April 2007 08:40, Lokeya wrote:
>> 
>>> But when i try to get hits.length() it is 0.
>>>
>>> Can anyone point out whats wrong ?
>> 
>> Please check the FAQ first:
>> http://wiki.apache.org/lucene-java/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71
>> 
>> Regards
>>  Daniel
>> 
>> -- 
>> http://www.danielnaber.de
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Issue-with-search%28%29-Help-Appreciated.-tf3551357.html#a9963775
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 17:13:12 2007
Return-Path: <java-user-return-27588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3857 invoked from network); 12 Apr 2007 17:13:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 17:13:11 -0000
Received: (qmail 78030 invoked by uid 500); 12 Apr 2007 17:13:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77997 invoked by uid 500); 12 Apr 2007 17:13:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77986 invoked by uid 99); 12 Apr 2007 17:13:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:13:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:13:02 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hc2qg-000145-Ip
	for java-user@lucene.apache.org; Thu, 12 Apr 2007 10:12:42 -0700
Message-ID: <9964017.post@talk.nabble.com>
Date: Thu, 12 Apr 2007 10:12:42 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Basic Question in Lucene Indexing.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have one million records to index, each of which have "Tiltle",
"Desciption" and "Identifier". If take each document and try to index these
fields my program was very slow. So I took 100,000 records and get the value
of these fields, add them to the addDocument() method. Then I use the Index
writer to write this document. So by doing this looks like it creates only
one document id and have all contents in that.I repeat this writing for
700,000 records so 70 doc ids are craeted in total. Till now no
issue(atleast I assumed)

Then I tried to search the for some value, I was getting Hits whose length
would be some number say 21 and when i try to retrieve the documents
assuming all 21 documents have matches they actually dont have, so whats
happening is, it just gets the docs from same document id. Luke was helpful
in finding this issue. Later I took just around 20 records and tried to
index then separately and tried to retrieve and it worked fine. 

Now my major issue is when I try to open index 700,000 times, it will be
really very slow. I am wondering what is the ideal way to do this.

Thanks in Advance.
-- 
View this message in context: http://www.nabble.com/Basic-Question-in-Lucene-Indexing.-tf3566940.html#a9964017
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 17:14:42 2007
Return-Path: <java-user-return-27589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5354 invoked from network); 12 Apr 2007 17:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 17:14:41 -0000
Received: (qmail 84402 invoked by uid 500); 12 Apr 2007 17:14:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84367 invoked by uid 500); 12 Apr 2007 17:14:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84356 invoked by uid 99); 12 Apr 2007 17:14:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:14:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:14:32 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hc2s8-000487-FR
	for java-user@lucene.apache.org; Thu, 12 Apr 2007 10:14:12 -0700
Message-ID: <9964019.post@talk.nabble.com>
Date: Thu, 12 Apr 2007 10:14:12 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue with : Searcher.search() returning Hits of same length
 for different searches
In-Reply-To: <200704112055.02088@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
References: <9933089.post@talk.nabble.com> <359a92830704110620l6991b4cbjf4ff6ad9fcba8f1d@mail.gmail.com> <9943315.post@talk.nabble.com> <200704112055.02088@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your suggestion. I used Luke to debug and found the issue.

I have one million records to index, each of which have "Tiltle",
"Desciption" and "Identifier". If take each document and try to index these
fields my program was very slow. So I took 100,000 records and get the value
of these fields, add them to the addDocument() method. Then I use the Index
writer to write this document. So by doing this looks like it creates only
one document id and have all contents in that.I repeat this writing for
700,000 records so 70 doc ids are craeted in total. Till now no
issue(atleast I assumed)

Then I tried to search the for some value, I was getting Hits whose length
would be some number say 21 and when i try to retrieve the documents
assuming all 21 documents have matches they actually dont have, so whats
happening is, it just gets the docs from same document id. Luke was helpful
in finding this issue. Later I took just around 20 records and tried to
index then separately and tried to retrieve and it worked fine. 

Now my major issue is when I try to open index 700,000 times, it will be
really very slow. I am wondering what is the ideal way to do this.

Thanks in Advance.



Daniel Naber-5 wrote:
> 
> On Wednesday 11 April 2007 18:51, Lokeya wrote:
> 
>> Thanks for your reply. I should have given more information and will
>> keep in mind this for my future queries.
> 
> If nothing else helps, please write a small, standalone test-case that 
> shows the problem. This can then easily be debugged by someone else (but 
> often you find the problem yourself when writing the test case).
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Issue-with-%3A-Searcher.search%28%29-returning-Hits-of-same-length-for-different-searches-tf3557277.html#a9964019
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 17:28:17 2007
Return-Path: <java-user-return-27590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10590 invoked from network); 12 Apr 2007 17:28:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 17:28:15 -0000
Received: (qmail 13592 invoked by uid 500); 12 Apr 2007 17:28:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13264 invoked by uid 500); 12 Apr 2007 17:28:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13253 invoked by uid 99); 12 Apr 2007 17:28:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:28:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:28:07 -0700
Received: by ug-out-1314.google.com with SMTP id k40so349402ugc
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 10:27:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZTzynPsPVLz7hLAeLVuyDdnPJIASwyqaf8/9ukVWjmArKxNvFJzWJ6O9ZgrL/3XsAp+g6oqAIpvlobqqZpUuuCS6NriTaQMMpVje98HFVj+mMzXVH5zCy78zQ/YYHS73RAsIWihNEgltfX0LZTem2yIqYXNxWZ15mmBIawktBzM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rBheq722zmM5YZ+BVQ/jN1Fe/aKxHKThYQ7IhmpfdAklcQTKYm+8I242uHQYQTuYq1uyW5rIrWWHHzHMjl52jlBfbdQzmfbFaBLlSruY+j56EB3laD4LTFEJUic70xHDCW7B5wQOkopJcaFOab1la/ySPEpU5VJbFcp6cDW/Ve4=
Received: by 10.82.120.14 with SMTP id s14mr2927075buc.1176398865508;
        Thu, 12 Apr 2007 10:27:45 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Thu, 12 Apr 2007 10:27:45 -0700 (PDT)
Message-ID: <359a92830704121027n53c8965ah76f737893b7b713@mail.gmail.com>
Date: Thu, 12 Apr 2007 13:27:45 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Basic Question in Lucene Indexing.
In-Reply-To: <9964017.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27469_25719674.1176398865086"
References: <9964017.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27469_25719674.1176398865086
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Don't do that <G> Why are you trying to open the index 700,000 times?
During indexing or searching? In either case, there's no reason
to. You should be able to open the index and keep it open as long
as you want.

I still don't understand why you can't index the records individually,
but I'll assume you've proven it to your own satisfaction. But I
will mention that if you were opening/closing your index each
time, *that* was your problem....

Erick.

On 4/12/07, Lokeya <lokeya@gmail.com> wrote:
>
>
> I have one million records to index, each of which have "Tiltle",
> "Desciption" and "Identifier". If take each document and try to index
> these
> fields my program was very slow. So I took 100,000 records and get the
> value
> of these fields, add them to the addDocument() method. Then I use the
> Index
> writer to write this document. So by doing this looks like it creates only
> one document id and have all contents in that.I repeat this writing for
> 700,000 records so 70 doc ids are craeted in total. Till now no
> issue(atleast I assumed)
>
> Then I tried to search the for some value, I was getting Hits whose length
> would be some number say 21 and when i try to retrieve the documents
> assuming all 21 documents have matches they actually dont have, so whats
> happening is, it just gets the docs from same document id. Luke was
> helpful
> in finding this issue. Later I took just around 20 records and tried to
> index then separately and tried to retrieve and it worked fine.
>
> Now my major issue is when I try to open index 700,000 times, it will be
> really very slow. I am wondering what is the ideal way to do this.
>
> Thanks in Advance.
> --
> View this message in context:
> http://www.nabble.com/Basic-Question-in-Lucene-Indexing.-tf3566940.html#a9964017
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27469_25719674.1176398865086--

From java-user-return-27591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 17:41:23 2007
Return-Path: <java-user-return-27591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16428 invoked from network); 12 Apr 2007 17:41:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 17:41:23 -0000
Received: (qmail 38897 invoked by uid 500); 12 Apr 2007 17:41:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38869 invoked by uid 500); 12 Apr 2007 17:41:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38857 invoked by uid 99); 12 Apr 2007 17:41:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:41:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [81.169.146.190] (HELO mo-p07-ob.rzone.de) (81.169.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:41:12 -0700
Received: from [192.168.178.20]
	(p57bb0fe8.dip0.t-ipconnect.de [87.187.15.232])
	by post.webmailer.de (fruni mo57) (RZmta 5.5)
	with ESMTP id I04edaj3CG9drB for <java-user@lucene.apache.org>;
	Thu, 12 Apr 2007 19:40:48 +0200 (MEST)
From: "Steffen Heinrich" <lucene-users@atablis.com>
To: java-user@lucene.apache.org
Date: Thu, 12 Apr 2007 19:40:36 +0200
MIME-Version: 1.0
Subject: Re: Turning PrefixQuery into a TermQuery
Message-ID: <461E8B34.9456.DED307@lucene-users.atablis.com>
Priority: normal
In-reply-to: <359a92830704120627l349e8ac4t26b4bdba96912555@mail.gmail.com>
References: <461E23E6.12755.E720E2@lucene-users.atablis.com>
X-mailer: Pegasus Mail for Windows (4.31, DE v4.31 R1)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Content-description: Mail message body
X-RZG-AUTH: jtz0MUsFuuf6oFDp3IiuuL5tq2uJr2xgKjtNOWqOfpGIlwVGYmele5T0IBw8R87OUkSc
X-RZG-CLASS-ID: mo07
X-Virus-Checked: Checked by ClamAV on apache.org

On 12 Apr 2007 at 9:27, Erick Erickson wrote:

> See below....
...
> Not quite. As I understand your problem, you want all the terms that
> match (or at least a subset) for a field. For this, WildcardTermEnum
> is really all you need. Think of it this way...
> (Wildcard)TermEnum gives you a list of all the terms for a particular field.
>       Each term will be mentioned exactly once regardless of how many
>       times it appears in your corpus.
> TermDocs will allow you to find documents with those terms.
> 
> Since you're trying to do a set of suggestions, you really don't need
> to know anything about documents that the terms appear in, or even
> how many documents they appear in. All you need is a list of
> the unique terms. Thus you don't need TermDocs here at all.
> 
Oops, we have a different conception here.
Its not individual terms that I want to suggest, but entire artist 
names (usually > 1 term) or song titles or rather groups thereof. And 
these are matching to documents in my model.

I'm currently dealing with 2 separate indexes.
1 song index has the fields 'artist' and 'title' indexed per (song-
)document. It also has for both fields the relative frequency of 
their distinct spellings in the original corpus.
1 artist index contains only the unique artist names and has them 
indexed and stored together with their commoness. 

The first index is used when the artist is filled in and all his 
songs are to be displayed or in cases where someone starts inputting 
part of a song title.

The latter index gets perused for performance reasons whenever there 
is only input for the artist name.

Continued and elaborated at the end of the mail...

> Here's part of a chunk of code I have lying around. It
> prints out all the terms that appear in a particular field and you
> should easily be able to make it use a WIldcardTermEnum...
> This is a hack I made for a one-off, so I don't have to be
> proud of it......
> 
>     private void enumField(String field) throws Exception
>     {
>         long start = System.currentTimeMillis();
>         TermEnum termEnum = this.reader.getIndexReader().terms(new
> Term(field, ""));
> 
>         this.writer.println("Values for term " + field);
> 
>         Term term = termEnum.term();
>         int idx = 0;
> 
>         while ((term != null) && term.field().equals(field)) {
>             System.out.println(term.text());
> 
>             termEnum.next();
> 
>             term = termEnum.term();
>             ++idx;
>         }
> 
>         long interval = System.currentTimeMillis() - start;
> 
>         System.out.println(
>                 String.format(
>                         "%d terms took %d milliseconds (%d seconds) to
> enumerate term %s",
>                         idx,
>                         interval,
>                         interval / CaptureTerms.MILLIS_IN_SECOND,
>                         field));
>     }
> 

Yep, I think that now I understand where the TermEnum takes its place 
in the lucene orchestra. Thank you.

...

> 
> You'll have to elaborate what "fault tolerant search" means. If you're
> worried about misspellings, that's tough. You could try FuzzyQuery,
> or if that doesn't work you could think about working with soundex. But I
> can't stress strongly enough that you need to be absolutely sure this
> is a real problem *that your users will notice* before you invest time and
> energy in solving it. I'm continually amazed how much time and energy
> I spend solving non-existent problems <G>....
Fuzzy and metaphone queries are absolutely out of question, I agree.

> 
> And for your sanity's sake, don't ask the produce manager anything
> remotely like "would you like fault-tolearant searches?". The answer
> will be yes. Regardless of whether it makes a difference to the end
> user. And I'll only mention briefly that asking Sales if they'd like
> a feature is the road to madness.....
The manager in this case, am I :-)

I picked this task all by myself as a private project that I hope 
helps to get me into Java and Lucene.
I have an interest in fulltext searches and IR systems ever since I 
had to write a (simple) engine some years ago. In Perl that was.

> 
> And a spell checker isn't very useful with names anyway......
> 
....

I very much agree that fault tolerance in most other search 
applications makes no sense, confuses the user and is inferior to a 
well suited choice of applicable search criteria.
Here however, the idea is to direct the user's attention towards an 
information that he didn't think of beforehand but that is present in 
the database and possibly gives him pleasure to find out.

I don't know whether your personal interest is rather books or music 
but just imagine that you can enter into the form any terms from an 
artist or song name that you vastly remember - et voila, there it is!
Find yet unknown songs by your favourite group, find covers of your 
favourite songs.

An example of what I have in mind can be found here:
http://tinyurl.com/35g3yo

My 1.5 million songs is very small a corpus compared to theirs but 
the basic problems are still the same:

A huge number of documents (individual songs) with two fields of 
little content to each of them.

The content's spelling is as unreliable or rather 'diverse' as any 
user input.
I've already folded the originally much, much bigger corpus down to 
those songs where at least 2 instances for the spellings of artist 
and song name exist and yet any more popular song may still be 
present in dozens of different forms.

Thus, without any fault tolerance, a 'sharp' search executed for any 
popular song or artist will probably return the expected result, or 
possibly even a misspelled input.
But much rarer, I think it will return suggestions for the more 
uncommon songs. And that is basically what this whole suggest thingy 
aims at.
Suggestions must be artists or songs, not just terms.

Hopefully my discription was not too confuse, maybe I am.

I will now first try to find the most effective way to expand the 
prefixes and leave the 'fuzzy' aspect for e 2nd step.


Thank you for your thoughts,
Steffen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 17:49:34 2007
Return-Path: <java-user-return-27592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20759 invoked from network); 12 Apr 2007 17:49:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 17:49:33 -0000
Received: (qmail 59921 invoked by uid 500); 12 Apr 2007 17:49:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59590 invoked by uid 500); 12 Apr 2007 17:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59579 invoked by uid 99); 12 Apr 2007 17:49:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:49:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 10:49:22 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <224389(2)>; Thu, 12 Apr 2007 10:48:43 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <57996>; Thu, 12 Apr 2007 10:48:40 PDT
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1 
In-reply-to: <c68e39170704120936o7f23171cxd3b163d7f94178b@mail.gmail.com> 
References: <461D15D6.5080408@r.email.ne.jp> <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com> <-3949067926090573017@unknownmsgid> <c68e39170704120936o7f23171cxd3b163d7f94178b@mail.gmail.com>
Comments: In-reply-to "Yonik Seeley" <yonik@apache.org>
    message dated "Thu, 12 Apr 2007 09:36:28 -0700."
Date: Thu, 12 Apr 2007 10:48:35 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <07Apr12.104840pdt."57996"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> The difference between IndexReader.maxDoc() and numDocs() tells you
> how many documents have been marked for deletion but still take up
> space in the index.

But not which terms have an odd IDF value because of those deleted
documents.  How much does the IDF value contribute to the "score" in
search?

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 18:01:03 2007
Return-Path: <java-user-return-27593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27804 invoked from network); 12 Apr 2007 18:01:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 18:01:03 -0000
Received: (qmail 87215 invoked by uid 500); 12 Apr 2007 18:01:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87175 invoked by uid 500); 12 Apr 2007 18:01:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87164 invoked by uid 99); 12 Apr 2007 18:01:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 11:01:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [81.169.146.188] (HELO mo-p07-ob.rzone.de) (81.169.146.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 11:00:51 -0700
Received: from [192.168.178.20]
	(p57bb0fe8.dip0.t-ipconnect.de [87.187.15.232])
	by post.webmailer.de (mrclete mo3) (RZmta 5.5)
	with ESMTP id N030f2j3CF7YNQ for <java-user@lucene.apache.org>;
	Thu, 12 Apr 2007 20:00:28 +0200 (MEST)
From: "Steffen Heinrich" <lucene-users@atablis.com>
To: java-user@lucene.apache.org
Date: Thu, 12 Apr 2007 20:00:16 +0200
MIME-Version: 1.0
Subject: Re: Turning PrefixQuery into a TermQuery
Message-ID: <461E8FD0.4629.F0D5EE@lucene-users.atablis.com>
Priority: normal
In-reply-to: <50333FFF-8181-4145-8D88-AA30363F9380@gmail.com>
References: <461E23E6.13737.E7215F@lucene-users.atablis.com>
X-mailer: Pegasus Mail for Windows (4.31, DE v4.31 R1)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Content-description: Mail message body
X-RZG-AUTH: jtz0MUsFuuf6oFDp3IiuuL5tq2uJr2xgKjtNOWqOfpGIlwVGYmele5T0IBw8R87OUkSc
X-RZG-CLASS-ID: mo07
X-Virus-Checked: Checked by ClamAV on apache.org

On 12 Apr 2007 at 16:49, karl wettin wrote:
> 
> 12 apr 2007 kl. 12.19 skrev Steffen Heinrich:
> 
> >
> > The intended system however can not be trained by user input. The
> > suggestions have to come from a given corpus (e.g. an ocasionally
> > updated product database).
> > Do you think adopting your package to set up the tries from a corpus
> > would be fairly easy?
> 
> You can train it with any data you want. So you would need to figure  
> out what people probably will be searching for. The first thing I can  
> think of is to extract the most frequenct n grams at a word level in  
> your title field, or so. It is tough to say what might actually work.  
> Frequent phrases in the corpus might have nothing to do with consumer  
> popularity.
> 
> If I understand everyhing, your application is installed locally on  
> consumer machines. Perhaps you could allow end users to share  
> anonymous data based on taste and build a set per end user.  
> Collaborative filtering comes to mind. Reducing a data set to  
> something relevant usually equals behavioural analysis.
> 
> Hope this helps.
> 
> -- 
> karl
> 
Wow, this way of data mining is way over my top! I wouldn't know 
where to begin. 

This search is only meant to be used in an ajax-driven web 
application.
And the basic idea is to give the user incentive and turn him to 
something new, something he didn't think of before.
I just generalized on the concept in a mail to Erick under the same 
subject. There is also a link to a working implementation that served 
as my model.

In the wikipedia article on tries I found the following sentence 
drawing my attention:
"Tries are also well suited for implementing approximate matching 
algorithms, including those used in spell checking software."

Do you have any information about how this can be done?

Cheers,
Steffen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 18:23:34 2007
Return-Path: <java-user-return-27594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43618 invoked from network); 12 Apr 2007 18:23:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 18:23:33 -0000
Received: (qmail 34516 invoked by uid 500); 12 Apr 2007 18:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34482 invoked by uid 500); 12 Apr 2007 18:23:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34471 invoked by uid 99); 12 Apr 2007 18:23:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 11:23:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 11:23:24 -0700
Received: by wr-out-0506.google.com with SMTP id 68so577741wra
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 11:23:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=pjX7JUTwOpFEqXQ90ZhmT3m8H+SIqRTaK1Fb1necsATJsBHmjsOWN9+YMl6p5xI0Qsi8N6rUJrJWvo0L3aLjreIPCCaivlYViCbyWjZwNfn8IO9xq51dLMuiSPTEjCm4ddILY5Uw13lGYmzlFIXdPWELBZdtrl12SWMLZyMKYy4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ZrGgoYk811P4LX4syDylerx1MPUAmETr46P5wkfcmFmyDwwKK87oZmXPr1cXUe242PyNQDDDTw4ZhE5Zw+Q9Lze4ISoV2D0rvsLERLPY9KUPkWCD0msw4TZxUgxo5v0VvmkDZAUcxlQ2OJ/orFO2gs64Z0mvrALOBBb6Ajh7Zh4=
Received: by 10.78.183.15 with SMTP id g15mr491441huf.1176402182841;
        Thu, 12 Apr 2007 11:23:02 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id u9sm867739muf.2007.04.12.11.23.00;
        Thu, 12 Apr 2007 11:23:01 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <461E8FD0.4629.F0D5EE@lucene-users.atablis.com>
References: <461E23E6.13737.E7215F@lucene-users.atablis.com> <461E8FD0.4629.F0D5EE@lucene-users.atablis.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3CDF345C-37F2-4198-943B-489BD756FAB7@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Turning PrefixQuery into a TermQuery
Date: Thu, 12 Apr 2007 20:22:27 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


12 apr 2007 kl. 20.00 skrev Steffen Heinrich:

> This search is only meant to be used in an ajax-driven web
> application.
> And the basic idea is to give the user incentive and turn him to
> something new, something he didn't think of before.
> I just generalized on the concept in a mail to Erick under the same
> subject. There is also a link to a working implementation that served
> as my model.

As "ivan charo" finds "Ivan Goncharov", I suspect they work on a  
token n gram level. Perhaps that is something you could try?

Still, I don't like the idea of hammering the index like that. But in  
your case that might not be a problem.

> "Tries are also well suited for implementing approximate matching
> algorithms, including those used in spell checking software."
>
> Do you have any information about how this can be done?

The author probably thought of navigating an "a priori" trie (a trie  
filled with known good words) using some path finder algorithm  
(breadth first, Dijkstra, A*, et c) based on the (possibly) incorrect  
spelled word. Personally I think there are better (algorithmic) ways  
to solve that problem.

You are welcome to try <https://issues.apache.org/jira/browse/ 
LUCENE-626> if you find spellchecking interesting.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 19:21:35 2007
Return-Path: <java-user-return-27595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86626 invoked from network); 12 Apr 2007 19:21:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 19:21:34 -0000
Received: (qmail 68182 invoked by uid 500); 12 Apr 2007 19:21:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68155 invoked by uid 500); 12 Apr 2007 19:21:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68144 invoked by uid 99); 12 Apr 2007 19:21:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 12:21:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 12:21:26 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3CJL5ZY108194
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 19:21:05 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3CJL5vq3817542
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 21:21:05 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3CJL4HR009295
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 21:21:05 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3CJL4P9009292
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 21:21:04 +0200
In-Reply-To: <F63F98CC-BA93-4F82-A952-ABE2FF261A87@gmail.com>
Subject: Re: Term frequency
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFC483CE69.BEAA5C5D-ON882572BB.0064431A-882572BB.006A36EF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 12 Apr 2007 12:20:08 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 12/04/2007 22:21:04
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin <karl.wettin@gmail.com> wrote on 12/04/2007 00:25:47:

>
> 12 apr 2007 kl. 09.12 skrev sai hariharan:
>
> > Thanx for replying. In my scenario i'm not going to index any of my
> > docs.
> > So is there a way to find out term frequencies of the terms in a doc
> > without doing the indexing part?
>
> Using an analyzer (Tokenstream) and a Map<String, Integer>?
>
> while ((t = ts.next)!=null) {
>    Integer tf = map.get(t.termtext());
>    if (tf == null) {
>      tf = 1;
>    } else {
>      tf++;
>    }
>    map.put(t.termtext(), tf);
> }
>
>
> --
> karl

Note that for searching/looking into a single document, contrib's
MemoryIndex may be useful.
(probably overkill for just term freqs)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 19:29:28 2007
Return-Path: <java-user-return-27596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90973 invoked from network); 12 Apr 2007 19:29:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 19:29:16 -0000
Received: (qmail 85552 invoked by uid 500); 12 Apr 2007 19:29:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85507 invoked by uid 500); 12 Apr 2007 19:29:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85496 invoked by uid 99); 12 Apr 2007 19:29:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 12:29:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [81.169.146.189] (HELO mo-p07-ob.rzone.de) (81.169.146.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 12:29:07 -0700
Received: from [192.168.178.20]
	(p57bb0fe8.dip0.t-ipconnect.de [87.187.15.232])
	by post.webmailer.de (klopstock mo9) (RZmta 5.5)
	with ESMTP id T073a9j3CHl8ue for <java-user@lucene.apache.org>;
	Thu, 12 Apr 2007 21:28:43 +0200 (MEST)
From: "Steffen Heinrich" <lucene-users@atablis.com>
To: java-user@lucene.apache.org
Date: Thu, 12 Apr 2007 21:28:31 +0200
MIME-Version: 1.0
Subject: Re: Turning PrefixQuery into a TermQuery
Message-ID: <461EA47F.3500.141A0EA@lucene-users.atablis.com>
Priority: normal
In-reply-to: <3CDF345C-37F2-4198-943B-489BD756FAB7@gmail.com>
References: <461E8FD0.4629.F0D5EE@lucene-users.atablis.com>
X-mailer: Pegasus Mail for Windows (4.31, DE v4.31 R1)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Content-description: Mail message body
X-RZG-AUTH: jtz0MUsFuuf6oFDp3IiuuL5tq2uJr2xgKjtNOWqOfpGIlwVGYmele5T0IBw8R87OUkSc
X-RZG-CLASS-ID: mo07
X-Virus-Checked: Checked by ClamAV on apache.org

On 12 Apr 2007 at 20:22, karl wettin wrote:

> 
> 12 apr 2007 kl. 20.00 skrev Steffen Heinrich:
> 
> > This search is only meant to be used in an ajax-driven web
> > application.
> > And the basic idea is to give the user incentive and turn him to
> > something new, something he didn't think of before.
> > I just generalized on the concept in a mail to Erick under the same
> > subject. There is also a link to a working implementation that served
> > as my model.
> 
> As "ivan charo" finds "Ivan Goncharov", I suspect they work on a  
> token n gram level. Perhaps that is something you could try?
Some weeks ago I tried out the NGramTokenstream by alias-i as it was 
presented in 'Lucene in Action' and it returned good results but 
seemed to be overly time consuming against the spell checker which 
was distributed with lucene 2.1.0.

> 
> Still, I don't like the idea of hammering the index like that. But in  
> your case that might not be a problem.
> 
> > "Tries are also well suited for implementing approximate matching
> > algorithms, including those used in spell checking software."
> >
> > Do you have any information about how this can be done?
> 
> The author probably thought of navigating an "a priori" trie (a trie  
> filled with known good words) using some path finder algorithm  
> (breadth first, Dijkstra, A*, et c) based on the (possibly) incorrect  
> spelled word. Personally I think there are better (algorithmic) ways  
> to solve that problem.
> 
> You are welcome to try <https://issues.apache.org/jira/browse/ 
> LUCENE-626> if you find spellchecking interesting.
> 
It looks promising and I will try to get my head into it, but I'm not 
sure at all if I'll be up to the task. :(

Thank you, Karl.

Kind Regards,
Steffen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 20:23:29 2007
Return-Path: <java-user-return-27597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25082 invoked from network); 12 Apr 2007 20:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 20:23:29 -0000
Received: (qmail 89503 invoked by uid 500); 12 Apr 2007 20:23:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89475 invoked by uid 500); 12 Apr 2007 20:23:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89464 invoked by uid 99); 12 Apr 2007 20:23:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:23:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.213 as permitted sender)
Received: from [65.54.246.213] (HELO bay0-omc3-s13.bay0.hotmail.com) (65.54.246.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:23:21 -0700
Received: from hotmail.com ([65.55.155.105]) by bay0-omc3-s13.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 12 Apr 2007 13:23:01 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 12 Apr 2007 13:23:00 -0700
Message-ID: <BAY144-F25E5B67E65D828BC6F3ADED45E0@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Thu, 12 Apr 2007 20:22:56 GMT
X-Originating-IP: [64.236.128.27]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
In-Reply-To: <359a92830704120948g74756eb3l1431a7681af95c7d@mail.gmail.com>
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index performance
Date: Thu, 12 Apr 2007 20:22:56 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 12 Apr 2007 20:23:00.0813 (UTC) FILETIME=[5DC837D0:01C77D40]
X-Virus-Checked: Checked by ClamAV on apache.org


Eric,

Thanks for the information. The id is generated by database and it is 
unique. So I only need to index it and don't need to store it, right

Tony

>From: "Erick Erickson" <erickerickson@gmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Index performance
>Date: Thu, 12 Apr 2007 12:48:12 -0400
>
>>Another question is if I can delete document based on storyIndentity field
>>(
>>using IndexReader.deleteDocuments(term)). Since storyIdentity field is not
>>indexed, is there any performance issue or I should index it too (and
>>store
>>it)?
>>
>>
>
>As to your very last question, No, there'll be no performance penalty.
>That's because there won't be any docs deleted <G>....
>
>>From the javadoc (2.1) for IndexReader.deleteDocuments(Term)
>
>" Deletes all documents that have a given term indexed."
>
>You may be ahead if you index it UN_TOKENIZED though since
>indexing it tokenized could lead to "interesting" results. Say you
>have three of these IDs.
>"this is id1"
>"this is id2"
>"this is id3"
>
>Things would be fine if your terms were "id1", "id2", or "id3".
>But if your term were "this", you would remove all your documents
>if you indexed the identity TOKENIZED because "this" is a term
>in all three docs for the identity field.
>
>And to add to Otis's comment, optimizing is a pretty expensive
>step in my experience...
>
>Best
>Erick

_________________________________________________________________
Need a break? Find your escape route with Live Search Maps. 
http://maps.live.com/?icid=hmtag3


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 20:24:57 2007
Return-Path: <java-user-return-27598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25487 invoked from network); 12 Apr 2007 20:24:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 20:24:56 -0000
Received: (qmail 91927 invoked by uid 500); 12 Apr 2007 20:24:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91891 invoked by uid 500); 12 Apr 2007 20:24:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91880 invoked by uid 99); 12 Apr 2007 20:24:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:24:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=ADVANCE_FEE_1,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.164 as permitted sender)
Received: from [65.54.246.164] (HELO bay0-omc2-s28.bay0.hotmail.com) (65.54.246.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:24:48 -0700
Received: from hotmail.com ([65.55.155.88]) by bay0-omc2-s28.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 12 Apr 2007 13:24:27 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 12 Apr 2007 13:24:27 -0700
Message-ID: <BAY144-F859E09ECC2EFF391915CDD45E0@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Thu, 12 Apr 2007 20:24:22 GMT
X-Originating-IP: [64.236.128.27]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
In-Reply-To: <182234.26649.qm@web50306.mail.re2.yahoo.com>
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index performance
Date: Thu, 12 Apr 2007 20:24:22 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 12 Apr 2007 20:24:27.0503 (UTC) FILETIME=[91740FF0:01C77D40]
X-Virus-Checked: Checked by ClamAV on apache.org

Otis,

I timed just for indexing.

thanks,
Tony

>From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Index performance
>Date: Thu, 12 Apr 2007 09:31:49 -0700 (PDT)
>
>Hi Tony,
>Your code looks fine to me.  I'm not sure what you timed - the whole app 
>run, just indexing, indexing + optimizing...  If you times indexing + 
>optimizing, leave optimization out of the timer.  How long do you think 
>this should take?  Try setting maxBufferedDocs to 90.
>
>Otis
>. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
>----- Original Message ----
>From: Tony Qian <tonyqian@hotmail.com>
>To: java-user@lucene.apache.org
>Sent: Thursday, April 12, 2007 11:23:36 AM
>Subject: Index performance
>
>All,
>
>Sorry for long email. I have two questions on indexing. My data consists of
>an id, short headline and story text. Story text has some html tags. Here 
>is
>an example.
>
>In early 2005, it seemed that Shamita Shetty had finally arrived after a
>high profile debut in <i>Mohabbatein</i> [2000]. <br /><br />With 3 of her
>films releasing in the first half of 2005, <i>Bewafa, Zeher </i>and
><i>Fareb</i>, and the first two ending up making good money, it seemed that
>the gorgeous girl had finally started making her presence felt. 
><i>Zeher</i>
>helped her being recognized as an actor and her fans had all the reasons to
>believe that they would be seeing more of her in the coming months. <br
>/><br />Surprisingly there has been absolutely no movement ever since then
>from Shamita's end as she hasn't had a single release in almost 2
>years now. All of this would change though with the arrival of <i>Cash</i>
>where she is one of the leading ladies apart from Esha Deol and Dia Mirza.
><br /><br />An action thriller popcorn entertainer, the film is directed by
>Anubahv Sinha of <i>Dus</i> fame and stars Ajay Devgan, Suneil Shetty,
>Ritesh Deshmukh and Zayed Khan in the lead.<br /><br />
>
>I tried to index it. It took from 7-10 seconds to index about 90 documents.
>Here is my code:
>
>   static void indexContents(IndexWriter writer, List storyContentList)
>     throws IOException {
>     if (storyContentList != null && storyContentList.size() != 0) {
>         try {
>             Iterator itr = storyContentList.iterator();
>             while (itr.hasNext()){
>                 StoryContents content = (StoryContents) itr.next();
>                 Document document = new Document();
>                 document.add(new Field("storyText", 
>content.getStoryText(),
>                              Field.Store.YES, Field.Index.TOKENIZED));
>                 document.add(new Field("storyIdentity",
>String.valueOf(content.getStoryIdentity()),
>                              Field.Store.YES, Field.Index.NO));
>                 document.add(new Field("headline1",
>String.valueOf(content.getHeadline1()),
>                              Field.Store.YES, Field.Index.NO));
>                 writer.addDocument(document);
>             }
>         }catch(Exception ex){
>              System.out.println(" caught a " + ex.getClass() );
>         }
>     }
>   }
>
>I opened one IndexWriter at very beginning
>IndexWriter writer = new IndexWriter(INDEX_DIR, new StandardAnalyzer(),
>true);
>
>I called optimize and closed IndexWriter after indexing documents.
>writer.optimize();
>writer.close();
>
>My question is why it took so long. Do I need to follow the instruction of
>"How can I index HTML documents?" in FAQ from Lucene web site?
>
>Another question is if I can delete document based on storyIndentity field 
>(
>using IndexReader.deleteDocuments(term)). Since storyIdentity field is not
>indexed, is there any performance issue or I should index it too (and store
>it)?
>
>Appreciate your help.
>
>Tony
>
>_________________________________________________________________
>Mortgage rates near historic lows. Refinance $200,000 loan for as low as
>$771/month*
>https://www2.nextag.com/goto.jsp?product=100000035&url=%2fst.jsp&tm=y&search=mortgage_text_links_88_h27f8&disc=y&vers=689&s=4056&p=5117
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>

_________________________________________________________________
MSN is giving away a trip to Vegas to see Elton John. Enter to win today. 
http://msnconcertcontest.com?icid-nceltontagline


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 20:25:44 2007
Return-Path: <java-user-return-27599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25665 invoked from network); 12 Apr 2007 20:25:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 20:25:44 -0000
Received: (qmail 94328 invoked by uid 500); 12 Apr 2007 20:25:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94303 invoked by uid 500); 12 Apr 2007 20:25:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94084 invoked by uid 99); 12 Apr 2007 20:25:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:25:30 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:25:23 -0700
Received: by py-out-1112.google.com with SMTP id a25so524345pyi
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 13:25:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=BJVeBsPD+aTEFiWDcm5GrJMIryRmMPMsh63MehHpT5SEzeCXIvA+WK92TpnyFWlKsHnKI7sa+NfOQV6rf4UM+XQT67iBeUGcoatGF5FJ+EunAlCBTGi4+6ks4KR50XcK1xkTVSeUHg8OLZSAK+kANvL6ktmiibZDIlzDmF7+/ng=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qkaDjYz/EOdS+dbdo1ctnI3XTtiPDnZIJ9eLFV1iSi3Y4BDTQXYrToE4RoOIjBX+oFGVFn371etoT6Hcy3jKzS40gFiFlozdO+4BXfVLyKhAWhAxBEhlwHPqKTVJx8U+Hfpozae6rlwplCbwFe3GuE55nMKXHd0RzbFjoPf3lj4=
Received: by 10.64.195.20 with SMTP id s20mr4661345qbf.1176409503006;
        Thu, 12 Apr 2007 13:25:03 -0700 (PDT)
Received: by 10.65.155.14 with HTTP; Thu, 12 Apr 2007 13:24:57 -0700 (PDT)
Message-ID: <e994873a0704121324t4c427cb8jb916197c639d3a80@mail.gmail.com>
Date: Thu, 12 Apr 2007 16:24:57 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Sorting on a field that can have null values
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31466_7899619.1176409497935"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31466_7899619.1176409497935
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm copying this reply from a topic with the same title from the defunct
'lucene-user' list. My comments follow it.

: I thought of putting empty strings instead of null values but I think
: empty strings are put first in the list while sorting which is the
: reverse of what anyone would want.

instead of adding a field with a null value, or value of an epty string,
why not just leave the field out for that/those doc(s)?

there's no requirement that every doc in your index has to have the exact
same set of fields.

If i rememebr correctly (you'll have to test this) sorting on a field
which doesn't exist for every doc does what you would want (docs with
values are listed before docs without)



-Hoss



The actual behavior is different than described above. I modified
TestSort.java:

    // test sorts where the type of field is specified
    public void testTypedSort() throws Exception {
        assertMatches (full, queryF, sort, "JIZ");
    }

The actual order of the results is: "ZJI". I believe this happens because
the field string cache 'order' array contains 0's for all the documents that
don't contain the field and thus sort first.

Suppose I want to exclude documents from being collected if they don't
contain the sort field. One way to do this is to index a unique
'empty_value' value for those documents and add a MUST_NOT boolean clause to
the query, for example: "<query terms> -field:empty_value)". But this seems
inefficient. Is there a better way?

Thanks,
Peter

------=_Part_31466_7899619.1176409497935--

From java-user-return-27600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 20:28:20 2007
Return-Path: <java-user-return-27600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26384 invoked from network); 12 Apr 2007 20:28:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 20:28:18 -0000
Received: (qmail 550 invoked by uid 500); 12 Apr 2007 20:28:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 331 invoked by uid 500); 12 Apr 2007 20:28:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 320 invoked by uid 99); 12 Apr 2007 20:28:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:28:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:28:10 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3CKRmH3192724
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 20:27:48 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3CKRmmC3936454
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 22:27:48 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3CKRmkM012940
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 22:27:48 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3CKRmdf012937
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 22:27:48 +0200
In-Reply-To: <BAY144-F9CD75F836A43F9B4550F2D45E0@phx.gbl>
Subject: Re: Index performance
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF992159CB.03A9CE1C-ON882572BB.006EDB5B-882572BB.00704BAD@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 12 Apr 2007 13:26:34 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 12/04/2007 23:27:47
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> I tried to index it. It took from 7-10 seconds to index about 90
documents.

That would be around 10 documents per second - way too slow. A Lucene's
perf test adding 12,000 docs sized similar to your sample doc (1400
characters) on a not so strong machine shows much faster pace - 146 docs
per second, or 237 with larger mix-beffered-docs setting:

 Operation     round maxBuf  runCnt  recsPerRun  rec/s  elapsedSec
 AddDocs_12000     0     10       1       12000  146.3       82.04
 AddDocs_12000     1   1000       1       12000  237.8       50.45

As Otis suggested, a larger max-buffered docs speeds things up.
But even without that, pace is 14 times faster than your numbers.

It might be interesting to measure without indexing at all, i.e. modify the
method indexContents() to something like:

  static int indexContents(IndexWriter writer, List storyContentList)
    throws IOException {
    int res = 0;
    if (storyContentList != null && storyContentList.size() != 0) {
        try {
            Iterator itr = storyContentList.iterator();
            while (itr.hasNext()){
                StoryContents content = (StoryContents) itr.next();
                res += content.length();
            }
        }catch(Exception ex){
             System.out.println(" caught a " + ex.getClass() );
        }
    }
    return res;
  }

This should show if there is other overhead involved, unrelated to
indexing.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 20:30:07 2007
Return-Path: <java-user-return-27601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27007 invoked from network); 12 Apr 2007 20:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 20:30:06 -0000
Received: (qmail 6708 invoked by uid 500); 12 Apr 2007 20:30:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6676 invoked by uid 500); 12 Apr 2007 20:30:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6665 invoked by uid 99); 12 Apr 2007 20:30:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:30:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=ADVANCE_FEE_1,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:29:58 -0700
Received: by mu-out-0910.google.com with SMTP id i10so761804mue
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 13:29:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A6UiSLsxnu8alK/8CE7MIklZ16onCdWKssReQgvNqNwtKi5TPvy0MoXlvNLWlIraXdg7Zwxxz6l+y5fGujz76Xk5pzd93t3YVIaohjqkNPldn/x/6wTr2NgZH0E4bUIbabHLHOE5lyYeCHu0emNE9Wl/nS5xp6/vATwaZZcRH3Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ivyui+ciDCJuRp3meWU4G1dBeu4wjfvXaVjBGIDb1iTSDkJdZP8Mkra5w2+lzKxI+zMIpOJM7qbh+10lZe34x2rhlP3btqjgdiLjJ1om1BOWktSDOyN3LnDWcNxHX8C7tXZ3EXJC8AE4QeaHQFV9THZDhLT1Gsd7jmZl6+/bgBo=
Received: by 10.82.104.18 with SMTP id b18mr3252275buc.1176409775754;
        Thu, 12 Apr 2007 13:29:35 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Thu, 12 Apr 2007 13:29:35 -0700 (PDT)
Message-ID: <359a92830704121329i26add537w971621f872726bcb@mail.gmail.com>
Date: Thu, 12 Apr 2007 16:29:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index performance
In-Reply-To: <BAY144-F859E09ECC2EFF391915CDD45E0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29953_10197021.1176409775650"
References: <182234.26649.qm@web50306.mail.re2.yahoo.com>
	 <BAY144-F859E09ECC2EFF391915CDD45E0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29953_10197021.1176409775650
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Inferring out on the end of a long and fragile limb..... Do you get
information from the database in any of the calls in your indexing
loop? That is, do any of...

   itr.next();
   content.getStoryText(),
   content.getStoryIdentity()
   content.getHeadline1()

go out to the DB to get info, and could that be where the time is
spent?

Erick

On 4/12/07, Tony Qian <tonyqian@hotmail.com> wrote:
>
> Otis,
>
> I timed just for indexing.
>
> thanks,
> Tony
>
> >From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> >Reply-To: java-user@lucene.apache.org
> >To: java-user@lucene.apache.org
> >Subject: Re: Index performance
> >Date: Thu, 12 Apr 2007 09:31:49 -0700 (PDT)
> >
> >Hi Tony,
> >Your code looks fine to me.  I'm not sure what you timed - the whole app
> >run, just indexing, indexing + optimizing...  If you times indexing +
> >optimizing, leave optimization out of the timer.  How long do you think
> >this should take?  Try setting maxBufferedDocs to 90.
> >
> >Otis
> >. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> >Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> >
> >----- Original Message ----
> >From: Tony Qian <tonyqian@hotmail.com>
> >To: java-user@lucene.apache.org
> >Sent: Thursday, April 12, 2007 11:23:36 AM
> >Subject: Index performance
> >
> >All,
> >
> >Sorry for long email. I have two questions on indexing. My data consists
> of
> >an id, short headline and story text. Story text has some html tags. Here
> >is
> >an example.
> >
> >In early 2005, it seemed that Shamita Shetty had finally arrived after a
> >high profile debut in <i>Mohabbatein</i> [2000]. <br /><br />With 3 of
> her
> >films releasing in the first half of 2005, <i>Bewafa, Zeher </i>and
> ><i>Fareb</i>, and the first two ending up making good money, it seemed
> that
> >the gorgeous girl had finally started making her presence felt.
> ><i>Zeher</i>
> >helped her being recognized as an actor and her fans had all the reasons
> to
> >believe that they would be seeing more of her in the coming months. <br
> >/><br />Surprisingly there has been absolutely no movement ever since
> then
> >from Shamita's end as she hasn't had a single release in almost 2
> >years now. All of this would change though with the arrival of
> <i>Cash</i>
> >where she is one of the leading ladies apart from Esha Deol and Dia
> Mirza.
> ><br /><br />An action thriller popcorn entertainer, the film is directed
> by
> >Anubahv Sinha of <i>Dus</i> fame and stars Ajay Devgan, Suneil Shetty,
> >Ritesh Deshmukh and Zayed Khan in the lead.<br /><br />
> >
> >I tried to index it. It took from 7-10 seconds to index about 90
> documents.
> >Here is my code:
> >
> >   static void indexContents(IndexWriter writer, List storyContentList)
> >     throws IOException {
> >     if (storyContentList != null && storyContentList.size() != 0) {
> >         try {
> >             Iterator itr = storyContentList.iterator();
> >             while (itr.hasNext()){
> >                 StoryContents content = (StoryContents) itr.next();
> >                 Document document = new Document();
> >                 document.add(new Field("storyText",
> >content.getStoryText(),
> >                              Field.Store.YES, Field.Index.TOKENIZED));
> >                 document.add(new Field("storyIdentity",
> >String.valueOf(content.getStoryIdentity()),
> >                              Field.Store.YES, Field.Index.NO));
> >                 document.add(new Field("headline1",
> >String.valueOf(content.getHeadline1()),
> >                              Field.Store.YES, Field.Index.NO));
> >                 writer.addDocument(document);
> >             }
> >         }catch(Exception ex){
> >              System.out.println(" caught a " + ex.getClass() );
> >         }
> >     }
> >   }
> >
> >I opened one IndexWriter at very beginning
> >IndexWriter writer = new IndexWriter(INDEX_DIR, new StandardAnalyzer(),
> >true);
> >
> >I called optimize and closed IndexWriter after indexing documents.
> >writer.optimize();
> >writer.close();
> >
> >My question is why it took so long. Do I need to follow the instruction
> of
> >"How can I index HTML documents?" in FAQ from Lucene web site?
> >
> >Another question is if I can delete document based on storyIndentity
> field
> >(
> >using IndexReader.deleteDocuments(term)). Since storyIdentity field is
> not
> >indexed, is there any performance issue or I should index it too (and
> store
> >it)?
> >
> >Appreciate your help.
> >
> >Tony
> >
> >_________________________________________________________________
> >Mortgage rates near historic lows. Refinance $200,000 loan for as low as
> >$771/month*
> >
> https://www2.nextag.com/goto.jsp?product=100000035&url=%2fst.jsp&tm=y&search=mortgage_text_links_88_h27f8&disc=y&vers=689&s=4056&p=5117
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> _________________________________________________________________
> MSN is giving away a trip to Vegas to see Elton John. Enter to win today.
> http://msnconcertcontest.com?icid-nceltontagline
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_29953_10197021.1176409775650--

From java-user-return-27602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 20:43:17 2007
Return-Path: <java-user-return-27602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31490 invoked from network); 12 Apr 2007 20:43:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 20:43:17 -0000
Received: (qmail 24612 invoked by uid 500); 12 Apr 2007 20:43:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24586 invoked by uid 500); 12 Apr 2007 20:43:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24574 invoked by uid 99); 12 Apr 2007 20:43:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:43:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 13:43:09 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3CKgmtI074916
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 20:42:48 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3CKgmix3731616
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 22:42:48 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3CKgmo8020638
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 22:42:48 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3CKglb2020635
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 22:42:47 +0200
In-Reply-To: <OF992159CB.03A9CE1C-ON882572BB.006EDB5B-882572BB.00704BAD@il.ibm.com>
Subject: Re: Index performance
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFD88B9A11.C615EA23-ON882572BB.00715CFA-882572BB.00718992@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 12 Apr 2007 13:40:07 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 12/04/2007 23:42:47
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

To cover all possible non-indexing overhead, better measure with something
like this:

   static long indexContents(IndexWriter writer, List storyContentList)
     throws IOException {
     long res = 0;
     if (storyContentList != null && storyContentList.size() != 0) {
         try {
             Iterator itr = storyContentList.iterator();
             while (itr.hasNext()){
                 StoryContents content = (StoryContents) itr.next();
                 res += content.getStoryText().length();
                 res +=
String.valueOf(content.getStoryIdentity()).length();
                 res += String.valueOf(content.getHeadline1()).length();
             }
         }catch(Exception ex){
              System.out.println(" caught a " + ex.getClass() );
         }
         return res;
     }
   }

Doron Cohen/Haifa/IBM@IBMIL wrote on 12/04/2007 13:26:34:

> > I tried to index it. It took from 7-10 seconds to index about 90
> documents.
>
> That would be around 10 documents per second - way too slow. A Lucene's
> perf test adding 12,000 docs sized similar to your sample doc (1400
> characters) on a not so strong machine shows much faster pace - 146 docs
> per second, or 237 with larger mix-beffered-docs setting:
>
>  Operation     round maxBuf  runCnt  recsPerRun  rec/s  elapsedSec
>  AddDocs_12000     0     10       1       12000  146.3       82.04
>  AddDocs_12000     1   1000       1       12000  237.8       50.45
>
> As Otis suggested, a larger max-buffered docs speeds things up.
> But even without that, pace is 14 times faster than your numbers.
>
> It might be interesting to measure without indexing at all, i.e. modify
the
> method indexContents() to something like:
>
>   static int indexContents(IndexWriter writer, List storyContentList)
>     throws IOException {
>     int res = 0;
>     if (storyContentList != null && storyContentList.size() != 0) {
>         try {
>             Iterator itr = storyContentList.iterator();
>             while (itr.hasNext()){
>                 StoryContents content = (StoryContents) itr.next();
>                 res += content.length();
>             }
>         }catch(Exception ex){
>              System.out.println(" caught a " + ex.getClass() );
>         }
>     }
>     return res;
>   }
>
> This should show if there is other overhead involved, unrelated to
> indexing.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 22:08:29 2007
Return-Path: <java-user-return-27603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69387 invoked from network); 12 Apr 2007 22:08:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 22:08:28 -0000
Received: (qmail 57087 invoked by uid 500); 12 Apr 2007 22:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57056 invoked by uid 500); 12 Apr 2007 22:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57044 invoked by uid 99); 12 Apr 2007 22:08:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:08:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:08:21 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 31CBA5B766; Thu, 12 Apr 2007 15:08:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2A21E7F403
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 15:08:01 -0700 (PDT)
Date: Thu, 12 Apr 2007 15:08:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting on a field that can have null values
In-Reply-To: <e994873a0704121324t4c427cb8jb916197c639d3a80@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704121502510.11112@hal.rescomp.berkeley.edu>
References: <e994873a0704121324t4c427cb8jb916197c639d3a80@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: If i rememebr correctly (you'll have to test this) sorting on a field
: which doesn't exist for every doc does what you would want (docs with
: values are listed before docs without)

: The actual behavior is different than described above. I modified
: TestSort.java:

: The actual order of the results is: "ZJI". I believe this happens because
: the field string cache 'order' array contains 0's for all the documents that
: don't contain the field and thus sort first.

i guess wasn't precise enough in that old thread, what i ment was that not
having a vlaue results in the docs sorting the same as if they had a value
lower then the lowest existing value -- so they sort at the end of the
list if you are doing a descending sort, and at the begining of the list
if you do an ascending sort.  If you want to always have them come "last"
regardless of order, there is a SortComparator for that purpose in Solr...

https://issues.apache.org/jira/browse/LUCENE-406
http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/search/MissingStringLastComparatorSource.java?view=log

: Suppose I want to exclude documents from being collected if they don't
: contain the sort field. One way to do this is to index a unique
: 'empty_value' value for those documents and add a MUST_NOT boolean clause to
: the query, for example: "<query terms> -field:empty_value)". But this seems
: inefficient. Is there a better way?

excluding them completely is a slightly differnet task, you don't need to
index a special marker value, you can just use a
RangeFilter (or ConstantScoreRangeQuery) to ensure you only get docs with
a value for that field (ie: field:[* TO *])



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 22:22:50 2007
Return-Path: <java-user-return-27604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74747 invoked from network); 12 Apr 2007 22:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 22:22:48 -0000
Received: (qmail 74242 invoked by uid 500); 12 Apr 2007 22:22:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74210 invoked by uid 500); 12 Apr 2007 22:22:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74199 invoked by uid 99); 12 Apr 2007 22:22:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:22:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:22:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B020A5B766; Thu, 12 Apr 2007 15:22:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AB46C7F403
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 15:22:20 -0700 (PDT)
Date: Thu, 12 Apr 2007 15:22:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1 
In-Reply-To: <07Apr12.104840pdt."57996"@synergy1.parc.xerox.com>
Message-ID: <Pine.LNX.4.58.0704121520560.11112@hal.rescomp.berkeley.edu>
References: <461D15D6.5080408@r.email.ne.jp>
 <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
 <-3949067926090573017@unknownmsgid> <c68e39170704120936o7f23171cxd3b163d7f94178b@mail.gmail.com>
 <07Apr12.104840pdt."57996"@synergy1.parc.xerox.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: But not which terms have an odd IDF value because of those deleted
: documents.  How much does the IDF value contribute to the "score" in
: search?

all idf's are affected equally, because the 'numDocs" value used is
allways the same ... it really shouldn't affect the scores from a query,
it just makes it hard to compare the scores you get from one index reader
with the scores you get from a new index reader after deleting and
readding a bunch of documents.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 22:25:17 2007
Return-Path: <java-user-return-27605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75490 invoked from network); 12 Apr 2007 22:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 22:25:16 -0000
Received: (qmail 79469 invoked by uid 500); 12 Apr 2007 22:25:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79438 invoked by uid 500); 12 Apr 2007 22:25:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79423 invoked by uid 99); 12 Apr 2007 22:25:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:25:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:25:08 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B760C5B766; Thu, 12 Apr 2007 15:24:47 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B08CE7F403
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 15:24:47 -0700 (PDT)
Date: Thu, 12 Apr 2007 15:24:47 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
In-Reply-To: <461D853F.9010401@r.email.ne.jp>
Message-ID: <Pine.LNX.4.58.0704121522420.11112@hal.rescomp.berkeley.edu>
References: <461D15D6.5080408@r.email.ne.jp>
 <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
 <461D853F.9010401@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:  > This should be the same for Lucene 2.0 and 2.1.
:
: I understand. But I think we could well come accross this issue
: with Lucene 2.1 than 2.0?

i'm not understanding this part of the thread ... are you saying that if
you have two identical setups, the only difference being that one uses 2.0
and the other uses 2.1, then you see different idfs after
adding/deleting/re-adding many docs?

if so, i'm at a loss to explain that.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 22:34:50 2007
Return-Path: <java-user-return-27606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79233 invoked from network); 12 Apr 2007 22:34:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 22:34:49 -0000
Received: (qmail 91904 invoked by uid 500); 12 Apr 2007 22:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91860 invoked by uid 500); 12 Apr 2007 22:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91849 invoked by uid 99); 12 Apr 2007 22:34:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:34:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:34:42 -0700
Received: by an-out-0708.google.com with SMTP id c3so699449ana
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 15:34:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=YCNCAVpIsriBTeYtDTDqamEeOeOEqxuORilUQ4dfM1F4sVGlppS/m2dFrJacamkjRjwE5ACe9kNhbnba/4MFUonr17r90jDKR6gOazOFcVvz9v8g6t9S18rPmtsZN+etJc78GCVEa2/5A/ObuQXn+K27kh+ticpsJ1KfPUodO9Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=byOjnDVPKVtWjE9V1mUD9p2WtueqFPXZ5Chs/8DcM7QYr24PbY/bGoXPyCt+eik68qOCAoSf/vKZWzf7iRenrPmc6gZSBsxlxh8RBfNsvxKB0ziYFQsB4PP1uhPT+ykPAryOivlHc2L20VY7IigF645wIqsPYjsGOLjqR2tfiRU=
Received: by 10.101.14.16 with SMTP id r16mr1955943ani.1176417262191;
        Thu, 12 Apr 2007 15:34:22 -0700 (PDT)
Received: by 10.100.107.7 with HTTP; Thu, 12 Apr 2007 15:34:21 -0700 (PDT)
Message-ID: <c68e39170704121534n743d88dbv47ddfd4f2efd74e0@mail.gmail.com>
Date: Thu, 12 Apr 2007 18:34:21 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
In-Reply-To: <Pine.LNX.4.58.0704121520560.11112@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <461D15D6.5080408@r.email.ne.jp>
	 <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
	 <-3949067926090573017@unknownmsgid>
	 <c68e39170704120936o7f23171cxd3b163d7f94178b@mail.gmail.com>
	 <Pine.LNX.4.58.0704121520560.11112@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: ef0a541892cbe9da
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/12/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : But not which terms have an odd IDF value because of those deleted
> : documents.  How much does the IDF value contribute to the "score" in
> : search?
>
> all idf's are affected equally, because the 'numDocs" value used is
> allways the same

There is that part of it, but it's smaller compared to potential docfreq skew.

If I had a document with "ABC" in it, and it only appeared in that
document, the docfreq is 1.  If I delete that doc, and re-add it, the
docfreq may all of a sudden appear to be 2.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 22:59:48 2007
Return-Path: <java-user-return-27607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85758 invoked from network); 12 Apr 2007 22:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 22:59:47 -0000
Received: (qmail 16107 invoked by uid 500); 12 Apr 2007 22:59:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16077 invoked by uid 500); 12 Apr 2007 22:59:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16066 invoked by uid 99); 12 Apr 2007 22:59:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:59:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 15:59:39 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3CMxHfc305924
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 22:59:17 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3CMxHc93731456
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 00:59:17 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3CMxHCE028017
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 00:59:17 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3CMxHJ4028014
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 00:59:17 +0200
In-Reply-To: <Pine.LNX.4.58.0704121520560.11112@hal.rescomp.berkeley.edu>
Subject: Re: strange idf in Lucene 2.1
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFF6DE1955.46D0DB20-ON882572BB.007C24A8-882572BB.007E249D@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 12 Apr 2007 15:57:49 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 13/04/2007 01:59:16
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2007 15:22:20:

>
> : But not which terms have an odd IDF value because of those deleted
> : documents.  How much does the IDF value contribute to the "score" in
> : search?
>
> all idf's are affected equally, because the 'numDocs" value used is
> allways the same ... it really shouldn't affect the scores from a query,
> it just makes it hard to compare the scores you get from one index reader
> with the scores you get from a new index reader after deleting and
> readding a bunch of documents.

Not sure about the extreme case - assume two words, one common and one
rare, making up an OR query:
   TC  (a very common term)
   TR  (a very rare term)
   IDF(TC) << IDF(TR)
   Q = TC TR
   D1 = document with one occurrence of TR
   D2 = document with three occurrences of TC.
==> D1 is scored higher than D2

But if now the index goes through a massive update, where almost all the
docs containing TC are deleted, and TC is not in any newly added doc,
practically TC becomes rare too, and hence D2 should probably be scored
higher than D1. But IDF(TC) might not (yet) reflect the massive docs
deletion, and the scores are wrongly biased so D1 is still scored higher
than D2.

I didn't follow the code for that, just thinking IDFs and scoring aloud, so
I hope I am not missing something, but in any case this is just for the
sake of discussion, because in reality you don't expect index statistics to
change that dramatically, ahead of merges.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 12 23:29:44 2007
Return-Path: <java-user-return-27608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97141 invoked from network); 12 Apr 2007 23:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Apr 2007 23:29:43 -0000
Received: (qmail 52633 invoked by uid 500); 12 Apr 2007 23:29:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52595 invoked by uid 500); 12 Apr 2007 23:29:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52577 invoked by uid 99); 12 Apr 2007 23:29:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 16:29:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 16:29:36 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0D5055B766; Thu, 12 Apr 2007 16:29:16 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 06C6C7F403
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 16:29:16 -0700 (PDT)
Date: Thu, 12 Apr 2007 16:29:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
In-Reply-To: <OFF6DE1955.46D0DB20-ON882572BB.007C24A8-882572BB.007E249D@il.ibm.com>
Message-ID: <Pine.LNX.4.58.0704121626370.11112@hal.rescomp.berkeley.edu>
References: <OFF6DE1955.46D0DB20-ON882572BB.007C24A8-882572BB.007E249D@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: But if now the index goes through a massive update, where almost all the
: docs containing TC are deleted, and TC is not in any newly added doc,
: practically TC becomes rare too, and hence D2 should probably be scored
: higher than D1. But IDF(TC) might not (yet) reflect the massive docs
: deletion, and the scores are wrongly biased so D1 is still scored higher
: than D2.

yeah ... i was only thinking about the numDocs change (which would be the
same for idf(TC) and idf(TR)) and forgot that docFreq is ignorant of
deletes as well.

: I didn't follow the code for that, just thinking IDFs and scoring aloud, so
: I hope I am not missing something, but in any case this is just for the
: sake of discussion, because in reality you don't expect index statistics to
: change that dramatically, ahead of merges.

that's really the key issue ot remember ... you might notice this when
deleting/re-adding 90% of the docs in an index consisting of only 10 docs,
because you'll likely still only have one segment -- but if you do the
same thing in an index of 100,000 docs you're going to get some segment
merges which will help keep things balanced.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 00:34:19 2007
Return-Path: <java-user-return-27609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16413 invoked from network); 13 Apr 2007 00:34:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 00:34:19 -0000
Received: (qmail 35642 invoked by uid 500); 13 Apr 2007 00:34:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35608 invoked by uid 500); 13 Apr 2007 00:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35597 invoked by uid 99); 13 Apr 2007 00:34:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 17:34:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 17:34:11 -0700
Received: from [192.168.1.4] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 876CE3C6F6
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 09:33:49 +0900 (JST)
Message-ID: <461ECFB7.7040001@r.email.ne.jp>
Date: Fri, 13 Apr 2007 09:32:55 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
References: <461D15D6.5080408@r.email.ne.jp> <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com> <461D853F.9010401@r.email.ne.jp> <Pine.LNX.4.58.0704121522420.11112@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0704121522420.11112@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

> i'm not understanding this part of the thread ... are you saying that if
> you have two identical setups, the only difference being that one uses 2.0
> and the other uses 2.1, then you see different idfs after
> adding/deleting/re-adding many docs?


Exactly. Please try to run the program which was attached in my first mail:

http://www.gossamer-threads.com/lists/lucene/java-user/48086

regards,

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 01:37:53 2007
Return-Path: <java-user-return-27610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36906 invoked from network); 13 Apr 2007 01:37:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 01:37:52 -0000
Received: (qmail 6678 invoked by uid 500); 13 Apr 2007 01:37:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6629 invoked by uid 500); 13 Apr 2007 01:37:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6617 invoked by uid 99); 13 Apr 2007 01:37:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 18:37:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 18:37:45 -0700
Received: by an-out-0708.google.com with SMTP id c3so735436ana
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 18:37:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=pLbC3Jj0EQVwJV7TfDzgYqWmo138YAdxz/TE5xjy0BwoGVjMNPlkuo1+7C+Q5ev3cmwfK/FACjW6kP/ZIMSAaIh1xX/ByFsz9weko1MVgl7M65uYVAr5ugSIDZDGF80y9NgKoetgzd2cQHHNuCDxCjWB/zXYHRoGgsf1yjL8nwI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=m+9Fdrr3FnA9WbdB5IAVy70xcPBMQSYgPI5066MISkEZILnsug8bRLStwqR4PBkiyIohn5/osG1a+P+hoqNTVbOHQZ0FUZ0t022ftAH24oRuWVeab3JyOoyZYKC3svBNfuhrQA4d8d5KGkIGfocaA1eC4R5PUGaBJbvBuGZybzY=
Received: by 10.100.142.12 with SMTP id p12mr2061757and.1176428244898;
        Thu, 12 Apr 2007 18:37:24 -0700 (PDT)
Received: by 10.100.107.7 with HTTP; Thu, 12 Apr 2007 18:37:19 -0700 (PDT)
Message-ID: <c68e39170704121837r686555fdq46663130ac97904f@mail.gmail.com>
Date: Thu, 12 Apr 2007 21:37:19 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
In-Reply-To: <461ECFB7.7040001@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <461D15D6.5080408@r.email.ne.jp>
	 <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
	 <461D853F.9010401@r.email.ne.jp>
	 <Pine.LNX.4.58.0704121522420.11112@hal.rescomp.berkeley.edu>
	 <461ECFB7.7040001@r.email.ne.jp>
X-Google-Sender-Auth: c957d07f134c004f
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/12/07, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
> Chris,
> > i'm not understanding this part of the thread ... are you saying that if
> > you have two identical setups, the only difference being that one uses 2.0
> > and the other uses 2.1, then you see different idfs after
> > adding/deleting/re-adding many docs?
>
>
> Exactly. Please try to run the program which was attached in my first mail:

Is the index completely removed between the 2.0 and 2.1 runs?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 01:41:31 2007
Return-Path: <java-user-return-27611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38500 invoked from network); 13 Apr 2007 01:41:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 01:41:30 -0000
Received: (qmail 15115 invoked by uid 500); 13 Apr 2007 01:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15073 invoked by uid 500); 13 Apr 2007 01:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15062 invoked by uid 99); 13 Apr 2007 01:41:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 18:41:29 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of wataylor@as-st.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 18:41:22 -0700
Received: by ug-out-1314.google.com with SMTP id k40so414813ugc
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 18:41:00 -0700 (PDT)
Received: by 10.78.150.7 with SMTP id x7mr516162hud.1176428460547;
        Thu, 12 Apr 2007 18:41:00 -0700 (PDT)
Received: by 10.78.187.7 with HTTP; Thu, 12 Apr 2007 18:41:00 -0700 (PDT)
Message-ID: <3902a95c0704121841p3616e579kfa3ed811f8a7f538@mail.gmail.com>
Date: Thu, 12 Apr 2007 21:41:00 -0400
From: "Bill Taylor" <wataylor@alum.mit.edu>
Reply-To: wataylor@alum.mit.edu
Sender: wataylor@as-st.com
To: java-user@lucene.apache.org
Subject: I have a question about phrase query with stop words
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29299_25868425.1176428460504"
X-Google-Sender-Auth: c7e516c133b7072c
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29299_25868425.1176428460504
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I found some discussions of this question from back in 2003, but that was
many updates ago.

I have built an index using the standard stop analyser which uses the
standard list of stop words.  "will" and :the" are stop words.

As I understand analyzers and phrase queries, when I search for

you will find the answer

using the default slop of 0, I should find any pattern like

you <any stop word> find <any stop word> answer

because the analyzer replaces "will" and "the" in the query with a space
indicator as it did when analyzing the original input text.  Instead, I find
phrases such as

you find an answer

"an" is a stop work, so matching "find an answer" is as expected, but there
is no stop word between "you" and "find" in the original input string.  I do
not see why "you find an answer" matches.

What am I doing wrong?


Also, when I try to highlight after searching for a phrase, the highlighter
highlights individual words wherever it finds them in the input text.  The
documentation suggests that if I use the right scoring system, I will
highlight only long strings of adjacent tokens which are found in the
phrase, but I am not sure how to do that.

If necessary, I will paste in samples of my code for creating the indexes
and doing the search.


Thanks.

Bill Taylor

------=_Part_29299_25868425.1176428460504--

From java-user-return-27612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 02:04:42 2007
Return-Path: <java-user-return-27612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44352 invoked from network); 13 Apr 2007 02:04:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 02:04:41 -0000
Received: (qmail 39044 invoked by uid 500); 13 Apr 2007 02:04:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39007 invoked by uid 500); 13 Apr 2007 02:04:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38996 invoked by uid 99); 13 Apr 2007 02:04:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 19:04:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 19:04:33 -0700
Received: by ug-out-1314.google.com with SMTP id k40so417075ugc
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 19:04:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qKirtRw47BEFKNrl61dj0w+dlfp+BKEYNjkXkWNyj65rr7zHjBHELMrhAZCrTb45eitrVj28AiN45O0hPLALYY3/H3KXGvMwYF11mjdBsRsJ14U6dHwzzZR/9nJsvovcObgXw09YAmfEiP84GS2hRUlWsdtUNBAo6jwxIDGD+Gw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e/4kIo3BBkJH5bUux6PwAmBnKkAfuiy/r9tN+XoKdJTFw/a7obOHLE6IG6OacvcywTvY0QapG8hVpYettTY+S1D547erSiIDMoo1A7m7S6e6/itq9yVehkA8H1jPZdm1APhNbaddxPF+btOFiBDV6XjESZApwrRKXjMlrZK1RIM=
Received: by 10.82.108.9 with SMTP id g9mr3497881buc.1176429852082;
        Thu, 12 Apr 2007 19:04:12 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Thu, 12 Apr 2007 19:04:12 -0700 (PDT)
Message-ID: <359a92830704121904k490aa689h343b67b7a302e2ea@mail.gmail.com>
Date: Thu, 12 Apr 2007 22:04:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, wataylor@alum.mit.edu
Subject: Re: I have a question about phrase query with stop words
In-Reply-To: <3902a95c0704121841p3616e579kfa3ed811f8a7f538@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34139_26646479.1176429852032"
References: <3902a95c0704121841p3616e579kfa3ed811f8a7f538@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34139_26646479.1176429852032
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As I understand it, there really is no "space indicator". I think of it
as replacing the stop word with a space, which is then discarded.

so, you're indexing 'you find answer', and both your searches are
looking for 'you find answer',  the stop words are just gone as though
they never were. So both queries match.

But I've been wrong before <G>...

I can't really speak to the highlighter question, so I'll let someone
more knowledgeable pipe up.

Erick

On 4/12/07, Bill Taylor <wataylor@alum.mit.edu> wrote:
>
> I found some discussions of this question from back in 2003, but that was
> many updates ago.
>
> I have built an index using the standard stop analyser which uses the
> standard list of stop words.  "will" and :the" are stop words.
>
> As I understand analyzers and phrase queries, when I search for
>
> you will find the answer
>
> using the default slop of 0, I should find any pattern like
>
> you <any stop word> find <any stop word> answer
>
> because the analyzer replaces "will" and "the" in the query with a space
> indicator as it did when analyzing the original input text.  Instead, I
> find
> phrases such as
>
> you find an answer
>
> "an" is a stop work, so matching "find an answer" is as expected, but
> there
> is no stop word between "you" and "find" in the original input string.  I
> do
> not see why "you find an answer" matches.
>
> What am I doing wrong?
>
>
> Also, when I try to highlight after searching for a phrase, the
> highlighter
> highlights individual words wherever it finds them in the input text.  The
> documentation suggests that if I use the right scoring system, I will
> highlight only long strings of adjacent tokens which are found in the
> phrase, but I am not sure how to do that.
>
> If necessary, I will paste in samples of my code for creating the indexes
> and doing the search.
>
>
> Thanks.
>
> Bill Taylor
>

------=_Part_34139_26646479.1176429852032--

From java-user-return-27613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 02:19:52 2007
Return-Path: <java-user-return-27613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47796 invoked from network); 13 Apr 2007 02:19:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 02:19:50 -0000
Received: (qmail 54100 invoked by uid 500); 13 Apr 2007 02:19:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54070 invoked by uid 500); 13 Apr 2007 02:19:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54058 invoked by uid 99); 13 Apr 2007 02:19:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 19:19:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 19:19:42 -0700
Received: from [192.168.1.4] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 4BD0332CBD
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 11:19:20 +0900 (JST)
Message-ID: <461EE872.4020300@r.email.ne.jp>
Date: Fri, 13 Apr 2007 11:18:26 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
References: <461D15D6.5080408@r.email.ne.jp>	 <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>	 <461D853F.9010401@r.email.ne.jp>	 <Pine.LNX.4.58.0704121522420.11112@hal.rescomp.berkeley.edu>	 <461ECFB7.7040001@r.email.ne.jp> <c68e39170704121837r686555fdq46663130ac97904f@mail.gmail.com>
In-Reply-To: <c68e39170704121837r686555fdq46663130ac97904f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 > Is the index completely removed between the 2.0 and 2.1 runs?

Sure. If you see my program, you'll find I'm using RAMDirectory.

regards,

Koji



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 04:20:41 2007
Return-Path: <java-user-return-27614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77176 invoked from network); 13 Apr 2007 04:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 04:20:40 -0000
Received: (qmail 61236 invoked by uid 500); 13 Apr 2007 04:20:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61205 invoked by uid 500); 13 Apr 2007 04:20:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61194 invoked by uid 99); 13 Apr 2007 04:20:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 21:20:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 21:20:32 -0700
Received: by an-out-0708.google.com with SMTP id c3so765523ana
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 21:20:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=GvPzYALbv07YpGEyKsYL1x/0cHCE3LsVbQ0LwlJrNy3ctGoaQnQLoO9FEVqakQRZ0HI+HMppOy9vDgdhR7MDNRNdaRAObksR3F/HsJ8IscZ/TDIR/Iunmq8yRCuSvzVErp4Npp8dRHnSZNS8efWFSvkzYrrC6CkcXbPeGXL1bNc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=MWAaFAhG91Lb6aowiQpY5lnvUtwaMh5UhMVYr+IE8q3/dg5sNfkRGW1BzD3fSIj0rwa1HmhvHoL7axV3GNr95o/V1KGuQLw1hAEnltaBsum6C2aW/QRze/SUwfhH2RI10PAabqfQDnl1T5IDh1GGGh/JZ81F+cfAhmSo8rwnm/4=
Received: by 10.100.167.7 with SMTP id p7mr2152065ane.1176438011386;
        Thu, 12 Apr 2007 21:20:11 -0700 (PDT)
Received: by 10.100.107.7 with HTTP; Thu, 12 Apr 2007 21:20:11 -0700 (PDT)
Message-ID: <c68e39170704122120x423cd8ame30872f9e0b839ae@mail.gmail.com>
Date: Fri, 13 Apr 2007 00:20:11 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: strange idf in Lucene 2.1
In-Reply-To: <461EE872.4020300@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <461D15D6.5080408@r.email.ne.jp>
	 <c68e39170704111020x165f40e3ya2a1b44385ad03a5@mail.gmail.com>
	 <461D853F.9010401@r.email.ne.jp>
	 <Pine.LNX.4.58.0704121522420.11112@hal.rescomp.berkeley.edu>
	 <461ECFB7.7040001@r.email.ne.jp>
	 <c68e39170704121837r686555fdq46663130ac97904f@mail.gmail.com>
	 <461EE872.4020300@r.email.ne.jp>
X-Google-Sender-Auth: a3e6397daf3abb1a
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/12/07, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>  > Is the index completely removed between the 2.0 and 2.1 runs?
>
> Sure. If you see my program, you'll find I'm using RAMDirectory.

OK, I think it's due to the change in merge policy.
Lucene 2.0 could under-merge (not enough) or over-merge (before necessary).
I think you are hitting a case of over-merging in Lucene 2.0, where
the second time you write documents, the two segments are merged into
one, squeezing out the deleted docs.

In Lucene 2.1, you end up with two segments (one with the deleted docs).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 05:03:59 2007
Return-Path: <java-user-return-27615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83807 invoked from network); 13 Apr 2007 05:03:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 05:03:58 -0000
Received: (qmail 92531 invoked by uid 500); 13 Apr 2007 05:03:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92500 invoked by uid 500); 13 Apr 2007 05:03:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92489 invoked by uid 99); 13 Apr 2007 05:03:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 22:03:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 22:03:49 -0700
Received: by an-out-0708.google.com with SMTP id c3so773201ana
        for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 22:03:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=WxS2rftaI3DE4jVyUqEkWZZs9vz1EoVUFpIDCciNDmEAADPIhP5DgthwQ6XTLRoix7jm3XEDvSHRzvP6KK4UIXU/0nHMP6+ctlgmnuJeiuX1URpg87Ha4+/o14PNFaJfKhQOYkoqvAMPgkYQm30HSPLcRjMbG1LgouZsNnGJu0E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FYREIk3a3aK8zqpNBpxCmRN11WRTwM+sHtqfjnFg4NXGBZwpA1l9nei664GCkxO8V3P0pyR4PqPP/C5jFyLMcLQB6l7DEmRUfOBUSDRuHlW25EK+y4hwrKv86kXZWWjzuhWUwYrlrqHCT7B16nOGt593TRaXYcI+0RSyDriBKVE=
Received: by 10.100.136.13 with SMTP id j13mr2169673and.1176440609377;
        Thu, 12 Apr 2007 22:03:29 -0700 (PDT)
Received: by 10.100.127.15 with HTTP; Thu, 12 Apr 2007 22:03:29 -0700 (PDT)
Message-ID: <a258c0620704122203w50f905d8rb68d188132824bc5@mail.gmail.com>
Date: Thu, 12 Apr 2007 22:03:29 -0700
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: custom stop word list for standard analyzer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_726_8160895.1176440609319"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_726_8160895.1176440609319
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I know this is a relatively fundamental thing to arrange, but I'm having
trouble.

Can I instantiate a standard analyzer with an argument containing my own
stop words?  If so, how?  Will they be appended to or override the built-in
stop words?

Or, do I have to modify the analyzer class itself and recompile?

Thanks.

------=_Part_726_8160895.1176440609319--

From java-user-return-27616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 05:12:11 2007
Return-Path: <java-user-return-27616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85496 invoked from network); 13 Apr 2007 05:12:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 05:12:10 -0000
Received: (qmail 3688 invoked by uid 500); 13 Apr 2007 05:12:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2882 invoked by uid 500); 13 Apr 2007 05:12:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2871 invoked by uid 99); 13 Apr 2007 05:12:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 22:12:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.89.192.138] (HELO postoffice.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 22:12:01 -0700
Received: from [192.168.5.132] (unknown [203.89.192.141])
	by postoffice.aconex.com (Postfix) with ESMTP id 4DDDFAAC7B9
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 15:11:39 +1000 (EST)
Message-ID: <461F1105.6000807@aconex.com>
Date: Fri, 13 Apr 2007 15:11:33 +1000
From: Paul Cowan <cowan@aconex.com>
Organization: Aconex
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: custom stop word list for standard analyzer
References: <a258c0620704122203w50f905d8rb68d188132824bc5@mail.gmail.com>
In-Reply-To: <a258c0620704122203w50f905d8rb68d188132824bc5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael Barbarelli wrote:
> Can I instantiate a standard analyzer with an argument containing my own
> stop words?  If so, how?  Will they be appended to or override the built-in
> stop words?

You can do it with one of the alternate constructors, and they'll 
override the build-in list.

---

String[] MY_WORDS = new String[] {"this", "that", "thing", "thloople"};

StandardAnalyzer a = new StandardAnalyzer(MY_WORDS);

---

There are also constructors that take a Set of strings, a file to take a 
word list from, or a Reader. If you want the existing words PLUS your 
own, it shouldn't be too hard...

---

Set words = new HashSet(Arrays.asList(StandardAnalyzer.STOP_WORDS));

words.add("thloople");

StandardAnalyzer a = new StandardAnalyzer(words);

---

or similar.

Cheers,

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 05:20:41 2007
Return-Path: <java-user-return-27617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86851 invoked from network); 13 Apr 2007 05:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 05:20:39 -0000
Received: (qmail 12704 invoked by uid 500); 13 Apr 2007 05:20:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12654 invoked by uid 500); 13 Apr 2007 05:20:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12634 invoked by uid 99); 13 Apr 2007 05:20:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 22:20:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2007 22:20:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3AA055B766; Thu, 12 Apr 2007 22:20:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 362C57F403
	for <java-user@lucene.apache.org>; Thu, 12 Apr 2007 22:20:07 -0700 (PDT)
Date: Thu, 12 Apr 2007 22:20:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: custom stop word list for standard analyzer
In-Reply-To: <461F1105.6000807@aconex.com>
Message-ID: <Pine.LNX.4.58.0704122217570.6172@hal.rescomp.berkeley.edu>
References: <a258c0620704122203w50f905d8rb68d188132824bc5@mail.gmail.com>
 <461F1105.6000807@aconex.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Michael Barbarelli wrote:
: > Can I instantiate a standard analyzer with an argument containing my own
: > stop words?  If so, how?  Will they be appended to or override the built-in

I'm relly suprised how often this question gets asked ... Michael (or
anyone else for that matter) do you have any suggestions on how the
javadocs could be improved to make this more clear?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 08:40:23 2007
Return-Path: <java-user-return-27618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35583 invoked from network); 13 Apr 2007 08:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 08:40:22 -0000
Received: (qmail 39276 invoked by uid 500); 13 Apr 2007 08:40:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39253 invoked by uid 500); 13 Apr 2007 08:40:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39242 invoked by uid 99); 13 Apr 2007 08:40:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 01:40:20 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of danutchi@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 01:40:13 -0700
Received: by an-out-0708.google.com with SMTP id c3so811770ana
        for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 01:39:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=C3Uh5MN21T0KowWS7EoBM+iSv5iezuXwkLFAQI/Hdq0knMKjXhaYitTaYSoZ7ZOxG4McCSflGFdaQJlNLwMHI1/F0S8FtzgdstKx7Sb74jGH7XMAPmbUQUvHTlqX6Ftw//mXkHVtxhsIIBcSwaQw8pUu+38STPmDnJyWPsDFmIw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=lpT/ZaS/h2CKBCj96MI4LOhc7M9nX8imnR3Q7HUVWAtz9e7ffdYzBLnQxrJTeUE4pzvvfIby0a5oKWca7M4vMC3CBEQ8A607ADLl14eRKGrJEk4tso12qb54jCcrnNdktd9p4PgFmd43VpPubDU/mt2pFBTymH1XSo0yd9R94Mg=
Received: by 10.100.33.14 with SMTP id g14mr2285449ang.1176453592679;
        Fri, 13 Apr 2007 01:39:52 -0700 (PDT)
Received: by 10.100.124.2 with HTTP; Fri, 13 Apr 2007 01:39:52 -0700 (PDT)
Message-ID: <d7a865a50704130139k39fc25dbxeaead421cbd556b8@mail.gmail.com>
Date: Fri, 13 Apr 2007 10:39:52 +0200
From: "Dan Wiggin" <danutchi@gmail.com>
To: java-user@lucene.apache.org
Subject: Design question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3007_25651694.1176453592595"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3007_25651694.1176453592595
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm reading  this list  eventually but  it a very active list and
useful,thks to all.
But so often, when a developer search how to work with lucene finds normally
the same code for same problems.
I think it will be useful create something like Best practices  with Lucene
or something  similar.

My question for example is a design question. Every time, you talk about a
single index to use, in my case (a platform with user groups no related
among themselves), i thinked the best option is use an index for every
group, and when I need to search something over all i will use a
Multisearcher instance (this action won't be frequently).My question is
how can I do manage all indexation system.
I thinked to create an IndexUpdater class which have a queue to recive all
events over the platform, this queu it will be emptied every X minutes, and
after this, Searcher will be updated.
I won't your opinion how to manage all indexes, for example I can create a
class (for exmaple EntityIndex) for every index which contains their
respetives IndexSearcher,IndexReader,IndexWriter and have every EntityIndex
in a hashmap. When it recived an element added in platform, gets their group
id, and search in hashmap to get its EntityIndex and work over it.

What do you think about this? Perhaps isn't a very good design and I want to
know your advices.

Thk for any reply, and I hope my question will be useful to others.

------=_Part_3007_25651694.1176453592595--

From java-user-return-27619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 08:51:05 2007
Return-Path: <java-user-return-27619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37616 invoked from network); 13 Apr 2007 08:51:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 08:51:05 -0000
Received: (qmail 56243 invoked by uid 500); 13 Apr 2007 08:51:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56220 invoked by uid 500); 13 Apr 2007 08:51:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56209 invoked by uid 99); 13 Apr 2007 08:51:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 01:51:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saihariharan@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 01:50:56 -0700
Received: by an-out-0708.google.com with SMTP id c3so813899ana
        for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 01:50:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZtTwpOl1V8NRTAJYf5jTb5up2+DH3cQ0wjZzQ5uRJY6/OhWuns/lNvN4W91+q03QbBwwVpGWcEIulh9z2jnLFhRmEY1iTA75z144qolZVRV0iRisFrS5FLF1CtvKYUsn2nWz0kl6pw8+YKXa1BPBymdDUCJwzM953oaym5gtaW0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QB6N7IEpkw/4PhCoANW1xawjTGd0asEoXZyO97NACoHr4WKl9HWL3+b0SX6s8KOUkJa81YajJVxjWrKqcqQXjMTgTcA18DqT5fL8w5apoxj06JokVQG3fK/dviptp8wT0qNE/CI84hX6FHVbH6tP4tpk7GMB8Oc5jGrhnGnQrUs=
Received: by 10.100.251.9 with SMTP id y9mr2294876anh.1176454235751;
        Fri, 13 Apr 2007 01:50:35 -0700 (PDT)
Received: by 10.100.38.11 with HTTP; Fri, 13 Apr 2007 01:50:35 -0700 (PDT)
Message-ID: <98b0a44c0704130150h224beb48k78db6c1bc9c3f549@mail.gmail.com>
Date: Fri, 13 Apr 2007 14:20:35 +0530
From: "sai hariharan" <saihariharan@gmail.com>
To: java-user@lucene.apache.org
Subject: Help regarding an Algo.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2973_14134455.1176454235700"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2973_14134455.1176454235700
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgdG8gYWxsLAoKSSd2ZSBhbiBhbGdvcnRpaG0gdGhhdHMgZ2l2ZW4gYmVsb3csIGNhbiBhbnli
b2R5IGhlbHAgbWUgaW1wbGVtZW50aW5nIGl0LgpBbnkgc29ydCBvZiBzdWdnZXN0aW9uIHdpbGwg
YmUgYXBwcmVjaWF0ZWQuIEkndmUgZmluaXNoZWQgcmVtb3Zpbmcgc3RvcAp3b3JkcywKY2FsY3Vs
YXRpbmcgdGVybSBmcmVxdWVuY2llcyB3aXRoIEx1Y2VuZS4gVGhlIHJlc3Qgb2YgdGhlIHBhcnQg
aXMgbm90IHF1aXRlCmNsZWFyLgpJJ20gd29ya2luZyBvbmx5IG9uIHRoZSBFbmdsaXNoIHBhcnQu
CgozLjIuMyBFeHRyYWN0aW5nIFJlcHJlc2VudGF0aXZlIFdvcmRzCkFmdGVyIHByZXByb2Nlc3Np
bmcgdGhlIHBhZ2UsIHRoZSBzeXN0ZW0gcmV0YWlucyB0aGUgbW9zdApjaGFyYWN0ZXJpc3RpYyBw
YXJ0cyBvZiB0aGUgY29udGVudHMuIEFzc29jaWF0aW9uIHJ1bGVzIGFyZQp1c2VkIHRvIGNvbGxl
Y3QgQ2hpbmVzZSBhbmQgRW5nbGlzaCBwaHJhc2VzIGFzCnJlcHJlc2VudGF0aXZlIHdvcmRzLiBU
aGUgYXBwcm9hY2ggY2FuIGJlIG91dGxpbmVkIGFzCmZvbGxvd3M6CgogICAtICBTY2FuIHRoZSBk
b2N1bWVudHMgdG8gcmV0cmlldmUgZWFjaCBDaGluZXNlIGFuZCBFbmdsaXNoIHdvcmQuIFRoZW4s
CiAgIGVhY2ggaW5kaXZpZHVhbCBDaGluZXNlIHdvcmQKCiAgICAgICBhbmQgRW5nbGlzaCB3b3Jk
IGNhbiBiZSBkaXN0aW5ndWlzaGVkLgoKCiAgIC0gICAgICAgIOKApyBEaXNjYXJkIGFsbCBzdG9w
d29yZHMsIGkuZS4sIG5laXRoZXIgQ2hpbmVzZSBub3IgRW5nbGlzaAogICB3b3JkLiBTdG9wd29y
ZHMgYXJlIGhpZ2ggZnJlcXVlbmN5IHdvcmRzCgogICAgICAgdGhhdCBhcmUgZm91bmQgaW4gYWxs
IHRleHRzIGFuZCB0aGF0IGRvIG5vdCBjb250cmlidXRlIHRvIHRoZQpkaXN0aW5jdGl2ZSBtZWFu
aW5nIG9mIHRoZSB0ZXh0LCBmb3IgZXhhbXBsZQoKICAgICAgIHByZXBvc2l0aW9ucyBhbmQgYXJ0
aWNsZXMgc3VjaCBhcyAiaW4iLCAib24iIGFuZCAidGhlIi4KCgogICAtIOKApyAgICAgIENhbGN1
bGF0ZSB0aGUgZnJlcXVlbmN5IG9mIG9jY3VycmVuY2UgZm9yIGVhY2ggcmVtYWluaW5nCiAgIHdv
cmQuCgoKCiAgIC0g4oCnICAgICAgSWYgdGhlIGZyZXF1ZW5jeSBvZiBhIHdvcmQgaXMgbGVzcyB0
aGFuIHR3bywgaXQgaXMKICAgZGlzY2FyZGVkLiBOZXh0LCB0aGUgYXNzb2NpYXRpb24gcnVsZSBp
cyB1c2VkIHRvCgogICAgICAgICAgICAgICAgY29tcHV0ZSB0aGUgY29uZmlkZW5jZSB2YWx1ZSBh
cyBmb2xsb3dzLgouCgpDb25maWRlbmNlIChBIOKHkkIpID0gUChB4oipQikgLyBQKEEpCgpJZiBQ
KEEpIGlzIDEgYW5kIHRoZSBjby1vY2N1cnJlbmNlLCBQKEHiiKlCKSwgaXMgYWxzbyAxLCB0aGVu
IHRoZSByZXN1bHRpbmcKY29uZmlkZW5jZSB2YWx1ZSBtdXN0IGJlIDEuCgpPYnZpb3VzbHksIGl0
IG11c3QgYmUgZ3JlYXRlciB0aGFuIHRoZSB0aHJlc2hvbGQgQ2xlYXJseSwgUChBKSBjYW5ub3Qg
YmUgMAphcyB0aGlzIHdpbGwgcmVzdWx0IGluIGEKCmRpdmlzaW9uLWJ5LXplcm8gWzEzXS4KCgog
ICAtIOKApyBBc3NpZ24gdGhlIGZyZXF1ZW5jaWVzIG9mIHRoZSByZW1haW5pbmcgd29yZHMgdG8g
ZWFjaCB3b3JkIGluIHRoZQogICBkb2N1bWVudC4gRm9yIGFsbCB0aGUgd29yZHMgaW4gdGhlCgpk
b2N1bWVudCB0aGF0IGFscmVhZHkgaGF2ZSBiZWVuIGVsaW1pbmF0ZWQgYSBmcmVxdWVuY3kgb2Yg
MCBpcyBhc3NpZ25lZC4KCgogICAtIOKApyBBZnRlciBhbGwgdGhlIGludmVyc2UgdGVybSBmcmVx
dWVuY2llcyBvZiB0aGUgZG9jdW1lbnQgYXJlCiAgIGlkZW50aWZpZWQgYW5kIHRlcm1zIHdpdGgg
YSBmcmVxdWVuY3kKCmxlc3MgdGhhbiAyIGFyZSBkaXNjYXJkZWQsIHRoZSBkb2N1bWVudCBpcyBz
Y2FubmVkIGFnYWluIHRvIGNhbGN1bGF0ZSB0aGUKY29uZmlkZW5jZSB2YWx1ZSBvZiB0aGUgY29v
Y2N1cnJlbmNlLgoKVGhlIHdvcmQgaXMgbm90IGluY29ycG9yYXRlZCBpbnRvIHRoZSBjdXJyZW50
IGRvY3VtZW50J3MgcGhyYXNlIGFycmF5IGlmOiAxKQp0aGUgY29uZmlkZW5jZQoKdmFsdWUgaXMg
YmVsb3cgdGhlIHRocmVzaG9sZCwgMikgdGhlIHNhbWUgd29yZCBoYXMgYWxyZWFkeSBiZWVuIGFz
c2lnbmVkIHRvCmRvY3VtZW50J3MgcGhyYXNlIGFycmF5LCBvcgoKMykgdGhlIHN1YmNsYXNzIHdv
cmQgaXMgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGUgY3VycmVudCBkb2N1bWVudCdzIHBocmFzZQph
cnJheS4gRm9yIGV4YW1wbGUsIGFzc3VtZSB0aGUKCmN1cnJlbnQgZG9jdW1lbnQncyBwaHJhc2Ug
YXJyYXkgaW5jbHVkZXMgdGhlIHBocmFzZSAib3BlcmF0aW5nIHN5c3RlbSIuIElmCnRoZSBzeXN0
ZW0gc3Vic2VxdWVudGx5Cgpwcm9jZXNzZXMgdGhlIHJlbGF0ZWQgcGhyYXNlICJvcGVyYXRpbmci
LCB0aGVuIHRoZSBsYXR0ZXIgcGhyYXNlIGlzIG5vdAphZGRlZCB0byB0aGUgY3VycmVudCBkb2N1
bWVudCdzCnBocmFzZSBhcnJheS4KClRoZSBzdGVwcyBuZWVkZWQgdG8gY29tcHV0ZSB0aGUgY29u
ZmlkZW5jZSB2YWx1ZSBvZiBlYWNoCndvcmQgYXJlIGFzIGZvbGxvd3MuCgooMSkgRmV0Y2ggdGhl
IHByZXZpb3VzIHR3byB3b3JkcyB1bnRpbCBlaXRoZXIgdGVybQpmcmVxdWVuY3kgaXMgbm90IGVx
dWFsIHRvIDAuCgooMikgQ2FsY3VsYXRlIHRoZSBjb25maWRlbmNlIHZhbHVlIG9mIHRoaXMgdGVy
bSBhbmQgdGhlCm5leHQgd29yZC4gVGhpcyBzdGVwIGlzIGRpc2N1c3NlZCBmdXJ0aGVyIGluIGEg
bGF0ZXIKc2VjdGlvbi4KCigzKSBXaGVuIHRoZSBjb25maWRlbmNlIHZhbHVlIGlzIGxlc3MgdGhh
biB0aGUgdGhyZXNob2xkCigwLjcpLCB0aGUgc3lzdGVtIGxvb2tzIHVwIHdoZXRoZXIgdGhlIHZh
bHVlIG9mCmNvbXB1dGluZyB3b3JkcyBpcyB0d28uIElmIGl0IGlzLCB0aGVuIHNraXAgYW5kIGln
bm9yZQppdDsgb3RoZXJ3aXNlLCB3ZSB3aWxsIHNhdmUgdGhpcyBwaHJhc2UsIGV4Y2x1ZGluZyB0
aGUKY3VycmVudCB3b3JkLCBpbnRvIHRoZSBwaHJhc2UgYXJyYXkgYW5kIGNvbnRpbnVlCnNjYW5u
aW5nIHRoZSBuZXh0IHdvcmQuIEEgY2hlY2sgaXMgcGVyZm9ybWVkIGZvcgplYWNoIHdvcmQgdG8g
ZGV0ZXJtaW5lIHdoZXRoZXIgaXQgZXhpc3RzIGluIHRoZSBwaHJhc2UKYXJyYXkgb3Igbm90LgoK
KDQpIElmIHRoZSBjb25maWRlbmNlIHZhbHVlIG9mIHRoZSBwaHJhc2UgaXMgbGFyZ2VyIHRoYW4g
dGhlCnRocmVzaG9sZCwgdGhlIG5leHQgd29yZCBpcyBmZXRjaGVkLiBJZiBpdHMgdGVybQpmcmVx
dWVuY3kgaXMgMCwgdGhlbiBzYXZlIHRoZSBjdXJyZW50IHBocmFzZSBhbmQgdGhlCmZyZXF1ZW5j
eTsgb3RoZXJ3aXNlLCBzdGVwcyAyIHRvIDQgYXJlIHJlcGVhdGVkIHVudGlsCnRoZSBlbmQgb2Yg
dGhlIGRvY3VtZW50IGlzIHJlYWNoZWQuCgpUaGFueCBpbiBBZHZhbmNlLAotLSAK4K6a4K6+4K6v
4K+NIEhhcmkK
------=_Part_2973_14134455.1176454235700--

From java-user-return-27620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 10:18:05 2007
Return-Path: <java-user-return-27620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70053 invoked from network); 13 Apr 2007 10:18:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 10:18:04 -0000
Received: (qmail 86249 invoked by uid 500); 13 Apr 2007 10:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86213 invoked by uid 500); 13 Apr 2007 10:18:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86202 invoked by uid 99); 13 Apr 2007 10:18:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 03:18:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 03:17:54 -0700
Received: by an-out-0708.google.com with SMTP id c3so830398ana
        for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 03:17:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=S+HPcbNmMSKHOOHQb72uPMg7VaqfS/t3FlqiuYrmkw9MKtnoxvXBXFNGvrBtdiW9EFf6uZSR2gMzfzi+1o9UF4jLu65WY9kzQkkU4HPcQ3GuWA+uUFtF/zRV/Y/t6W8BNiEJOwfleeSSvwC/pJKM+Mi43Xs2Rk3OzQ933rg5uZw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XpjkFi8j6CwoEZNmGitbN4pBWwyY88YLon/0/GC/HdGgxGlwCmyR4hrAuhEvAbwuuixVLhcSs2nWJA44RYNEgSNPCoRzXP2vqcNOWS5I4qb2U45qfVyenzU+W+jgT4PcPtz2s1iWJUdgkaJQmSSeNdMy5DusC0BTdt9H4AgQ/oI=
Received: by 10.100.7.18 with SMTP id 18mr2338700ang.1176459452905;
        Fri, 13 Apr 2007 03:17:32 -0700 (PDT)
Received: by 10.100.127.15 with HTTP; Fri, 13 Apr 2007 03:17:32 -0700 (PDT)
Message-ID: <a258c0620704130317l905144dx3b65a7b5e1a4ffc3@mail.gmail.com>
Date: Fri, 13 Apr 2007 03:17:32 -0700
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: custom stop word list for standard analyzer
In-Reply-To: <Pine.LNX.4.58.0704122217570.6172@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4314_3719056.1176459452846"
References: <a258c0620704122203w50f905d8rb68d188132824bc5@mail.gmail.com>
	 <461F1105.6000807@aconex.com>
	 <Pine.LNX.4.58.0704122217570.6172@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4314_3719056.1176459452846
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Apologies and thanks all at the same time, everyone.

Mike


On 4/12/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Michael Barbarelli wrote:
> : > Can I instantiate a standard analyzer with an argument containing my
> own
> : > stop words?  If so, how?  Will they be appended to or override the
> built-in
>
> I'm relly suprised how often this question gets asked ... Michael (or
> anyone else for that matter) do you have any suggestions on how the
> javadocs could be improved to make this more clear?
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4314_3719056.1176459452846--

From java-user-return-27621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 13:38:04 2007
Return-Path: <java-user-return-27621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53773 invoked from network); 13 Apr 2007 13:38:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 13:38:00 -0000
Received: (qmail 21319 invoked by uid 500); 13 Apr 2007 13:37:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21271 invoked by uid 500); 13 Apr 2007 13:37:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21258 invoked by uid 99); 13 Apr 2007 13:37:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 06:37:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 06:37:49 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HcLxu-0002bV-MO
	for java-user@lucene.apache.org; Fri, 13 Apr 2007 06:37:26 -0700
Message-ID: <9979115.post@talk.nabble.com>
Date: Fri, 13 Apr 2007 06:37:26 -0700 (PDT)
From: raikoe <lucene@keskus.de>
To: java-user@lucene.apache.org
Subject: Re: TestSpellCheck not working
In-Reply-To: <9824450.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lucene@keskus.de
References: <9823734.post@talk.nabble.com> <9824450.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

i've got the same problem. 
I found a (non-satisfying) solution:
If I change the variable spellindex to an FSDirectory the TestCase is
working. 
e.g. spellindex = FSDirectory.getDirectory("d://spellcheckerindex"); instead
of 
    spellindex = new RAMDirectory();

But I do not understand why this different behaviour occur. 
Any suggestions or comments?

Regards,
Raiko Eckstein


davep626 wrote:
> 
> Sorry for the lack of detail, first error is:
> 
> junit.framework.AssertionFailedError: expected:<56> but was:<29>
> 	at junit.framework.Assert.fail(Assert.java:47)
> 	at junit.framework.Assert.failNotEquals(Assert.java:282)
> 	at junit.framework.Assert.assertEquals(Assert.java:64)
> 	at junit.framework.Assert.assertEquals(Assert.java:201)
> 	at junit.framework.Assert.assertEquals(Assert.java:207)
> 	at
> org.apache.lucene.search.spell.TestSpellChecker.testBuild(TestSpellChecker.java:60)
> 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> 	at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> 	at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> 	at java.lang.reflect.Method.invoke(Method.java:585)
> 	at junit.framework.TestCase.runTest(TestCase.java:154)
> 	at junit.framework.TestCase.runBare(TestCase.java:127)
> 	at junit.framework.TestResult$1.protect(TestResult.java:106)
> 	at junit.framework.TestResult.runProtected(TestResult.java:124)
> 	at junit.framework.TestResult.run(TestResult.java:109)
> 	at junit.framework.TestCase.run(TestCase.java:118)
> 	at junit.framework.TestSuite.runTest(TestSuite.java:208)
> 	at junit.framework.TestSuite.run(TestSuite.java:203)
> 	at
> org.junit.internal.runners.OldTestClassRunner.run(OldTestClassRunner.java:35)
> 	at
> org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
> 	at
> org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
> 	at
> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
> 	at
> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
> 	at
> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
> 	at
> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
> 

-- 
View this message in context: http://www.nabble.com/TestSpellCheck-not-working-tf3521578.html#a9979115
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 14:26:48 2007
Return-Path: <java-user-return-27622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72727 invoked from network); 13 Apr 2007 14:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 14:26:47 -0000
Received: (qmail 34082 invoked by uid 500); 13 Apr 2007 14:26:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34042 invoked by uid 500); 13 Apr 2007 14:26:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34031 invoked by uid 99); 13 Apr 2007 14:26:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 07:26:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 07:26:39 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HcMjD-0001Xi-08
	for java-user@lucene.apache.org; Fri, 13 Apr 2007 07:26:19 -0700
Message-ID: <9979952.post@talk.nabble.com>
Date: Fri, 13 Apr 2007 07:26:18 -0700 (PDT)
From: davep626 <n@alishabeth.com>
To: java-user@lucene.apache.org
Subject: Re: TestSpellCheck not working
In-Reply-To: <9979115.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: n@alishabeth.com
References: <9823734.post@talk.nabble.com> <9824450.post@talk.nabble.com> <9979115.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Interesting, that does not work for me either.  It appears the first test
should expect that the index has doubled in size.


raikoe wrote:
> 
> Hello,
> 
> i've got the same problem. 
> I found a (non-satisfying) solution:
> If I change the variable spellindex to an FSDirectory the TestCase is
> working. 
> e.g. spellindex = FSDirectory.getDirectory("d://spellcheckerindex");
> instead of 
>     spellindex = new RAMDirectory();
> 
> But I do not understand why this different behaviour occur. 
> Any suggestions or comments?
> 
> Regards,
> Raiko Eckstein
> 
> 
> davep626 wrote:
>> 
>> Sorry for the lack of detail, first error is:
>> 
>> junit.framework.AssertionFailedError: expected:<56> but was:<29>
>> 	at junit.framework.Assert.fail(Assert.java:47)
>> 	at junit.framework.Assert.failNotEquals(Assert.java:282)
>> 	at junit.framework.Assert.assertEquals(Assert.java:64)
>> 	at junit.framework.Assert.assertEquals(Assert.java:201)
>> 	at junit.framework.Assert.assertEquals(Assert.java:207)
>> 	at
>> org.apache.lucene.search.spell.TestSpellChecker.testBuild(TestSpellChecker.java:60)
>> 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>> 	at
>> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>> 	at
>> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>> 	at java.lang.reflect.Method.invoke(Method.java:585)
>> 	at junit.framework.TestCase.runTest(TestCase.java:154)
>> 	at junit.framework.TestCase.runBare(TestCase.java:127)
>> 	at junit.framework.TestResult$1.protect(TestResult.java:106)
>> 	at junit.framework.TestResult.runProtected(TestResult.java:124)
>> 	at junit.framework.TestResult.run(TestResult.java:109)
>> 	at junit.framework.TestCase.run(TestCase.java:118)
>> 	at junit.framework.TestSuite.runTest(TestSuite.java:208)
>> 	at junit.framework.TestSuite.run(TestSuite.java:203)
>> 	at
>> org.junit.internal.runners.OldTestClassRunner.run(OldTestClassRunner.java:35)
>> 	at
>> org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
>> 	at
>> org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
>> 	at
>> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
>> 	at
>> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
>> 	at
>> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
>> 	at
>> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/TestSpellCheck-not-working-tf3521578.html#a9979952
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 14:50:16 2007
Return-Path: <java-user-return-27623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82492 invoked from network); 13 Apr 2007 14:50:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 14:50:15 -0000
Received: (qmail 99872 invoked by uid 500); 13 Apr 2007 14:50:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99841 invoked by uid 500); 13 Apr 2007 14:50:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99830 invoked by uid 99); 13 Apr 2007 14:50:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 07:50:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 07:50:07 -0700
Received: by py-out-1112.google.com with SMTP id a25so640764pyi
        for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 07:49:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=D9aLAExrQnqfgWWKP3ZXy6Iv0nWBxa65tjWI+jN7VY7v6LJgFSFqwmWw2xyeFRnIbMO6kPmPBwYVCj6tXiQ0u6kFigDMFyKiXfRkAiJEOflGUtiN1UiFfCOsuZfzVgT6/3o1Ix/aVCJNSKyFCQFPSqfaSuDoCpEIG0sUNH4HHoE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZOMJlee3j0ndLYPh1v3M97FMrUPft3WQGz0ZBDVY1Uqmp35dtMi5DBBfZr0b92jqMyFfFuXZEsCQHCVt1U5djFYLSg4C6c94qSPG5Ywdviuk9huRXnTadN1xDp27Q0rTSb018oyCEz7JzaLwmxUWfS7w7ThjQeU1vwt/cj9/SPE=
Received: by 10.65.154.2 with SMTP id g2mr2834243qbo.1176475785810;
        Fri, 13 Apr 2007 07:49:45 -0700 (PDT)
Received: by 10.65.155.14 with HTTP; Fri, 13 Apr 2007 07:49:45 -0700 (PDT)
Message-ID: <e994873a0704130749w67fa021fxaad8e86e03b91d73@mail.gmail.com>
Date: Fri, 13 Apr 2007 10:49:45 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting on a field that can have null values
In-Reply-To: <Pine.LNX.4.58.0704121502510.11112@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6144_14625560.1176475785620"
References: <e994873a0704121324t4c427cb8jb916197c639d3a80@mail.gmail.com>
	 <Pine.LNX.4.58.0704121502510.11112@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6144_14625560.1176475785620
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> excluding them completely is a slightly differnet task, you don't need to
> index a special marker value, you can just use a
> RangeFilter (or ConstantScoreRangeQuery) to ensure you only get docs with
> a value for that field (ie: field:[* TO *])

Excellent, this is a much better solution. BTW, adding a
ConstantScoreRangeQuery clause to the query works fine, but building the
RangeFilter from the query string "field:[* TO *] doesn't work. The reason
is that the terms expanded from the lowerTerm wildcard are compared to
'upperTerm' which is literally '*', which is incorrect. This would appear to
be a bug in QueryParser as it ought to set lowerTerm = upperTerm = null in
this case.

Thanks,
Peter


On 4/12/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : If i rememebr correctly (you'll have to test this) sorting on a field
> : which doesn't exist for every doc does what you would want (docs with
> : values are listed before docs without)
>
> : The actual behavior is different than described above. I modified
> : TestSort.java:
>
> : The actual order of the results is: "ZJI". I believe this happens
> because
> : the field string cache 'order' array contains 0's for all the documents
> that
> : don't contain the field and thus sort first.
>
> i guess wasn't precise enough in that old thread, what i ment was that not
> having a vlaue results in the docs sorting the same as if they had a value
> lower then the lowest existing value -- so they sort at the end of the
> list if you are doing a descending sort, and at the begining of the list
> if you do an ascending sort.  If you want to always have them come "last"
> regardless of order, there is a SortComparator for that purpose in Solr...
>
> https://issues.apache.org/jira/browse/LUCENE-406
>
> http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/search/MissingStringLastComparatorSource.java?view=log
>
> : Suppose I want to exclude documents from being collected if they don't
> : contain the sort field. One way to do this is to index a unique
> : 'empty_value' value for those documents and add a MUST_NOT boolean
> clause to
> : the query, for example: "<query terms> -field:empty_value)". But this
> seems
> : inefficient. Is there a better way?
>
> excluding them completely is a slightly differnet task, you don't need to
> index a special marker value, you can just use a
> RangeFilter (or ConstantScoreRangeQuery) to ensure you only get docs with
> a value for that field (ie: field:[* TO *])
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6144_14625560.1176475785620--

From java-user-return-27624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 16:29:00 2007
Return-Path: <java-user-return-27624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35298 invoked from network); 13 Apr 2007 16:29:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 16:29:00 -0000
Received: (qmail 14220 invoked by uid 500); 13 Apr 2007 16:29:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13880 invoked by uid 500); 13 Apr 2007 16:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13869 invoked by uid 99); 13 Apr 2007 16:28:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 09:28:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 09:28:51 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3DGSSZ7305332
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 16:28:28 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3DGSTZK4124900
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 18:28:29 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3DGSTpj011009
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 18:28:29 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3DGST9v011006
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 18:28:29 +0200
In-Reply-To: <98b0a44c0704130150h224beb48k78db6c1bc9c3f549@mail.gmail.com>
Subject: Re: Help regarding an Algo.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF623BE2F8.2285CA33-ON882572BC.0058327B-882572BC.005A3E95@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 13 Apr 2007 09:25:42 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 13/04/2007 19:28:28
MIME-Version: 1.0
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: base64
X-Virus-Checked: Checked by ClamAV on apache.org

InNhaSBoYXJpaGFyYW4iIDxzYWloYXJpaGFyYW5AZ21haWwuY29tPiB3cm90ZSBvbiAxMy8wNC8y
MDA3IDAxOjUwOjM1Og0KDQo+IEhpIHRvIGFsbCwNCj4NCj4gSSd2ZSBhbiBhbGdvcnRpaG0gdGhh
dHMgZ2l2ZW4gYmVsb3csIGNhbiBhbnlib2R5IGhlbHAgbWUgaW1wbGVtZW50aW5nIGl0Lg0KPiBB
bnkgc29ydCBvZiBzdWdnZXN0aW9uIHdpbGwgYmUgYXBwcmVjaWF0ZWQuIEkndmUgZmluaXNoZWQg
cmVtb3Zpbmcgc3RvcA0KPiB3b3JkcywNCj4gY2FsY3VsYXRpbmcgdGVybSBmcmVxdWVuY2llcyB3
aXRoIEx1Y2VuZS4gVGhlIHJlc3Qgb2YgdGhlIHBhcnQgaXMgbm90DQpxdWl0ZQ0KPiBjbGVhci4N
Cj4gSSdtIHdvcmtpbmcgb25seSBvbiB0aGUgRW5nbGlzaCBwYXJ0Lg0KPiAuLi4uDQo+IC4uLi4N
Cj4gICAgLSDigKcgICAgICBJZiB0aGUgZnJlcXVlbmN5IG9mIGEgd29yZCBpcyBsZXNzIHRoYW4g
dHdvLCBpdCBpcw0KPiAgICBkaXNjYXJkZWQuIE5leHQsIHRoZSBhc3NvY2lhdGlvbiBydWxlIGlz
IHVzZWQgdG8NCj4NCj4gICAgICAgICAgICAgICAgIGNvbXB1dGUgdGhlIGNvbmZpZGVuY2UgdmFs
dWUgYXMgZm9sbG93cy4NCj4gLg0KPg0KPiBDb25maWRlbmNlIChBIOKHkkIpID0gUChB4oipQikg
LyBQKEEpDQo+DQo+IElmIFAoQSkgaXMgMSBhbmQgdGhlIGNvLW9jY3VycmVuY2UsIFAoQeKIqUIp
LCBpcyBhbHNvIDEsIHRoZW4gdGhlIHJlc3VsdGluZw0KPiBjb25maWRlbmNlIHZhbHVlIG11c3Qg
YmUgMS4NCj4NCj4gT2J2aW91c2x5LCBpdCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB0aGUgdGhyZXNo
b2xkIENsZWFybHksIFAoQSkgY2Fubm90IGJlDQowDQo+IGFzIHRoaXMgd2lsbCByZXN1bHQgaW4g
YQ0KPg0KPiBkaXZpc2lvbi1ieS16ZXJvIFsxM10uDQoNClRoaXMgc2VlbXMgcGFydCBvZiAiVXNp
bmcgQXNzb2NpYXRpb24gUnVsZXMgZm9yIEV4cGFuZGluZyBTZWFyY2ggRW5naW5lDQpSZWNvbW1l
bmRhdGlvbiBLZXl3b3JkcyBpbiBFbmdsaXNoIGFuZCBDaGluZXNlIFF1ZXJpZXMgKDIwMDUpIiAt
IFkuUC4NCkh1YW5nLCBDLi1BLiBUc2FpIChUYWl3YW4pLCBhbmQgRi5FLiBTYW5kbmVzIChOb3J3
YXkpIC0NCmh0dHA6Ly93d3cuYWN0YXByZXNzLmNvbS9QYXBlckluZm8uYXNweD9QYXBlcklEPTIy
OTU0IC0gYW5kIGl0IHdvdWxkIGJlDQpoYXJkIHRvIGhlbHAgd2l0aG91dCByZWFkaW5nIHRoZSBw
YXBlciAod2hpY2ggaXMgbm90IGZyZWVseSBhdmFpbGFibGUuLi4pDQoNCkFueWhvdyBmcm9tIHRo
ZSBhYnN0cmFjdCBpdCBzZWVtcyB0aGlzIHN0ZXAgYXR0ZW1wdHMgdG8gaW5mZXIgd2hldGhlciB0
d28NCmNvbnNlY3V0aXZlIHdvcmRzIEEgQiBpbiBhIGRvY3VtZW50IHNob3VsZCBiZSB0cmVhdGVk
IGFzIGEgcGhyYXNlIGJ5IGJhc2luZw0Kb24gdGhlIHByb2JhYmlsaXR5IG9mIEIgdG8gYXBwZWFy
IGFmdGVyIEEgaW4gKEkgdGhpbmspIHRoZSBlbnRpcmUNCmNvbGxlY3Rpb24sIG9yIG1vcmUgbGlr
ZWx5IGluIHNvbWUgdHJhaW5pbmcgY29sbGVjdGlvbi4NCg0KU28gZm9yIFAoQSkgb25lIGNvdWxk
IHVzZSB0aGUgdG90YWwgb2NjdXJyZW5jZSBjb3VudCBvZiBBID0gc3VtIHRlcm1GcmVxKEEpDQpv
dmVyIGFsbCBkb2N1bWVudHMgY29udGFpbmluZyBBIChhZ2FpbiwgaW4gdGhlIHRyYWluaW5nIGNv
bGxlY3Rpb24pLiBDYW4NCmRpdmlkZSBieSBhIGNvbGxlY3Rpb24gc2l6ZSBmYWN0b3IgKHdvcmRz
IGNvdW50KSB0byBtYWtlIHRoaXMgYSBbMC4uMV0NCnByb2JhYmlsaXR5LiAuLi4gIEFuZCBmb3Ig
UChB4oipQikgY291bGQgc2ltaWxhcmx5IHVzZSB0aGUgdG90YWwgbnVtYmVyIG9mDQpvY2N1cnJl
bmNlcyBvZiBCIHJpZ2h0IGFmdGVyIEEgaW4gdGhlIGVudGlyZSB0cmFpbmluZyBjb2xsZWN0aW9u
LiAgTW1tbS4uLiwNCnNlZW1zIGJvdGggdmFsdWVzIHNob3VsZCBiZSBjb21wdXRlZCBpbiBhZHZh
bmNlIGluIGEgcHJlcHJvY2Vzc2luZyBzdGVwIGZvcg0KYWxsIHRoZSBjYW5kaWRhdGUgd29yZHMg
LSBhY3R1YWxseSBhbGwgdGhlIHBhaXJzIG9mIG5vbiBzdG9wIHdvcmRzIEEgQg0KKGFwcGVhcmlu
ZyBhdCBsZWFzdCB0d2ljZSkgaW4gdGhlIGVudGlyZSB0cmFpbmluZyBjb2xsZWN0aW9uLg0KDQpJ
ICpndWVzcyogdGhlIHByb2JhYmlsaXRpZXMgYXJlIGxhdGVyIHVzZWQgdG8gZXhwYW5kIHVzZXIg
cXVlcmllcyBlaXRoZXINCmF1dG9tYXRpY2FsbHkgZm9yIGltcHJvdmVkIHJlY2FsbCBvciBqdXN0
IHN1Z2dlc3RpbmcgYW4gZXhwYW5kZWQgcXVlcnkgdmlhDQpVSSwgYnV0IHRoaXMgaXMgbW9zdGx5
ICpndWVzc2luZyogYXMgSSBkb24ndCBrbm93IHRoYXQgcGFwZXIuLi4gV291bGRuJ3QgaXQNCmJl
IGJlc3QgdG8gY29udGFjdCB0aGUgYXV0aG9ycz8=




From java-user-return-27625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 17:50:35 2007
Return-Path: <java-user-return-27625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67416 invoked from network); 13 Apr 2007 17:50:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 17:50:34 -0000
Received: (qmail 69508 invoked by uid 500); 13 Apr 2007 17:50:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69477 invoked by uid 500); 13 Apr 2007 17:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69466 invoked by uid 99); 13 Apr 2007 17:50:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 10:50:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 10:50:25 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1BA3C5B775; Fri, 13 Apr 2007 10:50:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 127D57F403
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 10:50:01 -0700 (PDT)
Date: Fri, 13 Apr 2007 10:50:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: custom stop word list for standard analyzer
In-Reply-To: <a258c0620704130317l905144dx3b65a7b5e1a4ffc3@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704131044180.21491@hal.rescomp.berkeley.edu>
References: <a258c0620704122203w50f905d8rb68d188132824bc5@mail.gmail.com> 
 <461F1105.6000807@aconex.com>  <Pine.LNX.4.58.0704122217570.6172@hal.rescomp.berkeley.edu>
 <a258c0620704130317l905144dx3b65a7b5e1a4ffc3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Apologies and thanks all at the same time, everyone.

No apologies neccessary, you're not the first person to be confused by
this, which is why I asked if you had any ideas on how we can improve hte
docs -- people who know the APIs inside and out aren't in the best
position to understand how to improve the documentation for new users.

any suggestions?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 13 20:04:50 2007
Return-Path: <java-user-return-27626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25721 invoked from network); 13 Apr 2007 20:04:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Apr 2007 20:04:49 -0000
Received: (qmail 17682 invoked by uid 500); 13 Apr 2007 20:04:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17643 invoked by uid 500); 13 Apr 2007 20:04:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17624 invoked by uid 99); 13 Apr 2007 20:04:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 13:04:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 13:04:36 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.13.8/8.13.8) with ESMTP id l3DK4FCp028748
	for <java-user@lucene.apache.org>; Fri, 13 Apr 2007 22:04:15 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: I have a question about phrase query with stop words
Date: Fri, 13 Apr 2007 22:04:13 +0200
User-Agent: KMail/1.8.2
References: <3902a95c0704121841p3616e579kfa3ed811f8a7f538@mail.gmail.com> <359a92830704121904k490aa689h343b67b7a302e2ea@mail.gmail.com>
In-Reply-To: <359a92830704121904k490aa689h343b67b7a302e2ea@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704132204.13881.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


On Friday 13 April 2007 04:04, Erick Erickson wrote:
> As I understand it, there really is no "space indicator". I think of it
> as replacing the stop word with a space, which is then discarded.

You can replace all stop words by your own special term value
to have space indicator.

It is also possible to index nothing at a particular position, for example
at the position of a stop word. This gives a "gap" in the index,
see below.
 
> so, you're indexing 'you find answer', and both your searches are
> looking for 'you find answer',  the stop words are just gone as though
> they never were. So both queries match.
> 
> But I've been wrong before <G>...
> 
> I can't really speak to the highlighter question, so I'll let someone
> more knowledgeable pipe up.
> 
> Erick
> 
> On 4/12/07, Bill Taylor <wataylor@alum.mit.edu> wrote:
> >
> > I found some discussions of this question from back in 2003, but that was
> > many updates ago.
> >
> > I have built an index using the standard stop analyser which uses the
> > standard list of stop words.  "will" and :the" are stop words.
> >
> > As I understand analyzers and phrase queries, when I search for
> >
> > you will find the answer
> >
> > using the default slop of 0, I should find any pattern like
> >
> > you <any stop word> find <any stop word> answer
> >
> > because the analyzer replaces "will" and "the" in the query with a space
> > indicator as it did when analyzing the original input text.  Instead, I
> > find
> > phrases such as
> >
> > you find an answer
> >
> > "an" is a stop work, so matching "find an answer" is as expected, but
> > there
> > is no stop word between "you" and "find" in the original input string.  I
> > do
> > not see why "you find an answer" matches.
> >
> > What am I doing wrong?

The problem may be that you expect a gap in the index.
When there is a gap in the index, it is also necessary to adapt
the analyzer used for the phrase query to query for a gap.
I don't know whether PhraseQuery can handle such an analyzer.

To have a gap in the index, you need to change your analyzer
to add a gap for a stop word. This can be done by changing the
position increment when a stop word is encountered, see
Token.setPositionIncrement(). Iirc you need to make a variation
on StopFilter for this.

Regards,
Paul Elschot



> >
> >
> > Also, when I try to highlight after searching for a phrase, the
> > highlighter
> > highlights individual words wherever it finds them in the input text.  The
> > documentation suggests that if I use the right scoring system, I will
> > highlight only long strings of adjacent tokens which are found in the
> > phrase, but I am not sure how to do that.
> >
> > If necessary, I will paste in samples of my code for creating the indexes
> > and doing the search.
> >
> >
> > Thanks.
> >
> > Bill Taylor
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 14 02:45:09 2007
Return-Path: <java-user-return-27627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47149 invoked from network); 14 Apr 2007 02:45:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2007 02:45:08 -0000
Received: (qmail 16312 invoked by uid 500); 14 Apr 2007 02:45:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16265 invoked by uid 500); 14 Apr 2007 02:45:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16254 invoked by uid 99); 14 Apr 2007 02:45:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 19:45:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 13 Apr 2007 19:44:59 -0700
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 76
          for <java-user@lucene.apache.org>;
          Fri, 13 Apr 2007 19:44:18 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <d7a865a50704130139k39fc25dbxeaead421cbd556b8@mail.gmail.com>
References: <d7a865a50704130139k39fc25dbxeaead421cbd556b8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <17C0695D-B108-4152-9B73-144BE8F83492@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: Peter W. <peter@marketingbrokers.com>
Subject: Re: Design question
Date: Fri, 13 Apr 2007 19:44:18 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Dan,

I agree Lucene users are repeatedly solving the same
problems of reading, writing and creating indexes,
building queries, scaling, parsing docs etc.

There's a 'HowTo' section on the Wiki made
for sharing tips and best practices:
http://wiki.apache.org/lucene-java/HowTo

but few new additions are posted...

Regarding 'indexation' Lucene is a text search
engine but not an application server with concepts
of state management or pooling. Tomcat as
a front end might best suit your needs here.

Using regular JSP or servlets you can authenticate
group users and direct their input to appropriate
indexes. This avoids pairing ids to individual
IndexSearcher, IndexReader, IndexWriter
instances yourself.

No stacks, queues or linked hashmaps, just:
authenticate > group id > create session.

Contents of the url string or cookie-based session object
determine which Lucene index user data is written to.

Another option to consider is Solr.

Regards,

Peter W.


On Apr 13, 2007, at 1:39 AM, Dan Wiggin wrote:

> But so often, when a developer search how to work with lucene finds  
> normally
> the same code for same problems.
> I think it will be useful create something like Best practices   
> with Lucene
> or something  similar.
>

> My question is how can I do manage all indexation system.
> I thinked to create an IndexUpdater class which have a queue to  
> recive all
> events over the platform, this queu it will be emptied every X  
> minutes, and
> after this, Searcher will be updated.
> I won't your opinion how to manage all indexes, for example I can  
> create a
> class (for exmaple EntityIndex) for every index which contains their
> respetives IndexSearcher,IndexReader,IndexWriter and have every  
> EntityIndex
> in a hashmap. When it recived an element added in platform, gets  
> their group
> id, and search in hashmap to get its EntityIndex and work over it.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 14 04:16:53 2007
Return-Path: <java-user-return-27628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66199 invoked from network); 14 Apr 2007 04:16:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2007 04:16:52 -0000
Received: (qmail 74999 invoked by uid 500); 14 Apr 2007 04:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74959 invoked by uid 500); 14 Apr 2007 04:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74948 invoked by uid 99); 14 Apr 2007 04:16:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 21:16:52 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=FORGED_YAHOO_RCVD,PLING_QUERY,SPF_HELO_PASS,SPF_PASS,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 21:16:46 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HcZgX-0002Mo-NN
	for java-user@lucene.apache.org; Fri, 13 Apr 2007 21:16:25 -0700
Message-ID: <9989913.post@talk.nabble.com>
Date: Fri, 13 Apr 2007 21:16:25 -0700 (PDT)
From: supereric <eric_Calin_Cruise@yahoo.com>
To: java-user@lucene.apache.org
Subject: PAGE RANKING IN LUCENE?   <NEED URGENT HELP!>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: eric_Calin_Cruise@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I need an urgent help.
I want to change the page ranking algorithm in lucene and I do not know
where to start from and what file should I change?
I do not know what classes are involved. I have only a few days to do so, so
please help me with your complete explanation as a big favor!
Bests,
Eric

-- 
View this message in context: http://www.nabble.com/PAGE-RANKING-IN-LUCENE----%3CNEED-URGENT-HELP%21%3E-tf3574984.html#a9989913
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 14 04:19:46 2007
Return-Path: <java-user-return-27629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66843 invoked from network); 14 Apr 2007 04:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2007 04:19:44 -0000
Received: (qmail 78710 invoked by uid 500); 14 Apr 2007 04:19:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78467 invoked by uid 500); 14 Apr 2007 04:19:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78456 invoked by uid 99); 14 Apr 2007 04:19:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 21:19:44 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=FORGED_YAHOO_RCVD,PLING_QUERY,SPF_HELO_PASS,SPF_PASS,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2007 21:19:37 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HcZjJ-0003oP-0R
	for java-user@lucene.apache.org; Fri, 13 Apr 2007 21:19:17 -0700
Message-ID: <9989930.post@talk.nabble.com>
Date: Fri, 13 Apr 2007 21:19:16 -0700 (PDT)
From: supereric <eric_Calin_Cruise@yahoo.com>
To: java-user@lucene.apache.org
Subject: PAGE RANKING IN LUCENE?   <NEED URGENT HELP!>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: eric_Calin_Cruise@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I need an urgent help.
I want to change the page ranking algorithm in lucene and I do not know
where to start from and what file should I change?
I do not know what classes are involved. I have only a few days to do so, so
please help me with your complete explanation as a big favor!
Bests,
Eric

-- 
View this message in context: http://www.nabble.com/PAGE-RANKING-IN-LUCENE----%3CNEED-URGENT-HELP%21%3E-tf3574992.html#a9989930
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 14 08:17:19 2007
Return-Path: <java-user-return-27630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99532 invoked from network); 14 Apr 2007 08:17:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2007 08:17:18 -0000
Received: (qmail 26625 invoked by uid 500); 14 Apr 2007 08:17:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26587 invoked by uid 500); 14 Apr 2007 08:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26574 invoked by uid 99); 14 Apr 2007 08:17:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2007 01:17:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2007 01:17:09 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1230046wxd
        for <java-user@lucene.apache.org>; Sat, 14 Apr 2007 01:16:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=dcmEd0v9BfdgpRamlQOAmBaPeFEc+b9VsMSXFO0l0P5wZHM7N8MFQ04sfkkXJ62lxC30lvVJDwp4ORqq+ZoiPnh//0Fp5qq9pHsdmHs95F+Q6DSiNplu0J+Q5rkTWAUC+PZNhQOTee39WjPdDzai4atcPEC6BRQH/rici2e05XU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=s2i5Mh8W/u2RuDQUBbcZ4mfeXeCUu9AtTkoslWc6hUkVgtUzvF0VQYTqCERyx6ZfcdDYxGmRfZZNh85aWSM7FZ4RiT648zmcDpvNPlcuiNmGUehzogTIt6WRxAKJYsuQbYziI3UZTd1oP//OPJK183M5yXdkvi2Zwf2JV0IuSTM=
Received: by 10.70.69.11 with SMTP id r11mr7112795wxa.1176538609078;
        Sat, 14 Apr 2007 01:16:49 -0700 (PDT)
Received: by 10.70.76.19 with HTTP; Sat, 14 Apr 2007 01:16:49 -0700 (PDT)
Message-ID: <bddd3c950704140116i20de6b9cp85ad707de6402184@mail.gmail.com>
Date: Sat, 14 Apr 2007 12:46:49 +0430
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: updating a single searcher in MultiSearcher
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3506_17989710.1176538609013"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3506_17989710.1176538609013
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi list,
I am using a ParallelMultiSearcher in order to search a number of indices.
As the rate of input to the index is very high I have to check
indexSearcher.isCurrent quite often and have to reopen the index. There are
however to issues:

- In order to have a current version of a searcher, do I have to get a new
instance of the underlying fsDirectory (on which I have built the searcher)
too?
- My only choice now seems to be reopening the corresponding Searcher and
then creating another MultiSearcher object from the Searchers vector. Is
there any way to reopen only one of the underlying Searchers in
MultiSearcher without destroying the MultiSearcher object?

--jaf

------=_Part_3506_17989710.1176538609013--

From java-user-return-27631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 14 11:15:03 2007
Return-Path: <java-user-return-27631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63830 invoked from network); 14 Apr 2007 11:15:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2007 11:15:03 -0000
Received: (qmail 39832 invoked by uid 500); 14 Apr 2007 11:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39786 invoked by uid 500); 14 Apr 2007 11:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39775 invoked by uid 99); 14 Apr 2007 11:15:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2007 04:15:02 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2007 04:14:55 -0700
Received: by ug-out-1314.google.com with SMTP id k40so632381ugc
        for <java-user@lucene.apache.org>; Sat, 14 Apr 2007 04:14:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=KLaJnMShvVXUdY8jgIeXEvs+e6PEqH2i0xgah5qyoItbWbCxIUU2r45N2IvTBrriyNPUCzl/2P4qioUmcndPSLyUSwefDdOKACbNGGf/DwmhdnhMxw6f4mAQUmPsZOl20TIcvxYB0DHMb/1gKnOId8jzzh1tVJFs2gAbaE+r7+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ZI23WIDNoHCW5iymWI8Sp+RtMRggX/0Gmr+7u7/4zcDI3W4L3OUrft+lQ0tpEH+EQ84+Z6028qSgJwqqGOaWW/PG53Rx1xv3CgDxBGWJ1mMPX7UvBAFc3ntOCGmI0Sq3m3KWLvIxeZ7PyXzcZK7d2H+X0ZNyj8HVCedxIiwsono=
Received: by 10.82.120.14 with SMTP id s14mr5426810buc.1176549274357;
        Sat, 14 Apr 2007 04:14:34 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id w5sm3558255mue.2007.04.14.04.14.33;
        Sat, 14 Apr 2007 04:14:33 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <9989930.post@talk.nabble.com>
References: <9989930.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C2015614-FD5A-4C22-B2E5-9DE1D247DF06@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: PAGE RANKING IN LUCENE?   <NEED URGENT HELP!>
Date: Sat, 14 Apr 2007 13:13:54 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


14 apr 2007 kl. 06.19 skrev supereric:

> I want to change the page ranking algorithm in lucene and I do not  
> know
> where to start from and what file should I change?
> I do not know what classes are involved. I have only a few days to  
> do so, so
> please help me with your complete explanation as a big favor!

Eric,

Lucene has no built in page rank, however you might mean something  
else. It is easier to help if you explain what it is you want to achive.

http://wiki.apache.org/jakarta-lucene/PageRank


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 14 12:56:15 2007
Return-Path: <java-user-return-27632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76934 invoked from network); 14 Apr 2007 12:56:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Apr 2007 12:56:14 -0000
Received: (qmail 9544 invoked by uid 500); 14 Apr 2007 12:56:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9500 invoked by uid 500); 14 Apr 2007 12:56:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9486 invoked by uid 99); 14 Apr 2007 12:56:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2007 05:56:12 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ekemokai@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2007 05:56:05 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1046696wra
        for <java-user@lucene.apache.org>; Sat, 14 Apr 2007 05:55:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cRBrT65htheInV+xvtpENaUmH28+eCCkBH4IT+WK3yZQl6CHcPLP2Ur51UMrpqFI04l6omt1tHKtembO190t3F/7TB2Kw8XXg+qphxrzc6Y+DHNcQJHDVGlOxnKlja7g67bO4dqEU22rwyXqougKt03GEbHobHO36zjJBKqsexE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jNlu1uKoU3N5PrvTTEQ3MHq/O2RPZiCcX6GknmNKsmtBN46fo7kh/1k4EC+H2y59hQxpSN3xutRFwxVdDV0GjS4a+JOO6Z8eaX1oS1Rf1H9J+akVbgZ4gDhwWJCXUTmY+ndpf4khad3GwZKRmzn9apDQ1+o8VGKnOsirNTrmyxM=
Received: by 10.115.33.1 with SMTP id l1mr1347006waj.1176555344555;
        Sat, 14 Apr 2007 05:55:44 -0700 (PDT)
Received: by 10.115.93.14 with HTTP; Sat, 14 Apr 2007 05:55:44 -0700 (PDT)
Message-ID: <dac893430704140555n726f91fcy4b65b5d4da829f7c@mail.gmail.com>
Date: Sat, 14 Apr 2007 08:55:44 -0400
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: PAGE RANKING IN LUCENE? <NEED URGENT HELP!>
In-Reply-To: <C2015614-FD5A-4C22-B2E5-9DE1D247DF06@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15412_19268252.1176555344494"
References: <9989930.post@talk.nabble.com>
	 <C2015614-FD5A-4C22-B2E5-9DE1D247DF06@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15412_19268252.1176555344494
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You'll have to implement your own ranking on top of Lucene.  Lucene only
gives you document scores, which is a measure of how well your query match a
document. Page rank determines how relevant a document is to your query, a
document might score well by having a lot of the query words, but it might
not be what you're looking for.

On 4/14/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 14 apr 2007 kl. 06.19 skrev supereric:
>
> > I want to change the page ranking algorithm in lucene and I do not
> > know
> > where to start from and what file should I change?
> > I do not know what classes are involved. I have only a few days to
> > do so, so
> > please help me with your complete explanation as a big favor!
>
> Eric,
>
> Lucene has no built in page rank, however you might mean something
> else. It is easier to help if you explain what it is you want to achive.
>
> http://wiki.apache.org/jakarta-lucene/PageRank
>
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_15412_19268252.1176555344494--

From java-user-return-27633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 15 06:28:22 2007
Return-Path: <java-user-return-27633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52946 invoked from network); 15 Apr 2007 06:28:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2007 06:28:21 -0000
Received: (qmail 81321 invoked by uid 500); 15 Apr 2007 06:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81284 invoked by uid 500); 15 Apr 2007 06:28:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81269 invoked by uid 99); 15 Apr 2007 06:28:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2007 23:28:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2007 23:28:11 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3F6Rn99136042
	for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 06:27:49 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3F6RnfQ3735678
	for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 08:27:49 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3F6RnPu011384
	for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 08:27:49 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3F6RmVb011381
	for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 08:27:48 +0200
In-Reply-To: <bddd3c950704140116i20de6b9cp85ad707de6402184@mail.gmail.com>
Subject: Re: updating a single searcher in MultiSearcher
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF1C5569D6.BACF1C00-ON882572BE.001EF5B5-882572BE.00235930@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sat, 14 Apr 2007 23:26:05 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 15/04/2007 09:27:48
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

jafarim <jafarim@gmail.com> wrote on 14/04/2007 01:16:49:

> hi list,
> I am using a ParallelMultiSearcher in order to search a number of
indices.
> As the rate of input to the index is very high I have to check
> indexSearcher.isCurrent quite often and have to reopen the index. There
are
> however to issues:
>
> - In order to have a current version of a searcher, do I have to get a
new
> instance of the underlying fsDirectory (on which I have built the
searcher)
> too?

Assuming the PMS is created over IndexSearchers, would something like this
do:

  Searchable srchbls[] = pms.getSearchables();
  for (i ... ) {
    IndexSearcher is = (IndexSearcher) srchbls[i];
    if (!is.getIndexReader().isCurrent()) {
      Directory d = is.getIndexReader().directory();
      is.close(); // note: must make sure pms is not in use! do not call
pms.close()!
      srchbles[i] = new IndexSearcher(d);
    }
  }

> - My only choice now seems to be reopening the corresponding Searcher and
> then creating another MultiSearcher object from the Searchers vector. Is
> there any way to reopen only one of the underlying Searchers in
> MultiSearcher without destroying the MultiSearcher object?

No such option, because the PMS does some initialization with the searchers
provided at construction and would not re-init. But PMS is a just a
wrapper, I don't think this would be a problem. Once the array srchbls is
obtained above, just reopen non-current searchers in that array (updating
the array as well) and use the same array to create a new PMS. Do you
anticipate (or experienced) any problems this way?

>
> --jaf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 15 08:37:44 2007
Return-Path: <java-user-return-27634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71391 invoked from network); 15 Apr 2007 08:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2007 08:37:44 -0000
Received: (qmail 54474 invoked by uid 500); 15 Apr 2007 08:37:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54442 invoked by uid 500); 15 Apr 2007 08:37:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54431 invoked by uid 99); 15 Apr 2007 08:37:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 01:37:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 01:37:37 -0700
Received: by an-out-0708.google.com with SMTP id c3so1283866ana
        for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 01:37:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rUSYC7b6UdwpYLYiA5hh5WV0L3n/9hnMkCbnwFksPPlrSKh4sKOI//SPvcWHd2zaSGwVJpBnUgYdteHyTQQsYsgvo9pQkB3lOQeFqiJ1JFGesFe8577SCWPpV84cGvDAp+DgaudwdTlpuAOTWZl/lF5xJqRJAm8ORMWsZ93J/Aw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KGxrqnYVq013Jwrb/4NWmF3H4zXOhhDDOOxhWE9+uwOytCZ5XP2hbO8eQ3j5W2Sx9eU2k/2pKTs+RSXW5c2A/cNsIv36CwqibDgCtp0mLtk5ZvP0Pp+xAc9SwdYBG8SQp1BZ7xFJlAFz99q8ZNNK4JSwOPPB+QzKDlE5GU2fNtY=
Received: by 10.100.94.3 with SMTP id r3mr3668541anb.1176626236525;
        Sun, 15 Apr 2007 01:37:16 -0700 (PDT)
Received: by 10.100.173.10 with HTTP; Sun, 15 Apr 2007 01:37:16 -0700 (PDT)
Message-ID: <34b8543c0704150137h662567e1s29fcea1a6028e0ab@mail.gmail.com>
Date: Sun, 15 Apr 2007 12:07:16 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about field equality in query
In-Reply-To: <EA0A1526-4D97-4EC9-8F92-C6365A2E650F@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30955_13984935.1176626236230"
References: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com>
	 <EA0A1526-4D97-4EC9-8F92-C6365A2E650F@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30955_13984935.1176626236230
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Karl,
sorry I was on business vacation and could not reply soon.

Ok, I want to index my database and search through the indexes, and the
tables in database are more than 50 and it's hard to joining them and then
indexing. so I was thinking of indexing each table in a document but in one
index file and then make relations between them

I know that Lucene is not a relational database but it really helps us to
improve accessing our information and even generating reports.

Even if this feature decline the performance, still it is better than
generating reports from SQL statements and the speed up accessing
information. now our users are very satisfied by this. but we need to create
some relationship between documents.


On 4/11/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 11 apr 2007 kl. 11.19 skrev Mohammad Norouzi:
>
> > is it possible (or a trickery way)  to search with a given query in
> > which we
> > can set an equality for two fields
> > for example:
> >
> > Document:
> > field1             field2                field3          field4
> >
> > Query:
> >  field1:"test phrase" AND field2:"test" AND field3:field4
> >
> > in this query we said that do search where field3 is equal to
> > field4 ...
> > (and rest of the query)
> >
> > if it is not possible, can we ask it as a new feature from Lucene
> > developers?
>
> It could probably be done, but would be quite an expensive query to
> place.
>
> However, a request like this usually tiggers questions about the
> design of an index with such needs. There is probably a better
> solution. Start by telling us about the data you have inserted to the
> index, and what it is you try to achieve.
>
> In essence, Lucene is not a relational database.
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad

------=_Part_30955_13984935.1176626236230--

From java-user-return-27635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 15 14:12:47 2007
Return-Path: <java-user-return-27635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40152 invoked from network); 15 Apr 2007 14:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2007 14:12:44 -0000
Received: (qmail 83510 invoked by uid 500); 15 Apr 2007 14:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83460 invoked by uid 500); 15 Apr 2007 14:12:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83444 invoked by uid 99); 15 Apr 2007 14:12:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 07:12:42 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 07:12:35 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1612321mue
        for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 07:12:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IqTJ8viY8whZQA4vtvIIY9nOs09nmIsHAOiCqaCZ5b7zR0mDHZ/daM21PP36B4+c8ipRx14yP0dOdlhuQUb3fum2KucyjYoHFe4UoL+hzzBmL7AZVBlEdyeZ2Sy9j7LjD8jRYZqrEkysm0LYJkpyIqWx0FzuKCHsKpgnOL4KmqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rw2hcIhro9yFS8vvO5wZesO8D8stikM8Q9jljwLV0Hy5co6Bq/YqsHgk1qSKoIiy7OEJVSVUZqxVXWK/MH7AFASZE8OrgbwNfS9pM1xs5UWjIALyPmnCRzLMXBLwxfSx85fAGagYZqDGvVH9iXQXs3VW64vV6F/y3JqSfAOwRCg=
Received: by 10.82.177.3 with SMTP id z3mr6463475bue.1176646333837;
        Sun, 15 Apr 2007 07:12:13 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Sun, 15 Apr 2007 07:12:13 -0700 (PDT)
Message-ID: <359a92830704150712p6b1dfe11y7f405dc6741d2b1e@mail.gmail.com>
Date: Sun, 15 Apr 2007 10:12:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about field equality in query
In-Reply-To: <34b8543c0704150137h662567e1s29fcea1a6028e0ab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22628_24334064.1176646333752"
References: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com>
	 <EA0A1526-4D97-4EC9-8F92-C6365A2E650F@gmail.com>
	 <34b8543c0704150137h662567e1s29fcea1a6028e0ab@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22628_24334064.1176646333752
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

well, how much data are we talking about here? If your index
is already 100G, your options are much more limited than if
it's 1M...

Essentially, you have several choices:
1> de-normalize your data to whatever extent is "sufficient"
    and index it.
2> Try to do what amount to joins. If your needs aren't too complex,
     you can probably do some interesting things with
     TermEnum/TermDocs, but I should emphasize the word *simple*
     in the relationships or else you'll be re-inventing an RDBMS <G>.
3> You can mix-n-match. That is, use Lucene to index searchable
     data and use the database for some portion of your joins.

Best
Erick


On 4/15/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Thanks Karl,
> sorry I was on business vacation and could not reply soon.
>
> Ok, I want to index my database and search through the indexes, and the
> tables in database are more than 50 and it's hard to joining them and then
> indexing. so I was thinking of indexing each table in a document but in
> one
> index file and then make relations between them
>
> I know that Lucene is not a relational database but it really helps us to
> improve accessing our information and even generating reports.
>
> Even if this feature decline the performance, still it is better than
> generating reports from SQL statements and the speed up accessing
> information. now our users are very satisfied by this. but we need to
> create
> some relationship between documents.
>
>
> On 4/11/07, karl wettin <karl.wettin@gmail.com> wrote:
> >
> >
> > 11 apr 2007 kl. 11.19 skrev Mohammad Norouzi:
> >
> > > is it possible (or a trickery way)  to search with a given query in
> > > which we
> > > can set an equality for two fields
> > > for example:
> > >
> > > Document:
> > > field1             field2                field3          field4
> > >
> > > Query:
> > >  field1:"test phrase" AND field2:"test" AND field3:field4
> > >
> > > in this query we said that do search where field3 is equal to
> > > field4 ...
> > > (and rest of the query)
> > >
> > > if it is not possible, can we ask it as a new feature from Lucene
> > > developers?
> >
> > It could probably be done, but would be quite an expensive query to
> > place.
> >
> > However, a request like this usually tiggers questions about the
> > design of an index with such needs. There is probably a better
> > solution. Start by telling us about the data you have inserted to the
> > index, and what it is you try to achieve.
> >
> > In essence, Lucene is not a relational database.
> >
> > --
> > karl
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
> Mohammad
>

------=_Part_22628_24334064.1176646333752--

From java-user-return-27636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 15 15:22:27 2007
Return-Path: <java-user-return-27636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50645 invoked from network); 15 Apr 2007 15:22:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2007 15:22:26 -0000
Received: (qmail 51377 invoked by uid 500); 15 Apr 2007 15:22:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51345 invoked by uid 500); 15 Apr 2007 15:22:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51334 invoked by uid 99); 15 Apr 2007 15:22:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 08:22:25 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 08:22:18 -0700
Received: by an-out-0708.google.com with SMTP id c3so1341783ana
        for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 08:21:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mfR3tUFCQJ3m5AKhVWkSo3w9Yfw9bUOVKeaQW9FMzWqIun+e72huhROtjyLfBUFDBZny6dFyFtmwHWWLIkuUsvATu76KaY++sCmEJcvr6FVF5cRZVQZBH6GxnweNheJEUIvQJyPB2244SeAPAH1wrjH5eDUt1UmyjnEXuYrFP9s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ofU/HEUo7F05XPLVLePxynfmvbfYlWspkmS0CUeS1nE2E5S5L8WK515d3Y5iEO9EpmiQdhcCrcwVSpi3EamfZVJgm37Mm6lSCZy1yuG1++E2ZxWumh1okrHr0V32umPiyCtIlZ5dslz99k/SJlTxPdvrJJTTcrXyO+exLxwn5t8=
Received: by 10.100.94.3 with SMTP id r3mr3841568anb.1176650517877;
        Sun, 15 Apr 2007 08:21:57 -0700 (PDT)
Received: by 10.100.173.10 with HTTP; Sun, 15 Apr 2007 08:21:57 -0700 (PDT)
Message-ID: <34b8543c0704150821r53bc6b33g34e0f3ad9af010a0@mail.gmail.com>
Date: Sun, 15 Apr 2007 18:51:57 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about field equality in query
In-Reply-To: <359a92830704150712p6b1dfe11y7f405dc6741d2b1e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33173_27827759.1176650517784"
References: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com>
	 <EA0A1526-4D97-4EC9-8F92-C6365A2E650F@gmail.com>
	 <34b8543c0704150137h662567e1s29fcea1a6028e0ab@mail.gmail.com>
	 <359a92830704150712p6b1dfe11y7f405dc6741d2b1e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33173_27827759.1176650517784
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

well, let me tell you what we're going to do.
our information are too much. actually, we have a huge database for
hospitals, and their services and their patients and also pharmacy infos.

just for test, we first joined some important tables and as you said
de-normalized them and then tried to create an index. it was about 3
millions documents and surprisingly, we saw that using this system we can
achieve our goal in a few seconds, however, by using SQL statements it took
more than half an hour !!! so what did we want more? we just want to reach
our result and Lucene fulfils our needs.

but we are not going to leave the database and throw it out. we need Lucene
in some special cases. in our case, reporting from whole informatin.

but the problem is, because there are more tables (actually there are more
than 10 database views) so we decided to categorize information and  create
a view for each category. and then index them individually.

but we need to find some information on say, index2, where they have
relation with say index1

Erick, your second way doesnt fulfil our needs because the information are
too complex. and the third one, yes we finally do that, but before that we
need to do some searching (with a complex query) on indexes so we need many
information on our indexes.

I was thinking of building another table (table, I dont mean database table,
it can be every structure) that keeps lucene's internal ids and their
relations with other indexes. and I tested it, now it works fine but you
know this internal ids will change once we call optimize() method. so we
should re-create them each time we update the index. (we do it every other
week)

so if you had provided a feature for such problem to find the relations
between various indexes every thing was nice.

I know this is not an aspect for Lucene, but in such situation it would help
and save the developers and users, specially when we were able to disable or
enable that feature depend on our needs.

lots of thanks

On 4/15/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> well, how much data are we talking about here? If your index
> is already 100G, your options are much more limited than if
> it's 1M...
>
> Essentially, you have several choices:
> 1> de-normalize your data to whatever extent is "sufficient"
>     and index it.
> 2> Try to do what amount to joins. If your needs aren't too complex,
>      you can probably do some interesting things with
>      TermEnum/TermDocs, but I should emphasize the word *simple*
>      in the relationships or else you'll be re-inventing an RDBMS <G>.
> 3> You can mix-n-match. That is, use Lucene to index searchable
>      data and use the database for some portion of your joins.
>
> Best
> Erick
>
>
> On 4/15/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > Thanks Karl,
> > sorry I was on business vacation and could not reply soon.
> >
> > Ok, I want to index my database and search through the indexes, and the
> > tables in database are more than 50 and it's hard to joining them and
> then
> > indexing. so I was thinking of indexing each table in a document but in
> > one
> > index file and then make relations between them
> >
> > I know that Lucene is not a relational database but it really helps us
> to
> > improve accessing our information and even generating reports.
> >
> > Even if this feature decline the performance, still it is better than
> > generating reports from SQL statements and the speed up accessing
> > information. now our users are very satisfied by this. but we need to
> > create
> > some relationship between documents.
> >
> >
> > On 4/11/07, karl wettin <karl.wettin@gmail.com> wrote:
> > >
> > >
> > > 11 apr 2007 kl. 11.19 skrev Mohammad Norouzi:
> > >
> > > > is it possible (or a trickery way)  to search with a given query in
> > > > which we
> > > > can set an equality for two fields
> > > > for example:
> > > >
> > > > Document:
> > > > field1             field2                field3          field4
> > > >
> > > > Query:
> > > >  field1:"test phrase" AND field2:"test" AND field3:field4
> > > >
> > > > in this query we said that do search where field3 is equal to
> > > > field4 ...
> > > > (and rest of the query)
> > > >
> > > > if it is not possible, can we ask it as a new feature from Lucene
> > > > developers?
> > >
> > > It could probably be done, but would be quite an expensive query to
> > > place.
> > >
> > > However, a request like this usually tiggers questions about the
> > > design of an index with such needs. There is probably a better
> > > solution. Start by telling us about the data you have inserted to the
> > > index, and what it is you try to achieve.
> > >
> > > In essence, Lucene is not a relational database.
> > >
> > > --
> > > karl
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Regards,
> > Mohammad
> >
>



-- 
Regards,
M. Norouzi

------=_Part_33173_27827759.1176650517784--

From java-user-return-27637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 15 16:41:16 2007
Return-Path: <java-user-return-27637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69742 invoked from network); 15 Apr 2007 16:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2007 16:41:15 -0000
Received: (qmail 31559 invoked by uid 500); 15 Apr 2007 16:41:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31511 invoked by uid 500); 15 Apr 2007 16:41:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31500 invoked by uid 99); 15 Apr 2007 16:41:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 09:41:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 09:41:07 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Hd7mJ-0002Nb-2a
	for java-user@lucene.apache.org; Sun, 15 Apr 2007 18:40:39 +0200
Received: from r6dm174.net.upc.cz ([89.176.116.174])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 18:40:39 +0200
Received: from literakl by r6dm174.net.upc.cz with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 18:40:39 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Leos Literak <literakl@seznam.cz>
Subject:  highlighter highlights another term
Date:  Sun, 15 Apr 2007 18:41:02 +0200
Lines: 19
Message-ID: <evtkhq$4oq$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: r6dm174.net.upc.cz
User-Agent: Thunderbird 1.5.0.5 (X11/20060908)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have following code:

query = query.rewrite(indexReader);
searcher = new IndexSearcher(indexReader);
hits = searcher.search(query);
String text = doc.get("TITLE") + " " + doc.get("CONTENT");
tokenStream = analyzer.tokenStream("CONTENT", new StringReader(text));
fragment = highlighter.getBestFragments(tokenStream, text, 3, "...");

This works fine for most queries except when there are multiple fields
in query. Eg. "mplayer type:article", then fragments contains the word 
"article" highlighted. But I searched for text "mplayer" in documents
with type "article". Am I doing something wrong or is it bug?

Thanks

Leos


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 15 21:56:44 2007
Return-Path: <java-user-return-27638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45128 invoked from network); 15 Apr 2007 21:56:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Apr 2007 21:56:43 -0000
Received: (qmail 10990 invoked by uid 500); 15 Apr 2007 21:56:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10957 invoked by uid 500); 15 Apr 2007 21:56:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10946 invoked by uid 99); 15 Apr 2007 21:56:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 14:56:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.62] (HELO smtp008.mail.ukl.yahoo.com) (217.12.11.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 15 Apr 2007 14:56:35 -0700
Received: (qmail 80172 invoked from network); 15 Apr 2007 21:56:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=BdIAz24TCyyDjPPpXlTtIr8G9dwzwcZJG/9CnvA/5O6GCJ6LuqohT5Zc9apIxinlDTflf0qHk/dXzM43uyf1dvIu0pA6dfubEqSjLFUlnx5PjbNfuGWZxcs6wF6e6YHu7A3DLQAsX2L/qfqy0gSa1TveSHdSjAf62ZaJ3MKBMMQ=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp008.mail.ukl.yahoo.com with SMTP; 15 Apr 2007 21:56:13 -0000
X-YMail-OSG: k8I3p9IVM1l4P94dsDEW.Sg5MKOXdnods6Wxri_JJlpB12JYkuCTUwmG2FdlcM923F5us75yiQ--
Message-ID: <46229F72.2080001@yahoo.co.uk>
Date: Sun, 15 Apr 2007 22:56:02 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: highlighter highlights another term
References: <evtkhq$4oq$1@sea.gmane.org>
In-Reply-To: <evtkhq$4oq$1@sea.gmane.org>
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

See the Junit test example for field-sensitive highlighting.
If you pass a fieldname to the QueryScorer constructor it only considers 
query terms for that field - the default without is all fields

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 16 06:42:47 2007
Return-Path: <java-user-return-27639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70843 invoked from network); 16 Apr 2007 06:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2007 06:42:47 -0000
Received: (qmail 51045 invoked by uid 500); 16 Apr 2007 06:42:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50416 invoked by uid 500); 16 Apr 2007 06:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50405 invoked by uid 99); 16 Apr 2007 06:42:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 23:42:44 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2007 23:42:37 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1689258muf
        for <java-user@lucene.apache.org>; Sun, 15 Apr 2007 23:42:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=URhA/zLAL/GbcrF6Me3YdaFtFuMBFFC3bpN+kyW7Zf2qJj3XGQyZWYqmi0GpN+J4uyMwfOyoTQuMKIrNYloxGaFJwjzi9uAZq94Mg82MCURz4d7+wCaAP4OsqX1AoHAOPeFmolRPkbetpGk6nn9rKol6kH6yYR0mEYQyd4CI0cM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UnXJVCXhU9DVdGX3U2Lf3lhGEUBhXKyKzYX28RNO5sJnm4G5Adm7TK850qy0bsHF1pXKTV8UX2hC1O9MexvdmKk++gJ9ZTG7sGVJYpsWG5efo6dAKYZEB58JFAoMjIL+j21Q67v8eYv0cdHyIYM35DujFwULAQh2Jry2iVmT+Uw=
Received: by 10.82.167.5 with SMTP id p5mr7726460bue.1176705735839;
        Sun, 15 Apr 2007 23:42:15 -0700 (PDT)
Received: by 10.82.157.11 with HTTP; Sun, 15 Apr 2007 23:42:15 -0700 (PDT)
Message-ID: <6e3ae6310704152342n6148f04fvd98df5c19ab5243d@mail.gmail.com>
Date: Sun, 15 Apr 2007 23:42:15 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about field equality in query
In-Reply-To: <34b8543c0704150821r53bc6b33g34e0f3ad9af010a0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com>
	 <EA0A1526-4D97-4EC9-8F92-C6365A2E650F@gmail.com>
	 <34b8543c0704150137h662567e1s29fcea1a6028e0ab@mail.gmail.com>
	 <359a92830704150712p6b1dfe11y7f405dc6741d2b1e@mail.gmail.com>
	 <34b8543c0704150821r53bc6b33g34e0f3ad9af010a0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> > > Query:
> > >  field1:"test phrase" AND field2:"test" AND field3:field4
> > >
> > > in this query we said that do search where field3 is equal to
> > > field4 ...
> > > (and rest of the query)
Regarding your query, I think you can simply query the database and
create a field, like f3f4, and set it to 1 if the value of field3
equals that of field4,
and set it to 0 if otherwise.

When you search, you can use "....AND f3f4:1..."

This could be simpler than asking Lucene to do database job.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 4/15/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> well, let me tell you what we're going to do.
> our information are too much. actually, we have a huge database for
> hospitals, and their services and their patients and also pharmacy infos.
>
> just for test, we first joined some important tables and as you said
> de-normalized them and then tried to create an index. it was about 3
> millions documents and surprisingly, we saw that using this system we can
> achieve our goal in a few seconds, however, by using SQL statements it took
> more than half an hour !!! so what did we want more? we just want to reach
> our result and Lucene fulfils our needs.
>
> but we are not going to leave the database and throw it out. we need Lucene
> in some special cases. in our case, reporting from whole informatin.
>
> but the problem is, because there are more tables (actually there are more
> than 10 database views) so we decided to categorize information and  create
> a view for each category. and then index them individually.
>
> but we need to find some information on say, index2, where they have
> relation with say index1
>
> Erick, your second way doesnt fulfil our needs because the information are
> too complex. and the third one, yes we finally do that, but before that we
> need to do some searching (with a complex query) on indexes so we need many
> information on our indexes.
>
> I was thinking of building another table (table, I dont mean database table,
> it can be every structure) that keeps lucene's internal ids and their
> relations with other indexes. and I tested it, now it works fine but you
> know this internal ids will change once we call optimize() method. so we
> should re-create them each time we update the index. (we do it every other
> week)
>
> so if you had provided a feature for such problem to find the relations
> between various indexes every thing was nice.
>
> I know this is not an aspect for Lucene, but in such situation it would help
> and save the developers and users, specially when we were able to disable or
> enable that feature depend on our needs.
>
> lots of thanks
>
> On 4/15/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > well, how much data are we talking about here? If your index
> > is already 100G, your options are much more limited than if
> > it's 1M...
> >
> > Essentially, you have several choices:
> > 1> de-normalize your data to whatever extent is "sufficient"
> >     and index it.
> > 2> Try to do what amount to joins. If your needs aren't too complex,
> >      you can probably do some interesting things with
> >      TermEnum/TermDocs, but I should emphasize the word *simple*
> >      in the relationships or else you'll be re-inventing an RDBMS <G>.
> > 3> You can mix-n-match. That is, use Lucene to index searchable
> >      data and use the database for some portion of your joins.
> >
> > Best
> > Erick
> >
> >
> > On 4/15/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > Thanks Karl,
> > > sorry I was on business vacation and could not reply soon.
> > >
> > > Ok, I want to index my database and search through the indexes, and the
> > > tables in database are more than 50 and it's hard to joining them and
> > then
> > > indexing. so I was thinking of indexing each table in a document but in
> > > one
> > > index file and then make relations between them
> > >
> > > I know that Lucene is not a relational database but it really helps us
> > to
> > > improve accessing our information and even generating reports.
> > >
> > > Even if this feature decline the performance, still it is better than
> > > generating reports from SQL statements and the speed up accessing
> > > information. now our users are very satisfied by this. but we need to
> > > create
> > > some relationship between documents.
> > >
> > >
> > > On 4/11/07, karl wettin <karl.wettin@gmail.com> wrote:
> > > >
> > > >
> > > > 11 apr 2007 kl. 11.19 skrev Mohammad Norouzi:
> > > >
> > > > > is it possible (or a trickery way)  to search with a given query in
> > > > > which we
> > > > > can set an equality for two fields
> > > > > for example:
> > > > >
> > > > > Document:
> > > > > field1             field2                field3          field4
> > > > >
> > > > > Query:
> > > > >  field1:"test phrase" AND field2:"test" AND field3:field4
> > > > >
> > > > > in this query we said that do search where field3 is equal to
> > > > > field4 ...
> > > > > (and rest of the query)
> > > > >
> > > > > if it is not possible, can we ask it as a new feature from Lucene
> > > > > developers?
> > > >
> > > > It could probably be done, but would be quite an expensive query to
> > > > place.
> > > >
> > > > However, a request like this usually tiggers questions about the
> > > > design of an index with such needs. There is probably a better
> > > > solution. Start by telling us about the data you have inserted to the
> > > > index, and what it is you try to achieve.
> > > >
> > > > In essence, Lucene is not a relational database.
> > > >
> > > > --
> > > > karl
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > >
> >
>
>
>
> --
> Regards,
> M. Norouzi
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 16 08:00:20 2007
Return-Path: <java-user-return-27640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98425 invoked from network); 16 Apr 2007 08:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2007 08:00:19 -0000
Received: (qmail 61742 invoked by uid 500); 16 Apr 2007 08:00:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61710 invoked by uid 500); 16 Apr 2007 08:00:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61690 invoked by uid 99); 16 Apr 2007 08:00:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 01:00:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of moti.nisenson@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 01:00:09 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1761790wxd
        for <java-user@lucene.apache.org>; Mon, 16 Apr 2007 00:59:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=IcA+tHe3jmfjGxHrrk3qcdYP6KPdPm0AOUnlkI09QQ3HC1coDIMwwQcVuE11ilnQATkVYkUkUDD3Ib/APT/qT3cOeQTIGw45kWSVV70Su2ayygu6QurCYXOIIb9G2pLLZtzNJUkYIj5RqqPGKpmAeoKMTvKKFmsmLQeSXs+JT5A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=f1q+Cx8ybMSuBBYQ1Q421g+spLNvhey9Pjb/Hy/rmQsXKtC1M6OK5DfQ8hHaCPE7bJFa7v6W+mzsJA03O6Lv/URN+SixVi8Pl+x7+cYe61oCG2gauklTIxa9B7zfyCUB1c7zssnagWI99qC/tA5fnCGAIU16mI33OCF6AoxAVlk=
Received: by 10.78.138.14 with SMTP id l14mr1015115hud.1176710388331;
        Mon, 16 Apr 2007 00:59:48 -0700 (PDT)
Received: by 10.78.172.17 with HTTP; Mon, 16 Apr 2007 00:59:48 -0700 (PDT)
Message-ID: <268575990704160059n71067e86j9515599b5027bac@mail.gmail.com>
Date: Mon, 16 Apr 2007 10:59:48 +0300
From: "Moti Nisenson" <moti.nisenson@gmail.com>
To: java-user@lucene.apache.org
Subject: Merging Indeces
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13717_13909457.1176710388290"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13717_13909457.1176710388290
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I was wondering if the addIndexes() method in IndexWriter can be used for
updating documents.

Specifically, I'd like to leave my primary index alone during the update
process. Instead, I want to use a separate index (on a RAMDirectory), and to
make the updateDocument() calls on it and finally to merge the changes to
the primary index. This leads to several questions:

1) If I make an updateDocument call and the document isn't present in the
separate index, will it fail?
2) After I merge the indeces, will the documents in the primary index be
updated (i.e. deleted and then added if existing, otherwise just added)?
3) If the merge does update the primary index, does it all occur in a single
transaction?

Thanks for the help!

Moti

------=_Part_13717_13909457.1176710388290--

From java-user-return-27641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 16 10:19:03 2007
Return-Path: <java-user-return-27641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51912 invoked from network); 16 Apr 2007 10:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2007 10:19:00 -0000
Received: (qmail 85750 invoked by uid 500); 16 Apr 2007 10:18:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85725 invoked by uid 500); 16 Apr 2007 10:18:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85712 invoked by uid 99); 16 Apr 2007 10:18:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 03:18:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 03:18:50 -0700
Received: by ug-out-1314.google.com with SMTP id u40so829501ugc
        for <java-user@lucene.apache.org>; Mon, 16 Apr 2007 03:18:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jjNFm2iqz4WV9vwH/V7NYhkEchadj/YGjLhnpesnedA92Td7ZKc+8xCypqMekF/d3eShrny9M8aFNm87BF74EhHqDujvkJPedTnavf6HwklJApcSr56Rb7pRoPzz4ZZrYhZt7KIUoqOBfGuWIVC71wfdWg6WuwjGeulhuTHlqBQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=N+18VydMMZEJ40aLbUYAUGsrV8YDsTNxyd9GAAgtgrxn2rLzg6T+mQZaJOP5g7kd4LJPcIgwcRsIPoqPeGGjRMkZJ7R8iGL3Kz6UkqiA6AqacQgbm/IFRkFQZkmu8gUHMcw7Jx4Y7jitzqB8kbGjHHgedxSwnsNuhrHGfS1YykM=
Received: by 10.82.134.12 with SMTP id h12mr8060541bud.1176718706490;
        Mon, 16 Apr 2007 03:18:26 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Mon, 16 Apr 2007 03:18:26 -0700 (PDT)
Message-ID: <359a92830704160318u2c2085d9u38f91a1db8114a7f@mail.gmail.com>
Date: Mon, 16 Apr 2007 06:18:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merging Indeces
In-Reply-To: <268575990704160059n71067e86j9515599b5027bac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33416_8109491.1176718706452"
References: <268575990704160059n71067e86j9515599b5027bac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33416_8109491.1176718706452
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below.

On 4/16/07, Moti Nisenson <moti.nisenson@gmail.com> wrote:
>
> Hi,
>
> I was wondering if the addIndexes() method in IndexWriter can be used for
> updating documents.
>
> Specifically, I'd like to leave my primary index alone during the update
> process. Instead, I want to use a separate index (on a RAMDirectory), and
> to
> make the updateDocument() calls on it and finally to merge the changes to
> the primary index. This leads to several questions:
>
> 1) If I make an updateDocument call and the document isn't present in the
> separate index, will it fail?
> 2) After I merge the indeces, will the documents in the primary index be
> updated (i.e. deleted and then added if existing, otherwise just added)?


No, absolutely not. Lucene identifies documents by document ID. All the
documents in your secondary index will get unique Lucene IDs and
Lucene will NOT remove any documents from your original index.

Lucene has no concept of "document identity" in that you can index
the same document 15 times in a row and Lucene will have 15 entries.


3) If the merge does update the primary index, does it all occur in a single
> transaction?


"transaction" is really not a Lucene concept. What kind of behavior are
you really looking for here?


Thanks for the help!
>
> Moti
>

------=_Part_33416_8109491.1176718706452--

From java-user-return-27642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 16 10:41:53 2007
Return-Path: <java-user-return-27642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59288 invoked from network); 16 Apr 2007 10:41:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2007 10:41:51 -0000
Received: (qmail 13009 invoked by uid 500); 16 Apr 2007 10:41:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12987 invoked by uid 500); 16 Apr 2007 10:41:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12972 invoked by uid 99); 16 Apr 2007 10:41:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 03:41:50 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 03:41:43 -0700
Received: (qmail 27219 invoked from network); 16 Apr 2007 16:06:25 +0530
Received: from unknown (HELO bhavin) (202.137.232.130)
  by mailserver with SMTP; 16 Apr 2007 16:06:25 +0530
Message-ID: <011d01c78013$dc637cf0$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: How to get list of all terms from given doc id?
Date: Mon, 16 Apr 2007 16:11:58 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_011A_01C78041.F5D1DEB0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_011A_01C78041.F5D1DEB0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi guys,

In my existing index, i have not stored my index with TermVector.YES.
is there any way to fetch all the terms from the given document id.

Thanks.
Bhavin pandya
------=_NextPart_000_011A_01C78041.F5D1DEB0--


From java-user-return-27643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 16 11:33:46 2007
Return-Path: <java-user-return-27643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88222 invoked from network); 16 Apr 2007 11:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2007 11:33:44 -0000
Received: (qmail 89442 invoked by uid 500); 16 Apr 2007 11:33:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89210 invoked by uid 500); 16 Apr 2007 11:33:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89198 invoked by uid 99); 16 Apr 2007 11:33:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 04:33:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 04:33:35 -0700
Received: by ug-out-1314.google.com with SMTP id k40so934400ugc
        for <java-user@lucene.apache.org>; Mon, 16 Apr 2007 04:33:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sr1lfKoUhDhf2G/KeQDGIhEf0FpGh8p9O8ETKYchGBWJjI0qPsS5GnVbM/PfaK0qRTT1zO+ZGTkqkZQLqOKGRWCpO11VrNrTk9pCTdFD0Wp2roNcP7PDVsxcqTWGDJD8VKv3MajOCDfyPmG5vSr6haPbgwgkzF+bN0kbYgxVMTA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jhQxOzsuYt+yYWy0Xt+CU2RGkFXdzAZqns5VoV9P40bk3JmQMELpfZJWEo6FSAr0GNp+W5fnd4o8BJWt3FU1qwXa5xvnETT2Ff2XBpaI6DuN/UoSPtI90uXAwRB5owZoipDc/T1msoeCcocUdSLIbc+Jr2QwP3r6t/LQ9Ax1YwE=
Received: by 10.82.138.6 with SMTP id l6mr8197751bud.1176723194537;
        Mon, 16 Apr 2007 04:33:14 -0700 (PDT)
Received: by 10.82.189.3 with HTTP; Mon, 16 Apr 2007 04:33:14 -0700 (PDT)
Message-ID: <359a92830704160433k74f7795am24d37e31fce6d6c4@mail.gmail.com>
Date: Mon, 16 Apr 2007 07:33:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, "Bhavin Pandya" <bhavinp@rediff.co.in>
Subject: Re: How to get list of all terms from given doc id?
In-Reply-To: <011d01c78013$dc637cf0$d50310ac@bhavin>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34726_32811786.1176723194497"
References: <011d01c78013$dc637cf0$d50310ac@bhavin>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34726_32811786.1176723194497
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can still recover all the terms. However,
depending upon whether you've stored the field values, the reconstruction
may or may not be completely accurate.

Luke has to do something like this because you can use the
"Reconstruct & Edit" button, you can download that source and see
how it's done there.

Conceptually, you would do something like
Document.getFields. For each field, enumerate all
the terms in the index using TermEnum (use a value of
"" to enumerate all the terms). For each such term, use
a TermDocs to skipTo the id of the doc you're working
on. Use a TermPositions object to find the relative offsets
of each term.

Eventually, you'll have several lists of all the terms and their
positions that you'll have to merge.

This is a complex and time-consuming process, though. Why do
you need to do this anyway?

Erick

On 4/16/07, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>
> Hi guys,
>
> In my existing index, i have not stored my index with TermVector.YES.
> is there any way to fetch all the terms from the given document id.
>
> Thanks.
> Bhavin pandya

------=_Part_34726_32811786.1176723194497--

From java-user-return-27644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 16 14:36:13 2007
Return-Path: <java-user-return-27644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63798 invoked from network); 16 Apr 2007 14:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2007 14:36:13 -0000
Received: (qmail 44402 invoked by uid 500); 16 Apr 2007 14:36:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44375 invoked by uid 500); 16 Apr 2007 14:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44364 invoked by uid 99); 16 Apr 2007 14:36:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 07:36:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=ADVANCE_FEE_1,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.90 as permitted sender)
Received: from [65.54.246.90] (HELO bay0-omc1-s18.bay0.hotmail.com) (65.54.246.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 07:36:03 -0700
Received: from hotmail.com ([65.55.155.88]) by bay0-omc1-s18.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Mon, 16 Apr 2007 07:35:42 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 16 Apr 2007 07:35:42 -0700
Message-ID: <BAY144-F8613A2EEE4BF5458DCEB1D4520@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Mon, 16 Apr 2007 14:35:40 GMT
X-Originating-IP: [64.236.128.27]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
In-Reply-To: <359a92830704121329i26add537w971621f872726bcb@mail.gmail.com>
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index performance
Date: Mon, 16 Apr 2007 14:35:40 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 16 Apr 2007 14:35:42.0450 (UTC) FILETIME=[82CD5D20:01C78034]
X-Virus-Checked: Checked by ClamAV on apache.org


Erick,

Sorry for late reply. I was stuck with other project. content object is 
plain Java object. It has all fields set.

Thanks,
Tony

>From: "Erick Erickson" <erickerickson@gmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Index performance
>Date: Thu, 12 Apr 2007 16:29:35 -0400
>
>Inferring out on the end of a long and fragile limb..... Do you get
>information from the database in any of the calls in your indexing
>loop? That is, do any of...
>
>   itr.next();
>   content.getStoryText(),
>   content.getStoryIdentity()
>   content.getHeadline1()
>
>go out to the DB to get info, and could that be where the time is
>spent?
>
>Erick
>
>On 4/12/07, Tony Qian <tonyqian@hotmail.com> wrote:
>>
>>Otis,
>>
>>I timed just for indexing.
>>
>>thanks,
>>Tony
>>
>> >From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>> >Reply-To: java-user@lucene.apache.org
>> >To: java-user@lucene.apache.org
>> >Subject: Re: Index performance
>> >Date: Thu, 12 Apr 2007 09:31:49 -0700 (PDT)
>> >
>> >Hi Tony,
>> >Your code looks fine to me.  I'm not sure what you timed - the whole app
>> >run, just indexing, indexing + optimizing...  If you times indexing +
>> >optimizing, leave optimization out of the timer.  How long do you think
>> >this should take?  Try setting maxBufferedDocs to 90.
>> >
>> >Otis
>> >. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> >Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>> >
>> >----- Original Message ----
>> >From: Tony Qian <tonyqian@hotmail.com>
>> >To: java-user@lucene.apache.org
>> >Sent: Thursday, April 12, 2007 11:23:36 AM
>> >Subject: Index performance
>> >
>> >All,
>> >
>> >Sorry for long email. I have two questions on indexing. My data consists
>>of
>> >an id, short headline and story text. Story text has some html tags. 
>>Here
>> >is
>> >an example.
>> >
>> >In early 2005, it seemed that Shamita Shetty had finally arrived after a
>> >high profile debut in <i>Mohabbatein</i> [2000]. <br /><br />With 3 of
>>her
>> >films releasing in the first half of 2005, <i>Bewafa, Zeher </i>and
>> ><i>Fareb</i>, and the first two ending up making good money, it seemed
>>that
>> >the gorgeous girl had finally started making her presence felt.
>> ><i>Zeher</i>
>> >helped her being recognized as an actor and her fans had all the reasons
>>to
>> >believe that they would be seeing more of her in the coming months. <br
>> >/><br />Surprisingly there has been absolutely no movement ever since
>>then
>> >from Shamita's end as she hasn't had a single release in almost 2
>> >years now. All of this would change though with the arrival of
>><i>Cash</i>
>> >where she is one of the leading ladies apart from Esha Deol and Dia
>>Mirza.
>> ><br /><br />An action thriller popcorn entertainer, the film is directed
>>by
>> >Anubahv Sinha of <i>Dus</i> fame and stars Ajay Devgan, Suneil Shetty,
>> >Ritesh Deshmukh and Zayed Khan in the lead.<br /><br />
>> >
>> >I tried to index it. It took from 7-10 seconds to index about 90
>>documents.
>> >Here is my code:
>> >
>> >   static void indexContents(IndexWriter writer, List storyContentList)
>> >     throws IOException {
>> >     if (storyContentList != null && storyContentList.size() != 0) {
>> >         try {
>> >             Iterator itr = storyContentList.iterator();
>> >             while (itr.hasNext()){
>> >                 StoryContents content = (StoryContents) itr.next();
>> >                 Document document = new Document();
>> >                 document.add(new Field("storyText",
>> >content.getStoryText(),
>> >                              Field.Store.YES, Field.Index.TOKENIZED));
>> >                 document.add(new Field("storyIdentity",
>> >String.valueOf(content.getStoryIdentity()),
>> >                              Field.Store.YES, Field.Index.NO));
>> >                 document.add(new Field("headline1",
>> >String.valueOf(content.getHeadline1()),
>> >                              Field.Store.YES, Field.Index.NO));
>> >                 writer.addDocument(document);
>> >             }
>> >         }catch(Exception ex){
>> >              System.out.println(" caught a " + ex.getClass() );
>> >         }
>> >     }
>> >   }
>> >
>> >I opened one IndexWriter at very beginning
>> >IndexWriter writer = new IndexWriter(INDEX_DIR, new StandardAnalyzer(),
>> >true);
>> >
>> >I called optimize and closed IndexWriter after indexing documents.
>> >writer.optimize();
>> >writer.close();
>> >
>> >My question is why it took so long. Do I need to follow the instruction
>>of
>> >"How can I index HTML documents?" in FAQ from Lucene web site?
>> >
>> >Another question is if I can delete document based on storyIndentity
>>field
>> >(
>> >using IndexReader.deleteDocuments(term)). Since storyIdentity field is
>>not
>> >indexed, is there any performance issue or I should index it too (and
>>store
>> >it)?
>> >
>> >Appreciate your help.
>> >
>> >Tony
>> >
>> >_________________________________________________________________
>> >Mortgage rates near historic lows. Refinance $200,000 loan for as low as
>> >$771/month*
>> >
>>https://www2.nextag.com/goto.jsp?product=100000035&url=%2fst.jsp&tm=y&search=mortgage_text_links_88_h27f8&disc=y&vers=689&s=4056&p=5117
>> >
>> >
>> >---------------------------------------------------------------------
>> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> >
>> >
>> >---------------------------------------------------------------------
>> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>>_________________________________________________________________
>>MSN is giving away a trip to Vegas to see Elton John. Enter to win today.
>>http://msnconcertcontest.com?icid-nceltontagline
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

_________________________________________________________________
Mortgage rates near historic lows. Refinance $200,000 loan for as low as 
$771/month* 
https://www2.nextag.com/goto.jsp?product=100000035&url=%2fst.jsp&tm=y&search=mortgage_text_links_88_h27f8&disc=y&vers=689&s=4056&p=5117


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 16 14:38:20 2007
Return-Path: <java-user-return-27645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65522 invoked from network); 16 Apr 2007 14:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2007 14:38:18 -0000
Received: (qmail 51602 invoked by uid 500); 16 Apr 2007 14:38:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51563 invoked by uid 500); 16 Apr 2007 14:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51552 invoked by uid 99); 16 Apr 2007 14:38:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 07:38:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.163 as permitted sender)
Received: from [65.54.246.163] (HELO bay0-omc2-s27.bay0.hotmail.com) (65.54.246.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 07:38:08 -0700
Received: from hotmail.com ([65.55.155.86]) by bay0-omc2-s27.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Mon, 16 Apr 2007 07:37:47 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 16 Apr 2007 07:37:47 -0700
Message-ID: <BAY144-F685EB9FE05D4FE162A329D4520@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Mon, 16 Apr 2007 14:37:46 GMT
X-Originating-IP: [64.236.128.27]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
In-Reply-To: <OFD88B9A11.C615EA23-ON882572BB.00715CFA-882572BB.00718992@il.ibm.com>
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index performance
Date: Mon, 16 Apr 2007 14:37:46 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 16 Apr 2007 14:37:47.0562 (UTC) FILETIME=[CD5FF0A0:01C78034]
X-Virus-Checked: Checked by ClamAV on apache.org


Doron,

I'll try that and let you know the result.

thanks for suggestions.
Tony

>From: Doron Cohen <DORONC@il.ibm.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Index performance
>Date: Thu, 12 Apr 2007 13:40:07 -0700
>
>To cover all possible non-indexing overhead, better measure with something
>like this:
>
>    static long indexContents(IndexWriter writer, List storyContentList)
>      throws IOException {
>      long res = 0;
>      if (storyContentList != null && storyContentList.size() != 0) {
>          try {
>              Iterator itr = storyContentList.iterator();
>              while (itr.hasNext()){
>                  StoryContents content = (StoryContents) itr.next();
>                  res += content.getStoryText().length();
>                  res +=
>String.valueOf(content.getStoryIdentity()).length();
>                  res += String.valueOf(content.getHeadline1()).length();
>              }
>          }catch(Exception ex){
>               System.out.println(" caught a " + ex.getClass() );
>          }
>          return res;
>      }
>    }
>
>Doron Cohen/Haifa/IBM@IBMIL wrote on 12/04/2007 13:26:34:
>
> > > I tried to index it. It took from 7-10 seconds to index about 90
> > documents.
> >
> > That would be around 10 documents per second - way too slow. A Lucene's
> > perf test adding 12,000 docs sized similar to your sample doc (1400
> > characters) on a not so strong machine shows much faster pace - 146 docs
> > per second, or 237 with larger mix-beffered-docs setting:
> >
> >  Operation     round maxBuf  runCnt  recsPerRun  rec/s  elapsedSec
> >  AddDocs_12000     0     10       1       12000  146.3       82.04
> >  AddDocs_12000     1   1000       1       12000  237.8       50.45
> >
> > As Otis suggested, a larger max-buffered docs speeds things up.
> > But even without that, pace is 14 times faster than your numbers.
> >
> > It might be interesting to measure without indexing at all, i.e. modify
>the
> > method indexContents() to something like:
> >
> >   static int indexContents(IndexWriter writer, List storyContentList)
> >     throws IOException {
> >     int res = 0;
> >     if (storyContentList != null && storyContentList.size() != 0) {
> >         try {
> >             Iterator itr = storyContentList.iterator();
> >             while (itr.hasNext()){
> >                 StoryContents content = (StoryContents) itr.next();
> >                 res += content.length();
> >             }
> >         }catch(Exception ex){
> >              System.out.println(" caught a " + ex.getClass() );
> >         }
> >     }
> >     return res;
> >   }
> >
> > This should show if there is other overhead involved, unrelated to
> > indexing.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>

_________________________________________________________________
The average US Credit Score is 675. The cost to see yours: $0 by Experian. 
http://www.freecreditreport.com/pm/default.aspx?sc=660600&bcd=EMAILFOOTERAVERAGE


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 16 19:57:09 2007
Return-Path: <java-user-return-27646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47027 invoked from network); 16 Apr 2007 19:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Apr 2007 19:57:06 -0000
Received: (qmail 82487 invoked by uid 500); 16 Apr 2007 19:57:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82457 invoked by uid 500); 16 Apr 2007 19:57:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82445 invoked by uid 99); 16 Apr 2007 19:57:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 12:57:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 12:56:57 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1HdXJO-0007zE-86
	for java-user@lucene.apache.org; Mon, 16 Apr 2007 21:56:30 +0200
Received: from r6dm174.net.upc.cz ([89.176.116.174])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 16 Apr 2007 21:56:30 +0200
Received: from literakl by r6dm174.net.upc.cz with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 16 Apr 2007 21:56:30 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Leos Literak <literakl@seznam.cz>
Subject:  Re: highlighter highlights another term
Date:  Mon, 16 Apr 2007 21:56:52 +0200
Lines: 6
Message-ID: <f00kcr$iq3$1@sea.gmane.org>
References:  <evtkhq$4oq$1@sea.gmane.org> <46229F72.2080001@yahoo.co.uk>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: r6dm174.net.upc.cz
User-Agent: Thunderbird 1.5.0.5 (X11/20060908)
In-Reply-To: <46229F72.2080001@yahoo.co.uk>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

markharw00d wrote:
> See the Junit test example for field-sensitive highlighting.
> If you pass a fieldname to the QueryScorer constructor it only considers 
> query terms for that field - the default without is all fields

Thanks for hint, it works :-)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 01:07:33 2007
Return-Path: <java-user-return-27647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89419 invoked from network); 17 Apr 2007 01:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 01:07:31 -0000
Received: (qmail 58018 invoked by uid 500); 17 Apr 2007 01:07:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57780 invoked by uid 500); 17 Apr 2007 01:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57741 invoked by uid 99); 17 Apr 2007 01:07:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 18:07:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 18:07:14 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 67C9830EFC16; Mon, 16 Apr 2007 19:06:53 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-76-4-75-10.dhcp.embarqhsd.net [76.4.75.10])
	by ehatchersolutions.com (Postfix) with ESMTP id A53B030EFC16;
	Mon, 16 Apr 2007 19:06:46 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
References: <ECF1393A-DE7E-447A-A22D-C6C4E013C0C6@rcbowen.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <08B710E0-5D87-4B2B-A1AD-AF7309544149@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Fwd: Call for Papers Opens for ApacheCon US 2007
Date: Mon, 16 Apr 2007 21:06:43 -0400
To: solr-user@lucene.apache.org,
 solr-dev@lucene.apache.org,
 java-user@lucene.apache.org,
 java-dev@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

The one valid use of cross-posting...

Begin forwarded message:

> From: Rich Bowen <rbowen@rcbowen.com>
> Date: April 16, 2007 10:50:54 AM EDT
> To: pmcs@apache.org
> Subject: Call for Papers Opens for ApacheCon US 2007
> Reply-To: private@ant.apache.org
> Reply-To: planners-2007-us@ApacheCon.Com
>
> PMCs, please send this announcement to your various users@ and  
> devs@ mailing lists, as appropriate for your particular community.  
> Remember, your project can only be represented at ApacheCon if your  
> community submits talks proposals:
>
>
> ----------------------------
>
>
> Call for Papers Opens for ApacheCon US 2007
>
> The Call for Papers is now open for ApacheCon US, to be held  
> November 12-16 at the Peachtree Westin, Atlanta. The conference  
> will consist of two day of tutorials (November 12-13) and three  
> days of regular conference sessions (November 14-16).
>
> Please log in to the website at http://apachecon.com/html/ 
> login.html to submit your proposal. Further details about fees and  
> are avaialable on the CFP form.
>
> Topics appropriate for submission to this conference are manifold,  
> and may include but are not restricted to:
>
> * ASF projects
> * ASF-Incubated projects
> * Scripting languages and dynamic content such as Java, Perl,  
> Python, Ruby, XSL, and PHP
> * New technologies and broader initiatives such as Web Services and  
> Web 2.0
> * Security and e-commerce, performance tuning, load balancing, and  
> high availability
> * Business and community issues surrounding the ASF and Open Source
>
> The paper submission deadline is Monday, 28 April 2007, Midnight GMT.
>
> Thanks, and we hope to hear from you, and to see you in Atlanta.
> --
> The ApacheCon Planners
> planners-2007-us@ApacheCon.Com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 05:15:17 2007
Return-Path: <java-user-return-27648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65753 invoked from network); 17 Apr 2007 05:15:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 05:15:16 -0000
Received: (qmail 79765 invoked by uid 500); 17 Apr 2007 05:15:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79382 invoked by uid 500); 17 Apr 2007 05:15:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79371 invoked by uid 99); 17 Apr 2007 05:15:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 22:15:13 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 22:15:05 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hdg1d-0000bi-2X
	for java-user@lucene.apache.org; Mon, 16 Apr 2007 22:14:45 -0700
Message-ID: <10029364.post@talk.nabble.com>
Date: Mon, 16 Apr 2007 22:14:44 -0700 (PDT)
From: louiebagz <louiebagz@yahoo.com>
To: java-user@lucene.apache.org
Subject: how to output particular field from a List in an XML File
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: louiebagz@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello guys, 

This is a follow up email on my previous post
http://www.nabble.com/how-to-index-XML-elements-with-the-same-name-using-Lucene-tf3428085.html#a9555198.
I have successfully indexed XML elements with the same name. But when I
tried to search through my index, the output only displays the first XML
element in the list. I have uploaded the codes for your reference. 

Hoping for your kind attention on this. 

Louie 

http://www.nabble.com/file/7901/IndexKeyWords.java IndexKeyWords.java 
http://www.nabble.com/file/7902/SearchKeyWords.java SearchKeyWords.java 

-- 
View this message in context: http://www.nabble.com/how-to-output-particular-field-from-a-List-in-an-XML-File-tf3588871.html#a10029364
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 06:35:59 2007
Return-Path: <java-user-return-27649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88980 invoked from network); 17 Apr 2007 06:35:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 06:35:58 -0000
Received: (qmail 66050 invoked by uid 500); 17 Apr 2007 06:35:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66026 invoked by uid 500); 17 Apr 2007 06:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66011 invoked by uid 99); 17 Apr 2007 06:35:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 23:35:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2007 23:35:49 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1647252wra
        for <java-user@lucene.apache.org>; Mon, 16 Apr 2007 23:35:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d/pGSP6KfXZuUIEluqIy+1faxr0EbwcfTkwEu4lyFF2xGGHTvGZtnK8bVX4UrQuL29zz2PMHS7dF4L10S3QtfzqJ3wEAd9i4ALNCsttZMQnfZHPCl17W6p1Hz4wV3mK8iNnHFa5lJzFyO7n+vgFzQXu1K6o+234s6c8Dg3YJY2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cP0SEmgXTez08iyYeDfKyCjcCiv9wF4JgrITHfPD6GfBAHEMkoI9vkjKMtn/mDi10JgNPV027nkJdHZ4Bk6fBqD/2+0IgAtgh1pgeHZlLUjQ9Wi5fYSm1JJdH5UAPfcq4wOEn+1uX/r1p67b9TfsEFrzx0uKhI/nJLqPWoiUGkw=
Received: by 10.114.56.1 with SMTP id e1mr559209waa.1176791728171;
        Mon, 16 Apr 2007 23:35:28 -0700 (PDT)
Received: by 10.114.134.8 with HTTP; Mon, 16 Apr 2007 23:35:28 -0700 (PDT)
Message-ID: <52c3ddca0704162335m5f67304fn7798cefc58913e7a@mail.gmail.com>
Date: Tue, 17 Apr 2007 08:35:28 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merging Indeces
In-Reply-To: <359a92830704160318u2c2085d9u38f91a1db8114a7f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60857_27110701.1176791728116"
References: <268575990704160059n71067e86j9515599b5027bac@mail.gmail.com>
	 <359a92830704160318u2c2085d9u38f91a1db8114a7f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60857_27110701.1176791728116
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

try to look at Compass (http://www.opensymphony.com/compass/). It is built
on top of Lucene but provides additional concepts (transactions is one of
them). You might find this useful depending on your needs.

Regards,
Lukas

On 4/16/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> See below.
>
> On 4/16/07, Moti Nisenson <moti.nisenson@gmail.com> wrote:
> >
> > Hi,
> >
> > I was wondering if the addIndexes() method in IndexWriter can be used
> for
> > updating documents.
> >
> > Specifically, I'd like to leave my primary index alone during the update
> > process. Instead, I want to use a separate index (on a RAMDirectory),
> and
> > to
> > make the updateDocument() calls on it and finally to merge the changes
> to
> > the primary index. This leads to several questions:
> >
> > 1) If I make an updateDocument call and the document isn't present in
> the
> > separate index, will it fail?
> > 2) After I merge the indeces, will the documents in the primary index be
> > updated (i.e. deleted and then added if existing, otherwise just added)?
>
>
> No, absolutely not. Lucene identifies documents by document ID. All the
> documents in your secondary index will get unique Lucene IDs and
> Lucene will NOT remove any documents from your original index.
>
> Lucene has no concept of "document identity" in that you can index
> the same document 15 times in a row and Lucene will have 15 entries.
>
>
> 3) If the merge does update the primary index, does it all occur in a
> single
> > transaction?
>
>
> "transaction" is really not a Lucene concept. What kind of behavior are
> you really looking for here?
>
>
> Thanks for the help!
> >
> > Moti
> >
>

------=_Part_60857_27110701.1176791728116--

From java-user-return-27650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 09:43:20 2007
Return-Path: <java-user-return-27650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80703 invoked from network); 17 Apr 2007 09:43:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 09:43:18 -0000
Received: (qmail 41108 invoked by uid 500); 17 Apr 2007 09:43:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41081 invoked by uid 500); 17 Apr 2007 09:43:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41066 invoked by uid 99); 17 Apr 2007 09:43:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 02:43:16 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 02:43:09 -0700
Received: by an-out-0708.google.com with SMTP id c3so2019321ana
        for <java-user@lucene.apache.org>; Tue, 17 Apr 2007 02:42:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MpmT6FIVQdlhIidec97eGizyaByOcY0W4OTWSx/KC8IO6FzSD9+2GFMLyJL0dYCPK7lJWXsIKh28ihYQUeNNQ3PQBfLh0iuyXptcnL4Z4s+XBOCpdphoBvi0xiDdOJ60k4yGz3FdoPhHYvyp+PMZtusT8zQgAEVzgl7HEBJTRp0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pAoeMda1ch10qi8gAPwOqKeNM1sfOVl00O8sVPYzlsevqEtWan5GSGD1BP/3QnVKHfE+QjTxeIfnepzmOvXN9Q8dG6iVfsLvtlAVpfoulnmCX6OHT1OJFoP5hupbduh85IFIAonpswHAFSuAud0aegNoY9eq9uDaaEMPxhsrflw=
Received: by 10.100.9.19 with SMTP id 19mr5245985ani.1176802968177;
        Tue, 17 Apr 2007 02:42:48 -0700 (PDT)
Received: by 10.100.11.17 with HTTP; Tue, 17 Apr 2007 02:42:48 -0700 (PDT)
Message-ID: <34b8543c0704170242k532445acub4e716b367c0d8f3@mail.gmail.com>
Date: Tue, 17 Apr 2007 13:12:48 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about field equality in query
In-Reply-To: <6e3ae6310704152342n6148f04fvd98df5c19ab5243d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_84032_1824153.1176802968104"
References: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com>
	 <EA0A1526-4D97-4EC9-8F92-C6365A2E650F@gmail.com>
	 <34b8543c0704150137h662567e1s29fcea1a6028e0ab@mail.gmail.com>
	 <359a92830704150712p6b1dfe11y7f405dc6741d2b1e@mail.gmail.com>
	 <34b8543c0704150821r53bc6b33g34e0f3ad9af010a0@mail.gmail.com>
	 <6e3ae6310704152342n6148f04fvd98df5c19ab5243d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_84032_1824153.1176802968104
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Chris,
Thank you for your reply, your solution doesnt work in my case because I was
thinking of indexing more than one document in a single index and each
document representing a table in database. so if I put more than one
document some fields for a single document will be empty. something like
this:

Document:
field1             field2                field3          field4
test1             test2                 test3              --
--                  --                       test5          test3

Document:
field1             field2                field3
field4                f3f4
test1             test2                 test3
--                     ?
--                  --                       test5
test3                    ?




On 4/16/07, Chris Lu <chris.lu@gmail.com> wrote:
>
> > > > Query:
> > > >  field1:"test phrase" AND field2:"test" AND field3:field4
> > > >
> > > > in this query we said that do search where field3 is equal to
> > > > field4 ...
> > > > (and rest of the query)
> Regarding your query, I think you can simply query the database and
> create a field, like f3f4, and set it to 1 if the value of field3
> equals that of field4,
> and set it to 0 if otherwise.
>
> When you search, you can use "....AND f3f4:1..."
>
> This could be simpler than asking Lucene to do database job.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> On 4/15/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > well, let me tell you what we're going to do.
> > our information are too much. actually, we have a huge database for
> > hospitals, and their services and their patients and also pharmacy
> infos.
> >
> > just for test, we first joined some important tables and as you said
> > de-normalized them and then tried to create an index. it was about 3
> > millions documents and surprisingly, we saw that using this system we
> can
> > achieve our goal in a few seconds, however, by using SQL statements it
> took
> > more than half an hour !!! so what did we want more? we just want to
> reach
> > our result and Lucene fulfils our needs.
> >
> > but we are not going to leave the database and throw it out. we need
> Lucene
> > in some special cases. in our case, reporting from whole informatin.
> >
> > but the problem is, because there are more tables (actually there are
> more
> > than 10 database views) so we decided to categorize information
> and  create
> > a view for each category. and then index them individually.
> >
> > but we need to find some information on say, index2, where they have
> > relation with say index1
> >
> > Erick, your second way doesnt fulfil our needs because the information
> are
> > too complex. and the third one, yes we finally do that, but before that
> we
> > need to do some searching (with a complex query) on indexes so we need
> many
> > information on our indexes.
> >
> > I was thinking of building another table (table, I dont mean database
> table,
> > it can be every structure) that keeps lucene's internal ids and their
> > relations with other indexes. and I tested it, now it works fine but you
> > know this internal ids will change once we call optimize() method. so we
> > should re-create them each time we update the index. (we do it every
> other
> > week)
> >
> > so if you had provided a feature for such problem to find the relations
> > between various indexes every thing was nice.
> >
> > I know this is not an aspect for Lucene, but in such situation it would
> help
> > and save the developers and users, specially when we were able to
> disable or
> > enable that feature depend on our needs.
> >
> > lots of thanks
> >
> > On 4/15/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > well, how much data are we talking about here? If your index
> > > is already 100G, your options are much more limited than if
> > > it's 1M...
> > >
> > > Essentially, you have several choices:
> > > 1> de-normalize your data to whatever extent is "sufficient"
> > >     and index it.
> > > 2> Try to do what amount to joins. If your needs aren't too complex,
> > >      you can probably do some interesting things with
> > >      TermEnum/TermDocs, but I should emphasize the word *simple*
> > >      in the relationships or else you'll be re-inventing an RDBMS <G>.
> > > 3> You can mix-n-match. That is, use Lucene to index searchable
> > >      data and use the database for some portion of your joins.
> > >
> > > Best
> > > Erick
> > >
> > >
> > > On 4/15/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > >
> > > > Thanks Karl,
> > > > sorry I was on business vacation and could not reply soon.
> > > >
> > > > Ok, I want to index my database and search through the indexes, and
> the
> > > > tables in database are more than 50 and it's hard to joining them
> and
> > > then
> > > > indexing. so I was thinking of indexing each table in a document but
> in
> > > > one
> > > > index file and then make relations between them
> > > >
> > > > I know that Lucene is not a relational database but it really helps
> us
> > > to
> > > > improve accessing our information and even generating reports.
> > > >
> > > > Even if this feature decline the performance, still it is better
> than
> > > > generating reports from SQL statements and the speed up accessing
> > > > information. now our users are very satisfied by this. but we need
> to
> > > > create
> > > > some relationship between documents.
> > > >
> > > >
> > > > On 4/11/07, karl wettin <karl.wettin@gmail.com> wrote:
> > > > >
> > > > >
> > > > > 11 apr 2007 kl. 11.19 skrev Mohammad Norouzi:
> > > > >
> > > > > > is it possible (or a trickery way)  to search with a given query
> in
> > > > > > which we
> > > > > > can set an equality for two fields
> > > > > > for example:
> > > > > >
> > > > > > Document:
> > > > > > field1             field2                field3          field4
> > > > > >
> > > > > > Query:
> > > > > >  field1:"test phrase" AND field2:"test" AND field3:field4
> > > > > >
> > > > > > in this query we said that do search where field3 is equal to
> > > > > > field4 ...
> > > > > > (and rest of the query)
> > > > > >
> > > > > > if it is not possible, can we ask it as a new feature from
> Lucene
> > > > > > developers?
> > > > >
> > > > > It could probably be done, but would be quite an expensive query
> to
> > > > > place.
> > > > >
> > > > > However, a request like this usually tiggers questions about the
> > > > > design of an index with such needs. There is probably a better
> > > > > solution. Start by telling us about the data you have inserted to
> the
> > > > > index, and what it is you try to achieve.
> > > > >
> > > > > In essence, Lucene is not a relational database.
> > > > >
> > > > > --
> > > > > karl
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > Regards,
> > > > Mohammad
> > > >
> > >
> >
> >
> >
> > --
> > Regards,
> > M. Norouzi
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad

------=_Part_84032_1824153.1176802968104--

From java-user-return-27651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 15:29:57 2007
Return-Path: <java-user-return-27651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53512 invoked from network); 17 Apr 2007 15:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 15:29:57 -0000
Received: (qmail 15624 invoked by uid 500); 17 Apr 2007 15:29:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15582 invoked by uid 500); 17 Apr 2007 15:29:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15567 invoked by uid 99); 17 Apr 2007 15:29:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 08:29:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 08:29:48 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1430660nzh
        for <java-user@lucene.apache.org>; Tue, 17 Apr 2007 08:29:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=VZ5OZ/UHo9IzaaLGltVC/8O/8HJVNkfwKW/3ciiL0zDl92bfVuZ28VuXqu29/EEPqelnBdWpLUdddzCuBY595Ry5/uP1p5wBbb7y56Zo1/4Td6saW1O2dQM3y4LeD2RdRjX16x7uduYDhSABbcjApsIBkK3mWcuzTpO+EmX75rU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=U4ZYCBtlUyL+Y6nIxkZYSjFXPw0aeRXA9H2cJGrTt9/Fj++vqXJIktDG0lKOhI5x+fsFcySfGTGIbpDBCZInhNQQBUqNbjnDvEJo9Gp7Dk1HmUPXiJxqirgTO1G+GxECC5Anrh019WGu/DCMR1fBG1WgGnq4PWjHJpTN4oYWIgw=
Received: by 10.115.78.1 with SMTP id f1mr2469543wal.1176823764351;
        Tue, 17 Apr 2007 08:29:24 -0700 (PDT)
Received: by 10.114.108.2 with HTTP; Tue, 17 Apr 2007 08:29:24 -0700 (PDT)
Message-ID: <ae6f38f60704170829s2acdafa8vbcb654c09aece71@mail.gmail.com>
Date: Tue, 17 Apr 2007 11:29:24 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Mixing Case and Case-Insensitive Searching
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I've run into a case where we want to search for the acronym 'LET',
however this three letter word occurs very frequently in quite a
number of documents.

What I'm looking to do is a query that's case insensitive _except_ for
that specific term.

And, it appears to do so, things get very ugly, very quickly.

According to http://www.gossamer-threads.com/lists/lucene/java-user/28131?page=last
(I'm doing my homework first), it appears that one must keep a
case-sensitive and case-insensitive version in the index, if not two
separate indexes.

While this makes sense up to a point, allowing me to search one field
or the other; I'm looking for distances between words, it seems things
get far more complicated.

Because, should I store both versions and happen to know that the
tokens are the same and that their positions are identical, is there a
way do things like:

"LET organization"  (where LET is case sensitive, but part of the phrase)

"company LET"~10  (again, where LET is case sensitive, near the term
company which is case insensitive)

Would love to get some thoughts on how to go about approaching this.

Thanks,
-Walt Stoneburner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 17:06:41 2007
Return-Path: <java-user-return-27652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3372 invoked from network); 17 Apr 2007 17:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 17:06:40 -0000
Received: (qmail 50339 invoked by uid 500); 17 Apr 2007 17:06:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50305 invoked by uid 500); 17 Apr 2007 17:06:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50294 invoked by uid 99); 17 Apr 2007 17:06:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 10:06:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 10:06:32 -0700
Received: by mu-out-0910.google.com with SMTP id i10so2621268mue
        for <java-user@lucene.apache.org>; Tue, 17 Apr 2007 10:06:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=G5VgBJhufFi5/tAmzecMpDfPbbC/u8fqNaoF/RUhxwVpNFNhjUJVGT7LoUidJ0Ex4Cu7Dg/lx5eXGTEDK9S1UFuNsk7LWYPnZ8NIIXGlpXWr954VAe1vJFas1q/PNymp6YXZQ4kNsXTVpxBg9x8Mc96pF9obc1ZsxHMnBsZEdEk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HX+awr1syPT4R/dUTGw7FlZnzuG6GB57Iwe+x+X5iVLZpMUn65hSOeN3KbR5NkM1TDbqSpxvrkvvsWpYM4HsGOqpZgmZNxgGN9TIe9QCI7P8WwBCg4KR+H2+2IWYd8tGxJGZsM6JmPsPOOvJU85kPfQR1gbXToBsta++D3ocQzQ=
Received: by 10.82.134.12 with SMTP id h12mr10779959bud.1176829569999;
        Tue, 17 Apr 2007 10:06:09 -0700 (PDT)
Received: by 10.82.190.11 with HTTP; Tue, 17 Apr 2007 10:06:09 -0700 (PDT)
Message-ID: <359a92830704171006r46aea02s83af76c1cb82d2bf@mail.gmail.com>
Date: Tue, 17 Apr 2007 13:06:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing Case and Case-Insensitive Searching
In-Reply-To: <ae6f38f60704170829s2acdafa8vbcb654c09aece71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30880_16635187.1176829569948"
References: <ae6f38f60704170829s2acdafa8vbcb654c09aece71@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30880_16635187.1176829569948
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Would it work to index the upper-case LET as something else? For
instance, index it as '$let'

Now, all your searches are on one index, but you have to substitute
'$let' where you want to find LET in your query.. This won't match your
other occurrences of let...

You'll have to watch to be sure your displays are appropriate. That is,
depending upon how you store your data for display you'd have to
translate '$let' back into 'LET'......

This should also work for span queries, etc.....

This won't foul  you up if you use wildcards as long as you don't
allow the wildcards to appear in the first character position...

Best
Erick

On 4/17/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
>
> I've run into a case where we want to search for the acronym 'LET',
> however this three letter word occurs very frequently in quite a
> number of documents.
>
> What I'm looking to do is a query that's case insensitive _except_ for
> that specific term.
>
> And, it appears to do so, things get very ugly, very quickly.
>
> According to
> http://www.gossamer-threads.com/lists/lucene/java-user/28131?page=last
> (I'm doing my homework first), it appears that one must keep a
> case-sensitive and case-insensitive version in the index, if not two
> separate indexes.
>
> While this makes sense up to a point, allowing me to search one field
> or the other; I'm looking for distances between words, it seems things
> get far more complicated.
>
> Because, should I store both versions and happen to know that the
> tokens are the same and that their positions are identical, is there a
> way do things like:
>
> "LET organization"  (where LET is case sensitive, but part of the phrase)
>
> "company LET"~10  (again, where LET is case sensitive, near the term
> company which is case insensitive)
>
> Would love to get some thoughts on how to go about approaching this.
>
> Thanks,
> -Walt Stoneburner
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30880_16635187.1176829569948--

From java-user-return-27653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 17:49:26 2007
Return-Path: <java-user-return-27653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24347 invoked from network); 17 Apr 2007 17:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 17:49:25 -0000
Received: (qmail 32653 invoked by uid 500); 17 Apr 2007 17:49:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32618 invoked by uid 500); 17 Apr 2007 17:49:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32607 invoked by uid 99); 17 Apr 2007 17:49:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 10:49:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 10:49:17 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 429C15B779; Tue, 17 Apr 2007 10:48:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 369737F403
	for <java-user@lucene.apache.org>; Tue, 17 Apr 2007 10:48:56 -0700 (PDT)
Date: Tue, 17 Apr 2007 10:48:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Mixing Case and Case-Insensitive Searching
In-Reply-To: <ae6f38f60704170829s2acdafa8vbcb654c09aece71@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704171047390.5212@hal.rescomp.berkeley.edu>
References: <ae6f38f60704170829s2acdafa8vbcb654c09aece71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I've run into a case where we want to search for the acronym 'LET',
: however this three letter word occurs very frequently in quite a
: number of documents.
:
: What I'm looking to do is a query that's case insensitive _except_ for
: that specific term.

it sounds like you need to create a customized bastard stepshild of
StopFilter and LowercaseFilter ... take in a dictionary of known
capitalized acronimes in the constructor, then for each Token lowercase it
unless:
   - it's in all caps
   - it's in your acronym list.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 18:49:12 2007
Return-Path: <java-user-return-27654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52767 invoked from network); 17 Apr 2007 18:49:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 18:49:12 -0000
Received: (qmail 63360 invoked by uid 500); 17 Apr 2007 18:49:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63218 invoked by uid 500); 17 Apr 2007 18:49:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63203 invoked by uid 99); 17 Apr 2007 18:49:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 11:49:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of kirk@languagecomputer.com designates 216.84.45.195 as permitted sender)
Received: from [216.84.45.195] (HELO www.languagecomputer.com) (216.84.45.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 11:49:04 -0700
Received: from [192.168.1.79] (hfw.languagecomputer.com [216.84.45.194])
	by www.languagecomputer.com (Postfix) with ESMTP id 4A5B42B92A
	for <java-user@lucene.apache.org>; Tue, 17 Apr 2007 13:54:27 -0500 (CDT)
Message-ID: <4625168B.9070508@languagecomputer.com>
Date: Tue, 17 Apr 2007 13:48:43 -0500
From: Kirk Roberts <kirk@languagecomputer.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: MultiSearcher vs MultiReader
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I've been on this list long enough to have a vast repository of 
information about using a MultiSearcher versus an IndexSearcher that 
works on a MultiReader.  However, after looking through several hundred 
list postings, I could not find what I was looking for.  So if there is 
a posting or thread (or website, for that matter) that answers all my 
questions, please direct me there and, if so, I apologize in advance.

 From what I have read, people seem to suggest using an IndexSearcher 
initialized with a MultiReader over the use of a MultiSearcher.  This 
begs 2 questions:
1. Under what conditions is a MultiSearcher necessary/optimal?
2. Why doesn't the MultiReader implement the rather nice methods that 
the MultiSearcher has (I'm thinking specifically of subSearcher(int) and 
subDoc(int))?

Right now my application uses the MultiSearcher because I need to know 
the original (single) index the document came from as well as the Lucene 
document ID within that index (so I don't have to hold on to the entire
Lucene Document).  I can calculate both if I get the size of all the 
individual readers, and assume that the ID a MultiReader returns equals 
the original IndexReader's given ID plus the size of every IndexReader 
that precedes it (eg, if I have 3 indexes each of size 10, the Document 
that the MultiReader gives an ID of 23 to will be the 3rd Document in 
the 3rd IndexReader).  This might be safe (and indeed might be exactly 
what the MultiSearcher does), but I haven't dug into the Lucene code 
much to find out.

Currently I'm leaning to switching to a MultiReader, as performance is 
more important than having to write some extra code.  I'm just a little 
confused as to 1) why the MultiSearcher exists (as I can't seem to find 
decent documentation) and 2) how safe my above algorithm is (or if I've 
just completely missed existing functionality that does this).

Links to any detailed documentation would be greatly appreciated,

Kirk

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 18:59:37 2007
Return-Path: <java-user-return-27655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58387 invoked from network); 17 Apr 2007 18:59:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 18:59:36 -0000
Received: (qmail 88034 invoked by uid 500); 17 Apr 2007 18:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88002 invoked by uid 500); 17 Apr 2007 18:59:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87980 invoked by uid 99); 17 Apr 2007 18:59:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 11:59:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 11:59:27 -0700
Received: by ug-out-1314.google.com with SMTP id k40so216316ugc
        for <java-user@lucene.apache.org>; Tue, 17 Apr 2007 11:59:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q4nQmaMCeDdYshs007vX1Ye5HLGWqYAprS1OfW5jiYBgh4g+2wuJCf1gYQxD6JdyegMqSCUEJXDuVNBsVhsN2/MX5XvbXlbWrjJFXeDvgTkHvfWu2ZOggLGKCh2d1IkdinLNvHC+f44gpqcvqVlwtWLAIJKQuik8UDgsmzUMx3Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rvg2zHOcQTMKHQnQlkvl0fS89oWH4YFbPIRbZL6vaf1/uINZw+FvrDKVbQA3spVr10lKXCyq9jzliuJnY2wc0+S42js31VRnbRrdGnQKmuFy+vx8K+4PIZRctwOFzFjJ3sVoKwjlgYmP1QBiCbzD0y6+m8IE7tej4pYj2LH2LZ4=
Received: by 10.82.169.4 with SMTP id r4mr1593637bue.1176836345340;
        Tue, 17 Apr 2007 11:59:05 -0700 (PDT)
Received: by 10.82.190.11 with HTTP; Tue, 17 Apr 2007 11:59:05 -0700 (PDT)
Message-ID: <359a92830704171159i4f911acer18de4a41cccc80e6@mail.gmail.com>
Date: Tue, 17 Apr 2007 14:59:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing Case and Case-Insensitive Searching
In-Reply-To: <Pine.LNX.4.58.0704171047390.5212@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31481_11218065.1176836345193"
References: <ae6f38f60704170829s2acdafa8vbcb654c09aece71@mail.gmail.com>
	 <Pine.LNX.4.58.0704171047390.5212@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31481_11218065.1176836345193
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yeah, what Hoss said. That's a much more elegant solution
than I suggested. If you use the same filter for indexing and searching,
it'll all "just happen" for you.

Erick

On 4/17/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I've run into a case where we want to search for the acronym 'LET',
> : however this three letter word occurs very frequently in quite a
> : number of documents.
> :
> : What I'm looking to do is a query that's case insensitive _except_ for
> : that specific term.
>
> it sounds like you need to create a customized bastard stepshild of
> StopFilter and LowercaseFilter ... take in a dictionary of known
> capitalized acronimes in the constructor, then for each Token lowercase it
> unless:
>    - it's in all caps
>    - it's in your acronym list.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31481_11218065.1176836345193--

From java-user-return-27656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 17 22:12:37 2007
Return-Path: <java-user-return-27656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44954 invoked from network); 17 Apr 2007 22:12:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Apr 2007 22:12:24 -0000
Received: (qmail 76390 invoked by uid 500); 17 Apr 2007 22:12:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76359 invoked by uid 500); 17 Apr 2007 22:12:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76348 invoked by uid 99); 17 Apr 2007 22:12:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2007 15:12:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.37.66] (HELO web53505.mail.re2.yahoo.com) (206.190.37.66)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 17 Apr 2007 15:12:15 -0700
Received: (qmail 39232 invoked by uid 60001); 17 Apr 2007 22:11:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=X6RINDfmQtiWFhdJiFsGO/AmNZefTeqoNygAn9Oi2NASu5I5w6w7m8tKB4+9Dz6Cr5ZNGmbycJ98EWgB/e9Jv4Fv9ig2D/Jiose2+b0MH8Qfvm6RrTC5GDi2lmw8mrBN1zhzppVa9e+fo0mCbDNMQsbUTkmtlQw7IMBd0wUZvpM=;
Received: from [66.7.242.34] by web53505.mail.re2.yahoo.com via HTTP; Tue, 17 Apr 2007 15:11:54 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Tue, 17 Apr 2007 15:11:54 -0700 (PDT)
From: Craig W Conway <craigwconway@yahoo.com>
Subject: Re: Out of memory exception for big indexes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1204965193-1176847914=:38230"
Message-ID: <518447.38230.qm@web53505.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1204965193-1176847914=:38230
Content-Type: text/plain; charset=ascii

I wanted to reply on this because it seems that a few people have had similar problems and I am very pleased with the simple solution. 

Basically I re-created the index using OMIT NORMS where ever possible, as well as Field.Store.NO where ever possible. The result shrunk my index from 19GB to 4GB and eliminated my OOM errors. Performance is much better as well. My queries are still sorted and complex. I have ~4mil docs indexed.

Thank you Lucene community!

----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Friday, April 6, 2007 11:00:53 AM
Subject: Re: Out of memory exception for big indexes


: Would it be fair to say that you can expect OutOfMemory errors if you
: run complex queries? ie sorts, boosts, weights...

not intrinsicly ... the amount of memory used has more to do with the size
of hte index and the sorting done then it does with teh number of clauses
in your query (of course, having more complex clauses - like
FunctionQueries that use FieldCaches) can use more memory.

: +(pathNodeId_2976569:1^5.0 pathNodeId_2976969:1 pathNodeId_2976255:1 pathNodeId_2976571:1) +(pathClassId:1 pathClassId:346 pathClassId:314) -id:369

...the big thing that jumps out at me here is that you seem to be using
very dynamic field names for storing boolean values ... have your set the
OMIT_NORMS option on all of those fields? ... having norms makes your
index bigger, and contributes to the memory usage at query time 9and
doesn't add any benefit to a query like this )

: java.lang.OutOfMemoryError: Java heap space
: Dumping heap to java_pid4512.hprof ...
: Heap dump file created [71421503 bytes in 2.640 secs]
: Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
:         at org.apache.lucene.index.MultiReader.norms(MultiReader.java:173)

...that could indicate that norms are your problem, or you could already
have norms turned off on all but one field, and it's just the straw that
breaks the camels back ... looking at a visualization of your heap is the
only thing that's really going to tell you what is taking up all your ram.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org







__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1204965193-1176847914=:38230--

From java-user-return-27657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 14:57:55 2007
Return-Path: <java-user-return-27657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22440 invoked from network); 18 Apr 2007 14:57:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 14:57:54 -0000
Received: (qmail 83987 invoked by uid 500); 18 Apr 2007 14:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83960 invoked by uid 500); 18 Apr 2007 14:57:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83944 invoked by uid 99); 18 Apr 2007 14:57:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 07:57:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmataxo@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 07:57:44 -0700
Received: by wx-out-0506.google.com with SMTP id i29so235033wxd
        for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 07:57:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=OygE5PjNjLc80eMVeZQKF4BY4VPk9KSqCLLx3NBf2HoCmZ9pXOOD+wnKU4w6/ujLrsCOf5mpxBLCjy82R+E+sAnWu/iRSm+Vd0yb3duLRog5z4VpF/OXZWP2QE/ZT6ruPzBjR5M6AZB4z6fFgBlIakEkZXUrCYKBcL9RbKxd16o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=H8WFDnnjsg1OHxQ36F+YhR73lpQCBbtxaJsM/CbmolcplL0OUxpQa736m/XBVaXb21IyG6G3IZsM8NGDD/tzvzNyrFx/6MF4lWAZp+1QGO4tI6ZYJmqUpvDrNjFETNpYo9AhRiR1nD42SNxLuHc5vOGWHpLsyhHISsCNiWsbFUk=
Received: by 10.90.105.19 with SMTP id d19mr451940agc.1176908243354;
        Wed, 18 Apr 2007 07:57:23 -0700 (PDT)
Received: by 10.35.50.13 with HTTP; Wed, 18 Apr 2007 07:57:23 -0700 (PDT)
Message-ID: <3563fa0d0704180757w7e1807fag6d44d126a13f9db4@mail.gmail.com>
Date: Wed, 18 Apr 2007 10:57:23 -0400
From: "d m" <dmataxo@gmail.com>
To: java-user@lucene.apache.org
Subject: Merge performance
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33093_22169093.1176908243183"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33093_22169093.1176908243183
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd like to share index merge performance data and have a couple
of questions about it...

We (AXS-One, www.axsone.com) build one "master" index per day.
For backup and recovery purposes, we also build many individual
"mini" indexes from the docs added to the master index.

Should one of our master indexes become unusable (for whatever
reason - and I'm glad to say this has not yet happened), we plan to
reconstruct it by merging its mini indexes.

I've done some merge testing so we have an idea of how long it will
take to reconstruct a master index.

For testing purposes, I have created 1,000 mini indexes. Each:
  - contains 1,000 documents
  - is optimized
  - uses the compound file format

The avg doc size across the 1 million docs is: 10.8 KB

My testing has been to merge the 1,000 mini indexes to an empty
destination index. Destination index settings:

  - mergeFactor: 40
  - minMergeDocs: 10,000
  - maxMergeDocs: Integer.MAX_VALUE
  - use compound file format

Those values were obtained from some empirical (but not exhaustive)
merge testing.

In each test run I merge N mini indexes into a single destination
index. Each merge starts with an empty destination index. N increases
by 25 for each data point.

This means our test merges 25 minis to an empty index.  Then merges 50
minis to an empty index. Etc... until it merges 1,000 minis to an
empty index.

Mini indexes merged with V2.1 were indexed with V2.1.
Mini indexes merged with V2.0 were indexed with V2.0.

Hardware:
  - 64-bit
  - 4 CPUs: AMD Opteron 280, 2.41 GHz
  - 12.8 GB RAM
  - 1.63 TB disk space / 6 SCSI drives / RAID ??

Software:
  - Lucene V2.1 and V2.0
  - Java 1.6
  - Windows Server 2003, SP 1

I did tests with:
  - Lucene 2.1 using addIndexesNoOptimize() - 2 identical runs
  - Lucene 2.1 using addIndexes() - 1 run
  - Lucene 2.0 using addIndexes() - 1 run

The recorded merge times (in seconds) include a final call to
optimize() the destination index after returning from
addIndexesNoOptimize() or addIndexes().

I've included the test data below. (If you'd like, I can email an
Excel version of the data with a graph.)

A few things caught my attention (seen easily when graphing "Indexes"
vs "Merge Time (secs)"):

1. The runs (3 & 4) using addIndexes() show a relatively smooth
   increase in merge times (as expected).

2. The 2.1 runs (1 & 2) using addIndexesNoOptimize() show multiple
   spikes in times for a particular merge count - with the next merge
   counts running faster. The pattern of spikes was identical in both
   runs.

   The most notable spike occurs in the addIndexesNoOptimize() merge
   of 900 indexes with took 44:26 (mm:ss) in one run and 43:37 in the
   other. In both runs the merge times for 925, 950, 975, and 1000
   indexes took less time than the 900 merge.

3. Overall, using addIndexes() appears to be faster than
   addIndexesNoOptimize().

4. V2.0 addIndexes() performs better than V2.1 addIndexes(). Look at
   the very last row of data below - it is the merge rate (in
   docs/min) for each test run.

Can someone explain what might be happening to cause the spikes in 2.1,
not seen in 2.0?

Any thoughts on 2.0 merging faster than 2.1?

Thanks, david.


Run 1: Lucene 2.1 / addIndexesNoOptimize()
Run 2: Repeat Run 1
Run 3: Lucene 2.1 / addIndexes()
Run 4: Lucene 2.0 / addIndexes()
All runs include a final call to optimize()

      Merge Times (seconds)
Numb  Run   Run   Run   Run
Idxs  1     2     3     4
25    39    59    44    38
50    73    93    83    81
75    113   131   128   120
100   147   169   163   154
125   179   198   193   220
150   222   241   227   231
175   246   261   249   239
200   266   273   269   266
225   297   301   288   283
250   323   325   312   308
275   461   471   343   337
300   393   388   376   364
325   424   423   410   401
350   465   467   445   438
375   498   504   475   466
400   527   528   516   503
425   586   567   608   587
450   677   656   703   675
475   876   880   786   750
500   841   832   872   821
525   920   914   937   924
550   1213  1206  1038  995
575   1094  1065  1137  1069
600   1250  1207  1275  1189
625   1367  1337  1385  1315
650   1473  1433  1454  1396
675   1600  1575  1499  1468
700   1570  1552  1563  1516
725   1605  1587  1602  1581
750   1852  1808  1687  1627
775   1761  1719  1732  1668
800   1829  1821  1876  1753
825   2167  2138  1882  1832
850   2045  2042  2057  1887
875   2169  2207  2101  2025
900   2666  2617  2138  2014
925   2174  2218  2206  2057
950   2390  2391  2193  2121
975   2304  2322  2247  2149
1000  2321  2322  2321  2227

20500 43423 43248 41820 40095   <- Totals
      28326 28441 29412 30667   <- Merge rate: Docs per minute

------=_Part_33093_22169093.1176908243183--

From java-user-return-27658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 16:17:45 2007
Return-Path: <java-user-return-27658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65072 invoked from network); 18 Apr 2007 16:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 16:17:44 -0000
Received: (qmail 9662 invoked by uid 500); 18 Apr 2007 16:17:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9637 invoked by uid 500); 18 Apr 2007 16:17:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9626 invoked by uid 99); 18 Apr 2007 16:17:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 09:17:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 09:17:35 -0700
Received: by ug-out-1314.google.com with SMTP id k40so390584ugc
        for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 09:17:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cZllxrvciwlsfhtUPmG840xTbTbTEiA6Wn0ljXTQC0D5Lhj01MSUfdT8gq4YQSHxxO/QiZiGlLF9jlLTYuZmzKRqS1OOlOrvH64niqf0QSFk/AsKdVNMlyayMb1F+vwBbkSW+241EiuREGlHkQsmEbOSJZPFltlnnk4il0RkVBQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PIW6rZQvBpxJ/HXgylzCHBmpKM6w8eGlTtjpiKdMuIGeYCowcT6kpKzaKiWVsaISY5VdGNoy+H3P5oPheqqWRah6BEPTRKyDn8FiDzMsUu2vrqFjpSLzmIg7ny3J3ovYKY+IoqY5BzGZFLJ46+shQaili6d+HAxUlNgSAmENKo0=
Received: by 10.82.184.2 with SMTP id h2mr1007981buf.1176913034145;
        Wed, 18 Apr 2007 09:17:14 -0700 (PDT)
Received: by 10.82.190.11 with HTTP; Wed, 18 Apr 2007 09:17:14 -0700 (PDT)
Message-ID: <359a92830704180917x5be8a37fle5babc64464878ab@mail.gmail.com>
Date: Wed, 18 Apr 2007 12:17:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merge performance
In-Reply-To: <3563fa0d0704180757w7e1807fag6d44d126a13f9db4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37772_28965567.1176913034073"
References: <3563fa0d0704180757w7e1807fag6d44d126a13f9db4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37772_28965567.1176913034073
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This *may* be relevant, I haven't needed to investigate
it yet...

 http://issues.apache.org/jira/browse/LUCENE-845

Also, see the thread titled
"MergeFactor and MaxBufferedDocs value should ...?" for an
interesting discussion of how to optimize indexing, although
I'm not sure the notion of using IndexWriter.ramSizeInBytes
is of too much use when merging indexes....

Erick

On 4/18/07, d m <dmataxo@gmail.com> wrote:
>
> I'd like to share index merge performance data and have a couple
> of questions about it...
>
> We (AXS-One, www.axsone.com) build one "master" index per day.
> For backup and recovery purposes, we also build many individual
> "mini" indexes from the docs added to the master index.
>
> Should one of our master indexes become unusable (for whatever
> reason - and I'm glad to say this has not yet happened), we plan to
> reconstruct it by merging its mini indexes.
>
> I've done some merge testing so we have an idea of how long it will
> take to reconstruct a master index.
>
> For testing purposes, I have created 1,000 mini indexes. Each:
>   - contains 1,000 documents
>   - is optimized
>   - uses the compound file format
>
> The avg doc size across the 1 million docs is: 10.8 KB
>
> My testing has been to merge the 1,000 mini indexes to an empty
> destination index. Destination index settings:
>
>   - mergeFactor: 40
>   - minMergeDocs: 10,000
>   - maxMergeDocs: Integer.MAX_VALUE
>   - use compound file format
>
> Those values were obtained from some empirical (but not exhaustive)
> merge testing.
>
> In each test run I merge N mini indexes into a single destination
> index. Each merge starts with an empty destination index. N increases
> by 25 for each data point.
>
> This means our test merges 25 minis to an empty index.  Then merges 50
> minis to an empty index. Etc... until it merges 1,000 minis to an
> empty index.
>
> Mini indexes merged with V2.1 were indexed with V2.1.
> Mini indexes merged with V2.0 were indexed with V2.0.
>
> Hardware:
>   - 64-bit
>   - 4 CPUs: AMD Opteron 280, 2.41 GHz
>   - 12.8 GB RAM
>   - 1.63 TB disk space / 6 SCSI drives / RAID ??
>
> Software:
>   - Lucene V2.1 and V2.0
>   - Java 1.6
>   - Windows Server 2003, SP 1
>
> I did tests with:
>   - Lucene 2.1 using addIndexesNoOptimize() - 2 identical runs
>   - Lucene 2.1 using addIndexes() - 1 run
>   - Lucene 2.0 using addIndexes() - 1 run
>
> The recorded merge times (in seconds) include a final call to
> optimize() the destination index after returning from
> addIndexesNoOptimize() or addIndexes().
>
> I've included the test data below. (If you'd like, I can email an
> Excel version of the data with a graph.)
>
> A few things caught my attention (seen easily when graphing "Indexes"
> vs "Merge Time (secs)"):
>
> 1. The runs (3 & 4) using addIndexes() show a relatively smooth
>    increase in merge times (as expected).
>
> 2. The 2.1 runs (1 & 2) using addIndexesNoOptimize() show multiple
>    spikes in times for a particular merge count - with the next merge
>    counts running faster. The pattern of spikes was identical in both
>    runs.
>
>    The most notable spike occurs in the addIndexesNoOptimize() merge
>    of 900 indexes with took 44:26 (mm:ss) in one run and 43:37 in the
>    other. In both runs the merge times for 925, 950, 975, and 1000
>    indexes took less time than the 900 merge.
>
> 3. Overall, using addIndexes() appears to be faster than
>    addIndexesNoOptimize().
>
> 4. V2.0 addIndexes() performs better than V2.1 addIndexes(). Look at
>    the very last row of data below - it is the merge rate (in
>    docs/min) for each test run.
>
> Can someone explain what might be happening to cause the spikes in 2.1,
> not seen in 2.0?
>
> Any thoughts on 2.0 merging faster than 2.1?
>
> Thanks, david.
>
>
> Run 1: Lucene 2.1 / addIndexesNoOptimize()
> Run 2: Repeat Run 1
> Run 3: Lucene 2.1 / addIndexes()
> Run 4: Lucene 2.0 / addIndexes()
> All runs include a final call to optimize()
>
>       Merge Times (seconds)
> Numb  Run   Run   Run   Run
> Idxs  1     2     3     4
> 25    39    59    44    38
> 50    73    93    83    81
> 75    113   131   128   120
> 100   147   169   163   154
> 125   179   198   193   220
> 150   222   241   227   231
> 175   246   261   249   239
> 200   266   273   269   266
> 225   297   301   288   283
> 250   323   325   312   308
> 275   461   471   343   337
> 300   393   388   376   364
> 325   424   423   410   401
> 350   465   467   445   438
> 375   498   504   475   466
> 400   527   528   516   503
> 425   586   567   608   587
> 450   677   656   703   675
> 475   876   880   786   750
> 500   841   832   872   821
> 525   920   914   937   924
> 550   1213  1206  1038  995
> 575   1094  1065  1137  1069
> 600   1250  1207  1275  1189
> 625   1367  1337  1385  1315
> 650   1473  1433  1454  1396
> 675   1600  1575  1499  1468
> 700   1570  1552  1563  1516
> 725   1605  1587  1602  1581
> 750   1852  1808  1687  1627
> 775   1761  1719  1732  1668
> 800   1829  1821  1876  1753
> 825   2167  2138  1882  1832
> 850   2045  2042  2057  1887
> 875   2169  2207  2101  2025
> 900   2666  2617  2138  2014
> 925   2174  2218  2206  2057
> 950   2390  2391  2193  2121
> 975   2304  2322  2247  2149
> 1000  2321  2322  2321  2227
>
> 20500 43423 43248 41820 40095   <- Totals
>       28326 28441 29412 30667   <- Merge rate: Docs per minute
>

------=_Part_37772_28965567.1176913034073--

From java-user-return-27659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 16:26:04 2007
Return-Path: <java-user-return-27659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70062 invoked from network); 18 Apr 2007 16:26:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 16:26:03 -0000
Received: (qmail 41345 invoked by uid 500); 18 Apr 2007 16:26:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41311 invoked by uid 500); 18 Apr 2007 16:26:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41300 invoked by uid 99); 18 Apr 2007 16:26:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 09:26:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of willmeeabo@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 18 Apr 2007 09:25:54 -0700
Received: (qmail 8192 invoked by uid 0); 18 Apr 2007 16:25:33 -0000
Received: from 160.39.244.191 by www083.gmx.net with HTTP;
 Wed, 18 Apr 2007 18:25:33 +0200 (CEST)
Content-Type: text/plain; charset="us-ascii"
Date: Wed, 18 Apr 2007 18:25:33 +0200
From: "William Mee" <willmeeabo@gmx.net>
Message-ID: <20070418162533.22240@gmx.net>
MIME-Version: 1.0
Subject: adding a field at index-time
To: java-user@lucene.apache.org
X-Authenticated: #13561965
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX1/gQkQXQMrgRsQdREjzTbmWM/gH6rrQhc801psJLU
 jqXBEGE1zY5PF3cQqf6nlRRZbNxXMUQOMzFA== 
Content-Transfer-Encoding: 7bit
X-GMX-UID: EytEEvcobXB+UQiC/DQ2CRMiLyUmZQiO
X-Virus-Checked: Checked by ClamAV on apache.org

I'd like to add metadata which I get *after* indexing a document's contents to the index. To be more specific: I'm implementing shingling (detection of near-duplicate documents) and want to add the document fingerprint (which is based on the sequence of tokens) to the index.

There doesn't seem to be an easy way to do this in the Lucene API - in particular, I can't easily update a document which is already indexed. The only way I could get this information *before* adding a document to an index is to create a token stream manually (and then have this happen all over again when the document is indexed). This isn't a satisfying solution. Does anyone have any suggestions of how I could get the fingerprint information into the index? I'd appreciate any input. Thanks!

- Will
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 16:32:54 2007
Return-Path: <java-user-return-27660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73510 invoked from network); 18 Apr 2007 16:32:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 16:32:53 -0000
Received: (qmail 60068 invoked by uid 500); 18 Apr 2007 16:32:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60031 invoked by uid 500); 18 Apr 2007 16:32:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60020 invoked by uid 99); 18 Apr 2007 16:32:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 09:32:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 09:32:43 -0700
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id 5EE7E4FC52E
	for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 09:32:14 -0700 (PDT)
X-Quarantine-ID: <JroawSKpHcgC>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JroawSKpHcgC for <java-user@lucene.apache.org>;
	Wed, 18 Apr 2007 09:31:41 -0700 (PDT)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 740114FC50F
	for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 09:31:41 -0700 (PDT)
Subject: RE: Merge performance
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 18 Apr 2007 09:31:58 -0700
Content-class: urn:content-classes:message
Message-ID: <392521EA2692A2418DF48C331E61E3250E7252@professorville.windows.esseff.org>
In-Reply-To: <359a92830704180917x5be8a37fle5babc64464878ab@mail.gmail.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Merge performance
Thread-Index: AceB1Sjx7gCezuzuSYm0UePUefCt8AAAUXGg
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Yup, 845 is relevant, as is 847. I haven't had time to digest all that
David wrote yet, but I'm starting. It's particularly relevant because
before I get to the point of making 847 committable, I need a way of
testing merge performance (the factoring in 847 proposes to simplify the
API slightly, so the merge algorithm would be slightly modified). The
stuff David has written gives me some ideas for benchmark tests so that
we'll be able to test multiple merge policies.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Wednesday, April 18, 2007 9:17 AM
To: java-user@lucene.apache.org
Subject: Re: Merge performance

This *may* be relevant, I haven't needed to investigate
it yet...

 http://issues.apache.org/jira/browse/LUCENE-845

Also, see the thread titled
"MergeFactor and MaxBufferedDocs value should ...?" for an
interesting discussion of how to optimize indexing, although
I'm not sure the notion of using IndexWriter.ramSizeInBytes
is of too much use when merging indexes....

Erick

On 4/18/07, d m <dmataxo@gmail.com> wrote:
>
> I'd like to share index merge performance data and have a couple
> of questions about it...
>
> We (AXS-One, www.axsone.com) build one "master" index per day.
> For backup and recovery purposes, we also build many individual
> "mini" indexes from the docs added to the master index.
>
> Should one of our master indexes become unusable (for whatever
> reason - and I'm glad to say this has not yet happened), we plan to
> reconstruct it by merging its mini indexes.
>
> I've done some merge testing so we have an idea of how long it will
> take to reconstruct a master index.
>
> For testing purposes, I have created 1,000 mini indexes. Each:
>   - contains 1,000 documents
>   - is optimized
>   - uses the compound file format
>
> The avg doc size across the 1 million docs is: 10.8 KB
>
> My testing has been to merge the 1,000 mini indexes to an empty
> destination index. Destination index settings:
>
>   - mergeFactor: 40
>   - minMergeDocs: 10,000
>   - maxMergeDocs: Integer.MAX_VALUE
>   - use compound file format
>
> Those values were obtained from some empirical (but not exhaustive)
> merge testing.
>
> In each test run I merge N mini indexes into a single destination
> index. Each merge starts with an empty destination index. N increases
> by 25 for each data point.
>
> This means our test merges 25 minis to an empty index.  Then merges 50
> minis to an empty index. Etc... until it merges 1,000 minis to an
> empty index.
>
> Mini indexes merged with V2.1 were indexed with V2.1.
> Mini indexes merged with V2.0 were indexed with V2.0.
>
> Hardware:
>   - 64-bit
>   - 4 CPUs: AMD Opteron 280, 2.41 GHz
>   - 12.8 GB RAM
>   - 1.63 TB disk space / 6 SCSI drives / RAID ??
>
> Software:
>   - Lucene V2.1 and V2.0
>   - Java 1.6
>   - Windows Server 2003, SP 1
>
> I did tests with:
>   - Lucene 2.1 using addIndexesNoOptimize() - 2 identical runs
>   - Lucene 2.1 using addIndexes() - 1 run
>   - Lucene 2.0 using addIndexes() - 1 run
>
> The recorded merge times (in seconds) include a final call to
> optimize() the destination index after returning from
> addIndexesNoOptimize() or addIndexes().
>
> I've included the test data below. (If you'd like, I can email an
> Excel version of the data with a graph.)
>
> A few things caught my attention (seen easily when graphing "Indexes"
> vs "Merge Time (secs)"):
>
> 1. The runs (3 & 4) using addIndexes() show a relatively smooth
>    increase in merge times (as expected).
>
> 2. The 2.1 runs (1 & 2) using addIndexesNoOptimize() show multiple
>    spikes in times for a particular merge count - with the next merge
>    counts running faster. The pattern of spikes was identical in both
>    runs.
>
>    The most notable spike occurs in the addIndexesNoOptimize() merge
>    of 900 indexes with took 44:26 (mm:ss) in one run and 43:37 in the
>    other. In both runs the merge times for 925, 950, 975, and 1000
>    indexes took less time than the 900 merge.
>
> 3. Overall, using addIndexes() appears to be faster than
>    addIndexesNoOptimize().
>
> 4. V2.0 addIndexes() performs better than V2.1 addIndexes(). Look at
>    the very last row of data below - it is the merge rate (in
>    docs/min) for each test run.
>
> Can someone explain what might be happening to cause the spikes in
2.1,
> not seen in 2.0?
>
> Any thoughts on 2.0 merging faster than 2.1?
>
> Thanks, david.
>
>
> Run 1: Lucene 2.1 / addIndexesNoOptimize()
> Run 2: Repeat Run 1
> Run 3: Lucene 2.1 / addIndexes()
> Run 4: Lucene 2.0 / addIndexes()
> All runs include a final call to optimize()
>
>       Merge Times (seconds)
> Numb  Run   Run   Run   Run
> Idxs  1     2     3     4
> 25    39    59    44    38
> 50    73    93    83    81
> 75    113   131   128   120
> 100   147   169   163   154
> 125   179   198   193   220
> 150   222   241   227   231
> 175   246   261   249   239
> 200   266   273   269   266
> 225   297   301   288   283
> 250   323   325   312   308
> 275   461   471   343   337
> 300   393   388   376   364
> 325   424   423   410   401
> 350   465   467   445   438
> 375   498   504   475   466
> 400   527   528   516   503
> 425   586   567   608   587
> 450   677   656   703   675
> 475   876   880   786   750
> 500   841   832   872   821
> 525   920   914   937   924
> 550   1213  1206  1038  995
> 575   1094  1065  1137  1069
> 600   1250  1207  1275  1189
> 625   1367  1337  1385  1315
> 650   1473  1433  1454  1396
> 675   1600  1575  1499  1468
> 700   1570  1552  1563  1516
> 725   1605  1587  1602  1581
> 750   1852  1808  1687  1627
> 775   1761  1719  1732  1668
> 800   1829  1821  1876  1753
> 825   2167  2138  1882  1832
> 850   2045  2042  2057  1887
> 875   2169  2207  2101  2025
> 900   2666  2617  2138  2014
> 925   2174  2218  2206  2057
> 950   2390  2391  2193  2121
> 975   2304  2322  2247  2149
> 1000  2321  2322  2321  2227
>
> 20500 43423 43248 41820 40095   <- Totals
>       28326 28441 29412 30667   <- Merge rate: Docs per minute
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 16:37:54 2007
Return-Path: <java-user-return-27661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75046 invoked from network); 18 Apr 2007 16:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 16:37:53 -0000
Received: (qmail 71258 invoked by uid 500); 18 Apr 2007 16:37:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71223 invoked by uid 500); 18 Apr 2007 16:37:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71205 invoked by uid 99); 18 Apr 2007 16:37:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 09:37:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.90.182 as permitted sender)
Received: from [66.249.90.182] (HELO ik-out-1112.google.com) (66.249.90.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 09:37:42 -0700
Received: by ik-out-1112.google.com with SMTP id b35so247228ika
        for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 09:37:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=UMKP/UwyITtV5+YC2rzyDHDiN5a5XC4QWEjevE3mBCINHlBFZ8wjy7GMAALqDe/El8wN+9kbomOYfyLOTt2Ylliv2kG5zN6DTGVwat6IvD8URlJnqQ+g6Tu0UEp2OlEPKJ5/NRK/CwiFHz1DCYsrGVIoDD3uUL1CxKU3xMG9udY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=TNVmeEOCsmaEAYMxo5xVSTe1OPSTgzXzL67+ldKXu1Psw8wtHnuusEZWLiVGM30+yR5l7AqpzUCMaQqbnJIPaEG6d0vHAfkX2ziuXyfnMJRqi9ycAqkMkcga8KaRPceuKu6TshkUy8mLTxGkUjjhweIzH7JWQoAp/if2PF+G9W8=
Received: by 10.82.120.14 with SMTP id s14mr1106994buc.1176914241190;
        Wed, 18 Apr 2007 09:37:21 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id y2sm5037mug.2007.04.18.09.37.15;
        Wed, 18 Apr 2007 09:37:17 -0700 (PDT)
In-Reply-To: <20070418162533.22240@gmx.net>
References: <20070418162533.22240@gmx.net>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8B4FD3BA-E97E-4D25-B13E-99F68D65F081@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: adding a field at index-time
Date: Wed, 18 Apr 2007 18:36:59 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


18 apr 2007 kl. 18.25 skrev William Mee:

> The only way I could get this information *before* adding a  
> document to an index is to create a token stream manually (and then  
> have this happen all over again when the document is indexed). This  
> isn't a satisfying solution.

Why is it not a satisfying solution? Is tokenization really such a  
burdon to your system? Is your CPU at 100% at all times? Are you  
really adding that many documents to you index?

One solution would be to add the document in a contrib/memory index,  
do your secondary analysis, update the document and then add it to  
your primary index if applicable.

Another solution would be to implement pre-analyzed fields. There is  
an old outdated patch of mine that does that, <https:// 
issues.apache.org/jira/browse/LUCENE-580>.

-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 16:45:52 2007
Return-Path: <java-user-return-27662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78350 invoked from network); 18 Apr 2007 16:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 16:45:51 -0000
Received: (qmail 80939 invoked by uid 500); 18 Apr 2007 16:45:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80909 invoked by uid 500); 18 Apr 2007 16:45:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80894 invoked by uid 99); 18 Apr 2007 16:45:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 09:45:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.198.207] (HELO smtp108.sbc.mail.mud.yahoo.com) (68.142.198.207)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 18 Apr 2007 09:45:42 -0700
Received: (qmail 15168 invoked from network); 18 Apr 2007 16:45:17 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@75.45.84.119 with plain)
  by smtp108.sbc.mail.mud.yahoo.com with SMTP; 18 Apr 2007 16:45:15 -0000
X-YMail-OSG: oN7TTwoVM1nvj8PEdkpyvFOI1LhT_58MjKaMtI9AcIz7_Zw5fjZVb7uMlCKPjrLHmyI2ZmX1YCfi5Jorsl1fCD53jPO.3vFDjAhfEn9II.urATvPtqU-
Message-ID: <46264B1D.5090906@curtin.com>
Date: Wed, 18 Apr 2007 12:45:17 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge performance
References: <3563fa0d0704180757w7e1807fag6d44d126a13f9db4@mail.gmail.com>
In-Reply-To: <3563fa0d0704180757w7e1807fag6d44d126a13f9db4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

d m wrote:

> I'd like to share index merge performance data and have a couple
> of questions about it...
> 
> We (AXS-One, www.axsone.com) build one "master" index per day.
> For backup and recovery purposes, we also build many individual
> "mini" indexes from the docs added to the master index.
> 
> Should one of our master indexes become unusable (for whatever
> reason - and I'm glad to say this has not yet happened), we plan to
> reconstruct it by merging its mini indexes.

The possible merge bug notwithstanding, let's take a step back in 
abstraction:  are you sure the relatively-complex iterative merge 
process you've described buys you anything over a simple 
backup-the-whole-index approach?  Or a 
backup-the-source-data-and-reindex approach?

Merging is I/O intensive, and the scheme you've outlined is re-reading 
and re-writing all the index data several times anyway -- it might not 
be saving you much over a full reindex.  Since the scenario you're 
trying to protect against is a very rare occurrence (so far at least), 
would it be better to spend your development time on improving the 
application than devising (and debugging, and testing, ...) a 
complicated backup and recovery scheme?

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 17:13:13 2007
Return-Path: <java-user-return-27663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88191 invoked from network); 18 Apr 2007 17:13:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 17:13:13 -0000
Received: (qmail 39221 invoked by uid 500); 18 Apr 2007 17:13:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39190 invoked by uid 500); 18 Apr 2007 17:13:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39179 invoked by uid 99); 18 Apr 2007 17:13:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 10:13:12 -0700
X-ASF-Spam-Status: No, hits=-13.0 required=10.0
	tests=ENV_AND_HDR_SPF_MATCH,HTML_MESSAGE,SPF_PASS,USER_IN_DEF_SPF_WL
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of breslin@amazon.com designates 207.171.190.55 as permitted sender)
Received: from [207.171.190.55] (HELO smtp-fw-0102.amazon.com) (207.171.190.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 10:13:05 -0700
Received: from smtp-in-4102.sea5.amazon.com ([10.248.133.41])
  by smtp-fw-0102.amazon.com with ESMTP; 18 Apr 2007 17:12:45 +0000
X-IronPort-AV: i="4.14,423,1170633600"; 
   d="scan'208,217"; a="101821185:sNHT90781208"
Received: from exchg-sea5-01.ant.amazon.com (exchg-sea5-01.sea5.amazon.com [10.248.187.31])
	by smtp-in-4102.sea5.amazon.com (8.12.11/8.12.10) with ESMTP id l3IHCiPE018116
	for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 17:12:45 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C781DC.C7D30787"
Subject: Job Opportunity at Amazon.com (Seattle)
Date: Wed, 18 Apr 2007 10:12:44 -0700
Message-ID: <9DEA289A2F40B94C8595F5F088F1847504BC4F3E@exchg-sea5-01.ant.amazon.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Job Opportunity at Amazon.com (Seattle)
Thread-Index: AceB3MdsoEIkeoOPT1u0ZyqlesXMvw==
From: "Breslin, Dan" <breslin@amazon.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C781DC.C7D30787
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Amazon.com's Darwin team is looking for exceptional software engineers
to develop algorithms and build systems to automatically detect
duplicate products for sale in the Amazon.com catalog.=20

Merchants on Amazon.com provide information about the products they want
to sell. Amazon attempts to match these product data submissions to
items in its catalog so that it can display offers for the same product
on a single page.  Poorly structured or incomplete data makes this
problem very challenging and often results in duplicate products getting
created in the catalog.  These duplicate products are shown in search
results and end up confusing customers, leading to a bad customer
experience. The Darwin team detects these duplicate products in the
Amazon.com catalog using an innovative mix of Information Retrieval,
Data Mining and Text Analysis algorithms and human intelligence
harnessed via the Amazon Mechanical Turk. We then automatically merge
products detected as duplicates together, improving customer experience
and the quality of the catalog.

We are a highly-motivated, co-operative and fun loving team who thrive
on solving challenging problems with innovation. As part of this team
you will be analyzing data, developing new algorithms, building
large-scale distributed software systems in Java using open source
technologies such as Apache Lucene and JBoss and other Amazon.com
proprietary technologies.=20

Qualifications:=20

The ideal candidate will have the following qualifications:=20

=20

1.                  Advanced degree in Computer Science, Math or related
field with 2+ years of experience.

2.                  Past experience in at least one of the following
areas - Search, Data Mining, Text Analysis or Machine Learning.=20

3.                  Desire to analyze data while developing solutions to
problems.=20

4.                  Strong desire to build high-performance,
highly-available and scalable distributed systems.=20

5.                  Strong design and coding skills in Java/C++ on Unix
Platforms.=20

6.                  Familiarity with Perl and a good understanding of
SQL.

7.                  Be highly innovative, flexible and self-directed.=20

8.                  Excellent written and verbal communication skills.=20

Full-time opportunity at Amazon.com located in Seattle, WA.=20

------_=_NextPart_001_01C781DC.C7D30787--

From java-user-return-27664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 17:16:12 2007
Return-Path: <java-user-return-27664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88989 invoked from network); 18 Apr 2007 17:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 17:16:11 -0000
Received: (qmail 47780 invoked by uid 500); 18 Apr 2007 17:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47750 invoked by uid 500); 18 Apr 2007 17:16:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47739 invoked by uid 99); 18 Apr 2007 17:16:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 10:16:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.40 as permitted sender)
Received: from [206.46.252.40] (HELO vms040pub.verizon.net) (206.46.252.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 10:16:02 -0700
Received: from dorthy ([72.73.131.221])
 by vms040.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JGP008AGEM0UA81@vms040.mailsrvcs.net> for
 java-user@lucene.apache.org; Wed, 18 Apr 2007 12:15:37 -0500 (CDT)
Date: Wed, 18 Apr 2007 12:15:54 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Newbie needs help "addField"
To: <java-user@lucene.apache.org>
Message-id: <004501c781dd$39442030$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, I have been using Lucene "out of the box" since 1.4.3, wonderful full 
text engine, I love it.

But I can't use it "out of the box" any more, I am going to have to write 
some code (Oh no! Mr Bill.). I am fairly certain that the code needed will 
be trivial, but I am unfamiliar with Lucene's API and certainly could use 
some good advice. Maybe even a few sample lines of code J

The documents I am indexing into Lucene all have an integer unique ID 
(21345). This ID is not and will not be in the document context. But I need 
to the able to retrieve from Lucene the document ID. I know the document ID 
at index time so I can tell the indexer what the ID is except I do not know 
how to do that. Reading faq/wiki it seems that I can define a field called 
documentID and add that to the index but I can not find any sample code to 
do this that I could use as a guide. If some could show me how to use fields 
add/retrieve (assuming that is the correct way to go) I would greatly 
appreciate it.



thanks in advance jim s


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 17:28:58 2007
Return-Path: <java-user-return-27665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92241 invoked from network); 18 Apr 2007 17:28:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 17:28:56 -0000
Received: (qmail 66956 invoked by uid 500); 18 Apr 2007 17:28:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66915 invoked by uid 500); 18 Apr 2007 17:28:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66899 invoked by uid 99); 18 Apr 2007 17:28:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 10:28:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 10:28:48 -0700
Received: by mu-out-0910.google.com with SMTP id i10so285392mue
        for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 10:28:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=VClq8+NmVx3eiRO2HqEO7tseY6waTRl6027zK5KIujs06N6QInh0kAkOmQ5J0/uYpPu3O99MfzAnndidCs4FEwxHNrZYkzTYUojFfTjldoDtW8punxLpBQM7pTaKI2zmFD7usCePM/LwQD4O56RsDSVic1brx4/lfEcjhQJ+Yo4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=hXYOgIJoRxpVR6JUJ2//bKCzsibSHO1GCV6k+gogAI4A55CnvlzMGG9We1jJFEd+r2aSwZ58s0cjVQTx23poQD1YWTRJCq6VWfAoBv6CPLH6W4poLkgfNEvuF1K+Q/1fnlmKGpsftWIUcpqfc6g76pvJUC0ntddfuDBqsvYX4ag=
Received: by 10.82.184.2 with SMTP id h2mr1134110buf.1176917306385;
        Wed, 18 Apr 2007 10:28:26 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id u9sm219170muf.2007.04.18.10.28.22;
        Wed, 18 Apr 2007 10:28:24 -0700 (PDT)
In-Reply-To: <004501c781dd$39442030$2e01a8c0@dorthy>
References: <004501c781dd$39442030$2e01a8c0@dorthy>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0C99D00A-DC8A-4252-836B-D4FE35AD28A7@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Newbie needs help "addField"
Date: Wed, 18 Apr 2007 19:28:09 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


18 apr 2007 kl. 19.15 skrev jim shirreffs:

> The documents I am indexing into Lucene all have an integer unique  
> ID (21345). This ID is not and will not be in the document context.  
> But I need to the able to retrieve from Lucene the document ID. I  
> know the document ID at index time so I can tell the indexer what  
> the ID is except I do not know how to do that. Reading faq/wiki it  
> seems that I can define a field called documentID and add that to  
> the index but I can not find any sample code to do this that I  
> could use as a guide. If some could show me how to use fields add/ 
> retrieve (assuming that is the correct way to go) I would greatly  
> appreciate it.

You will have to do something like this (dry-coded and not tested):

List<YourBusinessObject> ybos = ...
IndexWriter iw = ...

for (YourBusinessObject ybo : ybos) {
   Document d = new Document();
   d.add(new Field("documentID", String.valueOf(ybo.getID()),  
Field.Store.YES, Field.Index.YES));
   d.add(new Field("title", ybo.getTitle(), Field.Store.NO,  
Field.Index.YES));
   d.add(new Field("content", ybo.getDescription(), Field.Store.NO,  
Field.Index.YES));
   iw.add(d);
}

iw.close();

You will now be able to retreive the stored value of field docuemntID  
from documents in your index.


Hope this helps.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 17:41:14 2007
Return-Path: <java-user-return-27666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95208 invoked from network); 18 Apr 2007 17:41:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 17:41:13 -0000
Received: (qmail 97641 invoked by uid 500); 18 Apr 2007 17:41:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97610 invoked by uid 500); 18 Apr 2007 17:41:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97599 invoked by uid 99); 18 Apr 2007 17:41:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 10:41:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.145 as permitted sender)
Received: from [32.97.182.145] (HELO e5.ny.us.ibm.com) (32.97.182.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 10:41:04 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e5.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l3IHehXJ008203
	for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 13:40:43 -0400
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3IHehYF392406
	for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 13:40:43 -0400
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3IHehZl009214
	for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 13:40:43 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3IHehWr009197
	for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 13:40:43 -0400
In-Reply-To: <004501c781dd$39442030$2e01a8c0@dorthy>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Newbie needs help "addField"
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF9769C33B.3E975CCA-ON852572C1.006059FF-852572C1.00611C4B@us.ibm.com>
Date: Wed, 18 Apr 2007 13:40:44 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M4_03042007|March 04, 2007) at
 04/18/2007 13:40:45,
	Serialize complete at 04/18/2007 13:40:45
Content-Type: multipart/alternative; boundary="=_alternative 00611BE7852572C1_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00611BE7852572C1_=
Content-Type: text/plain; charset="US-ASCII"

I'm not sure I understand how you are using Lucene without writing code, 
but here goes
(NOT tested)
String id = "123"; // this is the identifier
String text = "this is some document text";
doc.add(new org.apache.lucene.document.Field("id",id, 
org.apache.lucene.document.Field.Store.YES,
        org.apache.lucene.document.Field.Index.UN_TOKENIZED));
doc.add(new org.apache.lucene.document.Field("text",text, 
org.apache.lucene.document.Field.Store.NO,
        org.apache.lucene.document.Field.Index.TOKENIZED));
iwriter.addDocument(doc); //iwriter is the indexWriter

The id gets stored in a field called "id", and the text in a field called 
"text"

Then when you search you can
IndexReader indexReader = IndexReader.open(directory);
IndexSearcher isearcher = new IndexSearcher(directory);
QueryParser parser = new QueryParser("text", analyzer);
String term = "searchterm";
Query query = parser.parse(term);
Hits hits = isearcher.search(query);

for (int i=0; i< hits.length(); i++) {
  Document hitDoc = hits.doc(i);
  String id = hitDoc.get("id");
}

Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 00611BE7852572C1_=--

From java-user-return-27667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 20:09:01 2007
Return-Path: <java-user-return-27667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41702 invoked from network); 18 Apr 2007 20:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 20:09:00 -0000
Received: (qmail 83834 invoked by uid 500); 18 Apr 2007 20:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83798 invoked by uid 500); 18 Apr 2007 20:08:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83783 invoked by uid 99); 18 Apr 2007 20:08:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 13:08:59 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of odidi@cyveillance.com does not designate 63.100.163.104 as permitted sender)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 13:08:51 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: another question about update an unidexed  field.
Date: Wed, 18 Apr 2007 16:08:30 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA05FE1271@hermes.corp.cyveillance.com>
In-Reply-To: <0C99D00A-DC8A-4252-836B-D4FE35AD28A7@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Newbie needs help "addField"
Thread-Index: AceB3wuo44Z7JTvCRemimf8XR4R9XAAD/VMA
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Before posting this question I have read a couple of old threads on this =
list on ways to update an existing index. the conclusion was to recreate =
a new index. unfortunalty this may not be possible in my case (please =
correct me if I am wrong).=20
let me first describe what I am having trouble with:
I have an index that has all sort of field types =
(keyword,Unstored,Text,Unindexed), I need to update the value for a =
field that is Unindexed for all the documents in the index. (I can't =
recreate the index from scratch since the files I used to create the =
index are not available anymore).
so my idea was to do somthing like the following:

1 - create IndexWriter/Indexreader/IndexSearcher for existing index
2 - getAllDocuments(Searcher) as Hits.
3 - for each Hits object
	Document origDoc =3D hits.doc( i );
	origDoc.removeField( fieldToBeUpdated ); // this field is Unindexed
	origDoc.add( new Field( fieldToBeUpdated =
,newValue,Field.Store.YES,Field.Index.NO ) );
      reader.deleteDocument( hits.id( i ) );
	writer.addDocument( origDoc );
4 - close Reader/Writer/Searcher
5 - optimize index.

is this the right approach?. what will happen to the fields in the index =
that are Unstored in the new index? am I going to lose any data?.

Thank you very much for all your help.

Omar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 21:58:00 2007
Return-Path: <java-user-return-27668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78988 invoked from network); 18 Apr 2007 21:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 21:57:58 -0000
Received: (qmail 77400 invoked by uid 500); 18 Apr 2007 21:57:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77324 invoked by uid 500); 18 Apr 2007 21:57:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77286 invoked by uid 99); 18 Apr 2007 21:57:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 14:57:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 14:57:49 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 938EF87C24
	for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 14:57:28 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4625168B.9070508@languagecomputer.com>
References: <4625168B.9070508@languagecomputer.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FE71BC3C-DBDF-4AB4-A766-0AB053A41CC4@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: MultiSearcher vs MultiReader
Date: Wed, 18 Apr 2007 17:57:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I will try to take a crack at these, but not sure I know exactly what  
you are looking for, so maybe others can chime in too.

At any rate, MultiSearcher has been around a lot longer (2001 versus  
2004, or at least that is what the changelog seems to indicate) and  
it works over Searchables, including RemoteSearchable.  So you could  
use it to combine results from remote searches as well, MultiReader  
can only work over IndexReaders and I am not aware of any way that it  
can do remote index reading, so there are different viable use cases  
for the two.


On Apr 17, 2007, at 2:48 PM, Kirk Roberts wrote:

> I've been on this list long enough to have a vast repository of  
> information about using a MultiSearcher versus an IndexSearcher  
> that works on a MultiReader.  However, after looking through  
> several hundred list postings, I could not find what I was looking  
> for.  So if there is a posting or thread (or website, for that  
> matter) that answers all my questions, please direct me there and,  
> if so, I apologize in advance.
>
> From what I have read, people seem to suggest using an  
> IndexSearcher initialized with a MultiReader over the use of a  
> MultiSearcher.  This begs 2 questions:
> 1. Under what conditions is a MultiSearcher necessary/optimal?
> 2. Why doesn't the MultiReader implement the rather nice methods  
> that the MultiSearcher has (I'm thinking specifically of subSearcher 
> (int) and subDoc(int))?
>

I suppose subDoc might make sense, but subSearcher does not for a  
Reader.  Perhaps the private readerIndex() method on MultiReader is  
something you are interested in?  Is that getting at what you want?   
Maybe you can submit a patch that makes readerIndex public if that is  
what you are interested in?


Hope this helps,
Grant



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 18 22:42:11 2007
Return-Path: <java-user-return-27669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91510 invoked from network); 18 Apr 2007 22:42:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Apr 2007 22:42:10 -0000
Received: (qmail 38328 invoked by uid 500); 18 Apr 2007 22:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38296 invoked by uid 500); 18 Apr 2007 22:42:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38285 invoked by uid 99); 18 Apr 2007 22:42:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 15:42:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 15:42:02 -0700
Received: by py-out-1112.google.com with SMTP id a25so274594pyi
        for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 15:41:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Fg4boNCZmV57jiPoarNT4ZqEU0JeAcSxHlHvDEQkuHGJk+1hyiE5Sme2yG229YmaqSVtM8o9FbPaBtMWcdtD0uC7ulR3b+ARBZdTc/vRj8+icryuGnnMJK5MtGOytHaaw1W0mhQZrfTszjaVIr7d1S61PL5wbjKsGtYapeiZUAA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=JMXA8LveURpNLQGa3Kc/fbGs0B3u8G2QeKGcbBhmFlqjlqNyetOrTVpQOojy6JDSa1N3/bL6Tyk6pHxHB+9wIfZY+dvNImOdD2cBm95K4AjG7NHZ/9JzabsQZbMVdX5VOEvWMgedvWv+RM1ZeC0PSk1DhWLsxQnIXGOOWBwJvYQ=
Received: by 10.35.127.7 with SMTP id e7mr1695835pyn.1176936101488;
        Wed, 18 Apr 2007 15:41:41 -0700 (PDT)
Received: by 10.35.98.19 with HTTP; Wed, 18 Apr 2007 15:41:41 -0700 (PDT)
Message-ID: <c68e39170704181541k4af0f2fgb833c3e39033002d@mail.gmail.com>
Date: Wed, 18 Apr 2007 18:41:41 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher vs MultiReader
In-Reply-To: <FE71BC3C-DBDF-4AB4-A766-0AB053A41CC4@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4625168B.9070508@languagecomputer.com>
	 <FE71BC3C-DBDF-4AB4-A766-0AB053A41CC4@apache.org>
X-Google-Sender-Auth: 9095510f805bdfdd
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/18/07, Grant Ingersoll <gsingers@apache.org> wrote:
> At any rate, MultiSearcher has been around a lot longer (2001 versus
> 2004, or at least that is what the changelog seems to indicate)

That doesn't sound right... MultiReader is more fundamental as it's needed
to read any multi-segment index.

Looking back at the history of IndexReader, it looks like there was a
class called SegmentsReader (note the plural).  I bet it was moved
to MultiReader and that is why the history is truncated.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 00:56:26 2007
Return-Path: <java-user-return-27670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16773 invoked from network); 19 Apr 2007 00:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 00:56:25 -0000
Received: (qmail 67447 invoked by uid 500); 19 Apr 2007 00:56:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67408 invoked by uid 500); 19 Apr 2007 00:56:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67397 invoked by uid 99); 19 Apr 2007 00:56:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 17:56:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a16.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 17:56:17 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.dreamhost.com (Postfix) with ESMTP id E69BA7C9BA
	for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 17:55:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c68e39170704181541k4af0f2fgb833c3e39033002d@mail.gmail.com>
References: <4625168B.9070508@languagecomputer.com> <FE71BC3C-DBDF-4AB4-A766-0AB053A41CC4@apache.org> <c68e39170704181541k4af0f2fgb833c3e39033002d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9AAC92B1-F856-4BF6-BA51-D47946E89BC7@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: MultiSearcher vs MultiReader
Date: Wed, 18 Apr 2007 20:55:51 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You are correct, sir!  I failed Lucene History 101 :-) And I failed  
my fundamental rule for discussing a search library, which is to do a  
search first to see if the answer already exists!

At any rate, here's some history on it: http://www.gossamer- 
threads.com/lists/lucene/java-dev/22104

Nothing like a trip down memory lane.  Sorry for the diversion.


On Apr 18, 2007, at 6:41 PM, Yonik Seeley wrote:

> On 4/18/07, Grant Ingersoll <gsingers@apache.org> wrote:
>> At any rate, MultiSearcher has been around a lot longer (2001 versus
>> 2004, or at least that is what the changelog seems to indicate)
>
> That doesn't sound right... MultiReader is more fundamental as it's  
> needed
> to read any multi-segment index.
>
> Looking back at the history of IndexReader, it looks like there was a
> class called SegmentsReader (note the plural).  I bet it was moved
> to MultiReader and that is why the history is truncated.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 02:09:08 2007
Return-Path: <java-user-return-27671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40988 invoked from network); 19 Apr 2007 02:09:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 02:09:06 -0000
Received: (qmail 63420 invoked by uid 500); 19 Apr 2007 02:09:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62814 invoked by uid 500); 19 Apr 2007 02:09:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62803 invoked by uid 99); 19 Apr 2007 02:09:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 19:09:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmataxo@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 19:08:56 -0700
Received: by py-out-1112.google.com with SMTP id a25so320653pyi
        for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 19:08:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=aqlaldB5hDQQ6F7avabDpFZ2oIqMLQE5IvqzD0cD9cxNhve9A9T97PSxhIguGXyYbbHodeQ6d9lpD752ceYl7Na4joVOLHvV1zGkI/TGJERTStCCLEEPitlsMIcUV68gbl19sT25g+Hm6/xfDy7ar5Mymqitmda55Stnb64Howc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AuDNPsayH8dpoqzlAxvxQ80eS3I8It7YpwC9q1hj9p0YhxlLj7mf5jkVIGicsv7LwGf4A4C3UcLQYumWIgMSYeihT7PIwflevqFsvAKH2HODw0PhduIosFpxKDs2dOHErClBzs4jRNI67dGHjs7aRYT4QxEpmYgLfZUw5BL0BBA=
Received: by 10.35.59.5 with SMTP id m5mr2001638pyk.1176948515467;
        Wed, 18 Apr 2007 19:08:35 -0700 (PDT)
Received: by 10.35.50.13 with HTTP; Wed, 18 Apr 2007 19:08:35 -0700 (PDT)
Message-ID: <3563fa0d0704181908l44e7c400p89a68601f2b72f18@mail.gmail.com>
Date: Wed, 18 Apr 2007 22:08:35 -0400
From: "david m" <dmataxo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merge performance
In-Reply-To: <392521EA2692A2418DF48C331E61E3250E7252@professorville.windows.esseff.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <359a92830704180917x5be8a37fle5babc64464878ab@mail.gmail.com>
	 <392521EA2692A2418DF48C331E61E3250E7252@professorville.windows.esseff.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Erick & Steven,

I looked at 845, but I'm a bit confused:

Are you suggesting that 845 is the cause for the spikes seen in test
Runs 1 & 2 - and that in 2.1 addIndexesNoOptimize() is, under the
covers, relying on calls to ramSizeInBytes() to trigger new segment
creation before hitting the 10,000 value I've set as
maxBufferedDocs?

wrt the 845 reply (by Michael McCandless):

  This will be an O(N^2) slowdown. EG if based on RAM you are flushing
  every 100 docs, then at 1000 docs you will merge to 1 segment. Then
  at 1900 docs, you merge to 1 segment again. At 2800, 3700, 4600, ...
  (every 900 docs) you keep merging to 1 segment. Your indexing
  process will get very slow because every 900 documents the entire
  index is effectively being optimized.

I thought that with a mergeFactor of 10 and maxBufferedDocs of 100 the
behavior was:

  Lucene creates a new segment for each 100 documents. When there are
  10 segments (each with 100 docs) on disk all 10 are merged into a
  single segment. That single segment contains 1,000 documents. This
  merging repeats until there are 10 segments each with 1,000
  documents. At that time, the 10 segments (of 1,000 document each)
  are merged into a single segment. That segment contains 10,000
  documents. And so on...

No?

Thanks, david.


On 4/18/07, Steven Parkes <steven_parkes@esseff.org> wrote:
> Yup, 845 is relevant, as is 847. I haven't had time to digest all that
> David wrote yet, but I'm starting. It's particularly relevant because
> before I get to the point of making 847 committable, I need a way of
> testing merge performance (the factoring in 847 proposes to simplify the
> API slightly, so the merge algorithm would be slightly modified). The
> stuff David has written gives me some ideas for benchmark tests so that
> we'll be able to test multiple merge policies.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wednesday, April 18, 2007 9:17 AM
> To: java-user@lucene.apache.org
> Subject: Re: Merge performance
>
> This *may* be relevant, I haven't needed to investigate
> it yet...
>
>  http://issues.apache.org/jira/browse/LUCENE-845
>
> Also, see the thread titled
> "MergeFactor and MaxBufferedDocs value should ...?" for an
> interesting discussion of how to optimize indexing, although
> I'm not sure the notion of using IndexWriter.ramSizeInBytes
> is of too much use when merging indexes....
>
> Erick
>
> On 4/18/07, d m <dmataxo@gmail.com> wrote:
> >
> > I'd like to share index merge performance data and have a couple
> > of questions about it...
> >
> > We (AXS-One, www.axsone.com) build one "master" index per day.
> > For backup and recovery purposes, we also build many individual
> > "mini" indexes from the docs added to the master index.
> >
> > Should one of our master indexes become unusable (for whatever
> > reason - and I'm glad to say this has not yet happened), we plan to
> > reconstruct it by merging its mini indexes.
> >
> > I've done some merge testing so we have an idea of how long it will
> > take to reconstruct a master index.
> >
> > For testing purposes, I have created 1,000 mini indexes. Each:
> >   - contains 1,000 documents
> >   - is optimized
> >   - uses the compound file format
> >
> > The avg doc size across the 1 million docs is: 10.8 KB
> >
> > My testing has been to merge the 1,000 mini indexes to an empty
> > destination index. Destination index settings:
> >
> >   - mergeFactor: 40
> >   - minMergeDocs: 10,000
> >   - maxMergeDocs: Integer.MAX_VALUE
> >   - use compound file format
> >
> > Those values were obtained from some empirical (but not exhaustive)
> > merge testing.
> >
> > In each test run I merge N mini indexes into a single destination
> > index. Each merge starts with an empty destination index. N increases
> > by 25 for each data point.
> >
> > This means our test merges 25 minis to an empty index.  Then merges 50
> > minis to an empty index. Etc... until it merges 1,000 minis to an
> > empty index.
> >
> > Mini indexes merged with V2.1 were indexed with V2.1.
> > Mini indexes merged with V2.0 were indexed with V2.0.
> >
> > Hardware:
> >   - 64-bit
> >   - 4 CPUs: AMD Opteron 280, 2.41 GHz
> >   - 12.8 GB RAM
> >   - 1.63 TB disk space / 6 SCSI drives / RAID ??
> >
> > Software:
> >   - Lucene V2.1 and V2.0
> >   - Java 1.6
> >   - Windows Server 2003, SP 1
> >
> > I did tests with:
> >   - Lucene 2.1 using addIndexesNoOptimize() - 2 identical runs
> >   - Lucene 2.1 using addIndexes() - 1 run
> >   - Lucene 2.0 using addIndexes() - 1 run
> >
> > The recorded merge times (in seconds) include a final call to
> > optimize() the destination index after returning from
> > addIndexesNoOptimize() or addIndexes().
> >
> > I've included the test data below. (If you'd like, I can email an
> > Excel version of the data with a graph.)
> >
> > A few things caught my attention (seen easily when graphing "Indexes"
> > vs "Merge Time (secs)"):
> >
> > 1. The runs (3 & 4) using addIndexes() show a relatively smooth
> >    increase in merge times (as expected).
> >
> > 2. The 2.1 runs (1 & 2) using addIndexesNoOptimize() show multiple
> >    spikes in times for a particular merge count - with the next merge
> >    counts running faster. The pattern of spikes was identical in both
> >    runs.
> >
> >    The most notable spike occurs in the addIndexesNoOptimize() merge
> >    of 900 indexes with took 44:26 (mm:ss) in one run and 43:37 in the
> >    other. In both runs the merge times for 925, 950, 975, and 1000
> >    indexes took less time than the 900 merge.
> >
> > 3. Overall, using addIndexes() appears to be faster than
> >    addIndexesNoOptimize().
> >
> > 4. V2.0 addIndexes() performs better than V2.1 addIndexes(). Look at
> >    the very last row of data below - it is the merge rate (in
> >    docs/min) for each test run.
> >
> > Can someone explain what might be happening to cause the spikes in
> 2.1,
> > not seen in 2.0?
> >
> > Any thoughts on 2.0 merging faster than 2.1?
> >
> > Thanks, david.
> >
> >
> > Run 1: Lucene 2.1 / addIndexesNoOptimize()
> > Run 2: Repeat Run 1
> > Run 3: Lucene 2.1 / addIndexes()
> > Run 4: Lucene 2.0 / addIndexes()
> > All runs include a final call to optimize()
> >
> >       Merge Times (seconds)
> > Numb  Run   Run   Run   Run
> > Idxs  1     2     3     4
> > 25    39    59    44    38
> > 50    73    93    83    81
> > 75    113   131   128   120
> > 100   147   169   163   154
> > 125   179   198   193   220
> > 150   222   241   227   231
> > 175   246   261   249   239
> > 200   266   273   269   266
> > 225   297   301   288   283
> > 250   323   325   312   308
> > 275   461   471   343   337
> > 300   393   388   376   364
> > 325   424   423   410   401
> > 350   465   467   445   438
> > 375   498   504   475   466
> > 400   527   528   516   503
> > 425   586   567   608   587
> > 450   677   656   703   675
> > 475   876   880   786   750
> > 500   841   832   872   821
> > 525   920   914   937   924
> > 550   1213  1206  1038  995
> > 575   1094  1065  1137  1069
> > 600   1250  1207  1275  1189
> > 625   1367  1337  1385  1315
> > 650   1473  1433  1454  1396
> > 675   1600  1575  1499  1468
> > 700   1570  1552  1563  1516
> > 725   1605  1587  1602  1581
> > 750   1852  1808  1687  1627
> > 775   1761  1719  1732  1668
> > 800   1829  1821  1876  1753
> > 825   2167  2138  1882  1832
> > 850   2045  2042  2057  1887
> > 875   2169  2207  2101  2025
> > 900   2666  2617  2138  2014
> > 925   2174  2218  2206  2057
> > 950   2390  2391  2193  2121
> > 975   2304  2322  2247  2149
> > 1000  2321  2322  2321  2227
> >
> > 20500 43423 43248 41820 40095   <- Totals
> >       28326 28441 29412 30667   <- Merge rate: Docs per minute
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 02:16:26 2007
Return-Path: <java-user-return-27672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42789 invoked from network); 19 Apr 2007 02:16:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 02:16:25 -0000
Received: (qmail 75008 invoked by uid 500); 19 Apr 2007 02:16:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74973 invoked by uid 500); 19 Apr 2007 02:16:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74949 invoked by uid 99); 19 Apr 2007 02:16:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 19:16:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmataxo@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 19:16:02 -0700
Received: by py-out-1112.google.com with SMTP id u77so350794pyb
        for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 19:15:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sMbgJCkn+GK19Si6o4RDT+h3G9ihKp9A56tyNqbKx7yAn9hafmuuvEJBAS2hCnoHNY0ZgIq/9foQvl35qnIOg8fRZSeGP12r3M846IDWebMaYP5TsOMmPWolvKmvoqyLPjuLX+iMw3yH5NyglnIkOVP3Im8yEauuXfp7eTIJkDw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IOUGrEsllHAYKJW0d229FWqKGPPub0zHBnzfFnsMbp+vKC/CJ8AaochGk+8v3VVb/ugHKK64pvxx2Oo+AhQuPV69rkFNBfHd9oQ/Wk/XtwzaOmLfYUlz/6OoUU3IDjVNQ02GD956P1CudA4dcnRQIObqa9mkL8M0UV1EwrY83eo=
Received: by 10.35.38.17 with SMTP id q17mr1980947pyj.1176948942028;
        Wed, 18 Apr 2007 19:15:42 -0700 (PDT)
Received: by 10.35.50.13 with HTTP; Wed, 18 Apr 2007 19:15:41 -0700 (PDT)
Message-ID: <3563fa0d0704181915m2c3a2e07ub3147f4dcf6077ae@mail.gmail.com>
Date: Wed, 18 Apr 2007 22:15:41 -0400
From: "david m" <dmataxo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merge performance
In-Reply-To: <46264B1D.5090906@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3563fa0d0704180757w7e1807fag6d44d126a13f9db4@mail.gmail.com>
	 <46264B1D.5090906@curtin.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Michael,

Our application includes indexing and archiving documents to meet
compliance requirements.

A couple of reasons that lead to the merge approach:

- Source documents are written to archive media and retrieval is
  relatively slow. Add to that our processing pipeline (including
  text extraction)... Retrieving and merging minis is faster than
  re-processing and re-indexing from sources.

- In addition to index recovery, mini indexes may be combined into
  custom indexes based on policy.

  From a compliance viewpoint the mini indexes contain logically
  related documents. For example: based on a retention policy,
  documents of type x are to be kept for y years.

  One example for constructing a custom index would be for legal
  discovery.

Thanks, david.

On 4/18/07, Michael D. Curtin <mike@curtin.com> wrote:
> d m wrote:
>
> > I'd like to share index merge performance data and have a couple
> > of questions about it...
> >
> > We (AXS-One, www.axsone.com) build one "master" index per day.
> > For backup and recovery purposes, we also build many individual
> > "mini" indexes from the docs added to the master index.
> >
> > Should one of our master indexes become unusable (for whatever
> > reason - and I'm glad to say this has not yet happened), we plan to
> > reconstruct it by merging its mini indexes.
>
> The possible merge bug notwithstanding, let's take a step back in
> abstraction:  are you sure the relatively-complex iterative merge
> process you've described buys you anything over a simple
> backup-the-whole-index approach?  Or a
> backup-the-source-data-and-reindex approach?
>
> Merging is I/O intensive, and the scheme you've outlined is re-reading
> and re-writing all the index data several times anyway -- it might not
> be saving you much over a full reindex.  Since the scenario you're
> trying to protect against is a very rare occurrence (so far at least),
> would it be better to spend your development time on improving the
> application than devising (and debugging, and testing, ...) a
> complicated backup and recovery scheme?
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 05:20:46 2007
Return-Path: <java-user-return-27673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82314 invoked from network); 19 Apr 2007 05:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 05:20:44 -0000
Received: (qmail 69026 invoked by uid 500); 19 Apr 2007 05:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68815 invoked by uid 500); 19 Apr 2007 05:20:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68804 invoked by uid 99); 19 Apr 2007 05:20:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 22:20:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 22:20:34 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 900C54ED8D7
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 15:19:47 +1000 (EST)
Message-ID: <4626FC69.6010109@nuix.com>
Date: Thu, 19 Apr 2007 15:21:45 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070415)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: adding a field at index-time
References: <20070418162533.22240@gmx.net>
In-Reply-To: <20070418162533.22240@gmx.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

William Mee wrote:
> I'd like to add metadata which I get *after* indexing a document's
> contents to the index. To be more specific: I'm implementing
> shingling (detection of near-duplicate documents) and want to add the
> document fingerprint (which is based on the sequence of tokens) to
> the index.
> 
> There doesn't seem to be an easy way to do this in the Lucene API -
> in particular, I can't easily update a document which is already
> indexed. The only way I could get this information *before* adding a
> document to an index is to create a token stream manually (and then
> have this happen all over again when the document is indexed). This
> isn't a satisfying solution. Does anyone have any suggestions of how
> I could get the fingerprint information into the index? I'd
> appreciate any input. Thanks!

You could perhaps try creating a separate index in the same order as 
your initial one, store the new fields in that, and then use 
ParallelReader to "glue" the two together at read-time.

Daniel



-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 05:24:59 2007
Return-Path: <java-user-return-27674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83536 invoked from network); 19 Apr 2007 05:24:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 05:24:58 -0000
Received: (qmail 75311 invoked by uid 500); 19 Apr 2007 05:24:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75280 invoked by uid 500); 19 Apr 2007 05:24:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75266 invoked by uid 99); 19 Apr 2007 05:24:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 22:24:57 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 66.249.90.181 as permitted sender)
Received: from [66.249.90.181] (HELO ik-out-1112.google.com) (66.249.90.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2007 22:24:49 -0700
Received: by ik-out-1112.google.com with SMTP id b35so516666ika
        for <java-user@lucene.apache.org>; Wed, 18 Apr 2007 22:24:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fNbZq0oxUQ8USokSMCkSl8CjiJscitQEpVB2U16r2YWrdCXOVPRxfvN714qWVcylxm6GRVTw6TltafO0iYNGZoxoS595/Km0NImcwgfBejPNClva1vwYcjCcIczfbIh/kYYds5swus6qFH1uP5dBntVl0LL4HHJwxpJFBYxlWDs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SdxGvgFdg54sw232BfuUJgPrzEc0TMLeZdxOm3Pf6RA9o8J2S3VWWB4Mf5OjxLIpGjAEYXS7ziyKFXI4wVYwE5iEs9850E3bLzxNkkdcvWXgnaCKet/oWLkt6/cjcY0E822e/uflZPkH8s5J8FOHWq+zqRWJURRwZOjkaRLn0C4=
Received: by 10.70.108.18 with SMTP id g18mr2501690wxc.1176960258775;
        Wed, 18 Apr 2007 22:24:18 -0700 (PDT)
Received: by 10.100.11.17 with HTTP; Wed, 18 Apr 2007 22:24:18 -0700 (PDT)
Message-ID: <34b8543c0704182224g7fc9ad8l9c180a494cfaf923@mail.gmail.com>
Date: Thu, 19 Apr 2007 08:54:18 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about field equality in query
In-Reply-To: <34b8543c0704170242k532445acub4e716b367c0d8f3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46123_13835018.1176960258694"
References: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com>
	 <EA0A1526-4D97-4EC9-8F92-C6365A2E650F@gmail.com>
	 <34b8543c0704150137h662567e1s29fcea1a6028e0ab@mail.gmail.com>
	 <359a92830704150712p6b1dfe11y7f405dc6741d2b1e@mail.gmail.com>
	 <34b8543c0704150821r53bc6b33g34e0f3ad9af010a0@mail.gmail.com>
	 <6e3ae6310704152342n6148f04fvd98df5c19ab5243d@mail.gmail.com>
	 <34b8543c0704170242k532445acub4e716b367c0d8f3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46123_13835018.1176960258694
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Any more idea?

On 4/17/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Chris,
> Thank you for your reply, your solution doesnt work in my case because I
> was thinking of indexing more than one document in a single index and each
> document representing a table in database. so if I put more than one
> document some fields for a single document will be empty. something like
> this:
>
> Document:
> field1             field2                field3          field4
> test1             test2                 test3              --
> --                  --                       test5          test3
>
> Document:
> field1             field2                field3
> field4                f3f4
> test1             test2                 test3
> --                     ?
> --                  --                       test5
> test3                    ?
>
>
>
>
> On 4/16/07, Chris Lu <chris.lu@gmail.com> wrote:
> >
> > > > > Query:
> > > > >  field1:"test phrase" AND field2:"test" AND field3:field4
> > > > >
> > > > > in this query we said that do search where field3 is equal to
> > > > > field4 ...
> > > > > (and rest of the query)
> > Regarding your query, I think you can simply query the database and
> > create a field, like f3f4, and set it to 1 if the value of field3
> > equals that of field4,
> > and set it to 0 if otherwise.
> >
> > When you search, you can use "....AND f3f4:1..."
> >
> > This could be simpler than asking Lucene to do database job.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> >
> > On 4/15/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > well, let me tell you what we're going to do.
> > > our information are too much. actually, we have a huge database for
> > > hospitals, and their services and their patients and also pharmacy
> > infos.
> > >
> > > just for test, we first joined some important tables and as you said
> > > de-normalized them and then tried to create an index. it was about 3
> > > millions documents and surprisingly, we saw that using this system we
> > can
> > > achieve our goal in a few seconds, however, by using SQL statements it
> > took
> > > more than half an hour !!! so what did we want more? we just want to
> > reach
> > > our result and Lucene fulfils our needs.
> > >
> > > but we are not going to leave the database and throw it out. we need
> > Lucene
> > > in some special cases. in our case, reporting from whole informatin.
> > >
> > > but the problem is, because there are more tables (actually there are
> > more
> > > than 10 database views) so we decided to categorize information
> > and  create
> > > a view for each category. and then index them individually.
> > >
> > > but we need to find some information on say, index2, where they have
> > > relation with say index1
> > >
> > > Erick, your second way doesnt fulfil our needs because the information
> > are
> > > too complex. and the third one, yes we finally do that, but before
> > that we
> > > need to do some searching (with a complex query) on indexes so we need
> > many
> > > information on our indexes.
> > >
> > > I was thinking of building another table (table, I dont mean database
> > table,
> > > it can be every structure) that keeps lucene's internal ids and their
> > > relations with other indexes. and I tested it, now it works fine but
> > you
> > > know this internal ids will change once we call optimize() method. so
> > we
> > > should re-create them each time we update the index. (we do it every
> > other
> > > week)
> > >
> > > so if you had provided a feature for such problem to find the
> > relations
> > > between various indexes every thing was nice.
> > >
> > > I know this is not an aspect for Lucene, but in such situation it
> > would help
> > > and save the developers and users, specially when we were able to
> > disable or
> > > enable that feature depend on our needs.
> > >
> > > lots of thanks
> > >
> > > On 4/15/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > >
> > > > well, how much data are we talking about here? If your index
> > > > is already 100G, your options are much more limited than if
> > > > it's 1M...
> > > >
> > > > Essentially, you have several choices:
> > > > 1> de-normalize your data to whatever extent is "sufficient"
> > > >     and index it.
> > > > 2> Try to do what amount to joins. If your needs aren't too complex,
> > > >      you can probably do some interesting things with
> > > >      TermEnum/TermDocs, but I should emphasize the word *simple*
> > > >      in the relationships or else you'll be re-inventing an RDBMS
> > <G>.
> > > > 3> You can mix-n-match. That is, use Lucene to index searchable
> > > >      data and use the database for some portion of your joins.
> > > >
> > > > Best
> > > > Erick
> > > >
> > > >
> > > > On 4/15/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > > >
> > > > > Thanks Karl,
> > > > > sorry I was on business vacation and could not reply soon.
> > > > >
> > > > > Ok, I want to index my database and search through the indexes,
> > and the
> > > > > tables in database are more than 50 and it's hard to joining them
> > and
> > > > then
> > > > > indexing. so I was thinking of indexing each table in a document
> > but in
> > > > > one
> > > > > index file and then make relations between them
> > > > >
> > > > > I know that Lucene is not a relational database but it really
> > helps us
> > > > to
> > > > > improve accessing our information and even generating reports.
> > > > >
> > > > > Even if this feature decline the performance, still it is better
> > than
> > > > > generating reports from SQL statements and the speed up accessing
> > > > > information. now our users are very satisfied by this. but we need
> > to
> > > > > create
> > > > > some relationship between documents.
> > > > >
> > > > >
> > > > > On 4/11/07, karl wettin < karl.wettin@gmail.com> wrote:
> > > > > >
> > > > > >
> > > > > > 11 apr 2007 kl. 11.19 skrev Mohammad Norouzi:
> > > > > >
> > > > > > > is it possible (or a trickery way)  to search with a given
> > query in
> > > > > > > which we
> > > > > > > can set an equality for two fields
> > > > > > > for example:
> > > > > > >
> > > > > > > Document:
> > > > > > > field1
> > field2                field3          field4
> > > > > > >
> > > > > > > Query:
> > > > > > >  field1:"test phrase" AND field2:"test" AND field3:field4
> > > > > > >
> > > > > > > in this query we said that do search where field3 is equal to
> > > > > > > field4 ...
> > > > > > > (and rest of the query)
> > > > > > >
> > > > > > > if it is not possible, can we ask it as a new feature from
> > Lucene
> > > > > > > developers?
> > > > > >
> > > > > > It could probably be done, but would be quite an expensive query
> > to
> > > > > > place.
> > > > > >
> > > > > > However, a request like this usually tiggers questions about the
> >
> > > > > > design of an index with such needs. There is probably a better
> > > > > > solution. Start by telling us about the data you have inserted
> > to the
> > > > > > index, and what it is you try to achieve.
> > > > > >
> > > > > > In essence, Lucene is not a relational database.
> > > > > >
> > > > > > --
> > > > > > karl
> > > > > >
> > > > > >
> > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Regards,
> > > > > Mohammad
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Regards,
> > > M. Norouzi
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
> Mohammad




-- 
Regards,
Mohammad

------=_Part_46123_13835018.1176960258694--

From java-user-return-27675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 13:08:23 2007
Return-Path: <java-user-return-27675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40405 invoked from network); 19 Apr 2007 13:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 13:08:22 -0000
Received: (qmail 16708 invoked by uid 500); 19 Apr 2007 13:08:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16672 invoked by uid 500); 19 Apr 2007 13:08:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16660 invoked by uid 99); 19 Apr 2007 13:08:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 06:08:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.207 as permitted sender)
Received: from [65.54.246.207] (HELO bay0-omc3-s7.bay0.hotmail.com) (65.54.246.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 06:08:13 -0700
Received: from hotmail.com ([65.55.155.92]) by bay0-omc3-s7.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 19 Apr 2007 06:07:52 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 19 Apr 2007 06:07:52 -0700
Message-ID: <BAY144-F123F22F1A442F133D7DDA0D4570@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Thu, 19 Apr 2007 13:07:50 GMT
X-Originating-IP: [64.236.128.27]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
In-Reply-To: <BAY144-F685EB9FE05D4FE162A329D4520@phx.gbl>
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index performance
Date: Thu, 19 Apr 2007 13:07:50 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 19 Apr 2007 13:07:52.0493 (UTC) FILETIME=[BCE6FDD0:01C78283]
X-Virus-Checked: Checked by ClamAV on apache.org


Doron and Erick,

I found the problem which slowed down indexing. It is our NFS file system.

Thanks for help.
Tony

>From: "Tony Qian" <tonyqian@hotmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Index performance
>Date: Mon, 16 Apr 2007 14:37:46 +0000
>
>
>Doron,
>
>I'll try that and let you know the result.
>
>thanks for suggestions.
>Tony
>
>>From: Doron Cohen <DORONC@il.ibm.com>
>>Reply-To: java-user@lucene.apache.org
>>To: java-user@lucene.apache.org
>>Subject: Re: Index performance
>>Date: Thu, 12 Apr 2007 13:40:07 -0700
>>
>>To cover all possible non-indexing overhead, better measure with something
>>like this:
>>
>>    static long indexContents(IndexWriter writer, List storyContentList)
>>      throws IOException {
>>      long res = 0;
>>      if (storyContentList != null && storyContentList.size() != 0) {
>>          try {
>>              Iterator itr = storyContentList.iterator();
>>              while (itr.hasNext()){
>>                  StoryContents content = (StoryContents) itr.next();
>>                  res += content.getStoryText().length();
>>                  res +=
>>String.valueOf(content.getStoryIdentity()).length();
>>                  res += String.valueOf(content.getHeadline1()).length();
>>              }
>>          }catch(Exception ex){
>>               System.out.println(" caught a " + ex.getClass() );
>>          }
>>          return res;
>>      }
>>    }
>>
>>Doron Cohen/Haifa/IBM@IBMIL wrote on 12/04/2007 13:26:34:
>>
>> > > I tried to index it. It took from 7-10 seconds to index about 90
>> > documents.
>> >
>> > That would be around 10 documents per second - way too slow. A Lucene's
>> > perf test adding 12,000 docs sized similar to your sample doc (1400
>> > characters) on a not so strong machine shows much faster pace - 146 
>>docs
>> > per second, or 237 with larger mix-beffered-docs setting:
>> >
>> >  Operation     round maxBuf  runCnt  recsPerRun  rec/s  elapsedSec
>> >  AddDocs_12000     0     10       1       12000  146.3       82.04
>> >  AddDocs_12000     1   1000       1       12000  237.8       50.45
>> >
>> > As Otis suggested, a larger max-buffered docs speeds things up.
>> > But even without that, pace is 14 times faster than your numbers.
>> >
>> > It might be interesting to measure without indexing at all, i.e. modify
>>the
>> > method indexContents() to something like:
>> >
>> >   static int indexContents(IndexWriter writer, List storyContentList)
>> >     throws IOException {
>> >     int res = 0;
>> >     if (storyContentList != null && storyContentList.size() != 0) {
>> >         try {
>> >             Iterator itr = storyContentList.iterator();
>> >             while (itr.hasNext()){
>> >                 StoryContents content = (StoryContents) itr.next();
>> >                 res += content.length();
>> >             }
>> >         }catch(Exception ex){
>> >              System.out.println(" caught a " + ex.getClass() );
>> >         }
>> >     }
>> >     return res;
>> >   }
>> >
>> > This should show if there is other overhead involved, unrelated to
>> > indexing.
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>_________________________________________________________________
>The average US Credit Score is 675. The cost to see yours: $0 by Experian. 
>http://www.freecreditreport.com/pm/default.aspx?sc=660600&bcd=EMAILFOOTERAVERAGE
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>

_________________________________________________________________
Mortgage refinance is Hot. *Terms. Get a 5.375%* fix rate. Check savings 
https://www2.nextag.com/goto.jsp?product=100000035&url=%2fst.jsp&tm=y&search=mortgage_text_links_88_h2bbb&disc=y&vers=925&s=4056&p=5117


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 14:03:18 2007
Return-Path: <java-user-return-27676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72088 invoked from network); 19 Apr 2007 14:03:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 14:03:17 -0000
Received: (qmail 98548 invoked by uid 500); 19 Apr 2007 14:03:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98508 invoked by uid 500); 19 Apr 2007 14:03:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98497 invoked by uid 99); 19 Apr 2007 14:03:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 07:03:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 07:03:08 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 942CD215519
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 10:02:51 -0400 (EDT)
Received: from web4.messagingengine.com ([10.202.2.213])
  by compute1.internal (MEProxy); Thu, 19 Apr 2007 10:02:48 -0400
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 2694C15B5B2; Thu, 19 Apr 2007 10:02:48 -0400 (EDT)
Message-Id: <1176991368.1714.1185466639@webmail.messagingengine.com>
X-Sasl-Enc: AV6TmYXj83/dfRuSd8O+MTnSdgWfzsyYirRPjPR4knos 1176991368
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <BAY144-F123F22F1A442F133D7DDA0D4570@phx.gbl>
Subject: Re: Index performance
In-Reply-To: <BAY144-F123F22F1A442F133D7DDA0D4570@phx.gbl>
Date: Thu, 19 Apr 2007 10:02:48 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Tony Qian" <tonyqian@hotmail.com> wrote:

> I found the problem which slowed down indexing. It is our NFS file
> system.

NFS performance is generally slower than local filesystem, though
there may be ways to tune it (I'm not sure).  I have heard but not
personally verified that mounting NFS read-only (eg for your readers)
gives performance gains.

However one big caveat on having readers access index via NFS: the
"point in time" searching that a reader normally guarantees will not
work, because the writer will remove files in use by the readers.  But,
as of the Lucene trunk (not yet released) it is now possible to fix
this with knowledge of when readers will refresh (based on your
application's design) by creating your own custom deletion policy.

See here for gory details:

  https://issues.apache.org/jira/browse/LUCENE-710

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 15:34:31 2007
Return-Path: <java-user-return-27677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11334 invoked from network); 19 Apr 2007 15:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 15:34:29 -0000
Received: (qmail 40381 invoked by uid 500); 19 Apr 2007 15:34:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40340 invoked by uid 500); 19 Apr 2007 15:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40329 invoked by uid 99); 19 Apr 2007 15:34:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 08:34:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.44 as permitted sender)
Received: from [206.46.252.44] (HELO vms044pub.verizon.net) (206.46.252.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 08:34:20 -0700
Received: from dorthy ([72.73.131.221])
 by vms044.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JGR00EO34KIQY05@vms044.mailsrvcs.net> for
 java-user@lucene.apache.org; Thu, 19 Apr 2007 10:33:55 -0500 (CDT)
Date: Thu, 19 Apr 2007 10:34:13 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: Newbie needs help "addField"
To: <java-user@lucene.apache.org>
Message-id: <006701c78298$2f37e2a0$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=response
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks to Karl and Donna, I followed your suggestions and was able to get a 
test driver (modified demo code) working, thanks again.

jim s


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 15:46:07 2007
Return-Path: <java-user-return-27678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19089 invoked from network); 19 Apr 2007 15:46:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 15:46:05 -0000
Received: (qmail 68102 invoked by uid 500); 19 Apr 2007 15:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68072 invoked by uid 500); 19 Apr 2007 15:46:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68061 invoked by uid 99); 19 Apr 2007 15:46:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 08:46:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [171.64.10.152] (HELO smtp-roam.Stanford.EDU) (171.64.10.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 08:45:58 -0700
Received: from [10.0.0.201] (HXV-C11.Stanford.EDU [171.65.78.201])
	(authenticated bits=0)
	by smtp-roam.Stanford.EDU (8.12.11/8.12.11) with ESMTP id l3JFiueB003903
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 08:44:57 -0700
Message-ID: <46278E49.3050704@helix.stanford.edu>
Date: Thu, 19 Apr 2007 08:44:09 -0700
From: Mark Woon <morpheus@helix.stanford.edu>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Problem with MultiFieldQueryParser
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Can someone clear something up for me regarding MultiFieldQueryParser?

Using the same inputs to MultiFieldQueryParser.parse(|String[] queries, 
String[] fields, Analyzer analyzer|)  and 
MultiFieldQueryParser.parse(String query) I seem to be getting the exact 
same query back (according to Query.toString()).

However, when I run the query I'm getting different results.  Do the 
static and non-static version of parse() do different things?


Thanks,
-Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 16:35:05 2007
Return-Path: <java-user-return-27679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33310 invoked from network); 19 Apr 2007 16:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 16:35:04 -0000
Received: (qmail 65232 invoked by uid 500); 19 Apr 2007 16:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65205 invoked by uid 500); 19 Apr 2007 16:35:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65183 invoked by uid 99); 19 Apr 2007 16:35:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 09:35:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 09:34:56 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3JGYYL3069990
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 16:34:34 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3JGYYpn3305636
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 18:34:34 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3JGYYGi027699
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 18:34:34 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3JGYYh3027696
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 18:34:34 +0200
In-Reply-To: <BAY144-F123F22F1A442F133D7DDA0D4570@phx.gbl>
Subject: Re: Index performance
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFB15D1FFE.0FB9DDB4-ON882572C2.00598B71-882572C2.005AC3CA@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 19 Apr 2007 09:31:23 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 19/04/2007 19:34:33
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Tony Qian" wrote on 19/04/2007:

> I found the problem which slowed down indexing. It is our NFS file
system.

If only the index is maintained on NFS (say input is on local disk or DB or
such) it may help to index to local disk and only occasionally (once a
day?) copy/update to an index maintained on NFS (and used there for search
I assume). A faster NFS is much simpler/better of course. But if this
delayed NFS update is of interest to you, perhaps try it first, roughly,
and if deciding to go this way, there were a few relevant discussions
lately on ways to safely/efficiently copy from a dynamic (updating) index
to another index. Mmm... thinking of the mentioned complexities of this
copying not sure I would go this way, - but - it might suit you, and
perhaps other can add on their experience with this type of setup.

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 18:46:29 2007
Return-Path: <java-user-return-27680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74151 invoked from network); 19 Apr 2007 18:46:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 18:46:28 -0000
Received: (qmail 64011 invoked by uid 500); 19 Apr 2007 18:46:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63984 invoked by uid 500); 19 Apr 2007 18:46:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63973 invoked by uid 99); 19 Apr 2007 18:46:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 11:46:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.198.211] (HELO smtp112.sbc.mail.mud.yahoo.com) (68.142.198.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Apr 2007 11:46:20 -0700
Received: (qmail 47500 invoked from network); 19 Apr 2007 18:45:59 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@75.45.84.119 with plain)
  by smtp112.sbc.mail.mud.yahoo.com with SMTP; 19 Apr 2007 18:45:59 -0000
X-YMail-OSG: 9ljW6oIVM1mrWSWlLvYaSAO3XcF2AuV2.72Q_D59.z7l1GxJ
Message-ID: <4627B8EA.10301@curtin.com>
Date: Thu, 19 Apr 2007 14:46:02 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge performance
References: <3563fa0d0704180757w7e1807fag6d44d126a13f9db4@mail.gmail.com>	 <46264B1D.5090906@curtin.com> <3563fa0d0704181915m2c3a2e07ub3147f4dcf6077ae@mail.gmail.com>
In-Reply-To: <3563fa0d0704181915m2c3a2e07ub3147f4dcf6077ae@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

david m wrote:

> A couple of reasons that lead to the merge approach:
> 
> - Source documents are written to archive media and retrieval is
>  relatively slow. Add to that our processing pipeline (including
>  text extraction)... Retrieving and merging minis is faster than
>  re-processing and re-indexing from sources.
> 
> - In addition to index recovery, mini indexes may be combined into
>  custom indexes based on policy.
> 
>  From a compliance viewpoint the mini indexes contain logically
>  related documents. For example: based on a retention policy,
>  documents of type x are to be kept for y years.
> 
>  One example for constructing a custom index would be for legal
>  discovery.

I see -- it sounds like the "minis" are there for several, 
application-specific reasons besides backup and recovery.  Your scheme 
sounds like it might be a clever leveraging of everything you did to 
meet all those other requirements.

For the Lucene projects I've been on, the aggregate size of the source 
data was about the same as the resulting indexes.  In your case I'd 
guess that the aggregate size of the minis is somewhat larger than the 
final index, due to duplication of terms.  Anyhow, in my projects, 
recovery is much faster from a backup of the (final) index than from a 
backup of upstream data followed by reprocessing.  It sounds like you've 
already measured the relevant parameters, though, so maybe my projects' 
data sets have very different characteristics.

Good luck on your project!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 21:07:47 2007
Return-Path: <java-user-return-27681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23462 invoked from network); 19 Apr 2007 21:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 21:07:45 -0000
Received: (qmail 77072 invoked by uid 500); 19 Apr 2007 21:07:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76957 invoked by uid 500); 19 Apr 2007 21:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76946 invoked by uid 99); 19 Apr 2007 21:07:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 14:07:43 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 14:07:36 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HedqW-00084A-D2
	for java-user@lucene.apache.org; Thu, 19 Apr 2007 14:07:16 -0700
Message-ID: <10086883.post@talk.nabble.com>
Date: Thu, 19 Apr 2007 14:07:16 -0700 (PDT)
From: HG1212 <furkhans@yahoo.com>
To: java-user@lucene.apache.org
Subject: Document Boost
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: furkhans@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there, 
I am new to Lucene and would appreciate any help on this. Thank you in
advance. 
I want the order of the search results based on the keywords mentioned in
the meta information of the document. For example, if I have two very
similar documents first.htm and second.htm, first.htm has keywords
("security") mentioned in its meta and the second.htm does not mention those
keywords in its meta information, but both documents contain "security" in
its content, then I would want to see the first.htm at the top of the search
results lists. 
I tried to boost these keywords (added new fields to the document and
setting the boost for these fields) before adding to the document, but when
I do a search, the results are not as expected. 

Any ideas how to accomplish this. 

Thanks 
HG
-- 
View this message in context: http://www.nabble.com/Document-Boost-tf3609748.html#a10086883
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 21:19:03 2007
Return-Path: <java-user-return-27682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27780 invoked from network); 19 Apr 2007 21:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 21:19:02 -0000
Received: (qmail 95438 invoked by uid 500); 19 Apr 2007 21:19:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95386 invoked by uid 500); 19 Apr 2007 21:19:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95327 invoked by uid 99); 19 Apr 2007 21:19:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 14:19:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 14:18:53 -0700
Received: by mu-out-0910.google.com with SMTP id i10so875122mue
        for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 14:18:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mROkmrr6Bfe4gOtkUIUv6uyGdn6NIf0MsF9NqOcqsF8sM/W5ZJpj0MEcM+UZp5ybhMRFtTEkiaJqDpHMPUxtqfCpJnVCYjwFAxMjQyIw3XcCjZhR1F6j0zommS4DuPJ/chxaWPbywWfK03XLQGVmDHNaB+ocOjfzZii8jjxrT2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ad4Yo0ww+wdd58XsJuzXtfpZZYf9y+J0077eQsUXDbDGJV3mDuj7BjiR8KF/ERS5BnfZyhNbWavgpMipJp/UF5ggxiWnG1cd0hJdeh3lRhCaGjAcUPjYz8ZEy0rHiAwuxj/qU1wU4bZ5yyA84swIhNm+tcrbV/nI4TDzXSgLjyg=
Received: by 10.82.162.14 with SMTP id k14mr3594925bue.1177017511766;
        Thu, 19 Apr 2007 14:18:31 -0700 (PDT)
Received: by 10.82.190.11 with HTTP; Thu, 19 Apr 2007 14:18:31 -0700 (PDT)
Message-ID: <359a92830704191418jc640f5fr6187490790f4e3f7@mail.gmail.com>
Date: Thu, 19 Apr 2007 17:18:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document Boost
In-Reply-To: <10086883.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48162_12251315.1177017511731"
References: <10086883.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48162_12251315.1177017511731
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Were you setting the boosts at index or search time? From an old
e-mail from Chris H.

"index time field boosts are a way to express things like
"this documents title is worth twice as much as the title of
most documents" query time boosts are a way to express
"I care about matches on this clause of my query twice as
much as i do about matches to other clauses of my query".

Erick

On 4/19/07, HG1212 <furkhans@yahoo.com> wrote:
>
>
> Hi there,
> I am new to Lucene and would appreciate any help on this. Thank you in
> advance.
> I want the order of the search results based on the keywords mentioned in
> the meta information of the document. For example, if I have two very
> similar documents first.htm and second.htm, first.htm has keywords
> ("security") mentioned in its meta and the second.htm does not mention
> those
> keywords in its meta information, but both documents contain "security" in
> its content, then I would want to see the first.htm at the top of the
> search
> results lists.
> I tried to boost these keywords (added new fields to the document and
> setting the boost for these fields) before adding to the document, but
> when
> I do a search, the results are not as expected.
>
> Any ideas how to accomplish this.
>
> Thanks
> HG
> --
> View this message in context:
> http://www.nabble.com/Document-Boost-tf3609748.html#a10086883
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_48162_12251315.1177017511731--

From java-user-return-27683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 21:44:24 2007
Return-Path: <java-user-return-27683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35415 invoked from network); 19 Apr 2007 21:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 21:44:24 -0000
Received: (qmail 29207 invoked by uid 500); 19 Apr 2007 21:44:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29173 invoked by uid 500); 19 Apr 2007 21:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29162 invoked by uid 99); 19 Apr 2007 21:44:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 14:44:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 14:44:16 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2CA085B773; Thu, 19 Apr 2007 14:43:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 261417F403
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 14:43:56 -0700 (PDT)
Date: Thu, 19 Apr 2007 14:43:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: question about field equality in query
In-Reply-To: <34b8543c0704182224g7fc9ad8l9c180a494cfaf923@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704191441190.14281@hal.rescomp.berkeley.edu>
References: <34b8543c0704110219k7ee34623hcb09bf378638ee3@mail.gmail.com> 
 <EA0A1526-4D97-4EC9-8F92-C6365A2E650F@gmail.com> 
 <34b8543c0704150137h662567e1s29fcea1a6028e0ab@mail.gmail.com> 
 <359a92830704150712p6b1dfe11y7f405dc6741d2b1e@mail.gmail.com> 
 <34b8543c0704150821r53bc6b33g34e0f3ad9af010a0@mail.gmail.com> 
 <6e3ae6310704152342n6148f04fvd98df5c19ab5243d@mail.gmail.com> 
 <34b8543c0704170242k532445acub4e716b367c0d8f3@mail.gmail.com>
 <34b8543c0704182224g7fc9ad8l9c180a494cfaf923@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > Thank you for your reply, your solution doesnt work in my case because I
: > was thinking of indexing more than one document in a single index and each
: > document representing a table in database. so if I put more than one
: > document some fields for a single document will be empty. something like
: > this:
: >
: > Document:
: > field1             field2                field3          field4
: > test1             test2                 test3              --
: > --                  --                       test5          test3

i'm not udnerstanding your problem ... not every document needs to have
the same fields, and not every field of every document needs to have hte
same number of values.  you cna have a field falled field3_equal_field4
and only use it for hte documnts where it's true, and then it's easy to
query on ... you can do this for every permutation of fields you've got
and as long s you omitNorms on these ields, it won't "cost" much for your
index.  (althought i would suggest instead a sime "fields_have_same_value"
field where the tokens are "field3_field4" just for simplicity)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 22:26:45 2007
Return-Path: <java-user-return-27684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45357 invoked from network); 19 Apr 2007 22:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 22:26:44 -0000
Received: (qmail 92347 invoked by uid 500); 19 Apr 2007 22:26:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92316 invoked by uid 500); 19 Apr 2007 22:26:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92305 invoked by uid 99); 19 Apr 2007 22:26:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 15:26:43 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 15:26:35 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hef4w-0004tk-Ml
	for java-user@lucene.apache.org; Thu, 19 Apr 2007 15:26:14 -0700
Message-ID: <10088201.post@talk.nabble.com>
Date: Thu, 19 Apr 2007 15:26:14 -0700 (PDT)
From: HG1212 <furkhans@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Document Boost
In-Reply-To: <359a92830704191418jc640f5fr6187490790f4e3f7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: furkhans@yahoo.com
References: <10086883.post@talk.nabble.com> <359a92830704191418jc640f5fr6187490790f4e3f7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I am setting the boost at index time.

Thanks
-- 
View this message in context: http://www.nabble.com/Document-Boost-tf3609748.html#a10088201
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 22:54:28 2007
Return-Path: <java-user-return-27685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52023 invoked from network); 19 Apr 2007 22:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 22:54:27 -0000
Received: (qmail 39724 invoked by uid 500); 19 Apr 2007 22:54:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39690 invoked by uid 500); 19 Apr 2007 22:54:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39677 invoked by uid 99); 19 Apr 2007 22:54:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 15:54:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 15:54:19 -0700
Received: from [10.200.1.12] (72-18-225-226.static-ip.telepacific.net [72.18.225.226])
	by boom.affinityengines.com (Postfix) with ESMTP id E0ACD1DB161
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 15:53:58 -0700 (PDT)
Message-ID: <4627F377.5050108@affinitycircles.com>
Date: Thu, 19 Apr 2007 15:55:51 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Debian Thunderbird 1.0.2 (X11/20051002)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document Boost
References: <10086883.post@talk.nabble.com> <359a92830704191418jc640f5fr6187490790f4e3f7@mail.gmail.com> <10088201.post@talk.nabble.com>
In-Reply-To: <10088201.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am also releatively new to lucene and was wondering about this.  The 
way it seems to work, is that if you boost a field then you have to 
actually specify that field in your query to benefit from that field 
boost.  Otherwise you'll search the default field and the boost will be 
ignored.  I hacked around this by just adding the field's text to the 
default search field n times where n is the boost for that field.  I 
seriously doubt that this the ideal way to do it, but I couldn't figure 
out how to do it other than reforming all of my queries to search all 
the fields.

If someone has a real solution to this or could shed some more light on 
the practical use of field boosts, I would appreciate it.

Les

HG1212 wrote:

>I am setting the boost at index time.
>
>Thanks
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 23:09:31 2007
Return-Path: <java-user-return-27686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54511 invoked from network); 19 Apr 2007 23:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 23:09:18 -0000
Received: (qmail 69705 invoked by uid 500); 19 Apr 2007 23:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69677 invoked by uid 500); 19 Apr 2007 23:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69666 invoked by uid 99); 19 Apr 2007 23:09:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 16:09:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 16:09:09 -0700
Received: by ug-out-1314.google.com with SMTP id k40so708388ugc
        for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 16:08:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Kc9Nqwg1EZgmZke8msrQb549WQt+RI5WWeZnVVLi+nzBkJSUlzrc7mNv8QfzY2YCzi/+BGnVt3XUEZIQSlFy++jcmPJF2HLQpwyxCxMAHlrviIwPOiD2NMDS8OMp+doIH5NG4xRj1wzy5ijG01e0B9COXrZ0GUSgQBwsYa4QmDM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qxDedIM/teZwpSl2MGBjSHk/b4MxXpVpGZnBpAkS7zRWmANubW/MYK++6LUmv4esyA/3AHabOY16EPLq7Gx7MptZMASOLvR/b/1e+5MNo6PJyxxKCxva8D81uUJ/+/VfrtFF+M5b2EVqSVHf0MApcHvr2nFtQm4adyO1vG/dlBk=
Received: by 10.82.146.14 with SMTP id t14mr3782284bud.1177024127979;
        Thu, 19 Apr 2007 16:08:47 -0700 (PDT)
Received: by 10.82.116.20 with HTTP; Thu, 19 Apr 2007 16:08:47 -0700 (PDT)
Message-ID: <3d2ce8cb0704191608o2a9f0c98ifcbb8763fbc80199@mail.gmail.com>
Date: Thu, 19 Apr 2007 16:08:47 -0700
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: adding a field at index-time
In-Reply-To: <20070418162533.22240@gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070418162533.22240@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/18/07, William Mee <willmeeabo@gmx.net> wrote:
> I'd like to add metadata which I get *after* indexing a document's contents to the index. To be more specific: I'm implementing shingling (detection of near-duplicate documents) and want to add the document fingerprint (which is based on the sequence of tokens) to the index.
>
> There doesn't seem to be an easy way to do this in the Lucene API - in particular, I can't easily update a document which is already indexed. The only way I could get this information *before* adding a document to an index is to create a token stream manually (and then have this happen all over again when the document is indexed). This isn't a satisfying solution. Does anyone have any suggestions of how I could get the fingerprint information into the index? I'd appreciate any input. Thanks!

You coudl write a custom tokenfilter which indexes the fingerprint as
the last token in the field as !fingerprint:123abfe2d3c23df23 or
similar.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 19 23:46:30 2007
Return-Path: <java-user-return-27687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68585 invoked from network); 19 Apr 2007 23:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Apr 2007 23:46:29 -0000
Received: (qmail 30904 invoked by uid 500); 19 Apr 2007 23:46:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30870 invoked by uid 500); 19 Apr 2007 23:46:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30859 invoked by uid 99); 19 Apr 2007 23:46:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 16:46:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 16:46:21 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 448CF5B773; Thu, 19 Apr 2007 16:46:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3ACEE7F403
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 16:46:01 -0700 (PDT)
Date: Thu, 19 Apr 2007 16:46:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Document Boost
In-Reply-To: <4627F377.5050108@affinitycircles.com>
Message-ID: <Pine.LNX.4.58.0704191639510.22510@hal.rescomp.berkeley.edu>
References: <10086883.post@talk.nabble.com> <359a92830704191418jc640f5fr6187490790f4e3f7@mail.gmail.com>
 <10088201.post@talk.nabble.com> <4627F377.5050108@affinitycircles.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


The full post Erick alluded too may be helpful...

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200609.mbox/%3CPine.LNX.4.58.0609271134380.32280@hal.rescomp.berkeley.edu%3E

in general, if your goal is that words in the "metadata" of a document
should be worth more then words in the "body" then you should have two
fields: "metadata" and "body", you shoudl query for the same word in both
fields, and your query should have a query boost on the "metadata" part.

: way it seems to work, is that if you boost a field then you have to
: actually specify that field in your query to benefit from that field

correct ... you are saying "this documents field_X is better then other
document's field_X" .. but that info only comes into play if you actually
use "field_X"

: ignored.  I hacked around this by just adding the field's text to the
: default search field n times where n is the boost for that field.  I
: seriously doubt that this the ideal way to do it, but I couldn't figure
: out how to do it other than reforming all of my queries to search all
: the fields.

that is a feasible solution to the use case where "this doc's use of the
word FOO in field BAR is more significant then the use of the word FOO in
field BAR for any other docs" but 90% of the time those use cases can be
better solved by making a BAR_significant field that only contains the
significant words in BAR and querying both.

for the other 10% of the time, you'll have to wait for Payload based
queries to come along, so when you add FOO to BAR you can give it a
payload that says how important it is.

(or so the Query Payload people say ... i choose to believe them even
though i don't understand them)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 20 00:13:30 2007
Return-Path: <java-user-return-27688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79838 invoked from network); 20 Apr 2007 00:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2007 00:13:28 -0000
Received: (qmail 63920 invoked by uid 500); 20 Apr 2007 00:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62869 invoked by uid 500); 20 Apr 2007 00:13:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62858 invoked by uid 99); 20 Apr 2007 00:13:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 17:13:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 17:13:20 -0700
Received: from [10.200.1.12] (72-18-225-226.static-ip.telepacific.net [72.18.225.226])
	by boom.affinityengines.com (Postfix) with ESMTP id A1ED61DB161
	for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 17:12:59 -0700 (PDT)
Message-ID: <462805FB.1080502@affinitycircles.com>
Date: Thu, 19 Apr 2007 17:14:51 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Debian Thunderbird 1.0.2 (X11/20051002)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document Boost
References: <10086883.post@talk.nabble.com> <359a92830704191418jc640f5fr6187490790f4e3f7@mail.gmail.com> <10088201.post@talk.nabble.com> <4627F377.5050108@affinitycircles.com> <Pine.LNX.4.58.0704191639510.22510@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0704191639510.22510@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Oooooo.... I like the BAR_significant field idea.  It seems that you'd 
have to have one of those for every different level of boosting in your 
document.  But that is significantly easier than reforming a query for 
30-odd fields. 

The next quersion would be should you omit the boosted field words from 
the default searchg field to get the "appropriate" score for that 
document.  In other words, would matching the query in the 
BAR_significant and the default search field return a different score 
than just matching the BAR_significant field for the query 
"BAR_significant:queryword queryword"? They should return the same set 
of results, just curious about how the ranking order might differ.  Not 
overly important, more for my own personal curiosity.

Thanks Chris for the quick response to the previous question, it helped 
a lot.

Les


Chris Hostetter wrote:

>The full post Erick alluded too may be helpful...
>
>http://mail-archives.apache.org/mod_mbox/lucene-java-user/200609.mbox/%3CPine.LNX.4.58.0609271134380.32280@hal.rescomp.berkeley.edu%3E
>
>in general, if your goal is that words in the "metadata" of a document
>should be worth more then words in the "body" then you should have two
>fields: "metadata" and "body", you shoudl query for the same word in both
>fields, and your query should have a query boost on the "metadata" part.
>
>: way it seems to work, is that if you boost a field then you have to
>: actually specify that field in your query to benefit from that field
>
>correct ... you are saying "this documents field_X is better then other
>document's field_X" .. but that info only comes into play if you actually
>use "field_X"
>
>: ignored.  I hacked around this by just adding the field's text to the
>: default search field n times where n is the boost for that field.  I
>: seriously doubt that this the ideal way to do it, but I couldn't figure
>: out how to do it other than reforming all of my queries to search all
>: the fields.
>
>that is a feasible solution to the use case where "this doc's use of the
>word FOO in field BAR is more significant then the use of the word FOO in
>field BAR for any other docs" but 90% of the time those use cases can be
>better solved by making a BAR_significant field that only contains the
>significant words in BAR and querying both.
>
>for the other 10% of the time, you'll have to wait for Payload based
>queries to come along, so when you add FOO to BAR you can give it a
>payload that says how important it is.
>
>(or so the Query Payload people say ... i choose to believe them even
>though i don't understand them)
>
>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 20 00:24:26 2007
Return-Path: <java-user-return-27689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82270 invoked from network); 20 Apr 2007 00:24:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2007 00:24:25 -0000
Received: (qmail 75454 invoked by uid 500); 20 Apr 2007 00:24:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75422 invoked by uid 500); 20 Apr 2007 00:24:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75411 invoked by uid 99); 20 Apr 2007 00:24:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 17:24:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 17:24:18 -0700
Received: by ug-out-1314.google.com with SMTP id k40so716980ugc
        for <java-user@lucene.apache.org>; Thu, 19 Apr 2007 17:23:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YqJebF+uSFoaSpORG5t1xuZZ9++iCSdwZfD05zU/SSm1q3799hNlWuHLnwUuEUKoSU5vjVeD8QZIhiljiAQny/IHmUMro5tTRCP0tnA3LMHu4T6EmkB7TcHPdkS8Wano3zk0TGsYJOeFGq07ERX6IY2b853aY4S2bvgFgHGSq+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e2/1+0vtnmJGIizkD6eF7lsSAiuPYvFIbPggnvg4k6JeLkaFqap0FLEVB0bx8DoJb5fewuqg+KTHeOpCFs0dNAoQeQfUAIBvgky3gbDLerNhMQxsZ7vJv6c0dJKASw5Ra9+hZ82zVry+OCes8ExA8SH3SebihUvA//XQRgbOE7o=
Received: by 10.82.175.2 with SMTP id x2mr3877494bue.1177028635980;
        Thu, 19 Apr 2007 17:23:55 -0700 (PDT)
Received: by 10.82.190.11 with HTTP; Thu, 19 Apr 2007 17:23:55 -0700 (PDT)
Message-ID: <359a92830704191723u6f86c9fbpc8fae1aff1e049cc@mail.gmail.com>
Date: Thu, 19 Apr 2007 20:23:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document Boost
In-Reply-To: <462805FB.1080502@affinitycircles.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49134_18524357.1177028635934"
References: <10086883.post@talk.nabble.com>
	 <359a92830704191418jc640f5fr6187490790f4e3f7@mail.gmail.com>
	 <10088201.post@talk.nabble.com> <4627F377.5050108@affinitycircles.com>
	 <Pine.LNX.4.58.0704191639510.22510@hal.rescomp.berkeley.edu>
	 <462805FB.1080502@affinitycircles.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49134_18524357.1177028635934
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I hate to ask this (actually, I don't hate it, but...) "what behavior
of the scoring are you actually finding doesn't fit your needs?".

The reason I ask is that I've been asked to change the scoring,
that is, set boosts, based on some vague notion of "how
things should work" that is often just the fevered imagination
of someone rather than an actual set of search results that are
unsatisfactory.

Of course, a geek's response is "Sure, I can make it do that."
without the concomitant analysis of whether the users would
ever notice.

Anyway, just a rant on implementing features that do no real
good and delay delivery for no good reason.

You may very well have very good reasons to want to fiddle with
boosts, but I thought I'd mention it <G>....

Erick

On 4/19/07, Les Fletcher <les@affinitycircles.com> wrote:
>
> Oooooo.... I like the BAR_significant field idea.  It seems that you'd
> have to have one of those for every different level of boosting in your
> document.  But that is significantly easier than reforming a query for
> 30-odd fields.
>
> The next quersion would be should you omit the boosted field words from
> the default searchg field to get the "appropriate" score for that
> document.  In other words, would matching the query in the
> BAR_significant and the default search field return a different score
> than just matching the BAR_significant field for the query
> "BAR_significant:queryword queryword"? They should return the same set
> of results, just curious about how the ranking order might differ.  Not
> overly important, more for my own personal curiosity.
>
> Thanks Chris for the quick response to the previous question, it helped
> a lot.
>
> Les
>
>
> Chris Hostetter wrote:
>
> >The full post Erick alluded too may be helpful...
> >
> >
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200609.mbox/%3CPine.LNX.4.58.0609271134380.32280@hal.rescomp.berkeley.edu%3E
> >
> >in general, if your goal is that words in the "metadata" of a document
> >should be worth more then words in the "body" then you should have two
> >fields: "metadata" and "body", you shoudl query for the same word in both
> >fields, and your query should have a query boost on the "metadata" part.
> >
> >: way it seems to work, is that if you boost a field then you have to
> >: actually specify that field in your query to benefit from that field
> >
> >correct ... you are saying "this documents field_X is better then other
> >document's field_X" .. but that info only comes into play if you actually
> >use "field_X"
> >
> >: ignored.  I hacked around this by just adding the field's text to the
> >: default search field n times where n is the boost for that field.  I
> >: seriously doubt that this the ideal way to do it, but I couldn't figure
> >: out how to do it other than reforming all of my queries to search all
> >: the fields.
> >
> >that is a feasible solution to the use case where "this doc's use of the
> >word FOO in field BAR is more significant then the use of the word FOO in
> >field BAR for any other docs" but 90% of the time those use cases can be
> >better solved by making a BAR_significant field that only contains the
> >significant words in BAR and querying both.
> >
> >for the other 10% of the time, you'll have to wait for Payload based
> >queries to come along, so when you add FOO to BAR you can give it a
> >payload that says how important it is.
> >
> >(or so the Query Payload people say ... i choose to believe them even
> >though i don't understand them)
> >
> >
> >
> >-Hoss
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49134_18524357.1177028635934--

From java-user-return-27690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 20 01:25:58 2007
Return-Path: <java-user-return-27690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11371 invoked from network); 20 Apr 2007 01:25:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2007 01:25:57 -0000
Received: (qmail 34627 invoked by uid 500); 20 Apr 2007 01:25:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34596 invoked by uid 500); 20 Apr 2007 01:25:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34585 invoked by uid 99); 20 Apr 2007 01:25:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 18:25:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 18:25:47 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 7623A4ED8D7
	for <java-user@lucene.apache.org>; Fri, 20 Apr 2007 11:25:00 +1000 (EST)
Message-ID: <462816E5.2000406@nuix.com>
Date: Fri, 20 Apr 2007 11:27:01 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070415)
MIME-Version: 1.0
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: IndexReader method semantics
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all.

I'm considering making a kind of IndexReader where each time terms() is 
called it might return a different sequence even though the reader 
hasn't been reopened.

Would that kind of thing conceivably cause problems anywhere else in the 
framework?  Which is to ask, do other parts of the framework implement 
their own caching of the TermEnum, or is all the caching implemented in 
the reader and TermEnum implementations?

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 20 04:33:49 2007
Return-Path: <java-user-return-27691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68210 invoked from network); 20 Apr 2007 04:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2007 04:33:48 -0000
Received: (qmail 23691 invoked by uid 500); 20 Apr 2007 04:33:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23652 invoked by uid 500); 20 Apr 2007 04:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23641 invoked by uid 99); 20 Apr 2007 04:33:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 21:33:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2007 21:33:40 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HekoC-00037N-Fh
	for java-user@lucene.apache.org; Thu, 19 Apr 2007 21:33:20 -0700
Message-ID: <10091264.post@talk.nabble.com>
Date: Thu, 19 Apr 2007 21:33:20 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to calculate centroid from HITS?
In-Reply-To: <E97ED3A2-22B5-473F-973A-0324DDBC6D7C@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
References: <9802563.post@talk.nabble.com> <E97ED3A2-22B5-473F-973A-0324DDBC6D7C@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


I figured out that there are already java API's written for this and
available. LucQE has that : 

QueryExpansion.expandQuery(java.lang.String queryStr,
org.apache.lucene.search.Hits hits, java.util.Properties prop) which returns
the expanded query (will have centroid)



Grant Ingersoll-6 wrote:
> 
> You could use Term Vectors (TVs) to do this, but I don't know of any  
> existing code for it.  Might be a good contrib module, though.   
> Search this list or see Lucene In Action or I have some TV sample  
> code at http://www.cnlp.org/apachecon2005/
> 
> You might also check the Carrot2 project, which has a number of  
> clustering algorithms and some Lucene support, although I don't know  
> if it does specifically what you want.
> 
> On Apr 2, 2007, at 10:14 PM, Lokeya wrote:
> 
>>
>> Hi All,
>>
>> I have queried and have got a HITS object which is a collection of
>> documents. I want to find out the centroid of these documents.  
>> Centroid =
>> Top Most 35(for eg)common  terms across all the documents in the HITS
>> object.
>>
>> Is there any API in Lucene for this?
>>
>> Thanks in Advance.
>> -- 
>> View this message in context: http://www.nabble.com/How-to- 
>> calculate-centroid-from-HITS--tf3509432.html#a9802563
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
> 
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
> LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-calculate-centroid-from-HITS--tf3509432.html#a10091264
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 20 08:26:10 2007
Return-Path: <java-user-return-27692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39619 invoked from network); 20 Apr 2007 08:26:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2007 08:26:09 -0000
Received: (qmail 65077 invoked by uid 500); 20 Apr 2007 08:26:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64926 invoked by uid 500); 20 Apr 2007 08:26:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64915 invoked by uid 99); 20 Apr 2007 08:26:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2007 01:26:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2007 01:26:00 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HeoR2-0007YW-Er
	for java-user@lucene.apache.org; Fri, 20 Apr 2007 01:25:40 -0700
Message-ID: <10093004.post@talk.nabble.com>
Date: Fri, 20 Apr 2007 01:25:40 -0700 (PDT)
From: raikoe <lucene@keskus.de>
To: java-user@lucene.apache.org
Subject: Re: TestSpellCheck not working
In-Reply-To: <9979952.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lucene@keskus.de
References: <9823734.post@talk.nabble.com> <9824450.post@talk.nabble.com> <9979115.post@talk.nabble.com> <9979952.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Dave,

i opened an JIRA issue under
https://issues.apache.org/jira/browse/LUCENE-865 and included a patch which
resolves that issue. It was due to some stale instances of IndexReader and
IndexSearcher.

Regards,
Raiko


davep626 wrote:
> 
> Interesting, that does not work for me either.  It appears the first test
> should expect that the index has doubled in size.
> 
> 

-- 
View this message in context: http://www.nabble.com/TestSpellCheck-not-working-tf3521578.html#a10093004
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 20 13:35:03 2007
Return-Path: <java-user-return-27693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63175 invoked from network); 20 Apr 2007 13:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2007 13:35:02 -0000
Received: (qmail 15766 invoked by uid 500); 20 Apr 2007 13:35:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15679 invoked by uid 500); 20 Apr 2007 13:35:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15641 invoked by uid 99); 20 Apr 2007 13:35:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2007 06:35:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.42 as permitted sender)
Received: from [206.46.252.42] (HELO vms042pub.verizon.net) (206.46.252.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2007 06:34:53 -0700
Received: from dorthy ([72.73.131.221])
 by vms042.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JGS00JN1TP4S4IB@vms042.mailsrvcs.net> for
 java-user@lucene.apache.org; Fri, 20 Apr 2007 08:34:17 -0500 (CDT)
Date: Fri, 20 Apr 2007 08:34:38 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Can indexing logic on one host update an index on another host?
To: <java-user@lucene.apache.org>
Message-id: <012201c78350$a496b130$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Can indexing logic on one host update an index on another host?

In my application the files I wish to index/search live in distributed 
vaults on "safe" hosts in the intranet. Accessing those files is strictly 
controller by application logic in a (Tomcat) servlet.

Crawling the vaults is not an option.

Now what would be nice is if I could have the servlet that manages a vault 
index new files as they are added to the vault. Unfortunately the index 
lives on the main application server not the vault. So some how I need to be 
able to index files on the vault host as they are added but update the 
master index on the main application host.

I read blurbs about merge and think maybe I might be able to do something 
with that, but I am unsure how that would work or if there is another way.

Any ideas, suggestions would be very much appreciated.



jim s


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 20 16:41:54 2007
Return-Path: <java-user-return-27694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69199 invoked from network); 20 Apr 2007 16:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2007 16:41:54 -0000
Received: (qmail 39397 invoked by uid 500); 20 Apr 2007 16:41:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38946 invoked by uid 500); 20 Apr 2007 16:41:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38935 invoked by uid 99); 20 Apr 2007 16:41:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2007 09:41:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssiren@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2007 09:41:45 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1202718mue
        for <java-user@lucene.apache.org>; Fri, 20 Apr 2007 09:41:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:x-enigmail-version:content-type:content-transfer-encoding;
        b=XioIFud7w5EtRZlqB4OwcTxOqxBSBGKXLSg2j1BampgQ/7HLhwqMUO+8Wa0n08E/tGNPDzvXuQzJ5NpyVHnqy9Hlm1V/LI+P2FUdy8ZX6TVdmwKfevwfpc8fCW5Jq0xKc6Bi+DCqqpGPoCq5htMynETSuizYEpt577yAqEVY0hg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:x-enigmail-version:content-type:content-transfer-encoding;
        b=UXbtIXYjIcLWQr3y3TmdOG/47sa4yT37ximFcZz8kuuNHtZSRgFXR0VSRfuv6Jjh92wR2tvzbS77BV8dpDl2YDlDvCkSbOsJbJNXappQcg5U/a4c6xjrU4XixtYb/iMVDBSfU0U/nMFLN9LwPhFw9ueX1QgZdf7GNXypuIO8zwY=
Received: by 10.82.158.12 with SMTP id g12mr4990280bue.1177087283939;
        Fri, 20 Apr 2007 09:41:23 -0700 (PDT)
Received: from ?84.231.94.188? ( [84.231.94.188])
        by mx.google.com with ESMTP id y37sm276855iky.2007.04.20.09.41.19;
        Fri, 20 Apr 2007 09:41:20 -0700 (PDT)
Message-ID: <4628ED2E.30201@gmail.com>
Date: Fri, 20 Apr 2007 19:41:18 +0300
From: Sami Siren <ssiren@gmail.com>
User-Agent: Thunderbird 1.5.0.10 (X11/20070301)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene BOF @ apachecon.eu ?
References: <461CFE7B.5050904@gmail.com> <0A480D05-44CF-402C-9BAD-9D2B1C1737DB@apache.org>
In-Reply-To: <0A480D05-44CF-402C-9BAD-9D2B1C1737DB@apache.org>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
> +1
>
> On Apr 11, 2007, at 11:27 AM, Sami Siren wrote:
>
>> Are there any plans to put together a Lucene BOF at Amsterdam?

FYI,

there is an proposal for a BOF including Lucene in
http://wiki.apache.org/apachecon/BirdsOfaFeatherEu07

--
 Sami Siren



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 20 19:09:06 2007
Return-Path: <java-user-return-27695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29319 invoked from network); 20 Apr 2007 19:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Apr 2007 19:09:04 -0000
Received: (qmail 46344 invoked by uid 500); 20 Apr 2007 19:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46313 invoked by uid 500); 20 Apr 2007 19:08:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46271 invoked by uid 99); 20 Apr 2007 19:08:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2007 12:08:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of kirk@languagecomputer.com designates 216.84.45.195 as permitted sender)
Received: from [216.84.45.195] (HELO www.languagecomputer.com) (216.84.45.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2007 12:08:35 -0700
Received: from [192.168.1.79] (hfw.languagecomputer.com [216.84.45.194])
	by www.languagecomputer.com (Postfix) with ESMTP id 8A1EB2B930
	for <java-user@lucene.apache.org>; Fri, 20 Apr 2007 14:14:26 -0500 (CDT)
Message-ID: <46290F9E.10303@languagecomputer.com>
Date: Fri, 20 Apr 2007 14:08:14 -0500
From: Kirk Roberts <kirk@languagecomputer.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher vs MultiReader
References: <4625168B.9070508@languagecomputer.com> <FE71BC3C-DBDF-4AB4-A766-0AB053A41CC4@apache.org>
In-Reply-To: <FE71BC3C-DBDF-4AB4-A766-0AB053A41CC4@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
> I will try to take a crack at these, but not sure I know exactly what 
> you are looking for, so maybe others can chime in too.
> 
> At any rate, MultiSearcher has been around a lot longer (2001 versus 
> 2004, or at least that is what the changelog seems to indicate) and it 
> works over Searchables, including RemoteSearchable.  So you could use it 
> to combine results from remote searches as well, MultiReader can only 
> work over IndexReaders and I am not aware of any way that it can do 
> remote index reading, so there are different viable use cases for the two.


Really I just want to know the fastest mechanism for searching.  Since I 
  don't use a RemoteSearcher, it sounds like using an IndexSearcher on a 
MultiReader is the way to go.

>> 2. Why doesn't the MultiReader implement the rather nice methods that 
>> the MultiSearcher has (I'm thinking specifically of subSearcher(int) 
>> and subDoc(int))?
> 
> I suppose subDoc might make sense, but subSearcher does not for a 
> Reader.  Perhaps the private readerIndex() method on MultiReader is 
> something you are interested in?  Is that getting at what you want?  
> Maybe you can submit a patch that makes readerIndex public if that is 
> what you are interested in?

Obviously the methods would have to be appropriately named :).  It 
sounds like some development work will have to be done on this then.  I 
have no problem doing it myself and submitting a patch (I can pick up 
this discussion on the developer list when I have time), but for now is 
it safe to assume that if I have the number of documents per IndexReader 
and the order of the readers that I can calculate the "real" IndexReader 
and the "real" docid for that sub-IndexReader?  I realize I might not be 
very clear, so lets see if I can re-state my example more clearly in 
psedo-code (apologize in advance):

IndexReader r1 (size = 100 documents)
IndexReader r2 (size = 50 documents)
IndexReader r3 (size = 75 documents)

IndexReader[] readers = new IndexReader[] { r1, r2, r3 }
MultiReader mr = new MultiReader(readers)

// get docid in MultiReader
int docid = magicFindDocumentFunc(mr);

for (IndexReader r : readers) {
   if (docid > r.numDocs()) {
     docid -= r.numDocs()
   }
   else {
     // r is the IndexReader that the desired Document
     // docid's current value is lucene id of that Document within r
   }
}

I know I can get the Document straight from the MultiReader but in my 
case I need to know which exact IndexReader object the Document is 
really coming from.

Thanks in advance for any help,
Kirk

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 21 13:09:06 2007
Return-Path: <java-user-return-27696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45182 invoked from network); 21 Apr 2007 13:09:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2007 13:09:05 -0000
Received: (qmail 36336 invoked by uid 500); 21 Apr 2007 13:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36309 invoked by uid 500); 21 Apr 2007 13:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36298 invoked by uid 99); 21 Apr 2007 13:09:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 06:09:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.48 as permitted sender)
Received: from [206.46.252.48] (HELO vms048pub.verizon.net) (206.46.252.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 06:08:56 -0700
Received: from dorthy ([72.73.131.221])
 by vms048.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JGU00I3KN62GUOA@vms048.mailsrvcs.net> for
 java-user@lucene.apache.org; Sat, 21 Apr 2007 08:08:26 -0500 (CDT)
Date: Sat, 21 Apr 2007 08:08:49 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re:Merging Indeces
To: <java-user@lucene.apache.org>
Message-id: <020401c78416$33f54f10$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

"Lucene has no concept of "document identity" in that you can index
the same document 15 times in a row and Lucene will have 15 entries. "

Is this true? When ever I run the demo indexing logic document already 
indexed are skipped. What am I missing.

jim s


start java org.apache.lucene.demo.IndexHTML -index /opt/lucene/index  ..


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 21 13:33:11 2007
Return-Path: <java-user-return-27697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56819 invoked from network); 21 Apr 2007 13:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2007 13:33:10 -0000
Received: (qmail 59759 invoked by uid 500); 21 Apr 2007 13:33:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59724 invoked by uid 500); 21 Apr 2007 13:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59713 invoked by uid 99); 21 Apr 2007 13:33:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 06:33:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 06:33:00 -0700
Received: by ug-out-1314.google.com with SMTP id k40so991844ugc
        for <java-user@lucene.apache.org>; Sat, 21 Apr 2007 06:32:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sda/BscMNFofmvNlaX3OqLhzsknR8Io/qc5YvrhSrJv7Oa7NsUSBU998iKTh92jMafUEltYt41hG2kfEiAsBtoiy42D/+enWAlAW0hGkjrXF2wY7+cGmG4DPa1YtLm/X98Ev8dhIAvsq16n+8dKMmwKF7ZECHPcAxE2/TIMp76c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kXk3DFCsOUKzGPl6wky1QNwr4/kc/wK/v8sEGMgKtCC5RlI6Wy7oO4ePbMmKTldouQRRsyFtYfhSax6ySV1m7ImapKDEQ+3UU11eg1NEmY9Uui9AcmWc4rOhr2kThDlA8DdiVqrxzhe6taBmFdlwoBYhk7vcelAkAH5IcYVP2Qc=
Received: by 10.82.107.15 with SMTP id f15mr5999104buc.1177162358779;
        Sat, 21 Apr 2007 06:32:38 -0700 (PDT)
Received: by 10.82.156.13 with HTTP; Sat, 21 Apr 2007 06:32:38 -0700 (PDT)
Message-ID: <359a92830704210632ud89a8c1gdcd98ed2e7e8eb8e@mail.gmail.com>
Date: Sat, 21 Apr 2007 09:32:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merging Indeces
In-Reply-To: <020401c78416$33f54f10$2e01a8c0@dorthy>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68284_26387397.1177162358725"
References: <020401c78416$33f54f10$2e01a8c0@dorthy>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68284_26387397.1177162358725
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Take a look at the source in IndexHTML.java (C:\lucene-
2.1.0\src\demo\org\apache\lucene\demo on my machine). The code goes through
quite a bit of effort to remove old documents identified by uid. My comment
was really that the underlying engine doesn't recognize duplicates, any such
requirements must be implemented on top of the base engine.

But as an exercise, how would you imagine the *engine* could implement
anything like this? The only thing I can imagine is that a field would be
identified as unique (similar to a database UNIQUE constraint on a column).
But now we're mixing databases and text searching, and I don't want to go
there....

Of course, this would all work if we could just create the DWIM algorithm...
Do What I Mean......

Erick

On 4/21/07, jim shirreffs <jpsb@verizon.net> wrote:
>
> "Lucene has no concept of "document identity" in that you can index
> the same document 15 times in a row and Lucene will have 15 entries. "
>
> Is this true? When ever I run the demo indexing logic document already
> indexed are skipped. What am I missing.
>
> jim s
>
>
> start java org.apache.lucene.demo.IndexHTML -index /opt/lucene/index  ..
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_68284_26387397.1177162358725--

From java-user-return-27698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 21 15:16:41 2007
Return-Path: <java-user-return-27698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81080 invoked from network); 21 Apr 2007 15:16:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2007 15:16:40 -0000
Received: (qmail 64889 invoked by uid 500); 21 Apr 2007 15:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63843 invoked by uid 500); 21 Apr 2007 15:16:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63832 invoked by uid 99); 21 Apr 2007 15:16:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 08:16:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 08:16:30 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HfHJp-000106-Jn
	for java-user@lucene.apache.org; Sat, 21 Apr 2007 08:16:09 -0700
Message-ID: <10118038.post@talk.nabble.com>
Date: Sat, 21 Apr 2007 08:16:09 -0700 (PDT)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Leading and trailing wildcard together
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I've noticed that from Lucene 2.1 leading wildcard can be enabled using
QueryParser.setAllowLeadingWildcard(true), however I wasn't able to search
for *Foo* (while "?Foo*" and even "?*Foo*" works). Is it possible to have
leading and trailing star wildcard together?

Thanks.
-- 
View this message in context: http://www.nabble.com/Leading-and-trailing-wildcard-together-tf3623405.html#a10118038
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 21 15:46:42 2007
Return-Path: <java-user-return-27699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93118 invoked from network); 21 Apr 2007 15:46:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2007 15:46:42 -0000
Received: (qmail 93560 invoked by uid 500); 21 Apr 2007 15:46:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93522 invoked by uid 500); 21 Apr 2007 15:46:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93511 invoked by uid 99); 21 Apr 2007 15:46:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 08:46:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.42 as permitted sender)
Received: from [206.46.252.42] (HELO vms042pub.verizon.net) (206.46.252.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 08:46:34 -0700
Received: from dorthy ([72.73.131.221])
 by vms042.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JGU00756UGK24M7@vms042.mailsrvcs.net> for
 java-user@lucene.apache.org; Sat, 21 Apr 2007 10:45:57 -0500 (CDT)
Date: Sat, 21 Apr 2007 10:46:20 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: Merging Indeces
To: <java-user@lucene.apache.org>
Message-id: <022701c7842c$34de2670$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <020401c78416$33f54f10$2e01a8c0@dorthy>
 <359a92830704210632ud89a8c1gdcd98ed2e7e8eb8e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

OK I get it, thanks for the info, just told my boss the opposite, guess I 
will have to send another email.


thanks again

jim s

----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Saturday, April 21, 2007 8:32 AM
Subject: Re: Merging Indeces


> Take a look at the source in IndexHTML.java (C:\lucene-
> 2.1.0\src\demo\org\apache\lucene\demo on my machine). The code goes 
> through
> quite a bit of effort to remove old documents identified by uid. My 
> comment
> was really that the underlying engine doesn't recognize duplicates, any 
> such
> requirements must be implemented on top of the base engine.
>
> But as an exercise, how would you imagine the *engine* could implement
> anything like this? The only thing I can imagine is that a field would be
> identified as unique (similar to a database UNIQUE constraint on a 
> column).
> But now we're mixing databases and text searching, and I don't want to go
> there....
>
> Of course, this would all work if we could just create the DWIM 
> algorithm...
> Do What I Mean......
>
> Erick
>
> On 4/21/07, jim shirreffs <jpsb@verizon.net> wrote:
>>
>> "Lucene has no concept of "document identity" in that you can index
>> the same document 15 times in a row and Lucene will have 15 entries. "
>>
>> Is this true? When ever I run the demo indexing logic document already
>> indexed are skipped. What am I missing.
>>
>> jim s
>>
>>
>> start java org.apache.lucene.demo.IndexHTML -index /opt/lucene/index  ..
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 21 22:53:06 2007
Return-Path: <java-user-return-27700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89923 invoked from network); 21 Apr 2007 22:53:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2007 22:53:05 -0000
Received: (qmail 99961 invoked by uid 500); 21 Apr 2007 22:53:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99924 invoked by uid 500); 21 Apr 2007 22:53:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99911 invoked by uid 99); 21 Apr 2007 22:53:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 15:53:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 15:52:57 -0700
Received: (qmail 28818 invoked from network); 21 Apr 2007 22:52:35 -0000
Received: from unknown (HELO p5b0dc63c.dip.t-dialin.net) ([pbs]695637@[91.13.198.60])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 21 Apr 2007 22:52:35 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Leading and trailing wildcard together
Date: Sun, 22 Apr 2007 00:54:31 +0200
User-Agent: KMail/1.8.2
References: <10118038.post@talk.nabble.com>
In-Reply-To: <10118038.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200704220054.31319@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Saturday 21 April 2007 17:16, Mohsen Saboorian wrote:

> however I wasn't able to search
> for *Foo* (while "?Foo*" and even "?*Foo*" works). Is it possible to
> have leading and trailing star wildcard together?

That's a bug in the 2.1 release which has been fixed in SVN trunk. There's 
also a patch in the bug tracking system about that (sorry, I don't 
remember the number now).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 21 23:23:57 2007
Return-Path: <java-user-return-27701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96979 invoked from network); 21 Apr 2007 23:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Apr 2007 23:23:56 -0000
Received: (qmail 16308 invoked by uid 500); 21 Apr 2007 23:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16275 invoked by uid 500); 21 Apr 2007 23:23:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16264 invoked by uid 99); 21 Apr 2007 23:23:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 16:23:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 16:23:50 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id AC5C820E69
	for <java-user@lucene.apache.org>; Sat, 21 Apr 2007 16:23:28 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <46290F9E.10303@languagecomputer.com>
References: <4625168B.9070508@languagecomputer.com> <FE71BC3C-DBDF-4AB4-A766-0AB053A41CC4@apache.org> <46290F9E.10303@languagecomputer.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1B6183EB-E7BD-41E4-B061-5771961F7333@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: MultiSearcher vs MultiReader
Date: Sat, 21 Apr 2007 19:23:26 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Apr 20, 2007, at 3:08 PM, Kirk Roberts wrote:

> Grant Ingersoll wrote:
>> I will try to take a crack at these, but not sure I know exactly  
>> what you are looking for, so maybe others can chime in too.
>> At any rate, MultiSearcher has been around a lot longer (2001  
>> versus 2004, or at least that is what the changelog seems to  
>> indicate) and it works over Searchables, including  
>> RemoteSearchable.  So you could use it to combine results from  
>> remote searches as well, MultiReader can only work over  
>> IndexReaders and I am not aware of any way that it can do remote  
>> index reading, so there are different viable use cases for the two.
>
>
> Really I just want to know the fastest mechanism for searching.   
> Since I  don't use a RemoteSearcher, it sounds like using an  
> IndexSearcher on a MultiReader is the way to go.
>
>>> 2. Why doesn't the MultiReader implement the rather nice methods  
>>> that the MultiSearcher has (I'm thinking specifically of  
>>> subSearcher(int) and subDoc(int))?
>> I suppose subDoc might make sense, but subSearcher does not for a  
>> Reader.  Perhaps the private readerIndex() method on MultiReader  
>> is something you are interested in?  Is that getting at what you  
>> want?  Maybe you can submit a patch that makes readerIndex public  
>> if that is what you are interested in?
>
> Obviously the methods would have to be appropriately named :).  It  
> sounds like some development work will have to be done on this  
> then.  I have no problem doing it myself and submitting a patch (I  
> can pick up this discussion on the developer list when I have  
> time), but for now is it safe to assume that if I have the number  
> of documents per IndexReader and the order of the readers that I  
> can calculate the "real" IndexReader and the "real" docid for that  
> sub-IndexReader?  I realize I might not be very clear, so lets see  
> if I can re-state my example more clearly in psedo-code (apologize  
> in advance):

Doesn't MultiReader do this already in the readerIndex() method?  It  
has to figure out which IndexReader the document is in in order to  
retrieve it in the first place.  This is done in readerIndex(int).
Unless I still am not understanding what you mean :-).  Your code  
below looks a lot like what is in readerIndex() though, right?

>
> IndexReader r1 (size = 100 documents)
> IndexReader r2 (size = 50 documents)
> IndexReader r3 (size = 75 documents)
>
> IndexReader[] readers = new IndexReader[] { r1, r2, r3 }
> MultiReader mr = new MultiReader(readers)
>
> // get docid in MultiReader
> int docid = magicFindDocumentFunc(mr);
>
> for (IndexReader r : readers) {
>   if (docid > r.numDocs()) {
>     docid -= r.numDocs()
>   }
>   else {
>     // r is the IndexReader that the desired Document
>     // docid's current value is lucene id of that Document within r
>   }
> }
>
> I know I can get the Document straight from the MultiReader but in  
> my case I need to know which exact IndexReader object the Document  
> is really coming from.
>
> Thanks in advance for any help,
> Kirk
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 22 00:32:35 2007
Return-Path: <java-user-return-27702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7077 invoked from network); 22 Apr 2007 00:32:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2007 00:32:34 -0000
Received: (qmail 51777 invoked by uid 500); 22 Apr 2007 00:32:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51482 invoked by uid 500); 22 Apr 2007 00:32:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51467 invoked by uid 99); 22 Apr 2007 00:32:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 17:32:35 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2007 17:32:27 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3M0W5ot140508
	for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 00:32:05 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3M0W5qR3612890
	for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 02:32:05 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3M0W55G007114
	for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 02:32:05 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3M0W4ta007111
	for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 02:32:04 +0200
In-Reply-To: <200704220054.31319@danielnaber.de>
Subject: Re: Leading and trailing wildcard together
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF5429B957.30B95694-ON882572C5.0002BAF5-882572C5.0002D6CC@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sat, 21 Apr 2007 17:31:00 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 22/04/2007 03:32:04
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel Naber <lucenelist2005@danielnaber.de> wrote on 21/04/2007 15:54:31:

> On Saturday 21 April 2007 17:16, Mohsen Saboorian wrote:
>
> > however I wasn't able to search
> > for *Foo* (while "?Foo*" and even "?*Foo*" works). Is it possible to
> > have leading and trailing star wildcard together?
>
> That's a bug in the 2.1 release which has been fixed in SVN trunk.
There's
> also a patch in the bug tracking system about that (sorry, I don't
> remember the number now).

That was LUCENE-813.

>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 22 10:29:07 2007
Return-Path: <java-user-return-27703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98957 invoked from network); 22 Apr 2007 10:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2007 10:29:06 -0000
Received: (qmail 90553 invoked by uid 500); 22 Apr 2007 10:29:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89503 invoked by uid 500); 22 Apr 2007 10:29:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89472 invoked by uid 99); 22 Apr 2007 10:29:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 03:29:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 03:28:58 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1553181wxd
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 03:28:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=oxXzK+XlnYQQP/UDvHx6HlpVmi70DoCoUylZYxj/sV/9qZyqjWPukVJJOAXaN+ehwnaWik5rVLgVAJ+u/VUX33fHKu6+kOS8V6Bmz1EhlDjBJ8z9reOxENCizEex4S7q8Wp1m9sUdtg8hpB9hFBHiSMawNDo1A8oY4mykpBvj7g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=upGxjXOy7WQVau9MtYLTBUrXbdhPQ9Ipa1QU99DTBMCMxt79SeL/VrKpHA4KAtzJsQjPQ6tnx93Xk3Jin7KGNhFejKXy08BhaC+xFcT6zcmtw0/zF/k8X4P2nMuYYQoKoXKh3TiB8+8Ptb7rzqNSW+S4UrPm/rdT/x0/RjbX5ME=
Received: by 10.70.131.19 with SMTP id e19mr8256482wxd.1177237717452;
        Sun, 22 Apr 2007 03:28:37 -0700 (PDT)
Received: by 10.70.76.12 with HTTP; Sun, 22 Apr 2007 03:28:37 -0700 (PDT)
Message-ID: <bddd3c950704220328oe456aa4wc6b7ef75f62fe4d5@mail.gmail.com>
Date: Sun, 22 Apr 2007 14:58:37 +0430
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Top Score Collector
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54984_1984617.1177237717403"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54984_1984617.1177237717403
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi list.
I am trying to implement some TopScoreHitCollector class; a kind of
TopDocCollector which collects the documents the score of which is higher
than a threshold. The threshold will be configurable in the constructor of
the class. There is seemingly a document starvation about TopDocCollector as
I could not find anything other than javadocs. My copy of lucene book seems
to be too old and could not provide any help in this regard. I know this
must be quite easy but I don't know where to start. Any help?

--jaf

------=_Part_54984_1984617.1177237717403--

From java-user-return-27704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 22 14:44:41 2007
Return-Path: <java-user-return-27704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51906 invoked from network); 22 Apr 2007 14:44:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2007 14:44:40 -0000
Received: (qmail 78158 invoked by uid 500); 22 Apr 2007 14:44:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78121 invoked by uid 500); 22 Apr 2007 14:44:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78109 invoked by uid 99); 22 Apr 2007 14:44:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 07:44:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 07:44:32 -0700
Received: by py-out-1112.google.com with SMTP id a25so1070418pyi
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 07:44:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=oUlSWLtX2K9fK+08KEJgRnclJXW8Q16NKhhrZR9nrlsrXYQPtjxZGoI7bDWR7U9CD/HqztMJIqdaZLJuQ/wywWdgM+08jOQtCArNgJ7OIUbeIYwD0PFxF0aQkeAI+c0fMYuinn2Rc9dJk+qqdGpiMs/EjDqRbp+cz+ixIRpl9r4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=jF0GG7fZCq0wtTbchYF1hYNZMA4/80DbZqThOghZB7J+8jla4+9AxgORJu1wcxkWCdPFgoDKIWGF51tNaGQdiaYX07Rmp3BMa1SbjT/WUwE4ktaDGx/0DoYx5q5jW0SGqaFRnuRnVfYwllVSoDzvFBC+lXcK1SYtf53H2SMm+dk=
Received: by 10.35.59.5 with SMTP id m5mr9112834pyk.1177253051640;
        Sun, 22 Apr 2007 07:44:11 -0700 (PDT)
Received: by 10.35.98.19 with HTTP; Sun, 22 Apr 2007 07:44:11 -0700 (PDT)
Message-ID: <c68e39170704220744o35d076f2x52bc497f32b521ac@mail.gmail.com>
Date: Sun, 22 Apr 2007 10:44:11 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Top Score Collector
In-Reply-To: <bddd3c950704220328oe456aa4wc6b7ef75f62fe4d5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <bddd3c950704220328oe456aa4wc6b7ef75f62fe4d5@mail.gmail.com>
X-Google-Sender-Auth: ebd3e6c6815cfd86
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/22/07, jafarim <jafarim@gmail.com> wrote:
> I am trying to implement some TopScoreHitCollector class; a kind of
> TopDocCollector which collects the documents the score of which is higher
> than a threshold. The threshold will be configurable in the constructor of
> the class. There is seemingly a document starvation about TopDocCollector as
> I could not find anything other than javadocs. My copy of lucene book seems
> to be too old and could not provide any help in this regard. I know this
> must be quite easy but I don't know where to start. Any help?
>
> --jaf
>


As far as documentation, TopDocsCollector  is really an expert-level class
and is public more due to it needing in Nutch than it being a necessary
part of the public API.

TopDocsCollector is just a hit collector, so look at the collect()
method... and replace 0.0f with your score threshold.  Be aware that
score thresholds don't work well in general since scores aren't really
comparable from one query to another.


  // javadoc inherited
  public void collect(int doc, float score) {
    if (score > 0.0f) {
      totalHits++;
      if (hq.size() < numHits || score >= minScore) {
        hq.insert(new ScoreDoc(doc, score));
        minScore = ((ScoreDoc)hq.top()).score; // maintain minScore
      }
    }
  }

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 22 15:03:32 2007
Return-Path: <java-user-return-27705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54031 invoked from network); 22 Apr 2007 15:03:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2007 15:03:31 -0000
Received: (qmail 95514 invoked by uid 500); 22 Apr 2007 15:03:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95481 invoked by uid 500); 22 Apr 2007 15:03:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95470 invoked by uid 99); 22 Apr 2007 15:03:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 08:03:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 08:03:24 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1598075wxd
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 08:03:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jlwXSqZ/O92tvbhSTft7KuqcJhI1jwHsVj2cK/EQcQCAX4YQse9RhM0rizogUH2Oqq/+ba7MPR4vHAT/EKBJOAlVwhYG6YPhIrVnX6iEVoOUvHl+fyQ4Nv8UY0c+YSAL62zoTRB/4rQKiURWokKg0lVFQ48yTBN1OGc3u9aMWrY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kzLowelLug8ETGqi5rg7cbuRBcRHHZ2NiJhUUN7uLXuHW0AnWdDR+Rl+IqO2KqPkLrsip3FadvS2HgHyVKgtnETjyXc0WM3g/rW1AMoO0SAgB5p/o7kOwTU2PaaejTH9B9YDTqEtYF7gBu+JCwTSQFWQcOFundzC/2H4t0aN34o=
Received: by 10.70.44.4 with SMTP id r4mr8676626wxr.1177254183891;
        Sun, 22 Apr 2007 08:03:03 -0700 (PDT)
Received: by 10.70.76.12 with HTTP; Sun, 22 Apr 2007 08:03:03 -0700 (PDT)
Message-ID: <bddd3c950704220803s502f03adx9ecc2f0232767cb4@mail.gmail.com>
Date: Sun, 22 Apr 2007 18:33:03 +0330
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Top Score Collector
In-Reply-To: <c68e39170704220744o35d076f2x52bc497f32b521ac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55456_29700319.1177254183827"
References: <bddd3c950704220328oe456aa4wc6b7ef75f62fe4d5@mail.gmail.com>
	 <c68e39170704220744o35d076f2x52bc497f32b521ac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55456_29700319.1177254183827
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>  Be aware that
> score thresholds don't work well in general since scores aren't really
> comparable from one query to another.


What is I normalize the scores in such a manner that they become between 0
and 1?

--jaf

------=_Part_55456_29700319.1177254183827--

From java-user-return-27706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 22 15:08:02 2007
Return-Path: <java-user-return-27706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54780 invoked from network); 22 Apr 2007 15:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2007 15:08:01 -0000
Received: (qmail 1923 invoked by uid 500); 22 Apr 2007 15:08:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1446 invoked by uid 500); 22 Apr 2007 15:08:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1435 invoked by uid 99); 22 Apr 2007 15:08:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 08:08:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 08:07:54 -0700
Received: by py-out-1112.google.com with SMTP id a25so1071954pyi
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 08:07:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=BHGQjUpcWf64L/+Vkyd7kDi0Nav98bLbZFf39fUXG7YxflBMRzz+QunS68Gw24C3dLyBIgzND9cA4R6pnaT7XwT8DL+nhyI9zg5WMxMi0tfeZRlBkeP63eCOzk7WqV0tc9GBelwdwcEa4rkxE3Ib6lM70junUKW9yAgDe8K3eSc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=dLkYFkZoBcgVz3LhvV06rPT7onotpRQtJl+XdSay0NWkSU4J8v2v55gh5d8JdBZ3328LaGiS3NhXvP8df/lSHtsE2CzyO+lsMl/n8yz0C7YaxiEjOYriaG35Kp+dfkgPUAem8Z6wt035zjTSAI+Qyy4AJpdhQ2A2oOguOolbLdQ=
Received: by 10.35.127.7 with SMTP id e7mr9126373pyn.1177254453821;
        Sun, 22 Apr 2007 08:07:33 -0700 (PDT)
Received: by 10.35.98.19 with HTTP; Sun, 22 Apr 2007 08:07:33 -0700 (PDT)
Message-ID: <c68e39170704220807l4b62ed41r7a9148476a79f45f@mail.gmail.com>
Date: Sun, 22 Apr 2007 11:07:33 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Top Score Collector
In-Reply-To: <bddd3c950704220803s502f03adx9ecc2f0232767cb4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <bddd3c950704220328oe456aa4wc6b7ef75f62fe4d5@mail.gmail.com>
	 <c68e39170704220744o35d076f2x52bc497f32b521ac@mail.gmail.com>
	 <bddd3c950704220803s502f03adx9ecc2f0232767cb4@mail.gmail.com>
X-Google-Sender-Auth: a297fa2a664dabe4
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/22/07, jafarim <jafarim@gmail.com> wrote:
> >  Be aware that
> > score thresholds don't work well in general since scores aren't really
> > comparable from one query to another.
>
>
> What is I normalize the scores in such a manner that they become between 0
> and 1?

Two issues with that:
1) You never *gain* information by normalizing in this manner.  If
non-normalized scores aren't directly comparable, then neither will
normalized scores be.
2) To normalize by dividing by the max score, you need to know the max
score.  As hits are being collected in the HitCollector, the max score
is not yet known.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 22 18:59:27 2007
Return-Path: <java-user-return-27707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96863 invoked from network); 22 Apr 2007 18:59:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2007 18:59:26 -0000
Received: (qmail 26174 invoked by uid 500); 22 Apr 2007 18:59:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26138 invoked by uid 500); 22 Apr 2007 18:59:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26127 invoked by uid 99); 22 Apr 2007 18:59:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 11:59:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 11:59:17 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1142144ugc
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 11:58:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=c8tk9sG8qOAUiAIS5IjGSuqX7bf3xAdZmFFjXSL5pMaVXJsCEBGEWoTz1kRyNQh3z2AnAtFGKYEX0xRldMXwsvsqMohAuPQXt9vhUn8h8qG+t4uqPONLKrGzvWTDjoM5VUwz+0xea5nO25vUCrRB7+4sIRw2/ESq2jhBCqqFpl8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JZ8bDrGF4bRBg7Ego4iLkSKzWNsmhhRA/AffbWBvLd7b0UKzvrX/CqsiG/2c6XFxRpi19YOK/Xdz2QoQFg+jEiNZGec8SLwaCZzIBlJLCRqXHKYcOPzKxsuZq2sCcjyNPkOtHkySj7YtLfhNT7f+sUvRcwHKdxRuoNZhTNjhD5I=
Received: by 10.82.162.14 with SMTP id k14mr7855161bue.1177268335471;
        Sun, 22 Apr 2007 11:58:55 -0700 (PDT)
Received: by 10.82.156.13 with HTTP; Sun, 22 Apr 2007 11:58:55 -0700 (PDT)
Message-ID: <359a92830704221158i6512fcbg82d022b63cc28bf7@mail.gmail.com>
Date: Sun, 22 Apr 2007 14:58:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Top Score Collector
In-Reply-To: <c68e39170704220807l4b62ed41r7a9148476a79f45f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72810_20632473.1177268335418"
References: <bddd3c950704220328oe456aa4wc6b7ef75f62fe4d5@mail.gmail.com>
	 <c68e39170704220744o35d076f2x52bc497f32b521ac@mail.gmail.com>
	 <bddd3c950704220803s502f03adx9ecc2f0232767cb4@mail.gmail.com>
	 <c68e39170704220807l4b62ed41r7a9148476a79f45f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_72810_20632473.1177268335418
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As to point <2>, the only way I was able to deal with this was by
using a TopDocs, which does have a max score. But in that case,
I don't believe you can limit the number of hits examined.

I've just got to ask... Why do you (jafarim) want to  fiddle with the
threshold? How is this going to benefit the user over and above
just getting the first N < 100 docs from a Hits object? They're
sorted already in relevancy order. Yonik's point that scores aren't
comparable across queries is well taken and should give you pause.

A clear statement of what you are trying to accomplish from the
user's perspective will allow folks to give you much more
useful responses.....

Erick

On 4/22/07, Yonik Seeley <yonik@apache.org> wrote:
>
> On 4/22/07, jafarim <jafarim@gmail.com> wrote:
> > >  Be aware that
> > > score thresholds don't work well in general since scores aren't really
> > > comparable from one query to another.
> >
> >
> > What is I normalize the scores in such a manner that they become between
> 0
> > and 1?
>
> Two issues with that:
> 1) You never *gain* information by normalizing in this manner.  If
> non-normalized scores aren't directly comparable, then neither will
> normalized scores be.
> 2) To normalize by dividing by the max score, you need to know the max
> score.  As hits are being collected in the HitCollector, the max score
> is not yet known.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_72810_20632473.1177268335418--

From java-user-return-27708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 22 21:50:53 2007
Return-Path: <java-user-return-27708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38726 invoked from network); 22 Apr 2007 21:50:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Apr 2007 21:50:52 -0000
Received: (qmail 57539 invoked by uid 500); 22 Apr 2007 21:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57493 invoked by uid 500); 22 Apr 2007 21:50:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57482 invoked by uid 99); 22 Apr 2007 21:50:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 14:50:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 14:50:45 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D87B55B763; Sun, 22 Apr 2007 14:50:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D507E7F403
	for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 14:50:24 -0700 (PDT)
Date: Sun, 22 Apr 2007 14:50:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Re: IndexReader method semantics
In-Reply-To: <462816E5.2000406@nuix.com>
Message-ID: <Pine.LNX.4.58.0704221441540.28580@hal.rescomp.berkeley.edu>
References: <462816E5.2000406@nuix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I'm considering making a kind of IndexReader where each time terms() is
: called it might return a different sequence even though the reader
: hasn't been reopened.

okay *this* got my attention ... what are you working on?

: Would that kind of thing conceivably cause problems anywhere else in the
: framework?  Which is to ask, do other parts of the framework implement
: their own caching of the TermEnum, or is all the caching implemented in
: the reader and TermEnum implementations?

the only thing like this i can think of is some TermDocs freq caching in
TermScorer.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 01:00:22 2007
Return-Path: <java-user-return-27709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68076 invoked from network); 23 Apr 2007 01:00:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 01:00:20 -0000
Received: (qmail 34064 invoked by uid 500); 23 Apr 2007 01:00:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34014 invoked by uid 500); 23 Apr 2007 01:00:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34002 invoked by uid 99); 23 Apr 2007 01:00:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 18:00:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 18:00:11 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id DCF0A4ED8D7
	for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 10:59:23 +1000 (EST)
Message-ID: <462C0572.2040004@nuix.com>
Date: Mon, 23 Apr 2007 11:01:38 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070422)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexReader method semantics
References: <462816E5.2000406@nuix.com> <Pine.LNX.4.58.0704221441540.28580@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0704221441540.28580@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : I'm considering making a kind of IndexReader where each time terms() is
> : called it might return a different sequence even though the reader
> : hasn't been reopened.
> 
> okay *this* got my attention ... what are you working on?

Basically I'm thinking of writing a different kind of IndexReader which 
uses a database to return fake terms for things like tags.  The idea 
would be that it can be slotted in alongside a real index via 
ParallelReader in order to provide the fast-changing part.  So it would 
be possible to implement real queries on a database rather than the 
approach at present which is to use filters and ConstantScoreQuery.

It's going to be highly experimental anyway.

> : Would that kind of thing conceivably cause problems anywhere else in the
> : framework?  Which is to ask, do other parts of the framework implement
> : their own caching of the TermEnum, or is all the caching implemented in
> : the reader and TermEnum implementations?
> 
> the only thing like this i can think of is some TermDocs freq caching in
> TermScorer.

That sounds like a good thing since it means the tags changing *during* 
the query might not upset things (this was my other concern about trying 
to do something crazy like this.)

Daniel



-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 04:11:11 2007
Return-Path: <java-user-return-27710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15315 invoked from network); 23 Apr 2007 04:11:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 04:11:10 -0000
Received: (qmail 97681 invoked by uid 500); 23 Apr 2007 04:11:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97649 invoked by uid 500); 23 Apr 2007 04:11:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97638 invoked by uid 99); 23 Apr 2007 04:11:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 21:11:10 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucener@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 21:11:02 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1193114ugc
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 21:10:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=lBbDQzCwRNPLVtQd4aVEhVR/lx2f7RmMKJJPc3+teJR9O7FalkZA9S7Ju4NofSXdVMHXe/++E6P1eMP3vicI8VR2UfnuIzyxYkTmTfyCqrol01EZx7UySYxGvhqy48nCBfWmH6ZIYh+VD4eBz6GxioVxCBfbNBsvxlS2HZPgeJw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jXF5l3RX8kaiPB8tJfYF7iPyE4BIlOv1lFSkqzbfM8M/mL9RF4F/P9F5pu+0wkzhbTgwugiMNwVjm81jND2f34ajy/TswxbVs2r3oY+Pb/ZCSzzUKP0CN4ifMcdz4bdMku3wOyFFVdqDnMNU4FA86ApjVWcxZpOVlxj7CVUM8Oc=
Received: by 10.78.192.20 with SMTP id p20mr949519huf.1177301441518;
        Sun, 22 Apr 2007 21:10:41 -0700 (PDT)
Received: by 10.78.70.9 with HTTP; Sun, 22 Apr 2007 21:10:41 -0700 (PDT)
Message-ID: <882004010704222110r35bf5cc1u3622d8d29b91ff6b@mail.gmail.com>
Date: Mon, 23 Apr 2007 00:10:41 -0400
From: "Lucifer Hammer" <lucener@gmail.com>
To: java-user@lucene.apache.org
Subject: Backwards index format compatibility of future versions?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_129911_6276220.1177301441421"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_129911_6276220.1177301441421
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Is there a goal for lucene to always be able to read indexes written by
older versions of Lucene?  For instance, I noticed that I could read 2.0 and
1.9 indexes with a 2.1 Lucene jar.  (I also noticed that if I add a document
to one of those older indexes, then they'll be rewritten in 2.1 format.)
Should/can we expect that all future versions of Lucene will be able to read
older indexes?

The reason I ask: we have some 2.0 indexes written onto "Write once" media.
We would like to be able to keep those indexes, and not have to convert them
to a newer format.   (We don't plan to ever have to write to those indexes
again.)

Thanks!

Lucifer

------=_Part_129911_6276220.1177301441421--

From java-user-return-27711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 04:27:13 2007
Return-Path: <java-user-return-27711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17997 invoked from network); 23 Apr 2007 04:27:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 04:27:12 -0000
Received: (qmail 15842 invoked by uid 500); 23 Apr 2007 04:27:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15801 invoked by uid 500); 23 Apr 2007 04:27:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15790 invoked by uid 99); 23 Apr 2007 04:27:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 21:27:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 21:27:04 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1194774ugc
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 21:26:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=dSFA7tq006JkujmNFdd3vrLJq+ywMRAZYE3Mi5hnga6VfgqDL8T9QeqrxJnCoo2KBeAbQ8D0O7MUwmfpPyvv7YsMtN1L6oP4HIBjE19FeLFvSqmig5GQvvNil/xNNfpimRXAjah1SSjjwplidtbR1HLwbXzA/rJYuUwEkjvnnlo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=fAh8eFqXpj5kzkUWZfC9EeqBpLMAGafGrTuNNSklbLq20JQRGvIkiYWpm8MxljeTqRYvPTsHkbgPbNBGRtsDktfQ3CB8sxC+nWQvc0riQpPIGrIxlFtl/8GNVMa6CgQ4njYjvn6duEo/hxfLSgZMso37ahbTPNtojoMFd/UGQdg=
Received: by 10.67.26.7 with SMTP id d7mr4882607ugj.1177302403587;
        Sun, 22 Apr 2007 21:26:43 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id j3sm7835115ugd.2007.04.22.21.26.42;
        Sun, 22 Apr 2007 21:26:42 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <882004010704222110r35bf5cc1u3622d8d29b91ff6b@mail.gmail.com>
References: <882004010704222110r35bf5cc1u3622d8d29b91ff6b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0D4BDFFB-78C5-4565-8B8E-6B49D3BFED60@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Backwards index format compatibility of future versions?
Date: Mon, 23 Apr 2007 06:26:18 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


23 apr 2007 kl. 06.10 skrev Lucifer Hammer:
> Should/can we expect that all future versions of Lucene will be  
> able to read
> older indexes?

Yes.

<http://wiki.apache.org/lucene-java/ 
LuceneFAQ#head-5ad8d7368624fbe30cc1237d164c5820cf80e46b>

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 04:40:09 2007
Return-Path: <java-user-return-27712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20551 invoked from network); 23 Apr 2007 04:40:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 04:40:08 -0000
Received: (qmail 33076 invoked by uid 500); 23 Apr 2007 04:40:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33049 invoked by uid 500); 23 Apr 2007 04:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33038 invoked by uid 99); 23 Apr 2007 04:40:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 21:40:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucener@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 21:40:01 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1195953ugc
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 21:39:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SBK4HJ7cbK8XTB6uxTppCmqsUbeYPNP4ZfWpBmQVwcRs+8kF/2Z742PdUE0inXi0AGdLRd8gg38H9PQo8X501izbuXdySkN//TDLsB4LrPVxJIcEapzs0XzwsVUOCCrIGC17F5voVfZk3H1FFQCp7n4W7j1QEVX2ITvj7tmTzfk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lZ4GHbYAl76I0BdFdkznwVwMHAWlFyME/AEl1sErJqT+9hzIioIXktnMVUpxUTAlLLJZWfFstuZMJB326Bhd2Lxauntt1Y8wEbQVY7vXqKXrVfUz4CBGduGJll3oFV2N8p3Lc0A+7YFobycZvt9+wZn+BBPabieK8o6HwtLvDbw=
Received: by 10.78.166.7 with SMTP id o7mr946307hue.1177303180186;
        Sun, 22 Apr 2007 21:39:40 -0700 (PDT)
Received: by 10.78.70.9 with HTTP; Sun, 22 Apr 2007 21:39:40 -0700 (PDT)
Message-ID: <882004010704222139t7b8cb674q53b27a75f78c02a9@mail.gmail.com>
Date: Mon, 23 Apr 2007 00:39:40 -0400
From: "Lucifer Hammer" <lucener@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Backwards index format compatibility of future versions?
In-Reply-To: <0D4BDFFB-78C5-4565-8B8E-6B49D3BFED60@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_130035_18456411.1177303180135"
References: <882004010704222110r35bf5cc1u3622d8d29b91ff6b@mail.gmail.com>
	 <0D4BDFFB-78C5-4565-8B8E-6B49D3BFED60@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_130035_18456411.1177303180135
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for that pointer!  That link lead me to this link:
http://wiki.apache.org/lucene-java/BackwardsCompatibility  - Which makes it
sound like I can only expect backwards compatibility within the current
major version.

When/if Lucene hits V3.0, it doesn't sound like there's a commitment for it
to be able to read 2.X indexes. Right?  How about Lucene 4.0, will that be
able to read indexes in the 2.0 format?  (Yes, I know there's a migration
path, however, that's not our goal - we'd like to keep our current
2.0archives in
2.0 format, and know that we can read/search them from future versions of
Lucene.

Thanks

Lucifer

On 4/23/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 23 apr 2007 kl. 06.10 skrev Lucifer Hammer:
> > Should/can we expect that all future versions of Lucene will be
> > able to read
> > older indexes?
>
> Yes.
>
> <http://wiki.apache.org/lucene-java/
> LuceneFAQ#head-5ad8d7368624fbe30cc1237d164c5820cf80e46b>
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_130035_18456411.1177303180135--

From java-user-return-27713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 05:01:43 2007
Return-Path: <java-user-return-27713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23391 invoked from network); 23 Apr 2007 05:01:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 05:01:42 -0000
Received: (qmail 54910 invoked by uid 500); 23 Apr 2007 05:01:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54557 invoked by uid 500); 23 Apr 2007 05:01:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54546 invoked by uid 99); 23 Apr 2007 05:01:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 22:01:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 22:01:35 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1197972ugc
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 22:01:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=knugOcNkXhegoGYwmSylqj7yNU7OIOVjlJ+V+NH6KP3HM7m3DUheOxjNgcJ/Yf37cm7Irk6Sp+T6scsPFj3Dm1odU2tkYaf4+PYMDMaeSvKojEx3/5El7JCJ387NBovvPCf24cp6saPyMjktmxjvPzk2xW8bNsrGBkEEHmuIelk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=t+hNlw2rghBjOdnIYIN9VcCctDJNYx3UKFEsSBp4P/Tt3Z+aEdQXg52BTnjtKJdhWbBLiRuoWw6TD8KBmoB/08tYIYZILCsddDih83YIpG5TXKdhVr7++qH4CBOmFimh2IuQFT4dcCcHLyXyA36pyiqfDYhdBmWoylFt8x9Ja6w=
Received: by 10.66.232.9 with SMTP id e9mr4906686ugh.1177304473790;
        Sun, 22 Apr 2007 22:01:13 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id 34sm2793020uga.2007.04.22.22.01.11;
        Sun, 22 Apr 2007 22:01:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <882004010704222139t7b8cb674q53b27a75f78c02a9@mail.gmail.com>
References: <882004010704222110r35bf5cc1u3622d8d29b91ff6b@mail.gmail.com> <0D4BDFFB-78C5-4565-8B8E-6B49D3BFED60@gmail.com> <882004010704222139t7b8cb674q53b27a75f78c02a9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C73E9FC8-8957-4D17-8C6D-922FE6F7F6F0@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Backwards index format compatibility of future versions?
Date: Mon, 23 Apr 2007 07:00:50 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

23 apr 2007 kl. 06.39 skrev Lucifer Hammer:

> Thanks for that pointer!  That link lead me to this link:
> http://wiki.apache.org/lucene-java/BackwardsCompatibility  - Which  
> makes it
> sound like I can only expect backwards compatibility within the  
> current
> major version.

Sorry, I read your post too fast. You are right, 3.0 may or may not  
be able to read 2.0 indices.
>
> When/if Lucene hits V3.0, it doesn't sound like there's a  
> commitment for it
> to be able to read 2.X indexes. Right?  How about Lucene 4.0, will  
> that be
> able to read indexes in the 2.0 format?  (Yes, I know there's a  
> migration
> path, however, that's not our goal - we'd like to keep our current
> 2.0archives in
> 2.0 format, and know that we can read/search them from future  
> versions of
> Lucene.

I'm curious, why is migrating the index not OK when it is OK to  
upgrade the software? It doesn't really add up in my head.

One solution would be to load the 2.0-jar from a secondary  
classloader. But that is probably not what you want though.


--
karl

>
> Thanks
>
> Lucifer
>
> On 4/23/07, karl wettin <karl.wettin@gmail.com> wrote:
>>
>>
>> 23 apr 2007 kl. 06.10 skrev Lucifer Hammer:
>> > Should/can we expect that all future versions of Lucene will be
>> > able to read
>> > older indexes?
>>
>> Yes.
>>
>> <http://wiki.apache.org/lucene-java/
>> LuceneFAQ#head-5ad8d7368624fbe30cc1237d164c5820cf80e46b>
>>
>> --
>> karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 05:08:56 2007
Return-Path: <java-user-return-27714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26119 invoked from network); 23 Apr 2007 05:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 05:08:55 -0000
Received: (qmail 66754 invoked by uid 500); 23 Apr 2007 05:08:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66722 invoked by uid 500); 23 Apr 2007 05:08:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66711 invoked by uid 99); 23 Apr 2007 05:08:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 22:08:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucener@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2007 22:08:48 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1760174wxd
        for <java-user@lucene.apache.org>; Sun, 22 Apr 2007 22:08:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tD76TjoUVl+GqIb7+Fi3wRQ1DrJzyJzAUk4lzALXkEVvgMF7JoLx2mnXxtyzlPVa5ym2epnl08ZCQwsLF1rgYanto/TJcFV5XbJdVOLcbv5ePOfbW4lc8NqQ3Dctea5bgyGqSOC6UIvMQl/DpoMA8tyBFt4F35N7V+cTXAxqwp8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iUUjNzn3KGu/VWSgnpW2pijfWMYNLtJyhFLnA7MwaQKQ7SUhKxceDJF6Mq6lqPS4LqAzFK/N8+QhhLIBZQbOnSd0jqlZFMCyBqwyN62R74r/1fvVerzxDIr/pSWkODfs4RiquZRaKVuFbkWkVFOQlguf6soPWv3CoO5dzPQh37E=
Received: by 10.78.193.19 with SMTP id q19mr948761huf.1177304907017;
        Sun, 22 Apr 2007 22:08:27 -0700 (PDT)
Received: by 10.78.70.9 with HTTP; Sun, 22 Apr 2007 22:08:26 -0700 (PDT)
Message-ID: <882004010704222208r78781473p4636f4266f6cedaa@mail.gmail.com>
Date: Mon, 23 Apr 2007 01:08:26 -0400
From: "Lucifer Hammer" <lucener@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Backwards index format compatibility of future versions?
In-Reply-To: <C73E9FC8-8957-4D17-8C6D-922FE6F7F6F0@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_130155_31708360.1177304906912"
References: <882004010704222110r35bf5cc1u3622d8d29b91ff6b@mail.gmail.com>
	 <0D4BDFFB-78C5-4565-8B8E-6B49D3BFED60@gmail.com>
	 <882004010704222139t7b8cb674q53b27a75f78c02a9@mail.gmail.com>
	 <C73E9FC8-8957-4D17-8C6D-922FE6F7F6F0@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_130155_31708360.1177304906912
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 4/23/07, karl wettin <karl.wettin@gmail.com> wrote:
>
> 23 apr 2007 kl. 06.39 skrev Lucifer Hammer:
>
> I'm curious, why is migrating the index not OK when it is OK to
> upgrade the software? It doesn't really add up in my head.


We keep our indexed archives on write-once media.  If we're forced to move
our indexes up to a newer format, then we'd have to rewrite all our
archives...

One solution would be to load the 2.0-jar from a secondary
> classloader. But that is probably not what you want though.


I don't know how that would work...  (Could we run a parallel multisearcher
across indexes with different formats, some of which have been accessed via
a secondary classloader?)

--
> karl



Again, Thanks!

------=_Part_130155_31708360.1177304906912--

From java-user-return-27715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 08:23:09 2007
Return-Path: <java-user-return-27715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89301 invoked from network); 23 Apr 2007 08:23:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 08:23:08 -0000
Received: (qmail 44227 invoked by uid 500); 23 Apr 2007 08:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44195 invoked by uid 500); 23 Apr 2007 08:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44180 invoked by uid 99); 23 Apr 2007 08:23:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 01:23:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 01:23:00 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1799240wxd
        for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 01:22:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QT7WQoSFSJvQStlXEMm7jWA8mkjqVbfqTlom48j/jp1YRJiQZX4JK3qIQtpa/z51U2JsI4mn/Vwh6YS4vPtdqaa/sbMWluOrh0QcEWqLBNfYaVdbqiWCZ4p/uyrBs0jUtMOUd2AarveZ2m4dh53Mnkt69IVTPdstvmPQ53CWoiE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L4nNswh2RzGtHNS3Lbi+4bAEkNw5Wn+34gwtoqduy4zYuamQGC1BnP6bYhRDwVbJhQE3KUnpkFa/4PYLWDpkau9wdOkx87+nteLoLOSKeTjViAR+APp51VdC2JIGbAkAL051IFWSn9rB8kEeAfM3/vqF8TeOB05Z4qL4dnFM5JA=
Received: by 10.70.9.8 with SMTP id 8mr6264881wxi.1177316559203;
        Mon, 23 Apr 2007 01:22:39 -0700 (PDT)
Received: by 10.70.76.12 with HTTP; Mon, 23 Apr 2007 01:22:39 -0700 (PDT)
Message-ID: <bddd3c950704230122n43a2c75bpcc307f94e80ba33e@mail.gmail.com>
Date: Mon, 23 Apr 2007 12:52:39 +0430
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Top Score Collector
In-Reply-To: <359a92830704221158i6512fcbg82d022b63cc28bf7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58737_1599099.1177316559138"
References: <bddd3c950704220328oe456aa4wc6b7ef75f62fe4d5@mail.gmail.com>
	 <c68e39170704220744o35d076f2x52bc497f32b521ac@mail.gmail.com>
	 <bddd3c950704220803s502f03adx9ecc2f0232767cb4@mail.gmail.com>
	 <c68e39170704220807l4b62ed41r7a9148476a79f45f@mail.gmail.com>
	 <359a92830704221158i6512fcbg82d022b63cc28bf7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58737_1599099.1177316559138
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am trying to fetch similar results to a Document in the index. The problem
are myriad of irrelevant hits the score of which is less than 1 percent. I
was thinking to write this class in order to omit these results. I can't use
TopDoc because the number of *really* similar results can be known a priori.
There might be hundereds or only 10 relevant hits...

--jaf

On 4/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> As to point <2>, the only way I was able to deal with this was by
> using a TopDocs, which does have a max score. But in that case,
> I don't believe you can limit the number of hits examined.
>
> I've just got to ask... Why do you (jafarim) want to  fiddle with the
> threshold? How is this going to benefit the user over and above
> just getting the first N < 100 docs from a Hits object? They're
> sorted already in relevancy order. Yonik's point that scores aren't
> comparable across queries is well taken and should give you pause.
>
> A clear statement of what you are trying to accomplish from the
> user's perspective will allow folks to give you much more
> useful responses.....
>
> Erick
>
> On 4/22/07, Yonik Seeley <yonik@apache.org> wrote:
> >
> > On 4/22/07, jafarim <jafarim@gmail.com> wrote:
> > > >  Be aware that
> > > > score thresholds don't work well in general since scores aren't
> really
> > > > comparable from one query to another.
> > >
> > >
> > > What is I normalize the scores in such a manner that they become
> between
> > 0
> > > and 1?
> >
> > Two issues with that:
> > 1) You never *gain* information by normalizing in this manner.  If
> > non-normalized scores aren't directly comparable, then neither will
> > normalized scores be.
> > 2) To normalize by dividing by the max score, you need to know the max
> > score.  As hits are being collected in the HitCollector, the max score
> > is not yet known.
> >
> > -Yonik
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_58737_1599099.1177316559138--

From java-user-return-27716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 08:47:36 2007
Return-Path: <java-user-return-27716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2423 invoked from network); 23 Apr 2007 08:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 08:47:36 -0000
Received: (qmail 80995 invoked by uid 500); 23 Apr 2007 08:47:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80969 invoked by uid 500); 23 Apr 2007 08:47:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80958 invoked by uid 99); 23 Apr 2007 08:47:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 01:47:33 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 01:47:26 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1383200wra
        for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 01:47:05 -0700 (PDT)
Received: by 10.114.180.1 with SMTP id c1mr2392337waf.1177318024749;
        Mon, 23 Apr 2007 01:47:04 -0700 (PDT)
Received: by 10.114.175.4 with HTTP; Mon, 23 Apr 2007 01:47:04 -0700 (PDT)
Message-ID: <1324e4e20704230147k52a10c1fm2a3a33d496fca9fc@mail.gmail.com>
Date: Mon, 23 Apr 2007 14:17:04 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: How to get hits by multiple indexes using MultiSearcher...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118294_22914211.1177318024480"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_118294_22914211.1177318024480
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everyone,

I am using muitisearcher on multiple indexes, this will returns all the hits
on specific search query.  but I wants to know how many hits by  which index
folder.

i.e. I have created multiple Indexes i.e. Index1, Index2 and index3.  and
Now open multisearcher on that.
.
.
objIndexSearcher[0] = New IndexSearcher("c:\Index1")
objIndexSearcher[1] = New IndexSearcher("c:\Index2")
objIndexSearcher[2] = New IndexSearcher("c:\Index3")
.
.
objMultiSearcher = New MultiSearcher(objIndexSearcher)
.
.
hits = objMultiSearcher.search(lucQuery)

this will return all the hits which matches the query. But I wants to show
how many hits come by Index1, how many hits come by Index2...so how it is
possible ? please suggest me.

Thanks in advance,
-Laxmilal Menaria

------=_Part_118294_22914211.1177318024480--

From java-user-return-27717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 10:01:06 2007
Return-Path: <java-user-return-27717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42790 invoked from network); 23 Apr 2007 10:01:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 10:01:05 -0000
Received: (qmail 31751 invoked by uid 500); 23 Apr 2007 10:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31586 invoked by uid 500); 23 Apr 2007 10:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31575 invoked by uid 99); 23 Apr 2007 10:01:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 03:01:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rsk.sen@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 03:00:56 -0700
Received: by an-out-0708.google.com with SMTP id c3so1669806ana
        for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 03:00:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=CFn2mBx3+LF9sKlP5o0isGLh3HUMeAcEAkgR6b31D9m8hmekyI18sd64IkcC3L0K5ZuIi726yUm1LRhgSmhVT/riVeFvVKWM/IP84+CVVc/wxnUwtNwTWvI7FqW1tiXtvtf6UH+QAK4l5xa3ShzeVxJFX+scgFORt4eqrupuzHo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DLkwq23zsbV+zv7c9B1L59HF2AQUE3TWMVFd4Wo89Ye2W/l8Tc2ak/+NQ4IskwnTfrC4e9wX9jkpPo0c0l7dZdMGBaXWCO9skCxuJ97bJ1i5FdTD4uQhE+pglYiSCN3yiS0PefUt+oW2nub5rmBo+hj1v4nGVkKRzHeKTca0BL0=
Received: by 10.115.17.1 with SMTP id u1mr2453195wai.1177322434629;
        Mon, 23 Apr 2007 03:00:34 -0700 (PDT)
Received: by 10.115.49.4 with HTTP; Mon, 23 Apr 2007 03:00:34 -0700 (PDT)
Message-ID: <4628d2a90704230300v2a82b174p7df2676c7713e811@mail.gmail.com>
Date: Mon, 23 Apr 2007 15:30:34 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: How to get termfreq. of each doc for wildcard terms?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_185449_6812063.1177322434576"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_185449_6812063.1177322434576
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
    In my application, sometimes I need to find doc Id with term frequency
of my terms in my index of multi lines, tokenized & indexed with Standard
Analyzer. For this, now I'm using *
    TermDocs termDocs= reader.termDocs(new Term("FIELD","book1");
    while(termDocs.next())
    {
     matches += termDocs.freq();
     int docId = termDocs.doc();
    }

**I can't get such doc Id with term frequency of wildcard terms by using the
same. If I use *WildcardTermEnum* , I can get term freq., but not doc ID.

            Please give me any idea to resolve this problem.

Thanks & Regards
RSK

------=_Part_185449_6812063.1177322434576--

From java-user-return-27718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 17:25:15 2007
Return-Path: <java-user-return-27718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59369 invoked from network); 23 Apr 2007 17:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 17:25:14 -0000
Received: (qmail 63653 invoked by uid 500); 23 Apr 2007 17:25:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63250 invoked by uid 500); 23 Apr 2007 17:25:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63238 invoked by uid 99); 23 Apr 2007 17:25:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 10:25:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 10:25:05 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2298B5B774; Mon, 23 Apr 2007 10:24:45 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 143D67F403
	for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 10:24:45 -0700 (PDT)
Date: Mon, 23 Apr 2007 10:24:45 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexReader method semantics
In-Reply-To: <462C0572.2040004@nuix.com>
Message-ID: <Pine.LNX.4.58.0704231023310.1607@hal.rescomp.berkeley.edu>
References: <462816E5.2000406@nuix.com> <Pine.LNX.4.58.0704221441540.28580@hal.rescomp.berkeley.edu>
 <462C0572.2040004@nuix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: Basically I'm thinking of writing a different kind of IndexReader which
: uses a database to return fake terms for things like tags.  The idea
: would be that it can be slotted in alongside a real index via
: ParallelReader in order to provide the fast-changing part.  So it would
: be possible to implement real queries on a database rather than the

how will you deal with docid renumbering as segments merge? (or can you
assume no deletions in your use cases?)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 18:03:21 2007
Return-Path: <java-user-return-27719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72939 invoked from network); 23 Apr 2007 18:03:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 18:03:19 -0000
Received: (qmail 38631 invoked by uid 500); 23 Apr 2007 18:03:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38588 invoked by uid 500); 23 Apr 2007 18:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38577 invoked by uid 99); 23 Apr 2007 18:03:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 11:03:18 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DATE_IN_PAST_06_12
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 11:03:10 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9A04830EFC17; Mon, 23 Apr 2007 12:02:49 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [192.168.2.9] (unknown [69.249.122.3])
	by ehatchersolutions.com (Postfix) with ESMTP id D2EA330EFC16
	for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 12:02:48 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <882004010704222208r78781473p4636f4266f6cedaa@mail.gmail.com>
References: <882004010704222110r35bf5cc1u3622d8d29b91ff6b@mail.gmail.com> <0D4BDFFB-78C5-4565-8B8E-6B49D3BFED60@gmail.com> <882004010704222139t7b8cb674q53b27a75f78c02a9@mail.gmail.com> <C73E9FC8-8957-4D17-8C6D-922FE6F7F6F0@gmail.com> <882004010704222208r78781473p4636f4266f6cedaa@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FF1DC398-D9AC-4630-9185-411FF6AE9C58@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Backwards index format compatibility of future versions?
Date: Mon, 23 Apr 2007 05:54:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=BAYES_00,DATE_IN_PAST_06_12,
	RCVD_IN_NJABL_DUL autolearn=no version=3.1.1


On Apr 23, 2007, at 1:08 AM, Lucifer Hammer wrote:
>> I'm curious, why is migrating the index not OK when it is OK to
>> upgrade the software? It doesn't really add up in my head.
>
>
> We keep our indexed archives on write-once media.  If we're forced  
> to move
> our indexes up to a newer format, then we'd have to rewrite all our
> archives...

I'd keep around the software used to read those indexes also, as Karl  
suggested.

But even then, will Java 7.0 be able to run Java 1.5 JARs?!  ;)   So  
maybe you should also keep around an entire machine (or virtual  
image) that can read those indexes?  But then what if the 1.0 power  
cord is not compatible with your future 5.0 wirelessly electric  
office building?   I'm being silly, of course, but at the very least  
I recommend you keep around at least the basics of the software  
system used to read the indexes now.  In the past, we've kept the  
entire build system of our software in version control (i.e. Ant  
itself, and all its dependencies).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 23 19:09:46 2007
Return-Path: <java-user-return-27720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92703 invoked from network); 23 Apr 2007 19:09:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Apr 2007 19:09:46 -0000
Received: (qmail 58854 invoked by uid 500); 23 Apr 2007 19:09:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58823 invoked by uid 500); 23 Apr 2007 19:09:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58811 invoked by uid 99); 23 Apr 2007 19:09:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 12:09:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 12:09:37 -0700
Received: from [192.168.128.140] ([192.168.128.140])
	(authenticated bits=0)
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id l3NJ956b016091
	for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 22:09:08 +0300
Message-ID: <462D044F.9020802@sirma.bg>
Date: Mon, 23 Apr 2007 22:09:03 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
References: <46162A72.50400@sirma.bg> <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com> <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu> <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com> <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com> <814127511.20070408213229@gmail.com>
In-Reply-To: <814127511.20070408213229@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,
THANK YOU FOR YOUR HELP :)
I put this problem in the forum but I had no chance to work on it last 
week unfurtunately...
So now I tested the Artem's patch but the results show:
1) speed is very slow compare with the usage without patch
2) There are not very big differences of memory usage (I tested till now 
only with relativly small indexes - less than 1 GB and less than 1 mil 
docs because the when using with 20-40 GB indexes I had to wait more 
than 5 mins what is practically usless).

So I have doubts if I use the patch correctly. I do just what is 
described in Artem's letter:

AV> You can include StoredFieldSortFactory class source file into your sources and
AV> then use StoredFieldSortFactory.create(sortFieldName, sortDescending) to get
AV> Sort object for sorting query.
AV> StoredFieldSortFactory source file can be extracted from LUCENE-769 patch or
AV> from sharehound sources: http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/apache/lucene/search/StoredFieldSortFactory.java


What I am wondering about is that in the patch commetns 
(https://issues.apache.org/jira/browse/LUCENE-769) I see that there is 
written that patch solves the problem by using WeakHashMap, but actually 
in the downloaded StoredFieldSortFactory.java  file there is not used 
WeakHashMap. Another thing: In the comments in Lucene-769 issue there is 
mentioned something about classes like: WeakDocumentsCache and 
DocCachingIndexReader but I did not found them in Lucene source code 
neither as classes in StoredFieldSortFactory.java. So my questions are:
1. Is it enought to include the file StoredFieldSortFactory.java in the 
source code or there are also other classes that I have to douwnload and 
include?
2. Have I to use this DocCachingIndexReader instead of Reader that I 
currently use in cases when I expect OOMException and will use this patch?

Thanks to all once again :),
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 03:00:22 2007
Return-Path: <java-user-return-27721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62786 invoked from network); 24 Apr 2007 03:00:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 03:00:20 -0000
Received: (qmail 64008 invoked by uid 500); 24 Apr 2007 03:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63968 invoked by uid 500); 24 Apr 2007 03:00:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 44808 invoked by uid 99); 23 Apr 2007 22:19:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Message-ID: <462D30D2.1090901@helix.stanford.edu>
Date: Mon, 23 Apr 2007 15:18:58 -0700
From: Mark Woon <woon@helix.stanford.edu>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Problem with MultiFieldQueryParser
References: <46278E49.3050704@helix.stanford.edu>
In-Reply-To: <46278E49.3050704@helix.stanford.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there anyone who might be able to help me with this?

Is there any more information I can provide?


Thanks,
-Mark


Mark Woon wrote:
> Hi all,
>
> Can someone clear something up for me regarding MultiFieldQueryParser?
>
> Using the same inputs to MultiFieldQueryParser.parse(String[] queries, 
> String[] fields, Analyzer analyzer)  and 
> MultiFieldQueryParser.parse(String query) I seem to be getting the 
> exact same query back (according to Query.toString()).
>
> However, when I run the query I'm getting different results.  Do the 
> static and non-static version of parse() do different things?
>
>
> Thanks,
> -Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 03:16:54 2007
Return-Path: <java-user-return-27722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68219 invoked from network); 24 Apr 2007 03:16:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 03:16:53 -0000
Received: (qmail 82502 invoked by uid 500); 24 Apr 2007 03:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82012 invoked by uid 500); 24 Apr 2007 03:16:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81994 invoked by uid 99); 24 Apr 2007 03:16:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 20:16:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 20:16:46 -0700
Received: by ug-out-1314.google.com with SMTP id k40so80476ugc
        for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 20:16:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Y3F9IqAjfoH769mSzPC7cEP2yY8l4xZwgL8vHkD3CJzIrZjTldYXybRD8Y2LWRZVgo0d8MZzHhH+ikLrwTErCSOGbXp4sJo2WunayX9sGsDRz80oBNCu4JYMjLu75riNmFdSGmwXObwIcUb6FaUORx8M5HL23gq4VsZoYDE4g8c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rFdzBFHSy1LpZe4zb8HsO6w7j2p24SUKHTDSR6iwj+GuMwTTGFR23V6hoSZqCf9gj4aiBQwSKkd+jDopr7V+Zn9jbVI5m/HY53LPWq101wB3ApY2r0t0zZZqal+e2O0A3mtB4GiEjL4YvhvRKLae59XY87+HasOvfxD49GXnj0g=
Received: by 10.66.254.2 with SMTP id b2mr269586ugi.1177384585622;
        Mon, 23 Apr 2007 20:16:25 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id 27sm591261ugp.2007.04.23.20.16.23;
        Mon, 23 Apr 2007 20:16:23 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <462D30D2.1090901@helix.stanford.edu>
References: <46278E49.3050704@helix.stanford.edu> <462D30D2.1090901@helix.stanford.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CF888174-6CA0-47B7-8AD0-3035BAE65ACE@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Problem with MultiFieldQueryParser
Date: Tue, 24 Apr 2007 05:16:01 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

24 apr 2007 kl. 00.18 skrev Mark Woon:

> Is there anyone who might be able to help me with this?

All I can say is that the query parser is not thread safe. Thus I  
would trust the instance methods over the static.

> Is there any more information I can provide?

A test case that demonstrate your problem, strings you parse and  
similar might not be a bad idea.

-- 
karl

>
>
> Thanks,
> -Mark
>
>
> Mark Woon wrote:
>> Hi all,
>>
>> Can someone clear something up for me regarding  
>> MultiFieldQueryParser?
>>
>> Using the same inputs to MultiFieldQueryParser.parse(String[]  
>> queries, String[] fields, Analyzer analyzer)  and  
>> MultiFieldQueryParser.parse(String query) I seem to be getting the  
>> exact same query back (according to Query.toString()).
>>
>> However, when I run the query I'm getting different results.  Do  
>> the static and non-static version of parse() do different things?
>>
>>
>> Thanks,
>> -Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 03:23:54 2007
Return-Path: <java-user-return-27723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71871 invoked from network); 24 Apr 2007 03:23:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 03:23:54 -0000
Received: (qmail 86767 invoked by uid 500); 24 Apr 2007 03:23:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86727 invoked by uid 500); 24 Apr 2007 03:23:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86716 invoked by uid 99); 24 Apr 2007 03:23:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 20:23:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 20:23:47 -0700
Received: by ug-out-1314.google.com with SMTP id k40so81187ugc
        for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 20:23:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=JUiPt9N1vUDdSUXC005X+l+luI6ThGCQgTieQ81v3zPGUPUISHWNvE+r2WQeyWP5MKS+XqXpfH6K5KSq7+qpVidxMl/Jnxr4o5A1FgraBJUjL2iW8u+TtBVGU7pzubNtCSwLvs3AHDZTnUmLkHy1xW09y78YnVnkZLH+c8+TlX4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=TBYMfXT/GFg8o36K4wZ+OskxG+KogwMPb3ETgj0D7SyiTQw7M1tLDQqtB6YJShtxgrNpwC0oa0M8E9ixyJn/lYLnPdrXzGxToq0CucHcpeJCII8wLg12XDvar1I71GrgdCeCYeR1/aXRdtEgajZw1NqX8Rq+foXrpVzx4TFWXdQ=
Received: by 10.67.30.6 with SMTP id h6mr265474ugj.1177385006344;
        Mon, 23 Apr 2007 20:23:26 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id 39sm458197ugb.2007.04.23.20.23.24;
        Mon, 23 Apr 2007 20:23:24 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <882004010704222208r78781473p4636f4266f6cedaa@mail.gmail.com>
References: <882004010704222110r35bf5cc1u3622d8d29b91ff6b@mail.gmail.com> <0D4BDFFB-78C5-4565-8B8E-6B49D3BFED60@gmail.com> <882004010704222139t7b8cb674q53b27a75f78c02a9@mail.gmail.com> <C73E9FC8-8957-4D17-8C6D-922FE6F7F6F0@gmail.com> <882004010704222208r78781473p4636f4266f6cedaa@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6262533E-AB41-4E2D-B18A-5226A90C3673@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Backwards index format compatibility of future versions?
Date: Tue, 24 Apr 2007 05:23:02 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


23 apr 2007 kl. 07.08 skrev Lucifer Hammer:

> On 4/23/07, karl wettin <karl.wettin@gmail.com> wrote:
>> One solution would be to load the 2.0-jar from a secondary
>> classloader. But that is probably not what you want though.
>
> I don't know how that would work...  (Could we run a parallel  
> multisearcher
> across indexes with different formats, some of which have been  
> accessed via
> a secondary classloader?)

I meant that you could keep running of the 2.n code for indices  
stored in that format, parallel to running the future version of  
Lucene of indices created for those future versions.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 05:29:53 2007
Return-Path: <java-user-return-27724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10888 invoked from network); 24 Apr 2007 05:29:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 05:29:52 -0000
Received: (qmail 23307 invoked by uid 500); 24 Apr 2007 05:29:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23272 invoked by uid 500); 24 Apr 2007 05:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23260 invoked by uid 99); 24 Apr 2007 05:29:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 22:29:51 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 22:29:44 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HgDad-0004tj-Ld
	for java-user@lucene.apache.org; Mon, 23 Apr 2007 22:29:23 -0700
Message-ID: <10154559.post@talk.nabble.com>
Date: Mon, 23 Apr 2007 22:29:23 -0700 (PDT)
From: avishkar <avi_mit84@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: different ways of implementing index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: avi_mit84@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,
         I would like to know how we implemented indexing  in different ways
-- 
View this message in context: http://www.nabble.com/different-ways-of-implementing-index-tf3636503.html#a10154559
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 05:43:50 2007
Return-Path: <java-user-return-27725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14558 invoked from network); 24 Apr 2007 05:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 05:43:49 -0000
Received: (qmail 43185 invoked by uid 500); 24 Apr 2007 05:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43157 invoked by uid 500); 24 Apr 2007 05:43:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43146 invoked by uid 99); 24 Apr 2007 05:43:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 22:43:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2007 22:43:41 -0700
Received: by ug-out-1314.google.com with SMTP id k40so95869ugc
        for <java-user@lucene.apache.org>; Mon, 23 Apr 2007 22:43:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ccC3cuLlvZ9yaMLoVMpDMYB4V1LBwxUsWkeQom2q92sUBQ9VENUt/ALk/lKuqI5BOs+ect8gQ4Gyu5e/mMbPmISxDHF5PVaSOrA3Jfj9lWGy7wJ5N3J98ASMoyuidkzv+i8Nn1RrTxoQHfCBwadYKFxwudBKvMvuz1SgjAh+9f8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=admgb/rsUBGYBsYR1u/cbYwq0walwpb+Y1bxOj9OPJq0H8Kx4hrDlg85mpAaIsPa1kSYc56gU08xaGXsm6lC9LoYsOyQaF0VUV4nyczHrCJV4HOdhx7Nbcu0zK4yyZzOfW9NVoyI9lz3lU3kdSU5SyQep8yfIzijTSzx24GA6uc=
Received: by 10.66.242.19 with SMTP id p19mr359632ugh.1177393400104;
        Mon, 23 Apr 2007 22:43:20 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id 27sm717330ugp.2007.04.23.22.43.18;
        Mon, 23 Apr 2007 22:43:19 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <10154559.post@talk.nabble.com>
References: <10154559.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1CC36AF8-A311-4F42-B8BA-051706118CF5@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: different ways of implementing index
Date: Tue, 24 Apr 2007 07:42:55 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


24 apr 2007 kl. 07.29 skrev avishkar:

> I would like to know how we implemented indexing in different ways

You probably need to specify you question a bit more in detail.

Is it vector space model vs. inverted index you are looking for?

http://en.wikipedia.org/wiki/Vector_space_model
http://en.wikipedia.org/wiki/Inverted_index

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 07:01:13 2007
Return-Path: <java-user-return-27726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39920 invoked from network); 24 Apr 2007 07:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 07:01:10 -0000
Received: (qmail 45119 invoked by uid 500); 24 Apr 2007 07:00:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45098 invoked by uid 500); 24 Apr 2007 07:00:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45086 invoked by uid 99); 24 Apr 2007 07:00:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 00:00:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 00:00:47 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id B09F64ED8D7
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 17:00:00 +1000 (EST)
Message-ID: <462DAB7C.3030404@nuix.com>
Date: Tue, 24 Apr 2007 17:02:20 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070423)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexReader method semantics
References: <462816E5.2000406@nuix.com> <Pine.LNX.4.58.0704221441540.28580@hal.rescomp.berkeley.edu> <462C0572.2040004@nuix.com> <Pine.LNX.4.58.0704231023310.1607@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0704231023310.1607@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : Basically I'm thinking of writing a different kind of IndexReader which
> : uses a database to return fake terms for things like tags.  The idea
> : would be that it can be slotted in alongside a real index via
> : ParallelReader in order to provide the fast-changing part.  So it would
> : be possible to implement real queries on a database rather than the
> 
> how will you deal with docid renumbering as segments merge? (or can you
> assume no deletions in your use cases?)

Yeah, in our use case the documents are never deleted (when your data is 
evidence it's not a good idea to delete any. ;-))

Our database already keys on Lucene IDs, a decision made ages ago for 
performance reasons; calling hits.doc(i) is much slower than hits.id(i) 
plus we're trying to build filters based of database records where the 
indexes are huge so it wasn't very practical to keep reading documents.

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 09:22:34 2007
Return-Path: <java-user-return-27727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6124 invoked from network); 24 Apr 2007 09:22:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 09:22:33 -0000
Received: (qmail 2405 invoked by uid 500); 24 Apr 2007 09:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2377 invoked by uid 500); 24 Apr 2007 09:22:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2366 invoked by uid 99); 24 Apr 2007 09:22:31 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MANY_EXCLAMATIONS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 02:22:30 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1768391wra
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 02:21:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=IYY22grOdID30RRfDv10qxnbnj2tpVtNsNoG5CXLhkCczdUcQGS+7x4C2viRk/4frMfnOLl+TGWgE0kVsHrlQNLt4I0aw6SuUnlyr2auq30y6y7X54WM7v0dFxyjlgJv+xMakyEF2v/9We0GPSvg8XXVOFK1oiz3IfahjjqS/h0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=YQJUyzzGFHiQJNZrtSS9IC2vOc32DhyjKbAnN6uoTNBVlnfx3tE49tbHutQ8ldHATZLmvIRhQzfPfGoTYDoul6gnXAYv3UnjzI8uNTTcxwtTsEQhD7QwOj5ldUSxQEQmcQUIENrXGJDZGh6pijskUsjx2dlMz+Y1LVt8jvZbVOM=
Received: by 10.78.203.15 with SMTP id a15mr539182hug.1177406462008;
        Tue, 24 Apr 2007 02:21:02 -0700 (PDT)
Received: by 10.66.246.19 with HTTP; Tue, 24 Apr 2007 02:21:01 -0700 (PDT)
Message-ID: <6e3ae6310704240221n5e7aa66dv5e76c15f0b944a9@mail.gmail.com>
Date: Tue, 24 Apr 2007 02:21:01 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: DBSight Turns Free! Instant Lucene Search on Database!
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

For those who may be interested,

DBSight 1.4.0 now has unlimited index size with Free version!

Basically DBSight is more like SOLR + database adapter. You just point
it with one or several SQLs to any database, and you can have Lucene
search!

It has Incremental Indexing, Recreating Index, Synchronize index with
deleted database records, in addition to facet search, multi-server
mode clustering. All can be done just by mouse clicking instead of
coding java.

Here is a video on how to create Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 10:12:44 2007
Return-Path: <java-user-return-27728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35184 invoked from network); 24 Apr 2007 10:12:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 10:12:43 -0000
Received: (qmail 79361 invoked by uid 500); 24 Apr 2007 10:12:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79327 invoked by uid 500); 24 Apr 2007 10:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79316 invoked by uid 99); 24 Apr 2007 10:12:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 03:12:40 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,MANY_EXCLAMATIONS,MIME_BOUND_NEXTPART,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saurabh@danicorp.com designates 63.134.207.28 as permitted sender)
Received: from [63.134.207.28] (HELO gwa6.webcontrolcenter.com) (63.134.207.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 03:12:30 -0700
Received: from maila25.webcontrolcenter.com [216.119.106.22] by gwa6.webcontrolcenter.com with SMTP;
   Tue, 24 Apr 2007 03:11:45 -0700
Received: from [61.246.204.1] by maila25.webcontrolcenter.com via HTTP; Tue, 24 Apr 2007 03:11:07 -0700
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary=----_SmarterMail_NextPart_2334677761581677
Date: Tue, 24 Apr 2007 03:11:07 -0700
Subject: re: DBSight Turns Free! Instant Lucene Search on Database!
From: "Saurabh Dani" <saurabh@danicorp.com>
Reply-To: saurabh@danicorp.com
To: <java-user@lucene.apache.org>,<java-user@lucene.apache.org>,<java-user@lucene.apache.org>
CC: 
Message-ID: <c14319314eed4422bea8466dbcdffa7b@maila25.webcontrolcenter.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------_SmarterMail_NextPart_2334677761581677
Content-Type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Chris,=0D=0A=0D=0AHow are you showing the hit counts in "Narrow By Year"=
 options on the left? Is this one query for each year or a signle query ret=
urns both the top 30 results and hit counts for every category?=0D=0A=0D=0A=
Thanks=0D=0ASaurabh=0D=0A=0D=0A----------------------------------------=0D=
=0A=0D=0As.lu@gmail.com>=0D=0ASent: Tuesday, April 24, 2007 2:23 AM=0D=0ATo=
: "java-user@lucene.apache.org" <java-user@lucene.apache.org>=0D=0ASubject:=
 DBSight Turns Free! Instant Lucene Search on Database! =0D=0A=0D=0AFor tho=
se who may be interested,=0D=0A=0D=0ADBSight 1.4.0 now has unlimited index =
size with Free version!=0D=0A=0D=0ABasically DBSight is more like SOLR + da=
tabase adapter. You just point=0D=0Ait with one or several SQLs to any data=
base, and you can have Lucene=0D=0Asearch!=0D=0A=0D=0AIt has Incremental In=
dexing, Recreating Index, Synchronize index with=0D=0Adeleted database reco=
rds, in addition to facet search, multi-server=0D=0Amode clustering. All ca=
n be done just by mouse clicking instead of=0D=0Acoding java.=0D=0A=0D=0AHe=
re is a video on how to create Lucene Database Search in 3 minutes:=0D=0Aht=
tp://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_3_=
minutes=0D=0A=0D=0A-- =0D=0AChris Lu=0D=0A-------------------------=0D=0AIn=
stant Scalable Full-Text Search On Any Database/Application=0D=0Asite: http=
://www.dbsight.net=0D=0Ademo: http://search.dbsight.com=0D=0A=0D=0A--------=
-------------------------------------------------------------=0D=0ATo unsub=
scribe, e-mail: java-user-unsubscribe@lucene.apache.org=0D=0AFor additional=
 commands, e-mail: java-user-help@lucene.apache.org=0D=0A=0D=0A

------_SmarterMail_NextPart_2334677761581677--




From java-user-return-27729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 10:20:18 2007
Return-Path: <java-user-return-27729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38059 invoked from network); 24 Apr 2007 10:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 10:20:18 -0000
Received: (qmail 96268 invoked by uid 500); 24 Apr 2007 10:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96048 invoked by uid 500); 24 Apr 2007 10:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96030 invoked by uid 99); 24 Apr 2007 10:20:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 03:20:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sawan.k.sharma@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 03:20:08 -0700
Received: by an-out-0708.google.com with SMTP id c3so2104199ana
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 03:19:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=BxH+bX8bs6LKKlnrhJkZhF6l4APhJEamn/Tgy5w3UOoHlcDHzpVAWtegajYNV3px2/y0INzbMcx3qLW/s+KNliULRQyDAXSe4/e9ZDWJnZ2S12Af0ZUiHJdM+pb/r/Cgcq8aS/g25gwcpg6ZbChqucmEKs54Yc0aKK/g4NKE/f4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=XC02taql58/lEOqMTW151WxU3MpzYaDGam+B0gya8SdlFOScE8LGD9tQ5Tc0SbVJGGo2Nsq44B8NToptCss4ZjPAwJM2ypYU9lZMjNRY523A6v2aUyQiLkKt6NU5KCAPGoHJH2vX574d2+7piq7FD8s6g3rFO6o3UbX0Gb09Jzw=
Received: by 10.114.14.1 with SMTP id 1mr2986629wan.1177409987288;
        Tue, 24 Apr 2007 03:19:47 -0700 (PDT)
Received: by 10.114.120.5 with HTTP; Tue, 24 Apr 2007 03:19:47 -0700 (PDT)
Message-ID: <ced20d060704240319t2a5e545ai2591b72f2dfdd112@mail.gmail.com>
Date: Tue, 24 Apr 2007 15:49:47 +0530
From: "Sawan Sharma" <sawan.k.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Clustering in MultiSearcher Searchables
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9465_25080575.1177409987245"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9465_25080575.1177409987245
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I am using MultiSearcher to search more then one Index folders. I have one
Index searcher array which contains 3 Index searchers...
01. C:\IndexFolder1
02. C:\IndexFolder2
03. C:\IndexFolder3

When I searched in 3 index folders using a MultiSearcher then I got 3000
hits.

1 to 1000 from C:\IndexFolder1
1001 to 2000 from C:\IndexFolder2
2001 to 3000 from C:\IndexFolder3

Now I want to know that which data searched in
C:\IndexFolder1,C:\IndexFolder2 or C:\IndexFolder3.

Or I want to cluster my data according to 3 Index folders.

I want following...

Doc1------|
Doc2------|
Doc3------|-------------C:\IndexFolder1
.               |
DocN------|

Doc1------|
Doc2------|
Doc3------|-------------C:\IndexFolder2
.               |
DocN------|

Doc1------|
Doc2------|
Doc3------|-------------C:\IndexFolder3
.               |
DocN------|

Thanks & Regards

Sawan

------=_Part_9465_25080575.1177409987245--

From java-user-return-27730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 10:51:42 2007
Return-Path: <java-user-return-27730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49528 invoked from network); 24 Apr 2007 10:51:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 10:51:41 -0000
Received: (qmail 44424 invoked by uid 500); 24 Apr 2007 10:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44391 invoked by uid 500); 24 Apr 2007 10:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44378 invoked by uid 99); 24 Apr 2007 10:51:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 03:51:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rsk.sen@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 03:51:32 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1507830nzh
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 03:51:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DLi/Fj8piClDipEBc0SI6bF7dMXkAfbkfdl6UtoZKf9nL9gsR9QgoawKGCTOfKE+HbMnXY6tLWMpqobiqZckOLABRaaqfjkm2CIIB6i74AJRhwfh8CNF4bBD2Kj4zr/m2vI3ywpsptYUD2yvsg36Q7xdQ6sbvejvhpPtSoBPbCo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z7HsjhVZPDDTpx8qax8LbhmrXFbw+0SxscgLW9/GwytnOQ9ny2vlc7Rjc4logCsa2B2fNwpestM6K86ws7A8tZxwKi81jTUCCLvsilKlb3vLPk0fwuYGCkXGfFwiPK9ZkLl6tW0QIoEKbLbna/0E7DObA593TAVat6chrsO1eqA=
Received: by 10.114.103.1 with SMTP id a1mr2975473wac.1177411869749;
        Tue, 24 Apr 2007 03:51:09 -0700 (PDT)
Received: by 10.115.49.4 with HTTP; Tue, 24 Apr 2007 03:51:09 -0700 (PDT)
Message-ID: <4628d2a90704240351k51b51234x278ed6af3d22e2c5@mail.gmail.com>
Date: Tue, 24 Apr 2007 16:21:09 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get termfreq. of each doc for wildcard terms?
In-Reply-To: <4628d2a90704230300v2a82b174p7df2676c7713e811@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_211596_22697797.1177411869602"
References: <4628d2a90704230300v2a82b174p7df2676c7713e811@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_211596_22697797.1177411869602
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
     Anybody have idea about my previous post?

Regards
RSK

On 4/23/07, SK R <rsk.sen@gmail.com> wrote:
>
> Hi,
>     In my application, sometimes I need to find doc Id with term frequency
> of my terms in my index of multi lines, tokenized & indexed with Standard
> Analyzer. For this, now I'm using *
>     TermDocs termDocs= reader.termDocs(new Term("FIELD","book1");
>     while(termDocs.next())
>     {
>      matches += termDocs.freq();
>      int docId = termDocs.doc();
>     }
>
> **I can't get such doc Id with term frequency of wildcard terms by using
> the same. If I use *WildcardTermEnum* , I can get term freq., but not doc
> ID.
>
>             Please give me any idea to resolve this problem.
>
> Thanks & Regards
> RSK
>

------=_Part_211596_22697797.1177411869602--

From java-user-return-27731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 11:01:57 2007
Return-Path: <java-user-return-27731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54873 invoked from network); 24 Apr 2007 11:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 11:01:56 -0000
Received: (qmail 60055 invoked by uid 500); 24 Apr 2007 11:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60022 invoked by uid 500); 24 Apr 2007 11:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60011 invoked by uid 99); 24 Apr 2007 11:01:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 04:01:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rsk.sen@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 04:01:49 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1793298wra
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 04:01:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=WIxiumxtHHYTOiBZSV2l5yZbO+lq7WTArBxZZWvdWh4ZoNf7BeF+9V3YGs5yzhjN7f3uLRIzEqoEw3N2vNWRlE8tLAO2w9iKlqrK8gmZutIJtI1AF+0No68nOpTkedcZsMHsYwyhI/BHZd977M50qZdM95MCPFP8t7l/tNGIj+A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QWbDJ+QceZEGfpPXyLTZKbH2GeuoRBRMsZ6Zy/y7fiFgERtPdKnHOqteZP+XnPJcmohv94xXy5XA7+ywZNAv63ifOLFKwB0/kE5GXqDeuRNcyjjjSW5QcL0a+y+n24nc82RBm+MGjj39aGeAgO+gOMFN6pnPsqwA+ZMwLSWAvtg=
Received: by 10.115.54.1 with SMTP id g1mr1414604wak.1177412488075;
        Tue, 24 Apr 2007 04:01:28 -0700 (PDT)
Received: by 10.115.49.4 with HTTP; Tue, 24 Apr 2007 04:01:28 -0700 (PDT)
Message-ID: <4628d2a90704240401g2d140b51v4bd853a69cbc0d0a@mail.gmail.com>
Date: Tue, 24 Apr 2007 16:31:28 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: How to get term frequency of multi terms and TimeRange?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_211984_15756910.1177412488018"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_211984_15756910.1177412488018
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
    How to get term frequency of multi terms in particular document? Any API
method other than using TermVector may help?
    Also How to calculate termfreq. of time range. i.e : If my index have a
field "TIME" with values in millis  (like 1176281188000).,  and I want to
calculate term freq. of 1176281188000 to 1176281196838. Does it possible
with Lucene?

    Please help me to give your valuable suggestion.

Thanks
  RSK

------=_Part_211984_15756910.1177412488018--

From java-user-return-27732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 11:03:30 2007
Return-Path: <java-user-return-27732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55997 invoked from network); 24 Apr 2007 11:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 11:03:26 -0000
Received: (qmail 62582 invoked by uid 500); 24 Apr 2007 11:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62197 invoked by uid 500); 24 Apr 2007 11:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 59763 invoked by uid 99); 24 Apr 2007 11:01:24 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of divya.rajendranath@gmail.com designates 66.249.82.235 as permitted sender)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=QUTgI8TxJdLprsWwSBlOQ1l7iy10227LCnKlyim3xjLzJVrrSwgR6+7hAZ/iTUohVGnIFGUoaTkryZundQdExI/zhIyTtbMuavZLxmLhRVEzSiysufKo9Pzk28zVgOV7dCeKpgOt15ASRAe507GVDXuuHvcZm/Me2gIcInJSwx4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=S2A2esGk7hs6H6IPoK09el1LMXwL/EDoXnXLsBA7IijxbiYz6qEbjmBugLIi3HJDIvd1nIBRWL9oHERLP0Z2bX5rg9D7WnSk/5nLKPc+HyOMutJT/+22W4lOgQno+9wAsz/PBPhXWWepBwKKPv8CxrB47tY7vfiHVepaliIoRfo=
Message-ID: <cd7dd9c0704240400i3f8be4b0m40020c08fd473f73@mail.gmail.com>
Date: Tue, 24 Apr 2007 16:30:55 +0530
From: "Divya Rajendranath" <divya.rajendranath@gmail.com>
To: java-user@lucene.apache.org
Subject: Adding large files to index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_90485_3411273.1177412455508"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_90485_3411273.1177412455508
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello All,

Could any one help me find solution to the following problem ?

I am facing problems while trying to add files of size 50MB to my
application. The application has on-demand indexing of documents in
place.whenever we add a file to our application, we first put the file
details/metadata to our database, then create an encrytpted copy of the file
in our own filesystem, then extract the content and add it to Lucene index.
We set Java heap min = 256 M and max = 1024 mb. Extraction & adding to index
is done in a background thread. Soon, after we extract the document's
content, add it to index and close the index writer, we are getting
OutOfMemory Error (memory used is about 1160mb). Because, the main thread is
unaware of the exception, it allows users to continue using the application.
I observed that the write.lock file continues to remain in /var/tmp
directory for about 10 mins, it is not getting cleaned up soon. On
searching, the 50 MB document do not come up in search. But, when I continue
using my application by deleting some other documents, after adding the 50
MB file, I find that lucene is not getting updated with the recent changes.
Once, this error occurs lucene is not getting modified/updated even if I add
a new 10KB file nor delete any file.

Here, is the stack trace

===

2007-04-24 13:16:47,454 INFO [docman.index.Index] Adding 20 to physical
index

2007-04-24 13:16:47,454 INFO [docman.index.Index] Index::addToIndex() took
27207 msec.

2007-04-24 13:16:47,454 INFO [docman.index.Index] going to close index
writer

2007-04-24 13:17:00,945 INFO [STDOUT] Exception in thread "Thread-12"

2007-04-24 13:17:00,945 INFO [STDOUT] java.lang.OutOfMemoryError: Java heap
space

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.store.IndexInput.readString(IndexInput.java:91)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:130)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:284)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:186)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:88)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:709)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:656)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:402)

2007-04-24 13:17:00,945 INFO [STDOUT] at docman.index.Index.closeIndex(
Index.java:594)

2007-04-24 13:17:00,946 INFO [STDOUT] at docman.index.Index.addToIndex(
Index.java:401)

2007-04-24 13:17:00,946 INFO [STDOUT] at
docman.index.Index.index(Index.java:437)


2007-04-24 13:17:00,946 INFO [STDOUT] at
docman.index.FastIndex$IndexWorker.run(FastIndex.java:174)

===



user@sx86qa3:/u/user/test/application> ls -al index

total 450208

drwxrwsr-x 2 user group 4096 Apr 24 15:40 .

drwxrwsrwx 10 user group 4096 Apr 23 18:36 ..

-rw-rw-r-- 1 user group 80289688 Apr 23 18:45 _j.cfs

-rw-rw-r-- 1 user group 114021843 Apr 23 19:34 _x.cfs

-rw-rw-r-- 1 user group 35937776 Apr 24 15:40 _z.fdt

-rw-rw-r-- 1 user group 16 Apr 24 15:40 _z.fdx

-rw-rw-r-- 1 user group 503 Apr 24 15:40 _z.fnm

-rw-rw-r-- 1 user group 4 Apr 23 19:34 deletable

-rw-rw-r-- 1 user group 34 Apr 23 19:34 segments

user@sx86qa3:/u/user/test/application

There are about 30 files in the application of which 6-7 are of 50 MB, and
the remaining are hardly a few KB.

Is the OutFMemory error corrupting the index ? Why is it that the index is
not responsive to delete operation after the error ?

I waited for 10mins for the lock file to get removed on its own, then tried
deleting/adding new 10KB files (after memory usage came back within java max
heap size), still the index is not responsive.

Please let me know the cause and the solution to the problem.



Divya.

------=_Part_90485_3411273.1177412455508--

From java-user-return-27733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 12:31:42 2007
Return-Path: <java-user-return-27733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90726 invoked from network); 24 Apr 2007 12:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 12:31:41 -0000
Received: (qmail 39955 invoked by uid 500); 24 Apr 2007 12:31:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39913 invoked by uid 500); 24 Apr 2007 12:31:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39902 invoked by uid 99); 24 Apr 2007 12:31:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 05:31:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of davihigh@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 05:31:30 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1818286wra
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 05:31:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:references:in-reply-to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:content-language;
        b=qUU6Ip7tsGl+cLVXr9//CZW7aJDJ0coStnCy/LDfwA5OzxnYGHemmqX/AGXPDMPLqMVREj66ZV5is63LYeLIAMvpIBctPwv3xOEFtsskWqsJk7wj0tyNoTeAmgWHoHRiCpg3T4UR07ixhO0YyNsbZLSlCUgjwgWSfGc85stumGQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:references:in-reply-to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:content-language;
        b=Q+Vf1+cGUG/3yz7F+uM6k1nxayeTdnXtLXr5k+/z6pRwebgDl+Oq/7NfDtwKLM5P3FC+GwoM/+vMVSjAKw6xGvqfGd1wwx4FPnbZx/PZf0WV65QUsFKf3ts3NNJ5PJ+IQGXntIMBNMaF/xD/S7Y/VAmOZHi7QEz2uhOLpAsp4dg=
Received: by 10.114.110.1 with SMTP id i1mr3034140wac.1177417869462;
        Tue, 24 Apr 2007 05:31:09 -0700 (PDT)
Received: from HOME ( [61.171.43.126])
        by mx.google.com with ESMTP id y11sm406602pod.2007.04.24.05.31.03;
        Tue, 24 Apr 2007 05:31:08 -0700 (PDT)
From: "David Xiao" <davihigh@gmail.com>
To: <java-user@lucene.apache.org>
References: <cd7dd9c0704240400i3f8be4b0m40020c08fd473f73@mail.gmail.com>
In-Reply-To: <cd7dd9c0704240400i3f8be4b0m40020c08fd473f73@mail.gmail.com>
Subject: RE: Adding large files to index
Date: Tue, 24 Apr 2007 20:31:18 +0800
Message-ID: <001201c7866c$79f2e560$6dd8b020$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AceGYC3+5u/VHZXeQkaOLBauZXpqVgADCBew
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Use java -Xms50m to start your program, that gives a 50M initial heap =
size.
The OutofHeapMemory is because the default heap memory is not enough for =
your application.


-----Original Message-----
From: Divya Rajendranath [mailto:divya.rajendranath@gmail.com]=20
Sent: Tuesday, April 24, 2007 7:01 PM
To: java-user@lucene.apache.org
Subject: Adding large files to index

Hello All,

Could any one help me find solution to the following problem ?

I am facing problems while trying to add files of size 50MB to my
application. The application has on-demand indexing of documents in
place.whenever we add a file to our application, we first put the file
details/metadata to our database, then create an encrytpted copy of the =
file
in our own filesystem, then extract the content and add it to Lucene =
index.
We set Java heap min =3D 256 M and max =3D 1024 mb. Extraction & adding =
to index
is done in a background thread. Soon, after we extract the document's
content, add it to index and close the index writer, we are getting
OutOfMemory Error (memory used is about 1160mb). Because, the main =
thread is
unaware of the exception, it allows users to continue using the =
application.
I observed that the write.lock file continues to remain in /var/tmp
directory for about 10 mins, it is not getting cleaned up soon. On
searching, the 50 MB document do not come up in search. But, when I =
continue
using my application by deleting some other documents, after adding the =
50
MB file, I find that lucene is not getting updated with the recent =
changes.
Once, this error occurs lucene is not getting modified/updated even if I =
add
a new 10KB file nor delete any file.

Here, is the stack trace

=3D=3D=3D

2007-04-24 13:16:47,454 INFO [docman.index.Index] Adding 20 to physical
index

2007-04-24 13:16:47,454 INFO [docman.index.Index] Index::addToIndex() =
took
27207 msec.

2007-04-24 13:16:47,454 INFO [docman.index.Index] going to close index
writer

2007-04-24 13:17:00,945 INFO [STDOUT] Exception in thread "Thread-12"

2007-04-24 13:17:00,945 INFO [STDOUT] java.lang.OutOfMemoryError: Java =
heap
space

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.store.IndexInput.readString(IndexInput.java:91)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:130)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:284)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:186)=


2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:88)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:709)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:656=
)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:402)

2007-04-24 13:17:00,945 INFO [STDOUT] at docman.index.Index.closeIndex(
Index.java:594)

2007-04-24 13:17:00,946 INFO [STDOUT] at docman.index.Index.addToIndex(
Index.java:401)

2007-04-24 13:17:00,946 INFO [STDOUT] at
docman.index.Index.index(Index.java:437)


2007-04-24 13:17:00,946 INFO [STDOUT] at
docman.index.FastIndex$IndexWorker.run(FastIndex.java:174)

=3D=3D=3D



user@sx86qa3:/u/user/test/application> ls -al index

total 450208

drwxrwsr-x 2 user group 4096 Apr 24 15:40 .

drwxrwsrwx 10 user group 4096 Apr 23 18:36 ..

-rw-rw-r-- 1 user group 80289688 Apr 23 18:45 _j.cfs

-rw-rw-r-- 1 user group 114021843 Apr 23 19:34 _x.cfs

-rw-rw-r-- 1 user group 35937776 Apr 24 15:40 _z.fdt

-rw-rw-r-- 1 user group 16 Apr 24 15:40 _z.fdx

-rw-rw-r-- 1 user group 503 Apr 24 15:40 _z.fnm

-rw-rw-r-- 1 user group 4 Apr 23 19:34 deletable

-rw-rw-r-- 1 user group 34 Apr 23 19:34 segments

user@sx86qa3:/u/user/test/application

There are about 30 files in the application of which 6-7 are of 50 MB, =
and
the remaining are hardly a few KB.

Is the OutFMemory error corrupting the index ? Why is it that the index =
is
not responsive to delete operation after the error ?

I waited for 10mins for the lock file to get removed on its own, then =
tried
deleting/adding new 10KB files (after memory usage came back within java =
max
heap size), still the index is not responsive.

Please let me know the cause and the solution to the problem.



Divya.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 12:55:21 2007
Return-Path: <java-user-return-27734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99822 invoked from network); 24 Apr 2007 12:55:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 12:55:20 -0000
Received: (qmail 95118 invoked by uid 500); 24 Apr 2007 12:55:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94748 invoked by uid 500); 24 Apr 2007 12:55:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94737 invoked by uid 99); 24 Apr 2007 12:55:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 05:55:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 05:55:11 -0700
Received: from mailhyd1.hyd.deshaw.com (mailhyd1-hba1.hyd.deshaw.com [149.77.160.72])
 by master.hyd.deshaw.com (8.13.7/8.13.7/2.0.kim.desco.357) with ESMTP id l3OCsjLY012396
 for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 18:24:48 +0530 (IST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Adding large files to index
Date: Tue, 24 Apr 2007 18:24:45 +0530
Message-ID: <A1C9CFAF5B94574892B0B5AD7874E8BE010E4A52@mailhyd1.hyd.deshaw.com>
In-Reply-To: <001201c7866c$79f2e560$6dd8b020$@com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Adding large files to index
Thread-Index: AceGYC3+5u/VHZXeQkaOLBauZXpqVgADCBewAACU+bA=
References: <cd7dd9c0704240400i3f8be4b0m40020c08fd473f73@mail.gmail.com> <001201c7866c$79f2e560$6dd8b020$@com>
From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

But, I am facing the problem even with -Xms 256m and -Xmx 1024m.

Yes, the file was not added to the index because java process was
already using 1156m of memory, which is much higher than the max heap
memory.
But, even after waiting for a few minutes till the memory came below the
max heap value, the index was not responsive (no documents were being
added/deleted in the index).
What could be the reason for this ?


Divya

-----Original Message-----
From: David Xiao [mailto:davihigh@gmail.com]=20
Sent: Tuesday, April 24, 2007 6:01 PM
To: java-user@lucene.apache.org
Subject: RE: Adding large files to index

Use java -Xms50m to start your program, that gives a 50M initial heap
size.
The OutofHeapMemory is because the default heap memory is not enough for
your application.


-----Original Message-----
From: Divya Rajendranath [mailto:divya.rajendranath@gmail.com]=20
Sent: Tuesday, April 24, 2007 7:01 PM
To: java-user@lucene.apache.org
Subject: Adding large files to index

Hello All,

Could any one help me find solution to the following problem ?

I am facing problems while trying to add files of size 50MB to my
application. The application has on-demand indexing of documents in
place.whenever we add a file to our application, we first put the file
details/metadata to our database, then create an encrytpted copy of the
file
in our own filesystem, then extract the content and add it to Lucene
index.
We set Java heap min =3D 256 M and max =3D 1024 mb. Extraction & adding =
to
index
is done in a background thread. Soon, after we extract the document's
content, add it to index and close the index writer, we are getting
OutOfMemory Error (memory used is about 1160mb). Because, the main
thread is
unaware of the exception, it allows users to continue using the
application.
I observed that the write.lock file continues to remain in /var/tmp
directory for about 10 mins, it is not getting cleaned up soon. On
searching, the 50 MB document do not come up in search. But, when I
continue
using my application by deleting some other documents, after adding the
50
MB file, I find that lucene is not getting updated with the recent
changes.
Once, this error occurs lucene is not getting modified/updated even if I
add
a new 10KB file nor delete any file.

Here, is the stack trace

=3D=3D=3D

2007-04-24 13:16:47,454 INFO [docman.index.Index] Adding 20 to physical
index

2007-04-24 13:16:47,454 INFO [docman.index.Index] Index::addToIndex()
took
27207 msec.

2007-04-24 13:16:47,454 INFO [docman.index.Index] going to close index
writer

2007-04-24 13:17:00,945 INFO [STDOUT] Exception in thread "Thread-12"

2007-04-24 13:17:00,945 INFO [STDOUT] java.lang.OutOfMemoryError: Java
heap
space

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.store.IndexInput.readString(IndexInput.java:91)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:130)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:284)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:186
)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:88)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:709)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:65
6)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:402)

2007-04-24 13:17:00,945 INFO [STDOUT] at docman.index.Index.closeIndex(
Index.java:594)

2007-04-24 13:17:00,946 INFO [STDOUT] at docman.index.Index.addToIndex(
Index.java:401)

2007-04-24 13:17:00,946 INFO [STDOUT] at
docman.index.Index.index(Index.java:437)


2007-04-24 13:17:00,946 INFO [STDOUT] at
docman.index.FastIndex$IndexWorker.run(FastIndex.java:174)

=3D=3D=3D



user@sx86qa3:/u/user/test/application> ls -al index

total 450208

drwxrwsr-x 2 user group 4096 Apr 24 15:40 .

drwxrwsrwx 10 user group 4096 Apr 23 18:36 ..

-rw-rw-r-- 1 user group 80289688 Apr 23 18:45 _j.cfs

-rw-rw-r-- 1 user group 114021843 Apr 23 19:34 _x.cfs

-rw-rw-r-- 1 user group 35937776 Apr 24 15:40 _z.fdt

-rw-rw-r-- 1 user group 16 Apr 24 15:40 _z.fdx

-rw-rw-r-- 1 user group 503 Apr 24 15:40 _z.fnm

-rw-rw-r-- 1 user group 4 Apr 23 19:34 deletable

-rw-rw-r-- 1 user group 34 Apr 23 19:34 segments

user@sx86qa3:/u/user/test/application

There are about 30 files in the application of which 6-7 are of 50 MB,
and
the remaining are hardly a few KB.

Is the OutFMemory error corrupting the index ? Why is it that the index
is
not responsive to delete operation after the error ?

I waited for 10mins for the lock file to get removed on its own, then
tried
deleting/adding new 10KB files (after memory usage came back within java
max
heap size), still the index is not responsive.

Please let me know the cause and the solution to the problem.



Divya.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 13:17:14 2007
Return-Path: <java-user-return-27735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7864 invoked from network); 24 Apr 2007 13:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 13:17:12 -0000
Received: (qmail 34788 invoked by uid 500); 24 Apr 2007 13:17:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34761 invoked by uid 500); 24 Apr 2007 13:17:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34750 invoked by uid 99); 24 Apr 2007 13:17:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 06:17:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of abublic@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 06:17:03 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1833055wra
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 06:16:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Kzz76YU20iaj74WtjXHtx6LlMhMi9006myRE2Z7lgoq9qjJqBwAWBMuWxH9vkIa9T4jFY+JFaaK8ils55dY0+SMIKPaAPtTteMsXg8PH+jxoZf0kcbHXtcVPAsWLR/61jpGB/EdR3x8zxI0klNRl/33j2vdfzGLi9YiQCLCy2pk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n8+gsGGTRPQqyGvW+BNHQbhD6afIbU3a05XpkqfcaqFg3XK+ZxY9W/4gBZN4H01nWaz3lXyu0dJr9ebuB2brHxA6xCetx+LxhGjPdh6qolrOkevqoRAl4FQnwVbPIHnWROerrUgscVFwy4hdhijUJTFzhAQSC0Rml9pmC0sGlrI=
Received: by 10.78.200.3 with SMTP id x3mr1400236huf.1177420600066;
        Tue, 24 Apr 2007 06:16:40 -0700 (PDT)
Received: by 10.66.228.3 with HTTP; Tue, 24 Apr 2007 06:16:39 -0700 (PDT)
Message-ID: <872e2d490704240616p1f9f08c7u376d27916cf3950@mail.gmail.com>
Date: Tue, 24 Apr 2007 17:16:39 +0400
From: "Artem Vasiliev" <abublic@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
In-Reply-To: <462D044F.9020802@sirma.bg>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_207939_25903343.1177420599945"
References: <46162A72.50400@sirma.bg>
	 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
	 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
	 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
	 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
	 <814127511.20070408213229@gmail.com> <462D044F.9020802@sirma.bg>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_207939_25903343.1177420599945
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Ivan!

It's so sad to me that you had bad results with that patch. :)

The discussion in the ticket is out-of-date - the patch was initially in
several classes, used WeakHashMap but then it evolved to what it's now - one
StoredFieldSortFactory class. I use it in my sharehound app in pretty much
the same the form it is in Jira currently and it does show good results to
me.

In your sample searches,
- how many results do you have?
- how long does the sorted search execute?
- what is the average size of a sorted field?
- what is the CPU and how much of it and memory you give to the application?

I get page 1 (first 100 items) of sorted list with 10000 items in 0.3s to 3s
(for date column it exactly depends on whether the sort is ascending or
descending - don't know why is that). My index is about 1mln docs and 1G;
sorted fields are rather small (numbers, dates and string of maybe 50
symbols average). The machine looks quite beefy to me - Intel core duo with
500M given to the application.

Regards,
Artem

On 4/23/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>
> Hi All,
> THANK YOU FOR YOUR HELP :)
> I put this problem in the forum but I had no chance to work on it last
> week unfurtunately...
> So now I tested the Artem's patch but the results show:
> 1) speed is very slow compare with the usage without patch
> 2) There are not very big differences of memory usage (I tested till now
> only with relativly small indexes - less than 1 GB and less than 1 mil
> docs because the when using with 20-40 GB indexes I had to wait more
> than 5 mins what is practically usless).
>
> So I have doubts if I use the patch correctly. I do just what is
> described in Artem's letter:
>
> AV> You can include StoredFieldSortFactory class source file into your
> sources and
> AV> then use StoredFieldSortFactory.create(sortFieldName, sortDescending)
> to get
> AV> Sort object for sorting query.
> AV> StoredFieldSortFactory source file can be extracted from LUCENE-769
> patch or
> AV> from sharehound sources:
> http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/apache/lucene/search/StoredFieldSortFactory.java
>
>
> What I am wondering about is that in the patch commetns
> (https://issues.apache.org/jira/browse/LUCENE-769) I see that there is
> written that patch solves the problem by using WeakHashMap, but actually
> in the downloaded StoredFieldSortFactory.java  file there is not used
> WeakHashMap. Another thing: In the comments in Lucene-769 issue there is
> mentioned something about classes like: WeakDocumentsCache and
> DocCachingIndexReader but I did not found them in Lucene source code
> neither as classes in StoredFieldSortFactory.java. So my questions are:
> 1. Is it enought to include the file StoredFieldSortFactory.java in the
> source code or there are also other classes that I have to douwnload and
> include?
> 2. Have I to use this DocCachingIndexReader instead of Reader that I
> currently use in cases when I expect OOMException and will use this patch?
>
> Thanks to all once again :),
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_207939_25903343.1177420599945--

From java-user-return-27736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 13:27:20 2007
Return-Path: <java-user-return-27736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19968 invoked from network); 24 Apr 2007 13:27:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 13:27:19 -0000
Received: (qmail 64081 invoked by uid 500); 24 Apr 2007 13:27:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63853 invoked by uid 500); 24 Apr 2007 13:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63842 invoked by uid 99); 24 Apr 2007 13:27:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 06:27:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of abublic@gmail.com designates 66.249.90.180 as permitted sender)
Received: from [66.249.90.180] (HELO ik-out-1112.google.com) (66.249.90.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 06:27:10 -0700
Received: by ik-out-1112.google.com with SMTP id b35so2281629ika
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 06:26:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OG93BOROTAVi38iMCHHJGbqhmAcv7PbvGv5laDQG35Wf/tjsci3tKwnvlZ8t/Ne16580o4pfGCZ6RQg8CEXV70LvRgIIFILn0ODHzZTc8esZ8LiVNr3xfmLU8w8vruhKGVLJ4A+3/PJ78Sx+lWF0k/8iLAbZKn6Dq202Azf7bQc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hlt3PN+5SX3MAQwzaOJH/dXmRF6IqFfmihLkrC3yCxseZq5fD9n1wWYRf5NzPAPB4FM7jhoL8tj2Htp6CBMNwkJt0v2NudXZeYUVKYmpZe5jHOs+v2+g/6sXxJR4sC2f07MoIRK7clFDuglW3tSzn/JQKxbPeuGXs3psB1QenxM=
Received: by 10.78.149.15 with SMTP id w15mr1398718hud.1177421203345;
        Tue, 24 Apr 2007 06:26:43 -0700 (PDT)
Received: by 10.66.228.3 with HTTP; Tue, 24 Apr 2007 06:26:43 -0700 (PDT)
Message-ID: <872e2d490704240626i60093a32r8480920de52c7adb@mail.gmail.com>
Date: Tue, 24 Apr 2007 17:26:43 +0400
From: "Artem Vasiliev" <abublic@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
In-Reply-To: <872e2d490704240616p1f9f08c7u376d27916cf3950@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_208327_16711768.1177421203248"
References: <46162A72.50400@sirma.bg>
	 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
	 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
	 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
	 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
	 <814127511.20070408213229@gmail.com> <462D044F.9020802@sirma.bg>
	 <872e2d490704240616p1f9f08c7u376d27916cf3950@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_208327_16711768.1177421203248
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ahhh, you said in your original post that your search matches _all_ the
results.. Yup my patch will not help much in this case - after all all the
values have to be read to be compared while sorting! :)

LUCENE-769 patch helps only if result set is significantly less than full
index size.

Regards,
Artem

On 4/24/07, Artem Vasiliev <abublic@gmail.com> wrote:
>
> Hello Ivan!
>
> It's so sad to me that you had bad results with that patch. :)
>
> The discussion in the ticket is out-of-date - the patch was initially in
> several classes, used WeakHashMap but then it evolved to what it's now - one
> StoredFieldSortFactory class. I use it in my sharehound app in pretty much
> the same the form it is in Jira currently and it does show good results to
> me.
>
> In your sample searches,
> - how many results do you have?
> - how long does the sorted search execute?
> - what is the average size of a sorted field?
> - what is the CPU and how much of it and memory you give to the
> application?
>
> I get page 1 (first 100 items) of sorted list with 10000 items in 0.3s to
> 3s (for date column it exactly depends on whether the sort is ascending or
> descending - don't know why is that). My index is about 1mln docs and 1G;
> sorted fields are rather small (numbers, dates and string of maybe 50
> symbols average). The machine looks quite beefy to me - Intel core duo with
> 500M given to the application.
>
> Regards,
> Artem
>
> On 4/23/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
> >
> > Hi All,
> > THANK YOU FOR YOUR HELP :)
> > I put this problem in the forum but I had no chance to work on it last
> > week unfurtunately...
> > So now I tested the Artem's patch but the results show:
> > 1) speed is very slow compare with the usage without patch
> > 2) There are not very big differences of memory usage (I tested till now
> > only with relativly small indexes - less than 1 GB and less than 1 mil
> > docs because the when using with 20-40 GB indexes I had to wait more
> > than 5 mins what is practically usless).
> >
> > So I have doubts if I use the patch correctly. I do just what is
> > described in Artem's letter:
> >
> > AV> You can include StoredFieldSortFactory class source file into your
> > sources and
> > AV> then use StoredFieldSortFactory.create(sortFieldName,
> > sortDescending) to get
> > AV> Sort object for sorting query.
> > AV> StoredFieldSortFactory source file can be extracted from LUCENE-769
> > patch or
> > AV> from sharehound sources: http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/apache/lucene/search/StoredFieldSortFactory.java
> >
> >
> >
> > What I am wondering about is that in the patch commetns
> > (https://issues.apache.org/jira/browse/LUCENE-769) I see that there is
> > written that patch solves the problem by using WeakHashMap, but actually
> >
> > in the downloaded StoredFieldSortFactory.java  file there is not used
> > WeakHashMap. Another thing: In the comments in Lucene-769 issue there is
> > mentioned something about classes like: WeakDocumentsCache and
> > DocCachingIndexReader but I did not found them in Lucene source code
> > neither as classes in StoredFieldSortFactory.java. So my questions are:
> > 1. Is it enought to include the file StoredFieldSortFactory.java in the
> > source code or there are also other classes that I have to douwnload and
> >
> > include?
> > 2. Have I to use this DocCachingIndexReader instead of Reader that I
> > currently use in cases when I expect OOMException and will use this
> > patch?
> >
> > Thanks to all once again :),
> > Ivan
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_208327_16711768.1177421203248--

From java-user-return-27737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 13:30:37 2007
Return-Path: <java-user-return-27737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22837 invoked from network); 24 Apr 2007 13:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 13:30:30 -0000
Received: (qmail 71906 invoked by uid 500); 24 Apr 2007 13:30:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71853 invoked by uid 500); 24 Apr 2007 13:30:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71826 invoked by uid 99); 24 Apr 2007 13:30:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 06:30:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of abublic@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 06:30:04 -0700
Received: by ug-out-1314.google.com with SMTP id k40so159827ugc
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 06:29:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=btVwLycQDDl38SwTCsfBggFz+QSuz1mTvjqOkHvCkHYszwrKOIjcWgzeySh48qf8nH2o79zjjsHdWRV+AvJWsYYayYqHYapqrt7AL+p8LIBQAeC5rYjOjrORwNzwTjBzdCCBMbjJuM+7qyYbD3WPrE+v4QkA+yKN6asneRWEU6s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ANaNmqXokumEA/0GjlkoUydN5Pebi/pQdQg6Rt0xrOvJE0hwfpXtD9XsP0cdiHgZJlXflZ+CdqxKTK2ASohTPBsGSTRbVHPfof1rjOwnOzN/TfJMMZvWSCnkWjnVO2ru6k2RPVsnUgGPuDkYOradRSG34OaTNgMGQbhhhovz4ug=
Received: by 10.78.193.5 with SMTP id q5mr1408016huf.1177421382459;
        Tue, 24 Apr 2007 06:29:42 -0700 (PDT)
Received: by 10.66.228.3 with HTTP; Tue, 24 Apr 2007 06:29:42 -0700 (PDT)
Message-ID: <872e2d490704240629u748fd386w520342ce95ac2fae@mail.gmail.com>
Date: Tue, 24 Apr 2007 17:29:42 +0400
From: "Artem Vasiliev" <abublic@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
In-Reply-To: <872e2d490704240626i60093a32r8480920de52c7adb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_208455_23309124.1177421382157"
References: <46162A72.50400@sirma.bg>
	 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
	 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
	 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
	 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
	 <814127511.20070408213229@gmail.com> <462D044F.9020802@sirma.bg>
	 <872e2d490704240616p1f9f08c7u376d27916cf3950@mail.gmail.com>
	 <872e2d490704240626i60093a32r8480920de52c7adb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_208455_23309124.1177421382157
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ivan!

btw may be forbidding the sorted search in case of too many results is an
option? I did this way in my case.

Regards,
Artem.

On 4/24/07, Artem Vasiliev <abublic@gmail.com> wrote:
>
> Ahhh, you said in your original post that your search matches _all_ the
> results.. Yup my patch will not help much in this case - after all all the
> values have to be read to be compared while sorting! :)
>
> LUCENE-769 patch helps only if result set is significantly less than full
> index size.
>
> Regards,
> Artem
>
> On 4/24/07, Artem Vasiliev <abublic@gmail.com> wrote:
> >
> > Hello Ivan!
> >
> > It's so sad to me that you had bad results with that patch. :)
> >
> > The discussion in the ticket is out-of-date - the patch was initially in
> > several classes, used WeakHashMap but then it evolved to what it's now - one
> > StoredFieldSortFactory class. I use it in my sharehound app in pretty much
> > the same the form it is in Jira currently and it does show good results to
> > me.
> >
> > In your sample searches,
> > - how many results do you have?
> > - how long does the sorted search execute?
> > - what is the average size of a sorted field?
> > - what is the CPU and how much of it and memory you give to the
> > application?
> >
> > I get page 1 (first 100 items) of sorted list with 10000 items in 0.3sto 3s (for date column it exactly depends on whether the sort is ascending
> > or descending - don't know why is that). My index is about 1mln docs and 1G;
> > sorted fields are rather small (numbers, dates and string of maybe 50
> > symbols average). The machine looks quite beefy to me - Intel core duo with
> > 500M given to the application.
> >
> > Regards,
> > Artem
> >
> > On 4/23/07, Ivan Vasilev < ivasilev@sirma.bg> wrote:
> > >
> > > Hi All,
> > > THANK YOU FOR YOUR HELP :)
> > > I put this problem in the forum but I had no chance to work on it last
> > > week unfurtunately...
> > > So now I tested the Artem's patch but the results show:
> > > 1) speed is very slow compare with the usage without patch
> > > 2) There are not very big differences of memory usage (I tested till
> > > now
> > > only with relativly small indexes - less than 1 GB and less than 1 mil
> > > docs because the when using with 20-40 GB indexes I had to wait more
> > > than 5 mins what is practically usless).
> > >
> > > So I have doubts if I use the patch correctly. I do just what is
> > > described in Artem's letter:
> > >
> > > AV> You can include StoredFieldSortFactory class source file into your
> > > sources and
> > > AV> then use StoredFieldSortFactory.create(sortFieldName,
> > > sortDescending) to get
> > > AV> Sort object for sorting query.
> > > AV> StoredFieldSortFactory source file can be extracted from
> > > LUCENE-769 patch or
> > > AV> from sharehound sources: http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/apache/lucene/search/StoredFieldSortFactory.java
> > >
> > >
> > >
> > > What I am wondering about is that in the patch commetns
> > > (https://issues.apache.org/jira/browse/LUCENE-769 ) I see that there
> > > is
> > > written that patch solves the problem by using WeakHashMap, but
> > > actually
> > > in the downloaded StoredFieldSortFactory.java  file there is not used
> > > WeakHashMap. Another thing: In the comments in Lucene-769 issue there
> > > is
> > > mentioned something about classes like: WeakDocumentsCache and
> > > DocCachingIndexReader but I did not found them in Lucene source code
> > > neither as classes in StoredFieldSortFactory.java. So my questions
> > > are:
> > > 1. Is it enought to include the file StoredFieldSortFactory.java in
> > > the
> > > source code or there are also other classes that I have to douwnload
> > > and
> > > include?
> > > 2. Have I to use this DocCachingIndexReader instead of Reader that I
> > > currently use in cases when I expect OOMException and will use this
> > > patch?
> > >
> > > Thanks to all once again :),
> > > Ivan
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_208455_23309124.1177421382157--

From java-user-return-27738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 13:32:27 2007
Return-Path: <java-user-return-27738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24417 invoked from network); 24 Apr 2007 13:31:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 13:31:13 -0000
Received: (qmail 80083 invoked by uid 500); 24 Apr 2007 13:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80043 invoked by uid 500); 24 Apr 2007 13:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80032 invoked by uid 99); 24 Apr 2007 13:31:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 06:31:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of davihigh@gmail.com designates 64.233.162.225 as permitted sender)
Received: from [64.233.162.225] (HELO nz-out-0506.google.com) (64.233.162.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 06:31:04 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1545629nzh
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 06:30:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:references:in-reply-to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:content-language;
        b=TSSmPjVhWOI0NmexY51EkKK7HUYfvqWgzYoFVtgng59oTmGYkvJ6hJvFKzpkVF81KTW9jCnT64QExgN7kJrGIYEu4w/MlZ7c9ppd8s0diVnny/gqSDAssstpz8Dm8rbkm2pPYem1gjSxheuN8Q6hHOre6gFmtbps3DgmdsGR5es=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:references:in-reply-to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:content-language;
        b=CQbukV3+Iz0XGuWoe2F5YdQqyiYQANSBsrhsZZFjwoFzXEP0CYYo+zSo8bA4mmMAV4Kgc/KeAIMI/gSSQYubB0CbfPKWcpPG79EeAprU9LCKwbeIyEETidJE0Yy4h3yZOFwygnFzY5qk+ITMgaEv05TKsppYk5uQUUZc9d74t4o=
Received: by 10.114.254.1 with SMTP id b1mr698644wai.1177421442741;
        Tue, 24 Apr 2007 06:30:42 -0700 (PDT)
Received: from HOME ( [61.171.43.126])
        by mx.google.com with ESMTP id m28sm86325poh.2007.04.24.06.30.34;
        Tue, 24 Apr 2007 06:30:42 -0700 (PDT)
From: "David Xiao" <davihigh@gmail.com>
To: <java-user@lucene.apache.org>
References: <cd7dd9c0704240400i3f8be4b0m40020c08fd473f73@mail.gmail.com> <001201c7866c$79f2e560$6dd8b020$@com> <A1C9CFAF5B94574892B0B5AD7874E8BE010E4A52@mailhyd1.hyd.deshaw.com>
In-Reply-To: <A1C9CFAF5B94574892B0B5AD7874E8BE010E4A52@mailhyd1.hyd.deshaw.com>
Subject: RE: Adding large files to index
Date: Tue, 24 Apr 2007 21:30:45 +0800
Message-ID: <001601c78674$cb06d760$61148620$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AceGYC3+5u/VHZXeQkaOLBauZXpqVgADCBewAACU+bAAAXkFkA==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Consider reduce size of per file. Split them into smaller pieces will =
definitely help indexer working faster.

A 50M pure text file is amazing size, very few text files reach that =
size: 50M. It must be very reasonable if you have to keep all =
information in such one big file.

What you think?



-----Original Message-----
From: Rajendranath, Divya [mailto:Divya.Rajendranath@deshaw.com]=20
Sent: Tuesday, April 24, 2007 8:55 PM
To: java-user@lucene.apache.org
Subject: RE: Adding large files to index

But, I am facing the problem even with -Xms 256m and -Xmx 1024m.

Yes, the file was not added to the index because java process was
already using 1156m of memory, which is much higher than the max heap
memory.
But, even after waiting for a few minutes till the memory came below the
max heap value, the index was not responsive (no documents were being
added/deleted in the index).
What could be the reason for this ?


Divya

-----Original Message-----
From: David Xiao [mailto:davihigh@gmail.com]=20
Sent: Tuesday, April 24, 2007 6:01 PM
To: java-user@lucene.apache.org
Subject: RE: Adding large files to index

Use java -Xms50m to start your program, that gives a 50M initial heap
size.
The OutofHeapMemory is because the default heap memory is not enough for
your application.


-----Original Message-----
From: Divya Rajendranath [mailto:divya.rajendranath@gmail.com]=20
Sent: Tuesday, April 24, 2007 7:01 PM
To: java-user@lucene.apache.org
Subject: Adding large files to index

Hello All,

Could any one help me find solution to the following problem ?

I am facing problems while trying to add files of size 50MB to my
application. The application has on-demand indexing of documents in
place.whenever we add a file to our application, we first put the file
details/metadata to our database, then create an encrytpted copy of the
file
in our own filesystem, then extract the content and add it to Lucene
index.
We set Java heap min =3D 256 M and max =3D 1024 mb. Extraction & adding =
to
index
is done in a background thread. Soon, after we extract the document's
content, add it to index and close the index writer, we are getting
OutOfMemory Error (memory used is about 1160mb). Because, the main
thread is
unaware of the exception, it allows users to continue using the
application.
I observed that the write.lock file continues to remain in /var/tmp
directory for about 10 mins, it is not getting cleaned up soon. On
searching, the 50 MB document do not come up in search. But, when I
continue
using my application by deleting some other documents, after adding the
50
MB file, I find that lucene is not getting updated with the recent
changes.
Once, this error occurs lucene is not getting modified/updated even if I
add
a new 10KB file nor delete any file.

Here, is the stack trace

=3D=3D=3D

2007-04-24 13:16:47,454 INFO [docman.index.Index] Adding 20 to physical
index

2007-04-24 13:16:47,454 INFO [docman.index.Index] Index::addToIndex()
took
27207 msec.

2007-04-24 13:16:47,454 INFO [docman.index.Index] going to close index
writer

2007-04-24 13:17:00,945 INFO [STDOUT] Exception in thread "Thread-12"

2007-04-24 13:17:00,945 INFO [STDOUT] java.lang.OutOfMemoryError: Java
heap
space

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.store.IndexInput.readString(IndexInput.java:91)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:130)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:284)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:186
)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:88)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:709)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:65
6)

2007-04-24 13:17:00,945 INFO [STDOUT] at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:402)

2007-04-24 13:17:00,945 INFO [STDOUT] at docman.index.Index.closeIndex(
Index.java:594)

2007-04-24 13:17:00,946 INFO [STDOUT] at docman.index.Index.addToIndex(
Index.java:401)

2007-04-24 13:17:00,946 INFO [STDOUT] at
docman.index.Index.index(Index.java:437)


2007-04-24 13:17:00,946 INFO [STDOUT] at
docman.index.FastIndex$IndexWorker.run(FastIndex.java:174)

=3D=3D=3D



user@sx86qa3:/u/user/test/application> ls -al index

total 450208

drwxrwsr-x 2 user group 4096 Apr 24 15:40 .

drwxrwsrwx 10 user group 4096 Apr 23 18:36 ..

-rw-rw-r-- 1 user group 80289688 Apr 23 18:45 _j.cfs

-rw-rw-r-- 1 user group 114021843 Apr 23 19:34 _x.cfs

-rw-rw-r-- 1 user group 35937776 Apr 24 15:40 _z.fdt

-rw-rw-r-- 1 user group 16 Apr 24 15:40 _z.fdx

-rw-rw-r-- 1 user group 503 Apr 24 15:40 _z.fnm

-rw-rw-r-- 1 user group 4 Apr 23 19:34 deletable

-rw-rw-r-- 1 user group 34 Apr 23 19:34 segments

user@sx86qa3:/u/user/test/application

There are about 30 files in the application of which 6-7 are of 50 MB,
and
the remaining are hardly a few KB.

Is the OutFMemory error corrupting the index ? Why is it that the index
is
not responsive to delete operation after the error ?

I waited for 10mins for the lock file to get removed on its own, then
tried
deleting/adding new 10KB files (after memory usage came back within java
max
heap size), still the index is not responsive.

Please let me know the cause and the solution to the problem.



Divya.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 15:05:00 2007
Return-Path: <java-user-return-27739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75369 invoked from network); 24 Apr 2007 15:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 15:04:59 -0000
Received: (qmail 56237 invoked by uid 500); 24 Apr 2007 15:04:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56194 invoked by uid 500); 24 Apr 2007 15:04:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56183 invoked by uid 99); 24 Apr 2007 15:04:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 08:04:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 08:04:50 -0700
Received: from mailhyd1.hyd.deshaw.com (mailhyd1-hba1.hyd.deshaw.com [149.77.160.72])
 by master.hyd.deshaw.com (8.13.7/8.13.7/2.0.kim.desco.357) with ESMTP id l3OF4OuA023700
 for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 20:34:26 +0530 (IST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Copy index while updating the index
Date: Tue, 24 Apr 2007 20:34:23 +0530
Message-ID: <A1C9CFAF5B94574892B0B5AD7874E8BE010E4A54@mailhyd1.hyd.deshaw.com>
In-Reply-To: <335064.23080.qm@web50311.mail.re2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Copy index while updating the index
Thread-Index: Acd7jgBC1MuyIY5jSIKQuhbCz/RTwgK8cwlg
References: <335064.23080.qm@web50311.mail.re2.yahoo.com>
From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

 Would this be costlier than a fssync (filesystem) of the index folder
from the primary site to the backup site. How is it different from a
normal file sync operation). Would there be any data consistency issues
?

One option, is to incrementally reindex the files on primary site to
replicate the index of the primary site to the back up site. But, other
than this, does Lucene 2.0 provide any facility of replicating  master
index on a backup site ?

please let me know.

Divya.

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Tuesday, April 10, 2007 10:03 PM
To: java-user@lucene.apache.org
Subject: Re: Copy index while updating the index

Here is one way to do it:
You can read/open an index at any point, even when it's being modified.
You can then open a new FSDirectory pointing to a new directory and add
your original FSDirectory to that new FSDirectory.  That will copy the
index.  Of course, any new documents you add to the original index after
you've opened it will not be copied.  The same goes for any documents
that were still buffered in memory when you opened the index, and were
not yet flushed to disk.

See also:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html

Otis



----- Original Message ----
From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
To: java-user@lucene.apache.org
Sent: Tuesday, April 10, 2007 12:06:12 PM
Subject: Copy index while updating the index

Hello,

I have a scenario, where we need to set up our application, that uses
Lucene (and has on-demand indexing of documents) in Disaster-recovery
site.

The simple files/attachments used by our application can be simply
copied to the DR site just by syncing (manual copying).

Yes, we can also copy the index directory, but problem arises when we
have copy the index directory, while the index directory is being
updated, that means the Index is open.

Wont this corrupt the index directory.

Does Lucene 2.0 have support for copying opened index directory, without
corrupting it.

Please do let me know.


Thanks,
Divya.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 15:54:22 2007
Return-Path: <java-user-return-27740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 559 invoked from network); 24 Apr 2007 15:54:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 15:54:20 -0000
Received: (qmail 68600 invoked by uid 500); 24 Apr 2007 15:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68568 invoked by uid 500); 24 Apr 2007 15:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68557 invoked by uid 99); 24 Apr 2007 15:54:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 08:54:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MANY_EXCLAMATIONS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.22] (HELO web50007.mail.re2.yahoo.com) (206.190.38.22)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Apr 2007 08:54:12 -0700
Received: (qmail 15800 invoked by uid 60001); 24 Apr 2007 15:53:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=IsFceoDRPfDwQh8sjvQNPlZqi90eoFgqd0C0IOyDR4LdL2+tKN9gb4oWzhDi3kdJLKIX9Dc9U+8LM1Zuzi2FnvFVxyd6RqVgpkiSXBzZzO56MATHBLP4cZmW2BKdo86WosI16Ic9/lWQwwQLvtCj2dn03WeCXGgyQzFSbdnIo5A=;
X-YMail-OSG: iBDisi0VM1khIta.zU6m0x0ezUjAeNcXPt4sVcyo
Received: from [71.202.137.198] by web50007.mail.re2.yahoo.com via HTTP; Tue, 24 Apr 2007 08:53:50 PDT
Date: Tue, 24 Apr 2007 08:53:50 -0700 (PDT)
From: Chris Lu <chrislusf@yahoo.com>
Subject: re: DBSight Turns Free! Instant Lucene Search on Database!
To: java-user@lucene.apache.org, saurabh@danicorp.com
In-Reply-To: <c14319314eed4422bea8466dbcdffa7b@maila25.webcontrolcenter.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <50640.15549.qm@web50007.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Saurabh,

It's just one query and returns both hits and
categorized counts.

Chris

--- Saurabh Dani <saurabh@danicorp.com> wrote:

> Hi Chris,
> 
> How are you showing the hit counts in "Narrow By
> Year" options on the left? Is this one query for
> each year or a signle query returns both the top 30
> results and hit counts for every category?
> 
> Thanks
> Saurabh
> 
> ----------------------------------------
> 
> s.lu@gmail.com>
> Sent: Tuesday, April 24, 2007 2:23 AM
> To: "java-user@lucene.apache.org"
> <java-user@lucene.apache.org>
> Subject: DBSight Turns Free! Instant Lucene Search
> on Database! 
> 
> For those who may be interested,
> 
> DBSight 1.4.0 now has unlimited index size with Free
> version!
> 
> Basically DBSight is more like SOLR + database
> adapter. You just point
> it with one or several SQLs to any database, and you
> can have Lucene
> search!
> 
> It has Incremental Indexing, Recreating Index,
> Synchronize index with
> deleted database records, in addition to facet
> search, multi-server
> mode clustering. All can be done just by mouse
> clicking instead of
> coding java.
> 
> Here is a video on how to create Lucene Database
> Search in 3 minutes:
>
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> 
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any
> Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> 


Chris Lu
-------------------------
Instant Full-Text Search on Any Database/Application
website: http://www.dbsight.net
demo: http://search.dbsight.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 17:14:21 2007
Return-Path: <java-user-return-27741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38683 invoked from network); 24 Apr 2007 17:14:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 17:14:20 -0000
Received: (qmail 1535 invoked by uid 500); 24 Apr 2007 17:14:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1503 invoked by uid 500); 24 Apr 2007 17:14:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1491 invoked by uid 99); 24 Apr 2007 17:14:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 10:14:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [208.68.64.62] (HELO mail.videobox.com) (208.68.64.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 10:14:11 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C78693.ED293044"
Subject: MultiSearcher w/per-index filtering
Date: Tue, 24 Apr 2007 10:14:36 -0700
Message-ID: <53C659F7A41E6642A2599C44C73F731198F954@EXCHANGE.metainterfacesllc.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiSearcher w/per-index filtering
Thread-Index: AceGlAjoVzEWHYB6SzKTEuVbAVrOzw==
From: "Peter Goldstein" <peter@metainterfaces.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C78693.ED293044
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

All,

=20

I'm looking to solve the following problem and I could use some help.
My preferred approach appears to be blocked by Java permissioning, and
I'm not sure if that's by design or by accident.

=20

I have a set of search fixed indices that get built on a 5 hour cycle -
these indices are not updated during their lifetime, so the document ids
are never updated.  I am adding "by date" filtering capability to the
document search.  The most common form of this date filtering will be
either 'in the last week' or 'in the last month', both of which should
restrict to a constant set of documents over the lifetime of the
indices.  Because of performance concerns I'd like to compute this
result once for each index and cache it, using a CachingWrapperFilter.
However it must be possible to run queries over multiple indices and
combine the results, for which we're currently using MultiSearcher.

=20

The MultiSearcher class doesn't have any kind of interface that allows
one to specify multiple filters, each assigned per-index.  No other
obvious solution presented itself, so I figured I'd take the
MultiSearcher implementation and modify it to support this
functionality.  However I soon discovered that it was accessing classes
and constructors (HitQueue, the TopDocs constructor) that have package
permissions.  So I couldn't just cut and paste the code into a class in
another package.

=20

Was there any architectural reason that these classes and constructor
were assigned package permissions?  If not, would it be possible for me
to get these changed to public in the next release?  I'm happy to run a
modified Lucene package with updated permissions here for a short time,
but I'd like to make sure that it's a temporary situation.

=20

And on a more global note, does this approach sound reasonable?  Is
there an easier way to accomplish what I'm trying to do?

=20

Any help would be appreciated.  Thanks much.

=20

--Peter

=20


------_=_NextPart_001_01C78693.ED293044--

From java-user-return-27742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 19:32:45 2007
Return-Path: <java-user-return-27742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84442 invoked from network); 24 Apr 2007 19:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 19:32:44 -0000
Received: (qmail 90161 invoked by uid 500); 24 Apr 2007 19:32:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90065 invoked by uid 500); 24 Apr 2007 19:32:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 49304 invoked by uid 99); 24 Apr 2007 19:13:13 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ahg@servidor.unam.mx designates 132.248.10.1 as permitted sender)
Subject: Straigtforward stemming example? Dictionary needed?
From: ahg <ahg@servidor.unam.mx>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Tue, 24 Apr 2007 14:18:22 -0500
Message-Id: <1177442302.4582.51.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, all,

I'm looking for a simple, straightforward example of how to use the
Snowball stemmer to make Lucene search results return all variants of
the terms searched for.

For example, if I search for "eat", I'd like Lucene to find "eating",
"eaten", "ate", etc.

In particular, I'm not clear on whether everything required to do this
is the contrib/snowball/ directory, or do I have to find an external
dictionary somewhere?

In summary: I just need a quick explanation as to what resources I need
and how to put them together.

(By the way, I'm actually looking to do this with Spanish rather than
English, but examples for any language would be great.)

Many thanks in advance,
Andrew Green


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 19:40:10 2007
Return-Path: <java-user-return-27743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87460 invoked from network); 24 Apr 2007 19:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 19:40:09 -0000
Received: (qmail 11194 invoked by uid 500); 24 Apr 2007 19:40:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11142 invoked by uid 500); 24 Apr 2007 19:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11130 invoked by uid 99); 24 Apr 2007 19:40:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 12:40:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,MANY_EXCLAMATIONS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 12:40:00 -0700
Received: by wx-out-0506.google.com with SMTP id i29so2471783wxd
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 12:39:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Hp9lebNs7wXwGAcbdtAU4StuY9B9Z9BL0lFvo46YtDWkeVOpdFFOmCESypLXd+ElsGP8LjYE1XDWS4OFDybu9Ur/2TdLVk8RbByNMkQo4r4KTq57kZZZY+09NRw2jsAuV6cQrzYgnp+7rhikL5ZetRBWUQQ4Qr+KFTrp8+VCAV4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ibP5qzP4NPmmx1aUr3iWbhkvIhKyiwnYbb9FxRhV96U5/IyQldHqTMN89HGNSwQyJy9Gy/hQuTi50UACLtRIccwU2xhnc9w/8nTnKN5WoARNjc7c7NZJd3yNuFB/aZZFxIaa5Ro7yuUIp4f08M+r4PyYqJTolHdgruqCzY3pNH0=
Received: by 10.70.123.14 with SMTP id v14mr3475845wxc.1177443577690;
        Tue, 24 Apr 2007 12:39:37 -0700 (PDT)
Received: by 10.70.76.12 with HTTP; Tue, 24 Apr 2007 12:39:37 -0700 (PDT)
Message-ID: <bddd3c950704241239q647d09dcqeb837844659b8350@mail.gmail.com>
Date: Tue, 24 Apr 2007 23:09:37 +0330
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DBSight Turns Free! Instant Lucene Search on Database!
In-Reply-To: <50640.15549.qm@web50007.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74557_10982668.1177443577627"
References: <c14319314eed4422bea8466dbcdffa7b@maila25.webcontrolcenter.com>
	 <50640.15549.qm@web50007.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74557_10982668.1177443577627
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Chris,

Can you explain how? I know the source is available but perhaps a short
summary would be very useful for the list readers.

--jaf

On 4/24/07, Chris Lu <chrislusf@yahoo.com> wrote:
>
> Hi, Saurabh,
>
> It's just one query and returns both hits and
> categorized counts.
>
> Chris
>
> --- Saurabh Dani <saurabh@danicorp.com> wrote:
>
> > Hi Chris,
> >
> > How are you showing the hit counts in "Narrow By
> > Year" options on the left? Is this one query for
> > each year or a signle query returns both the top 30
> > results and hit counts for every category?
> >
> > Thanks
> > Saurabh
> >
> > ----------------------------------------
> >
> > s.lu@gmail.com>
> > Sent: Tuesday, April 24, 2007 2:23 AM
> > To: "java-user@lucene.apache.org"
> > <java-user@lucene.apache.org>
> > Subject: DBSight Turns Free! Instant Lucene Search
> > on Database!
> >
> > For those who may be interested,
> >
> > DBSight 1.4.0 now has unlimited index size with Free
> > version!
> >
> > Basically DBSight is more like SOLR + database
> > adapter. You just point
> > it with one or several SQLs to any database, and you
> > can have Lucene
> > search!
> >
> > It has Incremental Indexing, Recreating Index,
> > Synchronize index with
> > deleted database records, in addition to facet
> > search, multi-server
> > mode clustering. All can be done just by mouse
> > clicking instead of
> > coding java.
> >
> > Here is a video on how to create Lucene Database
> > Search in 3 minutes:
> >
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any
> > Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
> >
>
>
> Chris Lu
> -------------------------
> Instant Full-Text Search on Any Database/Application
> website: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_74557_10982668.1177443577627--

From java-user-return-27744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 20:02:50 2007
Return-Path: <java-user-return-27744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95212 invoked from network); 24 Apr 2007 20:02:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 20:02:48 -0000
Received: (qmail 70350 invoked by uid 500); 24 Apr 2007 20:02:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70319 invoked by uid 500); 24 Apr 2007 20:02:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70308 invoked by uid 99); 24 Apr 2007 20:02:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 13:02:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 13:02:39 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3OK2HL7112234
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 20:02:17 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3OK2H693166290
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 22:02:17 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3OK2Hi4028485
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 22:02:17 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3OK2H7p028482
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 22:02:17 +0200
In-Reply-To: <1177442302.4582.51.camel@localhost>
Subject: Re: Straigtforward stemming example? Dictionary needed?
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFA2221027.112BD5AC-ON882572C7.006D006C-882572C7.006DDC12@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 24 Apr 2007 12:59:57 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 24/04/2007 23:02:16
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Andrew,

ahg <ahg@servidor.unam.mx> wrote on 24/04/2007 12:18:22:

> Hi, all,
>
> I'm looking for a simple, straightforward example of how to use the
> Snowball stemmer to make Lucene search results return all variants of
> the terms searched for.
>
> For example, if I search for "eat", I'd like Lucene to find "eating",
> "eaten", "ate", etc.
>

Take a look at the snowball test:
  org.apache.lucene.analysis.snowball.TestSnowball
(under src/test) - it does something very similar.

> In particular, I'm not clear on whether everything required to do this
> is the contrib/snowball/ directory, or do I have to find an external
> dictionary somewhere?

No, snowball stemmers are algorithmic/rule based, no dictionaries.

>
> In summary: I just need a quick explanation as to what resources I need
> and how to put them together.
>
> (By the way, I'm actually looking to do this with Spanish rather than
> English, but examples for any language would be great.)
>
> Many thanks in advance,
> Andrew Green


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 20:20:04 2007
Return-Path: <java-user-return-27745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1650 invoked from network); 24 Apr 2007 20:20:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 20:20:03 -0000
Received: (qmail 9677 invoked by uid 500); 24 Apr 2007 20:20:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9429 invoked by uid 500); 24 Apr 2007 20:20:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9418 invoked by uid 99); 24 Apr 2007 20:20:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 13:20:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MANY_EXCLAMATIONS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.25] (HELO web50010.mail.re2.yahoo.com) (206.190.38.25)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Apr 2007 13:19:56 -0700
Received: (qmail 87459 invoked by uid 60001); 24 Apr 2007 20:19:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=sGGxr1Tt1G3yYxgjuNK6N+URLR+T5hu2nxDzVBWRLa5bWfTdF4hI8WH1t5o/3pCoJ/HY2L2yZz63QEk5FjH+yB3jhoVkIaBQHzKRcDHYWI9EmkI7clzG+NYlHn77OzkH0Bhmhrh0n6C8kI96oWQ6ZCdt1Cqoq7PGQng5r1qGt6Y=;
X-YMail-OSG: 4n0.qQUVM1lg_AvrZEFCY5X9zPO2EFvZvpch.JPYunjRuEXieHgl7COJNn9aZYdH6w--
Received: from [209.237.61.131] by web50010.mail.re2.yahoo.com via HTTP; Tue, 24 Apr 2007 13:19:34 PDT
Date: Tue, 24 Apr 2007 13:19:34 -0700 (PDT)
From: Chris Lu <chrislusf@yahoo.com>
Subject: Re: DBSight Turns Free! Instant Lucene Search on Database!
To: java-user@lucene.apache.org
In-Reply-To: <bddd3c950704241239q647d09dcqeb837844659b8350@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <118041.87453.qm@web50010.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, jaf,

This is not new and I learned it from Doug. 

Basically you maintain a mapping of "document id" to
values, and collect all the values for each hit in hit
collector.

Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any
Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

--- jafarim <jafarim@gmail.com> wrote:

> Hi Chris,
> 
> Can you explain how? I know the source is available
> but perhaps a short
> summary would be very useful for the list readers.
> 
> --jaf
> 
> On 4/24/07, Chris Lu <chrislusf@yahoo.com> wrote:
> >
> > Hi, Saurabh,
> >
> > It's just one query and returns both hits and
> > categorized counts.
> >
> > Chris
> >
> > --- Saurabh Dani <saurabh@danicorp.com> wrote:
> >
> > > Hi Chris,
> > >
> > > How are you showing the hit counts in "Narrow By
> > > Year" options on the left? Is this one query for
> > > each year or a signle query returns both the top
> 30
> > > results and hit counts for every category?
> > >
> > > Thanks
> > > Saurabh
> > >
> > > ----------------------------------------
> > >
> > > s.lu@gmail.com>
> > > Sent: Tuesday, April 24, 2007 2:23 AM
> > > To: "java-user@lucene.apache.org"
> > > <java-user@lucene.apache.org>
> > > Subject: DBSight Turns Free! Instant Lucene
> Search
> > > on Database!
> > >
> > > For those who may be interested,
> > >
> > > DBSight 1.4.0 now has unlimited index size with
> Free
> > > version!
> > >
> > > Basically DBSight is more like SOLR + database
> > > adapter. You just point
> > > it with one or several SQLs to any database, and
> you
> > > can have Lucene
> > > search!
> > >
> > > It has Incremental Indexing, Recreating Index,
> > > Synchronize index with
> > > deleted database records, in addition to facet
> > > search, multi-server
> > > mode clustering. All can be done just by mouse
> > > clicking instead of
> > > coding java.
> > >
> > > Here is a video on how to create Lucene Database
> > > Search in 3 minutes:
> > >
> >
> >
>
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > >
> > > --
> > > Chris Lu
> > > -------------------------
> > > Instant Scalable Full-Text Search On Any
> > > Database/Application
> > > site: http://www.dbsight.net
> > > demo: http://search.dbsight.com
> > >
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> >
> > Chris Lu
> > -------------------------
> > Instant Full-Text Search on Any
> Database/Application
> > website: http://www.dbsight.net
> > demo: http://search.dbsight.com
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> 


Chris Lu
-------------------------
Instant Full-Text Search on Any Database/Application
website: http://www.dbsight.net
demo: http://search.dbsight.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 20:30:19 2007
Return-Path: <java-user-return-27746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4772 invoked from network); 24 Apr 2007 20:30:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 20:30:18 -0000
Received: (qmail 42021 invoked by uid 500); 24 Apr 2007 20:30:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41986 invoked by uid 500); 24 Apr 2007 20:30:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41939 invoked by uid 99); 24 Apr 2007 20:30:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 13:30:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 13:30:04 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3OKTg95238700
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 20:29:42 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3OKTgws4124728
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 22:29:42 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3OKTg5H009074
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 22:29:42 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3OKTgqg009070
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 22:29:42 +0200
In-Reply-To: <ced20d060704240319t2a5e545ai2591b72f2dfdd112@mail.gmail.com>
Subject: Re: Clustering in MultiSearcher Searchables
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFE00A4014.7E21B6C5-ON882572C7.006FD411-882572C7.00708F75@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 24 Apr 2007 13:29:27 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 24/04/2007 23:29:41
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sawan,

If I understand the question correctly, you use MultiSearcher over three
searchers s[0], s[1], s[2], get some 3000 search results, and for result x
(0<=x<3000) need to know if it came from s[0], s[1], or s[2].   If so, take
a look at that MultiSearcher.subSearcher(int n) (n would be the docid of
result x).

Hope this helps,
Doron

"Sawan Sharma" <sawan.k.sharma@gmail.com> wrote on 24/04/2007 03:19:47:

> Hi all,
>
> I am using MultiSearcher to search more then one Index folders. I have
one
> Index searcher array which contains 3 Index searchers...
> 01. C:\IndexFolder1
> 02. C:\IndexFolder2
> 03. C:\IndexFolder3
>
> When I searched in 3 index folders using a MultiSearcher then I got 3000
> hits.
>
> 1 to 1000 from C:\IndexFolder1
> 1001 to 2000 from C:\IndexFolder2
> 2001 to 3000 from C:\IndexFolder3
>
> Now I want to know that which data searched in
> C:\IndexFolder1,C:\IndexFolder2 or C:\IndexFolder3.
>
> Or I want to cluster my data according to 3 Index folders.
>
> I want following...
>
> Doc1------|
> Doc2------|
> Doc3------|-------------C:\IndexFolder1
> .               |
> DocN------|
>
> Doc1------|
> Doc2------|
> Doc3------|-------------C:\IndexFolder2
> .               |
> DocN------|
>
> Doc1------|
> Doc2------|
> Doc3------|-------------C:\IndexFolder3
> .               |
> DocN------|
>
> Thanks & Regards
>
> Sawan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 20:51:47 2007
Return-Path: <java-user-return-27747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14993 invoked from network); 24 Apr 2007 20:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 20:51:46 -0000
Received: (qmail 74860 invoked by uid 500); 24 Apr 2007 20:51:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74829 invoked by uid 500); 24 Apr 2007 20:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74818 invoked by uid 99); 24 Apr 2007 20:51:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 13:51:45 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 13:51:37 -0700
Received: from localhost ([127.0.0.1] helo=data.propylon.com)
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1HgRwn-0006AE-5D
	for java-user@lucene.apache.org; Tue, 24 Apr 2007 21:49:13 +0100
Received: from 213.94.211.166
        (SquirrelMail authenticated user damien.mccarthy)
        by data.propylon.com with HTTP;
        Tue, 24 Apr 2007 21:49:13 +0100 (IST)
Message-ID: <64303.213.94.211.166.1177447753.squirrel@data.propylon.com>
In-Reply-To: 
     <OFA2221027.112BD5AC-ON882572C7.006D006C-882572C7.006DDC12@il.ibm.com>
References: <1177442302.4582.51.camel@localhost>
    <OFA2221027.112BD5AC-ON882572C7.006D006C-882572C7.006DDC12@il.ibm.com>
Date: Tue, 24 Apr 2007 21:49:13 +0100 (IST)
Subject: Re: Straigtforward stemming example? Dictionary needed?
From: damien.mccarthy@propylon.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-SA-Exim-Connect-IP: 127.0.0.1
X-SA-Exim-Mail-From: damien.mccarthy@propylon.com
X-SA-Exim-Scanned: No (on mercury.propylon.com); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Andrew,

The example you provide can only partially be performed using a rule based
stemmer, such as those uesd by Snowball. Most stemmers are capable of
stemming eating, eats, and eaten to eat. However they will not stem ate to
eat.

While in theory you could consturuct some form of dictionary to help with
these verbal irregularities, it would be an very complex task.

Damien.



> Hi Andrew,
>
> ahg <ahg@servidor.unam.mx> wrote on 24/04/2007 12:18:22:
>
>> Hi, all,
>>
>> I'm looking for a simple, straightforward example of how to use the
>> Snowball stemmer to make Lucene search results return all variants of
>> the terms searched for.
>>
>> For example, if I search for "eat", I'd like Lucene to find "eating",
>> "eaten", "ate", etc.
>>
>
> Take a look at the snowball test:
>   org.apache.lucene.analysis.snowball.TestSnowball
> (under src/test) - it does something very similar.
>
>> In particular, I'm not clear on whether everything required to do this
>> is the contrib/snowball/ directory, or do I have to find an external
>> dictionary somewhere?
>
> No, snowball stemmers are algorithmic/rule based, no dictionaries.
>
>>
>> In summary: I just need a quick explanation as to what resources I need
>> and how to put them together.
>>
>> (By the way, I'm actually looking to do this with Spanish rather than
>> English, but examples for any language would be great.)
>>
>> Many thanks in advance,
>> Andrew Green
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 21:18:43 2007
Return-Path: <java-user-return-27748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26290 invoked from network); 24 Apr 2007 21:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 21:18:42 -0000
Received: (qmail 22594 invoked by uid 500); 24 Apr 2007 21:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22562 invoked by uid 500); 24 Apr 2007 21:18:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22533 invoked by uid 99); 24 Apr 2007 21:18:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 14:18:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.206.234] (HELO smtp101.plus.mail.mud.yahoo.com) (68.142.206.234)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Apr 2007 14:18:31 -0700
Received: (qmail 22372 invoked from network); 24 Apr 2007 21:18:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.mx;
  h=Received:X-YMail-OSG:Subject:From:To:In-Reply-To:References:Content-Type:Date:Message-Id:Mime-Version:X-Mailer:Content-Transfer-Encoding;
  b=G7AmE+rqX1elJTKja+m7ypryL5HpYeAipsaaIOp8xT7fUdXEp9v83PC/BkdXKtUMW3L02G6AAHCr0ftMLBFyF+weEZUC6HN8bS/TBu9UWcWEOPJZj5j1xvKb2hAp7Hjlp4LvPPxAwbr9L7dvpwUT9tIn9ZgZztaaYJcvcM/5jDM=  ;
Received: from unknown (HELO toshiba-debian.local) (ndrw_grn@200.67.231.185 with plain)
  by smtp101.plus.mail.mud.yahoo.com with SMTP; 24 Apr 2007 21:18:10 -0000
X-YMail-OSG: ULqlzZYVM1mDzEbSb9fiDFRaIwGdg0yo0VR2hfSzyRsa1arXwG_mAHPZksOaNVt7L563tzYXoQ--
Subject: Re: Straigtforward stemming example? Dictionary needed?
From: Andrew Green <ndrw_grn@yahoo.com.mx>
To: java-user@lucene.apache.org
In-Reply-To: <64303.213.94.211.166.1177447753.squirrel@data.propylon.com>
References: <1177442302.4582.51.camel@localhost>
	 <OFA2221027.112BD5AC-ON882572C7.006D006C-882572C7.006DDC12@il.ibm.com>
	 <64303.213.94.211.166.1177447753.squirrel@data.propylon.com>
Content-Type: text/plain; charset=ISO-8859-1
Date: Tue, 24 Apr 2007 16:23:47 -0500
Message-Id: <1177449827.4582.59.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

El mar, 24-04-2007 a las 21:49 +0100, damien.mccarthy@propylon.com
escribi:
>>
> >> For example, if I search for "eat", I'd like Lucene to find "eating",
> >> "eaten", "ate", etc.
>
> Hi Andrew,
> 
> The example you provide can only partially be performed using a rule based
> stemmer, such as those uesd by Snowball. Most stemmers are capable of
> stemming eating, eats, and eaten to eat. However they will not stem ate to
> eat.
> 
> While in theory you could consturuct some form of dictionary to help with
> these verbal irregularities, it would be an very complex task.
> 

OK... Hmmm. So then I should assume that, for more complete stemming,
there are no ready-made, easy-to-use dictionaries available under free
licenses? I guess I assumed that there would be, given the prevalence of
free software spelling checkers. Can't the data used by MySpell or the
likes be adapted? Or is it a very different sort of dictionary that
would be needed?

Thanks,
Andrew


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 22:19:50 2007
Return-Path: <java-user-return-27749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50011 invoked from network); 24 Apr 2007 22:19:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 22:19:49 -0000
Received: (qmail 9679 invoked by uid 500); 24 Apr 2007 22:19:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9653 invoked by uid 500); 24 Apr 2007 22:19:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9642 invoked by uid 99); 24 Apr 2007 22:19:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 15:19:49 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 15:19:42 -0700
Received: from localhost ([127.0.0.1] helo=data.propylon.com)
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1HgTK1-00080a-On
	for java-user@lucene.apache.org; Tue, 24 Apr 2007 23:17:17 +0100
Received: from 213.94.211.166
        (SquirrelMail authenticated user damien.mccarthy)
        by data.propylon.com with HTTP;
        Tue, 24 Apr 2007 23:17:17 +0100 (IST)
Message-ID: <65406.213.94.211.166.1177453037.squirrel@data.propylon.com>
In-Reply-To: <1177449827.4582.59.camel@localhost>
References: <1177442302.4582.51.camel@localhost> 
    <OFA2221027.112BD5AC-ON882572C7.006D006C-882572C7.006DDC12@il.ibm.com> 
    <64303.213.94.211.166.1177447753.squirrel@data.propylon.com>
    <1177449827.4582.59.camel@localhost>
Date: Tue, 24 Apr 2007 23:17:17 +0100 (IST)
Subject: Re: Straigtforward stemming example? Dictionary needed?
From: damien.mccarthy@propylon.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-SA-Exim-Connect-IP: 127.0.0.1
X-SA-Exim-Mail-From: damien.mccarthy@propylon.com
X-SA-Exim-Scanned: No (on mercury.propylon.com); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org

I guess there are a few points

- it is impossible to stem with total accuracy using rules alone

- combining a rule based stemmer with a dictionary could also be error
prone. Unrelated words can have the same stem - consider the past tense of
see and the stem of sawing ( cutting wood )

- Stemming would be even more error prone in Spanish - inflexion in
Spanish causes changes to the root more often than in English.

Martin Porter goes into a little more detail here :

http://snowball.tartarus.org/texts/introduction.html

Hope this Helps,

Damien

> El mar, 24-04-2007 a las 21:49 +0100, damien.mccarthy@propylon.com
> escribi:
>>>
>> >> For example, if I search for "eat", I'd like Lucene to find "eating",
>> >> "eaten", "ate", etc.
>>
>> Hi Andrew,
>>
>> The example you provide can only partially be performed using a rule
>> based
>> stemmer, such as those uesd by Snowball. Most stemmers are capable of
>> stemming eating, eats, and eaten to eat. However they will not stem ate
>> to
>> eat.
>>
>> While in theory you could consturuct some form of dictionary to help
>> with
>> these verbal irregularities, it would be an very complex task.
>>
>
> OK... Hmmm. So then I should assume that, for more complete stemming,
> there are no ready-made, easy-to-use dictionaries available under free
> licenses? I guess I assumed that there would be, given the prevalence of
> free software spelling checkers. Can't the data used by MySpell or the
> likes be adapted? Or is it a very different sort of dictionary that
> would be needed?
>
> Thanks,
> Andrew
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 22:42:53 2007
Return-Path: <java-user-return-27750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56488 invoked from network); 24 Apr 2007 22:42:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 22:42:51 -0000
Received: (qmail 38605 invoked by uid 500); 24 Apr 2007 22:42:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38564 invoked by uid 500); 24 Apr 2007 22:42:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38549 invoked by uid 99); 24 Apr 2007 22:42:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 15:42:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.156 as permitted sender)
Received: from [195.212.29.156] (HELO mtagate7.de.ibm.com) (195.212.29.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 15:42:43 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate7.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3OMgMso094164
	for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 22:42:22 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3OMgLZH3539038
	for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 00:42:22 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3OMgLRZ028504
	for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 00:42:21 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3OMgLq1028501
	for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 00:42:21 +0200
In-Reply-To: <53C659F7A41E6642A2599C44C73F731198F954@EXCHANGE.metainterfacesllc.local>
Subject: Re: MultiSearcher w/per-index filtering
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF9B485978.8DF96629-ON882572C7.007ABE4D-882572C7.007C71FB@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 24 Apr 2007 15:39:16 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 25/04/2007 01:42:21
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Peter,

I think this is already taken care of by CachingWrapperFilter - because its
caching is (like filtering) by IndexReader, and search by a multiSearcher
eventually attempts to filter against each underlying reader, and those
"sub-" filters are being cached.

So it seems to me that if you just create a cachingWrapperFilter around
your (I assume) RangeFilter, the caching for the underlying searchers would
happen "by itself" - as long as the searchers are reused.

Did you actually try that and it didn't work?

Regards,
Doron


"Peter Goldstein" <peter@metainterfaces.com> wrote on 24/04/2007 10:14:36:

> All,
>
>
>
> I'm looking to solve the following problem and I could use some help.
> My preferred approach appears to be blocked by Java permissioning, and
> I'm not sure if that's by design or by accident.
>
>
>
> I have a set of search fixed indices that get built on a 5 hour cycle -
> these indices are not updated during their lifetime, so the document ids
> are never updated.  I am adding "by date" filtering capability to the
> document search.  The most common form of this date filtering will be
> either 'in the last week' or 'in the last month', both of which should
> restrict to a constant set of documents over the lifetime of the
> indices.  Because of performance concerns I'd like to compute this
> result once for each index and cache it, using a CachingWrapperFilter.
> However it must be possible to run queries over multiple indices and
> combine the results, for which we're currently using MultiSearcher.
>
>
>
> The MultiSearcher class doesn't have any kind of interface that allows
> one to specify multiple filters, each assigned per-index.  No other
> obvious solution presented itself, so I figured I'd take the
> MultiSearcher implementation and modify it to support this
> functionality.  However I soon discovered that it was accessing classes
> and constructors (HitQueue, the TopDocs constructor) that have package
> permissions.  So I couldn't just cut and paste the code into a class in
> another package.
>
>
>
> Was there any architectural reason that these classes and constructor
> were assigned package permissions?  If not, would it be possible for me
> to get these changed to public in the next release?  I'm happy to run a
> modified Lucene package with updated permissions here for a short time,
> but I'd like to make sure that it's a temporary situation.
>
>
>
> And on a more global note, does this approach sound reasonable?  Is
> there an easier way to accomplish what I'm trying to do?
>
>
>
> Any help would be appreciated.  Thanks much.
>
>
>
> --Peter
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 24 23:00:18 2007
Return-Path: <java-user-return-27751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60777 invoked from network); 24 Apr 2007 23:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Apr 2007 23:00:16 -0000
Received: (qmail 61082 invoked by uid 500); 24 Apr 2007 23:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61048 invoked by uid 500); 24 Apr 2007 23:00:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61036 invoked by uid 99); 24 Apr 2007 23:00:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 16:00:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [208.68.64.62] (HELO mail.videobox.com) (208.68.64.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 16:00:07 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: MultiSearcher w/per-index filtering
Date: Tue, 24 Apr 2007 15:59:55 -0700
Message-ID: <53C659F7A41E6642A2599C44C73F731198F9E7@EXCHANGE.metainterfacesllc.local>
In-Reply-To: <OF9B485978.8DF96629-ON882572C7.007ABE4D-882572C7.007C71FB@il.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiSearcher w/per-index filtering
Thread-Index: AceGwey/fL6m/cG8T/23VPjVTrrE2gAAgLcg
References: <53C659F7A41E6642A2599C44C73F731198F954@EXCHANGE.metainterfacesllc.local> <OF9B485978.8DF96629-ON882572C7.007ABE4D-882572C7.007C71FB@il.ibm.com>
From: "Peter Goldstein" <peter@metainterfaces.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Doron,

Thanks for the help.  I think you're right.  I haven't yet tried this,
and I didn't notice that CachingWrapperFilter cached multiple BitSets by
IndexReader.  So this may be simpler than I thought.  I'll give it a
whirl and see what happens.

Regards,

Peter


-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Tuesday, April 24, 2007 3:39 PM
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher w/per-index filtering

Hi Peter,

I think this is already taken care of by CachingWrapperFilter - because
its
caching is (like filtering) by IndexReader, and search by a
multiSearcher
eventually attempts to filter against each underlying reader, and those
"sub-" filters are being cached.

So it seems to me that if you just create a cachingWrapperFilter around
your (I assume) RangeFilter, the caching for the underlying searchers
would
happen "by itself" - as long as the searchers are reused.

Did you actually try that and it didn't work?

Regards,
Doron


"Peter Goldstein" <peter@metainterfaces.com> wrote on 24/04/2007
10:14:36:

> All,
>
>
>
> I'm looking to solve the following problem and I could use some help.
> My preferred approach appears to be blocked by Java permissioning, and
> I'm not sure if that's by design or by accident.
>
>
>
> I have a set of search fixed indices that get built on a 5 hour cycle
-
> these indices are not updated during their lifetime, so the document
ids
> are never updated.  I am adding "by date" filtering capability to the
> document search.  The most common form of this date filtering will be
> either 'in the last week' or 'in the last month', both of which should
> restrict to a constant set of documents over the lifetime of the
> indices.  Because of performance concerns I'd like to compute this
> result once for each index and cache it, using a CachingWrapperFilter.
> However it must be possible to run queries over multiple indices and
> combine the results, for which we're currently using MultiSearcher.
>
>
>
> The MultiSearcher class doesn't have any kind of interface that allows
> one to specify multiple filters, each assigned per-index.  No other
> obvious solution presented itself, so I figured I'd take the
> MultiSearcher implementation and modify it to support this
> functionality.  However I soon discovered that it was accessing
classes
> and constructors (HitQueue, the TopDocs constructor) that have package
> permissions.  So I couldn't just cut and paste the code into a class
in
> another package.
>
>
>
> Was there any architectural reason that these classes and constructor
> were assigned package permissions?  If not, would it be possible for
me
> to get these changed to public in the next release?  I'm happy to run
a
> modified Lucene package with updated permissions here for a short
time,
> but I'd like to make sure that it's a temporary situation.
>
>
>
> And on a more global note, does this approach sound reasonable?  Is
> there an easier way to accomplish what I'm trying to do?
>
>
>
> Any help would be appreciated.  Thanks much.
>
>
>
> --Peter
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 00:49:19 2007
Return-Path: <java-user-return-27752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96789 invoked from network); 25 Apr 2007 00:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 00:49:18 -0000
Received: (qmail 4838 invoked by uid 500); 25 Apr 2007 00:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3825 invoked by uid 500); 25 Apr 2007 00:49:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3814 invoked by uid 99); 25 Apr 2007 00:49:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 17:49:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,MANY_EXCLAMATIONS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of liuping.james@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 17:49:07 -0700
Received: by wx-out-0506.google.com with SMTP id i29so46726wxd
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 17:48:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ian/tY+96NhAsSc/WQmoSLe/XoFpmwiV9dtjhUbJF/61DACQC7cW+MGAS7CJDnfYW/U/0mB5ZnZNqfP3SeRFf07vi4AncKvYGv1YD2N+ojCr7cm1AG8PzumZFCz/Ab7IDq3o6s+3nDijxt0PhlfLvI/+8Ptvg4wAGHfM18g7PAg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=prFRNDKog4kE0SOMDcxRcBDhWnukJpdperGeu4WtdUw08geyw/1G4gwIxFzxFh2wK5tW8i2YN9PVg0ZI41LUoTVuCl9lbQwCArhvk6yhTiWv0hbPhG/40F8Ia5TgFe7Hmx6ec5hsa3YptaTb7OnkWe+5azkx7qT8vZ2cg9K5MRw=
Received: by 10.70.111.2 with SMTP id j2mr119574wxc.1177462126174;
        Tue, 24 Apr 2007 17:48:46 -0700 (PDT)
Received: by 10.100.207.9 with HTTP; Tue, 24 Apr 2007 17:48:46 -0700 (PDT)
Message-ID: <5d5204510704241748g6b0a3cdbtfb1dae062dff8a5e@mail.gmail.com>
Date: Wed, 25 Apr 2007 08:48:46 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DBSight Turns Free! Instant Lucene Search on Database!
In-Reply-To: <6e3ae6310704240221n5e7aa66dv5e76c15f0b944a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46912_8567878.1177462126024"
References: <6e3ae6310704240221n5e7aa66dv5e76c15f0b944a9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46912_8567878.1177462126024
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Does it mean DBSight is Free?

2007/4/24, Chris Lu <chris.lu@gmail.com>:
>
> For those who may be interested,
>
> DBSight 1.4.0 now has unlimited index size with Free version!
>
> Basically DBSight is more like SOLR + database adapter. You just point
> it with one or several SQLs to any database, and you can have Lucene
> search!
>
> It has Incremental Indexing, Recreating Index, Synchronize index with
> deleted database records, in addition to facet search, multi-server
> mode clustering. All can be done just by mouse clicking instead of
> coding java.
>
> Here is a video on how to create Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
regards
jl

------=_Part_46912_8567878.1177462126024--

From java-user-return-27753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 01:01:38 2007
Return-Path: <java-user-return-27753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98786 invoked from network); 25 Apr 2007 01:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 01:01:37 -0000
Received: (qmail 13401 invoked by uid 500); 25 Apr 2007 01:01:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13364 invoked by uid 500); 25 Apr 2007 01:01:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13352 invoked by uid 99); 25 Apr 2007 01:01:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 18:01:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MANY_EXCLAMATIONS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 18:01:30 -0700
Received: by ug-out-1314.google.com with SMTP id k40so293092ugc
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 18:01:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TlSR0zqO0UU0cERSu7BwLTkytnc84BptED0VpvVkaODUtMBTSBJ9tRsYTJK0TbKGLIC96+1ygtdYBHkSKV1Ythmz2nlqdHwlIPFij6ruTPlf9vTZAjUQjCGxS8tj4Y70hJrA5LvyVXyB4axTAGk+k/wS2bFL/PqxyNj8HdZETK0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uszTtZDsn/28r+gikUeZcew1AYyWiNRNZywqPVB5B3hWUqBgIZ49hUU9hPBPUL92TY9Bl2gdMNLVTEGIdMSw+RwTfjWCblt1qHMeJXQE9wtCCM1LU77Fbr4GJcqN0GsPd8eLB5kO+Y7/I/I877t40HBtxWcAspAjEprIHxPxWO0=
Received: by 10.67.117.2 with SMTP id u2mr999031ugm.1177462868802;
        Tue, 24 Apr 2007 18:01:08 -0700 (PDT)
Received: by 10.66.246.19 with HTTP; Tue, 24 Apr 2007 18:01:08 -0700 (PDT)
Message-ID: <6e3ae6310704241801u1ca06132hd44deaac0bb5775d@mail.gmail.com>
Date: Tue, 24 Apr 2007 18:01:08 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DBSight Turns Free! Instant Lucene Search on Database!
In-Reply-To: <5d5204510704241748g6b0a3cdbtfb1dae062dff8a5e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6e3ae6310704240221n5e7aa66dv5e76c15f0b944a9@mail.gmail.com>
	 <5d5204510704241748g6b0a3cdbtfb1dae062dff8a5e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Just like your Winamp, Trillian, or other excellent software, its free
version can satisfy most of your needs, and advanced features, like
scripting, your boss need to pay for it.

DBSight is still improving itself. If we can get any support, like how
Doug is supported by Yahoo, we would be happy to make it open source.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 4/24/07, James liu <liuping.james@gmail.com> wrote:
> Does it mean DBSight is Free?
>
> 2007/4/24, Chris Lu <chris.lu@gmail.com>:
> >
> > For those who may be interested,
> >
> > DBSight 1.4.0 now has unlimited index size with Free version!
> >
> > Basically DBSight is more like SOLR + database adapter. You just point
> > it with one or several SQLs to any database, and you can have Lucene
> > search!
> >
> > It has Incremental Indexing, Recreating Index, Synchronize index with
> > deleted database records, in addition to facet search, multi-server
> > mode clustering. All can be done just by mouse clicking instead of
> > coding java.
> >
> > Here is a video on how to create Lucene Database Search in 3 minutes:
> >
> > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> regards
> jl
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 04:50:44 2007
Return-Path: <java-user-return-27754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71513 invoked from network); 25 Apr 2007 04:50:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 04:50:44 -0000
Received: (qmail 17194 invoked by uid 500); 25 Apr 2007 04:50:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16657 invoked by uid 500); 25 Apr 2007 04:50:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16644 invoked by uid 99); 25 Apr 2007 04:50:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 21:50:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sawan.k.sharma@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 21:50:34 -0700
Received: by nz-out-0506.google.com with SMTP id i1so122040nzh
        for <java-user@lucene.apache.org>; Tue, 24 Apr 2007 21:50:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gMWkMNj69N5Kuy4Fk9coVxNoHDHZHt/ZNBKWpxPdomiT78hphOpINM0NvsKItlGaTJYcJW/XVfQ/2Vtf8Ec851L/b9HXIY/GxPMnd6SAuxjNwe+ouZKdqcG5jM3kox0UnuFTCQoG2MaFOFGe73YSxRs4k7iX/AKBm5+MScQtlow=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eAFPxKL2aHsvkgJgzj9PVQAuQ+aEs3u+fIAwrEUUoaxTNC0zSCY50zV8aUOujBrWPwYRzDITBj2tla5crRHCJYnL6LQO8M8JeSixXuSLMdq/ZbZj/Bh1wIKjdnoF3lwhxQ8K+iatNBsJIL2SmGRp0SEmAteY80x9s2pE5n/+DdA=
Received: by 10.114.57.1 with SMTP id f1mr120859waa.1177476613276;
        Tue, 24 Apr 2007 21:50:13 -0700 (PDT)
Received: by 10.114.120.5 with HTTP; Tue, 24 Apr 2007 21:50:13 -0700 (PDT)
Message-ID: <ced20d060704242150n21cc9d01u6fadaf6cc411643c@mail.gmail.com>
Date: Wed, 25 Apr 2007 10:20:13 +0530
From: "Sawan Sharma" <sawan.k.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Clustering in MultiSearcher Searchables
In-Reply-To: <OFE00A4014.7E21B6C5-ON882572C7.006FD411-882572C7.00708F75@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29422_20726728.1177476613231"
References: <ced20d060704240319t2a5e545ai2591b72f2dfdd112@mail.gmail.com>
	 <OFE00A4014.7E21B6C5-ON882572C7.006FD411-882572C7.00708F75@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29422_20726728.1177476613231
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Doron,

Yes, we can do it using MultiSearcher.subSearcher(int n). But here we can
not get cluster for individual searcher. For this we have to apply a loop
from (i = 0 to 3000), which we do not want in our case.

We need to show number of hits from each searcher (Without using loop on
hits).

Suppose user makes a search for "X" and he get 200 hits from s[0], 150 hits
from s[1] and 300 hits from s[2]. Now we need to cluster/group the results
according to each searcher.

Hope I am able to explain my problem in deep.

Thanks & regards

Sawan

On 4/25/07, Doron Cohen <DORONC@il.ibm.com> wrote:
>
> Hi Sawan,
>
> If I understand the question correctly, you use MultiSearcher over three
> searchers s[0], s[1], s[2], get some 3000 search results, and for result x
> (0<=x<3000) need to know if it came from s[0], s[1], or s[2].   If so,
> take
> a look at that MultiSearcher.subSearcher(int n) (n would be the docid of
> result x).
>
> Hope this helps,
> Doron
>
> "Sawan Sharma" <sawan.k.sharma@gmail.com> wrote on 24/04/2007 03:19:47:
>
> > Hi all,
> >
> > I am using MultiSearcher to search more then one Index folders. I have
> one
> > Index searcher array which contains 3 Index searchers...
> > 01. C:\IndexFolder1
> > 02. C:\IndexFolder2
> > 03. C:\IndexFolder3
> >
> > When I searched in 3 index folders using a MultiSearcher then I got 3000
> > hits.
> >
> > 1 to 1000 from C:\IndexFolder1
> > 1001 to 2000 from C:\IndexFolder2
> > 2001 to 3000 from C:\IndexFolder3
> >
> > Now I want to know that which data searched in
> > C:\IndexFolder1,C:\IndexFolder2 or C:\IndexFolder3.
> >
> > Or I want to cluster my data according to 3 Index folders.
> >
> > I want following...
> >
> > Doc1------|
> > Doc2------|
> > Doc3------|-------------C:\IndexFolder1
> > .               |
> > DocN------|
> >
> > Doc1------|
> > Doc2------|
> > Doc3------|-------------C:\IndexFolder2
> > .               |
> > DocN------|
> >
> > Doc1------|
> > Doc2------|
> > Doc3------|-------------C:\IndexFolder3
> > .               |
> > DocN------|
> >
> > Thanks & Regards
> >
> > Sawan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_29422_20726728.1177476613231--

From java-user-return-27755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 05:08:11 2007
Return-Path: <java-user-return-27755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75492 invoked from network); 25 Apr 2007 05:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 05:08:10 -0000
Received: (qmail 40322 invoked by uid 500); 25 Apr 2007 05:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40126 invoked by uid 500); 25 Apr 2007 05:08:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40115 invoked by uid 99); 25 Apr 2007 05:08:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 22:08:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2007 22:08:02 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HgZjB-0005SS-Uo
	for java-user@lucene.apache.org; Tue, 24 Apr 2007 22:07:41 -0700
Message-ID: <10174407.post@talk.nabble.com>
Date: Tue, 24 Apr 2007 22:07:41 -0700 (PDT)
From: Andreas Guther <a.guther@guther.com>
To: java-user@lucene.apache.org
Subject: Index File System Limits
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: a.guther@guther.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am currently dealing with lucene indexes of the size of 8 GIG.  Searching
is fast but retrieving documents slow down the process of returning results
to the user.  Also the index is updated very frequently, about 3 times a
minute and more.  This leads to an index that grows very fast in number of
index files.  I have also multiple indexes Lucene has to search accross with
the Multiple Index Searcher.

I wonder what index size other people deal with and what kind of
recommendation one can give to deal with such a size.  

Should I try to avoid too many updates?

Also the optimizing process seems to take a long time (I have seen
optimization time up to two hours.

Thanks for any help and hints.

Andreas

-- 
View this message in context: http://www.nabble.com/Index-File-System-Limits-tf3643196.html#a10174407
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 07:14:43 2007
Return-Path: <java-user-return-27756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7730 invoked from network); 25 Apr 2007 07:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 07:14:42 -0000
Received: (qmail 95492 invoked by uid 500); 25 Apr 2007 07:14:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95462 invoked by uid 500); 25 Apr 2007 07:14:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95441 invoked by uid 99); 25 Apr 2007 07:14:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 00:14:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 00:14:33 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A31935B775; Wed, 25 Apr 2007 00:14:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9748E7F403
	for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 00:14:13 -0700 (PDT)
Date: Wed, 25 Apr 2007 00:14:13 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Clustering in MultiSearcher Searchables
In-Reply-To: <ced20d060704242150n21cc9d01u6fadaf6cc411643c@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0704250011140.16300@hal.rescomp.berkeley.edu>
References: <ced20d060704240319t2a5e545ai2591b72f2dfdd112@mail.gmail.com> 
 <OFE00A4014.7E21B6C5-ON882572C7.006FD411-882572C7.00708F75@il.ibm.com>
 <ced20d060704242150n21cc9d01u6fadaf6cc411643c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Suppose user makes a search for "X" and he get 200 hits from s[0], 150 hits
: from s[1] and 300 hits from s[2]. Now we need to cluster/group the results
: according to each searcher.

it sounds like you don't really want a multisearcher .. it sounds like you
just want to search each of the individual indexes and return the results
from each as seperate groups.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 09:59:22 2007
Return-Path: <java-user-return-27757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93494 invoked from network); 25 Apr 2007 09:59:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 09:59:11 -0000
Received: (qmail 1086 invoked by uid 500); 25 Apr 2007 09:59:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1050 invoked by uid 500); 25 Apr 2007 09:59:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 730 invoked by uid 99); 25 Apr 2007 09:59:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 02:59:10 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 02:59:01 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HgeGm-0002TW-MA
	for java-user@lucene.apache.org; Wed, 25 Apr 2007 02:58:40 -0700
Message-ID: <10177720.post@talk.nabble.com>
Date: Wed, 25 Apr 2007 02:58:40 -0700 (PDT)
From: avishkar <avi_mit84@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: how to load index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: avi_mit84@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,
        i would like to know that what are the different ways to load the
index created in lucene.
-- 
View this message in context: http://www.nabble.com/how-to-load-index-tf3644363.html#a10177720
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 11:01:03 2007
Return-Path: <java-user-return-27758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16271 invoked from network); 25 Apr 2007 11:01:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 11:01:01 -0000
Received: (qmail 6550 invoked by uid 500); 25 Apr 2007 11:01:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6508 invoked by uid 500); 25 Apr 2007 11:01:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6497 invoked by uid 99); 25 Apr 2007 11:01:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 04:01:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 04:00:53 -0700
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	(authenticated bits=0)
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id l3PB0SNW027038
	for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 14:00:28 +0300
Message-ID: <462F34CC.4050609@sirma.bg>
Date: Wed, 25 Apr 2007 14:00:28 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Out of memory exception for big indexes
References: <46162A72.50400@sirma.bg>	 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>	 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>	 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>	 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>	 <814127511.20070408213229@gmail.com> <462D044F.9020802@sirma.bg> <872e2d490704240616p1f9f08c7u376d27916cf3950@mail.gmail.com>
In-Reply-To: <872e2d490704240616p1f9f08c7u376d27916cf3950@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Artem,

Thank you very much for your mails :)
So first I have to tell you that your patch works perfectly even with 
very big indexes - 40 GB (you can see the results bellow).
The reason I to have bad test results last time is that I made a bit 
change (but I can not understand why this change made problem - on my 
opinion it should not have so big effects on performance).
So the change that I made is - I added a new method in the class 
StoredFieldSortFactory. It is the same like create(String sortFieldName, 
boolean sortDescending) method but instead of wrapping SortField it 
return it directly and in my class I wrap this object in a Sort one. 
Here is the code:

public static SortField createSortField(String sortFieldName, boolean 
sortDescending) {
return new SortField(sortFieldName, instance, sortDescending);
}

I do this because we have to support sorting on multiple fields and I 
obtain all SortField objects in a cycle and then create Sort out of them:

Sort sort = new Sort(sortFields);

In my tests that were with very bad results (time for searches was more 
than 5 mins) in all the tests I used sorting ONLY BY ONE FIELD (means 
the array sortFields was always with length 1).
But I still used the constructor Sort(SortField[]) but not 
Sort(SortField) as originally in your code in the method 
StoredFieldSortFactory.create(..).
Do you think this is the reason for pure performance?

If so, COULD YOU PLEASE TELL ME how to use your patch for sorting on 
multiple stored fields?

Here are the test result of your patch with different indexes (the tests 
are with code just as you recommend to use it - with using of your 
create(..) method that uses constructor Sort(SortField) ):

- CPU - Intel Core2Duo, max memory allowed to the process that makes 
searching - 1GB (not all of it used)
**********************************************************************************************************
- index size 3,3 GB, about 486 410 documents (all the testing searches 
include all documents);

____________________________________________________________________________________________

- field size - it is file name and varies - on my opinion 15 - 30 chars 
average.
- search time (ASC) - 1,312 s, memory usage - 71MB
- search time (DSC) - 1,281 s, memory usage - 71MB

- field size - it is abs path name and varies - on my opinion 60 - 90 
chars average.
- search time (ASC) - 1,344 s, memory usage - 71MB
- search time (DSC) - 1,328 s, memory usage - 71MB

- field size - it is file size and varies - on my opinion 3 - 7 chars 
average.
- search time (ASC) - 1,313 s, memory usage - 71MB
- search time (DSC) - 1,312 s, memory usage - 71MB

**********************************************************************************

- index size 21,4 GB, about 376 999 documents (all the testing searches 
include all documents);
____________________________________________________________________________________________

- field size - it is file name and varies - on my opinion 15 - 30 chars 
average.
- search time (ASC) - 0,875 s, memory usage - 371MB
- search time (DSC) - 0,828 s, memory usage - 371MB

- field size - it is abs path name and varies - on my opinion 60 - 90 
chars average.
- search time (ASC) - 0,844 s, memory usage - 371MB
- search time (DSC) - 0,813 s, memory usage - 371MB

- field size - it is file size and varies - on my opinion 3 - 7 chars 
average.
- search time (ASC) - 0,813 s, memory usage - 371MB
- search time (DSC) - 0,797 s, memory usage - 371MB

**********************************************************************************

- index size 42,9 GB, about 10 944 918 documents (all the testing 
searches include all documents);
____________________________________________________________________________________________

- field size - it is file name and varies - on my opinion 15 - 30 chars 
average.
- search time (ASC) - 21,905 s, memory usage - 625MB
- search time (DSC) - 21,781 s, memory usage - 625MB

- field size - it is abs path name and varies - on my opinion 60 - 90 
chars average.
- search time (ASC) - 21,874 s, memory usage - 625MB
- search time (DSC) - 21,749 s, memory usage - 625MB

- field size - it is file size and varies - on my opinion 3 - 7 chars 
average.
- search time (ASC) - 21,687 s, memory usage - 625MB
- search time (DSC) - 21,812 s, memory usage - 625MB


THANK YOU VERY MUCH,
Ivan




Artem Vasiliev wrote:
> Hello Ivan!
>
> It's so sad to me that you had bad results with that patch. :)
>
> The discussion in the ticket is out-of-date - the patch was initially in
> several classes, used WeakHashMap but then it evolved to what it's now 
> - one
> StoredFieldSortFactory class. I use it in my sharehound app in pretty 
> much
> the same the form it is in Jira currently and it does show good 
> results to
> me.
>
> In your sample searches,
> - how many results do you have?
> - how long does the sorted search execute?
> - what is the average size of a sorted field?
> - what is the CPU and how much of it and memory you give to the 
> application?
>
> I get page 1 (first 100 items) of sorted list with 10000 items in 0.3s 
> to 3s
> (for date column it exactly depends on whether the sort is ascending or
> descending - don't know why is that). My index is about 1mln docs and 1G;
> sorted fields are rather small (numbers, dates and string of maybe 50
> symbols average). The machine looks quite beefy to me - Intel core duo 
> with
> 500M given to the application.
>
> Regards,
> Artem
>
> On 4/23/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>>
>> Hi All,
>> THANK YOU FOR YOUR HELP :)
>> I put this problem in the forum but I had no chance to work on it last
>> week unfurtunately...
>> So now I tested the Artem's patch but the results show:
>> 1) speed is very slow compare with the usage without patch
>> 2) There are not very big differences of memory usage (I tested till now
>> only with relativly small indexes - less than 1 GB and less than 1 mil
>> docs because the when using with 20-40 GB indexes I had to wait more
>> than 5 mins what is practically usless).
>>
>> So I have doubts if I use the patch correctly. I do just what is
>> described in Artem's letter:
>>
>> AV> You can include StoredFieldSortFactory class source file into your
>> sources and
>> AV> then use StoredFieldSortFactory.create(sortFieldName, 
>> sortDescending)
>> to get
>> AV> Sort object for sorting query.
>> AV> StoredFieldSortFactory source file can be extracted from LUCENE-769
>> patch or
>> AV> from sharehound sources:
>> http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/apache/lucene/search/StoredFieldSortFactory.java 
>>
>>
>>
>> What I am wondering about is that in the patch commetns
>> (https://issues.apache.org/jira/browse/LUCENE-769) I see that there is
>> written that patch solves the problem by using WeakHashMap, but actually
>> in the downloaded StoredFieldSortFactory.java  file there is not used
>> WeakHashMap. Another thing: In the comments in Lucene-769 issue there is
>> mentioned something about classes like: WeakDocumentsCache and
>> DocCachingIndexReader but I did not found them in Lucene source code
>> neither as classes in StoredFieldSortFactory.java. So my questions are:
>> 1. Is it enought to include the file StoredFieldSortFactory.java in the
>> source code or there are also other classes that I have to douwnload and
>> include?
>> 2. Have I to use this DocCachingIndexReader instead of Reader that I
>> currently use in cases when I expect OOMException and will use this 
>> patch?
>>
>> Thanks to all once again :),
>> Ivan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 11:09:57 2007
Return-Path: <java-user-return-27759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19714 invoked from network); 25 Apr 2007 11:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 11:09:56 -0000
Received: (qmail 19159 invoked by uid 500); 25 Apr 2007 11:09:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18644 invoked by uid 500); 25 Apr 2007 11:09:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18632 invoked by uid 99); 25 Apr 2007 11:09:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 04:09:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 04:09:48 -0700
Received: by ug-out-1314.google.com with SMTP id k40so356227ugc
        for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 04:09:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=bsxdqZfI4l3uQjtsaVMsk1+5m00XIQyhUVaWyKqV5pfG0RQ+sVpQO6pJDj041cCV+VIveP+dFDE2ftr/MqYjYaq+UldzVXeso7XoE0+NxOp0qCaKI0tFC0JZF/ka75l6lo/9ycXspj71vYVPIWnHdFE9wWg18sQX0RHa3hHb9VA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=kZYrMmakRu3cMOOXofdCIQw3PMi2ALGAgh1Me3sQHVR7nkYcpskEjU7if4747SdelUYYmTVaw+SX6ePl9Bt3F12sgbaBazs1X2Y5rBs0UGKJu8QHXx2kh3LMe1mjsuhABIwT+mh+GQtVhvhdhKA5ygtsyoriaffGRGxjMbOcNfk=
Received: by 10.67.76.16 with SMTP id d16mr1310591ugl.1177499366903;
        Wed, 25 Apr 2007 04:09:26 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id x33sm2381538ugc.2007.04.25.04.09.25;
        Wed, 25 Apr 2007 04:09:25 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <10177720.post@talk.nabble.com>
References: <10177720.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F13C9231-7C4A-41AA-A254-A7E8F2AB466A@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: how to load index
Date: Wed, 25 Apr 2007 13:08:58 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


25 apr 2007 kl. 11.58 skrev avishkar:


> i would like to know that what are the different ways to load the
> index created in lucene.

Is it FSDirectory.getDirectory(.. you are looking for?

<http://lucene.apache.org/java/docs/api/org/apache/lucene/store/ 
FSDirectory.html>


-- 
karl




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 12:23:13 2007
Return-Path: <java-user-return-27760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51445 invoked from network); 25 Apr 2007 12:23:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 12:23:12 -0000
Received: (qmail 30919 invoked by uid 500); 25 Apr 2007 12:23:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30890 invoked by uid 500); 25 Apr 2007 12:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30879 invoked by uid 99); 25 Apr 2007 12:23:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 05:23:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.127.83.172] (HELO correo.xeridia.com) (217.127.83.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 05:23:03 -0700
Received: from localhost (localhost [127.0.0.1])
	by correo.xeridia.com (Postfix) with ESMTP id 1D38637825E
	for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 14:22:17 +0200 (CEST)
Received: from correo.xeridia.com ([127.0.0.1])
	by localhost (correo.xeridia.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 31397-08 for <java-user@lucene.apache.org>;
	Wed, 25 Apr 2007 14:22:16 +0200 (CEST)
Received: from [192.168.1.24] (xer-leon9.xeridialeon.local [192.168.1.24])
	by correo.xeridia.com (Postfix) with ESMTP id C6597378223
	for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 14:22:16 +0200 (CEST)
Message-ID: <462F484F.9020909@xeridia.com>
Date: Wed, 25 Apr 2007 14:23:43 +0200
From: =?windows-1252?Q?Diego_Manilla_Su=E1rez?=
 <diego.manilla@xeridia.com>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Customizing scoring
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

We have an index with fields than can be multiple (i.e. a document has 
two fields called pets that contain dog and cat).

The problem comes when we calculate the score:

If a BooleanQuery is created as the addition of two TermQuery

TermQuery1 pets:dog

TermQuery2 pets:cat

BooleanQuery (pets:dog pets:cat) (boost = 3)

The score for this BooleanQuery is double (around 6) when the compared 
document has the field pets with these two values, but we want that 
the score is only 3, although there is more than one coincidence.

SUMMARY: we want that a BooleanQuery is scored like a whole Query.

Is there some way to do this?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 13:32:43 2007
Return-Path: <java-user-return-27761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98059 invoked from network); 25 Apr 2007 13:32:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 13:32:42 -0000
Received: (qmail 54715 invoked by uid 500); 25 Apr 2007 13:32:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54682 invoked by uid 500); 25 Apr 2007 13:32:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54671 invoked by uid 99); 25 Apr 2007 13:32:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 06:32:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,MANY_EXCLAMATIONS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 06:32:34 -0700
Received: by nz-out-0506.google.com with SMTP id i1so277169nzh
        for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 06:32:13 -0700 (PDT)
Received: by 10.114.78.1 with SMTP id a1mr188425wab.1177507932718;
        Wed, 25 Apr 2007 06:32:12 -0700 (PDT)
Received: by 10.114.175.4 with HTTP; Wed, 25 Apr 2007 06:32:12 -0700 (PDT)
Message-ID: <1324e4e20704250632j163b8d40o384aefc7f58b3600@mail.gmail.com>
Date: Wed, 25 Apr 2007 19:02:12 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: DBSight Turns Free! Instant Lucene Search on Database!
In-Reply-To: <6e3ae6310704240221n5e7aa66dv5e76c15f0b944a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_149736_2160121.1177507932660"
References: <6e3ae6310704240221n5e7aa66dv5e76c15f0b944a9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_149736_2160121.1177507932660
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

If I purchase the DBSight, then I will able to create my searchapplication
same as DBSight ?, all the display is same.. ie. narrow by categoty, search
speed, images...

Please suggest me..

Thanks.
Laxmilal Menaria


On 4/24/07, Chris Lu <chris.lu@gmail.com> wrote:
>
> For those who may be interested,
>
> DBSight 1.4.0 now has unlimited index size with Free version!
>
> Basically DBSight is more like SOLR + database adapter. You just point
> it with one or several SQLs to any database, and you can have Lucene
> search!
>
> It has Incremental Indexing, Recreating Index, Synchronize index with
> deleted database records, in addition to facet search, multi-server
> mode clustering. All can be done just by mouse clicking instead of
> coding java.
>
> Here is a video on how to create Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_149736_2160121.1177507932660--

From java-user-return-27762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 17:34:47 2007
Return-Path: <java-user-return-27762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13002 invoked from network); 25 Apr 2007 17:34:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 17:34:46 -0000
Received: (qmail 10867 invoked by uid 500); 25 Apr 2007 17:34:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10836 invoked by uid 500); 25 Apr 2007 17:34:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10825 invoked by uid 99); 25 Apr 2007 17:34:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 10:34:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MANY_EXCLAMATIONS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.18] (HELO web50003.mail.re2.yahoo.com) (206.190.38.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 25 Apr 2007 10:34:36 -0700
Received: (qmail 81388 invoked by uid 60001); 25 Apr 2007 17:34:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=fAjndBKjmfbV5nU5suyEM2Ux5Dv2MyAxov3p402I9lKSSj0PROsDolqegSkKJkinMkI6M+7HTB59FGBjDxOaiyZMecEzxjHLlQgn1UhJgco1GDmHhP9JdEkIptlXjO/9qzowZ8wdoAd7INdZITFguxcka3XD7SXqv8DJUCGLGns=;
X-YMail-OSG: XcZvHIwVM1lwVoCM2sg0NovSqa1N5E6wLWIgC31sPWGDAOJPyJXe7xnAO3SKN04PA_uBLF3_sVtSsZH7WyiceETtBb0hFrP5sKH7BziRJHxhvNIugxg-
Received: from [71.202.137.198] by web50003.mail.re2.yahoo.com via HTTP; Wed, 25 Apr 2007 10:34:14 PDT
Date: Wed, 25 Apr 2007 10:34:14 -0700 (PDT)
From: Chris Lu <chrislusf@yahoo.com>
Subject: Re: DBSight Turns Free! Instant Lucene Search on Database!
To: java-user@lucene.apache.org
In-Reply-To: <1324e4e20704250632j163b8d40o384aefc7f58b3600@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <142490.81222.qm@web50003.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Yes. 

You can easily create your own search, customize the
display based on existing templates.

You can put in your own analyzer, adjust your search
ranking(e.g. based on price).

I think the real effort to create a good search is
collecting quality data into your database.

Chris

--- Laxmilal Menaria <lmenaria@chambal.com> wrote:

> Hi,
> 
> If I purchase the DBSight, then I will able to
> create my searchapplication
> same as DBSight ?, all the display is same.. ie.
> narrow by categoty, search
> speed, images...
> 
> Please suggest me..
> 
> Thanks.
> Laxmilal Menaria
> 
> 
> On 4/24/07, Chris Lu <chris.lu@gmail.com> wrote:
> >
> > For those who may be interested,
> >
> > DBSight 1.4.0 now has unlimited index size with
> Free version!
> >
> > Basically DBSight is more like SOLR + database
> adapter. You just point
> > it with one or several SQLs to any database, and
> you can have Lucene
> > search!
> >
> > It has Incremental Indexing, Recreating Index,
> Synchronize index with
> > deleted database records, in addition to facet
> search, multi-server
> > mode clustering. All can be done just by mouse
> clicking instead of
> > coding java.
> >
> > Here is a video on how to create Lucene Database
> Search in 3 minutes:
> >
> >
>
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any
> Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> 


Chris Lu
-------------------------
Instant Full-Text Search on Any Database/Application
website: http://www.dbsight.net
demo: http://search.dbsight.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 19:04:05 2007
Return-Path: <java-user-return-27763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51600 invoked from network); 25 Apr 2007 19:04:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 19:04:02 -0000
Received: (qmail 13801 invoked by uid 500); 25 Apr 2007 19:04:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13757 invoked by uid 500); 25 Apr 2007 19:04:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13745 invoked by uid 99); 25 Apr 2007 19:04:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 12:04:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 12:03:53 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 25 Apr 2007 12:03:32 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7876C.6AABE94C"
Subject: How often to optimize an Index?
Date: Wed, 25 Apr 2007 12:03:30 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E6262780123ED15@WDCCPMAIL01.markettools.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How often to optimize an Index?
Thread-Index: AceHbGn7hPeEP+aJQlih1iu6DOzBaQ==
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Apr 2007 19:03:32.0424 (UTC) FILETIME=[6AF88C80:01C7876C]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7876C.6AABE94C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

What are best practices for optimizing an Index?

=20

We have several GB indexes in sizes between 2 and 8 GB.  One index gets
updates about every 2 to 30 seconds.  It takes less than a week to have
an index with several thousand files.  What is a good practice for
scheduling optimization?  Wait until a certain number of files is
created?  Every n number of updates?  Once a week or once a night?

=20

I am interested in finding out what other people use for optimizing
strategies.

=20

Andreas

=20

=20


------_=_NextPart_001_01C7876C.6AABE94C--

From java-user-return-27764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 19:10:03 2007
Return-Path: <java-user-return-27764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53433 invoked from network); 25 Apr 2007 19:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 19:10:02 -0000
Received: (qmail 31254 invoked by uid 500); 25 Apr 2007 19:09:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31224 invoked by uid 500); 25 Apr 2007 19:09:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31213 invoked by uid 99); 25 Apr 2007 19:09:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 12:09:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 12:09:50 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 25 Apr 2007 12:09:30 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Index Update Strategies
Date: Wed, 25 Apr 2007 12:09:29 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E6262780123ED29@WDCCPMAIL01.markettools.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index Update Strategies
Thread-Index: AceHbT+uch0q9cwLTRKYazLMiXnznQ==
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Apr 2007 19:09:30.0747 (UTC) FILETIME=[408C4CB0:01C7876D]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

We have an index of several GB in size which is updated very
frequently-about every 2 seconds.

Though it is desired to have changes updated to the index as soon as
possible I wonder if this frequent updates can have negative affect on
the search and data retrieval performance.

Would it make more sense to limit the updates to times of lesser usage
(night) or is this something that does not affect Lucene and I should
not worry?

I see performance problems and would like to figure out if this frequent
updates can have an impact on search.

Andreas


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 19:28:03 2007
Return-Path: <java-user-return-27765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65502 invoked from network); 25 Apr 2007 19:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 19:28:02 -0000
Received: (qmail 67737 invoked by uid 500); 25 Apr 2007 19:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67710 invoked by uid 500); 25 Apr 2007 19:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67699 invoked by uid 99); 25 Apr 2007 19:28:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 12:28:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of abublic@gmail.com designates 66.249.90.179 as permitted sender)
Received: from [66.249.90.179] (HELO ik-out-1112.google.com) (66.249.90.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 12:27:50 -0700
Received: by ik-out-1112.google.com with SMTP id b35so357144ika
        for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 12:27:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=h/ojzhEx5ufc4uW5oIrsxXuBUxVMaqiC8fVc9OkTTdqn1NSHzt2PRE7fQ0d7snTetEVxnCnc26Y94OEPV0wVifMrsctoGSf2a/XIksPJk6OK7SITqfzc+8I7ihbqFVtyFjDG8NjCNqj3lW9G0605q1OsIRaHDAfDiLNKX0VZ/Ag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=oiXGNhWcnfmum8NOzyiOFqoLKdDTgJzyYsoBe5UVF709e5og6I/58ml4vtsohj+XGQCETEBAlEWzd2WdYixksIF3n1gzXCMULMZ+r7wobw9Znm/e4Nx/iLwc5863GMlPpsjOL11s252mCI3w0Y6RMcL57rETKRpLGAq5Ac8pHMM=
Received: by 10.78.156.6 with SMTP id d6mr293976hue.1177529249235;
        Wed, 25 Apr 2007 12:27:29 -0700 (PDT)
Received: from ?81.195.137.185? ( [81.195.137.185])
        by mx.google.com with ESMTP id 39sm2955773ugb.2007.04.25.12.27.28;
        Wed, 25 Apr 2007 12:27:28 -0700 (PDT)
Date: Wed, 25 Apr 2007 23:27:10 +0400
From: Artem <abublic@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem <abublic@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <131828200.20070425232710@gmail.com>
To: Ivan Vasilev <java-user@lucene.apache.org>
Subject: Re[2]: Out of memory exception for big indexes
In-Reply-To: <462F34CC.4050609@sirma.bg>
References: <46162A72.50400@sirma.bg>
 <359a92830704060730l76d38d22g44be77aa3bff3845@mail.gmail.com>
 <Pine.LNX.4.58.0704061101020.15801@hal.rescomp.berkeley.edu>
 <872e2d490704061203k6923dbd2rd6ffe0117a46837@mail.gmail.com>
 <f36128690704072203i3ecf944bidbbb8769681b1ea4@mail.gmail.com>
 <814127511.20070408213229@gmail.com> <462D044F.9020802@sirma.bg>
 <872e2d490704240616p1f9f08c7u376d27916cf3950@mail.gmail.com>
 <462F34CC.4050609@sirma.bg>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Ivan,

That was cool news! Thanks! :) The timings are surprisingly good. 10 mln docs
sorted in 20s.. cool! Also it looks like sorting algorithm employed by Lucene is
quite memory-economic.

Not supporting multiple fields is in fact another limitation of my patch. I
don't need it so I didn't implement it :) What is needed to implement it is
probably do it manually - employ FieldSelector fetching that bunch of fields;
change compare(ScoreDoc scoreDoc1, ScoreDoc scoreDoc2) method so that it
compares docs by a bunch of fields (there should be also another array of
Asc/Desc flags somewhere which makes this more complicated) instead of single
field; that's it.

I don't understand yet why Sort(SortField[] fields) didn't give the same when
fields.length == 1.. Probably we should dig into Lucene code to find out.
In case of several fields I can imagine why this approach would be less effective: at least
N*2 Document reads (by StoredFieldComparator.sortValue) will be needed to
compare 2 documents (N is length of fields array).
One read with appropriate FieldSelector is likely to perform better.

Anyway, I do think StoredFieldSortFactory's approach could be successfully
applied to multiple fields, but I'm not going to implement it yet. May be you?
:)

Regards,
Artem

IV> Hi Artem,

IV> Thank you very much for your mails :)
IV> So first I have to tell you that your patch works perfectly even with 
IV> very big indexes - 40 GB (you can see the results bellow).
IV> The reason I to have bad test results last time is that I made a bit 
IV> change (but I can not understand why this change made problem - on my 
IV> opinion it should not have so big effects on performance).
IV> So the change that I made is - I added a new method in the class 
IV> StoredFieldSortFactory. It is the same like create(String sortFieldName, 
IV> boolean sortDescending) method but instead of wrapping SortField it 
IV> return it directly and in my class I wrap this object in a Sort one. 
IV> Here is the code:

IV> public static SortField createSortField(String sortFieldName, boolean 
IV> sortDescending) {
IV> return new SortField(sortFieldName, instance, sortDescending);
IV> }

IV> I do this because we have to support sorting on multiple fields and I 
IV> obtain all SortField objects in a cycle and then create Sort out of them:

IV> Sort sort = new Sort(sortFields);

IV> In my tests that were with very bad results (time for searches was more 
IV> than 5 mins) in all the tests I used sorting ONLY BY ONE FIELD (means 
IV> the array sortFields was always with length 1).
IV> But I still used the constructor Sort(SortField[]) but not 
IV> Sort(SortField) as originally in your code in the method 
IV> StoredFieldSortFactory.create(..).
IV> Do you think this is the reason for pure performance?

IV> If so, COULD YOU PLEASE TELL ME how to use your patch for sorting on 
IV> multiple stored fields?

IV> Here are the test result of your patch with different indexes (the tests 
IV> are with code just as you recommend to use it - with using of your 
IV> create(..) method that uses constructor Sort(SortField) ):

IV> - CPU - Intel Core2Duo, max memory allowed to the process that makes 
IV> searching - 1GB (not all of it used)
IV> **********************************************************************************************************
IV> - index size 3,3 GB, about 486 410 documents (all the testing searches 
IV> include all documents);

IV> ____________________________________________________________________________________________

IV> - field size - it is file name and varies - on my opinion 15 - 30 chars 
IV> average.
IV> - search time (ASC) - 1,312 s, memory usage - 71MB
IV> - search time (DSC) - 1,281 s, memory usage - 71MB

IV> - field size - it is abs path name and varies - on my opinion 60 - 90 
IV> chars average.
IV> - search time (ASC) - 1,344 s, memory usage - 71MB
IV> - search time (DSC) - 1,328 s, memory usage - 71MB

IV> - field size - it is file size and varies - on my opinion 3 - 7 chars 
IV> average.
IV> - search time (ASC) - 1,313 s, memory usage - 71MB
IV> - search time (DSC) - 1,312 s, memory usage - 71MB

IV> **********************************************************************************

IV> - index size 21,4 GB, about 376 999 documents (all the testing searches 
IV> include all documents);
IV> ____________________________________________________________________________________________

IV> - field size - it is file name and varies - on my opinion 15 - 30 chars 
IV> average.
IV> - search time (ASC) - 0,875 s, memory usage - 371MB
IV> - search time (DSC) - 0,828 s, memory usage - 371MB

IV> - field size - it is abs path name and varies - on my opinion 60 - 90 
IV> chars average.
IV> - search time (ASC) - 0,844 s, memory usage - 371MB
IV> - search time (DSC) - 0,813 s, memory usage - 371MB

IV> - field size - it is file size and varies - on my opinion 3 - 7 chars 
IV> average.
IV> - search time (ASC) - 0,813 s, memory usage - 371MB
IV> - search time (DSC) - 0,797 s, memory usage - 371MB

IV> **********************************************************************************

IV> - index size 42,9 GB, about 10 944 918 documents (all the testing 
IV> searches include all documents);
IV> ____________________________________________________________________________________________

IV> - field size - it is file name and varies - on my opinion 15 - 30 chars 
IV> average.
IV> - search time (ASC) - 21,905 s, memory usage - 625MB
IV> - search time (DSC) - 21,781 s, memory usage - 625MB

IV> - field size - it is abs path name and varies - on my opinion 60 - 90 
IV> chars average.
IV> - search time (ASC) - 21,874 s, memory usage - 625MB
IV> - search time (DSC) - 21,749 s, memory usage - 625MB

IV> - field size - it is file size and varies - on my opinion 3 - 7 chars 
IV> average.
IV> - search time (ASC) - 21,687 s, memory usage - 625MB
IV> - search time (DSC) - 21,812 s, memory usage - 625MB


IV> THANK YOU VERY MUCH,
IV> Ivan





-- 
Best regards,
 Artem                            mailto:abublic@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 19:45:40 2007
Return-Path: <java-user-return-27766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72105 invoked from network); 25 Apr 2007 19:45:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 19:45:38 -0000
Received: (qmail 14497 invoked by uid 500); 25 Apr 2007 19:45:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14086 invoked by uid 500); 25 Apr 2007 19:45:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14075 invoked by uid 99); 25 Apr 2007 19:45:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 12:45:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 12:45:31 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 1BA34FFB49
	for <java-user@lucene.apache.org>; Wed, 25 Apr 2007 12:45:10 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E6262780123ED15@WDCCPMAIL01.markettools.com>
References: <3FB08D6A21B3EC4D8749EF6D9E6262780123ED15@WDCCPMAIL01.markettools.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F8700C74-7C14-4D42-B10A-3CCF8DDD326B@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How often to optimize an Index?
Date: Wed, 25 Apr 2007 15:45:01 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Related discussion at http://www.gossamer-threads.com/lists/lucene/ 
java-dev/47895?search_string=optimize;#47895

Also, search this archive and the java-dev archive for optimize.


On Apr 25, 2007, at 3:03 PM, Andreas Guther wrote:

> What are best practices for optimizing an Index?
>
>
>
> We have several GB indexes in sizes between 2 and 8 GB.  One index  
> gets
> updates about every 2 to 30 seconds.  It takes less than a week to  
> have
> an index with several thousand files.  What is a good practice for
> scheduling optimization?  Wait until a certain number of files is
> created?  Every n number of updates?  Once a week or once a night?
>
>
>
> I am interested in finding out what other people use for optimizing
> strategies.
>
>
>
> Andreas
>
>
>
>
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 23:28:12 2007
Return-Path: <java-user-return-27767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68988 invoked from network); 25 Apr 2007 23:28:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 23:28:11 -0000
Received: (qmail 54722 invoked by uid 500); 25 Apr 2007 23:28:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54642 invoked by uid 500); 25 Apr 2007 23:28:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54631 invoked by uid 99); 25 Apr 2007 23:28:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 16:28:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 16:28:01 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hgqtg-0007fB-Vp
	for java-user@lucene.apache.org; Wed, 25 Apr 2007 16:27:40 -0700
Message-ID: <10191597.post@talk.nabble.com>
Date: Wed, 25 Apr 2007 16:27:40 -0700 (PDT)
From: Theodan <dan@theodan.com>
To: java-user@lucene.apache.org
Subject: Sorting with custom SortComparator
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dan@theodan.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello.

I am trying to sort my query results on a String field called "AssetType"
and then on the relevancy score, but I need a particular ordering of the
possible values in "AssetType" (i.e. first "Video", then "Article", etc.).

I have tried doing this with a custom SortComparator that returns Integers
from getComparable(), as follows:

===========================

public class LuceneIndexSearchCommand extends AbstractSearchCommand {
	
	protected boolean execute(SearchContext context) throws Exception {
		
		...
		
		Hits hits = new Hits();
		
		...

		BooleanQuery keywordQuery = new BooleanQuery();

		...

		Query query = queryParser.parse(finalQuery);

		ConstantScoreRangeQuery constantScoreRangeQuery = new
ConstantScoreRangeQuery("assettype", null, null, true, true);

		BooleanQuery booleanQuery = new BooleanQuery();
		booleanQuery.add(query, Occur.MUST);
		booleanQuery.add(constantScoreRangeQuery, Occur.MUST);

		SortField[] sortFields = new SortField[] {
				new SortField("assettype", new AssetTypeSortComparator()),
				SortField.FIELD_SCORE
		};
		hits.recordHits(searcher.search(booleanQuery, new Sort(sortFields)));
		
		...
        
	}

	private static class AssetTypeSortComparator extends SortComparator {
		
		private static final Map ASSET_TYPE_ORDER_MAP = new HashMap();
		private static final Integer DEFAULT_ORDER = new Integer(3);
		
		static {
			ASSET_TYPE_ORDER_MAP.put("Interactive".toLowerCase(), new Integer(0));
			ASSET_TYPE_ORDER_MAP.put("Video".toLowerCase(), new Integer(0));
			ASSET_TYPE_ORDER_MAP.put("EncyclopediaArticles".toLowerCase(), new
Integer(1));
			ASSET_TYPE_ORDER_MAP.put("Image".toLowerCase(), new Integer(2));
		}
		
		protected Comparable getComparable(String termtext) {
			if (ASSET_TYPE_ORDER_MAP.containsKey(termtext.toLowerCase())) {
				return (Integer)ASSET_TYPE_ORDER_MAP.get(termtext.toLowerCase());
			}
			else {
				return DEFAULT_ORDER;
			}
    	}
		
    };
    
}

===========================

but my Hits don't come back sorted.  They seem to be in the same unsorted
order as before I started trying to use the custom SortComparator.

I have debugged through SortComparator and FieldCacheImpl, and the
"cachedValues" array does seem to correctly contain Integer items
corresponding to most of my 80,000+ docs.  The rest of the items in the
array are null, corresponding to those docs that are missing a value for the
"AssetType" field.

Also, FYI, I am using ConstantScoreRangeQuery because the "AssetType" field
is sometimes missing from certain of the docs, and if I don't use
ConstantScoreRangeQuery then I get NullPointerException on
SortComparator.java:37, as has been discussed before on this mailing list.

Any help would be greatly appreciated.

-Theo
-- 
View this message in context: http://www.nabble.com/Sorting-with-custom-SortComparator-tf3648692.html#a10191597
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 23:28:22 2007
Return-Path: <java-user-return-27768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69186 invoked from network); 25 Apr 2007 23:28:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 23:28:20 -0000
Received: (qmail 56435 invoked by uid 500); 25 Apr 2007 23:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56410 invoked by uid 500); 25 Apr 2007 23:28:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56399 invoked by uid 99); 25 Apr 2007 23:28:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 16:28:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 16:28:12 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 24AFD4ED8E0
	for <java-user@lucene.apache.org>; Thu, 26 Apr 2007 09:27:26 +1000 (EST)
Message-ID: <462FE471.8000907@nuix.com>
Date: Thu, 26 Apr 2007 09:29:53 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070423)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Straigtforward stemming example? Dictionary needed?
References: <1177442302.4582.51.camel@localhost>     <OFA2221027.112BD5AC-ON882572C7.006D006C-882572C7.006DDC12@il.ibm.com>     <64303.213.94.211.166.1177447753.squirrel@data.propylon.com>    <1177449827.4582.59.camel@localhost> <65406.213.94.211.166.1177453037.squirrel@data.propylon.com>
In-Reply-To: <65406.213.94.211.166.1177453037.squirrel@data.propylon.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

damien.mccarthy@propylon.com wrote:
> I guess there are a few points
> 
> - it is impossible to stem with total accuracy using rules alone
> 
> - combining a rule based stemmer with a dictionary could also be error
> prone. Unrelated words can have the same stem - consider the past tense of
> see and the stem of sawing ( cutting wood )

I guess you could solve some of these by stemming (actually, lemmatising 
is probably more accurate, since you'll almost certainly need part of 
speech information to do it with any accuracy) to the wordnet number, 
for which the meaning is unique.

But there are still ambiguous sentences where you don't know which word 
it is.  To use the example just given, "I saw wood" is pretty ambiguous, 
without having more context.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 25 23:32:56 2007
Return-Path: <java-user-return-27769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72135 invoked from network); 25 Apr 2007 23:32:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Apr 2007 23:32:55 -0000
Received: (qmail 65569 invoked by uid 500); 25 Apr 2007 23:32:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65248 invoked by uid 500); 25 Apr 2007 23:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65237 invoked by uid 99); 25 Apr 2007 23:32:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 16:32:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 16:32:48 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 132CF4ED8E0
	for <java-user@lucene.apache.org>; Thu, 26 Apr 2007 09:32:04 +1000 (EST)
Message-ID: <462FE587.2000906@nuix.com>
Date: Thu, 26 Apr 2007 09:34:31 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070423)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Adding large files to index
References: <cd7dd9c0704240400i3f8be4b0m40020c08fd473f73@mail.gmail.com> <001201c7866c$79f2e560$6dd8b020$@com> <A1C9CFAF5B94574892B0B5AD7874E8BE010E4A52@mailhyd1.hyd.deshaw.com> <001601c78674$cb06d760$61148620$@com>
In-Reply-To: <001601c78674$cb06d760$61148620$@com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

David Xiao wrote:
> Consider reduce size of per file. Split them into smaller pieces will
> definitely help indexer working faster.
> 
> A 50M pure text file is amazing size, very few text files reach that
> size: 50M. It must be very reasonable if you have to keep all
> information in such one big file.
> 
> What you think?

Not everyone using Lucene is writing a CMS.  Some of us do have to deal 
with arbitrarily big data, if it appears.  How do you split an 
arbitrary, large text file?  Will breaking it in two make some queries 
not work, e.g. if the user enters +term1 +term2 and each one was on 
opposite sides of the split? etc.

That being said, I haven't had issues adding files of this size.  But 
then, our application doesn't require the ability to read at the same 
time some other thread is writing (so our memory requirements are lower 
to begin with.)

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 01:05:46 2007
Return-Path: <java-user-return-27770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95655 invoked from network); 26 Apr 2007 01:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 01:05:44 -0000
Received: (qmail 79909 invoked by uid 500); 26 Apr 2007 01:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79870 invoked by uid 500); 26 Apr 2007 01:05:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79846 invoked by uid 99); 26 Apr 2007 01:05:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2007 18:05:45 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: 69.147.74.186 is neither permitted nor denied by domain of dclark_lucene@verizon.net)
Received: from [69.147.74.186] (HELO web84307.mail.re1.yahoo.com) (69.147.74.186)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 25 Apr 2007 18:05:36 -0700
Received: (qmail 31815 invoked by uid 60001); 26 Apr 2007 01:05:15 -0000
X-YMail-OSG: Bzupj2oVM1mOocwlvc5OoMLCCR078_hEEGfEcaoOMtL_ifaTRucXl7zYN8KcSAuvSy9IiN63sRye_5bsjIGHgcEeHA--
Received: from [66.248.222.34] by web84307.mail.re1.yahoo.com via HTTP; Wed, 25 Apr 2007 18:05:15 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Wed, 25 Apr 2007 18:05:15 -0700 (PDT)
From: Daniel Clark <dclark_lucene@verizon.net>
Subject: Looking for Lucene Job Opportunity
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-795261524-1177549515=:31386"
Message-ID: <448717.31386.qm@web84307.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-795261524-1177549515=:31386
Content-Type: text/plain; charset=ascii

I am an independent contractor that really enjoyed working with Lucene on two past contracts.  The success of Lucene on those programs saved my clients millions of dollars because they didn't have to purchase commercial software.  One client is currently converting their Google search to Lucene.  Please, contact me at dclark_lucene@verizon.net if you are aware of any Lucene developer positions or looking for Lucene developers.  I live in the DC Metro area and am willing to travel up to 25%.
--0-795261524-1177549515=:31386--

From java-user-return-27771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 07:21:54 2007
Return-Path: <java-user-return-27771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97401 invoked from network); 26 Apr 2007 07:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 07:21:54 -0000
Received: (qmail 7708 invoked by uid 500); 26 Apr 2007 07:21:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7665 invoked by uid 500); 26 Apr 2007 07:21:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7654 invoked by uid 99); 26 Apr 2007 07:21:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 00:21:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,MANY_EXCLAMATIONS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 00:21:43 -0700
Received: by nz-out-0506.google.com with SMTP id i1so597129nzh
        for <java-user@lucene.apache.org>; Thu, 26 Apr 2007 00:21:22 -0700 (PDT)
Received: by 10.115.74.1 with SMTP id b1mr482835wal.1177572082070;
        Thu, 26 Apr 2007 00:21:22 -0700 (PDT)
Received: by 10.114.175.4 with HTTP; Thu, 26 Apr 2007 00:21:22 -0700 (PDT)
Message-ID: <1324e4e20704260021mc0c965ex2e21d3ef3bf175f6@mail.gmail.com>
Date: Thu, 26 Apr 2007 12:51:22 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: DBSight Turns Free! Instant Lucene Search on Database!
In-Reply-To: <142490.81222.qm@web50003.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_161003_12220930.1177572082010"
References: <1324e4e20704250632j163b8d40o384aefc7f58b3600@mail.gmail.com>
	 <142490.81222.qm@web50003.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_161003_12220930.1177572082010
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

is any download link for source of dbsight ?

-Laxmilal

On 4/25/07, Chris Lu <chrislusf@yahoo.com> wrote:
>
> Hi,
>
> Yes.
>
> You can easily create your own search, customize the
> display based on existing templates.
>
> You can put in your own analyzer, adjust your search
> ranking(e.g. based on price).
>
> I think the real effort to create a good search is
> collecting quality data into your database.
>
> Chris
>
> --- Laxmilal Menaria <lmenaria@chambal.com> wrote:
>
> > Hi,
> >
> > If I purchase the DBSight, then I will able to
> > create my searchapplication
> > same as DBSight ?, all the display is same.. ie.
> > narrow by categoty, search
> > speed, images...
> >
> > Please suggest me..
> >
> > Thanks.
> > Laxmilal Menaria
> >
> >
> > On 4/24/07, Chris Lu <chris.lu@gmail.com> wrote:
> > >
> > > For those who may be interested,
> > >
> > > DBSight 1.4.0 now has unlimited index size with
> > Free version!
> > >
> > > Basically DBSight is more like SOLR + database
> > adapter. You just point
> > > it with one or several SQLs to any database, and
> > you can have Lucene
> > > search!
> > >
> > > It has Incremental Indexing, Recreating Index,
> > Synchronize index with
> > > deleted database records, in addition to facet
> > search, multi-server
> > > mode clustering. All can be done just by mouse
> > clicking instead of
> > > coding java.
> > >
> > > Here is a video on how to create Lucene Database
> > Search in 3 minutes:
> > >
> > >
> >
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > >
> > > --
> > > Chris Lu
> > > -------------------------
> > > Instant Scalable Full-Text Search On Any
> > Database/Application
> > > site: http://www.dbsight.net
> > > demo: http://search.dbsight.com
> > >
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
> Chris Lu
> -------------------------
> Instant Full-Text Search on Any Database/Application
> website: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_161003_12220930.1177572082010--

From java-user-return-27772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 17:22:48 2007
Return-Path: <java-user-return-27772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20453 invoked from network); 26 Apr 2007 17:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 17:22:48 -0000
Received: (qmail 51672 invoked by uid 500); 26 Apr 2007 17:22:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51644 invoked by uid 500); 26 Apr 2007 17:22:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51633 invoked by uid 99); 26 Apr 2007 17:22:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 10:22:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MANY_EXCLAMATIONS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 10:22:38 -0700
Received: by ug-out-1314.google.com with SMTP id k40so581199ugc
        for <java-user@lucene.apache.org>; Thu, 26 Apr 2007 10:22:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WI7SljExk3TPEG9TRKGkfIxHSontvz0qzec4DbAyKNRVsfU4ymvXsXNt345BfM2LqPXcKumy0UvLnk9543mWSmklH+GRXm20g3Mmfgj01HT4OfvVvQbBA9hWjRhFhEQCPbosNfaMq1gpsX8G78lFviHSMGv39Gb99+7wWeIkKJk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lrsyB64keKfxZzX7yoe82bvdBbyLH1lRCeQPUTtW64cfT09BFlZepaxEIT76hJl8BC4n8I3au3InLbhMExpk+hOfMNlsq/lZYd0tosjgr/8b/J73YS1tht/PliLstB9nR4u3RGBqVKmjnRWbxU65mzVwPw+i40OEbNggrnnjxG8=
Received: by 10.66.255.7 with SMTP id c7mr2356394ugi.1177608136052;
        Thu, 26 Apr 2007 10:22:16 -0700 (PDT)
Received: by 10.66.246.19 with HTTP; Thu, 26 Apr 2007 10:22:15 -0700 (PDT)
Message-ID: <6e3ae6310704261022sd00cf6duc0a52b3900b4b043@mail.gmail.com>
Date: Thu, 26 Apr 2007 10:22:15 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DBSight Turns Free! Instant Lucene Search on Database!
In-Reply-To: <1324e4e20704260021mc0c965ex2e21d3ef3bf175f6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1324e4e20704250632j163b8d40o384aefc7f58b3600@mail.gmail.com>
	 <142490.81222.qm@web50003.mail.re2.yahoo.com>
	 <1324e4e20704260021mc0c965ex2e21d3ef3bf175f6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Laxmilal,

You can download the war or zip file here:
http://www.dbsight.net

If not satisfied, you can add your own Lucene Analyzer, JDBC driver,
etc, although source code is not for download.

Thanks!

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 4/26/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
> Hi,
>
> is any download link for source of dbsight ?
>
> -Laxmilal
>
> On 4/25/07, Chris Lu <chrislusf@yahoo.com> wrote:
> >
> > Hi,
> >
> > Yes.
> >
> > You can easily create your own search, customize the
> > display based on existing templates.
> >
> > You can put in your own analyzer, adjust your search
> > ranking(e.g. based on price).
> >
> > I think the real effort to create a good search is
> > collecting quality data into your database.
> >
> > Chris
> >
> > --- Laxmilal Menaria <lmenaria@chambal.com> wrote:
> >
> > > Hi,
> > >
> > > If I purchase the DBSight, then I will able to
> > > create my searchapplication
> > > same as DBSight ?, all the display is same.. ie.
> > > narrow by categoty, search
> > > speed, images...
> > >
> > > Please suggest me..
> > >
> > > Thanks.
> > > Laxmilal Menaria
> > >
> > >
> > > On 4/24/07, Chris Lu <chris.lu@gmail.com> wrote:
> > > >
> > > > For those who may be interested,
> > > >
> > > > DBSight 1.4.0 now has unlimited index size with
> > > Free version!
> > > >
> > > > Basically DBSight is more like SOLR + database
> > > adapter. You just point
> > > > it with one or several SQLs to any database, and
> > > you can have Lucene
> > > > search!
> > > >
> > > > It has Incremental Indexing, Recreating Index,
> > > Synchronize index with
> > > > deleted database records, in addition to facet
> > > search, multi-server
> > > > mode clustering. All can be done just by mouse
> > > clicking instead of
> > > > coding java.
> > > >
> > > > Here is a video on how to create Lucene Database
> > > Search in 3 minutes:
> > > >
> > > >
> > >
> >
> > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > > >
> > > > --
> > > > Chris Lu
> > > > -------------------------
> > > > Instant Scalable Full-Text Search On Any
> > > Database/Application
> > > > site: http://www.dbsight.net
> > > > demo: http://search.dbsight.com
> > > >
> > > >
> > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> >
> > Chris Lu
> > -------------------------
> > Instant Full-Text Search on Any Database/Application
> > website: http://www.dbsight.net
> > demo: http://search.dbsight.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 17:34:20 2007
Return-Path: <java-user-return-27773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22469 invoked from network); 26 Apr 2007 17:34:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 17:34:19 -0000
Received: (qmail 71656 invoked by uid 500); 26 Apr 2007 17:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71624 invoked by uid 500); 26 Apr 2007 17:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71612 invoked by uid 99); 26 Apr 2007 17:34:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 10:34:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Apr 2007 10:34:10 -0700
Received: (qmail 40498 invoked by uid 60001); 26 Apr 2007 17:33:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=6rvJCPWYB+zuhR2qOEEBM/bc+JgJzAFrF50XiVbL3YEyJa9teaCedHIkgnAWd4OxkTn+G655sEIIFd4CbX0wgico3FccAlruNZdP8YiR+2M8XF0U71kp5l7IiCb3B83gLeUV8cqpcmIvBB020H5akVKjZatCwqOuMJZODFBgzB0=;
X-YMail-OSG: XFSEFaQVM1nVF70.3HzDAI2IceJHoIP0fUYFeVDu_sT.4XuktE8vXwzHjXZc6UZuMXPkSTTSA2ETh7fkJprD0tx9S3s2eFuJ_jeHn9paPixiWzhW8fU-
Received: from [70.107.145.139] by web50310.mail.re2.yahoo.com via HTTP; Thu, 26 Apr 2007 10:33:49 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Thu, 26 Apr 2007 10:33:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index Update Strategies
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <535408.40203.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Andreas,

There are two important parts here:
1) Index updates will impact search - just think about the disk IO.
2) You will further slow down the search speed by re-opening the index after detecting a change, as each new re-opening of IndexReader will have to read some of the index data.

So:
1) If you can buffer updates and do them in batch, that will be more efficient.
2) If you can delay the re-opening of the IndexReader, that will help, too.  Note that not re-opening the index means the searchers will not see additions/updates done after the index was last opened.

Otis

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
http://www.lucene-consulting.com/

----- Original Message ----
From: Andreas Guther <Andreas.Guther@markettools.com>
To: java-user@lucene.apache.org
Sent: Wednesday, April 25, 2007 3:09:29 PM
Subject: Index Update Strategies

Hi

We have an index of several GB in size which is updated very
frequently-about every 2 seconds.

Though it is desired to have changes updated to the index as soon as
possible I wonder if this frequent updates can have negative affect on
the search and data retrieval performance.

Would it make more sense to limit the updates to times of lesser usage
(night) or is this something that does not affect Lucene and I should
not worry?

I see performance problems and would like to figure out if this frequent
updates can have an impact on search.

Andreas


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 17:36:37 2007
Return-Path: <java-user-return-27774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23071 invoked from network); 26 Apr 2007 17:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 17:36:36 -0000
Received: (qmail 78979 invoked by uid 500); 26 Apr 2007 17:36:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78950 invoked by uid 500); 26 Apr 2007 17:36:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78939 invoked by uid 99); 26 Apr 2007 17:36:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 10:36:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.206.239] (HELO smtp106.plus.mail.mud.yahoo.com) (68.142.206.239)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Apr 2007 10:36:24 -0700
Received: (qmail 7084 invoked from network); 26 Apr 2007 17:36:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.mx;
  h=Received:X-YMail-OSG:Subject:From:To:In-Reply-To:References:Content-Type:Date:Message-Id:Mime-Version:X-Mailer:Content-Transfer-Encoding;
  b=dtRyjGbwDXGPDheNEQi5KiKB9WWlGIOtDatzSct7Ymw29INSQYl6kQnDQy1zm1+eQjwMlPdToLr50Fb2z5WKvYj2oiIF1QqHNvLtYb4zwlfVc+ZecOB/7L0k1u7sf1fzzFiY5CLAuLDTrH1g89uALyl2foXaoGVtvNAQaZxiq5s=  ;
Received: from unknown (HELO toshiba-debian.local) (ndrw_grn@200.67.231.185 with plain)
  by smtp106.plus.mail.mud.yahoo.com with SMTP; 26 Apr 2007 17:36:01 -0000
X-YMail-OSG: xK0DEzMVM1kmW7OKk4KFdbETAzwqmIf18Qpfsa502rY8q3hbZFDkMJ.3bRNvmDBf3o6BQ4cgXQ--
Subject: Re: Straigtforward stemming example? Dictionary needed?
From: Andrew Green <ndrw_grn@yahoo.com.mx>
To: java-user@lucene.apache.org
In-Reply-To: <462FE471.8000907@nuix.com>
References: <1177442302.4582.51.camel@localhost>
	 <OFA2221027.112BD5AC-ON882572C7.006D006C-882572C7.006DDC12@il.ibm.com>
	 <64303.213.94.211.166.1177447753.squirrel@data.propylon.com>
	 <1177449827.4582.59.camel@localhost>
	 <65406.213.94.211.166.1177453037.squirrel@data.propylon.com>
	 <462FE471.8000907@nuix.com>
Content-Type: text/plain; charset=ISO-8859-1
Date: Thu, 26 Apr 2007 12:41:41 -0500
Message-Id: <1177609301.4622.1.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

El jue, 26-04-2007 a las 09:29 +1000, Daniel Noll escribi:
> damien.mccarthy@propylon.com wrote:
> > I guess there are a few points
> > 
> > - it is impossible to stem with total accuracy using rules alone
> > 
> > - combining a rule based stemmer with a dictionary could also be error
> > prone. Unrelated words can have the same stem - consider the past tense of
> > see and the stem of sawing ( cutting wood )
> 
> I guess you could solve some of these by stemming (actually, lemmatising 
> is probably more accurate, since you'll almost certainly need part of 
> speech information to do it with any accuracy) to the wordnet number, 
> for which the meaning is unique.
> 
> But there are still ambiguous sentences where you don't know which word 
> it is.  To use the example just given, "I saw wood" is pretty ambiguous, 
> without having more context.
> 
> Daniel
> 
> 

Great... thanks, everyone, for your replies. For now we've decided to
stick to the standard Snowball rule-based stemmer, but we'll be keeping
our eyes open for other options that may come up.

- Andrew Green


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 17:41:54 2007
Return-Path: <java-user-return-27775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24473 invoked from network); 26 Apr 2007 17:41:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 17:41:53 -0000
Received: (qmail 92555 invoked by uid 500); 26 Apr 2007 17:41:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92511 invoked by uid 500); 26 Apr 2007 17:41:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92496 invoked by uid 99); 26 Apr 2007 17:41:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 10:41:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Apr 2007 10:41:45 -0700
Received: (qmail 39561 invoked by uid 60001); 26 Apr 2007 17:41:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=W0mKZTgNNeqtamnGauK7ZA6rZcLkUAtpjYF9lSKBbHTQuc0xto4svXf8tNjt8HKKbj0hBCm3LX3N5OIlm4aFSsL/qFwgSdK/8CQ2by8UcA1pqdmK4wsSqX0pvTEWAx+pC5eoG5zxeR+PQJf6Gi/MVdO/N+DMFeJvQg5bs35lClY=;
X-YMail-OSG: HBHGoIkVM1n13xRLf8yvxIcyixtgRHYQpnzYS8u3QeeFhR33Oq8GjRO8MkOr628Dd0XqWIjDaMZuOivkS0o3DgoV9V1YxKq0oaZxRBr8xQVgRtOgDd.aC__wt08_UBX9OhiZKTvFU.raZ1M-
Received: from [70.107.145.139] by web50309.mail.re2.yahoo.com via HTTP; Thu, 26 Apr 2007 10:41:24 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Thu, 26 Apr 2007 10:41:24 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How often to optimize an Index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <337729.38725.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Andreas,

Look at the javadoc for the mergeFactor (under IndexWriter javadoc).  This will let you control how many index files are created in your index dir and how often index segments are merged.  Set it to 1, and see what happens.  But a low mergeFacor will also mean more merging and more IO, so you'll need to find the right balance there.  You could also look into making your index a compound index if you are worried about the number of files.

Optimizing should be done rarely, as it means the whole index will be re-written on disk.  If you want to do that, do it during the slow part of the day.  No updates to the index during that time either.

Otis

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
http://www.lucene-consulting.com/

----- Original Message ----
From: Andreas Guther <Andreas.Guther@markettools.com>
To: java-user@lucene.apache.org
Sent: Wednesday, April 25, 2007 3:03:30 PM
Subject: How often to optimize an Index?

What are best practices for optimizing an Index?

 

We have several GB indexes in sizes between 2 and 8 GB.  One index gets
updates about every 2 to 30 seconds.  It takes less than a week to have
an index with several thousand files.  What is a good practice for
scheduling optimization?  Wait until a certain number of files is
created?  Every n number of updates?  Once a week or once a night?

 

I am interested in finding out what other people use for optimizing
strategies.

 

Andreas

 

 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 19:41:22 2007
Return-Path: <java-user-return-27776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62125 invoked from network); 26 Apr 2007 19:41:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 19:41:21 -0000
Received: (qmail 47691 invoked by uid 500); 26 Apr 2007 19:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47445 invoked by uid 500); 26 Apr 2007 19:41:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47429 invoked by uid 99); 26 Apr 2007 19:41:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 12:41:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.206.242] (HELO smtp109.plus.mail.mud.yahoo.com) (68.142.206.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Apr 2007 12:41:09 -0700
Received: (qmail 1320 invoked from network); 26 Apr 2007 19:40:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.mx;
  h=Received:X-YMail-OSG:Subject:From:To:Content-Type:Date:Message-Id:Mime-Version:X-Mailer:Content-Transfer-Encoding;
  b=INoYdt79z0BR2NKExowhBH/RVPcTElS9ax3KfWgTJqTYn9+xttq23sj0EqT/WYTw/VXvAIfVAO8hAm2qO3jfZ1RtMwVgEW91Ckh2TdjW2g54FXRp9oz6uTxQB06lkh12N3qAcVGdE07Z04QypdeAiKI8SQZ37ImA+loDJOnerAc=  ;
Received: from unknown (HELO toshiba-debian.local) (ndrw_grn@200.67.231.185 with plain)
  by smtp109.plus.mail.mud.yahoo.com with SMTP; 26 Apr 2007 19:40:48 -0000
X-YMail-OSG: .erK4j8VM1k4WmA4XaY6LCDTsQSOjHOQem68dKWg8Kit48Dt.tudTgk6qFMC7hIQJNl9gOJAmA--
Subject: Snowball and accents filter...?
From: Andrew Green <ndrw_grn@yahoo.com.mx>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Date: Thu, 26 Apr 2007 14:46:28 -0500
Message-Id: <1177616788.4622.14.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, all,

Another quick request succinct for code examples, or an explanation of
what we're doing wrong here.

We've successfully gotten the Snowball Spanish stemmer working in our
test harness. An example that works perfectly: texts that contain
"civilizacin" or "civilizaciones" produce hits on searches for either
"civilizacin" or "civilizaciones". However...

...it's quite likely that in many of our search requests the user will
omit the accents on letters, and it's not impossible that some documents
will contain misspelled words with wrong or missing accents.

So we in addition to stemming we need to remove accents from both the
index and the search queries... I think.

In order to do this, we tried subclassing the SnowballAnalyzer... it
doesn't work yet, though. Here is the code of our custom class:
        
        
        public class SnowballAnalyzerWithoutAccents extends SnowballAnalyzer {
        
                public SnowballAnalyzerWithoutAccents(String name, String[] stopWords) {
                        super(name, stopWords);
                }
        
                public TokenStream tokenStream(String fieldName, Reader reader) {
                        TokenStream result = super.tokenStream(fieldName, reader);
                        result = new ISOLatin1AccentFilter(result);
                        return result;
                }
        
        }
        
Basically we create an instance of this class and use it when we create
the IndexWriter and QueryParser objects.

Any tips/code examples? What should we do differently?

Many thanks in advance,
Andrew Green


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 20:47:15 2007
Return-Path: <java-user-return-27777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77443 invoked from network); 26 Apr 2007 20:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 20:47:14 -0000
Received: (qmail 54721 invoked by uid 500); 26 Apr 2007 20:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54355 invoked by uid 500); 26 Apr 2007 20:47:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54344 invoked by uid 99); 26 Apr 2007 20:47:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 13:47:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 13:47:05 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 26 Apr 2007 13:46:43 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Index Locking and NFS
Date: Thu, 26 Apr 2007 13:46:42 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E6262780123F205@WDCCPMAIL01.markettools.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index Locking and NFS
Thread-Index: AceIQ/7QI5rnV8trTLiWXcg1XY8cpg==
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Apr 2007 20:46:43.0426 (UTC) FILETIME=[FF823C20:01C78843]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I found the following recommendation in Lucene in Action from Eric and
Otis about where to put Lucene lock files:

"Because of known issues with lock files and NFS, choose a directory
that doesn't reside on an NFS volume."

Could someone please help me understand what those known issues exactly
are?

Thanks in advance,

Andreas





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 21:12:48 2007
Return-Path: <java-user-return-27778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86562 invoked from network); 26 Apr 2007 21:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 21:12:47 -0000
Received: (qmail 97843 invoked by uid 500); 26 Apr 2007 21:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97812 invoked by uid 500); 26 Apr 2007 21:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97801 invoked by uid 99); 26 Apr 2007 21:12:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 14:12:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 14:12:39 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 4983F2179E8
	for <java-user@lucene.apache.org>; Thu, 26 Apr 2007 17:12:19 -0400 (EDT)
Received: from web4.messagingengine.com ([10.202.2.213])
  by compute1.internal (MEProxy); Thu, 26 Apr 2007 17:12:19 -0400
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 14776161054; Thu, 26 Apr 2007 17:12:19 -0400 (EDT)
Message-Id: <1177621939.1431.1186784917@webmail.messagingengine.com>
X-Sasl-Enc: Rae77nH72YY1TQt24wC9mROgWE/tFchG1ZSGZimtftG0 1177621939
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <3FB08D6A21B3EC4D8749EF6D9E6262780123F205@WDCCPMAIL01.markettools.com>
Subject: Re: Index Locking and NFS
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E6262780123F205@WDCCPMAIL01.markettools.com>
Date: Thu, 26 Apr 2007 17:12:19 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Andreas Guther" <Andreas.Guther@markettools.com> wrote:

> I found the following recommendation in Lucene in Action from Eric and
> Otis about where to put Lucene lock files:
> 
> "Because of known issues with lock files and NFS, choose a directory
> that doesn't reside on an NFS volume."

It's complicated.  You can read about the known issues here:

  http://issues.apache.org/jira/browse/LUCENE-673

To summarize: NFS has issues with lock files, with "write/read cache
consistency" and with "delete on last close" semantics, all of which
Lucene relies on.

With Lucene 2.1 we have addressed the lock file and write/read cache
consistency limitations.

With the trunk version of Lucene (not yet released) we have addressed
the "delete on last close" limitation, however you need to implement
your own deletion policy (which is not hard).  Details are here:

  http://issues.apache.org/jira/browse/LUCENE-710

As far as I know, with the trunk version of Lucene, if you make your
own deletion policy then NFS works fine.

However, typically performance of searching/indexing over NFS will not
be as good as a local filesystem.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 26 21:36:01 2007
Return-Path: <java-user-return-27779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96991 invoked from network); 26 Apr 2007 21:35:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Apr 2007 21:35:59 -0000
Received: (qmail 28116 invoked by uid 500); 26 Apr 2007 21:36:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27859 invoked by uid 500); 26 Apr 2007 21:35:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27848 invoked by uid 99); 26 Apr 2007 21:35:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 14:35:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 14:35:51 -0700
Received: from [10.200.1.12] (72-18-225-226.static-ip.telepacific.net [72.18.225.226])
	by boom.affinityengines.com (Postfix) with ESMTP id 605A91DB145
	for <java-user@lucene.apache.org>; Thu, 26 Apr 2007 14:35:31 -0700 (PDT)
Message-ID: <46311B9E.6000500@affinitycircles.com>
Date: Thu, 26 Apr 2007 14:37:34 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Debian Thunderbird 1.0.2 (X11/20051002)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: filter caching
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have a question about filter caching.  I have a lot of QueryFilters 
that I use when searching that filter on a single field.  Sometimes 
alone I use them by themselves, but mostly I use them in some 
combination using ChainedFilter.  Does the caching take advantage of 
only the final filter that used in the query, or would a ChainedFilter 
(say 'A and B and C') make use of the cached versions of the single 
field QueryFilters A,B and C and just combine their bitsets? 

The reason I ask about this is for when I comes time to warm a new 
IndexReader.  Ideally I'd like to just run all of the single field 
QueryFilters against the index and have it cache those, and then be able 
to make use of those cached filters in my more complex filters.

This seems like a fairly basic concern, but I was unable to find 
anything addressed this concern explicitly.  (I could just have been 
searching for the wrong stuff).  Anyways, thanks.

Les

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 06:22:18 2007
Return-Path: <java-user-return-27780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23860 invoked from network); 27 Apr 2007 06:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 06:22:18 -0000
Received: (qmail 28192 invoked by uid 500); 27 Apr 2007 06:22:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27594 invoked by uid 500); 27 Apr 2007 06:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27582 invoked by uid 99); 27 Apr 2007 06:22:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 23:22:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.144.27.9] (HELO surfers.oz.agile.tv) (203.144.27.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2007 23:22:09 -0700
Received: from [192.168.16.9] (woodgate.oz.agile.tv [192.168.16.9])
	by surfers.oz.agile.tv (Postfix) with ESMTP id 618BDA6A15
	for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 16:21:36 +1000 (EST)
Message-ID: <4631966F.9000505@promptu.com>
Date: Fri, 27 Apr 2007 16:21:35 +1000
From: Kun Hong <khong@promptu.com>
User-Agent: Thunderbird 1.5 (X11/20060313)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Search for docs containing only a certain word in a specified field?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I wonder if there is a way to search for documents containing only
a certain word in a specified field.

For example, I would like to search for documents that contain only
"the" in title field. Some titles just contain a single stop word,
but I really need to find it. If the index is created without stop
words removed. I should be able to find documents containing "the"
in the title field. But, how about I just want that one document which
contains no other words than "the". Is it possible using Lucene query?
I know I can get all the results and filter it myself. But this way could
be too expensive, if the return results are enormous (Eg. if one million 
docs
containing "the").

TIA,

Kun



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 10:09:57 2007
Return-Path: <java-user-return-27781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93689 invoked from network); 27 Apr 2007 10:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 10:09:56 -0000
Received: (qmail 58244 invoked by uid 500); 27 Apr 2007 10:09:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58208 invoked by uid 500); 27 Apr 2007 10:09:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58194 invoked by uid 99); 27 Apr 2007 10:09:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 03:09:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 03:09:45 -0700
Received: by ug-out-1314.google.com with SMTP id k40so692617ugc
        for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 03:09:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=qMwWDIGuJevDW7kou4cK5ILn2TGZHcZcSlbI/AoyxEJM0fn38T/Hj6FCNNhUR92Xw87daI+gWK6hFWMkdP8oLgpelILTD9y52SIsq8qG3wlMLjbCFw3taIoR3auECoeLcUbTFYBCRv+Uzm0NbjceRWt5GvdXKjSMYkV9f1rZNiM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rb2glcADKm1DakHTciSjWc4N6CNafvAiLxNGKY8Bry3St7+kORRRykOACEUl5AtGfYUPudy3N9nGBUyl6/mzZaMz1Au7xncmz7QDvQSFe1Vw8D3S72uXSu9lNu5M+8Gw+ILLsXUewGktKVg6YLrLn+hVT1td9A+g2ykEVE9BXZY=
Received: by 10.66.255.7 with SMTP id c7mr2920880ugi.1177668564260;
        Fri, 27 Apr 2007 03:09:24 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id k30sm6763664ugc.2007.04.27.03.09.22;
        Fri, 27 Apr 2007 03:09:22 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4631966F.9000505@promptu.com>
References: <4631966F.9000505@promptu.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Search for docs containing only a certain word in a specified field?
Date: Fri, 27 Apr 2007 12:08:53 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


27 apr 2007 kl. 08.21 skrev Kun Hong:

> I just want that one document which
> contains no other words than "the". Is it possible using Lucene query?

Take a look at SpanFirstQuery. Perhaps you would need implement a  
SpanLastQuery too.

Perhaps the easiest way about it would be a RegexQuery that looks  
something like this: "^the$"


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 10:37:15 2007
Return-Path: <java-user-return-27782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2271 invoked from network); 27 Apr 2007 10:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 10:37:14 -0000
Received: (qmail 6884 invoked by uid 500); 27 Apr 2007 10:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6840 invoked by uid 500); 27 Apr 2007 10:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6825 invoked by uid 99); 27 Apr 2007 10:37:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 03:37:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 03:37:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4C0ED30EFC19; Fri, 27 Apr 2007 04:36:45 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-76-4-75-10.dhcp.embarqhsd.net [76.4.75.10])
	by ehatchersolutions.com (Postfix) with ESMTP id B336030EFC16
	for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 04:36:40 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com>
References: <4631966F.9000505@promptu.com> <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search for docs containing only a certain word in a specified field?
Date: Fri, 27 Apr 2007 06:36:37 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.5 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Apr 27, 2007, at 6:08 AM, karl wettin wrote:
> 27 apr 2007 kl. 08.21 skrev Kun Hong:
>
>> I just want that one document which
>> contains no other words than "the". Is it possible using Lucene  
>> query?
>
> Take a look at SpanFirstQuery. Perhaps you would need implement a  
> SpanLastQuery too.
>
> Perhaps the easiest way about it would be a RegexQuery that looks  
> something like this: "^the$"

The RegexQuery won't work in this case, as it is only matching on  
terms, not original field values.  So it'd still pick up other titles  
with "the" in them (provided stop words were not removed).

If you need exact matching on original value, the easiest way is to  
index that value without tokenization (perhaps lowercasing though).   
Unless someone has some other tricks I'm not aware of, that is.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 10:40:28 2007
Return-Path: <java-user-return-27783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2963 invoked from network); 27 Apr 2007 10:40:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 10:40:27 -0000
Received: (qmail 12694 invoked by uid 500); 27 Apr 2007 10:40:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12504 invoked by uid 500); 27 Apr 2007 10:40:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12493 invoked by uid 99); 27 Apr 2007 10:40:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 03:40:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 03:40:20 -0700
Received: by ug-out-1314.google.com with SMTP id k40so695835ugc
        for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 03:39:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ilcaOMAqnCv4M/PJ/870rLT8C/ZSiL03Icu339/PZA9+WtIuLf8y7L0RfbcliAB6IIx5WG+K71/6YIlIzGSXFST4suFNJsG7HIn7s//BpwiaFwXnz03zy+e+UoNieXpneS31QLAyRvxX6bxiHgyXhjP1bEB/OwOEBvpLpf1fvI4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=kSCmDM0AwlM8qGGXaOu4k6bFGh3quANGA722YwypuYDL8gkx9M+ALXW4DcUmO4gyCIxCyK3ao0MCDy6w8Qkc3VBVt0WoIyiUZdbt6b0z0cfYWwQRFS9o3xKO8bgXP2RCXsEDqusVUQ6ViFcmBkk1SaZ1S9yXHLSi5TwUlR0ldYw=
Received: by 10.66.216.20 with SMTP id o20mr2928047ugg.1177670398828;
        Fri, 27 Apr 2007 03:39:58 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id l40sm5221200ugc.2007.04.27.03.39.57;
        Fri, 27 Apr 2007 03:39:57 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com>
References: <4631966F.9000505@promptu.com> <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com> <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FE61B663-B12A-4778-91E4-7BAAA4B8A6AF@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Search for docs containing only a certain word in a specified field?
Date: Fri, 27 Apr 2007 12:39:28 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


27 apr 2007 kl. 12.36 skrev Erik Hatcher:

> Unless someone has some other tricks I'm not aware of, that is.

I guess it would be possible to add start/stop-tokens such as ^ and $  
to the indexed text: "^ the $" and place a phrase query with 0 slop.  
But that might screw up SpanFirstQuery et c?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 12:13:55 2007
Return-Path: <java-user-return-27784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33635 invoked from network); 27 Apr 2007 12:13:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 12:13:52 -0000
Received: (qmail 57431 invoked by uid 500); 27 Apr 2007 12:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57259 invoked by uid 500); 27 Apr 2007 12:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57108 invoked by uid 99); 27 Apr 2007 12:13:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 05:13:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 05:12:23 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C329B30EFC19; Fri, 27 Apr 2007 06:11:59 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.27.73.244] (unknown [128.143.230.7])
	by ehatchersolutions.com (Postfix) with ESMTP id 6CC8A30EFC16
	for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 06:11:56 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <FE61B663-B12A-4778-91E4-7BAAA4B8A6AF@gmail.com>
References: <4631966F.9000505@promptu.com> <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com> <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com> <FE61B663-B12A-4778-91E4-7BAAA4B8A6AF@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <419CAF49-F5EE-4482-B5AA-2ECD06573F7F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search for docs containing only a certain word in a specified field?
Date: Fri, 27 Apr 2007 08:11:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Apr 27, 2007, at 6:39 AM, karl wettin wrote:
> 27 apr 2007 kl. 12.36 skrev Erik Hatcher:
>
>> Unless someone has some other tricks I'm not aware of, that is.
>
> I guess it would be possible to add start/stop-tokens such as ^ and  
> $ to the indexed text: "^ the $" and place a phrase query with 0 slop.

True true.   That'd work too.

> But that might screw up SpanFirstQuery et c?

That's true also, but with your mentioned technique SpanFirstQuery  
wouldn't be needed.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 14:08:01 2007
Return-Path: <java-user-return-27785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2275 invoked from network); 27 Apr 2007 14:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 14:07:59 -0000
Received: (qmail 75669 invoked by uid 500); 27 Apr 2007 14:07:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75388 invoked by uid 500); 27 Apr 2007 14:07:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75377 invoked by uid 99); 27 Apr 2007 14:07:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 07:07:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.221 as permitted sender)
Received: from [65.54.246.221] (HELO bay0-omc3-s21.bay0.hotmail.com) (65.54.246.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 07:07:49 -0700
Received: from hotmail.com ([65.55.155.98]) by bay0-omc3-s21.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Fri, 27 Apr 2007 07:07:29 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 27 Apr 2007 07:07:28 -0700
Message-ID: <BAY144-F18EDB91CBEF73BDB31E0FDD44F0@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Fri, 27 Apr 2007 14:07:27 GMT
X-Originating-IP: [64.236.128.27]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: Index sync up
Date: Fri, 27 Apr 2007 14:07:27 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 27 Apr 2007 14:07:28.0976 (UTC) FILETIME=[63F4FD00:01C788D5]
X-Virus-Checked: Checked by ClamAV on apache.org

All,

After playing around with Lucene, we decided to replace old full-text search 
engine with Lucene. I got "Lucene in Action" a week ago and finished reading 
most of the book. I got several questions.

1) Since the book was written two years ago and Lucene has made a lot of 
changes, is there any plan for 2nd edition? (I guess this question is for 
Otis and Erik, btw, it is a great book.)

2) I have two processes for indexing. one runs every 5 minutes to add new 
contents into an existing index. Another one runs daily to rebuild entire 
index which also handles removing old contents. After rebuild process 
finishes indexing, we'd like to replace the index built by first process 
(every 5 minutes) with index built by second process. How do i do it safely 
and also avoid duplicating or missing documents (It is possible that first 
process is still adding documents to the index when we try to replace it 
with second one).
NOTE: both processes retrieve data from same database.

3) we are doing indexing on a master server and push index data to slave 
servers. In order to make new data visible to client, we have to close 
IndexSearcher and open it after new data is coped over. We use web based 
application (servlet) as search interface, creating a IndexSearcher as an 
instance variable for all clients. My question is what will happen to 
clients if I close IndexSearcher while clients are still doing search. How 
to safely update index when client are searching?

4) Lucene caches first 100 hits in memmory. We decided to use requery to 
return search results back to clients. For first 100 documents, i can 
iterator through "Hits". Do i have to use doc(n) to retrive documents for 
any documents > 100? Any performance issues?

Thanks in advance for help,
Tony

_________________________________________________________________
The average US Credit Score is 675. The cost to see yours: $0 by Experian. 
http://www.freecreditreport.com/pm/default.aspx?sc=660600&bcd=EMAILFOOTERAVERAGE


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 16:15:22 2007
Return-Path: <java-user-return-27786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70394 invoked from network); 27 Apr 2007 16:15:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 16:15:21 -0000
Received: (qmail 56926 invoked by uid 500); 27 Apr 2007 16:15:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56863 invoked by uid 500); 27 Apr 2007 16:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56851 invoked by uid 99); 27 Apr 2007 16:15:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 09:15:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.207.238] (HELO web32611.mail.mud.yahoo.com) (68.142.207.238)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 27 Apr 2007 09:15:11 -0700
Received: (qmail 80614 invoked by uid 60001); 27 Apr 2007 16:14:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=QSkVSM1QXOOliYvP1wseSj42UGMBPbQj2LWgA77L+0R77e8zLXyxcqToDypSL8oLQM5saqBOvURTf6A+Og7jgAhL3l0EmPRZnWjNKkmRexjxZgIMBiD4o8h/1qYuUvVMwP2yE54vEqnzpygQ1MjMsPhHvy2VmLMxgGlL9m8QROM=;
X-YMail-OSG: 7NvQ7GMVM1n6AOeaapU9jGSDvHboQaAsIEGJCkUIJF4Tp_dwi_uHjwgV95OW6u57L_MA33X2Df9gMF_AqJI36.RW47_6IEJwwieZVu5_NkwJzotoBFA-
Received: from [71.56.236.62] by web32611.mail.mud.yahoo.com via HTTP; Fri, 27 Apr 2007 09:14:50 PDT
Date: Fri, 27 Apr 2007 09:14:50 -0700 (PDT)
From: Phil Myers <jlpmyers@yahoo.com>
Subject: Re: Index sync up
To: java-user@lucene.apache.org
In-Reply-To: <BAY144-F18EDB91CBEF73BDB31E0FDD44F0@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <719679.76513.qm@web32611.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Regarding your first question (the easy one), there is
some information here:

http://www.gossamer-threads.com/lists/lucene/java-user/44312

 
--- Tony Qian <tonyqian@hotmail.com> wrote:

> All,
> 
> After playing around with Lucene, we decided to
> replace old full-text search 
> engine with Lucene. I got "Lucene in Action" a week
> ago and finished reading 
> most of the book. I got several questions.
> 
> 1) Since the book was written two years ago and
> Lucene has made a lot of 
> changes, is there any plan for 2nd edition? (I guess
> this question is for 
> Otis and Erik, btw, it is a great book.)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 16:29:56 2007
Return-Path: <java-user-return-27787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75363 invoked from network); 27 Apr 2007 16:29:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 16:29:55 -0000
Received: (qmail 92604 invoked by uid 500); 27 Apr 2007 16:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92578 invoked by uid 500); 27 Apr 2007 16:29:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92567 invoked by uid 99); 27 Apr 2007 16:29:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 09:29:53 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 09:29:46 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HhTK2-0001L5-8M
	for java-user@lucene.apache.org; Fri, 27 Apr 2007 09:29:26 -0700
Message-ID: <10221953.post@talk.nabble.com>
Date: Fri, 27 Apr 2007 09:29:26 -0700 (PDT)
From: larry hughes <typhoon_larry@hotmail.com>
To: java-user@lucene.apache.org
Subject: lucene indexes back up strategies
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: typhoon_larry@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I'm pondering on long term maintenance issues with Lucene indexes and would
like to know of anyone's suggestions or recommendations to backing up these
indexes.  My goal is to have a weekly, or even daily, snapshot of the
current index to make sure it is recoverable if the index gets corrupted.  I
won't be able to reindex since my database contains millions of records so
reindexing on-the-fly is not an option.  Also the index size is growing
fast--already at the 56GB mark--that I'm not even sure creating a snapshot
copy is fast enough.  Maybe clustering is better?

Hence if anyone has any recommendations regarding backup strategies for
lucene indexes, I would be grateful.  

Sincerely,

LH
-- 
View this message in context: http://www.nabble.com/lucene-indexes-back-up-strategies-tf3658495.html#a10221953
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 17:12:47 2007
Return-Path: <java-user-return-27788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92613 invoked from network); 27 Apr 2007 17:12:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 17:12:46 -0000
Received: (qmail 93204 invoked by uid 500); 27 Apr 2007 17:12:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93166 invoked by uid 500); 27 Apr 2007 17:12:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93152 invoked by uid 99); 27 Apr 2007 17:12:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 10:12:46 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 10:12:38 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1157543mue
        for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 10:12:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tnu03IAESuDr4eWKwvKtM+R62C++ec2vwfpV9QHpJujVGHhVhtz5+6h54Ba7zF26ZzoHlhFQQdJp5PqsIyMOdeHa5Oe5f3hW3rvdyw9cwyoaFPUlrHGBkMG8dfWNVrpHmv+3Aih4rGH8wSLJGSA32Al77Mb0wXZPMOqI4Z7zqGE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gTKzlDkVz7AaEE2ioHYVeaMmh/MAlx7nOGtBBeM/yGqwN5PpDvtdgYl385Lse13LMV1cim0U16FRw6l6v66kXOb1/O96ye+2LDHG8F5G5GrSiBqRUcun5hwsngqCH0KLoOuLOzMGkWTvDdmRsQSIwu03qOw+aYKhent3+DTVkKg=
Received: by 10.82.148.7 with SMTP id v7mr6139691bud.1177693936680;
        Fri, 27 Apr 2007 10:12:16 -0700 (PDT)
Received: by 10.82.190.11 with HTTP; Fri, 27 Apr 2007 10:12:16 -0700 (PDT)
Message-ID: <359a92830704271012l45f98a78t6238382c7746378e@mail.gmail.com>
Date: Fri, 27 Apr 2007 13:12:16 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index sync up
In-Reply-To: <BAY144-F18EDB91CBEF73BDB31E0FDD44F0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106357_10376058.1177693936617"
References: <BAY144-F18EDB91CBEF73BDB31E0FDD44F0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_106357_10376058.1177693936617
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<4> is also easy....

>From the javadoc:
"*Caution:* Iterate only over the hits needed. Iterating over all hits is
generally not desirable and may be the source of performance issues."

So an iterator should be fine for all documents, even those > 100. But do be
aware that the entire query gets re-executed each 100 docs or so, so yes,
there is a performance issue. You'll pay a price how big depends on a lot of
variables. But let's say the query takes 2 seconds to run. You'll spend two
seconds searching before returning document 0, two more seconds between
documents 100 and 101, two seconds between 200 and 201, etc. *even if you
just throw them away* if you use an iterator.

So, getting hits 10,000 through 10,100 will spend a LOT if time processing
queries. You're better off using a HitCollector, perhaps a TopDocs etc.

On the other hand, if your query takes 10 ms and you never really expect to
fetch more than, say, 500 documents, who cares? Do it as simply as possible.

But now that I'm thinking about it, it's unclear to me what happens if you
just ask for Hits.doc(401) as your first call to get any document from the
Hits object. I took a quick look at the Hits code and it *looks* like, for
fetching an arbitrary 100 documents, the maximum number of searches you'll
make is two. Again, it's a quick look, but it seems like the following

Hits hits = search();
Document doc = hits.doc(401);

will execute the search twice. First to get the first 100 docs, then to get
documents 400-800. At least I think that's what's happening. That said, I
think you'd still be ahead by implementing your own HitCollector if you
expect to fetch thousands of documents.... The "fetch twice as many
documents as the one we're asked for" algorithm seems tailored for
relatively small data sets, which shouldn't be any surprise......

Erick

On 4/27/07, Tony Qian <tonyqian@hotmail.com> wrote:
>
> All,
>
> After playing around with Lucene, we decided to replace old full-text
> search
> engine with Lucene. I got "Lucene in Action" a week ago and finished
> reading
> most of the book. I got several questions.
>
> 1) Since the book was written two years ago and Lucene has made a lot of
> changes, is there any plan for 2nd edition? (I guess this question is for
> Otis and Erik, btw, it is a great book.)
>
> 2) I have two processes for indexing. one runs every 5 minutes to add new
> contents into an existing index. Another one runs daily to rebuild entire
> index which also handles removing old contents. After rebuild process
> finishes indexing, we'd like to replace the index built by first process
> (every 5 minutes) with index built by second process. How do i do it
> safely
> and also avoid duplicating or missing documents (It is possible that first
> process is still adding documents to the index when we try to replace it
> with second one).
> NOTE: both processes retrieve data from same database.
>
> 3) we are doing indexing on a master server and push index data to slave
> servers. In order to make new data visible to client, we have to close
> IndexSearcher and open it after new data is coped over. We use web based
> application (servlet) as search interface, creating a IndexSearcher as an
> instance variable for all clients. My question is what will happen to
> clients if I close IndexSearcher while clients are still doing search. How
> to safely update index when client are searching?
>
> 4) Lucene caches first 100 hits in memmory. We decided to use requery to
> return search results back to clients. For first 100 documents, i can
> iterator through "Hits". Do i have to use doc(n) to retrive documents for
> any documents > 100? Any performance issues?
>
> Thanks in advance for help,
> Tony
>
> _________________________________________________________________
> The average US Credit Score is 675. The cost to see yours: $0 by Experian.
>
> http://www.freecreditreport.com/pm/default.aspx?sc=660600&bcd=EMAILFOOTERAVERAGE
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_106357_10376058.1177693936617--

From java-user-return-27789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 18:00:26 2007
Return-Path: <java-user-return-27789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6543 invoked from network); 27 Apr 2007 18:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 18:00:24 -0000
Received: (qmail 89921 invoked by uid 500); 27 Apr 2007 18:00:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89896 invoked by uid 500); 27 Apr 2007 18:00:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 67726 invoked by uid 99); 27 Apr 2007 17:48:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Message-Id: <1177696102.29486.1186947137@webmail.messagingengine.com>
X-Sasl-Enc: DdXzGjGIb9zpcIwuWpmYaPSTotFFPnGLdAdkVM4ohMsA 1177696102
From: "Michael McCandless" <mail@mikemccandless.com>
To: java-user@lucene.apache.org, java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <10221953.post@talk.nabble.com>
Subject: Re: lucene indexes back up strategies
In-Reply-To: <10221953.post@talk.nabble.com>
Date: Fri, 27 Apr 2007 13:48:22 -0400
X-Virus-Checked: Checked by ClamAV on apache.org



"larry hughes" <typhoon_larry@hotmail.com> wrote:

> I'm pondering on long term maintenance issues with Lucene indexes
> and would like to know of anyone's suggestions or recommendations to
> backing up these indexes.  My goal is to have a weekly, or even
> daily, snapshot of the current index to make sure it is recoverable
> if the index gets corrupted.  I won't be able to reindex since my
> database contains millions of records so reindexing on-the-fly is
> not an option.  Also the index size is growing fast--already at the
> 56GB mark--that I'm not even sure creating a snapshot copy is fast
> enough.  Maybe clustering is better?

One effective way to backup the index is to copy only the new files.
Since Lucene is write once (as of 2.1), you only need to back up any
new file names that have appeared since your last backup.  You can
also remove all now-deleted filenames if you are only interested in
the most recent snapshot.

Normally you must pause indexing to do this backup (since filenames
are changing and/or being deleted) but it's possible with the trunk
version of Lucene to make a simple index deletion policy that would
allow you to run a backup slowly in the background without pausing
indexing.

Basically this deletion policy would "keep alive" the one commit point
that was current when you started your backup, so even as the index is
changing, all segment files referenced by that commit point would not
be deleted; then your backup would copy the files referenced by that
commit point.  Once the backup completes then you would allow that
commit point to be deleted.

This would allow you to do "live" backups (backup while indexing is
still happening).

Mike
-- 
  Michael McCandless
  mail@mikemccandless.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 18:36:46 2007
Return-Path: <java-user-return-27790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17895 invoked from network); 27 Apr 2007 18:36:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 18:36:44 -0000
Received: (qmail 67306 invoked by uid 500); 27 Apr 2007 18:36:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67275 invoked by uid 500); 27 Apr 2007 18:36:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67260 invoked by uid 99); 27 Apr 2007 18:36:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 11:36:44 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 11:36:37 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HhVIm-000589-Ry
	for java-user@lucene.apache.org; Fri, 27 Apr 2007 11:36:16 -0700
Message-ID: <10224326.post@talk.nabble.com>
Date: Fri, 27 Apr 2007 11:36:16 -0700 (PDT)
From: larry hughes <typhoon_larry@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene indexes back up strategies
In-Reply-To: <1177696102.29486.1186947137@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: typhoon_larry@hotmail.com
References: <10221953.post@talk.nabble.com> <1177696102.29486.1186947137@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mike,

Wow, I did not know Lucene 2.1 can do all of this.  The problem is that I'm
currently using 2.0.  Is there something similar to what you just mentioned
in dealing with 2.0 indexes--backing up piecewise?  Thanks again.

LH


Michael McCandless-3 wrote:
> 
> 
> 
> "larry hughes" <typhoon_larry@hotmail.com> wrote:
> 
>> I'm pondering on long term maintenance issues with Lucene indexes
>> and would like to know of anyone's suggestions or recommendations to
>> backing up these indexes.  My goal is to have a weekly, or even
>> daily, snapshot of the current index to make sure it is recoverable
>> if the index gets corrupted.  I won't be able to reindex since my
>> database contains millions of records so reindexing on-the-fly is
>> not an option.  Also the index size is growing fast--already at the
>> 56GB mark--that I'm not even sure creating a snapshot copy is fast
>> enough.  Maybe clustering is better?
> 
> One effective way to backup the index is to copy only the new files.
> Since Lucene is write once (as of 2.1), you only need to back up any
> new file names that have appeared since your last backup.  You can
> also remove all now-deleted filenames if you are only interested in
> the most recent snapshot.
> 
> Normally you must pause indexing to do this backup (since filenames
> are changing and/or being deleted) but it's possible with the trunk
> version of Lucene to make a simple index deletion policy that would
> allow you to run a backup slowly in the background without pausing
> indexing.
> 
> Basically this deletion policy would "keep alive" the one commit point
> that was current when you started your backup, so even as the index is
> changing, all segment files referenced by that commit point would not
> be deleted; then your backup would copy the files referenced by that
> commit point.  Once the backup completes then you would allow that
> commit point to be deleted.
> 
> This would allow you to do "live" backups (backup while indexing is
> still happening).
> 
> Mike
> -- 
>   Michael McCandless
>   mail@mikemccandless.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/lucene-indexes-back-up-strategies-tf3658495.html#a10224326
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 19:09:43 2007
Return-Path: <java-user-return-27791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26343 invoked from network); 27 Apr 2007 19:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 19:09:41 -0000
Received: (qmail 42709 invoked by uid 500); 27 Apr 2007 19:09:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42405 invoked by uid 500); 27 Apr 2007 19:09:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42394 invoked by uid 99); 27 Apr 2007 19:09:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 12:09:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 12:09:34 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HhVog-00058T-0c
	for java-user@lucene.apache.org; Fri, 27 Apr 2007 12:09:14 -0700
Message-ID: <10224767.post@talk.nabble.com>
Date: Fri, 27 Apr 2007 12:09:13 -0700 (PDT)
From: Theodan <dan@theodan.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting with custom SortComparator
In-Reply-To: <10191597.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dan@theodan.com
References: <10191597.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Never mind.  The sorting was working correctly.  I was just misinterpretting
the results I was seeing.

-Theo



Theodan wrote:
> 
> Hello.
> 
> I am trying to sort my query results on a String field called "AssetType"
> and then on the relevancy score, but I need a particular ordering of the
> possible values in "AssetType" (i.e. first "Video", then "Article", etc.).
> 
> I have tried doing this with a custom SortComparator that returns Integers
> from getComparable(), as follows:
> 
> ===========================
> 
> public class LuceneIndexSearchCommand extends AbstractSearchCommand {
> 	
> 	protected boolean execute(SearchContext context) throws Exception {
> 		
> 		...
> 		
> 		Hits hits = new Hits();
> 		
> 		...
> 
> 		BooleanQuery keywordQuery = new BooleanQuery();
> 
> 		...
> 
> 		Query query = queryParser.parse(finalQuery);
> 
> 		ConstantScoreRangeQuery constantScoreRangeQuery = new
> ConstantScoreRangeQuery("assettype", null, null, true, true);
> 
> 		BooleanQuery booleanQuery = new BooleanQuery();
> 		booleanQuery.add(query, Occur.MUST);
> 		booleanQuery.add(constantScoreRangeQuery, Occur.MUST);
> 
> 		SortField[] sortFields = new SortField[] {
> 				new SortField("assettype", new AssetTypeSortComparator()),
> 				SortField.FIELD_SCORE
> 		};
> 		hits.recordHits(searcher.search(booleanQuery, new Sort(sortFields)));
> 		
> 		...
>         
> 	}
> 
> 	private static class AssetTypeSortComparator extends SortComparator {
> 		
> 		private static final Map ASSET_TYPE_ORDER_MAP = new HashMap();
> 		private static final Integer DEFAULT_ORDER = new Integer(3);
> 		
> 		static {
> 			ASSET_TYPE_ORDER_MAP.put("Interactive".toLowerCase(), new Integer(0));
> 			ASSET_TYPE_ORDER_MAP.put("Video".toLowerCase(), new Integer(0));
> 			ASSET_TYPE_ORDER_MAP.put("EncyclopediaArticles".toLowerCase(), new
> Integer(1));
> 			ASSET_TYPE_ORDER_MAP.put("Image".toLowerCase(), new Integer(2));
> 		}
> 		
> 		protected Comparable getComparable(String termtext) {
> 			if (ASSET_TYPE_ORDER_MAP.containsKey(termtext.toLowerCase())) {
> 				return (Integer)ASSET_TYPE_ORDER_MAP.get(termtext.toLowerCase());
> 			}
> 			else {
> 				return DEFAULT_ORDER;
> 			}
>     	}
> 		
>     };
>     
> }
> 
> ===========================
> 
> but my Hits don't come back sorted.  They seem to be in the same unsorted
> order as before I started trying to use the custom SortComparator.
> 
> I have debugged through SortComparator and FieldCacheImpl, and the
> "cachedValues" array does seem to correctly contain Integer items
> corresponding to most of my 80,000+ docs.  The rest of the items in the
> array are null, corresponding to those docs that are missing a value for
> the "AssetType" field.
> 
> Also, FYI, I am using ConstantScoreRangeQuery because the "AssetType"
> field is sometimes missing from certain of the docs, and if I don't use
> ConstantScoreRangeQuery then I get NullPointerException on
> SortComparator.java:37, as has been discussed before on this mailing list.
> 
> Any help would be greatly appreciated.
> 
> -Theo
> 
-- 
View this message in context: http://www.nabble.com/Sorting-with-custom-SortComparator-tf3648692.html#a10224767
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 21:43:10 2007
Return-Path: <java-user-return-27792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84228 invoked from network); 27 Apr 2007 21:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 21:42:50 -0000
Received: (qmail 45242 invoked by uid 500); 27 Apr 2007 21:42:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45211 invoked by uid 500); 27 Apr 2007 21:42:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 87365 invoked by uid 99); 27 Apr 2007 20:14:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Message-Id: <1177704830.15229.1186969723@webmail.messagingengine.com>
X-Sasl-Enc: De/vET/ojU2A2H8fe7/msi9jIPgMGZQCeaeBMGldeH6Y 1177704830
From: "Michael McCandless" <mail@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <10221953.post@talk.nabble.com>
   <1177696102.29486.1186947137@webmail.messagingengine.com>
   <10224326.post@talk.nabble.com>
Subject: Re: lucene indexes back up strategies
In-Reply-To: <10224326.post@talk.nabble.com>
Date: Fri, 27 Apr 2007 16:13:50 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"larry hughes" <typhoon_larry@hotmail.com> wrote:

> Wow, I did not know Lucene 2.1 can do all of this.  The problem is that I'm
> currently using 2.0.  Is there something similar to what you just mentioned
> in dealing with 2.0 indexes--backing up piecewise?  Thanks again.

Hmm, OK.  Pre-2.1 Lucene will overwrite at least the file "segments",
*.del (per segment deletions) and *.sN (only if you set norms, which
is a rather advanced function).  So probably best to use something
like "rsync" which I believe looks @ timestamp and file size to
determine that a file has changed, and then copies it over.

Also make sure all writers are closed before running the backup and no
writer opens until the backup completes (ie they are exclusive).

Mike
-- 
  Michael McCandless
  mail@mikemccandless.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 23:03:53 2007
Return-Path: <java-user-return-27793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1509 invoked from network); 27 Apr 2007 23:03:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 23:03:52 -0000
Received: (qmail 37309 invoked by uid 500); 27 Apr 2007 23:03:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37282 invoked by uid 500); 27 Apr 2007 23:03:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37271 invoked by uid 99); 27 Apr 2007 23:03:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 16:03:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pbm-rico@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 27 Apr 2007 16:03:45 -0700
Received: (qmail 5165 invoked by uid 0); 27 Apr 2007 23:03:23 -0000
Received: from 15.243.169.71 by www029.gmx.net with HTTP;
 Sat, 28 Apr 2007 01:03:23 +0200 (CEST)
Content-Type: text/plain; charset="us-ascii"
Date: Sat, 28 Apr 2007 01:03:23 +0200
From: pbm-rico@gmx.net
Message-ID: <20070427230323.39600@gmx.net>
MIME-Version: 1.0
Subject: How to index a lot of fields (without FileNotFoundException: Too many
 open files)
To: java-user@lucene.apache.org
X-Authenticated: #24539349
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX19vmTZYltpv+XiUT1ahohQ1nCMdI7hAWyklag7Jw7
 /RIuCYeE9wf7+yGwaimFmySn5M4aH4FGJpkg== 
Content-Transfer-Encoding: 7bit
X-GMX-UID: ArkEDzBIQEV/JuJGH3Rp2+FCNzg2NQKA
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

What would be the best strategy to support an index with thousands or even hundreds of thousands of individual field names?

I have client applications that create a lot of key/value type data. I use the key as document field name so I end up with _a lot_ of .f<m> files and
eventually the my application breaks with: FileNotFoundException: Too many open files.

I searched this list and it seems like others had this problem before, but I could not find a solution.

>From what I read in the Lucene docs, these .f<m> files store the normalization factor for the corresponding field. What exactly is this used for and more importantly, can this be disabled so that the files are not created in the first place?

Any advice is appreciated.

Thanks,
Rico.


-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 23:30:39 2007
Return-Path: <java-user-return-27794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8524 invoked from network); 27 Apr 2007 23:30:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 23:30:35 -0000
Received: (qmail 75071 invoked by uid 500); 27 Apr 2007 23:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75011 invoked by uid 500); 27 Apr 2007 23:30:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74970 invoked by uid 99); 27 Apr 2007 23:30:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 16:30:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 16:30:16 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 95E825B784; Fri, 27 Apr 2007 16:29:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8E36C7F403
	for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 16:29:56 -0700 (PDT)
Date: Fri, 27 Apr 2007 16:29:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Customizing scoring
In-Reply-To: <462F484F.9020909@xeridia.com>
Message-ID: <Pine.LNX.4.58.0704271627340.32376@hal.rescomp.berkeley.edu>
References: <462F484F.9020909@xeridia.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: If a BooleanQuery is created as the addition of two TermQuery
	...
: The score for this BooleanQuery is double (around 6) when the compared
: document has the field ?pets? with these two values, but we want that
: the score is only 3, although there is more than one coincidence.
	...
: Is there some way to do this?

Yes, you'll want to take a look at the documentation on scoring and
Similarity...

http://lucene.apache.org/java/docs/scoring.html
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/package-summary.html#changingSimilarity



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 27 23:59:48 2007
Return-Path: <java-user-return-27795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15721 invoked from network); 27 Apr 2007 23:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Apr 2007 23:59:47 -0000
Received: (qmail 9528 invoked by uid 500); 27 Apr 2007 23:59:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9495 invoked by uid 500); 27 Apr 2007 23:59:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9481 invoked by uid 99); 27 Apr 2007 23:59:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 16:59:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 16:59:40 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1C9015B784; Fri, 27 Apr 2007 16:59:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 127337F403
	for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 16:59:20 -0700 (PDT)
Date: Fri, 27 Apr 2007 16:59:19 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Snowball and accents filter...?
In-Reply-To: <1177616788.4622.14.camel@localhost>
Message-ID: <Pine.LNX.4.58.0704271654570.32376@hal.rescomp.berkeley.edu>
References: <1177616788.4622.14.camel@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: In order to do this, we tried subclassing the SnowballAnalyzer... it
: doesn't work yet, though. Here is the code of our custom class:

At first glance, what youv'e got seems fine, can you elaborate on what you
mean by "it doesn't work" ?

Perhaps the issue is that the SnowballStemmer can't handle the accented
characters, and you should strip them first, then stem?

  public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream result = new StandardTokenizer(reader);
    result = new StandardFilter(result);
    result = new LowerCaseFilter(result);
    if (stopSet != null)
      result = new StopFilter(result, stopSet);
    result = new ISOLatin1AccentFilter(result);
    result = new SnowballFilter(result, name);
    return result;
  }





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 00:03:54 2007
Return-Path: <java-user-return-27796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17003 invoked from network); 28 Apr 2007 00:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 00:03:53 -0000
Received: (qmail 16414 invoked by uid 500); 28 Apr 2007 00:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16339 invoked by uid 500); 28 Apr 2007 00:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16328 invoked by uid 99); 28 Apr 2007 00:03:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 17:03:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 17:03:45 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 628DE5B784; Fri, 27 Apr 2007 17:03:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5C28F7F403
	for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 17:03:25 -0700 (PDT)
Date: Fri, 27 Apr 2007 17:03:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: filter caching
In-Reply-To: <46311B9E.6000500@affinitycircles.com>
Message-ID: <Pine.LNX.4.58.0704271700070.32376@hal.rescomp.berkeley.edu>
References: <46311B9E.6000500@affinitycircles.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: I have a question about filter caching.  I have a lot of QueryFilters
: that I use when searching that filter on a single field.  Sometimes
: alone I use them by themselves, but mostly I use them in some
: combination using ChainedFilter.  Does the caching take advantage of
: only the final filter that used in the query, or would a ChainedFilter
: (say 'A and B and C') make use of the cached versions of the single
: field QueryFilters A,B and C and just combine their bitsets?

the individual QueryFilter's cache themselves, if you want a ChainedFilter
composed of those QueryFilter's to be cached you should wrap it in a
CachingWrapperFilter.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 00:27:20 2007
Return-Path: <java-user-return-27797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20015 invoked from network); 28 Apr 2007 00:27:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 00:27:19 -0000
Received: (qmail 37673 invoked by uid 500); 28 Apr 2007 00:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37643 invoked by uid 500); 28 Apr 2007 00:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37632 invoked by uid 99); 28 Apr 2007 00:21:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 17:21:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 17:21:15 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F29485B77D; Fri, 27 Apr 2007 17:20:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EED787F403
	for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 17:20:54 -0700 (PDT)
Date: Fri, 27 Apr 2007 17:20:54 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: lucene indexes back up strategies
In-Reply-To: <1177704830.15229.1186969723@webmail.messagingengine.com>
Message-ID: <Pine.LNX.4.58.0704271717460.32376@hal.rescomp.berkeley.edu>
References: <10221953.post@talk.nabble.com>   <1177696102.29486.1186947137@webmail.messagingengine.com>
   <10224326.post@talk.nabble.com> <1177704830.15229.1186969723@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: > Wow, I did not know Lucene 2.1 can do all of this.  The problem is that I'm
: > currently using 2.0.  Is there something similar to what you just mentioned
: > in dealing with 2.0 indexes--backing up piecewise?  Thanks again.
:
: Hmm, OK.  Pre-2.1 Lucene will overwrite at least the file "segments",
: *.del (per segment deletions) and *.sN (only if you set norms, which
: is a rather advanced function).  So probably best to use something
: like "rsync" which I believe looks @ timestamp and file size to
: determine that a file has changed, and then copies it over.

you should take a look at the snapshooter and backup scripts that come
with Solr, the concepts can be applied to any lucene index not just Solr,
but they rely on your filesystem supportin hardlinks...

	http://svn.apache.org/viewvc/lucene/solr/trunk/src/scripts/
	http://wiki.apache.org/solr/CollectionDistribution


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 00:27:58 2007
Return-Path: <java-user-return-27798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20374 invoked from network); 28 Apr 2007 00:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 00:27:57 -0000
Received: (qmail 39992 invoked by uid 500); 28 Apr 2007 00:25:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39963 invoked by uid 500); 28 Apr 2007 00:25:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39952 invoked by uid 99); 28 Apr 2007 00:25:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 17:25:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 17:25:29 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EE3EE5B77D; Fri, 27 Apr 2007 17:25:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E80DA7F403
	for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 17:25:08 -0700 (PDT)
Date: Fri, 27 Apr 2007 17:25:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to index a lot of fields (without FileNotFoundException:
 Too many open files)
In-Reply-To: <20070427230323.39600@gmx.net>
Message-ID: <Pine.LNX.4.58.0704271721400.32376@hal.rescomp.berkeley.edu>
References: <20070427230323.39600@gmx.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: >From what I read in the Lucene docs, these .f<m> files store the
: normalization factor for the corresponding field. What exactly is this
: used for and more importantly, can this be disabled so that the files
: are not created in the first place?

field norms are primarily used for length normalization, but they also
store field and document boosts ... more info can be found in the scoring
and Similarity docs.

if you don't care about these things, there is an omitNorms option on the
Field class that can be used to not only reduce the number of open
files you need, but also make your index smaller on disk, and reduce your
memory usage.  (i believe it was added in 1.9)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 01:41:36 2007
Return-Path: <java-user-return-27799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42362 invoked from network); 28 Apr 2007 01:41:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 01:41:35 -0000
Received: (qmail 92446 invoked by uid 500); 28 Apr 2007 01:41:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92415 invoked by uid 500); 28 Apr 2007 01:41:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92404 invoked by uid 99); 28 Apr 2007 01:41:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 18:41:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 18:41:26 -0700
Received: by ug-out-1314.google.com with SMTP id k40so813913ugc
        for <java-user@lucene.apache.org>; Fri, 27 Apr 2007 18:41:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=G09Ryn++MVnE7D8bkES04+APPVd+4952MFPOsEgw5NQ239tlrwRklQqFKRRL4XiHi62dpHDBOLVHQuWY2AKfug6xjhgyNxiiaYxopVxhpEphkCiEKs1TppQZ8P4zWXKv8iADFbhU93tKwPgt15ryMjCODrPQqErgxQjoXqgc4wI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=aV94G8W98ccZ7nfohkVq51r/iabpTLcP9BtDG7Jn0E7AhZBY5BetGefrYfnwWMVL1x2EP0yIzqPJDjtTn/GgbmL4LrBk8ODSUvxXgNwNx4VxgghycQFSXmbd0EljSU79zaJet2Dg+W9MSEg4Bj86odpZpO9jxF3MSWRrhBevObk=
Received: by 10.66.218.15 with SMTP id q15mr3423652ugg.1177724464850;
        Fri, 27 Apr 2007 18:41:04 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id j3sm6208738ugd.2007.04.27.18.41.03;
        Fri, 27 Apr 2007 18:41:03 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <419CAF49-F5EE-4482-B5AA-2ECD06573F7F@ehatchersolutions.com>
References: <4631966F.9000505@promptu.com> <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com> <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com> <FE61B663-B12A-4778-91E4-7BAAA4B8A6AF@gmail.com> <419CAF49-F5EE-4482-B5AA-2ECD06573F7F@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AE8B55AA-D085-460E-ACD6-69A0A230092F@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Search for docs containing only a certain word in a specified field?
Date: Sat, 28 Apr 2007 03:40:33 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


27 apr 2007 kl. 14.11 skrev Erik Hatcher:

>
> On Apr 27, 2007, at 6:39 AM, karl wettin wrote:
>> 27 apr 2007 kl. 12.36 skrev Erik Hatcher:
>>
>>> Unless someone has some other tricks I'm not aware of, that is.
>>
>> I guess it would be possible to add start/stop-tokens such as ^  
>> and $ to the indexed text: "^ the $" and place a phrase query with  
>> 0 slop.
>
> True true.   That'd work too.

I was thinking about this today. And I'm still thinking, don't take  
this too serious. I just want to see if I can implement this a less  
hacky way.

Number of terms in the field is what is missing in order to implement  
a Query the "correct way", right? Clone the norms-code.  
SpanCompleteFieldQuery would extend SpanNearQuery, have slop 0 and  
require [tokens in field] clauses. To me this is more compelling than  
the ^$ hack. However, if there are no other features one can think of  
this information will yeild, the hack might just turn out to be better.

I can't think of anything I'd call a feature:

Norms could be calculated in a higher resolution instead of beeing  
stored as a float. What is most expensive, to convert the byte to  
float or divide a bunch at query time?

Rebuilding term vectors using skipTo() might save some by not seeking  
more than nessecary.

Match only terms in fields that are between n and m tokens long.  
However, this might be better of discretized in a few bins, or  
perhaps even possible to estimated based on the (existing  
implementation) norm value?


What else is there?


-- 

karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 02:50:59 2007
Return-Path: <java-user-return-27800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54789 invoked from network); 28 Apr 2007 02:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 02:50:58 -0000
Received: (qmail 46565 invoked by uid 500); 28 Apr 2007 02:50:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46536 invoked by uid 500); 28 Apr 2007 02:50:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46521 invoked by uid 99); 28 Apr 2007 02:50:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 19:50:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.83 as permitted sender)
Received: from [65.54.246.83] (HELO bay0-omc1-s11.bay0.hotmail.com) (65.54.246.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 19:50:50 -0700
Received: from hotmail.com ([65.55.155.86]) by bay0-omc1-s11.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Fri, 27 Apr 2007 19:50:29 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 27 Apr 2007 19:50:29 -0700
Message-ID: <BAY144-F67A7115544E8B7DB85183D44E0@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Sat, 28 Apr 2007 02:50:25 GMT
X-Originating-IP: [24.33.231.142]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
In-Reply-To: <359a92830704271012l45f98a78t6238382c7746378e@mail.gmail.com>
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index sync up
Date: Sat, 28 Apr 2007 02:50:25 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 28 Apr 2007 02:50:29.0917 (UTC) FILETIME=[FB8634D0:01C7893F]
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,

Thanks for your explaination. I thought using HitCollector. The search 
interface we are facing now actually is pretty simple. One of the search 
requires maximum of search results of 500 and page size is 500 (basically 
return first 500). Second one requires max of 250 and page size is 25. At 
this time, we are ok even we have to hit query several times.

I see one problem with HitCollector, which is HitCollector caches a huge 
data if the document is very large. One best of implementation (I think) is 
client passes in a page number and page size in search method, Lucene 
returns documents on that page instead of always returns first 100 
documents.

I haven't  looked at Lucene code yet and don't know how hard to implement 
that.

Tony


>From: "Erick Erickson" <erickerickson@gmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Index sync up
>Date: Fri, 27 Apr 2007 13:12:16 -0400
>
><4> is also easy....
>
>>From the javadoc:
>"*Caution:* Iterate only over the hits needed. Iterating over all hits is
>generally not desirable and may be the source of performance issues."
>
>So an iterator should be fine for all documents, even those > 100. But do 
>be
>aware that the entire query gets re-executed each 100 docs or so, so yes,
>there is a performance issue. You'll pay a price how big depends on a lot 
>of
>variables. But let's say the query takes 2 seconds to run. You'll spend two
>seconds searching before returning document 0, two more seconds between
>documents 100 and 101, two seconds between 200 and 201, etc. *even if you
>just throw them away* if you use an iterator.
>
>So, getting hits 10,000 through 10,100 will spend a LOT if time processing
>queries. You're better off using a HitCollector, perhaps a TopDocs etc.
>
>On the other hand, if your query takes 10 ms and you never really expect to
>fetch more than, say, 500 documents, who cares? Do it as simply as 
>possible.
>
>But now that I'm thinking about it, it's unclear to me what happens if you
>just ask for Hits.doc(401) as your first call to get any document from the
>Hits object. I took a quick look at the Hits code and it *looks* like, for
>fetching an arbitrary 100 documents, the maximum number of searches you'll
>make is two. Again, it's a quick look, but it seems like the following
>
>Hits hits = search();
>Document doc = hits.doc(401);
>
>will execute the search twice. First to get the first 100 docs, then to get
>documents 400-800. At least I think that's what's happening. That said, I
>think you'd still be ahead by implementing your own HitCollector if you
>expect to fetch thousands of documents.... The "fetch twice as many
>documents as the one we're asked for" algorithm seems tailored for
>relatively small data sets, which shouldn't be any surprise......
>
>Erick
>
>On 4/27/07, Tony Qian <tonyqian@hotmail.com> wrote:
>>
>>All,
>>
>>After playing around with Lucene, we decided to replace old full-text
>>search
>>engine with Lucene. I got "Lucene in Action" a week ago and finished
>>reading
>>most of the book. I got several questions.
>>
>>1) Since the book was written two years ago and Lucene has made a lot of
>>changes, is there any plan for 2nd edition? (I guess this question is for
>>Otis and Erik, btw, it is a great book.)
>>
>>2) I have two processes for indexing. one runs every 5 minutes to add new
>>contents into an existing index. Another one runs daily to rebuild entire
>>index which also handles removing old contents. After rebuild process
>>finishes indexing, we'd like to replace the index built by first process
>>(every 5 minutes) with index built by second process. How do i do it
>>safely
>>and also avoid duplicating or missing documents (It is possible that first
>>process is still adding documents to the index when we try to replace it
>>with second one).
>>NOTE: both processes retrieve data from same database.
>>
>>3) we are doing indexing on a master server and push index data to slave
>>servers. In order to make new data visible to client, we have to close
>>IndexSearcher and open it after new data is coped over. We use web based
>>application (servlet) as search interface, creating a IndexSearcher as an
>>instance variable for all clients. My question is what will happen to
>>clients if I close IndexSearcher while clients are still doing search. How
>>to safely update index when client are searching?
>>
>>4) Lucene caches first 100 hits in memmory. We decided to use requery to
>>return search results back to clients. For first 100 documents, i can
>>iterator through "Hits". Do i have to use doc(n) to retrive documents for
>>any documents > 100? Any performance issues?
>>
>>Thanks in advance for help,
>>Tony
>>
>>_________________________________________________________________
>>The average US Credit Score is 675. The cost to see yours: $0 by Experian.
>>
>>http://www.freecreditreport.com/pm/default.aspx?sc=660600&bcd=EMAILFOOTERAVERAGE
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

_________________________________________________________________
Dont quit your job  Take Classes Online and Earn your Degree in 1 year. 
Start Today! 
http://www.classesusa.com/clickcount.cfm?id=866146&goto=http%3A%2F%2Fwww.classesusa.com%2Ffeaturedschools%2Fonlinedegreesmp%2Fform-dyn1.html%3Fsplovr%3D866144


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 05:02:46 2007
Return-Path: <java-user-return-27801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78167 invoked from network); 28 Apr 2007 05:02:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 05:02:45 -0000
Received: (qmail 34925 invoked by uid 500); 28 Apr 2007 05:02:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34887 invoked by uid 500); 28 Apr 2007 05:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34876 invoked by uid 99); 28 Apr 2007 05:02:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 22:02:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 22:02:38 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l3S52GoT221738
	for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 05:02:16 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l3S52GaT3846226
	for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 07:02:16 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l3S52GtZ010600
	for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 07:02:16 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l3S52Fi2010596
	for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 07:02:15 +0200
In-Reply-To: <Pine.LNX.4.58.0704271721400.32376@hal.rescomp.berkeley.edu>
Subject: Re: How to index a lot of fields (without FileNotFoundException: Too many
 open files)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFB358EF53.C927AD61-ON882572CB.001AD286-882572CB.001B7E24@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 27 Apr 2007 22:00:17 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 28/04/2007 08:02:15
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Just in case norms info cannot be spared, note that since Lucene 2.1 norms
are maintained in a single file, no matter how many fields there are.

However due to a bug in 2.1 this did not prevent the too many open files
problem. This bug was already fixed but not yet released. For more details
on this fix see LUCENE-821.

Doron

Chris Hostetter <hossman_lucene@fucit.org> wrote on 27/04/2007 17:25:08:

>
> : >From what I read in the Lucene docs, these .f<m> files store the
> : normalization factor for the corresponding field. What exactly is this
> : used for and more importantly, can this be disabled so that the files
> : are not created in the first place?
>
> field norms are primarily used for length normalization, but they also
> store field and document boosts ... more info can be found in the scoring
> and Similarity docs.
>
> if you don't care about these things, there is an omitNorms option on the
> Field class that can be used to not only reduce the number of open
> files you need, but also make your index smaller on disk, and reduce your
> memory usage.  (i believe it was added in 1.9)
>
> -Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 05:53:17 2007
Return-Path: <java-user-return-27802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82824 invoked from network); 28 Apr 2007 05:53:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 05:53:17 -0000
Received: (qmail 68416 invoked by uid 500); 28 Apr 2007 05:53:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68387 invoked by uid 500); 28 Apr 2007 05:53:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68372 invoked by uid 99); 28 Apr 2007 05:53:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 22:53:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.144.27.9] (HELO surfers.oz.agile.tv) (203.144.27.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2007 22:53:09 -0700
Received: from panda.local (surfers.oz.agile.tv [192.168.16.1])
	by surfers.oz.agile.tv (Postfix) with ESMTP id E0FF2A6A15
	for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 15:52:38 +1000 (EST)
Message-ID: <4632E125.2010406@promptu.com>
Date: Sat, 28 Apr 2007 15:52:37 +1000
From: Kun Hong <khong@promptu.com>
User-Agent: Thunderbird 2.0.0.0 (Macintosh/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search for docs containing only a certain word in a specified
 field?
References: <4631966F.9000505@promptu.com> <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com> <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com> <FE61B663-B12A-4778-91E4-7BAAA4B8A6AF@gmail.com> <419CAF49-F5EE-4482-B5AA-2ECD06573F7F@ehatchersolutions.com> <AE8B55AA-D085-460E-ACD6-69A0A230092F@gmail.com>
In-Reply-To: <AE8B55AA-D085-460E-ACD6-69A0A230092F@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin wrote:
>
> 27 apr 2007 kl. 14.11 skrev Erik Hatcher:
>
>>
>> On Apr 27, 2007, at 6:39 AM, karl wettin wrote:
>>> 27 apr 2007 kl. 12.36 skrev Erik Hatcher:
>>>
>>>> Unless someone has some other tricks I'm not aware of, that is.
>>>
>>> I guess it would be possible to add start/stop-tokens such as ^ and 
>>> $ to the indexed text: "^ the $" and place a phrase query with 0 slop.
>>
>> True true.   That'd work too.

Thanks for the replies and discussion.

I think I didn't express my problems correctly.  The problem is I want to
find documents containing only the "the" token in the title field, but not
necessarily with only one appearance.  For example, if the query is "the",
I want to find documents whose title is "the", "the the" or "the the the".

I am not sure whether the start/stop-tokens and indexing the whole field 
as keyword
will help, it seems not.  Sorry if I misled you. But from what is 
discussed, it seems
there is no easy way.  I think this is just a corner case for myself 
now, since
nobody seems to find this a problem. But if you still have interest in 
solving
this problem, I will be very glad. :)





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 12:13:47 2007
Return-Path: <java-user-return-27803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92294 invoked from network); 28 Apr 2007 12:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 12:13:46 -0000
Received: (qmail 32493 invoked by uid 500); 28 Apr 2007 12:13:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32450 invoked by uid 500); 28 Apr 2007 12:13:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32439 invoked by uid 99); 28 Apr 2007 12:13:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 05:13:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.206.237] (HELO smtp104.plus.mail.mud.yahoo.com) (68.142.206.237)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Apr 2007 05:13:38 -0700
Received: (qmail 95108 invoked from network); 28 Apr 2007 12:13:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.mx;
  h=Received:X-YMail-OSG:Subject:From:To:In-Reply-To:References:Content-Type:Date:Message-Id:Mime-Version:X-Mailer:Content-Transfer-Encoding;
  b=T5OrY6nCWOkMX3xgea2u37a9knpTtvPKfUE4OL96bNtmfKPjnRi5TGrti37O7TIWSrkidNo5U9hZhkdDBU9LdN/Ml5HPl0CPdKdrMQ09uq77QeipOOncnQaaMHQelt8ACX+bpYSJYvlPjoasdehWPwMRoqeWrChOoDGiqYx6tSE=  ;
Received: from unknown (HELO toshiba-debian.local) (ndrw_grn@189.180.50.232 with plain)
  by smtp104.plus.mail.mud.yahoo.com with SMTP; 28 Apr 2007 12:13:16 -0000
X-YMail-OSG: 8Y8YTUgVM1mbbTlSqQszAN7rwPgsDzPvk.j36cXjK81irkEm8b.JkxkT.hr_gJIarboj0oEEAA--
Subject: Re: Snowball and accents filter...?
From: Andrew Green <ndrw_grn@yahoo.com.mx>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0704271654570.32376@hal.rescomp.berkeley.edu>
References: <1177616788.4622.14.camel@localhost>
	 <Pine.LNX.4.58.0704271654570.32376@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1
Date: Sat, 28 Apr 2007 07:18:58 -0500
Message-Id: <1177762738.4303.25.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

El vie, 27-04-2007 a las 16:59 -0700, Chris Hostetter escribi:
> : In order to do this, we tried subclassing the SnowballAnalyzer... it
> : doesn't work yet, though. Here is the code of our custom class:
> 
> At first glance, what youv'e got seems fine, can you elaborate on what you
> mean by "it doesn't work" ?
> 
> Perhaps the issue is that the SnowballStemmer can't handle the accented
> characters, and you should strip them first, then stem?
> 
>   public TokenStream tokenStream(String fieldName, Reader reader) {
>     TokenStream result = new StandardTokenizer(reader);
>     result = new StandardFilter(result);
>     result = new LowerCaseFilter(result);
>     if (stopSet != null)
>       result = new StopFilter(result, stopSet);
>     result = new ISOLatin1AccentFilter(result);
>     result = new SnowballFilter(result, name);
>     return result;
>   }
> 
Thanks for your answer, Chris.

It doesn't work for the opposite reason: it requires words to be spelled
correctly, including accents, in order to stem them. So, for example,
"civilizacin" and its plural, "civilizaciones" are stemmed correctly,
but the accentless version, "civilizacion", doesn't get stemmed at all.
So if someone misspells the word, omitting the accent, in the search
query--a likely scenario--the only hits they get are identical
misspellings in the documents, if such things exist. But we need
stemming of both accented and unaccented versions of the word. Stemming
misspellings may sound inherently evil, I suppose, but it seems to be
our best bet.

We're currently trying to modify the SpanishStemmer to do this, but
haven't gotten it quite yet.

Another option that I'm imagining might work, though less well, would be
to simultaneously maintain two indexes, one of correctly stemmed words
generated without the accents filter, and another of unstemmed words
with the accents stripped, and query both indexes when searching.

Yet another possibility would be, I think, to silently use a dictionary
to correct spellings in queries before searching.

A few Google queries show that they do things sort of the way we're
trying to, though perhaps not quite...

Thanks again,
Andrew


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 23:00:16 2007
Return-Path: <java-user-return-27804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52966 invoked from network); 28 Apr 2007 23:00:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 23:00:15 -0000
Received: (qmail 93976 invoked by uid 500); 28 Apr 2007 23:00:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93507 invoked by uid 500); 28 Apr 2007 23:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93494 invoked by uid 99); 28 Apr 2007 23:00:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 16:00:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 16:00:08 -0700
Received: by ug-out-1314.google.com with SMTP id k40so893540ugc
        for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 15:59:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=F0WVzlXsFcYuVPm4zUGAUWrpvkssD70HrVqPVX+xgb/CleLgBEykae/EBQ5FT+gjIGz6lP+HNFC5aGq+W+6nf8Pclz9uz0eZQ3YUKHPTrp1Ct9brS41U3/Zx7LWAaFuuWt7ds03ytJQog8MANEFtDzBKaBL38O3asGlaaDf1m5M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=pTsw1VfVAD9iUmZDgsEJ7YHD/hhyfdZzqeN+XSjmmqFYVR5EFhVzOiqkxoyZAiUdb8LemVPOLq31YBGADCO54Py83OsFE244fU1PvCkhgnCQpx4Eysy4I+FQuqYcsGk5ha62a9Io3NysHn1tTcp3Mp9YAwRsd5CDIB16L++J4t4=
Received: by 10.66.248.13 with SMTP id v13mr4117697ugh.1177801186819;
        Sat, 28 Apr 2007 15:59:46 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id 20sm7405726uga.2007.04.28.15.59.45;
        Sat, 28 Apr 2007 15:59:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4632E125.2010406@promptu.com>
References: <4631966F.9000505@promptu.com> <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com> <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com> <FE61B663-B12A-4778-91E4-7BAAA4B8A6AF@gmail.com> <419CAF49-F5EE-4482-B5AA-2ECD06573F7F@ehatchersolutions.com> <AE8B55AA-D085-460E-ACD6-69A0A230092F@gmail.com> <4632E125.2010406@promptu.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DA051436-D3AF-4469-8139-FB80F014EBAD@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Search for docs containing only a certain word in a specified field?
Date: Sun, 29 Apr 2007 00:59:10 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


28 apr 2007 kl. 07.52 skrev Kun Hong:

> karl wettin wrote:
>>
>> 27 apr 2007 kl. 14.11 skrev Erik Hatcher:
>>
>>>
>>> On Apr 27, 2007, at 6:39 AM, karl wettin wrote:
>>>> 27 apr 2007 kl. 12.36 skrev Erik Hatcher:
>>>>
>>>>> Unless someone has some other tricks I'm not aware of, that is.
>>>>
>>>> I guess it would be possible to add start/stop-tokens such as ^  
>>>> and $ to the indexed text: "^ the $" and place a phrase query  
>>>> with 0 slop.
>>>
>>> True true.   That'd work too.
>
> Thanks for the replies and discussion.
>
> I think I didn't express my problems correctly.  The problem is I  
> want to
> find documents containing only the "the" token in the title field,  
> but not
> necessarily with only one appearance.  For example, if the query is  
> "the",
> I want to find documents whose title is "the", "the the" or "the  
> the the".

I'm not sure if you mean that it should treat all repetative tokens  
as only one token? Then you are better of using a filter when  
analyzing text you insert to the index: rather than creating one  
token for each the in "the the the the the the" you only create one.  
You might also want to use this filter when parsing user queries. (It  
will be hard to find the band 'the the'.)

If not and what you write above is all you want to match, nothing  
more, nothing less, then you could do something like this:

(dry coded and untested.)

int n = 3; // the; the the; the the the
String field = "title";
String token = "the";
BooleanQuery bq = new BooleanQuery();
for (int i=0;i<n;i++) {
   Term[] terms = new Term[i+2];
   terms[0] = new Term(field, "^");
   for (int j=0;j<i;j++) {
     terms[j+1] = new Term(field, token);
   }
   terms[i+2] = new Term(field, "$");
   bq.add(new BooleanClause(new PhraseQuery(terms, 0), Orrcurs.SHOULD);
}


I hope this helps.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 23:32:06 2007
Return-Path: <java-user-return-27805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59899 invoked from network); 28 Apr 2007 23:32:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 23:32:05 -0000
Received: (qmail 15701 invoked by uid 500); 28 Apr 2007 23:32:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15654 invoked by uid 500); 28 Apr 2007 23:32:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15643 invoked by uid 99); 28 Apr 2007 23:32:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 16:32:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 16:31:57 -0700
Received: by ug-out-1314.google.com with SMTP id k40so895323ugc
        for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 16:31:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ql55fcfboAfiGiMmYXU9cmrwq5j7QxoCeYYMlevvjmmojsRbZibSpSrNbcVgrMqjR5iXHTxvd4wLiVM3N04AQ4CWiNLqxrvPlLhsZ+bN9ckzBtny/q6I/ECyBPgzjJ0rgYvHfhUn5nRoQC5ONSALX46rfCa3mKdZ0lBTvN9oGOc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DUQN2IStj6yFQEP9Jf2E/3/cZhkq5b2aKLtLzudigfSHAPw9x1BmUIOsnCVDCvIDIHLjKTubRmhMs0MTO3avpLgemUMEBgVbYXAEi9WRfz3nD2JOl6PHSNUyWiIdcDT54r+15FgPRe1rZISL/0DiWdbH7AatZieIbpb+9/4mO50=
Received: by 10.82.136.4 with SMTP id j4mr8851996bud.1177803095875;
        Sat, 28 Apr 2007 16:31:35 -0700 (PDT)
Received: by 10.82.190.11 with HTTP; Sat, 28 Apr 2007 16:31:35 -0700 (PDT)
Message-ID: <359a92830704281631i146c56dekd0d7d0b995c4056b@mail.gmail.com>
Date: Sat, 28 Apr 2007 19:31:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index sync up
In-Reply-To: <BAY144-F67A7115544E8B7DB85183D44E0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_111996_17980476.1177803095821"
References: <359a92830704271012l45f98a78t6238382c7746378e@mail.gmail.com>
	 <BAY144-F67A7115544E8B7DB85183D44E0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_111996_17980476.1177803095821
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I don't understand why you think HitCollector caches lots of data.
All it does is provide a place for you to decide whether you want a
doc or not. There's no fetching of the doc, or anything else except
the score and the doc ID. There's nothing else you have to do
with HitCollector.collect method.

TopDocs, ends up with an array of docIDs and scores, which is probably
what you want, just skip to the Nth document and read off the next
X documents.

In neither case is there very much storage involved. You've got to score
all the documents anyway if you want the most relevant, and the TopDocs
has a long and a float for each scoring document. Still not a huge amount
of data.

Anyway, best of luck however it works out
Erick



On 4/27/07, Tony Qian <tonyqian@hotmail.com> wrote:
>
> Erick,
>
> Thanks for your explaination. I thought using HitCollector. The search
> interface we are facing now actually is pretty simple. One of the search
> requires maximum of search results of 500 and page size is 500 (basically
> return first 500). Second one requires max of 250 and page size is 25. At
> this time, we are ok even we have to hit query several times.
>
> I see one problem with HitCollector, which is HitCollector caches a huge
> data if the document is very large. One best of implementation (I think)
> is
> client passes in a page number and page size in search method, Lucene
> returns documents on that page instead of always returns first 100
> documents.
>
> I haven't  looked at Lucene code yet and don't know how hard to implement
> that.
>
> Tony
>
>
> >From: "Erick Erickson" <erickerickson@gmail.com>
> >Reply-To: java-user@lucene.apache.org
> >To: java-user@lucene.apache.org
> >Subject: Re: Index sync up
> >Date: Fri, 27 Apr 2007 13:12:16 -0400
> >
> ><4> is also easy....
> >
> >From the javadoc:
> >"*Caution:* Iterate only over the hits needed. Iterating over all hits i=
s
> >generally not desirable and may be the source of performance issues."
> >
> >So an iterator should be fine for all documents, even those > 100. But d=
o
> >be
> >aware that the entire query gets re-executed each 100 docs or so, so yes=
,
> >there is a performance issue. You'll pay a price how big depends on a lo=
t
> >of
> >variables. But let's say the query takes 2 seconds to run. You'll spend
> two
> >seconds searching before returning document 0, two more seconds between
> >documents 100 and 101, two seconds between 200 and 201, etc. *even if yo=
u
> >just throw them away* if you use an iterator.
> >
> >So, getting hits 10,000 through 10,100 will spend a LOT if time
> processing
> >queries. You're better off using a HitCollector, perhaps a TopDocs etc.
> >
> >On the other hand, if your query takes 10 ms and you never really expect
> to
> >fetch more than, say, 500 documents, who cares? Do it as simply as
> >possible.
> >
> >But now that I'm thinking about it, it's unclear to me what happens if
> you
> >just ask for Hits.doc(401) as your first call to get any document from
> the
> >Hits object. I took a quick look at the Hits code and it *looks* like,
> for
> >fetching an arbitrary 100 documents, the maximum number of searches
> you'll
> >make is two. Again, it's a quick look, but it seems like the following
> >
> >Hits hits =3D search();
> >Document doc =3D hits.doc(401);
> >
> >will execute the search twice. First to get the first 100 docs, then to
> get
> >documents 400-800. At least I think that's what's happening. That said, =
I
> >think you'd still be ahead by implementing your own HitCollector if you
> >expect to fetch thousands of documents.... The "fetch twice as many
> >documents as the one we're asked for" algorithm seems tailored for
> >relatively small data sets, which shouldn't be any surprise......
> >
> >Erick
> >
> >On 4/27/07, Tony Qian <tonyqian@hotmail.com> wrote:
> >>
> >>All,
> >>
> >>After playing around with Lucene, we decided to replace old full-text
> >>search
> >>engine with Lucene. I got "Lucene in Action" a week ago and finished
> >>reading
> >>most of the book. I got several questions.
> >>
> >>1) Since the book was written two years ago and Lucene has made a lot o=
f
> >>changes, is there any plan for 2nd edition? (I guess this question is
> for
> >>Otis and Erik, btw, it is a great book.)
> >>
> >>2) I have two processes for indexing. one runs every 5 minutes to add
> new
> >>contents into an existing index. Another one runs daily to rebuild
> entire
> >>index which also handles removing old contents. After rebuild process
> >>finishes indexing, we'd like to replace the index built by first proces=
s
> >>(every 5 minutes) with index built by second process. How do i do it
> >>safely
> >>and also avoid duplicating or missing documents (It is possible that
> first
> >>process is still adding documents to the index when we try to replace i=
t
> >>with second one).
> >>NOTE: both processes retrieve data from same database.
> >>
> >>3) we are doing indexing on a master server and push index data to slav=
e
> >>servers. In order to make new data visible to client, we have to close
> >>IndexSearcher and open it after new data is coped over. We use web base=
d
> >>application (servlet) as search interface, creating a IndexSearcher as
> an
> >>instance variable for all clients. My question is what will happen to
> >>clients if I close IndexSearcher while clients are still doing search.
> How
> >>to safely update index when client are searching?
> >>
> >>4) Lucene caches first 100 hits in memmory. We decided to use requery t=
o
> >>return search results back to clients. For first 100 documents, i can
> >>iterator through "Hits". Do i have to use doc(n) to retrive documents
> for
> >>any documents > 100? Any performance issues?
> >>
> >>Thanks in advance for help,
> >>Tony
> >>
> >>_________________________________________________________________
> >>The average US Credit Score is 675. The cost to see yours: $0 by
> Experian.
> >>
> >>
> http://www.freecreditreport.com/pm/default.aspx?sc=3D660600&bcd=3DEMAILFO=
OTERAVERAGE
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
> _________________________________________________________________
> Don't quit your job =96 Take Classes Online and Earn your Degree in 1 yea=
r.
> Start Today!
>
> http://www.classesusa.com/clickcount.cfm?id=3D866146&goto=3Dhttp%3A%2F%2F=
www.classesusa.com%2Ffeaturedschools%2Fonlinedegreesmp%2Fform-dyn1.html%3Fs=
plovr%3D866144
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_111996_17980476.1177803095821--

From java-user-return-27806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 28 23:44:24 2007
Return-Path: <java-user-return-27806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62495 invoked from network); 28 Apr 2007 23:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Apr 2007 23:44:23 -0000
Received: (qmail 23951 invoked by uid 500); 28 Apr 2007 23:44:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23917 invoked by uid 500); 28 Apr 2007 23:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23906 invoked by uid 99); 28 Apr 2007 23:44:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 16:44:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 16:44:15 -0700
Received: by ug-out-1314.google.com with SMTP id k40so896056ugc
        for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 16:43:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rizra5vdomOlOKgi23vMqLm0i1/gJ7+6AP+UY2A+PVWH90MshebykOOue6jFwXkqCz9fHlzhAEkS3QufGclYUbxWp8Pr4FpKI9OEKmATh/FhMBm+i3p2Zl/zJdPA6hJYt0q8UFxlOvWfQnWWQ7MtnxRiKPqCYpkQdKruYDxcZXI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QzbHJaSq6TjvHmdWjiEKB350UnOKIQ2c3RBeuQCl7csVgQFRi6PHFPktqORAduURbrDXqMGsEKZBwwYghzXKH2GGWyQkjsUnUSugtIv08puZ35jlAUD7YEMTdmS819CevABjzSB1FEqpOrXHbyCJSmvmgNS2vg7skH6NPtnbNvU=
Received: by 10.82.162.14 with SMTP id k14mr8800125bue.1177803834378;
        Sat, 28 Apr 2007 16:43:54 -0700 (PDT)
Received: by 10.82.190.11 with HTTP; Sat, 28 Apr 2007 16:43:54 -0700 (PDT)
Message-ID: <359a92830704281643t6dcb5c85te98634b90054f93e@mail.gmail.com>
Date: Sat, 28 Apr 2007 19:43:54 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Snowball and accents filter...?
In-Reply-To: <1177762738.4303.25.camel@localhost>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_112056_17895692.1177803834318"
References: <1177616788.4622.14.camel@localhost>
	 <Pine.LNX.4.58.0704271654570.32376@hal.rescomp.berkeley.edu>
	 <1177762738.4303.25.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_112056_17895692.1177803834318
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You actually wouldn't have to maintain two versions. You could,
instead, inject the accentless (stemmed) terms in your single
index as synonyms (See Lucene In Action). This is easier
to search and maintain....

But it also bloats your index by some factor since you're storing two
words for every accented word in your corpus. And gives you
headaches if there is more than one accent in the word (do you
then store all 4 possibilities for two accents? 8 for 3? etc?).

I think your notion of running the search terms through a dictionary
is a very good one. That way, your searcher doesn't have to care
about all this nonsense, and assume correctly-accented characters.

Erick

On 4/28/07, Andrew Green <ndrw_grn@yahoo.com.mx> wrote:
>
> El vie, 27-04-2007 a las 16:59 -0700, Chris Hostetter escribi=F3:
> > : In order to do this, we tried subclassing the SnowballAnalyzer... it
> > : doesn't work yet, though. Here is the code of our custom class:
> >
> > At first glance, what youv'e got seems fine, can you elaborate on what
> you
> > mean by "it doesn't work" ?
> >
> > Perhaps the issue is that the SnowballStemmer can't handle the accented
> > characters, and you should strip them first, then stem?
> >
> >   public TokenStream tokenStream(String fieldName, Reader reader) {
> >     TokenStream result =3D new StandardTokenizer(reader);
> >     result =3D new StandardFilter(result);
> >     result =3D new LowerCaseFilter(result);
> >     if (stopSet !=3D null)
> >       result =3D new StopFilter(result, stopSet);
> >     result =3D new ISOLatin1AccentFilter(result);
> >     result =3D new SnowballFilter(result, name);
> >     return result;
> >   }
> >
> Thanks for your answer, Chris.
>
> It doesn't work for the opposite reason: it requires words to be spelled
> correctly, including accents, in order to stem them. So, for example,
> "civilizaci=F3n" and its plural, "civilizaciones" are stemmed correctly,
> but the accentless version, "civilizacion", doesn't get stemmed at all.
> So if someone misspells the word, omitting the accent, in the search
> query--a likely scenario--the only hits they get are identical
> misspellings in the documents, if such things exist. But we need
> stemming of both accented and unaccented versions of the word. Stemming
> misspellings may sound inherently evil, I suppose, but it seems to be
> our best bet.
>
> We're currently trying to modify the SpanishStemmer to do this, but
> haven't gotten it quite yet.
>
> Another option that I'm imagining might work, though less well, would be
> to simultaneously maintain two indexes, one of correctly stemmed words
> generated without the accents filter, and another of unstemmed words
> with the accents stripped, and query both indexes when searching.
>
> Yet another possibility would be, I think, to silently use a dictionary
> to correct spellings in queries before searching.
>
> A few Google queries show that they do things sort of the way we're
> trying to, though perhaps not quite...
>
> Thanks again,
> Andrew
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_112056_17895692.1177803834318--

From java-user-return-27807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 29 01:04:54 2007
Return-Path: <java-user-return-27807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72774 invoked from network); 29 Apr 2007 01:04:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2007 01:04:54 -0000
Received: (qmail 75146 invoked by uid 500); 29 Apr 2007 01:04:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75120 invoked by uid 500); 29 Apr 2007 01:04:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75109 invoked by uid 99); 29 Apr 2007 01:04:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 18:04:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.181] (HELO exprod6og50.obsmtp.com) (64.18.1.181)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Apr 2007 18:04:46 -0700
Received: from source ([139.56.8.7]) by exprod6ob50.postini.com ([64.18.5.12]) with SMTP;
	Sat, 28 Apr 2007 18:04:25 PDT
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.32.38])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id l3T14gM09475
	for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 18:04:42 -0700 (PDT)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id SAA04694
	for <java-user@lucene.apache.org>; Sat, 28 Apr 2007 18:07:20 -0700 (PDT)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <2R8YLRL2>; Sat, 28 Apr 2007 18:04:24 -0700
Message-ID: <F1C79CDF8799D944A3156C4035173174180411@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: java-user@lucene.apache.org
Subject: Sort in Lucene 1.4.3
Date: Sat, 28 Apr 2007 18:04:23 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I encountered one problem in lucene 1.4.3: I called 

Searcher.search(<query>, new Sort("myfiled");

In "myfiled", most values looks like number "123456" or sth
similiar, but one field contains a value "Just a TRY", then
I got error:

java.lang.ClassCastException at
org.pache.lucene.search.FieldDocSortedHitQueue.lssThan
(FieldDocSortedHitQueue.java:129)

It seems that lucene judged this field as number so it 
cannot cast one particular value as String?

To me if client did not specify sorting field type, we should
treat it just as String?

Thanks very much for helps and best regards, Lisheng



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 29 01:36:37 2007
Return-Path: <java-user-return-27808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87440 invoked from network); 29 Apr 2007 01:36:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2007 01:36:37 -0000
Received: (qmail 3343 invoked by uid 500); 29 Apr 2007 01:36:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3308 invoked by uid 500); 29 Apr 2007 01:36:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3297 invoked by uid 99); 29 Apr 2007 01:36:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 18:36:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Apr 2007 18:36:30 -0700
Received: (qmail 75480 invoked by uid 60001); 29 Apr 2007 01:36:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=0FM5R4hvyu5clrAIyLJxSH5ay2hCubUK2dVEMuTLJ1lWizl4IRZ/r92TWVaOlqmMyRBko/GLmHIm3OEU2lg86Ugje191EJVTHuRQmilXJKZzqPJBPlbvcVHpGlBqSywQiYCnWEVJ9ok7GBQiC/YFnbplUhdWzv2Cthv+0Ud8ehQ=;
X-YMail-OSG: Tz16ZloVM1mnLO6zNn5kNxKMiCIDGDeMB1.Ou6L1I2VS4uaFP7ocknK00936rGtK5bdMdPav3kj4Tg7UYk_LtYJ9lbtMrNrHs9bIV.pbtz17oSBoNR24_w--
Received: from [72.231.8.153] by web50302.mail.re2.yahoo.com via HTTP; Sat, 28 Apr 2007 18:36:08 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Sat, 28 Apr 2007 18:36:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index sync up
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <596098.73873.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Tony,
 
----- Original Message ----

All,

After playing around with Lucene, we decided to replace old full-text search 
engine with Lucene. I got "Lucene in Action" a week ago and finished reading 
most of the book. I got several questions.

1) Since the book was written two years ago and Lucene has made a lot of 
changes, is there any plan for 2nd edition? (I guess this question is for 
Otis and Erik, btw, it is a great book.)

OG: Thanks.  Yes, there are plans for LIA2.  At this point in time they are still just plans.  We started preparing for the second edition some months ago, but then Lucene got some fresh blood and started developing an changing rapidly, that we decided to wait a little longer.  Plus, both Erik and I are quite busy these days (see my signature).

2) I have two processes for indexing. one runs every 5 minutes to add new 
contents into an existing index. Another one runs daily to rebuild entire 
index which also handles removing old contents. After rebuild process 
finishes indexing, we'd like to replace the index built by first process 
(every 5 minutes) with index built by second process. How do i do it safely 
and also avoid duplicating or missing documents (It is possible that first 
process is still adding documents to the index when we try to replace it 
with second one).
NOTE: both processes retrieve data from same database.

OG: You'll need to make those two processed communicate somehow.  If they run on the same servers, the easiest way might be using files - if file X exists, stop updating the index.  Or, if file Y exists, that means the first process is still updating, so wait with the index swap.
If this is running under UNIX, you might be able to just do:
rm -rf index            // the files won't *really* be removed at this point, so searching against this index will still work.
mv newIndex index
reopen the IndexSearcher

You could also play with sym-links:

normally you'd have: index -> index-built-on-20070428
when you build a new index the following night you call it index-built-on-20070429 and point index to it: index -> index-built-on-20070429
reopen the IndexSearcher

3) we are doing indexing on a master server and push index data to slave 
servers. In order to make new data visible to client, we have to close 
IndexSearcher and open it after new data is coped over. We use web based 
application (servlet) as search interface, creating a IndexSearcher as an 
instance variable for all clients. My question is what will happen to 
clients if I close IndexSearcher while clients are still doing search. How 
to safely update index when client are searching?

OG: The clients using the IndexSearcher when you close it will get an exception - IOException most likely.
But you don't *have* to close the old IndexSearcher.  You could just open a new one and let the old one get GCed.
OR, if you really want to close the old one, you could always come up with a simple mechanism that implements the "oh, this IndexSearcher needs to be closed soon - ok, let's give all clients who are using it 60 seconds to finish up and then we are closing this IS".  Or you could keep count of clients using this.  I believe Solr does this.  You'll also want to warm up the new IndexSearcher with a query before exposing it to real clients, esp. if your index is big.

4) Lucene caches first 100 hits in memmory. We decided to use requery to 
return search results back to clients. For first 100 documents, i can 
iterator through "Hits". Do i have to use doc(n) to retrive documents for 
any documents > 100? Any performance issues?

OG:  For hits > 100 you still use the same API as for hits < 100.  However, if your application or its users need to go deep in the results, you might want to look at the IndexSearcher search(....) method that returns TopDocs.

Otis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Lucene Consulting - http://lucene-consulting.com/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 29 01:43:37 2007
Return-Path: <java-user-return-27809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88897 invoked from network); 29 Apr 2007 01:43:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2007 01:43:36 -0000
Received: (qmail 7872 invoked by uid 500); 29 Apr 2007 01:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7196 invoked by uid 500); 29 Apr 2007 01:43:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7183 invoked by uid 99); 29 Apr 2007 01:43:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2007 18:43:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Apr 2007 18:43:28 -0700
Received: (qmail 52081 invoked by uid 60001); 29 Apr 2007 01:43:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ahxVsVzNTy1rZGbuZMQjXcX/TpXRuV1wIWpzDNYa2pTCcFMCSX/pegOJhyWq5fj0Nn0OJczsQMBxUjmEoZZkuOZZN4XxyvFyqeRcqIuBMMlxlXLMlIv2zjOqwYeqJR9qQyP4mCcIHmOKFl9EXiVM61+2nHQWv+2qCkMj91LntJk=;
X-YMail-OSG: nGkFQ2MVM1n6K4A5d3G0zhaI4n5wxlyTlyWiaYlOXPmjW5qrZntLroLHGJW5Utbo3qyClW.XSh2sVwezqSxsFdCpuJm7Z4iDJl_z.Fc0OPSv4HXfwWM-
Received: from [72.231.8.153] by web50311.mail.re2.yahoo.com via HTTP; Sat, 28 Apr 2007 18:43:07 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Sat, 28 Apr 2007 18:43:06 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Sort in Lucene 1.4.3
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <172983.51517.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Lisheng,

Have a look at the javadoc for the Sort object:
Valid Types of Values

 There are three possible kinds of term values which may be put into
 sorting fields: Integers, Floats, or Strings.  Unless
 SortField objects are specified, the type of value
 in the field is determined by parsing the first term in the field.

 

Thus, if you know what type of a value yoru field has, use SortField and explicitly set it.  Also, instantiate Sort and SortField only once instead of in each call to search(....).

Otis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Lucene Consulting - http://lucene-consulting.com/


----- Original Message ----
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: java-user@lucene.apache.org
Sent: Saturday, April 28, 2007 9:04:23 PM
Subject: Sort in Lucene 1.4.3

Hi,

I encountered one problem in lucene 1.4.3: I called 

Searcher.search(<query>, new Sort("myfiled");

In "myfiled", most values looks like number "123456" or sth
similiar, but one field contains a value "Just a TRY", then
I got error:

java.lang.ClassCastException at
org.pache.lucene.search.FieldDocSortedHitQueue.lssThan
(FieldDocSortedHitQueue.java:129)

It seems that lucene judged this field as number so it 
cannot cast one particular value as String?

To me if client did not specify sorting field type, we should
treat it just as String?

Thanks very much for helps and best regards, Lisheng



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 29 11:53:18 2007
Return-Path: <java-user-return-27810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82816 invoked from network); 29 Apr 2007 11:53:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2007 11:53:17 -0000
Received: (qmail 13991 invoked by uid 500); 29 Apr 2007 11:53:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13140 invoked by uid 500); 29 Apr 2007 11:53:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13125 invoked by uid 99); 29 Apr 2007 11:53:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 04:53:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.51.64.130] (HELO idlewild.ccnep.com.np) (202.51.64.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 04:53:10 -0700
Received: from neplaptop ([202.51.64.158])
	by idlewild.ccnep.com.np (8.13.3/8.13.3) with ESMTP id l3TCWepJ012432
	for <java-user@lucene.apache.org>; Sun, 29 Apr 2007 18:17:43 +0545
Message-Id: <200704291232.l3TCWepJ012432@idlewild.ccnep.com.np>
From: "Chandan Tamrakar" <chandan@ccnep.com.np>
To: <java-user@lucene.apache.org>
Subject: batch indexing
Date: Sun, 29 Apr 2007 17:37:35 +0545
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00DC_01C78A85.16161D60"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AceKVOCYs2kP9D3QTISK37fPuQHT1A==
X-Scanned-By: MIMEDefang 2.51 on 202.51.64.130
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00DC_01C78A85.16161D60
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I am trying to index a huge documents on batches   . Batch size is
parameterized to the application  say X docs , that means it will hold X no.
of 

Docs in the RAM before I flush to file system using
IndexWriter.addIndexes(Directory[]) method

 

My question is :

 

Do I need to set mergefactor ? , will it hold default mergefactor docs in
memory before it is written to disk as segment .

(But my application will call indexwriter.addindexes function only after X
no of documents are in memory)

 

If the index sizes are big , at some point of time there might be a out of
memory exceptions , ( yes I could check a memory before another ramdirectory
is being created) But what would be the best solution  ? Is FSDirectory is
better option than Ramdirectory for huge text indexing ? I have roughly 50
GB of fulltext to index?

 

 

Thks in advance.


------=_NextPart_000_00DC_01C78A85.16161D60--



From java-user-return-27811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 29 13:22:26 2007
Return-Path: <java-user-return-27811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10330 invoked from network); 29 Apr 2007 13:22:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2007 13:22:25 -0000
Received: (qmail 88382 invoked by uid 500); 29 Apr 2007 13:22:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88340 invoked by uid 500); 29 Apr 2007 13:22:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88329 invoked by uid 99); 29 Apr 2007 13:22:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 06:22:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 06:22:18 -0700
Received: by ik-out-1112.google.com with SMTP id b32so1038335ika
        for <java-user@lucene.apache.org>; Sun, 29 Apr 2007 06:21:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PNYNMCynMF4PDmBS0HUg8Ky8zswf3MTFfU2lrZHW1Kapn6k27u+ifhPBACOhu4a2X5VCqqcGIvSZi8p5RHF3wTQScwDPdEUMqKLoJtOCPVcGUjB+S2oDye6jJoBDedVuvnwPxrug7mkWC5hIzcRpXqshcTt2xWDTV7zNL1MEbQY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IYnqc94JfPkPRPmB1zG5II0Yb79QJBAYdGVC83uMy/2Phabc0YvLIxDAFMNRkeQLURK+XgLxjSiwQHYcT/rQg++1XArnUOrqs8YiVgRxUqFdGDe44lsQDsERyTGvtOTSIzmwiuMQI5MRE0aZ6nINSvzZI9E+Lwq9Q5auyFFD6sQ=
Received: by 10.82.120.14 with SMTP id s14mr9739658buc.1177852916783;
        Sun, 29 Apr 2007 06:21:56 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sun, 29 Apr 2007 06:21:56 -0700 (PDT)
Message-ID: <359a92830704290621k55ffb5cfi48876602e35a4957@mail.gmail.com>
Date: Sun, 29 Apr 2007 09:21:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: batch indexing
In-Reply-To: <200704291232.l3TCWepJ012432@idlewild.ccnep.com.np>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1213_28995709.1177852916715"
References: <200704291232.l3TCWepJ012432@idlewild.ccnep.com.np>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1213_28995709.1177852916715
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As I understand it, FSDirectory *is* RAMdirectory, at least until
it flushes. There have been several discussions of this,
search the mail archive for things like MergeFactor, MaxBufferedDocs
and the like. You'll find quite a bit of information about how these
parameters interact.

Particularly, see the thread titled

"MergeFactor and MaxBufferedDocs value should ...?"

I suspect, that if you're explicitly creating RAMDirectories and
merging them that your code is more complex than it needs
to be to no good purpose (of course, I've been wrong before,
once or twice at least <G>).

If you really require parallel indexing, you might try running
FSDirectory based processes on several machines, then merging
the resulting indexes as a final step. How you tell each of these
processes which documents to index I leave as an exercise for
the reader.....

Best
Erick


On 4/29/07, Chandan Tamrakar <chandan@ccnep.com.np> wrote:
>
> I am trying to index a huge documents on batches   . Batch size is
> parameterized to the application  say X docs , that means it will hold X
> no.
> of
>
> Docs in the RAM before I flush to file system using
> IndexWriter.addIndexes(Directory[]) method
>
>
>
> My question is :
>
>
>
> Do I need to set mergefactor ? , will it hold default mergefactor docs in
> memory before it is written to disk as segment .
>
> (But my application will call indexwriter.addindexes function only after X
> no of documents are in memory)
>
>
>
> If the index sizes are big , at some point of time there might be a out of
> memory exceptions , ( yes I could check a memory before another
> ramdirectory
> is being created) But what would be the best solution  ? Is FSDirectory is
> better option than Ramdirectory for huge text indexing ? I have roughly 50
> GB of fulltext to index?
>
>
>
>
>
> Thks in advance.
>
>

------=_Part_1213_28995709.1177852916715--

From java-user-return-27812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 29 16:34:11 2007
Return-Path: <java-user-return-27812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66524 invoked from network); 29 Apr 2007 16:34:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2007 16:34:10 -0000
Received: (qmail 39701 invoked by uid 500); 29 Apr 2007 16:34:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39661 invoked by uid 500); 29 Apr 2007 16:34:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39650 invoked by uid 99); 29 Apr 2007 16:34:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 09:34:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pvsaikrishna@gmail.com designates 72.14.204.233 as permitted sender)
Received: from [72.14.204.233] (HELO qb-out-0506.google.com) (72.14.204.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 09:34:01 -0700
Received: by qb-out-0506.google.com with SMTP id d7so5470126qbd
        for <java-user@lucene.apache.org>; Sun, 29 Apr 2007 09:33:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=Rb0NcEt+kE16152zA0TKl/oVJQgEgdlZwiaiftl5x5ku+gdLx/Rsei8KUrCjawNzzFSVWH/M20jTUsbvJL5NZJowyIlLiuAMjSLnKKL9/rSERjytbSpQ9zXGC6e7TJ9WUS2QylSDmIo3XjV+Jwq6pxAVGAvTx5MSeocSoR3NUqA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=n0dg902SCvNtrNeSTdKj/jQjrhcFuMWNoPgeiDJDgohI3QapLZOsMQM3Y7/DlldZY6IFk9gbZqzKwzXW8gQffSu5Xk88PqpAvQKrOftFrvW4xHX1+4S3RAM1nST5KqRAk8jGUATYVJEulkFHCrQjsgKbAqVVJWMeVmqYVYQaM7w=
Received: by 10.100.167.7 with SMTP id p7mr997318ane.1177864420955;
        Sun, 29 Apr 2007 09:33:40 -0700 (PDT)
Received: by 10.100.41.19 with HTTP; Sun, 29 Apr 2007 09:33:40 -0700 (PDT)
Message-ID: <171dbfa60704290933h3306e5a3r74a8b655e35e073f@mail.gmail.com>
Date: Sun, 29 Apr 2007 22:03:40 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re : term frequency calculation in Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_360430_21299563.1177864420888"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_360430_21299563.1177864420888
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hai ,

  Where does the lucene compute term frequency vector ? {filename,function
name}

  Actually the task is to replace the all term frequencies with some
constant number(integer), how to do this ?

  Any kind of help is appreciated .

Thanks in advance.

------=_Part_360430_21299563.1177864420888--

From java-user-return-27813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 29 21:24:46 2007
Return-Path: <java-user-return-27813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6595 invoked from network); 29 Apr 2007 21:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Apr 2007 21:24:45 -0000
Received: (qmail 57997 invoked by uid 500); 29 Apr 2007 21:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57966 invoked by uid 500); 29 Apr 2007 21:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57955 invoked by uid 99); 29 Apr 2007 21:24:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 14:24:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.69.121] (HELO web33006.mail.mud.yahoo.com) (209.191.69.121)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 29 Apr 2007 14:24:38 -0700
Received: (qmail 2364 invoked by uid 60001); 29 Apr 2007 21:24:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=eUqzzbA2thtgHae12HHhS594LtDKDvxVr1IaBKJyPTDRQ1xLXODrvww/oMwGoRf87wT+TvzyPNzOc+fsKTlva+obsxHCe3WIpO9REIxQLTMBVuqVvrhPHqNclKNCvpavEhmxI0t4fSizHwoaZoam+GpXoF9PQYOWBTiKte8NCTU=;
X-YMail-OSG: t1ymUfcVM1lBGCf8GMK2HSwPazg.gWxOUPBGsUFAfPqQA4eFL35i2t.zX4vItoiXOdtA95RNdHB8IV8qNIuZLr0lr0vVD2cJXnpmVetlJQQYkY5Qa0V4mETGxK9VJw--
Received: from [209.191.106.127] by web33006.mail.mud.yahoo.com via HTTP; Sun, 29 Apr 2007 14:24:17 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Sun, 29 Apr 2007 14:24:17 -0700 (PDT)
From: "av_work@yahoo.com" <av_work@yahoo.com>
Subject: Keyphrase Extraction
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-521421131-1177881857=:780"
Message-ID: <329343.780.qm@web33006.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-521421131-1177881857=:780
Content-Type: text/plain; charset=ascii

Hi,

I tried using MoreLikeThis contrib feature to extract "interesting terms" from a document. This works very well - but only for SINGLE words.

I am looking for a way to extra "keyPHRASES" from a document. Is there an easy way to achieve this using Lucene index?

Thanks in advance!
Av

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-521421131-1177881857=:780--

From java-user-return-27814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 00:05:52 2007
Return-Path: <java-user-return-27814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32300 invoked from network); 30 Apr 2007 00:05:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 00:05:52 -0000
Received: (qmail 53655 invoked by uid 500); 30 Apr 2007 00:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53619 invoked by uid 500); 30 Apr 2007 00:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53608 invoked by uid 99); 30 Apr 2007 00:05:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 17:05:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.144.27.9] (HELO surfers.oz.agile.tv) (203.144.27.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 17:05:45 -0700
Received: from [192.168.16.9] (woodgate.oz.agile.tv [192.168.16.9])
	by surfers.oz.agile.tv (Postfix) with ESMTP id E0F90A68DA
	for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 10:05:21 +1000 (EST)
Message-ID: <463532C1.8030402@promptu.com>
Date: Mon, 30 Apr 2007 10:05:21 +1000
From: Kun Hong <khong@promptu.com>
User-Agent: Thunderbird 1.5 (X11/20060313)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search for docs containing only a certain word in a specified
 field?
References: <4631966F.9000505@promptu.com> <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com> <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com> <FE61B663-B12A-4778-91E4-7BAAA4B8A6AF@gmail.com> <419CAF49-F5EE-4482-B5AA-2ECD06573F7F@ehatchersolutions.com> <AE8B55AA-D085-460E-ACD6-69A0A230092F@gmail.com> <4632E125.2010406@promptu.com> <DA051436-D3AF-4469-8139-FB80F014EBAD@gmail.com>
In-Reply-To: <DA051436-D3AF-4469-8139-FB80F014EBAD@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



karl wettin wrote:
>
> 28 apr 2007 kl. 07.52 skrev Kun Hong:
>
>> karl wettin wrote:
>>>
>>> 27 apr 2007 kl. 14.11 skrev Erik Hatcher:
>>>
>>>>
>>>> On Apr 27, 2007, at 6:39 AM, karl wettin wrote:
>>>>> 27 apr 2007 kl. 12.36 skrev Erik Hatcher:
>>>>>
>>>>>> Unless someone has some other tricks I'm not aware of, that is.
>>>>>
>>>>> I guess it would be possible to add start/stop-tokens such as ^ 
>>>>> and $ to the indexed text: "^ the $" and place a phrase query with 
>>>>> 0 slop.
>>>>
>>>> True true.   That'd work too.
>>
>> Thanks for the replies and discussion.
>>
>> I think I didn't express my problems correctly.  The problem is I 
>> want to
>> find documents containing only the "the" token in the title field, 
>> but not
>> necessarily with only one appearance.  For example, if the query is 
>> "the",
>> I want to find documents whose title is "the", "the the" or "the the 
>> the".
>
> I'm not sure if you mean that it should treat all repetative tokens as 
> only one token? Then you are better of using a filter when analyzing 
> text you insert to the index: rather than creating one token for each 
> the in "the the the the the the" you only create one. You might also 
> want to use this filter when parsing user queries. (It will be hard to 
> find the band 'the the'.)
I can't just use filters because I have to cater for other titles that 
are not just stop words, which
should be analyzed normally. (I know this requirement is a bit fussy).

> If not and what you write above is all you want to match, nothing 
> more, nothing less, then you could do something like this:
>
> (dry coded and untested.)
>
> int n = 3; // the; the the; the the the
> String field = "title";
> String token = "the";
> BooleanQuery bq = new BooleanQuery();
> for (int i=0;i<n;i++) {
>   Term[] terms = new Term[i+2];
>   terms[0] = new Term(field, "^");
>   for (int j=0;j<i;j++) {
>     terms[j+1] = new Term(field, token);
>   }
>   terms[i+2] = new Term(field, "$");
>   bq.add(new BooleanClause(new PhraseQuery(terms, 0), Orrcurs.SHOULD);
> }
>
>

This seems to be a solution, but with n fixed. But I think it is good 
enough for me now. :)

Thanks a lot.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 01:00:36 2007
Return-Path: <java-user-return-27815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37511 invoked from network); 30 Apr 2007 01:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 01:00:34 -0000
Received: (qmail 88398 invoked by uid 500); 30 Apr 2007 01:00:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88354 invoked by uid 500); 30 Apr 2007 01:00:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88339 invoked by uid 99); 30 Apr 2007 01:00:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 18:00:34 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.51.64.130] (HELO idlewild.ccnep.com.np) (202.51.64.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 18:00:25 -0700
Received: from neplaptop ([202.51.76.130])
	by idlewild.ccnep.com.np (8.13.3/8.13.3) with ESMTP id l3U1ds1E026642
	for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 07:25:03 +0545
Message-Id: <200704300140.l3U1ds1E026642@idlewild.ccnep.com.np>
From: "Chandan Tamrakar" <chandan@ccnep.com.np>
To: <java-user@lucene.apache.org>
Subject: RE: batch indexing
Date: Mon, 30 Apr 2007 06:44:41 +0545
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AceKZwX7LQWieo6nRWC7sYwbj3ap6QAW5d7A
In-Reply-To: <359a92830704290621k55ffb5cfi48876602e35a4957@mail.gmail.com>
X-Scanned-By: MIMEDefang 2.51 on 202.51.64.130
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erik , so FSDirectory seems better option than RAMDirectory ? Also I
think O.S can cache files  in which case FSDirectory may not be bad , your
thoughts ?

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Sunday, April 29, 2007 7:07 PM
To: java-user@lucene.apache.org
Subject: Re: batch indexing

As I understand it, FSDirectory *is* RAMdirectory, at least until
it flushes. There have been several discussions of this,
search the mail archive for things like MergeFactor, MaxBufferedDocs
and the like. You'll find quite a bit of information about how these
parameters interact.

Particularly, see the thread titled

"MergeFactor and MaxBufferedDocs value should ...?"

I suspect, that if you're explicitly creating RAMDirectories and
merging them that your code is more complex than it needs
to be to no good purpose (of course, I've been wrong before,
once or twice at least <G>).

If you really require parallel indexing, you might try running
FSDirectory based processes on several machines, then merging
the resulting indexes as a final step. How you tell each of these
processes which documents to index I leave as an exercise for
the reader.....

Best
Erick


On 4/29/07, Chandan Tamrakar <chandan@ccnep.com.np> wrote:
>
> I am trying to index a huge documents on batches   . Batch size is
> parameterized to the application  say X docs , that means it will hold X
> no.
> of
>
> Docs in the RAM before I flush to file system using
> IndexWriter.addIndexes(Directory[]) method
>
>
>
> My question is :
>
>
>
> Do I need to set mergefactor ? , will it hold default mergefactor docs in
> memory before it is written to disk as segment .
>
> (But my application will call indexwriter.addindexes function only after X
> no of documents are in memory)
>
>
>
> If the index sizes are big , at some point of time there might be a out of
> memory exceptions , ( yes I could check a memory before another
> ramdirectory
> is being created) But what would be the best solution  ? Is FSDirectory is
> better option than Ramdirectory for huge text indexing ? I have roughly 50
> GB of fulltext to index?
>
>
>
>
>
> Thks in advance.
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 01:40:31 2007
Return-Path: <java-user-return-27816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51202 invoked from network); 30 Apr 2007 01:40:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 01:40:29 -0000
Received: (qmail 20558 invoked by uid 500); 30 Apr 2007 01:40:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20522 invoked by uid 500); 30 Apr 2007 01:40:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20511 invoked by uid 99); 30 Apr 2007 01:40:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 18:40:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 18:40:20 -0700
Received: by ug-out-1314.google.com with SMTP id k40so995053ugc
        for <java-user@lucene.apache.org>; Sun, 29 Apr 2007 18:39:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dwE5FB+v6/oi1sbREk9H6sTN210zLbauHj4zNsBNzUvIy5acwCENFzUvxe+N333upPMgYvGKgQSwK0+Qt4pPqhKL96yulxgOX4gKVIxdYIzpT6Oi5+sDg+uR9zLirB9jGdwG8uo5r9Qq25aVRdmBOmetiHnu+u9RbOFno/Jr1+0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B8qheBKcTqVd9XDQ2kliPlvkrhkMpRwfVFU54aj4WI5IvHFmrYBz0CinNWqZBYHaSQVbge3hmQOBHt+DdrZs0u/61+x6+NJcSWtF439D6ZX1l+yreS+h2ETIOhu1SpBp7ZhBcWmFETGnbXTQamtciVdldSQ632w8GGHfE3ZhJ+M=
Received: by 10.82.169.4 with SMTP id r4mr11006793bue.1177897199163;
        Sun, 29 Apr 2007 18:39:59 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sun, 29 Apr 2007 18:39:59 -0700 (PDT)
Message-ID: <359a92830704291839p473415bdjf15d18f38eb92fdf@mail.gmail.com>
Date: Sun, 29 Apr 2007 21:39:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: batch indexing
In-Reply-To: <200704300140.l3U1ds1E026642@idlewild.ccnep.com.np>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3750_8682914.1177897199023"
References: <359a92830704290621k55ffb5cfi48876602e35a4957@mail.gmail.com>
	 <200704300140.l3U1ds1E026642@idlewild.ccnep.com.np>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3750_8682914.1177897199023
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Really take a look at the thread I mentioned, as well as search
the user list archives. There's more information than you knew
existed <G>.

My main thought is that I don't see any evidence that there's an
actual problem. That is, what behavior of the simple FS based
way of creating an index aren't you happy with? I can't emphasize
enough that making things faster, when you *don't* have an
observable performance problem is unwise. I'll concede that
if you've had experience in a particular problem domain and face
a similar problem, you probably can say at the outset that you
need to build in certain efficiencies. But if you haven't, worrying
about this kind of performance issue is almost certainly a waste of
time....

So, again, what behavior are you actually seeing that's causing
the problem? And why does it need to be faster? "Indexing huge
amounts of data" is irrelevant if you only have to build the index
once and change it yearly thereafter. Especially if it builds, say,
overnight. If you have to build the index daily and it takes three days
to run in the simple-minded way, it's another story.

So why don't you try indexing, say, 1,000,000 of your documents
the simple way, and 1,000,000 the complex way you started to and
see whether 1> the complex way saves you any time. and 2> if it
does, is it enough time to make the complexity worthwhile?

Best
Erick

On 4/29/07, Chandan Tamrakar <chandan@ccnep.com.np> wrote:
>
> Thanks Erik , so FSDirectory seems better option than RAMDirectory ? Also
> I
> think O.S can cache files  in which case FSDirectory may not be bad , your
> thoughts ?
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Sunday, April 29, 2007 7:07 PM
> To: java-user@lucene.apache.org
> Subject: Re: batch indexing
>
> As I understand it, FSDirectory *is* RAMdirectory, at least until
> it flushes. There have been several discussions of this,
> search the mail archive for things like MergeFactor, MaxBufferedDocs
> and the like. You'll find quite a bit of information about how these
> parameters interact.
>
> Particularly, see the thread titled
>
> "MergeFactor and MaxBufferedDocs value should ...?"
>
> I suspect, that if you're explicitly creating RAMDirectories and
> merging them that your code is more complex than it needs
> to be to no good purpose (of course, I've been wrong before,
> once or twice at least <G>).
>
> If you really require parallel indexing, you might try running
> FSDirectory based processes on several machines, then merging
> the resulting indexes as a final step. How you tell each of these
> processes which documents to index I leave as an exercise for
> the reader.....
>
> Best
> Erick
>
>
> On 4/29/07, Chandan Tamrakar <chandan@ccnep.com.np> wrote:
> >
> > I am trying to index a huge documents on batches   . Batch size is
> > parameterized to the application  say X docs , that means it will hold X
> > no.
> > of
> >
> > Docs in the RAM before I flush to file system using
> > IndexWriter.addIndexes(Directory[]) method
> >
> >
> >
> > My question is :
> >
> >
> >
> > Do I need to set mergefactor ? , will it hold default mergefactor docs
> in
> > memory before it is written to disk as segment .
> >
> > (But my application will call indexwriter.addindexes function only after
> X
> > no of documents are in memory)
> >
> >
> >
> > If the index sizes are big , at some point of time there might be a out
> of
> > memory exceptions , ( yes I could check a memory before another
> > ramdirectory
> > is being created) But what would be the best solution  ? Is FSDirectory
> is
> > better option than Ramdirectory for huge text indexing ? I have roughly
> 50
> > GB of fulltext to index?
> >
> >
> >
> >
> >
> > Thks in advance.
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3750_8682914.1177897199023--

From java-user-return-27817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 03:12:07 2007
Return-Path: <java-user-return-27817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64770 invoked from network); 30 Apr 2007 03:12:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 03:12:06 -0000
Received: (qmail 92836 invoked by uid 500); 30 Apr 2007 03:12:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92800 invoked by uid 500); 30 Apr 2007 03:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92787 invoked by uid 99); 30 Apr 2007 03:12:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2007 20:12:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 29 Apr 2007 20:11:57 -0700
Received: (qmail 38556 invoked by uid 60001); 30 Apr 2007 03:11:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=XJuzSZtFkD4uN15amReHpVLFR1YKfH7UqzSM4zpf3hd6mxmpnY3034GVB87DzKMugsnIk3NO1kiI9QKzRRhbYwIO65+IWOVOPIA0UFpaKCZKFzp8S+H4CQhmG/f0FsbSJMF29iLptbRiZPl2r5PYpWeZIM2gtuZ5qijPW1p+o2s=;
X-YMail-OSG: vCl2xLUVM1k.OA7ud7Sa.YAMM06TxSzSaITreifYKy2oTNADS7JL9bqipn.hAWCAPfa.dtKD8hfe.G6yZeDYJShvS3p1tvdvTegFNQaXG8TNcfo3lEfOnTh63nrKpA--
Received: from [72.231.8.153] by web50301.mail.re2.yahoo.com via HTTP; Sun, 29 Apr 2007 20:11:36 PDT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Sun, 29 Apr 2007 20:11:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Keyphrase Extraction
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <189822.38264.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Av, look at Lucene's JIRA and search for Mark Harwood.  I believe he once contributed something that does this in JIRA.  If you are interested in a commercial solution, I can recommend LingPipe.

Otis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Lucene Consulting - http://lucene-consulting.com/


----- Original Message ----
From: "av_work@yahoo.com" <av_work@yahoo.com>
To: java-user@lucene.apache.org
Sent: Sunday, April 29, 2007 5:24:17 PM
Subject: Keyphrase Extraction

Hi,

I tried using MoreLikeThis contrib feature to extract "interesting terms" from a document. This works very well - but only for SINGLE words.

I am looking for a way to extra "keyPHRASES" from a document. Is there an easy way to achieve this using Lucene index?

Thanks in advance!
Av

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 09:23:24 2007
Return-Path: <java-user-return-27818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49969 invoked from network); 30 Apr 2007 09:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 09:23:23 -0000
Received: (qmail 59793 invoked by uid 500); 30 Apr 2007 09:23:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59764 invoked by uid 500); 30 Apr 2007 09:23:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59749 invoked by uid 99); 30 Apr 2007 09:23:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 02:23:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.244.24.66] (HELO mail.actia.fr) (213.244.24.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 02:23:13 -0700
Received: (qmail 23549 invoked by uid 83); 30 Apr 2007 09:22:51 -0000
Received: from 172.24.247.53 by mail.int.actia.fr (envelope-from <axel.reymonet@actia.fr>, uid 81) with qmail-scanner-1.24 
 (clamdscan: 0.85.1/899. spamassassin: 3.0.1.  
 Clear:RC:1(172.24.247.53):. 
 Processed in 0.646194 secs); 30 Apr 2007 09:22:51 -0000
Received: from unknown (HELO POSTE811) (172.24.247.53)
  by mail.int.actia.fr with SMTP; 30 Apr 2007 09:22:50 -0000
From: "axel.reymonet" <axel.reymonet@actia.fr>
To: "Lucene ML" <java-user@lucene.apache.org>
Subject: Spanquery problem
Date: Mon, 30 Apr 2007 11:22:51 +0200
Message-ID: <CCEBKGICMIOFNJJPELELOEKKCAAA.axel.reymonet@actia.fr>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001C_01C78B19.E3A36CD0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_001C_01C78B19.E3A36CD0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hello,

I am having some issues with the SpanQuery functionality. As a matter of
fact, I index a single french file containing for instance "climatisation
automatique" (which means automatic air-conditioning) with the classical
FrenchAnalyzer, and when I search in this index with SpanQuery, I have the
following situation :
- I have 1 span for the "climatisation" request
- I have 1 span for the "automatique" request
- I have 0 span for the "climatisation automatique" request
Maybe I am doing something wrong, but I cannot spot my mistake. I have given
the problematic portion of code below. Does anyone have an idea ? Thanks in
advance,

Axel Reymonet


My code is as follows :
- FOR INDEXING
public void fileProcess(String filepath)
{
File index_dir = new File(this.currentProjectPath+"index");
if (index_dir.exists())
    {
    String[] files = index_dir.list();
    for (String f:files)
        {
        File file = new File (this.currentProjectPath+"index/"+f);
        file.delete();
        }
    index_dir.delete();
    }
File toBeIndexed = new File(filepath);
if (!toBeIndexed.exists() || !toBeIndexed.canRead())
    {
    System.out.println("Document directory '"
+toBeIndexed.getAbsolutePath()+ "' does not exist or is not readable, please
check the path");
    System.exit(1);
    }
try {
IndexWriter writer = new IndexWriter(index_dir, new
org.apache.lucene.analysis.fr.FrenchAnalyzer(),true);
writer.addDocument(FileDocument.Document(toBeIndexed));
writer.close();
} catch (IOException e) {System.out.println(" caught a " + e.getClass() +"\n
with message: " + e.getMessage());}
}

-----------------------------------------
- FOR SEARCHING
public void testSF(String searched,String indexPath)
{
try{
IndexReader reader = IndexReader.open(indexPath);
Analyzer analyzer = new org.apache.lucene.analysis.fr.FrenchAnalyzer();
TokenStream requestStream = analyzer.tokenStream("contents",new
StringReader(searched));
HashSet<SpanTermQuery> qSet = new HashSet<SpanTermQuery>();
Token currentToken = requestStream.next();
while (currentToken!=null)
    {
    qSet.add(new SpanTermQuery(new
Term("contents",currentToken.termText())));
    currentToken = requestStream.next();
    }
SpanQuery[] sQ = new SpanQuery [qSet.size()];
int k = 0;
for (SpanTermQuery stq:qSet)
    {
    sQ[k]=stq;
    k++;
    }
SpanNearQuery snQ;
snQ = new SpanNearQuery(sQ,0,true);
Spans spans = snQ.getSpans(reader);
int resultsCpt = 0;
while (spans.next())
    resultsCpt++;
System.out.println("Number of results: "+resultsCpt);
}
catch(IOException ioe){ioe.printStackTrace();}
}
--------------------------------------------
- OUTPUT
Query: climatisation
Number of results: 1
Query: automatique
Number of results: 1
Query: climatisation automatique
Number of results: 0

------=_NextPart_000_001C_01C78B19.E3A36CD0--


From java-user-return-27819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 11:20:05 2007
Return-Path: <java-user-return-27819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96080 invoked from network); 30 Apr 2007 11:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 11:20:05 -0000
Received: (qmail 19309 invoked by uid 500); 30 Apr 2007 11:20:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18785 invoked by uid 500); 30 Apr 2007 11:20:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18770 invoked by uid 99); 30 Apr 2007 11:20:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 04:20:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 04:19:56 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1044225ugc
        for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 04:19:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=p4L9Lo8VYctW8RGMgrHYjkC1aQsaVjPOvbbePZAOv+l7UR9x99gl9XT6eFJmwf/y7PAh8a+3ERqGI85wDtYvf3x3Snzfs1KGNW5Gi+asF/mECaOX4p0jVbDV0Tc9G/tyUUJoBU9qRut6P7++EpHF6QObW39m4xWz9/1dbX0T1yY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=g+fG/hj9vom/G/HGFaGScdaLSoa1UCKntCPNN1qNbPYAx+NwWK7SkPeodqwm/tkvr9RQCUyRLDt/QjMSllPKti+nCbrOtmoPqqcjt1VUNBfZUHnKzNGXfAm0QkpqXSJqjJovPS1CLaNWZWIGZK7YSIChyCAtda0QlhRoGTKmW6w=
Received: by 10.67.50.17 with SMTP id c17mr4446055ugk.1177931975384;
        Mon, 30 Apr 2007 04:19:35 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id e23sm12392056ugd.2007.04.30.04.19.33;
        Mon, 30 Apr 2007 04:19:34 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <463532C1.8030402@promptu.com>
References: <4631966F.9000505@promptu.com> <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com> <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com> <FE61B663-B12A-4778-91E4-7BAAA4B8A6AF@gmail.com> <419CAF49-F5EE-4482-B5AA-2ECD06573F7F@ehatchersolutions.com> <AE8B55AA-D085-460E-ACD6-69A0A230092F@gmail.com> <4632E125.2010406@promptu.com> <DA051436-D3AF-4469-8139-FB80F014EBAD@gmail.com> <463532C1.8030402@promptu.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <16B61278-A59D-4581-A50D-ABB559BFBA00@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Search for docs containing only a certain word in a specified field?
Date: Mon, 30 Apr 2007 13:18:53 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


30 apr 2007 kl. 02.05 skrev Kun Hong:

>> I'm not sure if you mean that it should treat all repetative  
>> tokens as only one token? Then you are better of using a filter  
>> when analyzing text you insert to the index: rather than creating  
>> one token for each the in "the the the the the the" you only  
>> create one. You might also want to use this filter when parsing  
>> user queries. (It will be hard to find the band 'the the'.)
> I can't just use filters because I have to cater for other titles  
> that are not just stop words, which
> should be analyzed normally. (I know this requirement is a bit fussy).

You might want to consider using two fields. One with "normal  
analysis" and one that filters out everything by titles that contain  
nothing but one word repeating over and over again. Then it would be  
sufficient with a single TermQuery to match, and no more need to hack  
in the extra start- and stop tokens.



-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 11:31:15 2007
Return-Path: <java-user-return-27820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98595 invoked from network); 30 Apr 2007 11:31:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 11:31:14 -0000
Received: (qmail 31169 invoked by uid 500); 30 Apr 2007 11:31:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31137 invoked by uid 500); 30 Apr 2007 11:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31125 invoked by uid 99); 30 Apr 2007 11:31:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 04:31:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 04:31:05 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1045523ugc
        for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 04:30:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=cU12o1R4kBewJ5fnQarNMV/25GsldmxgvvvC962pjkB7CG49ZC6yKJ8u+Y6QDahE4Ag0QaX0Uevgn98xm/CYow0KHNspisZ1PZhJ6kPVQLzsVQc9wOypjSGqWP/CDouxxA12Y3PfpDJd4oRj1eDsRx1sFPNePB13rOoIhrAL4y8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=U+YmYUzhPYL8f3HPWfxhh61tNkKDDRZubkWklvesP7FgtSJwQSwrvu9lY3ShYcQPCI7rm9QV1SGPGjx3cRm34WyBbwilS0h0ZFPPN6nBfp3OoVL1y79/Szzg2Qs0ioOV1YwkcoAXYzXC/4XFNE/evWzzN1DSgKx+F50M2hQ//tU=
Received: by 10.67.101.8 with SMTP id d8mr5364478ugm.1177932644525;
        Mon, 30 Apr 2007 04:30:44 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id j33sm9800853ugc.2007.04.30.04.30.41;
        Mon, 30 Apr 2007 04:30:42 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <171dbfa60704290933h3306e5a3r74a8b655e35e073f@mail.gmail.com>
References: <171dbfa60704290933h3306e5a3r74a8b655e35e073f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F7958556-B45D-41C3-948C-3912AEE48F97@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: term frequency calculation in Lucene
Date: Mon, 30 Apr 2007 13:30:04 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


29 apr 2007 kl. 18.33 skrev saikrishna venkata pendyala:

>  Where does the lucene compute term frequency vector ?  
> {filename,function
> name}

DocumentWriter.java
private final void invertDocument(Document doc)

>  Actually the task is to replace the all term frequencies with some
> constant number(integer), how to do this ?

You want to map a diffrent integer than the frequency per term in a  
vector?


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 12:42:32 2007
Return-Path: <java-user-return-27821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19767 invoked from network); 30 Apr 2007 12:42:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 12:42:31 -0000
Received: (qmail 4695 invoked by uid 500); 30 Apr 2007 12:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3756 invoked by uid 500); 30 Apr 2007 12:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3745 invoked by uid 99); 30 Apr 2007 12:42:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 05:42:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.220] (HELO web26009.mail.ukl.yahoo.com) (217.12.10.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Apr 2007 05:42:18 -0700
Received: (qmail 84436 invoked by uid 60001); 30 Apr 2007 12:41:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=J6iMmfhT7yHEDiOMt4rvdUsYJ8OuZ/6+zTw5z9e4/60gMGYeyKEqDqkJy9IRobqUmZoc484Ll32HaO/AWe8AmDsyzGl92uiAFtE+GXomLbn863rcVvEQYSVPRPrL0GEW8Q+ky1ssC6h5laauLhOY1vhbECbeZjNb64b34s9AXB0=;
X-YMail-OSG: _Kw87q4VM1nIpAO5JvYAjy22_gF13W0EN2h7DCOLi0XxayHfN5E.OmuKY5evzO2QboxR8PnvTPBlYwU3gt1BzoQAUgI390.eqjnMkuus3ZbMLQd7PMp.R7gJPPg-
Received: from [193.36.230.96] by web26009.mail.ukl.yahoo.com via HTTP; Mon, 30 Apr 2007 12:41:56 GMT
X-Mailer: YahooMailRC/478 YahooMailWebService/0.7.41.10
Date: Mon, 30 Apr 2007 12:41:56 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Keyphrase Extraction
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <363661.83409.qm@web26009.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I believe the code Otis is referring to is here: http://issues.apache.org/jira/browse/LUCENE-474

This is index-level analysis but could be adapted to work for just a single document.
The implementation is optimised for speed rather than being a thorough examination of phrase significance. 

Cheers
Mark

----- Original Message ----
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
To: java-user@lucene.apache.org
Sent: Monday, 30 April, 2007 4:11:36 AM
Subject: Re: Keyphrase Extraction

Av, look at Lucene's JIRA and search for Mark Harwood.  I believe he once contributed something that does this in JIRA.  If you are interested in a commercial solution, I can recommend LingPipe.

Otis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Lucene Consulting - http://lucene-consulting.com/


----- Original Message ----
From: "av_work@yahoo.com" <av_work@yahoo.com>
To: java-user@lucene.apache.org
Sent: Sunday, April 29, 2007 5:24:17 PM
Subject: Keyphrase Extraction

Hi,

I tried using MoreLikeThis contrib feature to extract "interesting terms" from a document. This works very well - but only for SINGLE words.

I am looking for a way to extra "keyPHRASES" from a document. Is there an easy way to achieve this using Lucene index?

Thanks in advance!
Av

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 12:52:46 2007
Return-Path: <java-user-return-27822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23262 invoked from network); 30 Apr 2007 12:52:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 12:52:45 -0000
Received: (qmail 22072 invoked by uid 500); 30 Apr 2007 12:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22030 invoked by uid 500); 30 Apr 2007 12:52:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22019 invoked by uid 99); 30 Apr 2007 12:52:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 05:52:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 05:52:37 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1890864mue
        for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 05:52:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RScIa/bUyz01Yijn9G1GCfrODnCGGGjsavz8l3uidrg+DO59bRXPIByD7NafLetSkRHhiY0QYsG6tbdch+L/BzIphO6UN9heCpzsy664ZFchYG3F8BsfrUo4To3/1GQLRBoZ+AfPqazfQ3qKmM2iIXEqXReta9wFkErBnBrRPuw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ET0Mnf2N+qO+09RtH6rTVD8yXEyQ642x7giiLY4Vq8QOim04+APYog3U7e5pcZLzrbuMk6g2Z6axGbqiKLGp+EoThy8BGN2JmQRW5dU8ep9iZRHjfZrcabU7nd8F0kv2jOZnPUGnQTaCFOv+9TjkZx+gD2RsQOIZrtz0jnPM9EM=
Received: by 10.82.123.16 with SMTP id v16mr11983282buc.1177937536107;
        Mon, 30 Apr 2007 05:52:16 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Mon, 30 Apr 2007 05:52:16 -0700 (PDT)
Message-ID: <359a92830704300552o1007bfe4q72038283f7fe8061@mail.gmail.com>
Date: Mon, 30 Apr 2007 08:52:16 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Spanquery problem
In-Reply-To: <CCEBKGICMIOFNJJPELELOEKKCAAA.axel.reymonet@actia.fr>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6516_12184885.1177937536054"
References: <CCEBKGICMIOFNJJPELELOEKKCAAA.axel.reymonet@actia.fr>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6516_12184885.1177937536054
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The first thing I'd do is not use a HashSet when you collect your
SpanTermQuerys since the iteration order is not guaranteed. That is,
the order when putting them in is not necessarily the same as
when getting them out. So you may be searching for
"automatique climatisation" rather then "climatisation automatique".

You can easily test this by looking at snQ.toString() to see what query
is actually constructed.....

If that isn't it, post the results and we'll have another go at it....

Erick

On 4/30/07, axel.reymonet <axel.reymonet@actia.fr> wrote:
>
> Hello,
>
> I am having some issues with the SpanQuery functionality. As a matter of
> fact, I index a single french file containing for instance "climatisation
> automatique" (which means automatic air-conditioning) with the classical
> FrenchAnalyzer, and when I search in this index with SpanQuery, I have the
> following situation :
> - I have 1 span for the "climatisation" request
> - I have 1 span for the "automatique" request
> - I have 0 span for the "climatisation automatique" request
> Maybe I am doing something wrong, but I cannot spot my mistake. I have
> given
> the problematic portion of code below. Does anyone have an idea ? Thanks
> in
> advance,
>
> Axel Reymonet
>
>
> My code is as follows :
> - FOR INDEXING
> public void fileProcess(String filepath)
> {
> File index_dir = new File(this.currentProjectPath+"index");
> if (index_dir.exists())
>     {
>     String[] files = index_dir.list();
>     for (String f:files)
>         {
>         File file = new File (this.currentProjectPath+"index/"+f);
>         file.delete();
>         }
>     index_dir.delete();
>     }
> File toBeIndexed = new File(filepath);
> if (!toBeIndexed.exists() || !toBeIndexed.canRead())
>     {
>     System.out.println("Document directory '"
> +toBeIndexed.getAbsolutePath()+ "' does not exist or is not readable,
> please
> check the path");
>     System.exit(1);
>     }
> try {
> IndexWriter writer = new IndexWriter(index_dir, new
> org.apache.lucene.analysis.fr.FrenchAnalyzer(),true);
> writer.addDocument(FileDocument.Document(toBeIndexed));
> writer.close();
> } catch (IOException e) {System.out.println(" caught a " + e.getClass()
> +"\n
> with message: " + e.getMessage());}
> }
>
> -----------------------------------------
> - FOR SEARCHING
> public void testSF(String searched,String indexPath)
> {
> try{
> IndexReader reader = IndexReader.open(indexPath);
> Analyzer analyzer = new org.apache.lucene.analysis.fr.FrenchAnalyzer();
> TokenStream requestStream = analyzer.tokenStream("contents",new
> StringReader(searched));
> HashSet<SpanTermQuery> qSet = new HashSet<SpanTermQuery>();
> Token currentToken = requestStream.next();
> while (currentToken!=null)
>     {
>     qSet.add(new SpanTermQuery(new
> Term("contents",currentToken.termText())));
>     currentToken = requestStream.next();
>     }
> SpanQuery[] sQ = new SpanQuery [qSet.size()];
> int k = 0;
> for (SpanTermQuery stq:qSet)
>     {
>     sQ[k]=stq;
>     k++;
>     }
> SpanNearQuery snQ;
> snQ = new SpanNearQuery(sQ,0,true);
> Spans spans = snQ.getSpans(reader);
> int resultsCpt = 0;
> while (spans.next())
>     resultsCpt++;
> System.out.println("Number of results: "+resultsCpt);
> }
> catch(IOException ioe){ioe.printStackTrace();}
> }
> --------------------------------------------
> - OUTPUT
> Query: climatisation
> Number of results: 1
> Query: automatique
> Number of results: 1
> Query: climatisation automatique
> Number of results: 0
>

------=_Part_6516_12184885.1177937536054--

From java-user-return-27823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 13:47:43 2007
Return-Path: <java-user-return-27823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54927 invoked from network); 30 Apr 2007 13:47:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 13:47:24 -0000
Received: (qmail 22262 invoked by uid 500); 30 Apr 2007 13:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22224 invoked by uid 500); 30 Apr 2007 13:47:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22210 invoked by uid 99); 30 Apr 2007 13:47:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 06:47:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.244.24.66] (HELO mail.actia.fr) (213.244.24.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 06:47:14 -0700
Received: (qmail 6187 invoked by uid 83); 30 Apr 2007 13:46:48 -0000
Received: from 172.24.247.53 by mail.int.actia.fr (envelope-from <axel.reymonet@actia.fr>, uid 81) with qmail-scanner-1.24 
 (clamdscan: 0.85.1/899. spamassassin: 3.0.1.  
 Clear:RC:1(172.24.247.53):. 
 Processed in 0.199247 secs); 30 Apr 2007 13:46:48 -0000
Received: from unknown (HELO POSTE811) (172.24.247.53)
  by mail.int.actia.fr with SMTP; 30 Apr 2007 13:46:47 -0000
From: "axel.reymonet" <axel.reymonet@actia.fr>
To: <java-user@lucene.apache.org>
Subject: RE: Spanquery problem
Date: Mon, 30 Apr 2007 15:46:49 +0200
Message-ID: <CCEBKGICMIOFNJJPELELCEKLCAAA.axel.reymonet@actia.fr>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
In-Reply-To: <359a92830704300552o1007bfe4q72038283f7fe8061@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Thank you for your piece of advice. Indeed, my mistake was to use HashSet
instead of an ArrayList (for instance). I must have been really distracted
when I wrote my code, even more when I checked it! Anyway, thank you again,

Axel Reymonet

-----Message d'origine-----
De : Erick Erickson [mailto:erickerickson@gmail.com]
Envoy : lundi 30 avril 2007 14:52
 : java-user@lucene.apache.org
Objet : Re: Spanquery problem


The first thing I'd do is not use a HashSet when you collect your
SpanTermQuerys since the iteration order is not guaranteed. That is,
the order when putting them in is not necessarily the same as
when getting them out. So you may be searching for
"automatique climatisation" rather then "climatisation automatique".

You can easily test this by looking at snQ.toString() to see what query
is actually constructed.....

If that isn't it, post the results and we'll have another go at it....

Erick

On 4/30/07, axel.reymonet <axel.reymonet@actia.fr> wrote:
>
> Hello,
>
> I am having some issues with the SpanQuery functionality. As a matter of
> fact, I index a single french file containing for instance "climatisation
> automatique" (which means automatic air-conditioning) with the classical
> FrenchAnalyzer, and when I search in this index with SpanQuery, I have the
> following situation :
> - I have 1 span for the "climatisation" request
> - I have 1 span for the "automatique" request
> - I have 0 span for the "climatisation automatique" request
> Maybe I am doing something wrong, but I cannot spot my mistake. I have
> given
> the problematic portion of code below. Does anyone have an idea ? Thanks
> in
> advance,
>
> Axel Reymonet
>
>
> My code is as follows :
> - FOR INDEXING
> public void fileProcess(String filepath)
> {
> File index_dir = new File(this.currentProjectPath+"index");
> if (index_dir.exists())
>     {
>     String[] files = index_dir.list();
>     for (String f:files)
>         {
>         File file = new File (this.currentProjectPath+"index/"+f);
>         file.delete();
>         }
>     index_dir.delete();
>     }
> File toBeIndexed = new File(filepath);
> if (!toBeIndexed.exists() || !toBeIndexed.canRead())
>     {
>     System.out.println("Document directory '"
> +toBeIndexed.getAbsolutePath()+ "' does not exist or is not readable,
> please
> check the path");
>     System.exit(1);
>     }
> try {
> IndexWriter writer = new IndexWriter(index_dir, new
> org.apache.lucene.analysis.fr.FrenchAnalyzer(),true);
> writer.addDocument(FileDocument.Document(toBeIndexed));
> writer.close();
> } catch (IOException e) {System.out.println(" caught a " + e.getClass()
> +"\n
> with message: " + e.getMessage());}
> }
>
> -----------------------------------------
> - FOR SEARCHING
> public void testSF(String searched,String indexPath)
> {
> try{
> IndexReader reader = IndexReader.open(indexPath);
> Analyzer analyzer = new org.apache.lucene.analysis.fr.FrenchAnalyzer();
> TokenStream requestStream = analyzer.tokenStream("contents",new
> StringReader(searched));
> HashSet<SpanTermQuery> qSet = new HashSet<SpanTermQuery>();
> Token currentToken = requestStream.next();
> while (currentToken!=null)
>     {
>     qSet.add(new SpanTermQuery(new
> Term("contents",currentToken.termText())));
>     currentToken = requestStream.next();
>     }
> SpanQuery[] sQ = new SpanQuery [qSet.size()];
> int k = 0;
> for (SpanTermQuery stq:qSet)
>     {
>     sQ[k]=stq;
>     k++;
>     }
> SpanNearQuery snQ;
> snQ = new SpanNearQuery(sQ,0,true);
> Spans spans = snQ.getSpans(reader);
> int resultsCpt = 0;
> while (spans.next())
>     resultsCpt++;
> System.out.println("Number of results: "+resultsCpt);
> }
> catch(IOException ioe){ioe.printStackTrace();}
> }
> --------------------------------------------
> - OUTPUT
> Query: climatisation
> Number of results: 1
> Query: automatique
> Number of results: 1
> Query: climatisation automatique
> Number of results: 0
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 15:17:38 2007
Return-Path: <java-user-return-27824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95668 invoked from network); 30 Apr 2007 15:17:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 15:17:37 -0000
Received: (qmail 9980 invoked by uid 500); 30 Apr 2007 15:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9950 invoked by uid 500); 30 Apr 2007 15:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9939 invoked by uid 99); 30 Apr 2007 15:17:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 08:17:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 08:17:27 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1079600ugc
        for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 08:17:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IOEKRbrLkDddlM+pffYVwM38gksc3tmsxsFTV9MNYQlhRiesVHRQjU9hOIH8dgYdj+hu3j7mIImkN05rn+16207B5ArGDtEbEjCOmY5Y6VN+e3I6RrYtDWbDdsPw/SgZKqBaADkRkCc5Y589S1MO2ztmYLCUhtosbCL8Pqk324I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bp1FPqIGrBC3Jvo860qHFWCDeZ84t6taYh9nBM7nuwF0XYgaiV95xLIqkf7o5D9Ualx7dx8MjUG4OTKUzA7dE7am/R0djuR87KwoBMzDoJzRef7S/mkJ1Cmly+ZnorkbCuzoVs/yHAF9As3HxsB/5aMzBtXbpIr31S+isn2BrHU=
Received: by 10.82.151.14 with SMTP id y14mr12242096bud.1177946225948;
        Mon, 30 Apr 2007 08:17:05 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Mon, 30 Apr 2007 08:17:05 -0700 (PDT)
Message-ID: <359a92830704300817n3a380ac1s1351be9940708b33@mail.gmail.com>
Date: Mon, 30 Apr 2007 11:17:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Spanquery problem
In-Reply-To: <CCEBKGICMIOFNJJPELELCEKLCAAA.axel.reymonet@actia.fr>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7250_31027559.1177946225904"
References: <359a92830704300552o1007bfe4q72038283f7fe8061@mail.gmail.com>
	 <CCEBKGICMIOFNJJPELELCEKLCAAA.axel.reymonet@actia.fr>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7250_31027559.1177946225904
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

If you only knew how many times I've looked at code I've written and
wondered "What  was I thinking" <G>...

Anyway, glad it's working for you
Erick

On 4/30/07, axel.reymonet <axel.reymonet@actia.fr> wrote:
>
> Hello,
>
> Thank you for your piece of advice. Indeed, my mistake was to use HashSet
> instead of an ArrayList (for instance). I must have been really distracte=
d
> when I wrote my code, even more when I checked it! Anyway, thank you
> again,
>
> Axel Reymonet
>
> -----Message d'origine-----
> De : Erick Erickson [mailto:erickerickson@gmail.com]
> Envoy=E9 : lundi 30 avril 2007 14:52
> =C0 : java-user@lucene.apache.org
> Objet : Re: Spanquery problem
>
>
> The first thing I'd do is not use a HashSet when you collect your
> SpanTermQuerys since the iteration order is not guaranteed. That is,
> the order when putting them in is not necessarily the same as
> when getting them out. So you may be searching for
> "automatique climatisation" rather then "climatisation automatique".
>
> You can easily test this by looking at snQ.toString() to see what query
> is actually constructed.....
>
> If that isn't it, post the results and we'll have another go at it....
>
> Erick
>
> On 4/30/07, axel.reymonet <axel.reymonet@actia.fr> wrote:
> >
> > Hello,
> >
> > I am having some issues with the SpanQuery functionality. As a matter o=
f
> > fact, I index a single french file containing for instance
> "climatisation
> > automatique" (which means automatic air-conditioning) with the classica=
l
> > FrenchAnalyzer, and when I search in this index with SpanQuery, I have
> the
> > following situation :
> > - I have 1 span for the "climatisation" request
> > - I have 1 span for the "automatique" request
> > - I have 0 span for the "climatisation automatique" request
> > Maybe I am doing something wrong, but I cannot spot my mistake. I have
> > given
> > the problematic portion of code below. Does anyone have an idea ? Thank=
s
> > in
> > advance,
> >
> > Axel Reymonet
> >
> >
> > My code is as follows :
> > - FOR INDEXING
> > public void fileProcess(String filepath)
> > {
> > File index_dir =3D new File(this.currentProjectPath+"index");
> > if (index_dir.exists())
> >     {
> >     String[] files =3D index_dir.list();
> >     for (String f:files)
> >         {
> >         File file =3D new File (this.currentProjectPath+"index/"+f);
> >         file.delete();
> >         }
> >     index_dir.delete();
> >     }
> > File toBeIndexed =3D new File(filepath);
> > if (!toBeIndexed.exists() || !toBeIndexed.canRead())
> >     {
> >     System.out.println("Document directory '"
> > +toBeIndexed.getAbsolutePath()+ "' does not exist or is not readable,
> > please
> > check the path");
> >     System.exit(1);
> >     }
> > try {
> > IndexWriter writer =3D new IndexWriter(index_dir, new
> > org.apache.lucene.analysis.fr.FrenchAnalyzer(),true);
> > writer.addDocument(FileDocument.Document(toBeIndexed));
> > writer.close();
> > } catch (IOException e) {System.out.println(" caught a " + e.getClass()
> > +"\n
> > with message: " + e.getMessage());}
> > }
> >
> > -----------------------------------------
> > - FOR SEARCHING
> > public void testSF(String searched,String indexPath)
> > {
> > try{
> > IndexReader reader =3D IndexReader.open(indexPath);
> > Analyzer analyzer =3D new org.apache.lucene.analysis.fr.FrenchAnalyzer(=
);
> > TokenStream requestStream =3D analyzer.tokenStream("contents",new
> > StringReader(searched));
> > HashSet<SpanTermQuery> qSet =3D new HashSet<SpanTermQuery>();
> > Token currentToken =3D requestStream.next();
> > while (currentToken!=3Dnull)
> >     {
> >     qSet.add(new SpanTermQuery(new
> > Term("contents",currentToken.termText())));
> >     currentToken =3D requestStream.next();
> >     }
> > SpanQuery[] sQ =3D new SpanQuery [qSet.size()];
> > int k =3D 0;
> > for (SpanTermQuery stq:qSet)
> >     {
> >     sQ[k]=3Dstq;
> >     k++;
> >     }
> > SpanNearQuery snQ;
> > snQ =3D new SpanNearQuery(sQ,0,true);
> > Spans spans =3D snQ.getSpans(reader);
> > int resultsCpt =3D 0;
> > while (spans.next())
> >     resultsCpt++;
> > System.out.println("Number of results: "+resultsCpt);
> > }
> > catch(IOException ioe){ioe.printStackTrace();}
> > }
> > --------------------------------------------
> > - OUTPUT
> > Query: climatisation
> > Number of results: 1
> > Query: automatique
> > Number of results: 1
> > Query: climatisation automatique
> > Number of results: 0
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7250_31027559.1177946225904--

From java-user-return-27825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 15:50:56 2007
Return-Path: <java-user-return-27825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11716 invoked from network); 30 Apr 2007 15:50:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 15:50:55 -0000
Received: (qmail 78704 invoked by uid 500); 30 Apr 2007 15:50:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78589 invoked by uid 500); 30 Apr 2007 15:50:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78578 invoked by uid 99); 30 Apr 2007 15:50:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 08:50:54 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pbm-rico@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Apr 2007 08:50:47 -0700
Received: (qmail 16188 invoked by uid 0); 30 Apr 2007 15:50:25 -0000
Received: from 15.243.169.69 by www068.gmx.net with HTTP;
 Mon, 30 Apr 2007 17:50:25 +0200 (CEST)
Content-Type: text/plain; charset="us-ascii"
Date: Mon, 30 Apr 2007 17:50:25 +0200
From: pbm-rico@gmx.net
In-Reply-To: <359a92830704300817n3a380ac1s1351be9940708b33@mail.gmail.com>
Message-ID: <20070430155025.166420@gmx.net>
MIME-Version: 1.0
References: <359a92830704300552o1007bfe4q72038283f7fe8061@mail.gmail.com>	
 <CCEBKGICMIOFNJJPELELCEKLCAAA.axel.reymonet@actia.fr>
 <359a92830704300817n3a380ac1s1351be9940708b33@mail.gmail.com>
Subject: Re: Re: How to index a lot of fields (without FileNotFoundException:
 Too many open files)
To: java-user@lucene.apache.org
X-Authenticated: #24539349
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX1/qxuMT1GHqbj6kYfP5Qzmce6WE4eif+KLDX53aWU
 ucvWXZU6xpK/ztmAM1Ouqlwr5FYLHkDp1gQQ== 
Content-Transfer-Encoding: 7bit
X-GMX-UID: digDckkLRkkNaqEKBWVqdmxudWkvKFPJ
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for you reply.

We are still using Lucene v1.4.3 and I'm not sure if upgrading is an option. Is there another way of disabling length normalization/document boosts to get rid of those files?

Thanks,
Rico

: >From what I read in the Lucene docs, these .f<m> files store the
: normalization factor for the corresponding field. What exactly is this
: used for and more importantly, can this be disabled so that the files
: are not created in the first place?

field norms are primarily used for length normalization, but they also
store field and document boosts ... more info can be found in the scoring
and Similarity docs.

if you don't care about these things, there is an omitNorms option on the
Field class that can be used to not only reduce the number of open
files you need, but also make your index smaller on disk, and reduce your
memory usage. (i believe it was added in 1.9)



-Hoss

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 19:14:16 2007
Return-Path: <java-user-return-27826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88704 invoked from network); 30 Apr 2007 19:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 19:14:15 -0000
Received: (qmail 65730 invoked by uid 500); 30 Apr 2007 19:14:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65698 invoked by uid 500); 30 Apr 2007 19:14:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65679 invoked by uid 99); 30 Apr 2007 19:14:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 12:14:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.53.31] (HELO smtp106.plus.mail.re2.yahoo.com) (206.190.53.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Apr 2007 12:14:01 -0700
Received: (qmail 87353 invoked from network); 30 Apr 2007 19:13:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.mx;
  h=Received:X-YMail-OSG:Subject:From:To:In-Reply-To:References:Content-Type:Date:Message-Id:Mime-Version:X-Mailer:Content-Transfer-Encoding;
  b=D5RHUyR0jsM2se+TFpwq41tDpbmqjeHWQ6TCHd/T1TO0sDv5oeVFT8ypB8b0yjvrta1xfCvMUX1WG10GW5oAOZOwE0FlL6hbe9BHR0FIErDFzj1Aihgz+DgS4KqMwnddAENzMcwyVQYE2aVDJ5E/u6cLnQvu/m75cXshE4cDLWY=  ;
Received: from unknown (HELO toshiba-debian.local) (ndrw_grn@200.67.231.185 with plain)
  by smtp106.plus.mail.re2.yahoo.com with SMTP; 30 Apr 2007 19:13:36 -0000
X-YMail-OSG: EYybEoAVM1ks8wpP1x_G77AgauYkyIQXUcPS4xoh0ANj7EKHU4w9QWCqwVF9W0l6NcLuOFBnEfks51vKUX.sKvR96a2FlMftTS0Vvn5T44alujd43uS8SOaVPWjBbvF6wI5n_SId5Zr12Zw-
Subject: Re: Snowball and accents filter...? (solved)
From: Andrew Green <ndrw_grn@yahoo.com.mx>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830704281643t6dcb5c85te98634b90054f93e@mail.gmail.com>
References: <1177616788.4622.14.camel@localhost>
	 <Pine.LNX.4.58.0704271654570.32376@hal.rescomp.berkeley.edu>
	 <1177762738.4303.25.camel@localhost>
	 <359a92830704281643t6dcb5c85te98634b90054f93e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Date: Mon, 30 Apr 2007 14:19:18 -0500
Message-Id: <1177960758.4557.22.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

El sb, 28-04-2007 a las 19:43 -0400, Erick Erickson escribi:
> You actually wouldn't have to maintain two versions. You could,
> instead, inject the accentless (stemmed) terms in your single
> index as synonyms (See Lucene In Action). This is easier
> to search and maintain....
> 
> But it also bloats your index by some factor since you're storing two
> words for every accented word in your corpus. And gives you
> headaches if there is more than one accent in the word (do you
> then store all 4 possibilities for two accents? 8 for 3? etc?).
> 
> I think your notion of running the search terms through a dictionary
> is a very good one. That way, your searcher doesn't have to care
> about all this nonsense, and assume correctly-accented characters.
> 
> Erick

After meditating on this a while we decided to just stick to creating a
version of the SpanishStemmer that doesn't use accents. We've gotten it
working, and are donating the code to Lucene, in case the project has
any use for it. Ideally I think it should be merged with the current
SpanishStemmer, so that a single stemmer works both for indexes and
queries that remove accents, and those that don't.

The code is at the end of the message. The author of the modifications
is Sandra Luz Aguirre, who is an intern at the Instituto de
Investigaciones Dr. Jos Mara Luis Mora [1].

Thanks, all, for your help.
Andrew Green

[1] http://www.mora.edu.mx

---------------

SnowballAnalyzerWithoutAccents.java:


package org.apache.lucene.analysis.snowball;
import java.io.Reader;
import org.apache.lucene.analysis.ISOLatin1AccentFilter;
import org.apache.lucene.analysis.LowerCaseFilter;
import org.apache.lucene.analysis.StopFilter;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardFilter;
import org.apache.lucene.analysis.standard.StandardTokenizer;


public class SnowballAnalyzerWithoutAccents extends SnowballAnalyzer   {

        public SnowballAnalyzerWithoutAccents(String name, String[] stopWords)  {
                super(name, stopWords);
        }

        public TokenStream tokenStream(String fieldName, Reader reader) {
            TokenStream result = new StandardTokenizer(reader);
            result = new StandardFilter(result);
            result = new LowerCaseFilter(result);
            if (stopSet != null)
              result = new StopFilter(result, stopSet);
            result =new  ISOLatin1AccentFilter(result);
            result = new SnowballFilter(result, name);

            return result;


        }

}

---------------

Spanish2Stemmer.java (based on SpanishStemmer; works as expected when
used with SnowballAnalyzerWithoutAccents):

package net.sf.snowball.ext;
import net.sf.snowball.Among;
import net.sf.snowball.SnowballProgram;

public class Spanish2Stemmer extends SnowballProgram {
        private Among a_0[] = {
                new Among ( "", -1, 6, "", this),
                new Among ( "a", 0, 1, "", this),
                new Among ( "e", 0, 2, "", this),
                new Among ( "i", 0, 3, "", this),
                new Among ( "o", 0, 4, "", this),
                new Among ( "u", 0, 5, "", this)
            };

            private Among a_1[] = {
                new Among ( "la", -1, -1, "", this),
                new Among ( "sela", 0, -1, "", this),
                new Among ( "le", -1, -1, "", this),
                new Among ( "me", -1, -1, "", this),
                new Among ( "se", -1, -1, "", this),
                new Among ( "lo", -1, -1, "", this),
                new Among ( "selo", 5, -1, "", this),
                new Among ( "las", -1, -1, "", this),
                new Among ( "selas", 7, -1, "", this),
                new Among ( "les", -1, -1, "", this),
                new Among ( "los", -1, -1, "", this),
                new Among ( "selos", 10, -1, "", this),
                new Among ( "nos", -1, -1, "", this)
            };

            private Among a_2[] = {
                new Among ( "ando", -1, 6, "", this),
                new Among ( "iendo", -1, 6, "", this),
                new Among ( "yendo", -1, 7, "", this),
                new Among ( "ando", -1, 2, "", this),
                new Among ( "iendo", -1, 1, "", this),
                new Among ( "ar", -1, 6, "", this),
                new Among ( "er", -1, 6, "", this),
                new Among ( "ir", -1, 6, "", this),
                new Among ( "ar", -1, 3, "", this),
                new Among ( "er", -1, 4, "", this),
                new Among ( "ir", -1, 5, "", this)
            };

            private Among a_3[] = {
                new Among ( "ic", -1, -1, "", this),
                new Among ( "ad", -1, -1, "", this),
                new Among ( "os", -1, -1, "", this),
                new Among ( "iv", -1, 1, "", this)
            };

            private Among a_4[] = {
                new Among ( "able", -1, 1, "", this),
                new Among ( "ible", -1, 1, "", this)
            };

            private Among a_5[] = {
                new Among ( "ic", -1, 1, "", this),
                new Among ( "abil", -1, 1, "", this),
                new Among ( "iv", -1, 1, "", this)
            };

            private Among a_6[] = {
                new Among ( "ica", -1, 1, "", this),
                new Among ( "encia", -1, 5, "", this),
                new Among ( "adora", -1, 2, "", this),
                new Among ( "osa", -1, 1, "", this),
                new Among ( "ista", -1, 1, "", this),
                new Among ( "iva", -1, 9, "", this),
                new Among ( "anza", -1, 1, "", this),
                new Among ( "logia", -1, 3, "", this),
                new Among ( "idad", -1, 8, "", this),
                new Among ( "able", -1, 1, "", this),
                new Among ( "ible", -1, 1, "", this),
                new Among ( "mente", -1, 7, "", this),
                new Among ( "amente", 11, 6, "", this),
                new Among ( "acion", -1, 2, "", this),
                new Among ( "ucion", -1, 4, "", this),
                new Among ( "ico", -1, 1, "", this),
                new Among ( "ismo", -1, 1, "", this),
                new Among ( "oso", -1, 1, "", this),
                new Among ( "amiento", -1, 1, "", this),
                new Among ( "imiento", -1, 1, "", this),
                new Among ( "ivo", -1, 9, "", this),
                new Among ( "ador", -1, 2, "", this),
                new Among ( "icas", -1, 1, "", this),
                new Among ( "encias", -1, 5, "", this),
                new Among ( "adoras", -1, 2, "", this),
                new Among ( "osas", -1, 1, "", this),
                new Among ( "istas", -1, 1, "", this),
                new Among ( "ivas", -1, 9, "", this),
                new Among ( "anzas", -1, 1, "", this),
                new Among ( "logias", -1, 3, "", this),
                new Among ( "idades", -1, 8, "", this),
                new Among ( "ables", -1, 1, "", this),
                new Among ( "ibles", -1, 1, "", this),
                new Among ( "aciones", -1, 2, "", this),
                new Among ( "uciones", -1, 4, "", this),
                new Among ( "adores", -1, 2, "", this),
                new Among ( "icos", -1, 1, "", this),
                new Among ( "ismos", -1, 1, "", this),
                new Among ( "osos", -1, 1, "", this),
                new Among ( "amientos", -1, 1, "", this),
                new Among ( "imientos", -1, 1, "", this),
                new Among ( "ivos", -1, 9, "", this)
            };

            private Among a_7[] = {
                new Among ( "ya", -1, 1, "", this),
                new Among ( "ye", -1, 1, "", this),
                new Among ( "yan", -1, 1, "", this),
                new Among ( "yen", -1, 1, "", this),
                new Among ( "yeron", -1, 1, "", this),
                new Among ( "yendo", -1, 1, "", this),
                new Among ( "yo", -1, 1, "", this),
                new Among ( "yas", -1, 1, "", this),
                new Among ( "yes", -1, 1, "", this),
                new Among ( "yais", -1, 1, "", this),
                new Among ( "yamos", -1, 1, "", this),
                new Among ( "yo", -1, 1, "", this)
            };

            private Among a_8[] = {
                new Among ( "aba", -1, 2, "", this),
                new Among ( "ada", -1, 2, "", this),
                new Among ( "ida", -1, 2, "", this),
                new Among ( "ara", -1, 2, "", this),
                new Among ( "iera", -1, 2, "", this),
                new Among ( "ia", -1, 2, "", this),
                new Among ( "aria", 5, 2, "", this),
                new Among ( "eria", 5, 2, "", this),
                new Among ( "iria", 5, 2, "", this),
                new Among ( "ad", -1, 2, "", this),
                new Among ( "ed", -1, 2, "", this),
                new Among ( "id", -1, 2, "", this),
                new Among ( "ase", -1, 2, "", this),
                new Among ( "iese", -1, 2, "", this),
                new Among ( "aste", -1, 2, "", this),
                new Among ( "iste", -1, 2, "", this),
                new Among ( "an", -1, 2, "", this),
                new Among ( "aban", 16, 2, "", this),
                new Among ( "aran", 16, 2, "", this),
                new Among ( "ieran", 16, 2, "", this),
                new Among ( "ian", 16, 2, "", this),
                new Among ( "arian", 20, 2, "", this),
                new Among ( "erian", 20, 2, "", this),
                new Among ( "irian", 20, 2, "", this),
                new Among ( "en", -1, 1, "", this),
                new Among ( "asen", 24, 2, "", this),
                new Among ( "iesen", 24, 2, "", this),
                new Among ( "aron", -1, 2, "", this),
                new Among ( "ieron", -1, 2, "", this),
                new Among ( "aran", -1, 2, "", this),
                new Among ( "eran", -1, 2, "", this),
                new Among ( "iran", -1, 2, "", this),
                new Among ( "ado", -1, 2, "", this),
                new Among ( "ido", -1, 2, "", this),
                new Among ( "ando", -1, 2, "", this),
                new Among ( "iendo", -1, 2, "", this),
                new Among ( "ar", -1, 2, "", this),
                new Among ( "er", -1, 2, "", this),
                new Among ( "ir", -1, 2, "", this),
                new Among ( "as", -1, 2, "", this),
                new Among ( "abas", 39, 2, "", this),
                new Among ( "adas", 39, 2, "", this),
                new Among ( "idas", 39, 2, "", this),
                new Among ( "aras", 39, 2, "", this),
                new Among ( "ieras", 39, 2, "", this),
                new Among ( "ias", 39, 2, "", this),
                new Among ( "arias", 45, 2, "", this),
                new Among ( "erias", 45, 2, "", this),
                new Among ( "irias", 45, 2, "", this),
                new Among ( "es", -1, 1, "", this),
                new Among ( "ases", 49, 2, "", this),
                new Among ( "ieses", 49, 2, "", this),
                new Among ( "abais", -1, 2, "", this),
                new Among ( "arais", -1, 2, "", this),
                new Among ( "ierais", -1, 2, "", this),
                new Among ( "iais", -1, 2, "", this),
                new Among ( "ariais", 55, 2, "", this),
                new Among ( "eriais", 55, 2, "", this),
                new Among ( "iriais", 55, 2, "", this),
                new Among ( "aseis", -1, 2, "", this),
                new Among ( "ieseis", -1, 2, "", this),
                new Among ( "asteis", -1, 2, "", this),
                new Among ( "isteis", -1, 2, "", this),
                new Among ( "ais", -1, 2, "", this),
                new Among ( "eis", -1, 1, "", this),
                new Among ( "areis", 64, 2, "", this),
                new Among ( "ereis", 64, 2, "", this),
                new Among ( "ireis", 64, 2, "", this),
                new Among ( "ados", -1, 2, "", this),
                new Among ( "idos", -1, 2, "", this),
                new Among ( "amos", -1, 2, "", this),
                new Among ( "abamos", 70, 2, "", this),
                new Among ( "aramos", 70, 2, "", this),
                new Among ( "ieramos", 70, 2, "", this),
                new Among ( "iamos", 70, 2, "", this),
                new Among ( "ariamos", 74, 2, "", this),
                new Among ( "eriamos", 74, 2, "", this),
                new Among ( "iriamos", 74, 2, "", this),
                new Among ( "emos", -1, 1, "", this),
                new Among ( "aremos", 78, 2, "", this),
                new Among ( "eremos", 78, 2, "", this),
                new Among ( "iremos", 78, 2, "", this),
                new Among ( "asemos", 78, 2, "", this),
                new Among ( "iesemos", 78, 2, "", this),
                new Among ( "imos", -1, 2, "", this),
                new Among ( "aras", -1, 2, "", this),
                new Among ( "eras", -1, 2, "", this),
                new Among ( "iras", -1, 2, "", this),
                new Among ( "is", -1, 2, "", this),
                new Among ( "ara", -1, 2, "", this),
                new Among ( "era", -1, 2, "", this),
                new Among ( "ira", -1, 2, "", this),
                new Among ( "are", -1, 2, "", this),
                new Among ( "ere", -1, 2, "", this),
                new Among ( "ire", -1, 2, "", this),
                new Among ( "io", -1, 2, "", this)
            };

            private Among a_9[] = {
                new Among ( "a", -1, 1, "", this),
                new Among ( "e", -1, 2, "", this),
                new Among ( "o", -1, 1, "", this),
                new Among ( "os", -1, 1, "", this),
                new Among ( "a", -1, 1, "", this),
                new Among ( "e", -1, 2, "", this),
                new Among ( "i", -1, 1, "", this),
                new Among ( "o", -1, 1, "", this)
            };

            private static final char g_v[] = {17, 65, 16, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 1, 17, 4, 10 };

            private int I_p2;
            private int I_p1;
            private int I_pV;

            private void copy_from(Spanish2Stemmer other) {
                I_p2 = other.I_p2;
                I_p1 = other.I_p1;
                I_pV = other.I_pV;
                super.copy_from(other);
            }

            private boolean r_mark_regions() {
                int v_1;
                int v_2;
                int v_3;
                int v_6;
                int v_8;
                // (, line 31
                I_pV = limit;
                I_p1 = limit;
                I_p2 = limit;
                // do, line 37
                v_1 = cursor;
                lab0: do {
                    // (, line 37
                    // or, line 39
                    lab1: do {
                        v_2 = cursor;
                        lab2: do {
                            // (, line 38
                            if (!(in_grouping(g_v, 97, 252)))
                            {
                                break lab2;
                            }
                            // or, line 38
                            lab3: do {
                                v_3 = cursor;
                                lab4: do {
                                    // (, line 38
                                    if (!(out_grouping(g_v, 97, 252)))
                                    {
                                        break lab4;
                                    }
                                    // gopast, line 38
                                    golab5: while(true)
                                    {
                                        lab6: do {
                                            if (!(in_grouping(g_v, 97, 252)))
                                            {
                                                break lab6;
                                            }
                                            break golab5;
                                        } while (false);
                                        if (cursor >= limit)
                                        {
                                            break lab4;
                                        }
                                        cursor++;
                                    }
                                    break lab3;
                                } while (false);
                                cursor = v_3;
                                // (, line 38
                                if (!(in_grouping(g_v, 97, 252)))
                                {
                                    break lab2;
                                }
                                // gopast, line 38
                                golab7: while(true)
                                {
                                    lab8: do {
                                        if (!(out_grouping(g_v, 97, 252)))
                                        {
                                            break lab8;
                                        }
                                        break golab7;
                                    } while (false);
                                    if (cursor >= limit)
                                    {
                                        break lab2;
                                    }
                                    cursor++;
                                }
                            } while (false);
                            break lab1;
                        } while (false);
                        cursor = v_2;
                        // (, line 40
                        if (!(out_grouping(g_v, 97, 252)))
                        {
                            break lab0;
                        }
                        // or, line 40
                        lab9: do {
                            v_6 = cursor;
                            lab10: do {
                                // (, line 40
                                if (!(out_grouping(g_v, 97, 252)))
                                {
                                    break lab10;
                                }
                                // gopast, line 40
                                golab11: while(true)
                                {
                                    lab12: do {
                                        if (!(in_grouping(g_v, 97, 252)))
                                        {
                                            break lab12;
                                        }
                                        break golab11;
                                    } while (false);
                                    if (cursor >= limit)
                                    {
                                        break lab10;
                                    }
                                    cursor++;
                                }
                                break lab9;
                            } while (false);
                            cursor = v_6;
                            // (, line 40
                            if (!(in_grouping(g_v, 97, 252)))
                            {
                                break lab0;
                            }
                            // next, line 40
                            if (cursor >= limit)
                            {
                                break lab0;
                            }
                            cursor++;
                        } while (false);
                    } while (false);
                    // setmark pV, line 41
                    I_pV = cursor;
                } while (false);
                cursor = v_1;
                // do, line 43
                v_8 = cursor;
                lab13: do {
                    // (, line 43
                    // gopast, line 44
                    golab14: while(true)
                    {
                        lab15: do {
                            if (!(in_grouping(g_v, 97, 252)))
                            {
                                break lab15;
                            }
                            break golab14;
                        } while (false);
                        if (cursor >= limit)
                        {
                            break lab13;
                        }
                        cursor++;
                    }
                    // gopast, line 44
                    golab16: while(true)
                    {
                        lab17: do {
                            if (!(out_grouping(g_v, 97, 252)))
                            {
                                break lab17;
                            }
                            break golab16;
                        } while (false);
                        if (cursor >= limit)
                        {
                            break lab13;
                        }
                        cursor++;
                    }
                    // setmark p1, line 44
                    I_p1 = cursor;
                    // gopast, line 45
                    golab18: while(true)
                    {
                        lab19: do {
                            if (!(in_grouping(g_v, 97, 252)))
                            {
                                break lab19;
                            }
                            break golab18;
                        } while (false);
                        if (cursor >= limit)
                        {
                            break lab13;
                        }
                        cursor++;
                    }
                    // gopast, line 45
                    golab20: while(true)
                    {
                        lab21: do {
                            if (!(out_grouping(g_v, 97, 252)))
                            {
                                break lab21;
                            }
                            break golab20;
                        } while (false);
                        if (cursor >= limit)
                        {
                            break lab13;
                        }
                        cursor++;
                    }
                    // setmark p2, line 45
                    I_p2 = cursor;
                } while (false);
                cursor = v_8;
                return true;
            }

            private boolean r_postlude() {
                int among_var;
                int v_1;
                // repeat, line 49
                replab0: while(true)
                {
                    v_1 = cursor;
                    lab1: do {
                        // (, line 49
                        // [, line 50
                        bra = cursor;
                        // substring, line 50
                        among_var = find_among(a_0, 6);
                        if (among_var == 0)
                        {
                            break lab1;
                        }
                        // ], line 50
                        ket = cursor;
                        switch(among_var) {
                            case 0:
                                break lab1;
                            case 1:
                                // (, line 51
                                // <-, line 51
                                slice_from("a");
                                break;
                            case 2:
                                // (, line 52
                                // <-, line 52
                                slice_from("e");
                                break;
                            case 3:
                                // (, line 53
                                // <-, line 53
                                slice_from("i");
                                break;
                            case 4:
                                // (, line 54
                                // <-, line 54
                                slice_from("o");
                                break;
                            case 5:
                                // (, line 55
                                // <-, line 55
                                slice_from("u");
                                break;
                            case 6:
                                // (, line 57
                                // next, line 57
                                if (cursor >= limit)
                                {
                                    break lab1;
                                }
                                cursor++;
                                break;
                        }
                        continue replab0;
                    } while (false);
                    cursor = v_1;
                    break replab0;
                }
                return true;
            }

            private boolean r_RV() {
                if (!(I_pV <= cursor))
                {
                    return false;
                }
                return true;
            }

            private boolean r_R1() {
                if (!(I_p1 <= cursor))
                {
                    return false;
                }
                return true;
            }

            private boolean r_R2() {
                if (!(I_p2 <= cursor))
                {
                    return false;
                }
                return true;
            }

            private boolean r_attached_pronoun() {
                int among_var;
                // (, line 67
                // [, line 68
                ket = cursor;
                // substring, line 68
                if (find_among_b(a_1, 13) == 0)
                {
                    return false;
                }
                // ], line 68
                bra = cursor;
                // substring, line 72
                among_var = find_among_b(a_2, 11);
                if (among_var == 0)
                {
                    return false;
                }
                // call RV, line 72
                if (!r_RV())
                {
                    return false;
                }
                switch(among_var) {
                    case 0:
                        return false;
                    case 1:
                        // (, line 73
                        // ], line 73
                        bra = cursor;
                        // <-, line 73
                        slice_from("iendo");
                        break;
                    case 2:
                        // (, line 74
                        // ], line 74
                        bra = cursor;
                        // <-, line 74
                        slice_from("ando");
                        break;
                    case 3:
                        // (, line 75
                        // ], line 75
                        bra = cursor;
                        // <-, line 75
                        slice_from("ar");
                        break;
                    case 4:
                        // (, line 76
                        // ], line 76
                        bra = cursor;
                        // <-, line 76
                        slice_from("er");
                        break;
                    case 5:
                        // (, line 77
                        // ], line 77
                        bra = cursor;
                        // <-, line 77
                        slice_from("ir");
                        break;
                    case 6:
                        // (, line 81
                        // delete, line 81
                        slice_del();
                        break;
                    case 7:
                        // (, line 82
                        // literal, line 82
                        if (!(eq_s_b(1, "u")))
                        {
                            return false;
                        }
                        // delete, line 82
                        slice_del();
                        break;
                }
                return true;
            }

            private boolean r_standard_suffix() {
                int among_var;
                int v_1;
                int v_2;
                int v_3;
                int v_4;
                int v_5;
                // (, line 86
                // [, line 87
                ket = cursor;
                // substring, line 87
                among_var = find_among_b(a_6, 42);
                if (among_var == 0)
                {
                    return false;
                }
                // ], line 87
                bra = cursor;
                switch(among_var) {
                    case 0:
                        return false;
                    case 1:
                        // (, line 98
                        // call R2, line 99
                        if (!r_R2())
                        {
                            return false;
                        }
                        // delete, line 99
                        slice_del();
                        break;
                    case 2:
                        // (, line 103
                        // call R2, line 104
                        if (!r_R2())
                        {
                            return false;
                        }
                        // delete, line 104
                        slice_del();
                        // try, line 105
                        v_1 = limit - cursor;
                        lab0: do {
                            // (, line 105
                            // [, line 105
                            ket = cursor;
                            // literal, line 105
                            if (!(eq_s_b(2, "ic")))
                            {
                                cursor = limit - v_1;
                                break lab0;
                            }
                            // ], line 105
                            bra = cursor;
                            // call R2, line 105
                            if (!r_R2())
                            {
                                cursor = limit - v_1;
                                break lab0;
                            }
                            // delete, line 105
                            slice_del();
                        } while (false);
                        break;
                    case 3:
                        // (, line 109
                        // call R2, line 110
                        if (!r_R2())
                        {
                            return false;
                        }
                        // <-, line 110
                        slice_from("log");
                        break;
                    case 4:
                        // (, line 113
                        // call R2, line 114
                        if (!r_R2())
                        {
                            return false;
                        }
                        // <-, line 114
                        slice_from("u");
                        break;
                    case 5:
                        // (, line 117
                        // call R2, line 118
                        if (!r_R2())
                        {
                            return false;
                        }
                        // <-, line 118
                        slice_from("ente");
                        break;
                    case 6:
                        // (, line 121
                        // call R1, line 122
                        if (!r_R1())
                        {
                            return false;
                        }
                        // delete, line 122
                        slice_del();
                        // try, line 123
                        v_2 = limit - cursor;
                        lab1: do {
                            // (, line 123
                            // [, line 124
                            ket = cursor;
                            // substring, line 124
                            among_var = find_among_b(a_3, 4);
                            if (among_var == 0)
                            {
                                cursor = limit - v_2;
                                break lab1;
                            }
                            // ], line 124
                            bra = cursor;
                            // call R2, line 124
                            if (!r_R2())
                            {
                                cursor = limit - v_2;
                                break lab1;
                            }
                            // delete, line 124
                            slice_del();
                            switch(among_var) {
                                case 0:
                                    cursor = limit - v_2;
                                    break lab1;
                                case 1:
                                    // (, line 125
                                    // [, line 125
                                    ket = cursor;
                                    // literal, line 125
                                    if (!(eq_s_b(2, "at")))
                                    {
                                        cursor = limit - v_2;
                                        break lab1;
                                    }
                                    // ], line 125
                                    bra = cursor;
                                    // call R2, line 125
                                    if (!r_R2())
                                    {
                                        cursor = limit - v_2;
                                        break lab1;
                                    }
                                    // delete, line 125
                                    slice_del();
                                    break;
                            }
                        } while (false);
                        break;
                    case 7:
                        // (, line 133
                        // call R2, line 134
                        if (!r_R2())
                        {
                            return false;
                        }
                        // delete, line 134
                        slice_del();
                        // try, line 135
                        v_3 = limit - cursor;
                        lab2: do {
                            // (, line 135
                            // [, line 136
                            ket = cursor;
                            // substring, line 136
                            among_var = find_among_b(a_4, 2);
                            if (among_var == 0)
                            {
                                cursor = limit - v_3;
                                break lab2;
                            }
                            // ], line 136
                            bra = cursor;
                            switch(among_var) {
                                case 0:
                                    cursor = limit - v_3;
                                    break lab2;
                                case 1:
                                    // (, line 138
                                    // call R2, line 138
                                    if (!r_R2())
                                    {
                                        cursor = limit - v_3;
                                        break lab2;
                                    }
                                    // delete, line 138
                                    slice_del();
                                    break;
                            }
                        } while (false);
                        break;
                    case 8:
                        // (, line 144
                        // call R2, line 145
                        if (!r_R2())
                        {
                            return false;
                        }
                        // delete, line 145
                        slice_del();
                        // try, line 146
                        v_4 = limit - cursor;
                        lab3: do {
                            // (, line 146
                            // [, line 147
                            ket = cursor;
                            // substring, line 147
                            among_var = find_among_b(a_5, 3);
                            if (among_var == 0)
                            {
                                cursor = limit - v_4;
                                break lab3;
                            }
                            // ], line 147
                            bra = cursor;
                            switch(among_var) {
                                case 0:
                                    cursor = limit - v_4;
                                    break lab3;
                                case 1:
                                    // (, line 150
                                    // call R2, line 150
                                    if (!r_R2())
                                    {
                                        cursor = limit - v_4;
                                        break lab3;
                                    }
                                    // delete, line 150
                                    slice_del();
                                    break;
                            }
                        } while (false);
                        break;
                    case 9:
                        // (, line 156
                        // call R2, line 157
                        if (!r_R2())
                        {
                            return false;
                        }
                        // delete, line 157
                        slice_del();
                        // try, line 158
                        v_5 = limit - cursor;
                        lab4: do {
                            // (, line 158
                            // [, line 159
                            ket = cursor;
                            // literal, line 159
                            if (!(eq_s_b(2, "at")))
                            {
                                cursor = limit - v_5;
                                break lab4;
                            }
                            // ], line 159
                            bra = cursor;
                            // call R2, line 159
                            if (!r_R2())
                            {
                                cursor = limit - v_5;
                                break lab4;
                            }
                            // delete, line 159
                            slice_del();
                        } while (false);
                        break;
                }
                return true;
            }

            private boolean r_y_verb_suffix() {
                int among_var;
                int v_1;
                int v_2;
                // (, line 165
                // setlimit, line 166
                v_1 = limit - cursor;
                // tomark, line 166
                if (cursor < I_pV)
                {
                    return false;
                }
                cursor = I_pV;
                v_2 = limit_backward;
                limit_backward = cursor;
                cursor = limit - v_1;
                // (, line 166
                // [, line 166
                ket = cursor;
                // substring, line 166
                among_var = find_among_b(a_7, 12);
                if (among_var == 0)
                {
                    limit_backward = v_2;
                    return false;
                }
                // ], line 166
                bra = cursor;
                limit_backward = v_2;
                switch(among_var) {
                    case 0:
                        return false;
                    case 1:
                        // (, line 169
                        // literal, line 169
                        if (!(eq_s_b(1, "u")))
                        {
                            return false;
                        }
                        // delete, line 169
                        slice_del();
                        break;
                }
                return true;
            }

            private boolean r_verb_suffix() {
                int among_var;
                int v_1;
                int v_2;
                int v_3;
                int v_4;
                // (, line 173
                // setlimit, line 174
                v_1 = limit - cursor;
                // tomark, line 174
                if (cursor < I_pV)
                {
                    return false;
                }
                cursor = I_pV;
                v_2 = limit_backward;
                limit_backward = cursor;
                cursor = limit - v_1;
                // (, line 174
                // [, line 174
                ket = cursor;
                // substring, line 174
                among_var = find_among_b(a_8, 96);
                if (among_var == 0)
                {
                    limit_backward = v_2;
                    return false;
                }
                // ], line 174
                bra = cursor;
                limit_backward = v_2;
                switch(among_var) {
                    case 0:
                        return false;
                    case 1:
                        // (, line 177
                        // try, line 177
                        v_3 = limit - cursor;
                        lab0: do {
                            // (, line 177
                            // literal, line 177
                            if (!(eq_s_b(1, "u")))
                            {
                                cursor = limit - v_3;
                                break lab0;
                            }
                            // test, line 177
                            v_4 = limit - cursor;
                            // literal, line 177
                            if (!(eq_s_b(1, "g")))
                            {
                                cursor = limit - v_3;
                                break lab0;
                            }
                            cursor = limit - v_4;
                        } while (false);
                        // ], line 177
                        bra = cursor;
                        // delete, line 177
                        slice_del();
                        break;
                    case 2:
                        // (, line 198
                        // delete, line 198
                        slice_del();
                        break;
                }
                return true;
            }

            private boolean r_residual_suffix() {
                int among_var;
                int v_1;
                int v_2;
                // (, line 202
                // [, line 203
                ket = cursor;
                // substring, line 203
                among_var = find_among_b(a_9, 8);
                if (among_var == 0)
                {
                    return false;
                }
                // ], line 203
                bra = cursor;
                switch(among_var) {
                    case 0:
                        return false;
                    case 1:
                        // (, line 206
                        // call RV, line 206
                        if (!r_RV())
                        {
                            return false;
                        }
                        // delete, line 206
                        slice_del();
                        break;
                    case 2:
                        // (, line 208
                        // call RV, line 208
                        if (!r_RV())
                        {
                            return false;
                        }
                        // delete, line 208
                        slice_del();
                        // try, line 208
                        v_1 = limit - cursor;
                        lab0: do {
                            // (, line 208
                            // [, line 208
                            ket = cursor;
                            // literal, line 208
                            if (!(eq_s_b(1, "u")))
                            {
                                cursor = limit - v_1;
                                break lab0;
                            }
                            // ], line 208
                            bra = cursor;
                            // test, line 208
                            v_2 = limit - cursor;
                            // literal, line 208
                            if (!(eq_s_b(1, "g")))
                            {
                                cursor = limit - v_1;
                                break lab0;
                            }
                            cursor = limit - v_2;
                            // call RV, line 208
                            if (!r_RV())
                            {
                                cursor = limit - v_1;
                                break lab0;
                            }
                            // delete, line 208
                            slice_del();
                        } while (false);
                        break;
                }
                return true;
            }

            public boolean stem() {
                int v_1;
                int v_2;
                int v_3;
                int v_4;
                int v_5;
                int v_6;
                // (, line 213
                // do, line 214
                v_1 = cursor;
                lab0: do {
                    // call mark_regions, line 214
                    if (!r_mark_regions())
                    {
                        break lab0;
                    }
                } while (false);
                cursor = v_1;
                // backwards, line 215
                limit_backward = cursor; cursor = limit;
                // (, line 215
                // do, line 216
                v_2 = limit - cursor;
                lab1: do {
                    // call attached_pronoun, line 216
                    if (!r_attached_pronoun())
                    {
                        break lab1;
                    }
                } while (false);
                cursor = limit - v_2;
                // do, line 217
                v_3 = limit - cursor;
                lab2: do {
                    // (, line 217
                    // or, line 217
                    lab3: do {
                        v_4 = limit - cursor;
                        lab4: do {
                            // call standard_suffix, line 217
                            if (!r_standard_suffix())
                            {
                                break lab4;
                            }
                            break lab3;
                        } while (false);
                        cursor = limit - v_4;
                        lab5: do {
                            // call y_verb_suffix, line 218
                            if (!r_y_verb_suffix())
                            {
                                break lab5;
                            }
                            break lab3;
                        } while (false);
                        cursor = limit - v_4;
                        // call verb_suffix, line 219
                        if (!r_verb_suffix())
                        {
                            break lab2;
                        }
                    } while (false);
                } while (false);
                cursor = limit - v_3;
                // do, line 221
                v_5 = limit - cursor;
                lab6: do {
                    // call residual_suffix, line 221
                    if (!r_residual_suffix())
                    {
                        break lab6;
                    }
                } while (false);
                cursor = limit - v_5;
                cursor = limit_backward;            // do, line 223
                v_6 = cursor;
                lab7: do {
                    // call postlude, line 223
                    if (!r_postlude())
                    {
                        break lab7;
                    }
                } while (false);
                cursor = v_6;
                return true;
            }

}




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 19:33:31 2007
Return-Path: <java-user-return-27827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 973 invoked from network); 30 Apr 2007 19:33:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 19:33:30 -0000
Received: (qmail 99957 invoked by uid 500); 30 Apr 2007 19:33:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99918 invoked by uid 500); 30 Apr 2007 19:33:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99903 invoked by uid 99); 30 Apr 2007 19:33:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 12:33:29 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 12:33:22 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HibcL-00010a-Mr
	for java-user@lucene.apache.org; Mon, 30 Apr 2007 12:33:01 -0700
Message-ID: <10259327.post@talk.nabble.com>
Date: Mon, 30 Apr 2007 12:33:01 -0700 (PDT)
From: escher2k <escher2k@yahoo.com>
To: java-user@lucene.apache.org
Subject: Modifying norms...
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: escher2k@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I want to modify the norms to only include values between 0 and 100.
Currently, I have a custom implementation of the default similarity. Is it
sufficient to override the encodeNorm and decodeNorm methods from the base
implementation in my custom Similarity class ? Please let me know if there
are any performance implications to this.
-- 
View this message in context: http://www.nabble.com/Modifying-norms...-tf3671499.html#a10259327
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 19:55:45 2007
Return-Path: <java-user-return-27828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8708 invoked from network); 30 Apr 2007 19:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 19:55:44 -0000
Received: (qmail 51585 invoked by uid 500); 30 Apr 2007 19:55:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51558 invoked by uid 500); 30 Apr 2007 19:55:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51547 invoked by uid 99); 30 Apr 2007 19:55:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 12:55:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 12:55:36 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7A6545B76E; Mon, 30 Apr 2007 12:55:16 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 702277F403
	for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 12:55:16 -0700 (PDT)
Date: Mon, 30 Apr 2007 12:55:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Modifying norms...
In-Reply-To: <10259327.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0704301253240.17834@hal.rescomp.berkeley.edu>
References: <10259327.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I want to modify the norms to only include values between 0 and 100.
: Currently, I have a custom implementation of the default similarity. Is it
: sufficient to override the encodeNorm and decodeNorm methods from the base
: implementation in my custom Similarity class ? Please let me know if there
: are any performance implications to this.

those methods are static, so it's not possible to override them.  if you
are not using doc or field boosts, overriding lengthNorm is suitable for
your goal.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 21:19:25 2007
Return-Path: <java-user-return-27829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41482 invoked from network); 30 Apr 2007 21:19:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 21:19:23 -0000
Received: (qmail 96546 invoked by uid 500); 30 Apr 2007 21:19:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96514 invoked by uid 500); 30 Apr 2007 21:19:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96503 invoked by uid 99); 30 Apr 2007 21:19:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 14:19:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 14:19:14 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1138325ugc
        for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 14:18:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=rAtQZCMvbZlmJh7hgOzXupSd5ycLbQXGpJycbE8segzIqeTMrmSER6K6KfwRhV/jmDPdJ7hVo4bOK/OxrOXK44MwfvVagTbtalMV99ZDfrblHWEBIpHWid7r9grGKzqc5kKfrV1ucLGYB6evrEYGDwnAOSixaZ9AG8Q07or+i3s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Scc4HudgiI4CnrYZ/DbglCnIY8E02TftXQYBpHsZl92NyHRQy4T09HdsAJGnJZzt90IyW+EZ9sn/HXgykBur51Ouib+MqzwAAii9Tk7WWQwjKoQNEwfkg2aV41OE1MUXtfLFn25FiLIPzLAFrQxYMjgOMt428CCat9EzFKJj7D0=
Received: by 10.67.93.7 with SMTP id v7mr1246196ugl.1177967932197;
        Mon, 30 Apr 2007 14:18:52 -0700 (PDT)
Received: by 10.67.45.17 with HTTP; Mon, 30 Apr 2007 14:18:52 -0700 (PDT)
Message-ID: <126142c0704301418i249c12d6y72f0671a6a80564c@mail.gmail.com>
Date: Mon, 30 Apr 2007 18:18:52 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Does someone have compared NFS versus OCFS2 in a Lucene grid installation?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All:
  Does someone have compared NFS versus OCFS2 in a Lucene grid installation?
  The Oracle Cluster Filesystem 2 is shipped by default since linux
kernel 2.6.16-rc1+
   OCFS2 is a cluster optimized file system used by the Oracle RAC
configuration (http://oss.oracle.com/projects/ocfs2/).
   One of the possible installation is using dedicated hardware such
as NAS, but with a few RPMs file its possible to use a software for
the client and server iSCSI implementation
(http://en.wikipedia.org/wiki/Iscsi).
   It means we can configure three machines as:
   m1: /dev/sda1 (local), /dev/sdb1 (local, exported via iscsi-target)
   m2: /dev/sda1 (local), /dev/sdb1 (remote, imported using iscsi)
   m3: /dev/sda1 (local), /dev/sdb1 (remote, imported using iscsi)
   The three server can mount /dev/sdb1 as /lucene-storage-area
directory and working on it as NFS.
   m1 can be used as Lucene for updating the index.
   m2 and m3 can be used as Lucene readers.
   We can configure three VMWare virtual machines with this scenario,
but we don't have a Lucene test suite configured as grid.
   Any help to configure the test suite will be useful!!!
   Best regards, Marcelo.
-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 22:08:45 2007
Return-Path: <java-user-return-27830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57810 invoked from network); 30 Apr 2007 22:08:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 22:08:44 -0000
Received: (qmail 55289 invoked by uid 500); 30 Apr 2007 22:08:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55190 invoked by uid 500); 30 Apr 2007 22:08:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55179 invoked by uid 99); 30 Apr 2007 22:08:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 15:08:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 66.249.90.180 as permitted sender)
Received: from [66.249.90.180] (HELO ik-out-1112.google.com) (66.249.90.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 15:08:36 -0700
Received: by ik-out-1112.google.com with SMTP id b32so1398750ika
        for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 15:08:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=A1krgIxdhJ5FHSZ3k5k/EP2GAlj6DrQ2juXMhUVczviQmLdWubsvMxMvrlZL8a4ztzKC9ZOL12Jrz73JA+VCqVZmqdc2J5ytKX2N24AT7yemAKilRiQvBugBuMKn9BWmHc16OWwCUtocsSNfGELiGBZBEYT8QZu5jwi3jc8IJd8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eGYd84h9d7GANrpCGI7jBBAIHBIrMHcZfNW/VLzjbaOIXvo9q3fZfnl5RNL25odQ6KoFuvSBqqUYIyB7Kwx++C6jtNe40MzhuZ3pm5YDF2jg/SGpJitq5NG5GwDGOTjsng3z24efiOvsZO3Pg1ZXHde/kBh9dCTs56PmjGgQZK0=
Received: by 10.82.146.14 with SMTP id t14mr13026785bud.1177970894717;
        Mon, 30 Apr 2007 15:08:14 -0700 (PDT)
Received: by 10.82.113.8 with HTTP; Mon, 30 Apr 2007 15:08:14 -0700 (PDT)
Message-ID: <3d2ce8cb0704301508ldf0b39bve46a82cb3763eb2@mail.gmail.com>
Date: Mon, 30 Apr 2007 15:08:14 -0700
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re: How to index a lot of fields (without FileNotFoundException: Too many open files)
In-Reply-To: <20070430155025.166420@gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <359a92830704300552o1007bfe4q72038283f7fe8061@mail.gmail.com>
	 <CCEBKGICMIOFNJJPELELCEKLCAAA.axel.reymonet@actia.fr>
	 <359a92830704300817n3a380ac1s1351be9940708b33@mail.gmail.com>
	 <20070430155025.166420@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/30/07, pbm-rico@gmx.net <pbm-rico@gmx.net> wrote:
> Thanks for you reply.
>
> We are still using Lucene v1.4.3 and I'm not sure if upgrading is an option. Is there another way of disabling length normalization/document boosts to get rid of those files?

Why not raise the limit of open files on your system?  (man ulimit)

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 22:22:51 2007
Return-Path: <java-user-return-27831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60658 invoked from network); 30 Apr 2007 22:22:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 22:22:49 -0000
Received: (qmail 73050 invoked by uid 500); 30 Apr 2007 22:22:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73005 invoked by uid 500); 30 Apr 2007 22:22:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72994 invoked by uid 99); 30 Apr 2007 22:22:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 15:22:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pbm-rico@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Apr 2007 15:22:41 -0700
Received: (qmail 12468 invoked by uid 0); 30 Apr 2007 22:22:20 -0000
Received: from 15.243.169.69 by www056.gmx.net with HTTP;
 Tue, 01 May 2007 00:22:20 +0200 (CEST)
Content-Type: text/plain; charset="us-ascii"
Date: Tue, 01 May 2007 00:22:20 +0200
From: pbm-rico@gmx.net
In-Reply-To: <3d2ce8cb0704301508ldf0b39bve46a82cb3763eb2@mail.gmail.com>
Message-ID: <20070430222220.157910@gmx.net>
MIME-Version: 1.0
References: <359a92830704300552o1007bfe4q72038283f7fe8061@mail.gmail.com>	
 <CCEBKGICMIOFNJJPELELCEKLCAAA.axel.reymonet@actia.fr>	
 <359a92830704300817n3a380ac1s1351be9940708b33@mail.gmail.com>	
 <20070430155025.166420@gmx.net>
 <3d2ce8cb0704301508ldf0b39bve46a82cb3763eb2@mail.gmail.com>
Subject: Re: Re: How to index a lot of fields (without FileNotFoundException:
 Too many open files)
To: java-user@lucene.apache.org
X-Authenticated: #24539349
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX1+PvEs8qyePDNezijRIrAC2PIndwmZSbmtiKYLSiw
 itaoKx7+JOsIe4DHYdT4kXpbM3D2VdX9v+Vw== 
Content-Transfer-Encoding: 7bit
X-GMX-UID: KF4EdZ4KPTR+FuJDRzMwT7g5c2tpZIvo
X-Virus-Checked: Checked by ClamAV on apache.org

I thought about using ulimit, but it does not scale. In the scenario that the app has to support, client applications could create hundreds of thousands of unique properties, which would result in this many indexable fields.

Based on previous answers, the way out of this problem while still being scalable would be to use 2.1 where there is only 1 norm file.

However, it does not look like upgrading is an option, so I wonder if my current approach of mapping a property that a client app creates to one field name is workable at all. Maybe I have to introduce some sort of mapping of client properties to a fixed number of indexable fields.

...or modify the 1.4.3 code myself to get rid of norm files.

-Rico

-------- Original-Nachricht --------
Datum: Mon, 30 Apr 2007 15:08:14 -0700
Von: "Mike Klaas" <mike.klaas@gmail.com>
An: java-user@lucene.apache.org
Betreff: Re: Re: How to index a lot of fields (without FileNotFoundException: Too many open files)

> On 4/30/07, pbm-rico@gmx.net <pbm-rico@gmx.net> wrote:
> > Thanks for you reply.
> >
> > We are still using Lucene v1.4.3 and I'm not sure if upgrading is an
> option. Is there another way of disabling length normalization/document boosts
> to get rid of those files?
> 
> Why not raise the limit of open files on your system?  (man ulimit)
> 
> -Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 23:38:05 2007
Return-Path: <java-user-return-27832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79750 invoked from network); 30 Apr 2007 23:38:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 23:38:04 -0000
Received: (qmail 76772 invoked by uid 500); 30 Apr 2007 23:38:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76617 invoked by uid 500); 30 Apr 2007 23:38:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76606 invoked by uid 99); 30 Apr 2007 23:38:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 16:38:03 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 16:37:56 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HifR2-0007um-1K
	for java-user@lucene.apache.org; Mon, 30 Apr 2007 16:37:36 -0700
Message-ID: <10262494.post@talk.nabble.com>
Date: Mon, 30 Apr 2007 16:37:36 -0700 (PDT)
From: escher2k <escher2k@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying norms...
In-Reply-To: <Pine.LNX.4.58.0704301253240.17834@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: escher2k@yahoo.com
References: <10259327.post@talk.nabble.com> <Pine.LNX.4.58.0704301253240.17834@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Hoss. Suppose, I go ahead and modify Similarity.java from 
static {
    for (int i = 0; i < 256; i++)
      NORM_TABLE[i] = SmallFloat.byte315ToFloat((byte)i);
  }
TO
static {
    for (int i = 0; i < 256; i++)
      NORM_TABLE[i] = (float) i  * 100.0 /256.0;
  } 

Should this work ?

Thanks.

P.S. This is a very custom implementation. For the specific problem that I
have, the lengthNorm
is set to 1 (independent of numTerms). 


Chris Hostetter wrote:
> 
> 
> : I want to modify the norms to only include values between 0 and 100.
> : Currently, I have a custom implementation of the default similarity. Is
> it
> : sufficient to override the encodeNorm and decodeNorm methods from the
> base
> : implementation in my custom Similarity class ? Please let me know if
> there
> : are any performance implications to this.
> 
> those methods are static, so it's not possible to override them.  if you
> are not using doc or field boosts, overriding lengthNorm is suitable for
> your goal.
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Modifying-norms...-tf3671499.html#a10262494
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 23:44:16 2007
Return-Path: <java-user-return-27833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80592 invoked from network); 30 Apr 2007 23:44:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 23:44:15 -0000
Received: (qmail 89639 invoked by uid 500); 30 Apr 2007 23:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89308 invoked by uid 500); 30 Apr 2007 23:44:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89295 invoked by uid 99); 30 Apr 2007 23:44:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 16:44:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 16:44:07 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E6CF35B76C; Mon, 30 Apr 2007 16:43:45 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C3B977F403
	for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 16:43:45 -0700 (PDT)
Date: Mon, 30 Apr 2007 16:43:45 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Modifying norms...
In-Reply-To: <10262494.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0704301641120.29101@hal.rescomp.berkeley.edu>
References: <10259327.post@talk.nabble.com> <Pine.LNX.4.58.0704301253240.17834@hal.rescomp.berkeley.edu>
 <10262494.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Thanks Hoss. Suppose, I go ahead and modify Similarity.java from
	...
: Should this work ?

it depends on your definition of "work" ... if that code is what you want
it to do, then yes: it will do what you want it to do.

: P.S. This is a very custom implementation. For the specific problem that I
: have, the lengthNorm
: is set to 1 (independent of numTerms).

if your length norm is always 1, why do you care what the norm values are?
are you using document and field boosts? ... if "no" then none of this
shoudl matter.  if "yes" then why not just change the boost values you use
to get the behavior you want instead of modifying the encoding mechanism?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 30 23:45:54 2007
Return-Path: <java-user-return-27834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80758 invoked from network); 30 Apr 2007 23:45:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Apr 2007 23:45:53 -0000
Received: (qmail 91825 invoked by uid 500); 30 Apr 2007 23:45:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91498 invoked by uid 500); 30 Apr 2007 23:45:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91487 invoked by uid 99); 30 Apr 2007 23:45:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 16:45:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 16:45:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DB5D65B76C; Mon, 30 Apr 2007 16:45:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D1C6F7F403
	for <java-user@lucene.apache.org>; Mon, 30 Apr 2007 16:45:25 -0700 (PDT)
Date: Mon, 30 Apr 2007 16:45:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Re: How to index a lot of fields (without FileNotFoundException:
 Too many open files)
In-Reply-To: <20070430222220.157910@gmx.net>
Message-ID: <Pine.LNX.4.58.0704301643540.29101@hal.rescomp.berkeley.edu>
References: <359a92830704300552o1007bfe4q72038283f7fe8061@mail.gmail.com> 
 <CCEBKGICMIOFNJJPELELCEKLCAAA.axel.reymonet@actia.fr> 
 <359a92830704300817n3a380ac1s1351be9940708b33@mail.gmail.com> 
 <20070430155025.166420@gmx.net> <3d2ce8cb0704301508ldf0b39bve46a82cb3763eb2@mail.gmail.com>
 <20070430222220.157910@gmx.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: However, it does not look like upgrading is an option, so I wonder if my
: current approach of mapping a property that a client app creates to one
: field name is workable at all. Maybe I have to introduce some sort of
: mapping of client properties to a fixed number of indexable fields.
:
: ...or modify the 1.4.3 code myself to get rid of norm files.

if you can't upgrade past 1.4.3, but you can modify 1.4.3 to change
things (like file formats), why not "modify" your 1.4.3 install to be a
2.1 install?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 01 00:59:30 2007
Return-Path: <java-user-return-27835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93547 invoked from network); 1 May 2007 00:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 May 2007 00:59:29 -0000
Received: (qmail 64612 invoked by uid 500); 1 May 2007 00:59:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64586 invoked by uid 500); 1 May 2007 00:59:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64575 invoked by uid 99); 1 May 2007 00:59:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 17:59:28 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 17:59:20 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Highn-0004qm-NH
	for java-user@lucene.apache.org; Mon, 30 Apr 2007 17:58:59 -0700
Message-ID: <10263146.post@talk.nabble.com>
Date: Mon, 30 Apr 2007 17:58:59 -0700 (PDT)
From: escher2k <escher2k@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying norms...
In-Reply-To: <Pine.LNX.4.58.0704301641120.29101@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: escher2k@yahoo.com
References: <10259327.post@talk.nabble.com> <Pine.LNX.4.58.0704301253240.17834@hal.rescomp.berkeley.edu> <10262494.post@talk.nabble.com> <Pine.LNX.4.58.0704301641120.29101@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Essentially what I am trying to do is boost every document by a certain
factor, so that
the boost is between 1.0 and 2.0. After this, I we are trying to do a search
across multiple fields
and have a computation based purely on tf. Example -
if (field1)
  tf = some function
else if (field2)
  tf = some other function
...

Now the boost is getting rounded to 1.0, 1.25, 1.5 or 2.0 due to the norm is
stored, whereas I want more precision (e.g. 1.31, 1.45 etc). The boost is
used for ranking documents. 

Thanks.


Chris Hostetter wrote:
> 
> 
> : Thanks Hoss. Suppose, I go ahead and modify Similarity.java from
> 	...
> : Should this work ?
> 
> it depends on your definition of "work" ... if that code is what you want
> it to do, then yes: it will do what you want it to do.
> 
> : P.S. This is a very custom implementation. For the specific problem that
> I
> : have, the lengthNorm
> : is set to 1 (independent of numTerms).
> 
> if your length norm is always 1, why do you care what the norm values are?
> are you using document and field boosts? ... if "no" then none of this
> shoudl matter.  if "yes" then why not just change the boost values you use
> to get the behavior you want instead of modifying the encoding mechanism?
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Modifying-norms...-tf3671499.html#a10263146
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 01 03:33:26 2007
Return-Path: <java-user-return-27836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45543 invoked from network); 1 May 2007 03:33:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 May 2007 03:33:25 -0000
Received: (qmail 10663 invoked by uid 500); 1 May 2007 03:33:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10619 invoked by uid 500); 1 May 2007 03:33:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10604 invoked by uid 99); 1 May 2007 03:33:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 20:33:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.144.27.9] (HELO surfers.oz.agile.tv) (203.144.27.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2007 20:33:18 -0700
Received: from [192.168.16.9] (woodgate.oz.agile.tv [192.168.16.9])
	by surfers.oz.agile.tv (Postfix) with ESMTP id 9C1DBA69EC
	for <java-user@lucene.apache.org>; Tue,  1 May 2007 13:32:51 +1000 (EST)
Message-ID: <4636B4E2.1060306@promptu.com>
Date: Tue, 01 May 2007 13:32:50 +1000
From: Kun Hong <khong@promptu.com>
User-Agent: Thunderbird 1.5 (X11/20060313)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search for docs containing only a certain word in a specified
 field?
References: <4631966F.9000505@promptu.com> <830F5B92-7FDA-46DA-96EA-7889405C5DA9@gmail.com> <08F9E6A9-56BD-4C2C-AFFC-281A6424248D@ehatchersolutions.com> <FE61B663-B12A-4778-91E4-7BAAA4B8A6AF@gmail.com> <419CAF49-F5EE-4482-B5AA-2ECD06573F7F@ehatchersolutions.com> <AE8B55AA-D085-460E-ACD6-69A0A230092F@gmail.com> <4632E125.2010406@promptu.com> <DA051436-D3AF-4469-8139-FB80F014EBAD@gmail.com> <463532C1.8030402@promptu.com> <16B61278-A59D-4581-A50D-ABB559BFBA00@gmail.com>
In-Reply-To: <16B61278-A59D-4581-A50D-ABB559BFBA00@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



karl wettin wrote:
>
> 30 apr 2007 kl. 02.05 skrev Kun Hong:
>
>>> I'm not sure if you mean that it should treat all repetative tokens 
>>> as only one token? Then you are better of using a filter when 
>>> analyzing text you insert to the index: rather than creating one 
>>> token for each the in "the the the the the the" you only create one. 
>>> You might also want to use this filter when parsing user queries. 
>>> (It will be hard to find the band 'the the'.)
>> I can't just use filters because I have to cater for other titles 
>> that are not just stop words, which
>> should be analyzed normally. (I know this requirement is a bit fussy).
>
> You might want to consider using two fields. One with "normal 
> analysis" and one that filters out everything by titles that contain 
> nothing but one word repeating over and over again. Then it would be 
> sufficient with a single TermQuery to match, and no more need to hack 
> in the extra start- and stop tokens.
>

That's right. I should have think of it.
Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


