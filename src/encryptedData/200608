From java-user-return-22422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 07:53:19 2006
Return-Path: <java-user-return-22422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29165 invoked from network); 1 Aug 2006 07:53:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 07:53:19 -0000
Received: (qmail 44859 invoked by uid 500); 1 Aug 2006 07:53:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44826 invoked by uid 500); 1 Aug 2006 07:53:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44815 invoked by uid 99); 1 Aug 2006 07:53:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 00:53:12 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mekin.m@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 00:53:11 -0700
Received: by py-out-1112.google.com with SMTP id d80so947448pyd
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 00:52:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cQuZgJYVbcXpaAjw0NVxcnpYOzRuK3XnKxMbUDBvmqdcOeaaNjm9PSnQHavEa/itH8cJ8FxdQoFgvvwdko/VjCEw952Eo3afvHxQ0b4D21nwE3pD4MN55zBbFKck3CPugRMQDkyf1sJwTu0+Q86ElEIsoSl/JRDU5Aas+VIJ39w=
Received: by 10.65.93.3 with SMTP id v3mr563233qbl;
        Tue, 01 Aug 2006 00:52:49 -0700 (PDT)
Received: by 10.35.28.13 with HTTP; Tue, 1 Aug 2006 00:52:48 -0700 (PDT)
Message-ID: <865c77680608010052h70811fcai1cc516997b8fc522@mail.gmail.com>
Date: Tue, 1 Aug 2006 13:22:48 +0530
From: Mek <mekin.m@gmail.com>
To: java-user@lucene.apache.org
Subject: Does lucene performance suffer with a lot of empty fields ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_69671_11864321.1154418768970"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_69671_11864321.1154418768970
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have 1 generic index, but am Indexing a lot of different things, like
actors, politicians, scientists, sportsmen.

And as you can see that though there are some common fields, like name &
DOB, there are also fields for each of these types of people that are
different.
e.g. Actors will have "Movies, TV shows, ", politicians will have "Political
party...", scientists will have "publications, inventions ..."

Also, I do not want to create multiple indexes, as the number of such types
& hence the number of indices can get out of hand, eg I could decide to add
"footballers", "tennis players".

I am sure I am not the 1st who's facing this problem.

>From what I gather, I can go ahead & create an Index & for each Document &
only add the relevant fields. Is this correct?
I should still be able to search with queries like "mel Movies:braveheart".
Right ?

Would this impact the search performance ?
Any other words of caution for me ?

Thanks,
 mek

------=_Part_69671_11864321.1154418768970--

From java-user-return-22423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 08:00:47 2006
Return-Path: <java-user-return-22423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31008 invoked from network); 1 Aug 2006 08:00:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 08:00:47 -0000
Received: (qmail 58442 invoked by uid 500); 1 Aug 2006 08:00:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58383 invoked by uid 500); 1 Aug 2006 08:00:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58372 invoked by uid 99); 1 Aug 2006 08:00:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 01:00:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 01:00:39 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79d595f44788ad3ee4c9c@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 1 Aug 2006 10:00:17 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6B540.854CDEBB"
Subject: FileNotFoundException
Date: Tue, 1 Aug 2006 10:00:14 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF407@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException
Thread-Index: Aca1QITCozK8Qlv0TRaqd5M/n4v69g==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6B540.854CDEBB
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

When the indexing process still running on a index and I try to search
something on this index I retrive this error message:
java.io.FileNotFoundException:
\\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system cannot find
the file specified)

How can I solve this.


------_=_NextPart_001_01C6B540.854CDEBB--

From java-user-return-22424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 08:37:38 2006
Return-Path: <java-user-return-22424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47110 invoked from network); 1 Aug 2006 08:37:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 08:37:38 -0000
Received: (qmail 5178 invoked by uid 500); 1 Aug 2006 08:37:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5138 invoked by uid 500); 1 Aug 2006 08:37:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5127 invoked by uid 99); 1 Aug 2006 08:37:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 01:37:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 01:37:30 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8656F5B763; Tue,  1 Aug 2006 01:37:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8389C7F403
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 01:37:10 -0700 (PDT)
Date: Tue, 1 Aug 2006 01:37:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Sorting
In-Reply-To: <20060731112533.B831A1886D@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0608010126140.32202@hal.rescomp.berkeley.edu>
References: <20060731112533.B831A1886D@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I take your point that Berkley DB would be much less clumsy, but an
: application that's already using a relational database for other purposes
: might as well use that relational database, no?

if you already have some need to access data about each matching doc from
a relational DB, then sure you might as well let it sort for you -- but
just bcause your APP has some DB connections open doesn't mean that's a
worthwhile reason to ask it to do the sort ... your app might have some
netowrk connections open to an IMAP server as well .. that doesn't mean
you should convert the docs to email messages and ask the IMAP server to
sort them :)

: I'm not really with you on the random access file, Chris. Here's where I am
: up to with my [mis-]understanding...
:
: I want to sort on 2 terms. Happily these can be ints (the first is an INT
: corresponding to a 10 minute timestamp "YYMMDDHHI" and the second INT is a
: hash of a string, used to group similar documents together within those 10
: minute timestamps). When I initially warm up the FieldCache (first search
: after opening the Searcher), I start by generating two random access files
: with int values at offsets corresponding to document IDs for each of these;
: the first file would have ints corresponding to the timestamp and the second
: would have integers corresponding to the hash. I'd then need to generate a
: third file which is equivalent to an array dimensioned by document ID, with
: document IDs in compound sort order??

i'm not sure why you think you need the third file ... you should be
able to use the two files you created exactly the way the existing code
would use the two arrays if you were using an in memory FieldCache (with
file seeks instead of array lookups) .. i think the class you want to look
at is FieldSortedHitQueue

: In a big index, it will take a while to walk through all of the documents to
: generate the first two random access files and the sort process required to
: generate the sorted file is going to be hard work.

well .. yes.  but that's the trade off, the reason for the RAM based
FieldCache is speed .. if you don't have that RAM to use, then doing
the same things on disk gets slower.


Bear in mind, there have been some improvements recently to the ability to
grab individual stored fields per document (FieldSelector is the name of
the class i think) ... i haven't tried those out yet, but they could make
Sorting on a stored field (which wouldn't require building up any cache -
RAM or Disk based) feasible regardless of the size of your result sets ...
but i haven't tried that yet.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 08:43:59 2006
Return-Path: <java-user-return-22425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48803 invoked from network); 1 Aug 2006 08:43:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 08:43:58 -0000
Received: (qmail 15685 invoked by uid 500); 1 Aug 2006 08:43:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15665 invoked by uid 500); 1 Aug 2006 08:43:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15636 invoked by uid 99); 1 Aug 2006 08:43:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 01:43:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 01:43:47 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 167B15B763; Tue,  1 Aug 2006 01:43:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 118937F403
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 01:43:25 -0700 (PDT)
Date: Tue, 1 Aug 2006 01:43:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
In-Reply-To: <44CE0543.6050302@mac.com>
Message-ID: <Pine.LNX.4.58.0608010138450.32202@hal.rescomp.berkeley.edu>
References: <20060731021247.11211.qmail@web50315.mail.yahoo.com>
 <44CE0543.6050302@mac.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Sure I would love to!  Can you ping me at michael.prichard@mac.com and
: let me know what I need to do?   Do I just post it to JIRA?

instructions on submitting code can be found in the wiki..

http://wiki.apache.org/jakarta-lucene/HowToContribute

note in particular that since you are primarily submiting new files,
you'll need to "svn add" them locally in order for them to be included in
patches created by "svn diff".

As for where it might make sense for them to live: there is an existing
"contrib/analyzers" package which might make the most sense.

Also note that while test cases aren't stricly mandatory for newly
contributed code, it does go a long way towards documenting expected
behavior, and encouraging committers to commit it :)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 08:49:32 2006
Return-Path: <java-user-return-22426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51428 invoked from network); 1 Aug 2006 08:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 08:49:32 -0000
Received: (qmail 28583 invoked by uid 500); 1 Aug 2006 08:49:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28315 invoked by uid 500); 1 Aug 2006 08:49:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28303 invoked by uid 99); 1 Aug 2006 08:49:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 01:49:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 01:49:25 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k718nAjm001825
	for <java-user@lucene.apache.org>; Tue, 1 Aug 2006 10:49:10 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 54F648B8EF
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 10:49:02 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 04394-01 for <java-user@lucene.apache.org>;
 Tue,  1 Aug 2006 10:49:01 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 4D1058B818
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 10:49:01 +0200 (CEST)
Message-ID: <44CF157C.9000101@uni-hd.de>
Date: Tue, 01 Aug 2006 10:49:00 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: dash-words
References: <1153705956.28605.144.camel@localhost>	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>	 <1153741901.28605.184.camel@localhost>	 <1153746947.28605.213.camel@localhost>	 <1153747041.28605.215.camel@localhost>	 <1153751420.28605.221.camel@localhost>	 <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>	 <44C6379A.40000@uni-hd.de> <c68e39170607250842l6169aca0w2d6313cb2e43d1b9@mail.gmail.com>
In-Reply-To: <c68e39170607250842l6169aca0w2d6313cb2e43d1b9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Yonik,

>> So a Phrase search to "The xmen story" will fail. With a slop of 1 the
>> doc will be found.
>>
>> But when generating the query I won't know when to use a slop. So adding
>> slops isn't a nice solution.
> 
> If you can't tolerate slop, this is a problem.

I use the WordDelimiterFilter now without slop, because in other cases
it's an amelioration. But I (or better my app) stumbled now over a non
Phrase Query:

If I am searching for a title named (sorry for the german example).

"lage der arbeiterjugend in westberlin" (indexed with
WordDelimiterFilter + lowercase)

with a query like this +arbeiterjugend +west-berlin I get no results.

org.apache.lucene.queryParser.QueryParser.parse makes this query (with
WordDelimiterFilter) with Default QueryParser.AND_OPERATOR:

+titel:arbeiterjugend +titel:"west (berlin westberlin)"

with +arbeiterjugend +westberlin I get the result.

It seems that the synonyms don't work with the query. How do you solve
this in Solr? Do I have to build a TermQuery?

thanks in advance,

martin







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 09:17:27 2006
Return-Path: <java-user-return-22427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59339 invoked from network); 1 Aug 2006 09:17:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 09:17:27 -0000
Received: (qmail 60375 invoked by uid 500); 1 Aug 2006 09:17:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60351 invoked by uid 500); 1 Aug 2006 09:17:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60340 invoked by uid 99); 1 Aug 2006 09:17:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 02:17:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 02:17:19 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 992EC18878; Tue,  1 Aug 2006 09:16:57 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id BE06718699
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 09:16:55 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Sorting
Date: Tue, 1 Aug 2006 10:16:51 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <Pine.LNX.4.58.0608010126140.32202@hal.rescomp.berkeley.edu>
thread-index: Aca1Rb1N1zglA40TTk6EVK9HqxYJ6AAAYdxQ
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0080_01C6B553.9AA3B1D0"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060801091655.BE06718699@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0080_01C6B553.9AA3B1D0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

>  file seeks instead of array lookups

I'm with you now. So you do seeks in your comparator. For a large index you
might as well use java.io.RandomAccessFile for the "array", because there
would be little value in buffering when the comparator is liable to jump all
around the file. This sounds very expensive, though. If you don't open a
Searcher to frequently, it makes sense (in my muddled mind) to pre-sort to
reduce the number of seeks. That was the half-baked idea of the third file,
which essentially orders document IDs.

> Bear in mind, there have been some improvements recently to the ability to
grab individual stored fields per document....

I can't see anything like that in 2.0. Is that something in the Lucene HEAD
build?

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 01 August 2006 09:37
To: java-user@lucene.apache.org
Subject: RE: Sorting


: I take your point that Berkley DB would be much less clumsy, but an
: application that's already using a relational database for other purposes
: might as well use that relational database, no?

if you already have some need to access data about each matching doc from a
relational DB, then sure you might as well let it sort for you -- but just
bcause your APP has some DB connections open doesn't mean that's a
worthwhile reason to ask it to do the sort ... your app might have some
netowrk connections open to an IMAP server as well .. that doesn't mean you
should convert the docs to email messages and ask the IMAP server to sort
them :)

: I'm not really with you on the random access file, Chris. Here's where I
am
: up to with my [mis-]understanding...
:
: I want to sort on 2 terms. Happily these can be ints (the first is an INT
: corresponding to a 10 minute timestamp "YYMMDDHHI" and the second INT is a
: hash of a string, used to group similar documents together within those 10
: minute timestamps). When I initially warm up the FieldCache (first search
: after opening the Searcher), I start by generating two random access files
: with int values at offsets corresponding to document IDs for each of
these;
: the first file would have ints corresponding to the timestamp and the
second
: would have integers corresponding to the hash. I'd then need to generate a
: third file which is equivalent to an array dimensioned by document ID,
with
: document IDs in compound sort order??

i'm not sure why you think you need the third file ... you should be able to
use the two files you created exactly the way the existing code would use
the two arrays if you were using an in memory FieldCache (with file seeks
instead of array lookups) .. i think the class you want to look at is
FieldSortedHitQueue

: In a big index, it will take a while to walk through all of the documents
to
: generate the first two random access files and the sort process required
to
: generate the sorted file is going to be hard work.

well .. yes.  but that's the trade off, the reason for the RAM based
FieldCache is speed .. if you don't have that RAM to use, then doing the
same things on disk gets slower.


Bear in mind, there have been some improvements recently to the ability to
grab individual stored fields per document (FieldSelector is the name of the
class i think) ... i haven't tried those out yet, but they could make
Sorting on a stored field (which wouldn't require building up any cache -
RAM or Disk based) feasible regardless of the size of your result sets ...
but i haven't tried that yet.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0080_01C6B553.9AA3B1D0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDgwMTA5
MTY1MFowIwYJKoZIhvcNAQkEMRYEFHm+SUTnlWYcpBmPK5ey4qQFdHLkMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBADO+Ln1z7OlaKMkgxFTtMwQDeW3lqUmGqGU+
l1LlWzV1DIwqGeHnOVhXGHs6dlAxumP+FcwDq8B0jlpp8OtToyd9J1D/JxgpybxikPto5T1j4Sl8
XWhNuaAXAO33uMneTDoXKg8CQcFK0xK92HCQm6zFr10pggEF0Rjd5/3CNZS7LXNXPKiW4MP16gTk
keffWPuoFEd+AZIxsMDkTIQ+5dBTvDOGdyXShwz+FRFG9TdSVsRQKIVChOcdMMbRnsagDfYjZnXF
8JwDPoGyY8v0s1H+o5lF7uvS4kNd0z/C3jqvtMprpiOluLBOcm9zkyVCzCOPA+TBWDT9+1en3YWA
ykwAAAAAAAA=

------=_NextPart_000_0080_01C6B553.9AA3B1D0--


From java-user-return-22428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 10:46:25 2006
Return-Path: <java-user-return-22428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88655 invoked from network); 1 Aug 2006 10:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 10:46:25 -0000
Received: (qmail 73328 invoked by uid 500); 1 Aug 2006 10:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73296 invoked by uid 500); 1 Aug 2006 10:46:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73285 invoked by uid 99); 1 Aug 2006 10:46:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 03:46:18 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 03:46:17 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G7rl6-0004hc-S7
	for java-user@lucene.apache.org; Tue, 01 Aug 2006 03:45:56 -0700
Message-ID: <5591986.post@talk.nabble.com>
Date: Tue, 1 Aug 2006 03:30:41 -0700 (PDT)
From: Sandip <meet_sap123@rediffmail.com>
To: java-user@lucene.apache.org
Subject: searching oracle databse records using apache Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: meet_sap123@rediffmail.com
X-Nabble-From: Sandip <meet_sap123@rediffmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi All,

I am confused with Apache Lucene.

I want to search my databse table records using apache lucene.
But what i found is that Lucene is full-text search engine.This means is it
only used to search documents text or anything else ?

I want to search my databse like e.g.

select * from tableName where username="abc";
using apache lucene.

I am using Oracle 9i/Java for this.
Any idea/link/suggessions will be very much appreciable.

Thanks in advance
Sandip Patil.
-- 
View this message in context: http://www.nabble.com/searching-oracle-databse-records-using-apache-Lucene-tf2032743.html#a5591986
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 11:32:00 2006
Return-Path: <java-user-return-22429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5223 invoked from network); 1 Aug 2006 11:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 11:31:59 -0000
Received: (qmail 39576 invoked by uid 500); 1 Aug 2006 11:31:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39543 invoked by uid 500); 1 Aug 2006 11:31:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39532 invoked by uid 99); 1 Aug 2006 11:31:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 04:31:53 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.43.219.75] (HELO web8320.mail.in.yahoo.com) (202.43.219.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 01 Aug 2006 04:31:51 -0700
Received: (qmail 19913 invoked by uid 60001); 1 Aug 2006 11:31:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=jDJ4mo0BrsdhQ33QUsqtq6oLnFkv5pcI/QsxrBaKw8aHTlglUmXUCiI85pC1u9EsfaToh8gqOyjVuzJaefXbIKKTe6HfkLSgq26R+kEf1JvucucBWTHZimI/SBdgKzDnTUDECTpNH00CCZIT0Qe7ToxTpw5EBsA1QNdrLSrMiGI=  ;
Message-ID: <20060801113123.19911.qmail@web8320.mail.in.yahoo.com>
Received: from [59.95.174.158] by web8320.mail.in.yahoo.com via HTTP; Tue, 01 Aug 2006 12:31:23 BST
Date: Tue, 1 Aug 2006 12:31:23 +0100 (BST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Seach In slide with lucene
To: java-user@lucene.apache.org
Cc: michael_prichard@mac.com, Russell.Allen@aebn.net,
  otis_gospodnetic@yahoo.com
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-850250847-1154431883=:16563"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-850250847-1154431883=:16563
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Dear All,
  I am facing a unknown situaltion. I am using webdav search, it is working fine, i know it is slower than lucene. I am using jakarta-slide-2.1 and lucene-2.1.  I have configured my domain.xml file as:-
   
  <contentindexer classname="org.apache.slide.index.LuceneIndexer">
  <parameter name="indexpath">./index</parameter>
  </contentindexer>
   
  I saw that in store/index folder is getting created. But in searching slide is not using lucene index.
   
  Can anybody tell me :-
  1) If i am using right versions of slide and lucene.
  1). How can i search slide using lucene index.
  2). What will be the structure of query.
   
  Thanks in Advance...

 				
---------------------------------
 Here’s a new way to find what you're looking for - Yahoo! Answers 
--0-850250847-1154431883=:16563--

From java-user-return-22430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 11:32:06 2006
Return-Path: <java-user-return-22430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5301 invoked from network); 1 Aug 2006 11:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 11:32:06 -0000
Received: (qmail 39928 invoked by uid 500); 1 Aug 2006 11:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39875 invoked by uid 500); 1 Aug 2006 11:31:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39708 invoked by uid 99); 1 Aug 2006 11:31:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 04:31:54 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.54.11.87] (HELO bmapps.persistent.co.in) (202.54.11.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 04:31:53 -0700
Received: from mail.persistent.co.in (unknown [10.12.0.1])
	by bmapps.persistent.co.in (Symantec Mail Security) with ESMTP id 4EC0B106F
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 17:00:53 +0530 (IST)
Received: (from mail6.persistent.co.in [10.77.36.24])
	by mail6.persistent.co.in (MOS 3.7.5-GA)
	with HTTPS/1.1 id AMQ73261 (AUTH amit_kkumar);
	Tue,  1 Aug 2006 17:00:52 +0530 (IST)
From: <amit_kkumar@persistent.co.in>
Subject: Re: searching oracle databse records using
 apache Lucene
To: java-user@lucene.apache.org
X-Mailer: Mirapoint Webmail Direct 3.7.5-GA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding:7bit
Message-Id: <20060801170052.AMQ73261@mail6.persistent.co.in>
Date: Tue,  1 Aug 2006 17:00:52 +0530 (IST)
X-Junkmail-Whitelist: YES (by domain whitelist at mail6.persistent.co.in)
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi sandip,

first get all those fields on which you want search and store
it in some var.

then apply indexing with these var.

then fire ur search query

regards

amit kumar

DISCLAIMER
==========
This e-mail may contain privileged and confidential information which is the property of Persistent Systems Pvt. Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Pvt. Ltd. does not accept any liability for virus infected mails.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 11:45:56 2006
Return-Path: <java-user-return-22431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8776 invoked from network); 1 Aug 2006 11:45:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 11:45:55 -0000
Received: (qmail 60628 invoked by uid 500); 1 Aug 2006 11:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60600 invoked by uid 500); 1 Aug 2006 11:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60589 invoked by uid 99); 1 Aug 2006 11:45:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 04:45:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 04:45:47 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 3676CD92E22
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 07:45:26 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Tue, 01 Aug 2006 07:45:29 -0400
X-Sasl-enc: ho2uiZE09JZo2YHWy/8Me/W9HgcKF68JGAiJ2RS2Tcqu 1154432729
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 723C964FE
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 07:45:29 -0400 (EDT)
Message-ID: <44CF3ED2.50802@mikemccandless.com>
Date: Tue, 01 Aug 2006 07:45:22 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF407@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF407@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> When the indexing process still running on a index and I try to search
> something on this index I retrive this error message:
> java.io.FileNotFoundException:
> \\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system cannot find
> the file specified)
> 
> How can I solve this.

Could you provide some more context about your application or a small 
test case that shows the error happening?  This sounds likely to be a 
locking issue.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 12:33:21 2006
Return-Path: <java-user-return-22432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25804 invoked from network); 1 Aug 2006 12:33:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 12:33:20 -0000
Received: (qmail 44931 invoked by uid 500); 1 Aug 2006 12:33:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44907 invoked by uid 500); 1 Aug 2006 12:33:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44896 invoked by uid 99); 1 Aug 2006 12:33:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 05:33:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 05:33:12 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79d68f70d688ad3ee4c9c@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 1 Aug 2006 14:32:47 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FileNotFoundException
Date: Tue, 1 Aug 2006 14:32:47 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A429A67DD@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException
Thread-Index: Aca1YAxIWLakjp74TwCjKI6enREGFwABSMtg
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

For the index process I use IndexModifier class.
That happens when I try to search something into the index in the same
time that the index process still running.=20

the code for indexing:
	  System.setProperty("org.apache.lucene.lockDir", System
                .getProperty("user.dir"));
        File folder =3D new File(getIndexPath());
        Directory dir =3D null;
        if (folder.isDirectory() && folder.exists()) {
            dir =3D FSDirectory.getDirectory(getIndexPath(), false);
        } else if (!folder.isFile() && !folder.exists()) {
            dir =3D FSDirectory.getDirectory(getIndexPath(), true);
        } else {
            System.out.println("Bad index folder");
            System.exit(1);
        }
        boolean newIndex =3D true;
        if (dir.fileExists("segments")) {
            newIndex =3D false;
        }
        // long lastindexation =3D dir.fileModified("segments");
        writer =3D new IndexModifier(dir, new SimpleAnalyzer(), =
newIndex);
        dir.close();
        writer.setUseCompoundFile(true);
	  ...

Code For searching:

	  MultiSearcher multisearch =3D new MultiSearcher(indexsearcher);
	  Hits hits =3D this.multisearch.search(this.getBoolQuery());
	  ...

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 01 August 2006 13:45
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException


> When the indexing process still running on a index and I try to search
> something on this index I retrive this error message:
> java.io.FileNotFoundException:
> \\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system cannot
find
> the file specified)
>=20
> How can I solve this.

Could you provide some more context about your application or a small=20
test case that shows the error happening?  This sounds likely to be a=20
locking issue.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 12:59:10 2006
Return-Path: <java-user-return-22433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36452 invoked from network); 1 Aug 2006 12:59:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 12:59:10 -0000
Received: (qmail 16091 invoked by uid 500); 1 Aug 2006 12:59:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16053 invoked by uid 500); 1 Aug 2006 12:59:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16002 invoked by uid 99); 1 Aug 2006 12:59:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 05:59:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 05:59:01 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5307030EFCD5; Tue,  1 Aug 2006 08:58:38 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 8DD5730EFCD4
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 08:58:30 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20060801113123.19911.qmail@web8320.mail.in.yahoo.com>
References: <20060801113123.19911.qmail@web8320.mail.in.yahoo.com>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <D4BA702A-18E4-4B06-B22C-89E27574C258@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Seach In slide with lucene
Date: Tue, 1 Aug 2006 08:58:29 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I believe you'll need to inquire with the Slide community, which =20
unfortunately is a bit inactive lately.

	Erik


On Aug 1, 2006, at 7:31 AM, aslam bari wrote:

> Dear All,
>   I am facing a unknown situaltion. I am using webdav search, it is =20=

> working fine, i know it is slower than lucene. I am using jakarta-=20
> slide-2.1 and lucene-2.1.  I have configured my domain.xml file as:-
>
>   <contentindexer classname=3D"org.apache.slide.index.LuceneIndexer">
>   <parameter name=3D"indexpath">./index</parameter>
>   </contentindexer>
>
>   I saw that in store/index folder is getting created. But in =20
> searching slide is not using lucene index.
>
>   Can anybody tell me :-
>   1) If i am using right versions of slide and lucene.
>   1). How can i search slide using lucene index.
>   2). What will be the structure of query.
>
>   Thanks in Advance...
>
>  			=09
> ---------------------------------
>  Here=92s a new way to find what you're looking for - Yahoo! Answers


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 13:10:57 2006
Return-Path: <java-user-return-22434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40123 invoked from network); 1 Aug 2006 13:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 13:10:56 -0000
Received: (qmail 52977 invoked by uid 500); 1 Aug 2006 13:10:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52787 invoked by uid 500); 1 Aug 2006 13:10:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52691 invoked by uid 99); 1 Aug 2006 13:10:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:10:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO nz-out-0102.google.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:10:48 -0700
Received: by nz-out-0102.google.com with SMTP id i1so242270nzh
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 06:10:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=by0atHn2AYhPzyoSqU2BOWDHTQLR/RNZnYu2i+WCR4pRsHxQaUIHMfpLf0WXaJkStb72BySgrwi/gXCK0Vl76np+PNq8cFAOXrRS1p6+a8k1hpBEmdWCeZgcDIVjw4jZJdUIc29BAGwowWqzy+nhitmoJhc+mAl/vPpA1tY3/N0=
Received: by 10.65.93.3 with SMTP id v3mr1057206qbl;
        Tue, 01 Aug 2006 06:10:25 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 1 Aug 2006 06:10:25 -0700 (PDT)
Message-ID: <359a92830608010610j761629d1ob8a5875c25002fa@mail.gmail.com>
Date: Tue, 1 Aug 2006 09:10:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does lucene performance suffer with a lot of empty fields ?
In-Reply-To: <865c77680608010052h70811fcai1cc516997b8fc522@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61386_26188055.1154437825281"
References: <865c77680608010052h70811fcai1cc516997b8fc522@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_61386_26188055.1154437825281
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can't speak to performance, but there's no problem having different fields
for different documents. Stated differently, you don't need to have all
fields in all documents. It took me a while to get my head out of database
tables and accept this <G>....

I doubt there's a problem with speed, but as always some measurements over
your particular data count most.....

Erick

On 8/1/06, Mek <mekin.m@gmail.com> wrote:
>
> I have 1 generic index, but am Indexing a lot of different things, like
> actors, politicians, scientists, sportsmen.
>
> And as you can see that though there are some common fields, like name &
> DOB, there are also fields for each of these types of people that are
> different.
> e.g. Actors will have "Movies, TV shows, ", politicians will have
> "Political
> party...", scientists will have "publications, inventions ..."
>
> Also, I do not want to create multiple indexes, as the number of such
> types
> & hence the number of indices can get out of hand, eg I could decide to
> add
> "footballers", "tennis players".
>
> I am sure I am not the 1st who's facing this problem.
>
> From what I gather, I can go ahead & create an Index & for each Document &
> only add the relevant fields. Is this correct?
> I should still be able to search with queries like "mel
> Movies:braveheart".
> Right ?
>
> Would this impact the search performance ?
> Any other words of caution for me ?
>
> Thanks,
> mek
>
>

------=_Part_61386_26188055.1154437825281--

From java-user-return-22435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 13:18:44 2006
Return-Path: <java-user-return-22435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43607 invoked from network); 1 Aug 2006 13:18:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 13:18:43 -0000
Received: (qmail 67828 invoked by uid 500); 1 Aug 2006 13:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67284 invoked by uid 500); 1 Aug 2006 13:18:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67273 invoked by uid 99); 1 Aug 2006 13:18:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:18:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:18:36 -0700
Received: by py-out-1112.google.com with SMTP id d80so1069438pyd
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 06:18:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Hgd8oYSwsO3Lx0ULizv2pmub87Q9Y77n8RavLy18+mF9RakDtL7+rfC8zTcTTioVvCKPFbOmBqBhROsQj2h2bswjCYZZkngCc4+kBq4xFcs3LiowMts+yOXe7uwA2ckBAv0mtJIrqaD7y09EP2FOANOxJJWrz2h5fO2K4IHYbug=
Received: by 10.35.109.2 with SMTP id l2mr5709072pym;
        Tue, 01 Aug 2006 06:18:15 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 1 Aug 2006 06:18:15 -0700 (PDT)
Message-ID: <359a92830608010618v7cec653aica6534ef87dbba1c@mail.gmail.com>
Date: Tue, 1 Aug 2006 09:18:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching oracle databse records using apache Lucene
In-Reply-To: <5591986.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61491_4584313.1154438295650"
References: <5591986.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_61491_4584313.1154438295650
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You're absolutely right, lucene is a text searching tool, not a database
tool. There's no point in trying to jump through hoops to use lucene if your
database already works for you.

If you're trying to do text searches, particularly if want to ask questions
like "find the words biggest and large within 5 words of each other", then
you might want to think about lucene. Or even if you want to just make
simple searches over text.

But to select rows from a database table, there's no reason to try to use
lucene. Use a database API instead.

Best
Erick

On 8/1/06, Sandip <meet_sap123@rediffmail.com> wrote:
>
>
> Hi All,
>
> I am confused with Apache Lucene.
>
> I want to search my databse table records using apache lucene.
> But what i found is that Lucene is full-text search engine.This means is
> it
> only used to search documents text or anything else ?
>
> I want to search my databse like e.g.
>
> select * from tableName where username="abc";
> using apache lucene.
>
> I am using Oracle 9i/Java for this.
> Any idea/link/suggessions will be very much appreciable.
>
> Thanks in advance
> Sandip Patil.
> --
> View this message in context:
> http://www.nabble.com/searching-oracle-databse-records-using-apache-Lucene-tf2032743.html#a5591986
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_61491_4584313.1154438295650--

From java-user-return-22436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 13:24:08 2006
Return-Path: <java-user-return-22436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52046 invoked from network); 1 Aug 2006 13:24:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 13:24:08 -0000
Received: (qmail 79911 invoked by uid 500); 1 Aug 2006 13:24:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79797 invoked by uid 500); 1 Aug 2006 13:24:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79785 invoked by uid 99); 1 Aug 2006 13:24:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:24:02 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:24:01 -0700
Received: by py-out-1112.google.com with SMTP id d80so1071405pyd
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 06:23:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mzrTJqjawqYHbM+HGUsizQPHasijNvQn4VwrcB3qoTsupgAJGMsYeV8nPbC8cMagMBVcMJmO5AyTUo4wSTrQMsMJ99+WUvQt2F0YpGnMqpBczKXZCzAAOfzacr6uiD+ChskF7ODao7kuJZMFL69XmXSVsdz0e7/wcHgzFieoFzI=
Received: by 10.35.66.12 with SMTP id t12mr5724746pyk;
        Tue, 01 Aug 2006 06:23:36 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 1 Aug 2006 06:23:36 -0700 (PDT)
Message-ID: <359a92830608010623m64eaa37epb0176eab2081de22@mail.gmail.com>
Date: Tue, 1 Aug 2006 09:23:36 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A429A67DD@EPLUXSEX01.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61552_19731425.1154438616467"
References: <AD97D5F23B201C448EAB13B4F6DA6A429A67DD@EPLUXSEX01.ep.parl.union.eu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_61552_19731425.1154438616467
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

two things come to mind....

1> are you absolutely sure that your reader and writer are pointing to the
same place? Really, absolutely, positively sure? You've hard-coded the path
into both writer and reader just to be really, absolutely positively sure?
Or, you could let the writer close and *then* try the reader to see if it's
a timing issue or a path issue.

2> You say that the indexer is still open. Is there any chance it hasn't yet
written anything to disk? I'm not sure of the internals, but there has been
some discussion that internally a writer uses a RAMdir for a while then
periodically flushes the results to disk. It's possible that you're writer
hasn't written anything yet.....

3> (so I can't count). Have you used Luke to open your index to see if that
works (and the file is in the place you expect)?

FWIW
Erick

On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>
> For the index process I use IndexModifier class.
> That happens when I try to search something into the index in the same
> time that the index process still running.
>
> the code for indexing:
>           System.setProperty("org.apache.lucene.lockDir", System
>                 .getProperty("user.dir"));
>         File folder = new File(getIndexPath());
>         Directory dir = null;
>         if (folder.isDirectory() && folder.exists()) {
>             dir = FSDirectory.getDirectory(getIndexPath(), false);
>         } else if (!folder.isFile() && !folder.exists()) {
>             dir = FSDirectory.getDirectory(getIndexPath(), true);
>         } else {
>             System.out.println("Bad index folder");
>             System.exit(1);
>         }
>         boolean newIndex = true;
>         if (dir.fileExists("segments")) {
>             newIndex = false;
>         }
>         // long lastindexation = dir.fileModified("segments");
>         writer = new IndexModifier(dir, new SimpleAnalyzer(), newIndex);
>         dir.close();
>         writer.setUseCompoundFile(true);
>           ...
>
> Code For searching:
>
>           MultiSearcher multisearch = new MultiSearcher(indexsearcher);
>           Hits hits = this.multisearch.search(this.getBoolQuery());
>           ...
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 01 August 2006 13:45
> To: java-user@lucene.apache.org
> Subject: Re: FileNotFoundException
>
>
> > When the indexing process still running on a index and I try to search
> > something on this index I retrive this error message:
> > java.io.FileNotFoundException:
> > \\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system cannot
> find
> > the file specified)
> >
> > How can I solve this.
>
> Could you provide some more context about your application or a small
> test case that shows the error happening?  This sounds likely to be a
> locking issue.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_61552_19731425.1154438616467--

From java-user-return-22437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 13:26:53 2006
Return-Path: <java-user-return-22437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53185 invoked from network); 1 Aug 2006 13:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 13:26:53 -0000
Received: (qmail 87155 invoked by uid 500); 1 Aug 2006 13:26:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87117 invoked by uid 500); 1 Aug 2006 13:26:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87105 invoked by uid 99); 1 Aug 2006 13:26:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:26:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:26:44 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79d6c07c8688ad3ee4c9c@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 1 Aug 2006 15:26:21 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FileNotFoundException
Date: Tue, 1 Aug 2006 15:26:22 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF409@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException
Thread-Index: Aca1bcUYPwjmK9muQyePPsBYQvS0oAAAD5sA
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's the same when I try to open the index with luke=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 01 August 2006 15:24
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException

two things come to mind....

1> are you absolutely sure that your reader and writer are pointing to
the
same place? Really, absolutely, positively sure? You've hard-coded the
path
into both writer and reader just to be really, absolutely positively
sure?
Or, you could let the writer close and *then* try the reader to see if
it's
a timing issue or a path issue.

2> You say that the indexer is still open. Is there any chance it hasn't
yet
written anything to disk? I'm not sure of the internals, but there has
been
some discussion that internally a writer uses a RAMdir for a while then
periodically flushes the results to disk. It's possible that you're
writer
hasn't written anything yet.....

3> (so I can't count). Have you used Luke to open your index to see if
that
works (and the file is in the place you expect)?

FWIW
Erick

On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>
> For the index process I use IndexModifier class.
> That happens when I try to search something into the index in the same
> time that the index process still running.
>
> the code for indexing:
>           System.setProperty("org.apache.lucene.lockDir", System
>                 .getProperty("user.dir"));
>         File folder =3D new File(getIndexPath());
>         Directory dir =3D null;
>         if (folder.isDirectory() && folder.exists()) {
>             dir =3D FSDirectory.getDirectory(getIndexPath(), false);
>         } else if (!folder.isFile() && !folder.exists()) {
>             dir =3D FSDirectory.getDirectory(getIndexPath(), true);
>         } else {
>             System.out.println("Bad index folder");
>             System.exit(1);
>         }
>         boolean newIndex =3D true;
>         if (dir.fileExists("segments")) {
>             newIndex =3D false;
>         }
>         // long lastindexation =3D dir.fileModified("segments");
>         writer =3D new IndexModifier(dir, new SimpleAnalyzer(),
newIndex);
>         dir.close();
>         writer.setUseCompoundFile(true);
>           ...
>
> Code For searching:
>
>           MultiSearcher multisearch =3D new
MultiSearcher(indexsearcher);
>           Hits hits =3D this.multisearch.search(this.getBoolQuery());
>           ...
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 01 August 2006 13:45
> To: java-user@lucene.apache.org
> Subject: Re: FileNotFoundException
>
>
> > When the indexing process still running on a index and I try to
search
> > something on this index I retrive this error message:
> > java.io.FileNotFoundException:
> > \\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system cannot
> find
> > the file specified)
> >
> > How can I solve this.
>
> Could you provide some more context about your application or a small
> test case that shows the error happening?  This sounds likely to be a
> locking issue.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 13:32:55 2006
Return-Path: <java-user-return-22438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56093 invoked from network); 1 Aug 2006 13:32:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 13:32:55 -0000
Received: (qmail 5040 invoked by uid 500); 1 Aug 2006 13:32:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5006 invoked by uid 500); 1 Aug 2006 13:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4901 invoked by uid 99); 1 Aug 2006 13:32:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:32:46 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_NUMERIC_HELO,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.239.21.142] (HELO mail.global-office.no) (80.239.21.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:32:44 -0700
Received: from 213.162.235.138 ([213.162.235.138]) by go003301.global-office.no ([7.0.1.28]) via Exchange Front-End Server pop.goasp.no ([80.239.21.173]) with Microsoft Exchange Server HTTP-DAV ;
 Tue,  1 Aug 2006 13:34:37 +0000
Received: from vasily by pop.goasp.no; 01 Aug 2006 15:32:23 +0200
Subject: Re: searching oracle databse records using apache Lucene
From: Vasily Borisov <vasily@kadme.com>
Reply-To: vasily@kadme.com
To: java-user@lucene.apache.org
In-Reply-To: <359a92830608010618v7cec653aica6534ef87dbba1c@mail.gmail.com>
References: <5591986.post@talk.nabble.com>
	 <359a92830608010618v7cec653aica6534ef87dbba1c@mail.gmail.com>
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Organization: Kadme AS
Date: Tue, 01 Aug 2006 15:32:23 +0200
Message-Id: <1154439143.5311.34.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric, 
I'm sure that is entirely true. E.g. in E&P industry we have a bunch of
legacy relational databases that are tremendously complex. 
Therefore the presentation layer for them is never good since
the user is exposed to the data model complexity every time he uses this
database. 

So, giving up on the structured API idea, flattening out the content and
indexing is seems to be not a bad idea at all. Especially if you are
facing the problem of integrating results from several legacy databases
or integrating the flat file store with a database. 

Regards,
     Vasily   


On Tue, 2006-08-01 at 09:18 -0400, Erick Erickson wrote:
> You're absolutely right, lucene is a text searching tool, not a database
> tool. There's no point in trying to jump through hoops to use lucene if your
> database already works for you.
> 
> If you're trying to do text searches, particularly if want to ask questions
> like "find the words biggest and large within 5 words of each other", then
> you might want to think about lucene. Or even if you want to just make
> simple searches over text.
> 
> But to select rows from a database table, there's no reason to try to use
> lucene. Use a database API instead.
> 
> Best
> Erick
> 
> On 8/1/06, Sandip <meet_sap123@rediffmail.com> wrote:
> >
> >
> > Hi All,
> >
> > I am confused with Apache Lucene.
> >
> > I want to search my databse table records using apache lucene.
> > But what i found is that Lucene is full-text search engine.This means is
> > it
> > only used to search documents text or anything else ?
> >
> > I want to search my databse like e.g.
> >
> > select * from tableName where username="abc";
> > using apache lucene.
> >
> > I am using Oracle 9i/Java for this.
> > Any idea/link/suggessions will be very much appreciable.
> >
> > Thanks in advance
> > Sandip Patil.
> > --
> > View this message in context:
> > http://www.nabble.com/searching-oracle-databse-records-using-apache-Lucene-tf2032743.html#a5591986
> > Sent from the Lucene - Java Users forum at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
---------------------------------------------------
Vasily Borisov
Director Business Development
Kadme AS
Tel: +47 51 87 42 54
Fax: + 47 51 87 42 51
Mob: +47 45 20 40 42

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 13:49:59 2006
Return-Path: <java-user-return-22439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60891 invoked from network); 1 Aug 2006 13:49:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 13:49:58 -0000
Received: (qmail 39640 invoked by uid 500); 1 Aug 2006 13:49:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39385 invoked by uid 500); 1 Aug 2006 13:49:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39374 invoked by uid 99); 1 Aug 2006 13:49:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:49:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:49:49 -0700
Received: by py-out-1112.google.com with SMTP id d80so1080957pyd
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 06:49:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NkoCnS39V9qw+GCAVMFRwMOOMbrfIkYdR0/W92+hGl4WlWRt5emSrX+Qrgx2q+0xTejXSpTEb79ly9CzPnI+pqVUcJwf5tzwjYpbS+UDdJIIG6WTnnS9yL6BknPuD5/TtYHmbWCGpsBDuzdiscCPm21rhHuFJOLBx5q6pusGlYw=
Received: by 10.35.51.19 with SMTP id d19mr5732207pyk;
        Tue, 01 Aug 2006 06:49:29 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 1 Aug 2006 06:49:29 -0700 (PDT)
Message-ID: <359a92830608010649o3b3f4188o4fbf176406bb1640@mail.gmail.com>
Date: Tue, 1 Aug 2006 09:49:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF409@EPLUXSEX01.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61884_32680839.1154440169012"
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF409@EPLUXSEX01.ep.parl.union.eu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_61884_32680839.1154440169012
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So it sounds like you're not writing the index to the place you think you
are. Have you just looked in the directories and checked that there are
files there? If Luke can't find them, they're not where you think they are.
Especially if your writer had closed before you looked.

Erick

On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>
> It's the same when I try to open the index with luke
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 01 August 2006 15:24
> To: java-user@lucene.apache.org
> Subject: Re: FileNotFoundException
>
> two things come to mind....
>
> 1> are you absolutely sure that your reader and writer are pointing to
> the
> same place? Really, absolutely, positively sure? You've hard-coded the
> path
> into both writer and reader just to be really, absolutely positively
> sure?
> Or, you could let the writer close and *then* try the reader to see if
> it's
> a timing issue or a path issue.
>
> 2> You say that the indexer is still open. Is there any chance it hasn't
> yet
> written anything to disk? I'm not sure of the internals, but there has
> been
> some discussion that internally a writer uses a RAMdir for a while then
> periodically flushes the results to disk. It's possible that you're
> writer
> hasn't written anything yet.....
>
> 3> (so I can't count). Have you used Luke to open your index to see if
> that
> works (and the file is in the place you expect)?
>
> FWIW
> Erick
>
> On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
> >
> > For the index process I use IndexModifier class.
> > That happens when I try to search something into the index in the same
> > time that the index process still running.
> >
> > the code for indexing:
> >           System.setProperty("org.apache.lucene.lockDir", System
> >                 .getProperty("user.dir"));
> >         File folder = new File(getIndexPath());
> >         Directory dir = null;
> >         if (folder.isDirectory() && folder.exists()) {
> >             dir = FSDirectory.getDirectory(getIndexPath(), false);
> >         } else if (!folder.isFile() && !folder.exists()) {
> >             dir = FSDirectory.getDirectory(getIndexPath(), true);
> >         } else {
> >             System.out.println("Bad index folder");
> >             System.exit(1);
> >         }
> >         boolean newIndex = true;
> >         if (dir.fileExists("segments")) {
> >             newIndex = false;
> >         }
> >         // long lastindexation = dir.fileModified("segments");
> >         writer = new IndexModifier(dir, new SimpleAnalyzer(),
> newIndex);
> >         dir.close();
> >         writer.setUseCompoundFile(true);
> >           ...
> >
> > Code For searching:
> >
> >           MultiSearcher multisearch = new
> MultiSearcher(indexsearcher);
> >           Hits hits = this.multisearch.search(this.getBoolQuery());
> >           ...
> >
> > -----Original Message-----
> > From: Michael McCandless [mailto:lucene@mikemccandless.com]
> > Sent: 01 August 2006 13:45
> > To: java-user@lucene.apache.org
> > Subject: Re: FileNotFoundException
> >
> >
> > > When the indexing process still running on a index and I try to
> search
> > > something on this index I retrive this error message:
> > > java.io.FileNotFoundException:
> > > \\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system cannot
> > find
> > > the file specified)
> > >
> > > How can I solve this.
> >
> > Could you provide some more context about your application or a small
> > test case that shows the error happening?  This sounds likely to be a
> > locking issue.
> >
> > Mike
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_61884_32680839.1154440169012--

From java-user-return-22440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 13:55:03 2006
Return-Path: <java-user-return-22440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62486 invoked from network); 1 Aug 2006 13:55:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 13:55:02 -0000
Received: (qmail 57796 invoked by uid 500); 1 Aug 2006 13:54:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57765 invoked by uid 500); 1 Aug 2006 13:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57748 invoked by uid 99); 1 Aug 2006 13:54:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:54:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 06:54:53 -0700
Received: by py-out-1112.google.com with SMTP id d80so1082796pyd
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 06:54:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=snVcRanXZg+0Iz9EO0MbWZRF9yBYuvnAnxCZOTEpl4BQtzvaSefH6fCdl8ajsTssMULUWkWvQFapz+BVp+v36JBCA/cDbAG1KnupnkiVbzSO33alJrkSejPYERWa1uIOA+0aj0hWZpIQWLMK8NgBKMrnRuk5R1/NbngsGhV0IzM=
Received: by 10.35.39.2 with SMTP id r2mr5767769pyj;
        Tue, 01 Aug 2006 06:54:32 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 1 Aug 2006 06:54:32 -0700 (PDT)
Message-ID: <359a92830608010654k55da0cdcjf685ab8db7ae5350@mail.gmail.com>
Date: Tue, 1 Aug 2006 09:54:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, vasily@kadme.com
Subject: Re: searching oracle databse records using apache Lucene
In-Reply-To: <1154439143.5311.34.camel@localhost>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61944_10169362.1154440472660"
References: <5591986.post@talk.nabble.com>
	 <359a92830608010618v7cec653aica6534ef87dbba1c@mail.gmail.com>
	 <1154439143.5311.34.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_61944_10169362.1154440472660
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I agree completely. I was mostly responding to what appeared to be an
attempt to use lucene to actually execute a database query, which is
entirely different from restructing legacy data into a more-usable form as
you point out, and in which case all bets are off.

Erick

On 8/1/06, Vasily Borisov <vasily@kadme.com> wrote:
>
> Eric,
> I'm sure that is entirely true. E.g. in E&P industry we have a bunch of
> legacy relational databases that are tremendously complex.
> Therefore the presentation layer for them is never good since
> the user is exposed to the data model complexity every time he uses this
> database.
>
> So, giving up on the structured API idea, flattening out the content and
> indexing is seems to be not a bad idea at all. Especially if you are
> facing the problem of integrating results from several legacy databases
> or integrating the flat file store with a database.
>
> Regards,
>      Vasily
>
>
> On Tue, 2006-08-01 at 09:18 -0400, Erick Erickson wrote:
> > You're absolutely right, lucene is a text searching tool, not a database
> > tool. There's no point in trying to jump through hoops to use lucene if
> your
> > database already works for you.
> >
> > If you're trying to do text searches, particularly if want to ask
> questions
> > like "find the words biggest and large within 5 words of each other",
> then
> > you might want to think about lucene. Or even if you want to just make
> > simple searches over text.
> >
> > But to select rows from a database table, there's no reason to try to
> use
> > lucene. Use a database API instead.
> >
> > Best
> > Erick
> >
> > On 8/1/06, Sandip <meet_sap123@rediffmail.com> wrote:
> > >
> > >
> > > Hi All,
> > >
> > > I am confused with Apache Lucene.
> > >
> > > I want to search my databse table records using apache lucene.
> > > But what i found is that Lucene is full-text search engine.This means
> is
> > > it
> > > only used to search documents text or anything else ?
> > >
> > > I want to search my databse like e.g.
> > >
> > > select * from tableName where username="abc";
> > > using apache lucene.
> > >
> > > I am using Oracle 9i/Java for this.
> > > Any idea/link/suggessions will be very much appreciable.
> > >
> > > Thanks in advance
> > > Sandip Patil.
> > > --
> > > View this message in context:
> > >
> http://www.nabble.com/searching-oracle-databse-records-using-apache-Lucene-tf2032743.html#a5591986
> > > Sent from the Lucene - Java Users forum at Nabble.com.
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> ---------------------------------------------------
> Vasily Borisov
> Director Business Development
> Kadme AS
> Tel: +47 51 87 42 54
> Fax: + 47 51 87 42 51
> Mob: +47 45 20 40 42
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_61944_10169362.1154440472660--

From java-user-return-22441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 14:04:11 2006
Return-Path: <java-user-return-22441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65671 invoked from network); 1 Aug 2006 14:04:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 14:04:10 -0000
Received: (qmail 81874 invoked by uid 500); 1 Aug 2006 14:04:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81850 invoked by uid 500); 1 Aug 2006 14:04:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81839 invoked by uid 99); 1 Aug 2006 14:04:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:04:04 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:04:03 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44A1364D006DCEBC for java-user@lucene.apache.org; Tue, 1 Aug 2006 16:03:41 +0200
Subject: Re: searching oracle databse records using apache Lucene
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1154439143.5311.34.camel@localhost>
References: <5591986.post@talk.nabble.com>
	 <359a92830608010618v7cec653aica6534ef87dbba1c@mail.gmail.com>
	 <1154439143.5311.34.camel@localhost>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 01 Aug 2006 16:03:29 +0200
Message-Id: <1154441010.5704.80.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-08-01 at 15:32 +0200, Vasily Borisov wrote:
> the presentation layer for them is never good since the user is
> exposed to the data model complexity 

Isn't that why we have facades?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 14:16:44 2006
Return-Path: <java-user-return-22442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70085 invoked from network); 1 Aug 2006 14:16:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 14:16:43 -0000
Received: (qmail 10451 invoked by uid 500); 1 Aug 2006 14:16:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10350 invoked by uid 500); 1 Aug 2006 14:16:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10300 invoked by uid 99); 1 Aug 2006 14:16:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:16:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:16:17 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79d6edd7f888ad3ee4c9c@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 1 Aug 2006 16:15:54 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FileNotFoundException
Date: Tue, 1 Aug 2006 16:15:54 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A429A67DF@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException
Thread-Index: Aca1cV+0vNoOBZYXRNCDJfVVmxzJYgAAwQ1w
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm sure that it's the good location.
When the index process is finished then I can access the index.
I know why but I don't know how to solve it.
When I indexing a lot of file with the extension cfs are created and
after few second the file are merge in an other file
ex:
I have a file with this name _8df.cfs and after few second this file
disappeared (because it merged with an other file with a new name) so
the IndexSearcher can't find it.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 01 August 2006 15:49
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException

So it sounds like you're not writing the index to the place you think
you
are. Have you just looked in the directories and checked that there are
files there? If Luke can't find them, they're not where you think they
are.
Especially if your writer had closed before you looked.

Erick

On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>
> It's the same when I try to open the index with luke
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 01 August 2006 15:24
> To: java-user@lucene.apache.org
> Subject: Re: FileNotFoundException
>
> two things come to mind....
>
> 1> are you absolutely sure that your reader and writer are pointing to
> the
> same place? Really, absolutely, positively sure? You've hard-coded the
> path
> into both writer and reader just to be really, absolutely positively
> sure?
> Or, you could let the writer close and *then* try the reader to see if
> it's
> a timing issue or a path issue.
>
> 2> You say that the indexer is still open. Is there any chance it
hasn't
> yet
> written anything to disk? I'm not sure of the internals, but there has
> been
> some discussion that internally a writer uses a RAMdir for a while
then
> periodically flushes the results to disk. It's possible that you're
> writer
> hasn't written anything yet.....
>
> 3> (so I can't count). Have you used Luke to open your index to see if
> that
> works (and the file is in the place you expect)?
>
> FWIW
> Erick
>
> On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
> >
> > For the index process I use IndexModifier class.
> > That happens when I try to search something into the index in the
same
> > time that the index process still running.
> >
> > the code for indexing:
> >           System.setProperty("org.apache.lucene.lockDir", System
> >                 .getProperty("user.dir"));
> >         File folder =3D new File(getIndexPath());
> >         Directory dir =3D null;
> >         if (folder.isDirectory() && folder.exists()) {
> >             dir =3D FSDirectory.getDirectory(getIndexPath(), false);
> >         } else if (!folder.isFile() && !folder.exists()) {
> >             dir =3D FSDirectory.getDirectory(getIndexPath(), true);
> >         } else {
> >             System.out.println("Bad index folder");
> >             System.exit(1);
> >         }
> >         boolean newIndex =3D true;
> >         if (dir.fileExists("segments")) {
> >             newIndex =3D false;
> >         }
> >         // long lastindexation =3D dir.fileModified("segments");
> >         writer =3D new IndexModifier(dir, new SimpleAnalyzer(),
> newIndex);
> >         dir.close();
> >         writer.setUseCompoundFile(true);
> >           ...
> >
> > Code For searching:
> >
> >           MultiSearcher multisearch =3D new
> MultiSearcher(indexsearcher);
> >           Hits hits =3D =
this.multisearch.search(this.getBoolQuery());
> >           ...
> >
> > -----Original Message-----
> > From: Michael McCandless [mailto:lucene@mikemccandless.com]
> > Sent: 01 August 2006 13:45
> > To: java-user@lucene.apache.org
> > Subject: Re: FileNotFoundException
> >
> >
> > > When the indexing process still running on a index and I try to
> search
> > > something on this index I retrive this error message:
> > > java.io.FileNotFoundException:
> > > \\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system
cannot
> > find
> > > the file specified)
> > >
> > > How can I solve this.
> >
> > Could you provide some more context about your application or a
small
> > test case that shows the error happening?  This sounds likely to be
a
> > locking issue.
> >
> > Mike
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 14:30:16 2006
Return-Path: <java-user-return-22443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74603 invoked from network); 1 Aug 2006 14:30:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 14:30:16 -0000
Received: (qmail 66298 invoked by uid 500); 1 Aug 2006 14:30:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66269 invoked by uid 500); 1 Aug 2006 14:30:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66258 invoked by uid 99); 1 Aug 2006 14:30:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:30:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:30:08 -0700
Received: (qmail 895 invoked from network); 1 Aug 2006 14:29:44 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]383542@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 1 Aug 2006 14:29:44 -0000
Message-ID: <44CF6558.6050805@artnology.com>
Date: Tue, 01 Aug 2006 16:29:44 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException
References: <AD97D5F23B201C448EAB13B4F6DA6A429A67DF@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A429A67DF@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think its a directory access synchronisation problem, I have also 
posted about this before. The scenario can be like this ..

When Indexwriter object is created it reads the segment information from 
the file "segments" which nothing but list of files with .cfs or mayn 
more type, at teh same time IndexSearcher object is created which also 
make a list of index files from segements file, then you invoke the some 
write operation which triggers the index pemrging, fragmenting etc 
started haoppening and it modifies the file list in the segments file, 
but still we have the IndexerSearcher object with old file list and 
probably that throws the FileNotFoundExcpetion becuase physically the 
file is not there.

May be I am wrong but I try to put some light on this issue.

I posted the similar problem with subject "FileNotFoundException: occurs 
during the optimization of index", I am also experiencing the similar 
problem when the index optimization task runs on the index and 
parallally search function is also running.

thx,
supriya

WATHELET Thomas wrote:
> I'm sure that it's the good location.
> When the index process is finished then I can access the index.
> I know why but I don't know how to solve it.
> When I indexing a lot of file with the extension cfs are created and
> after few second the file are merge in an other file
> ex:
> I have a file with this name _8df.cfs and after few second this file
> disappeared (because it merged with an other file with a new name) so
> the IndexSearcher can't find it.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: 01 August 2006 15:49
> To: java-user@lucene.apache.org
> Subject: Re: FileNotFoundException
>
> So it sounds like you're not writing the index to the place you think
> you
> are. Have you just looked in the directories and checked that there are
> files there? If Luke can't find them, they're not where you think they
> are.
> Especially if your writer had closed before you looked.
>
> Erick
>
> On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>   
>> It's the same when I try to open the index with luke
>>
>> -----Original Message-----
>> From: Erick Erickson [mailto:erickerickson@gmail.com]
>> Sent: 01 August 2006 15:24
>> To: java-user@lucene.apache.org
>> Subject: Re: FileNotFoundException
>>
>> two things come to mind....
>>
>> 1> are you absolutely sure that your reader and writer are pointing to
>> the
>> same place? Really, absolutely, positively sure? You've hard-coded the
>> path
>> into both writer and reader just to be really, absolutely positively
>> sure?
>> Or, you could let the writer close and *then* try the reader to see if
>> it's
>> a timing issue or a path issue.
>>
>> 2> You say that the indexer is still open. Is there any chance it
>>     
> hasn't
>   
>> yet
>> written anything to disk? I'm not sure of the internals, but there has
>> been
>> some discussion that internally a writer uses a RAMdir for a while
>>     
> then
>   
>> periodically flushes the results to disk. It's possible that you're
>> writer
>> hasn't written anything yet.....
>>
>> 3> (so I can't count). Have you used Luke to open your index to see if
>> that
>> works (and the file is in the place you expect)?
>>
>> FWIW
>> Erick
>>
>> On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>>     
>>> For the index process I use IndexModifier class.
>>> That happens when I try to search something into the index in the
>>>       
> same
>   
>>> time that the index process still running.
>>>
>>> the code for indexing:
>>>           System.setProperty("org.apache.lucene.lockDir", System
>>>                 .getProperty("user.dir"));
>>>         File folder = new File(getIndexPath());
>>>         Directory dir = null;
>>>         if (folder.isDirectory() && folder.exists()) {
>>>             dir = FSDirectory.getDirectory(getIndexPath(), false);
>>>         } else if (!folder.isFile() && !folder.exists()) {
>>>             dir = FSDirectory.getDirectory(getIndexPath(), true);
>>>         } else {
>>>             System.out.println("Bad index folder");
>>>             System.exit(1);
>>>         }
>>>         boolean newIndex = true;
>>>         if (dir.fileExists("segments")) {
>>>             newIndex = false;
>>>         }
>>>         // long lastindexation = dir.fileModified("segments");
>>>         writer = new IndexModifier(dir, new SimpleAnalyzer(),
>>>       
>> newIndex);
>>     
>>>         dir.close();
>>>         writer.setUseCompoundFile(true);
>>>           ...
>>>
>>> Code For searching:
>>>
>>>           MultiSearcher multisearch = new
>>>       
>> MultiSearcher(indexsearcher);
>>     
>>>           Hits hits = this.multisearch.search(this.getBoolQuery());
>>>           ...
>>>
>>> -----Original Message-----
>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>> Sent: 01 August 2006 13:45
>>> To: java-user@lucene.apache.org
>>> Subject: Re: FileNotFoundException
>>>
>>>
>>>       
>>>> When the indexing process still running on a index and I try to
>>>>         
>> search
>>     
>>>> something on this index I retrive this error message:
>>>> java.io.FileNotFoundException:
>>>> \\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system
>>>>         
> cannot
>   
>>> find
>>>       
>>>> the file specified)
>>>>
>>>> How can I solve this.
>>>>         
>>> Could you provide some more context about your application or a
>>>       
> small
>   
>>> test case that shows the error happening?  This sounds likely to be
>>>       
> a
>   
>>> locking issue.
>>>
>>> Mike
>>>
>>>
>>>       
> ---------------------------------------------------------------------
>   
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>>       
> ---------------------------------------------------------------------
>   
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   


-- 
Mit freundlichen Grüßen / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelösung für die Verwaltung der Sammlung zeitgenössischer
   Kunstwerke zur kulturellen Repräsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site für Springer: www.springeronline.com
 * E-Detailing-Portal für Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform für Biogen: www.ms-life.de
 * eCRM-System für Grünenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 14:33:10 2006
Return-Path: <java-user-return-22444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75629 invoked from network); 1 Aug 2006 14:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 14:33:10 -0000
Received: (qmail 76691 invoked by uid 500); 1 Aug 2006 14:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76660 invoked by uid 500); 1 Aug 2006 14:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76619 invoked by uid 99); 1 Aug 2006 14:32:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:32:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:32:54 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79d6fd0e4188ad3ee4c9c@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 1 Aug 2006 16:32:31 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FileNotFoundException
Date: Tue, 1 Aug 2006 16:32:31 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF40D@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException
Thread-Index: Aca1dwNnOUtTI9nTQq6xhf8mYvliMAAADqaw
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have you solved thisproblem?=20

-----Original Message-----
From: Supriya Kumar Shyamal [mailto:supriya.shyamal@artnology.com]=20
Sent: 01 August 2006 16:30
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException

I think its a directory access synchronisation problem, I have also=20
posted about this before. The scenario can be like this ..

When Indexwriter object is created it reads the segment information from =

the file "segments" which nothing but list of files with .cfs or mayn=20
more type, at teh same time IndexSearcher object is created which also=20
make a list of index files from segements file, then you invoke the some =

write operation which triggers the index pemrging, fragmenting etc=20
started haoppening and it modifies the file list in the segments file,=20
but still we have the IndexerSearcher object with old file list and=20
probably that throws the FileNotFoundExcpetion becuase physically the=20
file is not there.

May be I am wrong but I try to put some light on this issue.

I posted the similar problem with subject "FileNotFoundException: occurs =

during the optimization of index", I am also experiencing the similar=20
problem when the index optimization task runs on the index and=20
parallally search function is also running.

thx,
supriya

WATHELET Thomas wrote:
> I'm sure that it's the good location.
> When the index process is finished then I can access the index.
> I know why but I don't know how to solve it.
> When I indexing a lot of file with the extension cfs are created and
> after few second the file are merge in an other file
> ex:
> I have a file with this name _8df.cfs and after few second this file
> disappeared (because it merged with an other file with a new name) so
> the IndexSearcher can't find it.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]=20
> Sent: 01 August 2006 15:49
> To: java-user@lucene.apache.org
> Subject: Re: FileNotFoundException
>
> So it sounds like you're not writing the index to the place you think
> you
> are. Have you just looked in the directories and checked that there =
are
> files there? If Luke can't find them, they're not where you think they
> are.
> Especially if your writer had closed before you looked.
>
> Erick
>
> On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>  =20
>> It's the same when I try to open the index with luke
>>
>> -----Original Message-----
>> From: Erick Erickson [mailto:erickerickson@gmail.com]
>> Sent: 01 August 2006 15:24
>> To: java-user@lucene.apache.org
>> Subject: Re: FileNotFoundException
>>
>> two things come to mind....
>>
>> 1> are you absolutely sure that your reader and writer are pointing =
to
>> the
>> same place? Really, absolutely, positively sure? You've hard-coded =
the
>> path
>> into both writer and reader just to be really, absolutely positively
>> sure?
>> Or, you could let the writer close and *then* try the reader to see =
if
>> it's
>> a timing issue or a path issue.
>>
>> 2> You say that the indexer is still open. Is there any chance it
>>    =20
> hasn't
>  =20
>> yet
>> written anything to disk? I'm not sure of the internals, but there =
has
>> been
>> some discussion that internally a writer uses a RAMdir for a while
>>    =20
> then
>  =20
>> periodically flushes the results to disk. It's possible that you're
>> writer
>> hasn't written anything yet.....
>>
>> 3> (so I can't count). Have you used Luke to open your index to see =
if
>> that
>> works (and the file is in the place you expect)?
>>
>> FWIW
>> Erick
>>
>> On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> =
wrote:
>>    =20
>>> For the index process I use IndexModifier class.
>>> That happens when I try to search something into the index in the
>>>      =20
> same
>  =20
>>> time that the index process still running.
>>>
>>> the code for indexing:
>>>           System.setProperty("org.apache.lucene.lockDir", System
>>>                 .getProperty("user.dir"));
>>>         File folder =3D new File(getIndexPath());
>>>         Directory dir =3D null;
>>>         if (folder.isDirectory() && folder.exists()) {
>>>             dir =3D FSDirectory.getDirectory(getIndexPath(), false);
>>>         } else if (!folder.isFile() && !folder.exists()) {
>>>             dir =3D FSDirectory.getDirectory(getIndexPath(), true);
>>>         } else {
>>>             System.out.println("Bad index folder");
>>>             System.exit(1);
>>>         }
>>>         boolean newIndex =3D true;
>>>         if (dir.fileExists("segments")) {
>>>             newIndex =3D false;
>>>         }
>>>         // long lastindexation =3D dir.fileModified("segments");
>>>         writer =3D new IndexModifier(dir, new SimpleAnalyzer(),
>>>      =20
>> newIndex);
>>    =20
>>>         dir.close();
>>>         writer.setUseCompoundFile(true);
>>>           ...
>>>
>>> Code For searching:
>>>
>>>           MultiSearcher multisearch =3D new
>>>      =20
>> MultiSearcher(indexsearcher);
>>    =20
>>>           Hits hits =3D =
this.multisearch.search(this.getBoolQuery());
>>>           ...
>>>
>>> -----Original Message-----
>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>> Sent: 01 August 2006 13:45
>>> To: java-user@lucene.apache.org
>>> Subject: Re: FileNotFoundException
>>>
>>>
>>>      =20
>>>> When the indexing process still running on a index and I try to
>>>>        =20
>> search
>>    =20
>>>> something on this index I retrive this error message:
>>>> java.io.FileNotFoundException:
>>>> \\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system
>>>>        =20
> cannot
>  =20
>>> find
>>>      =20
>>>> the file specified)
>>>>
>>>> How can I solve this.
>>>>        =20
>>> Could you provide some more context about your application or a
>>>      =20
> small
>  =20
>>> test case that shows the error happening?  This sounds likely to be
>>>      =20
> a
>  =20
>>> locking issue.
>>>
>>> Mike
>>>
>>>
>>>      =20
> ---------------------------------------------------------------------
>  =20
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>>      =20
> ---------------------------------------------------------------------
>  =20
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>      =20
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    =20
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  =20


--=20
Mit freundlichen Gr=FC=DFen / Regards
=20
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
_________________________________________________________________________=
_

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarel=F6sung f=FCr die Verwaltung der Sammlung zeitgen=F6ssischer
   Kunstwerke zur kulturellen Repr=E4sentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site f=FCr Springer: =
www.springeronline.com
 * E-Detailing-Portal f=FCr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform f=FCr Biogen: www.ms-life.de
 * eCRM-System f=FCr Gr=FCnenthal: www.gruenenthal.com

_________________________________________________________________________=
__=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 14:44:00 2006
Return-Path: <java-user-return-22445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79589 invoked from network); 1 Aug 2006 14:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 14:44:00 -0000
Received: (qmail 15626 invoked by uid 500); 1 Aug 2006 14:43:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15601 invoked by uid 500); 1 Aug 2006 14:43:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15590 invoked by uid 99); 1 Aug 2006 14:43:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:43:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 07:43:52 -0700
Received: (qmail 2335 invoked from network); 1 Aug 2006 14:43:29 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]383542@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 1 Aug 2006 14:43:29 -0000
Message-ID: <44CF6892.8080609@artnology.com>
Date: Tue, 01 Aug 2006 16:43:30 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF40D@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF40D@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I should say not exactly, the temporary solution I made is that, I 
always copy the existing index to different directory run the 
modification or optimization task and then copy back, somethign like 
flip flop mechanism..

current index <-- searcher
copy to --> temp index <-- run optimization
temp index <-- switch searcher, so searcher pomits to temtp index
copy back --> current index <-- swicth back the searcher  again

This is somehow the critical issue and there is some promise in lucene 
saying that the locking mechanism will be much more sophisticated in 
future release.

Thanks,
supriya

WATHELET Thomas wrote:
> Have you solved thisproblem? 
>
> -----Original Message-----
> From: Supriya Kumar Shyamal [mailto:supriya.shyamal@artnology.com] 
> Sent: 01 August 2006 16:30
> To: java-user@lucene.apache.org
> Subject: Re: FileNotFoundException
>
> I think its a directory access synchronisation problem, I have also 
> posted about this before. The scenario can be like this ..
>
> When Indexwriter object is created it reads the segment information from 
> the file "segments" which nothing but list of files with .cfs or mayn 
> more type, at teh same time IndexSearcher object is created which also 
> make a list of index files from segements file, then you invoke the some 
> write operation which triggers the index pemrging, fragmenting etc 
> started haoppening and it modifies the file list in the segments file, 
> but still we have the IndexerSearcher object with old file list and 
> probably that throws the FileNotFoundExcpetion becuase physically the 
> file is not there.
>
> May be I am wrong but I try to put some light on this issue.
>
> I posted the similar problem with subject "FileNotFoundException: occurs 
> during the optimization of index", I am also experiencing the similar 
> problem when the index optimization task runs on the index and 
> parallally search function is also running.
>
> thx,
> supriya
>
> WATHELET Thomas wrote:
>   
>> I'm sure that it's the good location.
>> When the index process is finished then I can access the index.
>> I know why but I don't know how to solve it.
>> When I indexing a lot of file with the extension cfs are created and
>> after few second the file are merge in an other file
>> ex:
>> I have a file with this name _8df.cfs and after few second this file
>> disappeared (because it merged with an other file with a new name) so
>> the IndexSearcher can't find it.
>>
>> -----Original Message-----
>> From: Erick Erickson [mailto:erickerickson@gmail.com] 
>> Sent: 01 August 2006 15:49
>> To: java-user@lucene.apache.org
>> Subject: Re: FileNotFoundException
>>
>> So it sounds like you're not writing the index to the place you think
>> you
>> are. Have you just looked in the directories and checked that there are
>> files there? If Luke can't find them, they're not where you think they
>> are.
>> Especially if your writer had closed before you looked.
>>
>> Erick
>>
>> On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>>   
>>     
>>> It's the same when I try to open the index with luke
>>>
>>> -----Original Message-----
>>> From: Erick Erickson [mailto:erickerickson@gmail.com]
>>> Sent: 01 August 2006 15:24
>>> To: java-user@lucene.apache.org
>>> Subject: Re: FileNotFoundException
>>>
>>> two things come to mind....
>>>
>>> 1> are you absolutely sure that your reader and writer are pointing to
>>> the
>>> same place? Really, absolutely, positively sure? You've hard-coded the
>>> path
>>> into both writer and reader just to be really, absolutely positively
>>> sure?
>>> Or, you could let the writer close and *then* try the reader to see if
>>> it's
>>> a timing issue or a path issue.
>>>
>>> 2> You say that the indexer is still open. Is there any chance it
>>>     
>>>       
>> hasn't
>>   
>>     
>>> yet
>>> written anything to disk? I'm not sure of the internals, but there has
>>> been
>>> some discussion that internally a writer uses a RAMdir for a while
>>>     
>>>       
>> then
>>   
>>     
>>> periodically flushes the results to disk. It's possible that you're
>>> writer
>>> hasn't written anything yet.....
>>>
>>> 3> (so I can't count). Have you used Luke to open your index to see if
>>> that
>>> works (and the file is in the place you expect)?
>>>
>>> FWIW
>>> Erick
>>>
>>> On 8/1/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>>>     
>>>       
>>>> For the index process I use IndexModifier class.
>>>> That happens when I try to search something into the index in the
>>>>       
>>>>         
>> same
>>   
>>     
>>>> time that the index process still running.
>>>>
>>>> the code for indexing:
>>>>           System.setProperty("org.apache.lucene.lockDir", System
>>>>                 .getProperty("user.dir"));
>>>>         File folder = new File(getIndexPath());
>>>>         Directory dir = null;
>>>>         if (folder.isDirectory() && folder.exists()) {
>>>>             dir = FSDirectory.getDirectory(getIndexPath(), false);
>>>>         } else if (!folder.isFile() && !folder.exists()) {
>>>>             dir = FSDirectory.getDirectory(getIndexPath(), true);
>>>>         } else {
>>>>             System.out.println("Bad index folder");
>>>>             System.exit(1);
>>>>         }
>>>>         boolean newIndex = true;
>>>>         if (dir.fileExists("segments")) {
>>>>             newIndex = false;
>>>>         }
>>>>         // long lastindexation = dir.fileModified("segments");
>>>>         writer = new IndexModifier(dir, new SimpleAnalyzer(),
>>>>       
>>>>         
>>> newIndex);
>>>     
>>>       
>>>>         dir.close();
>>>>         writer.setUseCompoundFile(true);
>>>>           ...
>>>>
>>>> Code For searching:
>>>>
>>>>           MultiSearcher multisearch = new
>>>>       
>>>>         
>>> MultiSearcher(indexsearcher);
>>>     
>>>       
>>>>           Hits hits = this.multisearch.search(this.getBoolQuery());
>>>>           ...
>>>>
>>>> -----Original Message-----
>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>> Sent: 01 August 2006 13:45
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: FileNotFoundException
>>>>
>>>>
>>>>       
>>>>         
>>>>> When the indexing process still running on a index and I try to
>>>>>         
>>>>>           
>>> search
>>>     
>>>       
>>>>> something on this index I retrive this error message:
>>>>> java.io.FileNotFoundException:
>>>>> \\tradluxstmp01\JavaIndex\tra\index_EN\_2hea.fnm (The system
>>>>>         
>>>>>           
>> cannot
>>   
>>     
>>>> find
>>>>       
>>>>         
>>>>> the file specified)
>>>>>
>>>>> How can I solve this.
>>>>>         
>>>>>           
>>>> Could you provide some more context about your application or a
>>>>       
>>>>         
>> small
>>   
>>     
>>>> test case that shows the error happening?  This sounds likely to be
>>>>       
>>>>         
>> a
>>   
>>     
>>>> locking issue.
>>>>
>>>> Mike
>>>>
>>>>
>>>>       
>>>>         
>> ---------------------------------------------------------------------
>>   
>>     
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>       
>>>>         
>> ---------------------------------------------------------------------
>>   
>>     
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>       
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>     
>>>       
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>   
>>     
>
>
>   


-- 
Mit freundlichen Grüßen / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelösung für die Verwaltung der Sammlung zeitgenössischer
   Kunstwerke zur kulturellen Repräsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site für Springer: www.springeronline.com
 * E-Detailing-Portal für Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform für Biogen: www.ms-life.de
 * eCRM-System für Grünenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 15:10:55 2006
Return-Path: <java-user-return-22446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90781 invoked from network); 1 Aug 2006 15:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 15:10:55 -0000
Received: (qmail 964 invoked by uid 500); 1 Aug 2006 15:10:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 867 invoked by uid 500); 1 Aug 2006 15:10:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 851 invoked by uid 99); 1 Aug 2006 15:10:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:10:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:10:40 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 07600D919F0
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 11:10:16 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Tue, 01 Aug 2006 11:10:19 -0400
X-Sasl-enc: YCIufpa4EjHFpPtQ0XM0Ukd0DPgRt8x+QiKl2ZbQWvg9 1154445019
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 301292119
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 11:10:17 -0400 (EDT)
Message-ID: <44CF6ED3.4090009@mikemccandless.com>
Date: Tue, 01 Aug 2006 11:10:11 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF40D@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF40D@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I think its a directory access synchronisation problem, I have also 
> posted about this before. The scenario can be like this ..
> 
> When Indexwriter object is created it reads the segment information from 
> the file "segments" which nothing but list of files with .cfs or mayn 
> more type, at teh same time IndexSearcher object is created which also 
> make a list of index files from segements file, then you invoke the some 
> write operation which triggers the index pemrging, fragmenting etc 
> started haoppening and it modifies the file list in the segments file, 
> but still we have the IndexerSearcher object with old file list and 
> probably that throws the FileNotFoundExcpetion becuase physically the 
> file is not there.
> 
> May be I am wrong but I try to put some light on this issue.
> 
> I posted the similar problem with subject "FileNotFoundException: occurs 
> during the optimization of index", I am also experiencing the similar 
> problem when the index optimization task runs on the index and 
> parallally search function is also running.

Lucene has file-based locking for exactly this reason.  Can you 
double-check that the same lockDir is being used in both your 
IndexModifier process and your searching process?

Also: this directory can't be an NFS mount -- there are known problems 
with the current Lucene locking implementation and NFS file systems. 
Are you using NFS?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 15:12:50 2006
Return-Path: <java-user-return-22447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91773 invoked from network); 1 Aug 2006 15:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 15:12:50 -0000
Received: (qmail 8358 invoked by uid 500); 1 Aug 2006 15:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8336 invoked by uid 500); 1 Aug 2006 15:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8325 invoked by uid 99); 1 Aug 2006 15:12:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:12:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:12:42 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79d721796288ad3ee4c9c@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 1 Aug 2006 17:12:18 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FileNotFoundException
Date: Tue, 1 Aug 2006 17:12:18 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF410@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException
Thread-Index: Aca1fL8iwETvIz+yTUaprteJO/zHtAAAB7AA
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes=20

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 01 August 2006 17:10
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException


> I think its a directory access synchronisation problem, I have also=20
> posted about this before. The scenario can be like this ..
>=20
> When Indexwriter object is created it reads the segment information
from=20
> the file "segments" which nothing but list of files with .cfs or mayn=20
> more type, at teh same time IndexSearcher object is created which also

> make a list of index files from segements file, then you invoke the
some=20
> write operation which triggers the index pemrging, fragmenting etc=20
> started haoppening and it modifies the file list in the segments file,

> but still we have the IndexerSearcher object with old file list and=20
> probably that throws the FileNotFoundExcpetion becuase physically the=20
> file is not there.
>=20
> May be I am wrong but I try to put some light on this issue.
>=20
> I posted the similar problem with subject "FileNotFoundException:
occurs=20
> during the optimization of index", I am also experiencing the similar=20
> problem when the index optimization task runs on the index and=20
> parallally search function is also running.

Lucene has file-based locking for exactly this reason.  Can you=20
double-check that the same lockDir is being used in both your=20
IndexModifier process and your searching process?

Also: this directory can't be an NFS mount -- there are known problems=20
with the current Lucene locking implementation and NFS file systems.=20
Are you using NFS?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 15:14:57 2006
Return-Path: <java-user-return-22448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92718 invoked from network); 1 Aug 2006 15:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 15:14:56 -0000
Received: (qmail 15718 invoked by uid 500); 1 Aug 2006 15:14:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15688 invoked by uid 500); 1 Aug 2006 15:14:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15676 invoked by uid 99); 1 Aug 2006 15:14:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:14:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:14:48 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 391A7D91D01
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 11:14:27 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Tue, 01 Aug 2006 11:14:30 -0400
X-Sasl-enc: izitf3Q439b/m885hdvcjeqv/OwlfQ4FtFrHzWvYS4TX 1154445270
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id B0F8573A9
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 11:14:30 -0400 (EDT)
Message-ID: <44CF6FD0.9090404@mikemccandless.com>
Date: Tue, 01 Aug 2006 11:14:24 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF410@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF410@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Yes 

Yes, you're certain you have the same lock dir for both modifier & 
search process?

Or, Yes you're using NFS as your lock dir?

Or, both?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 15:16:57 2006
Return-Path: <java-user-return-22449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93848 invoked from network); 1 Aug 2006 15:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 15:16:57 -0000
Received: (qmail 20459 invoked by uid 500); 1 Aug 2006 15:16:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20432 invoked by uid 500); 1 Aug 2006 15:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20421 invoked by uid 99); 1 Aug 2006 15:16:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:16:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:16:50 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79d725489288ad3ee4c9c@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 1 Aug 2006 17:16:27 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FileNotFoundException
Date: Tue, 1 Aug 2006 17:16:28 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF411@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException
Thread-Index: Aca1fT8zEIeaYR+nSd6fiEZfh06KZAAAAnnw
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok if I well understood I have to put the lock file at the same place in
my indexing process and searching process.=20

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 01 August 2006 17:14
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException


> Yes=20

Yes, you're certain you have the same lock dir for both modifier &=20
search process?

Or, Yes you're using NFS as your lock dir?

Or, both?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 15:19:36 2006
Return-Path: <java-user-return-22450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94468 invoked from network); 1 Aug 2006 15:19:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 15:19:36 -0000
Received: (qmail 24195 invoked by uid 500); 1 Aug 2006 15:19:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23620 invoked by uid 500); 1 Aug 2006 15:19:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23608 invoked by uid 99); 1 Aug 2006 15:19:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:19:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:19:26 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id CF362D92A71
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 11:19:04 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Tue, 01 Aug 2006 11:19:08 -0400
X-Sasl-enc: Rmj9JFjtZ1eoAR3hGh2qVx5MiswAC+0tRL041qUNQNc2 1154445548
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 3D8BA1FCB
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 11:19:08 -0400 (EDT)
Message-ID: <44CF70E6.9070605@mikemccandless.com>
Date: Tue, 01 Aug 2006 11:19:02 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF411@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF411@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Ok if I well understood I have to put the lock file at the same place in
> my indexing process and searching process. 

That's correct.

And, that place can't be an NFS mounted directory (until we fix locking 
implementation...).

The two different processes will use this lock file to make sure it's 
safe to read from or write to the files in the index.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 15:26:14 2006
Return-Path: <java-user-return-22451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97375 invoked from network); 1 Aug 2006 15:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 15:26:14 -0000
Received: (qmail 41719 invoked by uid 500); 1 Aug 2006 15:26:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41690 invoked by uid 500); 1 Aug 2006 15:26:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41679 invoked by uid 99); 1 Aug 2006 15:26:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:26:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:26:06 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T79d72dc58988ad3ee4c9c@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 1 Aug 2006 17:25:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FileNotFoundException
Date: Tue, 1 Aug 2006 17:25:44 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF412@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException
Thread-Index: Aca1fexmOfPA1KIzSYOdLVnSQOsITwAAMvwg
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok thanks a lot.

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 01 August 2006 17:19
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException


> Ok if I well understood I have to put the lock file at the same place
in
> my indexing process and searching process.=20

That's correct.

And, that place can't be an NFS mounted directory (until we fix locking=20
implementation...).

The two different processes will use this lock file to make sure it's=20
safe to read from or write to the files in the index.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 15:29:20 2006
Return-Path: <java-user-return-22452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98925 invoked from network); 1 Aug 2006 15:29:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 15:29:20 -0000
Received: (qmail 49643 invoked by uid 500); 1 Aug 2006 15:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49473 invoked by uid 500); 1 Aug 2006 15:29:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49460 invoked by uid 99); 1 Aug 2006 15:29:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:29:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 08:29:12 -0700
Received: (qmail 2437 invoked from network); 1 Aug 2006 15:28:51 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]383542@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 1 Aug 2006 15:28:51 -0000
Message-ID: <44CF7333.4030708@artnology.com>
Date: Tue, 01 Aug 2006 17:28:51 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF40D@EPLUXSEX01.ep.parl.union.eu> <44CF6ED3.4090009@mikemccandless.com>
In-Reply-To: <44CF6ED3.4090009@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, I use the nfs mount to share the index for other search instance 
and all the instances have same lock directory configured, but the only 
the difference is that nfs mount is read-only mount, so I have to 
disable the lock mechanism for search instances, only lock is enabled 
for index modification instance. We have 6 jboss cluster for our 
application. so 5 instances of jboss search on the same index and the 
6th instance used for index update.

supriya

Michael McCandless wrote:
>
>> I think its a directory access synchronisation problem, I have also 
>> posted about this before. The scenario can be like this ..
>>
>> When Indexwriter object is created it reads the segment information 
>> from the file "segments" which nothing but list of files with .cfs or 
>> mayn more type, at teh same time IndexSearcher object is created 
>> which also make a list of index files from segements file, then you 
>> invoke the some write operation which triggers the index pemrging, 
>> fragmenting etc started haoppening and it modifies the file list in 
>> the segments file, but still we have the IndexerSearcher object with 
>> old file list and probably that throws the FileNotFoundExcpetion 
>> becuase physically the file is not there.
>>
>> May be I am wrong but I try to put some light on this issue.
>>
>> I posted the similar problem with subject "FileNotFoundException: 
>> occurs during the optimization of index", I am also experiencing the 
>> similar problem when the index optimization task runs on the index 
>> and parallally search function is also running.
>
> Lucene has file-based locking for exactly this reason.  Can you 
> double-check that the same lockDir is being used in both your 
> IndexModifier process and your searching process?
>
> Also: this directory can't be an NFS mount -- there are known problems 
> with the current Lucene locking implementation and NFS file systems. 
> Are you using NFS?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


-- 
Mit freundlichen Grüßen / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelösung für die Verwaltung der Sammlung zeitgenössischer
   Kunstwerke zur kulturellen Repräsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site für Springer: www.springeronline.com
 * E-Detailing-Portal für Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform für Biogen: www.ms-life.de
 * eCRM-System für Grünenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 16:13:07 2006
Return-Path: <java-user-return-22453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13423 invoked from network); 1 Aug 2006 16:13:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 16:13:07 -0000
Received: (qmail 41060 invoked by uid 500); 1 Aug 2006 16:12:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40920 invoked by uid 500); 1 Aug 2006 16:12:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40883 invoked by uid 99); 1 Aug 2006 16:12:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 09:12:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 09:12:52 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 482D2D92BD1
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 12:12:31 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Tue, 01 Aug 2006 12:12:35 -0400
X-Sasl-enc: vkeV6641wJHaBd/6yzIBpeTJNelBooihS37LdEQSVZxs 1154448754
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id B1EE0236C
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 12:12:34 -0400 (EDT)
Message-ID: <44CF7D6C.4010702@mikemccandless.com>
Date: Tue, 01 Aug 2006 12:12:28 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF40D@EPLUXSEX01.ep.parl.union.eu> <44CF6ED3.4090009@mikemccandless.com> <44CF7333.4030708@artnology.com>
In-Reply-To: <44CF7333.4030708@artnology.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Yes, I use the nfs mount to share the index for other search instance 
> and all the instances have same lock directory configured, but the only 
> the difference is that nfs mount is read-only mount, so I have to 
> disable the lock mechanism for search instances, only lock is enabled 
> for index modification instance. We have 6 jboss cluster for our 
> application. so 5 instances of jboss search on the same index and the 
> 6th instance used for index update.

OK unfortunately this won't work.

Well, it will "work" but you'll hit occasional FileNotFoundExceptions on 
your searchers, whenever a searcher tries to restart itself while the 
updater is writing a new segments file.

Even though the searcher's are read only, they still need to briefly 
hold the commit lock to ensure the updater doesn't write a new segments 
file while the searcher is reading it (and opening each segment).

We are working towards a fix for lock files over NFS mounts, first by 
decoupling locking from directory implementation 
(http://issues.apache.org/jira/browse/LUCENE-635) and second by creating 
better LockFactory implementations for different cases (eg at least a 
locking implementation based on native OS locks).  But this is still in 
process...

I think the best workaround for now is to take an approach like Solr:

   http://incubator.apache.org/solr/features.html
   http://incubator.apache.org/solr/tutorial.html

whereby the single writer will occasionally (at a known safe time) make 
a snapshot of its index, and then the multiple searchers can switch to 
that index once it's safe.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 17:08:08 2006
Return-Path: <java-user-return-22454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35018 invoked from network); 1 Aug 2006 17:08:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 17:08:08 -0000
Received: (qmail 23668 invoked by uid 500); 1 Aug 2006 17:08:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23648 invoked by uid 500); 1 Aug 2006 17:08:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23637 invoked by uid 99); 1 Aug 2006 17:08:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:08:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:08:00 -0700
Received: by ug-out-1314.google.com with SMTP id y2so425105uge
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 10:07:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AVKY1l1oX08isF7ARS0RrUFDIU0G3f3SENfJiENiJ2FciM7ORj9QNzzrMTGP73uXMWdHRlDTWEgs8ELTKqyE8snFQT0mQP4e3u5pjFWboVZ8T9vD2jnlKFYkuDKK02SLpWngr8ocqG82lePuzgoIlfX5DqafiXUp+Z/PZvv8FtY=
Received: by 10.66.244.10 with SMTP id r10mr1262633ugh;
        Tue, 01 Aug 2006 10:07:39 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Tue, 1 Aug 2006 10:07:38 -0700 (PDT)
Message-ID: <f18c9dde0608011007sc5d04dcjb85057eb4cf4c52d@mail.gmail.com>
Date: Tue, 1 Aug 2006 19:07:38 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Search matching
In-Reply-To: <5a8b64620607311538r71fd5672n76117df2ca246178@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5a8b64620607311538r71fd5672n76117df2ca246178@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I guess so, but without any information about your code nobody can tell what.
If you provide more information you willl get help!!

regards simon

On 8/1/06, Rajiv Roopan <rajiv.roopan@gmail.com> wrote:
> Hello, I have an index of locations for example. I'm indexing one field
> using SimpleAnalyzer.
>
> doc1: albany ny
> doc2: hudson ny
> doc3: new york ny
> doc4: new york mills ny
>
> when I search for "new york ny" , the first result returned is always "new
> york mills ny". Am I doing something incorrect?
>
> thanks in advance,
> rajiv
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 17:19:56 2006
Return-Path: <java-user-return-22455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40711 invoked from network); 1 Aug 2006 17:19:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 17:19:55 -0000
Received: (qmail 51701 invoked by uid 500); 1 Aug 2006 17:19:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51511 invoked by uid 500); 1 Aug 2006 17:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51500 invoked by uid 99); 1 Aug 2006 17:19:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:19:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rajiv.roopan@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:19:47 -0700
Received: by ug-out-1314.google.com with SMTP id y2so429526uge
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 10:19:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WXnZXsK8zxKhmBrY06750He/6VmdCC7P0VIRyyzrQMlmMC8K9dDuoYcgAdG/bhK3Hmh3WNWQ7mjn2kEZ47fEV17+NrNHVkBZ4YUjQa4ldnsQ2SvDU/aqDzFgUGkW9dmHVK5E9snVpR6XGV8PuHc9jT6G4HbGcL5Zm7Taj2bJXXo=
Received: by 10.67.93.7 with SMTP id v7mr1261431ugl;
        Tue, 01 Aug 2006 10:19:24 -0700 (PDT)
Received: by 10.66.220.7 with HTTP; Tue, 1 Aug 2006 10:19:24 -0700 (PDT)
Message-ID: <5a8b64620608011019r18eb8d56t56fa59f7748329f5@mail.gmail.com>
Date: Tue, 1 Aug 2006 13:19:24 -0400
From: "Rajiv Roopan" <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: Search matching
In-Reply-To: <f18c9dde0608011007sc5d04dcjb85057eb4cf4c52d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86139_7019734.1154452764927"
References: <5a8b64620607311538r71fd5672n76117df2ca246178@mail.gmail.com>
	 <f18c9dde0608011007sc5d04dcjb85057eb4cf4c52d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_86139_7019734.1154452764927
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok, this is how I'm indexing. Both in indexing and searching I'm using
SimpleAnalyzer()

String loc = "New York, NY";
doc.add(new Field("location", loc, Field.Store.NO, Field.Index.TOKENIZED));

String loc2 = "New York Mills, NY";
 doc.add(new Field("location", loc2, Field.Store.NO, Field.Index.TOKENIZED
));


and this is how I'm searching...

  String searchStr = "New York, NY";
            Analyzer analyzer = new SimpleAnalyzer();
            QueryParser parser = new QueryParser("location", analyzer);
            parser.setDefaultOperator(QueryParser.AND_OPERATOR);
            Query query = parser.parse( searchStr );

           Hits hits = searcher.search( query );

I've tried all query types and everytime "new york mills, ny" is in hits(0).
Both results have a score of 1.0. I know I can add some kind of sort to
always make the shorter field first. But shouldn't the first by default, due
to the scoring algorithm, be "new york, ny" because it's a shorter field?

let me know if i'm missing something. thanks!

rajiv

On 8/1/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>
> I guess so, but without any information about your code nobody can tell
> what.
> If you provide more information you willl get help!!
>
> regards simon
>
> On 8/1/06, Rajiv Roopan <rajiv.roopan@gmail.com> wrote:
> > Hello, I have an index of locations for example. I'm indexing one field
> > using SimpleAnalyzer.
> >
> > doc1: albany ny
> > doc2: hudson ny
> > doc3: new york ny
> > doc4: new york mills ny
> >
> > when I search for "new york ny" , the first result returned is always
> "new
> > york mills ny". Am I doing something incorrect?
> >
> > thanks in advance,
> > rajiv
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_86139_7019734.1154452764927--

From java-user-return-22456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 17:20:59 2006
Return-Path: <java-user-return-22456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41163 invoked from network); 1 Aug 2006 17:20:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 17:20:59 -0000
Received: (qmail 54801 invoked by uid 500); 1 Aug 2006 17:20:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54771 invoked by uid 500); 1 Aug 2006 17:20:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54726 invoked by uid 99); 1 Aug 2006 17:20:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:20:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 10:20:46 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 4D266D93063
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 13:20:24 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Tue, 01 Aug 2006 13:20:28 -0400
X-Sasl-enc: cXsOvNGaUzf/TWoJX/4VCDWtbeJrA6leXwL1qiA2hpdR 1154452826
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id BB4C42310
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 13:20:26 -0400 (EDT)
Message-ID: <44CF8D54.1030106@mikemccandless.com>
Date: Tue, 01 Aug 2006 13:20:20 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException
References: <AD97D5F23B201C448EAB13B4F6DA6A429A67DD@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A429A67DD@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> For the index process I use IndexModifier class.
> That happens when I try to search something into the index in the same
> time that the index process still running. 
> 
> the code for indexing:
> 	  System.setProperty("org.apache.lucene.lockDir", System
>                 .getProperty("user.dir"));
>         File folder = new File(getIndexPath());
>         Directory dir = null;
>         if (folder.isDirectory() && folder.exists()) {
>             dir = FSDirectory.getDirectory(getIndexPath(), false);
>         } else if (!folder.isFile() && !folder.exists()) {
>             dir = FSDirectory.getDirectory(getIndexPath(), true);
>         } else {
>             System.out.println("Bad index folder");
>             System.exit(1);
>         }
>         boolean newIndex = true;
>         if (dir.fileExists("segments")) {
>             newIndex = false;
>         }
>         // long lastindexation = dir.fileModified("segments");
>         writer = new IndexModifier(dir, new SimpleAnalyzer(), newIndex);
>         dir.close();
>         writer.setUseCompoundFile(true);
> 	  ...

BTW, one thing that I don't think is right is the "dir.close()" 
statement after you creat the IndexModifier.  I think you should not 
call dir.close() until you are done with the IndexModifier (ie, at the 
same time you call IndexModifier.close()).

It sounds like it's unrelated to your NFS locking issue but still could 
cause other problems...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 19:18:47 2006
Return-Path: <java-user-return-22457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3557 invoked from network); 1 Aug 2006 19:18:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 19:18:47 -0000
Received: (qmail 98592 invoked by uid 500); 1 Aug 2006 19:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98559 invoked by uid 500); 1 Aug 2006 19:18:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98548 invoked by uid 99); 1 Aug 2006 19:18:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 12:18:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 12:18:39 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C5D2B30EFCD5; Tue,  1 Aug 2006 15:18:18 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 026BA30EFCD5
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 15:18:16 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <5a8b64620608011019r18eb8d56t56fa59f7748329f5@mail.gmail.com>
References: <5a8b64620607311538r71fd5672n76117df2ca246178@mail.gmail.com> <f18c9dde0608011007sc5d04dcjb85057eb4cf4c52d@mail.gmail.com> <5a8b64620608011019r18eb8d56t56fa59f7748329f5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4EF6AEA9-43B2-44FE-B101-330850ACE24C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search matching
Date: Tue, 1 Aug 2006 15:18:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rajiv,

Have a look at the details provided by IndexSearcher.explain() for  
those documents, and you'll get some insight into the factors used to  
rank them.  Since both scores are 1.0, you'll probably want to  
implement your own custom Similarity and override the lengthNorm() to  
adjust that factor.

Another technique you can use is to expand a users query into a more  
sophisticated boolean query, such that a users query for "new york  
ny" would become (in Query.toString format): +new +york +ny "new york  
ny", which would boost exact matches.

	Erik


On Aug 1, 2006, at 1:19 PM, Rajiv Roopan wrote:

> Ok, this is how I'm indexing. Both in indexing and searching I'm using
> SimpleAnalyzer()
>
> String loc = "New York, NY";
> doc.add(new Field("location", loc, Field.Store.NO,  
> Field.Index.TOKENIZED));
>
> String loc2 = "New York Mills, NY";
> doc.add(new Field("location", loc2, Field.Store.NO,  
> Field.Index.TOKENIZED
> ));
>
>
> and this is how I'm searching...
>
>  String searchStr = "New York, NY";
>            Analyzer analyzer = new SimpleAnalyzer();
>            QueryParser parser = new QueryParser("location", analyzer);
>            parser.setDefaultOperator(QueryParser.AND_OPERATOR);
>            Query query = parser.parse( searchStr );
>
>           Hits hits = searcher.search( query );
>
> I've tried all query types and everytime "new york mills, ny" is in  
> hits(0).
> Both results have a score of 1.0. I know I can add some kind of  
> sort to
> always make the shorter field first. But shouldn't the first by  
> default, due
> to the scoring algorithm, be "new york, ny" because it's a shorter  
> field?
>
> let me know if i'm missing something. thanks!
>
> rajiv
>
> On 8/1/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>>
>> I guess so, but without any information about your code nobody can  
>> tell
>> what.
>> If you provide more information you willl get help!!
>>
>> regards simon
>>
>> On 8/1/06, Rajiv Roopan <rajiv.roopan@gmail.com> wrote:
>> > Hello, I have an index of locations for example. I'm indexing  
>> one field
>> > using SimpleAnalyzer.
>> >
>> > doc1: albany ny
>> > doc2: hudson ny
>> > doc3: new york ny
>> > doc4: new york mills ny
>> >
>> > when I search for "new york ny" , the first result returned is  
>> always
>> "new
>> > york mills ny". Am I doing something incorrect?
>> >
>> > thanks in advance,
>> > rajiv
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 21:40:23 2006
Return-Path: <java-user-return-22458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67262 invoked from network); 1 Aug 2006 21:40:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 21:40:23 -0000
Received: (qmail 19060 invoked by uid 500); 1 Aug 2006 21:40:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18985 invoked by uid 500); 1 Aug 2006 21:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18957 invoked by uid 99); 1 Aug 2006 21:40:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:40:11 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of escordeiro@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 14:40:10 -0700
Received: by nf-out-0910.google.com with SMTP id b2so198042nfe
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 14:39:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=POvCsDP5KUkAfM8vOxSdkwJKPU17nUOvHmbZfzFQiVWhj62P6c63csNReypRwkfraKSophQs98n1KVQfBeCGm0XwLg1DFMH9qiLRobA2Y0cd85GflFy0GAlW/O9WPEtDHi+4vT1k5KOOIpVFffI2hqxnLGeZCpX9Q1EGfHmPCoA=
Received: by 10.82.132.4 with SMTP id f4mr34276bud;
        Tue, 01 Aug 2006 14:39:48 -0700 (PDT)
Received: by 10.82.123.3 with HTTP; Tue, 1 Aug 2006 14:39:48 -0700 (PDT)
Message-ID: <f6d98ade0608011439x4c3ff576ua478c36c8036a79e@mail.gmail.com>
Date: Tue, 1 Aug 2006 18:39:48 -0300
From: "Eduardo S. Cordeiro" <escordeiro@gmail.com>
To: java-user@lucene.apache.org
Subject: Search with accents
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SGVsbG8gdGhlcmUsCgpJIGhhdmUgYSBicmF6aWxpYW4gcG9ydHVndWVzZSBpbmRleCwgd2hpY2gg
aGFzIGJlZW4gYW5hbHl6ZWQgd2l0aApCcmF6aWxpYW5BbmFseXplci4gV2hlbiBzZWFyY2hpbmcg
d29yZHMgd2l0aCBhY2NlbnRzLCBob3dldmVyLCB0aGV5J3JlCm5vdCBmb3VuZCAtLSBmb3IgaW5z
dGFuY2UsIGlmIHRoZSBpbmRleCBjb250YWlucyBzb21lIHRleHQgd2l0aCB0aGUKd29yZCAibWHD
p8OjIiBhbmQgSSBzZWFyY2ggZm9yIHRoYXQgdmVyeSB3b3JkLCBJIGdldCBubyBoaXRzLCBidXQg
aWYgSQpzZWFyY2ggIm1hY2EiICh3aGljaCBpcyBhbm90aGVyIHBvcnR1Z3Vlc2Ugd29yZCkgdGhl
biB0aGUgZG9jdW1lbnQKY29udGFpbmluZyAibWHDp8OjIiBpcyBmb3VuZC4KCkkndmUgc2VlbiBw
b3N0cyBpbiB0aGUgYXJjaGl2ZSBpbmRpY2F0aW5nIHRoYXQgSSBzaG91bGQgdXNlCklTT0xhdGlu
MUFjY2VudEZpbHRlciB0byBoYW5kbGUgdGhpcywgYnV0IEkgZG9uJ3QgcXVpdGUgc2VlIGhvdzoK
c2hvdWxkIEkgbGVhdmUgaW5kZXhhdGlvbiBhcyBpdCBpcyBhbmQgdXNlIHRoaXMgZmlsdGVyIG9u
bHkgZm9yIHNlYXJjaApxdWVyaWVzIG9yIHNob3VsZCBJIGFwcGx5IGl0IGluIGJvdGggY2FzZXM/
CgpUaGFuayB5b3UsCkVkdWFyZG8gQ29yZGVpcm8K


From java-user-return-22459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 22:13:09 2006
Return-Path: <java-user-return-22459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76395 invoked from network); 1 Aug 2006 22:13:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 22:13:09 -0000
Received: (qmail 61571 invoked by uid 500); 1 Aug 2006 22:13:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61548 invoked by uid 500); 1 Aug 2006 22:13:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61537 invoked by uid 99); 1 Aug 2006 22:13:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 15:13:03 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_WHOIS_BOGONS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.183] (HELO exprod6og51.obsmtp.com) (64.18.1.183)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 01 Aug 2006 15:13:02 -0700
Received: from source ([139.56.4.13]) by exprod6ob51.postini.com ([64.18.5.12]) with SMTP;
	Tue, 01 Aug 2006 15:12:40 PDT
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.102.101])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id k71MCdO08868
	for <java-user@lucene.apache.org>; Tue, 1 Aug 2006 15:12:39 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id PAA01141
	for <java-user@lucene.apache.org>; Tue, 1 Aug 2006 15:15:16 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <MPFRPJD1>; Tue, 1 Aug 2006 15:15:37 -0700
Message-ID: <8220B8D6B56A9A4E8480489F38E42529E17CDC@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Search with accents
Date: Tue, 1 Aug 2006 15:15:35 -0700 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Have you used the same BrazilianAnalyzer when=20
searching?

Best regards, Lisheng

-----Original Message-----
From: Eduardo S. Cordeiro [mailto:escordeiro@gmail.com]
Sent: Tuesday, August 01, 2006 1:40 PM
To: java-user@lucene.apache.org
Subject: Search with accents


Hello there,

I have a brazilian portuguese index, which has been analyzed with
BrazilianAnalyzer. When searching words with accents, however, they're
not found -- for instance, if the index contains some text with the
word "ma=C3=A7=C3=A3" and I search for that very word, I get no hits, =
but if I
search "maca" (which is another portuguese word) then the document
containing "ma=C3=A7=C3=A3" is found.

I've seen posts in the archive indicating that I should use
ISOLatin1AccentFilter to handle this, but I don't quite see how:
should I leave indexation as it is and use this filter only for search
queries or should I apply it in both cases?

Thank you,
Eduardo Cordeiro

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 22:34:58 2006
Return-Path: <java-user-return-22460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86303 invoked from network); 1 Aug 2006 22:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 22:34:58 -0000
Received: (qmail 88593 invoked by uid 500); 1 Aug 2006 22:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88563 invoked by uid 500); 1 Aug 2006 22:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88552 invoked by uid 99); 1 Aug 2006 22:34:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 15:34:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of escordeiro@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 15:34:49 -0700
Received: by nf-out-0910.google.com with SMTP id b2so210370nfe
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 15:34:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=oecO46k+N/km3uGqkOBf1qBLRlPhTzNjWDXyM4lnzh7ACS+Hhw3FQp/PFGnoDp8GSqyxWFJd5V9jsyfzbptmVnKi4z6Hyh+xkrPo9qA0vIt4xBMqc1xXEf2gsdO9wsGXD3ciubQ9GsKdVmJQVFYOD8i4DDBjyRBpirb+u+E+raE=
Received: by 10.82.129.5 with SMTP id b5mr38278bud;
        Tue, 01 Aug 2006 15:34:27 -0700 (PDT)
Received: by 10.82.123.3 with HTTP; Tue, 1 Aug 2006 15:34:27 -0700 (PDT)
Message-ID: <f6d98ade0608011534m36f81009y57fe4a8df2f8445b@mail.gmail.com>
Date: Tue, 1 Aug 2006 19:34:27 -0300
From: "Eduardo S. Cordeiro" <escordeiro@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search with accents
In-Reply-To: <8220B8D6B56A9A4E8480489F38E42529E17CDC@rw-msg-02.broadvision.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <8220B8D6B56A9A4E8480489F38E42529E17CDC@rw-msg-02.broadvision.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

WWVzLi4uaGVyZSdzIGhvdyBJIGNyZWF0ZSBteSBRdWVyeVBhcnNlcjoKClF1ZXJ5UGFyc2VyIHBh
cnNlciA9IG5ldyBRdWVyeVBhcnNlcigidGV4dCIsIG5ldyBCcmF6aWxpYW5BbmFseXplcigpKTsK
CjIwMDYvOC8xLCBaaGFuZywgTGlzaGVuZyA8TGlzaGVuZy5aaGFuZ0Bicm9hZHZpc2lvbi5jb20+
Ogo+IEhpLAo+Cj4gSGF2ZSB5b3UgdXNlZCB0aGUgc2FtZSBCcmF6aWxpYW5BbmFseXplciB3aGVu
Cj4gc2VhcmNoaW5nPwo+Cj4gQmVzdCByZWdhcmRzLCBMaXNoZW5nCj4KPiAtLS0tLU9yaWdpbmFs
IE1lc3NhZ2UtLS0tLQo+IEZyb206IEVkdWFyZG8gUy4gQ29yZGVpcm8gW21haWx0bzplc2NvcmRl
aXJvQGdtYWlsLmNvbV0KPiBTZW50OiBUdWVzZGF5LCBBdWd1c3QgMDEsIDIwMDYgMTo0MCBQTQo+
IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiBTdWJqZWN0OiBTZWFyY2ggd2l0aCBh
Y2NlbnRzCj4KPgo+IEhlbGxvIHRoZXJlLAo+Cj4gSSBoYXZlIGEgYnJhemlsaWFuIHBvcnR1Z3Vl
c2UgaW5kZXgsIHdoaWNoIGhhcyBiZWVuIGFuYWx5emVkIHdpdGgKPiBCcmF6aWxpYW5BbmFseXpl
ci4gV2hlbiBzZWFyY2hpbmcgd29yZHMgd2l0aCBhY2NlbnRzLCBob3dldmVyLCB0aGV5J3JlCj4g
bm90IGZvdW5kIC0tIGZvciBpbnN0YW5jZSwgaWYgdGhlIGluZGV4IGNvbnRhaW5zIHNvbWUgdGV4
dCB3aXRoIHRoZQo+IHdvcmQgIm1hw6fDoyIgYW5kIEkgc2VhcmNoIGZvciB0aGF0IHZlcnkgd29y
ZCwgSSBnZXQgbm8gaGl0cywgYnV0IGlmIEkKPiBzZWFyY2ggIm1hY2EiICh3aGljaCBpcyBhbm90
aGVyIHBvcnR1Z3Vlc2Ugd29yZCkgdGhlbiB0aGUgZG9jdW1lbnQKPiBjb250YWluaW5nICJtYcOn
w6MiIGlzIGZvdW5kLgo+Cj4gSSd2ZSBzZWVuIHBvc3RzIGluIHRoZSBhcmNoaXZlIGluZGljYXRp
bmcgdGhhdCBJIHNob3VsZCB1c2UKPiBJU09MYXRpbjFBY2NlbnRGaWx0ZXIgdG8gaGFuZGxlIHRo
aXMsIGJ1dCBJIGRvbid0IHF1aXRlIHNlZSBob3c6Cj4gc2hvdWxkIEkgbGVhdmUgaW5kZXhhdGlv
biBhcyBpdCBpcyBhbmQgdXNlIHRoaXMgZmlsdGVyIG9ubHkgZm9yIHNlYXJjaAo+IHF1ZXJpZXMg
b3Igc2hvdWxkIEkgYXBwbHkgaXQgaW4gYm90aCBjYXNlcz8KPgo+IFRoYW5rIHlvdSwKPiBFZHVh
cmRvIENvcmRlaXJvCj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBq
YXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBj
b21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K


From java-user-return-22461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 01 23:37:36 2006
Return-Path: <java-user-return-22461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8408 invoked from network); 1 Aug 2006 23:37:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2006 23:37:36 -0000
Received: (qmail 68258 invoked by uid 500); 1 Aug 2006 23:37:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68221 invoked by uid 500); 1 Aug 2006 23:37:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68209 invoked by uid 99); 1 Aug 2006 23:37:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 16:37:30 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_WHOIS_BOGONS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.187] (HELO exprod6og53.obsmtp.com) (64.18.1.187)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 01 Aug 2006 16:37:29 -0700
Received: from source ([139.56.4.13]) by exprod6ob53.postini.com ([64.18.5.12]) with SMTP;
	Tue, 01 Aug 2006 16:37:06 PDT
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.102.101])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id k71Nb5O09761
	for <java-user@lucene.apache.org>; Tue, 1 Aug 2006 16:37:05 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id QAA02654
	for <java-user@lucene.apache.org>; Tue, 1 Aug 2006 16:39:43 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <MPFRPJLV>; Tue, 1 Aug 2006 16:40:03 -0700
Message-ID: <8220B8D6B56A9A4E8480489F38E42529E17CDD@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Search with accents
Date: Tue, 1 Aug 2006 16:40:01 -0700 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

In this case I guess we may need to find out what=20
exactly BrazilianAnalyzer do on the input string:

BrazilianAnalyzer braAnalyser =3D new BrazilianAnalyzer();
TokenStream ts1 =3D braAnalyzer.tokenStream("text", new =
StringReader(queryStr));
... // what BrazilianAnalyzer do?

Also what exactly ISOLatin1AccentFilter can do:

WhiteSpaceAnalyzer wsAnalyzer =3D new wsAnalyzer();
TokenStream tmpts =3D wsAnalyzer.tokenStream("text", new =
StringReader(queryStr));
TokenStream ts2 =3D new ISOLatin1AccentFilter(tmpts);
.... // what ISOLatin1AccentFilter do?

to see what is wrong with ts1 and see if ts2 can=20
do better job? I have never used ISOLatin1AccentFilter
before, I am not sure if the way to test it is really
OK, here I merely suggest a way to test.

Best regards, Lisheng
=20

-----Original Message-----
From: Eduardo S. Cordeiro [mailto:escordeiro@gmail.com]
Sent: Tuesday, August 01, 2006 2:34 PM
To: java-user@lucene.apache.org
Subject: Re: Search with accents


Yes...here's how I create my QueryParser:

QueryParser parser =3D new QueryParser("text", new =
BrazilianAnalyzer());

2006/8/1, Zhang, Lisheng <Lisheng.Zhang@broadvision.com>:
> Hi,
>
> Have you used the same BrazilianAnalyzer when
> searching?
>
> Best regards, Lisheng
>
> -----Original Message-----
> From: Eduardo S. Cordeiro [mailto:escordeiro@gmail.com]
> Sent: Tuesday, August 01, 2006 1:40 PM
> To: java-user@lucene.apache.org
> Subject: Search with accents
>
>
> Hello there,
>
> I have a brazilian portuguese index, which has been analyzed with
> BrazilianAnalyzer. When searching words with accents, however, =
they're
> not found -- for instance, if the index contains some text with the
> word "ma=C3=A7=C3=A3" and I search for that very word, I get no hits, =
but if I
> search "maca" (which is another portuguese word) then the document
> containing "ma=C3=A7=C3=A3" is found.
>
> I've seen posts in the archive indicating that I should use
> ISOLatin1AccentFilter to handle this, but I don't quite see how:
> should I leave indexation as it is and use this filter only for =
search
> queries or should I apply it in both cases?
>
> Thank you,
> Eduardo Cordeiro
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 03:11:20 2006
Return-Path: <java-user-return-22462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78488 invoked from network); 2 Aug 2006 03:11:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 03:11:20 -0000
Received: (qmail 1634 invoked by uid 500); 2 Aug 2006 03:11:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1564 invoked by uid 500); 2 Aug 2006 03:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1553 invoked by uid 99); 2 Aug 2006 03:11:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 20:11:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 20:11:13 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C84F75B77E; Tue,  1 Aug 2006 20:10:52 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C37477F403
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 20:10:52 -0700 (PDT)
Date: Tue, 1 Aug 2006 20:10:52 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Does lucene performance suffer with a lot of empty fields ?
In-Reply-To: <865c77680608010052h70811fcai1cc516997b8fc522@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608012007310.11441@hal.rescomp.berkeley.edu>
References: <865c77680608010052h70811fcai1cc516997b8fc522@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: >From what I gather, I can go ahead & create an Index & for each Document &
: only add the relevant fields. Is this correct?
: I should still be able to search with queries like "mel Movies:braveheart".
: Right ?
:
: Would this impact the search performance ?
: Any other words of caution for me ?

it will absolutely work -- the one performance issue you may want to
consider is that by default a "fieldNorm" is computed for every document
and every field, and these are kept in memory -- there is a way to turn
them off on a per field basis (you have to turn them off for every doc, if
even one doc wants a norm for field X, then every doc gets a norm for
field X)

how to "omitNorms" for a field, and what the pros (save space) and cons
(no "lengthNorm" or "field boosts") are has been discussed extensively in
the past.  search the archives for anything i've put in quotes and you'll
find lots of info on this.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 03:32:23 2006
Return-Path: <java-user-return-22463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83862 invoked from network); 2 Aug 2006 03:32:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 03:32:22 -0000
Received: (qmail 32942 invoked by uid 500); 2 Aug 2006 03:32:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32910 invoked by uid 500); 2 Aug 2006 03:32:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32899 invoked by uid 99); 2 Aug 2006 03:32:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 20:32:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 20:32:15 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3D3FF5B77E; Tue,  1 Aug 2006 20:31:55 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3781E7F403
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 20:31:55 -0700 (PDT)
Date: Tue, 1 Aug 2006 20:31:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Sorting
In-Reply-To: <20060801091655.BE06718699@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0608012015490.11441@hal.rescomp.berkeley.edu>
References: <20060801091655.BE06718699@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I'm with you now. So you do seeks in your comparator. For a large index you
: might as well use java.io.RandomAccessFile for the "array", because there
: would be little value in buffering when the comparator is liable to jump all

yep .. that's what i was getting at ... but i'm not so sure that buffering
won't be usefull.  I've i'm not mistaken, all Scorers are by contract
expected to score docs in docId order so when your hits are being
collected for sorting, you should allways be moving forward in the file
-- but you may skip ahead alot when the result set isn't a high percentage
of the total number of docs.
(i may be wrong about all Scorers going in docId order ... if you
explicilty use the 1.4 BooleanScorer you may not get that behavior, but i
think everything else works that way ... perhaps someone else can verify
that)

: around the file. This sounds very expensive, though. If you don't open a
: Searcher to frequently, it makes sense (in my muddled mind) to pre-sort to
: reduce the number of seeks. That was the half-baked idea of the third file,
: which essentially orders document IDs.

presort on what exactly, the field you want to sort on?  -- That's
esentially what the TermEnum is.  I'm not sure how having that helps you
... let's assume you've got some data structure (let's not worry about the
file/ram or TermEnum distinction just yet) containing every document in
your index of 100,000,000 products sorted on the price field, and you've
done a search for "apple" and there are 1,000,000 docIds for matching
products ready to be collected by your new custom Scoring code ... how
does the full list of all docIds sorted by price help you as you are given
docIds and have to decide if that doc is better or worse then the docs
you've already collected?

: > Bear in mind, there have been some improvements recently to the ability to
: grab individual stored fields per document....
:
: I can't see anything like that in 2.0. Is that something in the Lucene HEAD
: build?

I guess so ... search the java-dev archives for "lazy field loading" or
"Fieldable" .. that should find some of the discussion about it and the
jira issue with the changes.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 04:02:18 2006
Return-Path: <java-user-return-22464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90648 invoked from network); 2 Aug 2006 04:02:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 04:02:18 -0000
Received: (qmail 62846 invoked by uid 500); 2 Aug 2006 04:02:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61877 invoked by uid 500); 2 Aug 2006 04:02:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61866 invoked by uid 99); 2 Aug 2006 04:02:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 21:02:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yzy1980@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 21:02:09 -0700
Received: by ug-out-1314.google.com with SMTP id y2so644107uge
        for <java-user@lucene.apache.org>; Tue, 01 Aug 2006 21:01:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OG0cV08QV/VO4DfCldGcXfQysacZHZmmj9malIBMA4LJ4mha8stsj1ttyQNhsHmyrNFtFQukkijIs8iN1DFIiDegutytIzheqbXcmWqeEUf+ANgkvaEO+oeQQVDIk6ucXi6HrF0anTUJcO14FpJCdJVO5TM+Dn4Bwv1kfu8/oj4=
Received: by 10.66.222.9 with SMTP id u9mr512942ugg;
        Tue, 01 Aug 2006 21:01:47 -0700 (PDT)
Received: by 10.67.16.19 with HTTP; Tue, 1 Aug 2006 21:01:47 -0700 (PDT)
Message-ID: <c2174c890608012101x56fcdf44k59e81304c5683a90@mail.gmail.com>
Date: Wed, 2 Aug 2006 12:01:47 +0800
From: "zhongyi yuan" <yzy1980@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: About search performance
In-Reply-To: <c2174c890607281846w3187877cq6ef610cff0c1d7ae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c2174c890607281846w3187877cq6ef610cff0c1d7ae@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My question is about deal with the multi clauses booleanQuery,  the
num of clauses is giant and induce the performance.So I want some
other method to replace this query to improve the performance. Now
through filter achieve the goal.

Thanks for the suggestions.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 05:59:28 2006
Return-Path: <java-user-return-22465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37100 invoked from network); 2 Aug 2006 05:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 05:59:28 -0000
Received: (qmail 51027 invoked by uid 500); 2 Aug 2006 05:59:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50997 invoked by uid 500); 2 Aug 2006 05:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50986 invoked by uid 99); 2 Aug 2006 05:59:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 22:59:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.imbeault@sympatico.ca designates 209.226.175.74 as permitted sender)
Received: from [209.226.175.74] (HELO tomts20-srv.bellnexxia.net) (209.226.175.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 22:59:21 -0700
Received: from [69.157.156.160] by tomts20-srv.bellnexxia.net
          (InterMail vM.5.01.06.13 201-253-122-130-113-20050324) with ESMTP
          id <20060802055859.DPUH16051.tomts20-srv.bellnexxia.net@[69.157.156.160]>
          for <java-user@lucene.apache.org>; Wed, 2 Aug 2006 01:58:59 -0400
Message-ID: <44D03F28.4070206@sympatico.ca>
Date: Wed, 02 Aug 2006 01:59:04 -0400
From: Michael Imbeault <michael.imbeault@sympatico.ca>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Indexsearcher - one instance in PHP via javabridge?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello everyone,

I'm having tons of fun right now with Lucene indexing a large (15 
millions documents) library. I'm developing the web front end, and I 
read on this mailing list that it's better to have one instance of 
IndexSearcher.

I'm using Lucene in PHP via JavaBridge (and Tomcat), but I can't figure 
out how to instantiate an unique copy of IndexSearcher, somehow get it 
in my webpage for each thread, and destroy it before I add stuff to the 
index (at the end of each day).

I'm trying to follow these instructions, but I have zero experience with 
Java, JVMs, Tomcat, etc. Could somebody help me with this one? Thanks in 
advance!

Instructions:
I commend you for giving all the information that's relevant. For the sake
of simplicity, and because it is the vast majority of use cases, could you
endorse the following as the simplest, most correct way (i.e. a best
practice) to implement Lucene for Web applications.

1- create an IndexSearcher instance in the servlet's init() method, and
cache it in the web application context,

2- in the doGet or doPost() methods, lookup the index searcher instance in
the web application context and use it to run queries,

3- close the IndexSearcher in the destroy() method.

This is *simple*, and *correct*. It doesn't create a new IndexSearcher per
query, doesn't use a static field, nor a singleton, nor a pool. All ideas
that have been suggested but have issues, or are more difficult to
implement.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 06:06:46 2006
Return-Path: <java-user-return-22466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38578 invoked from network); 2 Aug 2006 06:06:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 06:06:46 -0000
Received: (qmail 61309 invoked by uid 500); 2 Aug 2006 06:06:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61277 invoked by uid 500); 2 Aug 2006 06:06:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61266 invoked by uid 99); 2 Aug 2006 06:06:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 23:06:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Aug 2006 23:06:39 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C14215B766; Tue,  1 Aug 2006 23:06:15 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 846C27F403
	for <java-user@lucene.apache.org>; Tue,  1 Aug 2006 23:06:15 -0700 (PDT)
Date: Tue, 1 Aug 2006 23:06:15 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Indexsearcher - one instance in PHP via javabridge?
In-Reply-To: <44D03F28.4070206@sympatico.ca>
Message-ID: <Pine.LNX.4.58.0608012302130.5310@hal.rescomp.berkeley.edu>
References: <44D03F28.4070206@sympatico.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'm trying to follow these instructions, but I have zero experience with
: Java, JVMs, Tomcat, etc. Could somebody help me with this one? Thanks in
: advance!

if you want to eliminate your need to write java code (or servlets)
completely take a look at Solr ... it provides a webservicesish API
for indexing and searching, and handles all of the Lucene "best
practices" for you...

http://incubator.apache.org/solr/
http://incubator.apache.org/solr/tutorial.html

There's even some examples on the wiki about how to talk to Solr via PHP
(but i don't really know anything about PHP so I can't comment on the
quality of the code)

http://wiki.apache.org/solr/SolPHP



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 09:38:58 2006
Return-Path: <java-user-return-22467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13152 invoked from network); 2 Aug 2006 09:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 09:38:57 -0000
Received: (qmail 48896 invoked by uid 500); 2 Aug 2006 09:38:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48863 invoked by uid 500); 2 Aug 2006 09:38:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48852 invoked by uid 99); 2 Aug 2006 09:38:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 02:38:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 02:38:49 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 37C7C18878; Wed,  2 Aug 2006 09:38:27 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 40F6418699
	for <java-user@lucene.apache.org>; Wed,  2 Aug 2006 09:38:26 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Sorting
Date: Wed, 2 Aug 2006 10:38:17 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	boundary="----=_NextPart_000_0016_01C6B61F.C2735EA0";
	protocol="application/x-pkcs7-signature";
	micalg=SHA1
Thread-Index: Aca15EMg9/qJ1TYOSV2ynshgUbUMzAAF99sw
In-Reply-To: <Pine.LNX.4.58.0608012015490.11441@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060802093826.40F6418699@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0016_01C6B61F.C2735EA0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

> Scorers are by contract expected to score docs in docId order

This was my missing link. Now it makes sense to me to use a buffered
RandomAccessFile and not bother with the presort.

Many thanks, Chris, that was very well explained. 

I'll have a crack at a lean-memory SortComparatorSource implementation,
which uses a buffered RandomAccessFile, as described.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 02 August 2006 04:32
To: java-user@lucene.apache.org
Subject: RE: Sorting

: I'm with you now. So you do seeks in your comparator. For a large index
you
: might as well use java.io.RandomAccessFile for the "array", because there
: would be little value in buffering when the comparator is liable to jump
all

yep .. that's what i was getting at ... but i'm not so sure that buffering
won't be usefull.  I've i'm not mistaken, all Scorers are by contract
expected to score docs in docId order so when your hits are being collected
for sorting, you should allways be moving forward in the file
-- but you may skip ahead alot when the result set isn't a high percentage
of the total number of docs.
(i may be wrong about all Scorers going in docId order ... if you explicilty
use the 1.4 BooleanScorer you may not get that behavior, but i think
everything else works that way ... perhaps someone else can verify
that)

: around the file. This sounds very expensive, though. If you don't open a
: Searcher to frequently, it makes sense (in my muddled mind) to pre-sort to
: reduce the number of seeks. That was the half-baked idea of the third
file,
: which essentially orders document IDs.

presort on what exactly, the field you want to sort on?  -- That's
esentially what the TermEnum is.  I'm not sure how having that helps you ...
let's assume you've got some data structure (let's not worry about the
file/ram or TermEnum distinction just yet) containing every document in your
index of 100,000,000 products sorted on the price field, and you've done a
search for "apple" and there are 1,000,000 docIds for matching products
ready to be collected by your new custom Scoring code ... how does the full
list of all docIds sorted by price help you as you are given docIds and have
to decide if that doc is better or worse then the docs you've already
collected?

: > Bear in mind, there have been some improvements recently to the ability
to
: grab individual stored fields per document....
:
: I can't see anything like that in 2.0. Is that something in the Lucene
HEAD
: build?

I guess so ... search the java-dev archives for "lazy field loading" or
"Fieldable" .. that should find some of the discussion about it and the jira
issue with the changes.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0016_01C6B61F.C2735EA0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDgwMjA5
MzgxNFowIwYJKoZIhvcNAQkEMRYEFCgGQ+BxeFJwoWMMNbR3I1oqFaC1MGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAANaf+nazFUnlb+8WKa5HCZ8meo3JlmxMwwH
qKhSJbR4jirg24mEcq9rHFxj2mSzuGwIXt5R8TZ/gckOHTZzzmm5/BTTvBc3+UaVJbfZtmA7SKYc
wD5zOxgNEbRtgXjTMztMW/06PATgCUdklx1zUNHWXFNv7FUYsrtieIDdIef22xQ0m2w+drXZXn64
bsojx5Dou3mTy9VxXkakzl1IM6uuGDeeEMajGE+DYJXvivOtZf8uY4ufFsF2VR5l5PmdWwptsMjE
MFy9mkubj18A7g5KUcNl/Smu/cMF8xQRZcGi/MCjXrJFQ2jo5AdRtHjX4f5kmbABzDdhBbbo97qc
8eEAAAAAAAA=

------=_NextPart_000_0016_01C6B61F.C2735EA0--


From java-user-return-22468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 13:07:41 2006
Return-Path: <java-user-return-22468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88536 invoked from network); 2 Aug 2006 13:07:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 13:07:41 -0000
Received: (qmail 20006 invoked by uid 500); 2 Aug 2006 13:07:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19985 invoked by uid 500); 2 Aug 2006 13:07:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19974 invoked by uid 99); 2 Aug 2006 13:07:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 06:07:34 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,RCVD_IN_NJABL_PROXY,RCVD_IN_SORBS_SOCKS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.43.219.31] (HELO web8316.mail.in.yahoo.com) (202.43.219.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 02 Aug 2006 06:07:33 -0700
Received: (qmail 89633 invoked by uid 60001); 2 Aug 2006 13:07:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=xDpv+S0YCEm69EjXwx3/5bO9w8ldP07J7oNvQkgP0xfAasjtZtI0hQm8dHxdDdHKL8fGH2YwlI2XDo+aL1MAhTiZvTRFY8BWnq2aI+L6CG+9uRzdcssTCg5PNWIrtZd7QdS+1PIXn49BfPdb7IVX77ZHj6PQjxIkQAJ9WVpmnE8=  ;
Message-ID: <20060802130709.89631.qmail@web8316.mail.in.yahoo.com>
Received: from [59.95.164.19] by web8316.mail.in.yahoo.com via HTTP; Wed, 02 Aug 2006 14:07:09 BST
Date: Wed, 2 Aug 2006 14:07:09 +0100 (BST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Setting up slide in Eclipse
To: java-user@lucene.apache.org
Cc: michael_prichard@mac.com, Russell.Allen@aebn.net,
  otis_gospodnetic@yahoo.com
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-486025688-1154524029=:88565"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-486025688-1154524029=:88565
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hello All,
  Does any body help me how to setup slide in Eclipse and start debug.
  Thanks...

 				
---------------------------------
 Here’s a new way to find what you're looking for - Yahoo! Answers 
--0-486025688-1154524029=:88565--

From java-user-return-22469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 13:25:57 2006
Return-Path: <java-user-return-22469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2273 invoked from network); 2 Aug 2006 13:25:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 13:25:57 -0000
Received: (qmail 55098 invoked by uid 500); 2 Aug 2006 13:25:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55071 invoked by uid 500); 2 Aug 2006 13:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55060 invoked by uid 99); 2 Aug 2006 13:25:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 06:25:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of zhang.xiaoye@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 06:25:49 -0700
Received: by py-out-1112.google.com with SMTP id d80so1574183pyd
        for <java-user@lucene.apache.org>; Wed, 02 Aug 2006 06:25:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jft4RVzszWa5sBknPIeTd7e/5ZjDqfNPPH/2BuW7YrZfxASkjebHegrrFdd9fAPFjU5/0qPGgDnOgEoXOGr0X6pxtRg8kRlxfsI3dz07XdsBuhioL/BjL7p8/NBkpxyEKQCylLVafu/ydTrBlpKxXrz+9L/4HItNrwMvwPywvHk=
Received: by 10.35.38.17 with SMTP id q17mr1468275pyj;
        Wed, 02 Aug 2006 06:25:27 -0700 (PDT)
Received: by 10.35.102.7 with HTTP; Wed, 2 Aug 2006 06:25:27 -0700 (PDT)
Message-ID: <a43ef01e0608020625nd1f3608ue316248e31e4b58f@mail.gmail.com>
Date: Wed, 2 Aug 2006 21:25:27 +0800
From: "=?UTF-8?B?5p2O5a+75qyi5pmV6I+c5LqG?=" <zhang.xiaoye@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Setting up slide in Eclipse
In-Reply-To: <20060802130709.89631.qmail@web8316.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95992_27435145.1154525127926"
References: <20060802130709.89631.qmail@web8316.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_95992_27435145.1154525127926
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

d2hhdCdzIHdyb25nIHdpdGggeW91PwoKT24gOC8yLzA2LCBhc2xhbSBiYXJpIDxpYW1hc2xhbW9r
QHlhaG9vLmNvLmluPiB3cm90ZToKPgo+IGhlbGxvIEFsbCwKPiAgIERvZXMgYW55IGJvZHkgaGVs
cCBtZSBob3cgdG8gc2V0dXAgc2xpZGUgaW4gRWNsaXBzZSBhbmQgc3RhcnQgZGVidWcuCj4gICBU
aGFua3MuLi4KPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gSGVyZSdz
IGEgbmV3IHdheSB0byBmaW5kIHdoYXQgeW91J3JlIGxvb2tpbmcgZm9yIC0gWWFob28hIEFuc3dl
cnMKPgoKCgotLSAKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0K5YGa5pyA5aW955qE77yM5ZCD5pyA6aaZ55qE77yM546p5pyA6YW3
55qE77yM5byA5pyA5b+r55qECmh0dHA6Ly9zcGFjZXMubXNuLmNvbS9tZW1iZXJzL2tvZndhbmcK
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0K
------=_Part_95992_27435145.1154525127926--

From java-user-return-22470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 14:44:29 2006
Return-Path: <java-user-return-22470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34054 invoked from network); 2 Aug 2006 14:44:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 14:44:29 -0000
Received: (qmail 65613 invoked by uid 500); 2 Aug 2006 14:44:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65542 invoked by uid 500); 2 Aug 2006 14:44:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65502 invoked by uid 99); 2 Aug 2006 14:44:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 07:44:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.89.10.11] (HELO denhaag.ewi.utwente.nl) (130.89.10.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 07:44:14 -0700
Received: from ewiex01.ewi.utwente.nl (ewiex11.ewi.utwente.nl [130.89.10.43])
	by denhaag.ewi.utwente.nl (8.13.6/8.13.6) with ESMTP id k72Ehoiq002464
	for <java-user@lucene.apache.org>; Wed, 2 Aug 2006 16:43:50 +0200 (MEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FileNotFoundException
Date: Wed, 2 Aug 2006 16:43:51 +0200
Message-ID: <69E7A7D387181541BA19AC01E25D41942F92CD@ewiex11.dynamic.ewi.utwente.nl>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF411@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException
Thread-Index: Aca1fT8zEIeaYR+nSd6fiEZfh06KZAAAAnnwADEQf3A=
From: "Trieschnigg, R.B. \(Dolf\)" <r.b.trieschnigg@ewi.utwente.nl>
To: <java-user@lucene.apache.org>
X-Spam-Score: -5.481 () ALL_TRUSTED,AWL,BAYES_00,J_CHICKENPOX_43
X-Scanned-By: MIMEDefang 2.52 on 130.89.10.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0b5 (denhaag.ewi.utwente.nl [130.89.10.11]); Wed, 02 Aug 2006 16:43:51 +0200 (MEST)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Ok if I well understood I have to put the lock file at the=20
> same place in my indexing process and searching process.=20

> the code for indexing:
> 	  System.setProperty("org.apache.lucene.lockDir", System
>                .getProperty("user.dir"));

Are you sure that both the search process as well as the indexing proces =
run as the same user?
(if you are doing the search on a webserver it will probably will be run =
as the webservice user, with a different user.dir property)

Regards,
Dolf

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 15:30:25 2006
Return-Path: <java-user-return-22471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49762 invoked from network); 2 Aug 2006 15:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 15:30:24 -0000
Received: (qmail 10573 invoked by uid 500); 2 Aug 2006 15:30:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10544 invoked by uid 500); 2 Aug 2006 15:30:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10533 invoked by uid 99); 2 Aug 2006 15:30:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 08:30:16 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 08:30:15 -0700
Received: by nf-out-0910.google.com with SMTP id b2so439315nfe
        for <java-user@lucene.apache.org>; Wed, 02 Aug 2006 08:29:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=oYX9j9ucJpjxnxdMRdLLcULh4rc6lJSLyE+xDehgQDahZ7RisAgbSXoaB8NoYW6FGCNy3MZF5l2R6qVyfJjEvRdvfyoBIhIesFyKtaLqq8Z509pIGREzfCsc/ahk3BTrMzEVOR0ChUzaee+3zieOj/A1JxmEYQA5Z6n7MD7UNVw=
Received: by 10.49.19.18 with SMTP id w18mr2380435nfi;
        Wed, 02 Aug 2006 08:29:54 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 2 Aug 2006 08:29:54 -0700 (PDT)
Message-ID: <359a92830608020829h5a05d381ofe17b6d3d7f1d0be@mail.gmail.com>
Date: Wed, 2 Aug 2006 11:29:54 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: wildcards and spans
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83406_21747025.1154532594223"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_83406_21747025.1154532594223
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm back, with another flavor of wildcards. What direction would you point a
poor boy who's project lead wants wildcard queries and spans? Here's the
problem....

I cannot use any of the classes that throw a "TooManyClauses" exception (e.g.
SpanRegexQuery or SpanNearQuery with, say WildCardQuery). The corpus is big
enough that this is guaranteed to be thrown. So, currently I'm using a
filter for wildcard queries, populating it via WildcardTermEnum and
TermDocs... Works like a champ. But I don't see how to combine this with
spans...

It seems to me that spans are incompatible with filters, they're just
different beasts. I see no way incorporate spans and filters without doing
actual work myself. So, it seems I'm left with several alternatives.

1> figure it out when creating the filter. Conceptually, for each document
find the offsets of the terms I want to span, and find out if the distance
between them fits my criteria and only add the doc to the filter if the
distance is within my parameters.

2> Look at the docs returned by the current filtered process and, for each
doc returned,
  a> don't add if it doesn't fit my span criteria by examining the term
positions.
  b> re-query with a wildcard span, restricted by doc ID. I *think* that by
restricting the query by (lucene) doc_id I'll be able to avoid the "too many
clauses" issue. Assuming that I remember correctly and that the
most-restrictive clause is honored when trying this....

guys, feel free to hop in here with just the names of the classes I really
want to pay attention to <G>....

I know this is scanty info, what I'm looking for is a very quick pointer....
What I'm especially looking for is "Just use the contrib/JustWhatYouWanted
class" <G> although I poked around and didn't see anything...

Thanks
Erick

------=_Part_83406_21747025.1154532594223--

From java-user-return-22472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 15:43:42 2006
Return-Path: <java-user-return-22472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53545 invoked from network); 2 Aug 2006 15:43:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 15:43:42 -0000
Received: (qmail 45086 invoked by uid 500); 2 Aug 2006 15:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45057 invoked by uid 500); 2 Aug 2006 15:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45043 invoked by uid 99); 2 Aug 2006 15:43:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 08:43:35 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 08:43:30 -0700
Received: by py-out-1112.google.com with SMTP id d80so1621942pyd
        for <java-user@lucene.apache.org>; Wed, 02 Aug 2006 08:43:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GIrCSoEKe8WBnQ/bh0dc+MhO3rAkOtNDz54/LJ88Ku3jSQbXBcqtc9OuL6yfW2JYLZHQ0sTuua0tvVese8BwFNlbn1yx0eiHp3h+oWWLSTrBc2/KhoaM8apsaROWjhSE7bf7w/t5aO/wT4wKzB55eQJMJFd8R6NIGKcaZYBSx4w=
Received: by 10.35.94.2 with SMTP id w2mr1622687pyl;
        Wed, 02 Aug 2006 08:43:09 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 2 Aug 2006 08:43:09 -0700 (PDT)
Message-ID: <359a92830608020843p574751adv19b50a9baa0ee166@mail.gmail.com>
Date: Wed, 2 Aug 2006 11:43:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wildcards and spans
In-Reply-To: <359a92830608020829h5a05d381ofe17b6d3d7f1d0be@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83638_28721169.1154533389817"
References: <359a92830608020829h5a05d381ofe17b6d3d7f1d0be@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_83638_28721169.1154533389817
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I can't do 2 <b> TooManyClauses again. Should have realized that the
terms are assembled independently....

Erick

On 8/2/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I'm back, with another flavor of wildcards. What direction would you point
> a poor boy who's project lead wants wildcard queries and spans? Here's the
> problem....
>
> I cannot use any of the classes that throw a "TooManyClauses" exception (
> e.g. SpanRegexQuery or SpanNearQuery with, say WildCardQuery). The corpus
> is big enough that this is guaranteed to be thrown. So, currently I'm using
> a filter for wildcard queries, populating it via WildcardTermEnum and
> TermDocs... Works like a champ. But I don't see how to combine this with
> spans...
>
> It seems to me that spans are incompatible with filters, they're just
> different beasts. I see no way incorporate spans and filters without doing
> actual work myself. So, it seems I'm left with several alternatives.
>
> 1> figure it out when creating the filter. Conceptually, for each document
> find the offsets of the terms I want to span, and find out if the distance
> between them fits my criteria and only add the doc to the filter if the
> distance is within my parameters.
>
> 2> Look at the docs returned by the current filtered process and, for each
> doc returned,
>   a> don't add if it doesn't fit my span criteria by examining the term
> positions.
>   b> re-query with a wildcard span, restricted by doc ID. I *think* that
> by restricting the query by (lucene) doc_id I'll be able to avoid the "too
> many clauses" issue. Assuming that I remember correctly and that the
> most-restrictive clause is honored when trying this....
>
> guys, feel free to hop in here with just the names of the classes I really
> want to pay attention to <G>....
>
> I know this is scanty info, what I'm looking for is a very quick
> pointer.... What I'm especially looking for is "Just use the
> contrib/JustWhatYouWanted class" <G> although I poked around and didn't see
> anything...
>
> Thanks
> Erick
>

------=_Part_83638_28721169.1154533389817--

From java-user-return-22473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 16:15:48 2006
Return-Path: <java-user-return-22473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64796 invoked from network); 2 Aug 2006 16:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 16:15:48 -0000
Received: (qmail 32849 invoked by uid 500); 2 Aug 2006 16:15:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32816 invoked by uid 500); 2 Aug 2006 16:15:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32805 invoked by uid 99); 2 Aug 2006 16:15:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 09:15:40 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 09:15:39 -0700
Received: by py-out-1112.google.com with SMTP id d80so1633270pyd
        for <java-user@lucene.apache.org>; Wed, 02 Aug 2006 09:15:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K8/He0u3qiKIf1FaUnttadJsUnDaNMZbDEsaFrtr1Xn2fR0ViGwdWuzTVrlgpsp7Tv0WSN5jGRXeUON4BbOgqynjSeS+tmoKGT3J5bWe7V3wKPbgulsVoHohe/b4ZiGjYLmLayhgw4EQr1/LtJzAv6bkczTo/LVvqZheyiAyNA4=
Received: by 10.35.61.2 with SMTP id o2mr1680773pyk;
        Wed, 02 Aug 2006 09:15:18 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 2 Aug 2006 09:15:18 -0700 (PDT)
Message-ID: <359a92830608020915nfe753oe8ef02e6a423b58c@mail.gmail.com>
Date: Wed, 2 Aug 2006 12:15:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wildcards and spans
In-Reply-To: <359a92830608020829h5a05d381ofe17b6d3d7f1d0be@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_84154_12246007.1154535318702"
References: <359a92830608020829h5a05d381ofe17b6d3d7f1d0be@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_84154_12246007.1154535318702
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey! I'm actually looking all on my own. Anyway, 2<b> gives me
TooManyClauses. It looks like what I want is to use
IndexReader.termPositions to aggregate the offsets of all the wildcard terms
on a per-document basis, then walk the lists for proximity. Something
like...

for each wildcard term wt
   for each WildCardTermEnum wet
        for each termdoc aggregate the positions by doc ID with other terms
from wt.


Now I have, for each original wildcard term a list of all doc IDs and all
positions that any term matching the wildcard occupies. For any doc that
appears in all lists, compare the positions for proximity and, if proximity
is met, add it to my filter.

And away we go. Of course, I have no idea what the speed here is, but I
guess that's what testing is for.

Am I on the right path?

Erick


On 8/2/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I'm back, with another flavor of wildcards. What direction would you point
> a poor boy who's project lead wants wildcard queries and spans? Here's the
> problem....
>
> I cannot use any of the classes that throw a "TooManyClauses" exception (
> e.g. SpanRegexQuery or SpanNearQuery with, say WildCardQuery). The corpus
> is big enough that this is guaranteed to be thrown. So, currently I'm using
> a filter for wildcard queries, populating it via WildcardTermEnum and
> TermDocs... Works like a champ. But I don't see how to combine this with
> spans...
>
> It seems to me that spans are incompatible with filters, they're just
> different beasts. I see no way incorporate spans and filters without doing
> actual work myself. So, it seems I'm left with several alternatives.
>
> 1> figure it out when creating the filter. Conceptually, for each document
> find the offsets of the terms I want to span, and find out if the distance
> between them fits my criteria and only add the doc to the filter if the
> distance is within my parameters.
>
> 2> Look at the docs returned by the current filtered process and, for each
> doc returned,
>   a> don't add if it doesn't fit my span criteria by examining the term
> positions.
>   b> re-query with a wildcard span, restricted by doc ID. I *think* that
> by restricting the query by (lucene) doc_id I'll be able to avoid the "too
> many clauses" issue. Assuming that I remember correctly and that the
> most-restrictive clause is honored when trying this....
>
> guys, feel free to hop in here with just the names of the classes I really
> want to pay attention to <G>....
>
> I know this is scanty info, what I'm looking for is a very quick
> pointer.... What I'm especially looking for is "Just use the
> contrib/JustWhatYouWanted class" <G> although I poked around and didn't see
> anything...
>
> Thanks
> Erick
>

------=_Part_84154_12246007.1154535318702--

From java-user-return-22474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 16:24:01 2006
Return-Path: <java-user-return-22474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68610 invoked from network); 2 Aug 2006 16:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 16:24:00 -0000
Received: (qmail 52822 invoked by uid 500); 2 Aug 2006 16:23:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52795 invoked by uid 500); 2 Aug 2006 16:23:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52784 invoked by uid 99); 2 Aug 2006 16:23:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 09:23:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 09:23:52 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.6/8.13.6) with ESMTP id k72GNV3N097705
	for <java-user@lucene.apache.org>; Wed, 2 Aug 2006 18:23:31 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: wildcards and spans
Date: Wed, 2 Aug 2006 18:23:30 +0200
User-Agent: KMail/1.8.2
References: <359a92830608020829h5a05d381ofe17b6d3d7f1d0be@mail.gmail.com>
In-Reply-To: <359a92830608020829h5a05d381ofe17b6d3d7f1d0be@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200608021823.30384.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 02 August 2006 17:29, Erick Erickson wrote:
> I'm back, with another flavor of wildcards. What direction would you point a
> poor boy who's project lead wants wildcard queries and spans? Here's the
> problem....
> 
> I cannot use any of the classes that throw a "TooManyClauses" exception 
(e.g.
> SpanRegexQuery or SpanNearQuery with, say WildCardQuery). The corpus is big
> enough that this is guaranteed to be thrown. So, currently I'm using a
> filter for wildcard queries, populating it via WildcardTermEnum and
> TermDocs... Works like a champ. But I don't see how to combine this with
> spans...

You can try BooleanQuery.setMaxClauseCount() to  increase the max. nr. of
clauses to 100000 or so and see what happens when searching.
With enough RAM it should work nicely.

You could also use the surround query language. This allows to set
the max. nr. of clauses for a whole query instead of per BooleanQuery.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 17:33:08 2006
Return-Path: <java-user-return-22475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89413 invoked from network); 2 Aug 2006 17:33:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 17:33:08 -0000
Received: (qmail 83682 invoked by uid 500); 2 Aug 2006 17:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83569 invoked by uid 500); 2 Aug 2006 17:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83548 invoked by uid 99); 2 Aug 2006 17:32:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 10:32:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of leandro.saad@gmail.com designates 66.249.82.192 as permitted sender)
Received: from [66.249.82.192] (HELO wx-out-0102.google.com) (66.249.82.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 10:32:56 -0700
Received: by wx-out-0102.google.com with SMTP id s15so94821wxc
        for <java-user@lucene.apache.org>; Wed, 02 Aug 2006 10:32:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R4GMWBkO7C1KlJEO64FfC/M+nv36as/3ibwlgEcnUV3Dwi7om4X5m1ynDSF02GNIWT1wyZ5/EsTPBVneK3xqJe/+l7mgwn+othSgyznI88uHiRnT5Cw4fDJ8RJ4ZnlwEoThZueOg1GUf0BQ9u5EmNaGxFT09M0DgeR4N6jeLDRQ=
Received: by 10.78.97.7 with SMTP id u7mr440070hub;
        Wed, 02 Aug 2006 10:32:34 -0700 (PDT)
Received: by 10.78.68.11 with HTTP; Wed, 2 Aug 2006 10:32:34 -0700 (PDT)
Message-ID: <27bc81750608021032p5e5cbed4q4ebd41e0af4aadf2@mail.gmail.com>
Date: Wed, 2 Aug 2006 14:32:34 -0300
From: "Leandro Saad" <leandro.saad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search with accents
In-Reply-To: <f6d98ade0608011534m36f81009y57fe4a8df2f8445b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_96956_28256532.1154539954492"
References: <8220B8D6B56A9A4E8480489F38E42529E17CDC@rw-msg-02.broadvision.com>
	 <f6d98ade0608011534m36f81009y57fe4a8df2f8445b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_96956_28256532.1154539954492
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Eduardo. I'm using the StandardAnalyser and I can search for words with
accents. In my case "sa=FAde"

--=20
Leandro Rodrigo Saad Cruz
CTO - InterBusiness Technologies
db.apache.org/ojb
guara-framework.sf.net
xingu.sf.net

On 8/1/06, Eduardo S. Cordeiro <escordeiro@gmail.com> wrote:
>
> Yes...here's how I create my QueryParser:
>
> QueryParser parser =3D new QueryParser("text", new BrazilianAnalyzer());
>
> 2006/8/1, Zhang, Lisheng <Lisheng.Zhang@broadvision.com>:
> > Hi,
> >
> > Have you used the same BrazilianAnalyzer when
> > searching?
> >
> > Best regards, Lisheng
> >
> > -----Original Message-----
> > From: Eduardo S. Cordeiro [mailto:escordeiro@gmail.com]
> > Sent: Tuesday, August 01, 2006 1:40 PM
> > To: java-user@lucene.apache.org
> > Subject: Search with accents
> >
> >
> > Hello there,
> >
> > I have a brazilian portuguese index, which has been analyzed with
> > BrazilianAnalyzer. When searching words with accents, however, they're
> > not found -- for instance, if the index contains some text with the
> > word "ma=E7=E3" and I search for that very word, I get no hits, but if =
I
> > search "maca" (which is another portuguese word) then the document
> > containing "ma=E7=E3" is found.
> >
> > I've seen posts in the archive indicating that I should use
> > ISOLatin1AccentFilter to handle this, but I don't quite see how:
> > should I leave indexation as it is and use this filter only for search
> > queries or should I apply it in both cases?
> >
> > Thank you,
> > Eduardo Cordeiro
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_96956_28256532.1154539954492--

From java-user-return-22476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 18:18:02 2006
Return-Path: <java-user-return-22476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10505 invoked from network); 2 Aug 2006 18:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:18:02 -0000
Received: (qmail 17654 invoked by uid 500); 2 Aug 2006 18:17:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17551 invoked by uid 500); 2 Aug 2006 18:17:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17502 invoked by uid 99); 2 Aug 2006 18:17:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:17:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:17:39 -0700
Received: by py-out-1112.google.com with SMTP id d80so1673244pyd
        for <java-user@lucene.apache.org>; Wed, 02 Aug 2006 11:17:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ncxnE+hWV8cL2ThlWadmGX8BDikgwhDHoqRgG00d6OSAn9jNzpgQCIH9N4Om+1Xo456fYPLHHXr+j9XnMgJc5aAG4djPYlDN2zM7jOD7iIUcJDJLdlZt52fVEI44snFJJwU8k6WRYYVMtQRP1m2bu5fXmhckIw8ViQ4LxgpuyAg=
Received: by 10.35.109.2 with SMTP id l2mr1849682pym;
        Wed, 02 Aug 2006 11:17:19 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 2 Aug 2006 11:17:19 -0700 (PDT)
Message-ID: <359a92830608021117i184e4807mbdc187414e8dfc4e@mail.gmail.com>
Date: Wed, 2 Aug 2006 14:17:19 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wildcards and spans
In-Reply-To: <200608021823.30384.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86911_33552951.1154542639316"
References: <359a92830608020829h5a05d381ofe17b6d3d7f1d0be@mail.gmail.com>
	 <200608021823.30384.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_86911_33552951.1154542639316
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm almost entirely certain that any value I choose for setMaxClauseCount is
going to be wrong, but I might give it a try.

Erick

On 8/2/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> On Wednesday 02 August 2006 17:29, Erick Erickson wrote:
> > I'm back, with another flavor of wildcards. What direction would you
> point a
> > poor boy who's project lead wants wildcard queries and spans? Here's the
> > problem....
> >
> > I cannot use any of the classes that throw a "TooManyClauses" exception
> (e.g.
> > SpanRegexQuery or SpanNearQuery with, say WildCardQuery). The corpus is
> big
> > enough that this is guaranteed to be thrown. So, currently I'm using a
> > filter for wildcard queries, populating it via WildcardTermEnum and
> > TermDocs... Works like a champ. But I don't see how to combine this with
> > spans...
>
> You can try BooleanQuery.setMaxClauseCount() to  increase the max. nr. of
> clauses to 100000 or so and see what happens when searching.
> With enough RAM it should work nicely.
>
> You could also use the surround query language. This allows to set
> the max. nr. of clauses for a whole query instead of per BooleanQuery.
>
> Regards,
> Paul Elschot
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_86911_33552951.1154542639316--

From java-user-return-22477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 18:33:08 2006
Return-Path: <java-user-return-22477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16003 invoked from network); 2 Aug 2006 18:33:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 18:33:08 -0000
Received: (qmail 59493 invoked by uid 500); 2 Aug 2006 18:33:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59453 invoked by uid 500); 2 Aug 2006 18:33:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59442 invoked by uid 99); 2 Aug 2006 18:33:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:33:00 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_MESSAGE,HTML_SHOUTING5,HTML_TAG_EXIST_TBODY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.220.2.151] (HELO ipex4.johnshopkins.edu) (128.220.2.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 11:32:59 -0700
Received: from atis9nn0d91.monument1.jhmi.edu (HELO ATIS9NN0D91) ([162.129.49.150])
  by ipex4.johnshopkins.edu with SMTP; 02 Aug 2006 14:32:32 -0400
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.07,206,1151899200"; 
   d="scan'208,217"; a="176354480:sNHT73665836"
Message-ID: <1bb901c6b662$03e2e710$963181a2@win.ad.jhu.edu>
Reply-To: "Zhao, Xin" <xzhao@jhu.edu>
From: "Zhao, Xin" <xzhao9@jhmi.edu>
To: <java-user@lucene.apache.org>
Subject: scoring formula
Date: Wed, 2 Aug 2006 14:32:31 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_1BB6_01C6B640.7CAB2170"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_1BB6_01C6B640.7CAB2170
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

Hi,
I noticed the scoring formula in the errata of book "Lucene in Action" =
is a little different from the one in Javadoc. I enclosed the one in =
Javadoc at the end of email. getBoost(t in q) is in Javadoc's formula =
(which I assume is the correct one), but not in "lucene in action". Any =
idea? We need to re-implement the scoring in our application. What I =
understand is for each term in query, we should multiply the indexing =
boost( the boost manfully added while indexing) with the query boost, =
and with term frequency, lengthnorm, idf. So the formula in Javadoc =
makes more sense to me. Please correct me if I am wrong. Totally new to =
Lucene.
Appreciate your help,

Xin

*************************************************************

      score(q,d) =3D
     =CE=A3 ( tf(t in d) * idf(t)^2 * getBoost(t in q) * =
getBoost(t.field in d) * lengthNorm(t.field in d) )   * coord(q,d) * =
queryNorm(sumOfSqaredWeights) =20
      t in q =20

************************************************************

------=_NextPart_000_1BB6_01C6B640.7CAB2170--


From java-user-return-22478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 19:55:52 2006
Return-Path: <java-user-return-22478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57026 invoked from network); 2 Aug 2006 19:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 19:55:51 -0000
Received: (qmail 82386 invoked by uid 500); 2 Aug 2006 19:55:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82362 invoked by uid 500); 2 Aug 2006 19:55:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82351 invoked by uid 99); 2 Aug 2006 19:55:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 12:55:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 12:55:42 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 12D6030EFCD6; Wed,  2 Aug 2006 15:55:20 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 715D630EFCD6
	for <java-user@lucene.apache.org>; Wed,  2 Aug 2006 15:55:16 -0400 (EDT)
In-Reply-To: <1bb901c6b662$03e2e710$963181a2@win.ad.jhu.edu>
References: <1bb901c6b662$03e2e710$963181a2@win.ad.jhu.edu>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <471AEFA4-45AD-462C-A223-6D18E81FD3A4@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: scoring formula
Date: Wed, 2 Aug 2006 15:55:10 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Xin,

You're correct.  This was noted as an errata here:  <http://=20
www.lucenebook.com/blog/errata/2005/01/24/scoring_formula_omission.html>

All other known errata is here: <http://www.lucenebook.com/blog/=20
errata/> (and searchable via Lucene, as in <http://lucenebook.com/=20
search?query=3Dscoring+formula+incomplete> :)

	Erik



On Aug 2, 2006, at 2:32 PM, Zhao, Xin wrote:

> Hi,
> I noticed the scoring formula in the errata of book "Lucene in =20
> Action" is a little different from the one in Javadoc. I enclosed =20
> the one in Javadoc at the end of email. getBoost(t in q) is in =20
> Javadoc's formula (which I assume is the correct one), but not in =20
> "lucene in action". Any idea? We need to re-implement the scoring =20
> in our application. What I understand is for each term in query, we =20=

> should multiply the indexing boost( the boost manfully added while =20
> indexing) with the query boost, and with term frequency, =20
> lengthnorm, idf. So the formula in Javadoc makes more sense to me. =20
> Please correct me if I am wrong. Totally new to Lucene.
> Appreciate your help,
>
> Xin
>
> *************************************************************
>
>       score(q,d) =3D
>      =CE=A3 ( tf(t in d) * idf(t)^2 * getBoost(t in q) * getBoost=20
> (t.field in d) * lengthNorm(t.field in d) )   * coord(q,d) * =20
> queryNorm(sumOfSqaredWeights)
>       t in q
>
> ************************************************************


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 19:57:11 2006
Return-Path: <java-user-return-22479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57391 invoked from network); 2 Aug 2006 19:57:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 19:57:10 -0000
Received: (qmail 84868 invoked by uid 500); 2 Aug 2006 19:57:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84843 invoked by uid 500); 2 Aug 2006 19:57:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84830 invoked by uid 99); 2 Aug 2006 19:57:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 12:57:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 12:57:03 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 46DA330EFCD7; Wed,  2 Aug 2006 15:56:43 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 6553130EFCD6
	for <java-user@lucene.apache.org>; Wed,  2 Aug 2006 15:56:42 -0400 (EDT)
In-Reply-To: <1bb901c6b662$03e2e710$963181a2@win.ad.jhu.edu>
References: <1bb901c6b662$03e2e710$963181a2@win.ad.jhu.edu>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <7554877E-2CBE-4E35-9B30-E53BFA32BAF6@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: scoring formula
Date: Wed, 2 Aug 2006 15:56:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please disregard my previous quick reply as I did not fully read your =20=

message before replying.  *ugh*

	Erik

On Aug 2, 2006, at 2:32 PM, Zhao, Xin wrote:

> Hi,
> I noticed the scoring formula in the errata of book "Lucene in =20
> Action" is a little different from the one in Javadoc. I enclosed =20
> the one in Javadoc at the end of email. getBoost(t in q) is in =20
> Javadoc's formula (which I assume is the correct one), but not in =20
> "lucene in action". Any idea? We need to re-implement the scoring =20
> in our application. What I understand is for each term in query, we =20=

> should multiply the indexing boost( the boost manfully added while =20
> indexing) with the query boost, and with term frequency, =20
> lengthnorm, idf. So the formula in Javadoc makes more sense to me. =20
> Please correct me if I am wrong. Totally new to Lucene.
> Appreciate your help,
>
> Xin
>
> *************************************************************
>
>       score(q,d) =3D
>      =CE=A3 ( tf(t in d) * idf(t)^2 * getBoost(t in q) * getBoost=20
> (t.field in d) * lengthNorm(t.field in d) )   * coord(q,d) * =20
> queryNorm(sumOfSqaredWeights)
>       t in q
>
> ************************************************************


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 20:05:42 2006
Return-Path: <java-user-return-22480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59451 invoked from network); 2 Aug 2006 20:05:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 20:05:41 -0000
Received: (qmail 99006 invoked by uid 500); 2 Aug 2006 20:05:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98981 invoked by uid 500); 2 Aug 2006 20:05:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98970 invoked by uid 99); 2 Aug 2006 20:05:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:05:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:05:34 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D68A95B77E; Wed,  2 Aug 2006 13:05:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CD2D47F403;
	Wed,  2 Aug 2006 13:05:07 -0700 (PDT)
Date: Wed, 2 Aug 2006 13:05:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: dash-words
In-Reply-To: <44CF157C.9000101@uni-hd.de>
Message-ID: <Pine.LNX.4.58.0608021255260.20475@hal.rescomp.berkeley.edu>
References: <1153705956.28605.144.camel@localhost> 
 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com> 
 <1153741901.28605.184.camel@localhost>  <1153746947.28605.213.camel@localhost>
  <1153747041.28605.215.camel@localhost>  <1153751420.28605.221.camel@localhost>
  <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com> 
 <44C6379A.40000@uni-hd.de> <c68e39170607250842l6169aca0w2d6313cb2e43d1b9@mail.gmail.com>
 <44CF157C.9000101@uni-hd.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: with a query like this +arbeiterjugend +west-berlin I get no results.
:
: org.apache.lucene.queryParser.QueryParser.parse makes this query (with
: WordDelimiterFilter) with Default QueryParser.AND_OPERATOR:
:
: +titel:arbeiterjugend +titel:"west (berlin westberlin)"
:
: with +arbeiterjugend +westberlin I get the result.
:
: It seems that the synonyms don't work with the query. How do you solve
: this in Solr? Do I have to build a TermQuery?

First off, when using WordDelimiterFilter it's generally a good idea to
use a slightly differnet configuration of the Filter in your indexng
analyzer then in your query analyzer -- this is discussed a bit inthe
wiki...

http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b83870ca7890cd73b193cefed83c283339089
http://wiki.apache.org/solr/SolrRelevancyCookbook#head-353fcfa33e5c4a0a5959aa3d8d33c5a3a61f2683

...this can help avoid situations like you describe.

but in general, what you are running into is a general constraint of the
way Analyzers can produce tokens with a "zero gap" indicating that they
occupy the same spot as the previous token, but there is no way for the
analyzer to indicate that a sequence of 1 or more tokens occupies the same
space as another sequence of 1 or more tokens.  so when QUeryParser asks
the analyzer to make a token stream out of "west-berlin" the analyzer has
no way to return a token stream that can easily be recognized as [ [[west]
[berlin]] or [westberlin] ].

this does in fact prove to be a large problem when dealing with "multi
word synonyms" (also discussed in the wiki mentioned above) but can
generally be dealt with in the WordDeliminterFilter.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 20:14:17 2006
Return-Path: <java-user-return-22481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61668 invoked from network); 2 Aug 2006 20:14:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 20:14:17 -0000
Received: (qmail 26616 invoked by uid 500); 2 Aug 2006 20:14:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26570 invoked by uid 500); 2 Aug 2006 20:14:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26530 invoked by uid 99); 2 Aug 2006 20:14:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:14:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:14:09 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C968C5B783; Wed,  2 Aug 2006 13:13:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C37937F403
	for <java-user@lucene.apache.org>; Wed,  2 Aug 2006 13:13:48 -0700 (PDT)
Date: Wed, 2 Aug 2006 13:13:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Filters or BooleanQuery
In-Reply-To: <44CE064C.5090107@mac.com>
Message-ID: <Pine.LNX.4.58.0608021307390.20475@hal.rescomp.berkeley.edu>
References: <44CE064C.5090107@mac.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I could easily go through and add query's but I have a feeling I should
: use a filter somewhere.  What are the best practices when deciding what
: to do?

the list archives will have a lot of discussion on this (mainly along the
lines of "should i use a Filter?"  in general the deciding factors should
be...

  1) does the critera in question need to affect scoring -- ie: if you are
searching for new articles with the word "software" and you only want
articles maped to the stock tickers AAPL or IBM, do you care what the term
frequency of the "stockTicker" field is for each document, or what hte
document frequency for those particular tickers are? ... if so a Filter
won't help you.

  2) is the criteria somehting that is reused a lot, and would therfor
make sense to cache independend of the users input -- ie: if a user
is searching for "flash ram" products and they and lots of other users
want to restict to "instock:true" products then a cached Filter could be
really handy.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 20:16:11 2006
Return-Path: <java-user-return-22482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62339 invoked from network); 2 Aug 2006 20:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 20:16:11 -0000
Received: (qmail 34710 invoked by uid 500); 2 Aug 2006 20:16:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34687 invoked by uid 500); 2 Aug 2006 20:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34662 invoked by uid 99); 2 Aug 2006 20:16:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:16:02 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kkinder@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:16:01 -0700
Received: by py-out-1112.google.com with SMTP id d80so1709370pyd
        for <java-user@lucene.apache.org>; Wed, 02 Aug 2006 13:15:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=OojxUHvRqX4+2dRjTXHEYM1M92BhjyifM/D2QUGNqyda7iCfrbf2c+/zHXr/Jv6x/wtTjd4RoRqaT44kj8ZSW0ykGIZ42zoPE3rIugMXaitpGD9kSP3oGjenTXyBQupjDSs9wO2YhnvkmWof+6kDVYkxVjVWoIq4M61d9AxBQPg=
Received: by 10.35.135.12 with SMTP id m12mr1997874pyn;
        Wed, 02 Aug 2006 13:15:41 -0700 (PDT)
Received: by 10.35.109.18 with HTTP; Wed, 2 Aug 2006 13:15:41 -0700 (PDT)
Message-ID: <2295ce5d0608021315m196e8bbbna6deb1fc1fcc74e1@mail.gmail.com>
Date: Wed, 2 Aug 2006 15:15:41 -0500
From: "Ken Kinder" <kkinder@gmail.com>
To: java-user@lucene.apache.org
Subject: Plus factor in returned results
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'd like to start with a standard parsed query, then combine it with
another that says requires a field's untokenized value be inside of a
set. The catch is, I want the document's position in that set to be
included in the scoring.

So I want to search for "chinese restaurant", but only for these
towns. However, if it's town A, I want that to be a plus-factor, even
though towns B and C are in the set. Make sense?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 20:35:47 2006
Return-Path: <java-user-return-22483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68841 invoked from network); 2 Aug 2006 20:35:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 20:35:46 -0000
Received: (qmail 70605 invoked by uid 500); 2 Aug 2006 20:35:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70579 invoked by uid 500); 2 Aug 2006 20:35:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70568 invoked by uid 99); 2 Aug 2006 20:35:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:35:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 13:35:39 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Wed, 02 Aug 2006 16:35:18 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20060721201137.2194.qmail@web25904.mail.ukl.yahoo.com>
References: <20060721201137.2194.qmail@web25904.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5036244D-002F-4217-8392-46DCEF67D93C@genome.chop.edu>
Content-Transfer-Encoding: 7bit
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Re: Fastest Method for Searching (need all results)
Date: Wed, 2 Aug 2006 16:35:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

eks dev,

The most best way of looping through all results that I have come  
across is using a HitCollector and grabbing the field values via  
FieldCache.  This is under two conditions:  1) The FieldCache arrays  
are initialized only once, since creating these arrays creates  
serious overhead, especially if you have millions of documents in  
your index.  I use Tomcat as my application server, so the way I  
accomplished this was I created a Listener class that extends  
ServletContextListener.  This way, when Tomcat restarts, the  
contextInitialize method in the Listener class is executed,  
initializing the arrays only once.  These arrays are then accessible  
to all users across all sessions.  2)You have enough RAM to store the  
arrays.  If you are dealing with millions of documents, you can  
easily use up hundreds of megabytes of RAM, so keep this in mind.   
Just thought I would let you know how I made out.  Thanks again.

Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 02 21:11:30 2006
Return-Path: <java-user-return-22484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80059 invoked from network); 2 Aug 2006 21:11:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2006 21:11:29 -0000
Received: (qmail 66283 invoked by uid 500); 2 Aug 2006 21:11:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66210 invoked by uid 500); 2 Aug 2006 21:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66184 invoked by uid 99); 2 Aug 2006 21:11:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 14:11:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.imbeault@sympatico.ca designates 209.226.175.25 as permitted sender)
Received: from [209.226.175.25] (HELO tomts5-srv.bellnexxia.net) (209.226.175.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 14:11:15 -0700
Received: from [69.157.156.160] by tomts5-srv.bellnexxia.net
          (InterMail vM.5.01.06.13 201-253-122-130-113-20050324) with ESMTP
          id <20060802211053.QGNK18394.tomts5-srv.bellnexxia.net@[69.157.156.160]>
          for <java-user@lucene.apache.org>; Wed, 2 Aug 2006 17:10:53 -0400
Message-ID: <44D114E3.3070100@sympatico.ca>
Date: Wed, 02 Aug 2006 17:10:59 -0400
From: Michael Imbeault <michael.imbeault@sympatico.ca>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexsearcher - one instance in PHP via javabridge?
References: <44D03F28.4070206@sympatico.ca> <Pine.LNX.4.58.0608012302130.5310@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0608012302130.5310@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wow thanks, this is such a good answer that I wasn't expecting that much 
:-) It looks like it could resolve all my problems at once!

Thanks a lot!

Mike

Chris Hostetter wrote:
> : I'm trying to follow these instructions, but I have zero experience with
> : Java, JVMs, Tomcat, etc. Could somebody help me with this one? Thanks in
> : advance!
>
> if you want to eliminate your need to write java code (or servlets)
> completely take a look at Solr ... it provides a webservicesish API
> for indexing and searching, and handles all of the Lucene "best
> practices" for you...
>
> http://incubator.apache.org/solr/
> http://incubator.apache.org/solr/tutorial.html
>
> There's even some examples on the wiki about how to talk to Solr via PHP
> (but i don't really know anything about PHP so I can't comment on the
> quality of the code)
>
> http://wiki.apache.org/solr/SolPHP
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.or

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 01:51:19 2006
Return-Path: <java-user-return-22485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70026 invoked from network); 3 Aug 2006 01:51:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 01:51:19 -0000
Received: (qmail 78059 invoked by uid 500); 3 Aug 2006 01:51:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78019 invoked by uid 500); 3 Aug 2006 01:51:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78006 invoked by uid 99); 3 Aug 2006 01:51:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 18:51:13 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of escordeiro@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 18:51:12 -0700
Received: by nf-out-0910.google.com with SMTP id b2so589844nfe
        for <java-user@lucene.apache.org>; Wed, 02 Aug 2006 18:50:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FeUCSlgl3bIazFoRL5U4OGMMmgZu6LygQrO3HUzB54WQlHJIrENPSBZ/C/ufQbwOCJ+eWBYcpgN0plk4cBDR5dapEjZDW/g7+AhmuNBOnU7wLAhT7QHbo8cxShRtxShm0TrNt4iwf803jzpvhOPtVSNs9CK4lxlqVTTHU3OwdnQ=
Received: by 10.82.129.5 with SMTP id b5mr374232bud;
        Wed, 02 Aug 2006 18:50:51 -0700 (PDT)
Received: by 10.82.123.3 with HTTP; Wed, 2 Aug 2006 18:50:51 -0700 (PDT)
Message-ID: <f6d98ade0608021850g1059f2b1qddc4a191f20387d3@mail.gmail.com>
Date: Wed, 2 Aug 2006 22:50:51 -0300
From: "Eduardo S. Cordeiro" <escordeiro@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search with accents
In-Reply-To: <27bc81750608021032p5e5cbed4q4ebd41e0af4aadf2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <8220B8D6B56A9A4E8480489F38E42529E17CDC@rw-msg-02.broadvision.com>
	 <f6d98ade0608011534m36f81009y57fe4a8df2f8445b@mail.gmail.com>
	 <27bc81750608021032p5e5cbed4q4ebd41e0af4aadf2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

QnV0IHdhcyB5b3VyIGluZGV4IGNyZWF0ZWQgd2l0aCBCcmF6aWxpYW5BbmFseXplcj8gQmVjYXVz
ZSBvdGhlcndpc2UKeW91IHdvdWxkbid0IGhhdmUgcG9ydHVndWVzZSBzdG9wd29yZHMgZWxpbWlu
YXRlZCwgbGlrZSAiZSIsICJvdSIsCmV0Yy4KCjIwMDYvOC8yLCBMZWFuZHJvIFNhYWQgPGxlYW5k
cm8uc2FhZEBnbWFpbC5jb20+Ogo+IEhpIEVkdWFyZG8uIEknbSB1c2luZyB0aGUgU3RhbmRhcmRB
bmFseXNlciBhbmQgSSBjYW4gc2VhcmNoIGZvciB3b3JkcyB3aXRoCj4gYWNjZW50cy4gSW4gbXkg
Y2FzZSAic2HDumRlIgo+Cj4gLS0KPiBMZWFuZHJvIFJvZHJpZ28gU2FhZCBDcnV6Cj4gQ1RPIC0g
SW50ZXJCdXNpbmVzcyBUZWNobm9sb2dpZXMKPiBkYi5hcGFjaGUub3JnL29qYgo+IGd1YXJhLWZy
YW1ld29yay5zZi5uZXQKPiB4aW5ndS5zZi5uZXQKPgo+IE9uIDgvMS8wNiwgRWR1YXJkbyBTLiBD
b3JkZWlybyA8ZXNjb3JkZWlyb0BnbWFpbC5jb20+IHdyb3RlOgo+ID4KPiA+IFllcy4uLmhlcmUn
cyBob3cgSSBjcmVhdGUgbXkgUXVlcnlQYXJzZXI6Cj4gPgo+ID4gUXVlcnlQYXJzZXIgcGFyc2Vy
ID0gbmV3IFF1ZXJ5UGFyc2VyKCJ0ZXh0IiwgbmV3IEJyYXppbGlhbkFuYWx5emVyKCkpOwo+ID4K
PiA+IDIwMDYvOC8xLCBaaGFuZywgTGlzaGVuZyA8TGlzaGVuZy5aaGFuZ0Bicm9hZHZpc2lvbi5j
b20+Ogo+ID4gPiBIaSwKPiA+ID4KPiA+ID4gSGF2ZSB5b3UgdXNlZCB0aGUgc2FtZSBCcmF6aWxp
YW5BbmFseXplciB3aGVuCj4gPiA+IHNlYXJjaGluZz8KPiA+ID4KPiA+ID4gQmVzdCByZWdhcmRz
LCBMaXNoZW5nCj4gPiA+Cj4gPiA+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tCj4gPiA+IEZy
b206IEVkdWFyZG8gUy4gQ29yZGVpcm8gW21haWx0bzplc2NvcmRlaXJvQGdtYWlsLmNvbV0KPiA+
ID4gU2VudDogVHVlc2RheSwgQXVndXN0IDAxLCAyMDA2IDE6NDAgUE0KPiA+ID4gVG86IGphdmEt
dXNlckBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPiBTdWJqZWN0OiBTZWFyY2ggd2l0aCBhY2NlbnRz
Cj4gPiA+Cj4gPiA+Cj4gPiA+IEhlbGxvIHRoZXJlLAo+ID4gPgo+ID4gPiBJIGhhdmUgYSBicmF6
aWxpYW4gcG9ydHVndWVzZSBpbmRleCwgd2hpY2ggaGFzIGJlZW4gYW5hbHl6ZWQgd2l0aAo+ID4g
PiBCcmF6aWxpYW5BbmFseXplci4gV2hlbiBzZWFyY2hpbmcgd29yZHMgd2l0aCBhY2NlbnRzLCBo
b3dldmVyLCB0aGV5J3JlCj4gPiA+IG5vdCBmb3VuZCAtLSBmb3IgaW5zdGFuY2UsIGlmIHRoZSBp
bmRleCBjb250YWlucyBzb21lIHRleHQgd2l0aCB0aGUKPiA+ID4gd29yZCAibWHDp8OjIiBhbmQg
SSBzZWFyY2ggZm9yIHRoYXQgdmVyeSB3b3JkLCBJIGdldCBubyBoaXRzLCBidXQgaWYgSQo+ID4g
PiBzZWFyY2ggIm1hY2EiICh3aGljaCBpcyBhbm90aGVyIHBvcnR1Z3Vlc2Ugd29yZCkgdGhlbiB0
aGUgZG9jdW1lbnQKPiA+ID4gY29udGFpbmluZyAibWHDp8OjIiBpcyBmb3VuZC4KPiA+ID4KPiA+
ID4gSSd2ZSBzZWVuIHBvc3RzIGluIHRoZSBhcmNoaXZlIGluZGljYXRpbmcgdGhhdCBJIHNob3Vs
ZCB1c2UKPiA+ID4gSVNPTGF0aW4xQWNjZW50RmlsdGVyIHRvIGhhbmRsZSB0aGlzLCBidXQgSSBk
b24ndCBxdWl0ZSBzZWUgaG93Ogo+ID4gPiBzaG91bGQgSSBsZWF2ZSBpbmRleGF0aW9uIGFzIGl0
IGlzIGFuZCB1c2UgdGhpcyBmaWx0ZXIgb25seSBmb3Igc2VhcmNoCj4gPiA+IHF1ZXJpZXMgb3Ig
c2hvdWxkIEkgYXBwbHkgaXQgaW4gYm90aCBjYXNlcz8KPiA+ID4KPiA+ID4gVGhhbmsgeW91LAo+
ID4gPiBFZHVhcmRvIENvcmRlaXJvCj4gPiA+Cj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gPiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcKPiA+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBA
bHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4KPiA+ID4KPiA+Cj4KPgo=


From java-user-return-22486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 06:28:37 2006
Return-Path: <java-user-return-22486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25005 invoked from network); 3 Aug 2006 06:28:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 06:28:36 -0000
Received: (qmail 19482 invoked by uid 500); 3 Aug 2006 06:28:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19462 invoked by uid 500); 3 Aug 2006 06:28:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19451 invoked by uid 99); 3 Aug 2006 06:28:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 23:28:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Aug 2006 23:28:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 521215B776; Wed,  2 Aug 2006 23:27:52 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4B9527F403
	for <java-user@lucene.apache.org>; Wed,  2 Aug 2006 23:27:52 -0700 (PDT)
Date: Wed, 2 Aug 2006 23:27:52 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Plus factor in returned results
In-Reply-To: <2295ce5d0608021315m196e8bbbna6deb1fc1fcc74e1@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608022323440.26642@hal.rescomp.berkeley.edu>
References: <2295ce5d0608021315m196e8bbbna6deb1fc1fcc74e1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


if i'm understanding you, you have a set of additional criteria
A,B,C,etc..., and it's required that any one of the criteria match (in
addition to the textual input) but each of the criteria has a differnet
importance (A is better then B is better then C)

I think what you want is to just build a query whose toString will look a
little like this...

  +(chinese restaurant) +(A^100 B^10 C^1)

...but bear in mind you can build the second BooleanQuery up
progromatically (ie: not using QueryParser) and then combine it with the
first query generated from QueryParser.

(i picked arbitrary boost values .. you'll have to play with them to
decide how you wnat the overall value of the additional criteria to
relate to teh scoring value of the main textual search criteria).


: I'd like to start with a standard parsed query, then combine it with
: another that says requires a field's untokenized value be inside of a
: set. The catch is, I want the document's position in that set to be
: included in the scoring.
:
: So I want to search for "chinese restaurant", but only for these
: towns. However, if it's town A, I want that to be a plus-factor, even
: though towns B and C are in the set. Make sense?
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 07:42:58 2006
Return-Path: <java-user-return-22487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59629 invoked from network); 3 Aug 2006 07:42:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 07:42:57 -0000
Received: (qmail 37056 invoked by uid 500); 3 Aug 2006 07:42:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37025 invoked by uid 500); 3 Aug 2006 07:42:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37006 invoked by uid 99); 3 Aug 2006 07:42:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 00:42:51 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.43.219.185] (HELO web8326.mail.in.yahoo.com) (202.43.219.185)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Aug 2006 00:42:50 -0700
Received: (qmail 90865 invoked by uid 60001); 3 Aug 2006 07:42:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=pl4Mcg6bJwATeWVFXvocQhKbDSc53hw3D4/Xb3+M9ypHyYJsmQN6QFroNnUnzlaxM3yOkGKWycIHu5v3yF5/A8/4+2Czl6RqIQh+C6iDuJNnkgxwZiscuw8QgYxVkx6xndd81KJdLVBlXiMLhy9PdC+lQNlqB3j974+2mdq4cl4=  ;
Message-ID: <20060803074228.90863.qmail@web8326.mail.in.yahoo.com>
Received: from [59.95.153.59] by web8326.mail.in.yahoo.com via HTTP; Thu, 03 Aug 2006 08:42:28 BST
Date: Thu, 3 Aug 2006 08:42:28 +0100 (BST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: LuceneIndexer not working
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1846981891-1154590948=:86158"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1846981891-1154590948=:86158
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Dear All,
  I am using slide2.1, and now want to attach lucene. I enable the lucene in slide but indexes are not generated. Exceptions is coming while using LuceneIndexer. 
   
  <ContentIndexer class="org.apache.slide.index.LuceneIndexer">
  ...<indexpath.....>..
  </contentIndexer>
   
  Help Me

 				
---------------------------------
 Here’s a new way to find what you're looking for - Yahoo! Answers 
--0-1846981891-1154590948=:86158--

From java-user-return-22488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 07:49:36 2006
Return-Path: <java-user-return-22488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61123 invoked from network); 3 Aug 2006 07:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 07:49:36 -0000
Received: (qmail 43435 invoked by uid 500); 3 Aug 2006 07:49:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43175 invoked by uid 500); 3 Aug 2006 07:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43164 invoked by uid 99); 3 Aug 2006 07:49:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 00:49:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 00:49:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8A7715B776; Thu,  3 Aug 2006 00:49:04 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 827227F403
	for <java-user@lucene.apache.org>; Thu,  3 Aug 2006 00:49:04 -0700 (PDT)
Date: Thu, 3 Aug 2006 00:49:04 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: LuceneIndexer not working
In-Reply-To: <20060803074228.90863.qmail@web8326.mail.in.yahoo.com>
Message-ID: <Pine.LNX.4.58.0608030044200.26642@hal.rescomp.berkeley.edu>
References: <20060803074228.90863.qmail@web8326.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


:   I am using slide2.1, and now want to attach lucene. I enable the
: lucene in slide but indexes are not generated. Exceptions is coming
: while using LuceneIndexer.

As you were told the last time you asked this question two days ago, this
is not the correct place to ask questions about using Slide or slide
plugins which use Lucene -- if you are not using the Lucene Java
APIS directly, this is not the list to email with questions.

Please consult the Slide documentation, or send email to a Slide email
discussion list to help you with your problem...

http://jakarta.apache.org/slide/
http://jakarta.apache.org/site/mail2.html#Slide


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 14:21:51 2006
Return-Path: <java-user-return-22489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24381 invoked from network); 3 Aug 2006 14:21:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 14:21:51 -0000
Received: (qmail 81260 invoked by uid 500); 3 Aug 2006 14:21:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81230 invoked by uid 500); 3 Aug 2006 14:21:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81218 invoked by uid 99); 3 Aug 2006 14:21:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 07:21:43 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of leandro.saad@gmail.com designates 72.14.214.196 as permitted sender)
Received: from [72.14.214.196] (HELO hu-out-0102.google.com) (72.14.214.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 07:21:42 -0700
Received: by hu-out-0102.google.com with SMTP id 32so1274974huf
        for <java-user@lucene.apache.org>; Thu, 03 Aug 2006 07:21:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BT4XvAHFHhQdp8d6KrDzKJEsuIzHSj7QeeOREvWcjkK3sgpmRb4NeDkxTd8kUA2IFWU4WPlTlPZRZgXQfpxt0S3IBZKMt/TtT+dxpGgglpISfZzBDAY6a5P7Te469cLx4in+TGEexpwupdWAp0s9gee9s5vMm1fQv6s71ZwAqQk=
Received: by 10.78.175.14 with SMTP id x14mr753314hue;
        Thu, 03 Aug 2006 07:21:21 -0700 (PDT)
Received: by 10.78.68.11 with HTTP; Thu, 3 Aug 2006 07:21:20 -0700 (PDT)
Message-ID: <27bc81750608030721r61aa377xa55b102a063f8382@mail.gmail.com>
Date: Thu, 3 Aug 2006 11:21:20 -0300
From: "Leandro Saad" <leandro.saad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search with accents
In-Reply-To: <f6d98ade0608021850g1059f2b1qddc4a191f20387d3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6987_8930386.1154614880906"
References: <8220B8D6B56A9A4E8480489F38E42529E17CDC@rw-msg-02.broadvision.com>
	 <f6d98ade0608011534m36f81009y57fe4a8df2f8445b@mail.gmail.com>
	 <27bc81750608021032p5e5cbed4q4ebd41e0af4aadf2@mail.gmail.com>
	 <f6d98ade0608021850g1059f2b1qddc4a191f20387d3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6987_8930386.1154614880906
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm using StandardAnalyser all over, so, yes, portuguese stopwords won't be
eliminated

--=20
Leandro Rodrigo Saad Cruz
CTO - InterBusiness Technologies
db.apache.org/ojb
guara-framework.sf.net
xingu.sf.net

On 8/2/06, Eduardo S. Cordeiro <escordeiro@gmail.com> wrote:
>
> But was your index created with BrazilianAnalyzer? Because otherwise
> you wouldn't have portuguese stopwords eliminated, like "e", "ou",
> etc.
>
> 2006/8/2, Leandro Saad <leandro.saad@gmail.com>:
> > Hi Eduardo. I'm using the StandardAnalyser and I can search for words
> with
> > accents. In my case "sa=FAde"
> >
> > --
> > Leandro Rodrigo Saad Cruz
> > CTO - InterBusiness Technologies
> > db.apache.org/ojb
> > guara-framework.sf.net
> > xingu.sf.net
> >
> > On 8/1/06, Eduardo S. Cordeiro <escordeiro@gmail.com> wrote:
> > >
> > > Yes...here's how I create my QueryParser:
> > >
> > > QueryParser parser =3D new QueryParser("text", new BrazilianAnalyzer(=
));
> > >
> > > 2006/8/1, Zhang, Lisheng <Lisheng.Zhang@broadvision.com>:
> > > > Hi,
> > > >
> > > > Have you used the same BrazilianAnalyzer when
> > > > searching?
> > > >
> > > > Best regards, Lisheng
> > > >
> > > > -----Original Message-----
> > > > From: Eduardo S. Cordeiro [mailto:escordeiro@gmail.com]
> > > > Sent: Tuesday, August 01, 2006 1:40 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Search with accents
> > > >
> > > >
> > > > Hello there,
> > > >
> > > > I have a brazilian portuguese index, which has been analyzed with
> > > > BrazilianAnalyzer. When searching words with accents, however,
> they're
> > > > not found -- for instance, if the index contains some text with the
> > > > word "ma=E7=E3" and I search for that very word, I get no hits, but=
 if I
> > > > search "maca" (which is another portuguese word) then the document
> > > > containing "ma=E7=E3" is found.
> > > >
> > > > I've seen posts in the archive indicating that I should use
> > > > ISOLatin1AccentFilter to handle this, but I don't quite see how:
> > > > should I leave indexation as it is and use this filter only for
> search
> > > > queries or should I apply it in both cases?
> > > >
> > > > Thank you,
> > > > Eduardo Cordeiro
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> >
>

------=_Part_6987_8930386.1154614880906--

From java-user-return-22490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 14:37:40 2006
Return-Path: <java-user-return-22490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32840 invoked from network); 3 Aug 2006 14:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 14:37:40 -0000
Received: (qmail 28779 invoked by uid 500); 3 Aug 2006 14:37:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28554 invoked by uid 500); 3 Aug 2006 14:37:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28543 invoked by uid 99); 3 Aug 2006 14:37:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 07:37:33 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.206] (HELO web36414.mail.mud.yahoo.com) (209.191.91.206)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Aug 2006 07:37:32 -0700
Received: (qmail 18413 invoked by uid 60001); 3 Aug 2006 14:37:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=eYgLjhXBxwyP15/YvtqFOZbf64h6WC6iHhLwnvrPmo5nidEA/oSmnz7rEVbzqU21aEK3zBUpYwwgaFoRCf51du6jEE4NTNYejl5mi4p6pv2EoSp/we9aHB3hqN8qa9pL0a7QxS9Ui1nB5v3+QHF6XuQd4Riq45Fgtls5icK8pYQ=  ;
Message-ID: <20060803143708.18411.qmail@web36414.mail.mud.yahoo.com>
Received: from [208.210.219.129] by web36414.mail.mud.yahoo.com via HTTP; Thu, 03 Aug 2006 07:37:08 PDT
Date: Thu, 3 Aug 2006 07:37:08 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Modify index on database update
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-711701107-1154615828=:16229"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-711701107-1154615828=:16229
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  My application database can be updated outside the application also. Whenever there is a change in database by some other source, I want to update my index.
   
  Is there any way to do so?
   
  I am using Java and the database is DB2. I saw the DB2 UDF. But I have to put the jar inside the DB2 installation directory. I dont know how to communicate with my application/update index.
   
  Any help would be appreciated.
   
  Thanks,
  -Vasu

 			
---------------------------------
See the all-new, redesigned Yahoo.com.  Check it out.
--0-711701107-1154615828=:16229--

From java-user-return-22491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 15:25:39 2006
Return-Path: <java-user-return-22491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57672 invoked from network); 3 Aug 2006 15:25:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 15:25:39 -0000
Received: (qmail 2147 invoked by uid 500); 3 Aug 2006 15:25:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1997 invoked by uid 500); 3 Aug 2006 15:25:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1986 invoked by uid 99); 3 Aug 2006 15:25:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 08:25:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 08:25:31 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 62A75D94483
	for <java-user@lucene.apache.org>; Thu,  3 Aug 2006 11:25:09 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Thu, 03 Aug 2006 11:25:09 -0400
X-Sasl-enc: +69K0npoKBUPwjYrSJPIJ/BtNwInlURt8Qtu5vm6LHQO 1154618708
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id A98045020
	for <java-user@lucene.apache.org>; Thu,  3 Aug 2006 11:25:08 -0400 (EDT)
Message-ID: <44D21553.6060604@mikemccandless.com>
Date: Thu, 03 Aug 2006 11:25:07 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Modify index on database update
References: <20060803143708.18411.qmail@web36414.mail.mud.yahoo.com>
In-Reply-To: <20060803143708.18411.qmail@web36414.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>   My application database can be updated outside the application also. Whenever there is a change in database by some other source, I want to update my index.
>    
>   Is there any way to do so?
>    
>   I am using Java and the database is DB2. I saw the DB2 UDF. But I have to put the jar inside the DB2 installation directory. I dont know how to communicate with my application/update index.

Yes, this certainly is possible.

The simplest approach would be to rebuild the entire index periodically, 
however, this is not very efficient.

A better approach is to reindex just the rows that have changed since 
you last indexed.

To do this, first, you need to implement your own method of tracking 
which rows of which tables have changed inside DB2.  Perhaps you could 
use a timestamp column and then issue a SELECT WHERE timestamp > 
last-index-time.  Make sure last-index-time is DB2's timestamp to avoid 
clock skew issues.

Then, for each changed document, you need to add the new doc and remove 
the old one (Lucene doesn't have a "replace document" ).  Typically you 
would index the primary key into Lucene, and then use IndexReader's or 
IndexModifier's 'deleteDocuments(Term term)' to delete the document by 
its primary key.  Then add the new document.  If you have a group of 
documents that need re-indexing, it's best to first delete all of them, 
and then re-add all of them (ie, bunch the deletes & adds).  This gives 
better performance.

The third (and likely best, depending on tradeoffs) approach is to have 
some sort of "push" or "triggers" coming out of DB2 that notifies you 
whenever a row is changed.  If UDF inside DB2 allows for this that would 
be great (I don't know anything about UDF -- likely you'd need to roll 
your own such communication coming out of DB2).  Then, you re-index each 
document when it's changed instead of polling periodically.

In any case, make sure you close/re-open your IndexSearchers 
periodically so that they see the newly deleted/added documents.  And 
make sure the lock directory is the same directory across all of your 
processes, and, it is a directory in a locally mounted file system (ie 
not NFS or Samba) as there known issues for those.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 22:08:58 2006
Return-Path: <java-user-return-22492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92257 invoked from network); 3 Aug 2006 22:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 22:08:58 -0000
Received: (qmail 76460 invoked by uid 500); 3 Aug 2006 22:08:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76431 invoked by uid 500); 3 Aug 2006 22:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76420 invoked by uid 99); 3 Aug 2006 22:08:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 15:08:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 15:08:49 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.7/8.13.7) with ESMTP id k73M8R1p098466
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 3 Aug 2006 22:08:28 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k73MBwDw143850
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 4 Aug 2006 00:11:58 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k73M8Ro6011861
	for <java-user@lucene.apache.org>; Fri, 4 Aug 2006 00:08:27 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k73M8RgF011858
	for <java-user@lucene.apache.org>; Fri, 4 Aug 2006 00:08:27 +0200
In-Reply-To: <E9BF7E0FD95D1143B399B129908A58FF01582E6B@datachange01.dataconversions.biz>
Subject: RE: Scoring a document (count?)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF5E856B67.8D301D29-ON882571BF.0076771B-882571BF.00792D18@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 3 Aug 2006 15:03:34 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 04/08/2006 01:11:58
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Russel,

I am also interested in the internals of Lucene's ranking and how one
can/should alter the scoring. For now I was just learning from existing
code of Lucene scorers and Weights. Your question seemed interesting, so I
in fact implemented a quick scorer that would return the raw tf as a score,
as an exercise. It is not a product level implementation of course, but if
you think this will help you (?) I can share the code. (Would have
responded sooner, for my working computer went off for a few days with a
fan error...:-).

Regards,
Doron

"Russell M. Allen" <Russell.Allen@aebn.net> wrote on 31/07/2006 07:35:50:

> Thank you for the reply Doran!  You are exactly right about the sql
> count(*).  I need the equivalent of group by, and count().
>
> We have considered a 'joined' index where we would have a document for
> each permutation.  We discarded it (possibly prematurely) based on the
> rapid explosion in the number of documents.  In our domain, we have
> movies as the main document type, and 5 other satellite document types
> with their own indexes: Star, Studio, Director, Series, and Category
> (genre).  With the exception of series, a movie has a many to many
> relationship with the other indexes.  So, with 60k movies, 20k stars, 2k
> studios, ... The document count quickly shoots through the roof.
>
> Also, the majority of our searching is based on a single domain type,
> such as movie.  It is only a small handful of corner cases where we want
> what amounts to a joined query.  If we merged these indexes, we would
> constantly have to 'roll up' the results into distinct instances of a
> type.  (The equivalent of an SQL 'group by')
>
>
> I find the parallels between the expressiveness of Lucene and SQL
> interesting.  I'm glad to see you compared what I was looking for to an
> sql count(*) as well.  We have a handful of indexing issues that I am
> attempting to solve/optimize, of which performing a count(*) is only
> one.  I also have the need to perform a JOIN across two indexes.  I have
> 'ideas' about how I might go about this, but for now we are fortunate
> enough to have fairly static data and half of the join is static.  As a
> result we can cache a bitset filter for the results of half the join and
> apply it to the other (dynamic) half of the join query.
>
> Anyway, I digress...
>
> I saw you second post regarding creating a scorer.  I'd like to continue
> down that path.  My main issue now is simply understanding how lucene
> works under the covers enough to write the TermQuery variant.
>
> Thanks for the help,
> Russell.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 22:44:26 2006
Return-Path: <java-user-return-22493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20266 invoked from network); 3 Aug 2006 22:44:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 22:44:25 -0000
Received: (qmail 49332 invoked by uid 500); 3 Aug 2006 22:44:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49312 invoked by uid 500); 3 Aug 2006 22:44:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49301 invoked by uid 99); 3 Aug 2006 22:44:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 15:44:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of escordeiro@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 15:44:18 -0700
Received: by nf-out-0910.google.com with SMTP id x4so1164535nfb
        for <java-user@lucene.apache.org>; Thu, 03 Aug 2006 15:43:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FVoQ32qGQVt5am+vaBWyrgVI/HwoE3QnR6PBwqWk2q6mIq+c9oBBqd5rxbbJZ7ur2HHItdMluw2yRVWOmX9vr0rATLY2gityUmO0nwhyka3Kc7ykQCw7sv0Ka5iHgLfLj/wVXGQL2gU/EBiSlozbzgv6acYDB8s5mZX63QgY2As=
Received: by 10.82.120.16 with SMTP id s16mr625122buc;
        Thu, 03 Aug 2006 15:43:57 -0700 (PDT)
Received: by 10.82.123.3 with HTTP; Thu, 3 Aug 2006 15:43:56 -0700 (PDT)
Message-ID: <f6d98ade0608031543m14ecc687l9c34ab2ddda1b872@mail.gmail.com>
Date: Thu, 3 Aug 2006 19:43:56 -0300
From: "Eduardo S. Cordeiro" <escordeiro@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search with accents
In-Reply-To: <27bc81750608030721r61aa377xa55b102a063f8382@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <8220B8D6B56A9A4E8480489F38E42529E17CDC@rw-msg-02.broadvision.com>
	 <f6d98ade0608011534m36f81009y57fe4a8df2f8445b@mail.gmail.com>
	 <27bc81750608021032p5e5cbed4q4ebd41e0af4aadf2@mail.gmail.com>
	 <f6d98ade0608021850g1059f2b1qddc4a191f20387d3@mail.gmail.com>
	 <27bc81750608030721r61aa377xa55b102a063f8382@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

T2ssIHRoZSBwcm9ibGVtIGhhZCBub3RoaW5nIHRvIGRvIHdpdGggdGhlIGFuYWx5emVycy4gV2hh
dCBoYXBwZW5lZAp3YXMgdGhhdCB0aGUgc2VhcmNoIHF1ZXJ5IHRleHQgd2FzIHRoZSBpbnB1dCBv
ZiBhIHdlYiBwYWdlIGZvcm0sIGFuZCBJCmhhZG4ndCBzZXQgdGhhdCBmb3JtJ3MgbWV0aG9kIHRv
ICJwb3N0Iiwgc28gdGhlIHF1ZXJ5IHdhcyBzZW50IGluIHRoZQphZGRyZXNzIGJhcjsgdGhhdCBt
ZXNzZWQgdXAgdGhlIHF1ZXJ5J3MgZW5jb2RpbmcuCgpTbyB1c2luZyBCcmF6aWxpYW5BbmFseXpl
ciBkb2VzIHdvcmsgZm9yIGluZGV4aW5nIGFuZCBzZWFyY2ggd29yZHMKd2l0aCBhY2NlbnRzLi4u
CgpUaGFua3MgZm9yIHRoZSBoZWxwIGFuZCBiZXN0IHJlZ2FyZHMsCkVkdWFyZG8gQ29yZGVpcm8K
CjIwMDYvOC8zLCBMZWFuZHJvIFNhYWQgPGxlYW5kcm8uc2FhZEBnbWFpbC5jb20+Ogo+IEknbSB1
c2luZyBTdGFuZGFyZEFuYWx5c2VyIGFsbCBvdmVyLCBzbywgeWVzLCBwb3J0dWd1ZXNlIHN0b3B3
b3JkcyB3b24ndCBiZQo+IGVsaW1pbmF0ZWQKPgo+IC0tCj4gTGVhbmRybyBSb2RyaWdvIFNhYWQg
Q3J1ego+IENUTyAtIEludGVyQnVzaW5lc3MgVGVjaG5vbG9naWVzCj4gZGIuYXBhY2hlLm9yZy9v
amIKPiBndWFyYS1mcmFtZXdvcmsuc2YubmV0Cj4geGluZ3Uuc2YubmV0Cj4KPiBPbiA4LzIvMDYs
IEVkdWFyZG8gUy4gQ29yZGVpcm8gPGVzY29yZGVpcm9AZ21haWwuY29tPiB3cm90ZToKPiA+Cj4g
PiBCdXQgd2FzIHlvdXIgaW5kZXggY3JlYXRlZCB3aXRoIEJyYXppbGlhbkFuYWx5emVyPyBCZWNh
dXNlIG90aGVyd2lzZQo+ID4geW91IHdvdWxkbid0IGhhdmUgcG9ydHVndWVzZSBzdG9wd29yZHMg
ZWxpbWluYXRlZCwgbGlrZSAiZSIsICJvdSIsCj4gPiBldGMuCj4gPgo+ID4gMjAwNi84LzIsIExl
YW5kcm8gU2FhZCA8bGVhbmRyby5zYWFkQGdtYWlsLmNvbT46Cj4gPiA+IEhpIEVkdWFyZG8uIEkn
bSB1c2luZyB0aGUgU3RhbmRhcmRBbmFseXNlciBhbmQgSSBjYW4gc2VhcmNoIGZvciB3b3Jkcwo+
ID4gd2l0aAo+ID4gPiBhY2NlbnRzLiBJbiBteSBjYXNlICJzYcO6ZGUiCj4gPiA+Cj4gPiA+IC0t
Cj4gPiA+IExlYW5kcm8gUm9kcmlnbyBTYWFkIENydXoKPiA+ID4gQ1RPIC0gSW50ZXJCdXNpbmVz
cyBUZWNobm9sb2dpZXMKPiA+ID4gZGIuYXBhY2hlLm9yZy9vamIKPiA+ID4gZ3VhcmEtZnJhbWV3
b3JrLnNmLm5ldAo+ID4gPiB4aW5ndS5zZi5uZXQKPiA+ID4KPiA+ID4gT24gOC8xLzA2LCBFZHVh
cmRvIFMuIENvcmRlaXJvIDxlc2NvcmRlaXJvQGdtYWlsLmNvbT4gd3JvdGU6Cj4gPiA+ID4KPiA+
ID4gPiBZZXMuLi5oZXJlJ3MgaG93IEkgY3JlYXRlIG15IFF1ZXJ5UGFyc2VyOgo+ID4gPiA+Cj4g
PiA+ID4gUXVlcnlQYXJzZXIgcGFyc2VyID0gbmV3IFF1ZXJ5UGFyc2VyKCJ0ZXh0IiwgbmV3IEJy
YXppbGlhbkFuYWx5emVyKCkpOwo+ID4gPiA+Cj4gPiA+ID4gMjAwNi84LzEsIFpoYW5nLCBMaXNo
ZW5nIDxMaXNoZW5nLlpoYW5nQGJyb2FkdmlzaW9uLmNvbT46Cj4gPiA+ID4gPiBIaSwKPiA+ID4g
PiA+Cj4gPiA+ID4gPiBIYXZlIHlvdSB1c2VkIHRoZSBzYW1lIEJyYXppbGlhbkFuYWx5emVyIHdo
ZW4KPiA+ID4gPiA+IHNlYXJjaGluZz8KPiA+ID4gPiA+Cj4gPiA+ID4gPiBCZXN0IHJlZ2FyZHMs
IExpc2hlbmcKPiA+ID4gPiA+Cj4gPiA+ID4gPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQo+
ID4gPiA+ID4gRnJvbTogRWR1YXJkbyBTLiBDb3JkZWlybyBbbWFpbHRvOmVzY29yZGVpcm9AZ21h
aWwuY29tXQo+ID4gPiA+ID4gU2VudDogVHVlc2RheSwgQXVndXN0IDAxLCAyMDA2IDE6NDAgUE0K
PiA+ID4gPiA+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4gPiA+IFN1Ympl
Y3Q6IFNlYXJjaCB3aXRoIGFjY2VudHMKPiA+ID4gPiA+Cj4gPiA+ID4gPgo+ID4gPiA+ID4gSGVs
bG8gdGhlcmUsCj4gPiA+ID4gPgo+ID4gPiA+ID4gSSBoYXZlIGEgYnJhemlsaWFuIHBvcnR1Z3Vl
c2UgaW5kZXgsIHdoaWNoIGhhcyBiZWVuIGFuYWx5emVkIHdpdGgKPiA+ID4gPiA+IEJyYXppbGlh
bkFuYWx5emVyLiBXaGVuIHNlYXJjaGluZyB3b3JkcyB3aXRoIGFjY2VudHMsIGhvd2V2ZXIsCj4g
PiB0aGV5J3JlCj4gPiA+ID4gPiBub3QgZm91bmQgLS0gZm9yIGluc3RhbmNlLCBpZiB0aGUgaW5k
ZXggY29udGFpbnMgc29tZSB0ZXh0IHdpdGggdGhlCj4gPiA+ID4gPiB3b3JkICJtYcOnw6MiIGFu
ZCBJIHNlYXJjaCBmb3IgdGhhdCB2ZXJ5IHdvcmQsIEkgZ2V0IG5vIGhpdHMsIGJ1dCBpZiBJCj4g
PiA+ID4gPiBzZWFyY2ggIm1hY2EiICh3aGljaCBpcyBhbm90aGVyIHBvcnR1Z3Vlc2Ugd29yZCkg
dGhlbiB0aGUgZG9jdW1lbnQKPiA+ID4gPiA+IGNvbnRhaW5pbmcgIm1hw6fDoyIgaXMgZm91bmQu
Cj4gPiA+ID4gPgo+ID4gPiA+ID4gSSd2ZSBzZWVuIHBvc3RzIGluIHRoZSBhcmNoaXZlIGluZGlj
YXRpbmcgdGhhdCBJIHNob3VsZCB1c2UKPiA+ID4gPiA+IElTT0xhdGluMUFjY2VudEZpbHRlciB0
byBoYW5kbGUgdGhpcywgYnV0IEkgZG9uJ3QgcXVpdGUgc2VlIGhvdzoKPiA+ID4gPiA+IHNob3Vs
ZCBJIGxlYXZlIGluZGV4YXRpb24gYXMgaXQgaXMgYW5kIHVzZSB0aGlzIGZpbHRlciBvbmx5IGZv
cgo+ID4gc2VhcmNoCj4gPiA+ID4gPiBxdWVyaWVzIG9yIHNob3VsZCBJIGFwcGx5IGl0IGluIGJv
dGggY2FzZXM/Cj4gPiA+ID4gPgo+ID4gPiA+ID4gVGhhbmsgeW91LAo+ID4gPiA+ID4gRWR1YXJk
byBDb3JkZWlybwo+ID4gPiA+ID4KPiA+ID4gPiA+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4gPiA+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZwo+ID4gPiA+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11
c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4gPiA+Cj4gPiA+ID4gPgo+ID4gPiA+Cj4g
PiA+Cj4gPiA+Cj4gPgo+Cj4K


From java-user-return-22494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 03 23:34:48 2006
Return-Path: <java-user-return-22494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31898 invoked from network); 3 Aug 2006 23:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2006 23:34:47 -0000
Received: (qmail 88617 invoked by uid 500); 3 Aug 2006 23:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88492 invoked by uid 500); 3 Aug 2006 23:34:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88481 invoked by uid 99); 3 Aug 2006 23:34:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 16:34:40 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.59] (HELO web86907.mail.ukl.yahoo.com) (217.12.13.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Aug 2006 16:34:39 -0700
Received: (qmail 37648 invoked by uid 60001); 3 Aug 2006 23:34:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=u+zTqn2JW0afeBjUyeTZ7CzYxAAi0rRiLnDsi4F28yhhHENDFcDLVzRSrPS78FAv1SGnLFEI0AksNbeLRRTwBgQI1aULQVyrwr/lYJZqGoOc9kzoEl2okD/7IZluRzMap3armh03VqbezLrVmI87SpsJgZRmcCdNeQ7fJtfna6M=  ;
Message-ID: <20060803233417.37646.qmail@web86907.mail.ukl.yahoo.com>
Received: from [80.13.23.147] by web86907.mail.ukl.yahoo.com via HTTP; Fri, 04 Aug 2006 01:34:17 CEST
Date: Fri, 4 Aug 2006 01:34:17 +0200 (CEST)
From: John john <ze_barbary@yahoo.fr>
Subject: What do I have to do with files in the sandbox?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1097834932-1154648057=:35201"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1097834932-1154648057=:35201
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello, 
 
 I'm pretty sure my question is stupid but i'm gonna ask you anyway :)
 
 I'd like to use analyzers from the sandbox but I don't know what I have to do with files ? Do i have to extract the lucene jar file and add files I want to use ? or something else?
 
 Do you have an exemple with this file example http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/java/org/apache/lucene/analysis/nl/DutchAnalyzer.java ?
 Do i have to add this file in my project and that's it?
 
 thanks
 
 		
---------------------------------
 Découvrez un nouveau moyen de poser toutes vos questions quelque soit le sujet ! Yahoo! Questions/Réponses pour partager vos connaissances, vos opinions et vos expériences. Cliquez ici. 
--0-1097834932-1154648057=:35201--

From java-user-return-22495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 00:28:40 2006
Return-Path: <java-user-return-22495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47232 invoked from network); 4 Aug 2006 00:28:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 00:28:39 -0000
Received: (qmail 53480 invoked by uid 500); 4 Aug 2006 00:28:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53452 invoked by uid 500); 4 Aug 2006 00:28:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53441 invoked by uid 99); 4 Aug 2006 00:28:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 17:28:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Aug 2006 17:28:31 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F323330EFCD9; Thu,  3 Aug 2006 20:28:10 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id ADAAD30EFCD8
	for <java-user@lucene.apache.org>; Thu,  3 Aug 2006 20:28:08 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20060803233417.37646.qmail@web86907.mail.ukl.yahoo.com>
References: <20060803233417.37646.qmail@web86907.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <3713342D-F11A-41F1-AB16-6E5030C84455@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: What do I have to do with files in the sandbox?
Date: Thu, 3 Aug 2006 20:28:04 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you're using the binary distribution of Lucene 2.0, you'll already =20=

have the JAR file with those analyzers handy.  It's prefixed lucene-=20
analyzers.  Simply add that to your compile and runtime classpath and =20=

you'll have what you need.

You could certainly just copy the source code into your project if =20
you like as well, but I'd recommend you just use the JAR file that =20
come with Lucene so you can benefit from any enhancements if you =20
eventually upgrade to a future version.

	Erik


On Aug 3, 2006, at 7:34 PM, John john wrote:

> Hello,
>
>  I'm pretty sure my question is stupid but i'm gonna ask you anyway :)
>
>  I'd like to use analyzers from the sandbox but I don't know what I =20=

> have to do with files ? Do i have to extract the lucene jar file =20
> and add files I want to use ? or something else?
>
>  Do you have an exemple with this file example http://=20
> svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/=20
> java/org/apache/lucene/analysis/nl/DutchAnalyzer.java ?
>  Do i have to add this file in my project and that's it?
>
>  thanks
>
>  	=09
> ---------------------------------
>  D=E9couvrez un nouveau moyen de poser toutes vos questions quelque =20=

> soit le sujet ! Yahoo! Questions/R=E9ponses pour partager vos =20
> connaissances, vos opinions et vos exp=E9riences. Cliquez ici.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 10:19:25 2006
Return-Path: <java-user-return-22496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2811 invoked from network); 4 Aug 2006 10:19:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 10:19:24 -0000
Received: (qmail 87032 invoked by uid 500); 4 Aug 2006 10:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87001 invoked by uid 500); 4 Aug 2006 10:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86903 invoked by uid 99); 4 Aug 2006 10:19:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 03:19:07 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of khoon.ee.gan@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 03:19:03 -0700
Received: by nf-out-0910.google.com with SMTP id x4so1356218nfb
        for <java-user@lucene.apache.org>; Fri, 04 Aug 2006 03:18:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=V8YVF/pllaNQEKWMm7VDMo69A6sy7ZwbzJMmIACb0fJv7PhWmuEvwHm9o5KnJ7XiNpAyRbAUrJ79HK9NzL4ttQSDZGYxKz298nOZ5cDY/s2EkFFbkAL2kLcSgtFtNPyOqDhawEAm1/kZOnsepr4JpRCoT/RuBYpeNoKy+fP74Zw=
Received: by 10.78.127.2 with SMTP id z2mr1465981huc;
        Fri, 04 Aug 2006 03:18:41 -0700 (PDT)
Received: by 10.78.197.5 with HTTP; Fri, 4 Aug 2006 03:18:41 -0700 (PDT)
Message-ID: <85c493340608040318x1d8d298bscefd326110b03c9c@mail.gmail.com>
Date: Fri, 4 Aug 2006 18:18:41 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Luke for Lucene 2.x ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3488_5455586.1154686721699"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3488_5455586.1154686721699
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have read that *Andrzej Bialecki *mentioned that he would release new
version of Luke based on Lucene 2.0.0 soon. URL here ...
http://www.mail-archive.com/java-user@lucene.apache.org/msg08612.html.
Anyone has any idea if it has been released ?

Andrzej, if you are reading this, could you please let us know :) Thanks.

~KEGan

------=_Part_3488_5455586.1154686721699--

From java-user-return-22497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 11:30:55 2006
Return-Path: <java-user-return-22497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25497 invoked from network); 4 Aug 2006 11:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 11:30:54 -0000
Received: (qmail 73374 invoked by uid 500); 4 Aug 2006 11:30:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73135 invoked by uid 500); 4 Aug 2006 11:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73124 invoked by uid 99); 4 Aug 2006 11:30:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 04:30:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.176] (HELO randymail-a1.dreamhost.com) (208.97.132.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 04:30:44 -0700
Received: from [192.168.1.8] (unknown [82.153.237.45])
	by randymail-a1.dreamhost.com (Postfix) with ESMTP id 96CE318D4D0
	for <java-user@lucene.apache.org>; Fri,  4 Aug 2006 04:30:09 -0700 (PDT)
Message-ID: <44D32ED4.8050602@magpie.net>
Date: Fri, 04 Aug 2006 12:26:12 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Luke for Lucene 2.x ?
References: <85c493340608040318x1d8d298bscefd326110b03c9c@mail.gmail.com>
In-Reply-To: <85c493340608040318x1d8d298bscefd326110b03c9c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

KEGan wrote:

> I have read that *Andrzej Bialecki *mentioned that he would release new
> version of Luke based on Lucene 2.0.0 soon. URL here ...
> http://www.mail-archive.com/java-user@lucene.apache.org/msg08612.html.
> Anyone has any idea if it has been released ?
>
> Andrzej, if you are reading this, could you please let us know :) Thanks.


It should be fairly straightforward to do it yourself. Compiling Luke 
against Lucene 1.9.1 shows it only uses 4 deprecated calls:

http://www.getopt.org/luke/luke-0.6/luke.zip

1. Field(java.lang.String,java.lang.String,boolean,boolean,boolean,boolean)
2. IndexReader.delete(int)
3. IndexReader.delete(Term)
4. Analyzer.tokenStream(Reader)

For the first one, replace the booleans with the appropriate Field.Store 
and File.Index values.

The delete call has simply been renamed to deleteDocuments.

Analyzer.tokenStream now requires a field name.

Then replace the Lucene jars in the lib directory with 2.0.0 and you 
should be able to build a compatible version of Luke.




Miles

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 12:58:42 2006
Return-Path: <java-user-return-22498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53062 invoked from network); 4 Aug 2006 12:58:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 12:58:42 -0000
Received: (qmail 18440 invoked by uid 500); 4 Aug 2006 12:58:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18417 invoked by uid 500); 4 Aug 2006 12:58:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18406 invoked by uid 99); 4 Aug 2006 12:58:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 05:58:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 05:58:32 -0700
Received: by py-out-1112.google.com with SMTP id d80so282247pyd
        for <java-user@lucene.apache.org>; Fri, 04 Aug 2006 05:58:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=llfsZapMAGrtjSgiDpNgIw+mpvhJUruchb2OKoE99fMAYBJ/49SyQ+z5o2wDv9vhIeiB2nF+xOZlgfJ4cuQNq//wETNHL6lcv5zzrpJJOcH+HQODcAkdHL89/VeKGYCxzjG/+XcMYD/a9+ldxG5NGqm6KRl1OxyiSzz7Q6LwbMw=
Received: by 10.35.41.12 with SMTP id t12mr4927308pyj;
        Fri, 04 Aug 2006 05:58:11 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Fri, 4 Aug 2006 05:58:11 -0700 (PDT)
Message-ID: <359a92830608040558p7a1a8247w249b785b5540a3ae@mail.gmail.com>
Date: Fri, 4 Aug 2006 08:58:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Luke for Lucene 2.x ?
In-Reply-To: <44D32ED4.8050602@magpie.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6043_8723229.1154696291039"
References: <85c493340608040318x1d8d298bscefd326110b03c9c@mail.gmail.com>
	 <44D32ED4.8050602@magpie.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6043_8723229.1154696291039
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've been using Luke against indexes created with Lucene 2.0 for a while, no
problem. I haven't been compiling either Luke or Lucene though...

FWIW.
Erick

On 8/4/06, Miles Barr <miles@magpie.net> wrote:
>
> KEGan wrote:
>
> > I have read that *Andrzej Bialecki *mentioned that he would release new
> > version of Luke based on Lucene 2.0.0 soon. URL here ...
> > http://www.mail-archive.com/java-user@lucene.apache.org/msg08612.html.
> > Anyone has any idea if it has been released ?
> >
> > Andrzej, if you are reading this, could you please let us know :)
> Thanks.
>
>
> It should be fairly straightforward to do it yourself. Compiling Luke
> against Lucene 1.9.1 shows it only uses 4 deprecated calls:
>
> http://www.getopt.org/luke/luke-0.6/luke.zip
>
> 1. Field(java.lang.String,java.lang.String
> ,boolean,boolean,boolean,boolean)
> 2. IndexReader.delete(int)
> 3. IndexReader.delete(Term)
> 4. Analyzer.tokenStream(Reader)
>
> For the first one, replace the booleans with the appropriate Field.Store
> and File.Index values.
>
> The delete call has simply been renamed to deleteDocuments.
>
> Analyzer.tokenStream now requires a field name.
>
> Then replace the Lucene jars in the lib directory with 2.0.0 and you
> should be able to build a compatible version of Luke.
>
>
>
>
> Miles
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6043_8723229.1154696291039--

From java-user-return-22499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 13:22:11 2006
Return-Path: <java-user-return-22499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67422 invoked from network); 4 Aug 2006 13:22:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 13:22:11 -0000
Received: (qmail 74911 invoked by uid 500); 4 Aug 2006 13:22:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74870 invoked by uid 500); 4 Aug 2006 13:22:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74859 invoked by uid 99); 4 Aug 2006 13:22:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 06:22:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.186] (HELO smtpout.mac.com) (17.250.248.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 06:22:03 -0700
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/8.12.11/smtpout16/MantshX 4.0) with ESMTP id k74DLhv1024158
	for <java-user@lucene.apache.org>; Fri, 4 Aug 2006 06:21:43 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id k74DLd41016735
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 4 Aug 2006 06:21:42 -0700 (PDT)
Message-ID: <44D34A5F.5000107@mac.com>
Date: Fri, 04 Aug 2006 09:23:43 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
References: <20060731021247.11211.qmail@web50315.mail.yahoo.com> <44CE0543.6050302@mac.com> <Pine.LNX.4.58.0608010138450.32202@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0608010138450.32202@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:

>: Sure I would love to!  Can you ping me at michael.prichard@mac.com and
>: let me know what I need to do?   Do I just post it to JIRA?
>
>instructions on submitting code can be found in the wiki..
>
>http://wiki.apache.org/jakarta-lucene/HowToContribute
>
>note in particular that since you are primarily submiting new files,
>you'll need to "svn add" them locally in order for them to be included in
>patches created by "svn diff".
>
>As for where it might make sense for them to live: there is an existing
>"contrib/analyzers" package which might make the most sense.
>
>Also note that while test cases aren't stricly mandatory for newly
>contributed code, it does go a long way towards documenting expected
>behavior, and encouraging committers to commit it :)
>
>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>
Oh boy, how embarrassing for me.  I have never used any unit tests...I 
know I know...don't freak out people :)  I pretty much just started 
really coding in Java.  So, is there anyone out there who has time to 
help me add these to the code?  I would appreciate it and, on the plus 
side, the code will be better tested for the community.

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 13:45:50 2006
Return-Path: <java-user-return-22500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79893 invoked from network); 4 Aug 2006 13:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 13:45:50 -0000
Received: (qmail 27854 invoked by uid 500); 4 Aug 2006 13:45:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27602 invoked by uid 500); 4 Aug 2006 13:45:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27578 invoked by uid 99); 4 Aug 2006 13:45:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 06:45:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Russell.Allen@aebn.net designates 216.54.226.11 as permitted sender)
Received: from [216.54.226.11] (HELO mail.dataconversions.biz) (216.54.226.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 06:45:42 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Scoring a document (count?)
Date: Fri, 4 Aug 2006 09:45:37 -0400
Message-ID: <E9BF7E0FD95D1143B399B129908A58FF0163C258@datachange01.dataconversions.biz>
In-Reply-To: <OF5E856B67.8D301D29-ON882571BF.0076771B-882571BF.00792D18@il.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoring a document (count?)
Thread-Index: Aca3SXKCshdOlOPzQ2Ck3Pz2VTGtkQAgfXMA
From: "Russell M. Allen" <Russell.Allen@aebn.net>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doron, thanks for the code offer.  That would be great.  I was able to
get a partial implementation working myself, but I ran into some issues
(most of which are rooted in a lack of understanding of Lucene internals
on my part).  I am sure I can learn a few things from your solution to
this problem.

You may email me directly with the code, or if it's small enough, post
it to the list for posterity.

Thanks again!
-Russell

-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Thursday, August 03, 2006 6:04 PM
To: java-user@lucene.apache.org
Subject: RE: Scoring a document (count?)

Hi Russel,

I am also interested in the internals of Lucene's ranking and how one
can/should alter the scoring. For now I was just learning from existing
code of Lucene scorers and Weights. Your question seemed interesting, so
I in fact implemented a quick scorer that would return the raw tf as a
score, as an exercise. It is not a product level implementation of
course, but if you think this will help you (?) I can share the code.
(Would have responded sooner, for my working computer went off for a few
days with a fan error...:-).

Regards,
Doron

"Russell M. Allen" <Russell.Allen@aebn.net> wrote on 31/07/2006
07:35:50:

> Thank you for the reply Doran!  You are exactly right about the sql=20
> count(*).  I need the equivalent of group by, and count().
>
> We have considered a 'joined' index where we would have a document for

> each permutation.  We discarded it (possibly prematurely) based on the

> rapid explosion in the number of documents.  In our domain, we have=20
> movies as the main document type, and 5 other satellite document types

> with their own indexes: Star, Studio, Director, Series, and Category=20
> (genre).  With the exception of series, a movie has a many to many=20
> relationship with the other indexes.  So, with 60k movies, 20k stars,=20
> 2k studios, ... The document count quickly shoots through the roof.
>
> Also, the majority of our searching is based on a single domain type,=20
> such as movie.  It is only a small handful of corner cases where we=20
> want what amounts to a joined query.  If we merged these indexes, we=20
> would constantly have to 'roll up' the results into distinct instances

> of a type.  (The equivalent of an SQL 'group by')
>
>
> I find the parallels between the expressiveness of Lucene and SQL=20
> interesting.  I'm glad to see you compared what I was looking for to=20
> an sql count(*) as well.  We have a handful of indexing issues that I=20
> am attempting to solve/optimize, of which performing a count(*) is=20
> only one.  I also have the need to perform a JOIN across two indexes.

> I have 'ideas' about how I might go about this, but for now we are=20
> fortunate enough to have fairly static data and half of the join is=20
> static.  As a result we can cache a bitset filter for the results of=20
> half the join and apply it to the other (dynamic) half of the join
query.
>
> Anyway, I digress...
>
> I saw you second post regarding creating a scorer.  I'd like to=20
> continue down that path.  My main issue now is simply understanding=20
> how lucene works under the covers enough to write the TermQuery
variant.
>
> Thanks for the help,
> Russell.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 16:41:43 2006
Return-Path: <java-user-return-22501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50738 invoked from network); 4 Aug 2006 16:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 16:41:43 -0000
Received: (qmail 38393 invoked by uid 500); 4 Aug 2006 16:41:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38369 invoked by uid 500); 4 Aug 2006 16:41:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38358 invoked by uid 99); 4 Aug 2006 16:41:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 09:41:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 09:41:35 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 22CDF5B766; Fri,  4 Aug 2006 09:41:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 19AA07F403
	for <java-user@lucene.apache.org>; Fri,  4 Aug 2006 09:41:01 -0700 (PDT)
Date: Fri, 4 Aug 2006 09:41:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
In-Reply-To: <44D34A5F.5000107@mac.com>
Message-ID: <Pine.LNX.4.58.0608040935370.3813@hal.rescomp.berkeley.edu>
References: <20060731021247.11211.qmail@web50315.mail.yahoo.com>
 <44CE0543.6050302@mac.com> <Pine.LNX.4.58.0608010138450.32202@hal.rescomp.berkeley.edu>
 <44D34A5F.5000107@mac.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Oh boy, how embarrassing for me.  I have never used any unit tests...I
: know I know...don't freak out people :)  I pretty much just started
: really coding in Java.  So, is there anyone out there who has time to
: help me add these to the code?  I would appreciate it and, on the plus
: side, the code will be better tested for the community.

Writing unit tests is a lot easier then it sounds .. especially if you are
writting them as they are ment to be: test of small "units" of code.

take al ook at some of the existing Filter tests, they should give you a
good idea of how to write a test...

http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/analysis/TestISOLatin1AccentFilter.java?revision=347991&view=markup
http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/analysis/TestLengthFilter.java?view=markup
http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/analysis/TestStopFilter.java?revision=382158&view=markup

..the ideal thing is to not only test the expected "good" cases, but
also any cases where you expect an error to be generated -- not exactly
common in a TokenFilter, but it would be a good idea for example to test
what your Filter does when given plain text (ie: not an email address)






-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 17:09:22 2006
Return-Path: <java-user-return-22502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64426 invoked from network); 4 Aug 2006 17:09:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 17:09:22 -0000
Received: (qmail 90741 invoked by uid 500); 4 Aug 2006 17:09:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90716 invoked by uid 500); 4 Aug 2006 17:09:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90705 invoked by uid 99); 4 Aug 2006 17:09:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 10:09:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 10:09:13 -0700
Received: by ug-out-1314.google.com with SMTP id y2so107115uge
        for <java-user@lucene.apache.org>; Fri, 04 Aug 2006 10:08:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AK74EZO20eWuPR4VfqR3LpLG/mIeS6STdh5qUw7hbj9te4cDE6SkAw0eyb75fCgzKSm4s0mhbvL3c2z4Dh+PzKOf/cr+CQF3UymscSMhKxrCl7zPS6P5SbQtJNb8UZRzKER0JQXmN/LXXR8mxDvbZlG6bkqtQqsim43nGPwb2OY=
Received: by 10.67.93.6 with SMTP id v6mr4761355ugl;
        Fri, 04 Aug 2006 10:08:51 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Fri, 4 Aug 2006 10:08:51 -0700 (PDT)
Message-ID: <f18c9dde0608041008q27f7df2ev124820ecc87e2857@mail.gmail.com>
Date: Fri, 4 Aug 2006 19:08:51 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
In-Reply-To: <Pine.LNX.4.58.0608040935370.3813@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060731021247.11211.qmail@web50315.mail.yahoo.com>
	 <44CE0543.6050302@mac.com>
	 <Pine.LNX.4.58.0608010138450.32202@hal.rescomp.berkeley.edu>
	 <44D34A5F.5000107@mac.com>
	 <Pine.LNX.4.58.0608040935370.3813@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Michael,

you might fall in love with the green bar after using it for a while.
If you use eclipse or some other ide including junit it so easy and powerful.

You might find some help here as well:

http://www.onjava.com/pub/a/onjava/2004/02/04/juie.html
http://www.junit.org/news/article/index.htm

As hossman said very important is to test limit values of  your "unit".
You should also let your test fail at the right moment and catch the
exception to test it for illegal values or state.
Something like that does a good job if you expect an exc.


try{
unit.doIt();
fail("illegal state");
}catch(theexc e){}

Have a look at the class junit.framework.Assert, the static methods
are very helpful.

to keep the code clean, keep the bar green :)

Simon



On 8/4/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : Oh boy, how embarrassing for me.  I have never used any unit tests...I
> : know I know...don't freak out people :)  I pretty much just started
> : really coding in Java.  So, is there anyone out there who has time to
> : help me add these to the code?  I would appreciate it and, on the plus
> : side, the code will be better tested for the community.
>
> Writing unit tests is a lot easier then it sounds .. especially if you are
> writting them as they are ment to be: test of small "units" of code.
>
> take al ook at some of the existing Filter tests, they should give you a
> good idea of how to write a test...
>
> http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/analysis/TestISOLatin1AccentFilter.java?revision=347991&view=markup
> http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/analysis/TestLengthFilter.java?view=markup
> http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/analysis/TestStopFilter.java?revision=382158&view=markup
>
> ..the ideal thing is to not only test the expected "good" cases, but
> also any cases where you expect an error to be generated -- not exactly
> common in a TokenFilter, but it would be a good idea for example to test
> what your Filter does when given plain text (ie: not an email address)
>
>
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 17:24:38 2006
Return-Path: <java-user-return-22503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70015 invoked from network); 4 Aug 2006 17:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 17:24:37 -0000
Received: (qmail 19271 invoked by uid 500); 4 Aug 2006 17:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18960 invoked by uid 500); 4 Aug 2006 17:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18947 invoked by uid 99); 4 Aug 2006 17:24:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 10:24:30 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=BAD_ENC_HEADER,FROM_EXCESS_QP,SUBJECT_EXCESS_QP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.76.63.210] (HELO mailserver.exis.com.gr) (80.76.63.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 10:24:27 -0700
Received: from mail.exis.com.gr ([192.168.2.32] helo=clyde.thoukydides.gr)
	by rottweiler.exis.com.gr with esmtp (Exim 4.43)
	id 1G93Oy-0002kp-1K
	for java-user@lucene.apache.org; Fri, 04 Aug 2006 20:24:03 +0300
Received: from localhost ([127.0.0.1] helo=clyde.thoukydides.gr)
	by clyde.thoukydides.gr with esmtp (Exim 4.43)
	id 1G93Uf-0002Ph-VQ
	for java-user@lucene.apache.org; Fri, 04 Aug 2006 20:29:54 +0300
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-7"
MIME-Version: 1.0
From: =?ISO-8859-7?Q?Marios Skounakis?= <mscoon@exis.com.gr>
To: java-user@lucene.apache.org
Subject: =?ISO-8859-7?Q?Stemmer Implementation Strategy - feedback=3F?=
Reply-To: mscoon@exis.com.gr
X-Origin: 87.203.62.158
Date: Fri, 04 Aug 2006 20:29:53 +0300
X-Uidl: 115471259392795106
X-Mailer: AtMail 4.03
X-Spam-Score: 0.8 (/)
X-Spam-Report: 	2.3 BAD_ENC_HEADER         Message has bad MIME encoding in the header
	-1.4 ALL_TRUSTED            Passed through trusted hosts only via SMTP
	 0.0 SUBJECT_EXCESS_QP      Subject: quoted-printable encoded unnecessarily
	 0.0 FROM_EXCESS_QP         From: quoted-printable encoded unnecessarily
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060804172429.C127F10FB00C@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=0D
=0D
=0D
Hi all,=0D
=0D
The contrib section of Lucene contains a Greek Analyzer, which however only=
 does=0D
some letter normalization (capitals to lowercase, accent removal) and basic=
 stop=0D
word removal. =0D
=0D
I am interested in creating a Stemmer for the Greek Language to use with Lu=
cene=0D
(i.e. implement it as an analyzer). The Greek Language is quite different f=
rom=0D
English (and most latin-related languages) in that it is highly inflectiona=
l(?) -=0D
meaning that there is a large number of suffixes, many of which are not pro=
duced=0D
in a very straightforward way.=0D
=0D
A quick internet search did not return much information - a couple of=0D
non-publicly available papers and a Master's Thesis with a javascript=0D
implementation which, however, seems to be somewhat lacking in precision (i=
.e.=0D
produces erroneous stems). A disappointing picture, admittedly, when for th=
e=0D
english language it is so easy to find a public domain high quality stemmer=
 like=0D
Porter's...=0D
=0D
Anyway, to cut a long story short, I had the following idea in order to cou=
nter=0D
the problem of the multiple suffixes and the high inflectional nature of th=
e=0D
language: implement the stemmer using a combination of a lexicon of stems (=
of the=0D
most common words) and a list of all possible suffixes. The algorithm for f=
inding=0D
the stem of a word would be something like:=0D
=0D
- for each suffix in the list of suffixes=0D
   - remove the suffix from the word (if possible), producing a candindate =
stem=0D
   - search the lexicon of stems for the candidate stem=0D
       - if the search is succesful return the candidate stem=0D
       - if the search is unsuccesful go to next suffix=0D
- if the suffixes are exhausted and no match is found, the word cannot be s=
temmed=0D
(return the original word)=0D
=0D
[By the way the algorithm is inspired by a paper which descripbes the=0D
implementation of a lemmatizer in a similar way - citeseer link:=0D
http://citeseer.ist.psu.edu/694579.html]=0D
=0D
The question is: =0D
=0D
Is such a strategy that depends on a leixcon of predefined stems for implem=
enting=0D
a stemmer considered a major drawback? In theory it can be (compared to an=
=0D
algorith that works purely with rules, like Porter's) a drawback, but in=0D
practice, with a lexicon of a few thousand stems, the stemmer could achieve=
=0D
pretty good recall (and good precision too). =0D
=0D
Other issues to comment on are the lexicon size (which will have to be embe=
dded=0D
in or accompany the stemmer), memory issues in running the stemmer (keep th=
e=0D
lexicon in memory?), and performance issues (multiple lookups in the lexico=
n=0D
could make it much slower than a rule based stemmer?). In general, any feed=
back=0D
would be appreciated.=0D
=0D
Thanks in advance,=0D
=0D
Marios Skounakis=0D
---- Msg sent via eXis webmail

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 20:18:25 2006
Return-Path: <java-user-return-22504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29721 invoked from network); 4 Aug 2006 20:18:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 20:18:24 -0000
Received: (qmail 97884 invoked by uid 500); 4 Aug 2006 20:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97847 invoked by uid 500); 4 Aug 2006 20:18:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97830 invoked by uid 99); 4 Aug 2006 20:18:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 13:18:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.220.2.151] (HELO ipex4.johnshopkins.edu) (128.220.2.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 13:18:17 -0700
Received: from atis9nn0d91.monument1.jhmi.edu (HELO ATIS9NN0D91) ([162.129.49.150])
  by ipex4.johnshopkins.edu with SMTP; 04 Aug 2006 16:17:45 -0400
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.07,212,1151899200"; 
   d="scan'208"; a="177366573:sNHT1227989676"
Message-ID: <00fe01c6b803$0b3911e0$963181a2@win.ad.jhu.edu>
Reply-To: "Zhao, Xin" <xzhao@jhu.edu>
From: "Zhao, Xin" <xzhao9@jhmi.edu>
To: <java-user@lucene.apache.org>
References: <1bb901c6b662$03e2e710$963181a2@win.ad.jhu.edu> <7554877E-2CBE-4E35-9B30-E53BFA32BAF6@ehatchersolutions.com>
Subject: Re: scoring formula
Date: Fri, 4 Aug 2006 16:17:43 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="UTF-8";
	reply-type=response
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Erik,
What do you think about the difference?
Thank you very much for your reply,
Xin

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, August 02, 2006 3:56 PM
Subject: Re: scoring formula


Please disregard my previous quick reply as I did not fully read your
message before replying.  *ugh*

Erik

On Aug 2, 2006, at 2:32 PM, Zhao, Xin wrote:

> Hi,
> I noticed the scoring formula in the errata of book "Lucene in  Action" is 
> a little different from the one in Javadoc. I enclosed  the one in Javadoc 
> at the end of email. getBoost(t in q) is in  Javadoc's formula (which I 
> assume is the correct one), but not in  "lucene in action". Any idea? We 
> need to re-implement the scoring  in our application. What I understand is 
> for each term in query, we  should multiply the indexing boost( the boost 
> manfully added while  indexing) with the query boost, and with term 
> frequency,  lengthnorm, idf. So the formula in Javadoc makes more sense to 
> me.  Please correct me if I am wrong. Totally new to Lucene.
> Appreciate your help,
>
> Xin
>
> *************************************************************
>
>       score(q,d) =
>      Î£ ( tf(t in d) * idf(t)^2 * getBoost(t in q) * getBoost (t.field in 
> d) * lengthNorm(t.field in d) )   * coord(q,d) * 
> queryNorm(sumOfSqaredWeights)
>       t in q
>
> ************************************************************


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 21:14:33 2006
Return-Path: <java-user-return-22505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44336 invoked from network); 4 Aug 2006 21:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 21:14:33 -0000
Received: (qmail 62965 invoked by uid 500); 4 Aug 2006 21:14:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62941 invoked by uid 500); 4 Aug 2006 21:14:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62930 invoked by uid 99); 4 Aug 2006 21:14:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 14:14:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [38.117.191.181] (HELO glgexchange01.glgroup.com) (38.117.191.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 14:14:25 -0700
Content-Transfer-Encoding: 7bit
Importance: normal
Priority: normal
Received: from glgexchange04.glgroup.com ([192.168.1.19]) by glgexchange01.glgroup.com with Microsoft SMTPSVC(6.0.3790.0); Fri, 4 Aug 2006 17:14:04 -0400
x-mimeole: Produced By Microsoft MimeOLE V6.00.3790.2663
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6B80A.EA197198"
Subject: running a lucene indexing app as a windows service on xp, crashing
Date: Fri, 4 Aug 2006 17:14:04 -0400
Message-ID: <973858C2ADFF5C4F99415784F9391C060130C8B2@glgexchange04.glgroup.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: running a lucene indexing app as a windows service on xp, crashing
Thread-Index: Aca4CunsILhkqvJtQ+GR+rGb+YKtJw==
From: "Mark Modrall" <MModrall@glgroup.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 04 Aug 2006 21:14:04.0337 (UTC) FILETIME=[EA19A210:01C6B80A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6B80A.EA197198
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi...

=20

Not sure what's the right group for this question.  We have a java
program running with the tanuki Windows Service Wrapper on XP.  This
program is using Lucene to do a fair amount of indexing, creating and
deleting scads of files in its working directory.

=20

The Lucene code is crashing under circumstances that seem pretty lame.
At periodic intervals, lucene tries to File.renameTo(newfile).
Sometimes this fails, so Lucene implemented some fall-back code to
manually copy the contents of the file from old to new.  Our problem is
that sometimes *this* fails too, then the whole thing blows up.

=20

Specifically, the exception comes when Lucene is trying to create a
FileOutputStream(newFile) where the newFile doesn't exist yet.  The
error message reported is Access Denied, yet Lucene has already created
and destroyed hundreds of files in the directory already so it really
can't be a permissions thing on the directory.

=20

This is semi-reproducible, but the thing that seems to trigger the error
is having a separate Windows Explorer window up, looking at the
directory and hitting Refresh frequently.  It seems like if Windows
Explorer is refreshing at the exact moment File.renameTo() and new
FileOutputStream() run, you get an Access Denied exception.

=20

I don't know if this weak behavior stems from the JVM's implementation
or a weakness in the filesystem, but it's a bit of a nuisance.  If we
never use explorer to look at the directory, it may work but it seems
weak to have to tell people "Don't look at that".

=20

Any idea what the root cause is and how to work around it?

=20

thanks

-Mark

=20
This e-mail message, and any attachments, is intended only for the use =
of the individual or entity identified in the alias address of this =
message and may contain information that is confidential, privileged and =
subject to legal restrictions and penalties regarding its unauthorized =
disclosure and use. Any unauthorized review, copying, disclosure, use or =
distribution is strictly prohibited. If you have received this e-mail =
message in error, please notify the sender immediately by reply e-mail =
and delete this message, and any attachments, from your system. Thank =
you.

------_=_NextPart_001_01C6B80A.EA197198--

From java-user-return-22506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 21:28:33 2006
Return-Path: <java-user-return-22506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49243 invoked from network); 4 Aug 2006 21:28:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 21:28:32 -0000
Received: (qmail 81850 invoked by uid 500); 4 Aug 2006 21:28:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80845 invoked by uid 500); 4 Aug 2006 21:28:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80833 invoked by uid 99); 4 Aug 2006 21:28:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 14:28:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 14:28:26 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 4878FD93F28
	for <java-user@lucene.apache.org>; Fri,  4 Aug 2006 17:28:03 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Fri, 04 Aug 2006 17:28:04 -0400
X-Sasl-enc: 7MfCfIsMnNOxIdPDUX4472Vn4hshJKOw1z1wh1qBGEEo 1154726883
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id DBC3C2DFC
	for <java-user@lucene.apache.org>; Fri,  4 Aug 2006 17:28:03 -0400 (EDT)
Message-ID: <44D3BBE2.6050203@mikemccandless.com>
Date: Fri, 04 Aug 2006 17:28:02 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: running a lucene indexing app as a windows service on xp, crashing
References: <973858C2ADFF5C4F99415784F9391C060130C8B2@glgexchange04.glgroup.com>
In-Reply-To: <973858C2ADFF5C4F99415784F9391C060130C8B2@glgexchange04.glgroup.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> The Lucene code is crashing under circumstances that seem pretty lame.
> At periodic intervals, lucene tries to File.renameTo(newfile).
> Sometimes this fails, so Lucene implemented some fall-back code to
> manually copy the contents of the file from old to new.  Our problem is
> that sometimes *this* fails too, then the whole thing blows up.

I agree Lucene should not be affected by things like having Windows 
Explorer windows up!

Can you post the traceback you're seeing?  In particular, what's failing 
about the fallback approach?

Is it in the FSDirectory's renameFile method?  There is this comment in 
there:

     // Rename the old file to the new one. Unfortunately, the renameTo()
     // method does not work reliably under some JVMs.  Therefore, if the
     // rename fails, we manually rename by copying the old file to the 
new one

and correspondingly this comment in the original commit for this (back 
on March 1 2003):

- Added a manual renaming of files in case the java.io.File's renameTo(File)
   call fails.  It has been reported that this happens on Windows JVMs.
Contributed by: Matt Tucker

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 04 21:45:36 2006
Return-Path: <java-user-return-22507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53354 invoked from network); 4 Aug 2006 21:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2006 21:45:36 -0000
Received: (qmail 3414 invoked by uid 500); 4 Aug 2006 21:45:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3383 invoked by uid 500); 4 Aug 2006 21:45:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3372 invoked by uid 99); 4 Aug 2006 21:45:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 14:45:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [38.117.191.181] (HELO glgexchange01.glgroup.com) (38.117.191.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 14:45:29 -0700
Importance: normal
Priority: normal
Received: from glgexchange04.glgroup.com ([192.168.1.19]) by glgexchange01.glgroup.com with Microsoft SMTPSVC(6.0.3790.0); Fri, 4 Aug 2006 17:45:08 -0400
x-mimeole: Produced By Microsoft MimeOLE V6.00.3790.2663
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: running a lucene indexing app as a windows service on xp, crashing
Date: Fri, 4 Aug 2006 17:45:08 -0400
Message-ID: <973858C2ADFF5C4F99415784F9391C060130C8B3@glgexchange04.glgroup.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: running a lucene indexing app as a windows service on xp, crashing
Thread-Index: Aca4DS9JqOsnEkZ7STuiTLr/jusz7wAALf0w
From: "Mark Modrall" <MModrall@glgroup.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 04 Aug 2006 21:45:08.0610 (UTC) FILETIME=[414B1E20:01C6B80F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Michael...

Here's the traceback:
[Indexer.java 652] buildFullIndex: Error building full index
java.io.IOException: Cannot rename
D:\indexbuild1\contact_index\deleteable.new to
D:\indexbuild1\contact_index\deletable at
 org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java:294) at
org.apache.lucene.index.IndexWriter.writeDeleteableFiles(IndexWriter.jav
a:827) at
=20
org.apache.lucene.index.IndexWriter.deleteSegments(IndexWriter.java:771)
at
 org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:732)
at
 org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)
at
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:
674)at
 org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:479)
at
 org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:462)
at
 com.glgroup.glissando.Indexer.indexAllDocuments(Indexer.java:546) at
 com.glgroup.glissando.Indexer.buildFullIndex(Indexer.java:646) at
 com.glgroup.glissando.Indexer.buildIndex(Indexer.java:728) at
 com.glgroup.glissando.Indexer.buildIndices(Indexer.java:845) at
=20
com.glgroup.glissando.IndexingService.stepService(IndexingService.java:3
9) at
 com.glgroup.util.threading.ServiceThread.run(ServiceThread.java:60)
Caused by: java.io.FileNotFoundException:
D:\indexbuild1\contact_index\deletable (Access is denied) at
 java.io.FileOutputStream.open(Native Method) at
 java.io.FileOutputStream.<init>(Unknown Source) at
 java.io.FileOutputStream.<init>(Unknown Source) at
 org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java:278)
... 13 more

	So you can see, yes it's exactly in that spot.  Given the
circumstances we've seen, it seems like File.renameTo() is working most
of the  time but whatever causes it to fail at this specific point in
time also causes the=20
New FileOutputStream (nu);
 to blow up 2 lines later.

	As I said, the trigger seems to be Windows Explorer doing a
refresh at the same moment that Lucene is trying to do one of these
swaps.  I don't know if this is a weakness in the jvm implementation of
the file classes or what, but I've found complaints/bugs about the java
file interactions on windows coming up to 2004.

-Mark




=20
This e-mail message, and any attachments, is intended only for the use =
of the individual or entity identified in the alias address of this =
message and may contain information that is confidential, privileged and =
subject to legal restrictions and penalties regarding its unauthorized =
disclosure and use. Any unauthorized review, copying, disclosure, use or =
distribution is strictly prohibited. If you have received this e-mail =
message in error, please notify the sender immediately by reply e-mail =
and delete this message, and any attachments, from your system. Thank =
you.=20

-----Original Message-----

From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Friday, August 04, 2006 5:28 PM
To: java-user@lucene.apache.org
Subject: Re: running a lucene indexing app as a windows service on xp,
crashing


> The Lucene code is crashing under circumstances that seem pretty lame.
> At periodic intervals, lucene tries to File.renameTo(newfile).
> Sometimes this fails, so Lucene implemented some fall-back code to
> manually copy the contents of the file from old to new.  Our problem
is
> that sometimes *this* fails too, then the whole thing blows up.

I agree Lucene should not be affected by things like having Windows=20
Explorer windows up!

Can you post the traceback you're seeing?  In particular, what's failing

about the fallback approach?

Is it in the FSDirectory's renameFile method?  There is this comment in=20
there:

     // Rename the old file to the new one. Unfortunately, the
renameTo()
     // method does not work reliably under some JVMs.  Therefore, if
the
     // rename fails, we manually rename by copying the old file to the=20
new one

and correspondingly this comment in the original commit for this (back=20
on March 1 2003):

- Added a manual renaming of files in case the java.io.File's
renameTo(File)
   call fails.  It has been reported that this happens on Windows JVMs.
Contributed by: Matt Tucker

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 05 02:40:52 2006
Return-Path: <java-user-return-22508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26714 invoked from network); 5 Aug 2006 02:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 02:40:52 -0000
Received: (qmail 68212 invoked by uid 500); 5 Aug 2006 02:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68182 invoked by uid 500); 5 Aug 2006 02:40:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68171 invoked by uid 99); 5 Aug 2006 02:40:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 19:40:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 19:40:44 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.7/8.13.7) with ESMTP id k752eMxa131018
	for <java-user@lucene.apache.org>; Sat, 5 Aug 2006 02:40:22 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1) with ESMTP id k752htHD150986
	for <java-user@lucene.apache.org>; Sat, 5 Aug 2006 04:43:55 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k752eM5q002869
	for <java-user@lucene.apache.org>; Sat, 5 Aug 2006 04:40:22 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k752eMwd002864
	for <java-user@lucene.apache.org>; Sat, 5 Aug 2006 04:40:22 +0200
In-Reply-To: <359a92830608021117i184e4807mbdc187414e8dfc4e@mail.gmail.com>
Subject: Re: wildcards and spans
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF8F143982.51081CEB-ON882571C1.000BC62E-882571C1.000E0766@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 4 Aug 2006 19:33:13 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 05/08/2006 05:43:55
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A thought - would you (or the project lead;-) consider limiting the
'wildcard expansion'?

Assuming a query like:
          ( uni* near(5) science )
I.e. match docs with any word with prefix "uni" that spans no further than
5 from the word "science". Assume current lexicon has M (say 1200) words
starting with "uni", you could (manually) select the first N (say 50) words
from this list. You could also select the 'best' N words - defining 'best'
in correlation with those words DF for instance.

This has a few issues:
- what N value is good enough?
- how to select the N words?
- you would have to interfere with the code that expands the wildcard.
- search results recall may degrade because it might happen that words
selected as 'best' would not pass the 'span test' while some of the words
that were not selected would have passed the span test.

But it might be practical, and perhaps, hopefully, satisfactory.

Regards,
Doron

"Erick Erickson" <erickerickson@gmail.com> wrote on 02/08/2006 11:17:19:

> I'm almost entirely certain that any value I choose for setMaxClauseCount
is
> going to be wrong, but I might give it a try.
>
> Erick
>
> On 8/2/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> >
> > On Wednesday 02 August 2006 17:29, Erick Erickson wrote:
> > > I'm back, with another flavor of wildcards. What direction would you
> > point a
> > > poor boy who's project lead wants wildcard queries and spans? Here's
the
> > > problem....
> > >
> > > I cannot use any of the classes that throw a "TooManyClauses"
exception
> > (e.g.
> > > SpanRegexQuery or SpanNearQuery with, say WildCardQuery). The corpus
is
> > big
> > > enough that this is guaranteed to be thrown. So, currently I'm using
a
> > > filter for wildcard queries, populating it via WildcardTermEnum and
> > > TermDocs... Works like a champ. But I don't see how to combine this
with
> > > spans...
> >
> > You can try BooleanQuery.setMaxClauseCount() to  increase the max. nr.
of
> > clauses to 100000 or so and see what happens when searching.
> > With enough RAM it should work nicely.
> >
> > You could also use the surround query language. This allows to set
> > the max. nr. of clauses for a whole query instead of per BooleanQuery.
> >
> > Regards,
> > Paul Elschot
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 05 04:32:19 2006
Return-Path: <java-user-return-22509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53837 invoked from network); 5 Aug 2006 04:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 04:32:19 -0000
Received: (qmail 23658 invoked by uid 500); 5 Aug 2006 04:32:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23622 invoked by uid 500); 5 Aug 2006 04:32:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23611 invoked by uid 99); 5 Aug 2006 04:32:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 21:32:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 21:32:13 -0700
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 317811880309
	for <java-user@lucene.apache.org>; Fri,  4 Aug 2006 21:31:52 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
Content-Transfer-Encoding: 7bit
Message-Id: <ff53418cb4941d5e5be8a6376b61109d@as-st.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Bill Taylor <wataylor@as-st.com>
Subject: is there a simple way to make a list of all words in an index?
Date: Sat, 5 Aug 2006 01:04:21 -0400
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I note that Luke is able to create and display a list of all words in 
the dictionary in descending order of frequency, but I would like to be 
able to get a simple list of all words in the dictionary, preferably in 
a file.  I can clearly modify Luke to do this, but i hoped that someone 
else had already done something similar.

thank you.

Bill Taylor


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 05 05:36:58 2006
Return-Path: <java-user-return-22510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69141 invoked from network); 5 Aug 2006 05:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 05:36:58 -0000
Received: (qmail 57316 invoked by uid 500); 5 Aug 2006 05:36:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56866 invoked by uid 500); 5 Aug 2006 05:36:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56849 invoked by uid 99); 5 Aug 2006 05:36:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 22:36:51 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Aug 2006 22:36:50 -0700
Received: (qmail 22219 invoked by uid 60001); 5 Aug 2006 05:36:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=psz71Y59yUzSHNFru3kV90HcBAH44h5wLA2W2bG0x16kt4Z+u3ZwIuLxFc1/fUBPPHl3Dt+1qLDnFL9NmJFydNprqHOyuRwJLSxgrUy4D/CXoMjZlFlfRQ9huqDZAj8/VdiV5+AbJsMQ/YU3E4m9SG4CAaXHjjvHrLdWjha1m1M=  ;
Message-ID: <20060805053629.22217.qmail@web50310.mail.yahoo.com>
Received: from [72.229.167.99] by web50310.mail.yahoo.com via HTTP; Fri, 04 Aug 2006 22:36:29 PDT
Date: Fri, 4 Aug 2006 22:36:29 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: is there a simple way to make a list of all words in an index?
To: java-user@lucene.apache.org
In-Reply-To: <ff53418cb4941d5e5be8a6376b61109d@as-st.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Luke probably uses Lucene's TermEnum class, which is the class you, too, can use to get the list of terms.

Otis


----- Original Message ----
From: Bill Taylor <wataylor@as-st.com>
To: java-user@lucene.apache.org
Sent: Saturday, August 5, 2006 1:04:21 AM
Subject: is there a simple way to make a list of all words in an index?

I note that Luke is able to create and display a list of all words in 
the dictionary in descending order of frequency, but I would like to be 
able to get a simple list of all words in the dictionary, preferably in 
a file.  I can clearly modify Luke to do this, but i hoped that someone 
else had already done something similar.

thank you.

Bill Taylor


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 05 05:44:54 2006
Return-Path: <java-user-return-22511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69694 invoked from network); 5 Aug 2006 05:44:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 05:44:54 -0000
Received: (qmail 60958 invoked by uid 500); 5 Aug 2006 05:44:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60931 invoked by uid 500); 5 Aug 2006 05:44:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60918 invoked by uid 99); 5 Aug 2006 05:44:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 22:44:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 22:44:44 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.7/8.13.7) with ESMTP id k755iNSg162992
	for <java-user@lucene.apache.org>; Sat, 5 Aug 2006 05:44:23 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k755ltEt148324
	for <java-user@lucene.apache.org>; Sat, 5 Aug 2006 07:47:55 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k755iMcq007136
	for <java-user@lucene.apache.org>; Sat, 5 Aug 2006 07:44:22 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k755iMQx007127
	for <java-user@lucene.apache.org>; Sat, 5 Aug 2006 07:44:22 +0200
In-Reply-To: <ff53418cb4941d5e5be8a6376b61109d@as-st.com>
Subject: Re: is there a simple way to make a list of all words in an index?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF5A2A1FF5.300D06F6-ON882571C1.001F1DE6-882571C1.001F7B2E@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 4 Aug 2006 22:43:51 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 05/08/2006 08:47:55
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See IndexReader methods -  terms() and terms(Term) - and Lucene FAQ -

http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#terms()
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#terms(org.apache.lucene.index.Term)
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-a801793d7479264e29157d92440199b35266dc18

Doron

Bill Taylor <wataylor@as-st.com> wrote on 04/08/2006 22:04:21:

> I note that Luke is able to create and display a list of all words in
> the dictionary in descending order of frequency, but I would like to be
> able to get a simple list of all words in the dictionary, preferably in
> a file.  I can clearly modify Luke to do this, but i hoped that someone
> else had already done something similar.
>
> thank you.
>
> Bill Taylor
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 05 06:16:20 2006
Return-Path: <java-user-return-22512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75899 invoked from network); 5 Aug 2006 06:16:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 06:16:20 -0000
Received: (qmail 78786 invoked by uid 500); 5 Aug 2006 06:16:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78288 invoked by uid 500); 5 Aug 2006 06:16:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78277 invoked by uid 99); 5 Aug 2006 06:16:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Aug 2006 23:16:13 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.208] (HELO web25910.mail.ukl.yahoo.com) (217.12.10.208)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Aug 2006 23:16:11 -0700
Received: (qmail 19329 invoked by uid 60001); 5 Aug 2006 06:15:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=1Rwfxc2UXLDSL+mfcUSkIdIH4Q3peFiz9/z9drVXtCDlkleh7/KdRqR0IKKuq4q9CsofKPsfcnAk5PG2JeqY/wpkfrNh3pok/TwGvSer79WsD/1XxIsjTqmY83Ok13ilaNm+Mmmoz4EuJgzqxTseeC1xm1jzHcPaNTsOydIJj9o=  ;
Message-ID: <20060805061550.19327.qmail@web25910.mail.ukl.yahoo.com>
Received: from [84.131.236.86] by web25910.mail.ukl.yahoo.com via HTTP; Sat, 05 Aug 2006 06:15:50 GMT
Date: Sat, 5 Aug 2006 06:15:50 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Reply-To: eks dev <eksdev@yahoo.co.uk>
Subject: Re: running a lucene indexing app as a windows service on xp, crashing
To: java-user@lucene.apache.org
In-Reply-To: <44D3BBE2.6050203@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is windows/jvm issue . Have a look at how ant is dealing with it, maybe we could give it a try with something like that (I have not noticed ant having problems).

We are not able to reproduce this in our environment systematically, so it would be great if you could patch your lucene with this trick and let us know how it goes.
delete/rename->System.gc()->Thread.sleap()->delete/rename Again  


    /**
     * Accommodate Windows bug encountered in both Sun and IBM JDKs.
     * Others possible. If the delete does not work, call System.gc(),
     * wait a little and try again.
     */
    private boolean delete(File f) {
        if (!f.delete()) {
             System.gc();
            try {
                Thread.sleep(DELETE_RETRY_SLEEP_MILLIS);
            } catch (InterruptedException ex) {
                // Ignore Exception
            }
            if (!f.delete()) {
                if (deleteOnExit) {
                    int level = quiet ? Project.MSG_VERBOSE : Project.MSG_INFO;
                    log("Failed to delete " + f + ", calling deleteOnExit."
                        + " This attempts to delete the file when the Ant jvm"
                        + " has exited and might not succeed.", level);
                    f.deleteOnExit();
                    return true;
                }
                return false;
            }
        }
        return true;
    }

----- Original Message ----
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Sent: Friday, 4 August, 2006 11:28:02 PM
Subject: Re: running a lucene indexing app as a windows service on xp, crashing


> The Lucene code is crashing under circumstances that seem pretty lame.
> At periodic intervals, lucene tries to File.renameTo(newfile).
> Sometimes this fails, so Lucene implemented some fall-back code to
> manually copy the contents of the file from old to new.  Our problem is
> that sometimes *this* fails too, then the whole thing blows up.

I agree Lucene should not be affected by things like having Windows 
Explorer windows up!

Can you post the traceback you're seeing?  In particular, what's failing 
about the fallback approach?

Is it in the FSDirectory's renameFile method?  There is this comment in 
there:

     // Rename the old file to the new one. Unfortunately, the renameTo()
     // method does not work reliably under some JVMs.  Therefore, if the
     // rename fails, we manually rename by copying the old file to the 
new one

and correspondingly this comment in the original commit for this (back 
on March 1 2003):

- Added a manual renaming of files in case the java.io.File's renameTo(File)
   call fails.  It has been reported that this happens on Windows JVMs.
Contributed by: Matt Tucker

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 05 20:34:19 2006
Return-Path: <java-user-return-22513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35878 invoked from network); 5 Aug 2006 20:34:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2006 20:34:19 -0000
Received: (qmail 51024 invoked by uid 500); 5 Aug 2006 20:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50986 invoked by uid 500); 5 Aug 2006 20:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50973 invoked by uid 99); 5 Aug 2006 20:34:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 13:34:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Aug 2006 13:34:03 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 17D3AD94295
	for <java-user@lucene.apache.org>; Sat,  5 Aug 2006 16:33:35 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Sat, 05 Aug 2006 16:33:35 -0400
X-Sasl-enc: y0SYr7XrI3+4MdMYsWL7ezcPBTVZg5Zp3qxHdy4KvaS4 1154810015
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id AB1721C0B
	for <java-user@lucene.apache.org>; Sat,  5 Aug 2006 16:33:35 -0400 (EDT)
Message-ID: <44D5009B.5030004@mikemccandless.com>
Date: Sat, 05 Aug 2006 16:33:31 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: running a lucene indexing app as a windows service on xp, crashing
References: <20060805061550.19327.qmail@web25910.mail.ukl.yahoo.com>
In-Reply-To: <20060805061550.19327.qmail@web25910.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> This is windows/jvm issue . Have a look at how ant is dealing with it, maybe we could give it a try with something like that (I have not noticed ant having problems).

Indeed it seems like Windows somehow believes the "deletable" file must 
be still held open, given that the File.renameTo and also the "fallback" 
open failed.

I tried a quick test to reproduce this but could not.  I just modified 
the demo IndexFiles command line tool to add documents forever, then 
used Windows Explorer to refresh like crazy...  I tested with Sun JDK 
1.4.2 on Windows XP Pro SP 2.

Which JDK / version, and Windows XP version, are you using?

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 06 07:51:34 2006
Return-Path: <java-user-return-22514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45377 invoked from network); 6 Aug 2006 07:51:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 07:51:34 -0000
Received: (qmail 35980 invoked by uid 500); 6 Aug 2006 07:51:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35544 invoked by uid 500); 6 Aug 2006 07:51:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35533 invoked by uid 99); 6 Aug 2006 07:51:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 00:51:28 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.176.251] (HELO web25913.mail.ukl.yahoo.com) (217.146.176.251)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 06 Aug 2006 00:51:19 -0700
Received: (qmail 9838 invoked by uid 60001); 6 Aug 2006 07:50:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=BXhzvva2iV2IC1mmVLO6cHFIsVEkSKx4HEuS3NzJK6Zrl+dAHQO6BsDTWJviO2m4Dxq5OstU1NYLCWGK3NZ30REtwCaxuDUFYlIlMI39bHKJ5z0jWvqLknr7RMyLdBnsfVveYv04m6zcy58doo9v6zeATPPYaTe4+kcZpSAQxiE=  ;
Message-ID: <20060806075051.9836.qmail@web25913.mail.ukl.yahoo.com>
Received: from [84.131.251.187] by web25913.mail.ukl.yahoo.com via HTTP; Sun, 06 Aug 2006 07:50:51 GMT
Date: Sun, 6 Aug 2006 07:50:51 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Reply-To: eks dev <eksdev@yahoo.co.uk>
Subject: Re: running a lucene indexing app as a windows service on xp, crashing
To: java-user@lucene.apache.org
In-Reply-To: <44D5009B.5030004@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

XP Proffesionall / win 2003 Server, we had this issue on JVMs 1.5/1.6.

It seams it this happens "not so often" on 1.6/Win2003, but we have this in production only for 2 weeks.

We have single update machine that builds index in batch and replicates to many Index readers, so at least customers are not affected by this annoyance, they get their updates only a few hours later ...

Anyhow, I would be really interested to have this problem solved somehow, my logic was if ant never had this problem (not that I know), let us try their approach.  What is annoyance for me personally is that I am not able to reproduce this problem reliably enough... happens only in production once in a month (daily updates, ca 40Mio documents)

What Store you use, MMAP or FS? IndexWriter cannot function with MMAP on our machines (yet another WIN problem), Reader works like a charm 

On a side note,   Latest 1.6 binaries look stable (as far as our Lucene based app is concerned),  brings nice speed-up  for free (up to 30% on 64 bit platforms!) 


----- Original Message ----
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Sent: Saturday, 5 August, 2006 10:33:31 PM
Subject: Re: running a lucene indexing app as a windows service on xp, crashing


> This is windows/jvm issue . Have a look at how ant is dealing with it, maybe we could give it a try with something like that (I have not noticed ant having problems).

Indeed it seems like Windows somehow believes the "deletable" file must 
be still held open, given that the File.renameTo and also the "fallback" 
open failed.

I tried a quick test to reproduce this but could not.  I just modified 
the demo IndexFiles command line tool to add documents forever, then 
used Windows Explorer to refresh like crazy...  I tested with Sun JDK 
1.4.2 on Windows XP Pro SP 2.

Which JDK / version, and Windows XP version, are you using?

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 06 17:30:13 2006
Return-Path: <java-user-return-22515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37571 invoked from network); 6 Aug 2006 17:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 17:30:13 -0000
Received: (qmail 86040 invoked by uid 500); 6 Aug 2006 17:30:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86018 invoked by uid 500); 6 Aug 2006 17:30:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86007 invoked by uid 99); 6 Aug 2006 17:30:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:30:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.173] (HELO smtpout.mac.com) (17.250.248.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:30:06 -0700
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id k76HTj48020285
	for <java-user@lucene.apache.org>; Sun, 6 Aug 2006 10:29:45 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id k76HTZCI025067
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 6 Aug 2006 10:29:43 -0700 (PDT)
Message-ID: <44D6277E.4000409@mac.com>
Date: Sun, 06 Aug 2006 13:31:42 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Search w/o looking at synonyms?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Howdy,

I created some indexes that use a SynonymAnalyzer and now I want to be 
able to offer a choice as to search the synonyms or not.  If I search 
now it will find all docs since the analyzer created tokens in the same 
position.  How do I tell my IndexSearcher to not look at those tokens 
within certain fields?

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 06 17:59:42 2006
Return-Path: <java-user-return-22516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42348 invoked from network); 6 Aug 2006 17:59:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2006 17:59:42 -0000
Received: (qmail 16375 invoked by uid 500); 6 Aug 2006 17:59:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16341 invoked by uid 500); 6 Aug 2006 17:59:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16330 invoked by uid 99); 6 Aug 2006 17:59:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:59:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 10:59:36 -0700
Received: by py-out-1112.google.com with SMTP id s49so96650pyc
        for <java-user@lucene.apache.org>; Sun, 06 Aug 2006 10:59:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=lGwGUyIa6YysMnA9qKv2Pw/0qt+k2WrkVx35i5f6hTVVx+tC263EOnaqQTBHR1QIYCOZWWXEQBeW5mzRtwejaAwGDDsGc9MMRuvND9UG9I/HhaWaHNu4ObY2SxrtDRP1W+aZfEHpnsI9HUNVarrmPzhLUMkCm7wX3f6UGcp1OMk=
Received: by 10.35.109.2 with SMTP id l2mr10222464pym;
        Sun, 06 Aug 2006 10:59:15 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Sun, 6 Aug 2006 10:59:15 -0700 (PDT)
Message-ID: <c68e39170608061059k4591d16ft12760eebf9d678ce@mail.gmail.com>
Date: Sun, 6 Aug 2006 13:59:15 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Search w/o looking at synonyms?
In-Reply-To: <44D6277E.4000409@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44D6277E.4000409@mac.com>
X-Google-Sender-Auth: aba79faa85f57b41
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/6/06, Michael J. Prichard <michael_prichard@mac.com> wrote:
> I created some indexes that use a SynonymAnalyzer and now I want to be
> able to offer a choice as to search the synonyms or not.

The simplest method is to index the field more than once... one with
synonyms, one without.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 01:02:53 2006
Return-Path: <java-user-return-22517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17962 invoked from network); 7 Aug 2006 01:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 01:02:53 -0000
Received: (qmail 99780 invoked by uid 500); 7 Aug 2006 01:02:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99744 invoked by uid 500); 7 Aug 2006 01:02:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99733 invoked by uid 99); 7 Aug 2006 01:02:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 18:02:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Aug 2006 18:02:46 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 4FAFDD947F8
	for <java-user@lucene.apache.org>; Sun,  6 Aug 2006 21:02:23 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Sun, 06 Aug 2006 21:02:24 -0400
X-Sasl-enc: QQXXiNTxGhUAPMXetqBXQJysbKyf+wWKxdwt7CkN/ZRH 1154912543
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id D6EF0634B
	for <java-user@lucene.apache.org>; Sun,  6 Aug 2006 21:02:23 -0400 (EDT)
Message-ID: <44D69116.7070306@mikemccandless.com>
Date: Sun, 06 Aug 2006 21:02:14 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: running a lucene indexing app as a windows service on xp, crashing
References: <20060806075051.9836.qmail@web25913.mail.ukl.yahoo.com>
In-Reply-To: <20060806075051.9836.qmail@web25913.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> XP Proffesionall / win 2003 Server, we had this issue on JVMs 1.5/1.6.
> 
> It seams it this happens "not so often" on 1.6/Win2003, but we have this in production only for 2 weeks.
> 
> We have single update machine that builds index in batch and replicates to many Index readers, so at least customers are not affected by this annoyance, they get their updates only a few hours later ...

Have you also noticed that opening Windows explorer to the index output 
directory causes this error?  Are you seeing that same traceback as the 
original poster (Mark)?

> Anyhow, I would be really interested to have this problem solved somehow, my logic was if ant never had this problem (not that I know), let us try their approach.  What is annoyance for me personally is that I am not able to reproduce this problem reliably enough... happens only in production once in a month (daily updates, ca 40Mio documents)
> 
> What Store you use, MMAP or FS? IndexWriter cannot function with MMAP on our machines (yet another WIN problem), Reader works like a charm 

I'm just testing with FSDirectory right now.  I also tested on Sun JDK 1.5:

   Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_07-b03)

and refreshed the directory in Windows Explorer constantly, but no 
Access Denied exceptions.  I'm just running with this diff on the demo 
IndexFiles.java:

===================================================================
--- src/demo/org/apache/lucene/demo/IndexFiles.java	(revision 425202)
+++ src/demo/org/apache/lucene/demo/IndexFiles.java	(working copy)
@@ -54,7 +54,9 @@
      try {
        IndexWriter writer = new IndexWriter(INDEX_DIR, new 
StandardAnalyzer(), true);
        System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
-      indexDocs(writer, docDir);
+      for(int i=0;i<10000;i++) {
+        indexDocs(writer, docDir);
+      }
        System.out.println("Optimizing...");
        writer.optimize();
        writer.close();

Mark could you try this modified IndexFiles.java and see if you can 
reproduce the issue on your box?  If so then I think there must be some 
environment / versioning issue that tickles this JVM issue.

> On a side note,   Latest 1.6 binaries look stable (as far as our Lucene based app is concerned),  brings nice speed-up  for free (up to 30% on 64 bit platforms!)

Fantastic!  Progress is progress ...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 10:32:51 2006
Return-Path: <java-user-return-22518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47240 invoked from network); 7 Aug 2006 10:32:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 10:32:51 -0000
Received: (qmail 11361 invoked by uid 500); 7 Aug 2006 10:32:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11339 invoked by uid 500); 7 Aug 2006 10:32:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11323 invoked by uid 99); 7 Aug 2006 10:32:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 03:32:44 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 03:32:43 -0700
Received: by ug-out-1314.google.com with SMTP id j3so21596ugf
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 03:32:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TLTUfNRhf+nIbVauB6IVnzc1QkyVJiSS+e4mSDjWCwr8St8rDiKjXnpKr21QQYqGBHCacsoMMF2MFOqLLJ1SKHlYeo+jWqrWkZ7w7BYO4dZdoJ7FyyBjk6cFYqrfWff0Dbs5GwEGq8Dx2XnidVVGC1OvZ2Uod+iqFfj5qGrILk8=
Received: by 10.66.220.17 with SMTP id s17mr7823589ugg;
        Mon, 07 Aug 2006 03:32:22 -0700 (PDT)
Received: by 10.67.88.5 with HTTP; Mon, 7 Aug 2006 03:32:22 -0700 (PDT)
Message-ID: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com>
Date: Mon, 7 Aug 2006 18:32:22 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: About the use of HitCollector
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65554_32525598.1154946742372"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_65554_32525598.1154946742372
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How can I  use HitCollector to iterate over every returned document?

Thank you in advance.

------=_Part_65554_32525598.1154946742372--

From java-user-return-22519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 10:52:47 2006
Return-Path: <java-user-return-22519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54785 invoked from network); 7 Aug 2006 10:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 10:52:47 -0000
Received: (qmail 41171 invoked by uid 500); 7 Aug 2006 10:52:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40778 invoked by uid 500); 7 Aug 2006 10:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40767 invoked by uid 99); 7 Aug 2006 10:52:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 03:52:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 03:52:39 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k77AqUcd011312
	for <java-user@lucene.apache.org>; Mon, 7 Aug 2006 12:52:31 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 6A6F08B964
	for <java-user@lucene.apache.org>; Mon,  7 Aug 2006 12:52:16 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 31051-06 for <java-user@lucene.apache.org>;
 Mon,  7 Aug 2006 12:52:15 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 58ABF8B94B
	for <java-user@lucene.apache.org>; Mon,  7 Aug 2006 12:52:15 +0200 (CEST)
Message-ID: <44D71B5F.7050602@uni-hd.de>
Date: Mon, 07 Aug 2006 12:52:15 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: About the use of HitCollector
References: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com>
In-Reply-To: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi andy,
> How can I  use HitCollector to iterate over every returned document?

You have to override the function collect for the HitCollector class and
then store the retrieved Data in an array or map.

Here is just a source-code scratch (is = IndexSearcher)

 	        is.search(query, null, new HitCollector(){
 	        		public void collect(int docID, float score)
                    	            {
					Document doc = is.doc(docID);
                    	                titles[docID] = doc.get("title");
                    	            }
           	        });


hth,
martin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 11:04:41 2006
Return-Path: <java-user-return-22520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66387 invoked from network); 7 Aug 2006 11:04:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 11:04:40 -0000
Received: (qmail 65732 invoked by uid 500); 7 Aug 2006 11:04:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65708 invoked by uid 500); 7 Aug 2006 11:04:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65697 invoked by uid 99); 7 Aug 2006 11:04:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 04:04:33 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.151.11.161] (HELO smtp.ya.com) (62.151.11.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 04:04:32 -0700
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1GA2u1-00048N-00
	for java-user@lucene.apache.org; Mon, 07 Aug 2006 13:04:09 +0200
Message-ID: <0ae901c6ba11$67750350$1e8e10ac@ecommerce.tspain.local>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
Subject: lengthNorm method of Similarity not beeing called
Date: Mon, 7 Aug 2006 13:05:33 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0AE6_01C6BA22.2AEF7B70"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0AE6_01C6BA22.2AEF7B70
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
I want to execute a query and sort the results in a special way. Seeing =
the Explanation info returned, I've decided to alter the value that at =
Explanation is given as fieldNorm. Searching at this maillist, I found =
this post:
http://www.mail-archive.com/java-user@lucene.apache.org/msg03304.html
At this post Erik says:

"Sure, you can subclass DefaultSimilarity and override and tweak just
the lengthNorm() method. Be sure to use IndexWriter.setSimilarity()
to get your custom one used."

Well, I traced my own method lengthNorm and realized that this method is =
not being called.
=BFAnyone knows what I'm doing wrong?
All other reimplemented Similarity methods are being called, but not =
lengthNorm.

I'm using Lucene version 1.9.1

These are my pieces of code:

MultiSearcher multi ...
[...]
multi.setSimilarity(new MySimilarity());
QueryParser queryParser =3D new MultiFieldQueryParser(new String[] =
{"tags", "title"}, ProcessConstants.analyzer);
Query query =3D queryParser.parse("rocio ortega");
Hits hits =3D multi.search(query, new Sort(new SortField[]{
  SortField.FIELD_SCORE,
  new SortField("formatted-date", SortField.STRING, true)}));
for (int i =3D 0; i < hits.length(); i++) {
 org.apache.lucene.document.Document docIndex =3D hits.doc(i);
 Explanation explanation =3D multi.explain(query, hits.id(i));
 System.err.println("explanation: " + explanation.toString());
}
[...]

public class MySimilarity extends DefaultSimilarity{
 public MySimilarity(){
  super();
 }
 [...]
 public float lengthNorm(String arg0, int arg1) {
  //System.err.println("**** lengthNorm");
  return super.lengthNorm(arg0, arg1);
 }
}=20


Thanks

------=_NextPart_000_0AE6_01C6BA22.2AEF7B70--


From java-user-return-22521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 11:34:46 2006
Return-Path: <java-user-return-22521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75999 invoked from network); 7 Aug 2006 11:34:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 11:34:46 -0000
Received: (qmail 24400 invoked by uid 500); 7 Aug 2006 11:34:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24365 invoked by uid 500); 7 Aug 2006 11:34:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24354 invoked by uid 99); 7 Aug 2006 11:34:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 04:34:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 04:34:38 -0700
Received: from [10.65.253.200] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1562A266@mailer.syr.edu>; Mon, 7 Aug 2006 7:34:16 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20060804172429.C127F10FB00C@asf.osuosl.org>
References: <20060804172429.C127F10FB00C@asf.osuosl.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0E730735-87EB-420D-8C73-171E63A72CAD@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: Stemmer Implementation Strategy - feedback?
Date: Mon, 7 Aug 2006 07:34:15 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Marios,

It sounds like you have a reasonable plan and you have thought  
through the ideas.  And the answer to many of your questions below is  
"it depends".

Do you have enough memory to hold the whole lexicon in memory?  Is  
this lexicon going to grow significantly over time? I have, in the  
past (for other lexicon based resources), done similar tricks to what  
Lucene does with the term dictionary if things get too large.   
Namely, store the terms in lexicographic order and load every X  
number of terms in memory (X is 128 or 64) as an index into the  
file.  This causes a little more searching than if everything is in  
memory, but you don't have a choice if the lexicon is really large.

Is your lexicon approach going to be complete?  I don't know Greek,  
so I don't know if you have a fixed set of roots.  Also, I don't know  
if Greek has a notion of light stemming versus more aggressive  
stemming.  In Arabic, we found we had better results by doing light  
stemming (as have other researchers.)

It appears to me, based on your research, you don't have much other  
choice.  As for performance, you approach is much faster than your  
alternative :-) (i.e. doing it by hand.)  Writing the stemmer seems  
pretty easy, so I would go for it and then test it to see if it meets  
your needs and, then, if you can, share it with others here.

-Grant

On Aug 4, 2006, at 1:29 PM, Marios Skounakis wrote:

>
>
>
> Hi all,
>
> The contrib section of Lucene contains a Greek Analyzer, which  
> however only does
> some letter normalization (capitals to lowercase, accent removal)  
> and basic stop
> word removal.
>
> I am interested in creating a Stemmer for the Greek Language to use  
> with Lucene
> (i.e. implement it as an analyzer). The Greek Language is quite  
> different from
> English (and most latin-related languages) in that it is highly  
> inflectional(?) -
> meaning that there is a large number of suffixes, many of which are  
> not produced
> in a very straightforward way.
>
> A quick internet search did not return much information - a couple of
> non-publicly available papers and a Master's Thesis with a javascript
> implementation which, however, seems to be somewhat lacking in  
> precision (i.e.
> produces erroneous stems). A disappointing picture, admittedly,  
> when for the
> english language it is so easy to find a public domain high quality  
> stemmer like
> Porter's...
>
> Anyway, to cut a long story short, I had the following idea in  
> order to counter
> the problem of the multiple suffixes and the high inflectional  
> nature of the
> language: implement the stemmer using a combination of a lexicon of  
> stems (of the
> most common words) and a list of all possible suffixes. The  
> algorithm for finding
> the stem of a word would be something like:
>
> - for each suffix in the list of suffixes
>    - remove the suffix from the word (if possible), producing a  
> candindate stem
>    - search the lexicon of stems for the candidate stem
>        - if the search is succesful return the candidate stem
>        - if the search is unsuccesful go to next suffix
> - if the suffixes are exhausted and no match is found, the word  
> cannot be stemmed
> (return the original word)
>
> [By the way the algorithm is inspired by a paper which descripbes the
> implementation of a lemmatizer in a similar way - citeseer link:
> http://citeseer.ist.psu.edu/694579.html]
>
> The question is:
>
> Is such a strategy that depends on a leixcon of predefined stems  
> for implementing
> a stemmer considered a major drawback? In theory it can be  
> (compared to an
> algorith that works purely with rules, like Porter's) a drawback,  
> but in
> practice, with a lexicon of a few thousand stems, the stemmer could  
> achieve
> pretty good recall (and good precision too).
>
> Other issues to comment on are the lexicon size (which will have to  
> be embedded
> in or accompany the stemmer), memory issues in running the stemmer  
> (keep the
> lexicon in memory?), and performance issues (multiple lookups in  
> the lexicon
> could make it much slower than a rule based stemmer?). In general,  
> any feedback
> would be appreciated.
>
> Thanks in advance,
>
> Marios Skounakis
> ---- Msg sent via eXis webmail
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 12:04:12 2006
Return-Path: <java-user-return-22522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82617 invoked from network); 7 Aug 2006 12:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 12:04:12 -0000
Received: (qmail 69669 invoked by uid 500); 7 Aug 2006 12:04:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69215 invoked by uid 500); 7 Aug 2006 12:04:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69204 invoked by uid 99); 7 Aug 2006 12:04:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 05:04:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 05:04:05 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id D64CCD940DB
	for <java-user@lucene.apache.org>; Mon,  7 Aug 2006 08:03:43 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Mon, 07 Aug 2006 08:03:44 -0400
X-Sasl-enc: wKHxN8pv68ObeSWqgHI6nMc1niwtda0vQwi2d1UqYzOi 1154952223
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id DD75B3E26
	for <java-user@lucene.apache.org>; Mon,  7 Aug 2006 08:03:43 -0400 (EDT)
Message-ID: <44D72C1C.2010607@mikemccandless.com>
Date: Mon, 07 Aug 2006 08:03:40 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: lengthNorm method of Similarity not beeing called
References: <0ae901c6ba11$67750350$1e8e10ac@ecommerce.tspain.local>
In-Reply-To: <0ae901c6ba11$67750350$1e8e10ac@ecommerce.tspain.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> At this post Erik says:
> 
> "Sure, you can subclass DefaultSimilarity and override and tweak just
> the lengthNorm() method. Be sure to use IndexWriter.setSimilarity()
> to get your custom one used."
> 
> Well, I traced my own method lengthNorm and realized that this method is not being called.

The lengthNorm() method, I believe, is only called during indexing.  Its 
purpose is to translate the number of terms that occurred in a given 
field, into a score factor that is used at query time.

Can you verify that you called IndexWriter.setSimilarity() (as above) 
before adding documents to the index?  And then see if your lengthNorm() 
is then being called?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 12:45:31 2006
Return-Path: <java-user-return-22523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92325 invoked from network); 7 Aug 2006 12:45:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 12:45:31 -0000
Received: (qmail 37329 invoked by uid 500); 7 Aug 2006 12:45:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37207 invoked by uid 500); 7 Aug 2006 12:45:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37196 invoked by uid 99); 7 Aug 2006 12:45:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 05:45:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [38.117.191.181] (HELO glgexchange01.glgroup.com) (38.117.191.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 05:45:23 -0700
Importance: normal
Priority: normal
Received: from glgexchange04.glgroup.com ([192.168.1.19]) by glgexchange01.glgroup.com with Microsoft SMTPSVC(6.0.3790.0); Mon, 7 Aug 2006 08:45:01 -0400
x-mimeole: Produced By Microsoft MimeOLE V6.00.3790.2663
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: running a lucene indexing app as a windows service on xp, crashing
Date: Mon, 7 Aug 2006 08:45:01 -0400
Message-ID: <973858C2ADFF5C4F99415784F9391C060130C8B7@glgexchange04.glgroup.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: running a lucene indexing app as a windows service on xp, crashing
Thread-Index: Aca4zoeoU4Z/zzL7Soqh6fJN7c8zEgBTumyQ
From: "Mark Modrall" <MModrall@glgroup.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Aug 2006 12:45:01.0246 (UTC) FILETIME=[4C3D0DE0:01C6BA1F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Mike...

	Sorry I didn't respond over the weekend; I wasn't checking work
email.

	A few more pieces of information about our circumstances:  the
indexing system is running Windows Server 2003 sp1, the directories that
the indexer is using are shares (helped reproduce; we had a couple of
people using explorer to watch the directory), the corpus being indexed
at the time had something like 190K rows and indexing took about 1.42
hours (so plenty of time to try).  Another person here suggested the
fact that our explorer windows were set to "Details" might be relevant
since explorer needs to touch each file to get the details.

	When we had 2 users hitting refresh on the window as frequently
as they could, the crash took only about 3 minutes to reproduce.

	The traceback we saw was in the fallback code (when renameTo
didn't work) on the line opening the new output file (which didn't
exist).  That made me wonder if the problem wasn't with the single
destination file but with access to the root directory.  The indexer
cranks out scads of those little temp files; if Explorer is in the
middle of a details refresh, maybe it has some kind of lock on directory
modification and a long list would increase the chance that the java
code may be trying that code at the same time.

	I'll ask the guy who's running the indexer if he'd be open to
trying the patch.

Thanks
_mark




=20
This e-mail message, and any attachments, is intended only for the use =
of the individual or entity identified in the alias address of this =
message and may contain information that is confidential, privileged and =
subject to legal restrictions and penalties regarding its unauthorized =
disclosure and use. Any unauthorized review, copying, disclosure, use or =
distribution is strictly prohibited. If you have received this e-mail =
message in error, please notify the sender immediately by reply e-mail =
and delete this message, and any attachments, from your system. Thank =
you.=20

-----Original Message-----

From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Saturday, August 05, 2006 4:34 PM
To: java-user@lucene.apache.org
Subject: Re: running a lucene indexing app as a windows service on xp,
crashing


> This is windows/jvm issue . Have a look at how ant is dealing with it,
maybe we could give it a try with something like that (I have not
noticed ant having problems).

Indeed it seems like Windows somehow believes the "deletable" file must=20
be still held open, given that the File.renameTo and also the "fallback"

open failed.

I tried a quick test to reproduce this but could not.  I just modified=20
the demo IndexFiles command line tool to add documents forever, then=20
used Windows Explorer to refresh like crazy...  I tested with Sun JDK=20
1.4.2 on Windows XP Pro SP 2.

Which JDK / version, and Windows XP version, are you using?

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 12:46:50 2006
Return-Path: <java-user-return-22524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92514 invoked from network); 7 Aug 2006 12:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 12:46:49 -0000
Received: (qmail 39124 invoked by uid 500); 7 Aug 2006 12:46:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38934 invoked by uid 500); 7 Aug 2006 12:46:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38923 invoked by uid 99); 7 Aug 2006 12:46:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 05:46:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [38.117.191.181] (HELO glgexchange01.glgroup.com) (38.117.191.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 05:46:42 -0700
Importance: normal
Priority: normal
Received: from glgexchange04.glgroup.com ([192.168.1.19]) by glgexchange01.glgroup.com with Microsoft SMTPSVC(6.0.3790.0); Mon, 7 Aug 2006 08:46:21 -0400
x-mimeole: Produced By Microsoft MimeOLE V6.00.3790.2663
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: running a lucene indexing app as a windows service on xp, crashing
Date: Mon, 7 Aug 2006 08:46:21 -0400
Message-ID: <973858C2ADFF5C4F99415784F9391C060130C8B8@glgexchange04.glgroup.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: running a lucene indexing app as a windows service on xp, crashing
Thread-Index: Aca4zoeoU4Z/zzL7Soqh6fJN7c8zEgBTumyQAAB+LAA=
From: "Mark Modrall" <MModrall@glgroup.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Aug 2006 12:46:21.0620 (UTC) FILETIME=[7C252740:01C6BA1F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Oh, sorry forgot - jdk 1.5.0_06



=20
This e-mail message, and any attachments, is intended only for the use =
of the individual or entity identified in the alias address of this =
message and may contain information that is confidential, privileged and =
subject to legal restrictions and penalties regarding its unauthorized =
disclosure and use. Any unauthorized review, copying, disclosure, use or =
distribution is strictly prohibited. If you have received this e-mail =
message in error, please notify the sender immediately by reply e-mail =
and delete this message, and any attachments, from your system. Thank =
you.=20

-----Original Message-----

From: Mark Modrall [mailto:MModrall@glgroup.com]=20
Sent: Monday, August 07, 2006 8:45 AM
To: java-user@lucene.apache.org
Subject: RE: running a lucene indexing app as a windows service on xp,
crashing

Hi Mike...

	Sorry I didn't respond over the weekend; I wasn't checking work
email.

	A few more pieces of information about our circumstances:  the
indexing system is running Windows Server 2003 sp1, the directories that
the indexer is using are shares (helped reproduce; we had a couple of
people using explorer to watch the directory), the corpus being indexed
at the time had something like 190K rows and indexing took about 1.42
hours (so plenty of time to try).  Another person here suggested the
fact that our explorer windows were set to "Details" might be relevant
since explorer needs to touch each file to get the details.

	When we had 2 users hitting refresh on the window as frequently
as they could, the crash took only about 3 minutes to reproduce.

	The traceback we saw was in the fallback code (when renameTo
didn't work) on the line opening the new output file (which didn't
exist).  That made me wonder if the problem wasn't with the single
destination file but with access to the root directory.  The indexer
cranks out scads of those little temp files; if Explorer is in the
middle of a details refresh, maybe it has some kind of lock on directory
modification and a long list would increase the chance that the java
code may be trying that code at the same time.

	I'll ask the guy who's running the indexer if he'd be open to
trying the patch.

Thanks
_mark




=20
This e-mail message, and any attachments, is intended only for the use
of the individual or entity identified in the alias address of this
message and may contain information that is confidential, privileged and
subject to legal restrictions and penalties regarding its unauthorized
disclosure and use. Any unauthorized review, copying, disclosure, use or
distribution is strictly prohibited. If you have received this e-mail
message in error, please notify the sender immediately by reply e-mail
and delete this message, and any attachments, from your system. Thank
you.=20

-----Original Message-----

From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Saturday, August 05, 2006 4:34 PM
To: java-user@lucene.apache.org
Subject: Re: running a lucene indexing app as a windows service on xp,
crashing


> This is windows/jvm issue . Have a look at how ant is dealing with it,
maybe we could give it a try with something like that (I have not
noticed ant having problems).

Indeed it seems like Windows somehow believes the "deletable" file must=20
be still held open, given that the File.renameTo and also the "fallback"

open failed.

I tried a quick test to reproduce this but could not.  I just modified=20
the demo IndexFiles command line tool to add documents forever, then=20
used Windows Explorer to refresh like crazy...  I tested with Sun JDK=20
1.4.2 on Windows XP Pro SP 2.

Which JDK / version, and Windows XP version, are you using?

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 13:08:37 2006
Return-Path: <java-user-return-22525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99661 invoked from network); 7 Aug 2006 13:08:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 13:08:36 -0000
Received: (qmail 71303 invoked by uid 500); 7 Aug 2006 13:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71264 invoked by uid 500); 7 Aug 2006 13:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71195 invoked by uid 99); 7 Aug 2006 13:08:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 06:08:28 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.198] (HELO web36406.mail.mud.yahoo.com) (209.191.91.198)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 07 Aug 2006 06:08:27 -0700
Received: (qmail 79129 invoked by uid 60001); 7 Aug 2006 13:08:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=wA3mpBirixSsC3yjr5bDXov222N1vZoOrbBGCvHEMG9XOHQ8240gx/dbZgXDB6sP9nxwso/OkcazKnPhF0aljWkhtL6SzK0urfLnf+KbyPp+c32JHAXfhO5pt2YhG8okaaKSNXOvwVgti9f2tdiltPuFmE6Qy5VVQZjN1TxYAGk=  ;
Message-ID: <20060807130805.79127.qmail@web36406.mail.mud.yahoo.com>
Received: from [208.210.219.129] by web36406.mail.mud.yahoo.com via HTTP; Mon, 07 Aug 2006 06:08:05 PDT
Date: Mon, 7 Aug 2006 06:08:05 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Re: Modify index on database update
To: java-user@lucene.apache.org
In-Reply-To: <44D21553.6060604@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-629505451-1154956085=:78534"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-629505451-1154956085=:78534
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks Michael.
   
  You explained it very nice. I will look into the third approach. The first and second approach are not feasible for me.
   
  Thanks again.
  -Vasu

Michael McCandless <lucene@mikemccandless.com> wrote:
  
> My application database can be updated outside the application also. Whenever there is a change in database by some other source, I want to update my index.
> 
> Is there any way to do so?
> 
> I am using Java and the database is DB2. I saw the DB2 UDF. But I have to put the jar inside the DB2 installation directory. I dont know how to communicate with my application/update index.

Yes, this certainly is possible.

The simplest approach would be to rebuild the entire index periodically, 
however, this is not very efficient.

A better approach is to reindex just the rows that have changed since 
you last indexed.

To do this, first, you need to implement your own method of tracking 
which rows of which tables have changed inside DB2. Perhaps you could 
use a timestamp column and then issue a SELECT WHERE timestamp > 
last-index-time. Make sure last-index-time is DB2's timestamp to avoid 
clock skew issues.

Then, for each changed document, you need to add the new doc and remove 
the old one (Lucene doesn't have a "replace document" ). Typically you 
would index the primary key into Lucene, and then use IndexReader's or 
IndexModifier's 'deleteDocuments(Term term)' to delete the document by 
its primary key. Then add the new document. If you have a group of 
documents that need re-indexing, it's best to first delete all of them, 
and then re-add all of them (ie, bunch the deletes & adds). This gives 
better performance.

The third (and likely best, depending on tradeoffs) approach is to have 
some sort of "push" or "triggers" coming out of DB2 that notifies you 
whenever a row is changed. If UDF inside DB2 allows for this that would 
be great (I don't know anything about UDF -- likely you'd need to roll 
your own such communication coming out of DB2). Then, you re-index each 
document when it's changed instead of polling periodically.

In any case, make sure you close/re-open your IndexSearchers 
periodically so that they see the newly deleted/added documents. And 
make sure the lock directory is the same directory across all of your 
processes, and, it is a directory in a locally mounted file system (ie 
not NFS or Samba) as there known issues for those.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 		
---------------------------------
How low will we go? Check out Yahoo! Messenger’s low  PC-to-Phone call rates.
--0-629505451-1154956085=:78534--

From java-user-return-22526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 13:49:12 2006
Return-Path: <java-user-return-22526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18013 invoked from network); 7 Aug 2006 13:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 13:49:11 -0000
Received: (qmail 62482 invoked by uid 500); 7 Aug 2006 13:49:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62459 invoked by uid 500); 7 Aug 2006 13:49:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62447 invoked by uid 99); 7 Aug 2006 13:49:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 06:49:05 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 06:49:03 -0700
Received: by ug-out-1314.google.com with SMTP id y2so55604uge
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 06:48:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RI9zJGjHRBCXuEqqQmZHyEj+44rXQMPPgZekVzErVhFSqe5KlUcUPmX5Hy1HfcszIL5FYW8Bm5Q4nYawI1GaLnFfCGEXxhWJP+X9s02ZYVkfgyhE2Ux/fmpU4enmH9z4wOJBA7BNqvkqxiaM1k8DhOMcVYvUnm3GfRnKLTpWblI=
Received: by 10.67.93.7 with SMTP id v7mr8013343ugl;
        Mon, 07 Aug 2006 06:48:41 -0700 (PDT)
Received: by 10.67.88.5 with HTTP; Mon, 7 Aug 2006 06:48:41 -0700 (PDT)
Message-ID: <4f2c7c9b0608070648g278d6acbid3f9f036e41aa588@mail.gmail.com>
Date: Mon, 7 Aug 2006 21:48:41 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: About the use of HitCollector
In-Reply-To: <44D71B5F.7050602@uni-hd.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68066_21860068.1154958521260"
References: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com>
	 <44D71B5F.7050602@uni-hd.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_68066_21860068.1154958521260
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Martin, Thank you for your reply.

But the Lucene API said:
This is called in an inner search loop. For good search performance,
implementations of this method should not call
Searcher.doc(int)<file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/search/Searcher.html#doc(int)>or
IndexReader.document(int)<file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/index/IndexReader.html#document(int)>on
every document number encountered

Because I have to check a field in the document to determine whether I
should return the document. The total number of documents is about two
hundred thousand. So I'm afraid the
performance


2006/8/7, Martin Braun <mbraun@uni-hd.de>:
>
> hi andy,
> > How can I  use HitCollector to iterate over every returned document?
>
> You have to override the function collect for the HitCollector class and
> then store the retrieved Data in an array or map.
>
> Here is just a source-code scratch (is = IndexSearcher)
>
>                is.search(query, null, new HitCollector(){
>                                public void collect(int docID, float score)
>                                    {
>                                        Document doc = is.doc(docID);
>                                        titles[docID] = doc.get("title");
>                                    }
>                        });
>
>
> hth,
> martin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_68066_21860068.1154958521260--

From java-user-return-22527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 17:28:41 2006
Return-Path: <java-user-return-22527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96651 invoked from network); 7 Aug 2006 17:28:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 17:28:41 -0000
Received: (qmail 25433 invoked by uid 500); 7 Aug 2006 17:28:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25406 invoked by uid 500); 7 Aug 2006 17:28:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25395 invoked by uid 99); 7 Aug 2006 17:28:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 10:28:34 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cao.yiqun@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 10:28:33 -0700
Received: by nf-out-0910.google.com with SMTP id p48so2388827nfa
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 10:28:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cKv/ScK1cqh4viQRGKtC7tsn91pJc93NuOVkPkTXG+Iq3hmh4QDgF9GAZ6RZgDbzZpVPdsn89rdFWStKnSEDfNDCnunpgNyEJlD3i2h4+KnPrd9PEnMwDNJ3rboVbQRevAjRe/dHVV8HcAjWCtpt0wMEJilR4MbLS+yQkvd/F6I=
Received: by 10.78.136.7 with SMTP id j7mr2450633hud;
        Mon, 07 Aug 2006 10:28:10 -0700 (PDT)
Received: by 10.78.147.2 with HTTP; Mon, 7 Aug 2006 10:28:09 -0700 (PDT)
Message-ID: <2236770e0608071028g1b13a060t4e00c64b15c014e9@mail.gmail.com>
Date: Mon, 7 Aug 2006 10:28:09 -0700
From: "Yiqun \"Eddie\" Cao" <cao.yiqun@gmail.com>
To: java-user@lucene.apache.org
Subject: query syntax problem
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17531_449064.1154971689987"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17531_449064.1154971689987
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

We are using lucene in a chemistry database, and we are dealing with special
words containing both digits and characters in English alphabets, such as
PFC-0234. To prevent lucene from cutting the word into two, we have replaced
all dashes into underscores, so PFC-0234 is stored and indexed as PFC_0234
in the lucene index. However, none of them works for searches containing
wildcard characters. For example, none of the following works: PFC_*, PFC*,
PF*, PFC_0*, PFC_02*, but PFC-0234 works. Can anyone tell me what is wrong
here? We have tried WhitespaceAnalyzer, but it's not working either.

Thanks,

Eddie

------=_Part_17531_449064.1154971689987--

From java-user-return-22528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 18:51:17 2006
Return-Path: <java-user-return-22528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25448 invoked from network); 7 Aug 2006 18:51:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 18:51:16 -0000
Received: (qmail 77046 invoked by uid 500); 7 Aug 2006 18:51:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77009 invoked by uid 500); 7 Aug 2006 18:51:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76997 invoked by uid 99); 7 Aug 2006 18:51:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:51:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:51:06 -0700
Received: by py-out-1112.google.com with SMTP id s49so181947pyc
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 11:50:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bml2gnenEypZFjq6vtOrboO1NQMjG/gIeZsgTZArowW6JXMbOnn/tWPWzplzF51kyL1Zkndqqhdu/4R+UDziV9spNdcJNAs0aKAvNSxtMzN/LB5+ztoAXUwQT5JrBKmeqN47JV78SSCpiud9CJnEDrfWhsqlGQvFt8FReUQQmi4=
Received: by 10.35.131.10 with SMTP id i10mr12765463pyn;
        Mon, 07 Aug 2006 11:50:43 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 7 Aug 2006 11:50:43 -0700 (PDT)
Message-ID: <359a92830608071150o23f995eav1da9bdd4f0f45995@mail.gmail.com>
Date: Mon, 7 Aug 2006 14:50:43 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query syntax problem
In-Reply-To: <2236770e0608071028g1b13a060t4e00c64b15c014e9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49914_27810162.1154976643200"
References: <2236770e0608071028g1b13a060t4e00c64b15c014e9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_49914_27810162.1154976643200
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

When you say "we've tried the whitespace analyzer", did you mean for BOTH
indexing and searching? If you ony use it for one of those, you'd see
results like this.

And do you use Luke? It'll let you examine your index and see what's
*actually* in it. It's the first place I go when I don't get results I
expect....

See: http://www.getopt.org/luke/

What about capitalization? Lucene is case-sensitive. Some of the analyzers
automatically lower-case and some don't.

If you're using the whitespace analyzer, I don't think you need to bother
transforming the hyphen into underscore....

Hope this helps, without more context I'm not sure what else to suggest...

Erick

On 8/7/06, Yiqun Eddie Cao <cao.yiqun@gmail.com> wrote:
>
> Hi,
>
> We are using lucene in a chemistry database, and we are dealing with
> special
> words containing both digits and characters in English alphabets, such as
> PFC-0234. To prevent lucene from cutting the word into two, we have
> replaced
> all dashes into underscores, so PFC-0234 is stored and indexed as PFC_0234
> in the lucene index. However, none of them works for searches containing
> wildcard characters. For example, none of the following works: PFC_*,
> PFC*,
> PF*, PFC_0*, PFC_02*, but PFC-0234 works. Can anyone tell me what is wrong
> here? We have tried WhitespaceAnalyzer, but it's not working either.
>
> Thanks,
>
> Eddie
>
>

------=_Part_49914_27810162.1154976643200--

From java-user-return-22529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 18:51:30 2006
Return-Path: <java-user-return-22529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25503 invoked from network); 7 Aug 2006 18:51:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 18:51:30 -0000
Received: (qmail 78434 invoked by uid 500); 7 Aug 2006 18:51:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78408 invoked by uid 500); 7 Aug 2006 18:51:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78397 invoked by uid 99); 7 Aug 2006 18:51:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:51:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [80.236.3.113] (HELO miner.numericable.net) (80.236.3.113)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 11:51:22 -0700
Received: (qmail 10603 invoked from network); 7 Aug 2006 18:50:59 -0000
Received: from unknown (HELO [192.168.1.124]) ([81.220.88.208])
          (envelope-sender <nicolas.lalevee@anyware-tech.com>)
          by miner.numericable.net (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 7 Aug 2006 18:50:59 -0000
From: Nicolas =?iso-8859-15?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: query syntax problem
Date: Mon, 7 Aug 2006 20:50:08 +0200
User-Agent: KMail/1.9.1
References: <2236770e0608071028g1b13a060t4e00c64b15c014e9@mail.gmail.com>
In-Reply-To: <2236770e0608071028g1b13a060t4e00c64b15c014e9@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200608072050.09322.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Le Lundi 07 Ao=FBt 2006 19:28, Yiqun "Eddie" Cao a =E9crit=A0:
> Hi,
>
> We are using lucene in a chemistry database, and we are dealing with
> special words containing both digits and characters in English alphabets,
> such as PFC-0234. To prevent lucene from cutting the word into two, we ha=
ve
> replaced all dashes into underscores, so PFC-0234 is stored and indexed as
> PFC_0234 in the lucene index. However, none of them works for searches
> containing wildcard characters. For example, none of the following works:
> PFC_*, PFC*, PF*, PFC_0*, PFC_02*, but PFC-0234 works. Can anyone tell me
> what is wrong here? We have tried WhitespaceAnalyzer, but it's not working
> either.

=46or this type of field values, you should index them with the index prope=
rty :=20
=46ield.Index.UN_TOKENIZED.

cheers,
Nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 19:46:39 2006
Return-Path: <java-user-return-22530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48814 invoked from network); 7 Aug 2006 19:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 19:46:39 -0000
Received: (qmail 63493 invoked by uid 500); 7 Aug 2006 19:46:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63471 invoked by uid 500); 7 Aug 2006 19:46:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63460 invoked by uid 99); 7 Aug 2006 19:46:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:46:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 12:46:32 -0700
Received: by ug-out-1314.google.com with SMTP id y2so158995uge
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 12:46:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CKYzzM1kx0uUcD4e+e2dBofWnaPOzMuKeBgPSRLLRtRwpe8qrbqKRtL0QWsbC/MhNwkvBnZjjHPPnnqHgCWaRVyveSf7RCkjKVlcU5D9FoMV63h9EuIAteX+Pjn2fnwVgKKiQjwRV90UcaF5/mfdFnzg5GTsS9LKS7sMBh3HNEo=
Received: by 10.66.244.10 with SMTP id r10mr8580695ugh;
        Mon, 07 Aug 2006 12:46:10 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Mon, 7 Aug 2006 12:46:10 -0700 (PDT)
Message-ID: <f18c9dde0608071246r6e1d281ftde0f653d39a72898@mail.gmail.com>
Date: Mon, 7 Aug 2006 21:46:10 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: About the use of HitCollector
In-Reply-To: <4f2c7c9b0608070648g278d6acbid3f9f036e41aa588@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com>
	 <44D71B5F.7050602@uni-hd.de>
	 <4f2c7c9b0608070648g278d6acbid3f9f036e41aa588@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Andy,

i don't know how you determinate whether a document has to be
displayed or not but I use a filter to do such kind of jobs. We have a
index for a specific website with personalized areas which should be
searchable for users having corresponding usergroups. That works quiet
well and you can use the filter cache e.g. cache the filter itself for
your queries.

regards Simon

On 8/7/06, hu andy <andyhugb@gmail.com> wrote:
> Martin, Thank you for your reply.
>
> But the Lucene API said:
> This is called in an inner search loop. For good search performance,
> implementations of this method should not call
> Searcher.doc(int)<file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/search/Searcher.html#doc(int)>or
> IndexReader.document(int)<file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/index/IndexReader.html#document(int)>on
> every document number encountered
>
> Because I have to check a field in the document to determine whether I
> should return the document. The total number of documents is about two
> hundred thousand. So I'm afraid the
> performance
>
>
> 2006/8/7, Martin Braun <mbraun@uni-hd.de>:
> >
> > hi andy,
> > > How can I  use HitCollector to iterate over every returned document?
> >
> > You have to override the function collect for the HitCollector class and
> > then store the retrieved Data in an array or map.
> >
> > Here is just a source-code scratch (is = IndexSearcher)
> >
> >                is.search(query, null, new HitCollector(){
> >                                public void collect(int docID, float score)
> >                                    {
> >                                        Document doc = is.doc(docID);
> >                                        titles[docID] = doc.get("title");
> >                                    }
> >                        });
> >
> >
> > hth,
> > martin
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 20:22:38 2006
Return-Path: <java-user-return-22531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59193 invoked from network); 7 Aug 2006 20:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 20:22:38 -0000
Received: (qmail 17995 invoked by uid 500); 7 Aug 2006 20:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16992 invoked by uid 500); 7 Aug 2006 20:22:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16981 invoked by uid 99); 7 Aug 2006 20:22:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 13:22:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.147.114.148] (HELO mx2.topiatechnology.com) (209.147.114.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 13:22:32 -0700
Received: from [192.168.1.215] (heiglot2 [192.168.0.146])
	by mx2.topiatechnology.com (Postfix) with ESMTP id 417091967BB
	for <java-user@lucene.apache.org>; Mon,  7 Aug 2006 13:22:11 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <28439FFB-9BAA-4AE4-A287-61D99264FB7F@topiatechnology.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Chad Hardin <chardin@topiatechnology.com>
Subject: More like this returning similarities that are too generic
Date: Mon, 7 Aug 2006 13:22:09 -0700
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi all,

I'm new to lucene but I'm loving it!  I'm writing a prototype that  
links documents together based upon similarities.  Obviously the  
first thing I did was use MoreLikeThis.  However, it seems to be  
finding matches based upon words that are too common, in this case  
the words "from" and "can" and seems to be missing matches using the   
terms I would expect (in this case documents about "bikes").

I seems I need a more custom tailored Filter that only passes through  
more less-common words.  Does something like this already exist?

Thanks,

Chad



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 20:30:09 2006
Return-Path: <java-user-return-22532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62501 invoked from network); 7 Aug 2006 20:30:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 20:30:09 -0000
Received: (qmail 32429 invoked by uid 500); 7 Aug 2006 20:30:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32396 invoked by uid 500); 7 Aug 2006 20:30:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32385 invoked by uid 99); 7 Aug 2006 20:30:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 13:30:03 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 13:30:02 -0700
Received: by py-out-1112.google.com with SMTP id s49so212172pyc
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 13:29:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SsXVbx1982WHl/7G/lZBCrTYM8RTou3VZpWPLlt5xC+8PT5nW4JHz3Cn8/ySEoeo1hBIHakKOxWFl5AR6l96Gcv77pUmVckUCpWGIYlKE92fNOyIJDjwKHY8wBH0wrqh8De021L+EAV10JnbJoFHFVjSZ2wspdWBIluxTyNIIaU=
Received: by 10.35.38.17 with SMTP id q17mr12985645pyj;
        Mon, 07 Aug 2006 13:29:42 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 7 Aug 2006 13:29:42 -0700 (PDT)
Message-ID: <359a92830608071329t373d489ai79f92ee412e82f4b@mail.gmail.com>
Date: Mon, 7 Aug 2006 16:29:42 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More like this returning similarities that are too generic
In-Reply-To: <28439FFB-9BAA-4AE4-A287-61D99264FB7F@topiatechnology.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51981_11960375.1154982582262"
References: <28439FFB-9BAA-4AE4-A287-61D99264FB7F@topiatechnology.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_51981_11960375.1154982582262
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I expect that defining "less common" is tricky and doesn't lend itself
to a canned answer <G>. Would it work to create your own list of stop words
(possibly very large) to use for indexing and/or searching? This would
simply exclude the "less common" words (as you define them).
StandardAnalyzer, for instance, can take a File of stop words in one of its
constructors.......

Erick

On 8/7/06, Chad Hardin <chardin@topiatechnology.com> wrote:
>
> hi all,
>
> I'm new to lucene but I'm loving it!  I'm writing a prototype that
> links documents together based upon similarities.  Obviously the
> first thing I did was use MoreLikeThis.  However, it seems to be
> finding matches based upon words that are too common, in this case
> the words "from" and "can" and seems to be missing matches using the
> terms I would expect (in this case documents about "bikes").
>
> I seems I need a more custom tailored Filter that only passes through
> more less-common words.  Does something like this already exist?
>
> Thanks,
>
> Chad
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_51981_11960375.1154982582262--

From java-user-return-22533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 07 22:41:43 2006
Return-Path: <java-user-return-22533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96202 invoked from network); 7 Aug 2006 22:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2006 22:41:43 -0000
Received: (qmail 84265 invoked by uid 500); 7 Aug 2006 22:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84242 invoked by uid 500); 7 Aug 2006 22:41:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84231 invoked by uid 99); 7 Aug 2006 22:41:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:41:36 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cao.yiqun@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 15:41:35 -0700
Received: by nf-out-0910.google.com with SMTP id p48so2476061nfa
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 15:41:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CriCOTIAQ4WIGoxaaXT47x8EFf7Etr4DwYkKss/wgj0pATryxpDgWfPrBnEfJ+RVEfS9W5okOIpGT/1tYOGrNaVJQ6rKIDzP6L67aU0MLi6mwpqgKcAmpcQ+uKutm0YzcAB2tBwIx0Q+8/FU/W1TxvYMnOUlHKzKvFXiauU7fc8=
Received: by 10.78.122.11 with SMTP id u11mr1853462huc;
        Mon, 07 Aug 2006 15:41:14 -0700 (PDT)
Received: by 10.78.147.2 with HTTP; Mon, 7 Aug 2006 15:41:14 -0700 (PDT)
Message-ID: <2236770e0608071541g6cfedf65kd7863cdcb3c5568c@mail.gmail.com>
Date: Mon, 7 Aug 2006 15:41:14 -0700
From: "Yiqun \"Eddie\" Cao" <cao.yiqun@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query syntax problem
In-Reply-To: <200608072050.09322.nicolas.lalevee@anyware-tech.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_765_13570453.1154990474086"
References: <2236770e0608071028g1b13a060t4e00c64b15c014e9@mail.gmail.com>
	 <200608072050.09322.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_765_13570453.1154990474086
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Setting field to Field.Index.UN_TOKENIZED works perfectly. Thanks to all.

Regards,

Eddie

On 8/7/06, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrote:
>
> Le Lundi 07 Ao=FBt 2006 19:28, Yiqun "Eddie" Cao a =E9crit:
> > Hi,
> >
> > We are using lucene in a chemistry database, and we are dealing with
> > special words containing both digits and characters in English
> alphabets,
> > such as PFC-0234. To prevent lucene from cutting the word into two, we
> have
> > replaced all dashes into underscores, so PFC-0234 is stored and indexed
> as
> > PFC_0234 in the lucene index. However, none of them works for searches
> > containing wildcard characters. For example, none of the following
> works:
> > PFC_*, PFC*, PF*, PFC_0*, PFC_02*, but PFC-0234 works. Can anyone tell
> me
> > what is wrong here? We have tried WhitespaceAnalyzer, but it's not
> working
> > either.
>
> For this type of field values, you should index them with the index
> property :
> Field.Index.UN_TOKENIZED.
>
> cheers,
> Nicolas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_765_13570453.1154990474086--

From java-user-return-22534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 01:38:10 2006
Return-Path: <java-user-return-22534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45588 invoked from network); 8 Aug 2006 01:38:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 01:38:09 -0000
Received: (qmail 77605 invoked by uid 500); 8 Aug 2006 01:38:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77573 invoked by uid 500); 8 Aug 2006 01:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77562 invoked by uid 99); 8 Aug 2006 01:38:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 18:38:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.147.114.148] (HELO mx2.topiatechnology.com) (209.147.114.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 18:38:02 -0700
Received: from [192.168.1.215] (heiglot2 [192.168.0.146])
	by mx2.topiatechnology.com (Postfix) with ESMTP id EDB401973E4
	for <java-user@lucene.apache.org>; Mon,  7 Aug 2006 18:37:40 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830608071329t373d489ai79f92ee412e82f4b@mail.gmail.com>
References: <28439FFB-9BAA-4AE4-A287-61D99264FB7F@topiatechnology.com> <359a92830608071329t373d489ai79f92ee412e82f4b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <774107FF-81F9-4FF4-9EB8-9B6995FFEDB4@topiatechnology.com>
Content-Transfer-Encoding: 7bit
From: Chad Hardin <chardin@topiatechnology.com>
Subject: Re: More like this returning similarities that are too generic
Date: Mon, 7 Aug 2006 18:37:38 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you Erick, that was what I anticipated would be necessary.

There's still the issue of the queries from MoreLikeThis not  
returning results for terms I had expected ("bikes").

For example, I have these four very short documents:

"bikes are a handy tool for getting from diffrent locations on the  
earth, Ireally like bikes"
"Bikes can be really fast"
"bikes can be dangerous"
"I like bikes because they are fun"


I expected the query from MoreLikeThis to say that these short  
documents are similar because they all have "Bikes", but it doesn't.

Is there some reason for this to be so?  Perhaps because the  
documents are so short?

I then loaded some large (5K+) documents and I noticed that  
MoreLikeThis's query started to return similar documents, but explain 
() said they were similar because of words like "from" and "can" rather
than the text I expected to be used for similarity in the documents.




Chad



On Aug 7, 2006, at 1:29 PM, Erick Erickson wrote:

> Well, I expect that defining "less common" is tricky and doesn't  
> lend itself
> to a canned answer <G>. Would it work to create your own list of  
> stop words
> (possibly very large) to use for indexing and/or searching? This would
> simply exclude the "less common" words (as you define them).
> StandardAnalyzer, for instance, can take a File of stop words in  
> one of its
> constructors.......
>
> Erick
>
> On 8/7/06, Chad Hardin <chardin@topiatechnology.com> wrote:
>>
>> hi all,
>>
>> I'm new to lucene but I'm loving it!  I'm writing a prototype that
>> links documents together based upon similarities.  Obviously the
>> first thing I did was use MoreLikeThis.  However, it seems to be
>> finding matches based upon words that are too common, in this case
>> the words "from" and "can" and seems to be missing matches using the
>> terms I would expect (in this case documents about "bikes").
>>
>> I seems I need a more custom tailored Filter that only passes through
>> more less-common words.  Does something like this already exist?
>>
>> Thanks,
>>
>> Chad
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 02:01:32 2006
Return-Path: <java-user-return-22535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51633 invoked from network); 8 Aug 2006 02:01:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 02:01:32 -0000
Received: (qmail 94370 invoked by uid 500); 8 Aug 2006 02:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94349 invoked by uid 500); 8 Aug 2006 02:01:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94338 invoked by uid 99); 8 Aug 2006 02:01:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:01:27 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cwho.work@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:01:26 -0700
Received: by nf-out-0910.google.com with SMTP id c29so46396nfb
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 19:01:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=kutl1zb9r3Jcy2VubN9pERF3+45tidrvhA5hrNPGtdBQl/fYrOLa4i85TIg1JkvDRa9jud58/xGpyL3Peg+mz1NhIP0vndSN9ygwnu5i8kHlApM04QDD2u1mX3cLVhZlb/5RQGx3UpLn/BS1xNYrxSSjlC1Y4AlyAK9z7ropqHQ=
Received: by 10.78.193.5 with SMTP id q5mr2585812huf;
        Mon, 07 Aug 2006 19:01:05 -0700 (PDT)
Received: by 10.78.185.17 with HTTP; Mon, 7 Aug 2006 19:01:05 -0700 (PDT)
Message-ID: <6c33f9950608071901y79db838fl69396661efa46eb6@mail.gmail.com>
Date: Tue, 8 Aug 2006 10:01:05 +0800
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Classifieds rotation - weighting Lucene results by previous show frequency?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We are starting to run a small index of classifieds alongside our main
search items. The classifieds are also in a lucene index. We show
classifieds that match the user's search criteria, which means we do a
lucene search on that index and show the top few results. We also keep
track of the number of times each classified is shown.

However, we would like to start some form of classified rotation by
weighting the results (weight down if that particular classified has
been shown regularly in the past day, for example). The classified
show statistics are stored in a database.

Does anyone here have any experience doing this that they can share,
or some idea as to how this can be best implemented with lucene?
Thanks in advance :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 02:31:56 2006
Return-Path: <java-user-return-22536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59420 invoked from network); 8 Aug 2006 02:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 02:31:56 -0000
Received: (qmail 17783 invoked by uid 500); 8 Aug 2006 02:31:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17747 invoked by uid 500); 8 Aug 2006 02:31:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17736 invoked by uid 99); 8 Aug 2006 02:31:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:31:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:31:48 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.7/8.13.7) with ESMTP id k782VQjI017664
	for <java-user@lucene.apache.org>; Tue, 8 Aug 2006 02:31:26 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k782Z4M6101806
	for <java-user@lucene.apache.org>; Tue, 8 Aug 2006 04:35:04 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k782VQKR017815
	for <java-user@lucene.apache.org>; Tue, 8 Aug 2006 04:31:26 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k782VQ21017812
	for <java-user@lucene.apache.org>; Tue, 8 Aug 2006 04:31:26 +0200
In-Reply-To: <6c33f9950608071901y79db838fl69396661efa46eb6@mail.gmail.com>
Subject: Re: Classifieds rotation - weighting Lucene results by previous show
 frequency?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF3862CBFD.41FD8CF4-ON882571C4.000C5ABC-882571C4.000D3539@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 7 Aug 2006 19:24:15 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 08/08/2006 05:35:03
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If the 'small classifieds index' is sufficiently small to be re-indexed
every night, I think this would be a simple solution - just set the
document boosts according to these statistics - i.e. boost more down docs
of classifieds that were shown more yesterday -
http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Document.html#setBoost(float)

- Doron

"Chun Wei Ho" <cwho.work@gmail.com> wrote on 07/08/2006 19:01:05:

> We are starting to run a small index of classifieds alongside our main
> search items. The classifieds are also in a lucene index. We show
> classifieds that match the user's search criteria, which means we do a
> lucene search on that index and show the top few results. We also keep
> track of the number of times each classified is shown.
>
> However, we would like to start some form of classified rotation by
> weighting the results (weight down if that particular classified has
> been shown regularly in the past day, for example). The classified
> show statistics are stored in a database.
>
> Does anyone here have any experience doing this that they can share,
> or some idea as to how this can be best implemented with lucene?
> Thanks in advance :)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 02:37:20 2006
Return-Path: <java-user-return-22537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63516 invoked from network); 8 Aug 2006 02:37:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 02:37:20 -0000
Received: (qmail 24649 invoked by uid 500); 8 Aug 2006 02:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24612 invoked by uid 500); 8 Aug 2006 02:37:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24601 invoked by uid 99); 8 Aug 2006 02:37:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:37:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:37:14 -0700
Received: from [10.65.253.201] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15635C6C@mailer.syr.edu>; Mon, 7 Aug 2006 22:36:53 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <OF3862CBFD.41FD8CF4-ON882571C4.000C5ABC-882571C4.000D3539@il.ibm.com>
References: <OF3862CBFD.41FD8CF4-ON882571C4.000C5ABC-882571C4.000D3539@il.ibm.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <81EF3EE3-0EB5-436B-B6C8-233260DB0FCB@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: Classifieds rotation - weighting Lucene results by previous show frequency?
Date: Mon, 7 Aug 2006 22:36:52 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could also write a custom sorter that does this, I think.

-Grant

On Aug 7, 2006, at 10:24 PM, Doron Cohen wrote:

> If the 'small classifieds index' is sufficiently small to be re- 
> indexed
> every night, I think this would be a simple solution - just set the
> document boosts according to these statistics - i.e. boost more  
> down docs
> of classifieds that were shown more yesterday -
> http://lucene.apache.org/java/docs/api/org/apache/lucene/document/ 
> Document.html#setBoost(float)
>
> - Doron
>
> "Chun Wei Ho" <cwho.work@gmail.com> wrote on 07/08/2006 19:01:05:
>
>> We are starting to run a small index of classifieds alongside our  
>> main
>> search items. The classifieds are also in a lucene index. We show
>> classifieds that match the user's search criteria, which means we  
>> do a
>> lucene search on that index and show the top few results. We also  
>> keep
>> track of the number of times each classified is shown.
>>
>> However, we would like to start some form of classified rotation by
>> weighting the results (weight down if that particular classified has
>> been shown regularly in the past day, for example). The classified
>> show statistics are stored in a database.
>>
>> Does anyone here have any experience doing this that they can share,
>> or some idea as to how this can be best implemented with lucene?
>> Thanks in advance :)
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 02:49:52 2006
Return-Path: <java-user-return-22538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67114 invoked from network); 8 Aug 2006 02:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 02:49:52 -0000
Received: (qmail 33562 invoked by uid 500); 8 Aug 2006 02:49:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33523 invoked by uid 500); 8 Aug 2006 02:49:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33512 invoked by uid 99); 8 Aug 2006 02:49:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:49:46 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 19:49:45 -0700
Received: by ug-out-1314.google.com with SMTP id y2so254975uge
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 19:49:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fiSwQwKY6YdsLS+CFmWy9aqUJWqDU7CMM2bPcZAJ71CAfrpCx4JN340TmVmT+no0vHoc7mIurn6/DSYlJvd6lFawlOiIxD8ztWhKYrCFOGyKQnFaLgzKNl2I6qIUbV9GGVP0jhYzH5iPIdGL7RU17NVVSk05WlR2Gimo2Q21pKs=
Received: by 10.66.240.12 with SMTP id n12mr8969377ugh;
        Mon, 07 Aug 2006 19:49:24 -0700 (PDT)
Received: by 10.67.88.5 with HTTP; Mon, 7 Aug 2006 19:49:23 -0700 (PDT)
Message-ID: <4f2c7c9b0608071949q1c2128bel58076d451b05ba63@mail.gmail.com>
Date: Tue, 8 Aug 2006 10:49:23 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: About the use of HitCollector
In-Reply-To: <f18c9dde0608071246r6e1d281ftde0f653d39a72898@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_709_3821483.1155005363701"
References: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com>
	 <44D71B5F.7050602@uni-hd.de>
	 <4f2c7c9b0608070648g278d6acbid3f9f036e41aa588@mail.gmail.com>
	 <f18c9dde0608071246r6e1d281ftde0f653d39a72898@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_709_3821483.1155005363701
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey,Simon, thanks for your reply
I have an ID Field in the index. For the efficiency of indexing speed, I put
some fields in
a database, because I found the total of fields in a Document will badly
degrade the indexing speed. So for the search, I will first query the
database to get a list of ID, then use the list to check whether the Lucene
seached results should  be returned.
Can you give some suggestion?

Also can  you show me to how you use filter?

2006/8/8, Simon Willnauer <simon.willnauer@googlemail.com>:
>
> Hey Andy,
>
> i don't know how you determinate whether a document has to be
> displayed or not but I use a filter to do such kind of jobs. We have a
> index for a specific website with personalized areas which should be
> searchable for users having corresponding usergroups. That works quiet
> well and you can use the filter cache e.g. cache the filter itself for
> your queries.
>
> regards Simon
>
> On 8/7/06, hu andy <andyhugb@gmail.com> wrote:
> > Martin, Thank you for your reply.
> >
> > But the Lucene API said:
> > This is called in an inner search loop. For good search performance,
> > implementations of this method should not call
> > Searcher.doc(int)<
> file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/search/Searcher.html#doc(int)
> >or
> > IndexReader.document(int)<
> file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/index/IndexReader.html#document(int)
> >on
> > every document number encountered
> >
> > Because I have to check a field in the document to determine whether I
> > should return the document. The total number of documents is about two
> > hundred thousand. So I'm afraid the
> > performance
> >
> >
> > 2006/8/7, Martin Braun <mbraun@uni-hd.de>:
> > >
> > > hi andy,
> > > > How can I  use HitCollector to iterate over every returned document?
> > >
> > > You have to override the function collect for the HitCollector class
> and
> > > then store the retrieved Data in an array or map.
> > >
> > > Here is just a source-code scratch (is = IndexSearcher)
> > >
> > >                is.search(query, null, new HitCollector(){
> > >                                public void collect(int docID, float
> score)
> > >                                    {
> > >                                        Document doc = is.doc(docID);
> > >                                        titles[docID] = doc.get
> ("title");
> > >                                    }
> > >                        });
> > >
> > >
> > > hth,
> > > martin
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_709_3821483.1155005363701--

From java-user-return-22539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 06:06:10 2006
Return-Path: <java-user-return-22539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16241 invoked from network); 8 Aug 2006 06:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 06:06:09 -0000
Received: (qmail 87516 invoked by uid 500); 8 Aug 2006 06:06:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87494 invoked by uid 500); 8 Aug 2006 06:06:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87483 invoked by uid 99); 8 Aug 2006 06:06:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:06:03 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hutchiko@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:05:56 -0700
Received: by py-out-1112.google.com with SMTP id s49so403573pyc
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 23:05:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=eqeqjQ4TaXZum0cEOvfKKRvUi9kh1PD4dTDbBfVUvxFTw9HlE9DcpqnbQSavvsqMPXrfxAdUxXMB0PANPLaJcgKviUmjNlG9sMNR/1fc4FTU08pKUW055spGb12yKNSPo4ul0cz1E0MevW9MQIiInsr957I60pLdmMHDEOX3Rt4=
Received: by 10.35.22.17 with SMTP id z17mr13929235pyi;
        Mon, 07 Aug 2006 23:05:36 -0700 (PDT)
Received: by 10.35.92.1 with HTTP; Mon, 7 Aug 2006 23:05:36 -0700 (PDT)
Message-ID: <c450d5120608072305t863377ej2ce345261f3c9848@mail.gmail.com>
Date: Tue, 8 Aug 2006 16:05:36 +1000
From: hutchiko@gmail.com
To: java-user@lucene.apache.org
Subject: Poor performance "race condition" in FieldSortedHitQueue
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey all, just want to run an issue that I've recently identified while
looking at some performance issues we are having with our larger
indexes past you all.

Basically what we are seeing is that when there are a number of
concurrent searches being executed over a new IndexSearcher, the quite
expensive ScoreDocComparator generation that is done in the
FieldSortedHitQueue#getCachedComparator method ends up executing
multiple times rather the ideal case of once. This issue does not
effect the correctness of the searches only performance.

For my relatively weak understanding of the code the core of this
issue appears to lie with the FieldCacheImpl#getStringIndex method
which allows multiple concurrent requests to each generate their own
StringIndex rather than allowing the first request to do the
generation and then blocking subsequent requests until the first
request has finished.

Is this a know problem? Should I raise this as an issue or is this
"expected" behaviour. A solution would naturally require more
synchronization than is currently used but nothing particularly
complex.

Thanks,

Oliver

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 06:23:58 2006
Return-Path: <java-user-return-22540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20099 invoked from network); 8 Aug 2006 06:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 06:23:58 -0000
Received: (qmail 6343 invoked by uid 500); 8 Aug 2006 06:23:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6320 invoked by uid 500); 8 Aug 2006 06:23:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6309 invoked by uid 99); 8 Aug 2006 06:23:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:23:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.76.63.210] (HELO mailserver.exis.com.gr) (80.76.63.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:23:50 -0700
Received: from [192.168.2.32] (helo=clyde.thoukydides.gr)
	by rottweiler.exis.com.gr with esmtp (Exim 4.43)
	id 1GAKzs-0000Xb-I9
	for java-user@lucene.apache.org; Tue, 08 Aug 2006 09:23:26 +0300
Received: from mario.exis.com.gr ([192.168.1.4])
	by clyde.thoukydides.gr with esmtpa (Exim 4.43)
	id 1GAL5n-0001ih-Rv
	for java-user@lucene.apache.org; Tue, 08 Aug 2006 09:29:31 +0300
Message-ID: <44D82DDB.1040300@exis.com.gr>
Date: Tue, 08 Aug 2006 09:23:23 +0300
From: Marios Skounakis <mscoon@exis.com.gr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Stemmer Implementation Strategy - feedback?
References: <20060804172429.C127F10FB00C@asf.osuosl.org> <0E730735-87EB-420D-8C73-171E63A72CAD@syr.edu>
In-Reply-To: <0E730735-87EB-420D-8C73-171E63A72CAD@syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: -1.4 (-)
X-Spam-Report: 	-1.4 ALL_TRUSTED            Passed through trusted hosts only via SMTP
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Grant,

Thanks for the interesting reply.

Grant Ingersoll wrote:
> Hey Marios,
>
> It sounds like you have a reasonable plan and you have thought through 
> the ideas.  And the answer to many of your questions below is "it 
> depends".
>
> Do you have enough memory to hold the whole lexicon in memory?  Is 
> this lexicon going to grow significantly over time? I have, in the 
> past (for other lexicon based resources), done similar tricks to what 
> Lucene does with the term dictionary if things get too large.  Namely, 
> store the terms in lexicographic order and load every X number of 
> terms in memory (X is 128 or 64) as an index into the file.  This 
> causes a little more searching than if everything is in memory, but 
> you don't have a choice if the lexicon is really large.
Well, for my own purposes I can probably arrange to have the whole 
lexicon in memory. However, I directed the question to the lucene list 
in order to find out what people think about the general case - is the 
stemmer class allowed to use, say, 1 MB of memory?
> Is your lexicon approach going to be complete?  I don't know Greek, so 
> I don't know if you have a fixed set of roots.  Also, I don't know if 
> Greek has a notion of light stemming versus more aggressive stemming.  
> In Arabic, we found we had better results by doing light stemming (as 
> have other researchers.)
I suspect a literature search will give me a lot of information on light 
versus aggressive stemming, but I'll go ahead and ask anyway :). Can you 
give an example (not in Arabic please, unless you also provide the 
English translations) of a case where light stemming is preferable to 
more aggressive stemming? This direction sounds interesting because it 
may be pretty easy to implement rule-based light stemming for Greek. I 
had actually considered it as a solution and estimated that it would 
give you 80-90% of what a full stemmer would give you - but I had never 
thought it could actually give you *better* results, like you say.
>
> It appears to me, based on your research, you don't have much other 
> choice.  As for performance, you approach is much faster than your 
> alternative :-) (i.e. doing it by hand.)  Writing the stemmer seems 
> pretty easy, so I would go for it and then test it to see if it meets 
> your needs and, then, if you can, share it with others here.
>
> -Grant
>
> On Aug 4, 2006, at 1:29 PM, Marios Skounakis wrote:
>
>>
>>
>>
>> Hi all,
>>
>> The contrib section of Lucene contains a Greek Analyzer, which 
>> however only does
>> some letter normalization (capitals to lowercase, accent removal) and 
>> basic stop
>> word removal.
>>
>> I am interested in creating a Stemmer for the Greek Language to use 
>> with Lucene
>> (i.e. implement it as an analyzer). The Greek Language is quite 
>> different from
>> English (and most latin-related languages) in that it is highly 
>> inflectional(?) -
>> meaning that there is a large number of suffixes, many of which are 
>> not produced
>> in a very straightforward way.
>>
>> A quick internet search did not return much information - a couple of
>> non-publicly available papers and a Master's Thesis with a javascript
>> implementation which, however, seems to be somewhat lacking in 
>> precision (i.e.
>> produces erroneous stems). A disappointing picture, admittedly, when 
>> for the
>> english language it is so easy to find a public domain high quality 
>> stemmer like
>> Porter's...
>>
>> Anyway, to cut a long story short, I had the following idea in order 
>> to counter
>> the problem of the multiple suffixes and the high inflectional nature 
>> of the
>> language: implement the stemmer using a combination of a lexicon of 
>> stems (of the
>> most common words) and a list of all possible suffixes. The algorithm 
>> for finding
>> the stem of a word would be something like:
>>
>> - for each suffix in the list of suffixes
>>    - remove the suffix from the word (if possible), producing a 
>> candindate stem
>>    - search the lexicon of stems for the candidate stem
>>        - if the search is succesful return the candidate stem
>>        - if the search is unsuccesful go to next suffix
>> - if the suffixes are exhausted and no match is found, the word 
>> cannot be stemmed
>> (return the original word)
>>
>> [By the way the algorithm is inspired by a paper which descripbes the
>> implementation of a lemmatizer in a similar way - citeseer link:
>> http://citeseer.ist.psu.edu/694579.html]
>>
>> The question is:
>>
>> Is such a strategy that depends on a leixcon of predefined stems for 
>> implementing
>> a stemmer considered a major drawback? In theory it can be (compared 
>> to an
>> algorith that works purely with rules, like Porter's) a drawback, but in
>> practice, with a lexicon of a few thousand stems, the stemmer could 
>> achieve
>> pretty good recall (and good precision too).
>>
>> Other issues to comment on are the lexicon size (which will have to 
>> be embedded
>> in or accompany the stemmer), memory issues in running the stemmer 
>> (keep the
>> lexicon in memory?), and performance issues (multiple lookups in the 
>> lexicon
>> could make it much slower than a rule based stemmer?). In general, 
>> any feedback
>> would be appreciated.
>>
>> Thanks in advance,
>>
>> Marios Skounakis
>> ---- Msg sent via eXis webmail
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
> Voice: 315-443-5484
> Skype: grant_ingersoll
> Fax: 315-443-6886
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 06:40:56 2006
Return-Path: <java-user-return-22541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23038 invoked from network); 8 Aug 2006 06:40:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 06:40:56 -0000
Received: (qmail 20757 invoked by uid 500); 8 Aug 2006 06:40:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20730 invoked by uid 500); 8 Aug 2006 06:40:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20719 invoked by uid 99); 8 Aug 2006 06:40:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:40:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:40:49 -0700
Received: from [67.189.26.9] (helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1GALGi-0002ha-HQ
	for java-user@lucene.apache.org; Mon, 07 Aug 2006 23:40:48 -0700
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44D82DDB.1040300@exis.com.gr>
References: <20060804172429.C127F10FB00C@asf.osuosl.org> <0E730735-87EB-420D-8C73-171E63A72CAD@syr.edu> <44D82DDB.1040300@exis.com.gr>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BDEA931C-91B2-489A-BC68-77D9CEFF244C@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: Stemmer Implementation Strategy - feedback?
Date: Mon, 7 Aug 2006 23:40:25 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 7, 2006, at 11:23 PM, Marios Skounakis wrote:
>  I directed the question to the lucene list in order to find out  
> what people think about the general case

Martin Porter touches on some of the pros and cons of a dictionary- 
based approach to stemming at <http://www.snowball.tartarus.org/texts/ 
introduction.html>.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 06:57:20 2006
Return-Path: <java-user-return-22542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26934 invoked from network); 8 Aug 2006 06:57:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 06:57:19 -0000
Received: (qmail 38416 invoked by uid 500); 8 Aug 2006 06:57:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38384 invoked by uid 500); 8 Aug 2006 06:57:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38371 invoked by uid 99); 8 Aug 2006 06:57:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:57:14 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mathias.lux@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Aug 2006 23:57:13 -0700
Received: by nf-out-0910.google.com with SMTP id p48so124748nfa
        for <java-user@lucene.apache.org>; Mon, 07 Aug 2006 23:56:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:sender;
        b=C0HH80MSgRjB/Plwyd7OC0upoq2AqJKQMfSWxEeD4TdcBpbIUOzPo+wIQ1AlX7XLsGhajTU7MOo8YAUIERGjrkcjQM6lxftzHXmGu0b2rjagU92M51kNlRkz/lKvU43+4vll601TEX2i7FZbxheqxVV3DZqjI5MWjmjMJz9pK/0=
Received: by 10.49.55.13 with SMTP id h13mr351051nfk;
        Mon, 07 Aug 2006 23:56:51 -0700 (PDT)
Received: from ?143.205.122.226? ( [143.205.122.226])
        by mx.gmail.com with ESMTP id l38sm425548nfc.2006.08.07.23.56.51;
        Mon, 07 Aug 2006 23:56:51 -0700 (PDT)
Message-ID: <44D835B3.1050409@juggle.at>
Date: Tue, 08 Aug 2006 08:56:51 +0200
From: Mathias Lux <mathias@juggle.at>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Linear search using reader vs. scorer implementation
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Sender: Mathias Lux <mathias.lux@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

I'm working in my spare time on Lire, a content based image retrieval
library (searching for similar looking images in other words, see
http://www.semanticmetadata.net/lire) based on Lucene.

As the cbir features are medium sized integer vectors I put them into
fields, and read them with the IndexReader within a linear search
through the whole index for matching: As soon as a query is issued
(which is also an integer vector) I go through every doc, get the
corresponding feature vector and calculate the distance (L1 or L2,
depending on the type of feature).

Do you have any idea if and how I could implement a linear search (L1/L2
distance on integer vectors) using scorers, so that filters and other
features can be used?

regards,
  Mathias

ps. Yes I know that this is in general easy to implement within a
database, which I have done for oracle, mysql and derby .... but people
do want the lucene implementation and believe it or not: Lucene is super
 fast for linear search -> THX to the lucene team ;)


-- 
    '   '    '
      '   '    '     Mathias Lux
 o/          '  \o   mathias@juggle.at
 /-'            -\   skype://dermotte, icq # 1988617
/\               /\  http://www.SemanticMetadata.net

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 07:46:25 2006
Return-Path: <java-user-return-22543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50864 invoked from network); 8 Aug 2006 07:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 07:46:24 -0000
Received: (qmail 168 invoked by uid 500); 8 Aug 2006 07:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 132 invoked by uid 500); 8 Aug 2006 07:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 121 invoked by uid 99); 8 Aug 2006 07:46:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 00:46:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 00:46:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3B8405B764; Tue,  8 Aug 2006 00:45:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 31EC27F403
	for <java-user@lucene.apache.org>; Tue,  8 Aug 2006 00:45:58 -0700 (PDT)
Date: Tue, 8 Aug 2006 00:45:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: More like this returning similarities that are too generic
In-Reply-To: <774107FF-81F9-4FF4-9EB8-9B6995FFEDB4@topiatechnology.com>
Message-ID: <Pine.LNX.4.58.0608080031540.672@hal.rescomp.berkeley.edu>
References: <28439FFB-9BAA-4AE4-A287-61D99264FB7F@topiatechnology.com>
 <359a92830608071329t373d489ai79f92ee412e82f4b@mail.gmail.com>
 <774107FF-81F9-4FF4-9EB8-9B6995FFEDB4@topiatechnology.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I've never used MoreLikeThis myself, but based on how i know it works,
your problem probably has more to do with the size of your test corpus and
th frequency of the words in your docs then by the size of the docs
themselves.

: There's still the issue of the queries from MoreLikeThis not
: returning results for terms I had expected ("bikes").

A quick glance at the source for MoreLikeThis turns up these lines...

    /**
     * Ignore terms with less than this frequency in the source doc.
	 * @see #getMinTermFreq
	 * @see #setMinTermFreq
     */
    public static final int DEFAULT_MIN_TERM_FREQ = 2;

    /**
     * Ignore words which do not occur in at least this many docs.
	 * @see #getMinDocFreq
	 * @see #setMinDocFreq
     */
    public static final int DEFALT_MIN_DOC_FREQ = 5;

...which i'm guessing mean that unless a word appears in a doc at least
twice, it's ignored for that doc, and unless a word appears in at least 5
docs, it's ignored completely.  that could easily explain your bike
examples.

: I then loaded some large (5K+) documents and I noticed that
: MoreLikeThis's query started to return similar documents, but explain
: () said they were similar because of words like "from" and "can" rather
: than the text I expected to be used for similarity in the documents.

Other then a stop words list, one other thing you might consider is
the notion of a "maxDocFreq" option you could set to ignore words that
appear in lots of documents -- or a maxDocFreqRatio that would take a
percentage of the total number of docs ... it should be fairly
straightforward to add.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 10:13:02 2006
Return-Path: <java-user-return-22544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23308 invoked from network); 8 Aug 2006 10:13:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 10:13:01 -0000
Received: (qmail 22440 invoked by uid 500); 8 Aug 2006 10:12:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22183 invoked by uid 500); 8 Aug 2006 10:12:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22172 invoked by uid 99); 8 Aug 2006 10:12:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 03:12:55 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.176.253] (HELO web25915.mail.ukl.yahoo.com) (217.146.176.253)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Aug 2006 03:12:52 -0700
Received: (qmail 16869 invoked by uid 60001); 8 Aug 2006 10:12:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=NIPwY43Zk4x0BGeh2bqZvS1rIpIVkQ00W9q1+6PoZv9WGoOTwB0i00rN2Pj4a6NumWk7W9BRSxmDvDG/3USYFP2YmoA6BrsvZ1WWRrCnIL6jlTPBYq2kfKVGo25DCP/S9mSkAzauK0KKekNK9tEcjA8/gviidoufVQ5fI4Er7dw=  ;
Message-ID: <20060808101230.16867.qmail@web25915.mail.ukl.yahoo.com>
Received: from [84.131.247.34] by web25915.mail.ukl.yahoo.com via HTTP; Tue, 08 Aug 2006 10:12:30 GMT
Date: Tue, 8 Aug 2006 10:12:30 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Reply-To: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Stemmer Implementation Strategy - feedback?
To: java-user@lucene.apache.org
In-Reply-To: <0E730735-87EB-420D-8C73-171E63A72CAD@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would suggest you to have a look at Egothor stemmer (http://www.egothor.org/book/bk01ch01s06.html), can be trained rather easily (if your only use of "roots" is for searching)

I have only heard of it as a good thing, never tried it


On Aug 4, 2006, at 1:29 PM, Marios Skounakis wrote:

>
>
>
> Hi all,
>
> The contrib section of Lucene contains a Greek Analyzer, which  
> however only does
> some letter normalization (capitals to lowercase, accent removal)  
> and basic stop
> word removal.
>
> I am interested in creating a Stemmer for the Greek Language to use  
> with Lucene
> (i.e. implement it as an analyzer). The Greek Language is quite  
> different from
> English (and most latin-related languages) in that it is highly  
> inflectional(?) -
> meaning that there is a large number of suffixes, many of which are  
> not produced
> in a very straightforward way.
>
> A quick internet search did not return much information - a couple of
> non-publicly available papers and a Master's Thesis with a javascript
> implementation which, however, seems to be somewhat lacking in  
> precision (i.e.
> produces erroneous stems). A disappointing picture, admittedly,  
> when for the
> english language it is so easy to find a public domain high quality  
> stemmer like
> Porter's...
>
> Anyway, to cut a long story short, I had the following idea in  
> order to counter
> the problem of the multiple suffixes and the high inflectional  
> nature of the
> language: implement the stemmer using a combination of a lexicon of  
> stems (of the
> most common words) and a list of all possible suffixes. The  
> algorithm for finding
> the stem of a word would be something like:
>
> - for each suffix in the list of suffixes
>    - remove the suffix from the word (if possible), producing a  
> candindate stem
>    - search the lexicon of stems for the candidate stem
>        - if the search is succesful return the candidate stem
>        - if the search is unsuccesful go to next suffix
> - if the suffixes are exhausted and no match is found, the word  
> cannot be stemmed
> (return the original word)
>
> [By the way the algorithm is inspired by a paper which descripbes the
> implementation of a lemmatizer in a similar way - citeseer link:
> http://citeseer.ist.psu.edu/694579.html]
>
> The question is:
>
> Is such a strategy that depends on a leixcon of predefined stems  
> for implementing
> a stemmer considered a major drawback? In theory it can be  
> (compared to an
> algorith that works purely with rules, like Porter's) a drawback,  
> but in
> practice, with a lexicon of a few thousand stems, the stemmer could  
> achieve
> pretty good recall (and good precision too).
>
> Other issues to comment on are the lexicon size (which will have to  
> be embedded
> in or accompany the stemmer), memory issues in running the stemmer  
> (keep the
> lexicon in memory?), and performance issues (multiple lookups in  
> the lexicon
> could make it much slower than a rule based stemmer?). In general,  
> any feedback
> would be appreciated.
>
> Thanks in advance,
>
> Marios Skounakis
> ---- Msg sent via eXis webmail
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 10:16:12 2006
Return-Path: <java-user-return-22545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25027 invoked from network); 8 Aug 2006 10:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 10:16:11 -0000
Received: (qmail 30052 invoked by uid 500); 8 Aug 2006 10:15:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30024 invoked by uid 500); 8 Aug 2006 10:15:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29996 invoked by uid 99); 8 Aug 2006 10:15:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 03:15:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 03:15:54 -0700
Received: by ug-out-1314.google.com with SMTP id y2so336278uge
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 03:15:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=k/btvi7TbMIZlDbJ76y82xCPJllh58SL+4MBhFM2wOhGFPR4Pc/LcgTu0BZ4cbFJM90XOI+F6laHWI3EHm2tybj5XHCGPSXvmjtMOeqfZ5jzD5MRCunoYs2iiyBMZAm4K03tZr0zQ0Ansq7wtumCwKBGtBXs480o/VNn0z8Oy3s=
Received: by 10.66.240.12 with SMTP id n12mr9354849ugh;
        Tue, 08 Aug 2006 03:15:32 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Tue, 8 Aug 2006 03:15:32 -0700 (PDT)
Message-ID: <f18c9dde0608080315xbf92ccbq9a5109e42d2bb171@mail.gmail.com>
Date: Tue, 8 Aug 2006 12:15:32 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: "hu andy" <andyhugb@gmail.com>, java-user@lucene.apache.org
Subject: Re: About the use of HitCollector
In-Reply-To: <4f2c7c9b0608071949q1c2128bel58076d451b05ba63@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com>
	 <44D71B5F.7050602@uni-hd.de>
	 <4f2c7c9b0608070648g278d6acbid3f9f036e41aa588@mail.gmail.com>
	 <f18c9dde0608071246r6e1d281ftde0f653d39a72898@mail.gmail.com>
	 <4f2c7c9b0608071949q1c2128bel58076d451b05ba63@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Andy,

It would be interesting how many ids you include into your query. I do
have just a couple of usergroups for that.
I create a BooleanQuery
BooleanQuery q = new BooleanQuery();

  q.add(new BooleanClause(new TermQuery(new
Term("idfield","id")),BooleanClause.Occur.MUST));

  QueryFilter filter = new QueryFilter(q);
  searcher.search(yourActualQuery,filter);

you can put your created filters into a HashSet or event better in a
weak hashset to cache the queryfilter and reuse them. The hash value
of a query filter depends on the acutal query so that should be fine.
Just have a look at QueryFilter#hashCode().

if you got a large set of ids take care on BooleanQuery.setMaxClauseCount()
You can also keep your filter if you close your indexwriter and
release a new indexsearcher as the queryfilter caches the reader
instance internally.

best regards simon

On 8/8/06, hu andy <andyhugb@gmail.com> wrote:
>
> Hey,Simon, thanks for your reply
> I have an ID Field in the index. For the efficiency of indexing speed, I put
> some fields in
> a database, because I found the total of fields in a Document will badly
> degrade the indexing speed. So for the search, I will first query the
> database to get a list of ID, then use the list to check whether the Lucene
> seached results should  be returned.
> Can you give some suggestion?
>
> Also can  you show me to how you use filter?
>
> 2006/8/8, Simon Willnauer <simon.willnauer@googlemail.com>:
> >
> Hey Andy,
>
> i don't know how you determinate whether a document has to be
> displayed or not but I use a filter to do such kind of jobs. We have a
> index for a specific website with personalized areas which should be
> searchable for users having corresponding usergroups. That works quiet
> well and you can use the filter cache e.g. cache the filter itself for
>  your queries.
>
> regards Simon
>
> On 8/7/06, hu andy <andyhugb@gmail.com> wrote:
> > Martin, Thank you for your reply.
> >
> > But the Lucene API said:
>  > This is called in an inner search loop. For good search performance,
> > implementations of this method should not call
> > Searcher.doc(int)<
> file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/search/Searcher.html#doc(int)>or
> > IndexReader.document(int)<
> file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/index/IndexReader.html#document(int)>on
> > every document number encountered
> >
> > Because I have to check a field in the document to determine whether I
> > should return the document. The total number of documents is about two
> > hundred thousand. So I'm afraid the
> > performance
> >
> >
> > 2006/8/7, Martin Braun < mbraun@uni-hd.de>:
> > >
> > > hi andy,
> > > > How can I  use HitCollector to iterate over every returned document?
> > >
> > > You have to override the function collect for the HitCollector class and
> > > then store the retrieved Data in an array or map.
> > >
> > > Here is just a source-code scratch (is = IndexSearcher)
> > >
> > >                is.search(query, null, new HitCollector(){
> > >                                public void collect(int
> docID, float score)
> > >                                    {
> > >                                        Document doc =
> is.doc(docID);
>  > >                                        titles[docID] =
> doc.get("title");
> > >                                    }
> > >                        });
> > >
> > >
> > > hth,
> > > martin
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
> ---------------------------------------------------------------------
>
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 10:19:21 2006
Return-Path: <java-user-return-22546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27051 invoked from network); 8 Aug 2006 10:19:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 10:19:21 -0000
Received: (qmail 42573 invoked by uid 500); 8 Aug 2006 10:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42216 invoked by uid 500); 8 Aug 2006 10:19:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42205 invoked by uid 99); 8 Aug 2006 10:19:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 03:19:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 03:19:12 -0700
Received: by ug-out-1314.google.com with SMTP id y2so336919uge
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 03:18:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=iSr0/UqhhC/+mNfaczn2cZHyYW1EnHXME/T1ab/v6BjvJW5Pxu5Nhxx3pVBW3mZh6EkkCtoL1Al6OWxRPTp6xWYNEubt3aPGNVkB+Sc2R7Qo86IBGrbuZG4oeUHyMpOiLgE9wEAL2uJ6/AkqC65OjQqtRjAXactonAv6uoHoyG0=
Received: by 10.67.100.12 with SMTP id c12mr9300808ugm;
        Tue, 08 Aug 2006 03:18:50 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Tue, 8 Aug 2006 03:18:45 -0700 (PDT)
Message-ID: <f18c9dde0608080318s301340b0gf42335086c19132f@mail.gmail.com>
Date: Tue, 8 Aug 2006 12:18:45 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: "hu andy" <andyhugb@gmail.com>, java-user@lucene.apache.org
Subject: Re: About the use of HitCollector
In-Reply-To: <f18c9dde0608080315xbf92ccbq9a5109e42d2bb171@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com>
	 <44D71B5F.7050602@uni-hd.de>
	 <4f2c7c9b0608070648g278d6acbid3f9f036e41aa588@mail.gmail.com>
	 <f18c9dde0608071246r6e1d281ftde0f653d39a72898@mail.gmail.com>
	 <4f2c7c9b0608071949q1c2128bel58076d451b05ba63@mail.gmail.com>
	 <f18c9dde0608080315xbf92ccbq9a5109e42d2bb171@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

One thing is a bit confusing...
On 8/8/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> Hey Andy,
>
> It would be interesting how many ids you include into your query. I do
> have just a couple of usergroups for that.
> I create a BooleanQuery
> BooleanQuery q = new BooleanQuery();
>
>   q.add(new BooleanClause(new TermQuery(new
> Term("idfield","id")),BooleanClause.Occur.MUST));
if you have just one id in your id field the occur value should be
"SHOULD" as we have multiple usergroups in the field. :) Otherwise you
won't get a single hit.

regards simon
>
>   QueryFilter filter = new QueryFilter(q);
>   searcher.search(yourActualQuery,filter);
>
> you can put your created filters into a HashSet or event better in a
> weak hashset to cache the queryfilter and reuse them. The hash value
> of a query filter depends on the acutal query so that should be fine.
> Just have a look at QueryFilter#hashCode().
>
> if you got a large set of ids take care on BooleanQuery.setMaxClauseCount()
> You can also keep your filter if you close your indexwriter and
> release a new indexsearcher as the queryfilter caches the reader
> instance internally.
>
> best regards simon
>
> On 8/8/06, hu andy <andyhugb@gmail.com> wrote:
> >
> > Hey,Simon, thanks for your reply
> > I have an ID Field in the index. For the efficiency of indexing speed, I put
> > some fields in
> > a database, because I found the total of fields in a Document will badly
> > degrade the indexing speed. So for the search, I will first query the
> > database to get a list of ID, then use the list to check whether the Lucene
> > seached results should  be returned.
> > Can you give some suggestion?
> >
> > Also can  you show me to how you use filter?
> >
> > 2006/8/8, Simon Willnauer <simon.willnauer@googlemail.com>:
> > >
> > Hey Andy,
> >
> > i don't know how you determinate whether a document has to be
> > displayed or not but I use a filter to do such kind of jobs. We have a
> > index for a specific website with personalized areas which should be
> > searchable for users having corresponding usergroups. That works quiet
> > well and you can use the filter cache e.g. cache the filter itself for
> >  your queries.
> >
> > regards Simon
> >
> > On 8/7/06, hu andy <andyhugb@gmail.com> wrote:
> > > Martin, Thank you for your reply.
> > >
> > > But the Lucene API said:
> >  > This is called in an inner search loop. For good search performance,
> > > implementations of this method should not call
> > > Searcher.doc(int)<
> > file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/search/Searcher.html#doc(int)>or
> > > IndexReader.document(int)<
> > file:///E:/java/IR%20Library/lucene-1.9.1/lucene-1.9.1/docs/api/org/apache/lucene/index/IndexReader.html#document(int)>on
> > > every document number encountered
> > >
> > > Because I have to check a field in the document to determine whether I
> > > should return the document. The total number of documents is about two
> > > hundred thousand. So I'm afraid the
> > > performance
> > >
> > >
> > > 2006/8/7, Martin Braun < mbraun@uni-hd.de>:
> > > >
> > > > hi andy,
> > > > > How can I  use HitCollector to iterate over every returned document?
> > > >
> > > > You have to override the function collect for the HitCollector class and
> > > > then store the retrieved Data in an array or map.
> > > >
> > > > Here is just a source-code scratch (is = IndexSearcher)
> > > >
> > > >                is.search(query, null, new HitCollector(){
> > > >                                public void collect(int
> > docID, float score)
> > > >                                    {
> > > >                                        Document doc =
> > is.doc(docID);
> >  > >                                        titles[docID] =
> > doc.get("title");
> > > >                                    }
> > > >                        });
> > > >
> > > >
> > > > hth,
> > > > martin
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> >
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 11:31:16 2006
Return-Path: <java-user-return-22547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67118 invoked from network); 8 Aug 2006 11:31:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 11:31:15 -0000
Received: (qmail 57400 invoked by uid 500); 8 Aug 2006 11:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57088 invoked by uid 500); 8 Aug 2006 11:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57077 invoked by uid 99); 8 Aug 2006 11:31:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 04:31:09 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 04:31:07 -0700
Received: (qmail 26389 invoked by uid 509); 8 Aug 2006 13:30:41 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.098886 secs); 08 Aug 2006 11:30:41 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.098886 secs Process 26383)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 8 Aug 2006 13:30:41 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6BADE.1426F1E8"
Subject: Lucene hits.length()
Date: Tue, 8 Aug 2006 13:30:40 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C021E4FB2@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene hits.length()
Thread-Index: Aca63hPcWmRFrroNSqCcBMkAHKgf+A==
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6BADE.1426F1E8
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have noticed some strange behavior when searching my lucene index.

=20

I'm adding 500.000 docs to an index.

=20

MergeFactor =3D 10

MinMerge =3D 5000

=20

When 49999 have been added ( just before the first 10 * 5000 merge ) the
hits.length() is reporting around 1000 hits for a keyword (which by the
way is around the same count as with 5000 docs added). After the 10*5000
merge the hits.length() returns around 8000 hits, which seems to be a
lot more reasonable. Since I'm adding content in date order ( oldest
first ) I have also tried to sort the hits (newest date first) and
display the top 10 hits.

=20

According to that output it seems that the documents are added
correctly.

=20

I'm using a multisearcher on top of a RAMDir and an FSDir. Using
Lucene1.4.3

=20

Anybody that has any idea about why the hit count is so misleading?

=20

/

Regards

Marcus

=20

=20


------_=_NextPart_001_01C6BADE.1426F1E8--

From java-user-return-22548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 15:10:46 2006
Return-Path: <java-user-return-22548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66897 invoked from network); 8 Aug 2006 15:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 15:10:46 -0000
Received: (qmail 69478 invoked by uid 500); 8 Aug 2006 15:10:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69439 invoked by uid 500); 8 Aug 2006 15:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69427 invoked by uid 99); 8 Aug 2006 15:10:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 08:10:35 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of leandro.saad@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 08:10:34 -0700
Received: by wx-out-0506.google.com with SMTP id s15so298948wxc
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 08:10:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=nytqIuXQ0/y3/Tjt5pj5wm4Z5PaWrf7IkTodfC1hWr9GRTWddHPysb3tAzecCgov09wVFUfFOvT24nRtdwhoCXjL+VBNyDIyJt7DWQitQZojuuQKPfUCKhNhhiO8QSiufrcoajwTMu+59D08Y5MLhdmgzNxDrxhUgzn/Cl6fHXA=
Received: by 10.78.166.7 with SMTP id o7mr2814260hue;
        Tue, 08 Aug 2006 08:10:13 -0700 (PDT)
Received: by 10.78.68.11 with HTTP; Tue, 8 Aug 2006 08:10:12 -0700 (PDT)
Message-ID: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>
Date: Tue, 8 Aug 2006 12:10:12 -0300
From: "Leandro Saad" <leandro.saad@gmail.com>
To: java-user@lucene.apache.org
Subject: Multiple lock files
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10092_24808921.1155049812975"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10092_24808921.1155049812975
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all.

How do I remove lucene locks (startup) if there are multiple applications
using lucene on the same box and all use the same lock dir?

-- 
Leandro Rodrigo Saad Cruz
CTO - InterBusiness Technologies
db.apache.org/ojb
guara-framework.sf.net
xingu.sf.net

------=_Part_10092_24808921.1155049812975--

From java-user-return-22549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 15:32:08 2006
Return-Path: <java-user-return-22549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78372 invoked from network); 8 Aug 2006 15:32:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 15:32:08 -0000
Received: (qmail 57780 invoked by uid 500); 8 Aug 2006 15:31:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57733 invoked by uid 500); 8 Aug 2006 15:31:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57569 invoked by uid 99); 8 Aug 2006 15:31:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 08:31:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 08:31:50 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Tue, 08 Aug 2006 11:31:29 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4f2c7c9b0608070648g278d6acbid3f9f036e41aa588@mail.gmail.com>
References: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com> <44D71B5F.7050602@uni-hd.de> <4f2c7c9b0608070648g278d6acbid3f9f036e41aa588@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7A3F5748-BC4E-45C2-B01D-F7419BE6DA2B@genome.chop.edu>
Content-Transfer-Encoding: 7bit
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Re: About the use of HitCollector
Date: Tue, 8 Aug 2006 11:31:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Andy,

If you have enough RAM, try using FieldCache:

String[] fieldYouWant = FieldCache.DEFAULT.getStrings 
(searcher.getIndexReader(), "fieldYouWant");
searcher.search(query, new HitCollector(){
	public void collect(int doc, float score){
		doWhatYouWant(fieldYouWant[doc]);
	}
}

If you need all results, this is probably the fastest method.   
However, this is assuming you have some way of storing the  
fieldYouWant array.  For all indexes, especially those containing  
many documents, it is a good idea to store the fieldYouWant array,  
since creating this array creates serious overhead.

Best,
Ryan

On Aug 7, 2006, at 9:48 AM, hu andy wrote:

> Martin, Thank you for your reply.
>
> But the Lucene API said:
> This is called in an inner search loop. For good search performance,
> implementations of this method should not call
> Searcher.doc(int)<file:///E:/java/IR%20Library/lucene-1.9.1/ 
> lucene-1.9.1/docs/api/org/apache/lucene/search/Searcher.html#doc 
> (int)>or
> IndexReader.document(int)<file:///E:/java/IR%20Library/lucene-1.9.1/ 
> lucene-1.9.1/docs/api/org/apache/lucene/index/ 
> IndexReader.html#document(int)>on
> every document number encountered
>
> Because I have to check a field in the document to determine whether I
> should return the document. The total number of documents is about two
> hundred thousand. So I'm afraid the
> performance
>
>
> 2006/8/7, Martin Braun <mbraun@uni-hd.de>:
>>
>> hi andy,
>> > How can I  use HitCollector to iterate over every returned  
>> document?
>>
>> You have to override the function collect for the HitCollector  
>> class and
>> then store the retrieved Data in an array or map.
>>
>> Here is just a source-code scratch (is = IndexSearcher)
>>
>>                is.search(query, null, new HitCollector(){
>>                                public void collect(int docID,  
>> float score)
>>                                    {
>>                                        Document doc = is.doc(docID);
>>                                        titles[docID] = doc.get 
>> ("title");
>>                                    }
>>                        });
>>
>>
>> hth,
>> martin
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 15:39:18 2006
Return-Path: <java-user-return-22550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82772 invoked from network); 8 Aug 2006 15:39:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 15:39:17 -0000
Received: (qmail 87023 invoked by uid 500); 8 Aug 2006 15:39:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86388 invoked by uid 500); 8 Aug 2006 15:39:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86377 invoked by uid 99); 8 Aug 2006 15:39:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 08:39:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 08:39:10 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 0B051D94A76
	for <java-user@lucene.apache.org>; Tue,  8 Aug 2006 11:38:49 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Tue, 08 Aug 2006 11:38:49 -0400
X-Sasl-enc: I/EH01Yx1XKCVBtqRAKwJ5QdexTaZde0JkokO19XQD/h 1155051529
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 3A10B6857
	for <java-user@lucene.apache.org>; Tue,  8 Aug 2006 11:38:49 -0400 (EDT)
Message-ID: <44D8B007.9050305@mikemccandless.com>
Date: Tue, 08 Aug 2006 11:38:47 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiple lock files
References: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>
In-Reply-To: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> How do I remove lucene locks (startup) if there are multiple applications
> using lucene on the same box and all use the same lock dir?

The lock files are just files, so you can up and remove them.

However: this is in general dangerous and should not be necessary.

Lucene uses the lock files to ensure index readers/writers across 
different JVMs, or within a single JVM, do not step on each other.  If 
you remove them you can corrupt your index.

It's fine if you have multiple Lucene indices sharing the same lock 
directory; each index will create a different name for its lock file.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 16:27:48 2006
Return-Path: <java-user-return-22551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7738 invoked from network); 8 Aug 2006 16:27:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 16:27:48 -0000
Received: (qmail 81025 invoked by uid 500); 8 Aug 2006 16:27:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80990 invoked by uid 500); 8 Aug 2006 16:27:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80979 invoked by uid 99); 8 Aug 2006 16:27:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 09:27:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.90.213.186] (HELO netbreeze.ch) (212.90.213.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 09:27:40 -0700
Received: from [192.168.1.38] by netbreeze.ch
	(MDaemon PRO v9.0.1)
	with ESMTP id md50000015909.msg
	for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 18:26:41 +0200
Message-ID: <44D8BAEA.6010108@netbreeze.ch>
Date: Tue, 08 Aug 2006 18:25:14 +0200
From: Laurent Hoss <l.hoss@netbreeze.ch>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: "Field Grouping" query restrained to same field on a  'multi'-field'
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Authenticated-Sender: l.hoss@netbreeze.ch
X-Spam-Processed: netbreeze.ch, Tue, 08 Aug 2006 18:26:41 +0200
	(not processed: message from valid local sender)
X-MDRemoteIP: 192.168.1.38
X-Return-Path: l.hoss@netbreeze.ch
X-MDaemon-Deliver-To: java-user@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Suppose having an Index containing Lucene documents, having multiple 
fields (equally) named 'paragraph'.
Now I want to make a "Field Grouping" query (described in: 
http://lucene.apache.org/java/docs/queryparsersyntax.html )
 "paragraph:( word1 AND word2 )"
retrieving only documents where the terms word1,word2 appear in the SAME 
'paragraph' Field (and not word1 in one 'paragraph' field, and word2 
possibly in another 'paragraph' field in this doc).
      
AFAIK right now this query is equivalent to query
"paragraph:word1 AND paragraph:word2", which makes sense of course.

Therefor to enable the behaviour I'm looking for, I'm thinking about 
modifying the QueryParser to support some syntactic flag like '#' in:  
paragraph#:( word1 AND word2 ).
This should generally work for  a query : paragraph#:( $subquery ) , 
where $subquery would be restrained to the same 'paragraph' field as 
explained above.

However the main question is whether adding such an option would be 
feasible in Lucene (Core, Searcher?)
without incrementing algorithmic complexity ... and is not too 
complicated to implement?

If yes I would be very happy to get some pointers in the right 
direction, like in which Classes this is done best.
  
Thanks,
Laurent

  
PS: If this is not an option, we (unhappily) would have to live with 
following 'hack':
Each 'paragraph' is stored in a differently named field (by adding 
number) : paragraph1, paragraph2...
Other than the uglyness, this would have the big drawback that we need 
as many OR clauses as we set our maximum number of paragraphs to .
Simple,short query:
 paragraph: $query 
would have to be  exploded to:    
 (paragraph1: $query) OR (paragraph2: $query)  OR ... OR (paragraphN: 
$query)

PS2: Just saw following in the FAQ :
"How can I search over multiple fields? "
 >Parse your query using MultiFieldQueryParser 
<http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/MultiFieldQueryParser.html>. 
...
http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/MultiFieldQueryParser.html
But this seems to not help here, or did I overlook something ?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 16:53:09 2006
Return-Path: <java-user-return-22552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17661 invoked from network); 8 Aug 2006 16:53:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 16:53:09 -0000
Received: (qmail 23787 invoked by uid 500); 8 Aug 2006 16:53:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23766 invoked by uid 500); 8 Aug 2006 16:53:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23749 invoked by uid 99); 8 Aug 2006 16:53:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 09:53:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.147.114.148] (HELO mx2.topiatechnology.com) (209.147.114.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 09:53:01 -0700
Received: from [192.168.1.215] (heiglot2 [192.168.0.146])
	by mx2.topiatechnology.com (Postfix) with ESMTP id EA622198A6F
	for <java-user@lucene.apache.org>; Tue,  8 Aug 2006 09:52:40 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0608080031540.672@hal.rescomp.berkeley.edu>
References: <28439FFB-9BAA-4AE4-A287-61D99264FB7F@topiatechnology.com> <359a92830608071329t373d489ai79f92ee412e82f4b@mail.gmail.com> <774107FF-81F9-4FF4-9EB8-9B6995FFEDB4@topiatechnology.com> <Pine.LNX.4.58.0608080031540.672@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <79C8FE16-4120-4F20-9A9B-DBDBEDB0B49C@topiatechnology.com>
Content-Transfer-Encoding: 7bit
From: Chad Hardin <chardin@topiatechnology.com>
Subject: Re: More like this returning similarities that are too generic
Date: Tue, 8 Aug 2006 09:52:39 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You're soo right!  I'm totally new to lucene (and text analyses,  
searching etc), but now that you showed me I "get it".  Thank you so  
much for your reply.


Chad


On Aug 8, 2006, at 12:45 AM, Chris Hostetter wrote:

>
> I've never used MoreLikeThis myself, but based on how i know it works,
> your problem probably has more to do with the size of your test  
> corpus and
> th frequency of the words in your docs then by the size of the docs
> themselves.
>
> : There's still the issue of the queries from MoreLikeThis not
> : returning results for terms I had expected ("bikes").
>
> A quick glance at the source for MoreLikeThis turns up these lines...
>
>     /**
>      * Ignore terms with less than this frequency in the source doc.
> 	 * @see #getMinTermFreq
> 	 * @see #setMinTermFreq
>      */
>     public static final int DEFAULT_MIN_TERM_FREQ = 2;
>
>     /**
>      * Ignore words which do not occur in at least this many docs.
> 	 * @see #getMinDocFreq
> 	 * @see #setMinDocFreq
>      */
>     public static final int DEFALT_MIN_DOC_FREQ = 5;
>
> ...which i'm guessing mean that unless a word appears in a doc at  
> least
> twice, it's ignored for that doc, and unless a word appears in at  
> least 5
> docs, it's ignored completely.  that could easily explain your bike
> examples.
>
> : I then loaded some large (5K+) documents and I noticed that
> : MoreLikeThis's query started to return similar documents, but  
> explain
> : () said they were similar because of words like "from" and "can"  
> rather
> : than the text I expected to be used for similarity in the documents.
>
> Other then a stop words list, one other thing you might consider is
> the notion of a "maxDocFreq" option you could set to ignore words that
> appear in lots of documents -- or a maxDocFreqRatio that would take a
> percentage of the total number of docs ... it should be fairly
> straightforward to add.
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 16:58:19 2006
Return-Path: <java-user-return-22553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21233 invoked from network); 8 Aug 2006 16:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 16:58:19 -0000
Received: (qmail 34497 invoked by uid 500); 8 Aug 2006 16:58:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34008 invoked by uid 500); 8 Aug 2006 16:58:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33997 invoked by uid 99); 8 Aug 2006 16:58:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 09:58:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 09:58:11 -0700
Received: by py-out-1112.google.com with SMTP id s49so639986pyc
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 09:57:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JLpQXQM9CSuKPCX5oBuiUWeKOwGKbBdgiVISBcblDj2E9egd3rOg0z2o0BWYHUteImyV8CZfKBLb1MTi/QV1jgpYqYISE9M/vSzrBP/JyzoYFIxKafB9qxi1dDi1h9EBxypD3fo4I9D0wh3PoBcOXVUyqNyLjom+6BVxux4l8oI=
Received: by 10.35.26.14 with SMTP id d14mr14970356pyj;
        Tue, 08 Aug 2006 09:57:50 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 8 Aug 2006 09:57:50 -0700 (PDT)
Message-ID: <359a92830608080957v9d2cb9cl8866529fbc2528f2@mail.gmail.com>
Date: Tue, 8 Aug 2006 12:57:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene hits.length()
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C021E4FB2@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67901_1010285.1155056270599"
References: <8834A84C87A2C148AD46921BB8BFC97C021E4FB2@S1SE1MAIL.emea1.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_67901_1010285.1155056270599
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'll take a stab at it.... When are you opening/closing your searcher? When
you open a searcher, you get a snapshot of the index at that instant, and
subsequent modifications aren't visible until you open a new searcher (at
least I think I've got this right).

And I'm sure this also interacts with the writer merge settings
"interestingly".

Personally, I'd worry about this a lot more if it happened after I'd closed
my writer and opened a new reader <G>...
Of course, my app has an index that is updated rarely (every two weeks), so
I haven't dug into too many details in this area...


Best
Erick

On 8/8/06, Marcus Falck <marcus.falck@observer.se> wrote:
>
> I have noticed some strange behavior when searching my lucene index.
>
>
>
> I'm adding 500.000 docs to an index.
>
>
>
> MergeFactor = 10
>
> MinMerge = 5000
>
>
>
> When 49999 have been added ( just before the first 10 * 5000 merge ) the
> hits.length() is reporting around 1000 hits for a keyword (which by the
> way is around the same count as with 5000 docs added). After the 10*5000
> merge the hits.length() returns around 8000 hits, which seems to be a
> lot more reasonable. Since I'm adding content in date order ( oldest
> first ) I have also tried to sort the hits (newest date first) and
> display the top 10 hits.
>
>
>
> According to that output it seems that the documents are added
> correctly.
>
>
>
> I'm using a multisearcher on top of a RAMDir and an FSDir. Using
> Lucene1.4.3
>
>
>
> Anybody that has any idea about why the hit count is so misleading?
>
>
>
> /
>
> Regards
>
> Marcus
>
>
>
>
>
>
>

------=_Part_67901_1010285.1155056270599--

From java-user-return-22554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 17:19:48 2006
Return-Path: <java-user-return-22554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31297 invoked from network); 8 Aug 2006 17:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 17:19:48 -0000
Received: (qmail 7567 invoked by uid 500); 8 Aug 2006 17:19:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7527 invoked by uid 500); 8 Aug 2006 17:19:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7515 invoked by uid 99); 8 Aug 2006 17:19:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:19:40 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of leandro.saad@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:19:35 -0700
Received: by wr-out-0506.google.com with SMTP id 58so117015wri
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 10:18:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GitCCClF9++z7aJCbtDxy8isBa3GyEO0xkWTFYiM3XzkZmcjnotmOVcxqNWy1L6t4ErSQ9Ki983/c5U7780HACZuzpceBNuOTIiK5bx/8qPBowUZ5QwLIVxCcz1IDLvwbN1r4laqoJRPAbDIYAA8wn7g+MfFuxFomrb56aP5Eyg=
Received: by 10.78.203.15 with SMTP id a15mr2846746hug;
        Tue, 08 Aug 2006 10:18:57 -0700 (PDT)
Received: by 10.78.68.11 with HTTP; Tue, 8 Aug 2006 10:18:57 -0700 (PDT)
Message-ID: <27bc81750608081018v7fa459b7me2d6a525d4ea7f16@mail.gmail.com>
Date: Tue, 8 Aug 2006 14:18:57 -0300
From: "Leandro Saad" <leandro.saad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple lock files
In-Reply-To: <44D8B007.9050305@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13355_24030825.1155057537335"
References: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>
	 <44D8B007.9050305@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13355_24030825.1155057537335
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yeah. But how do I know if a lock file is related to an index or app? I
don't want to remove a lock file that another app is using

:: Leandro

On 8/8/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> > How do I remove lucene locks (startup) if there are multiple
> applications
> > using lucene on the same box and all use the same lock dir?
>
> The lock files are just files, so you can up and remove them.
>
> However: this is in general dangerous and should not be necessary.
>
> Lucene uses the lock files to ensure index readers/writers across
> different JVMs, or within a single JVM, do not step on each other.  If
> you remove them you can corrupt your index.
>
> It's fine if you have multiple Lucene indices sharing the same lock
> directory; each index will create a different name for its lock file.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13355_24030825.1155057537335--

From java-user-return-22555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 17:35:50 2006
Return-Path: <java-user-return-22555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36896 invoked from network); 8 Aug 2006 17:35:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 17:35:49 -0000
Received: (qmail 65594 invoked by uid 500); 8 Aug 2006 17:35:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65548 invoked by uid 500); 8 Aug 2006 17:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65537 invoked by uid 99); 8 Aug 2006 17:35:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:35:41 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,RCVD_IN_SORBS_WEB,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of buschmic@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:35:40 -0700
Received: by wx-out-0506.google.com with SMTP id s15so337224wxc
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 10:35:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WaH2oozrT37sg9kjicmm32GCn6gW7YGxAQRGTxz6gNYQ/3SZ8Nj0NfAWGQeh+LHcpILfJCfxKq2s7ayGLApYGntSmpSQqE6h/Kt6OBaFqmSbH5R+jABuKHN/InWU28hSA9NnDLYtqRKuisDBYh6Bi1I1DDVRRd3okiSg6KvPKTk=
Received: by 10.70.76.11 with SMTP id y11mr1037858wxa;
        Tue, 08 Aug 2006 10:35:07 -0700 (PDT)
Received: from ?9.30.38.120? ( [129.42.184.35])
        by mx.gmail.com with ESMTP id 40sm5844413wrl.2006.08.08.10.35.06;
        Tue, 08 Aug 2006 10:35:07 -0700 (PDT)
Message-ID: <44D8CB41.2050502@gmail.com>
Date: Tue, 08 Aug 2006 10:34:57 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiple lock files
References: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>	 <44D8B007.9050305@mikemccandless.com> <27bc81750608081018v7fa459b7me2d6a525d4ea7f16@mail.gmail.com>
In-Reply-To: <27bc81750608081018v7fa459b7me2d6a525d4ea7f16@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Yeah. But how do I know if a lock file is related to an index or app? I
> don't want to remove a lock file that another app is using
>
Leandro,

check out the static method of IndexReader: unlock(Directory). Link: 
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#unlock(org.apache.lucene.store.Directory)

You can use that method to forcibly unlock a particular index directory. 
Furthermore you can use the method boolean isLocked(Directory) to check 
whether an index is actually locked.

Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 17:44:24 2006
Return-Path: <java-user-return-22556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39337 invoked from network); 8 Aug 2006 17:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 17:44:23 -0000
Received: (qmail 97373 invoked by uid 500); 8 Aug 2006 17:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97346 invoked by uid 500); 8 Aug 2006 17:44:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97335 invoked by uid 99); 8 Aug 2006 17:44:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:44:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of leandro.saad@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:44:14 -0700
Received: by wr-out-0506.google.com with SMTP id 58so118851wri
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 10:43:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HJ7UpMVBibjjhjf77w7yhr32VVeZeXT6uXlibuWUqXZsoxjdX0U0dxwQYNYvGUOxi8JVaowivipWTFwu4ffgfMdbMAxEu8KYWqJwmUIUtvswTrqxToaxyXHNv5Fmv2Npcibh+7lRvbDYzgJoPKinsIV7/dUZjkHzZI8XmEeYIHE=
Received: by 10.78.177.3 with SMTP id z3mr2845134hue;
        Tue, 08 Aug 2006 10:43:51 -0700 (PDT)
Received: by 10.78.68.11 with HTTP; Tue, 8 Aug 2006 10:43:50 -0700 (PDT)
Message-ID: <27bc81750608081043j71170444h677dc921feb6e7b7@mail.gmail.com>
Date: Tue, 8 Aug 2006 14:43:50 -0300
From: "Leandro Saad" <leandro.saad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple lock files
In-Reply-To: <44D8CB41.2050502@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13807_17603167.1155059030942"
References: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>
	 <44D8B007.9050305@mikemccandless.com>
	 <27bc81750608081018v7fa459b7me2d6a525d4ea7f16@mail.gmail.com>
	 <44D8CB41.2050502@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13807_17603167.1155059030942
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm trying to use them, and I maybe be wrong, but I can't unlock the dir
before I create the Directory right? Do you know if the lock is created when
I create the Directory?

:: Leandro

On 8/8/06, Michael Busch <buschmic@gmail.com> wrote:
>
>
> > Yeah. But how do I know if a lock file is related to an index or app? I
> > don't want to remove a lock file that another app is using
> >
> Leandro,
>
> check out the static method of IndexReader: unlock(Directory). Link:
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#unlock(org.apache.lucene.store.Directory)
>
> You can use that method to forcibly unlock a particular index directory.
> Furthermore you can use the method boolean isLocked(Directory) to check
> whether an index is actually locked.
>
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Leandro Rodrigo Saad Cruz
CTO - InterBusiness Technologies
db.apache.org/ojb
guara-framework.sf.net
xingu.sf.net

------=_Part_13807_17603167.1155059030942--

From java-user-return-22557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 17:44:31 2006
Return-Path: <java-user-return-22557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39395 invoked from network); 8 Aug 2006 17:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 17:44:31 -0000
Received: (qmail 98824 invoked by uid 500); 8 Aug 2006 17:44:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98802 invoked by uid 500); 8 Aug 2006 17:44:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98791 invoked by uid 99); 8 Aug 2006 17:44:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:44:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:44:23 -0700
Received: by ug-out-1314.google.com with SMTP id y2so456375uge
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 10:44:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HLQkH+PKSIgLYoWbKIsrj/XUV0BZzFVjyXINlq1h6ueadoGO/TuShh9h8zUDUirr93iEtOxP8MpaqIMqCmoLfUgwQKrt60A1axGM+Ie6syKl/SXdxgDmNE+4nDc1C1DIp4j0AluX+C9ewEttynX++Axe5cGe4D2vm2TJVqSA8XI=
Received: by 10.67.89.5 with SMTP id r5mr9862961ugl;
        Tue, 08 Aug 2006 10:44:01 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Tue, 8 Aug 2006 10:44:01 -0700 (PDT)
Message-ID: <f18c9dde0608081044t7c82b300wb06859ab2e8daf2c@mail.gmail.com>
Date: Tue, 8 Aug 2006 19:44:01 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Multiple lock files
In-Reply-To: <27bc81750608081018v7fa459b7me2d6a525d4ea7f16@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>
	 <44D8B007.9050305@mikemccandless.com>
	 <27bc81750608081018v7fa459b7me2d6a525d4ea7f16@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can start your applications with a system property set:
"org.apache.lucene.lockDir"
to specify your lock directory

Hope that helps...

regards Simon

On 8/8/06, Leandro Saad <leandro.saad@gmail.com> wrote:
> Yeah. But how do I know if a lock file is related to an index or app? I
> don't want to remove a lock file that another app is using
>
> :: Leandro
>
> On 8/8/06, Michael McCandless <lucene@mikemccandless.com> wrote:
> >
> >
> > > How do I remove lucene locks (startup) if there are multiple
> > applications
> > > using lucene on the same box and all use the same lock dir?
> >
> > The lock files are just files, so you can up and remove them.
> >
> > However: this is in general dangerous and should not be necessary.
> >
> > Lucene uses the lock files to ensure index readers/writers across
> > different JVMs, or within a single JVM, do not step on each other.  If
> > you remove them you can corrupt your index.
> >
> > It's fine if you have multiple Lucene indices sharing the same lock
> > directory; each index will create a different name for its lock file.
> >
> > Mike
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 17:48:21 2006
Return-Path: <java-user-return-22558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43594 invoked from network); 8 Aug 2006 17:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 17:48:21 -0000
Received: (qmail 11228 invoked by uid 500); 8 Aug 2006 17:48:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11190 invoked by uid 500); 8 Aug 2006 17:48:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11179 invoked by uid 99); 8 Aug 2006 17:48:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:48:14 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of leandro.saad@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:48:12 -0700
Received: by wr-out-0506.google.com with SMTP id 58so119224wri
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 10:47:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hv0yMjOc/HGLXK1ITvmCUugjH5GyQUdQRU+hHgKTs27697mXcGEZf3tzUhoCxHFv3XJuwNyZXpAkMaIf9VGahZaidA8k20awTAPmGHs87bKTjq0I4JI5GViRuE6x7NWXWApB6D9nXV0WrAZcQ08U3/ocpSj5bq6D+qYaLcjD5WY=
Received: by 10.78.177.3 with SMTP id z3mr2846197hue;
        Tue, 08 Aug 2006 10:47:50 -0700 (PDT)
Received: by 10.78.68.11 with HTTP; Tue, 8 Aug 2006 10:47:50 -0700 (PDT)
Message-ID: <27bc81750608081047o5cc365fcoadf18f466a5fc4b6@mail.gmail.com>
Date: Tue, 8 Aug 2006 14:47:50 -0300
From: "Leandro Saad" <leandro.saad@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: Multiple lock files
In-Reply-To: <f18c9dde0608081044t7c82b300wb06859ab2e8daf2c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13875_27181813.1155059270304"
References: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>
	 <44D8B007.9050305@mikemccandless.com>
	 <27bc81750608081018v7fa459b7me2d6a525d4ea7f16@mail.gmail.com>
	 <f18c9dde0608081044t7c82b300wb06859ab2e8daf2c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13875_27181813.1155059270304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I want to use the same lock dir, but remove only the associated lock file
when I start the application.

:: Leandro

On 8/8/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>
> You can start your applications with a system property set:
> "org.apache.lucene.lockDir"
> to specify your lock directory
>
> Hope that helps...
>
> regards Simon
>
> On 8/8/06, Leandro Saad <leandro.saad@gmail.com> wrote:
> > Yeah. But how do I know if a lock file is related to an index or app? I
> > don't want to remove a lock file that another app is using
> >
> > :: Leandro
> >
> > On 8/8/06, Michael McCandless <lucene@mikemccandless.com> wrote:
> > >
> > >
> > > > How do I remove lucene locks (startup) if there are multiple
> > > applications
> > > > using lucene on the same box and all use the same lock dir?
> > >
> > > The lock files are just files, so you can up and remove them.
> > >
> > > However: this is in general dangerous and should not be necessary.
> > >
> > > Lucene uses the lock files to ensure index readers/writers across
> > > different JVMs, or within a single JVM, do not step on each other.  If
> > > you remove them you can corrupt your index.
> > >
> > > It's fine if you have multiple Lucene indices sharing the same lock
> > > directory; each index will create a different name for its lock file.
> > >
> > > Mike
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13875_27181813.1155059270304--

From java-user-return-22559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 17:53:24 2006
Return-Path: <java-user-return-22559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50239 invoked from network); 8 Aug 2006 17:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 17:53:23 -0000
Received: (qmail 24681 invoked by uid 500); 8 Aug 2006 17:53:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24505 invoked by uid 500); 8 Aug 2006 17:53:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24494 invoked by uid 99); 8 Aug 2006 17:53:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:53:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 10:53:16 -0700
Received: by ug-out-1314.google.com with SMTP id y2so458691uge
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 10:52:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hQchvXeEeEgNa9R9Df7B4fRS/ZZ65nHhsWRRuF/3aBHDBFPTvbeFKiC4O+ulOcVEJk4csIzSigvqc+ksvh2a6ZWbgumu9wQoCXCNCLxE4gwaH9pxcz7uW0W3tZ6HvfvVnn34/XfchaajvXRUUrQNNNLsQM/Kz8Lw0zKeHD68sso=
Received: by 10.66.216.6 with SMTP id o6mr9842501ugg;
        Tue, 08 Aug 2006 10:52:54 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Tue, 8 Aug 2006 10:52:54 -0700 (PDT)
Message-ID: <f18c9dde0608081052j3460a7cai78ba8af4739e7bf8@mail.gmail.com>
Date: Tue, 8 Aug 2006 19:52:54 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Multiple lock files
In-Reply-To: <27bc81750608081043j71170444h677dc921feb6e7b7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>
	 <44D8B007.9050305@mikemccandless.com>
	 <27bc81750608081018v7fa459b7me2d6a525d4ea7f16@mail.gmail.com>
	 <44D8CB41.2050502@gmail.com>
	 <27bc81750608081043j71170444h677dc921feb6e7b7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The index writer creates the lock in its constructor via the public
FSDirectory makeLock method.

regards simon

On 8/8/06, Leandro Saad <leandro.saad@gmail.com> wrote:
> I'm trying to use them, and I maybe be wrong, but I can't unlock the dir
> before I create the Directory right? Do you know if the lock is created when
> I create the Directory?
>
> :: Leandro
>
> On 8/8/06, Michael Busch <buschmic@gmail.com> wrote:
> >
> >
> > > Yeah. But how do I know if a lock file is related to an index or app? I
> > > don't want to remove a lock file that another app is using
> > >
> > Leandro,
> >
> > check out the static method of IndexReader: unlock(Directory). Link:
> >
> > http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#unlock(org.apache.lucene.store.Directory)
> >
> > You can use that method to forcibly unlock a particular index directory.
> > Furthermore you can use the method boolean isLocked(Directory) to check
> > whether an index is actually locked.
> >
> > Michael
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Leandro Rodrigo Saad Cruz
> CTO - InterBusiness Technologies
> db.apache.org/ojb
> guara-framework.sf.net
> xingu.sf.net
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 18:04:26 2006
Return-Path: <java-user-return-22560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58249 invoked from network); 8 Aug 2006 18:04:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 18:04:25 -0000
Received: (qmail 51477 invoked by uid 500); 8 Aug 2006 18:04:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51446 invoked by uid 500); 8 Aug 2006 18:04:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51435 invoked by uid 99); 8 Aug 2006 18:04:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 11:04:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO nz-out-0102.google.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 11:04:18 -0700
Received: by nz-out-0102.google.com with SMTP id z6so275062nzd
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 11:03:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=o6CQToN/PJVuaGcMRLkP8vuqZyIFX3uFgfG3U+lEbZKNOzv+UZO1jsbCQ4KeQGvSZfa0byMrHdoQwXeUlb1pGeuixZ2dSKaTCfKB8JZU10BVUOg/iMVAYUqOhYHtmRGVibRQyIG4V+hbCDm6nhRbw+L+Gul1RtjP1B1EjYHgNWs=
Received: by 10.35.11.15 with SMTP id o15mr15035825pyi;
        Tue, 08 Aug 2006 11:03:49 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Tue, 8 Aug 2006 11:03:49 -0700 (PDT)
Message-ID: <c68e39170608081103i1918323an286e33aece13f7e1@mail.gmail.com>
Date: Tue, 8 Aug 2006 14:03:49 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: "Field Grouping" query restrained to same field on a 'multi'-field'
In-Reply-To: <44D8BAEA.6010108@netbreeze.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44D8BAEA.6010108@netbreeze.ch>
X-Google-Sender-Auth: d5864db079dc959e
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/8/06, Laurent Hoss <l.hoss@netbreeze.ch> wrote:
> Suppose having an Index containing Lucene documents, having multiple
> fields (equally) named 'paragraph'.
> Now I want to make a "Field Grouping" query (described in:
> http://lucene.apache.org/java/docs/queryparsersyntax.html )
>  "paragraph:( word1 AND word2 )"
> retrieving only documents where the terms word1,word2 appear in the SAME
> 'paragraph' Field (and not word1 in one 'paragraph' field, and word2
> possibly in another 'paragraph' field in this doc).

You could do this with the current query parser by putting large
position increment gaps between paragraphs that is guaranteed to be
larger than the largest paragraph.  Then you could use a sloppy phrase
query
"word1 word2"~10000 for instance.

That would also score documents higher the closer together the words
appeared (which may or may not be desirable).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 18:05:09 2006
Return-Path: <java-user-return-22561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58824 invoked from network); 8 Aug 2006 18:05:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 18:05:08 -0000
Received: (qmail 54702 invoked by uid 500); 8 Aug 2006 18:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54574 invoked by uid 500); 8 Aug 2006 18:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54559 invoked by uid 99); 8 Aug 2006 18:05:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 11:05:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 11:05:01 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id DB27DD9480D
	for <java-user@lucene.apache.org>; Tue,  8 Aug 2006 14:04:39 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Tue, 08 Aug 2006 14:04:40 -0400
X-Sasl-enc: D5LcXqDSDgNrpofc7PlQpQGQzjS75GFGbDNm73tOOPZq 1155060280
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 2173068DB
	for <java-user@lucene.apache.org>; Tue,  8 Aug 2006 14:04:39 -0400 (EDT)
Message-ID: <44D8D236.3070704@mikemccandless.com>
Date: Tue, 08 Aug 2006 14:04:38 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiple lock files
References: <27bc81750608080810l71764602qeb150c5d34d94d76@mail.gmail.com>	 <44D8B007.9050305@mikemccandless.com>	 <27bc81750608081018v7fa459b7me2d6a525d4ea7f16@mail.gmail.com>	 <44D8CB41.2050502@gmail.com>	 <27bc81750608081043j71170444h677dc921feb6e7b7@mail.gmail.com> <f18c9dde0608081052j3460a7cai78ba8af4739e7bf8@mail.gmail.com>
In-Reply-To: <f18c9dde0608081052j3460a7cai78ba8af4739e7bf8@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Simon Willnauer wrote:
> The index writer creates the lock in its constructor via the public
> FSDirectory makeLock method.
> 
> regards simon
> 
> On 8/8/06, Leandro Saad <leandro.saad@gmail.com> wrote:
>> I'm trying to use them, and I maybe be wrong, but I can't unlock the dir
>> before I create the Directory right? Do you know if the lock is 
>> created when
>> I create the Directory?

You can create the Directory (FSDirectory.getDirectory(*)), and then 
call IndexReader's isLocked / unlock.  The creation of the directory 
doesn't create any lock files.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 20:41:58 2006
Return-Path: <java-user-return-22562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26372 invoked from network); 8 Aug 2006 20:41:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 20:41:58 -0000
Received: (qmail 96587 invoked by uid 500); 8 Aug 2006 20:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96555 invoked by uid 500); 8 Aug 2006 20:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96544 invoked by uid 99); 8 Aug 2006 20:41:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 13:41:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paul.borgermans@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 13:41:51 -0700
Received: by wx-out-0506.google.com with SMTP id s15so5751wxc
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 13:41:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VzRBEFFteXeLsf3ozCyj52sNVP06NHS+8pTaNDstr9RuozZEZ4+1VC7ng2TigUHYpl+kN5+2Yiy+/J5xbL8Jubw2gm7OGCiFzrCLEpG7TLebUv06qYgXFv6dOFPpB2h+GLMDWBbQQZvnHcvL6id9hNmzcKLPaG+W16W0izDu7AE=
Received: by 10.78.200.3 with SMTP id x3mr4336huf;
        Tue, 08 Aug 2006 13:41:29 -0700 (PDT)
Received: by 10.78.35.1 with HTTP; Tue, 8 Aug 2006 13:41:29 -0700 (PDT)
Message-ID: <8c0c601f0608081341j2c27f9b8xe0c26c5820011a8f@mail.gmail.com>
Date: Tue, 8 Aug 2006 22:41:29 +0200
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Linear search using reader vs. scorer implementation
In-Reply-To: <44D835B3.1050409@juggle.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44D835B3.1050409@juggle.at>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Mathias

I delved a bit further in the lucene docs and the book "Lucene in
action" (Ch 6.1, pp194-201): an alternative approach may be the use of
a custom sort with a dedicated implementation of the
SortComparatorSource, taking as arguments the array of vectors for
which a "distance" needs to be calculated.

As a custom sort operates on a single field, the three Lire vectors
should be encoded in a single fields as well (as far as I understand
the API).

The query could then be the MatchAllDocsQuery query (or for example a
keyword query for having a subset) combined with other filters which
limit the result to sort on even further.

I do not know the impact on performance though, this is still pure
theoretical and based on my (currently limited) understanding of
Lucene and Lire.

Best regards

--paul

On 8/8/06, Mathias Lux <mathias@juggle.at> wrote:
> Hi!
>
> I'm working in my spare time on Lire, a content based image retrieval
> library (searching for similar looking images in other words, see
> http://www.semanticmetadata.net/lire) based on Lucene.
>
> As the cbir features are medium sized integer vectors I put them into
> fields, and read them with the IndexReader within a linear search
> through the whole index for matching: As soon as a query is issued
> (which is also an integer vector) I go through every doc, get the
> corresponding feature vector and calculate the distance (L1 or L2,
> depending on the type of feature).
>
> Do you have any idea if and how I could implement a linear search (L1/L2
> distance on integer vectors) using scorers, so that filters and other
> features can be used?
>
> regards,
>   Mathias
>
> ps. Yes I know that this is in general easy to implement within a
> database, which I have done for oracle, mysql and derby .... but people
> do want the lucene implementation and believe it or not: Lucene is super
>  fast for linear search -> THX to the lucene team ;)
>
>
> --
>     '   '    '
>       '   '    '     Mathias Lux
>  o/          '  \o   mathias@juggle.at
>  /-'            -\   skype://dermotte, icq # 1988617
> /\               /\  http://www.SemanticMetadata.net
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 08 21:36:49 2006
Return-Path: <java-user-return-22563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49731 invoked from network); 8 Aug 2006 21:36:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2006 21:36:48 -0000
Received: (qmail 36468 invoked by uid 500); 8 Aug 2006 21:36:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36443 invoked by uid 500); 8 Aug 2006 21:36:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36432 invoked by uid 99); 8 Aug 2006 21:36:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 14:36:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 14:36:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A84865B77C; Tue,  8 Aug 2006 14:36:21 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 994B87F403
	for <java-user@lucene.apache.org>; Tue,  8 Aug 2006 14:36:21 -0700 (PDT)
Date: Tue, 8 Aug 2006 14:36:21 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: "Field Grouping" query restrained to same field on a 'multi'-field'
In-Reply-To: <c68e39170608081103i1918323an286e33aece13f7e1@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608081434590.3615@hal.rescomp.berkeley.edu>
References: <44D8BAEA.6010108@netbreeze.ch> <c68e39170608081103i1918323an286e33aece13f7e1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: That would also score documents higher the closer together the words
: appeared (which may or may not be desirable).

if it's not desirable, it could be "fixed" by overriding the sloppyFreq
method of your Similarity.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 02:48:02 2006
Return-Path: <java-user-return-22564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37522 invoked from network); 9 Aug 2006 02:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 02:48:02 -0000
Received: (qmail 67886 invoked by uid 500); 9 Aug 2006 02:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67857 invoked by uid 500); 9 Aug 2006 02:47:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67846 invoked by uid 99); 9 Aug 2006 02:47:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 19:47:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 19:47:55 -0700
Received: by py-out-1112.google.com with SMTP id s49so128660pyc
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 19:47:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=jl31aEf4ZaAauh3uyOpfbwX+jUaeqgiZ1ue42uHW5DrXjN5213yYVw9e0L5qTW80cdTaK5nklTL2hfSNyI7dwI34AUzS+mGfUPAU289CG4J6Er8PeRu1nZwbEEvmliqQ5hyoA5ZHogujMAcqjdokuoLH3QdU6GL8s4uAgaRd4eE=
Received: by 10.35.135.12 with SMTP id m12mr616593pyn;
        Tue, 08 Aug 2006 19:47:35 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Tue, 8 Aug 2006 19:47:35 -0700 (PDT)
Message-ID: <c68e39170608081947g5f490051le12d427e5cd1e7d9@mail.gmail.com>
Date: Tue, 8 Aug 2006 22:47:35 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
In-Reply-To: <c450d5120608072305t863377ej2ce345261f3c9848@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c450d5120608072305t863377ej2ce345261f3c9848@mail.gmail.com>
X-Google-Sender-Auth: 6baae8867d5318a9
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The nature of the field cache itself means that the first sort on a
particular field can take a long, long time.  Synchronization won't
really help that much.

There are two ways around this...
1) incrementally generate the field cache (hard... not currently
supported by Lucene)
2) warm searchers in the background before exposing them to live
queries (the approach Solr takes).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server


On 8/8/06, hutchiko@gmail.com <hutchiko@gmail.com> wrote:
> Hey all, just want to run an issue that I've recently identified while
> looking at some performance issues we are having with our larger
> indexes past you all.
>
> Basically what we are seeing is that when there are a number of
> concurrent searches being executed over a new IndexSearcher, the quite
> expensive ScoreDocComparator generation that is done in the
> FieldSortedHitQueue#getCachedComparator method ends up executing
> multiple times rather the ideal case of once. This issue does not
> effect the correctness of the searches only performance.
>
> For my relatively weak understanding of the code the core of this
> issue appears to lie with the FieldCacheImpl#getStringIndex method
> which allows multiple concurrent requests to each generate their own
> StringIndex rather than allowing the first request to do the
> generation and then blocking subsequent requests until the first
> request has finished.
>
> Is this a know problem? Should I raise this as an issue or is this
> "expected" behaviour. A solution would naturally require more
> synchronization than is currently used but nothing particularly
> complex.
>
> Thanks,
>
> Oliver

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 03:06:01 2006
Return-Path: <java-user-return-22565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40690 invoked from network); 9 Aug 2006 03:06:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 03:06:01 -0000
Received: (qmail 80986 invoked by uid 500); 9 Aug 2006 03:05:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80797 invoked by uid 500); 9 Aug 2006 03:05:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80786 invoked by uid 99); 9 Aug 2006 03:05:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 20:05:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 20:05:54 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id 7A268289F9
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 13:05:32 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 6673253403A
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 13:05:32 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 11404-01-89 for <java-user@lucene.apache.org>;
 Wed,  9 Aug 2006 13:05:31 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 01B75534039
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 13:05:31 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c68e39170608081947g5f490051le12d427e5cd1e7d9@mail.gmail.com>
References: <c450d5120608072305t863377ej2ce345261f3c9848@mail.gmail.com> <c68e39170608081947g5f490051le12d427e5cd1e7d9@mail.gmail.com>
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-19-691856051; protocol="application/pkcs7-signature"
Message-Id: <E3C56179-A90F-4DE6-90BC-B5B02D11954D@aconex.com>
From: Paul Smith <psmith@aconex.com>
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
Date: Wed, 9 Aug 2006 13:05:14 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-19-691856051
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


On 09/08/2006, at 12:47 PM, Yonik Seeley wrote:

> The nature of the field cache itself means that the first sort on a
> particular field can take a long, long time.  Synchronization won't
> really help that much.
>

I'm not so sure I agree with that.  If you have, say, 4 threads  
concurrently starting a search on a cold index, they will _all_  
effectively do a warm of the searcher, chewing up CPU and disk, which  
may be better utilised by other threads.  Wouldn't it be better for 1  
thread to do the warming while the others block waiting?

The option to warm-up the index before making it available to  
concurrent searches is effectively the same thing as this.  I would  
have thought it would be nicer to have it part of the search  
mechanism rather than rely on coders to constantly build that warm- 
ing thread into their application.

My 5 Australian cents (currently 3.75 US cents).

Paul Smith
--Apple-Mail-19-691856051
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGmjCCAz8w
ggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJBgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0
ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgGA1UEChMRVGhhd3RlIENvbnN1bHRpbmcx
KDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0
ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3DQEJARYccGVyc29uYWwtZnJlZW1haWxA
dGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpB
MSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUg
UGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA
xKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7d
yfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+uxg+B79AgAJk16emu59l0cUqVIUPSAR/
p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMBAf8ECDAGAQH/AgEAMEMGA1UdHwQ8MDow
OKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3Js
MAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgGA1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgw
DQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcPf6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A
9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYI
Tq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8wggNTMIICvKADAgECAgMPvmgwDQYJKoZI
hvcNAQEEBQAwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkp
IEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA1
MTAyODAzNTUwOFoXDTA2MTAyODAzNTUwOFowgZ0xDjAMBgNVBAQTBVNtaXRoMQ0wCwYDVQQqEwRQ
YXVsMRMwEQYDVQQDEwpQYXVsIFNtaXRoMSAwHgYJKoZIhvcNAQkBFhFwc21pdGhAYXBhY2hlLm9y
ZzEgMB4GCSqGSIb3DQEJARYRcHNtaXRoQGFjb25leC5jb20xIzAhBgkqhkiG9w0BCQEWFHRhbGxw
c21pdGhAZ21haWwuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoFqv2aOz5VpQ
nFRvaOJqE2xCEmoyjdGFIQcfEKq+vVwkctKyWaqQ9stcUubJFZ9l/V6oWl+YhusV5EXzpNka81GL
ES+fG9h5THLV6h+f/wVhw2NdgAfPVn8ff+VuzwzLCBJ2l3OXVvpLEjq5eYSQn2DlvaJRLPmKfWMZ
DkvO6RjknVFLDoISLO6e2FhLqIla/uBmZZyxnk7HtyAjnNmwo3+493nUOtwUcCD/tOvjEns6e7eJ
rqnpbEKf/7XQrpsfIoeKe/DHhIgzqiK3b7dTFPmN70RoLn9XN0YoIXzNoX02Bjf8nz6/9JWoGwII
1BzEHgywCzJ/G/k8mGylrfQ9wwIDAQABo1cwVTBFBgNVHREEPjA8gRFwc21pdGhAYXBhY2hlLm9y
Z4ERcHNtaXRoQGFjb25leC5jb22BFHRhbGxwc21pdGhAZ21haWwuY29tMAwGA1UdEwEB/wQCMAAw
DQYJKoZIhvcNAQEEBQADgYEAert7B1pgBkz7IxdlziZzszpXNe04RVoPbKkKdxfCmAoiIwl3Ppj/
BwrS8OlzYRfQa8ASNYjsXQVU2ZJSZ6vFbtcHo8rzrv6icj0W7bZ1582ziryGzqpm1mxpGFStu1ZK
nO2+iCheCkeNyjVXYLbnl8vwGZDQSyGpEkT+GI5fB+oxggLnMIIC4wIBATBpMGIxCzAJBgNVBAYT
AlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3
dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIDD75oMAkGBSsOAwIaBQCgggFTMBgGCSqG
SIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDgwOTAzMDUxNVowIwYJKoZI
hvcNAQkEMRYEFDqn72ECtZqvmmsMAyETvR7g4qBsMHgGCSsGAQQBgjcQBDFrMGkwYjELMAkGA1UE
BhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1Ro
YXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMPvmgwegYLKoZIhvcNAQkQAgsxa6Bp
MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSww
KgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIDD75oMA0GCSqGSIb3
DQEBAQUABIIBAATH8r+pB3StPgld+VPIVRDD8JvppSxtKPDjmw/ivq79Y745bwkSfAXBqJaRzC7o
nHTwdZMcSn8xocQ7Uqmohti2tR5qCFCz7iAqPvHtfzUIaKkILY7ljz9sh4AmvOS2CNzmtaQc4imh
BN/dzLf8C43EgqISU1oOB2UXDZ4zCJLe36pToiTaTbY4H8qyBnwrjRP69oDT1MroBsGjpb5VGUYF
eo3VZRNlfXP3kLZdTeCFQNagq/+jGWVlekrcY1tyIdI3JAo2VXhpFtjtu624O0EI9/fF91l0WZkX
0HcZvUoL6zCqsiwhcb6uSodu7M1j/H8QAsgd9iFOUeyA0XMAnwYAAAAAAAA=

--Apple-Mail-19-691856051--

From java-user-return-22566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 03:06:27 2006
Return-Path: <java-user-return-22566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41689 invoked from network); 9 Aug 2006 03:06:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 03:06:26 -0000
Received: (qmail 83008 invoked by uid 500); 9 Aug 2006 03:06:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82970 invoked by uid 500); 9 Aug 2006 03:06:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82509 invoked by uid 99); 9 Aug 2006 03:06:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 20:06:18 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 20:06:16 -0700
Received: by ug-out-1314.google.com with SMTP id y2so83396uge
        for <java-user@lucene.apache.org>; Tue, 08 Aug 2006 20:05:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=la+dzRTId0iX89fMJuwqbpnbcyYHNEfL6YespEgGiIc8ptdIzBgktai6z+aIehxwgRLQYwyTjUHNp42hvIWE+RtkpGoFhZBcDnZe/wDgXJysWpwI1YrpGQ3hAx6/9pwl+D9b2wzjW8QVdCfnrCGLXfWLc/9J8HTenOmbEFdzZxE=
Received: by 10.66.224.3 with SMTP id w3mr402457ugg;
        Tue, 08 Aug 2006 20:05:55 -0700 (PDT)
Received: by 10.67.95.20 with HTTP; Tue, 8 Aug 2006 20:05:54 -0700 (PDT)
Message-ID: <4f2c7c9b0608082005t66ad0a1o81b5e88b91ff2f6a@mail.gmail.com>
Date: Wed, 9 Aug 2006 11:05:54 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: About the use of HitCollector
In-Reply-To: <7A3F5748-BC4E-45C2-B01D-F7419BE6DA2B@genome.chop.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25121_21308112.1155092754933"
References: <4f2c7c9b0608070332p23ba46b4x85e2ab6839201b32@mail.gmail.com>
	 <44D71B5F.7050602@uni-hd.de>
	 <4f2c7c9b0608070648g278d6acbid3f9f036e41aa588@mail.gmail.com>
	 <7A3F5748-BC4E-45C2-B01D-F7419BE6DA2B@genome.chop.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_25121_21308112.1155092754933
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey, Ryan, Thanks for your reply.
The scenario is I use a custom Filter which get some information from a
database table which consists of hundreds of thousands of rows. I use the
IndexSearcher.search(query, filter, hitcollector). I found it was consumed
more time with filter than that without no filter.
Can you give me some advice?


2006/8/8, Ryan O'Hara <ohara@genome.chop.edu>:

> Hey Andy,
>
> If you have enough RAM, try using FieldCache:
>
> String[] fieldYouWant = FieldCache.DEFAULT.getStrings
> (searcher.getIndexReader(), "fieldYouWant");
> searcher.search(query, new HitCollector(){
>        public void collect(int doc, float score){
>                doWhatYouWant(fieldYouWant[doc]);
>        }
> }
>
> If you need all results, this is probably the fastest method.
> However, this is assuming you have some way of storing the
> fieldYouWant array.  For all indexes, especially those containing
> many documents, it is a good idea to store the fieldYouWant array,
> since creating this array creates serious overhead.
>
> Best,
> Ryan
>
> On Aug 7, 2006, at 9:48 AM, hu andy wrote:
>
> > Martin, Thank you for your reply.
> >
> > But the Lucene API said:
> > This is called in an inner search loop. For good search performance,
> > implementations of this method should not call
> > Searcher.doc(int)<file:///E:/java/IR%20Library/lucene-1.9.1/
> > lucene-1.9.1/docs/api/org/apache/lucene/search/Searcher.html#doc
> > (int)>or
> > IndexReader.document(int)<file:///E:/java/IR%20Library/lucene-1.9.1/
> > lucene-1.9.1/docs/api/org/apache/lucene/index/
> > IndexReader.html#document(int)>on
> > every document number encountered
> >
> > Because I have to check a field in the document to determine whether I
> > should return the document. The total number of documents is about two
> > hundred thousand. So I'm afraid the
> > performance
> >
> >
> > 2006/8/7, Martin Braun <mbraun@uni-hd.de>:
> >>
> >> hi andy,
> >> > How can I  use HitCollector to iterate over every returned
> >> document?
> >>
> >> You have to override the function collect for the HitCollector
> >> class and
> >> then store the retrieved Data in an array or map.
> >>
> >> Here is just a source-code scratch (is = IndexSearcher)
> >>
> >>                is.search(query, null, new HitCollector(){
> >>                                public void collect(int docID,
> >> float score)
> >>                                    {
> >>                                        Document doc = is.doc(docID);
> >>                                        titles[docID] = doc.get
> >> ("title");
> >>                                    }
> >>                        });
> >>
> >>
> >> hth,
> >> martin
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25121_21308112.1155092754933--

From java-user-return-22567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 03:11:35 2006
Return-Path: <java-user-return-22567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46465 invoked from network); 9 Aug 2006 03:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 03:11:34 -0000
Received: (qmail 89736 invoked by uid 500); 9 Aug 2006 03:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89710 invoked by uid 500); 9 Aug 2006 03:11:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89698 invoked by uid 99); 9 Aug 2006 03:11:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 20:11:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 20:11:27 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id A7915280A0
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 13:11:06 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 9506353403A
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 13:11:06 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 17496-01-24 for <java-user@lucene.apache.org>;
 Wed,  9 Aug 2006 13:11:05 +1000 (EST)
Received: from OLIVERDESKTOP (unknown [192.168.0.40])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 70043534039
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 13:11:05 +1000 (EST)
From: "Oliver Hutchison" <ohutchison@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: Poor performance "race condition" in FieldSortedHitQueue
Date: Wed, 9 Aug 2006 13:10:53 +1000
Message-ID: <03d501c6bb61$72cb3660$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <c68e39170608081947g5f490051le12d427e5cd1e7d9@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Aca7Xj2Dh3NjJT2/QfCJChQIeDMRRgAACR+w
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> The nature of the field cache itself means that the first 
> sort on a particular field can take a long, long time.  
> Synchronization won't really help that much.

I think you may be misunderstanding my description (probably because it was
not clear enough :). The issue is not that the first search is going to take
a while as this is clearly unavoidable. The issue I'm seeing is that when
there are a number of concurrent searches that start executing before the
cache has been populated they *all* end up doing the very expensive
ScoreDocComparator generation rather than just one of them doing the
generation and the rest simply blocking until that one is done. The more
concurrent searches and the longer the generation takes the worse the effect
becomes.

> There are two ways around this...
> 2) warm searchers in the background before exposing them to 
> live queries (the approach Solr takes).

This is basically how we are working around this issue, we don't actually
pre-warm the search results as we don't have a window in which to do this
but we do synchronize the FieldSortedHitQueue cache generation so it can
never gets executed more than once per index reader:

    private final Set<String> primedSortFields = new HashSet<String>();

    protected void primeCache(Sort sort) throws IOException {
        // This synchronized block allows us to be sure that a given sort
field is only primed once
        // per searcher rather than the multiple times Lucene may prime the
field if left to its
        // own devices (something we *really* want to avoid for big
indexes).
        synchronized (primedSortFields) {
            SortField[] sortFields = sort.getSort();
            for (int i = 0; i < sortFields.length; i++) {
                SortField sortField = sortFields[i];
                if (!primedSortFields.contains(sortField.getField())) {
                    primedSortFields.add(sortField.getField());
                    new FieldSortedHitQueue(getIndexReader(), new
SortField[] { sortField }, 0);
                }
            }
        }
    }

obviously this not ideal.

Thanks, 

Oliver





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 04:08:08 2006
Return-Path: <java-user-return-22568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54340 invoked from network); 9 Aug 2006 04:08:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 04:08:08 -0000
Received: (qmail 24118 invoked by uid 500); 9 Aug 2006 04:08:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24085 invoked by uid 500); 9 Aug 2006 04:08:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24074 invoked by uid 99); 9 Aug 2006 04:08:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Aug 2006 21:08:03 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Aug 2006 21:08:02 -0700
Received: (qmail 39703 invoked by uid 60001); 9 Aug 2006 04:07:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=o5WSzdTSZje1ffe2Vr13beQMCq9fQJ6YDY8Gz5A9wG6YDONb2E7lCMFg3MHZ9HbpNbLjuP0O09qcoPK88T6yaRYqCLPI4tjc7OI7u7OiYR9IrssOtp/PubHZ92wLaTo5Ra1nC0sHkZylx2FEOzW7gIS+lhwlX7eOHUA9jnTvaRk=  ;
Message-ID: <20060809040741.39701.qmail@web50307.mail.yahoo.com>
Received: from [72.229.167.99] by web50307.mail.yahoo.com via HTTP; Tue, 08 Aug 2006 21:07:41 PDT
Date: Tue, 8 Aug 2006 21:07:41 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
To: java-user@lucene.apache.org
In-Reply-To: <c450d5120608072305t863377ej2ce345261f3c9848@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Oliver,

I think Yonik simply misunderstood you in that earlier email.
Have you tried modifying that FieldSortedHitQueue class and making the appropriate method(s) synchronized?
It sounds like that would fix the issue. If it does, please let us know.

Otis

----- Original Message ----
From: hutchiko@gmail.com
To: java-user@lucene.apache.org
Sent: Tuesday, August 8, 2006 2:05:36 AM
Subject: Poor performance "race condition" in FieldSortedHitQueue

Hey all, just want to run an issue that I've recently identified while
looking at some performance issues we are having with our larger
indexes past you all.

Basically what we are seeing is that when there are a number of
concurrent searches being executed over a new IndexSearcher, the quite
expensive ScoreDocComparator generation that is done in the
FieldSortedHitQueue#getCachedComparator method ends up executing
multiple times rather the ideal case of once. This issue does not
effect the correctness of the searches only performance.

For my relatively weak understanding of the code the core of this
issue appears to lie with the FieldCacheImpl#getStringIndex method
which allows multiple concurrent requests to each generate their own
StringIndex rather than allowing the first request to do the
generation and then blocking subsequent requests until the first
request has finished.

Is this a know problem? Should I raise this as an issue or is this
"expected" behaviour. A solution would naturally require more
synchronization than is currently used but nothing particularly
complex.

Thanks,

Oliver

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 07:03:47 2006
Return-Path: <java-user-return-22569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99317 invoked from network); 9 Aug 2006 07:03:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 07:03:46 -0000
Received: (qmail 76220 invoked by uid 500); 9 Aug 2006 07:03:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76196 invoked by uid 500); 9 Aug 2006 07:03:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76185 invoked by uid 99); 9 Aug 2006 07:03:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 00:03:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 00:03:39 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.7/8.13.7) with ESMTP id k7973HlR163594
	for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 07:03:17 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7976v8V148376
	for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 09:06:57 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7973Hqg027173
	for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 09:03:17 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7973HNl027170
	for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 09:03:17 +0200
In-Reply-To: <20060809040741.39701.qmail@web50307.mail.yahoo.com>
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF1FCB4BC5.3A176ABD-ON882571C5.00231DE1-882571C5.0026B2FA@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 9 Aug 2006 00:02:41 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 09/08/2006 10:06:56
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Otis,

I think that synchronizing the entire method would be an overkill - instead
it would be sufficient to synchronize on a "by field" object so that only
if two requests for the same "cold/missing" field are racing, one of them
would wait for the other to complete loading that field.  I think there is
no need to that a lookup() for field2 would wait while a different field1
is being loaded.  I am not sure if IO wise it makes sense to serialize the
loading of two different fields (i.e. the case that both field1 and field2
are not in the readerCache), I would prefer not to.
One fast way to do this, for testing performance impact in Oliver's test
case, would be to sync on the interned field name. as follows:

  public StringIndex getStringIndex (IndexReader reader, String field)
  throws IOException {
    field = field.intern();
    synchronize(field) {  // < ----------- line added
      Object ret = lookup (reader, field, STRING_INDEX, null);
      if (ret == null) {
         final int[] retArray = new int[reader.maxDoc()];
         ... load field to cache ...
      }

This way only requests for (loading) the same field would wait. But for the
working code, it wouls be better to maintain a by-field (and by-reader)
object to avoid messing up with a system wide string - who knows who else
is synchronizing on it...

Hope this makes sense,
Doron

Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote on 08/08/2006 21:07:41:

> Hi Oliver,
>
> I think Yonik simply misunderstood you in that earlier email.
> Have you tried modifying that FieldSortedHitQueue class and making
> the appropriate method(s) synchronized?
> It sounds like that would fix the issue. If it does, please let us know.
>
> Otis
>
> ----- Original Message ----
> From: hutchiko@gmail.com
> To: java-user@lucene.apache.org
> Sent: Tuesday, August 8, 2006 2:05:36 AM
> Subject: Poor performance "race condition" in FieldSortedHitQueue
>
> Hey all, just want to run an issue that I've recently identified while
> looking at some performance issues we are having with our larger
> indexes past you all.
>
> Basically what we are seeing is that when there are a number of
> concurrent searches being executed over a new IndexSearcher, the quite
> expensive ScoreDocComparator generation that is done in the
> FieldSortedHitQueue#getCachedComparator method ends up executing
> multiple times rather the ideal case of once. This issue does not
> effect the correctness of the searches only performance.
>
> For my relatively weak understanding of the code the core of this
> issue appears to lie with the FieldCacheImpl#getStringIndex method
> which allows multiple concurrent requests to each generate their own
> StringIndex rather than allowing the first request to do the
> generation and then blocking subsequent requests until the first
> request has finished.
>
> Is this a know problem? Should I raise this as an issue or is this
> "expected" behaviour. A solution would naturally require more
> synchronization than is currently used but nothing particularly
> complex.
>
> Thanks,
>
> Oliver
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 08:04:59 2006
Return-Path: <java-user-return-22570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21593 invoked from network); 9 Aug 2006 08:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 08:04:59 -0000
Received: (qmail 51260 invoked by uid 500); 9 Aug 2006 08:04:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51233 invoked by uid 500); 9 Aug 2006 08:04:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51222 invoked by uid 99); 9 Aug 2006 08:04:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 01:04:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.90.213.186] (HELO netbreeze.ch) (212.90.213.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 01:04:51 -0700
Received: from [192.168.1.38] by netbreeze.ch
	(MDaemon PRO v9.0.1)
	with ESMTP id md50000015963.msg
	for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 10:03:52 +0200
Message-ID: <44D9968E.4060902@netbreeze.ch>
Date: Wed, 09 Aug 2006 10:02:22 +0200
From: Laurent Hoss <l.hoss@netbreeze.ch>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: "Field Grouping" query restrained to same field on a 'multi'-field'
References: <44D8BAEA.6010108@netbreeze.ch> <c68e39170608081103i1918323an286e33aece13f7e1@mail.gmail.com>
In-Reply-To: <c68e39170608081103i1918323an286e33aece13f7e1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Authenticated-Sender: l.hoss@netbreeze.ch
X-Spam-Processed: netbreeze.ch, Wed, 09 Aug 2006 10:03:52 +0200
	(not processed: message from valid local sender)
X-MDRemoteIP: 192.168.1.38
X-Return-Path: l.hoss@netbreeze.ch
X-MDaemon-Deliver-To: java-user@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> On 8/8/06, Laurent Hoss wrote:
>> Suppose having an Index containing Lucene documents, having multiple
>> fields (equally) named 'paragraph'.
>> Now I want to make a "Field Grouping" query (described in:
>> http://lucene.apache.org/java/docs/queryparsersyntax.html )
>>  "paragraph:( word1 AND word2 )"
>> retrieving only documents where the terms word1,word2 appear in the SAME
>> 'paragraph' Field (and not word1 in one 'paragraph' field, and word2
>> possibly in another 'paragraph' field in this doc).
>
> You could do this with the current query parser by putting large
> position increment gaps between paragraphs that is guaranteed to be
> larger than the largest paragraph.  Then you could use a sloppy phrase
> query
> "word1 word2"~10000 for instance.
>
> That would also score documents higher the closer together the words
> appeared (which may or may not be desirable).
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search 
> server
>
We had the same idea ;)
Unfortunatelly this only makes sense for simple AND/phrase Queries, but 
we also want more complex boolean queries like :
"nice cat" AND ("mouse" OR "rat" ) AND NOT ("dog")

Scoring right now doesn't interest us (!) , just whether it is a hit or 
not  (though I must admit it could improve the quality of our results , 
like for browsing the top xx results )
Therefor I would really like to know  if the 'feature' I had in mind , 
is feasible , maybe (only) when scoring is ignored  ?
(Btw, is there an option to switch off scoring ?  Could that improve 
performance in general?)

-Laurent



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 08:21:02 2006
Return-Path: <java-user-return-22571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42700 invoked from network); 9 Aug 2006 08:21:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 08:21:02 -0000
Received: (qmail 82982 invoked by uid 500); 9 Aug 2006 08:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82788 invoked by uid 500); 9 Aug 2006 08:20:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82777 invoked by uid 99); 9 Aug 2006 08:20:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 01:20:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 01:20:54 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id A8855289D0
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 18:20:31 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 9849C5340F1
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 18:20:31 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 17388-01-17 for <java-user@lucene.apache.org>;
 Wed,  9 Aug 2006 18:20:29 +1000 (EST)
Received: from OLIVERDESKTOP (unknown [192.168.0.40])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 7DAFD53403A
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 18:20:29 +1000 (EST)
From: "Oliver Hutchison" <ohutchison@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: Poor performance "race condition" in FieldSortedHitQueue
Date: Wed, 9 Aug 2006 18:20:19 +1000
Message-ID: <03f601c6bb8c$aca04d00$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <OF1FCB4BC5.3A176ABD-ON882571C5.00231DE1-882571C5.0026B2FA@il.ibm.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Aca7gfdAQ62cBYSfTxCupXDMs2kISQAANycQ
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis, Doron, thanks for the feedback. 

First up I'd just like to say that I totally agree with Doron on this - any
attempt to fix this issue needs to be done using as fine grain
synchronization as is possible or you'd just be introducing a new bottle
neck. 

It terms of the level of granularity, the work around I posted in my
previous email and the approach suggested by Doron are basically the same
(though Doron's code is certainly preferable) and I can certainly say that
synchronizing the object creation against the field name does solve the
problem. 

However I have another solution that I'm working on that may be cleaner - by
encapsulate the caching logic that is currently spread across FieldCacheImpl
and FieldSortedHitQueue it becomes quite easy to implement a more complex
but certainly more fine grained level of synchronization and we don't have
to worry about synchronizing against an interned String or using some other
trick to synchronize on the field name. 

I currently have:

public abstract class Cache {

	private final Map readerCache = new WeakHashMap();

	protected Cache() {
	}

	protected abstract Object createValue(IndexReader reader, Object
key)
			throws IOException;

	public Object get(IndexReader reader, Object key) throws IOException
{
		Map innerCache;
		Object value;
		synchronized (readerCache) {
			innerCache = (Map) readerCache.get(reader);
			// no inner cache create it
			if (innerCache == null) {
				innerCache = new HashMap();
				readerCache.put(reader, innerCache);
				value = null;
			} else {
				value = innerCache.get(key);
			}
			if (value == null) {
				value = new CreationPlaceholder();
				readerCache.put(reader, value);
			}
		}
		if (value instanceof CreationPlaceholder) {
			// must be one of the first threads to request this
value,
			// synchronize on the CreationPlaceholder so we
don't block
			// any other calls for different values
			CreationPlaceholder ph = (CreationPlaceholder)
value;
			synchronized (ph) {
				// if this thread is the very first one to
reach this point
				// then this test will be true and we should
do the creation
 				if (ph.value == null) {
					ph.value = createValue(reader, key);
					synchronized (readerCache) {
						innerCache.put(key,
ph.value);
					}
				}
				return ph.value;
			}
		}
		return value;
	}

	static final class CreationPlaceholder {
		Object value;
	}
}


class FieldCacheImpl implements FieldCache {

...

	public String[] getStrings(IndexReader reader, String field)
			throws IOException {
		return (String[]) stringsCache.get(reader, field);
	}

	Cache stringsCache = new Cache() {

		protected Object createValue(IndexReader reader, Object
fieldKey)
				throws IOException {
			String field = ((String) fieldKey).intern();

... create String[] ...

			return retArray;
		}
	};

	public StringIndex getStringIndex(IndexReader reader, String field)
			throws IOException {
		return (StringIndex) stringsIndexCache.get(reader, field);
	}

	Cache stringsIndexCache = new Cache() {

		protected Object createValue(IndexReader reader, Object
fieldKey)
				throws IOException {
			String field = ((String) fieldKey).intern();

... create StringIndex ...

			return value;
		}
	};

... etc
 
}

Is this an avenue worth pursuing further? Or are you guys happy to simply
synchronizing on the field?

Thanks again,

Oliver


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 09:29:46 2006
Return-Path: <java-user-return-22572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72211 invoked from network); 9 Aug 2006 09:29:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 09:29:46 -0000
Received: (qmail 84305 invoked by uid 500); 9 Aug 2006 09:29:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84272 invoked by uid 500); 9 Aug 2006 09:29:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84261 invoked by uid 99); 9 Aug 2006 09:29:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 02:29:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.54.76.193] (HELO ron.emn.fr) (193.54.76.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 02:29:38 -0700
Received: from spip.dsic.emn.fr (root@spip.dsic.emn.fr [193.104.32.156])
          by ron.emn.fr (8.9.3/jtpda-5.3.1) with ESMTP id LAA16369
          for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 11:28:08 +0200 (CEST)
Received: from ifs.emn.fr (ifs.emn.fr [193.54.76.100])
	by spip.dsic.emn.fr (8.12.1/8.12.1) with ESMTP id k799T6bT029785
	for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 11:29:06 +0200
Received: from [192.168.18.35] (dhcp35.rech18.emn.fr [192.168.18.35])
          by ifs.emn.fr (8.9.3/jtpda-5.1) with ESMTP id LAA21382
          for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 11:27:40 +0200 (MEST)
Message-ID: <44D9AADF.2090904@emn.fr>
Date: Wed, 09 Aug 2006 11:29:03 +0200
From: "ould sid'ahmed" <nouldsid@emn.fr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: research lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I don't arrive to get result from the field have a value numeric for 
example "date=2005" or "title=900",
I have indexed the fields "date" with String value. I want know why?

Can you help me?

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 11:45:40 2006
Return-Path: <java-user-return-22573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18775 invoked from network); 9 Aug 2006 11:45:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 11:45:39 -0000
Received: (qmail 65240 invoked by uid 500); 9 Aug 2006 11:45:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65203 invoked by uid 500); 9 Aug 2006 11:45:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65192 invoked by uid 99); 9 Aug 2006 11:45:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 04:45:32 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.151.11.161] (HELO smtp.ya.com) (62.151.11.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 04:45:30 -0700
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1GAmUm-0006Ut-00
	for java-user@lucene.apache.org; Wed, 09 Aug 2006 13:45:08 +0200
Message-ID: <14e001c6bba9$74a40050$1e8e10ac@ecommerce.tspain.local>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
Subject: custom sort
Date: Wed, 9 Aug 2006 13:46:30 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_14DD_01C6BBBA.3819BD80"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_14DD_01C6BBBA.3819BD80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
I want to execute a query searching a few terms=20

QueryParser queryParser =3D new MultiFieldQueryParser(new String[] =
{"tags", "title"}, ProcessConstants.analyzer);
Query query =3D queryParser.parse("rocio ortega");

and I want to obtain the results sorted by the number of founded terms, =
but not considering other factors like the number of times found each =
term. =BFHow can I do this?

SortField.FIELD_SCORE doesn=B4t work for this because I think it =
consider other factors like the number of times found each term.

Thanks

------=_NextPart_000_14DD_01C6BBBA.3819BD80--


From java-user-return-22574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 13:23:17 2006
Return-Path: <java-user-return-22574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54840 invoked from network); 9 Aug 2006 13:23:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 13:23:17 -0000
Received: (qmail 74623 invoked by uid 500); 9 Aug 2006 13:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74599 invoked by uid 500); 9 Aug 2006 13:23:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74566 invoked by uid 99); 9 Aug 2006 13:23:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:23:10 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:23:08 -0700
Received: (qmail 20067 invoked by uid 509); 9 Aug 2006 15:22:43 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.068514 secs); 09 Aug 2006 13:22:43 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.068514 secs Process 20058)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 9 Aug 2006 15:22:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: Lucene hits.length()
Date: Wed, 9 Aug 2006 15:22:33 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C021E5643@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene hits.length()
Thread-Index: Aca7C+Fj84tw2IeNS6OJqpghPBbraAAqt/qg
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm opening a new searcher every 3:rd minute.=20

-----Ursprungligt meddelande-----
Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]=20
Skickat: den 8 augusti 2006 18:58
Till: java-user@lucene.apache.org
=C4mne: Re: Lucene hits.length()

I'll take a stab at it.... When are you opening/closing your searcher? =
When
you open a searcher, you get a snapshot of the index at that instant, =
and
subsequent modifications aren't visible until you open a new searcher =
(at
least I think I've got this right).

And I'm sure this also interacts with the writer merge settings
"interestingly".

Personally, I'd worry about this a lot more if it happened after I'd =
closed
my writer and opened a new reader <G>...
Of course, my app has an index that is updated rarely (every two weeks), =
so
I haven't dug into too many details in this area...


Best
Erick

On 8/8/06, Marcus Falck <marcus.falck@observer.se> wrote:
>
> I have noticed some strange behavior when searching my lucene index.
>
>
>
> I'm adding 500.000 docs to an index.
>
>
>
> MergeFactor =3D 10
>
> MinMerge =3D 5000
>
>
>
> When 49999 have been added ( just before the first 10 * 5000 merge ) =
the
> hits.length() is reporting around 1000 hits for a keyword (which by =
the
> way is around the same count as with 5000 docs added). After the =
10*5000
> merge the hits.length() returns around 8000 hits, which seems to be a
> lot more reasonable. Since I'm adding content in date order ( oldest
> first ) I have also tried to sort the hits (newest date first) and
> display the top 10 hits.
>
>
>
> According to that output it seems that the documents are added
> correctly.
>
>
>
> I'm using a multisearcher on top of a RAMDir and an FSDir. Using
> Lucene1.4.3
>
>
>
> Anybody that has any idea about why the hit count is so misleading?
>
>
>
> /
>
> Regards
>
> Marcus
>
>
>
>
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 13:32:44 2006
Return-Path: <java-user-return-22575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58904 invoked from network); 9 Aug 2006 13:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 13:32:44 -0000
Received: (qmail 1392 invoked by uid 500); 9 Aug 2006 13:32:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1360 invoked by uid 500); 9 Aug 2006 13:32:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1346 invoked by uid 99); 9 Aug 2006 13:32:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:32:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:32:37 -0700
Received: by py-out-1112.google.com with SMTP id s49so359065pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 06:32:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZAIkfnuT5ZxohzD8bBSQQtccJIMHdNRy3mJasp9olibAToY6tU9uWiCuli4DfT/GXvhiEHsCgsWYv7ON6qRQwYRzJjnY/WNAOuhEH7a4ZGYdieNFHXZlcruoCRWbN1LljDs1styXCly/Idj4tvzBLr/ZmrSV5BK6ADz50Hpalbg=
Received: by 10.35.113.12 with SMTP id q12mr1530963pym;
        Wed, 09 Aug 2006 06:32:15 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 9 Aug 2006 06:32:14 -0700 (PDT)
Message-ID: <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>
Date: Wed, 9 Aug 2006 09:32:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: research lucene
In-Reply-To: <44D9AADF.2090904@emn.fr>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_84985_5587311.1155130334931"
References: <44D9AADF.2090904@emn.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_84985_5587311.1155130334931
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What analyzers are you using for both indexing and searching? Some analyzers
strip out numbers and some don't. I'd start with WhitespaceAnalyzer, and
index your fields UN_TOKENIZED and work up to the other analyzers and/or
tokenizations from there.

Under any circumstances, you really, really, really want to get a copy of
Luke (http://www.getopt.org/luke/) which will allow you to examine your
index to see what it actually contains. I've been surprised more than once
by thinking that my index contained something it really hadn't.

Best
Erick

On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>
> Hello,
>
> I don't arrive to get result from the field have a value numeric for
> example "date=2005" or "title=900",
> I have indexed the fields "date" with String value. I want know why?
>
> Can you help me?
>
> thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_84985_5587311.1155130334931--

From java-user-return-22576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 13:34:30 2006
Return-Path: <java-user-return-22576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59846 invoked from network); 9 Aug 2006 13:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 13:34:29 -0000
Received: (qmail 6971 invoked by uid 500); 9 Aug 2006 13:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6667 invoked by uid 500); 9 Aug 2006 13:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6646 invoked by uid 99); 9 Aug 2006 13:34:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:34:18 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:34:15 -0700
Received: by py-out-1112.google.com with SMTP id s49so359617pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 06:33:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E8YiLWNXsYBhf9U4mkvKAkSbtrBqC/2qL4J+qDH8TJPw4NaTH/JIUWYbXzMII0wP0tzgyjW10s/qY/UUGjnfjNxf+Ook08BOo9cZ16H0UGQ5m64gRhI7JmOmB5BlbxXxI1yEYl4udeIY1it6TILxjmou1Tlf94FI3yMxl0dFGcs=
Received: by 10.35.39.2 with SMTP id r2mr1604309pyj;
        Wed, 09 Aug 2006 06:33:52 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 9 Aug 2006 06:33:52 -0700 (PDT)
Message-ID: <359a92830608090633m305ba85cn51c61adec9b720b6@mail.gmail.com>
Date: Wed, 9 Aug 2006 09:33:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene hits.length()
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C021E5643@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85021_11491623.1155130432762"
References: <8834A84C87A2C148AD46921BB8BFC97C021E5643@S1SE1MAIL.emea1.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_85021_11491623.1155130432762
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Then you won't see anything added to your index between times. Does this
identify your problem or are you still worried?

Erick

On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
>
> I'm opening a new searcher every 3:rd minute.
>
> -----Ursprungligt meddelande-----
> Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> Skickat: den 8 augusti 2006 18:58
> Till: java-user@lucene.apache.org
> =C4mne: Re: Lucene hits.length()
>
> I'll take a stab at it.... When are you opening/closing your searcher?
> When
> you open a searcher, you get a snapshot of the index at that instant, and
> subsequent modifications aren't visible until you open a new searcher (at
> least I think I've got this right).
>
> And I'm sure this also interacts with the writer merge settings
> "interestingly".
>
> Personally, I'd worry about this a lot more if it happened after I'd
> closed
> my writer and opened a new reader <G>...
> Of course, my app has an index that is updated rarely (every two weeks),
> so
> I haven't dug into too many details in this area...
>
>
> Best
> Erick
>
> On 8/8/06, Marcus Falck <marcus.falck@observer.se> wrote:
> >
> > I have noticed some strange behavior when searching my lucene index.
> >
> >
> >
> > I'm adding 500.000 docs to an index.
> >
> >
> >
> > MergeFactor =3D 10
> >
> > MinMerge =3D 5000
> >
> >
> >
> > When 49999 have been added ( just before the first 10 * 5000 merge ) th=
e
> > hits.length() is reporting around 1000 hits for a keyword (which by the
> > way is around the same count as with 5000 docs added). After the 10*500=
0
> > merge the hits.length() returns around 8000 hits, which seems to be a
> > lot more reasonable. Since I'm adding content in date order ( oldest
> > first ) I have also tried to sort the hits (newest date first) and
> > display the top 10 hits.
> >
> >
> >
> > According to that output it seems that the documents are added
> > correctly.
> >
> >
> >
> > I'm using a multisearcher on top of a RAMDir and an FSDir. Using
> > Lucene1.4.3
> >
> >
> >
> > Anybody that has any idea about why the hit count is so misleading?
> >
> >
> >
> > /
> >
> > Regards
> >
> > Marcus
> >
> >
> >
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_85021_11491623.1155130432762--

From java-user-return-22577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 13:44:10 2006
Return-Path: <java-user-return-22577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62540 invoked from network); 9 Aug 2006 13:44:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 13:44:10 -0000
Received: (qmail 23371 invoked by uid 500); 9 Aug 2006 13:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23351 invoked by uid 500); 9 Aug 2006 13:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23339 invoked by uid 99); 9 Aug 2006 13:44:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:44:04 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 06:44:02 -0700
Received: (qmail 22816 invoked by uid 509); 9 Aug 2006 15:43:40 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.071315 secs); 09 Aug 2006 13:43:40 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.071315 secs Process 22810)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 9 Aug 2006 15:43:40 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: Lucene hits.length()
Date: Wed, 9 Aug 2006 15:43:28 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C021E567A@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene hits.length()
Thread-Index: Aca7uJL+8pOHeqXuTZu2pPNLL/ADqQAAR2/Q
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Still worried =3D)
You see it doesn't update the hits.length() in a correct way when I =
create a new searcher. The correct update does just occur in the merges. =
=3D/

-----Ursprungligt meddelande-----
Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]=20
Skickat: den 9 augusti 2006 15:34
Till: java-user@lucene.apache.org
=C4mne: Re: Lucene hits.length()

Then you won't see anything added to your index between times. Does this
identify your problem or are you still worried?

Erick

On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
>
> I'm opening a new searcher every 3:rd minute.
>
> -----Ursprungligt meddelande-----
> Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> Skickat: den 8 augusti 2006 18:58
> Till: java-user@lucene.apache.org
> =C4mne: Re: Lucene hits.length()
>
> I'll take a stab at it.... When are you opening/closing your searcher?
> When
> you open a searcher, you get a snapshot of the index at that instant, =
and
> subsequent modifications aren't visible until you open a new searcher =
(at
> least I think I've got this right).
>
> And I'm sure this also interacts with the writer merge settings
> "interestingly".
>
> Personally, I'd worry about this a lot more if it happened after I'd
> closed
> my writer and opened a new reader <G>...
> Of course, my app has an index that is updated rarely (every two =
weeks),
> so
> I haven't dug into too many details in this area...
>
>
> Best
> Erick
>
> On 8/8/06, Marcus Falck <marcus.falck@observer.se> wrote:
> >
> > I have noticed some strange behavior when searching my lucene index.
> >
> >
> >
> > I'm adding 500.000 docs to an index.
> >
> >
> >
> > MergeFactor =3D 10
> >
> > MinMerge =3D 5000
> >
> >
> >
> > When 49999 have been added ( just before the first 10 * 5000 merge ) =
the
> > hits.length() is reporting around 1000 hits for a keyword (which by =
the
> > way is around the same count as with 5000 docs added). After the =
10*5000
> > merge the hits.length() returns around 8000 hits, which seems to be =
a
> > lot more reasonable. Since I'm adding content in date order ( oldest
> > first ) I have also tried to sort the hits (newest date first) and
> > display the top 10 hits.
> >
> >
> >
> > According to that output it seems that the documents are added
> > correctly.
> >
> >
> >
> > I'm using a multisearcher on top of a RAMDir and an FSDir. Using
> > Lucene1.4.3
> >
> >
> >
> > Anybody that has any idea about why the hit count is so misleading?
> >
> >
> >
> > /
> >
> > Regards
> >
> > Marcus
> >
> >
> >
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 14:29:48 2006
Return-Path: <java-user-return-22578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78119 invoked from network); 9 Aug 2006 14:29:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 14:29:47 -0000
Received: (qmail 41642 invoked by uid 500); 9 Aug 2006 14:29:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41621 invoked by uid 500); 9 Aug 2006 14:29:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41610 invoked by uid 99); 9 Aug 2006 14:29:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:29:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.54.76.193] (HELO ron.emn.fr) (193.54.76.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:29:39 -0700
Received: from spip.dsic.emn.fr (root@spip.dsic.emn.fr [193.104.32.156])
          by ron.emn.fr (8.9.3/jtpda-5.3.1) with ESMTP id QAA03223
          for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 16:28:06 +0200 (CEST)
Received: from ifs.emn.fr (ifs.emn.fr [193.54.76.100])
	by spip.dsic.emn.fr (8.12.1/8.12.1) with ESMTP id k79ET8bT016687
	for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 16:29:08 +0200
Received: from [192.168.18.35] (dhcp35.rech18.emn.fr [192.168.18.35])
          by ifs.emn.fr (8.9.3/jtpda-5.1) with ESMTP id QAA12531
          for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 16:27:42 +0200 (MEST)
Message-ID: <44D9F131.8@emn.fr>
Date: Wed, 09 Aug 2006 16:29:05 +0200
From: "ould sid'ahmed" <nouldsid@emn.fr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: research lucene
References: <44D9AADF.2090904@emn.fr> <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>
In-Reply-To: <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick Erickson a écrit :
> What analyzers are you using for both indexing and searching? Some 
> analyzers
> strip out numbers and some don't. I'd start with WhitespaceAnalyzer, and
> index your fields UN_TOKENIZED and work up to the other analyzers and/or
> tokenizations from there.
>
> Under any circumstances, you really, really, really want to get a copy of
> Luke (http://www.getopt.org/luke/) which will allow you to examine your
> index to see what it actually contains. I've been surprised more than 
> once
> by thinking that my index contained something it really hadn't.
>
> Best
> Erick
>
> On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>>
>> Hello,
>>
>> I don't arrive to get result from the field have a value numeric for
>> example "date=2005" or "title=900",
>> I have indexed the fields "date" with String value. I want know why?
>>
>> Can you help me?
>>
>> thanks.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
thanks for your response and your soft,
you think what about the indexer that can resolve my problem.
my problem is the indexer, it don't index value numeric.

thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 14:57:44 2006
Return-Path: <java-user-return-22579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88332 invoked from network); 9 Aug 2006 14:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 14:57:44 -0000
Received: (qmail 5309 invoked by uid 500); 9 Aug 2006 14:57:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5287 invoked by uid 500); 9 Aug 2006 14:57:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5276 invoked by uid 99); 9 Aug 2006 14:57:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:57:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 07:57:36 -0700
Received: by ug-out-1314.google.com with SMTP id y2so126828uge
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 07:57:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IPhGbOpt29QOvSVBwQXRI9PWujPM21oonelSYxfb0wpHRJmF5pqZVbN1yVoPc6lIAfxj+gscrx5J/dVrzANgHPAq8gobt5CaPlfjEzZVt8hAB+R0ll94kfUd8cokzD/IOFutUqdhsmmn6RVi3kMkmeFadzY6Fy6WyKzOlhCKJFg=
Received: by 10.67.22.2 with SMTP id z2mr1051233ugi;
        Wed, 09 Aug 2006 07:57:14 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Wed, 9 Aug 2006 07:57:14 -0700 (PDT)
Message-ID: <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>
Date: Wed, 9 Aug 2006 16:57:14 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: research lucene
In-Reply-To: <44D9F131.8@emn.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <44D9AADF.2090904@emn.fr>
	 <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>
	 <44D9F131.8@emn.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

WW91IHNob3VsZCByYXRoZXIgZXhwbGFpbiB3aGF0IHlvdSBleHBlY3QgZnJvbSBpbmRleGluZyB5
b3VyIG51bWJlcgpub3QgYXMgc3RyaW5nIHZhbHVlcy4KCmJlc3QgcmVnYXJkcyBzaW1vbgoKT24g
OC85LzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRAZW1uLmZyPiB3cm90ZToKPiBFcmljayBF
cmlja3NvbiBhIMOpY3JpdCA6Cj4gPiBXaGF0IGFuYWx5emVycyBhcmUgeW91IHVzaW5nIGZvciBi
b3RoIGluZGV4aW5nIGFuZCBzZWFyY2hpbmc/IFNvbWUKPiA+IGFuYWx5emVycwo+ID4gc3RyaXAg
b3V0IG51bWJlcnMgYW5kIHNvbWUgZG9uJ3QuIEknZCBzdGFydCB3aXRoIFdoaXRlc3BhY2VBbmFs
eXplciwgYW5kCj4gPiBpbmRleCB5b3VyIGZpZWxkcyBVTl9UT0tFTklaRUQgYW5kIHdvcmsgdXAg
dG8gdGhlIG90aGVyIGFuYWx5emVycyBhbmQvb3IKPiA+IHRva2VuaXphdGlvbnMgZnJvbSB0aGVy
ZS4KPiA+Cj4gPiBVbmRlciBhbnkgY2lyY3Vtc3RhbmNlcywgeW91IHJlYWxseSwgcmVhbGx5LCBy
ZWFsbHkgd2FudCB0byBnZXQgYSBjb3B5IG9mCj4gPiBMdWtlIChodHRwOi8vd3d3LmdldG9wdC5v
cmcvbHVrZS8pIHdoaWNoIHdpbGwgYWxsb3cgeW91IHRvIGV4YW1pbmUgeW91cgo+ID4gaW5kZXgg
dG8gc2VlIHdoYXQgaXQgYWN0dWFsbHkgY29udGFpbnMuIEkndmUgYmVlbiBzdXJwcmlzZWQgbW9y
ZSB0aGFuCj4gPiBvbmNlCj4gPiBieSB0aGlua2luZyB0aGF0IG15IGluZGV4IGNvbnRhaW5lZCBz
b21ldGhpbmcgaXQgcmVhbGx5IGhhZG4ndC4KPiA+Cj4gPiBCZXN0Cj4gPiBFcmljawo+ID4KPiA+
IE9uIDgvOS8wNiwgb3VsZCBzaWQnYWhtZWQgPG5vdWxkc2lkQGVtbi5mcj4gd3JvdGU6Cj4gPj4K
PiA+PiBIZWxsbywKPiA+Pgo+ID4+IEkgZG9uJ3QgYXJyaXZlIHRvIGdldCByZXN1bHQgZnJvbSB0
aGUgZmllbGQgaGF2ZSBhIHZhbHVlIG51bWVyaWMgZm9yCj4gPj4gZXhhbXBsZSAiZGF0ZT0yMDA1
IiBvciAidGl0bGU9OTAwIiwKPiA+PiBJIGhhdmUgaW5kZXhlZCB0aGUgZmllbGRzICJkYXRlIiB3
aXRoIFN0cmluZyB2YWx1ZS4gSSB3YW50IGtub3cgd2h5Pwo+ID4+Cj4gPj4gQ2FuIHlvdSBoZWxw
IG1lPwo+ID4+Cj4gPj4gdGhhbmtzLgo+ID4+Cj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPj4gVG8gdW5z
dWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3Jn
Cj4gPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVj
ZW5lLmFwYWNoZS5vcmcKPiA+Pgo+ID4+Cj4gPgo+IHRoYW5rcyBmb3IgeW91ciByZXNwb25zZSBh
bmQgeW91ciBzb2Z0LAo+IHlvdSB0aGluayB3aGF0IGFib3V0IHRoZSBpbmRleGVyIHRoYXQgY2Fu
IHJlc29sdmUgbXkgcHJvYmxlbS4KPiBteSBwcm9ibGVtIGlzIHRoZSBpbmRleGVyLCBpdCBkb24n
dCBpbmRleCB2YWx1ZSBudW1lcmljLgo+Cj4gdGhhbmtzLgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZwo+Cj4K


From java-user-return-22580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 15:27:53 2006
Return-Path: <java-user-return-22580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1556 invoked from network); 9 Aug 2006 15:27:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 15:27:53 -0000
Received: (qmail 81715 invoked by uid 500); 9 Aug 2006 15:27:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81688 invoked by uid 500); 9 Aug 2006 15:27:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81677 invoked by uid 99); 9 Aug 2006 15:27:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 08:27:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.54.76.193] (HELO ron.emn.fr) (193.54.76.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 08:27:45 -0700
Received: from spip.dsic.emn.fr (root@spip.dsic.emn.fr [193.104.32.156])
          by ron.emn.fr (8.9.3/jtpda-5.3.1) with ESMTP id RAA06387
          for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 17:26:15 +0200 (CEST)
Received: from ifs.emn.fr (ifs.emn.fr [193.54.76.100])
	by spip.dsic.emn.fr (8.12.1/8.12.1) with ESMTP id k79FRHbT024706
	for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 17:27:17 +0200
Received: from [192.168.18.35] (dhcp35.rech18.emn.fr [192.168.18.35])
          by ifs.emn.fr (8.9.3/jtpda-5.1) with ESMTP id RAA22269
          for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 17:25:51 +0200 (MEST)
Message-ID: <44D9FED3.1080708@emn.fr>
Date: Wed, 09 Aug 2006 17:27:15 +0200
From: "ould sid'ahmed" <nouldsid@emn.fr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: research lucene
References: <44D9AADF.2090904@emn.fr>	 <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>	 <44D9F131.8@emn.fr> <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>
In-Reply-To: <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Simon Willnauer a Ã©crit :
> You should rather explain what you expect from indexing your number
> not as string values.
>
> best regards simon
>
> On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> Erick Erickson a Ã©crit :
>> > What analyzers are you using for both indexing and searching? Some
>> > analyzers
>> > strip out numbers and some don't. I'd start with 
>> WhitespaceAnalyzer, and
>> > index your fields UN_TOKENIZED and work up to the other analyzers 
>> and/or
>> > tokenizations from there.
>> >
>> > Under any circumstances, you really, really, really want to get a 
>> copy of
>> > Luke (http://www.getopt.org/luke/) which will allow you to examine 
>> your
>> > index to see what it actually contains. I've been surprised more than
>> > once
>> > by thinking that my index contained something it really hadn't.
>> >
>> > Best
>> > Erick
>> >
>> > On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >>
>> >> Hello,
>> >>
>> >> I don't arrive to get result from the field have a value numeric for
>> >> example "date=2005" or "title=900",
>> >> I have indexed the fields "date" with String value. I want know why?
>> >>
>> >> Can you help me?
>> >>
>> >> thanks.
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> thanks for your response and your soft,
>> you think what about the indexer that can resolve my problem.
>> my problem is the indexer, it don't index value numeric.
>>
>> thanks.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
I  add my document
Document doc=new Document();
doc.add(new Field( getName(), value, getStore(), getIndex()));
and getName can be "date, name, tilte, or another", but can if I index 
title with the value "122" or another, It can't return me a result, if I 
index title with "mytitre" for example, it return me the result, I would 
like why?

thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 15:33:20 2006
Return-Path: <java-user-return-22581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4148 invoked from network); 9 Aug 2006 15:33:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 15:33:20 -0000
Received: (qmail 93289 invoked by uid 500); 9 Aug 2006 15:33:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93267 invoked by uid 500); 9 Aug 2006 15:33:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93208 invoked by uid 99); 9 Aug 2006 15:33:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 08:33:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 08:33:12 -0700
Received: by ug-out-1314.google.com with SMTP id y2so135780uge
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 08:32:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HKc/zQ3ANUCjkiQWHge9NfX3tnFXHV0ywFvgdg08+vZ/G+R3GvOClZrLVSOI/b9amRcoQqdbdc8CPvEN1pjSp2aTZsOSoKvst2gPrQderMp0L3rm5WJlAUIFBfIGpD4bvElfNol/TnncgAIzQaG4RrvRukaubH0yw3tsUwJCxic=
Received: by 10.67.24.13 with SMTP id b13mr1105081ugj;
        Wed, 09 Aug 2006 08:32:51 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Wed, 9 Aug 2006 08:32:51 -0700 (PDT)
Message-ID: <f18c9dde0608090832q2812c9f8y3621229d3dde8e0@mail.gmail.com>
Date: Wed, 9 Aug 2006 17:32:51 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: research lucene
In-Reply-To: <44D9FED3.1080708@emn.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <44D9AADF.2090904@emn.fr>
	 <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>
	 <44D9F131.8@emn.fr>
	 <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>
	 <44D9FED3.1080708@emn.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

V2VsbCB5b3VyIGRpZ2l0cyBtaWdodCBiZSBsb3N0IGR1cmluZyBhbmFseXNpcyBsaWtlIEVyaWsg
c2FpZC4gQ2hlY2sKb3V0IHdpdGggbHVrZSB3aGF0cyBpbiB5b3VyIGluZGV4IChGaWVsZC5TdG9y
ZS5ZZXMpIGFuZCBzZWUgaWYgeW91cgphbmFseXplciByZW1vdmVzIHRoZSBkaWdpdHMuIFNpbXBs
ZUFuYWx5emVyIHJlbW92ZXMgdGhlbSBidXQKU3RhbmRhcnRBbmFseXplciBrZWVwcyB0aGUgZGln
aXRzLgoKcmVnYXJkcyBzaW1vbgoKT24gOC85LzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRA
ZW1uLmZyPiB3cm90ZToKPiBTaW1vbiBXaWxsbmF1ZXIgYSDDqWNyaXQgOgo+ID4gWW91IHNob3Vs
ZCByYXRoZXIgZXhwbGFpbiB3aGF0IHlvdSBleHBlY3QgZnJvbSBpbmRleGluZyB5b3VyIG51bWJl
cgo+ID4gbm90IGFzIHN0cmluZyB2YWx1ZXMuCj4gPgo+ID4gYmVzdCByZWdhcmRzIHNpbW9uCj4g
Pgo+ID4gT24gOC85LzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRAZW1uLmZyPiB3cm90ZToK
PiA+PiBFcmljayBFcmlja3NvbiBhIMOpY3JpdCA6Cj4gPj4gPiBXaGF0IGFuYWx5emVycyBhcmUg
eW91IHVzaW5nIGZvciBib3RoIGluZGV4aW5nIGFuZCBzZWFyY2hpbmc/IFNvbWUKPiA+PiA+IGFu
YWx5emVycwo+ID4+ID4gc3RyaXAgb3V0IG51bWJlcnMgYW5kIHNvbWUgZG9uJ3QuIEknZCBzdGFy
dCB3aXRoCj4gPj4gV2hpdGVzcGFjZUFuYWx5emVyLCBhbmQKPiA+PiA+IGluZGV4IHlvdXIgZmll
bGRzIFVOX1RPS0VOSVpFRCBhbmQgd29yayB1cCB0byB0aGUgb3RoZXIgYW5hbHl6ZXJzCj4gPj4g
YW5kL29yCj4gPj4gPiB0b2tlbml6YXRpb25zIGZyb20gdGhlcmUuCj4gPj4gPgo+ID4+ID4gVW5k
ZXIgYW55IGNpcmN1bXN0YW5jZXMsIHlvdSByZWFsbHksIHJlYWxseSwgcmVhbGx5IHdhbnQgdG8g
Z2V0IGEKPiA+PiBjb3B5IG9mCj4gPj4gPiBMdWtlIChodHRwOi8vd3d3LmdldG9wdC5vcmcvbHVr
ZS8pIHdoaWNoIHdpbGwgYWxsb3cgeW91IHRvIGV4YW1pbmUKPiA+PiB5b3VyCj4gPj4gPiBpbmRl
eCB0byBzZWUgd2hhdCBpdCBhY3R1YWxseSBjb250YWlucy4gSSd2ZSBiZWVuIHN1cnByaXNlZCBt
b3JlIHRoYW4KPiA+PiA+IG9uY2UKPiA+PiA+IGJ5IHRoaW5raW5nIHRoYXQgbXkgaW5kZXggY29u
dGFpbmVkIHNvbWV0aGluZyBpdCByZWFsbHkgaGFkbid0Lgo+ID4+ID4KPiA+PiA+IEJlc3QKPiA+
PiA+IEVyaWNrCj4gPj4gPgo+ID4+ID4gT24gOC85LzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRz
aWRAZW1uLmZyPiB3cm90ZToKPiA+PiA+Pgo+ID4+ID4+IEhlbGxvLAo+ID4+ID4+Cj4gPj4gPj4g
SSBkb24ndCBhcnJpdmUgdG8gZ2V0IHJlc3VsdCBmcm9tIHRoZSBmaWVsZCBoYXZlIGEgdmFsdWUg
bnVtZXJpYyBmb3IKPiA+PiA+PiBleGFtcGxlICJkYXRlPTIwMDUiIG9yICJ0aXRsZT05MDAiLAo+
ID4+ID4+IEkgaGF2ZSBpbmRleGVkIHRoZSBmaWVsZHMgImRhdGUiIHdpdGggU3RyaW5nIHZhbHVl
LiBJIHdhbnQga25vdyB3aHk/Cj4gPj4gPj4KPiA+PiA+PiBDYW4geW91IGhlbHAgbWU/Cj4gPj4g
Pj4KPiA+PiA+PiB0aGFua3MuCj4gPj4gPj4KPiA+PiA+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+PiA+PiBU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcKPiA+PiA+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXIt
aGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+ID4+Cj4gPj4gPj4KPiA+PiA+Cj4gPj4gdGhhbmtz
IGZvciB5b3VyIHJlc3BvbnNlIGFuZCB5b3VyIHNvZnQsCj4gPj4geW91IHRoaW5rIHdoYXQgYWJv
dXQgdGhlIGluZGV4ZXIgdGhhdCBjYW4gcmVzb2x2ZSBteSBwcm9ibGVtLgo+ID4+IG15IHByb2Js
ZW0gaXMgdGhlIGluZGV4ZXIsIGl0IGRvbid0IGluZGV4IHZhbHVlIG51bWVyaWMuCj4gPj4KPiA+
PiB0aGFua3MuCj4gPj4KPiA+Pgo+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4+IFRvIHVuc3Vic2NyaWJl
LCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+IEZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnCj4gPj4KPiA+Pgo+ID4KPiBJICBhZGQgbXkgZG9jdW1lbnQKPiBEb2N1bWVudCBkb2M9
bmV3IERvY3VtZW50KCk7Cj4gZG9jLmFkZChuZXcgRmllbGQoIGdldE5hbWUoKSwgdmFsdWUsIGdl
dFN0b3JlKCksIGdldEluZGV4KCkpKTsKPiBhbmQgZ2V0TmFtZSBjYW4gYmUgImRhdGUsIG5hbWUs
IHRpbHRlLCBvciBhbm90aGVyIiwgYnV0IGNhbiBpZiBJIGluZGV4Cj4gdGl0bGUgd2l0aCB0aGUg
dmFsdWUgIjEyMiIgb3IgYW5vdGhlciwgSXQgY2FuJ3QgcmV0dXJuIG1lIGEgcmVzdWx0LCBpZiBJ
Cj4gaW5kZXggdGl0bGUgd2l0aCAibXl0aXRyZSIgZm9yIGV4YW1wbGUsIGl0IHJldHVybiBtZSB0
aGUgcmVzdWx0LCBJIHdvdWxkCj4gbGlrZSB3aHk/Cj4KPiB0aGFua3MuCj4KPgo+IC0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNl
bmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNl
ci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=


From java-user-return-22582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 17:49:57 2006
Return-Path: <java-user-return-22582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54669 invoked from network); 9 Aug 2006 17:49:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 17:49:57 -0000
Received: (qmail 79921 invoked by uid 500); 9 Aug 2006 17:49:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79899 invoked by uid 500); 9 Aug 2006 17:49:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79888 invoked by uid 99); 9 Aug 2006 17:49:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 10:49:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 10:49:48 -0700
Received: by py-out-1112.google.com with SMTP id s49so445107pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 10:49:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eheBOmAU/FGpc6pGYhTCCTu3te/lfnk02OV6xsoeJgTaiZxBWg29C+arWmftZtDtpMSNAMHDS0ux+laApVKucdB15QFolLzeeOrogyyeb1cpTtwL233nIjoFnKu4VKJbcu+ltqliRrkFZJmu9ZH6LCc7heeudpfv5I3zSpXBY7w=
Received: by 10.35.40.10 with SMTP id s10mr1988923pyj;
        Wed, 09 Aug 2006 10:49:27 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 9 Aug 2006 10:49:25 -0700 (PDT)
Message-ID: <359a92830608091049v213b924bl19610bd83167581a@mail.gmail.com>
Date: Wed, 9 Aug 2006 13:49:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene hits.length()
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C021E567A@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_90483_21914232.1155145765482"
References: <8834A84C87A2C148AD46921BB8BFC97C021E567A@S1SE1MAIL.emea1.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_90483_21914232.1155145765482
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I think, but am not certain (chime in here guys) that this is expected
behavior. As I remember from various threads, internally indexing uses a
RAMdir to accumulate data until it merges it with the FSDir. Since the
searcher and indexer are separate, I assume that the searcher is looking at
the snapshot that is on disk and missing that in the RAMdir. After you
merge, the RAMdir data has been added to that on disk, and the two are "in
synch".

So I guess my real question is "why do you care"? Is this affecting your
application or is this an anomaly that you want to understand so you don't
get surprised? If the latter, I think you're OK if you open your index afte=
r
merging, you'll have the data available....

BTW, I assume that when you say hits.length() is not correct, you're gettin=
g
fewer hits than you *know* are in the index (including the stuff you're
currently indexing but haven't merged yet).

Best
Erick



On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
>
> Still worried =3D)
> You see it doesn't update the hits.length() in a correct way when I creat=
e
> a new searcher. The correct update does just occur in the merges. =3D/
>
> -----Ursprungligt meddelande-----
> Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> Skickat: den 9 augusti 2006 15:34
> Till: java-user@lucene.apache.org
> =C4mne: Re: Lucene hits.length()
>
> Then you won't see anything added to your index between times. Does this
> identify your problem or are you still worried?
>
> Erick
>
> On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
> >
> > I'm opening a new searcher every 3:rd minute.
> >
> > -----Ursprungligt meddelande-----
> > Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> > Skickat: den 8 augusti 2006 18:58
> > Till: java-user@lucene.apache.org
> > =C4mne: Re: Lucene hits.length()
> >
> > I'll take a stab at it.... When are you opening/closing your searcher?
> > When
> > you open a searcher, you get a snapshot of the index at that instant,
> and
> > subsequent modifications aren't visible until you open a new searcher
> (at
> > least I think I've got this right).
> >
> > And I'm sure this also interacts with the writer merge settings
> > "interestingly".
> >
> > Personally, I'd worry about this a lot more if it happened after I'd
> > closed
> > my writer and opened a new reader <G>...
> > Of course, my app has an index that is updated rarely (every two weeks)=
,
> > so
> > I haven't dug into too many details in this area...
> >
> >
> > Best
> > Erick
> >
> > On 8/8/06, Marcus Falck <marcus.falck@observer.se> wrote:
> > >
> > > I have noticed some strange behavior when searching my lucene index.
> > >
> > >
> > >
> > > I'm adding 500.000 docs to an index.
> > >
> > >
> > >
> > > MergeFactor =3D 10
> > >
> > > MinMerge =3D 5000
> > >
> > >
> > >
> > > When 49999 have been added ( just before the first 10 * 5000 merge )
> the
> > > hits.length() is reporting around 1000 hits for a keyword (which by
> the
> > > way is around the same count as with 5000 docs added). After the
> 10*5000
> > > merge the hits.length() returns around 8000 hits, which seems to be a
> > > lot more reasonable. Since I'm adding content in date order ( oldest
> > > first ) I have also tried to sort the hits (newest date first) and
> > > display the top 10 hits.
> > >
> > >
> > >
> > > According to that output it seems that the documents are added
> > > correctly.
> > >
> > >
> > >
> > > I'm using a multisearcher on top of a RAMDir and an FSDir. Using
> > > Lucene1.4.3
> > >
> > >
> > >
> > > Anybody that has any idea about why the hit count is so misleading?
> > >
> > >
> > >
> > > /
> > >
> > > Regards
> > >
> > > Marcus
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_90483_21914232.1155145765482--

From java-user-return-22583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 17:50:05 2006
Return-Path: <java-user-return-22583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54743 invoked from network); 9 Aug 2006 17:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 17:50:04 -0000
Received: (qmail 80338 invoked by uid 500); 9 Aug 2006 17:49:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80314 invoked by uid 500); 9 Aug 2006 17:49:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80294 invoked by uid 99); 9 Aug 2006 17:49:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 10:49:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 10:49:50 -0700
Received: by py-out-1112.google.com with SMTP id s49so445117pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 10:49:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e6c8+fIzNaU77j/WIBH0kMgSqCJrY2aV6cVQOpHHmHYxyGIuTuwkuGxWWtnmkT8p/bcVkaSyC9dwrHd5KAbWDDo8EMNC881XP4YckNNjnc6LBv32bbfVJoY78AIPmuLDLf93vEB7Ml4qWCByS/AB0rPLhe7JCr+UaD7wRKZBEHg=
Received: by 10.35.37.18 with SMTP id p18mr1975361pyj;
        Wed, 09 Aug 2006 10:49:29 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 9 Aug 2006 10:49:25 -0700 (PDT)
Message-ID: <359a92830608091049v213b924bl19610bd83167581a@mail.gmail.com>
Date: Wed, 9 Aug 2006 13:49:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene hits.length()
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C021E567A@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_90483_21914232.1155145765482"
References: <8834A84C87A2C148AD46921BB8BFC97C021E567A@S1SE1MAIL.emea1.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_90483_21914232.1155145765482
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I think, but am not certain (chime in here guys) that this is expected
behavior. As I remember from various threads, internally indexing uses a
RAMdir to accumulate data until it merges it with the FSDir. Since the
searcher and indexer are separate, I assume that the searcher is looking at
the snapshot that is on disk and missing that in the RAMdir. After you
merge, the RAMdir data has been added to that on disk, and the two are "in
synch".

So I guess my real question is "why do you care"? Is this affecting your
application or is this an anomaly that you want to understand so you don't
get surprised? If the latter, I think you're OK if you open your index afte=
r
merging, you'll have the data available....

BTW, I assume that when you say hits.length() is not correct, you're gettin=
g
fewer hits than you *know* are in the index (including the stuff you're
currently indexing but haven't merged yet).

Best
Erick



On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
>
> Still worried =3D)
> You see it doesn't update the hits.length() in a correct way when I creat=
e
> a new searcher. The correct update does just occur in the merges. =3D/
>
> -----Ursprungligt meddelande-----
> Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> Skickat: den 9 augusti 2006 15:34
> Till: java-user@lucene.apache.org
> =C4mne: Re: Lucene hits.length()
>
> Then you won't see anything added to your index between times. Does this
> identify your problem or are you still worried?
>
> Erick
>
> On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
> >
> > I'm opening a new searcher every 3:rd minute.
> >
> > -----Ursprungligt meddelande-----
> > Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> > Skickat: den 8 augusti 2006 18:58
> > Till: java-user@lucene.apache.org
> > =C4mne: Re: Lucene hits.length()
> >
> > I'll take a stab at it.... When are you opening/closing your searcher?
> > When
> > you open a searcher, you get a snapshot of the index at that instant,
> and
> > subsequent modifications aren't visible until you open a new searcher
> (at
> > least I think I've got this right).
> >
> > And I'm sure this also interacts with the writer merge settings
> > "interestingly".
> >
> > Personally, I'd worry about this a lot more if it happened after I'd
> > closed
> > my writer and opened a new reader <G>...
> > Of course, my app has an index that is updated rarely (every two weeks)=
,
> > so
> > I haven't dug into too many details in this area...
> >
> >
> > Best
> > Erick
> >
> > On 8/8/06, Marcus Falck <marcus.falck@observer.se> wrote:
> > >
> > > I have noticed some strange behavior when searching my lucene index.
> > >
> > >
> > >
> > > I'm adding 500.000 docs to an index.
> > >
> > >
> > >
> > > MergeFactor =3D 10
> > >
> > > MinMerge =3D 5000
> > >
> > >
> > >
> > > When 49999 have been added ( just before the first 10 * 5000 merge )
> the
> > > hits.length() is reporting around 1000 hits for a keyword (which by
> the
> > > way is around the same count as with 5000 docs added). After the
> 10*5000
> > > merge the hits.length() returns around 8000 hits, which seems to be a
> > > lot more reasonable. Since I'm adding content in date order ( oldest
> > > first ) I have also tried to sort the hits (newest date first) and
> > > display the top 10 hits.
> > >
> > >
> > >
> > > According to that output it seems that the documents are added
> > > correctly.
> > >
> > >
> > >
> > > I'm using a multisearcher on top of a RAMDir and an FSDir. Using
> > > Lucene1.4.3
> > >
> > >
> > >
> > > Anybody that has any idea about why the hit count is so misleading?
> > >
> > >
> > >
> > > /
> > >
> > > Regards
> > >
> > > Marcus
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_90483_21914232.1155145765482--

From java-user-return-22584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 18:10:44 2006
Return-Path: <java-user-return-22584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61273 invoked from network); 9 Aug 2006 18:10:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 18:10:43 -0000
Received: (qmail 34511 invoked by uid 500); 9 Aug 2006 18:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34479 invoked by uid 500); 9 Aug 2006 18:10:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34468 invoked by uid 99); 9 Aug 2006 18:10:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 11:10:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 11:10:33 -0700
Received: by py-out-1112.google.com with SMTP id s49so451373pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 11:10:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Do01keOhU0KMGLuTJKDfe/a0jSF9Nf1JkIGjHjBKYXsZIa6rPe9v9bFGz8v6ynJzdrU9o7gsqMSfhWSIloUoGkLD9O5KdZO9s+fTtAN9Vf7ka8Lhksx6wL8X9jGdSW8KxwoesecZjZp1oGG/PBfKgN9xwv1UyGPa1sE5QmTpfAw=
Received: by 10.35.100.6 with SMTP id c6mr2062346pym;
        Wed, 09 Aug 2006 11:10:08 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Wed, 9 Aug 2006 11:10:08 -0700 (PDT)
Message-ID: <c68e39170608091110j3bd15fc6nb0bba4ed3b8a6dfb@mail.gmail.com>
Date: Wed, 9 Aug 2006 14:10:08 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
In-Reply-To: <03d501c6bb61$72cb3660$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170608081947g5f490051le12d427e5cd1e7d9@mail.gmail.com>
	 <03d501c6bb61$72cb3660$2800a8c0@aconex.com>
X-Google-Sender-Auth: bc8bb07df072bc4a
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/8/06, Oliver Hutchison <ohutchison@aconex.com> wrote:
> > The nature of the field cache itself means that the first
> > sort on a particular field can take a long, long time.
> > Synchronization won't really help that much.
>
> I think you may be misunderstanding my description (probably because it was
> not clear enough :). The issue is not that the first search is going to take
> a while as this is clearly unavoidable.

Sorry, I understood your problem perfectly, I just wasn't clear on
what I was saying.

My point was that for many uses, even the first-sorted-search delay is
not acceptable (and fixing multiple threads trying to fill the same
cache entry wouldn't solve that).  The warming-in-the-background that
Solr currenty uses solves both.

For those who can't warm in the background though, synchronizing
per-fieldcache entry would probably be a good idea.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 18:22:41 2006
Return-Path: <java-user-return-22585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64802 invoked from network); 9 Aug 2006 18:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 18:22:41 -0000
Received: (qmail 57049 invoked by uid 500); 9 Aug 2006 18:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57013 invoked by uid 500); 9 Aug 2006 18:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57001 invoked by uid 99); 9 Aug 2006 18:22:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 11:22:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 11:22:33 -0700
Received: by py-out-1112.google.com with SMTP id s49so455165pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 11:22:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ndUy5IF6/282V5ifp/ZPN50yDueIasoT/5wZf0hMwW+EPdb1mBgfY+D5s1LrPZnhuED42QhcrM08e1HKgXJgm9NGJHUU+XXREVfxXT4fwZFvsrcHvsjGs9udAWRP3xNkcVQUI1A1VE71/vJHFeI9UddFCl2TtAizN1tdwiezrEs=
Received: by 10.35.49.1 with SMTP id b1mr2014131pyk;
        Wed, 09 Aug 2006 11:22:13 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Wed, 9 Aug 2006 11:22:12 -0700 (PDT)
Message-ID: <c68e39170608091122h2031ed50ja683bcf849a33936@mail.gmail.com>
Date: Wed, 9 Aug 2006 14:22:12 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
In-Reply-To: <OF1FCB4BC5.3A176ABD-ON882571C5.00231DE1-882571C5.0026B2FA@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060809040741.39701.qmail@web50307.mail.yahoo.com>
	 <OF1FCB4BC5.3A176ABD-ON882571C5.00231DE1-882571C5.0026B2FA@il.ibm.com>
X-Google-Sender-Auth: 9b8048b7708fbdfd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/9/06, Doron Cohen <DORONC@il.ibm.com> wrote:
>   public StringIndex getStringIndex (IndexReader reader, String field)
>   throws IOException {
>     field = field.intern();
>     synchronize(field) {  // < ----------- line added
>       Object ret = lookup (reader, field, STRING_INDEX, null);
>       if (ret == null) {
>          final int[] retArray = new int[reader.maxDoc()];
>          ... load field to cache ...
>       }

Assuming "field" wasn't being used to synchronize on something else,
this would still block *all* IndexReaders/Searchers trying to sort on
that field.

In Solr, it would make the situation worse.  If I had my warmed-up
IndexSearcher serving live requests, and a new Searcher is opened in
the background to be warmed, a getStringIndex(warming,"foo") would
also block all getStringIndex(live,"foo").

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 18:31:54 2006
Return-Path: <java-user-return-22586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67925 invoked from network); 9 Aug 2006 18:31:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 18:31:54 -0000
Received: (qmail 78864 invoked by uid 500); 9 Aug 2006 18:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78840 invoked by uid 500); 9 Aug 2006 18:31:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78829 invoked by uid 99); 9 Aug 2006 18:31:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 11:31:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 11:31:47 -0700
Received: by py-out-1112.google.com with SMTP id s49so458151pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 11:31:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=nr2iWX0b02Saa00UUICFlveNl07+Le9iGdjyQqf5ZBUsdk2y2Umsd4iVRBZ3zqlEsfHDVstQ1nsOINmchRtGRNBReJe3R1Om4L+nvVOcj2u7XSP5pfqVBKdcvfFUg+XG1fRJAh9SbiFGR/ImVROwpyJqSt+PPXOEllhGA53M6y0=
Received: by 10.35.127.7 with SMTP id e7mr2055352pyn;
        Wed, 09 Aug 2006 11:31:22 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Wed, 9 Aug 2006 11:31:22 -0700 (PDT)
Message-ID: <c68e39170608091131k57f9637bh80900f22547aa6fd@mail.gmail.com>
Date: Wed, 9 Aug 2006 14:31:22 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
In-Reply-To: <03f601c6bb8c$aca04d00$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OF1FCB4BC5.3A176ABD-ON882571C5.00231DE1-882571C5.0026B2FA@il.ibm.com>
	 <03f601c6bb8c$aca04d00$2800a8c0@aconex.com>
X-Google-Sender-Auth: d7022654070568c6
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Definitely the right track Oliver... it's called a blocking map (most
easily implemented in Java5 via Future).  I don't think you need two
maps though, right?  just stick a placeholder in the outer map.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

On 8/9/06, Oliver Hutchison <ohutchison@aconex.com> wrote:
> Otis, Doron, thanks for the feedback.
>
> First up I'd just like to say that I totally agree with Doron on this - any
> attempt to fix this issue needs to be done using as fine grain
> synchronization as is possible or you'd just be introducing a new bottle
> neck.
>
> It terms of the level of granularity, the work around I posted in my
> previous email and the approach suggested by Doron are basically the same
> (though Doron's code is certainly preferable) and I can certainly say that
> synchronizing the object creation against the field name does solve the
> problem.
>
> However I have another solution that I'm working on that may be cleaner - by
> encapsulate the caching logic that is currently spread across FieldCacheImpl
> and FieldSortedHitQueue it becomes quite easy to implement a more complex
> but certainly more fine grained level of synchronization and we don't have
> to worry about synchronizing against an interned String or using some other
> trick to synchronize on the field name.
>
> I currently have:
>
> public abstract class Cache {
>
>         private final Map readerCache = new WeakHashMap();
>
>         protected Cache() {
>         }
>
>         protected abstract Object createValue(IndexReader reader, Object
> key)
>                         throws IOException;
>
>         public Object get(IndexReader reader, Object key) throws IOException
> {
>                 Map innerCache;
>                 Object value;
>                 synchronized (readerCache) {
>                         innerCache = (Map) readerCache.get(reader);
>                         // no inner cache create it
>                         if (innerCache == null) {
>                                 innerCache = new HashMap();
>                                 readerCache.put(reader, innerCache);
>                                 value = null;
>                         } else {
>                                 value = innerCache.get(key);
>                         }
>                         if (value == null) {
>                                 value = new CreationPlaceholder();
>                                 readerCache.put(reader, value);
>                         }
>                 }
>                 if (value instanceof CreationPlaceholder) {
>                         // must be one of the first threads to request this
> value,
>                         // synchronize on the CreationPlaceholder so we
> don't block
>                         // any other calls for different values
>                         CreationPlaceholder ph = (CreationPlaceholder)
> value;
>                         synchronized (ph) {
>                                 // if this thread is the very first one to
> reach this point
>                                 // then this test will be true and we should
> do the creation
>                                 if (ph.value == null) {
>                                         ph.value = createValue(reader, key);
>                                         synchronized (readerCache) {
>                                                 innerCache.put(key,
> ph.value);
>                                         }
>                                 }
>                                 return ph.value;
>                         }
>                 }
>                 return value;
>         }
>
>         static final class CreationPlaceholder {
>                 Object value;
>         }
> }
>
>
> class FieldCacheImpl implements FieldCache {
>
> ...
>
>         public String[] getStrings(IndexReader reader, String field)
>                         throws IOException {
>                 return (String[]) stringsCache.get(reader, field);
>         }
>
>         Cache stringsCache = new Cache() {
>
>                 protected Object createValue(IndexReader reader, Object
> fieldKey)
>                                 throws IOException {
>                         String field = ((String) fieldKey).intern();
>
> ... create String[] ...
>
>                         return retArray;
>                 }
>         };
>
>         public StringIndex getStringIndex(IndexReader reader, String field)
>                         throws IOException {
>                 return (StringIndex) stringsIndexCache.get(reader, field);
>         }
>
>         Cache stringsIndexCache = new Cache() {
>
>                 protected Object createValue(IndexReader reader, Object
> fieldKey)
>                                 throws IOException {
>                         String field = ((String) fieldKey).intern();
>
> ... create StringIndex ...
>
>                         return value;
>                 }
>         };
>
> ... etc
>
> }
>
> Is this an avenue worth pursuing further? Or are you guys happy to simply
> synchronizing on the field?
>
> Thanks again,
>
> Oliver

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 19:13:50 2006
Return-Path: <java-user-return-22587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82814 invoked from network); 9 Aug 2006 19:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 19:13:50 -0000
Received: (qmail 51373 invoked by uid 500); 9 Aug 2006 19:13:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51047 invoked by uid 500); 9 Aug 2006 19:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51036 invoked by uid 99); 9 Aug 2006 19:13:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:13:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.174.5.96] (HELO expredir5.cites.uiuc.edu) (128.174.5.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:13:43 -0700
Received: from [192.17.228.168] (vpn82-7e-92-90.near.uiuc.edu [130.126.146.144])
	by expredir5.cites.uiuc.edu (8.13.7/8.13.7) with ESMTP id k79JDMqW025029;
	Wed, 9 Aug 2006 14:13:22 -0500 (CDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
To: java-user@lucene.apache.org
Message-Id: <CAF01585-C476-4E99-BD12-FA30AC2A9D2D@uiuc.edu>
Content-Type: multipart/alternative; boundary=Apple-Mail-8-749942051
Cc: Amit Kumar <amitku@uiuc.edu>
Subject: IndexReader.getTermFreqVector penality
From: Amit Kumar <amitku@uiuc.edu>
Date: Wed, 9 Aug 2006 14:13:21 -0500
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-8-749942051
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi Lucene Users,

I am using the lucene indices to get term frequencies. I just wanted  
to check with you about the
time it is taking to retrieve these term freq. Please suggest if I  
can improve the code/index or if
this is expected. It takes 8 to 9 seconds to retrieve the term freq  
values of all 1030 documents,
with an index size of ~530MB.

Another question I have is Do I need to have Field.Store.Yes to get  
the term freq vector?

Index Details:
-------------------
Size: 532 MB,
1032 Documents with varying number of terms from 600 to 100,000
The field is indexed as Field.Store.YES,  
Field.Index.TOKENIZED,Field.TermVector.WITH_POSITIONS_OFFSETS


Term Freq Retrieval Time Values:
-------------------------------------

The time ranges in 8 to 9 seconds

  long s = System.currentTimeMillis();
  TermFreqVector termFreqVector;
     for (int i = 0; i < 1030; i++) {
       if (!reader.isDeleted(i)) {
        termFreqVector   = reader.getTermFreqVector(i, field);
        }
     }
     long l = System.currentTimeMillis();


Hardware and Memory Settings:
-------------------------------------------
-Xmx 2048m -XX:PermSize=16m -XX:MaxPermSize=128m

Dual 1800 MHz Optron on 32 bit Linux 2.6.15.2; Lucene 2.0.0.




How can I get better results? Can I?



Many thanks for your help.
-Amit





---------------------------------------------------------
Amit Kumar
Research Programmer
The Graduate School of Library and Information Science
University of Illinois, Urbana Champaign IL, 61820
phone: 217-333-4118 fax: 217-244-3302
---------------------------------------------------------





--Apple-Mail-8-749942051--

From java-user-return-22588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 19:51:04 2006
Return-Path: <java-user-return-22588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 879 invoked from network); 9 Aug 2006 19:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 19:51:03 -0000
Received: (qmail 1222 invoked by uid 500); 9 Aug 2006 19:50:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1185 invoked by uid 500); 9 Aug 2006 19:50:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1174 invoked by uid 99); 9 Aug 2006 19:50:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:50:58 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of feris.apache@gmail.com designates 72.14.204.231 as permitted sender)
Received: from [72.14.204.231] (HELO qb-out-0506.google.com) (72.14.204.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:50:57 -0700
Received: by qb-out-0506.google.com with SMTP id e12so11250qbe
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 12:50:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=LD4ttrOHwiWE5f+9Pgq4AtJfIqDCZogKlLI6SSqlQVf4ZD5a5raSHBrdo6HH8zAUCPCX/ZHdASmYOm53RTHNtuCQKMddKIfWvgRtAe0EeLGWeQKmKPLsnoyFouvPaunhVGFK07J3fUtLN9ckfDU93P34xWZSCkONHSPFxBblNDY=
Received: by 10.70.100.14 with SMTP id x14mr1922835wxb;
        Wed, 09 Aug 2006 12:50:36 -0700 (PDT)
Received: by 10.70.125.12 with HTTP; Wed, 9 Aug 2006 12:50:36 -0700 (PDT)
Message-ID: <103817900608091250l20b76901m81154a9ed5a85ff7@mail.gmail.com>
Date: Thu, 10 Aug 2006 02:50:36 +0700
From: "Feris Thia" <feris.apache@gmail.com>
To: java-user@lucene.apache.org
Subject: Tomcat : Indexing Sample ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26952_19167665.1155153036148"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26952_19167665.1155153036148
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I'm a newbie to Lucene and would like to use thread instance to index my
office document I've uploaded within web application.  Is Lucene can face
concurrent indexing issue ? Is there any jsp/servlet sample that can show me
how to do that ?

Regards,

Feris

------=_Part_26952_19167665.1155153036148--

From java-user-return-22589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 19:51:11 2006
Return-Path: <java-user-return-22589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 952 invoked from network); 9 Aug 2006 19:51:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 19:51:11 -0000
Received: (qmail 2427 invoked by uid 500); 9 Aug 2006 19:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2380 invoked by uid 500); 9 Aug 2006 19:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 77753 invoked by uid 99); 9 Aug 2006 19:34:46 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of grant.ingersoll@gmail.com designates 66.249.82.234 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Jb+FsdhyO/FyTt4mZzvfpK2nkVs0KYCSdDmApF2LWHOChMyJtVHe8gRghvefMC6G3uidqOhcNbpuXbMvjaQ2Ad9HBH9CkMuygrdfZOYYMkTzhd1U+pw8Mt09W4FywRFoQg8JWcy9Fmr081/xXVwVVmtI9Emm31WZ6Q5AOR59LAM=
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <CAF01585-C476-4E99-BD12-FA30AC2A9D2D@uiuc.edu>
References: <CAF01585-C476-4E99-BD12-FA30AC2A9D2D@uiuc.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7223E580-3209-42FC-86F9-71D607AA119C@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: IndexReader.getTermFreqVector penality
Date: Wed, 9 Aug 2006 15:34:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Amit,

If you want all the freqs of all the terms (or even just some of the  
terms) in all documents, you don't need to use Term Vectors, take a  
look at TermEnum and TermDocs.

If you want for specific documents, then you do need Term Vectors.   
You may get some CPU ticks by only keeping Positions (and not  
offsets, assuming you don't need them), but I haven't confirmed  
this.  I just figure it is slightly less data to read and write so it  
should be faster.

No, you do not need to Store your docs to have a term vector.  They  
are written to different parts of the Index.

-Grant

On Aug 9, 2006, at 3:13 PM, Amit Kumar wrote:

> Hi Lucene Users,
>
> I am using the lucene indices to get term frequencies. I just  
> wanted to check with you about the
> time it is taking to retrieve these term freq. Please suggest if I  
> can improve the code/index or if
> this is expected. It takes 8 to 9 seconds to retrieve the term freq  
> values of all 1030 documents,
> with an index size of ~530MB.
>
> Another question I have is Do I need to have Field.Store.Yes to get  
> the term freq vector?
>
> Index Details:
> -------------------
> Size: 532 MB,
> 1032 Documents with varying number of terms from 600 to 100,000
> The field is indexed as Field.Store.YES,  
> Field.Index.TOKENIZED,Field.TermVector.WITH_POSITIONS_OFFSETS
>
>
> Term Freq Retrieval Time Values:
> -------------------------------------
>
> The time ranges in 8 to 9 seconds
>
>  long s = System.currentTimeMillis();
>  TermFreqVector termFreqVector;
>     for (int i = 0; i < 1030; i++) {
>       if (!reader.isDeleted(i)) {
>        termFreqVector   = reader.getTermFreqVector(i, field);
>        }
>     }
>     long l = System.currentTimeMillis();
>
>
> Hardware and Memory Settings:
> -------------------------------------------
> -Xmx 2048m -XX:PermSize=16m -XX:MaxPermSize=128m
>
> Dual 1800 MHz Optron on 32 bit Linux 2.6.15.2; Lucene 2.0.0.
>
>
>
>
> How can I get better results? Can I?
>
>
>
> Many thanks for your help.
> -Amit
>
>
>
>
>
> ---------------------------------------------------------
> Amit Kumar
> Research Programmer
> The Graduate School of Library and Information Science
> University of Illinois, Urbana Champaign IL, 61820
> phone: 217-333-4118 fax: 217-244-3302
> ---------------------------------------------------------
>
>
>
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 19:57:33 2006
Return-Path: <java-user-return-22590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3725 invoked from network); 9 Aug 2006 19:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 19:57:33 -0000
Received: (qmail 9765 invoked by uid 500); 9 Aug 2006 19:57:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9728 invoked by uid 500); 9 Aug 2006 19:57:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9716 invoked by uid 99); 9 Aug 2006 19:57:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:57:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.174.5.186] (HELO expredir3.cites.uiuc.edu) (128.174.5.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 12:57:26 -0700
Received: from [192.17.228.168] (vpn82-7e-92-90.near.uiuc.edu [130.126.146.144])
	by expredir3.cites.uiuc.edu (8.13.7/8.13.7) with ESMTP id k79Jv2as028632
	for <java-user@lucene.apache.org>; Wed, 9 Aug 2006 14:57:06 -0500 (CDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <7223E580-3209-42FC-86F9-71D607AA119C@gmail.com>
References: <CAF01585-C476-4E99-BD12-FA30AC2A9D2D@uiuc.edu> <7223E580-3209-42FC-86F9-71D607AA119C@gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-9-752561992
Message-Id: <82FE6351-CD14-429B-9F1D-57983BD986E3@uiuc.edu>
From: Amit Kumar <amitku@uiuc.edu>
Subject: Re: IndexReader.getTermFreqVector penality
Date: Wed, 9 Aug 2006 14:57:01 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-9-752561992
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Yes thanks Grant I realize that if I need the term freq in all the  
documents I could use TermEnum, but I have a use case where
I may need term frequencies of only selected documents, and the worst  
case scenario might be  term freq for n-1
documents, where n is the total number of documents in the index.

-Amit


On Aug 9, 2006, at 2:34 PM, Grant Ingersoll wrote:

> Hi Amit,
>
> If you want all the freqs of all the terms (or even just some of  
> the terms) in all documents, you don't need to use Term Vectors,  
> take a look at TermEnum and TermDocs.
>
> If you want for specific documents, then you do need Term Vectors.   
> You may get some CPU ticks by only keeping Positions (and not  
> offsets, assuming you don't need them), but I haven't confirmed  
> this.  I just figure it is slightly less data to read and write so  
> it should be faster.
>
> No, you do not need to Store your docs to have a term vector.  They  
> are written to different parts of the Index.
>
> -Grant
>
> On Aug 9, 2006, at 3:13 PM, Amit Kumar wrote:
>
>> Hi Lucene Users,
>>
>> I am using the lucene indices to get term frequencies. I just  
>> wanted to check with you about the
>> time it is taking to retrieve these term freq. Please suggest if I  
>> can improve the code/index or if
>> this is expected. It takes 8 to 9 seconds to retrieve the term  
>> freq values of all 1030 documents,
>> with an index size of ~530MB.
>>
>> Another question I have is Do I need to have Field.Store.Yes to  
>> get the term freq vector?
>>
>> Index Details:
>> -------------------
>> Size: 532 MB,
>> 1032 Documents with varying number of terms from 600 to 100,000
>> The field is indexed as Field.Store.YES,  
>> Field.Index.TOKENIZED,Field.TermVector.WITH_POSITIONS_OFFSETS
>>
>>
>> Term Freq Retrieval Time Values:
>> -------------------------------------
>>
>> The time ranges in 8 to 9 seconds
>>
>>  long s = System.currentTimeMillis();
>>  TermFreqVector termFreqVector;
>>     for (int i = 0; i < 1030; i++) {
>>       if (!reader.isDeleted(i)) {
>>        termFreqVector   = reader.getTermFreqVector(i, field);
>>        }
>>     }
>>     long l = System.currentTimeMillis();
>>
>>
>> Hardware and Memory Settings:
>> -------------------------------------------
>> -Xmx 2048m -XX:PermSize=16m -XX:MaxPermSize=128m
>>
>> Dual 1800 MHz Optron on 32 bit Linux 2.6.15.2; Lucene 2.0.0.
>>
>>
>>
>>
>> How can I get better results? Can I?
>>
>>
>>
>> Many thanks for your help.
>> -Amit
>>
>>
>>
>>
>>
>> ---------------------------------------------------------
>> Amit Kumar
>> Research Programmer
>> The Graduate School of Library and Information Science
>> University of Illinois, Urbana Champaign IL, 61820
>> phone: 217-333-4118 fax: 217-244-3302
>> ---------------------------------------------------------
>>
>>
>>
>>
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------
Amit Kumar
Research Programmer
The Graduate School of Library and Information Science
University of Illinois, Urbana Champaign IL, 61820
phone: 217-333-4118 fax: 217-244-3302
---------------------------------------------------------





--Apple-Mail-9-752561992--

From java-user-return-22591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 21:52:27 2006
Return-Path: <java-user-return-22591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34659 invoked from network); 9 Aug 2006 21:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 21:52:26 -0000
Received: (qmail 91226 invoked by uid 500); 9 Aug 2006 21:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90455 invoked by uid 500); 9 Aug 2006 21:52:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90436 invoked by uid 99); 9 Aug 2006 21:52:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 14:52:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 14:52:19 -0700
Received: by ug-out-1314.google.com with SMTP id y2so235063uge
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 14:51:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hYzpxSv4+u8JwD6S4VnBYaePa4eV7D07LkybSIytZxuFAcFI6pRinGbq4ACekD8HJxvc4KpK4Gr/IvKWPTuEwD/GolcgvEmkYaOZE16HP9UpXFr12UsEuW1gPofdf6KXLnuoRcl4EUPVmP5gb/7L4WDHhMF/xJGlOZCNtswdJFs=
Received: by 10.66.221.19 with SMTP id t19mr1577357ugg;
        Wed, 09 Aug 2006 14:51:58 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Wed, 9 Aug 2006 14:51:57 -0700 (PDT)
Message-ID: <f18c9dde0608091451m7f65a3afx33b8adb8f4e29d9e@mail.gmail.com>
Date: Wed, 9 Aug 2006 23:51:57 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Tomcat : Indexing Sample ?
In-Reply-To: <103817900608091250l20b76901m81154a9ed5a85ff7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <103817900608091250l20b76901m81154a9ed5a85ff7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can just put your documents in a queue and access the index within
one single thread?! All your analysis can take part in other threads,
If one has finished dump the Document in the queue and keep you index
writer busy, that's a good Idea anyway.

I guess you don't need an example for that don't you.

best regards Simon

On 8/9/06, Feris Thia <feris.apache@gmail.com> wrote:
> Hi All,
>
> I'm a newbie to Lucene and would like to use thread instance to index my
> office document I've uploaded within web application.  Is Lucene can face
> concurrent indexing issue ? Is there any jsp/servlet sample that can show me
> how to do that ?
>
> Regards,
>
> Feris
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 22:48:03 2006
Return-Path: <java-user-return-22592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52017 invoked from network); 9 Aug 2006 22:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 22:48:03 -0000
Received: (qmail 66190 invoked by uid 500); 9 Aug 2006 22:47:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66057 invoked by uid 500); 9 Aug 2006 22:47:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66046 invoked by uid 99); 9 Aug 2006 22:47:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 15:47:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 15:47:52 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id E49B3289F3
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 08:47:29 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id CC3915340F1
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 08:47:29 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 14451-01-31 for <java-user@lucene.apache.org>;
 Thu, 10 Aug 2006 08:47:28 +1000 (EST)
Received: from OLIVERDESKTOP (unknown [192.168.0.40])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 00DBA53403A
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 08:47:28 +1000 (EST)
From: "Oliver Hutchison" <ohutchison@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: Poor performance "race condition" in FieldSortedHitQueue
Date: Thu, 10 Aug 2006 08:47:17 +1000
Message-ID: <041801c6bc05$ca3272c0$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <c68e39170608091131k57f9637bh80900f22547aa6fd@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Aca74hZu67QdJ9PoRF2Cgk4T8KUtKAAH8PYA
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik, 

> most easily implemented in Java5 via Future.

I didn't use Java5 as I had a feeling that code is Lucene needs to compile
on Java1.3 right? 

> I don't think you need two maps though, right?  just stick a 
> placeholder in the outer map.

I'm using 2 maps mainly because it simplifies the implementation.
Technically all that is needed is a singe map with a key that is a composite
of index reader and field name however, given that there is also the
requirement that we only maintain a weak reference to the index reader and
the associated need to clean up the cache if the reader gets gc'd, it was
simpler for me to simulate the composite key using the 2 maps. 

On a related note it would be great if there was a way to plug a custom
FieldCache implementation into Lucene, given there is a FieldCache interface
it's a shame there's no way to actually provide an alternative
implementation.

Since there seems to be a decent level of interest in this I'll try to put
together a patch and raise an issue over the next few days. 

Cheers,

Oliver

> On 8/9/06, Oliver Hutchison <ohutchison@aconex.com> wrote:
> > Otis, Doron, thanks for the feedback.
> >
> > First up I'd just like to say that I totally agree with 
> Doron on this 
> > - any attempt to fix this issue needs to be done using as 
> fine grain 
> > synchronization as is possible or you'd just be introducing a new 
> > bottle neck.
> >
> > It terms of the level of granularity, the work around I 
> posted in my 
> > previous email and the approach suggested by Doron are 
> basically the 
> > same (though Doron's code is certainly preferable) and I 
> can certainly 
> > say that synchronizing the object creation against the 
> field name does 
> > solve the problem.
> >
> > However I have another solution that I'm working on that may be 
> > cleaner - by encapsulate the caching logic that is currently spread 
> > across FieldCacheImpl and FieldSortedHitQueue it becomes 
> quite easy to 
> > implement a more complex but certainly more fine grained level of 
> > synchronization and we don't have to worry about 
> synchronizing against 
> > an interned String or using some other trick to synchronize 
> on the field name.
> >
> > I currently have:
> >
> > public abstract class Cache {
> >
> >         private final Map readerCache = new WeakHashMap();
> >
> >         protected Cache() {
> >         }
> >
> >         protected abstract Object createValue(IndexReader reader, 
> > Object
> > key)
> >                         throws IOException;
> >
> >         public Object get(IndexReader reader, Object key) throws 
> > IOException {
> >                 Map innerCache;
> >                 Object value;
> >                 synchronized (readerCache) {
> >                         innerCache = (Map) readerCache.get(reader);
> >                         // no inner cache create it
> >                         if (innerCache == null) {
> >                                 innerCache = new HashMap();
> >                                 readerCache.put(reader, innerCache);
> >                                 value = null;
> >                         } else {
> >                                 value = innerCache.get(key);
> >                         }
> >                         if (value == null) {
> >                                 value = new CreationPlaceholder();
> >                                 readerCache.put(reader, value);
> >                         }
> >                 }
> >                 if (value instanceof CreationPlaceholder) {
> >                         // must be one of the first threads 
> to request 
> > this value,
> >                         // synchronize on the 
> CreationPlaceholder so 
> > we don't block
> >                         // any other calls for different values
> >                         CreationPlaceholder ph = 
> (CreationPlaceholder) 
> > value;
> >                         synchronized (ph) {
> >                                 // if this thread is the very first 
> > one to reach this point
> >                                 // then this test will be 
> true and we 
> > should do the creation
> >                                 if (ph.value == null) {
> >                                         ph.value = 
> createValue(reader, key);
> >                                         synchronized (readerCache) {
> >                                                 innerCache.put(key, 
> > ph.value);
> >                                         }
> >                                 }
> >                                 return ph.value;
> >                         }
> >                 }
> >                 return value;
> >         }
> >
> >         static final class CreationPlaceholder {
> >                 Object value;
> >         }
> > }
> >
> >
> > class FieldCacheImpl implements FieldCache {
> >
> > ...
> >
> >         public String[] getStrings(IndexReader reader, String field)
> >                         throws IOException {
> >                 return (String[]) stringsCache.get(reader, field);
> >         }
> >
> >         Cache stringsCache = new Cache() {
> >
> >                 protected Object createValue(IndexReader reader, 
> > Object
> > fieldKey)
> >                                 throws IOException {
> >                         String field = ((String) fieldKey).intern();
> >
> > ... create String[] ...
> >
> >                         return retArray;
> >                 }
> >         };
> >
> >         public StringIndex getStringIndex(IndexReader 
> reader, String field)
> >                         throws IOException {
> >                 return (StringIndex) 
> stringsIndexCache.get(reader, field);
> >         }
> >
> >         Cache stringsIndexCache = new Cache() {
> >
> >                 protected Object createValue(IndexReader reader, 
> > Object
> > fieldKey)
> >                                 throws IOException {
> >                         String field = ((String) fieldKey).intern();
> >
> > ... create StringIndex ...
> >
> >                         return value;
> >                 }
> >         };
> >
> > ... etc
> >
> > }
> >
> > Is this an avenue worth pursuing further? Or are you guys happy to 
> > simply synchronizing on the field?
> >
> > Thanks again,
> >
> > Oliver
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 23:33:48 2006
Return-Path: <java-user-return-22593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63015 invoked from network); 9 Aug 2006 23:33:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 23:33:47 -0000
Received: (qmail 14013 invoked by uid 500); 9 Aug 2006 23:33:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13939 invoked by uid 500); 9 Aug 2006 23:33:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13906 invoked by uid 99); 9 Aug 2006 23:33:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:33:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:33:43 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 98CC25B774; Wed,  9 Aug 2006 16:33:17 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A7B227F403
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 16:33:17 -0700 (PDT)
Date: Wed, 9 Aug 2006 16:33:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: "Field Grouping" query restrained to same field on a 'multi'-field'
In-Reply-To: <44D9968E.4060902@netbreeze.ch>
Message-ID: <Pine.LNX.4.58.0608091625060.24158@hal.rescomp.berkeley.edu>
References: <44D8BAEA.6010108@netbreeze.ch> <c68e39170608081103i1918323an286e33aece13f7e1@mail.gmail.com>
 <44D9968E.4060902@netbreeze.ch>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: > You could do this with the current query parser by putting large
: > position increment gaps between paragraphs that is guaranteed to be
: > larger than the largest paragraph.  Then you could use a sloppy phrase
: > query
: > "word1 word2"~10000 for instance.

: Unfortunatelly this only makes sense for simple AND/phrase Queries, but
: we also want more complex boolean queries like :
: "nice cat" AND ("mouse" OR "rat" ) AND NOT ("dog")

you should still be able use the slop based approach to solve this by
using Span queries (SpanNear for Phrases and "AND", SpanOr for "OR" and
SpanNot for "NOT") -- but to get the full compliment of all the options
you might want, you'll probably need to insert arbitrary marker tokens in
between each paragraph, and then lump your entire query into a SpanNot
where the exclude clause is a SpanTerm query on your arbitrary paragraph
marker.

this has been discussed in the past, search the Lucene mailing list
archives for "sentence".




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 09 23:42:01 2006
Return-Path: <java-user-return-22594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64554 invoked from network); 9 Aug 2006 23:42:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2006 23:42:01 -0000
Received: (qmail 24873 invoked by uid 500); 9 Aug 2006 23:41:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24844 invoked by uid 500); 9 Aug 2006 23:41:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24833 invoked by uid 99); 9 Aug 2006 23:41:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:41:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 16:41:54 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6EF9D5B766; Wed,  9 Aug 2006 16:41:34 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 69A9B7F403
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 16:41:34 -0700 (PDT)
Date: Wed, 9 Aug 2006 16:41:34 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: custom sort
In-Reply-To: <14e001c6bba9$74a40050$1e8e10ac@ecommerce.tspain.local>
Message-ID: <Pine.LNX.4.58.0608091639340.24158@hal.rescomp.berkeley.edu>
References: <14e001c6bba9$74a40050$1e8e10ac@ecommerce.tspain.local>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


what you want is not a customized sort as much as a customized Score ..
scores can be customized by modifying your Similarity, class -- LIA has
some good info on this, but the best way to figure out what you want may
be to start by creating your own Similarity class and then look at the
search.explain output for your searches to understand how your changes
affect things.


: Date: Wed, 9 Aug 2006 13:46:30 +0200
: From: Enrique Lamas <enrique.lamas@corp.ya.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: custom sort
:
: Hi,
: I want to execute a query searching a few terms
:
: QueryParser queryParser =3D new MultiFieldQueryParser(new String[] {"tags=
", "title"}, ProcessConstants.analyzer);
: Query query =3D queryParser.parse("rocio ortega");
:
: and I want to obtain the results sorted by the number of founded terms, b=
ut not considering other factors like the number of times found each term. =
=BFHow can I do this?
:
: SortField.FIELD_SCORE doesn=B4t work for this because I think it consider=
 other factors like the number of times found each term.
:
: Thanks
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 00:16:07 2006
Return-Path: <java-user-return-22595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71633 invoked from network); 10 Aug 2006 00:16:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 00:16:07 -0000
Received: (qmail 49635 invoked by uid 500); 10 Aug 2006 00:16:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49605 invoked by uid 500); 10 Aug 2006 00:16:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49588 invoked by uid 99); 10 Aug 2006 00:16:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 17:16:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 17:16:00 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A82DA5B766; Wed,  9 Aug 2006 17:15:40 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9868B7F403
	for <java-user@lucene.apache.org>; Wed,  9 Aug 2006 17:15:40 -0700 (PDT)
Date: Wed, 9 Aug 2006 17:15:40 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene hits.length()
In-Reply-To: <359a92830608091049v213b924bl19610bd83167581a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608091711060.27074@hal.rescomp.berkeley.edu>
References: <8834A84C87A2C148AD46921BB8BFC97C021E567A@S1SE1MAIL.emea1.ad.group>
 <359a92830608091049v213b924bl19610bd83167581a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I think, but am not certain (chime in here guys) that this is expected
: behavior. As I remember from various threads, internally indexing uses a
: RAMdir to accumulate data until it merges it with the FSDir. Since the
: searcher and indexer are separate, I assume that the searcher is looking at
: the snapshot that is on disk and missing that in the RAMdir. After you
: merge, the RAMdir data has been added to that on disk, and the two are "in
: synch".

off the top of my head, that doesn't sound right ... Lucene's file formats
and commit locks are designed to ensure that a single IndexReader (and
thus, and IndexSearcher) has a consisten view of the index from the moment
it is opened, to the moment it is closed -- regardless of what other
IndexReaders or IndexWriters are out there mucking things up. If you open
an IndexSearcher, and use it to execute a query, the number of hits you
get back should be the same if you reuse that searcher to run the same
query in 5 seconds, 5 minutes, 5 hours, or 5 days -- as long as you are
still using that same searcher, it shouldn't matter what you do with an
IndexWriter in the same process or in any other process.

can you post some sample code demonstrating the problem you are having?

If i had to guess, i'd speculate that maybe you are opening a new searcher
more often then you think.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 01:57:41 2006
Return-Path: <java-user-return-22596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22433 invoked from network); 10 Aug 2006 01:57:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 01:57:41 -0000
Received: (qmail 55692 invoked by uid 500); 10 Aug 2006 01:57:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55643 invoked by uid 500); 10 Aug 2006 01:57:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55632 invoked by uid 99); 10 Aug 2006 01:57:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 18:57:35 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 18:57:34 -0700
Received: by py-out-1112.google.com with SMTP id s49so593844pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 18:57:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=rbvAx5quOP6pNVIsLqj2DDPhnvMbTLmdIFdl5npIjsUOgAPg/xd+TGHRqgeCnYa4w6ilb34QVRdiLUWtNd5bz6wvmI0DBHW7Ht7cyX1p2QXd2ZTx8wyaCH337pXFsHmBS2wztr4rDOUFqbF10daGGc6WH1pYazjjVixJPxLHGso=
Received: by 10.35.8.1 with SMTP id l1mr173625pyi;
        Wed, 09 Aug 2006 18:57:13 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Wed, 9 Aug 2006 18:57:13 -0700 (PDT)
Message-ID: <c68e39170608091857j4db65833nc9af5dcfc3c25eb4@mail.gmail.com>
Date: Wed, 9 Aug 2006 21:57:13 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
In-Reply-To: <041801c6bc05$ca3272c0$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170608091131k57f9637bh80900f22547aa6fd@mail.gmail.com>
	 <041801c6bc05$ca3272c0$2800a8c0@aconex.com>
X-Google-Sender-Auth: fb97f63b7582f75a
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/9/06, Oliver Hutchison <ohutchison@aconex.com> wrote:
> Yonik,
>
> > most easily implemented in Java5 via Future.
>
> I didn't use Java5 as I had a feeling that code is Lucene needs to compile
> on Java1.3 right?

Lucene 2 currently requires Java 1.4

It was really just a side comment - people have implemented these
blocking maps before, and I've seen it done with Java5 concurrency
things like Future - a natural fit.  The way you were going about it
is perfectly fine though.

> > I don't think you need two maps though, right?  just stick a
> > placeholder in the outer map.
>
> I'm using 2 maps mainly because it simplifies the implementation.
> Technically all that is needed is a singe map with a key that is a composite
> of index reader and field name however, given that there is also the
> requirement that we only maintain a weak reference to the index reader and
> the associated need to clean up the cache if the reader gets gc'd, it was
> simpler for me to simulate the composite key using the 2 maps.

Ah, right... I browsed your code a bit too fast.  It looks fine.

> On a related note it would be great if there was a way to plug a custom
> FieldCache implementation into Lucene, given there is a FieldCache interface
> it's a shame there's no way to actually provide an alternative
> implementation.

Well, there's FieldCache.DEFAULT

  /** Expert: The cache used internally by sorting and range query classes. */
  public static FieldCache DEFAULT = new FieldCacheImpl();


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 03:23:05 2006
Return-Path: <java-user-return-22597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37737 invoked from network); 10 Aug 2006 03:23:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 03:23:05 -0000
Received: (qmail 29445 invoked by uid 500); 10 Aug 2006 03:22:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29420 invoked by uid 500); 10 Aug 2006 03:22:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29409 invoked by uid 99); 10 Aug 2006 03:22:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 20:22:57 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id 2047828A3A
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 13:22:05 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 0E304534039
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 13:22:05 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 03926-01-83 for <java-user@lucene.apache.org>;
 Thu, 10 Aug 2006 13:22:02 +1000 (EST)
Received: from OLIVERDESKTOP (unknown [192.168.0.40])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 9AEBF5340F1
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 13:22:02 +1000 (EST)
From: "Oliver Hutchison" <ohutchison@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: Poor performance "race condition" in FieldSortedHitQueue
Date: Thu, 10 Aug 2006 13:21:52 +1000
Message-ID: <043201c6bc2c$25cca7b0$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <c68e39170608091857j4db65833nc9af5dcfc3c25eb4@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Aca8IGJAwsojivriQXiGukfZrWMmbQACkmWA
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Ah, right... I browsed your code a bit too fast.  It looks fine.

Great.

> > On a related note it would be great if there was a way to plug a 
> > custom FieldCache implementation into Lucene, given there is a 
> > FieldCache interface it's a shame there's no way to 
> actually provide 
> > an alternative implementation.
> 
> Well, there's FieldCache.DEFAULT

I thought the exact same thing but what I'd forgotten was that all fields on
an interface are implicitly final.

http://java.sun.com/docs/books/jls/third_edition/html/interfaces.html#9.3

Anyway, thanks for the feedback I'll raise a couple of issues shortly.

Cheers,

Oliver


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 03:34:00 2006
Return-Path: <java-user-return-22598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38971 invoked from network); 10 Aug 2006 03:34:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 03:34:00 -0000
Received: (qmail 51520 invoked by uid 500); 10 Aug 2006 03:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51378 invoked by uid 500); 10 Aug 2006 03:33:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51367 invoked by uid 99); 10 Aug 2006 03:33:54 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 20:33:53 -0700
Received: by py-out-1112.google.com with SMTP id s49so624654pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 20:32:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=uKyBiqCkN0Mnt4jZgAYVc2xIuqb1teFzzCNtVGX2txyuNOIOMrNRznoy/CmVGXfmLZ0CWJAo41IbivmgVRZrYEbu+f778YdA/ZshHWIZt8Bdu70tTXZnL5f1sNBqfKInde/wug1F4oQpJJN7dlprcjEFceBLBwsajGAhCry+UZY=
Received: by 10.35.114.16 with SMTP id r16mr2942058pym;
        Wed, 09 Aug 2006 20:32:20 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Wed, 9 Aug 2006 20:32:20 -0700 (PDT)
Message-ID: <c68e39170608092032n5647beeck2271a6385257085b@mail.gmail.com>
Date: Wed, 9 Aug 2006 23:32:20 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
In-Reply-To: <043201c6bc2c$25cca7b0$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170608091857j4db65833nc9af5dcfc3c25eb4@mail.gmail.com>
	 <043201c6bc2c$25cca7b0$2800a8c0@aconex.com>
X-Google-Sender-Auth: 477b3d0866b92dee
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/9/06, Oliver Hutchison <ohutchison@aconex.com> wrote:
> > Well, there's FieldCache.DEFAULT
>
> I thought the exact same thing but what I'd forgotten was that all fields on
> an interface are implicitly final.

Heh... interfaces strike again.

Well then since we *know* that no one has their own implementation
(because they would not have been able to register it), we should be
able to safely upgrade the interface to a class (anyone want to supply
a patch?)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 04:21:55 2006
Return-Path: <java-user-return-22599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49915 invoked from network); 10 Aug 2006 04:21:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 04:21:55 -0000
Received: (qmail 12875 invoked by uid 500); 10 Aug 2006 04:21:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12828 invoked by uid 500); 10 Aug 2006 04:21:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12817 invoked by uid 99); 10 Aug 2006 04:21:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 21:21:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 21:21:48 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.7/8.13.7) with ESMTP id k7A4LRoj145312
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 04:21:27 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7A4P7ao118582
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 06:25:07 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7A4LQd0018540
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 06:21:26 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7A4LQPu018537
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 06:21:26 +0200
In-Reply-To: <c68e39170608091122h2031ed50ja683bcf849a33936@mail.gmail.com>
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF85DF045D.527A7815-ON882571C6.00165F5F-882571C6.001723F5@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 9 Aug 2006 21:12:45 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/08/2006 07:25:07
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

yseeley@gmail.com wrote on 09/08/2006 11:22:12:
> Assuming "field" wasn't being used to synchronize on something else,
> this would still block *all* IndexReaders/Searchers trying to sort on
> that field.
>
> In Solr, it would make the situation worse.  If I had my warmed-up
> IndexSearcher serving live requests, and a new Searcher is opened in
> the background to be warmed, a getStringIndex(warming,"foo") would
> also block all getStringIndex(live,"foo").

Right, this is what I had in mind with "by-field (and by-reader)" (a few
lines further).

- Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 04:32:10 2006
Return-Path: <java-user-return-22600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52003 invoked from network); 10 Aug 2006 04:32:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 04:32:09 -0000
Received: (qmail 25460 invoked by uid 500); 10 Aug 2006 04:32:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24532 invoked by uid 500); 10 Aug 2006 04:32:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24521 invoked by uid 99); 10 Aug 2006 04:32:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 21:32:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 21:32:04 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.7/8.13.7) with ESMTP id k7A4Vgwa033412
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 04:31:42 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7A4ZNE1114088
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 06:35:23 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7A4Vgmm023316
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 06:31:42 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7A4VgVD023313
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 06:31:42 +0200
In-Reply-To: <c68e39170608092032n5647beeck2271a6385257085b@mail.gmail.com>
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF03A14E07.982F5803-ON882571C6.00173655-882571C6.00189CC4@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 9 Aug 2006 21:28:49 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/08/2006 07:35:22
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

yseeley@gmail.com wrote on 09/08/2006 20:32:20:
> Heh... interfaces strike again.
>
> Well then since we *know* that no one has their own implementation
> (because they would not have been able to register it), we should be
> able to safely upgrade the interface to a class (anyone want to supply
> a patch?)
>
> -Yonik

I'd be happy to do supply this patch - unless someone already works on it
(Oliver?).

I have one more comment on the cache implementation. It feels to me
somewhat not right that a static system wide object (FieldCache.DEFAULT) is
managing the field caching for all the indexReaders in the JVM (possibly of
different indexes), when in fact there is no
dependency/relation/cooperation between the different indexReaders, cache
wise. It seems cleaner and simpler to have FieldCacheImpl take care of a
single IndexReader, and so have that cache "belong" to the indexReader.
This would make the cache implementation simpler. Synchronization would
only need to be on field values. This way we also get rid of the
WeakHashMap (which, btw, I never got to fully trust).

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 06:14:51 2006
Return-Path: <java-user-return-22601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85171 invoked from network); 10 Aug 2006 06:14:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 06:14:50 -0000
Received: (qmail 38596 invoked by uid 500); 10 Aug 2006 06:14:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38134 invoked by uid 500); 10 Aug 2006 06:14:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38117 invoked by uid 99); 10 Aug 2006 06:14:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 23:14:44 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DATE_IN_PAST_12_24,DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of codeshepherd@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Aug 2006 23:14:43 -0700
Received: by py-out-1112.google.com with SMTP id s49so679851pyc
        for <java-user@lucene.apache.org>; Wed, 09 Aug 2006 23:14:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:subject:from:to:cc:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=fOJ3+OtzB4HTOz0VAiB1XRB027AUpv+TCoELdWSjqzxMjEXccl11F9zYZEqpZ8d9VMf0z0TlSXGP38/lBu0HE2rfADd+ld8iiHV/pGF/ixPNQB/sjlfCB9/anWOePF+kQ746PTymW6fQ5kRMLB5CMBIYLxyvM2kE6n/NcvMeKxE=
Received: by 10.35.77.1 with SMTP id e1mr3146582pyl;
        Wed, 09 Aug 2006 23:14:23 -0700 (PDT)
Received: from ?10.1.1.233? ( [59.92.88.244])
        by mx.gmail.com with ESMTP id h41sm1512776pyh.2006.08.09.23.14.20;
        Wed, 09 Aug 2006 23:14:22 -0700 (PDT)
Subject: updating document
From: Deepan Chakravarthy <codeshepherd@gmail.com>
To: java-user@lucene.apache.org, "nannan@svapas.com" <nannan@svapas.com>
Cc: "vaidhy@svapas.com" <vaidhy@svapas.com>
Content-Type: text/plain
Date: Wed, 09 Aug 2006 23:14:13 +0530
Message-Id: <1155145453.2739.8.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 (2.6.0-1) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
 We have to update few documents in our index. We have add a additional
field to them. We did as follows

1)read the documents of our interest using IndexReader
2)copy them to a temporary doc object (temp_doc)
3)delete the document in the index 
4)close the IndexReader
5)open the IndexWriter
6)add a new field to (temp_doc)
7)add the (temp_doc) to the index using IndexWriter
8)close the IndexWriter


The problem:
1)Those documents that we updated are not searchable now. When we
perform search based we not find any of those documents we updated.
(using IndexSearcher)

2)But we are still able to read the updated documents using IndexReader.


Questions
1)When i want to update a document by adding a field, should i reindex
all the fields again? will copying the existing document not help and
adding new field not help ? 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 07:18:43 2006
Return-Path: <java-user-return-22602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3548 invoked from network); 10 Aug 2006 07:18:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 07:18:43 -0000
Received: (qmail 32448 invoked by uid 500); 10 Aug 2006 07:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32098 invoked by uid 500); 10 Aug 2006 07:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32087 invoked by uid 99); 10 Aug 2006 07:18:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:18:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:18:35 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id 0B2F728A2C
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 17:18:13 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id ECA1753403A
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 17:18:12 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 23327-01-78 for <java-user@lucene.apache.org>;
 Thu, 10 Aug 2006 17:18:11 +1000 (EST)
Received: from OLIVERDESKTOP (unknown [192.168.0.40])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 54874534039
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 17:18:08 +1000 (EST)
From: "Oliver Hutchison" <ohutchison@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: Poor performance "race condition" in FieldSortedHitQueue
Date: Thu, 10 Aug 2006 17:17:51 +1000
Message-ID: <045601c6bc4d$234ab4c0$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <OF03A14E07.982F5803-ON882571C6.00173655-882571C6.00189CC4@il.ibm.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Aca8NfSfhOS5HydSREG/jrNYnaLhSwAAUrrA
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> yseeley@gmail.com wrote on 09/08/2006 20:32:20:
> > Heh... interfaces strike again.
> >
> > Well then since we *know* that no one has their own implementation 
> > (because they would not have been able to register it), we 
> should be 
> > able to safely upgrade the interface to a class (anyone 
> want to supply 
> > a patch?)
> >
> > -Yonik
> 
> I'd be happy to do supply this patch - unless someone already 
> works on it (Oliver?).

I was intending to do this but perhaps this is not needed given your
following comments.

> I have one more comment on the cache implementation. It feels 
> to me somewhat not right that a static system wide object 
> (FieldCache.DEFAULT) is managing the field caching for all 
> the indexReaders in the JVM (possibly of different indexes), 
> when in fact there is no dependency/relation/cooperation 
> between the different indexReaders, cache wise. It seems 
> cleaner and simpler to have FieldCacheImpl take care of a 
> single IndexReader, and so have that cache "belong" to the 
> indexReader.
> This would make the cache implementation simpler. 
> Synchronization would only need to be on field values. This 
> way we also get rid of the WeakHashMap (which, btw, I never 
> got to fully trust).

This sounds like a much nicer solution than what I was proposing. I'm still
happy to produce a patch if that would be helpful?

Cheers,

Oliver



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 07:38:23 2006
Return-Path: <java-user-return-22603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15383 invoked from network); 10 Aug 2006 07:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 07:38:22 -0000
Received: (qmail 57218 invoked by uid 500); 10 Aug 2006 07:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56654 invoked by uid 500); 10 Aug 2006 07:38:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56643 invoked by uid 99); 10 Aug 2006 07:38:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:38:15 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:38:14 -0700
Received: (qmail 29825 invoked by uid 509); 10 Aug 2006 09:37:50 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.094996 secs); 10 Aug 2006 07:37:50 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.094996 secs Process 29819)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 10 Aug 2006 09:37:50 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: Lucene hits.length()
Date: Thu, 10 Aug 2006 09:37:49 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C021E57F0@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene hits.length()
Thread-Index: Aca73ELsNMQ20MEOSc+JLQKjiBgddwAcgeIA
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi again Erick.

Yes I know the hits exists in the index at all time.

I will illustrate exactly with approximently values for the =
hits.length():

Mergefactor 10.
MinMergeDocs 5000.

Searching for a very common Swedish word ("han" which equals to "he" in =
English).

Indexing 100000 docs.

After 1000 docs I do a search. Lets say I hit 200 docs.=20
Now my searcher will be hold for 3 minutes time.

After those three minutes lets say I got the following index structur:
5 x 5000 docs in FSDir
And 1000 docs in RAMDir
Total : 26000 docs

The search now yields 220 results, but since I'm sorting on date and =
adding the oldest first I see the newest added hits.=20

Holding this searcher for 3 minutes.

After three minutes lets say I have the following index structure:
1 x 50000 docs in FSDir
2000 docs in RAMDir

The search now yields 10000 hits. Which seems a lot more appropriate.

3 minutes later:

1x50000
5x5000
+ 1000 RAMDir

Search hits count: 10111.

And after the big 100 000 merge ( 2 x 50000 ) I will get approximately =
20000 hits.

---
As you can see it's a very strange behavior. At some points the =
hits.length() can even temporary decrease from the previous length.=20

I will have to point out that I have a minMergeSize for the IndexWriter =
working on the FSDir set to 5000. I also have a separate RAMDir and =
another IndexWriter that is writing to that RAMDir until my own RAMDir =
have 5000 docs. Then I flush it into the FS IndexWriter ( which will =
result in a immediate disc write ). This way I have total control over =
when the disc writes occurs.=20

And yes I'm afraid that this will affect my system in a very negative =
way. Cause my clients will browse the index on their stored search =
profiles.


/
Regards
Marcus Falck

-----Ursprungligt meddelande-----
Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]=20
Skickat: den 9 augusti 2006 19:49
Till: java-user@lucene.apache.org
=C4mne: Re: Lucene hits.length()

I think, but am not certain (chime in here guys) that this is expected
behavior. As I remember from various threads, internally indexing uses a
RAMdir to accumulate data until it merges it with the FSDir. Since the
searcher and indexer are separate, I assume that the searcher is looking =
at
the snapshot that is on disk and missing that in the RAMdir. After you
merge, the RAMdir data has been added to that on disk, and the two are =
"in
synch".

So I guess my real question is "why do you care"? Is this affecting your
application or is this an anomaly that you want to understand so you =
don't
get surprised? If the latter, I think you're OK if you open your index =
after
merging, you'll have the data available....

BTW, I assume that when you say hits.length() is not correct, you're =
getting
fewer hits than you *know* are in the index (including the stuff you're
currently indexing but haven't merged yet).

Best
Erick



On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
>
> Still worried =3D)
> You see it doesn't update the hits.length() in a correct way when I =
create
> a new searcher. The correct update does just occur in the merges. =3D/
>
> -----Ursprungligt meddelande-----
> Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> Skickat: den 9 augusti 2006 15:34
> Till: java-user@lucene.apache.org
> =C4mne: Re: Lucene hits.length()
>
> Then you won't see anything added to your index between times. Does =
this
> identify your problem or are you still worried?
>
> Erick
>
> On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
> >
> > I'm opening a new searcher every 3:rd minute.
> >
> > -----Ursprungligt meddelande-----
> > Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> > Skickat: den 8 augusti 2006 18:58
> > Till: java-user@lucene.apache.org
> > =C4mne: Re: Lucene hits.length()
> >
> > I'll take a stab at it.... When are you opening/closing your =
searcher?
> > When
> > you open a searcher, you get a snapshot of the index at that =
instant,
> and
> > subsequent modifications aren't visible until you open a new =
searcher
> (at
> > least I think I've got this right).
> >
> > And I'm sure this also interacts with the writer merge settings
> > "interestingly".
> >
> > Personally, I'd worry about this a lot more if it happened after I'd
> > closed
> > my writer and opened a new reader <G>...
> > Of course, my app has an index that is updated rarely (every two =
weeks),
> > so
> > I haven't dug into too many details in this area...
> >
> >
> > Best
> > Erick
> >
> > On 8/8/06, Marcus Falck <marcus.falck@observer.se> wrote:
> > >
> > > I have noticed some strange behavior when searching my lucene =
index.
> > >
> > >
> > >
> > > I'm adding 500.000 docs to an index.
> > >
> > >
> > >
> > > MergeFactor =3D 10
> > >
> > > MinMerge =3D 5000
> > >
> > >
> > >
> > > When 49999 have been added ( just before the first 10 * 5000 merge =
)
> the
> > > hits.length() is reporting around 1000 hits for a keyword (which =
by
> the
> > > way is around the same count as with 5000 docs added). After the
> 10*5000
> > > merge the hits.length() returns around 8000 hits, which seems to =
be a
> > > lot more reasonable. Since I'm adding content in date order ( =
oldest
> > > first ) I have also tried to sort the hits (newest date first) and
> > > display the top 10 hits.
> > >
> > >
> > >
> > > According to that output it seems that the documents are added
> > > correctly.
> > >
> > >
> > >
> > > I'm using a multisearcher on top of a RAMDir and an FSDir. Using
> > > Lucene1.4.3
> > >
> > >
> > >
> > > Anybody that has any idea about why the hit count is so =
misleading?
> > >
> > >
> > >
> > > /
> > >
> > > Regards
> > >
> > > Marcus
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 07:50:13 2006
Return-Path: <java-user-return-22604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20585 invoked from network); 10 Aug 2006 07:50:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 07:50:13 -0000
Received: (qmail 77990 invoked by uid 500); 10 Aug 2006 07:50:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77955 invoked by uid 500); 10 Aug 2006 07:50:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77944 invoked by uid 99); 10 Aug 2006 07:50:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:50:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 00:50:06 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id E487428981
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 17:49:44 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id D25065340F3
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 17:49:44 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 30877-01-51 for <java-user@lucene.apache.org>;
 Thu, 10 Aug 2006 17:49:42 +1000 (EST)
Received: from OLIVERDESKTOP (unknown [192.168.0.40])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 1A8675340F1
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 17:49:42 +1000 (EST)
From: "Oliver Hutchison" <ohutchison@aconex.com>
To: <java-user@lucene.apache.org>
Subject: NPE when sorting on a field that is missing from a doc
Date: Thu, 10 Aug 2006 17:49:31 +1000
Message-ID: <047e01c6bc51$8a039020$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <045601c6bc4d$234ab4c0$2800a8c0@aconex.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Aca8NfSfhOS5HydSREG/jrNYnaLhSwAAUrrAAAYdmJA=
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all, 

we have recently noticed that doing a locale sensitive sort on a field that
is missing from some docs causes an NPE inside the call to Collator#compare
at FieldSortedHitQueue line 320 (Lucene 2.0 src):

static ScoreDocComparator comparatorStringLocale (final IndexReader reader,
final String fieldname, final Locale locale)
  throws IOException {
    final Collator collator = Collator.getInstance (locale);
    final String field = fieldname.intern();
    final String[] index = FieldCache.DEFAULT.getStrings (reader, field);
    return new ScoreDocComparator() {

      public final int compare (final ScoreDoc i, final ScoreDoc j) {
		return collator.compare (index[i.doc], index[j.doc]);  <----
NPE in compare call one/both param null 
      }


>From looking at the standard String, float and int sorting and reading
LUCENE-406 I assume this in not expected behavior and that docs that do not
include the field should be sorted to appear at the start of the list of
results.

Is this a know issue? If not I'll raise the issue and create a patch.

Thanks again,

Oliver



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 08:07:54 2006
Return-Path: <java-user-return-22605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29878 invoked from network); 10 Aug 2006 08:07:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 08:07:53 -0000
Received: (qmail 6806 invoked by uid 500); 10 Aug 2006 08:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6762 invoked by uid 500); 10 Aug 2006 08:07:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6745 invoked by uid 99); 10 Aug 2006 08:07:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 01:07:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 01:07:45 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.7/8.13.7) with ESMTP id k7A87ObP031380
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 08:07:24 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7A8B51I132362
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 10:11:05 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7A87NBu030358
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 10:07:24 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7A87Nn5030355
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 10:07:23 +0200
In-Reply-To: <1155145453.2739.8.camel@localhost.localdomain>
Subject: Re: updating document
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFF8AF3934.5F700E7E-ON882571C6.002AF4EE-882571C6.002BFDFB@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 10 Aug 2006 01:00:30 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/08/2006 11:11:05
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Deepan, The steps below seems correct, given that all the fields of the
original document are also stored - the javadoc for
indexReader.document(int n) (which I assume is what you are using) says: "
Returns the stored fields of the nth Document in this index." - so, only
stored fields would exist in the document returned by this call, and hence
only those stored fields would be added back to the index, after you are
updating this tmp_doc object with new fields.

Regards,
Doron

Deepan Chakravarthy <codeshepherd@gmail.com> wrote on 09/08/2006 10:44:13:

> Hi,
>  We have to update few documents in our index. We have add a additional
> field to them. We did as follows
>
> 1)read the documents of our interest using IndexReader
> 2)copy them to a temporary doc object (temp_doc)
> 3)delete the document in the index
> 4)close the IndexReader
> 5)open the IndexWriter
> 6)add a new field to (temp_doc)
> 7)add the (temp_doc) to the index using IndexWriter
> 8)close the IndexWriter
>
>
> The problem:
> 1)Those documents that we updated are not searchable now. When we
> perform search based we not find any of those documents we updated.
> (using IndexSearcher)
>
> 2)But we are still able to read the updated documents using IndexReader.
>
>
> Questions
> 1)When i want to update a document by adding a field, should i reindex
> all the fields again? will copying the existing document not help and
> adding new field not help ?
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 09:04:42 2006
Return-Path: <java-user-return-22606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62386 invoked from network); 10 Aug 2006 09:04:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 09:04:42 -0000
Received: (qmail 14891 invoked by uid 500); 10 Aug 2006 09:04:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14856 invoked by uid 500); 10 Aug 2006 09:04:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14837 invoked by uid 99); 10 Aug 2006 09:04:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 02:04:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.151.11.163] (HELO smtp.ya.com) (62.151.11.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 02:04:32 -0700
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1GB6SX-0006Hj-00
	for java-user@lucene.apache.org; Thu, 10 Aug 2006 11:04:09 +0200
Message-ID: <02cd01c6bc5c$21e1b110$1e8e10ac@ecommerce.tspain.local>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
References: <14e001c6bba9$74a40050$1e8e10ac@ecommerce.tspain.local> <Pine.LNX.4.58.0608091639340.24158@hal.rescomp.berkeley.edu>
Subject: Re: custom sort
Date: Thu, 10 Aug 2006 11:05:31 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Chris,
I investigated that way too, but I don't know how to do it.

I have a query that searches two words. This query finds both words at two 
documents, with the difference that one of the words appears twice at the 
first document whereas at the second documents the two words appear only 
once. This makes the first document to have more score than second, ¿is this 
right? I don't know if more factors affect to this.

Looking at the explanation, I see that the unique difference is what is 
returnes as fieldNorm.

What I don't know is how can I make that fieldNorm returns the same value 
for both documents, and at the same time this values is bigger than if the 
query only found one of the words, smaller than finding three of three...

Recapitulating,
I think that I only need a score function that returns the number of 
searched words the query found at the document.

I subclass DefaultSimilarity and set it to IndexSearcher, but I don't know 
what reimplementation of the methods is what I need.

Thanks
----- Original Message ----- 
From: "Chris Hostetter" <hossman_lucene@fucit.org>
To: <java-user@lucene.apache.org>
Sent: Thursday, August 10, 2006 1:41 AM
Subject: Re: custom sort



what you want is not a customized sort as much as a customized Score ..
scores can be customized by modifying your Similarity, class -- LIA has
some good info on this, but the best way to figure out what you want may
be to start by creating your own Similarity class and then look at the
search.explain output for your searches to understand how your changes
affect things.


: Date: Wed, 9 Aug 2006 13:46:30 +0200
: From: Enrique Lamas <enrique.lamas@corp.ya.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: custom sort
:
: Hi,
: I want to execute a query searching a few terms
:
: QueryParser queryParser = new MultiFieldQueryParser(new String[] {"tags", 
"title"}, ProcessConstants.analyzer);
: Query query = queryParser.parse("rocio ortega");
:
: and I want to obtain the results sorted by the number of founded terms, 
but not considering other factors like the number of times found each term. 
¿How can I do this?
:
: SortField.FIELD_SCORE doesn´t work for this because I think it consider 
other factors like the number of times found each term.
:
: Thanks
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 11:46:55 2006
Return-Path: <java-user-return-22607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29885 invoked from network); 10 Aug 2006 11:46:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 11:46:54 -0000
Received: (qmail 86055 invoked by uid 500); 10 Aug 2006 11:46:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86023 invoked by uid 500); 10 Aug 2006 11:46:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86012 invoked by uid 99); 10 Aug 2006 11:46:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 04:46:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.54.76.193] (HELO ron.emn.fr) (193.54.76.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 04:46:45 -0700
Received: from spip.dsic.emn.fr (root@spip.dsic.emn.fr [193.104.32.156])
          by ron.emn.fr (8.9.3/jtpda-5.3.1) with ESMTP id NAA08839
          for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 13:45:14 +0200 (CEST)
Received: from ifs.emn.fr (ifs.emn.fr [193.54.76.100])
	by spip.dsic.emn.fr (8.12.1/8.12.1) with ESMTP id k7ABkFbT029610
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 13:46:15 +0200
Received: from [192.168.18.35] (dhcp35.rech18.emn.fr [192.168.18.35])
          by ifs.emn.fr (8.9.3/jtpda-5.1) with ESMTP id NAA09307
          for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 13:44:49 +0200 (MEST)
Message-ID: <44DB1C83.5030201@emn.fr>
Date: Thu, 10 Aug 2006 13:46:11 +0200
From: "ould sid'ahmed" <nouldsid@emn.fr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: research lucene
References: <44D9AADF.2090904@emn.fr>	 <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>	 <44D9F131.8@emn.fr>	 <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>	 <44D9FED3.1080708@emn.fr> <f18c9dde0608090832q2812c9f8y3621229d3dde8e0@mail.gmail.com>
In-Reply-To: <f18c9dde0608090832q2812c9f8y3621229d3dde8e0@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello,
I don't know why it don't index the number values, I look with Luke 
Lucene, I founded that values numerics didn't indexed.
can you know what the problem?

thanks
Simon Willnauer a Ã©crit :
> Well your digits might be lost during analysis like Erik said. Check
> out with luke whats in your index (Field.Store.Yes) and see if your
> analyzer removes the digits. SimpleAnalyzer removes them but
> StandartAnalyzer keeps the digits.
>
> regards simon
>
> On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> Simon Willnauer a Ã©crit :
>> > You should rather explain what you expect from indexing your number
>> > not as string values.
>> >
>> > best regards simon
>> >
>> > On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> Erick Erickson a Ã©crit :
>> >> > What analyzers are you using for both indexing and searching? Some
>> >> > analyzers
>> >> > strip out numbers and some don't. I'd start with
>> >> WhitespaceAnalyzer, and
>> >> > index your fields UN_TOKENIZED and work up to the other analyzers
>> >> and/or
>> >> > tokenizations from there.
>> >> >
>> >> > Under any circumstances, you really, really, really want to get a
>> >> copy of
>> >> > Luke (http://www.getopt.org/luke/) which will allow you to examine
>> >> your
>> >> > index to see what it actually contains. I've been surprised more 
>> than
>> >> > once
>> >> > by thinking that my index contained something it really hadn't.
>> >> >
>> >> > Best
>> >> > Erick
>> >> >
>> >> > On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> >>
>> >> >> Hello,
>> >> >>
>> >> >> I don't arrive to get result from the field have a value 
>> numeric for
>> >> >> example "date=2005" or "title=900",
>> >> >> I have indexed the fields "date" with String value. I want know 
>> why?
>> >> >>
>> >> >> Can you help me?
>> >> >>
>> >> >> thanks.
>> >> >>
>> >> >> 
>> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >> thanks for your response and your soft,
>> >> you think what about the indexer that can resolve my problem.
>> >> my problem is the indexer, it don't index value numeric.
>> >>
>> >> thanks.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> I  add my document
>> Document doc=new Document();
>> doc.add(new Field( getName(), value, getStore(), getIndex()));
>> and getName can be "date, name, tilte, or another", but can if I index
>> title with the value "122" or another, It can't return me a result, if I
>> index title with "mytitre" for example, it return me the result, I would
>> like why?
>>
>> thanks.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 11:59:26 2006
Return-Path: <java-user-return-22608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32474 invoked from network); 10 Aug 2006 11:59:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 11:59:26 -0000
Received: (qmail 13775 invoked by uid 500); 10 Aug 2006 11:59:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13741 invoked by uid 500); 10 Aug 2006 11:59:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13730 invoked by uid 99); 10 Aug 2006 11:59:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 04:59:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 04:59:19 -0700
Received: by ug-out-1314.google.com with SMTP id y2so15052uge
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 04:58:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YocrqKiTSdunwKLKhravWgiz5+Cu4qpssX9lisjnvVvi1kP2g/k20AGStM04M5ops8XQrct5Sn0EHUwhHSHUCEEtpt1hw0hmhDXzgmnIz6vNLyLQgMGIgj+BdD9BrCVAg2BC0H8VNpXk79OqBgeXz6ykPylRWCZbj7JV7Qoe1M8=
Received: by 10.67.29.12 with SMTP id g12mr2442587ugj;
        Thu, 10 Aug 2006 04:58:57 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Thu, 10 Aug 2006 04:58:57 -0700 (PDT)
Message-ID: <f18c9dde0608100458k30340fa7l91c177485b4caa20@mail.gmail.com>
Date: Thu, 10 Aug 2006 13:58:57 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: research lucene
In-Reply-To: <44DB1C83.5030201@emn.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <44D9AADF.2090904@emn.fr>
	 <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>
	 <44D9F131.8@emn.fr>
	 <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>
	 <44D9FED3.1080708@emn.fr>
	 <f18c9dde0608090832q2812c9f8y3621229d3dde8e0@mail.gmail.com>
	 <44DB1C83.5030201@emn.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Y291bGQgeW91IHByb3ZpZGUgYSBiaXQgbW9yZSBpbmZvIG9uIHlvdXIgaW5kZXggcHJvY2Vzcz8K
KGFuYWx5emVyLEZpZWxkLCBTdG9yZSwgSW5kZXgpCgpyZWdhcmRzIHNpbW9uCgpPbiA4LzEwLzA2
LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRAZW1uLmZyPiB3cm90ZToKPgo+IEhlbGxvLAo+IEkg
ZG9uJ3Qga25vdyB3aHkgaXQgZG9uJ3QgaW5kZXggdGhlIG51bWJlciB2YWx1ZXMsIEkgbG9vayB3
aXRoIEx1a2UKPiBMdWNlbmUsIEkgZm91bmRlZCB0aGF0IHZhbHVlcyBudW1lcmljcyBkaWRuJ3Qg
aW5kZXhlZC4KPiBjYW4geW91IGtub3cgd2hhdCB0aGUgcHJvYmxlbT8KPgo+IHRoYW5rcwo+IFNp
bW9uIFdpbGxuYXVlciBhIMOpY3JpdCA6Cj4gPiBXZWxsIHlvdXIgZGlnaXRzIG1pZ2h0IGJlIGxv
c3QgZHVyaW5nIGFuYWx5c2lzIGxpa2UgRXJpayBzYWlkLiBDaGVjawo+ID4gb3V0IHdpdGggbHVr
ZSB3aGF0cyBpbiB5b3VyIGluZGV4IChGaWVsZC5TdG9yZS5ZZXMpIGFuZCBzZWUgaWYgeW91cgo+
ID4gYW5hbHl6ZXIgcmVtb3ZlcyB0aGUgZGlnaXRzLiBTaW1wbGVBbmFseXplciByZW1vdmVzIHRo
ZW0gYnV0Cj4gPiBTdGFuZGFydEFuYWx5emVyIGtlZXBzIHRoZSBkaWdpdHMuCj4gPgo+ID4gcmVn
YXJkcyBzaW1vbgo+ID4KPiA+IE9uIDgvOS8wNiwgb3VsZCBzaWQnYWhtZWQgPG5vdWxkc2lkQGVt
bi5mcj4gd3JvdGU6Cj4gPj4gU2ltb24gV2lsbG5hdWVyIGEgw6ljcml0IDoKPiA+PiA+IFlvdSBz
aG91bGQgcmF0aGVyIGV4cGxhaW4gd2hhdCB5b3UgZXhwZWN0IGZyb20gaW5kZXhpbmcgeW91ciBu
dW1iZXIKPiA+PiA+IG5vdCBhcyBzdHJpbmcgdmFsdWVzLgo+ID4+ID4KPiA+PiA+IGJlc3QgcmVn
YXJkcyBzaW1vbgo+ID4+ID4KPiA+PiA+IE9uIDgvOS8wNiwgb3VsZCBzaWQnYWhtZWQgPG5vdWxk
c2lkQGVtbi5mcj4gd3JvdGU6Cj4gPj4gPj4gRXJpY2sgRXJpY2tzb24gYSDDqWNyaXQgOgo+ID4+
ID4+ID4gV2hhdCBhbmFseXplcnMgYXJlIHlvdSB1c2luZyBmb3IgYm90aCBpbmRleGluZyBhbmQg
c2VhcmNoaW5nPyBTb21lCj4gPj4gPj4gPiBhbmFseXplcnMKPiA+PiA+PiA+IHN0cmlwIG91dCBu
dW1iZXJzIGFuZCBzb21lIGRvbid0LiBJJ2Qgc3RhcnQgd2l0aAo+ID4+ID4+IFdoaXRlc3BhY2VB
bmFseXplciwgYW5kCj4gPj4gPj4gPiBpbmRleCB5b3VyIGZpZWxkcyBVTl9UT0tFTklaRUQgYW5k
IHdvcmsgdXAgdG8gdGhlIG90aGVyIGFuYWx5emVycwo+ID4+ID4+IGFuZC9vcgo+ID4+ID4+ID4g
dG9rZW5pemF0aW9ucyBmcm9tIHRoZXJlLgo+ID4+ID4+ID4KPiA+PiA+PiA+IFVuZGVyIGFueSBj
aXJjdW1zdGFuY2VzLCB5b3UgcmVhbGx5LCByZWFsbHksIHJlYWxseSB3YW50IHRvIGdldCBhCj4g
Pj4gPj4gY29weSBvZgo+ID4+ID4+ID4gTHVrZSAoaHR0cDovL3d3dy5nZXRvcHQub3JnL2x1a2Uv
KSB3aGljaCB3aWxsIGFsbG93IHlvdSB0byBleGFtaW5lCj4gPj4gPj4geW91cgo+ID4+ID4+ID4g
aW5kZXggdG8gc2VlIHdoYXQgaXQgYWN0dWFsbHkgY29udGFpbnMuIEkndmUgYmVlbiBzdXJwcmlz
ZWQgbW9yZQo+ID4+IHRoYW4KPiA+PiA+PiA+IG9uY2UKPiA+PiA+PiA+IGJ5IHRoaW5raW5nIHRo
YXQgbXkgaW5kZXggY29udGFpbmVkIHNvbWV0aGluZyBpdCByZWFsbHkgaGFkbid0Lgo+ID4+ID4+
ID4KPiA+PiA+PiA+IEJlc3QKPiA+PiA+PiA+IEVyaWNrCj4gPj4gPj4gPgo+ID4+ID4+ID4gT24g
OC85LzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRAZW1uLmZyPiB3cm90ZToKPiA+PiA+PiA+
Pgo+ID4+ID4+ID4+IEhlbGxvLAo+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gSSBkb24ndCBhcnJpdmUg
dG8gZ2V0IHJlc3VsdCBmcm9tIHRoZSBmaWVsZCBoYXZlIGEgdmFsdWUKPiA+PiBudW1lcmljIGZv
cgo+ID4+ID4+ID4+IGV4YW1wbGUgImRhdGU9MjAwNSIgb3IgInRpdGxlPTkwMCIsCj4gPj4gPj4g
Pj4gSSBoYXZlIGluZGV4ZWQgdGhlIGZpZWxkcyAiZGF0ZSIgd2l0aCBTdHJpbmcgdmFsdWUuIEkg
d2FudCBrbm93Cj4gPj4gd2h5Pwo+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gQ2FuIHlvdSBoZWxwIG1l
Pwo+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gdGhhbmtzLgo+ID4+ID4+ID4+Cj4gPj4gPj4gPj4KPiA+
PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KPiA+PiA+PiA+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+PiA+PiA+PiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+
ID4+ID4+Cj4gPj4gPj4gPj4KPiA+PiA+PiA+Cj4gPj4gPj4gdGhhbmtzIGZvciB5b3VyIHJlc3Bv
bnNlIGFuZCB5b3VyIHNvZnQsCj4gPj4gPj4geW91IHRoaW5rIHdoYXQgYWJvdXQgdGhlIGluZGV4
ZXIgdGhhdCBjYW4gcmVzb2x2ZSBteSBwcm9ibGVtLgo+ID4+ID4+IG15IHByb2JsZW0gaXMgdGhl
IGluZGV4ZXIsIGl0IGRvbid0IGluZGV4IHZhbHVlIG51bWVyaWMuCj4gPj4gPj4KPiA+PiA+PiB0
aGFua3MuCj4gPj4gPj4KPiA+PiA+Pgo+ID4+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4+ID4+IFRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9y
Zwo+ID4+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxw
QGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4gPj4KPiA+PiA+Pgo+ID4+ID4KPiA+PiBJICBhZGQgbXkg
ZG9jdW1lbnQKPiA+PiBEb2N1bWVudCBkb2M9bmV3IERvY3VtZW50KCk7Cj4gPj4gZG9jLmFkZChu
ZXcgRmllbGQoIGdldE5hbWUoKSwgdmFsdWUsIGdldFN0b3JlKCksIGdldEluZGV4KCkpKTsKPiA+
PiBhbmQgZ2V0TmFtZSBjYW4gYmUgImRhdGUsIG5hbWUsIHRpbHRlLCBvciBhbm90aGVyIiwgYnV0
IGNhbiBpZiBJIGluZGV4Cj4gPj4gdGl0bGUgd2l0aCB0aGUgdmFsdWUgIjEyMiIgb3IgYW5vdGhl
ciwgSXQgY2FuJ3QgcmV0dXJuIG1lIGEgcmVzdWx0LCBpZiBJCj4gPj4gaW5kZXggdGl0bGUgd2l0
aCAibXl0aXRyZSIgZm9yIGV4YW1wbGUsIGl0IHJldHVybiBtZSB0aGUgcmVzdWx0LCBJIHdvdWxk
Cj4gPj4gbGlrZSB3aHk/Cj4gPj4KPiA+PiB0aGFua3MuCj4gPj4KPiA+Pgo+ID4+IC0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQo+ID4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBs
dWNlbmUuYXBhY2hlLm9yZwo+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4KPiA+Pgo+ID4KPgo+Cj4gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1
Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11
c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+Cg==


From java-user-return-22609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 12:24:13 2006
Return-Path: <java-user-return-22609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39322 invoked from network); 10 Aug 2006 12:24:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 12:24:12 -0000
Received: (qmail 63692 invoked by uid 500); 10 Aug 2006 12:24:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63492 invoked by uid 500); 10 Aug 2006 12:24:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63475 invoked by uid 99); 10 Aug 2006 12:24:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:24:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.54.76.193] (HELO ron.emn.fr) (193.54.76.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:24:04 -0700
Received: from spip.dsic.emn.fr (root@spip.dsic.emn.fr [193.104.32.156])
          by ron.emn.fr (8.9.3/jtpda-5.3.1) with ESMTP id OAA10854
          for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 14:22:34 +0200 (CEST)
Received: from ifs.emn.fr (ifs.emn.fr [193.54.76.100])
	by spip.dsic.emn.fr (8.12.1/8.12.1) with ESMTP id k7ACNabT002286
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 14:23:36 +0200
Received: from [192.168.18.35] (dhcp35.rech18.emn.fr [192.168.18.35])
          by ifs.emn.fr (8.9.3/jtpda-5.1) with ESMTP id OAA15648
          for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 14:22:10 +0200 (MEST)
Message-ID: <44DB2544.1020409@emn.fr>
Date: Thu, 10 Aug 2006 14:23:32 +0200
From: "ould sid'ahmed" <nouldsid@emn.fr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: research lucene
References: <44D9AADF.2090904@emn.fr>	 <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>	 <44D9F131.8@emn.fr>	 <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>	 <44D9FED3.1080708@emn.fr>	 <f18c9dde0608090832q2812c9f8y3621229d3dde8e0@mail.gmail.com>	 <44DB1C83.5030201@emn.fr> <f18c9dde0608100458k30340fa7l91c177485b4caa20@mail.gmail.com>
In-Reply-To: <f18c9dde0608100458k30340fa7l91c177485b4caa20@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


The probl add(new Field(  fieldName(), fieldValue, Field.Store, 
Field.Index));
and I use the WhiteSpaceAnalyser, but my problem is can I index a field 
with value as "title" it goes, and can I index with value as "2006" it 
doesn't go.
Why, I don't know
thanks
Simon Willnauer a Ã©crit :
> could you provide a bit more info on your index process?
> (analyzer,Field, Store, Index)
>
> regards simon
>
> On 8/10/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>>
>> Hello,
>> I don't know why it don't index the number values, I look with Luke
>> Lucene, I founded that values numerics didn't indexed.
>> can you know what the problem?
>>
>> thanks
>> Simon Willnauer a Ã©crit :
>> > Well your digits might be lost during analysis like Erik said. Check
>> > out with luke whats in your index (Field.Store.Yes) and see if your
>> > analyzer removes the digits. SimpleAnalyzer removes them but
>> > StandartAnalyzer keeps the digits.
>> >
>> > regards simon
>> >
>> > On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> Simon Willnauer a Ã©crit :
>> >> > You should rather explain what you expect from indexing your number
>> >> > not as string values.
>> >> >
>> >> > best regards simon
>> >> >
>> >> > On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> >> Erick Erickson a Ã©crit :
>> >> >> > What analyzers are you using for both indexing and searching? 
>> Some
>> >> >> > analyzers
>> >> >> > strip out numbers and some don't. I'd start with
>> >> >> WhitespaceAnalyzer, and
>> >> >> > index your fields UN_TOKENIZED and work up to the other 
>> analyzers
>> >> >> and/or
>> >> >> > tokenizations from there.
>> >> >> >
>> >> >> > Under any circumstances, you really, really, really want to 
>> get a
>> >> >> copy of
>> >> >> > Luke (http://www.getopt.org/luke/) which will allow you to 
>> examine
>> >> >> your
>> >> >> > index to see what it actually contains. I've been surprised more
>> >> than
>> >> >> > once
>> >> >> > by thinking that my index contained something it really hadn't.
>> >> >> >
>> >> >> > Best
>> >> >> > Erick
>> >> >> >
>> >> >> > On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> >> >>
>> >> >> >> Hello,
>> >> >> >>
>> >> >> >> I don't arrive to get result from the field have a value
>> >> numeric for
>> >> >> >> example "date=2005" or "title=900",
>> >> >> >> I have indexed the fields "date" with String value. I want know
>> >> why?
>> >> >> >>
>> >> >> >> Can you help me?
>> >> >> >>
>> >> >> >> thanks.
>> >> >> >>
>> >> >> >>
>> >> ---------------------------------------------------------------------
>> >> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> >> For additional commands, e-mail: 
>> java-user-help@lucene.apache.org
>> >> >> >>
>> >> >> >>
>> >> >> >
>> >> >> thanks for your response and your soft,
>> >> >> you think what about the indexer that can resolve my problem.
>> >> >> my problem is the indexer, it don't index value numeric.
>> >> >>
>> >> >> thanks.
>> >> >>
>> >> >>
>> >> >> 
>> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >> I  add my document
>> >> Document doc=new Document();
>> >> doc.add(new Field( getName(), value, getStore(), getIndex()));
>> >> and getName can be "date, name, tilte, or another", but can if I 
>> index
>> >> title with the value "122" or another, It can't return me a 
>> result, if I
>> >> index title with "mytitre" for example, it return me the result, I 
>> would
>> >> like why?
>> >>
>> >> thanks.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 12:42:06 2006
Return-Path: <java-user-return-22610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43674 invoked from network); 10 Aug 2006 12:42:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 12:42:06 -0000
Received: (qmail 88698 invoked by uid 500); 10 Aug 2006 12:42:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88439 invoked by uid 500); 10 Aug 2006 12:41:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88428 invoked by uid 99); 10 Aug 2006 12:41:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:41:59 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:41:58 -0700
Received: by nf-out-0910.google.com with SMTP id p48so563894nfa
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 05:41:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=GkQEmp3o99eCdLBaSn1vLIvl1J6MGSTW2hBLnCOOKHjtDZhO2ztpltrTAIOuo/8ErrszRq222GydRf0LIZo/WS9dxXeONFiCIC0APxhFDUSKRH2FrxQj+69e60Rc4NEp2iED2Ygi+FB5bCs8B7+cFdjWkwr77mYL91u81gSJ3h8=
Received: by 10.82.132.4 with SMTP id f4mr270689bud;
        Thu, 10 Aug 2006 05:41:36 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Thu, 10 Aug 2006 05:41:36 -0700 (PDT)
Message-ID: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com>
Date: Thu, 10 Aug 2006 22:41:36 +1000
From: "Jason Polites" <jason.polites@gmail.com>
Reply-To: jason.polites@synetek.com
To: java-user@lucene.apache.org
Subject: Field compression too slow
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3448_9554549.1155213696849"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3448_9554549.1155213696849
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello all,

I am experiencing some performance problems indexing large(ish) amounts of
text using the IndexField.Store.COMPRESS option when creating a Field in
Lucene.

I have a sample document which has about 4.5MB of text to be stored as
compressed data within the field, and the indexing of this document seems to
take an inordinate amount of time (over 10 minutes!).  When debugging I can
see that it's stuck on the deflate() calls of the Deflater used by Lucene.

I noted that Lucene by default uses the
Deflater.BEST_COMPRESSIONcompression level when encountering a
compressed field.

I'm not sure if it would help my particular situation, but is there any way
to provide the option of specifying the compression level?  The level used
by Lucene (level 9) is the maximum possible compression level.  Ideally I
would like to be able to alter the compression level on the basis of the
field size.  This way I can smooth out the compression times across the
various document sizes.  I am more interested in consistent time than I am
consistent compression.

Or... could there some other reason my document takes this long to index?
(and hold up all other threads).

Thanks.

------=_Part_3448_9554549.1155213696849--

From java-user-return-22611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 12:56:03 2006
Return-Path: <java-user-return-22611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48917 invoked from network); 10 Aug 2006 12:56:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 12:56:02 -0000
Received: (qmail 21937 invoked by uid 500); 10 Aug 2006 12:55:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21902 invoked by uid 500); 10 Aug 2006 12:55:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21891 invoked by uid 99); 10 Aug 2006 12:55:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:55:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of feris.apache@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:55:55 -0700
Received: by wx-out-0506.google.com with SMTP id s15so400404wxc
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 05:55:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QytFRtTCC5n13IEEQJJVmK73sCmuUg+zc7zmgP+CckAfQ9ggkgdOx/6VKRpGoAenGTWvlDE1DWxdeoY1efnKzVPViVEqstc++RoGufbNYrUWRGkq9VCEzXFWIIYIL0mss8J9escgx9KhWPhEB3EUSso+XI00tJgJpNViI+TEX0I=
Received: by 10.70.52.5 with SMTP id z5mr3150497wxz;
        Thu, 10 Aug 2006 05:55:33 -0700 (PDT)
Received: by 10.70.125.12 with HTTP; Thu, 10 Aug 2006 05:55:33 -0700 (PDT)
Message-ID: <103817900608100555y18c6f2bbye40d316cdedd1238@mail.gmail.com>
Date: Thu, 10 Aug 2006 19:55:33 +0700
From: "Feris Thia" <feris.apache@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: Tomcat : Indexing Sample ?
In-Reply-To: <f18c9dde0608091451m7f65a3afx33b8adb8f4e29d9e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34899_24758105.1155214533298"
References: <103817900608091250l20b76901m81154a9ed5a85ff7@mail.gmail.com>
	 <f18c9dde0608091451m7f65a3afx33b8adb8f4e29d9e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_34899_24758105.1155214533298
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Simon,

I see.. just curious about several techniques that come in my mind. Thanks
for your insight Simon.

Regards,

Feris

On 8/10/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>
> You can just put your documents in a queue and access the index within
> one single thread?! All your analysis can take part in other threads,
> If one has finished dump the Document in the queue and keep you index
> writer busy, that's a good Idea anyway.
>
> I guess you don't need an example for that don't you.
>
> best regards Simon
>
> On 8/9/06, Feris Thia <feris.apache@gmail.com> wrote:
> > Hi All,
> >
> > I'm a newbie to Lucene and would like to use thread instance to index my
> > office document I've uploaded within web application.  Is Lucene can
> face
> > concurrent indexing issue ? Is there any jsp/servlet sample that can
> show me
> > how to do that ?
> >
> > Regards,
> >
> > Feris
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_34899_24758105.1155214533298--

From java-user-return-22612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 12:58:20 2006
Return-Path: <java-user-return-22612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49669 invoked from network); 10 Aug 2006 12:58:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 12:58:20 -0000
Received: (qmail 29210 invoked by uid 500); 10 Aug 2006 12:58:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29168 invoked by uid 500); 10 Aug 2006 12:58:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29157 invoked by uid 99); 10 Aug 2006 12:58:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:58:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 05:58:09 -0700
Received: by ug-out-1314.google.com with SMTP id y2so29666uge
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 05:57:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=NFcWAaWIZNugsEBH1FrlhGrdFDC4RQosJZfurJHF6dECYsw/nT0u8eWqgx/M+hJyDuzPVQXpN05sZcoxApqKTapM9k7e9+jOvVNhJ1o/PdpaF7xumh8ZOI8+hH0JBS51jSa8lmXzWI3qXbMUK5yDEGUvT2cm55vvTvQ8jHOCUYA=
Received: by 10.67.100.12 with SMTP id c12mr2495710ugm;
        Thu, 10 Aug 2006 05:57:47 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Thu, 10 Aug 2006 05:57:47 -0700 (PDT)
Message-ID: <f18c9dde0608100557x14ac2647m10201274ab6807f5@mail.gmail.com>
Date: Thu, 10 Aug 2006 14:57:47 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: research lucene
In-Reply-To: <44DB2544.1020409@emn.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <44D9AADF.2090904@emn.fr>
	 <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>
	 <44D9F131.8@emn.fr>
	 <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>
	 <44D9FED3.1080708@emn.fr>
	 <f18c9dde0608090832q2812c9f8y3621229d3dde8e0@mail.gmail.com>
	 <44DB1C83.5030201@emn.fr>
	 <f18c9dde0608100458k30340fa7l91c177485b4caa20@mail.gmail.com>
	 <44DB2544.1020409@emn.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SSBqdXN0IHRyaWVkIGl0IG91dCBhbmQgaXQgd29ya2VkIGxpa2UgZXhwZWN0ZWQ6CgoKICAgUkFN
RGlyZWN0b3J5IGQgPSBuZXcgUkFNRGlyZWN0b3J5KCk7CiAgICBJbmRleFdyaXRlciB3ID0gbmV3
IEluZGV4V3JpdGVyKGQsbmV3IFdoaXRlc3BhY2VBbmFseXplcigpLHRydWUpOwoKICAgIERvY3Vt
ZW50IGRvYyA9IG5ldyBEb2N1bWVudCgpOwogICAgZG9jLmFkZChuZXcgRmllbGQoImZpZWxkIiwi
dGl0bGUiLEZpZWxkLlN0b3JlLllFUyxGaWVsZC5JbmRleC5UT0tFTklaRUQgKSk7CiAgICBkb2Mu
YWRkKG5ldyBGaWVsZCgiZmllbGQiLCIyMDA2IixGaWVsZC5TdG9yZS5ZRVMsRmllbGQuSW5kZXgu
VE9LRU5JWkVEICkpOwogICAgdy5hZGREb2N1bWVudChkb2MpOwoKICAgIHcuY2xvc2UoKTsKICAg
IEluZGV4U2VhcmNoZXIgcyA9IG5ldyBJbmRleFNlYXJjaGVyKGQpOwogICAgU3lzdGVtLm91dC5w
cmludGxuKCJTZWFyY2ggZm9yIHRpdGxlOiAiK3Muc2VhcmNoKG5ldyBUZXJtUXVlcnkobmV3ClRl
cm0oImZpZWxkIiwidGl0bGUiKSkpLmxlbmd0aCgpKTsKICAgIFN5c3RlbS5vdXQucHJpbnRsbigi
U2VhcmNoIGZvciAyMDA2OiAiK3Muc2VhcmNoKG5ldyBUZXJtUXVlcnkobmV3ClRlcm0oImZpZWxk
IiwiMjAwNiIpKSkubGVuZ3RoKCkpOwoKT3V0cHV0OgoKU2VhcmNoIGZvciB0aXRsZTogMQpTZWFy
Y2ggZm9yIDIwMDY6IDEKCkkgYWN0dWFsbHkgY2FuJ3QgcmVhbGx5IGdldCB5b3VyIHByb2JsZW0u
CgpyZWdhcmRzIHNpbW9uCgpPbiA4LzEwLzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRAZW1u
LmZyPiB3cm90ZToKPgo+IFRoZSBwcm9ibCBhZGQobmV3IEZpZWxkKCAgZmllbGROYW1lKCksIGZp
ZWxkVmFsdWUsIEZpZWxkLlN0b3JlLAo+IEZpZWxkLkluZGV4KSk7Cj4gYW5kIEkgdXNlIHRoZSBX
aGl0ZVNwYWNlQW5hbHlzZXIsIGJ1dCBteSBwcm9ibGVtIGlzIGNhbiBJIGluZGV4IGEgZmllbGQK
PiB3aXRoIHZhbHVlIGFzICJ0aXRsZSIgaXQgZ29lcywgYW5kIGNhbiBJIGluZGV4IHdpdGggdmFs
dWUgYXMgIjIwMDYiIGl0Cj4gZG9lc24ndCBnby4KPiBXaHksIEkgZG9uJ3Qga25vdwo+IHRoYW5r
cwo+IFNpbW9uIFdpbGxuYXVlciBhIMOpY3JpdCA6Cj4gPiBjb3VsZCB5b3UgcHJvdmlkZSBhIGJp
dCBtb3JlIGluZm8gb24geW91ciBpbmRleCBwcm9jZXNzPwo+ID4gKGFuYWx5emVyLEZpZWxkLCBT
dG9yZSwgSW5kZXgpCj4gPgo+ID4gcmVnYXJkcyBzaW1vbgo+ID4KPiA+IE9uIDgvMTAvMDYsIG91
bGQgc2lkJ2FobWVkIDxub3VsZHNpZEBlbW4uZnI+IHdyb3RlOgo+ID4+Cj4gPj4gSGVsbG8sCj4g
Pj4gSSBkb24ndCBrbm93IHdoeSBpdCBkb24ndCBpbmRleCB0aGUgbnVtYmVyIHZhbHVlcywgSSBs
b29rIHdpdGggTHVrZQo+ID4+IEx1Y2VuZSwgSSBmb3VuZGVkIHRoYXQgdmFsdWVzIG51bWVyaWNz
IGRpZG4ndCBpbmRleGVkLgo+ID4+IGNhbiB5b3Uga25vdyB3aGF0IHRoZSBwcm9ibGVtPwo+ID4+
Cj4gPj4gdGhhbmtzCj4gPj4gU2ltb24gV2lsbG5hdWVyIGEgw6ljcml0IDoKPiA+PiA+IFdlbGwg
eW91ciBkaWdpdHMgbWlnaHQgYmUgbG9zdCBkdXJpbmcgYW5hbHlzaXMgbGlrZSBFcmlrIHNhaWQu
IENoZWNrCj4gPj4gPiBvdXQgd2l0aCBsdWtlIHdoYXRzIGluIHlvdXIgaW5kZXggKEZpZWxkLlN0
b3JlLlllcykgYW5kIHNlZSBpZiB5b3VyCj4gPj4gPiBhbmFseXplciByZW1vdmVzIHRoZSBkaWdp
dHMuIFNpbXBsZUFuYWx5emVyIHJlbW92ZXMgdGhlbSBidXQKPiA+PiA+IFN0YW5kYXJ0QW5hbHl6
ZXIga2VlcHMgdGhlIGRpZ2l0cy4KPiA+PiA+Cj4gPj4gPiByZWdhcmRzIHNpbW9uCj4gPj4gPgo+
ID4+ID4gT24gOC85LzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRAZW1uLmZyPiB3cm90ZToK
PiA+PiA+PiBTaW1vbiBXaWxsbmF1ZXIgYSDDqWNyaXQgOgo+ID4+ID4+ID4gWW91IHNob3VsZCBy
YXRoZXIgZXhwbGFpbiB3aGF0IHlvdSBleHBlY3QgZnJvbSBpbmRleGluZyB5b3VyIG51bWJlcgo+
ID4+ID4+ID4gbm90IGFzIHN0cmluZyB2YWx1ZXMuCj4gPj4gPj4gPgo+ID4+ID4+ID4gYmVzdCBy
ZWdhcmRzIHNpbW9uCj4gPj4gPj4gPgo+ID4+ID4+ID4gT24gOC85LzA2LCBvdWxkIHNpZCdhaG1l
ZCA8bm91bGRzaWRAZW1uLmZyPiB3cm90ZToKPiA+PiA+PiA+PiBFcmljayBFcmlja3NvbiBhIMOp
Y3JpdCA6Cj4gPj4gPj4gPj4gPiBXaGF0IGFuYWx5emVycyBhcmUgeW91IHVzaW5nIGZvciBib3Ro
IGluZGV4aW5nIGFuZCBzZWFyY2hpbmc/Cj4gPj4gU29tZQo+ID4+ID4+ID4+ID4gYW5hbHl6ZXJz
Cj4gPj4gPj4gPj4gPiBzdHJpcCBvdXQgbnVtYmVycyBhbmQgc29tZSBkb24ndC4gSSdkIHN0YXJ0
IHdpdGgKPiA+PiA+PiA+PiBXaGl0ZXNwYWNlQW5hbHl6ZXIsIGFuZAo+ID4+ID4+ID4+ID4gaW5k
ZXggeW91ciBmaWVsZHMgVU5fVE9LRU5JWkVEIGFuZCB3b3JrIHVwIHRvIHRoZSBvdGhlcgo+ID4+
IGFuYWx5emVycwo+ID4+ID4+ID4+IGFuZC9vcgo+ID4+ID4+ID4+ID4gdG9rZW5pemF0aW9ucyBm
cm9tIHRoZXJlLgo+ID4+ID4+ID4+ID4KPiA+PiA+PiA+PiA+IFVuZGVyIGFueSBjaXJjdW1zdGFu
Y2VzLCB5b3UgcmVhbGx5LCByZWFsbHksIHJlYWxseSB3YW50IHRvCj4gPj4gZ2V0IGEKPiA+PiA+
PiA+PiBjb3B5IG9mCj4gPj4gPj4gPj4gPiBMdWtlIChodHRwOi8vd3d3LmdldG9wdC5vcmcvbHVr
ZS8pIHdoaWNoIHdpbGwgYWxsb3cgeW91IHRvCj4gPj4gZXhhbWluZQo+ID4+ID4+ID4+IHlvdXIK
PiA+PiA+PiA+PiA+IGluZGV4IHRvIHNlZSB3aGF0IGl0IGFjdHVhbGx5IGNvbnRhaW5zLiBJJ3Zl
IGJlZW4gc3VycHJpc2VkIG1vcmUKPiA+PiA+PiB0aGFuCj4gPj4gPj4gPj4gPiBvbmNlCj4gPj4g
Pj4gPj4gPiBieSB0aGlua2luZyB0aGF0IG15IGluZGV4IGNvbnRhaW5lZCBzb21ldGhpbmcgaXQg
cmVhbGx5IGhhZG4ndC4KPiA+PiA+PiA+PiA+Cj4gPj4gPj4gPj4gPiBCZXN0Cj4gPj4gPj4gPj4g
PiBFcmljawo+ID4+ID4+ID4+ID4KPiA+PiA+PiA+PiA+IE9uIDgvOS8wNiwgb3VsZCBzaWQnYWht
ZWQgPG5vdWxkc2lkQGVtbi5mcj4gd3JvdGU6Cj4gPj4gPj4gPj4gPj4KPiA+PiA+PiA+PiA+PiBI
ZWxsbywKPiA+PiA+PiA+PiA+Pgo+ID4+ID4+ID4+ID4+IEkgZG9uJ3QgYXJyaXZlIHRvIGdldCBy
ZXN1bHQgZnJvbSB0aGUgZmllbGQgaGF2ZSBhIHZhbHVlCj4gPj4gPj4gbnVtZXJpYyBmb3IKPiA+
PiA+PiA+PiA+PiBleGFtcGxlICJkYXRlPTIwMDUiIG9yICJ0aXRsZT05MDAiLAo+ID4+ID4+ID4+
ID4+IEkgaGF2ZSBpbmRleGVkIHRoZSBmaWVsZHMgImRhdGUiIHdpdGggU3RyaW5nIHZhbHVlLiBJ
IHdhbnQga25vdwo+ID4+ID4+IHdoeT8KPiA+PiA+PiA+PiA+Pgo+ID4+ID4+ID4+ID4+IENhbiB5
b3UgaGVscCBtZT8KPiA+PiA+PiA+PiA+Pgo+ID4+ID4+ID4+ID4+IHRoYW5rcy4KPiA+PiA+PiA+
PiA+Pgo+ID4+ID4+ID4+ID4+Cj4gPj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPj4gPj4gPj4gPj4gVG8g
dW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUu
b3JnCj4gPj4gPj4gPj4gPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDoKPiA+PiBq
YXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+ID4+ID4+ID4+Cj4gPj4gPj4gPj4g
Pj4KPiA+PiA+PiA+PiA+Cj4gPj4gPj4gPj4gdGhhbmtzIGZvciB5b3VyIHJlc3BvbnNlIGFuZCB5
b3VyIHNvZnQsCj4gPj4gPj4gPj4geW91IHRoaW5rIHdoYXQgYWJvdXQgdGhlIGluZGV4ZXIgdGhh
dCBjYW4gcmVzb2x2ZSBteSBwcm9ibGVtLgo+ID4+ID4+ID4+IG15IHByb2JsZW0gaXMgdGhlIGlu
ZGV4ZXIsIGl0IGRvbid0IGluZGV4IHZhbHVlIG51bWVyaWMuCj4gPj4gPj4gPj4KPiA+PiA+PiA+
PiB0aGFua3MuCj4gPj4gPj4gPj4KPiA+PiA+PiA+Pgo+ID4+ID4+ID4+Cj4gPj4gLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCj4gPj4gPj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4gPj4gPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+PiA+PiA+Pgo+ID4+
ID4+ID4+Cj4gPj4gPj4gPgo+ID4+ID4+IEkgIGFkZCBteSBkb2N1bWVudAo+ID4+ID4+IERvY3Vt
ZW50IGRvYz1uZXcgRG9jdW1lbnQoKTsKPiA+PiA+PiBkb2MuYWRkKG5ldyBGaWVsZCggZ2V0TmFt
ZSgpLCB2YWx1ZSwgZ2V0U3RvcmUoKSwgZ2V0SW5kZXgoKSkpOwo+ID4+ID4+IGFuZCBnZXROYW1l
IGNhbiBiZSAiZGF0ZSwgbmFtZSwgdGlsdGUsIG9yIGFub3RoZXIiLCBidXQgY2FuIGlmIEkKPiA+
PiBpbmRleAo+ID4+ID4+IHRpdGxlIHdpdGggdGhlIHZhbHVlICIxMjIiIG9yIGFub3RoZXIsIEl0
IGNhbid0IHJldHVybiBtZSBhCj4gPj4gcmVzdWx0LCBpZiBJCj4gPj4gPj4gaW5kZXggdGl0bGUg
d2l0aCAibXl0aXRyZSIgZm9yIGV4YW1wbGUsIGl0IHJldHVybiBtZSB0aGUgcmVzdWx0LCBJCj4g
Pj4gd291bGQKPiA+PiA+PiBsaWtlIHdoeT8KPiA+PiA+Pgo+ID4+ID4+IHRoYW5rcy4KPiA+PiA+
Pgo+ID4+ID4+Cj4gPj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4gPj4gRm9y
IGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNo
ZS5vcmcKPiA+PiA+Pgo+ID4+ID4+Cj4gPj4gPgo+ID4+Cj4gPj4KPiA+PiAtLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
PiA+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5l
LmFwYWNoZS5vcmcKPiA+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVz
ZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+Cj4gPj4KPiA+Cj4KPgo+IC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUu
YXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1o
ZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=


From java-user-return-22613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 13:11:46 2006
Return-Path: <java-user-return-22613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54213 invoked from network); 10 Aug 2006 13:11:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 13:11:46 -0000
Received: (qmail 66908 invoked by uid 500); 10 Aug 2006 13:11:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66877 invoked by uid 500); 10 Aug 2006 13:11:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66860 invoked by uid 99); 10 Aug 2006 13:11:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:11:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:11:35 -0700
Received: by py-out-1112.google.com with SMTP id s49so852181pyc
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 06:11:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NhK2aNNCLcymtiYjuWbzOzBPqM4bTnCKEZczApMqPsIYZQhYzlyLoJLumIrt9QLhGVORjATW8uwv7hEQ4Q8Pv9a1wnhzE6d5TIINhUxWq0FaGuSCwGddoPycxUiiHCg60JajXO7sks9O2wJKl/guxicc/A2cEikb0mtGaKr5cZs=
Received: by 10.35.121.9 with SMTP id y9mr3780361pym;
        Thu, 10 Aug 2006 06:11:14 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Thu, 10 Aug 2006 06:11:14 -0700 (PDT)
Message-ID: <359a92830608100611h4c4c58f4we1997b5a46f6bca@mail.gmail.com>
Date: Thu, 10 Aug 2006 09:11:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene hits.length()
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C021E57F0@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_105608_3832475.1155215474918"
References: <8834A84C87A2C148AD46921BB8BFC97C021E57F0@S1SE1MAIL.emea1.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_105608_3832475.1155215474918
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You're right, this is strange. I'm afraid that I'm now beyond my competence
so I'll just have to appeal to wiser heads than mine to help...

Best
Erick

On 8/10/06, Marcus Falck <marcus.falck@observer.se> wrote:
>
> Hi again Erick.
>
> Yes I know the hits exists in the index at all time.
>
> I will illustrate exactly with approximently values for the hits.length()=
:
>
> Mergefactor 10.
> MinMergeDocs 5000.
>
> Searching for a very common Swedish word ("han" which equals to "he" in
> English).
>
> Indexing 100000 docs.
>
> After 1000 docs I do a search. Lets say I hit 200 docs.
> Now my searcher will be hold for 3 minutes time.
>
> After those three minutes lets say I got the following index structur:
> 5 x 5000 docs in FSDir
> And 1000 docs in RAMDir
> Total : 26000 docs
>
> The search now yields 220 results, but since I'm sorting on date and
> adding the oldest first I see the newest added hits.
>
> Holding this searcher for 3 minutes.
>
> After three minutes lets say I have the following index structure:
> 1 x 50000 docs in FSDir
> 2000 docs in RAMDir
>
> The search now yields 10000 hits. Which seems a lot more appropriate.
>
> 3 minutes later:
>
> 1x50000
> 5x5000
> + 1000 RAMDir
>
> Search hits count: 10111.
>
> And after the big 100 000 merge ( 2 x 50000 ) I will get approximately
> 20000 hits.
>
> ---
> As you can see it's a very strange behavior. At some points the
> hits.length() can even temporary decrease from the previous length.
>
> I will have to point out that I have a minMergeSize for the IndexWriter
> working on the FSDir set to 5000. I also have a separate RAMDir and anoth=
er
> IndexWriter that is writing to that RAMDir until my own RAMDir have 5000
> docs. Then I flush it into the FS IndexWriter ( which will result in a
> immediate disc write ). This way I have total control over when the disc
> writes occurs.
>
> And yes I'm afraid that this will affect my system in a very negative way=
.
> Cause my clients will browse the index on their stored search profiles.
>
>
> /
> Regards
> Marcus Falck
>
> -----Ursprungligt meddelande-----
> Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> Skickat: den 9 augusti 2006 19:49
> Till: java-user@lucene.apache.org
> =C4mne: Re: Lucene hits.length()
>
> I think, but am not certain (chime in here guys) that this is expected
> behavior. As I remember from various threads, internally indexing uses a
> RAMdir to accumulate data until it merges it with the FSDir. Since the
> searcher and indexer are separate, I assume that the searcher is looking
> at
> the snapshot that is on disk and missing that in the RAMdir. After you
> merge, the RAMdir data has been added to that on disk, and the two are "i=
n
> synch".
>
> So I guess my real question is "why do you care"? Is this affecting your
> application or is this an anomaly that you want to understand so you don'=
t
> get surprised? If the latter, I think you're OK if you open your index
> after
> merging, you'll have the data available....
>
> BTW, I assume that when you say hits.length() is not correct, you're
> getting
> fewer hits than you *know* are in the index (including the stuff you're
> currently indexing but haven't merged yet).
>
> Best
> Erick
>
>
>
> On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
> >
> > Still worried =3D)
> > You see it doesn't update the hits.length() in a correct way when I
> create
> > a new searcher. The correct update does just occur in the merges. =3D/
> >
> > -----Ursprungligt meddelande-----
> > Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> > Skickat: den 9 augusti 2006 15:34
> > Till: java-user@lucene.apache.org
> > =C4mne: Re: Lucene hits.length()
> >
> > Then you won't see anything added to your index between times. Does thi=
s
> > identify your problem or are you still worried?
> >
> > Erick
> >
> > On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
> > >
> > > I'm opening a new searcher every 3:rd minute.
> > >
> > > -----Ursprungligt meddelande-----
> > > Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Skickat: den 8 augusti 2006 18:58
> > > Till: java-user@lucene.apache.org
> > > =C4mne: Re: Lucene hits.length()
> > >
> > > I'll take a stab at it.... When are you opening/closing your searcher=
?
> > > When
> > > you open a searcher, you get a snapshot of the index at that instant,
> > and
> > > subsequent modifications aren't visible until you open a new searcher
> > (at
> > > least I think I've got this right).
> > >
> > > And I'm sure this also interacts with the writer merge settings
> > > "interestingly".
> > >
> > > Personally, I'd worry about this a lot more if it happened after I'd
> > > closed
> > > my writer and opened a new reader <G>...
> > > Of course, my app has an index that is updated rarely (every two
> weeks),
> > > so
> > > I haven't dug into too many details in this area...
> > >
> > >
> > > Best
> > > Erick
> > >
> > > On 8/8/06, Marcus Falck <marcus.falck@observer.se> wrote:
> > > >
> > > > I have noticed some strange behavior when searching my lucene index=
.
> > > >
> > > >
> > > >
> > > > I'm adding 500.000 docs to an index.
> > > >
> > > >
> > > >
> > > > MergeFactor =3D 10
> > > >
> > > > MinMerge =3D 5000
> > > >
> > > >
> > > >
> > > > When 49999 have been added ( just before the first 10 * 5000 merge =
)
> > the
> > > > hits.length() is reporting around 1000 hits for a keyword (which by
> > the
> > > > way is around the same count as with 5000 docs added). After the
> > 10*5000
> > > > merge the hits.length() returns around 8000 hits, which seems to be
> a
> > > > lot more reasonable. Since I'm adding content in date order ( oldes=
t
> > > > first ) I have also tried to sort the hits (newest date first) and
> > > > display the top 10 hits.
> > > >
> > > >
> > > >
> > > > According to that output it seems that the documents are added
> > > > correctly.
> > > >
> > > >
> > > >
> > > > I'm using a multisearcher on top of a RAMDir and an FSDir. Using
> > > > Lucene1.4.3
> > > >
> > > >
> > > >
> > > > Anybody that has any idea about why the hit count is so misleading?
> > > >
> > > >
> > > >
> > > > /
> > > >
> > > > Regards
> > > >
> > > > Marcus
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_105608_3832475.1155215474918--

From java-user-return-22614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 13:17:22 2006
Return-Path: <java-user-return-22614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55959 invoked from network); 10 Aug 2006 13:17:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 13:17:21 -0000
Received: (qmail 78771 invoked by uid 500); 10 Aug 2006 13:17:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78739 invoked by uid 500); 10 Aug 2006 13:17:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78728 invoked by uid 99); 10 Aug 2006 13:17:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:17:15 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:17:13 -0700
Received: by py-out-1112.google.com with SMTP id s49so854491pyc
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 06:16:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HSuqsKBc3c6EJodejqUE7dUCCf2C+VYxBSNv5vM6JQpjEhw0W2mVVxTunehqN9KSAWYhuyNVUus7XZpylkmQXs16K7itb6q2IT4/ydoURzapMgSWtc883VaHRw2iadHqofjKv6MHJOpsLwcHsvFXMuZ9hNXYQUKdObqf87K2UjI=
Received: by 10.35.77.1 with SMTP id e1mr3772902pyl;
        Thu, 10 Aug 2006 06:16:53 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Thu, 10 Aug 2006 06:16:52 -0700 (PDT)
Message-ID: <359a92830608100616re219fe3la419623871885798@mail.gmail.com>
Date: Thu, 10 Aug 2006 09:16:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: updating document
In-Reply-To: <1155145453.2739.8.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_105840_11572361.1155215812658"
References: <1155145453.2739.8.camel@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_105840_11572361.1155215812658
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You say "Those documents that we updated are not searchable now". I've got
to ask the obvious question, did you close and re-open the *searcher*
(really, the indexreader you use in your searcher)? I suspect you have, but
thought I'd ask explicitly.

I'd also get a copy of Luke (http://www.getopt.org/luke/) and inspect my
index after you drop/re-add the data.

Actually, have you thought about IndexModifier (I'm using Lucene 2.0). From
the javadoc....

<<< A class to modify an index, i.e. to delete and add documents. This class
hides IndexReader<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexReader.html>and
IndexWriter<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexWriter.html>so
that you do not need to care about implementation details such as that
adding documents is done via IndexWriter and deletion is done via
IndexReader.>>>

Best
Erick

On 8/9/06, Deepan Chakravarthy <codeshepherd@gmail.com> wrote:
>
> Hi,
> We have to update few documents in our index. We have add a additional
> field to them. We did as follows
>
> 1)read the documents of our interest using IndexReader
> 2)copy them to a temporary doc object (temp_doc)
> 3)delete the document in the index
> 4)close the IndexReader
> 5)open the IndexWriter
> 6)add a new field to (temp_doc)
> 7)add the (temp_doc) to the index using IndexWriter
> 8)close the IndexWriter
>
>
> The problem:
> 1)Those documents that we updated are not searchable now. When we
> perform search based we not find any of those documents we updated.
> (using IndexSearcher)
>
> 2)But we are still able to read the updated documents using IndexReader.
>
>
> Questions
> 1)When i want to update a document by adding a field, should i reindex
> all the fields again? will copying the existing document not help and
> adding new field not help ?
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_105840_11572361.1155215812658--

From java-user-return-22615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 13:25:43 2006
Return-Path: <java-user-return-22615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65361 invoked from network); 10 Aug 2006 13:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 13:25:42 -0000
Received: (qmail 6353 invoked by uid 500); 10 Aug 2006 13:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6313 invoked by uid 500); 10 Aug 2006 13:25:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6302 invoked by uid 99); 10 Aug 2006 13:25:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:25:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:25:34 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id CBAF9D94C56
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 09:25:12 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Thu, 10 Aug 2006 09:25:13 -0400
X-Sasl-enc: pMzUTrD/oW9nBryBcZeJU6xBIeooM5TW0qt5euGUvQ4y 1155216312
Received: from [10.17.4.91] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id EA5E0108C
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 09:25:12 -0400 (EDT)
Message-ID: <44DB33AF.6020106@mikemccandless.com>
Date: Thu, 10 Aug 2006 09:25:03 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Field compression too slow
References: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com>
In-Reply-To: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I'm not sure if it would help my particular situation, but is there any way
> to provide the option of specifying the compression level?  The level used
> by Lucene (level 9) is the maximum possible compression level.  Ideally I
> would like to be able to alter the compression level on the basis of the
> field size.  This way I can smooth out the compression times across the
> various document sizes.  I am more interested in consistent time than I am
> consistent compression.

I agree, we should make the compression level configurable.  It's 
disturbing that it takes minutes to compress a 4.5 MB document!  I'll 
open a Jira issue for this.

> Or... could there some other reason my document takes this long to index?
> (and hold up all other threads).

You might want to try just running the command-line "zip" utility, 
specifying best compression, to see how long it takes?  Lucene is just 
using java.util.zip.* APIs (which is the same compression as "zip").

One correction: this compression should not block other threads.  This 
runs outside of "synchronized" code, meaning, if you have other threads 
adding documents, they can do so fully in parallel with your one thread 
that's doing the slow compression.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 13:31:52 2006
Return-Path: <java-user-return-22616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67172 invoked from network); 10 Aug 2006 13:31:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 13:31:52 -0000
Received: (qmail 20785 invoked by uid 500); 10 Aug 2006 13:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19793 invoked by uid 500); 10 Aug 2006 13:31:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19777 invoked by uid 99); 10 Aug 2006 13:31:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:31:45 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DATE_IN_PAST_12_24,DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of codeshepherd@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:31:44 -0700
Received: by py-out-1112.google.com with SMTP id s49so860635pyc
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 06:31:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=uXCqU8DFGDM/ZkKCcX02A4bseHGD9CIIsEl8b8pI3JOegCeX6XoAsrosQy9p7Wwci/d20cDj4PyihetA1/IwqRXffpJNH6z8QSo2hpBKl6Njc+eCqMSN8hGbeYqFKig48ONt5ZtlIiXvgHIeg5Y21reU6Au9MDUmalwJFUZKVG0=
Received: by 10.35.9.15 with SMTP id m15mr3861402pyi;
        Thu, 10 Aug 2006 06:31:23 -0700 (PDT)
Received: from ?10.1.1.2? ( [59.92.88.244])
        by mx.gmail.com with ESMTP id j76sm1777605pyd.2006.08.10.06.31.20;
        Thu, 10 Aug 2006 06:31:22 -0700 (PDT)
Subject: Re: updating document
From: Deepan Chakravarthy <codeshepherd@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830608100616re219fe3la419623871885798@mail.gmail.com>
References: <1155145453.2739.8.camel@localhost.localdomain>
	 <359a92830608100616re219fe3la419623871885798@mail.gmail.com>
Content-Type: text/plain
Date: Thu, 10 Aug 2006 06:31:13 +0530
Message-Id: <1155171673.3388.3.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 (2.6.0-1) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2006-08-10 at 09:16 -0400, Erick Erickson wrote:
> You say "Those documents that we updated are not searchable now". I've got
> to ask the obvious question, did you close and re-open the *searcher*
> (really, the indexreader you use in your searcher)? I suspect you have, but
> thought I'd ask explicitly.
> 
> I'd also get a copy of Luke (http://www.getopt.org/luke/) and inspect my
> index after you drop/re-add the data.
I have Luke. When i inspect the index with luke i find the same result,
i.e the updated documents are not searchable in the new index. 

I guess Index Modifier used Index reader and writer internally. I am
adding more fields to existing documents in index. so some of my
documents will have n fields and other n+m fields after updating. Does
the difference in number of fields affect search in any manner ? 


> 
> Actually, have you thought about IndexModifier (I'm using Lucene 2.0). From
> the javadoc....
> 
> <<< A class to modify an index, i.e. to delete and add documents. This class
> hides IndexReader<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexReader.html>and
> IndexWriter<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexWriter.html>so
> that you do not need to care about implementation details such as that
> adding documents is done via IndexWriter and deletion is done via
> IndexReader.>>>
> 
> Best
> Erick
> 
> On 8/9/06, Deepan Chakravarthy <codeshepherd@gmail.com> wrote:
> >
> > Hi,
> > We have to update few documents in our index. We have add a additional
> > field to them. We did as follows
> >
> > 1)read the documents of our interest using IndexReader
> > 2)copy them to a temporary doc object (temp_doc)
> > 3)delete the document in the index
> > 4)close the IndexReader
> > 5)open the IndexWriter
> > 6)add a new field to (temp_doc)
> > 7)add the (temp_doc) to the index using IndexWriter
> > 8)close the IndexWriter
> >
> >
> > The problem:
> > 1)Those documents that we updated are not searchable now. When we
> > perform search based we not find any of those documents we updated.
> > (using IndexSearcher)
> >
> > 2)But we are still able to read the updated documents using IndexReader.
> >
> >
> > Questions
> > 1)When i want to update a document by adding a field, should i reindex
> > all the fields again? will copying the existing document not help and
> > adding new field not help ?
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 13:48:30 2006
Return-Path: <java-user-return-22617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76021 invoked from network); 10 Aug 2006 13:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 13:48:30 -0000
Received: (qmail 70678 invoked by uid 500); 10 Aug 2006 13:48:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70653 invoked by uid 500); 10 Aug 2006 13:48:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70634 invoked by uid 99); 10 Aug 2006 13:48:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:48:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.54.76.193] (HELO ron.emn.fr) (193.54.76.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 06:48:21 -0700
Received: from spip.dsic.emn.fr (root@spip.dsic.emn.fr [193.104.32.156])
          by ron.emn.fr (8.9.3/jtpda-5.3.1) with ESMTP id PAA15324
          for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 15:46:51 +0200 (CEST)
Received: from ifs.emn.fr (ifs.emn.fr [193.54.76.100])
	by spip.dsic.emn.fr (8.12.1/8.12.1) with ESMTP id k7ADlqbT013874
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 15:47:52 +0200
Received: from [192.168.18.35] (dhcp35.rech18.emn.fr [192.168.18.35])
          by ifs.emn.fr (8.9.3/jtpda-5.1) with ESMTP id PAA29943
          for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 15:46:27 +0200 (MEST)
Message-ID: <44DB3905.3000608@emn.fr>
Date: Thu, 10 Aug 2006 15:47:49 +0200
From: "ould sid'ahmed" <nouldsid@emn.fr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: research lucene
References: <44D9AADF.2090904@emn.fr>	 <359a92830608090632m18e7e32ek34f943b71eb46b94@mail.gmail.com>	 <44D9F131.8@emn.fr>	 <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>	 <44D9FED3.1080708@emn.fr>	 <f18c9dde0608090832q2812c9f8y3621229d3dde8e0@mail.gmail.com>	 <44DB1C83.5030201@emn.fr>	 <f18c9dde0608100458k30340fa7l91c177485b4caa20@mail.gmail.com>	 <44DB2544.1020409@emn.fr> <f18c9dde0608100557x14ac2647m10201274ab6807f5@mail.gmail.com>
In-Reply-To: <f18c9dde0608100557x14ac2647m10201274ab6807f5@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello Simon,
 I have resolved my problem, I added Store.YES and Index.TOKENIZED, and 
it goes.
thank you another time.

thanks.
Simon Willnauer a Ã©crit :
> I just tried it out and it worked like expected:
>
>
>   RAMDirectory d = new RAMDirectory();
>    IndexWriter w = new IndexWriter(d,new WhitespaceAnalyzer(),true);
>
>    Document doc = new Document();
>    doc.add(new 
> Field("field","title",Field.Store.YES,Field.Index.TOKENIZED ));
>    doc.add(new 
> Field("field","2006",Field.Store.YES,Field.Index.TOKENIZED ));
>    w.addDocument(doc);
>
>    w.close();
>    IndexSearcher s = new IndexSearcher(d);
>    System.out.println("Search for title: "+s.search(new TermQuery(new
> Term("field","title"))).length());
>    System.out.println("Search for 2006: "+s.search(new TermQuery(new
> Term("field","2006"))).length());
>
> Output:
>
> Search for title: 1
> Search for 2006: 1
>
> I actually can't really get your problem.
>
> regards simon
>
> On 8/10/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>>
>> The probl add(new Field(  fieldName(), fieldValue, Field.Store,
>> Field.Index));
>> and I use the WhiteSpaceAnalyser, but my problem is can I index a field
>> with value as "title" it goes, and can I index with value as "2006" it
>> doesn't go.
>> Why, I don't know
>> thanks
>> Simon Willnauer a Ã©crit :
>> > could you provide a bit more info on your index process?
>> > (analyzer,Field, Store, Index)
>> >
>> > regards simon
>> >
>> > On 8/10/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >>
>> >> Hello,
>> >> I don't know why it don't index the number values, I look with Luke
>> >> Lucene, I founded that values numerics didn't indexed.
>> >> can you know what the problem?
>> >>
>> >> thanks
>> >> Simon Willnauer a Ã©crit :
>> >> > Well your digits might be lost during analysis like Erik said. 
>> Check
>> >> > out with luke whats in your index (Field.Store.Yes) and see if your
>> >> > analyzer removes the digits. SimpleAnalyzer removes them but
>> >> > StandartAnalyzer keeps the digits.
>> >> >
>> >> > regards simon
>> >> >
>> >> > On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> >> Simon Willnauer a Ã©crit :
>> >> >> > You should rather explain what you expect from indexing your 
>> number
>> >> >> > not as string values.
>> >> >> >
>> >> >> > best regards simon
>> >> >> >
>> >> >> > On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> >> >> Erick Erickson a Ã©crit :
>> >> >> >> > What analyzers are you using for both indexing and searching?
>> >> Some
>> >> >> >> > analyzers
>> >> >> >> > strip out numbers and some don't. I'd start with
>> >> >> >> WhitespaceAnalyzer, and
>> >> >> >> > index your fields UN_TOKENIZED and work up to the other
>> >> analyzers
>> >> >> >> and/or
>> >> >> >> > tokenizations from there.
>> >> >> >> >
>> >> >> >> > Under any circumstances, you really, really, really want to
>> >> get a
>> >> >> >> copy of
>> >> >> >> > Luke (http://www.getopt.org/luke/) which will allow you to
>> >> examine
>> >> >> >> your
>> >> >> >> > index to see what it actually contains. I've been 
>> surprised more
>> >> >> than
>> >> >> >> > once
>> >> >> >> > by thinking that my index contained something it really 
>> hadn't.
>> >> >> >> >
>> >> >> >> > Best
>> >> >> >> > Erick
>> >> >> >> >
>> >> >> >> > On 8/9/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> >> >> >>
>> >> >> >> >> Hello,
>> >> >> >> >>
>> >> >> >> >> I don't arrive to get result from the field have a value
>> >> >> numeric for
>> >> >> >> >> example "date=2005" or "title=900",
>> >> >> >> >> I have indexed the fields "date" with String value. I 
>> want know
>> >> >> why?
>> >> >> >> >>
>> >> >> >> >> Can you help me?
>> >> >> >> >>
>> >> >> >> >> thanks.
>> >> >> >> >>
>> >> >> >> >>
>> >> >> 
>> ---------------------------------------------------------------------
>> >> >> >> >> To unsubscribe, e-mail: 
>> java-user-unsubscribe@lucene.apache.org
>> >> >> >> >> For additional commands, e-mail:
>> >> java-user-help@lucene.apache.org
>> >> >> >> >>
>> >> >> >> >>
>> >> >> >> >
>> >> >> >> thanks for your response and your soft,
>> >> >> >> you think what about the indexer that can resolve my problem.
>> >> >> >> my problem is the indexer, it don't index value numeric.
>> >> >> >>
>> >> >> >> thanks.
>> >> >> >>
>> >> >> >>
>> >> >> >>
>> >> ---------------------------------------------------------------------
>> >> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> >> For additional commands, e-mail: 
>> java-user-help@lucene.apache.org
>> >> >> >>
>> >> >> >>
>> >> >> >
>> >> >> I  add my document
>> >> >> Document doc=new Document();
>> >> >> doc.add(new Field( getName(), value, getStore(), getIndex()));
>> >> >> and getName can be "date, name, tilte, or another", but can if I
>> >> index
>> >> >> title with the value "122" or another, It can't return me a
>> >> result, if I
>> >> >> index title with "mytitre" for example, it return me the result, I
>> >> would
>> >> >> like why?
>> >> >>
>> >> >> thanks.
>> >> >>
>> >> >>
>> >> >> 
>> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 14:53:32 2006
Return-Path: <java-user-return-22618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9620 invoked from network); 10 Aug 2006 14:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 14:53:31 -0000
Received: (qmail 56259 invoked by uid 500); 10 Aug 2006 14:53:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56186 invoked by uid 500); 10 Aug 2006 14:53:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56164 invoked by uid 99); 10 Aug 2006 14:53:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 07:53:20 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 07:53:12 -0700
Received: by py-out-1112.google.com with SMTP id s49so893583pyc
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 07:52:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=s6oamdozhcPt3pbt8AN2j1dB0fsmzYOVgeKhOLB+fIB2KiB+6ZNMZyYBKP+/TESOe6QP52hXT2Q2k1UxLtyxoI5PZfSN7iaYhYYa2NG1DJfTjKrI28yoX+hJ+QaxQqkbbWf3tsD4cGjuS6vMG8aAHCaS5gCQSjYfqIfk3uvdV1A=
Received: by 10.35.135.12 with SMTP id m12mr4001180pyn;
        Thu, 10 Aug 2006 07:52:45 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Thu, 10 Aug 2006 07:52:45 -0700 (PDT)
Message-ID: <c68e39170608100752p3c37fed8mb8275c99ee41042d@mail.gmail.com>
Date: Thu, 10 Aug 2006 10:52:45 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
In-Reply-To: <OF03A14E07.982F5803-ON882571C6.00173655-882571C6.00189CC4@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170608092032n5647beeck2271a6385257085b@mail.gmail.com>
	 <OF03A14E07.982F5803-ON882571C6.00173655-882571C6.00189CC4@il.ibm.com>
X-Google-Sender-Auth: 7cf567c5be5d045e
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/10/06, Doron Cohen <DORONC@il.ibm.com> wrote:
> I have one more comment on the cache implementation. It feels to me
> somewhat not right that a static system wide object (FieldCache.DEFAULT) is
> managing the field caching for all the indexReaders in the JVM (possibly of
> different indexes), when in fact there is no
> dependency/relation/cooperation between the different indexReaders, cache
> wise. It seems cleaner and simpler to have FieldCacheImpl take care of a
> single IndexReader, and so have that cache "belong" to the indexReader.
> This would make the cache implementation simpler. Synchronization would
> only need to be on field values. This way we also get rid of the
> WeakHashMap (which, btw, I never got to fully trust).

Sorting was introduced to Lucene before my time, so I don't know the
reasons behind it.  Maybe it was seen as non-optimial or non-core and
so was kept out of the IndexReader.

I admit, it does feel like the level of abstraction that FieldCache is
at is higher than that of the IndexReader (the lowest level).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 15:09:07 2006
Return-Path: <java-user-return-22619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19293 invoked from network); 10 Aug 2006 15:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 15:09:07 -0000
Received: (qmail 2552 invoked by uid 500); 10 Aug 2006 15:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2518 invoked by uid 500); 10 Aug 2006 15:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2507 invoked by uid 99); 10 Aug 2006 15:09:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:09:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.25.178.46] (HELO mx03.lexisnexis.com) (207.25.178.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:08:51 -0700
Received: from mailgate2.lexis-nexis.com ([138.12.44.45])
  by mx03.lexisnexis.com with ESMTP; 10 Aug 2006 11:08:24 -0400
Received: from lngdayexcp001.legal.regn.net (smtpgate.lexis-nexis.com [10.113.1.1])
	by mailgate2.lexis-nexis.com (8.12.11/8.12.11) with ESMTP id k7AF87aL018871
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 11:08:23 -0400
Received: from LNGDAYEXCP01VA.legal.regn.net ([10.113.1.3]) by lngdayexcp001.legal.regn.net with Microsoft SMTPSVC(6.0.3790.2499);
	 Thu, 10 Aug 2006 11:07:49 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6BC8E.BDB7E6BC"
Subject: remote multiSearching not scaling well
Date: Thu, 10 Aug 2006 11:07:48 -0400
Message-ID: <6B7B28B775F23D45B175CD4A301CFC6304B88065@LNGDAYEXCP01VB.legal.regn.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: remote multiSearching not scaling well
Thread-Index: Aca8jr1Idrs1p5Z9T2iyT07KerBtJg==
From: "Haines, Ronald C. \(LNG-DAY\)" <Ronald.Haines@lexisnexis.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Aug 2006 15:07:49.0188 (UTC) FILETIME=[BE5E8040:01C6BC8E]
X-Scanned-By: MIMEDefang 2.51 on 138.12.44.45
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6BC8E.BDB7E6BC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm hoping I'm doing something wrong, because I've been impressed with
Lucene so far.  The basic problem I'm seeing is that when I run the same
search several times against box A (with 1 RemoteSearchable), I see X
for an average search response time.  When I run the same search several
times against a different box, say box B (also with 1 RemoteSearchable),
I see Y for an average response time.

=20

NOTE: the search I am using does have a date range in it and I am not
using any Filters.

=20

However, when I then run the same search several times against both
boxes, I'm seeing an average response time that is much larger than the
larger or X or Y.

=20

For example,

Searching against only box A, average response time =3D 3707 ms, 683847
docs found

Searching against only box B, average response time =3D 1095 ms, 93566
docs found

=20

Searching against box A and B, 777413 docs found

average response time for box A =3D 8528 ms

average response time for box B =3D 2357 ms

=20

As you can see the response times on each box suffers a lot when I
search them at the same time.

=20

Details: I have a configuration that has a ParallelMultiSearcher at the
highest level.  In this example, it would hold 2 RemoteSearchables.
Each RemoteSearchable is running on a Wintel box and is holding a
ParallelMultiSearcher of 12 IndexSearchers.

 =20

So, in the above example, I am searching a total of 24 indices, 12 on
each box.

=20

Do you have any suggestions as to where I can start digging ?  Thanks
for any help.

=20

Ron.


------_=_NextPart_001_01C6BC8E.BDB7E6BC--

From java-user-return-22620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 15:10:35 2006
Return-Path: <java-user-return-22620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20035 invoked from network); 10 Aug 2006 15:10:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 15:10:35 -0000
Received: (qmail 8325 invoked by uid 500); 10 Aug 2006 15:10:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8302 invoked by uid 500); 10 Aug 2006 15:10:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8273 invoked by uid 99); 10 Aug 2006 15:10:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:10:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:10:15 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 8557DD94E74
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 11:09:48 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Thu, 10 Aug 2006 11:09:49 -0400
X-Sasl-enc: unoRaVzk+PCY2QA9cBJpuvce21LbZYCAjT6pPA35Yrm5 1155222588
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id A83FA10C1
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 11:09:48 -0400 (EDT)
Message-ID: <44DB4C3B.1050903@mikemccandless.com>
Date: Thu, 10 Aug 2006 11:09:47 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Field compression too slow
References: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com> <44DB33AF.6020106@mikemccandless.com>
In-Reply-To: <44DB33AF.6020106@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>> I'm not sure if it would help my particular situation, but is there 
>> any way
>> to provide the option of specifying the compression level?  The level 
>> used
>> by Lucene (level 9) is the maximum possible compression level.  Ideally I
>> would like to be able to alter the compression level on the basis of the
>> field size.  This way I can smooth out the compression times across the
>> various document sizes.  I am more interested in consistent time than 
>> I am
>> consistent compression.
> 
> I agree, we should make the compression level configurable.  It's 
> disturbing that it takes minutes to compress a 4.5 MB document!  I'll 
> open a Jira issue for this.

OK I created https://issues.apache.org/jira/browse/LUCENE-648 to track 
this issue.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 15:49:49 2006
Return-Path: <java-user-return-22621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48671 invoked from network); 10 Aug 2006 15:49:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 15:49:49 -0000
Received: (qmail 6648 invoked by uid 500); 10 Aug 2006 15:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6616 invoked by uid 500); 10 Aug 2006 15:49:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6604 invoked by uid 99); 10 Aug 2006 15:49:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:49:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:49:34 -0700
Received: by nf-out-0910.google.com with SMTP id p48so617698nfa
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 08:49:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OUPWvNjSf9s4/+NZod6FtJ661R8PQ3NDYPm43IcTAQkqq/ncjmb8qsyC1SBaUtKJspoA7ECc7OMnB1XgqcyTgWwzTmMAfl4L4CU6lpu08Y+y1PKXZ6BP6rT4X6EQltsfbuNeR3sc5TSpj1dFBhFBzLJHyn8b3Mt2e9KjCKx9H7g=
Received: by 10.82.132.4 with SMTP id f4mr289366bud;
        Thu, 10 Aug 2006 08:49:06 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Thu, 10 Aug 2006 08:49:06 -0700 (PDT)
Message-ID: <d8050f240608100849vc1e5348s67aef511f63824d8@mail.gmail.com>
Date: Fri, 11 Aug 2006 01:49:06 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field compression too slow
In-Reply-To: <44DB4C3B.1050903@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5787_19467919.1155224946285"
References: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com>
	 <44DB33AF.6020106@mikemccandless.com>
	 <44DB4C3B.1050903@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5787_19467919.1155224946285
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the Jira issue...

one question on your synchronization comment...

I have "assumed" I can't have two threads writing to the index concurrently,
so have implemented my own read/write locking system.  Are you saying I
don't need to bother with this? My reading of the doco suggests that you
shouldn't have two IndexWriters open on the same index.

I know that if I try a search from a different JVM while the index is being
written I get the odd "FileNotFound" exception, so I had assumed writing
concurrently would be a bigger problem.

Of course there is a difference between multiple threads in a single JVM,
and threads in multiple JVM's (which is my situation).  But I may be able to
re-architect so I have a single JVM reading/writing the one index if it will
allow me to ignore my own locking/unlocking system.

As it turns out I have devised an alternate strategy.  Storing large amounts
of data in the index (compressed or not) seems to have the secondary effect
of slowing down retrieval of results... and even led to OutOfMemory errors
for me (presumably because the hits.doc(n) call loads the stored fields into
memory?).

I needed to store the contents of all fields, so when I re-index the
document (as some fields change) I don't lose this data (my kingdom for the
ability to "update" a field!).  I decided to store the "large" data
elsewhere outside the index (where I can store/compress it asynchronously)
and pull it out from here when I need to re-index.

Thanks again for the response.

On 8/11/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> >> I'm not sure if it would help my particular situation, but is there
> >> any way
> >> to provide the option of specifying the compression level?  The level
> >> used
> >> by Lucene (level 9) is the maximum possible compression level.  Ideally
> I
> >> would like to be able to alter the compression level on the basis of
> the
> >> field size.  This way I can smooth out the compression times across the
> >> various document sizes.  I am more interested in consistent time than
> >> I am
> >> consistent compression.
> >
> > I agree, we should make the compression level configurable.  It's
> > disturbing that it takes minutes to compress a 4.5 MB document!  I'll
> > open a Jira issue for this.
>
> OK I created https://issues.apache.org/jira/browse/LUCENE-648 to track
> this issue.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5787_19467919.1155224946285--

From java-user-return-22622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 15:50:39 2006
Return-Path: <java-user-return-22622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49544 invoked from network); 10 Aug 2006 15:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 15:50:38 -0000
Received: (qmail 9609 invoked by uid 500); 10 Aug 2006 15:50:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9577 invoked by uid 500); 10 Aug 2006 15:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9566 invoked by uid 99); 10 Aug 2006 15:50:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:50:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.157.150.104] (HELO dolby.com) (195.157.150.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:50:25 -0700
Received: from ([172.16.55.196])
	by quartz.dolby.com with ESMTP  id 5202053.13753053;
	Thu, 10 Aug 2006 16:49:49  0100
Received: from 172.16.54.48 ([172.16.54.48]) by sparrow.dolby.net ([172.16.55.196]) with Microsoft Exchange Server HTTP-DAV ;
 Thu, 10 Aug 2006 15:49:49 +0000
Received: from wb370 by SPARROW.dolby.net; 10 Aug 2006 16:49:49 +0100
Subject: Special characters
From: "Pillinger, Adrian" <apill@dolby.co.uk>
To: java-user@lucene.apache.org
Content-Transfer-Encoding: 7bit
Date: Thu, 10 Aug 2006 16:49:49 +0100
Message-Id: <1155224989.4653.5.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am indexing some text in a java object that is "%772B" with the
standard analyser and Lucene 2.

Should I be able to search for this with the same text as the query, or
do I need to do any escaping of characters?

Thanks

Adrian

-----------------------------------------
This message (including any attachments) may contain confidential
information intended for a specific individual and purpose.  If you
are not the intended recipient, delete this message.  If you are
not the intended recipient, disclosing, copying, distributing, or
taking any action based on this message is strictly prohibited.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 15:59:15 2006
Return-Path: <java-user-return-22623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52588 invoked from network); 10 Aug 2006 15:59:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 15:59:15 -0000
Received: (qmail 29178 invoked by uid 500); 10 Aug 2006 15:59:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28791 invoked by uid 500); 10 Aug 2006 15:59:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28774 invoked by uid 99); 10 Aug 2006 15:59:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:59:09 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 08:59:00 -0700
Received: by nf-out-0910.google.com with SMTP id p48so620505nfa
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 08:58:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kLS/XENY6QVasfYF2QyobZuKWdmf8iOznGE6qxWFrdW2tLHYyFUJUF9KT+jjIzZIDy3ARHPT88V5Tg+Cf/dhK8Op6xDrWdYb3dhbcqsl1avSe1WX2AI3G/3t5ewjndQdL8EcRUFkeRnrmqfdli5tdWxYlJmeh2+3MjuToorJrzE=
Received: by 10.82.126.5 with SMTP id y5mr286640buc;
        Thu, 10 Aug 2006 08:58:28 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Thu, 10 Aug 2006 08:58:28 -0700 (PDT)
Message-ID: <d8050f240608100858h7b93b695nb027fb588ca2e901@mail.gmail.com>
Date: Fri, 11 Aug 2006 01:58:28 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: updating document
In-Reply-To: <1155171673.3388.3.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5991_32507123.1155225508599"
References: <1155145453.2739.8.camel@localhost.localdomain>
	 <359a92830608100616re219fe3la419623871885798@mail.gmail.com>
	 <1155171673.3388.3.camel@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5991_32507123.1155225508599
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are your storing the contents of the fields in the index?  That is,
specifying Field.Store.YES when creating the field?

In my experience fields which are not stored are not recoverable from the
index (well.. they can be reconstructed but it's a lossy process).  So when
you retrieve the document, you lose non-stored fields.

If you are searching on these fields then it would explain why you are
losing results.

On 8/10/06, Deepan Chakravarthy <codeshepherd@gmail.com> wrote:
>
> On Thu, 2006-08-10 at 09:16 -0400, Erick Erickson wrote:
> > You say "Those documents that we updated are not searchable now". I've
> got
> > to ask the obvious question, did you close and re-open the *searcher*
> > (really, the indexreader you use in your searcher)? I suspect you have,
> but
> > thought I'd ask explicitly.
> >
> > I'd also get a copy of Luke (http://www.getopt.org/luke/) and inspect my
> > index after you drop/re-add the data.
> I have Luke. When i inspect the index with luke i find the same result,
> i.e the updated documents are not searchable in the new index.
>
> I guess Index Modifier used Index reader and writer internally. I am
> adding more fields to existing documents in index. so some of my
> documents will have n fields and other n+m fields after updating. Does
> the difference in number of fields affect search in any manner ?
>
>
> >
> > Actually, have you thought about IndexModifier (I'm using Lucene 2.0).
> From
> > the javadoc....
> >
> > <<< A class to modify an index, i.e. to delete and add documents. This
> class
> > hides IndexReader<
> file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexReader.html
> >and
> > IndexWriter<
> file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexWriter.html
> >so
> > that you do not need to care about implementation details such as that
> > adding documents is done via IndexWriter and deletion is done via
> > IndexReader.>>>
> >
> > Best
> > Erick
> >
> > On 8/9/06, Deepan Chakravarthy <codeshepherd@gmail.com> wrote:
> > >
> > > Hi,
> > > We have to update few documents in our index. We have add a additional
> > > field to them. We did as follows
> > >
> > > 1)read the documents of our interest using IndexReader
> > > 2)copy them to a temporary doc object (temp_doc)
> > > 3)delete the document in the index
> > > 4)close the IndexReader
> > > 5)open the IndexWriter
> > > 6)add a new field to (temp_doc)
> > > 7)add the (temp_doc) to the index using IndexWriter
> > > 8)close the IndexWriter
> > >
> > >
> > > The problem:
> > > 1)Those documents that we updated are not searchable now. When we
> > > perform search based we not find any of those documents we updated.
> > > (using IndexSearcher)
> > >
> > > 2)But we are still able to read the updated documents using
> IndexReader.
> > >
> > >
> > > Questions
> > > 1)When i want to update a document by adding a field, should i reindex
> > > all the fields again? will copying the existing document not help and
> > > adding new field not help ?
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5991_32507123.1155225508599--

From java-user-return-22624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 16:19:16 2006
Return-Path: <java-user-return-22624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62968 invoked from network); 10 Aug 2006 16:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 16:19:16 -0000
Received: (qmail 77787 invoked by uid 500); 10 Aug 2006 16:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77678 invoked by uid 500); 10 Aug 2006 16:19:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77635 invoked by uid 99); 10 Aug 2006 16:19:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 09:19:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of valikov@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Aug 2006 09:18:56 -0700
Received: (qmail invoked by alias); 10 Aug 2006 16:18:28 -0000
Received: from unknown (EHLO [192.168.100.124]) [213.30.245.34]
  by mail.gmx.net (mp036) with SMTP; 10 Aug 2006 18:18:28 +0200
X-Authenticated: #12436987
Message-ID: <44DB5C4C.7050903@gmx.net>
Date: Thu, 10 Aug 2006 18:18:20 +0200
From: Aleksei Valikov <valikov@gmx.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: SQL-Like Join in Lucene
Content-Type: text/plain; charset=KOI8-R; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi.

I'm investigating a possibility to make a "join" in Lucene/Compass.

Here's the thread:
http://forums.opensymphony.com/thread.jspa?threadID=39685&tstart=0

I have records m:m entities. Entities hold indexed information. Records consist 
of entities. One entity may belong to many records.
I would like to search for records having certain entity information.

Entity documents contain indexable entity fields plus entity id.
Record documents contain indexable record fielfs, record id and entity ids.

I'd like to "search for records having entity ids in (search for entity ids 
where entity fields satisfy condition)".

Currently I am using self-written InSetFilter to accomplish the task.
1. Search among entities by the given condition.
2. Put ids of the found entities into a set.
3. Create filter with this set.
4. Search for records with filter.

The join is basically implemented by a filter:

	public BitSet bits(IndexReader reader) throws IOException {

		BitSet bits = new BitSet(reader.maxDoc());

		int[] docs = new int[1];
		int[] freqs = new int[1];
		for (Iterator iterator = set.iterator(); iterator.hasNext();) {
			final String id = (String) iterator.next();
			final TermDocs termDocs = reader.termDocs(new Term(fieldName, id));
			final int count = termDocs.read(docs, freqs);
			if (count == 1) {
				bits.set(docs[0]);
			}
		}
		return bits;
	}

Is this approach ok or I missed something and there's an easier way to join?

Thank you for you time.

Bye.
/lexi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 17:08:27 2006
Return-Path: <java-user-return-22625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89581 invoked from network); 10 Aug 2006 17:08:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 17:08:27 -0000
Received: (qmail 50116 invoked by uid 500); 10 Aug 2006 17:08:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50081 invoked by uid 500); 10 Aug 2006 17:08:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50069 invoked by uid 99); 10 Aug 2006 17:08:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 10:08:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 10:08:12 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id AA24FD94F3E
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 13:07:44 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Thu, 10 Aug 2006 13:07:45 -0400
X-Sasl-enc: 76jQg+akQ7FaqPN8fR3+o+DnrptSYvwtShLC5SlwG1iv 1155229664
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id A7AB6105F
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 13:07:44 -0400 (EDT)
Message-ID: <44DB67DF.9060902@mikemccandless.com>
Date: Thu, 10 Aug 2006 13:07:43 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Field compression too slow
References: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com>	 <44DB33AF.6020106@mikemccandless.com>	 <44DB4C3B.1050903@mikemccandless.com> <d8050f240608100849vc1e5348s67aef511f63824d8@mail.gmail.com>
In-Reply-To: <d8050f240608100849vc1e5348s67aef511f63824d8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I have "assumed" I can't have two threads writing to the index 
> concurrently,
> so have implemented my own read/write locking system.  Are you saying I
> don't need to bother with this? My reading of the doco suggests that you
> shouldn't have two IndexWriters open on the same index.
> 
> I know that if I try a search from a different JVM while the index is being
> written I get the odd "FileNotFound" exception, so I had assumed writing
> concurrently would be a bigger problem.
> 
> Of course there is a difference between multiple threads in a single JVM,
> and threads in multiple JVM's (which is my situation).  But I may be 
> able to
> re-architect so I have a single JVM reading/writing the one index if it 
> will
> allow me to ignore my own locking/unlocking system.

You are right, only one "writer" (= IndexWriter adding docs or
IndexReader deleting docs) may be open at a time, but, you can have
multiple threads (within one JVM) sharing that writer and they should
nicely parallelize (within that one JVM).  It sounds like your
situation can't take advantage of multiple threads on one writer...

Then, multiple IndexSearchers in different JVMs, can be instantiated.
Multiple threads should share a single IndexSearcher within one JVM and
should nicely parallelize.

However, IndexSearchers & IndexWriters must synchronize to make sure
you don't get that FileNotFound exception.  Basically, every time a
new IndexReader (used by IndexSearcher) is instantiated it needs to
ensure no IndexWriter is in the process of committing (writing a new
segments file).

This is currently implemented with file based locks, but this method
of locking has known bugs on remotely mounted filesystems (it sounds
likely this may be your use case?).

If you need to share an index on a remote filesystem, you either need
to do your own locking (sounds like you've done this), or take an
approach like the Solr project where you take "known safe" snapshots
of the index and each searcher cuts over to latest snapshot when it's
ready.

> As it turns out I have devised an alternate strategy.  Storing large 
> amounts
> of data in the index (compressed or not) seems to have the secondary effect
> of slowing down retrieval of results... and even led to OutOfMemory errors
> for me (presumably because the hits.doc(n) call loads the stored fields 
> into
> memory?).
> 
> I needed to store the contents of all fields, so when I re-index the
> document (as some fields change) I don't lose this data (my kingdom for the
> ability to "update" a field!).  I decided to store the "large" data
> elsewhere outside the index (where I can store/compress it asynchronously)
> and pull it out from here when I need to re-index.

Yes, when you load a doc through Hits.doc(n) it will load all stored
fields.  There have been some good recent fixes in this area (but
after 2.0 release I believe), including ability to mark fields for
"lazy loading", and ability to load a document bug specifying a subset
of the fields that you actually want.  See
http://issues.apache.org/jira/browse/LUCENE-545 for juicy details.

> Thanks again for the response.

You're welcome!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 17:34:14 2006
Return-Path: <java-user-return-22626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99629 invoked from network); 10 Aug 2006 17:34:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 17:34:13 -0000
Received: (qmail 1188 invoked by uid 500); 10 Aug 2006 17:34:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1155 invoked by uid 500); 10 Aug 2006 17:34:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1136 invoked by uid 99); 10 Aug 2006 17:34:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 10:34:06 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 10:33:57 -0700
Received: by py-out-1112.google.com with SMTP id s49so955184pyc
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 10:33:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Kvszn0lLf9pq8MgXvueudkARFBQ5C0+tNdxhKj1l+1sE+0lfAHk5xjvobo/05WfBb4mGbXfMujZspfAtobmxlnDhtcEb5aoLLoRDiKcmSyc8J1crGv4i/UE57jyzHlT2NcsUxuJ11sFpz9LRJf2hSP2rJde+IHyYKpFVTTivOos=
Received: by 10.35.26.14 with SMTP id d14mr4252964pyj;
        Thu, 10 Aug 2006 10:33:30 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Thu, 10 Aug 2006 10:33:30 -0700 (PDT)
Message-ID: <359a92830608101033g77d03668qdf2c341dc882d8b4@mail.gmail.com>
Date: Thu, 10 Aug 2006 13:33:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Special characters
In-Reply-To: <1155224989.4653.5.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_110866_24339273.1155231210138"
References: <1155224989.4653.5.camel@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_110866_24339273.1155231210138
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below...

On 8/10/06, Pillinger, Adrian <apill@dolby.co.uk> wrote:
>
> I am indexing some text in a java object that is "%772B" with the
> standard analyser and Lucene 2.
>
> Should I be able to search for this with the same text as the query, or
> do I need to do any escaping of characters?


probably not because I doubt that you'll have the '%' in the index (but I
admit I don't know for sure). Get Luke and check to be sure (
http://www.getopt.org/luke/). That will tell you exactly what is in the
index. I suspect you'll find "772B" but the '%' will simply be absent.

Also, watch capitalization. The StandardAnalyzer lowercases your stream as I
remember....

You probably want a different analyzer fot *both* indexing and searching if
you really need to search such strings, try WhitespaceAnalyzer and perhaps
store your values UN_TOKENIZED (but watch that latter, this assumes you're
controlling your tokens yourself and not relying on the analyzer to break up
your input stream).

And if you want to look treat different fields differently, think about
PerFieldAnalyzerWrapper.

Best
Erick


Thanks
>
> Adrian
>
> -----------------------------------------
> This message (including any attachments) may contain confidential
> information intended for a specific individual and purpose.  If you
> are not the intended recipient, delete this message.  If you are
> not the intended recipient, disclosing, copying, distributing, or
> taking any action based on this message is strictly prohibited.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_110866_24339273.1155231210138--

From java-user-return-22627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 18:53:12 2006
Return-Path: <java-user-return-22627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30348 invoked from network); 10 Aug 2006 18:53:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 18:53:11 -0000
Received: (qmail 45584 invoked by uid 500); 10 Aug 2006 18:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45250 invoked by uid 500); 10 Aug 2006 18:53:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45239 invoked by uid 99); 10 Aug 2006 18:53:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 11:53:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 11:52:52 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.7/8.13.7) with ESMTP id k7AIqOvD136026
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 18:52:24 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7AIu6Fi153482
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 20:56:06 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7AIqOEm024267
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 20:52:24 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7AIqOx4024264
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 20:52:24 +0200
In-Reply-To: <E9BF7E0FD95D1143B399B129908A58FF0163C258@datachange01.dataconversions.biz>
Subject: RE: Scoring a document (count?)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFC875FEF2.582A659C-ON882571C6.0067269A-882571C6.006797E9@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 10 Aug 2006 11:51:31 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/08/2006 21:56:05
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Russel, my apologies for the delayed response. I rather have all
correspondence on the mailing list, but to keep this mail thread readable I
put the files at http://cdoronc.awardspace.com/TfTermQuery . I hope it
helps you and would be interested in your comments.

Regards,
Doron

"Russell M. Allen" <Russell.Allen@aebn.net> wrote on 04/08/2006 06:45:37:
> Doron, thanks for the code offer.  That would be great.  I was able to
> get a partial implementation working myself, but I ran into some issues
> (most of which are rooted in a lack of understanding of Lucene internals
> on my part).  I am sure I can learn a few things from your solution to
> this problem.
>
> You may email me directly with the code, or if it's small enough, post
> it to the list for posterity.
>
> Thanks again!
> -Russell



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 20:00:49 2006
Return-Path: <java-user-return-22628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74543 invoked from network); 10 Aug 2006 20:00:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 20:00:49 -0000
Received: (qmail 73203 invoked by uid 500); 10 Aug 2006 20:00:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73159 invoked by uid 500); 10 Aug 2006 20:00:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73148 invoked by uid 99); 10 Aug 2006 20:00:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:00:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:00:30 -0700
Received: by ug-out-1314.google.com with SMTP id y2so136038uge
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 13:00:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Bq4Jpb77LuTf6Dfc/G1PDjzZ0sQxGlya85NpfK8tadrqho8Mo+m0xjS9APWPTmc81MSNmuy48yuQ2D5a2ukV38JqF6KyyKLoH8LlMFnuCc2hZPBRKWhQp55C0bPj/Z5Nji3nr3Lh6njra3hBkOQbJ3eP0tGyXEX4s4DOpdI/3bA=
Received: by 10.67.119.13 with SMTP id w13mr3118958ugm;
        Thu, 10 Aug 2006 13:00:02 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Thu, 10 Aug 2006 13:00:02 -0700 (PDT)
Message-ID: <f18c9dde0608101300x45e1cf9cmd3184ceb333622a0@mail.gmail.com>
Date: Thu, 10 Aug 2006 22:00:02 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: research lucene
In-Reply-To: <44DB3905.3000608@emn.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <44D9AADF.2090904@emn.fr> <44D9F131.8@emn.fr>
	 <f18c9dde0608090757j15d607eco8276a76ee47dc9a8@mail.gmail.com>
	 <44D9FED3.1080708@emn.fr>
	 <f18c9dde0608090832q2812c9f8y3621229d3dde8e0@mail.gmail.com>
	 <44DB1C83.5030201@emn.fr>
	 <f18c9dde0608100458k30340fa7l91c177485b4caa20@mail.gmail.com>
	 <44DB2544.1020409@emn.fr>
	 <f18c9dde0608100557x14ac2647m10201274ab6807f5@mail.gmail.com>
	 <44DB3905.3000608@emn.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SGV5LAp5b3UgZG9uJ3QgYWN0dWFsbHkgbmVlZCB0byBzdG9yZSBpdCwgSWYgeW91IHN0b3JlIHRo
ZSBjb250ZW50IG9mIGEKZmllbGQgeW91IGNhbiBsYXRlciByZXRyaWV2ZSBpdCBsaWtlIGl0IHVz
ZWQgdG8gYmUgYW5kIGRpc3BsYXkgaXQgbWF5CmJlIGluIGEgcmVzdWx0IGxpc3QuIElmIHlvdSBo
YXZlIGxhcmdlIGNvbnRlbnQgeW91IGNhbiBhbHNvIHN0b3JlIGl0CmNvbXByZXNzZWQgKEZpZWxk
LlN0b3JlLkNvbXByZXNzKS4gSWYgeW91IGRvbid0IG5lZWQgdGhlIGNvbnRlbnQgaW4KYW55IHdh
eSBqdXN0IHVzZSBGaWVsZC5TdG9yZS5OTy4KCmJlc3QgcmVnYXJkcyBzaW1vbgoKT24gOC8xMC8w
Niwgb3VsZCBzaWQnYWhtZWQgPG5vdWxkc2lkQGVtbi5mcj4gd3JvdGU6Cj4KPiBIZWxsbyBTaW1v
biwKPiAgSSBoYXZlIHJlc29sdmVkIG15IHByb2JsZW0sIEkgYWRkZWQgU3RvcmUuWUVTIGFuZCBJ
bmRleC5UT0tFTklaRUQsIGFuZAo+IGl0IGdvZXMuCj4gdGhhbmsgeW91IGFub3RoZXIgdGltZS4K
Pgo+IHRoYW5rcy4KPiBTaW1vbiBXaWxsbmF1ZXIgYSDDqWNyaXQgOgo+ID4gSSBqdXN0IHRyaWVk
IGl0IG91dCBhbmQgaXQgd29ya2VkIGxpa2UgZXhwZWN0ZWQ6Cj4gPgo+ID4KPiA+ICAgUkFNRGly
ZWN0b3J5IGQgPSBuZXcgUkFNRGlyZWN0b3J5KCk7Cj4gPiAgICBJbmRleFdyaXRlciB3ID0gbmV3
IEluZGV4V3JpdGVyKGQsbmV3IFdoaXRlc3BhY2VBbmFseXplcigpLHRydWUpOwo+ID4KPiA+ICAg
IERvY3VtZW50IGRvYyA9IG5ldyBEb2N1bWVudCgpOwo+ID4gICAgZG9jLmFkZChuZXcKPiA+IEZp
ZWxkKCJmaWVsZCIsInRpdGxlIixGaWVsZC5TdG9yZS5ZRVMsRmllbGQuSW5kZXguVE9LRU5JWkVE
ICkpOwo+ID4gICAgZG9jLmFkZChuZXcKPiA+IEZpZWxkKCJmaWVsZCIsIjIwMDYiLEZpZWxkLlN0
b3JlLllFUyxGaWVsZC5JbmRleC5UT0tFTklaRUQgKSk7Cj4gPiAgICB3LmFkZERvY3VtZW50KGRv
Yyk7Cj4gPgo+ID4gICAgdy5jbG9zZSgpOwo+ID4gICAgSW5kZXhTZWFyY2hlciBzID0gbmV3IElu
ZGV4U2VhcmNoZXIoZCk7Cj4gPiAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlNlYXJjaCBmb3IgdGl0
bGU6ICIrcy5zZWFyY2gobmV3IFRlcm1RdWVyeShuZXcKPiA+IFRlcm0oImZpZWxkIiwidGl0bGUi
KSkpLmxlbmd0aCgpKTsKPiA+ICAgIFN5c3RlbS5vdXQucHJpbnRsbigiU2VhcmNoIGZvciAyMDA2
OiAiK3Muc2VhcmNoKG5ldyBUZXJtUXVlcnkobmV3Cj4gPiBUZXJtKCJmaWVsZCIsIjIwMDYiKSkp
Lmxlbmd0aCgpKTsKPiA+Cj4gPiBPdXRwdXQ6Cj4gPgo+ID4gU2VhcmNoIGZvciB0aXRsZTogMQo+
ID4gU2VhcmNoIGZvciAyMDA2OiAxCj4gPgo+ID4gSSBhY3R1YWxseSBjYW4ndCByZWFsbHkgZ2V0
IHlvdXIgcHJvYmxlbS4KPiA+Cj4gPiByZWdhcmRzIHNpbW9uCj4gPgo+ID4gT24gOC8xMC8wNiwg
b3VsZCBzaWQnYWhtZWQgPG5vdWxkc2lkQGVtbi5mcj4gd3JvdGU6Cj4gPj4KPiA+PiBUaGUgcHJv
YmwgYWRkKG5ldyBGaWVsZCggIGZpZWxkTmFtZSgpLCBmaWVsZFZhbHVlLCBGaWVsZC5TdG9yZSwK
PiA+PiBGaWVsZC5JbmRleCkpOwo+ID4+IGFuZCBJIHVzZSB0aGUgV2hpdGVTcGFjZUFuYWx5c2Vy
LCBidXQgbXkgcHJvYmxlbSBpcyBjYW4gSSBpbmRleCBhIGZpZWxkCj4gPj4gd2l0aCB2YWx1ZSBh
cyAidGl0bGUiIGl0IGdvZXMsIGFuZCBjYW4gSSBpbmRleCB3aXRoIHZhbHVlIGFzICIyMDA2IiBp
dAo+ID4+IGRvZXNuJ3QgZ28uCj4gPj4gV2h5LCBJIGRvbid0IGtub3cKPiA+PiB0aGFua3MKPiA+
PiBTaW1vbiBXaWxsbmF1ZXIgYSDDqWNyaXQgOgo+ID4+ID4gY291bGQgeW91IHByb3ZpZGUgYSBi
aXQgbW9yZSBpbmZvIG9uIHlvdXIgaW5kZXggcHJvY2Vzcz8KPiA+PiA+IChhbmFseXplcixGaWVs
ZCwgU3RvcmUsIEluZGV4KQo+ID4+ID4KPiA+PiA+IHJlZ2FyZHMgc2ltb24KPiA+PiA+Cj4gPj4g
PiBPbiA4LzEwLzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRAZW1uLmZyPiB3cm90ZToKPiA+
PiA+Pgo+ID4+ID4+IEhlbGxvLAo+ID4+ID4+IEkgZG9uJ3Qga25vdyB3aHkgaXQgZG9uJ3QgaW5k
ZXggdGhlIG51bWJlciB2YWx1ZXMsIEkgbG9vayB3aXRoIEx1a2UKPiA+PiA+PiBMdWNlbmUsIEkg
Zm91bmRlZCB0aGF0IHZhbHVlcyBudW1lcmljcyBkaWRuJ3QgaW5kZXhlZC4KPiA+PiA+PiBjYW4g
eW91IGtub3cgd2hhdCB0aGUgcHJvYmxlbT8KPiA+PiA+Pgo+ID4+ID4+IHRoYW5rcwo+ID4+ID4+
IFNpbW9uIFdpbGxuYXVlciBhIMOpY3JpdCA6Cj4gPj4gPj4gPiBXZWxsIHlvdXIgZGlnaXRzIG1p
Z2h0IGJlIGxvc3QgZHVyaW5nIGFuYWx5c2lzIGxpa2UgRXJpayBzYWlkLgo+ID4+IENoZWNrCj4g
Pj4gPj4gPiBvdXQgd2l0aCBsdWtlIHdoYXRzIGluIHlvdXIgaW5kZXggKEZpZWxkLlN0b3JlLlll
cykgYW5kIHNlZSBpZiB5b3VyCj4gPj4gPj4gPiBhbmFseXplciByZW1vdmVzIHRoZSBkaWdpdHMu
IFNpbXBsZUFuYWx5emVyIHJlbW92ZXMgdGhlbSBidXQKPiA+PiA+PiA+IFN0YW5kYXJ0QW5hbHl6
ZXIga2VlcHMgdGhlIGRpZ2l0cy4KPiA+PiA+PiA+Cj4gPj4gPj4gPiByZWdhcmRzIHNpbW9uCj4g
Pj4gPj4gPgo+ID4+ID4+ID4gT24gOC85LzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRAZW1u
LmZyPiB3cm90ZToKPiA+PiA+PiA+PiBTaW1vbiBXaWxsbmF1ZXIgYSDDqWNyaXQgOgo+ID4+ID4+
ID4+ID4gWW91IHNob3VsZCByYXRoZXIgZXhwbGFpbiB3aGF0IHlvdSBleHBlY3QgZnJvbSBpbmRl
eGluZyB5b3VyCj4gPj4gbnVtYmVyCj4gPj4gPj4gPj4gPiBub3QgYXMgc3RyaW5nIHZhbHVlcy4K
PiA+PiA+PiA+PiA+Cj4gPj4gPj4gPj4gPiBiZXN0IHJlZ2FyZHMgc2ltb24KPiA+PiA+PiA+PiA+
Cj4gPj4gPj4gPj4gPiBPbiA4LzkvMDYsIG91bGQgc2lkJ2FobWVkIDxub3VsZHNpZEBlbW4uZnI+
IHdyb3RlOgo+ID4+ID4+ID4+ID4+IEVyaWNrIEVyaWNrc29uIGEgw6ljcml0IDoKPiA+PiA+PiA+
PiA+PiA+IFdoYXQgYW5hbHl6ZXJzIGFyZSB5b3UgdXNpbmcgZm9yIGJvdGggaW5kZXhpbmcgYW5k
IHNlYXJjaGluZz8KPiA+PiA+PiBTb21lCj4gPj4gPj4gPj4gPj4gPiBhbmFseXplcnMKPiA+PiA+
PiA+PiA+PiA+IHN0cmlwIG91dCBudW1iZXJzIGFuZCBzb21lIGRvbid0LiBJJ2Qgc3RhcnQgd2l0
aAo+ID4+ID4+ID4+ID4+IFdoaXRlc3BhY2VBbmFseXplciwgYW5kCj4gPj4gPj4gPj4gPj4gPiBp
bmRleCB5b3VyIGZpZWxkcyBVTl9UT0tFTklaRUQgYW5kIHdvcmsgdXAgdG8gdGhlIG90aGVyCj4g
Pj4gPj4gYW5hbHl6ZXJzCj4gPj4gPj4gPj4gPj4gYW5kL29yCj4gPj4gPj4gPj4gPj4gPiB0b2tl
bml6YXRpb25zIGZyb20gdGhlcmUuCj4gPj4gPj4gPj4gPj4gPgo+ID4+ID4+ID4+ID4+ID4gVW5k
ZXIgYW55IGNpcmN1bXN0YW5jZXMsIHlvdSByZWFsbHksIHJlYWxseSwgcmVhbGx5IHdhbnQgdG8K
PiA+PiA+PiBnZXQgYQo+ID4+ID4+ID4+ID4+IGNvcHkgb2YKPiA+PiA+PiA+PiA+PiA+IEx1a2Ug
KGh0dHA6Ly93d3cuZ2V0b3B0Lm9yZy9sdWtlLykgd2hpY2ggd2lsbCBhbGxvdyB5b3UgdG8KPiA+
PiA+PiBleGFtaW5lCj4gPj4gPj4gPj4gPj4geW91cgo+ID4+ID4+ID4+ID4+ID4gaW5kZXggdG8g
c2VlIHdoYXQgaXQgYWN0dWFsbHkgY29udGFpbnMuIEkndmUgYmVlbgo+ID4+IHN1cnByaXNlZCBt
b3JlCj4gPj4gPj4gPj4gdGhhbgo+ID4+ID4+ID4+ID4+ID4gb25jZQo+ID4+ID4+ID4+ID4+ID4g
YnkgdGhpbmtpbmcgdGhhdCBteSBpbmRleCBjb250YWluZWQgc29tZXRoaW5nIGl0IHJlYWxseQo+
ID4+IGhhZG4ndC4KPiA+PiA+PiA+PiA+PiA+Cj4gPj4gPj4gPj4gPj4gPiBCZXN0Cj4gPj4gPj4g
Pj4gPj4gPiBFcmljawo+ID4+ID4+ID4+ID4+ID4KPiA+PiA+PiA+PiA+PiA+IE9uIDgvOS8wNiwg
b3VsZCBzaWQnYWhtZWQgPG5vdWxkc2lkQGVtbi5mcj4gd3JvdGU6Cj4gPj4gPj4gPj4gPj4gPj4K
PiA+PiA+PiA+PiA+PiA+PiBIZWxsbywKPiA+PiA+PiA+PiA+PiA+Pgo+ID4+ID4+ID4+ID4+ID4+
IEkgZG9uJ3QgYXJyaXZlIHRvIGdldCByZXN1bHQgZnJvbSB0aGUgZmllbGQgaGF2ZSBhIHZhbHVl
Cj4gPj4gPj4gPj4gbnVtZXJpYyBmb3IKPiA+PiA+PiA+PiA+PiA+PiBleGFtcGxlICJkYXRlPTIw
MDUiIG9yICJ0aXRsZT05MDAiLAo+ID4+ID4+ID4+ID4+ID4+IEkgaGF2ZSBpbmRleGVkIHRoZSBm
aWVsZHMgImRhdGUiIHdpdGggU3RyaW5nIHZhbHVlLiBJCj4gPj4gd2FudCBrbm93Cj4gPj4gPj4g
Pj4gd2h5Pwo+ID4+ID4+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gPj4gPj4gQ2FuIHlvdSBoZWxwIG1l
Pwo+ID4+ID4+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gPj4gPj4gdGhhbmtzLgo+ID4+ID4+ID4+ID4+
ID4+Cj4gPj4gPj4gPj4gPj4gPj4KPiA+PiA+PiA+Pgo+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4+ID4+
ID4+ID4+ID4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6Cj4gPj4gamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4gPj4gPj4gPj4gPj4gRm9yIGFkZGl0aW9uYWwgY29t
bWFuZHMsIGUtbWFpbDoKPiA+PiA+PiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+
ID4+ID4+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gPj4gPj4KPiA+PiA+PiA+PiA+PiA+Cj4gPj4gPj4g
Pj4gPj4gdGhhbmtzIGZvciB5b3VyIHJlc3BvbnNlIGFuZCB5b3VyIHNvZnQsCj4gPj4gPj4gPj4g
Pj4geW91IHRoaW5rIHdoYXQgYWJvdXQgdGhlIGluZGV4ZXIgdGhhdCBjYW4gcmVzb2x2ZSBteSBw
cm9ibGVtLgo+ID4+ID4+ID4+ID4+IG15IHByb2JsZW0gaXMgdGhlIGluZGV4ZXIsIGl0IGRvbid0
IGluZGV4IHZhbHVlIG51bWVyaWMuCj4gPj4gPj4gPj4gPj4KPiA+PiA+PiA+PiA+PiB0aGFua3Mu
Cj4gPj4gPj4gPj4gPj4KPiA+PiA+PiA+PiA+Pgo+ID4+ID4+ID4+ID4+Cj4gPj4gPj4gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tCj4gPj4gPj4gPj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVu
c3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4gPj4gPj4gPj4gRm9yIGFkZGl0aW9uYWwg
Y29tbWFuZHMsIGUtbWFpbDoKPiA+PiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+
ID4+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gPj4KPiA+PiA+PiA+PiA+Cj4gPj4gPj4gPj4gSSAgYWRk
IG15IGRvY3VtZW50Cj4gPj4gPj4gPj4gRG9jdW1lbnQgZG9jPW5ldyBEb2N1bWVudCgpOwo+ID4+
ID4+ID4+IGRvYy5hZGQobmV3IEZpZWxkKCBnZXROYW1lKCksIHZhbHVlLCBnZXRTdG9yZSgpLCBn
ZXRJbmRleCgpKSk7Cj4gPj4gPj4gPj4gYW5kIGdldE5hbWUgY2FuIGJlICJkYXRlLCBuYW1lLCB0
aWx0ZSwgb3IgYW5vdGhlciIsIGJ1dCBjYW4gaWYgSQo+ID4+ID4+IGluZGV4Cj4gPj4gPj4gPj4g
dGl0bGUgd2l0aCB0aGUgdmFsdWUgIjEyMiIgb3IgYW5vdGhlciwgSXQgY2FuJ3QgcmV0dXJuIG1l
IGEKPiA+PiA+PiByZXN1bHQsIGlmIEkKPiA+PiA+PiA+PiBpbmRleCB0aXRsZSB3aXRoICJteXRp
dHJlIiBmb3IgZXhhbXBsZSwgaXQgcmV0dXJuIG1lIHRoZSByZXN1bHQsIEkKPiA+PiA+PiB3b3Vs
ZAo+ID4+ID4+ID4+IGxpa2Ugd2h5Pwo+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gdGhhbmtzLgo+ID4+
ID4+ID4+Cj4gPj4gPj4gPj4KPiA+PiA+PiA+Pgo+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4+ID4+ID4+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZwo+ID4+ID4+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEt
dXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4gPj4gPj4KPiA+PiA+PiA+Pgo+ID4+ID4+
ID4KPiA+PiA+Pgo+ID4+ID4+Cj4gPj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPj4gPj4gVG8gdW5zdWJz
Y3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4g
Pj4gPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVj
ZW5lLmFwYWNoZS5vcmcKPiA+PiA+Pgo+ID4+ID4+Cj4gPj4gPgo+ID4+Cj4gPj4KPiA+PiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KPiA+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3Jp
YmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
OiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+Cj4gPj4KPiA+Cj4KPgo+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=


From java-user-return-22629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 20:15:46 2006
Return-Path: <java-user-return-22629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80498 invoked from network); 10 Aug 2006 20:15:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 20:15:45 -0000
Received: (qmail 1608 invoked by uid 500); 10 Aug 2006 20:15:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1579 invoked by uid 500); 10 Aug 2006 20:15:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1568 invoked by uid 99); 10 Aug 2006 20:15:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:15:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:15:29 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.7/8.13.7) with ESMTP id k7AKF2p7125074
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 20:15:02 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7AKIhcR138650
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 22:18:43 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7AKF1Ym022348
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 22:15:01 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7AKF1u9022345
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 22:15:01 +0200
In-Reply-To: <c68e39170608100752p3c37fed8mb8275c99ee41042d@mail.gmail.com>
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 10 Aug 2006 13:14:21 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/08/2006 23:18:43
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> On 8/10/06, Doron Cohen <DORONC@il.ibm.com> wrote:
> Sorting was introduced to Lucene before my time, so I don't know the
> reasons behind it.  Maybe it was seen as non-optimial or non-core and
> so was kept out of the IndexReader.
>
> I admit, it does feel like the level of abstraction that FieldCache is
> at is higher than that of the IndexReader (the lowest level).

... right, thanks, now I see what you mean. In other words, IndexReader
provides the ability to read/iterate terms and docs, but caching the term
values per doc is for a higher layer - this way keeping IndexReader simpler
and maintainable. So I guess Oliver can continue with the change as he
proposed it.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 20:34:59 2006
Return-Path: <java-user-return-22630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86944 invoked from network); 10 Aug 2006 20:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 20:34:58 -0000
Received: (qmail 37434 invoked by uid 500); 10 Aug 2006 20:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37409 invoked by uid 500); 10 Aug 2006 20:34:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37398 invoked by uid 99); 10 Aug 2006 20:34:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:34:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 13:34:43 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CE3CB30EFCD5; Thu, 10 Aug 2006 16:34:16 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id F298C30EFCD6
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 16:34:08 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44D8BAEA.6010108@netbreeze.ch>
References: <44D8BAEA.6010108@netbreeze.ch>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EF82E1D4-99BF-48EC-A017-91DC0CD2FCAB@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: "Field Grouping" query restrained to same field on a  'multi'-field'
Date: Thu, 10 Aug 2006 16:34:04 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Another thought is to index each paragraph as a separate document,  
though you'd of course have to see how that fits with your other  
searching needs.

	Erik

On Aug 8, 2006, at 12:25 PM, Laurent Hoss wrote:

> Hi
>
> Suppose having an Index containing Lucene documents, having  
> multiple fields (equally) named 'paragraph'.
> Now I want to make a "Field Grouping" query (described in: http:// 
> lucene.apache.org/java/docs/queryparsersyntax.html )
> "paragraph:( word1 AND word2 )"
> retrieving only documents where the terms word1,word2 appear in the  
> SAME 'paragraph' Field (and not word1 in one 'paragraph' field, and  
> word2 possibly in another 'paragraph' field in this doc).
>      AFAIK right now this query is equivalent to query
> "paragraph:word1 AND paragraph:word2", which makes sense of course.
>
> Therefor to enable the behaviour I'm looking for, I'm thinking  
> about modifying the QueryParser to support some syntactic flag like  
> '#' in:  paragraph#:( word1 AND word2 ).
> This should generally work for  a query : paragraph#: 
> ( $subquery ) , where $subquery would be restrained to the same  
> 'paragraph' field as explained above.
>
> However the main question is whether adding such an option would be  
> feasible in Lucene (Core, Searcher?)
> without incrementing algorithmic complexity ... and is not too  
> complicated to implement?
>
> If yes I would be very happy to get some pointers in the right  
> direction, like in which Classes this is done best.
>  Thanks,
> Laurent
>
>  PS: If this is not an option, we (unhappily) would have to live  
> with following 'hack':
> Each 'paragraph' is stored in a differently named field (by adding  
> number) : paragraph1, paragraph2...
> Other than the uglyness, this would have the big drawback that we  
> need as many OR clauses as we set our maximum number of paragraphs  
> to .
> Simple,short query:
> paragraph: $query would have to be  exploded to:    (paragraph1:  
> $query) OR (paragraph2: $query)  OR ... OR (paragraphN: $query)
>
> PS2: Just saw following in the FAQ :
> "How can I search over multiple fields? "
> >Parse your query using MultiFieldQueryParser <http:// 
> lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/ 
> MultiFieldQueryParser.html>. ...
> http://lucene.apache.org/java/docs/api/org/apache/lucene/ 
> queryParser/MultiFieldQueryParser.html
> But this seems to not help here, or did I overlook something ?
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 10 22:45:41 2006
Return-Path: <java-user-return-22631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62889 invoked from network); 10 Aug 2006 22:45:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2006 22:45:41 -0000
Received: (qmail 88098 invoked by uid 500); 10 Aug 2006 22:45:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88054 invoked by uid 500); 10 Aug 2006 22:45:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88043 invoked by uid 99); 10 Aug 2006 22:45:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 15:45:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 15:45:25 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1GBJGd-0004Z0-9c
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 00:44:43 +0200
Message-ID: <44DBB72E.1030701@tejnora.cz>
Date: Fri, 11 Aug 2006 00:46:06 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: updating document
References: <1155145453.2739.8.camel@localhost.localdomain>
In-Reply-To: <1155145453.2739.8.camel@localhost.localdomain>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
    I'm facing similar problem. I found a possible way, how to copy a 
part of index (w/o copy whole index,delete,optimize), but don't know how 
to change/add/remove field (or add term vector in my case) to existing 
index.

To copy a part of index override methods in IndexReader

  /** Returns true if document <i>n</i> has been deleted */
  public abstract boolean isDeleted(int n);

  /** Returns true if any documents have been deleted */
  public abstract boolean hasDeletions();

and use addIndexes when it has a just one segment.
I have not tested it yet, just an idea from reading source code.

Karel



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 02:33:00 2006
Return-Path: <java-user-return-22632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45506 invoked from network); 11 Aug 2006 02:33:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 02:33:00 -0000
Received: (qmail 62289 invoked by uid 500); 11 Aug 2006 02:32:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62254 invoked by uid 500); 11 Aug 2006 02:32:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62242 invoked by uid 99); 11 Aug 2006 02:32:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 19:32:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 19:32:44 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 445EED95393
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 22:32:15 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Thu, 10 Aug 2006 22:32:16 -0400
X-Sasl-enc: L3sdhTmY62giOTjsE6QbSJ7nF+xygLjF0Urf9+YRYSp4 1155263536
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 04DF36F84
	for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 22:32:15 -0400 (EDT)
Message-ID: <44DBEC2E.5070001@mikemccandless.com>
Date: Thu, 10 Aug 2006 22:32:14 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Field compression too slow
References: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com>
In-Reply-To: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I have a sample document which has about 4.5MB of text to be stored as
> compressed data within the field, and the indexing of this document 
> seems to
> take an inordinate amount of time (over 10 minutes!).  When debugging I can
> see that it's stuck on the deflate() calls of the Deflater used by Lucene.

Would it be possible to get a copy of this document's text (only if 
you're able to share it)?  I'd like to run some tests to work out the 
tradeoff (time taken vs % deflated) of the different levels we can pass 
to the zip library.  If not that's fine, I'll just run on various random 
text sources I can find.

Thanks.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 04:38:29 2006
Return-Path: <java-user-return-22633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78012 invoked from network); 11 Aug 2006 04:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 04:38:29 -0000
Received: (qmail 93119 invoked by uid 500); 11 Aug 2006 04:38:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92733 invoked by uid 500); 11 Aug 2006 04:38:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92721 invoked by uid 99); 11 Aug 2006 04:38:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 21:38:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 21:38:13 -0700
Received: by ug-out-1314.google.com with SMTP id y2so230945uge
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 21:37:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KW63V6rFNSPQVNo49RwKv1v2VcZQrxQ/sPUqCuJYSH5wwCpv6Bjg7LCUESwxHjrTEswfreuerzdsnl5MHlkG1AQNRlCkSnm81b34vn+CYym9yG+vuyZJbsmmmNaMGh5M6eBuAt/N7kRaAfD6PHtfjmOt6+iMNVdjDKy8wGUSJog=
Received: by 10.67.29.12 with SMTP id g12mr3546691ugj;
        Thu, 10 Aug 2006 21:37:46 -0700 (PDT)
Received: by 10.67.95.20 with HTTP; Thu, 10 Aug 2006 21:37:45 -0700 (PDT)
Message-ID: <4f2c7c9b0608102137i1f494228g3876f9993f2d658d@mail.gmail.com>
Date: Fri, 11 Aug 2006 12:37:45 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SQL-Like Join in Lucene
In-Reply-To: <44DB5C4C.7050903@gmx.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68499_18104693.1155271065945"
References: <44DB5C4C.7050903@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_68499_18104693.1155271065945
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>4. Search for records with filter.
if the filter returns a lot of ids, it willn' t be fast.
Recently I have a test. I customized a filter which get a list of ids from a
mysql database table of size 5000. Then I invoke the search(query, filter,
hitcollector), I took me more than 40s to retrieve the first 100 hits. Then
I try search(query, hitcollector), the fragment code is following:

        public MyHitCollector1(ArrayList list , String[] allIDs, ArrayList
idList)
        {
            this.list = list;
            this.idList = idList;
            this.allIDs = allIDs;
        }
        public override void Collect(int doc, float score)
        {
            if (score > 0.0f)
            {
                if (count < 1000)
                {
                    if (idList.BinarySearch(allIDs[doc]) >= 0)
                    {
                        list.Add(IndexSearcher.GetDocument(doc));
                        count++;
                    }
                }
                else
                    return;

            }
        }
you can get String[] allIDs = FieldCache.DEFAULT.GetStrings(IndexReader(),
"ID") in this way.

This method took about 8s to retrieve the first 100/1000 hits. Here the
database table has about 300,000 records


2006/8/11, Aleksei Valikov <valikov@gmx.net>:
>
> Hi.
>
> I'm investigating a possibility to make a "join" in Lucene/Compass.
>
> Here's the thread:
> http://forums.opensymphony.com/thread.jspa?threadID=39685&tstart=0
>
> I have records m:m entities. Entities hold indexed information. Records
> consist
> of entities. One entity may belong to many records.
> I would like to search for records having certain entity information.
>
> Entity documents contain indexable entity fields plus entity id.
> Record documents contain indexable record fielfs, record id and entity
> ids.
>
> I'd like to "search for records having entity ids in (search for entity
> ids
> where entity fields satisfy condition)".
>
> Currently I am using self-written InSetFilter to accomplish the task.
> 1. Search among entities by the given condition.
> 2. Put ids of the found entities into a set.
> 3. Create filter with this set.
> 4. Search for records with filter.
>
> The join is basically implemented by a filter:
>
>        public BitSet bits(IndexReader reader) throws IOException {
>
>                BitSet bits = new BitSet(reader.maxDoc());
>
>                int[] docs = new int[1];
>                int[] freqs = new int[1];
>                for (Iterator iterator = set.iterator(); iterator.hasNext();)
> {
>                        final String id = (String) iterator.next();
>                        final TermDocs termDocs = reader.termDocs(new
> Term(fieldName, id));
>                        final int count = termDocs.read(docs, freqs);
>                        if (count == 1) {
>                                bits.set(docs[0]);
>                        }
>                }
>                return bits;
>        }
>
> Is this approach ok or I missed something and there's an easier way to
> join?
>
> Thank you for you time.
>
> Bye.
> /lexi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_68499_18104693.1155271065945--

From java-user-return-22634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 05:24:45 2006
Return-Path: <java-user-return-22634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91695 invoked from network); 11 Aug 2006 05:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 05:24:45 -0000
Received: (qmail 54228 invoked by uid 500); 11 Aug 2006 05:24:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53602 invoked by uid 500); 11 Aug 2006 05:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53590 invoked by uid 99); 11 Aug 2006 05:24:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 22:24:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 22:24:28 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k7B5OEI1007862
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 07:24:15 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id BD9FF8B97F
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 07:23:56 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 20862-04 for <java-user@lucene.apache.org>;
 Fri, 11 Aug 2006 07:23:55 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 8F7558B94F
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 07:23:55 +0200 (CEST)
Message-ID: <44DC146D.3070005@uni-hd.de>
Date: Fri, 11 Aug 2006 07:23:57 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Special characters
References: <1155224989.4653.5.camel@localhost.localdomain> <359a92830608101033g77d03668qdf2c341dc882d8b4@mail.gmail.com>
In-Reply-To: <359a92830608101033g77d03668qdf2c341dc882d8b4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Adrian,

>> I am indexing some text in a java object that is "%772B" with the
>> standard analyser and Lucene 2.
>>
>> Should I be able to search for this with the same text as the query, or
>> do I need to do any escaping of characters?

Besides Luke there are the AnalyzerUtils from the LIA book, (you can
download the source code examples here:
http://www.lucenebook.com/LuceneInAction.zip

You'll just have to customize the test-class and you'll get an output
like this:


Analzying "%772B"
	org.apache.lucene.analysis.standard.StandardAnalyzer:
		[772b]


1: [772b:1->5:<ALPHANUM>]

1: [772b]


 Analzying "%772B"
	org.apache.lucene.analysis.KeywordAnalyzer:
		[%772B]


1: [%772B:0->5:word]

1: [%772B]

hth,
martin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 06:02:08 2006
Return-Path: <java-user-return-22635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6871 invoked from network); 11 Aug 2006 06:02:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 06:02:07 -0000
Received: (qmail 86974 invoked by uid 500); 11 Aug 2006 06:02:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86948 invoked by uid 500); 11 Aug 2006 06:02:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86931 invoked by uid 99); 11 Aug 2006 06:02:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 23:02:01 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DATE_IN_PAST_12_24,DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of codeshepherd@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 23:01:49 -0700
Received: by py-out-1112.google.com with SMTP id s49so8630pyc
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 22:59:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:subject:from:to:in-reply-to:references:content-type:date:message-id:mime-version:x-mailer:content-transfer-encoding;
        b=anl0xWpQTSvU/vI8taLyrMAaV9T5qPoRd98rX14IeTd4+EJiWSfjdynAhKJov8hiK4K3kcOjVq4SjNmhQ01Gyb+ZaJV2Ks8DTtl4GOCbtU6kalmCXplRlPu02nIyuIMLaJwcahFyPcQgP94HLQ5JkFjpvioOCLx6a273MEP240c=
Received: by 10.35.121.9 with SMTP id y9mr5339986pym;
        Thu, 10 Aug 2006 22:59:53 -0700 (PDT)
Received: from ?10.1.1.2? ( [59.92.88.244])
        by mx.gmail.com with ESMTP id n78sm1604695pyf.2006.08.10.22.59.51;
        Thu, 10 Aug 2006 22:59:53 -0700 (PDT)
Subject: Re: updating document
From: Deepan Chakravarthy <codeshepherd@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <d8050f240608100858h7b93b695nb027fb588ca2e901@mail.gmail.com>
References: <1155145453.2739.8.camel@localhost.localdomain>
	 <359a92830608100616re219fe3la419623871885798@mail.gmail.com>
	 <1155171673.3388.3.camel@localhost.localdomain>
	 <d8050f240608100858h7b93b695nb027fb588ca2e901@mail.gmail.com>
Content-Type: text/plain
Date: Thu, 10 Aug 2006 22:59:41 +0530
Message-Id: <1155230981.9137.4.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 (2.6.0-1) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, 2006-08-11 at 01:58 +1000, Jason Polites wrote:
> Are your storing the contents of the fields in the index?  That is,
> specifying Field.Store.YES when creating the field?
> 
> In my experience fields which are not stored are not recoverable from the
> index (well.. they can be reconstructed but it's a lossy process).  So when
> you retrieve the document, you lose non-stored fields.
> 

Yes we have some important fields that are not stored in the index. Is
there a way to overcome this problem? while updating document.  Will i
face the same problem with IndexModifier ? (Now I am using IndexReader
and IndexWriter)
Thanks
Deepan 
www.codeshepherd.com


> If you are searching on these fields then it would explain why you are
> losing results.
> 
> On 8/10/06, Deepan Chakravarthy <codeshepherd@gmail.com> wrote:
> >
> > On Thu, 2006-08-10 at 09:16 -0400, Erick Erickson wrote:
> > > You say "Those documents that we updated are not searchable now". I've
> > got
> > > to ask the obvious question, did you close and re-open the *searcher*
> > > (really, the indexreader you use in your searcher)? I suspect you have,
> > but
> > > thought I'd ask explicitly.
> > >
> > > I'd also get a copy of Luke (http://www.getopt.org/luke/) and inspect my
> > > index after you drop/re-add the data.
> > I have Luke. When i inspect the index with luke i find the same result,
> > i.e the updated documents are not searchable in the new index.
> >
> > I guess Index Modifier used Index reader and writer internally. I am
> > adding more fields to existing documents in index. so some of my
> > documents will have n fields and other n+m fields after updating. Does
> > the difference in number of fields affect search in any manner ?
> >
> >
> > >
> > > Actually, have you thought about IndexModifier (I'm using Lucene 2.0).
> > From
> > > the javadoc....
> > >
> > > <<< A class to modify an index, i.e. to delete and add documents. This
> > class
> > > hides IndexReader<
> > file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexReader.html
> > >and
> > > IndexWriter<
> > file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexWriter.html
> > >so
> > > that you do not need to care about implementation details such as that
> > > adding documents is done via IndexWriter and deletion is done via
> > > IndexReader.>>>
> > >
> > > Best
> > > Erick
> > >
> > > On 8/9/06, Deepan Chakravarthy <codeshepherd@gmail.com> wrote:
> > > >
> > > > Hi,
> > > > We have to update few documents in our index. We have add a additional
> > > > field to them. We did as follows
> > > >
> > > > 1)read the documents of our interest using IndexReader
> > > > 2)copy them to a temporary doc object (temp_doc)
> > > > 3)delete the document in the index
> > > > 4)close the IndexReader
> > > > 5)open the IndexWriter
> > > > 6)add a new field to (temp_doc)
> > > > 7)add the (temp_doc) to the index using IndexWriter
> > > > 8)close the IndexWriter
> > > >
> > > >
> > > > The problem:
> > > > 1)Those documents that we updated are not searchable now. When we
> > > > perform search based we not find any of those documents we updated.
> > > > (using IndexSearcher)
> > > >
> > > > 2)But we are still able to read the updated documents using
> > IndexReader.
> > > >
> > > >
> > > > Questions
> > > > 1)When i want to update a document by adding a field, should i reindex
> > > > all the fields again? will copying the existing document not help and
> > > > adding new field not help ?
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 06:09:03 2006
Return-Path: <java-user-return-22636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8411 invoked from network); 11 Aug 2006 06:09:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 06:09:02 -0000
Received: (qmail 94199 invoked by uid 500); 11 Aug 2006 06:08:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93775 invoked by uid 500); 11 Aug 2006 06:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93764 invoked by uid 99); 11 Aug 2006 06:08:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 23:08:56 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 23:08:48 -0700
Received: by nf-out-0910.google.com with SMTP id p48so851791nfa
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 23:07:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VD5pFrL5vmYJXjAxciN9ZPmYT3X9awjYKJ7W/ZOUr5VjaeurRryCGWOvm+Vk2i5rHQOxwSNsy4vlYsVr0gC/qtyxB70lyNAYox+fJo3EdM+YFKf5FAQ62/loQiTJbeDM+hQAix/euNCbmcHcdt4vGkX+IviscFh2jw5P3WHbutw=
Received: by 10.82.132.4 with SMTP id f4mr349665bud;
        Thu, 10 Aug 2006 23:07:18 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Thu, 10 Aug 2006 23:07:17 -0700 (PDT)
Message-ID: <d8050f240608102307v229c683bn6f9658911809d695@mail.gmail.com>
Date: Fri, 11 Aug 2006 16:07:17 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field compression too slow
In-Reply-To: <44DBEC2E.5070001@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13272_20045004.1155276437978"
References: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com>
	 <44DBEC2E.5070001@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13272_20045004.1155276437978
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can share the data.. but it would be quicker for you to just pull out some
random text from anywhere you like.

The issue is that the text was in an email, which was one of about 2,000 and
I don't know which one.  I got the 4.5MB figure from the number of bytes in
the byte array reported in the debugger... and didn't bother to record the
email file it was contained in.  Anyway.. I think it was text extracted from
a PDF extracted from a ZIP... so it would take me a while to locate!

It's worth noting that the time I quoted is somewhat misleading.  I killed
my process after 10 minutes because I realised there was a problem and any
further time was irrelevant.  But... the length of time is partially due to
the load on the process.

I am processing multiple files concurrently, and in so doing am performing a
bunch of CPU intensive tasks (text extraction, encryption etc).  Most of
this happens in separate threads, but they are all competing for CPU time.

The only way to really benchmark the performance of the compression is to
combine both compression levels, with thread numbers to see how it scales.

I'm confident that the compression mechanism used in Lucene is fine (had a
look at the code... all seems pretty good), so I would guess that Lucene
would have performance comparable  to "vanilla" compression using the native
java libs.

I'm betting you get non-linear scalability no matter what the compression
level (due to the max throughput of the CPU, bus speed etc); but you may
find scalability tends towards a linear curve (oxymoron?) the lower the
compression level.

This is really what I am looking for.

Also.. upon reflection I'm not certain using compression inside the index is
really a valuable process without lazy loading anyway.  The time-cost of
decompression when iterating hits reduces the overall effectiveness of the
index.  This is obviously solved by lazy loading (for searches) and I am
excited about this feature being added.  Obviously it depends on the
use-case, but in mine I realised that storing large amounts of data in the
index is just not the right way to do things.  So I changed my architecture
so that the larger amounts of data are stored (and compressed) elsewhere,
then brought back in when I need to update a document.

Of course all my problems would be solved if I had lazy loading AND field
updating :)

On 8/11/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> > I have a sample document which has about 4.5MB of text to be stored as
> > compressed data within the field, and the indexing of this document
> > seems to
> > take an inordinate amount of time (over 10 minutes!).  When debugging I
> can
> > see that it's stuck on the deflate() calls of the Deflater used by
> Lucene.
>
> Would it be possible to get a copy of this document's text (only if
> you're able to share it)?  I'd like to run some tests to work out the
> tradeoff (time taken vs % deflated) of the different levels we can pass
> to the zip library.  If not that's fine, I'll just run on various random
> text sources I can find.
>
> Thanks.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13272_20045004.1155276437978--

From java-user-return-22637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 06:24:44 2006
Return-Path: <java-user-return-22637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11589 invoked from network); 11 Aug 2006 06:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 06:24:44 -0000
Received: (qmail 5552 invoked by uid 500); 11 Aug 2006 06:24:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5530 invoked by uid 500); 11 Aug 2006 06:24:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5519 invoked by uid 99); 11 Aug 2006 06:24:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 23:24:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Aug 2006 23:24:28 -0700
Received: by nf-out-0910.google.com with SMTP id p48so856576nfa
        for <java-user@lucene.apache.org>; Thu, 10 Aug 2006 23:23:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OyBE4NVw/8cvbxH/GVpmAjm8PeJg19xcSXQIrGSNqP8zidyo9ELX4y2U/pDTyezyayxB+E/9dVsQs7OchECMaNMMDKGoGCbUMvZPQoQCA9ZDJe6kHBdqvRKl9Zo0ielEkVoFjZvI06aOno9J8PTPR+nbTG7K1vODioKokQNdZeo=
Received: by 10.82.109.19 with SMTP id h19mr349523buc;
        Thu, 10 Aug 2006 23:23:31 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Thu, 10 Aug 2006 23:23:31 -0700 (PDT)
Message-ID: <d8050f240608102323i6110fa70oa78ea72ca77f7d92@mail.gmail.com>
Date: Fri, 11 Aug 2006 16:23:31 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: updating document
In-Reply-To: <1155230981.9137.4.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13388_3730451.1155277411870"
References: <1155145453.2739.8.camel@localhost.localdomain>
	 <359a92830608100616re219fe3la419623871885798@mail.gmail.com>
	 <1155171673.3388.3.camel@localhost.localdomain>
	 <d8050f240608100858h7b93b695nb027fb588ca2e901@mail.gmail.com>
	 <1155230981.9137.4.camel@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13388_3730451.1155277411870
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Unfortunately yes.  It doesn't really have anything to do with the way you
access the index (I don't think).  The fact is that the data is simply not
in the document.  When you add the document again it is effectively
"re-indexed", so if the raw data of the field is empty, then it won't be
indexed.

I'm in no way a Lucene expert, but this has been my experience.

In my case, I too have important data which I need to preserve during
updates, but it raises an important architecture point.  If you are not
storing the data, then you obviously don't need it for display (no doubt you
have it elsewhere when it is needed for display).  Storing the data simply
for the purposes of preserving it during updates will work, but has the
secondary effect of slowing down searches.  More specifically, slowing down
the retrieval of Hits.  When you call hits.doc(n), the stored values of
fields in the document will be loaded into memory.  The larger the amount of
data stored, the larger the memory consumption.  If you are compressing the
field (using the Field.Store.COMPRESS option) you will see even slower
performance as the field data needs to be decompressed before it is
retrieved.

There are apparently plans to introduce lazy loading of fields in subsequent
releases, which will be a great feature and will solve some of this, but you
still have the issue of needing to store data in the index which doesn't
really need to be there.

In my case, I elected to store this data elsewhere.  So, I have a "document"
(actually an email) which may contain large amounts of text which I want to
search on, but don't need to display from the index.  I index this text, but
don't store it.  When I want to update a document, I retrieve this text from
wherever I put it, and re-insert it into the lucene document.

It's effectively the same process, but it just alleviates the burden of
maintaining this data within the index.  Of course you then have to maintain
two sets of information, but the benefits will probably outweight the costs.

It can be as simple as storing the text content in a compressed file on your
file-system somewhere, keyed with an ID which is unique to the lucene
document it belongs to.  Or you could use a CLOB field (Text type in SQL
Server) in a database etc.

The real advantage of this is the speed gain from the index.  Lucene works
best when the index is light-weight.  My recommendation is to think
carefully about the "role" of the index, vs the role of your data storage
approach.

On 8/11/06, Deepan Chakravarthy <codeshepherd@gmail.com> wrote:
>
> On Fri, 2006-08-11 at 01:58 +1000, Jason Polites wrote:
> > Are your storing the contents of the fields in the index?  That is,
> > specifying Field.Store.YES when creating the field?
> >
> > In my experience fields which are not stored are not recoverable from
> the
> > index (well.. they can be reconstructed but it's a lossy process).  So
> when
> > you retrieve the document, you lose non-stored fields.
> >
>
> Yes we have some important fields that are not stored in the index. Is
> there a way to overcome this problem? while updating document.  Will i
> face the same problem with IndexModifier ? (Now I am using IndexReader
> and IndexWriter)
> Thanks
> Deepan
> www.codeshepherd.com
>
>
> > If you are searching on these fields then it would explain why you are
> > losing results.
> >
> > On 8/10/06, Deepan Chakravarthy <codeshepherd@gmail.com> wrote:
> > >
> > > On Thu, 2006-08-10 at 09:16 -0400, Erick Erickson wrote:
> > > > You say "Those documents that we updated are not searchable now".
> I've
> > > got
> > > > to ask the obvious question, did you close and re-open the
> *searcher*
> > > > (really, the indexreader you use in your searcher)? I suspect you
> have,
> > > but
> > > > thought I'd ask explicitly.
> > > >
> > > > I'd also get a copy of Luke (http://www.getopt.org/luke/) and
> inspect my
> > > > index after you drop/re-add the data.
> > > I have Luke. When i inspect the index with luke i find the same
> result,
> > > i.e the updated documents are not searchable in the new index.
> > >
> > > I guess Index Modifier used Index reader and writer internally. I am
> > > adding more fields to existing documents in index. so some of my
> > > documents will have n fields and other n+m fields after updating. Does
> > > the difference in number of fields affect search in any manner ?
> > >
> > >
> > > >
> > > > Actually, have you thought about IndexModifier (I'm using Lucene 2.0
> ).
> > > From
> > > > the javadoc....
> > > >
> > > > <<< A class to modify an index, i.e. to delete and add documents.
> This
> > > class
> > > > hides IndexReader<
> > >
> file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexReader.html
> > > >and
> > > > IndexWriter<
> > >
> file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexWriter.html
> > > >so
> > > > that you do not need to care about implementation details such as
> that
> > > > adding documents is done via IndexWriter and deletion is done via
> > > > IndexReader.>>>
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On 8/9/06, Deepan Chakravarthy <codeshepherd@gmail.com> wrote:
> > > > >
> > > > > Hi,
> > > > > We have to update few documents in our index. We have add a
> additional
> > > > > field to them. We did as follows
> > > > >
> > > > > 1)read the documents of our interest using IndexReader
> > > > > 2)copy them to a temporary doc object (temp_doc)
> > > > > 3)delete the document in the index
> > > > > 4)close the IndexReader
> > > > > 5)open the IndexWriter
> > > > > 6)add a new field to (temp_doc)
> > > > > 7)add the (temp_doc) to the index using IndexWriter
> > > > > 8)close the IndexWriter
> > > > >
> > > > >
> > > > > The problem:
> > > > > 1)Those documents that we updated are not searchable now. When we
> > > > > perform search based we not find any of those documents we
> updated.
> > > > > (using IndexSearcher)
> > > > >
> > > > > 2)But we are still able to read the updated documents using
> > > IndexReader.
> > > > >
> > > > >
> > > > > Questions
> > > > > 1)When i want to update a document by adding a field, should i
> reindex
> > > > > all the fields again? will copying the existing document not help
> and
> > > > > adding new field not help ?
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13388_3730451.1155277411870--

From java-user-return-22638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 07:35:50 2006
Return-Path: <java-user-return-22638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36234 invoked from network); 11 Aug 2006 07:35:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 07:35:50 -0000
Received: (qmail 13484 invoked by uid 500); 11 Aug 2006 07:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13462 invoked by uid 500); 11 Aug 2006 07:35:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13451 invoked by uid 99); 11 Aug 2006 07:35:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 00:35:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.90.206.104] (HELO office.redwerk.com) (85.90.206.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 00:35:35 -0700
Received: from bofh by office.redwerk.com with local (Exim 4.63 (FreeBSD))
	(envelope-from <bofh@redwerk.com>)
	id 1GBRY0-0000Rz-0p
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 10:35:12 +0300
Date: Fri, 11 Aug 2006 10:35:12 +0300
From: Eugeny N Dzhurinsky <bofh@redwerk.com>
To: java-user@lucene.apache.org
Subject: search document for keywords and keyphrases
Message-ID: <20060811073512.GC1584@office.redwerk.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=koi8-r
Content-Disposition: inline
User-Agent: Mutt/1.5.12-2006-07-14
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello!

I have an assigment, which will require to search documents for keywords or
keyphrases.

For instance, I have a database of keywords/keyphrases, which might contain
several millions items. Now I need to find if document contains any of the
keywords/phrases listed in that database.

I was thinking on implementing finite-state machine, and use b-trees, so I
will iterate document char by char and go down the tree unless I find some
word or phrase which matches character sequence.

I think Lucene is doing in the same way when performs searching, so may be I
can use Lucene?

-- 
Eugene N Dzhurinsky

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 08:02:17 2006
Return-Path: <java-user-return-22639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42792 invoked from network); 11 Aug 2006 08:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 08:02:16 -0000
Received: (qmail 51432 invoked by uid 500); 11 Aug 2006 08:02:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51398 invoked by uid 500); 11 Aug 2006 08:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51387 invoked by uid 99); 11 Aug 2006 08:02:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 01:02:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 01:02:02 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9CD255B77C; Fri, 11 Aug 2006 01:01:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 65ADF7F403
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 01:01:33 -0700 (PDT)
Date: Fri, 11 Aug 2006 01:01:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: SV: Lucene hits.length()
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C021E57F0@S1SE1MAIL.emea1.ad.group>
Message-ID: <Pine.LNX.4.58.0608110059010.1051@hal.rescomp.berkeley.edu>
References: <8834A84C87A2C148AD46921BB8BFC97C021E57F0@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I think we've moved well beyond the point where anyone can offer you
suggestions based purely on a description of hte problem.

As i mentioned in my last post, can you post some code that demonstrates
the problem (ie:  writes some arbitrary docs, opens a searcher, does a
query that returns N results, adds some more docs, reuses the searcher to
execute the same query and now gets M results).



: Date: Thu, 10 Aug 2006 09:37:49 +0200
: From: Marcus Falck <marcus.falck@observer.se>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: SV: Lucene hits.length()
:
: Hi again Erick.
:
: Yes I know the hits exists in the index at all time.
:
: I will illustrate exactly with approximently values for the hits.length()=
:
:
: Mergefactor 10.
: MinMergeDocs 5000.
:
: Searching for a very common Swedish word ("han" which equals to "he" in E=
nglish).
:
: Indexing 100000 docs.
:
: After 1000 docs I do a search. Lets say I hit 200 docs.
: Now my searcher will be hold for 3 minutes time.
:
: After those three minutes lets say I got the following index structur:
: 5 x 5000 docs in FSDir
: And 1000 docs in RAMDir
: Total : 26000 docs
:
: The search now yields 220 results, but since I'm sorting on date and addi=
ng the oldest first I see the newest added hits.
:
: Holding this searcher for 3 minutes.
:
: After three minutes lets say I have the following index structure:
: 1 x 50000 docs in FSDir
: 2000 docs in RAMDir
:
: The search now yields 10000 hits. Which seems a lot more appropriate.
:
: 3 minutes later:
:
: 1x50000
: 5x5000
: + 1000 RAMDir
:
: Search hits count: 10111.
:
: And after the big 100 000 merge ( 2 x 50000 ) I will get approximately 20=
000 hits.
:
: ---
: As you can see it's a very strange behavior. At some points the hits.leng=
th() can even temporary decrease from the previous length.
:
: I will have to point out that I have a minMergeSize for the IndexWriter w=
orking on the FSDir set to 5000. I also have a separate RAMDir and another =
IndexWriter that is writing to that RAMDir until my own RAMDir have 5000 do=
cs. Then I flush it into the FS IndexWriter ( which will result in a immedi=
ate disc write ). This way I have total control over when the disc writes o=
ccurs.
:
: And yes I'm afraid that this will affect my system in a very negative way=
=2E Cause my clients will browse the index on their stored search profiles.
:
:
: /
: Regards
: Marcus Falck
:
: -----Ursprungligt meddelande-----
: Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
: Skickat: den 9 augusti 2006 19:49
: Till: java-user@lucene.apache.org
: =C4mne: Re: Lucene hits.length()
:
: I think, but am not certain (chime in here guys) that this is expected
: behavior. As I remember from various threads, internally indexing uses a
: RAMdir to accumulate data until it merges it with the FSDir. Since the
: searcher and indexer are separate, I assume that the searcher is looking =
at
: the snapshot that is on disk and missing that in the RAMdir. After you
: merge, the RAMdir data has been added to that on disk, and the two are "i=
n
: synch".
:
: So I guess my real question is "why do you care"? Is this affecting your
: application or is this an anomaly that you want to understand so you don'=
t
: get surprised? If the latter, I think you're OK if you open your index af=
ter
: merging, you'll have the data available....
:
: BTW, I assume that when you say hits.length() is not correct, you're gett=
ing
: fewer hits than you *know* are in the index (including the stuff you're
: currently indexing but haven't merged yet).
:
: Best
: Erick
:
:
:
: On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
: >
: > Still worried =3D)
: > You see it doesn't update the hits.length() in a correct way when I cre=
ate
: > a new searcher. The correct update does just occur in the merges. =3D/
: >
: > -----Ursprungligt meddelande-----
: > Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
: > Skickat: den 9 augusti 2006 15:34
: > Till: java-user@lucene.apache.org
: > =C4mne: Re: Lucene hits.length()
: >
: > Then you won't see anything added to your index between times. Does thi=
s
: > identify your problem or are you still worried?
: >
: > Erick
: >
: > On 8/9/06, Marcus Falck <marcus.falck@observer.se> wrote:
: > >
: > > I'm opening a new searcher every 3:rd minute.
: > >
: > > -----Ursprungligt meddelande-----
: > > Fr=E5n: Erick Erickson [mailto:erickerickson@gmail.com]
: > > Skickat: den 8 augusti 2006 18:58
: > > Till: java-user@lucene.apache.org
: > > =C4mne: Re: Lucene hits.length()
: > >
: > > I'll take a stab at it.... When are you opening/closing your searcher=
?
: > > When
: > > you open a searcher, you get a snapshot of the index at that instant,
: > and
: > > subsequent modifications aren't visible until you open a new searcher
: > (at
: > > least I think I've got this right).
: > >
: > > And I'm sure this also interacts with the writer merge settings
: > > "interestingly".
: > >
: > > Personally, I'd worry about this a lot more if it happened after I'd
: > > closed
: > > my writer and opened a new reader <G>...
: > > Of course, my app has an index that is updated rarely (every two week=
s),
: > > so
: > > I haven't dug into too many details in this area...
: > >
: > >
: > > Best
: > > Erick
: > >
: > > On 8/8/06, Marcus Falck <marcus.falck@observer.se> wrote:
: > > >
: > > > I have noticed some strange behavior when searching my lucene index=
=2E
: > > >
: > > >
: > > >
: > > > I'm adding 500.000 docs to an index.
: > > >
: > > >
: > > >
: > > > MergeFactor =3D 10
: > > >
: > > > MinMerge =3D 5000
: > > >
: > > >
: > > >
: > > > When 49999 have been added ( just before the first 10 * 5000 merge =
)
: > the
: > > > hits.length() is reporting around 1000 hits for a keyword (which by
: > the
: > > > way is around the same count as with 5000 docs added). After the
: > 10*5000
: > > > merge the hits.length() returns around 8000 hits, which seems to be=
 a
: > > > lot more reasonable. Since I'm adding content in date order ( oldes=
t
: > > > first ) I have also tried to sort the hits (newest date first) and
: > > > display the top 10 hits.
: > > >
: > > >
: > > >
: > > > According to that output it seems that the documents are added
: > > > correctly.
: > > >
: > > >
: > > >
: > > > I'm using a multisearcher on top of a RAMDir and an FSDir. Using
: > > > Lucene1.4.3
: > > >
: > > >
: > > >
: > > > Anybody that has any idea about why the hit count is so misleading?
: > > >
: > > >
: > > >
: > > > /
: > > >
: > > > Regards
: > > >
: > > > Marcus
: > > >
: > > >
: > > >
: > > >
: > > >
: > > >
: > > >
: > >
: > >
: > >
: > > ---------------------------------------------------------------------
: > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > > For additional commands, e-mail: java-user-help@lucene.apache.org
: > >
: > >
: >
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 08:07:57 2006
Return-Path: <java-user-return-22640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43935 invoked from network); 11 Aug 2006 08:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 08:07:57 -0000
Received: (qmail 61389 invoked by uid 500); 11 Aug 2006 08:07:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61354 invoked by uid 500); 11 Aug 2006 08:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61341 invoked by uid 99); 11 Aug 2006 08:07:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 01:07:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 01:07:43 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 78FE85B763; Fri, 11 Aug 2006 01:07:09 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 757017F403
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 01:07:09 -0700 (PDT)
Date: Fri, 11 Aug 2006 01:07:09 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: custom sort
In-Reply-To: <02cd01c6bc5c$21e1b110$1e8e10ac@ecommerce.tspain.local>
Message-ID: <Pine.LNX.4.58.0608110102250.1051@hal.rescomp.berkeley.edu>
References: <14e001c6bba9$74a40050$1e8e10ac@ecommerce.tspain.local>
 <Pine.LNX.4.58.0608091639340.24158@hal.rescomp.berkeley.edu>
 <02cd01c6bc5c$21e1b110$1e8e10ac@ecommerce.tspain.local>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: What I don't know is how can I make that fieldNorm returns the same value
: for both documents, and at the same time this values is bigger than if th=
e
: query only found one of the words, smaller than finding three of three...
=09...
: I subclass DefaultSimilarity and set it to IndexSearcher, but I don't kno=
w
: what reimplementation of the methods is what I need.

take a look at the lengthNorm function of Similarity.  As i said before
LIA ("Lucene In Action" just in case that isn't clear)  has some great
info on this, and if you search the archives for Similarity you'll find
previous discussions about writing custom subclass ... the one special
thing to note about lengthNorm is that it's used when the index is built
-- so setting it at search time isn't enough.


:
: Thanks
: ----- Original Message -----
: From: "Chris Hostetter" <hossman_lucene@fucit.org>
: To: <java-user@lucene.apache.org>
: Sent: Thursday, August 10, 2006 1:41 AM
: Subject: Re: custom sort
:
:
:
: what you want is not a customized sort as much as a customized Score ..
: scores can be customized by modifying your Similarity, class -- LIA has
: some good info on this, but the best way to figure out what you want may
: be to start by creating your own Similarity class and then look at the
: search.explain output for your searches to understand how your changes
: affect things.
:
:
: : Date: Wed, 9 Aug 2006 13:46:30 +0200
: : From: Enrique Lamas <enrique.lamas@corp.ya.com>
: : Reply-To: java-user@lucene.apache.org
: : To: java-user@lucene.apache.org
: : Subject: custom sort
: :
: : Hi,
: : I want to execute a query searching a few terms
: :
: : QueryParser queryParser =3D new MultiFieldQueryParser(new String[] {"ta=
gs",
: "title"}, ProcessConstants.analyzer);
: : Query query =3D queryParser.parse("rocio ortega");
: :
: : and I want to obtain the results sorted by the number of founded terms,
: but not considering other factors like the number of times found each ter=
m.
: =BFHow can I do this?
: :
: : SortField.FIELD_SCORE doesn=B4t work for this because I think it consid=
er
: other factors like the number of times found each term.
: :
: : Thanks
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 10:12:31 2006
Return-Path: <java-user-return-22641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88632 invoked from network); 11 Aug 2006 10:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 10:12:31 -0000
Received: (qmail 48062 invoked by uid 500); 11 Aug 2006 10:12:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47877 invoked by uid 500); 11 Aug 2006 10:12:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47866 invoked by uid 99); 11 Aug 2006 10:12:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 03:12:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 03:12:17 -0700
Received: by nf-out-0910.google.com with SMTP id p48so923099nfa
        for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 03:11:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JQc5tg8YDdTP/SL1SJ2Nugf2RjDlgsrYms6rtC9BuDUCg1Ss/wz5iAW/rnxSr2zlnzx/ioTlea13rX7wzbUn0Vi8AByRJNj7xTrOYKa90OSKPtoLMwsipx56VEQ/xA2ZaOMvADmn54Hx4UZa9Om68vFdLGu0h7fWFqD01aaf5aA=
Received: by 10.82.116.15 with SMTP id o15mr357770buc;
        Fri, 11 Aug 2006 03:11:31 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Fri, 11 Aug 2006 03:11:31 -0700 (PDT)
Message-ID: <d8050f240608110311r5ab06779vd9c490b1dc3bd50d@mail.gmail.com>
Date: Fri, 11 Aug 2006 20:11:31 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search document for keywords and keyphrases
In-Reply-To: <20060811073512.GC1584@office.redwerk.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14786_18392238.1155291091242"
References: <20060811073512.GC1584@office.redwerk.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14786_18392238.1155291091242
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes you could use lucene for this, but it may be overkill for your
requirement.  If I understand you correctly, all you need to is find
documents which match "any" of the words in your list?  Do you need to rank
the results?   If not, it's probably easier just to create your own inverted
index of the documents you need to search.  If you actually need to rank
results, then lucene is probably easier as it does this for you.



On 8/11/06, Eugeny N Dzhurinsky <bofh@redwerk.com> wrote:
>
> Hello!
>
> I have an assigment, which will require to search documents for keywords
> or
> keyphrases.
>
> For instance, I have a database of keywords/keyphrases, which might
> contain
> several millions items. Now I need to find if document contains any of the
> keywords/phrases listed in that database.
>
> I was thinking on implementing finite-state machine, and use b-trees, so I
> will iterate document char by char and go down the tree unless I find some
> word or phrase which matches character sequence.
>
> I think Lucene is doing in the same way when performs searching, so may be
> I
> can use Lucene?
>
> --
> Eugene N Dzhurinsky
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14786_18392238.1155291091242--

From java-user-return-22642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 10:16:33 2006
Return-Path: <java-user-return-22642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89662 invoked from network); 11 Aug 2006 10:16:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 10:16:33 -0000
Received: (qmail 54147 invoked by uid 500); 11 Aug 2006 10:16:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54122 invoked by uid 500); 11 Aug 2006 10:16:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54108 invoked by uid 99); 11 Aug 2006 10:16:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 03:16:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [137.108.246.32] (HELO venus.open.ac.uk) (137.108.246.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 03:16:16 -0700
Received: from vostok.open.ac.uk ([137.108.140.139])
	by venus.open.ac.uk with esmtp (Exim 4.62)
	(envelope-from <J.Zhu@open.ac.uk>)
	id 1GBU38-0003ws-6I
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 11:15:30 +0100
Received: from EPPING-EVS1.open.ac.uk ([137.108.170.245]) by vostok.open.ac.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 11 Aug 2006 11:15:30 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6BD2F.1293217B"
Subject: Implementation of BM25 in Lucene
Date: Fri, 11 Aug 2006 11:15:29 +0100
Message-ID: <E0FEA5DF00E59E409F90C854A1B45BAA01470448@EPPING-EVS1.open.ac.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Implementation of BM25 in Lucene
Thread-Index: Aca9LxF8aqnh2q98S+24WkUmwEJ92w==
From: "J.Zhu" <J.Zhu@open.ac.uk>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Aug 2006 10:15:30.0206 (UTC) FILETIME=[12BBFBE0:01C6BD2F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6BD2F.1293217B
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I have seen previous discussions on the implementation of BM25 in
Lucene, and still do not know the current progress on this. Could
anybody give me some guidance on this? Such as some work has been done
or where to start working on this. Thanks!
=20
Jianhan

------_=_NextPart_001_01C6BD2F.1293217B--

From java-user-return-22643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 11:00:54 2006
Return-Path: <java-user-return-22643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4179 invoked from network); 11 Aug 2006 11:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 11:00:54 -0000
Received: (qmail 20288 invoked by uid 500); 11 Aug 2006 11:00:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19939 invoked by uid 500); 11 Aug 2006 11:00:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19928 invoked by uid 99); 11 Aug 2006 11:00:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 04:00:47 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 1F8C9D945DF
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 07:00:05 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Fri, 11 Aug 2006 07:00:05 -0400
X-Sasl-enc: wgmT+S5+ZhcO990/bIzpJ1MdaHKhMbOCStAmjqRVpczR 1155294002
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 0EC835F4E
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 07:00:01 -0400 (EDT)
Message-ID: <44DC632E.7010906@mikemccandless.com>
Date: Fri, 11 Aug 2006 06:59:58 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Field compression too slow
References: <d8050f240608100541m188b6116h67b343338c238e3b@mail.gmail.com>	 <44DBEC2E.5070001@mikemccandless.com> <d8050f240608102307v229c683bn6f9658911809d695@mail.gmail.com>
In-Reply-To: <d8050f240608102307v229c683bn6f9658911809d695@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I can share the data.. but it would be quicker for you to just pull out 
> some
> random text from anywhere you like.

OK, I hear you.  I'll pull together some test data ... thanks.

> Also.. upon reflection I'm not certain using compression inside the 
> index is
> really a valuable process without lazy loading anyway.  The time-cost of
> decompression when iterating hits reduces the overall effectiveness of the
> index.  This is obviously solved by lazy loading (for searches) and I am
> excited about this feature being added.  Obviously it depends on the
> use-case, but in mine I realised that storing large amounts of data in the
> index is just not the right way to do things.  So I changed my architecture
> so that the larger amounts of data are stored (and compressed) elsewhere,
> then brought back in when I need to update a document.
> 
> Of course all my problems would be solved if I had lazy loading AND field
> updating :)

Compleletely agreed!  Lazy loading & specific field selection on loading 
a doc, have been addressed ... but field updating in the presence of 
compressed fields hasn't yet been addressed (I think).  I'll raise this 
use case on the java-dev list.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 11:10:57 2006
Return-Path: <java-user-return-22644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6432 invoked from network); 11 Aug 2006 11:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 11:10:56 -0000
Received: (qmail 32535 invoked by uid 500); 11 Aug 2006 11:10:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32109 invoked by uid 500); 11 Aug 2006 11:10:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32097 invoked by uid 99); 11 Aug 2006 11:10:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 04:10:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.90.206.104] (HELO office.redwerk.com) (85.90.206.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 04:10:40 -0700
Received: from bofh by office.redwerk.com with local (Exim 4.63 (FreeBSD))
	(envelope-from <bofh@redwerk.com>)
	id 1GBUt4-0000ue-Rz
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 14:09:10 +0300
Date: Fri, 11 Aug 2006 14:09:10 +0300
From: Eugeny N Dzhurinsky <bofh@redwerk.com>
To: java-user@lucene.apache.org
Subject: Re: search document for keywords and keyphrases
Message-ID: <20060811110910.GA3505@office.redwerk.com>
References: <20060811073512.GC1584@office.redwerk.com> <d8050f240608110311r5ab06779vd9c490b1dc3bd50d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=koi8-r
Content-Disposition: inline
In-Reply-To: <d8050f240608110311r5ab06779vd9c490b1dc3bd50d@mail.gmail.com>
User-Agent: Mutt/1.5.12-2006-07-14
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, Aug 11, 2006 at 08:11:31PM +1000, Jason Polites wrote:
> Yes you could use lucene for this, but it may be overkill for your
> requirement.  If I understand you correctly, all you need to is find
> documents which match "any" of the words in your list?  Do you need to rank
> the results?   If not, it's probably easier just to create your own inverted
> index of the documents you need to search.  If you actually need to rank
> results, then lucene is probably easier as it does this for you.

No. I do have a single document. I need to know does this document contains
ANY of keywords listed in that database. Keyword may be single word or several
words separated by spaces.

As a result I need to get list of keywords from that database, which keywords 
exist in the document.

-- 
Eugene N Dzhurinsky

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 11:23:56 2006
Return-Path: <java-user-return-22645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8708 invoked from network); 11 Aug 2006 11:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 11:23:56 -0000
Received: (qmail 47014 invoked by uid 500); 11 Aug 2006 11:23:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46598 invoked by uid 500); 11 Aug 2006 11:23:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46587 invoked by uid 99); 11 Aug 2006 11:23:49 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of simon.willnauer@googlemail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 04:23:49 -0700
Received: by ug-out-1314.google.com with SMTP id y2so295004uge
        for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 04:22:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Kae9wPDOTaViFEK5jtaL/h6PTJ4cAFV9O1Dqmke6hKb8Ha8IEie4AFsU4i9ix5MrwYFNsyBy+N4Id7wuMNa3bQX/NrCB5rsdmAJ7cA84wf0tGbrxJlADV9h54gUYYAco9oWUUhZ/7b/GaD0hJaRMldnflhDTGOWV9LPhU/TfYXw=
Received: by 10.67.89.5 with SMTP id r5mr3894726ugl;
        Fri, 11 Aug 2006 04:22:26 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Fri, 11 Aug 2006 04:22:26 -0700 (PDT)
Message-ID: <f18c9dde0608110422m3c173a2cgc0d1416a3b49be02@mail.gmail.com>
Date: Fri, 11 Aug 2006 13:22:26 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: search document for keywords and keyphrases
In-Reply-To: <20060811110910.GA3505@office.redwerk.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060811073512.GC1584@office.redwerk.com>
	 <d8050f240608110311r5ab06779vd9c490b1dc3bd50d@mail.gmail.com>
	 <20060811110910.GA3505@office.redwerk.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sure you can do this.
You index your document with the keywords assigned to the document and
search with and Boolean Query to get all document having the keyword
1,2,...n-1,n. Just be aware that there are limitations to boolean
queries in lucene. see setMaxClauseCount(). which can be very memory
consuming. But I guess you will search for a small amounts of
keywords, do you?

regards simon

On 8/11/06, Eugeny N Dzhurinsky <bofh@redwerk.com> wrote:
> On Fri, Aug 11, 2006 at 08:11:31PM +1000, Jason Polites wrote:
> > Yes you could use lucene for this, but it may be overkill for your
> > requirement.  If I understand you correctly, all you need to is find
> > documents which match "any" of the words in your list?  Do you need to rank
> > the results?   If not, it's probably easier just to create your own inverted
> > index of the documents you need to search.  If you actually need to rank
> > results, then lucene is probably easier as it does this for you.
>
> No. I do have a single document. I need to know does this document contains
> ANY of keywords listed in that database. Keyword may be single word or several
> words separated by spaces.
>
> As a result I need to get list of keywords from that database, which keywords
> exist in the document.
>
> --
> Eugene N Dzhurinsky
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 11:40:59 2006
Return-Path: <java-user-return-22646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12377 invoked from network); 11 Aug 2006 11:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 11:40:59 -0000
Received: (qmail 68528 invoked by uid 500); 11 Aug 2006 11:40:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68493 invoked by uid 500); 11 Aug 2006 11:40:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68482 invoked by uid 99); 11 Aug 2006 11:40:53 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [85.90.206.104] (HELO office.redwerk.com) (85.90.206.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 04:40:52 -0700
Received: from bofh by office.redwerk.com with local (Exim 4.63 (FreeBSD))
	(envelope-from <bofh@redwerk.com>)
	id 1GBVMF-00010O-8T
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 14:39:19 +0300
Date: Fri, 11 Aug 2006 14:39:19 +0300
From: Eugeny N Dzhurinsky <bofh@redwerk.com>
To: java-user@lucene.apache.org
Subject: Re: search document for keywords and keyphrases
Message-ID: <20060811113919.GA3804@office.redwerk.com>
References: <20060811073512.GC1584@office.redwerk.com> <d8050f240608110311r5ab06779vd9c490b1dc3bd50d@mail.gmail.com> <20060811110910.GA3505@office.redwerk.com> <f18c9dde0608110422m3c173a2cgc0d1416a3b49be02@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=koi8-r
Content-Disposition: inline
In-Reply-To: <f18c9dde0608110422m3c173a2cgc0d1416a3b49be02@mail.gmail.com>
User-Agent: Mutt/1.5.12-2006-07-14
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, Aug 11, 2006 at 01:22:26PM +0200, Simon Willnauer wrote:
> Sure you can do this.
> You index your document with the keywords assigned to the document and
> search with and Boolean Query to get all document having the keyword
> 1,2,...n-1,n. Just be aware that there are limitations to boolean
> queries in lucene. see setMaxClauseCount(). which can be very memory
> consuming. 

Well, I don't understand whet do you mean "index your document with the
keywords assigned to the document". Thre is no keywords assigned to a
document. I was thinking in his way - may, is it possible to index the
database of keywords, and use entire document as search phrase?

Sould that find single words as well a phrases?

For example, if document contains a phrase

some things happens there

and there are entries in keywords database

some things
happens here
some things happens here

I will need to get all of these entries.

> But I guess you will search for a small amounts of
> keywords, do you?

This database could be VERY large, several millions of records.

-- 
Eugene N Dzhurinsky

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 12:05:51 2006
Return-Path: <java-user-return-22647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17772 invoked from network); 11 Aug 2006 12:05:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 12:05:51 -0000
Received: (qmail 3896 invoked by uid 500); 11 Aug 2006 12:05:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3469 invoked by uid 500); 11 Aug 2006 12:05:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3458 invoked by uid 99); 11 Aug 2006 12:05:43 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [202.43.219.5] (HELO web8313.mail.in.yahoo.com) (202.43.219.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Aug 2006 05:05:43 -0700
Received: (qmail 65569 invoked by uid 60001); 11 Aug 2006 12:03:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=OG2M3vltU8qZwn/rUnJsxdtfh1wjuRbsLK4WGCSTJuZ8ij5aP79C2jCAgQVajbdbrDYm8+QSbl9r43XqWqGLbmc3K0DZnQK5xtpTbUIUUAo1lW2wdaDM2NYzj/Lw/M+liL0uP+sQrCJWk1JV5O7PVHz3+EKD3ivhHKfW8cY+fZw=  ;
Message-ID: <20060811120319.65567.qmail@web8313.mail.in.yahoo.com>
Received: from [59.95.167.250] by web8313.mail.in.yahoo.com via HTTP; Fri, 11 Aug 2006 13:03:19 BST
Date: Fri, 11 Aug 2006 13:03:19 +0100 (BST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Hits DASL
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-176917318-1155297799=:61983"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-176917318-1155297799=:61983
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Dear All,
  How can i get the number of hits in a document from a DASL query result. I am using following Syntax.
   
  <?xml version=\"1.0\" encoding=\"utf-8\" ?>\n" +
  "<D:searchrequest xmlns:D =\"DAV:\" xmlns:S=\"http://jakarta.apache.org/slide/\">" +
  "<D:basicsearch>" +
  "<D:select>" +
  "<D:prop>" +
  "<D:getcontentlength/>" +
  "<D:displayname/>" +
  "</D:prop>" +
  "</D:select>" +
  "<D:from>" +
  "<D:scope>" +
  "<D:href>"+scope+"</D:href>"+
  "<D:depth>infinity</D:depth>" +
  "</D:scope>" +
  "</D:from>" +
  "<D:where>" +
  //Content Based Search
  "<D:contains>"+query+"</D:contains>"+
  "</D:where>" +
  "</D:basicsearch>" +
  "</D:searchrequest>";
   
  Where should i change

 				
---------------------------------
 Here’s a new way to find what you're looking for - Yahoo! Answers 
--0-176917318-1155297799=:61983--

From java-user-return-22648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 12:21:09 2006
Return-Path: <java-user-return-22648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21384 invoked from network); 11 Aug 2006 12:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 12:21:08 -0000
Received: (qmail 31823 invoked by uid 500); 11 Aug 2006 12:21:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31799 invoked by uid 500); 11 Aug 2006 12:21:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31785 invoked by uid 99); 11 Aug 2006 12:21:00 -0000
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of dragon-fly999@hotmail.com designates 65.54.246.205 as permitted sender)
Received: from [65.54.246.205] (HELO bay0-omc3-s5.bay0.hotmail.com) (65.54.246.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 05:20:59 -0700
Received: from hotmail.com ([207.46.9.103]) by bay0-omc3-s5.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 11 Aug 2006 05:19:39 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 11 Aug 2006 05:19:39 -0700
Message-ID: <BAY119-F23AE06035DBC4AA9C4C081B94B0@phx.gbl>
Received: from 207.46.9.123 by by119fd.bay119.hotmail.msn.com with HTTP;
	Fri, 11 Aug 2006 12:19:36 GMT
X-Originating-IP: [206.35.175.10]
X-Originating-Email: [dragon-fly999@hotmail.com]
X-Sender: dragon-fly999@hotmail.com
From: "Dragon Fly" <dragon-fly999@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: Re: Field compression too slow
Date: Fri, 11 Aug 2006 08:19:36 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 11 Aug 2006 12:19:39.0190 (UTC) FILETIME=[6AACBD60:01C6BD40]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mike, which version of Lucene supports lazy loading? Thanks.

>From: Michael McCandless <lucene@mikemccandless.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Field compression too slow
>Date: Fri, 11 Aug 2006 06:59:58 -0400
>
>
>>I can share the data.. but it would be quicker for you to just pull out 
>>some
>>random text from anywhere you like.
>
>OK, I hear you.  I'll pull together some test data ... thanks.
>
>>Also.. upon reflection I'm not certain using compression inside the index 
>>is
>>really a valuable process without lazy loading anyway.  The time-cost of
>>decompression when iterating hits reduces the overall effectiveness of the
>>index.  This is obviously solved by lazy loading (for searches) and I am
>>excited about this feature being added.  Obviously it depends on the
>>use-case, but in mine I realised that storing large amounts of data in the
>>index is just not the right way to do things.  So I changed my 
>>architecture
>>so that the larger amounts of data are stored (and compressed) elsewhere,
>>then brought back in when I need to update a document.
>>
>>Of course all my problems would be solved if I had lazy loading AND field
>>updating :)
>
>Compleletely agreed!  Lazy loading & specific field selection on loading a 
>doc, have been addressed ... but field updating in the presence of 
>compressed fields hasn't yet been addressed (I think).  I'll raise this use 
>case on the java-dev list.
>
>Mike
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 12:32:37 2006
Return-Path: <java-user-return-22649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25275 invoked from network); 11 Aug 2006 12:32:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 12:32:37 -0000
Received: (qmail 53997 invoked by uid 500); 11 Aug 2006 12:32:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53966 invoked by uid 500); 11 Aug 2006 12:32:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53955 invoked by uid 99); 11 Aug 2006 12:32:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 05:32:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 05:32:28 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1GBWBK-0002FR-2W
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 14:32:06 +0200
Message-ID: <44DC791A.2030800@tejnora.cz>
Date: Fri, 11 Aug 2006 14:33:30 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: updating document
References: <1155145453.2739.8.camel@localhost.localdomain>	 <359a92830608100616re219fe3la419623871885798@mail.gmail.com>	 <1155171673.3388.3.camel@localhost.localdomain>	 <d8050f240608100858h7b93b695nb027fb588ca2e901@mail.gmail.com>	 <1155230981.9137.4.camel@localhost.localdomain> <d8050f240608102323i6110fa70oa78ea72ca77f7d92@mail.gmail.com>
In-Reply-To: <d8050f240608102323i6110fa70oa78ea72ca77f7d92@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jason is right. I think, even Im not expert on lucene too, your newly 
added document cann't recreate terms for field with analyzer, because 
field text in empty.
There is very hairy solution - hack a IndexReader, FieldInfosWriter and 
use addIndexes.

Lucene is "only" a fulltext search library, not a datastore. I end up 
with the same design as he suggested - At beginning I choose to store 
fields in lucene index,
because lucene has no limit on fields length like DB2.

The Jason's strategy is very useful in all cases - *before adding 
document* to lucene index obtain an unique id from sequence (e. g. db) 
add document with
this synthetic id (e.g. field id and store it within index) and after 
add, save document *with id* (if it has not been saved yet) to xml or 
another storage.

Well, I haven't stored syn. ids with indexed documents and now I'm about 
to reassign them.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 12:39:32 2006
Return-Path: <java-user-return-22650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27317 invoked from network); 11 Aug 2006 12:39:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 12:39:32 -0000
Received: (qmail 64985 invoked by uid 500); 11 Aug 2006 12:39:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64965 invoked by uid 500); 11 Aug 2006 12:39:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64954 invoked by uid 99); 11 Aug 2006 12:39:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 05:39:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 05:39:22 -0700
Received: from [10.65.253.200] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15655BA4@mailer.syr.edu>; Fri, 11 Aug 2006 8:39:01 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <BAY119-F23AE06035DBC4AA9C4C081B94B0@phx.gbl>
References: <BAY119-F23AE06035DBC4AA9C4C081B94B0@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3A14EB2C-8D75-4FAA-AB5C-2DBCF098AF05@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: Field compression too slow
Date: Fri, 11 Aug 2006 08:39:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SVN Head does.  Has not been released yet.  	

See http://issues.apache.org/jira/browse/LUCENE-545
and
http://issues.apache.org/jira/browse/LUCENE-609

for some of the issues with it.

On Aug 11, 2006, at 8:19 AM, Dragon Fly wrote:

> Mike, which version of Lucene supports lazy loading? Thanks.
>
>> From: Michael McCandless <lucene@mikemccandless.com>
>> Reply-To: java-user@lucene.apache.org
>> To: java-user@lucene.apache.org
>> Subject: Re: Field compression too slow
>> Date: Fri, 11 Aug 2006 06:59:58 -0400
>>
>>
>>> I can share the data.. but it would be quicker for you to just  
>>> pull out some
>>> random text from anywhere you like.
>>
>> OK, I hear you.  I'll pull together some test data ... thanks.
>>
>>> Also.. upon reflection I'm not certain using compression inside  
>>> the index is
>>> really a valuable process without lazy loading anyway.  The time- 
>>> cost of
>>> decompression when iterating hits reduces the overall  
>>> effectiveness of the
>>> index.  This is obviously solved by lazy loading (for searches)  
>>> and I am
>>> excited about this feature being added.  Obviously it depends on the
>>> use-case, but in mine I realised that storing large amounts of  
>>> data in the
>>> index is just not the right way to do things.  So I changed my  
>>> architecture
>>> so that the larger amounts of data are stored (and compressed)  
>>> elsewhere,
>>> then brought back in when I need to update a document.
>>>
>>> Of course all my problems would be solved if I had lazy loading  
>>> AND field
>>> updating :)
>>
>> Compleletely agreed!  Lazy loading & specific field selection on  
>> loading a doc, have been addressed ... but field updating in the  
>> presence of compressed fields hasn't yet been addressed (I  
>> think).  I'll raise this use case on the java-dev list.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> _________________________________________________________________
> Express yourself instantly with MSN Messenger! Download today -  
> it's FREE! http://messenger.msn.click-url.com/go/onm00200471ave/ 
> direct/01/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 13:08:06 2006
Return-Path: <java-user-return-22651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34802 invoked from network); 11 Aug 2006 13:08:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 13:08:05 -0000
Received: (qmail 2876 invoked by uid 500); 11 Aug 2006 13:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2555 invoked by uid 500); 11 Aug 2006 13:07:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2544 invoked by uid 99); 11 Aug 2006 13:07:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 06:07:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of PrasenjitM@aol.com designates 64.12.137.1 as permitted sender)
Received: from [64.12.137.1] (HELO imo-m20.mx.aol.com) (64.12.137.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 06:07:57 -0700
Received: from PrasenjitM@aol.com
	by imo-m20.mx.aol.com (mail_out_v38_r7.6.) id h.2d8.28d6e780 (60475)
	 for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 09:07:26 -0400 (EDT)
Received: from  [10.146.145.238] (bdc31151l.in.office.aol.com [10.146.145.238]) by ciaaol-m03.mx.aol.com (v111.7) with ESMTP id MAILCIAAOLM034-ec3b44dc80fa33c; Fri, 11 Aug 2006 09:07:26 -0400
Message-ID: <44DC80FB.1030401@aol.com>
Date: Fri, 11 Aug 2006 18:37:07 +0530
From: Prasenjit Mukherjee <prasenjitm@aol.com>
User-Agent: Thunderbird 1.5 (X11/20060313)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: WIll storing  docs affect lucene's search performance ? 
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AOL-IP: 10.146.145.238
X-Mailer: Unknown (No Version)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a requirement ( use highlighter) to  store the doc content 
somewhere., and I am not allowed to use a RDBMS. I am thinking of using 
Lucene's Field with (Field.Store.YES and Field.Index.NO) to store the 
doc content. Will it have any negative affect on my search performance ? 

I think I have read somewhere that  Lucene shouldn't be used(or 
misused)  to provide RDBMS like storage.

--prasen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 13:15:40 2006
Return-Path: <java-user-return-22652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37454 invoked from network); 11 Aug 2006 13:15:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 13:15:39 -0000
Received: (qmail 18989 invoked by uid 500); 11 Aug 2006 13:15:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18960 invoked by uid 500); 11 Aug 2006 13:15:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18949 invoked by uid 99); 11 Aug 2006 13:15:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 06:15:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.240.10.4] (HELO pat.uio.no) (129.240.10.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 06:15:31 -0700
Received: from mail-mx3.uio.no ([129.240.10.44])
	by pat.uio.no with esmtp (Exim 4.43)
	id 1GBWr0-0003cE-69
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 15:15:10 +0200
Received: from f3bdhcp54.uio.no ([129.240.92.183])
	by mail-mx3.uio.no with esmtpsa (SSLv3:AES256-SHA:256)
	(Exim 4.43)
	id 1GBWqs-0003MK-4u
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 15:15:02 +0200
From: =?iso-8859-1?q?=D8yvind_Stegard?= <oyvind.stegard@usit.uio.no>
To: java-user@lucene.apache.org
Subject: Re: WIll storing  docs affect lucene's search performance ?
Date: Fri, 11 Aug 2006 15:15:59 +0200
User-Agent: KMail/1.9.4
References: <44DC80FB.1030401@aol.com>
In-Reply-To: <44DC80FB.1030401@aol.com>
Organization: University of Oslo, USIT
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200608111516.00076.oyvind.stegard@usit.uio.no>
X-UiO-Spam-info: not spam, SpamAssassin (score=-5.374, required 12,
	autolearn=disabled, AWL -0.37, UIO_MAIL_IS_INTERNAL -5.00)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 11 August 2006 15:07, Prasenjit Mukherjee wrote:
> I have a requirement ( use highlighter) to  store the doc content
> somewhere., and I am not allowed to use a RDBMS. I am thinking of using
> Lucene's Field with (Field.Store.YES and Field.Index.NO) to store the
> doc content. Will it have any negative affect on my search performance ?
>
> I think I have read somewhere that  Lucene shouldn't be used(or
> misused)  to provide RDBMS like storage.
We are using a stored binary version of every field we index in our content=
=20
repository implementation (mostly just primitive data types, though). I ask=
ed=20
a similar question earlier on this list. I'll just quote the reply I got=20
here:
> On 3/9/06, =D8yvind Stegard <oyvind.stegard@usit.uio.no> wrote:
> > - How does many stored fields eventually affect indexing/query
> > performance compared to if no fields were stored (only indexed) ?
>
> Additional stored fields should have no effect on querying (the
> internal information about a field is looked up in a hashmap).
>
> Additional stored fields that are used has an impact on indexing since
> that data must be copied every time segments are merged.
>
> Additional stored fields that are not used in most documents (sparse)
> should have very little performance impact on indexing. =A0The field
> list is walked a few times linearly (in-memory) during a segment
> merge, which should be very fast, but it's still O(n), so don't go
> crazy and have a million stored field types.
>
> > - Are there any known scalability issues with a large amount of distinct
> > fields in an index (not necessarily the same set of fields for every do=
c)
> > ?
>
> If they are indexed fields, yes.
> Each indexed field has a 1 byte norm *per document*, regardless of if
> the document contains that field. =A0In the current version of lucene,
> there is a way to omit these norms on a per field basis (see
> Field.setOmitNorms()) if you don't need length normalization or
> index-time field boosting.
>
> -Yonik
> http://incubator.apache.org/solr Solr, The Open Source Lucene Search Serv=
er

=D8yvind
=2D-=20
< =D8yvind Stegard < oyvind stegard at usit uio no >
 < SAUS/USIT, UiO

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 13:33:06 2006
Return-Path: <java-user-return-22653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48308 invoked from network); 11 Aug 2006 13:33:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 13:33:05 -0000
Received: (qmail 53558 invoked by uid 500); 11 Aug 2006 13:33:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53493 invoked by uid 500); 11 Aug 2006 13:33:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53480 invoked by uid 99); 11 Aug 2006 13:33:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 06:33:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 06:32:59 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CAE2430EFCD5; Fri, 11 Aug 2006 09:32:38 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id C6B2530EFCD5
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 09:32:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44DC146D.3070005@uni-hd.de>
References: <1155224989.4653.5.camel@localhost.localdomain> <359a92830608101033g77d03668qdf2c341dc882d8b4@mail.gmail.com> <44DC146D.3070005@uni-hd.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0E761FF7-465F-469C-8F13-B9E802BDB81C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Special characters
Date: Fri, 11 Aug 2006 09:32:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 11, 2006, at 1:23 AM, Martin Braun wrote:
> Hello Adrian,
>
>>> I am indexing some text in a java object that is "%772B" with the
>>> standard analyser and Lucene 2.
>>>
>>> Should I be able to search for this with the same text as the  
>>> query, or
>>> do I need to do any escaping of characters?
>
> Besides Luke there are the AnalyzerUtils from the LIA book, (you can
> download the source code examples here:
> http://www.lucenebook.com/LuceneInAction.zip

You can also try out analysis just using "ant AnalyzerDemo", like this:

$ ant AnalyzerDemo
Buildfile: build.xml

check-environment:

compile:

build-test-index:

build-perf-index:

prepare:

AnalyzerDemo:
      [echo]
      [echo]       Demonstrates analysis of sample text.
      [echo]
      [echo]       Refer to the "Analysis" chapter for much more on this
      [echo]       extremely crucial topic.
      [echo]
     [input] Press return to continue...

     [input] String to analyze: [This string will be analyzed.]
%772B
      [echo] Running lia.analysis.AnalyzerDemo...
      [java] Analyzing "%772B"
      [java]   WhitespaceAnalyzer:
      [java]     [%772B]

      [java]   SimpleAnalyzer:
      [java]     [b]

      [java]   StopAnalyzer:
      [java]     [b]

      [java]   StandardAnalyzer:
      [java]     [772b]


BUILD SUCCESSFUL
Total time: 7 seconds


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 14:14:23 2006
Return-Path: <java-user-return-22654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62352 invoked from network); 11 Aug 2006 14:14:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 14:14:22 -0000
Received: (qmail 25873 invoked by uid 500); 11 Aug 2006 14:14:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25849 invoked by uid 500); 11 Aug 2006 14:14:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25837 invoked by uid 99); 11 Aug 2006 14:14:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 07:14:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [206.190.53.32] (HELO smtp107.plus.mail.re2.yahoo.com) (206.190.53.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Aug 2006 07:14:14 -0700
Received: (qmail 36493 invoked from network); 11 Aug 2006 14:13:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.ar;
  h=Received:Received:Message-ID:From:To:Subject:Date:Organization:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE:Mime-Version:Content-Type;
  b=5bPJNbH5D3Xivm3tey5HGGMCuNYMsdi7voxhpLf7RPutTZzJFdFlDrBoubVidwMPJzKOdITqJyxcM6XIYQX2J2Lg2Oclw7TP/Mo53/zPXuAfJfEjzg6smrFDaL0QV/U2oHTYPwJz5HoHjnnwCcqoFJ2czvMA/f347Cdd4QYTswE=  ;
Received: from unknown (HELO ?192.168.0.2?) (gustavo?scrigna@201.231.90.180 with login)
  by smtp107.plus.mail.re2.yahoo.com with SMTP; 11 Aug 2006 14:13:52 -0000
Received: from 127.0.0.1 (AVG SMTP 7.1.405 [268.10.8/415]); Fri, 11 Aug 2006 11:13:57 -0300
Message-ID: <009c01c6bd50$6260c420$0200a8c0@hercules>
From: "Gustavo Scrigna" <gustavo_scrigna@yahoo.com.ar>
To: "lucene" <java-user@lucene.apache.org>
Subject: How can i Tokenize money values?
Date: Fri, 11 Aug 2006 11:13:56 -0300
Organization: The Java Team Co.
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="=======AVGMAIL-44DC90A50E48======="
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=======AVGMAIL-44DC90A50E48=======
Content-Type: multipart/alternative; boundary="----=_NextPart_000_0099_01C6BD37.3CD327C0"

------=_NextPart_000_0099_01C6BD37.3CD327C0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hello all!,
    How can i tokenize money values?=20
    Example: $25000, u$s45000, etc, so that i can search for "$25000" or =
"$250*"
    I think de "StandardTokenizer" class is the responsible for tokenize =
the content of the field based on the grammar generated by javaCC, the =
question is: I have to override the StandardTokenizer or i can use =
Filter's to solve this problem?

Thank's in advance!

    Gustavo //

------=_NextPart_000_0099_01C6BD37.3CD327C0
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<META content=3D"MSHTML 6.00.2900.2963" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>Hello all!,</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp; How can i tokenize =
money=20
values?&nbsp;</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp; Example: $25000, =
u$s45000, etc,=20
so that i can search for "$25000" or "$250*"</FONT></DIV>
<DIV><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp; I think de <FONT =
size=3D3><FONT=20
size=3D2>"</FONT><FONT face=3D"Times New Roman"><FONT face=3DArial=20
size=3D2>StandardTokenizer"</FONT><STRONG> </STRONG></FONT></FONT><FONT =
face=3DArial=20
size=3D2>class is the responsible for tokenize the content of the field =
based on=20
the grammar generated by javaCC, the question is: I have to override the =

StandardTokenizer or i can use Filter's to solve this=20
problem?</FONT></FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>Thank's in advance!</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp; Gustavo =
//</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV></BODY></HTML>

------=_NextPart_000_0099_01C6BD37.3CD327C0--
--=======AVGMAIL-44DC90A50E48=======
Content-Type: text/plain; x-avg=cert; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Content-Description: "AVG certification"

No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.10.8/415 - Release Date: 09/08/2006


--=======AVGMAIL-44DC90A50E48=======
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=======AVGMAIL-44DC90A50E48=======--

	
	
		
__________________________________________________
Preguntá. Respondé. Descubrí.
Todo lo que querías saber, y lo que ni imaginabas,
está en Yahoo! Respuestas (Beta).
¡Probalo ya! 
http://www.yahoo.com.ar/respuestas


From java-user-return-22655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 15:49:55 2006
Return-Path: <java-user-return-22655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94762 invoked from network); 11 Aug 2006 15:49:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 15:49:55 -0000
Received: (qmail 49208 invoked by uid 500); 11 Aug 2006 15:49:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49093 invoked by uid 500); 11 Aug 2006 15:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49036 invoked by uid 99); 11 Aug 2006 15:49:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 08:49:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [167.202.193.24] (HELO triton08-out.abnamro.nl) (167.202.193.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 08:49:44 -0700
Received: from aaamsr001.abnamro.com (aaamsr001 [10.124.6.13])
	by triton08-out.abnamro.nl (Postfix) with ESMTP id 61B8FCD56
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 17:49:23 +0200 (CEST)
Subject: Lucene/Tomcat Memory Leak Issue
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.3 September 14, 2004
From: adrena.keating@nl.abnamro.com
Message-ID: <OF381446C3.B1E2B6D8-ONC12571C7.00568AA6-C12571C7.0056EA98@abnamro.com>
Date: Fri, 11 Aug 2006 17:48:35 +0200
X-MIMETrack: Serialize by Router on AAAMSR001/HUB/ABNAMRO/NL(Release 6.5.4FP1|June 19, 2005) at
 08/11/2006 05:49:23 PM
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello, can anyone help?


We're experiencing the following issue an Widows Intranet website:


Following a Tomcat restart, our application has Lucene creating a single
new index in a RAMDirectory, followed by continuous creation of additional
index entries as new content is published.


During the initial index creation process, Heap Memory utilization jumps to
over 300 MB and never drops back down, even though the new index itself is
~15 MB in size. Then, as additional index entries are added, the Heap
Memory utilization continues to increase and garbage collection reduces in
size, until we max out the available Heap Memory and Tomcat crashes.


Relevant configuration items:
        Windows 2000 5.0
        4 Processors, 2GB RAM
        Tomcat 5.0.27
        JDK 1.5.0_06
        Lucene 1.9.1
        VM arguments:
                -Djava.io.tmpdir=D:\Appldata\Lucene\lockDir
                -Dorg.apache.lucene.commitLockTimeout=60000
                -Dorg.apache.lucene.writeLockTimeout=60000
                -XX:PermSize=256m
                -XX:MaxPermSize=512m
                -Xrs
                -Xms256m
                -Xmx1024m
                -Xss512k
        lucene.searcher.keep.open=true
        lucene.searcher.retries=6


Has anyone experienced similar conditions? Any suggestions?

Kind Regards
Adrena Keating



---------------------------------------------------------------------------
This message (including any attachments) is confidential and may be
privileged. If you have received it by mistake please notify the sender by
return e-mail and delete this message from your system. Any unauthorised
use or dissemination of this message in whole or in part is strictly
prohibited. Please note that e-mails are susceptible to change. ABN AMRO
Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
registered in the Commercial Register under number 33002587, including its
group companies, shall not be liable for the improper or incomplete
transmission of the information contained in this communication nor for any
delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
group companies) does not guarantee that the integrity of this
communication has been maintained nor that this communication is free of
viruses, interceptions or interference.
---------------------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 16:05:34 2006
Return-Path: <java-user-return-22656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99585 invoked from network); 11 Aug 2006 16:05:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 16:05:34 -0000
Received: (qmail 89177 invoked by uid 500); 11 Aug 2006 16:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89152 invoked by uid 500); 11 Aug 2006 16:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89140 invoked by uid 99); 11 Aug 2006 16:05:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 09:05:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 09:05:27 -0700
Received: from [10.65.253.201] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1565812E@mailer.syr.edu>; Fri, 11 Aug 2006 12:05:05 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44DC80FB.1030401@aol.com>
References: <44DC80FB.1030401@aol.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <917EE8D7-D5F6-4AC1-BB6E-FADD253EE655@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: WIll storing  docs affect lucene's search performance ? 
Date: Fri, 11 Aug 2006 12:05:04 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Large stored fields can affect performance when you are iterating  
over your hits (assuming you are not interested in the value of the  
stored field at that point in time) for a results display since all  
Fields are loaded when getting the Document.  The SVN trunk has a  
version of lazy loading that allows you to specify which fields are  
loaded and which ones are lazy, so you can avoid loading fields that  
a user will never view.

-Grant

On Aug 11, 2006, at 9:07 AM, Prasenjit Mukherjee wrote:

> I have a requirement ( use highlighter) to  store the doc content  
> somewhere., and I am not allowed to use a RDBMS. I am thinking of  
> using Lucene's Field with (Field.Store.YES and Field.Index.NO) to  
> store the doc content. Will it have any negative affect on my  
> search performance ?
> I think I have read somewhere that  Lucene shouldn't be used(or  
> misused)  to provide RDBMS like storage.
>
> --prasen
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 16:24:46 2006
Return-Path: <java-user-return-22657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4217 invoked from network); 11 Aug 2006 16:24:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 16:24:46 -0000
Received: (qmail 34316 invoked by uid 500); 11 Aug 2006 16:24:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34290 invoked by uid 500); 11 Aug 2006 16:24:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34269 invoked by uid 99); 11 Aug 2006 16:24:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 09:24:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.238.164.5] (HELO elvira.its.uu.se) (130.238.164.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 09:24:23 -0700
Received: by elvira.its.uu.se (Postfix, from userid 204)
	id E762B880; Fri, 11 Aug 2006 18:24:00 +0200 (MSZ)
Received: from elvira.its.uu.se(127.0.0.1) by elvira.its.uu.se via virus-scan 
	id s26686; Fri, 11 Aug 06 18:23:56 +0200
Received: from tyto.its.uu.se (tyto3.its.UU.SE [130.238.4.192])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	by elvira.its.uu.se (Postfix) with ESMTP id 4567A3E7
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 18:23:56 +0200 (MSZ)
Received: from localhost ([127.0.0.1])
	by tyto.its.uu.se with esmtp (Exim 4.50)
	id 1GBZng-0002hn-5M
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 18:23:56 +0200
Received: from defaultwatertownseattle.com (defaultwatertownseattle.com [64.221.112.114]) 
	by webmail.uu.se (IMP) with HTTP 
	for <rokol669@localhost>; Fri, 11 Aug 2006 16:23:56 +0000
Message-ID: <1155313436.44dcaf1c23624@webmail.uu.se>
Date: Fri, 11 Aug 2006 16:23:56 +0000
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
To: java-user@lucene.apache.org
Subject: Re: Lucene/Tomcat Memory Leak Issue
References: <OF381446C3.B1E2B6D8-ONC12571C7.00568AA6-C12571C7.0056EA98@abnamro.com>
In-Reply-To: <OF381446C3.B1E2B6D8-ONC12571C7.00568AA6-C12571C7.0056EA98@abnamro.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
User-Agent: Internet Messaging Program (IMP) 3.2.7
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How do you index your documents? Are you releasing old resources? Can you=
 use a
profiler to see referenced objects?

I've experienced the same problem when indexing xml files which were pars=
ed with
xalan, and the memory leak in that case was in xalan. Switching to saxon =
solved
the problems for us.

/Ronnie

Citerar adrena.keating@nl.abnamro.com:

>=20
> Hello, can anyone help?
>=20
>=20
> We're experiencing the following issue an Widows Intranet website:
>=20
>=20
> Following a Tomcat restart, our application has Lucene creating a singl=
e
> new index in a RAMDirectory, followed by continuous creation of additio=
nal
> index entries as new content is published.
>=20
>=20
> During the initial index creation process, Heap Memory utilization jump=
s to
> over 300 MB and never drops back down, even though the new index itself=
 is
> ~15 MB in size. Then, as additional index entries are added, the Heap
> Memory utilization continues to increase and garbage collection reduces=
 in
> size, until we max out the available Heap Memory and Tomcat crashes.
>=20
>=20
> Relevant configuration items:
>         Windows 2000 5.0
>         4 Processors, 2GB RAM
>         Tomcat 5.0.27
>         JDK 1.5.0_06
>         Lucene 1.9.1
>         VM arguments:
>                 -Djava.io.tmpdir=3DD:\Appldata\Lucene\lockDir
>                 -Dorg.apache.lucene.commitLockTimeout=3D60000
>                 -Dorg.apache.lucene.writeLockTimeout=3D60000
>                 -XX:PermSize=3D256m
>                 -XX:MaxPermSize=3D512m
>                 -Xrs
>                 -Xms256m
>                 -Xmx1024m
>                 -Xss512k
>         lucene.searcher.keep.open=3Dtrue
>         lucene.searcher.retries=3D6
>=20
>=20
> Has anyone experienced similar conditions? Any suggestions?
>=20
> Kind Regards
> Adrena Keating
>=20
>=20
>=20
> -----------------------------------------------------------------------=
----
> This message (including any attachments) is confidential and may be
> privileged. If you have received it by mistake please notify the sender=
 by
> return e-mail and delete this message from your system. Any unauthorise=
d
> use or dissemination of this message in whole or in part is strictly
> prohibited. Please note that e-mails are susceptible to change. ABN AMR=
O
> Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
> registered in the Commercial Register under number 33002587, including =
its
> group companies, shall not be liable for the improper or incomplete
> transmission of the information contained in this communication nor for=
 any
> delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or i=
ts
> group companies) does not guarantee that the integrity of this
> communication has been maintained nor that this communication is free o=
f
> viruses, interceptions or interference.
> -----------------------------------------------------------------------=
----
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 16:34:06 2006
Return-Path: <java-user-return-22658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7781 invoked from network); 11 Aug 2006 16:34:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 16:34:05 -0000
Received: (qmail 61724 invoked by uid 500); 11 Aug 2006 16:33:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61541 invoked by uid 500); 11 Aug 2006 16:33:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61530 invoked by uid 99); 11 Aug 2006 16:33:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 09:33:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kevindig@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 09:33:57 -0700
Received: by wr-out-0506.google.com with SMTP id 58so143817wri
        for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 09:33:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=tvtg/gk5oWs4WS9eFqzWNjZ9eogKkViljYiZokDmXYtc1AJrVFqPx78MpIroaFjloY9xIM/zC+++4Ub+O2YKfQ36Kuz9KyqC0udxijVEg5/L/2GwWlg6I9Oz3GSD/maLMRY7GYWuBiOFIPaM4KTiVne6za7pNrn33nQrHmQioa0=
Received: by 10.64.28.18 with SMTP id b18mr4255462qbb;
        Fri, 11 Aug 2006 09:33:35 -0700 (PDT)
Received: from ?192.168.1.28? ( [59.42.133.182])
        by mx.gmail.com with ESMTP id 15sm2557994nzo.2006.08.11.09.33.32;
        Fri, 11 Aug 2006 09:33:34 -0700 (PDT)
Message-ID: <44DCB14E.70808@gmail.com>
Date: Sat, 12 Aug 2006 00:33:18 +0800
From: kevin <kevindig@gmail.com>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: HELP: how to highlight the search key word in lucene's search results?
References: <8834A84C87A2C148AD46921BB8BFC97C021E57F0@S1SE1MAIL.emea1.ad.group> <359a92830608100611h4c4c58f4we1997b5a46f6bca@mail.gmail.com>
In-Reply-To: <359a92830608100611h4c4c58f4we1997b5a46f6bca@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
how to highlight the search key word in lucene's search results? pls 
give advise,thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 17:13:41 2006
Return-Path: <java-user-return-22659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21194 invoked from network); 11 Aug 2006 17:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 17:13:41 -0000
Received: (qmail 51579 invoked by uid 500); 11 Aug 2006 17:13:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51540 invoked by uid 500); 11 Aug 2006 17:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51527 invoked by uid 99); 11 Aug 2006 17:13:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 10:13:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.238.4.154] (HELO colibri.its.uu.se) (130.238.4.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 10:13:31 -0700
Received: by colibri.its.uu.se (Postfix, from userid 211)
	id 166B54B3; Fri, 11 Aug 2006 19:13:09 +0200 (DFT)
Received: from colibri.its.uu.se(127.0.0.1) by colibri.its.uu.se via virus-scan 
	id s14351; Fri, 11 Aug 06 19:13:02 +0200
Received: from tyto.its.uu.se (tyto.its.UU.SE [130.238.4.190])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	by colibri.its.uu.se (Postfix) with ESMTP id 4D0131F8
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 19:13:02 +0200 (DFT)
Received: from localhost ([127.0.0.1])
	by tyto.its.uu.se with esmtp (Exim 4.50)
	id 1GBaZB-0004a6-Vl
	for java-user@lucene.apache.org; Fri, 11 Aug 2006 19:13:02 +0200
Received: from defaultwatertownseattle.com (defaultwatertownseattle.com [64.221.112.114]) 
	by webmail.uu.se (IMP) with HTTP 
	for <rokol669@localhost>; Fri, 11 Aug 2006 17:13:01 +0000
Message-ID: <1155316381.44dcba9deb863@webmail.uu.se>
Date: Fri, 11 Aug 2006 17:13:01 +0000
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
To: java-user@lucene.apache.org
Subject: Re: HELP: how to highlight the search key word in lucene's search results?
References: <8834A84C87A2C148AD46921BB8BFC97C021E57F0@S1SE1MAIL.emea1.ad.group> <359a92830608100611h4c4c58f4we1997b5a46f6bca@mail.gmail.com> <44DCB14E.70808@gmail.com>
In-Reply-To: <44DCB14E.70808@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
User-Agent: Internet Messaging Program (IMP) 3.2.7
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is in the FAQ:
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-75566820ee94a425c7e2=
950ac61d24e405fbd914


Citerar kevin <kevindig@gmail.com>:

> Hi,
> how to highlight the search key word in lucene's search results? pls=20
> give advise,thanks!
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 18:36:50 2006
Return-Path: <java-user-return-22660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44141 invoked from network); 11 Aug 2006 18:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 18:36:50 -0000
Received: (qmail 22301 invoked by uid 500); 11 Aug 2006 18:36:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22277 invoked by uid 500); 11 Aug 2006 18:36:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22265 invoked by uid 99); 11 Aug 2006 18:36:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:36:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:36:43 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D5CCE5B774; Fri, 11 Aug 2006 11:36:15 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CA7B67F403
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 11:36:15 -0700 (PDT)
Date: Fri, 11 Aug 2006 11:36:15 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: NPE when sorting on a field that is missing from a doc
In-Reply-To: <047e01c6bc51$8a039020$2800a8c0@aconex.com>
Message-ID: <Pine.LNX.4.58.0608111134350.10034@hal.rescomp.berkeley.edu>
References: <047e01c6bc51$8a039020$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: we have recently noticed that doing a locale sensitive sort on a field that
: is missing from some docs causes an NPE inside the call to Collator#compare
: at FieldSortedHitQueue line 320 (Lucene 2.0 src):

: >From looking at the standard String, float and int sorting and reading
: LUCENE-406 I assume this in not expected behavior and that docs that do not
: include the field should be sorted to appear at the start of the list of
: results.

that is correct .. typically "no value" is interpreted as being the
"lowest possible value" (so in a reverse sort, they appear at the end of
the list and not the begining)

: Is this a know issue? If not I'll raise the issue and create a patch.

i havne't seen it mentioned before ... i'm guessing it is specific to the
"explicit Locale" String comparator.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 18:39:31 2006
Return-Path: <java-user-return-22661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44689 invoked from network); 11 Aug 2006 18:39:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 18:39:30 -0000
Received: (qmail 28700 invoked by uid 500); 11 Aug 2006 18:39:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28672 invoked by uid 500); 11 Aug 2006 18:39:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28661 invoked by uid 99); 11 Aug 2006 18:39:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:39:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 11:39:24 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F306B5B774; Fri, 11 Aug 2006 11:39:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EEDE37F403
	for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 11:39:03 -0700 (PDT)
Date: Fri, 11 Aug 2006 11:39:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Poor performance "race condition" in FieldSortedHitQueue
In-Reply-To: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>
Message-ID: <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: ... right, thanks, now I see what you mean. In other words, IndexReader
: provides the ability to read/iterate terms and docs, but caching the term
: values per doc is for a higher layer - this way keeping IndexReader simpler
: and maintainable. So I guess Oliver can continue with the change as he
: proposed it.

if any "heavy" changes were to be made to the way FieldCaches refrences
are handled (ie; being able to specify which FieldCacheImpl you want to
use) it would make more sense to put that in the Searcher API ... but even
then it might make sense to use a WeakHashRef on the IndexReader since
multiple IndexSearchers can refrence the same IndexReader.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 20:06:53 2006
Return-Path: <java-user-return-22662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81381 invoked from network); 11 Aug 2006 20:06:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 20:06:53 -0000
Received: (qmail 84729 invoked by uid 500); 11 Aug 2006 20:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84703 invoked by uid 500); 11 Aug 2006 20:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84690 invoked by uid 99); 11 Aug 2006 20:06:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:06:46 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 13:06:45 -0700
Received: by py-out-1112.google.com with SMTP id s49so321341pyc
        for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 13:06:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bBmsOzovaq+X32Nghhl6SPcgPmx76E+YQVgZYn+ETykQWVh/JxTMbDQgSjX8yYD5mRGbAg+14TSnsrLQeYsmRXZrFptlx5uLUHGS51MpFUwx/qiJgeP4BdC05YnYxnPGwQv9xxQhnP/bQwzK0aIa3bH0x1dkkTh45nrBmjA305I=
Received: by 10.35.60.15 with SMTP id n15mr6812009pyk;
        Fri, 11 Aug 2006 13:06:25 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Fri, 11 Aug 2006 13:06:24 -0700 (PDT)
Message-ID: <359a92830608111306p24f6edaar8d4fb66d2764188@mail.gmail.com>
Date: Fri, 11 Aug 2006 16:06:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can i Tokenize money values?
In-Reply-To: <009c01c6bd50$6260c420$0200a8c0@hercules>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_130924_1221544.1155326784989"
References: <009c01c6bd50$6260c420$0200a8c0@hercules>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_130924_1221544.1155326784989
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd do neither <G> You can look at other analyzers, WhitespaceAnalyzer comes
to mind, breaks on whitespace and leavs all special characters in. There are
several to choose from.

And, if you are indexing other fields and want them handled differently, use
a PerFieldAnalyzerWrapper.

Finally, you might consider indexing the same value in more than one field
for different purposes (e.g. searching/displaying).

Best
Erick

On 8/11/06, Gustavo Scrigna <gustavo_scrigna@yahoo.com.ar> wrote:
>
>  Hello all!,
>     How can i tokenize money values?
>     Example: $25000, u$s45000, etc, so that i can search for "$25000" or
> "$250*"
>     I think de "StandardTokenizer"* *class is the responsible for tokenize
> the content of the field based on the grammar generated by javaCC, the
> question is: I have to override the StandardTokenizer or i can use Filter's
> to solve this problem?
>
> Thank's in advance!
>
>     Gustavo //
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.405 / Virus Database: 268.10.8/415 - Release Date: 09/08/2006
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_130924_1221544.1155326784989--

From java-user-return-22663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 22:10:50 2006
Return-Path: <java-user-return-22663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10450 invoked from network); 11 Aug 2006 22:10:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 22:10:50 -0000
Received: (qmail 25066 invoked by uid 500); 11 Aug 2006 22:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25039 invoked by uid 500); 11 Aug 2006 22:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25021 invoked by uid 99); 11 Aug 2006 22:10:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:10:43 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:10:41 -0700
Received: by wx-out-0506.google.com with SMTP id s15so761097wxc
        for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 15:10:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=h4VIufC1xwQI1NS20YAE7xcMEHC3cufIajP6oV0BdpygtQzIaXJokQHi7phPIBDShbOwDXo72GaPLc8olgYHokHsExekzr4tJb8cj9c6oIIwZa3j59EJYMCmzwmkc49eH4lf74E98HI6iAP+BGy60zjvt205mNyx8KgeuVLrksw=
Received: by 10.70.32.13 with SMTP id f13mr5910992wxf;
        Fri, 11 Aug 2006 15:10:19 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 44sm3597620wri.2006.08.11.15.10.18;
        Fri, 11 Aug 2006 15:10:19 -0700 (PDT)
Message-ID: <44DD0057.1030606@gmail.com>
Date: Fri, 11 Aug 2006 18:10:31 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: 30 milllion+ docs on a single server
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com> <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've made a nice little archive application with lucene. I made it to 
handle our largest need: 2.5 million docs or so on a single server. Now 
the powers that be say: lets use it for a 30+ million document archive 
on a single server! (each doc size maybe 10k max...as small as a 1 or 
2k) Please tell me why we are in trouble...please tell me why we are 
not. I have tested up to 2 million docs without much trouble but 30 
million...the average search will include a sort on a field as 
well...can I search 30+ million docs with a sort? Man am I worried about 
that. Maybe the server will have 8 procs and 12 billion gigs of RAM. 
Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5 
or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds like 
too much of a load to me for a single server. Not that they care what I 
think...I only wrote the thing (man I hate my job, offer me a new one :) 
)...please...comments?

Cheers,

Miserable Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 22:34:11 2006
Return-Path: <java-user-return-22664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13435 invoked from network); 11 Aug 2006 22:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 22:34:11 -0000
Received: (qmail 49404 invoked by uid 500); 11 Aug 2006 22:34:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49053 invoked by uid 500); 11 Aug 2006 22:34:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49042 invoked by uid 99); 11 Aug 2006 22:34:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:34:05 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:34:03 -0700
Received: by wx-out-0506.google.com with SMTP id s15so764069wxc
        for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 15:33:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=TnokDh+3a3u6rtKux9Y82kaSiihRORJMhgptJ9Jt/QiaOwDD/ZhygjGrlLn6dV6G/2j/bnMOgES00sZNKqJp/F7FF7SgRmEVvDT1YU306kkWI2IPBBm8CRuLHZfp69/4oPROfyged2A5lqzR+uHYCtiqhbfErEcrCZAc8/Xiue8=
Received: by 10.70.42.15 with SMTP id p15mr1447843wxp;
        Fri, 11 Aug 2006 15:33:42 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 6sm3586832wrl.2006.08.11.15.33.41;
        Fri, 11 Aug 2006 15:33:42 -0700 (PDT)
Message-ID: <44DD05D5.8030306@gmail.com>
Date: Fri, 11 Aug 2006 18:33:57 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Highlighter
References: <009c01c6bd50$6260c420$0200a8c0@hercules> <359a92830608111306p24f6edaar8d4fb66d2764188@mail.gmail.com>
In-Reply-To: <359a92830608111306p24f6edaar8d4fb66d2764188@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Am I the only one that gets back a string missing the final character 
when using the highlighter and the null fragmenter? I always have to add 
the last character of what I have asked to be highlighted to what the 
highlighter returns when trying to hit highlight an entire 
document...anyone else every run into this?

cheers ( don't I wish i was British),

- mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 22:56:20 2006
Return-Path: <java-user-return-22665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18371 invoked from network); 11 Aug 2006 22:56:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 22:56:19 -0000
Received: (qmail 80768 invoked by uid 500); 11 Aug 2006 22:56:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80733 invoked by uid 500); 11 Aug 2006 22:56:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80721 invoked by uid 99); 11 Aug 2006 22:56:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:56:14 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hefest@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 15:56:13 -0700
Received: by py-out-1112.google.com with SMTP id s49so377267pyc
        for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 15:55:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LV8oZotV731hYa5a5csNLSv0OC/++yM/sVkvs2+4UdJoO9l+e4pHpmGapeSg2G/iPS4Uk0Z+zbedXw6OzvRUmYgY2V5GQJpNa68TbkoYXaUOUp4diKQ71fqgUMv+ZgB9a4RtDBZ3VhkNL3CJVguha71ZzMfhY4mH8KGFZD+Bdy4=
Received: by 10.35.121.2 with SMTP id y2mr7160583pym;
        Fri, 11 Aug 2006 15:55:53 -0700 (PDT)
Received: by 10.35.48.11 with HTTP; Fri, 11 Aug 2006 15:55:53 -0700 (PDT)
Message-ID: <d487eb8e0608111555ub5f1888u7c3ec1839c699b4@mail.gmail.com>
Date: Sat, 12 Aug 2006 00:55:53 +0200
From: "Tomi NA" <hefest@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
In-Reply-To: <44DD0057.1030606@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>
	 <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>
	 <44DD0057.1030606@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
> I've made a nice little archive application with lucene. I made it to
> handle our largest need: 2.5 million docs or so on a single server. Now
> the powers that be say: lets use it for a 30+ million document archive
> on a single server! (each doc size maybe 10k max...as small as a 1 or
> 2k) Please tell me why we are in trouble...please tell me why we are
> not. I have tested up to 2 million docs without much trouble but 30
> million...the average search will include a sort on a field as
> well...can I search 30+ million docs with a sort? Man am I worried about
> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
> Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5
> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds like
> too much of a load to me for a single server. Not that they care what I
> think...I only wrote the thing (man I hate my job, offer me a new one :)
> )...please...comments?
>
> Cheers,
>
> Miserable Mark

I don't really understand what you're so worried about. Either it'll
work well with the setup you have, or it won't. It's really the size
of it. ;)
Seriously, you have a number of relatively cheap possibilities at hand
to improve search performance: storing the index on a RAID 5 disk
array will let you read the indices very fast, using multicore CPUs,
adding memory and even if all that isn't good enough, you can always
use a small cluster (say, 4 nodes) of very, very inexpensive PCs
filled with a GB of RAM. You don't have to keep them inside the
regular UPS/backup/voult-protected area as the indices can always be
rebuilt (unlike e.g. data in transactional systems) and between 4 of
them they might cost like an entry-level server.
I'll let the experts speak now. :)

t.n.a.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 11 23:23:13 2006
Return-Path: <java-user-return-22666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26645 invoked from network); 11 Aug 2006 23:23:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2006 23:23:13 -0000
Received: (qmail 12416 invoked by uid 500); 11 Aug 2006 23:23:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12151 invoked by uid 500); 11 Aug 2006 23:23:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12133 invoked by uid 99); 11 Aug 2006 23:23:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 16:23:06 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 16:23:05 -0700
Received: by wx-out-0506.google.com with SMTP id s15so769105wxc
        for <java-user@lucene.apache.org>; Fri, 11 Aug 2006 16:22:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=A6PBGNOvI6HLaWzme1LAOxaUlek4eJ60MjU+c4UknnvZyqwn1b6IXn54myu2ZFHXatOg1AgNSkabyoSjW3Y6Dcf2+pdOG2/SsaolpRy4bqSOSrIbEHWX2Jmk4Uaaf2UqBoWTD+Z60bMPgo1G/qGoXl8Ro40jFI+h0q3Z8dOzWxA=
Received: by 10.70.125.2 with SMTP id x2mr5909318wxc;
        Fri, 11 Aug 2006 16:22:45 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 7sm2983865wrh.2006.08.11.16.22.43;
        Fri, 11 Aug 2006 16:22:44 -0700 (PDT)
Message-ID: <44DD1151.20800@gmail.com>
Date: Fri, 11 Aug 2006 19:22:57 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>	 <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>	 <44DD0057.1030606@gmail.com> <d487eb8e0608111555ub5f1888u7c3ec1839c699b4@mail.gmail.com>
In-Reply-To: <d487eb8e0608111555ub5f1888u7c3ec1839c699b4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tomi NA wrote:
> On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
>> I've made a nice little archive application with lucene. I made it to
>> handle our largest need: 2.5 million docs or so on a single server. Now
>> the powers that be say: lets use it for a 30+ million document archive
>> on a single server! (each doc size maybe 10k max...as small as a 1 or
>> 2k) Please tell me why we are in trouble...please tell me why we are
>> not. I have tested up to 2 million docs without much trouble but 30
>> million...the average search will include a sort on a field as
>> well...can I search 30+ million docs with a sort? Man am I worried about
>> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
>> Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5
>> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds like
>> too much of a load to me for a single server. Not that they care what I
>> think...I only wrote the thing (man I hate my job, offer me a new one :)
>> )...please...comments?
>>
>> Cheers,
>>
>> Miserable Mark
>
> I don't really understand what you're so worried about. Either it'll
> work well with the setup you have, or it won't. It's really the size
> of it. ;)
> Seriously, you have a number of relatively cheap possibilities at hand
> to improve search performance: storing the index on a RAID 5 disk
> array will let you read the indices very fast, using multicore CPUs,
> adding memory and even if all that isn't good enough, you can always
> use a small cluster (say, 4 nodes) of very, very inexpensive PCs
> filled with a GB of RAM. You don't have to keep them inside the
> regular UPS/backup/voult-protected area as the indices can always be
> rebuilt (unlike e.g. data in transactional systems) and between 4 of
> them they might cost like an entry-level server.
> I'll let the experts speak now. :)
>
> t.n.a.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Thanks for the tip...I am not too worried...I am miserable because I 
live in Dilbert land, not this particular incident. Spreading to 
multiple servers is a possibility but one I want to avoid...I wrote this 
app on the side since our current product is crap...it still needs a lot 
of work and thinking about distributing lucene at this point is a little 
much...I never even have time to work on this project as it is becuase I 
am currently tasked with porting the crap old project to Windows. I need 
to do a bunch to shore up what I have. No one cares though...they think 
that I have done nothing (or can't understand what I have done) while at 
the same time they want to use what I havn't done to do what I made it 
for as well as this new super archive of 30 million + docs...in the end 
I'll be looking for a new job...still curious about lucene scaling to 30 
million docs with a sort on every search though (yes I know the sort is 
cached...worries me too though...the sort will be on multiple and 
different fields depending no what the searcher wants...uggg...the size 
of the caches....)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 00:06:26 2006
Return-Path: <java-user-return-22667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34904 invoked from network); 12 Aug 2006 00:06:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 00:06:26 -0000
Received: (qmail 47205 invoked by uid 500); 12 Aug 2006 00:06:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47119 invoked by uid 500); 12 Aug 2006 00:06:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47108 invoked by uid 99); 12 Aug 2006 00:06:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 17:06:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.238.4.154] (HELO colibri.its.uu.se) (130.238.4.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Aug 2006 17:06:17 -0700
Received: by colibri.its.uu.se (Postfix, from userid 211)
	id 6288E50F; Sat, 12 Aug 2006 02:05:52 +0200 (DFT)
Received: from colibri.its.uu.se(127.0.0.1) by colibri.its.uu.se via virus-scan 
	id s14345; Sat, 12 Aug 06 02:05:48 +0200
Received: from tyto.its.uu.se (tyto.its.uu.se [130.238.4.190])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	by colibri.its.uu.se (Postfix) with ESMTP id 4BBA44E3
	for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 02:05:48 +0200 (DFT)
Received: from localhost ([127.0.0.1])
	by tyto.its.uu.se with esmtp (Exim 4.50)
	id 1GBh0e-0006Cn-0J
	for java-user@lucene.apache.org; Sat, 12 Aug 2006 02:05:48 +0200
Received: from defaultwatertownseattle.com (defaultwatertownseattle.com [64.221.112.114]) 
	by webmail.uu.se (IMP) with HTTP 
	for <rokol669@localhost>; Sat, 12 Aug 2006 00:05:47 +0000
Message-ID: <1155341147.44dd1b5bf1757@webmail.uu.se>
Date: Sat, 12 Aug 2006 00:05:47 +0000
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
To: java-user@lucene.apache.org
Subject: Re: Highlighter
References: <009c01c6bd50$6260c420$0200a8c0@hercules> <359a92830608111306p24f6edaar8d4fb66d2764188@mail.gmail.com> <44DD05D5.8030306@gmail.com>
In-Reply-To: <44DD05D5.8030306@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
User-Agent: Internet Messaging Program (IMP) 3.2.7
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There is an issue in JIRA, see http://issues.apache.org/jira/browse/LUCEN=
E-645

So I guess you're not the only one.

/Ronnie

Citerar Mark Miller <markrmiller@gmail.com>:

> Am I the only one that gets back a string missing the final character=20
> when using the highlighter and the null fragmenter? I always have to ad=
d=20
> the last character of what I have asked to be highlighted to what the=20
> highlighter returns when trying to hit highlight an entire=20
> document...anyone else every run into this?
>=20
> cheers ( don't I wish i was British),
>=20
> - mark
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 08:13:15 2006
Return-Path: <java-user-return-22668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24879 invoked from network); 12 Aug 2006 08:13:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 08:13:15 -0000
Received: (qmail 19881 invoked by uid 500); 12 Aug 2006 08:13:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19842 invoked by uid 500); 12 Aug 2006 08:13:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19831 invoked by uid 99); 12 Aug 2006 08:13:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 01:13:08 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_00_10,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.244] (HELO web50409.mail.yahoo.com) (206.190.38.244)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 12 Aug 2006 01:12:58 -0700
Received: (qmail 97854 invoked by uid 60001); 12 Aug 2006 08:12:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=xxtYRJweyrtFg6M5sW5A+4SmxtWI38JMbU+2Ut5DsW+AyAQu52EfcxvkKITdtlemlDovEUx0A7RKMirGA4PeUKp1yjklYfOiKr7tJHmLEDh3Pasksc0wrqVC+ae4nYKevtnVF6D5k9lj6UjnWRdduzD7kg+oMHJvpPLgAIyrlNA=  ;
Message-ID: <20060812081231.97852.qmail@web50409.mail.yahoo.com>
Received: from [82.99.196.156] by web50409.mail.yahoo.com via HTTP; Sat, 12 Aug 2006 01:12:30 PDT
Date: Sat, 12 Aug 2006 01:12:30 -0700 (PDT)
From: Shaghayegh Sahebie <shaghayegh_sahebie@yahoo.com>
Subject: Indexing Documents which has Attachments and are Refered many times!!
To: Lucene Java_user <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1579534443-1155370350=:87978"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1579534443-1155370350=:87978
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi all;
We have got a Document management system and we want to build a search on it. We have tree kind of content in our system: Refers, Documents and Attachments. A document can have multiple attachments and can be Refered to many users.
Our users want to be able to search on documents attachments and refers. for example they want to search the Documents which are created at "2006/07/06" date and have the word "Lucene" in it or their Refers and are Refered to Mr.x.
Our users want to be ale to search in all 8 possible selections of Document, Refer and Attachment, I mean they want to be able to search just in Refers, in both Refers and Documents, ...
How can we handle it? 
I thaught to store diferent kinds of Docs in a DB, search in the DB at first and search in Lucene based on DB results and phrases given to search (Handling Document, Refer or Attachments parts in a DB search). But the DB results maybe so big and i don't know if a Lucene query can have these much of search Terms.
Another way is to Index each document, refer and attachment in the index 8 times(all the possible selections of Refer, Document and Attachment) but this way has lots of redundancy even more than 8 times! 'cause each Document is indexed "8 * Refer number of Document" times.
I really don't know what to do, Any suggestions Please?

Thanks in advance

 			
---------------------------------
Do you Yahoo!?
 Everyone is raving about the  all-new Yahoo! Mail Beta.
--0-1579534443-1155370350=:87978--

From java-user-return-22669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 16:03:15 2006
Return-Path: <java-user-return-22669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26157 invoked from network); 12 Aug 2006 16:03:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 16:03:14 -0000
Received: (qmail 32579 invoked by uid 500); 12 Aug 2006 16:03:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31849 invoked by uid 500); 12 Aug 2006 16:03:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31838 invoked by uid 99); 12 Aug 2006 16:03:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:03:09 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:03:01 -0700
Received: by nf-out-0910.google.com with SMTP id p48so1339309nfa
        for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 09:02:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HxqBti1TYdrAD0DDvpKc3xOOA8Vw3DsY6sXqG4x8zQI24xJ1tFDF+1k1OPLwVGCJhmR6LT4UOWUocWHNyIrBEkXz43ejlqBqqO3O4VkFbNuTZKoY1m1E0czMBqWoNt4dt0CENnH/z+cYL9sqJwyaxiTbYf8y+cq3uNhk0kAZUs4=
Received: by 10.82.105.16 with SMTP id d16mr425423buc;
        Sat, 12 Aug 2006 09:02:33 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Sat, 12 Aug 2006 09:02:33 -0700 (PDT)
Message-ID: <d8050f240608120902l67cf0504k9213fc636c4a290b@mail.gmail.com>
Date: Sun, 13 Aug 2006 02:02:33 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Documents which has Attachments and are Refered many times!!
In-Reply-To: <20060812081231.97852.qmail@web50409.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_853_17010735.1155398553393"
References: <20060812081231.97852.qmail@web50409.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_853_17010735.1155398553393
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Maybe I'm not understanding your requirement, but this should be fairly
simple in Lucene.

Each document in your document management system would be represented by a
single Lucene document in the index.  Each lucene document will then have
several fields, each field representing the values of the "meta data"
associated with your document in the document management system.

For example:

Lets say you have a document which has the following structure:

Title: Sample Document
Date: 01/01/2006
Attachment: Some attachment (this is the content of the attachment)
Attachment: Some other attachment
Refers: Mr X
Refers: Mr Y

Your Lucene document would have the same structure.  All of these items in
your "real" document would simply be Fields in the lucene document.

In the case of your attachments, you could also consider indexing them
separately (as well).  This way users could search for attachments without
needing the documents to which they are attached.

If your attachments ARE documents (that is, your just have a foreign key
style relationship between two documents), then you would simple index each
"real" document as a separate document in lucene and add some sort of
reference field which contains the ID of all related documents.

For Example:
-------------------
ID: 123
Title: Sample Document
Date: 01/01/2006
Attachment: 456
Attachment: 789
Refers: Mr X
Refers: Mr Y
--------------------
ID: 456
Title: Other Document
Date:.. etc etc...

The one thing to be mindful of is re-indexing existing documents.  If you
have document that is already indexed and you want to make a change (eg you
want to add a new "refers" value), then you need to re-index the entire
document.  This means you need to either "store" all fields you want to keep
during re-indexing (which is typically all of them), or you need to re-index
the document from its source. Storing all the data in the index can have
adverse effects on the performance of the index however. (hope this makes
sense).



On 8/12/06, Shaghayegh Sahebie <shaghayegh_sahebie@yahoo.com> wrote:
>
> Hi all;
> We have got a Document management system and we want to build a search on
> it. We have tree kind of content in our system: Refers, Documents and
> Attachments. A document can have multiple attachments and can be Refered to
> many users.
> Our users want to be able to search on documents attachments and refers.
> for example they want to search the Documents which are created at
> "2006/07/06" date and have the word "Lucene" in it or their Refers and are
> Refered to Mr.x.
> Our users want to be ale to search in all 8 possible selections of
> Document, Refer and Attachment, I mean they want to be able to search just
> in Refers, in both Refers and Documents, ...
> How can we handle it?
> I thaught to store diferent kinds of Docs in a DB, search in the DB at
> first and search in Lucene based on DB results and phrases given to search
> (Handling Document, Refer or Attachments parts in a DB search). But the DB
> results maybe so big and i don't know if a Lucene query can have these much
> of search Terms.
> Another way is to Index each document, refer and attachment in the index 8
> times(all the possible selections of Refer, Document and Attachment) but
> this way has lots of redundancy even more than 8 times! 'cause each Document
> is indexed "8 * Refer number of Document" times.
> I really don't know what to do, Any suggestions Please?
>
> Thanks in advance
>
>
> ---------------------------------
> Do you Yahoo!?
> Everyone is raving about the  all-new Yahoo! Mail Beta.
>

------=_Part_853_17010735.1155398553393--

From java-user-return-22670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 16:13:00 2006
Return-Path: <java-user-return-22670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28670 invoked from network); 12 Aug 2006 16:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 16:13:00 -0000
Received: (qmail 43302 invoked by uid 500); 12 Aug 2006 16:12:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43271 invoked by uid 500); 12 Aug 2006 16:12:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43260 invoked by uid 99); 12 Aug 2006 16:12:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:12:54 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:12:44 -0700
Received: by nf-out-0910.google.com with SMTP id p48so1341920nfa
        for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 09:12:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H8A8e9FnyjU/mVzqlhmqfgLQlXNryv280NMyayAvXvPoupewr5MPO7N448G5Ujrp7ZLafuZDb34bsV6xCPHIqFJrA9b0zi8bYvR3PquOedZNE8cfhU17Fr5kHZLq396Uhi7oe8Lyna32GSU2sp+rZPwKPjaCEU6RktUZa57crpg=
Received: by 10.82.112.4 with SMTP id k4mr430536buc;
        Sat, 12 Aug 2006 09:12:16 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Sat, 12 Aug 2006 09:12:16 -0700 (PDT)
Message-ID: <d8050f240608120912j36f756beh2cf7927fd68d37e8@mail.gmail.com>
Date: Sun, 13 Aug 2006 02:12:16 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WIll storing docs affect lucene's search performance ?
In-Reply-To: <917EE8D7-D5F6-4AC1-BB6E-FADD253EE655@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_933_26259518.1155399136045"
References: <44DC80FB.1030401@aol.com>
	 <917EE8D7-D5F6-4AC1-BB6E-FADD253EE655@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_933_26259518.1155399136045
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

IMO you should avoid storing any data in the index that you don't need for
display.  Lucene is an index (and a damn good one), not a database.  If you
find yourself storing large amounts of data in the index, this could be an
indication that you may need to re-think your architecture.

In its simplest case, data storage is for storing data. Lucene is for
indexing the data and searching it.

You will certainly see performance implications with storing data in the
index, particularly if you elect to have the data compressed by lucene.  The
lazy loading in the current trunk will help enormously with this (great work
by the dev team), but I would still encourage you to design a system in
which lucene is not the primary source of data.  That is, if you need to
re-index, get the data from its source location (or some interim location)
rather than relying on storing it in lucene.

I had all sorts of struggles with this very issue, and after several failed
attempts came to the conclusion that whilst Lucene often forms a critical
part of a good solution, it should only be used as an index/search tool..
not a database.


On 8/12/06, Grant Ingersoll <gsingers@syr.edu> wrote:
>
>
> Large stored fields can affect performance when you are iterating
> over your hits (assuming you are not interested in the value of the
> stored field at that point in time) for a results display since all
> Fields are loaded when getting the Document.  The SVN trunk has a
> version of lazy loading that allows you to specify which fields are
> loaded and which ones are lazy, so you can avoid loading fields that
> a user will never view.
>
> -Grant
>
> On Aug 11, 2006, at 9:07 AM, Prasenjit Mukherjee wrote:
>
> > I have a requirement ( use highlighter) to  store the doc content
> > somewhere., and I am not allowed to use a RDBMS. I am thinking of
> > using Lucene's Field with (Field.Store.YES and Field.Index.NO) to
> > store the doc content. Will it have any negative affect on my
> > search performance ?
> > I think I have read somewhere that  Lucene shouldn't be used(or
> > misused)  to provide RDBMS like storage.
> >
> > --prasen
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
> Voice: 315-443-5484
> Skype: grant_ingersoll
> Fax: 315-443-6886
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_933_26259518.1155399136045--

From java-user-return-22671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 16:23:38 2006
Return-Path: <java-user-return-22671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30931 invoked from network); 12 Aug 2006 16:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 16:23:38 -0000
Received: (qmail 55258 invoked by uid 500); 12 Aug 2006 16:23:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54830 invoked by uid 500); 12 Aug 2006 16:23:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54818 invoked by uid 99); 12 Aug 2006 16:23:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:23:33 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:23:25 -0700
Received: by nf-out-0910.google.com with SMTP id p48so1344216nfa
        for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 09:22:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oDE1u8CHt6I60+98fh4QC0YgyrimxLI5U/pi6MBmRsY88K3Jls51EUWd8sL2JBFjz6ufmZ/KJc6GAPsNvxAwv4D8Afcag1+eTtVjoQ83mY3xihYNq6cuQe5CHHP56AQT/swrZsYVPCRpgwJiPOPoTPH6r0yL/pydRT3Ild097wk=
Received: by 10.82.123.16 with SMTP id v16mr429379buc;
        Sat, 12 Aug 2006 09:22:57 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Sat, 12 Aug 2006 09:22:57 -0700 (PDT)
Message-ID: <d8050f240608120922l3fb62b62v8d92d3f5b7469c35@mail.gmail.com>
Date: Sun, 13 Aug 2006 02:22:57 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
In-Reply-To: <44DD1151.20800@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_973_21857646.1155399777508"
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>
	 <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>
	 <44DD0057.1030606@gmail.com>
	 <d487eb8e0608111555ub5f1888u7c3ec1839c699b4@mail.gmail.com>
	 <44DD1151.20800@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_973_21857646.1155399777508
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sounds like you're a bit frustrated.  Cheer up, the simple fact is that
engineering and business rarely see eye-to-eye.  Just focus on the fact that
what you have learnt from the process will help you, and they paid for it ;)

On the issue at hand...Lucene should scale to this level, but you need a
good architecture behind it.  Google has good indexing tech, but it's their
architecture that allows them to spread the index across thousands of
servers which really gives it grunt (to the point that they invented their
own RAID-style file system).

Just think very carefully about the architecture underpinning the index.
Lucene is core-tech.  It's up to you to provide the framework to make it
hum.

On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> Tomi NA wrote:
> > On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
> >> I've made a nice little archive application with lucene. I made it to
> >> handle our largest need: 2.5 million docs or so on a single server. Now
> >> the powers that be say: lets use it for a 30+ million document archive
> >> on a single server! (each doc size maybe 10k max...as small as a 1 or
> >> 2k) Please tell me why we are in trouble...please tell me why we are
> >> not. I have tested up to 2 million docs without much trouble but 30
> >> million...the average search will include a sort on a field as
> >> well...can I search 30+ million docs with a sort? Man am I worried
> about
> >> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
> >> Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5
> >> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds
> like
> >> too much of a load to me for a single server. Not that they care what I
> >> think...I only wrote the thing (man I hate my job, offer me a new one
> :)
> >> )...please...comments?
> >>
> >> Cheers,
> >>
> >> Miserable Mark
> >
> > I don't really understand what you're so worried about. Either it'll
> > work well with the setup you have, or it won't. It's really the size
> > of it. ;)
> > Seriously, you have a number of relatively cheap possibilities at hand
> > to improve search performance: storing the index on a RAID 5 disk
> > array will let you read the indices very fast, using multicore CPUs,
> > adding memory and even if all that isn't good enough, you can always
> > use a small cluster (say, 4 nodes) of very, very inexpensive PCs
> > filled with a GB of RAM. You don't have to keep them inside the
> > regular UPS/backup/voult-protected area as the indices can always be
> > rebuilt (unlike e.g. data in transactional systems) and between 4 of
> > them they might cost like an entry-level server.
> > I'll let the experts speak now. :)
> >
> > t.n.a.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> Thanks for the tip...I am not too worried...I am miserable because I
> live in Dilbert land, not this particular incident. Spreading to
> multiple servers is a possibility but one I want to avoid...I wrote this
> app on the side since our current product is crap...it still needs a lot
> of work and thinking about distributing lucene at this point is a little
> much...I never even have time to work on this project as it is becuase I
> am currently tasked with porting the crap old project to Windows. I need
> to do a bunch to shore up what I have. No one cares though...they think
> that I have done nothing (or can't understand what I have done) while at
> the same time they want to use what I havn't done to do what I made it
> for as well as this new super archive of 30 million + docs...in the end
> I'll be looking for a new job...still curious about lucene scaling to 30
> million docs with a sort on every search though (yes I know the sort is
> cached...worries me too though...the sort will be on multiple and
> different fields depending no what the searcher wants...uggg...the size
> of the caches....)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_973_21857646.1155399777508--

From java-user-return-22672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 16:34:39 2006
Return-Path: <java-user-return-22672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33182 invoked from network); 12 Aug 2006 16:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 16:34:39 -0000
Received: (qmail 63744 invoked by uid 500); 12 Aug 2006 16:34:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63716 invoked by uid 500); 12 Aug 2006 16:34:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63705 invoked by uid 99); 12 Aug 2006 16:34:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:34:33 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 09:34:26 -0700
Received: by nf-out-0910.google.com with SMTP id p48so1346594nfa
        for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 09:33:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SjKD4pMg8M+szeIpzgtvJcTiwAqr7z8ToKqCu7OgmOw53bFXzNErnRgBbLS6lluWHF5FUqs/1wfS8X0MsVxb9dNFTyI+PgFam7EKyuCqfCREjJ5cRqAXU+0jdJUMmfrfYPj05idZ2g7sLfwGcJyTAf2QBaA8eI/zBp/wWXqLG6c=
Received: by 10.82.123.16 with SMTP id v16mr429585buc;
        Sat, 12 Aug 2006 09:33:58 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Sat, 12 Aug 2006 09:33:58 -0700 (PDT)
Message-ID: <d8050f240608120933v7bc6019fm39d01197c2d1bc23@mail.gmail.com>
Date: Sun, 13 Aug 2006 02:33:58 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: updating document
In-Reply-To: <44DC791A.2030800@tejnora.cz>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1041_29441309.1155400438236"
References: <1155145453.2739.8.camel@localhost.localdomain>
	 <359a92830608100616re219fe3la419623871885798@mail.gmail.com>
	 <1155171673.3388.3.camel@localhost.localdomain>
	 <d8050f240608100858h7b93b695nb027fb588ca2e901@mail.gmail.com>
	 <1155230981.9137.4.camel@localhost.localdomain>
	 <d8050f240608102323i6110fa70oa78ea72ca77f7d92@mail.gmail.com>
	 <44DC791A.2030800@tejnora.cz>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1041_29441309.1155400438236
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This strategy can also be nicely abstracted from your main app.  Whilst I
haven't yet implemented it, my plan is to create a template style structure
which tells me which fields are in lucene, and which are externalized.  This
way I don't bother storing data in lucene that it stored elsewhere, but I
also don't bother storing data elsewhere that is available in lucene.

Of course I always have the source data from which I can do a total re-index
if necessary.  The end result is an abstraction of a "document" which (by
using a template) will automatically retrieve data from the index or from
external storage based on the meta information in the template.  This means
the app that uses the index no longer cares where the data is, and it can
re-index whenever it likes with confidence that everything will be handled
appropriately.

Unfortunately you may have transactional problems with this approach.  That
is, if you write to lucene and in the same logical transaction you write to
external storage you may have atomicity problems if one of these actions
fails.  But you can't have everything!

As long as you can "fix" the index if it gets out of sync you should be ok.

On 8/11/06, Karel Tejnora <karel@tejnora.cz> wrote:
>
> Jason is right. I think, even Im not expert on lucene too, your newly
> added document cann't recreate terms for field with analyzer, because
> field text in empty.
> There is very hairy solution - hack a IndexReader, FieldInfosWriter and
> use addIndexes.
>
> Lucene is "only" a fulltext search library, not a datastore. I end up
> with the same design as he suggested - At beginning I choose to store
> fields in lucene index,
> because lucene has no limit on fields length like DB2.
>
> The Jason's strategy is very useful in all cases - *before adding
> document* to lucene index obtain an unique id from sequence (e. g. db)
> add document with
> this synthetic id (e.g. field id and store it within index) and after
> add, save document *with id* (if it has not been saved yet) to xml or
> another storage.
>
> Well, I haven't stored syn. ids with indexed documents and now I'm about
> to reassign them.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1041_29441309.1155400438236--

From java-user-return-22673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 17:07:32 2006
Return-Path: <java-user-return-22673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39973 invoked from network); 12 Aug 2006 17:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 17:07:31 -0000
Received: (qmail 85474 invoked by uid 500); 12 Aug 2006 17:07:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85442 invoked by uid 500); 12 Aug 2006 17:07:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85431 invoked by uid 99); 12 Aug 2006 17:07:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 10:07:26 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saturnism@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 10:07:18 -0700
Received: by py-out-1112.google.com with SMTP id s49so700626pyc
        for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 10:06:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=V+BTbkro/fBlnXvQayMuNfOct/+AZHGxg4wRcFGFYY9wZLzmbVUK38Zi5YDvAJrAkBCnqvHKqYR8mCZC0r3/Z5neEQTMPL1FFjOjUMy5C4Ne3AIaDlhwf1qUtw075TaROiX9oyXG/zzheBhs6nOxAngk87KAPUjQIZTdiDyQfUw=
Received: by 10.35.49.1 with SMTP id b1mr8845854pyk;
        Sat, 12 Aug 2006 10:06:51 -0700 (PDT)
Received: by 10.35.48.3 with HTTP; Sat, 12 Aug 2006 10:06:51 -0700 (PDT)
Message-ID: <fb9748c90608121006h766e1b78we85f05b48d0f25eb@mail.gmail.com>
Date: Sat, 12 Aug 2006 10:06:51 -0700
From: "Ray Tsang" <saturnism@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
In-Reply-To: <d8050f240608120922l3fb62b62v8d92d3f5b7469c35@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175895_26300570.1155402411450"
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>
	 <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>
	 <44DD0057.1030606@gmail.com>
	 <d487eb8e0608111555ub5f1888u7c3ec1839c699b4@mail.gmail.com>
	 <44DD1151.20800@gmail.com>
	 <d8050f240608120922l3fb62b62v8d92d3f5b7469c35@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_175895_26300570.1155402411450
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i've indexed 80m records and now up to 200m.. it can be done, and could've
been done better.  like the other said, architecture is important.  have you
considered looking into solr?  i haven't kept up with it (and many of the
mailing lists...), but looks very interesting.

ray,

On 8/12/06, Jason Polites <jason.polites@gmail.com> wrote:
>
> Sounds like you're a bit frustrated.  Cheer up, the simple fact is that
> engineering and business rarely see eye-to-eye.  Just focus on the fact
> that
> what you have learnt from the process will help you, and they paid for it
> ;)
>
> On the issue at hand...Lucene should scale to this level, but you need a
> good architecture behind it.  Google has good indexing tech, but it's
> their
> architecture that allows them to spread the index across thousands of
> servers which really gives it grunt (to the point that they invented their
> own RAID-style file system).
>
> Just think very carefully about the architecture underpinning the index.
> Lucene is core-tech.  It's up to you to provide the framework to make it
> hum.
>
> On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
> >
> > Tomi NA wrote:
> > > On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
> > >> I've made a nice little archive application with lucene. I made it to
> > >> handle our largest need: 2.5 million docs or so on a single server.
> Now
> > >> the powers that be say: lets use it for a 30+ million document
> archive
> > >> on a single server! (each doc size maybe 10k max...as small as a 1 or
> > >> 2k) Please tell me why we are in trouble...please tell me why we are
> > >> not. I have tested up to 2 million docs without much trouble but 30
> > >> million...the average search will include a sort on a field as
> > >> well...can I search 30+ million docs with a sort? Man am I worried
> > about
> > >> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
> > >> Mabye. Even still, Tomcat seems to be able to launch with a max of
> 1.5
> > >> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds
> > like
> > >> too much of a load to me for a single server. Not that they care what
> I
> > >> think...I only wrote the thing (man I hate my job, offer me a new one
> > :)
> > >> )...please...comments?
> > >>
> > >> Cheers,
> > >>
> > >> Miserable Mark
> > >
> > > I don't really understand what you're so worried about. Either it'll
> > > work well with the setup you have, or it won't. It's really the size
> > > of it. ;)
> > > Seriously, you have a number of relatively cheap possibilities at hand
> > > to improve search performance: storing the index on a RAID 5 disk
> > > array will let you read the indices very fast, using multicore CPUs,
> > > adding memory and even if all that isn't good enough, you can always
> > > use a small cluster (say, 4 nodes) of very, very inexpensive PCs
> > > filled with a GB of RAM. You don't have to keep them inside the
> > > regular UPS/backup/voult-protected area as the indices can always be
> > > rebuilt (unlike e.g. data in transactional systems) and between 4 of
> > > them they might cost like an entry-level server.
> > > I'll let the experts speak now. :)
> > >
> > > t.n.a.
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > Thanks for the tip...I am not too worried...I am miserable because I
> > live in Dilbert land, not this particular incident. Spreading to
> > multiple servers is a possibility but one I want to avoid...I wrote this
> > app on the side since our current product is crap...it still needs a lot
> > of work and thinking about distributing lucene at this point is a little
> > much...I never even have time to work on this project as it is becuase I
> > am currently tasked with porting the crap old project to Windows. I need
> > to do a bunch to shore up what I have. No one cares though...they think
> > that I have done nothing (or can't understand what I have done) while at
> > the same time they want to use what I havn't done to do what I made it
> > for as well as this new super archive of 30 million + docs...in the end
> > I'll be looking for a new job...still curious about lucene scaling to 30
> > million docs with a sort on every search though (yes I know the sort is
> > cached...worries me too though...the sort will be on multiple and
> > different fields depending no what the searcher wants...uggg...the size
> > of the caches....)
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_175895_26300570.1155402411450--

From java-user-return-22674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 19:06:14 2006
Return-Path: <java-user-return-22674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65357 invoked from network); 12 Aug 2006 19:06:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 19:06:14 -0000
Received: (qmail 79741 invoked by uid 500); 12 Aug 2006 19:06:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79696 invoked by uid 500); 12 Aug 2006 19:06:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79685 invoked by uid 99); 12 Aug 2006 19:06:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 12:06:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 12:05:58 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15660344@mailer.syr.edu>; Sat, 12 Aug 2006 15:05:31 -0400
Message-ID: <44DE267B.6020901@syr.edu>
Date: Sat, 12 Aug 2006 15:05:31 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing Documents which has Attachments and are Refered many
 times!!
References: <20060812081231.97852.qmail@web50409.mail.yahoo.com> <d8050f240608120902l67cf0504k9213fc636c4a290b@mail.gmail.com>
In-Reply-To: <d8050f240608120902l67cf0504k9213fc636c4a290b@mail.gmail.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As Jason says, you can structure each Lucene document with one Field per
content type, and index all data that way.  The database is not required.

To address your search complexity concern, you can create queries that
search only those Field(s) the user wants -- there is no need to have a
Field for each possible combination of content type.

Steve

Jason Polites wrote:
> Maybe I'm not understanding your requirement, but this should be fairly
> simple in Lucene.
> 
> Each document in your document management system would be represented by a
> single Lucene document in the index.  Each lucene document will then have
> several fields, each field representing the values of the "meta data"
> associated with your document in the document management system.
> 
> For example:
> 
> Lets say you have a document which has the following structure:
> 
> Title: Sample Document
> Date: 01/01/2006
> Attachment: Some attachment (this is the content of the attachment)
> Attachment: Some other attachment
> Refers: Mr X
> Refers: Mr Y
> 
> Your Lucene document would have the same structure.  All of these items in
> your "real" document would simply be Fields in the lucene document.
> 
> In the case of your attachments, you could also consider indexing them
> separately (as well).  This way users could search for attachments without
> needing the documents to which they are attached.
> 
> If your attachments ARE documents (that is, your just have a foreign key
> style relationship between two documents), then you would simple index each
> "real" document as a separate document in lucene and add some sort of
> reference field which contains the ID of all related documents.
> 
> For Example:
> -------------------
> ID: 123
> Title: Sample Document
> Date: 01/01/2006
> Attachment: 456
> Attachment: 789
> Refers: Mr X
> Refers: Mr Y
> --------------------
> ID: 456
> Title: Other Document
> Date:.. etc etc...
> 
> The one thing to be mindful of is re-indexing existing documents.  If you
> have document that is already indexed and you want to make a change (eg you
> want to add a new "refers" value), then you need to re-index the entire
> document.  This means you need to either "store" all fields you want to
> keep
> during re-indexing (which is typically all of them), or you need to
> re-index
> the document from its source. Storing all the data in the index can have
> adverse effects on the performance of the index however. (hope this makes
> sense).
> 
> 
> 
> On 8/12/06, Shaghayegh Sahebie <shaghayegh_sahebie@yahoo.com> wrote:
>>
>> Hi all;
>> We have got a Document management system and we want to build a search on
>> it. We have tree kind of content in our system: Refers, Documents and
>> Attachments. A document can have multiple attachments and can be
>> Refered to
>> many users.
>> Our users want to be able to search on documents attachments and refers.
>> for example they want to search the Documents which are created at
>> "2006/07/06" date and have the word "Lucene" in it or their Refers and
>> are
>> Refered to Mr.x.
>> Our users want to be ale to search in all 8 possible selections of
>> Document, Refer and Attachment, I mean they want to be able to search
>> just
>> in Refers, in both Refers and Documents, ...
>> How can we handle it?
>> I thaught to store diferent kinds of Docs in a DB, search in the DB at
>> first and search in Lucene based on DB results and phrases given to
>> search
>> (Handling Document, Refer or Attachments parts in a DB search). But
>> the DB
>> results maybe so big and i don't know if a Lucene query can have these
>> much
>> of search Terms.
>> Another way is to Index each document, refer and attachment in the
>> index 8
>> times(all the possible selections of Refer, Document and Attachment) but
>> this way has lots of redundancy even more than 8 times! 'cause each
>> Document
>> is indexed "8 * Refer number of Document" times.
>> I really don't know what to do, Any suggestions Please?
>>
>> Thanks in advance


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 21:09:29 2006
Return-Path: <java-user-return-22675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96362 invoked from network); 12 Aug 2006 21:09:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 21:09:29 -0000
Received: (qmail 80563 invoked by uid 500); 12 Aug 2006 21:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80529 invoked by uid 500); 12 Aug 2006 21:09:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80518 invoked by uid 99); 12 Aug 2006 21:09:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 14:09:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 14:09:12 -0700
Received: by wx-out-0506.google.com with SMTP id s15so865981wxc
        for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 14:08:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=FpUglBPxXOGifa+EIDyqtNSToHtsGisOKq5Fkx8Nfl97B4bQMqG4T4OR1shcW763iRL7kwZNFUIKTH5LqPKbESXTPUyqZwn6X3lAQJbLNQQByHhRKRXyCyACiUL6DmODyA+7zhxFQ5uGB3O1hT4pVvUcf9kFPIqBTH43lmUeovo=
Received: by 10.70.72.11 with SMTP id u11mr7384872wxa;
        Sat, 12 Aug 2006 14:08:43 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 64sm464549wra.2006.08.12.14.08.41;
        Sat, 12 Aug 2006 14:08:43 -0700 (PDT)
Message-ID: <44DE436B.3050909@gmail.com>
Date: Sat, 12 Aug 2006 17:08:59 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>	 <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>	 <44DD0057.1030606@gmail.com>	 <d487eb8e0608111555ub5f1888u7c3ec1839c699b4@mail.gmail.com>	 <44DD1151.20800@gmail.com>	 <d8050f240608120922l3fb62b62v8d92d3f5b7469c35@mail.gmail.com> <fb9748c90608121006h766e1b78we85f05b48d0f25eb@mail.gmail.com>
In-Reply-To: <fb9748c90608121006h766e1b78we85f05b48d0f25eb@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Frustrated is the word :) I have looked at Solr...what I am worried 
about there is this: Solr says it requires an OS that supports hard 
links. Currently Windows does not to my knowledge. Someone seemed to 
make a comment that Windows could be supported...from what I know I 
don't think so. Not a deal breaker per say but then there is this: I 
have done a lot with the lucene API. I have created a custom query 
language to lucene query parser. I have changed the standard parser. I 
have made heavy use of Multi-Searchers. I am really tied into the Lucene 
API. I am worried about how easy it will be to integrate that into Solr. 
Perhaps I can just grab the distributed part of Solr but I do not know. 
I have so much to do that worrying about a distributed search seems like 
too big a scope for now. It seemed to me that breaking up the index with 
an RMI searcher was the easiest approach anyway. In the end...I would 
really like to stay on one server. This server will prob have multiple 
procs...should I make sure I incorporate a parallel searcher option?

In the end I am really just hoping for some more insight into this exact 
question:

Can I index 30 million+ docs that range in size form 2-10kb on a single 
server in a Windows environment (accesss to a max of about 1.5 gig of 
RAM). The average search will need to be sorted by field not relevancy.

Do you think its possible or a pipe dream? I realize I need to test to 
find out...but I am looking for someone with experience to pipe in 
before I get to that point.

Thanks for the response so far...I love the lucene mailing list.

Thanks,
Mark


Ray Tsang wrote:
> i've indexed 80m records and now up to 200m.. it can be done, and 
> could've
> been done better.  like the other said, architecture is important.  
> have you
> considered looking into solr?  i haven't kept up with it (and many of the
> mailing lists...), but looks very interesting.
>
> ray,
>
> On 8/12/06, Jason Polites <jason.polites@gmail.com> wrote:
>>
>> Sounds like you're a bit frustrated.  Cheer up, the simple fact is that
>> engineering and business rarely see eye-to-eye.  Just focus on the fact
>> that
>> what you have learnt from the process will help you, and they paid 
>> for it
>> ;)
>>
>> On the issue at hand...Lucene should scale to this level, but you need a
>> good architecture behind it.  Google has good indexing tech, but it's
>> their
>> architecture that allows them to spread the index across thousands of
>> servers which really gives it grunt (to the point that they invented 
>> their
>> own RAID-style file system).
>>
>> Just think very carefully about the architecture underpinning the index.
>> Lucene is core-tech.  It's up to you to provide the framework to make it
>> hum.
>>
>> On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
>> >
>> > Tomi NA wrote:
>> > > On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
>> > >> I've made a nice little archive application with lucene. I made 
>> it to
>> > >> handle our largest need: 2.5 million docs or so on a single server.
>> Now
>> > >> the powers that be say: lets use it for a 30+ million document
>> archive
>> > >> on a single server! (each doc size maybe 10k max...as small as a 
>> 1 or
>> > >> 2k) Please tell me why we are in trouble...please tell me why we 
>> are
>> > >> not. I have tested up to 2 million docs without much trouble but 30
>> > >> million...the average search will include a sort on a field as
>> > >> well...can I search 30+ million docs with a sort? Man am I worried
>> > about
>> > >> that. Maybe the server will have 8 procs and 12 billion gigs of 
>> RAM.
>> > >> Mabye. Even still, Tomcat seems to be able to launch with a max of
>> 1.5
>> > >> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds
>> > like
>> > >> too much of a load to me for a single server. Not that they care 
>> what
>> I
>> > >> think...I only wrote the thing (man I hate my job, offer me a 
>> new one
>> > :)
>> > >> )...please...comments?
>> > >>
>> > >> Cheers,
>> > >>
>> > >> Miserable Mark
>> > >
>> > > I don't really understand what you're so worried about. Either it'll
>> > > work well with the setup you have, or it won't. It's really the size
>> > > of it. ;)
>> > > Seriously, you have a number of relatively cheap possibilities at 
>> hand
>> > > to improve search performance: storing the index on a RAID 5 disk
>> > > array will let you read the indices very fast, using multicore CPUs,
>> > > adding memory and even if all that isn't good enough, you can always
>> > > use a small cluster (say, 4 nodes) of very, very inexpensive PCs
>> > > filled with a GB of RAM. You don't have to keep them inside the
>> > > regular UPS/backup/voult-protected area as the indices can always be
>> > > rebuilt (unlike e.g. data in transactional systems) and between 4 of
>> > > them they might cost like an entry-level server.
>> > > I'll let the experts speak now. :)
>> > >
>> > > t.n.a.
>> > >
>> > > 
>> ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> > Thanks for the tip...I am not too worried...I am miserable because I
>> > live in Dilbert land, not this particular incident. Spreading to
>> > multiple servers is a possibility but one I want to avoid...I wrote 
>> this
>> > app on the side since our current product is crap...it still needs 
>> a lot
>> > of work and thinking about distributing lucene at this point is a 
>> little
>> > much...I never even have time to work on this project as it is 
>> becuase I
>> > am currently tasked with porting the crap old project to Windows. I 
>> need
>> > to do a bunch to shore up what I have. No one cares though...they 
>> think
>> > that I have done nothing (or can't understand what I have done) 
>> while at
>> > the same time they want to use what I havn't done to do what I made it
>> > for as well as this new super archive of 30 million + docs...in the 
>> end
>> > I'll be looking for a new job...still curious about lucene scaling 
>> to 30
>> > million docs with a sort on every search though (yes I know the 
>> sort is
>> > cached...worries me too though...the sort will be on multiple and
>> > different fields depending no what the searcher wants...uggg...the 
>> size
>> > of the caches....)
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 23:00:17 2006
Return-Path: <java-user-return-22676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15352 invoked from network); 12 Aug 2006 23:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 23:00:16 -0000
Received: (qmail 39942 invoked by uid 500); 12 Aug 2006 23:00:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39912 invoked by uid 500); 12 Aug 2006 23:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39901 invoked by uid 99); 12 Aug 2006 23:00:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 16:00:11 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 16:00:03 -0700
Received: by nf-out-0910.google.com with SMTP id p48so1420419nfa
        for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 15:59:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BHLAKPgD1sOeNQHxfUBF2GIfhzq/RublA0I+9+3yATJZCjV6P+REbJ34h618N7IAgBAGTQWsoQLrkUgKYgul466+FN0XT3WgT8961TLtnQz2FSOVRqPU7KChI8PXzPUR68HZLs4vqP2UcO2Av4iGtMl8DHsPV5AL1m9QkkCp6Vk=
Received: by 10.78.147.3 with SMTP id u3mr2725983hud;
        Sat, 12 Aug 2006 15:59:36 -0700 (PDT)
Received: by 10.78.117.7 with HTTP; Sat, 12 Aug 2006 15:59:36 -0700 (PDT)
Message-ID: <50f433360608121559o761e8176kcb76ffdcc11da08f@mail.gmail.com>
Date: Sat, 12 Aug 2006 15:59:36 -0700
From: "Jeff Rodenburg" <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
In-Reply-To: <44DD0057.1030606@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_165701_29752247.1155423576157"
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>
	 <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>
	 <44DD0057.1030606@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_165701_29752247.1155423576157
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why is a single server so important?  I can scale horizontally much cheaper
than I scale vertically.



On 8/11/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> I've made a nice little archive application with lucene. I made it to
> handle our largest need: 2.5 million docs or so on a single server. Now
> the powers that be say: lets use it for a 30+ million document archive
> on a single server! (each doc size maybe 10k max...as small as a 1 or
> 2k) Please tell me why we are in trouble...please tell me why we are
> not. I have tested up to 2 million docs without much trouble but 30
> million...the average search will include a sort on a field as
> well...can I search 30+ million docs with a sort? Man am I worried about
> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
> Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5
> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds like
> too much of a load to me for a single server. Not that they care what I
> think...I only wrote the thing (man I hate my job, offer me a new one :)
> )...please...comments?
>
> Cheers,
>
> Miserable Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_165701_29752247.1155423576157--

From java-user-return-22677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 12 23:45:41 2006
Return-Path: <java-user-return-22677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21206 invoked from network); 12 Aug 2006 23:45:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2006 23:45:41 -0000
Received: (qmail 63191 invoked by uid 500); 12 Aug 2006 23:45:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63165 invoked by uid 500); 12 Aug 2006 23:45:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63154 invoked by uid 99); 12 Aug 2006 23:45:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 16:45:35 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 16:45:25 -0700
Received: by wx-out-0506.google.com with SMTP id s15so876755wxc
        for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 16:44:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=e5B9ub4HqPKHH+lpfHWqht4EksasmwD5rZSlYVudxxSlLJCkP/kRD2CkP9IE+abwMhj2egFXuupD4PoCykvGJ8OeyaGjypXMBdn3Pfr0VGc7D16erEO6V5ijd/MKCWivz0sOebH4c8bmlafMImoZTM5UlkkWjgjQ157kXl9iNDo=
Received: by 10.70.18.11 with SMTP id 11mr7430883wxr;
        Sat, 12 Aug 2006 16:44:58 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id g3sm587375wra.2006.08.12.16.44.57;
        Sat, 12 Aug 2006 16:44:58 -0700 (PDT)
Message-ID: <44DE680B.8030502@gmail.com>
Date: Sat, 12 Aug 2006 19:45:15 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>	 <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>	 <44DD0057.1030606@gmail.com> <50f433360608121559o761e8176kcb76ffdcc11da08f@mail.gmail.com>
In-Reply-To: <50f433360608121559o761e8176kcb76ffdcc11da08f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The single server is important because I think it will take a lot of 
work to scale it to multiple servers. The index must allow for close to 
real-time updates and additions. It must also remain searchable at all 
times (other than than during the brief period of single updates and 
additions). If it is easy to scale this to multiple servers please tell 
me how.

- Mark
> Why is a single server so important?  I can scale horizontally much 
> cheaper
> than I scale vertically.
>
>
>
> On 8/11/06, Mark Miller <markrmiller@gmail.com> wrote:
>>
>> I've made a nice little archive application with lucene. I made it to
>> handle our largest need: 2.5 million docs or so on a single server. Now
>> the powers that be say: lets use it for a 30+ million document archive
>> on a single server! (each doc size maybe 10k max...as small as a 1 or
>> 2k) Please tell me why we are in trouble...please tell me why we are
>> not. I have tested up to 2 million docs without much trouble but 30
>> million...the average search will include a sort on a field as
>> well...can I search 30+ million docs with a sort? Man am I worried about
>> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
>> Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5
>> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds like
>> too much of a load to me for a single server. Not that they care what I
>> think...I only wrote the thing (man I hate my job, offer me a new one :)
>> )...please...comments?
>>
>> Cheers,
>>
>> Miserable Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 13 02:05:03 2006
Return-Path: <java-user-return-22678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71036 invoked from network); 13 Aug 2006 02:05:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2006 02:05:03 -0000
Received: (qmail 57992 invoked by uid 500); 13 Aug 2006 02:04:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57964 invoked by uid 500); 13 Aug 2006 02:04:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57952 invoked by uid 99); 13 Aug 2006 02:04:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 19:04:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 19:04:50 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 282915B76C; Sat, 12 Aug 2006 19:04:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1F3E77F403
	for <java-user@lucene.apache.org>; Sat, 12 Aug 2006 19:04:10 -0700 (PDT)
Date: Sat, 12 Aug 2006 19:04:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
In-Reply-To: <44DE436B.3050909@gmail.com>
Message-ID: <Pine.LNX.4.58.0608121846100.18751@hal.rescomp.berkeley.edu>
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>
  <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu> 
 <44DD0057.1030606@gmail.com>  <d487eb8e0608111555ub5f1888u7c3ec1839c699b4@mail.gmail.com>
  <44DD1151.20800@gmail.com>  <d8050f240608120922l3fb62b62v8d92d3f5b7469c35@mail.gmail.com>
 <fb9748c90608121006h766e1b78we85f05b48d0f25eb@mail.gmail.com>
 <44DE436B.3050909@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Frustrated is the word :) I have looked at Solr...what I am worried
: about there is this: Solr says it requires an OS that supports hard
: links. Currently Windows does not to my knowledge. Someone seemed to
: make a comment that Windows could be supported...from what I know I
: don't think so. Not a deal breaker per say but then there is this: I

Solr does not require hardlinks, what the FAQ says is...

  "The Replication features of Solr currently require an OS with the
  ability to create hard links and rsync."

...which means if you want to use the replication system provided with
Solr as is, you need hardlinks and rsync.  Solr is designed with the
replication as a very external portion of the system (it's just executing
shell calls specific in a config file) so it should be possible to plug in
a different replication system and use the existing hooks for generating
snapshoots on the master and loading snapshots on the slave ... it just
hasn't been a priority.

: have done a lot with the lucene API. I have created a custom query
: language to lucene query parser. I have changed the standard parser. I
: have made heavy use of Multi-Searchers. I am really tied into the Lucene
: API. I am worried about how easy it will be to integrate that into Solr.

Anything thing you do at "query time" with the Lucene API, can be done in
a SolrRequestHandler (which you write in Java and register in the solr
config file) -- change just a few method calls and you'll get a lot of
great caching features as well.

none of which really addresses the crux of your question....

: Can I index 30 million+ docs that range in size form 2-10kb on a single
: server in a Windows environment (accesss to a max of about 1.5 gig of
: RAM). The average search will need to be sorted by field not relevancy.

I can't say that I've personally built/used a lucene index of 30 million
docs, but i have talked to people who have done it .. they certainly had
some performance issues, but those issues were mainly related to the
volume of queries they got, not so much the size of their index.  That
said: you are seriously hindering yourself with the Windows/RAM (The
FieldCache for your sort field (assuming it's an int) alone will be over
100MB), not to mention the fact that your index isn't static, so creating
a new searcher after you've made updates esentially halves the amount of
usable RAM you have to work with unless you're willing to close one
searcher before you're willing to open the new one.

I haven't played with Remote/Multi Searchers, but perhaps you should
open yourself up to the possibility of partitionining your index on
several boxes.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 13 05:15:51 2006
Return-Path: <java-user-return-22679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95990 invoked from network); 13 Aug 2006 05:15:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2006 05:15:50 -0000
Received: (qmail 57046 invoked by uid 500); 13 Aug 2006 05:15:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57006 invoked by uid 500); 13 Aug 2006 05:15:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56995 invoked by uid 99); 13 Aug 2006 05:15:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Aug 2006 22:15:45 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 12 Aug 2006 22:15:35 -0700
Received: (qmail 31795 invoked by uid 60001); 13 Aug 2006 05:15:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=m1wpTRX8zu2GNVYLNQD35bXxJQsv17FWq3NAW8E1BsLqOUYwvo6KbLpCKJp3oahoyGqQH57CmCxFXJgbOCgTzg+ReaOgGRRqa8MbBfHXpGracs8uHmJM32ghTNDgeQSeEkbJh4uncybz1npUPgXNqxxaX4TSuqw5g3eGO9IwENo=  ;
Message-ID: <20060813051507.31793.qmail@web50309.mail.yahoo.com>
Received: from [72.229.167.25] by web50309.mail.yahoo.com via HTTP; Sat, 12 Aug 2006 22:15:07 PDT
Date: Sat, 12 Aug 2006 22:15:07 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: 30 milllion+ docs on a single server
To: java-user@lucene.apache.org
In-Reply-To: <44DE680B.8030502@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is unlikely to work well/fast.  It will depend on the size of the index (not in terms of the number of docs, but its physical size), the number of queries/second and desired query latency.  If you can wait 10 seconds to get a query and if only a few queries are hitting the server at any one time, then you may be Ok.  Having things be up to date with non-relevancy sorting will be quite tough.  FieldCache will consume some RAM.  Warming it up will take some number of seconds.  Re-opening an IndexSearcher after index changes will also cost you a bit of time.

Consider a 64-bit server with more RAM that allowed larger Java heaps, and try to fit your index into RAM.

Otis

----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Saturday, August 12, 2006 7:45:15 PM
Subject: Re: 30 milllion+ docs on a single server

The single server is important because I think it will take a lot of 
work to scale it to multiple servers. The index must allow for close to 
real-time updates and additions. It must also remain searchable at all 
times (other than than during the brief period of single updates and 
additions). If it is easy to scale this to multiple servers please tell 
me how.

- Mark
> Why is a single server so important?  I can scale horizontally much 
> cheaper
> than I scale vertically.
>
>
>
> On 8/11/06, Mark Miller <markrmiller@gmail.com> wrote:
>>
>> I've made a nice little archive application with lucene. I made it to
>> handle our largest need: 2.5 million docs or so on a single server. Now
>> the powers that be say: lets use it for a 30+ million document archive
>> on a single server! (each doc size maybe 10k max...as small as a 1 or
>> 2k) Please tell me why we are in trouble...please tell me why we are
>> not. I have tested up to 2 million docs without much trouble but 30
>> million...the average search will include a sort on a field as
>> well...can I search 30+ million docs with a sort? Man am I worried about
>> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
>> Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5
>> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds like
>> too much of a load to me for a single server. Not that they care what I
>> think...I only wrote the thing (man I hate my job, offer me a new one :)
>> )...please...comments?
>>
>> Cheers,
>>
>> Miserable Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 13 17:51:52 2006
Return-Path: <java-user-return-22680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31578 invoked from network); 13 Aug 2006 17:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2006 17:51:52 -0000
Received: (qmail 56819 invoked by uid 500); 13 Aug 2006 17:51:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56785 invoked by uid 500); 13 Aug 2006 17:51:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56774 invoked by uid 99); 13 Aug 2006 17:51:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 10:51:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 10:51:45 -0700
Received: from [127.0.0.1] (213-84-169-241.adsl.xs4all.nl [213.84.169.241])
	by smtp-vbr14.xs4all.nl (8.13.6/8.13.6) with ESMTP id k7DHpOGh004065
	for <java-user@lucene.apache.org>; Sun, 13 Aug 2006 19:51:24 +0200 (CEST)
	(envelope-from mail@bpeters.com)
Message-ID: <44DF669E.500@bpeters.com>
Date: Sun, 13 Aug 2006 19:51:26 +0200
From: Bas Peters <mail@bpeters.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Repeatable field names
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a question regarding repeatable field names.

I have a database with, among other fields, a field title and a field 
subtitle. I want to add them to a Lucene index with a field 'title' to 
enable the user to find books by title words that are in the title or 
subtitle. Can I simple add both fields with a field name title (this 
seems to work fine), or is it a better approach (for example more 
efficient) to concatenate both title and subtitle first and add them as 
a single field to the index?

Regards,

Bas Peters


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 13 19:29:10 2006
Return-Path: <java-user-return-22681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54224 invoked from network); 13 Aug 2006 19:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2006 19:29:10 -0000
Received: (qmail 13968 invoked by uid 500); 13 Aug 2006 19:29:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13925 invoked by uid 500); 13 Aug 2006 19:29:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13909 invoked by uid 99); 13 Aug 2006 19:29:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 12:29:04 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 12:29:03 -0700
Received: by nf-out-0910.google.com with SMTP id p48so1618063nfa
        for <java-user@lucene.apache.org>; Sun, 13 Aug 2006 12:28:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r2/S610i7zaWkKnri4OnTMCA2fe0f66vcQyA4Tfi8lSMlzf1NOENlImg90wInEQjy/xwPoMAc+8VvYvvqwz5pRBmczPUxAS0N4NxQhnp1192NSR0wgVnp0Ba0vcFQhnHJ37In8s0p8gORA5t3jUhEjrx3i/hBuD1duMCZHCM1Zc=
Received: by 10.78.170.17 with SMTP id s17mr2979096hue;
        Sun, 13 Aug 2006 12:28:41 -0700 (PDT)
Received: by 10.78.117.7 with HTTP; Sun, 13 Aug 2006 12:28:41 -0700 (PDT)
Message-ID: <50f433360608131228o1ed15bf0lc87c48ebdae3da21@mail.gmail.com>
Date: Sun, 13 Aug 2006 12:28:41 -0700
From: "Jeff Rodenburg" <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
In-Reply-To: <44DE680B.8030502@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_178505_15213373.1155497321745"
References: <OF9D529309.F7DE059A-ON882571C6.00642C64-882571C6.006F2D56@il.ibm.com>
	 <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>
	 <44DD0057.1030606@gmail.com>
	 <50f433360608121559o761e8176kcb76ffdcc11da08f@mail.gmail.com>
	 <44DE680B.8030502@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_178505_15213373.1155497321745
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> The single server is important because I think it will take a lot of
> work to scale it to multiple servers. The index must allow for close to
> real-time updates and additions. It must also remain searchable at all
> times (other than than during the brief period of single updates and
> additions). If it is easy to scale this to multiple servers please tell
> me how.
>

It can take quite a bit of work to implement a multiple-server index system;
we did it last year, building an operational wrapper around Lucene.  Wish
Solr had been around then.  ;-)

I've done both the Windows and the Linux route.  Windows certainly comes
from a scale-up mentality, though we made it work in a scale-out model.  Our
requirements were the same as yours: near real-time updates & additions,
always-on searchability, etc.  It takes work, but it can be done.  We're
serving searches across 6 different types of indexes, with the indexes
spread across the server farm (no single server has the full composite
index).  Our search availability for this year is damn near 5 nines.  If you
haven't looked at Windows 64-bit, let me save you some time.  You don't gain
as much as you might expect; the point of diminishing returns appears to
have certainly been met with Windows Server.  We'll apply a similar strategy
to Solr, in that we'll likely run Solr clusters for our composite index.

The best way to explain "how" is to simply refer you to Solr, from an
operational perspective.  The only thing that Solr doesn't have that we do
is rolling together results from multiple searchers, and that's simply an
out-of-the-box configuration; it's not a major ordeal to change that to meet
our needs.

Hope this helps.

-- j

------=_Part_178505_15213373.1155497321745--

From java-user-return-22682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 13 19:29:40 2006
Return-Path: <java-user-return-22682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54282 invoked from network); 13 Aug 2006 19:29:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2006 19:29:39 -0000
Received: (qmail 15849 invoked by uid 500); 13 Aug 2006 19:29:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15397 invoked by uid 500); 13 Aug 2006 19:29:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15386 invoked by uid 99); 13 Aug 2006 19:29:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 12:29:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 12:29:33 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2E46A5B772; Sun, 13 Aug 2006 12:28:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 237377F403
	for <java-user@lucene.apache.org>; Sun, 13 Aug 2006 12:28:57 -0700 (PDT)
Date: Sun, 13 Aug 2006 12:28:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Repeatable field names
In-Reply-To: <44DF669E.500@bpeters.com>
Message-ID: <Pine.LNX.4.58.0608131225490.21617@hal.rescomp.berkeley.edu>
References: <44DF669E.500@bpeters.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: subtitle. Can I simple add both fields with a field name title (this
: seems to work fine), or is it a better approach (for example more
: efficient) to concatenate both title and subtitle first and add them as
: a single field to the index?

there's no reason to concatenate them unless you want to *store* them as
one long string (so you get the value back as a single string instead of
an array of two strings) ... i'm guessing you don't.  from a search
perspective the only difference is that with two values the
positionIncrimentGap method of your analyzer will be called, putting a
"gap" between the last word of hte title and the first word of hte
subtitle ... this can be usefull if you want to make sure that phrase
searches don't falsly match one word in the title and one word in the
subtitle.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 13 23:45:13 2006
Return-Path: <java-user-return-22683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94623 invoked from network); 13 Aug 2006 23:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2006 23:45:13 -0000
Received: (qmail 92852 invoked by uid 500); 13 Aug 2006 23:45:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92812 invoked by uid 500); 13 Aug 2006 23:45:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92800 invoked by uid 99); 13 Aug 2006 23:45:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 16:45:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 16:45:06 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id 5C8D328036
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 09:44:44 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 4636B53403A
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 09:44:44 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 27369-01-17 for <java-user@lucene.apache.org>;
 Mon, 14 Aug 2006 09:44:43 +1000 (EST)
Received: from OLIVERDESKTOP (unknown [192.168.0.40])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 9BBDE534039
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 09:44:43 +1000 (EST)
From: "Oliver Hutchison" <ohutchison@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: NPE when sorting on a field that is missing from a doc
Date: Mon, 14 Aug 2006 09:44:33 +1000
Message-ID: <058301c6bf32$73df6c90$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <Pine.LNX.4.58.0608111134350.10034@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Aca9dRsX6p0ElLXPQRK/YJ58QmnFDABvR2Qg
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> i havne't seen it mentioned before ... i'm guessing it is 
> specific to the "explicit Locale" String comparator.

I've created an issue (LUCENE-650) with patch to fix this.

Thanks,

Oliver


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 01:41:44 2006
Return-Path: <java-user-return-22684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14761 invoked from network); 14 Aug 2006 01:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 01:41:44 -0000
Received: (qmail 52420 invoked by uid 500); 14 Aug 2006 01:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52392 invoked by uid 500); 14 Aug 2006 01:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52381 invoked by uid 99); 14 Aug 2006 01:41:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 18:41:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Aug 2006 18:41:38 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id C71F8289B5
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 11:41:14 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id B66A55340F1
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 11:41:14 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 18227-01-37 for <java-user@lucene.apache.org>;
 Mon, 14 Aug 2006 11:41:14 +1000 (EST)
Received: from OLIVERDESKTOP (unknown [192.168.0.40])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 22E0D53403A
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 11:41:14 +1000 (EST)
From: "Oliver Hutchison" <ohutchison@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: Poor performance "race condition" in FieldSortedHitQueue
Date: Mon, 14 Aug 2006 11:40:48 +1000
Message-ID: <05aa01c6bf42$ba945d70$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <Pine.LNX.4.58.0608111136530.10034@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Aca9dXsO24GnV+j7Sd6ums8O9NyjlQBzPoHw
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've created an issue (LUCENE-651) and attached a patch. Hopefully this will
help you guys with whatever approach you end up using to solve this.

Thanks,

Oliver


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 07:28:09 2006
Return-Path: <java-user-return-22685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90406 invoked from network); 14 Aug 2006 07:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 07:28:08 -0000
Received: (qmail 68903 invoked by uid 500); 14 Aug 2006 07:28:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68877 invoked by uid 500); 14 Aug 2006 07:28:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68866 invoked by uid 99); 14 Aug 2006 07:28:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 00:28:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.144.165.24] (HELO dolby.com) (12.144.165.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 00:27:59 -0700
Received: from ([172.16.17.28])
	by silver.dolby.com with ESMTP  id 5202052.27218480;
	Mon, 14 Aug 2006 00:27:33 -0700
Received: from sapphire.dolby.net ([172.16.52.45]) by bronze.dolby.net with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 14 Aug 2006 00:27:33 -0700
Received: from [172.16.54.44] ([172.16.54.44]) by sapphire.dolby.net with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 14 Aug 2006 00:27:33 -0700
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <0E761FF7-465F-469C-8F13-B9E802BDB81C@ehatchersolutions.com>
References: <1155224989.4653.5.camel@localhost.localdomain> <359a92830608101033g77d03668qdf2c341dc882d8b4@mail.gmail.com> <44DC146D.3070005@uni-hd.de> <0E761FF7-465F-469C-8F13-B9E802BDB81C@ehatchersolutions.com>
Message-Id: <14654851-7816-481C-ACAA-C41845EECF62@dolby.co.uk>
Content-Transfer-Encoding: 7bit
From: Adrian Pillinger <apill@dolby.co.uk>
Subject: Re: Special characters
Date: Mon, 14 Aug 2006 08:27:30 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-OriginalArrivalTime: 14 Aug 2006 07:27:33.0228 (UTC) FILETIME=[1BA06AC0:01C6BF73]
Content-Type: text/plain;
	format="flowed";
	charset="US-ASCII";
	delsp="yes"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the replies on my question.

In the end I've taken the StandardAnalyser grammar, modified it and  
generated a new analyser with JavaCC. Seems to be working a treat!

Adrian

On 11 Aug 2006, at 14:32, Erik Hatcher wrote:

>
> On Aug 11, 2006, at 1:23 AM, Martin Braun wrote:
>> Hello Adrian,
>>
>>>> I am indexing some text in a java object that is "%772B" with the
>>>> standard analyser and Lucene 2.
>>>>
>>>> Should I be able to search for this with the same text as the  
>>>> query, or
>>>> do I need to do any escaping of characters?
>>
>> Besides Luke there are the AnalyzerUtils from the LIA book, (you can
>> download the source code examples here:
>> http://www.lucenebook.com/LuceneInAction.zip
>
> You can also try out analysis just using "ant AnalyzerDemo", like  
> this:
>
> $ ant AnalyzerDemo
> Buildfile: build.xml
>
> check-environment:
>
> compile:
>
> build-test-index:
>
> build-perf-index:
>
> prepare:
>
> AnalyzerDemo:
>      [echo]
>      [echo]       Demonstrates analysis of sample text.
>      [echo]
>      [echo]       Refer to the "Analysis" chapter for much more on  
> this
>      [echo]       extremely crucial topic.
>      [echo]
>     [input] Press return to continue...
>
>     [input] String to analyze: [This string will be analyzed.]
> %772B
>      [echo] Running lia.analysis.AnalyzerDemo...
>      [java] Analyzing "%772B"
>      [java]   WhitespaceAnalyzer:
>      [java]     [%772B]
>
>      [java]   SimpleAnalyzer:
>      [java]     [b]
>
>      [java]   StopAnalyzer:
>      [java]     [b]
>
>      [java]   StandardAnalyzer:
>      [java]     [772b]
>
>
> BUILD SUCCESSFUL
> Total time: 7 seconds
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-----------------------------------------
This message (including any attachments) may contain confidential
information intended for a specific individual and purpose.  If you
are not the intended recipient, delete this message.  If you are
not the intended recipient, disclosing, copying, distributing, or
taking any action based on this message is strictly prohibited.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 09:27:58 2006
Return-Path: <java-user-return-22686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20082 invoked from network); 14 Aug 2006 09:27:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 09:27:58 -0000
Received: (qmail 81041 invoked by uid 500); 14 Aug 2006 09:27:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80427 invoked by uid 500); 14 Aug 2006 09:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80413 invoked by uid 99); 14 Aug 2006 09:27:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 02:27:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of khosravi@us.ibm.com designates 32.97.110.153 as permitted sender)
Received: from [32.97.110.153] (HELO e35.co.us.ibm.com) (32.97.110.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 02:27:50 -0700
Received: from westrelay02.boulder.ibm.com (westrelay02.boulder.ibm.com [9.17.195.11])
	by e35.co.us.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7E9R922031418
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 05:27:09 -0400
Received: from d03av02.boulder.ibm.com (d03av02.boulder.ibm.com [9.17.195.168])
	by westrelay02.boulder.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7E9R9j0273072
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 03:27:09 -0600
Received: from d03av02.boulder.ibm.com (loopback [127.0.0.1])
	by d03av02.boulder.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7E9R9fx027603
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 03:27:09 -0600
Received: from d03nm132.boulder.ibm.com (d03nm132.boulder.ibm.com [9.17.195.172])
	by d03av02.boulder.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7E9R9Yr027600
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 03:27:09 -0600
To: <java-user@lucene.apache.org>
Subject: Handling OR, NOT, AND operators in search query
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFC2ECBE60.52D1738A-ON872571CA.0032A189-872571CA.0033ED10@us.ibm.com>
From: Nina Khosravi <khosravi@us.ibm.com>
Date: Mon, 14 Aug 2006 03:27:07 -0600
X-MIMETrack: Serialize by Router on D03NM132/03/M/IBM(Release 7.0.1HF343 | August 2, 2006) at
 08/14/2006 03:27:09,
	Serialize complete at 08/14/2006 03:27:09
Content-Type: multipart/alternative; boundary="=_alternative 0033ED0F872571CA_="
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_alternative 0033ED0F872571CA_=
Content-Type: text/plain; charset="US-ASCII"

Hello,

I am refactoring our search code that was written prior to 1.4.3.  I am 
using Lucene 2.0 now.  The search string entered by users was actually 
parsed by our custom code to generate the query.  This code was getting 
fairly big and messy and I'm changing the code to use Lucene's query 
parsers to build the query.  I am actually using the 
MultiFieldQueryParser.  The problem I am having is the OR, NOT, and AND 
operators are not being interpreted as operators but just as terms.  I am 
using the WhitespaceAnalyzer and defaulting the operator to 
QueryParser.AND_OPERATOR.  Any ideas how to get these strings to be 
interpreted as operators?

Thanks in advance for any help you can give me on this.  I want to also 
say that not only is Lucene a great powerful search engine but the user 
mailing list must be one of the best!!   It so nice to see how quickly we 
get responses on our questions.   I've also learned a lot from what others 
write about. 

Regards,
Nina 

--=_alternative 0033ED0F872571CA_=--

From java-user-return-22687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 10:23:04 2006
Return-Path: <java-user-return-22687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32648 invoked from network); 14 Aug 2006 10:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 10:23:03 -0000
Received: (qmail 49265 invoked by uid 500); 14 Aug 2006 10:22:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49237 invoked by uid 500); 14 Aug 2006 10:22:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49226 invoked by uid 99); 14 Aug 2006 10:22:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 03:22:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 03:22:56 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id AA133D9A82B
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 06:22:34 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Mon, 14 Aug 2006 06:22:35 -0400
X-Sasl-enc: isKVLMv1UDQA5ii/y6OoNUpn/vRqHoLUD64wn2gncm+f 1155550955
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 35D83749F
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 06:22:34 -0400 (EDT)
Message-ID: <44E04EDF.9000000@mikemccandless.com>
Date: Mon, 14 Aug 2006 06:22:23 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Handling OR, NOT, AND operators in search query
References: <OFC2ECBE60.52D1738A-ON872571CA.0032A189-872571CA.0033ED10@us.ibm.com>
In-Reply-To: <OFC2ECBE60.52D1738A-ON872571CA.0032A189-872571CA.0033ED10@us.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I am refactoring our search code that was written prior to 1.4.3.  I am 
> using Lucene 2.0 now.  The search string entered by users was actually 
> parsed by our custom code to generate the query.  This code was getting 
> fairly big and messy and I'm changing the code to use Lucene's query 
> parsers to build the query.  I am actually using the 
> MultiFieldQueryParser.  The problem I am having is the OR, NOT, and AND 
> operators are not being interpreted as operators but just as terms.  I am 
> using the WhitespaceAnalyzer and defaulting the operator to 
> QueryParser.AND_OPERATOR.  Any ideas how to get these strings to be 
> interpreted as operators?

These operators should work correctly.

One restriction is that they must be all caps, ie "x OR y" will work but 
"x or y" will treat or as a literal term.  Is this what you're hitting?

> Thanks in advance for any help you can give me on this.  I want to also 
> say that not only is Lucene a great powerful search engine but the user 
> mailing list must be one of the best!!   It so nice to see how quickly we 
> get responses on our questions.   I've also learned a lot from what others 
> write about. 

You're welcome!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 13:03:28 2006
Return-Path: <java-user-return-22688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83528 invoked from network); 14 Aug 2006 13:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 13:03:28 -0000
Received: (qmail 16315 invoked by uid 500); 14 Aug 2006 13:03:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16285 invoked by uid 500); 14 Aug 2006 13:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16274 invoked by uid 99); 14 Aug 2006 13:03:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 06:03:21 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 06:03:19 -0700
Received: (qmail 22034 invoked by uid 509); 14 Aug 2006 15:02:55 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.186207 secs); 14 Aug 2006 13:02:55 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.186207 secs Process 22026)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 14 Aug 2006 15:02:54 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: 30 milllion+ docs on a single server
Date: Mon, 14 Aug 2006 15:02:54 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C0221AB67@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 30 milllion+ docs on a single server
Thread-Index: Aca+aXZtYDs6UQSrQEyZgpXQFktu9ABN7oag
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You will run into problems with the sorting if you can't hold the =
fieldcache for long intervals. I'm working on a system containing 300 =
million docs. And I ran into sorting issues after only 5 million docs, =
but then again I can't hold my IndexSearcher open for so long intervals =
since I'm dealing with frequently changed data. I had to redo some of =
the scoring part to just deal with the boost value to accomplish my =
sorting. Which however worked nice but I'm looked into once specific =
sort.

I'm also pretty interested in how large indexes I will be able to host =
per server, but I have already implemented abilities for horizontal =
scaling I just hope I won't end up with to many boxes.

/

Marcus

-----Ursprungligt meddelande-----
Fr=E5n: Mark Miller [mailto:markrmiller@gmail.com]=20
Skickat: den 13 augusti 2006 01:45
Till: java-user@lucene.apache.org
=C4mne: Re: 30 milllion+ docs on a single server

The single server is important because I think it will take a lot of=20
work to scale it to multiple servers. The index must allow for close to=20
real-time updates and additions. It must also remain searchable at all=20
times (other than than during the brief period of single updates and=20
additions). If it is easy to scale this to multiple servers please tell=20
me how.

- Mark
> Why is a single server so important?  I can scale horizontally much=20
> cheaper
> than I scale vertically.
>
>
>
> On 8/11/06, Mark Miller <markrmiller@gmail.com> wrote:
>>
>> I've made a nice little archive application with lucene. I made it to
>> handle our largest need: 2.5 million docs or so on a single server. =
Now
>> the powers that be say: lets use it for a 30+ million document =
archive
>> on a single server! (each doc size maybe 10k max...as small as a 1 or
>> 2k) Please tell me why we are in trouble...please tell me why we are
>> not. I have tested up to 2 million docs without much trouble but 30
>> million...the average search will include a sort on a field as
>> well...can I search 30+ million docs with a sort? Man am I worried =
about
>> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
>> Mabye. Even still, Tomcat seems to be able to launch with a max of =
1.5
>> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds =
like
>> too much of a load to me for a single server. Not that they care what =
I
>> think...I only wrote the thing (man I hate my job, offer me a new one =
:)
>> )...please...comments?
>>
>> Cheers,
>>
>> Miserable Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 13:20:00 2006
Return-Path: <java-user-return-22689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87762 invoked from network); 14 Aug 2006 13:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 13:19:59 -0000
Received: (qmail 34971 invoked by uid 500); 14 Aug 2006 13:19:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34940 invoked by uid 500); 14 Aug 2006 13:19:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34929 invoked by uid 99); 14 Aug 2006 13:19:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 06:19:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of khosravi@us.ibm.com designates 32.97.110.149 as permitted sender)
Received: from [32.97.110.149] (HELO e31.co.us.ibm.com) (32.97.110.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 06:19:53 -0700
Received: from westrelay02.boulder.ibm.com (westrelay02.boulder.ibm.com [9.17.195.11])
	by e31.co.us.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7EDJLmC005574
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 09:19:21 -0400
Received: from d03av01.boulder.ibm.com (d03av01.boulder.ibm.com [9.17.195.167])
	by westrelay02.boulder.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7EDJIg1308506
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 07:19:18 -0600
Received: from d03av01.boulder.ibm.com (loopback [127.0.0.1])
	by d03av01.boulder.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7EDJIq6026590
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 07:19:18 -0600
Received: from d03nm132.boulder.ibm.com (d03nm132.boulder.ibm.com [9.17.195.172])
	by d03av01.boulder.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7EDJI5v026587
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 07:19:18 -0600
In-Reply-To: <44E04EDF.9000000@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Handling OR, NOT, AND operators in search query
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFA8FA0585.A1DCFEE3-ON872571CA.004904FA-872571CA.00492DC7@us.ibm.com>
From: Nina Khosravi <khosravi@us.ibm.com>
Date: Mon, 14 Aug 2006 07:19:15 -0600
X-MIMETrack: Serialize by Router on D03NM132/03/M/IBM(Release 7.0.1HF343 | August 2, 2006) at
 08/14/2006 07:19:18,
	Serialize complete at 08/14/2006 07:19:18
Content-Type: multipart/alternative; boundary="=_alternative 00492DC5872571CA_="
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_alternative 00492DC5872571CA_=
Content-Type: text/plain; charset="US-ASCII"

Thanks!  I did not notice that the code was lower-casing the query string!

Regards,
Nina 








> I am refactoring our search code that was written prior to 1.4.3.  I am 
> using Lucene 2.0 now.  The search string entered by users was actually 
> parsed by our custom code to generate the query.  This code was getting 
> fairly big and messy and I'm changing the code to use Lucene's query 
> parsers to build the query.  I am actually using the 
> MultiFieldQueryParser.  The problem I am having is the OR, NOT, and AND 
> operators are not being interpreted as operators but just as terms.  I 
am 
> using the WhitespaceAnalyzer and defaulting the operator to 
> QueryParser.AND_OPERATOR.  Any ideas how to get these strings to be 
> interpreted as operators?

These operators should work correctly.

One restriction is that they must be all caps, ie "x OR y" will work but 
"x or y" will treat or as a literal term.  Is this what you're hitting?

> Thanks in advance for any help you can give me on this.  I want to also 
> say that not only is Lucene a great powerful search engine but the user 
> mailing list must be one of the best!!   It so nice to see how quickly 
we 
> get responses on our questions.   I've also learned a lot from what 
others 
> write about. 

You're welcome!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--=_alternative 00492DC5872571CA_=--

From java-user-return-22690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 13:42:54 2006
Return-Path: <java-user-return-22690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1225 invoked from network); 14 Aug 2006 13:42:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 13:42:54 -0000
Received: (qmail 81859 invoked by uid 500); 14 Aug 2006 13:42:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81820 invoked by uid 500); 14 Aug 2006 13:42:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81809 invoked by uid 99); 14 Aug 2006 13:42:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 06:42:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [145.97.36.132] (HELO mta1.kennisnet.nl) (145.97.36.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 06:42:47 -0700
Received: from Scooter.kennisnet.org (unknown [192.87.94.198])
	by smarthost1.kennisnet.nl (Postfix) with SMTP id 7E9E73A4032
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 15:42:25 +0200 (CEST)
Received: from (192.168.0.30) by Scooter.kennisnet.org via smtp
	 id 4aad_ab13ee50_2ba4_11db_8226_0030482a3887;
	Mon, 14 Aug 2006 16:53:37 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6BFA7.7A062180"
Subject: Index not recreated
Date: Mon, 14 Aug 2006 15:42:25 +0200
Message-ID: <90166A07138C384F88263316F712056C0B4019@robin.kennisnet.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index not recreated
Thread-Index: Aca/p3nSe1DS5xOiQ4yRg3QGGbaApA==
From: "Ronald Wildenberg" <r.wildenberg@kennisnet.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6BFA7.7A062180
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-NAIMIME-Disclaimer: 1
X-NAIMIME-Modified: 1

Hi,
=20
I'm experiencing the problem that my index does not seem to be
recreated, despite using the correct flags. The result is that documents
that represent equal database rows occur multiple times in the index. I
recreate my entire index each night.
=20
My IndexDirectory/IndexWriter construction code looks like this:
=20
   File indexDirectory =3D new File(indexPath);
   FSDirectory luceneIndexDirectory =3D
FSDirectory.getDirectory(indexDirectory, true);
   IndexWriter indexWriter =3D new IndexWriter(luceneIndexDirectory,
analyzer, true);

This code should take care of recreating my index, but it does not seem
to be working properly. It looks like the old index is not removed and
the same documents are added to my index again.
=20
I have strong reasons to not suspect other code to add duplicate
documents. First, if no index has yet been created, no duplicate
documents are added. Second, if an old index does exist, after
recreating the index all documents exist exactly twice (and the
following night they exist three times, etc.). It is not the case that
some documents are duplicated.
=20
Does anyone have any ideas?
=20
Thanks in advance,
Ronald.


DISCLAIMER:=0D
=0D
Dit bericht (met bijlagen) is met grote zorgvuldigheid samengesteld. Voor=
 mogelijke onjuistheid en/of onvolledigheid van de hierin verstrekte info=
rmatie kan Kennisnet geen aansprakelijkheid aanvaarden, evenmin kunnen aa=
n de inhoud van dit bericht (met bijlagen) rechten worden ontleend. De in=
houd van dit bericht (met bijlagen) kan vertrouwelijke informatie bevatte=
n en is uitsluitend bestemd voor de geadresseerde van dit bericht. Indien=
 u niet de beoogde ontvanger van dit bericht bent, verzoekt Kennisnet u d=
it bericht te verwijderen, eventuele bijlagen niet te openen en wijst Ken=
nisnet u op de onrechtmatigheid van het gebruiken, kopi=EBren of versprei=
den van de inhoud van dit bericht (met bijlagen).=0D
=0D
This message (with attachments) is given in good faith. Kennisnet cannot =
assume any responsibility for the accuracy or reliability of the informat=
ion contained in this message (with attachments), nor shall the informati=
on be construed as constituting any obligation on the part of Kennisnet. =
The information contained in this message (with attachments) may be confi=
dential or privileged and is only intended for the use of the named addre=
ssee. If you are not the intended recipient, you are requested by Kennisn=
et to delete this message (with attachments) without opening it and you a=
re notified by Kennisnet that any disclosure, copying or distribution of =
the information contained in this message (with attachments) is strictly =
prohibited and unlawful.=0D


------_=_NextPart_001_01C6BFA7.7A062180--

From java-user-return-22691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 14:20:12 2006
Return-Path: <java-user-return-22691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12342 invoked from network); 14 Aug 2006 14:20:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 14:20:12 -0000
Received: (qmail 34378 invoked by uid 500); 14 Aug 2006 14:20:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34051 invoked by uid 500); 14 Aug 2006 14:20:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34039 invoked by uid 99); 14 Aug 2006 14:20:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 07:20:05 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 07:20:03 -0700
Received: by py-out-1112.google.com with SMTP id s49so1464527pyc
        for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 07:19:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=goMfcoAx+At/sBeft4jCcCPopBxT04aajTXOhVwEbLKA2dyGuuy9tO+89mEuijb87XGaxxcE44d2SKcoZnMw73xl2HpTzMEaLGi4LJcpv6LOkCU0ejAE3Zy//5GhZgVGOyGNVJB5U4xw9FdvpP3YxAUzk69drEARByu376YJE2w=
Received: by 10.35.77.1 with SMTP id e1mr13351677pyl;
        Mon, 14 Aug 2006 07:19:41 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 14 Aug 2006 07:19:41 -0700 (PDT)
Message-ID: <359a92830608140719o1274ea3eh378e753abea92545@mail.gmail.com>
Date: Mon, 14 Aug 2006 10:19:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index not recreated
In-Reply-To: <90166A07138C384F88263316F712056C0B4019@robin.kennisnet.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_161064_15964141.1155565181660"
References: <90166A07138C384F88263316F712056C0B4019@robin.kennisnet.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_161064_15964141.1155565181660
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

My first suspicion is that you have duplicate documents on the *input* side=
,
or are somehow adding documents more than once. I use code similar to yours
and it works just fine for me.....

How big is the index before and after you re-create it? Twice the size and
you're appending, not twice then.....

Are you absolutely sure that you're not somehow, adding documents more than
once? I can imagine that this could occur by processing the source multiple
times (don't know how you get your input) or adding the document multiple
times through some logic error. I've also had my SQL queries return the sam=
e
row more than once upon occasion, usually cured with the "distinct"
qualifier.

If you have some sort of unique ID, I can imagine debug code with a set of
IDs and error reporting when you add a doc (row) already in your index.....

Luke will help you examine your index to see if it's what you think is
there. Perhaps another way to test this would be to add (again for
debugging) a timestamp field in your index. That way, you would know when
you added your duplicate rows.

Finally, you might try creating an index in a new directory that you *know*
is empty and seeing what you get and how it compares against your current
process. Although I'd expect your indexwriter code to barf if you had file
locking issues and couldn't empty the index, I suppose it's possible....

I guess I'm suggesting that you're really re-processing your input since
I've never had a problem with the code creating a new index, and haven't
seen it discussed on the mailing list, so I *strongly* suspect pilot error
here <G>. But I've been wrong before....

And this is Lucene 1.9? 2.0?

Best
Erick

On 8/14/06, Ronald Wildenberg <r.wildenberg@kennisnet.org> wrote:
>
> Hi,
>
> I'm experiencing the problem that my index does not seem to be
> recreated, despite using the correct flags. The result is that documents
> that represent equal database rows occur multiple times in the index. I
> recreate my entire index each night.
>
> My IndexDirectory/IndexWriter construction code looks like this:
>
>    File indexDirectory =3D new File(indexPath);
>    FSDirectory luceneIndexDirectory =3D
> FSDirectory.getDirectory(indexDirectory, true);
>    IndexWriter indexWriter =3D new IndexWriter(luceneIndexDirectory,
> analyzer, true);
>
> This code should take care of recreating my index, but it does not seem
> to be working properly. It looks like the old index is not removed and
> the same documents are added to my index again.
>
> I have strong reasons to not suspect other code to add duplicate
> documents. First, if no index has yet been created, no duplicate
> documents are added. Second, if an old index does exist, after
> recreating the index all documents exist exactly twice (and the
> following night they exist three times, etc.). It is not the case that
> some documents are duplicated.
>
> Does anyone have any ideas?
>
> Thanks in advance,
> Ronald.
>
>
> DISCLAIMER:
>
> Dit bericht (met bijlagen) is met grote zorgvuldigheid samengesteld. Voor
> mogelijke onjuistheid en/of onvolledigheid van de hierin verstrekte
> informatie kan Kennisnet geen aansprakelijkheid aanvaarden, evenmin kunne=
n
> aan de inhoud van dit bericht (met bijlagen) rechten worden ontleend. De
> inhoud van dit bericht (met bijlagen) kan vertrouwelijke informatie bevat=
ten
> en is uitsluitend bestemd voor de geadresseerde van dit bericht. Indien u
> niet de beoogde ontvanger van dit bericht bent, verzoekt Kennisnet u dit
> bericht te verwijderen, eventuele bijlagen niet te openen en wijst Kennis=
net
> u op de onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden van=
 de
> inhoud van dit bericht (met bijlagen).
>
> This message (with attachments) is given in good faith. Kennisnet cannot
> assume any responsibility for the accuracy or reliability of the informat=
ion
> contained in this message (with attachments), nor shall the information b=
e
> construed as constituting any obligation on the part of Kennisnet. The
> information contained in this message (with attachments) may be confident=
ial
> or privileged and is only intended for the use of the named addressee. If
> you are not the intended recipient, you are requested by Kennisnet to del=
ete
> this message (with attachments) without opening it and you are notified b=
y
> Kennisnet that any disclosure, copying or distribution of the information
> contained in this message (with attachments) is strictly prohibited and
> unlawful.
>
>
>

------=_Part_161064_15964141.1155565181660--

From java-user-return-22692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 14:42:50 2006
Return-Path: <java-user-return-22692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18834 invoked from network); 14 Aug 2006 14:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 14:42:50 -0000
Received: (qmail 76663 invoked by uid 500); 14 Aug 2006 14:42:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76496 invoked by uid 500); 14 Aug 2006 14:42:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76485 invoked by uid 99); 14 Aug 2006 14:42:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 07:42:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [145.97.36.133] (HELO mta2.kennisnet.nl) (145.97.36.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 07:42:42 -0700
Received: from Scooter.kennisnet.org (unknown [192.87.94.198])
	by smarthost2.kennisnet.nl (Postfix) with SMTP id 9820E3A4052
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 16:42:19 +0200 (CEST)
Received: from (192.168.0.30) by Scooter.kennisnet.org via smtp
	 id 4aad_096db5fa_2bad_11db_8226_0030482a3887;
	Mon, 14 Aug 2006 17:53:31 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Index not recreated
Date: Mon, 14 Aug 2006 16:42:19 +0200
Message-ID: <90166A07138C384F88263316F712056C0B401A@robin.kennisnet.org>
In-Reply-To: <359a92830608140719o1274ea3eh378e753abea92545@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index not recreated
Thread-Index: Aca/rMJPu+8JZHJkSxyWluFzp9pyKgAAC8xQ
From: "Ronald Wildenberg" <r.wildenberg@kennisnet.org>
To: <java-user@lucene.apache.org>
X-NAIMIME-Disclaimer: 1
X-NAIMIME-Modified: 1
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

VGhhbmtzIGZvciB5b3VyIHJlc3BvbnNlLCBjb21tZW50cyBhcmUgYmVsb3cuIEknbSB1c2luZyBM
dWNlbmUgMS45LjEuCiAKCj4gVmFuOiBFcmljayBFcmlja3NvbiBbbWFpbHRvOmVyaWNrZXJpY2tz
b25AZ21haWwuY29tXSAKPiBWZXJ6b25kZW46IG1hYW5kYWcgMTQgYXVndXN0dXMgMjAwNiAxNjoy
MAo+IE9uZGVyd2VycDogUmU6IEluZGV4IG5vdCByZWNyZWF0ZWQKPiAKPiBNeSBmaXJzdCBzdXNw
aWNpb24gaXMgdGhhdCB5b3UgaGF2ZSBkdXBsaWNhdGUgZG9jdW1lbnRzIG9uIAo+IHRoZSAqaW5w
dXQqIHNpZGUsIG9yIGFyZSBzb21laG93IGFkZGluZyBkb2N1bWVudHMgbW9yZSB0aGFuIAo+IG9u
Y2UuIEkgdXNlIGNvZGUgc2ltaWxhciB0byB5b3VycyBhbmQgaXQgd29ya3MganVzdCBmaW5lIGZv
ciBtZS4uLi4uCgoKVGhpcyB3YXMgbXkgZmlyc3Qgc3VzcGljaW9uIGFsc28sIGJ1dCB0aGUgZmFj
dHMgc2VlbSB0byBydWxlIG91dCB0aGlzIHBvc3NpYmlsaXR5LiBXaGVuIEkgY3JlYXRlIGFuIGlu
ZGV4IGZyb20gc2NyYXRjaCAod2l0aG91dCBoYXZpbmcgYSBwcmV2aW91cywgb2xkIG9uZSksIGV2
ZXJ5dGhpbmcgaXMgb2sgKG5vIGR1cGxpY2F0ZXMpLiBUaGlzIG9ubHkgaGFwcGVucyB0aGUgbmV4
dCB0aW1lLiBTbyBmaXJzdCBJJ20gZ29pbmcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGluZGV4
IGlzIHJlYWxseSBkZWxldGVkIGFmdGVyIGNhbGxpbmcgRlNEaXJlY3RvcnkuZ2V0RGlyZWN0b3J5
KGluZGV4RGlyZWN0b3J5LCB0cnVlKS4gSWYgdGhpcyBpcyB0aGUgY2FzZSwgSSdtIGdvaW5nIHRv
IGNoZWNrIHdoZXRoZXIgSSBhZGQgZHVwbGljYXRlcyBteXNlbGYuCgoKPiBIb3cgYmlnIGlzIHRo
ZSBpbmRleCBiZWZvcmUgYW5kIGFmdGVyIHlvdSByZS1jcmVhdGUgaXQ/IFR3aWNlIAo+IHRoZSBz
aXplIGFuZCB5b3UncmUgYXBwZW5kaW5nLCBub3QgdHdpY2UgdGhlbi4uLi4uCgoKQW4gYWRkaXRp
b25hbCBwcm9ibGVtIGlzIHRoYXQgbXkgaXNzdWUgaXMgb25seSByZXByb2R1Y2FibGUgb24gdGhl
IHByb2R1Y3Rpb24gZW52aXJvbm1lbnQgYW5kIEkgaGF2ZSB2ZXJ5IGxpbWl0ZWQgYWNjZXNzIHRo
ZXJlLiBJIGNhbm5vdCBhbnN3ZXIgdGhpcyByaWdodCBhd2F5LiBGdXJ0aGVybW9yZSwgdGhlIHBy
b2JsZW0gZG9lcyBub3Qgb2NjdXIgYWx3YXlzLCB3aGljaCBtYWtlcyBpdCBldmVuIG1vcmUgZnVu
IDstKQoKIAo+IEFyZSB5b3UgYWJzb2x1dGVseSBzdXJlIHRoYXQgeW91J3JlIG5vdCBzb21laG93
LCBhZGRpbmcgCj4gZG9jdW1lbnRzIG1vcmUgdGhhbiBvbmNlPyBJIGNhbiBpbWFnaW5lIHRoYXQg
dGhpcyBjb3VsZCBvY2N1ciAKPiBieSBwcm9jZXNzaW5nIHRoZSBzb3VyY2UgbXVsdGlwbGUgdGlt
ZXMgKGRvbid0IGtub3cgaG93IHlvdSAKPiBnZXQgeW91ciBpbnB1dCkgb3IgYWRkaW5nIHRoZSBk
b2N1bWVudCBtdWx0aXBsZSB0aW1lcyB0aHJvdWdoIAo+IHNvbWUgbG9naWMgZXJyb3IuIEkndmUg
YWxzbyBoYWQgbXkgU1FMIHF1ZXJpZXMgcmV0dXJuIHRoZSAKPiBzYW1lIHJvdyBtb3JlIHRoYW4g
b25jZSB1cG9uIG9jY2FzaW9uLCB1c3VhbGx5IGN1cmVkIHdpdGggdGhlIAo+ICJkaXN0aW5jdCIK
PiBxdWFsaWZpZXIuCj4gCj4gSWYgeW91IGhhdmUgc29tZSBzb3J0IG9mIHVuaXF1ZSBJRCwgSSBj
YW4gaW1hZ2luZSBkZWJ1ZyBjb2RlIAo+IHdpdGggYSBzZXQgb2YgSURzIGFuZCBlcnJvciByZXBv
cnRpbmcgd2hlbiB5b3UgYWRkIGEgZG9jIAo+IChyb3cpIGFscmVhZHkgaW4geW91ciBpbmRleC4u
Li4uCgoKSWYgSSdtIGFic29sdXRlbHkgcG9zaXRpdmUgdGhhdCB0aGUgb3JpZ2luYWwgaW5kZXgg
aXMgcmVtb3ZlZCBieSBjYWxsaW5nIEZTRGlyZWN0b3J5LmdldERpcmVjdG9yeShpbmRleERpcmVj
dG9yeSwgdHJ1ZSksIEknbSBnb2luZyB0byBleHBsb3JlIHRoaXMgcG9zc2liaWxpdHkgYW5kIGFk
ZCBzb21lIGV4dGVuc2l2ZSBsb2dnaW5nIHRvIHRoZSBwaWVjZXMgb2YgY29kZSB3aGVyZSBkb2N1
bWVudHMgYXJlIGFkZGVkIChJIGRvIGhhdmUgYSB1bmlxdWUgaWQsIHNvIHRoaXMgY2FuIGJlIGNo
ZWNrZWQpLgoKCj4gTHVrZSB3aWxsIGhlbHAgeW91IGV4YW1pbmUgeW91ciBpbmRleCB0byBzZWUg
aWYgaXQncyB3aGF0IHlvdSAKPiB0aGluayBpcyB0aGVyZS4gUGVyaGFwcyBhbm90aGVyIHdheSB0
byB0ZXN0IHRoaXMgd291bGQgYmUgdG8gCj4gYWRkIChhZ2FpbiBmb3IKPiBkZWJ1Z2dpbmcpIGEg
dGltZXN0YW1wIGZpZWxkIGluIHlvdXIgaW5kZXguIFRoYXQgd2F5LCB5b3UgCj4gd291bGQga25v
dyB3aGVuIHlvdSBhZGRlZCB5b3VyIGR1cGxpY2F0ZSByb3dzLgoKCkkgaGF2ZW4ndCB0cmllZCBM
dWtlIHlldCB0byBsb29rIGF0IHRoZSBpbmRleCwgc2luY2UgSSBoYXZlbid0IGJlZW4gYWJsZSB0
byBnZXQgbXkgaGFuZHMgb24gdGhlIGFjdHVhbCBpbmRleCB1bmZvcnR1bmF0ZWx5LgoKCj4gRmlu
YWxseSwgeW91IG1pZ2h0IHRyeSBjcmVhdGluZyBhbiBpbmRleCBpbiBhIG5ldyBkaXJlY3Rvcnkg
Cj4gdGhhdCB5b3UgKmtub3cqIGlzIGVtcHR5IGFuZCBzZWVpbmcgd2hhdCB5b3UgZ2V0IGFuZCBo
b3cgaXQgCj4gY29tcGFyZXMgYWdhaW5zdCB5b3VyIGN1cnJlbnQgcHJvY2Vzcy4gQWx0aG91Z2gg
SSdkIGV4cGVjdCAKPiB5b3VyIGluZGV4d3JpdGVyIGNvZGUgdG8gYmFyZiBpZiB5b3UgaGFkIGZp
bGUgbG9ja2luZyBpc3N1ZXMgCj4gYW5kIGNvdWxkbid0IGVtcHR5IHRoZSBpbmRleCwgSSBzdXBw
b3NlIGl0J3MgcG9zc2libGUuLi4uCgoKVGhhdCdzIGEgZ29vZCBzb2x1dGlvbiBpZiBhbGwgbXkg
b3RoZXIgYXR0ZW1wdHMgZmFpbCA6KQoKCgo+IE9uIDgvMTQvMDYsIFJvbmFsZCBXaWxkZW5iZXJn
IDxyLndpbGRlbmJlcmdAa2VubmlzbmV0Lm9yZz4gd3JvdGU6Cj4gPgo+ID4gSGksCj4gPgo+ID4g
SSdtIGV4cGVyaWVuY2luZyB0aGUgcHJvYmxlbSB0aGF0IG15IGluZGV4IGRvZXMgbm90IHNlZW0g
dG8gYmUgCj4gPiByZWNyZWF0ZWQsIGRlc3BpdGUgdXNpbmcgdGhlIGNvcnJlY3QgZmxhZ3MuIFRo
ZSByZXN1bHQgaXMgdGhhdCAKPiA+IGRvY3VtZW50cyB0aGF0IHJlcHJlc2VudCBlcXVhbCBkYXRh
YmFzZSByb3dzIG9jY3VyIG11bHRpcGxlIAo+IHRpbWVzIGluIAo+ID4gdGhlIGluZGV4LiBJIHJl
Y3JlYXRlIG15IGVudGlyZSBpbmRleCBlYWNoIG5pZ2h0Lgo+ID4KPiA+IE15IEluZGV4RGlyZWN0
b3J5L0luZGV4V3JpdGVyIGNvbnN0cnVjdGlvbiBjb2RlIGxvb2tzIGxpa2UgdGhpczoKPiA+Cj4g
PiAgICBGaWxlIGluZGV4RGlyZWN0b3J5ID0gbmV3IEZpbGUoaW5kZXhQYXRoKTsKPiA+ICAgIEZT
RGlyZWN0b3J5IGx1Y2VuZUluZGV4RGlyZWN0b3J5ID0KPiA+IEZTRGlyZWN0b3J5LmdldERpcmVj
dG9yeShpbmRleERpcmVjdG9yeSwgdHJ1ZSk7Cj4gPiAgICBJbmRleFdyaXRlciBpbmRleFdyaXRl
ciA9IG5ldyBJbmRleFdyaXRlcihsdWNlbmVJbmRleERpcmVjdG9yeSwgCj4gPiBhbmFseXplciwg
dHJ1ZSk7Cj4gPgo+ID4gVGhpcyBjb2RlIHNob3VsZCB0YWtlIGNhcmUgb2YgcmVjcmVhdGluZyBt
eSBpbmRleCwgYnV0IGl0IGRvZXMgbm90IAo+ID4gc2VlbSB0byBiZSB3b3JraW5nIHByb3Blcmx5
LiBJdCBsb29rcyBsaWtlIHRoZSBvbGQgaW5kZXggaXMgbm90IAo+ID4gcmVtb3ZlZCBhbmQgdGhl
IHNhbWUgZG9jdW1lbnRzIGFyZSBhZGRlZCB0byBteSBpbmRleCBhZ2Fpbi4KPiA+Cj4gPiBJIGhh
dmUgc3Ryb25nIHJlYXNvbnMgdG8gbm90IHN1c3BlY3Qgb3RoZXIgY29kZSB0byBhZGQgZHVwbGlj
YXRlIAo+ID4gZG9jdW1lbnRzLiBGaXJzdCwgaWYgbm8gaW5kZXggaGFzIHlldCBiZWVuIGNyZWF0
ZWQsIG5vIGR1cGxpY2F0ZSAKPiA+IGRvY3VtZW50cyBhcmUgYWRkZWQuIFNlY29uZCwgaWYgYW4g
b2xkIGluZGV4IGRvZXMgZXhpc3QsIGFmdGVyIAo+ID4gcmVjcmVhdGluZyB0aGUgaW5kZXggYWxs
IGRvY3VtZW50cyBleGlzdCBleGFjdGx5IHR3aWNlIChhbmQgdGhlIAo+ID4gZm9sbG93aW5nIG5p
Z2h0IHRoZXkgZXhpc3QgdGhyZWUgdGltZXMsIGV0Yy4pLiBJdCBpcyBub3QgCj4gdGhlIGNhc2Ug
dGhhdCAKPiA+IHNvbWUgZG9jdW1lbnRzIGFyZSBkdXBsaWNhdGVkLgo+ID4KPiA+IERvZXMgYW55
b25lIGhhdmUgYW55IGlkZWFzPwo+ID4KPiA+IFRoYW5rcyBpbiBhZHZhbmNlLAo+ID4gUm9uYWxk
Lgo+ID4KPiA+Cj4gPiBESVNDTEFJTUVSOgo+ID4KPiA+IERpdCBiZXJpY2h0IChtZXQgYmlqbGFn
ZW4pIGlzIG1ldCBncm90ZSB6b3JndnVsZGlnaGVpZCAKPiBzYW1lbmdlc3RlbGQuIAo+ID4gVm9v
ciBtb2dlbGlqa2Ugb25qdWlzdGhlaWQgZW4vb2Ygb252b2xsZWRpZ2hlaWQgdmFuIGRlIGhpZXJp
biAKPiA+IHZlcnN0cmVrdGUgaW5mb3JtYXRpZSBrYW4gS2VubmlzbmV0IGdlZW4gYWFuc3ByYWtl
bGlqa2hlaWQgCj4gYWFudmFhcmRlbiwgCj4gPiBldmVubWluIGt1bm5lbiBhYW4gZGUgaW5ob3Vk
IHZhbiBkaXQgYmVyaWNodCAobWV0IGJpamxhZ2VuKSByZWNodGVuIAo+ID4gd29yZGVuIG9udGxl
ZW5kLiBEZSBpbmhvdWQgdmFuIGRpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4pIGthbiAKPiA+IHZl
cnRyb3V3ZWxpamtlIGluZm9ybWF0aWUgYmV2YXR0ZW4gZW4gaXMgdWl0c2x1aXRlbmQgCj4gYmVz
dGVtZCB2b29yIGRlIAo+ID4gZ2VhZHJlc3NlZXJkZSB2YW4gZGl0IGJlcmljaHQuIEluZGllbiB1
IG5pZXQgZGUgYmVvb2dkZSAKPiBvbnR2YW5nZXIgdmFuIAo+ID4gZGl0IGJlcmljaHQgYmVudCwg
dmVyem9la3QgS2VubmlzbmV0IHUgZGl0IGJlcmljaHQgdGUgdmVyd2lqZGVyZW4sIAo+ID4gZXZl
bnR1ZWxlIGJpamxhZ2VuIG5pZXQgdGUgb3BlbmVuIGVuIHdpanN0IEtlbm5pc25ldCB1IG9wIGRl
IAo+ID4gb25yZWNodG1hdGlnaGVpZCB2YW4gaGV0IGdlYnJ1aWtlbiwga29wacOrcmVuIG9mIHZl
cnNwcmVpZGVuIAo+IHZhbiBkZSBpbmhvdWQgdmFuIGRpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4p
Lgo+ID4KPiA+IFRoaXMgbWVzc2FnZSAod2l0aCBhdHRhY2htZW50cykgaXMgZ2l2ZW4gaW4gZ29v
ZCBmYWl0aC4gS2VubmlzbmV0IAo+ID4gY2Fubm90IGFzc3VtZSBhbnkgcmVzcG9uc2liaWxpdHkg
Zm9yIHRoZSBhY2N1cmFjeSBvciByZWxpYWJpbGl0eSBvZiAKPiA+IHRoZSBpbmZvcm1hdGlvbiBj
b250YWluZWQgaW4gdGhpcyBtZXNzYWdlICh3aXRoIGF0dGFjaG1lbnRzKSwgbm9yIAo+ID4gc2hh
bGwgdGhlIGluZm9ybWF0aW9uIGJlIGNvbnN0cnVlZCBhcyBjb25zdGl0dXRpbmcgYW55IAo+IG9i
bGlnYXRpb24gb24gCj4gPiB0aGUgcGFydCBvZiBLZW5uaXNuZXQuIFRoZSBpbmZvcm1hdGlvbiBj
b250YWluZWQgaW4gdGhpcyAKPiBtZXNzYWdlICh3aXRoIAo+ID4gYXR0YWNobWVudHMpIG1heSBi
ZSBjb25maWRlbnRpYWwgb3IgcHJpdmlsZWdlZCBhbmQgaXMgb25seSBpbnRlbmRlZCAKPiA+IGZv
ciB0aGUgdXNlIG9mIHRoZSBuYW1lZCBhZGRyZXNzZWUuIElmIHlvdSBhcmUgbm90IHRoZSBpbnRl
bmRlZCAKPiA+IHJlY2lwaWVudCwgeW91IGFyZSByZXF1ZXN0ZWQgYnkgS2VubmlzbmV0IHRvIGRl
bGV0ZSB0aGlzIAo+IG1lc3NhZ2UgKHdpdGggCj4gPiBhdHRhY2htZW50cykgd2l0aG91dCBvcGVu
aW5nIGl0IGFuZCB5b3UgYXJlIG5vdGlmaWVkIGJ5IAo+IEtlbm5pc25ldCB0aGF0IAo+ID4gYW55
IGRpc2Nsb3N1cmUsIGNvcHlpbmcgb3IgZGlzdHJpYnV0aW9uIG9mIHRoZSBpbmZvcm1hdGlvbiAK
PiBjb250YWluZWQgCj4gPiBpbiB0aGlzIG1lc3NhZ2UgKHdpdGggYXR0YWNobWVudHMpIGlzIHN0
cmljdGx5IHByb2hpYml0ZWQgCj4gYW5kIHVubGF3ZnVsLgo+ID4KPiA+Cj4gPgo+IAoKCkRJU0NM
QUlNRVI6DQoNCkRpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4pIGlzIG1ldCBncm90ZSB6b3JndnVs
ZGlnaGVpZCBzYW1lbmdlc3RlbGQuIFZvb3IgbW9nZWxpamtlIG9uanVpc3RoZWlkIGVuL29mIG9u
dm9sbGVkaWdoZWlkIHZhbiBkZSBoaWVyaW4gdmVyc3RyZWt0ZSBpbmZvcm1hdGllIGthbiBLZW5u
aXNuZXQgZ2VlbiBhYW5zcHJha2VsaWpraGVpZCBhYW52YWFyZGVuLCBldmVubWluIGt1bm5lbiBh
YW4gZGUgaW5ob3VkIHZhbiBkaXQgYmVyaWNodCAobWV0IGJpamxhZ2VuKSByZWNodGVuIHdvcmRl
biBvbnRsZWVuZC4gRGUgaW5ob3VkIHZhbiBkaXQgYmVyaWNodCAobWV0IGJpamxhZ2VuKSBrYW4g
dmVydHJvdXdlbGlqa2UgaW5mb3JtYXRpZSBiZXZhdHRlbiBlbiBpcyB1aXRzbHVpdGVuZCBiZXN0
ZW1kIHZvb3IgZGUgZ2VhZHJlc3NlZXJkZSB2YW4gZGl0IGJlcmljaHQuIEluZGllbiB1IG5pZXQg
ZGUgYmVvb2dkZSBvbnR2YW5nZXIgdmFuIGRpdCBiZXJpY2h0IGJlbnQsIHZlcnpvZWt0IEtlbm5p
c25ldCB1IGRpdCBiZXJpY2h0IHRlIHZlcndpamRlcmVuLCBldmVudHVlbGUgYmlqbGFnZW4gbmll
dCB0ZSBvcGVuZW4gZW4gd2lqc3QgS2VubmlzbmV0IHUgb3AgZGUgb25yZWNodG1hdGlnaGVpZCB2
YW4gaGV0IGdlYnJ1aWtlbiwga29wacOrcmVuIG9mIHZlcnNwcmVpZGVuIHZhbiBkZSBpbmhvdWQg
dmFuIGRpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4pLg0KDQpUaGlzIG1lc3NhZ2UgKHdpdGggYXR0
YWNobWVudHMpIGlzIGdpdmVuIGluIGdvb2QgZmFpdGguIEtlbm5pc25ldCBjYW5ub3QgYXNzdW1l
IGFueSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIGFjY3VyYWN5IG9yIHJlbGlhYmlsaXR5IG9mIHRo
ZSBpbmZvcm1hdGlvbiBjb250YWluZWQgaW4gdGhpcyBtZXNzYWdlICh3aXRoIGF0dGFjaG1lbnRz
KSwgbm9yIHNoYWxsIHRoZSBpbmZvcm1hdGlvbiBiZSBjb25zdHJ1ZWQgYXMgY29uc3RpdHV0aW5n
IGFueSBvYmxpZ2F0aW9uIG9uIHRoZSBwYXJ0IG9mIEtlbm5pc25ldC4gVGhlIGluZm9ybWF0aW9u
IGNvbnRhaW5lZCBpbiB0aGlzIG1lc3NhZ2UgKHdpdGggYXR0YWNobWVudHMpIG1heSBiZSBjb25m
aWRlbnRpYWwgb3IgcHJpdmlsZWdlZCBhbmQgaXMgb25seSBpbnRlbmRlZCBmb3IgdGhlIHVzZSBv
ZiB0aGUgbmFtZWQgYWRkcmVzc2VlLiBJZiB5b3UgYXJlIG5vdCB0aGUgaW50ZW5kZWQgcmVjaXBp
ZW50LCB5b3UgYXJlIHJlcXVlc3RlZCBieSBLZW5uaXNuZXQgdG8gZGVsZXRlIHRoaXMgbWVzc2Fn
ZSAod2l0aCBhdHRhY2htZW50cykgd2l0aG91dCBvcGVuaW5nIGl0IGFuZCB5b3UgYXJlIG5vdGlm
aWVkIGJ5IEtlbm5pc25ldCB0aGF0IGFueSBkaXNjbG9zdXJlLCBjb3B5aW5nIG9yIGRpc3RyaWJ1
dGlvbiBvZiB0aGUgaW5mb3JtYXRpb24gY29udGFpbmVkIGluIHRoaXMgbWVzc2FnZSAod2l0aCBh
dHRhY2htZW50cykgaXMgc3RyaWN0bHkgcHJvaGliaXRlZCBhbmQgdW5sYXdmdWwuDQoK


From java-user-return-22693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 14:48:27 2006
Return-Path: <java-user-return-22693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21003 invoked from network); 14 Aug 2006 14:48:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 14:48:26 -0000
Received: (qmail 88781 invoked by uid 500); 14 Aug 2006 14:48:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88746 invoked by uid 500); 14 Aug 2006 14:48:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88735 invoked by uid 99); 14 Aug 2006 14:48:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 07:48:20 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 205.152.59.64 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from [205.152.59.64] (HELO imf16aec.mail.bellsouth.net) (205.152.59.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 07:48:18 -0700
Received: from ibm58aec.bellsouth.net ([68.209.119.157])
          by imf16aec.mail.bellsouth.net with ESMTP
          id <20060814144752.DJBG27178.imf16aec.mail.bellsouth.net@ibm58aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Mon, 14 Aug 2006 10:47:52 -0400
Received: from jimwormold ([68.209.119.157]) by ibm58aec.bellsouth.net
          with ESMTP
          id <20060814144747.KBJC10031.ibm58aec.bellsouth.net@jimwormold>
          for <java-user@lucene.apache.org>;
          Mon, 14 Aug 2006 10:47:47 -0400
Date: Mon, 14 Aug 2006 10:53:36 -0400 (EDT)
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: stemmed search and exact match on "same" field
Message-ID: <Pine.LNX.4.63.0608140856001.21921@jimwormold>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've been puzzling this one for a while now, and can't figure it out. 
The idea is to allow stemmed searches and exact matches (tokenized, but 
unstemmed phrase searches) on the same field. The subject of this email 
had "same" in quotes, because it's from the search-client perspective 
that the same field is being searched, whereas the implementation may be 
different.

I have actually implemented a solution whereby content that will require 
searching with both stemmed and unstemmed queries is put into two 
separate fields, one named (e.g.) "field" and the other 
"UNSTEMMED_field". What this requires, however, is a custom query parser 
that can pick out the phrase portions of a query (arbitrarily complex) 
and shunt them to the "UNSTEMMED_" version of the required field (with 
checks that they exist, etc.), the rest of the query being applied to
the stemmed version of the field.

What I would like, however, is to be able to allow the search client to
use QueryParser, but I can't see how that's possible, given that a mixed
query (including term and phrase portions) can be passed to the parser
and only one Analyzer can be applied.

Assuming that the search client, in building a query, can pull out the 
phrase portions of a more complex query, and apply a different (i.e.
non-
stemming analyzer) to those portions, the question of the field would
remain: unless I use the separate field method outlined above, the 
field in the index is going to have stemmed tokens, unstemmed tokens
or both. The latter I tried as an experiment, which seemed interesting,
but turned out to be a brick wall. There may be a way through the wall,
but I can't see it.

Using the very useful "The quick brown fox jumped over the lazy dogs.",
I created an index of one document and indexed the content in a single
field.  The text is passed through the StandardTokenizer, StandardFilter
and LowerCaseFilter.  Then, a custom filter creates a stemmed version of
each Token (using SpellFilter and PorterStemmereFilter), and adds that
at
the same position as the unstemmed Token, with a token type of STEMMED;
I also played with the start and end offsets. The result is:

1: [the:0->3:<ALPHANUM>] [the:0->0:STEMMED] 
2: [quick:4->9:<ALPHANUM>] [quick:0->0:STEMMED] 
3: [brown:10->15:<ALPHANUM>] [brown:0->0:STEMMED] 
4: [fox:16->19:<ALPHANUM>] [fox:0->0:STEMMED] 
5: [jumps:20->25:<ALPHANUM>] [jump:0->0:STEMMED] 
6: [over:26->30:<ALPHANUM>] [over:0->0:STEMMED] 
7: [the:31->34:<ALPHANUM>] [the:0->0:STEMMED] 
8: [lazy:35->39:<ALPHANUM>] [lazi:0->0:STEMMED] 
9: [dogs:40->44:<ALPHANUM>] [dog:0->0:STEMMED]

But as I poke around it appears that there's no way for me to use this
information from the index when searching (or using something like
a HitCollector) to either restrict a search only to the tokens in the 
first position (i.e. the unstemmed ones) or to ignore the tokens of type
STEMMED. Or am I missing something obvious? (I am also concerned that
this will skew the scoring.)

While I would like the queries

     +fox +dog
     "jumps over the lazy dogs"

to match, the following should not match:

     "jump over the lazy dog"

because in my world, the quotes demand an exact match.

Any ideas would be appreciated.
-- Robert


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 14:52:25 2006
Return-Path: <java-user-return-22694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21975 invoked from network); 14 Aug 2006 14:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 14:52:25 -0000
Received: (qmail 96568 invoked by uid 500); 14 Aug 2006 14:52:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96347 invoked by uid 500); 14 Aug 2006 14:52:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96336 invoked by uid 99); 14 Aug 2006 14:52:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 07:52:18 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 07:52:14 -0700
Received: by py-out-1112.google.com with SMTP id s49so1476113pyc
        for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 07:51:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z6Kjrmk9FdI80czPgoHRNHoGMrEVM4q/3WpKL+g+8pkvL47QA8bQpDXEhGkJqYaNvWPnvDnpNx7K4zAyKdHFVu0TTvvJjY4XEwioA0Hx0skm7yccgqnLNUBf0ehhoXlkFrEIjDBjL/OzgHwq4RLoXghzrw0ZvikYcKLl98Edkmw=
Received: by 10.35.57.5 with SMTP id j5mr13475541pyk;
        Mon, 14 Aug 2006 07:51:53 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 14 Aug 2006 07:51:53 -0700 (PDT)
Message-ID: <359a92830608140751k480dac4cwa5f300fdf473a25e@mail.gmail.com>
Date: Mon, 14 Aug 2006 10:51:53 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index not recreated
In-Reply-To: <90166A07138C384F88263316F712056C0B401A@robin.kennisnet.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_161768_32567388.1155567113666"
References: <359a92830608140719o1274ea3eh378e753abea92545@mail.gmail.com>
	 <90166A07138C384F88263316F712056C0B401A@robin.kennisnet.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_161768_32567388.1155567113666
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You have all my sympathy. Let me see if I can restate your problem.....

"Hey Ron. The indexing process doesn't work. We can't/won't let you look at
the process or the results. We can't/won't let you look at the finished
product. We can't/won't let you on the machine where it fails. Now fix it"
<G>.....

There has been some discussion on the threads about "interesing" behavior
with NFS mounts, mostly having to do with locking issues. But if you're
using an NFS mount (or other non-local filesystem), I can imagine that ther=
e
could be other kinds of issues, you might want to search the archive if thi=
s
applies to you....

Good luck!
Erick

On 8/14/06, Ronald Wildenberg <r.wildenberg@kennisnet.org> wrote:
>
> Thanks for your response, comments are below. I'm using Lucene 1.9.1.
>
>
> > Van: Erick Erickson [mailto:erickerickson@gmail.com]
> > Verzonden: maandag 14 augustus 2006 16:20
> > Onderwerp: Re: Index not recreated
> >
> > My first suspicion is that you have duplicate documents on
> > the *input* side, or are somehow adding documents more than
> > once. I use code similar to yours and it works just fine for me.....
>
>
> This was my first suspicion also, but the facts seem to rule out this
> possibility. When I create an index from scratch (without having a previo=
us,
> old one), everything is ok (no duplicates). This only happens the next ti=
me.
> So first I'm going to determine whether the index is really deleted after
> calling FSDirectory.getDirectory(indexDirectory, true). If this is the
> case, I'm going to check whether I add duplicates myself.
>
>
> > How big is the index before and after you re-create it? Twice
> > the size and you're appending, not twice then.....
>
>
> An additional problem is that my issue is only reproducable on the
> production environment and I have very limited access there. I cannot ans=
wer
> this right away. Furthermore, the problem does not occur always, which ma=
kes
> it even more fun ;-)
>
>
> > Are you absolutely sure that you're not somehow, adding
> > documents more than once? I can imagine that this could occur
> > by processing the source multiple times (don't know how you
> > get your input) or adding the document multiple times through
> > some logic error. I've also had my SQL queries return the
> > same row more than once upon occasion, usually cured with the
> > "distinct"
> > qualifier.
> >
> > If you have some sort of unique ID, I can imagine debug code
> > with a set of IDs and error reporting when you add a doc
> > (row) already in your index.....
>
>
> If I'm absolutely positive that the original index is removed by calling
> FSDirectory.getDirectory(indexDirectory, true), I'm going to explore this
> possibility and add some extensive logging to the pieces of code where
> documents are added (I do have a unique id, so this can be checked).
>
>
> > Luke will help you examine your index to see if it's what you
> > think is there. Perhaps another way to test this would be to
> > add (again for
> > debugging) a timestamp field in your index. That way, you
> > would know when you added your duplicate rows.
>
>
> I haven't tried Luke yet to look at the index, since I haven't been able
> to get my hands on the actual index unfortunately.
>
>
> > Finally, you might try creating an index in a new directory
> > that you *know* is empty and seeing what you get and how it
> > compares against your current process. Although I'd expect
> > your indexwriter code to barf if you had file locking issues
> > and couldn't empty the index, I suppose it's possible....
>
>
> That's a good solution if all my other attempts fail :)
>
>
>
> > On 8/14/06, Ronald Wildenberg <r.wildenberg@kennisnet.org> wrote:
> > >
> > > Hi,
> > >
> > > I'm experiencing the problem that my index does not seem to be
> > > recreated, despite using the correct flags. The result is that
> > > documents that represent equal database rows occur multiple
> > times in
> > > the index. I recreate my entire index each night.
> > >
> > > My IndexDirectory/IndexWriter construction code looks like this:
> > >
> > >    File indexDirectory =3D new File(indexPath);
> > >    FSDirectory luceneIndexDirectory =3D
> > > FSDirectory.getDirectory(indexDirectory, true);
> > >    IndexWriter indexWriter =3D new IndexWriter(luceneIndexDirectory,
> > > analyzer, true);
> > >
> > > This code should take care of recreating my index, but it does not
> > > seem to be working properly. It looks like the old index is not
> > > removed and the same documents are added to my index again.
> > >
> > > I have strong reasons to not suspect other code to add duplicate
> > > documents. First, if no index has yet been created, no duplicate
> > > documents are added. Second, if an old index does exist, after
> > > recreating the index all documents exist exactly twice (and the
> > > following night they exist three times, etc.). It is not
> > the case that
> > > some documents are duplicated.
> > >
> > > Does anyone have any ideas?
> > >
> > > Thanks in advance,
> > > Ronald.
> > >
> > >
> > > DISCLAIMER:
> > >
> > > Dit bericht (met bijlagen) is met grote zorgvuldigheid
> > samengesteld.
> > > Voor mogelijke onjuistheid en/of onvolledigheid van de hierin
> > > verstrekte informatie kan Kennisnet geen aansprakelijkheid
> > aanvaarden,
> > > evenmin kunnen aan de inhoud van dit bericht (met bijlagen) rechten
> > > worden ontleend. De inhoud van dit bericht (met bijlagen) kan
> > > vertrouwelijke informatie bevatten en is uitsluitend
> > bestemd voor de
> > > geadresseerde van dit bericht. Indien u niet de beoogde
> > ontvanger van
> > > dit bericht bent, verzoekt Kennisnet u dit bericht te verwijderen,
> > > eventuele bijlagen niet te openen en wijst Kennisnet u op de
> > > onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden
> > van de inhoud van dit bericht (met bijlagen).
> > >
> > > This message (with attachments) is given in good faith. Kennisnet
> > > cannot assume any responsibility for the accuracy or reliability of
> > > the information contained in this message (with attachments), nor
> > > shall the information be construed as constituting any
> > obligation on
> > > the part of Kennisnet. The information contained in this
> > message (with
> > > attachments) may be confidential or privileged and is only intended
> > > for the use of the named addressee. If you are not the intended
> > > recipient, you are requested by Kennisnet to delete this
> > message (with
> > > attachments) without opening it and you are notified by
> > Kennisnet that
> > > any disclosure, copying or distribution of the information
> > contained
> > > in this message (with attachments) is strictly prohibited
> > and unlawful.
> > >
> > >
> > >
> >
>
>
> DISCLAIMER:
>
> Dit bericht (met bijlagen) is met grote zorgvuldigheid samengesteld. Voor
> mogelijke onjuistheid en/of onvolledigheid van de hierin verstrekte
> informatie kan Kennisnet geen aansprakelijkheid aanvaarden, evenmin kunne=
n
> aan de inhoud van dit bericht (met bijlagen) rechten worden ontleend. De
> inhoud van dit bericht (met bijlagen) kan vertrouwelijke informatie bevat=
ten
> en is uitsluitend bestemd voor de geadresseerde van dit bericht. Indien u
> niet de beoogde ontvanger van dit bericht bent, verzoekt Kennisnet u dit
> bericht te verwijderen, eventuele bijlagen niet te openen en wijst Kennis=
net
> u op de onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden van=
 de
> inhoud van dit bericht (met bijlagen).
>
> This message (with attachments) is given in good faith. Kennisnet cannot
> assume any responsibility for the accuracy or reliability of the informat=
ion
> contained in this message (with attachments), nor shall the information b=
e
> construed as constituting any obligation on the part of Kennisnet. The
> information contained in this message (with attachments) may be confident=
ial
> or privileged and is only intended for the use of the named addressee. If
> you are not the intended recipient, you are requested by Kennisnet to del=
ete
> this message (with attachments) without opening it and you are notified b=
y
> Kennisnet that any disclosure, copying or distribution of the information
> contained in this message (with attachments) is strictly prohibited and
> unlawful.
>
>

------=_Part_161768_32567388.1155567113666--

From java-user-return-22695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 15:50:37 2006
Return-Path: <java-user-return-22695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41048 invoked from network); 14 Aug 2006 15:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 15:50:37 -0000
Received: (qmail 5839 invoked by uid 500); 14 Aug 2006 15:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5806 invoked by uid 500); 14 Aug 2006 15:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5795 invoked by uid 99); 14 Aug 2006 15:50:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 08:50:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 08:50:29 -0700
Received: from [10.10.150.11] ([10.10.150.11])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k7EFoEWM010217
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 10:50:15 -0500
Message-ID: <44E09BAF.4000501@wolfram.com>
Date: Mon, 14 Aug 2006 11:50:07 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Indexing existing email archives
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was looking at "http://www.tropo.com/techno/java/lucene/imap.html" and 
my understanding is it is used to retrieve and index the emails that is 
on the email server. I have some stored emails in folders in my local 
disk and huge list of email archives in another system. Is there a way I 
could index them?

I have to have this working in next couple of days. Any help and 
suggestions are appreciated.

thanks,
suba suresh.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 16:16:11 2006
Return-Path: <java-user-return-22696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50269 invoked from network); 14 Aug 2006 16:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 16:16:11 -0000
Received: (qmail 75779 invoked by uid 500); 14 Aug 2006 16:16:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75741 invoked by uid 500); 14 Aug 2006 16:16:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75730 invoked by uid 99); 14 Aug 2006 16:16:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 09:16:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.183] (HELO smtpauth03.prod.mesa1.secureserver.net) (64.202.165.183)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Aug 2006 09:16:00 -0700
Received: (qmail 7951 invoked from network); 14 Aug 2006 16:15:39 -0000
Received: from unknown (209.204.147.41)
  by smtpauth03-04.prod.mesa1.secureserver.net (64.202.165.183) with ESMTP; 14 Aug 2006 16:15:39 -0000
From: "Dejan Nenov" <dejannenov@jollyobject.com>
To: <java-user@lucene.apache.org>
Subject: RE: 30 milllion+ docs on a single server
Date: Mon, 14 Aug 2006 09:15:43 -0700
Organization: Dejan Nenov Privarte Email
Message-ID: <006001c6bfbc$e54be130$8380a8c0@safarijv.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <44DD1151.20800@gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: Aca9nRxceVKFLu6hQ0CoBxQ5IDE+0gCH2J/g
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The important detail here is what you mean by "single server"?
A high-end server will work just fine - you want 4GB+ or RAM and the fastest
disk/IO you can get; CPU speed is far less important; A nice Linux software
RAID and 5+ 15K SCSI disks will get you superb performance, at a reasonable
price.



-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com] 
Sent: Friday, August 11, 2006 4:23 PM
To: java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server

Tomi NA wrote:
> On 8/12/06, Mark Miller <markrmiller@gmail.com> wrote:
>> I've made a nice little archive application with lucene. I made it to
>> handle our largest need: 2.5 million docs or so on a single server. Now
>> the powers that be say: lets use it for a 30+ million document archive
>> on a single server! (each doc size maybe 10k max...as small as a 1 or
>> 2k) Please tell me why we are in trouble...please tell me why we are
>> not. I have tested up to 2 million docs without much trouble but 30
>> million...the average search will include a sort on a field as
>> well...can I search 30+ million docs with a sort? Man am I worried about
>> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
>> Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5
>> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds like
>> too much of a load to me for a single server. Not that they care what I
>> think...I only wrote the thing (man I hate my job, offer me a new one :)
>> )...please...comments?
>>
>> Cheers,
>>
>> Miserable Mark
>
> I don't really understand what you're so worried about. Either it'll
> work well with the setup you have, or it won't. It's really the size
> of it. ;)
> Seriously, you have a number of relatively cheap possibilities at hand
> to improve search performance: storing the index on a RAID 5 disk
> array will let you read the indices very fast, using multicore CPUs,
> adding memory and even if all that isn't good enough, you can always
> use a small cluster (say, 4 nodes) of very, very inexpensive PCs
> filled with a GB of RAM. You don't have to keep them inside the
> regular UPS/backup/voult-protected area as the indices can always be
> rebuilt (unlike e.g. data in transactional systems) and between 4 of
> them they might cost like an entry-level server.
> I'll let the experts speak now. :)
>
> t.n.a.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Thanks for the tip...I am not too worried...I am miserable because I 
live in Dilbert land, not this particular incident. Spreading to 
multiple servers is a possibility but one I want to avoid...I wrote this 
app on the side since our current product is crap...it still needs a lot 
of work and thinking about distributing lucene at this point is a little 
much...I never even have time to work on this project as it is becuase I 
am currently tasked with porting the crap old project to Windows. I need 
to do a bunch to shore up what I have. No one cares though...they think 
that I have done nothing (or can't understand what I have done) while at 
the same time they want to use what I havn't done to do what I made it 
for as well as this new super archive of 30 million + docs...in the end 
I'll be looking for a new job...still curious about lucene scaling to 30 
million docs with a sort on every search though (yes I know the sort is 
cached...worries me too though...the sort will be on multiple and 
different fields depending no what the searcher wants...uggg...the size 
of the caches....)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 16:45:39 2006
Return-Path: <java-user-return-22697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60550 invoked from network); 14 Aug 2006 16:45:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 16:45:39 -0000
Received: (qmail 26330 invoked by uid 500); 14 Aug 2006 16:45:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26306 invoked by uid 500); 14 Aug 2006 16:45:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26295 invoked by uid 99); 14 Aug 2006 16:45:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 09:45:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 09:45:32 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k7EGj8KZ021824
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 09:45:08 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Mon, 14 
	Aug 2006 09:45:08 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: RE: Repeatable field names
Date: Mon, 14 Aug 2006 09:45:07 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E10605685929@mcaosx2.ca.mcao.maricopa.gov>
In-Reply-To: <A8F90A7E212A1B49A8A9EBF2E5C3E106042E33FF@mcaosx2.ca.mcao.maric
	opa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Repeatable field names
Thread-Index: Aca/Ds+JdCl1gy6YTCuL2w/aFHxqnAAnpbifAATlmLA=
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.042
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.52.1006(14628.003)
X-imss-scores: Clean:84.06966 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I have a couple of fields like this (e.g., a given case can have 1:many
case numbers and 1:many defendant aliases).  So there's no problem with
adding the same field n times to a given document?  If so, that's
perfect and i'll add it to the faq.  I was concatenating before and
getting false matches.

________________________________

From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: Sun 8/13/2006 12:28 PM
To: java-user@lucene.apache.org
Subject: Re: Repeatable field names



: subtitle. Can I simple add both fields with a field name title (this
: seems to work fine), or is it a better approach (for example more
: efficient) to concatenate both title and subtitle first and add them
as
: a single field to the index?

there's no reason to concatenate them unless you want to *store* them as
one long string (so you get the value back as a single string instead of
an array of two strings) ... i'm guessing you don't.  from a search
perspective the only difference is that with two values the
positionIncrimentGap method of your analyzer will be called, putting a
"gap" between the last word of hte title and the first word of hte
subtitle ... this can be usefull if you want to make sure that phrase
searches don't falsly match one word in the title and one word in the
subtitle.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 17:36:21 2006
Return-Path: <java-user-return-22698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74962 invoked from network); 14 Aug 2006 17:36:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 17:36:20 -0000
Received: (qmail 88188 invoked by uid 500); 14 Aug 2006 17:36:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88159 invoked by uid 500); 14 Aug 2006 17:36:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88146 invoked by uid 99); 14 Aug 2006 17:36:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 10:36:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 10:36:10 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 14 Aug 2006 13:35:48 -0400
X-OriginatingIP: 10.6.134.35
Content-Type: multipart/mixed; boundary="6yuwp.46lsvUB/1.1211SS.5EcoXmO"
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 14 Aug 2006 13:35:19 -0400
MIME-Version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Subject: 7GB index taking forever to return hits
Date: Mon, 14 Aug 2006 13:35:46 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81143B97CC@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 7GB index taking forever to return hits
Thread-index: Aca/yNRL4RgFuzW2Ru689A/sgPIHmg==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Aug 2006 17:35:19.0863 (UTC) FILETIME=[036F5470:01C6BFC8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--6yuwp.46lsvUB/1.1211SS.5EcoXmO
MIME-Version: 1.0
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6BFC8.1371458F"

------_=_NextPart_001_01C6BFC8.1371458F
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I have a 7GB index (about 45 fields per document X roughly 5.5 million
docs) running on a Windows 2003 32bit machine (dual proc, 2GB memory).
The index is optimized.  Performing a search on this index will just
"hang" when performing the search (wild card query with a sort).  At
first the CPU usage is 100%, then drops down to 50% after a minute or
so, and then no CPU utilization... but the thread is still trying to
perform the search.  I've tried this in my J2EE app and in a main
program.  Is this due to the 2GB limitation of the 32bit OS (I didn't
realize the index would be this big... just let it run over the
weekend). =20

=20

If this is due to the 2GB limitation of the 32bit OS and since I have
this 7GB index built already (and optimized), is there a way to split
this into 2GB indices w/o having to re-index?  Or is this due to another
factor?

=20

Van


------_=_NextPart_001_01C6BFC8.1371458F
Content-Type: text/html;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:Verdana;
	color:windowtext;
	font-weight:normal;
	font-style:normal;
	text-decoration:none none;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-US link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D2 face=3DVerdana><span =
style=3D'font-size:10.0pt;
font-family:Verdana'>Hi,<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DVerdana><span =
style=3D'font-size:10.0pt;
font-family:Verdana'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DVerdana><span =
style=3D'font-size:10.0pt;
font-family:Verdana'>I have a 7GB index (about 45 fields per document X =
roughly
5.5 million docs) running on a Windows 2003 32bit machine (dual proc, =
2GB
memory).&nbsp; The index is optimized.&nbsp; Performing a search on this =
index
will just &#8220;hang&#8221; when performing the search (wild card query =
with a
sort).&nbsp; At first the CPU usage is 100%, then drops down to 50% =
after a
minute or so, and then no CPU utilization&#8230; but the thread is still =
trying
to perform the search.&nbsp; I&#8217;ve tried this in my J2EE app and in =
a main
program.&nbsp; Is this due to the 2GB limitation of the 32bit OS (I =
didn&#8217;t
realize the index would be this big&#8230; just let it run over the
weekend).&nbsp; <o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DVerdana><span =
style=3D'font-size:10.0pt;
font-family:Verdana'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DVerdana><span =
style=3D'font-size:10.0pt;
font-family:Verdana'>If this is due to the 2GB limitation of the 32bit =
OS and since
I have this 7GB index built already (and optimized), is there a way to =
split
this into 2GB indices w/o having to re-index?&nbsp; Or is this due to =
another
factor?<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DVerdana><span =
style=3D'font-size:10.0pt;
font-family:Verdana'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DVerdana><span =
style=3D'font-size:10.0pt;
font-family:Verdana'>Van<o:p></o:p></span></font></p>

</div>

</body>

</html>

------_=_NextPart_001_01C6BFC8.1371458F--
--6yuwp.46lsvUB/1.1211SS.5EcoXmO
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

United Rentals
Consider it done.=E2=84=A2
800-UR-RENTS
unitedrentals.com


--6yuwp.46lsvUB/1.1211SS.5EcoXmO
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--6yuwp.46lsvUB/1.1211SS.5EcoXmO--

From java-user-return-22699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 18:30:09 2006
Return-Path: <java-user-return-22699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90437 invoked from network); 14 Aug 2006 18:30:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 18:30:09 -0000
Received: (qmail 78894 invoked by uid 500); 14 Aug 2006 18:30:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78602 invoked by uid 500); 14 Aug 2006 18:30:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78591 invoked by uid 99); 14 Aug 2006 18:30:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 11:30:02 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 11:30:02 -0700
Received: by nz-out-0102.google.com with SMTP id l8so410553nzf
        for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 11:29:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I8pHsHVGzfsEqIvYCtW/lw/K55U2pcxvjlNzBjiGy3uCKPVBipkyWOWyglbsWNdXmbyPZFWMMFU4Xg8A0Hi/z2+EqqH24a3FWKprnSZnCGwoUjfZKFoXYgHZ7d5xPuZ4uPUY6h13ZqBT6cyi2L04g+E8lgTZHHWGi9zHnnWJJQU=
Received: by 10.35.106.15 with SMTP id i15mr13811566pym;
        Mon, 14 Aug 2006 11:29:41 -0700 (PDT)
Received: by 10.35.8.2 with HTTP; Mon, 14 Aug 2006 11:29:41 -0700 (PDT)
Message-ID: <8e7e4d020608141129u31acc1c9h67866b7ee665ac8@mail.gmail.com>
Date: Mon, 14 Aug 2006 11:29:41 -0700
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 7GB index taking forever to return hits
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81143B97CC@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_152580_29840158.1155580181121"
References: <0D6A3C278F4DC346B98DF4D2F1397E81143B97CC@UREXCHVS3.ur.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_152580_29840158.1155580181121
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

2GB limitation only exists when you want to put them to memory in 32bits
box.
Our index size is larger than 13 giga bytes, and it works fine.
I think it must be something error in your design. You can use Luke to see
what happened in your index.

On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
>
>  Hi,
>
>
>
> I have a 7GB index (about 45 fields per document X roughly 5.5 million
> docs) running on a Windows 2003 32bit machine (dual proc, 2GB memory).  T=
he
> index is optimized.  Performing a search on this index will just "hang" w=
hen
> performing the search (wild card query with a sort).  At first the CPU us=
age
> is 100%, then drops down to 50% after a minute or so, and then no CPU
> utilization=85 but the thread is still trying to perform the search.  I'v=
e
> tried this in my J2EE app and in a main program.  Is this due to the 2GB
> limitation of the 32bit OS (I didn't realize the index would be this big=
=85
> just let it run over the weekend).
>
>
>
> If this is due to the 2GB limitation of the 32bit OS and since I have thi=
s
> 7GB index built already (and optimized), is there a way to split this int=
o
> 2GB indices w/o having to re-index?  Or is this due to another factor?
>
>
>
> Van
>
> United Rentals
> Consider it done.=99
> 800-UR-RENTS
> unitedrentals.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
--
Yueyu Lin

------=_Part_152580_29840158.1155580181121--

From java-user-return-22700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 19:09:01 2006
Return-Path: <java-user-return-22700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7434 invoked from network); 14 Aug 2006 19:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 19:09:01 -0000
Received: (qmail 59801 invoked by uid 500); 14 Aug 2006 19:08:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58829 invoked by uid 500); 14 Aug 2006 19:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58818 invoked by uid 99); 14 Aug 2006 19:08:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:08:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 12:08:54 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E85175B771; Mon, 14 Aug 2006 12:08:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DC8287F403
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 12:08:33 -0700 (PDT)
Date: Mon, 14 Aug 2006 12:08:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: stemmed search and exact match on "same" field
In-Reply-To: <Pine.LNX.4.63.0608140856001.21921@jimwormold>
Message-ID: <Pine.LNX.4.58.0608141157210.14331@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.63.0608140856001.21921@jimwormold>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Therre's a lot of information in your email, and a lot of questions that
relate to similar topics and address different ways of acomplishing
similar but different things ... too much for me to digest
all at once, so lemme start by seeing if i can summarize your goal, and
then give you my suggestion based on the goal as i see it...

You want simple term matches to be "stemmed" but you want phrase ueries to
be "unstemmed"

so if i user queries for the word...
	jumped
...you want that to match any of the words: jump, jumps, jumped, etc...

if a user queries for...
	"the dogs"
...you want that to only match the exact phrase and not something with the
tokens "the dog"

you want these ideas to work, even if phrases and terms are mixed in
the users query...
	foo:jumped bar:"the dogs"

My first though is that you kepe using two versions of hte field (one
stemmed and one unstemmed) and you then subclass QueryParser and override
the getFieldQuery(String field, String queryText) method ... if the second
arg looks like a phrase to you (ie: it has spaces or what not) them return
super.getField(field, queryText).  If it's not a phrase, then call
super.getField(field + "_STEMMED", queryText).

where this breaks down is if you want the non-stemmed behavior even if hte
users "phrase" only contains one word, ie...
	foo:jumped bar:"dogs"
...because the information that "dogs" was in quotes is lost by the time
getFieldQuery is called.  You'd have to write a lot more QueryParsing code
to get that behavior.


In general, for your goal, i would not attempt to put both teh stemmed and
unstemmed tokens in the same field -- because as i think you mentioned,
there is not way to tell them apart at query time.



: Date: Mon, 14 Aug 2006 10:53:36 -0400 (EDT)
: From: Robert Watkins <rwatkins@foo-bar.org>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: stemmed search and exact match on "same" field
:
: I've been puzzling this one for a while now, and can't figure it out.
: The idea is to allow stemmed searches and exact matches (tokenized, but
: unstemmed phrase searches) on the same field. The subject of this email
: had "same" in quotes, because it's from the search-client perspective
: that the same field is being searched, whereas the implementation may be
: different.
:
: I have actually implemented a solution whereby content that will require
: searching with both stemmed and unstemmed queries is put into two
: separate fields, one named (e.g.) "field" and the other
: "UNSTEMMED_field". What this requires, however, is a custom query parser
: that can pick out the phrase portions of a query (arbitrarily complex)
: and shunt them to the "UNSTEMMED_" version of the required field (with
: checks that they exist, etc.), the rest of the query being applied to
: the stemmed version of the field.
:
: What I would like, however, is to be able to allow the search client to
: use QueryParser, but I can't see how that's possible, given that a mixed
: query (including term and phrase portions) can be passed to the parser
: and only one Analyzer can be applied.
:
: Assuming that the search client, in building a query, can pull out the
: phrase portions of a more complex query, and apply a different (i.e.
: non-
: stemming analyzer) to those portions, the question of the field would
: remain: unless I use the separate field method outlined above, the
: field in the index is going to have stemmed tokens, unstemmed tokens
: or both. The latter I tried as an experiment, which seemed interesting,
: but turned out to be a brick wall. There may be a way through the wall,
: but I can't see it.
:
: Using the very useful "The quick brown fox jumped over the lazy dogs.",
: I created an index of one document and indexed the content in a single
: field.  The text is passed through the StandardTokenizer, StandardFilter
: and LowerCaseFilter.  Then, a custom filter creates a stemmed version of
: each Token (using SpellFilter and PorterStemmereFilter), and adds that
: at
: the same position as the unstemmed Token, with a token type of STEMMED;
: I also played with the start and end offsets. The result is:
:
: 1: [the:0->3:<ALPHANUM>] [the:0->0:STEMMED]
: 2: [quick:4->9:<ALPHANUM>] [quick:0->0:STEMMED]
: 3: [brown:10->15:<ALPHANUM>] [brown:0->0:STEMMED]
: 4: [fox:16->19:<ALPHANUM>] [fox:0->0:STEMMED]
: 5: [jumps:20->25:<ALPHANUM>] [jump:0->0:STEMMED]
: 6: [over:26->30:<ALPHANUM>] [over:0->0:STEMMED]
: 7: [the:31->34:<ALPHANUM>] [the:0->0:STEMMED]
: 8: [lazy:35->39:<ALPHANUM>] [lazi:0->0:STEMMED]
: 9: [dogs:40->44:<ALPHANUM>] [dog:0->0:STEMMED]
:
: But as I poke around it appears that there's no way for me to use this
: information from the index when searching (or using something like
: a HitCollector) to either restrict a search only to the tokens in the
: first position (i.e. the unstemmed ones) or to ignore the tokens of type
: STEMMED. Or am I missing something obvious? (I am also concerned that
: this will skew the scoring.)
:
: While I would like the queries
:
:      +fox +dog
:      "jumps over the lazy dogs"
:
: to match, the following should not match:
:
:      "jump over the lazy dog"
:
: because in my world, the quotes demand an exact match.
:
: Any ideas would be appreciated.
: -- Robert
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 14 23:56:11 2006
Return-Path: <java-user-return-22701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91472 invoked from network); 14 Aug 2006 23:56:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2006 23:56:11 -0000
Received: (qmail 59544 invoked by uid 500); 14 Aug 2006 23:56:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59505 invoked by uid 500); 14 Aug 2006 23:56:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59494 invoked by uid 99); 14 Aug 2006 23:56:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:56:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 16:56:04 -0700
Received: from [192.168.0.105] (c-24-63-81-15.hsd1.ma.comcast.net [24.63.81.15])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k7ENtnRl017950
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 18:55:50 -0500
Message-ID: <44E10D7D.9090307@wolfram.com>
Date: Mon, 14 Aug 2006 19:55:41 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing existing email archives
References: <44E09BAF.4000501@wolfram.com>
In-Reply-To: <44E09BAF.4000501@wolfram.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

	Can someone help me?

suba suresh

Suba Suresh wrote:
> I was looking at "http://www.tropo.com/techno/java/lucene/imap.html" and 
> my understanding is it is used to retrieve and index the emails that is 
> on the email server. I have some stored emails in folders in my local 
> disk and huge list of email archives in another system. Is there a way I 
> could index them?
> 
> I have to have this working in next couple of days. Any help and 
> suggestions are appreciated.
> 
> thanks,
> suba suresh.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 00:10:58 2006
Return-Path: <java-user-return-22702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96503 invoked from network); 15 Aug 2006 00:10:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 00:10:58 -0000
Received: (qmail 72033 invoked by uid 500); 15 Aug 2006 00:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72015 invoked by uid 500); 15 Aug 2006 00:10:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72004 invoked by uid 99); 15 Aug 2006 00:10:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:10:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:10:51 -0700
Received: (qmail 20761 invoked from network); 15 Aug 2006 00:10:28 -0000
Received: from unknown (HELO p5496f2c0.dip.t-dialin.net) ([pbs]695637@[84.150.242.192])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 15 Aug 2006 00:10:28 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Indexing existing email archives
Date: Tue, 15 Aug 2006 02:10:09 +0200
User-Agent: KMail/1.8.2
References: <44E09BAF.4000501@wolfram.com>
In-Reply-To: <44E09BAF.4000501@wolfram.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200608150210.09740@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Montag 14 August 2006 17:50, Suba Suresh wrote:

> I have some stored emails in folders in my local
> disk and huge list of email archives in another system.

Lucene can only index plain text, so if you can convert these mails to text 
you can index them without any problem.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 00:21:15 2006
Return-Path: <java-user-return-22703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1239 invoked from network); 15 Aug 2006 00:21:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 00:21:14 -0000
Received: (qmail 88435 invoked by uid 500); 15 Aug 2006 00:21:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88409 invoked by uid 500); 15 Aug 2006 00:21:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88398 invoked by uid 99); 15 Aug 2006 00:21:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:21:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:21:07 -0700
Received: (qmail 3855 invoked from network); 15 Aug 2006 00:20:45 -0000
Received: from unknown (HELO p5496d5a8.dip.t-dialin.net) ([pbs]695637@[84.150.213.168])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 15 Aug 2006 00:20:45 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: a "fair" similarity
Date: Tue, 15 Aug 2006 02:20:26 +0200
User-Agent: KMail/1.8.2
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200608150220.26216@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

as some of you may have noticed, Lucene prefers shorter documents over 
longer ones, i.e. shorter documents get a higher ranking, even if the 
ratio "matched terms / total terms in document" is the same.

For example, take these two artificial documents:

doc1: x 2 3 4 5 6 7 8 9 10
doc2: x x 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20

When searching for "x" doc1 will get a higher ranking, even though "x" 
makes up 1/10 of the terms in both documents.

Using this similarity implementation seems to "fix" that:

class MySim extends DefaultSimilarity {
 
  public float lengthNorm(String fieldName, int numTerms) {
    return (float)(1.0 / numTerms);
  }
  
  public float tf(float freq) {
    return (float)freq;
  }

}

It's basically just the default implementation with Math.sqrt() removed. Is 
this the correct approach? Are there any problems to expect? I just tested 
it with the documents cited above.

The use case is that I want to boost fields, e.g. "body:foo^2 title:blah". 
This could lead to strange results if title is already preferred just 
because it's shorter.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 00:26:02 2006
Return-Path: <java-user-return-22704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3474 invoked from network); 15 Aug 2006 00:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 00:26:01 -0000
Received: (qmail 96857 invoked by uid 500); 15 Aug 2006 00:25:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96832 invoked by uid 500); 15 Aug 2006 00:25:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96821 invoked by uid 99); 15 Aug 2006 00:25:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:25:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:25:55 -0700
Received: by nf-out-0910.google.com with SMTP id x4so131419nfb
        for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 17:25:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ejfQ3h7Pu0yaU6g+Q7V16xhTf2253YmSG6EucsnAl2a1tlfG4D2eVtbrbkHscLNHZn24PgdzvxFF97glfolbw/6FoxXwqrIU/U0WCXJcaCdcLiSwQ72KaUeu2K0GyJ50Z1+9rfMao9XcVCZIjpfAqSwq+0kSZrYS/27cT0Mo4Uk=
Received: by 10.48.220.15 with SMTP id s15mr543080nfg;
        Mon, 14 Aug 2006 17:25:33 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Mon, 14 Aug 2006 17:25:32 -0700 (PDT)
Message-ID: <d8050f240608141725g57ef419cx2637d3e4e268e5d5@mail.gmail.com>
Date: Tue, 15 Aug 2006 10:25:33 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index not recreated
In-Reply-To: <359a92830608140751k480dac4cwa5f300fdf473a25e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20087_26454292.1155601533408"
References: <359a92830608140719o1274ea3eh378e753abea92545@mail.gmail.com>
	 <90166A07138C384F88263316F712056C0B401A@robin.kennisnet.org>
	 <359a92830608140751k480dac4cwa5f300fdf473a25e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20087_26454292.1155601533408
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

My advice would be the "back-to-basics" approach.  Create a test case which
creates a simple index with a few documents, verify the index is as you
expect, then re-create the index and verify again.  Run this test case on
your production environment (if you are able).  This will determine once an=
d
for all whether it's the production environment, your code or Lucene causin=
g
the problem.  Then work back from this point.

The alternative is that you spend hours looking into areas which are
actually working fine.

On 8/15/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> You have all my sympathy. Let me see if I can restate your problem.....
>
> "Hey Ron. The indexing process doesn't work. We can't/won't let you look
> at
> the process or the results. We can't/won't let you look at the finished
> product. We can't/won't let you on the machine where it fails. Now fix it=
"
> <G>.....
>
> There has been some discussion on the threads about "interesing" behavior
> with NFS mounts, mostly having to do with locking issues. But if you're
> using an NFS mount (or other non-local filesystem), I can imagine that
> there
> could be other kinds of issues, you might want to search the archive if
> this
> applies to you....
>
> Good luck!
> Erick
>
> On 8/14/06, Ronald Wildenberg <r.wildenberg@kennisnet.org> wrote:
> >
> > Thanks for your response, comments are below. I'm using Lucene 1.9.1.
> >
> >
> > > Van: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Verzonden: maandag 14 augustus 2006 16:20
> > > Onderwerp: Re: Index not recreated
> > >
> > > My first suspicion is that you have duplicate documents on
> > > the *input* side, or are somehow adding documents more than
> > > once. I use code similar to yours and it works just fine for me.....
> >
> >
> > This was my first suspicion also, but the facts seem to rule out this
> > possibility. When I create an index from scratch (without having a
> previous,
> > old one), everything is ok (no duplicates). This only happens the next
> time.
> > So first I'm going to determine whether the index is really deleted
> after
> > calling FSDirectory.getDirectory(indexDirectory, true). If this is the
> > case, I'm going to check whether I add duplicates myself.
> >
> >
> > > How big is the index before and after you re-create it? Twice
> > > the size and you're appending, not twice then.....
> >
> >
> > An additional problem is that my issue is only reproducable on the
> > production environment and I have very limited access there. I cannot
> answer
> > this right away. Furthermore, the problem does not occur always, which
> makes
> > it even more fun ;-)
> >
> >
> > > Are you absolutely sure that you're not somehow, adding
> > > documents more than once? I can imagine that this could occur
> > > by processing the source multiple times (don't know how you
> > > get your input) or adding the document multiple times through
> > > some logic error. I've also had my SQL queries return the
> > > same row more than once upon occasion, usually cured with the
> > > "distinct"
> > > qualifier.
> > >
> > > If you have some sort of unique ID, I can imagine debug code
> > > with a set of IDs and error reporting when you add a doc
> > > (row) already in your index.....
> >
> >
> > If I'm absolutely positive that the original index is removed by callin=
g
> > FSDirectory.getDirectory(indexDirectory, true), I'm going to explore
> this
> > possibility and add some extensive logging to the pieces of code where
> > documents are added (I do have a unique id, so this can be checked).
> >
> >
> > > Luke will help you examine your index to see if it's what you
> > > think is there. Perhaps another way to test this would be to
> > > add (again for
> > > debugging) a timestamp field in your index. That way, you
> > > would know when you added your duplicate rows.
> >
> >
> > I haven't tried Luke yet to look at the index, since I haven't been abl=
e
> > to get my hands on the actual index unfortunately.
> >
> >
> > > Finally, you might try creating an index in a new directory
> > > that you *know* is empty and seeing what you get and how it
> > > compares against your current process. Although I'd expect
> > > your indexwriter code to barf if you had file locking issues
> > > and couldn't empty the index, I suppose it's possible....
> >
> >
> > That's a good solution if all my other attempts fail :)
> >
> >
> >
> > > On 8/14/06, Ronald Wildenberg <r.wildenberg@kennisnet.org> wrote:
> > > >
> > > > Hi,
> > > >
> > > > I'm experiencing the problem that my index does not seem to be
> > > > recreated, despite using the correct flags. The result is that
> > > > documents that represent equal database rows occur multiple
> > > times in
> > > > the index. I recreate my entire index each night.
> > > >
> > > > My IndexDirectory/IndexWriter construction code looks like this:
> > > >
> > > >    File indexDirectory =3D new File(indexPath);
> > > >    FSDirectory luceneIndexDirectory =3D
> > > > FSDirectory.getDirectory(indexDirectory, true);
> > > >    IndexWriter indexWriter =3D new IndexWriter(luceneIndexDirectory=
,
> > > > analyzer, true);
> > > >
> > > > This code should take care of recreating my index, but it does not
> > > > seem to be working properly. It looks like the old index is not
> > > > removed and the same documents are added to my index again.
> > > >
> > > > I have strong reasons to not suspect other code to add duplicate
> > > > documents. First, if no index has yet been created, no duplicate
> > > > documents are added. Second, if an old index does exist, after
> > > > recreating the index all documents exist exactly twice (and the
> > > > following night they exist three times, etc.). It is not
> > > the case that
> > > > some documents are duplicated.
> > > >
> > > > Does anyone have any ideas?
> > > >
> > > > Thanks in advance,
> > > > Ronald.
> > > >
> > > >
> > > > DISCLAIMER:
> > > >
> > > > Dit bericht (met bijlagen) is met grote zorgvuldigheid
> > > samengesteld.
> > > > Voor mogelijke onjuistheid en/of onvolledigheid van de hierin
> > > > verstrekte informatie kan Kennisnet geen aansprakelijkheid
> > > aanvaarden,
> > > > evenmin kunnen aan de inhoud van dit bericht (met bijlagen) rechten
> > > > worden ontleend. De inhoud van dit bericht (met bijlagen) kan
> > > > vertrouwelijke informatie bevatten en is uitsluitend
> > > bestemd voor de
> > > > geadresseerde van dit bericht. Indien u niet de beoogde
> > > ontvanger van
> > > > dit bericht bent, verzoekt Kennisnet u dit bericht te verwijderen,
> > > > eventuele bijlagen niet te openen en wijst Kennisnet u op de
> > > > onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden
> > > van de inhoud van dit bericht (met bijlagen).
> > > >
> > > > This message (with attachments) is given in good faith. Kennisnet
> > > > cannot assume any responsibility for the accuracy or reliability of
> > > > the information contained in this message (with attachments), nor
> > > > shall the information be construed as constituting any
> > > obligation on
> > > > the part of Kennisnet. The information contained in this
> > > message (with
> > > > attachments) may be confidential or privileged and is only intended
> > > > for the use of the named addressee. If you are not the intended
> > > > recipient, you are requested by Kennisnet to delete this
> > > message (with
> > > > attachments) without opening it and you are notified by
> > > Kennisnet that
> > > > any disclosure, copying or distribution of the information
> > > contained
> > > > in this message (with attachments) is strictly prohibited
> > > and unlawful.
> > > >
> > > >
> > > >
> > >
> >
> >
> > DISCLAIMER:
> >
> > Dit bericht (met bijlagen) is met grote zorgvuldigheid samengesteld.
> Voor
> > mogelijke onjuistheid en/of onvolledigheid van de hierin verstrekte
> > informatie kan Kennisnet geen aansprakelijkheid aanvaarden, evenmin
> kunnen
> > aan de inhoud van dit bericht (met bijlagen) rechten worden ontleend. D=
e
> > inhoud van dit bericht (met bijlagen) kan vertrouwelijke informatie
> bevatten
> > en is uitsluitend bestemd voor de geadresseerde van dit bericht. Indien
> u
> > niet de beoogde ontvanger van dit bericht bent, verzoekt Kennisnet u di=
t
> > bericht te verwijderen, eventuele bijlagen niet te openen en wijst
> Kennisnet
> > u op de onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden v=
an
> de
> > inhoud van dit bericht (met bijlagen).
> >
> > This message (with attachments) is given in good faith. Kennisnet canno=
t
> > assume any responsibility for the accuracy or reliability of the
> information
> > contained in this message (with attachments), nor shall the information
> be
> > construed as constituting any obligation on the part of Kennisnet. The
> > information contained in this message (with attachments) may be
> confidential
> > or privileged and is only intended for the use of the named addressee.
> If
> > you are not the intended recipient, you are requested by Kennisnet to
> delete
> > this message (with attachments) without opening it and you are notified
> by
> > Kennisnet that any disclosure, copying or distribution of the
> information
> > contained in this message (with attachments) is strictly prohibited and
> > unlawful.
> >
> >
>
>

------=_Part_20087_26454292.1155601533408--

From java-user-return-22705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 00:28:37 2006
Return-Path: <java-user-return-22705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4624 invoked from network); 15 Aug 2006 00:28:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 00:28:36 -0000
Received: (qmail 1114 invoked by uid 500); 15 Aug 2006 00:28:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1087 invoked by uid 500); 15 Aug 2006 00:28:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1075 invoked by uid 99); 15 Aug 2006 00:28:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:28:30 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:28:27 -0700
Received: by nf-out-0910.google.com with SMTP id x4so132030nfb
        for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 17:28:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GxWngpghPa6DFzWwz6xIHgQ/UOIdLdDGzSwSruQ42Z7qx66/msKHn2ualCaHkOfaFaoiVUlhnc+L5FgrvsjzoM4bdYz5WWvlHGva/cVdXpKLPxdECUWmTmBnNyJ0ly6pOSPGeI2y6SV4VMyjjjhpyi7O0XtaGG5d8fBd3yOKpm8=
Received: by 10.49.21.8 with SMTP id y8mr539717nfi;
        Mon, 14 Aug 2006 17:28:05 -0700 (PDT)
Received: by 10.82.127.16 with HTTP; Mon, 14 Aug 2006 17:28:05 -0700 (PDT)
Message-ID: <d8050f240608141728s48f88b99waabaa4ca4a7fb261@mail.gmail.com>
Date: Tue, 15 Aug 2006 10:28:05 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index not recreated
In-Reply-To: <d8050f240608141725g57ef419cx2637d3e4e268e5d5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20123_11250134.1155601685539"
References: <359a92830608140719o1274ea3eh378e753abea92545@mail.gmail.com>
	 <90166A07138C384F88263316F712056C0B401A@robin.kennisnet.org>
	 <359a92830608140751k480dac4cwa5f300fdf473a25e@mail.gmail.com>
	 <d8050f240608141725g57ef419cx2637d3e4e268e5d5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20123_11250134.1155601685539
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

PS...

The "intermittent" nature of your problem points to a concurrency issue.
Does the production environment have a greater number of users?  If so, thi=
s
likely translates to a greater number of threads acting upon the index.  I'=
d
be looking for possible conflicts between different threads accessing the
index.  This would also explain why you see the problem in production and
not testing.

On 8/15/06, Jason Polites <jason.polites@gmail.com> wrote:
>
> My advice would be the "back-to-basics" approach.  Create a test case
> which creates a simple index with a few documents, verify the index is as
> you expect, then re-create the index and verify again.  Run this test cas=
e
> on your production environment (if you are able).  This will determine on=
ce
> and for all whether it's the production environment, your code or Lucene
> causing the problem.  Then work back from this point.
>
> The alternative is that you spend hours looking into areas which are
> actually working fine.
>
>
> On 8/15/06, Erick Erickson < erickerickson@gmail.com> wrote:
> >
> > You have all my sympathy. Let me see if I can restate your problem.....
> >
> > "Hey Ron. The indexing process doesn't work. We can't/won't let you loo=
k
> > at
> > the process or the results. We can't/won't let you look at the finished
> > product. We can't/won't let you on the machine where it fails. Now fix
> > it"
> > <G>.....
> >
> > There has been some discussion on the threads about "interesing"
> > behavior
> > with NFS mounts, mostly having to do with locking issues. But if you're
> > using an NFS mount (or other non-local filesystem), I can imagine that
> > there
> > could be other kinds of issues, you might want to search the archive if
> > this
> > applies to you....
> >
> > Good luck!
> > Erick
> >
> > On 8/14/06, Ronald Wildenberg <r.wildenberg@kennisnet.org > wrote:
> > >
> > > Thanks for your response, comments are below. I'm using Lucene 1.9.1.
> > >
> > >
> > > > Van: Erick Erickson [mailto:erickerickson@gmail.com ]
> > > > Verzonden: maandag 14 augustus 2006 16:20
> > > > Onderwerp: Re: Index not recreated
> > > >
> > > > My first suspicion is that you have duplicate documents on
> > > > the *input* side, or are somehow adding documents more than
> > > > once. I use code similar to yours and it works just fine for me....=
.
> > >
> > >
> > > This was my first suspicion also, but the facts seem to rule out this
> > > possibility. When I create an index from scratch (without having a
> > previous,
> > > old one), everything is ok (no duplicates). This only happens the nex=
t
> > time.
> > > So first I'm going to determine whether the index is really deleted
> > after
> > > calling FSDirectory.getDirectory(indexDirectory, true). If this is th=
e
> >
> > > case, I'm going to check whether I add duplicates myself.
> > >
> > >
> > > > How big is the index before and after you re-create it? Twice
> > > > the size and you're appending, not twice then.....
> > >
> > >
> > > An additional problem is that my issue is only reproducable on the
> > > production environment and I have very limited access there. I cannot
> > answer
> > > this right away. Furthermore, the problem does not occur always, whic=
h
> > makes
> > > it even more fun ;-)
> > >
> > >
> > > > Are you absolutely sure that you're not somehow, adding
> > > > documents more than once? I can imagine that this could occur
> > > > by processing the source multiple times (don't know how you
> > > > get your input) or adding the document multiple times through
> > > > some logic error. I've also had my SQL queries return the
> > > > same row more than once upon occasion, usually cured with the
> > > > "distinct"
> > > > qualifier.
> > > >
> > > > If you have some sort of unique ID, I can imagine debug code
> > > > with a set of IDs and error reporting when you add a doc
> > > > (row) already in your index.....
> > >
> > >
> > > If I'm absolutely positive that the original index is removed by
> > calling
> > > FSDirectory.getDirectory(indexDirectory, true), I'm going to explore
> > this
> > > possibility and add some extensive logging to the pieces of code wher=
e
> >
> > > documents are added (I do have a unique id, so this can be checked).
> > >
> > >
> > > > Luke will help you examine your index to see if it's what you
> > > > think is there. Perhaps another way to test this would be to
> > > > add (again for
> > > > debugging) a timestamp field in your index. That way, you
> > > > would know when you added your duplicate rows.
> > >
> > >
> > > I haven't tried Luke yet to look at the index, since I haven't been
> > able
> > > to get my hands on the actual index unfortunately.
> > >
> > >
> > > > Finally, you might try creating an index in a new directory
> > > > that you *know* is empty and seeing what you get and how it
> > > > compares against your current process. Although I'd expect
> > > > your indexwriter code to barf if you had file locking issues
> > > > and couldn't empty the index, I suppose it's possible....
> > >
> > >
> > > That's a good solution if all my other attempts fail :)
> > >
> > >
> > >
> > > > On 8/14/06, Ronald Wildenberg <r.wildenberg@kennisnet.org > wrote:
> > > > >
> > > > > Hi,
> > > > >
> > > > > I'm experiencing the problem that my index does not seem to be
> > > > > recreated, despite using the correct flags. The result is that
> > > > > documents that represent equal database rows occur multiple
> > > > times in
> > > > > the index. I recreate my entire index each night.
> > > > >
> > > > > My IndexDirectory/IndexWriter construction code looks like this:
> > > > >
> > > > >    File indexDirectory =3D new File(indexPath);
> > > > >    FSDirectory luceneIndexDirectory =3D
> > > > > FSDirectory.getDirectory(indexDirectory, true);
> > > > >    IndexWriter indexWriter =3D new IndexWriter(luceneIndexDirecto=
ry,
> >
> > > > > analyzer, true);
> > > > >
> > > > > This code should take care of recreating my index, but it does no=
t
> > > > > seem to be working properly. It looks like the old index is not
> > > > > removed and the same documents are added to my index again.
> > > > >
> > > > > I have strong reasons to not suspect other code to add duplicate
> > > > > documents. First, if no index has yet been created, no duplicate
> > > > > documents are added. Second, if an old index does exist, after
> > > > > recreating the index all documents exist exactly twice (and the
> > > > > following night they exist three times, etc.). It is not
> > > > the case that
> > > > > some documents are duplicated.
> > > > >
> > > > > Does anyone have any ideas?
> > > > >
> > > > > Thanks in advance,
> > > > > Ronald.
> > > > >
> > > > >
> > > > > DISCLAIMER:
> > > > >
> > > > > Dit bericht (met bijlagen) is met grote zorgvuldigheid
> > > > samengesteld.
> > > > > Voor mogelijke onjuistheid en/of onvolledigheid van de hierin
> > > > > verstrekte informatie kan Kennisnet geen aansprakelijkheid
> > > > aanvaarden,
> > > > > evenmin kunnen aan de inhoud van dit bericht (met bijlagen)
> > rechten
> > > > > worden ontleend. De inhoud van dit bericht (met bijlagen) kan
> > > > > vertrouwelijke informatie bevatten en is uitsluitend
> > > > bestemd voor de
> > > > > geadresseerde van dit bericht. Indien u niet de beoogde
> > > > ontvanger van
> > > > > dit bericht bent, verzoekt Kennisnet u dit bericht te verwijderen=
,
> >
> > > > > eventuele bijlagen niet te openen en wijst Kennisnet u op de
> > > > > onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden
> > > > van de inhoud van dit bericht (met bijlagen).
> > > > >
> > > > > This message (with attachments) is given in good faith. Kennisnet
> > > > > cannot assume any responsibility for the accuracy or reliability
> > of
> > > > > the information contained in this message (with attachments), nor
> > > > > shall the information be construed as constituting any
> > > > obligation on
> > > > > the part of Kennisnet. The information contained in this
> > > > message (with
> > > > > attachments) may be confidential or privileged and is only
> > intended
> > > > > for the use of the named addressee. If you are not the intended
> > > > > recipient, you are requested by Kennisnet to delete this
> > > > message (with
> > > > > attachments) without opening it and you are notified by
> > > > Kennisnet that
> > > > > any disclosure, copying or distribution of the information
> > > > contained
> > > > > in this message (with attachments) is strictly prohibited
> > > > and unlawful.
> > > > >
> > > > >
> > > > >
> > > >
> > >
> > >
> > > DISCLAIMER:
> > >
> > > Dit bericht (met bijlagen) is met grote zorgvuldigheid samengesteld.
> > Voor
> > > mogelijke onjuistheid en/of onvolledigheid van de hierin verstrekte
> > > informatie kan Kennisnet geen aansprakelijkheid aanvaarden, evenmin
> > kunnen
> > > aan de inhoud van dit bericht (met bijlagen) rechten worden ontleend.
> > De
> > > inhoud van dit bericht (met bijlagen) kan vertrouwelijke informatie
> > bevatten
> > > en is uitsluitend bestemd voor de geadresseerde van dit bericht.
> > Indien u
> > > niet de beoogde ontvanger van dit bericht bent, verzoekt Kennisnet u
> > dit
> > > bericht te verwijderen, eventuele bijlagen niet te openen en wijst
> > Kennisnet
> > > u op de onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden
> > van de
> > > inhoud van dit bericht (met bijlagen).
> > >
> > > This message (with attachments) is given in good faith. Kennisnet
> > cannot
> > > assume any responsibility for the accuracy or reliability of the
> > information
> > > contained in this message (with attachments), nor shall the
> > information be
> > > construed as constituting any obligation on the part of Kennisnet. Th=
e
> >
> > > information contained in this message (with attachments) may be
> > confidential
> > > or privileged and is only intended for the use of the named addressee=
.
> > If
> > > you are not the intended recipient, you are requested by Kennisnet to
> > delete
> > > this message (with attachments) without opening it and you are
> > notified by
> > > Kennisnet that any disclosure, copying or distribution of the
> > information
> > > contained in this message (with attachments) is strictly prohibited
> > and
> > > unlawful.
> > >
> > >
> >
> >
>

------=_Part_20123_11250134.1155601685539--

From java-user-return-22706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 00:30:02 2006
Return-Path: <java-user-return-22706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6226 invoked from network); 15 Aug 2006 00:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 00:30:01 -0000
Received: (qmail 6438 invoked by uid 500); 15 Aug 2006 00:29:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6413 invoked by uid 500); 15 Aug 2006 00:29:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6402 invoked by uid 99); 15 Aug 2006 00:29:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:29:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:29:54 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 14 Aug 2006 20:29:33 -0400
X-OriginatingIP: 10.6.134.35
Content-Type: multipart/mixed; boundary="6zHA7.46mE1DgKB.CtuxI.FyBrvU"
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 14 Aug 2006 20:29:05 -0400
X-MIMEOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Subject: RE: 7GB index taking forever to return hits
Date: Mon, 14 Aug 2006 20:30:17 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E811450932F@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 7GB index taking forever to return hits
Thread-index: Aca/z6yqE+ELYx84RTyP5WgOpSninQALGBeg
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Aug 2006 00:29:05.0635 (UTC) FILETIME=[D0BF8330:01C6C001]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--6zHA7.46mE1DgKB.CtuxI.FyBrvU
MIME-Version: 1.0
Content-class: urn:content-classes:message
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

It was how I was implementing the search. =20

I am using a boolean query.  Prior to the 7GB index, I was searching
over a 150MB index that consist of a very small part of the bigger
index.  I was able to set my BooleanQuery to
BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) and that worked fine.
But I think that's the cause of my problem with this bigger index.
Commenting that out, I get an TooManyClause Exception.  A typical query
would look something like this:

+CONTENTS:*white* +CONTENTS:*hard* +CONTENTS:*hat* +COMPANY_CODE:u1
+LANGUAGE:enu -SKU_DESC_ID:0 +IS_DC:d +LOCATION:b72

BooleanQuery q =3D new BooleanQuery();

WildcardQuery wc1 =3D new WildcardQuery("CONTENTS", "*white*");
WildcardQuery wc2 =3D new WildcardQuery("CONTENTS", "*hard*");
WildcardQuery wc3 =3D new WildcardQuery("CONTENTS", "*hat*");
q.add(wc1, BooleanClause.Occur.MUST);
q.add(wc2, BooleanClause.Occur.MUST);
q.add(wc3, BooleanClause.Occur.MUST);

TermQuery t1 =3D new TermQuery("COMPANY_CODE", "u1");
q.add(t1, BooleanClause.Occur.MUST);

TermQuery t2 =3D new TermQuery("LANGUAGE", "enu");
q.add(t2, BooleanClause.Occur.MUST);
.
.
.

I take it this is not the most optimal way about this. =20

So that leads me to my next question... What is the most optimal way
about this?

Van

-----Original Message-----
From: yueyu lin [mailto:popeyelin@gmail.com]=20
Sent: Monday, August 14, 2006 11:30 AM
To: java-user@lucene.apache.org
Subject: Re: 7GB index taking forever to return hits

2GB limitation only exists when you want to put them to memory in 32bits
box.
Our index size is larger than 13 giga bytes, and it works fine.
I think it must be something error in your design. You can use Luke to
see what happened in your index.

On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
>
>  Hi,
>
>
>
> I have a 7GB index (about 45 fields per document X roughly 5.5 million
> docs) running on a Windows 2003 32bit machine (dual proc, 2GB memory).

> The index is optimized.  Performing a search on this index will just=20
> "hang" when performing the search (wild card query with a sort).  At=20
> first the CPU usage is 100%, then drops down to 50% after a minute or=20
> so, and then no CPU utilization... but the thread is still trying to=20
> perform the search.  I've tried this in my J2EE app and in a main=20
> program.  Is this due to the 2GB limitation of the 32bit OS (I didn't=20
> realize the index would be this big... just let it run over the
weekend).
>
>
>
> If this is due to the 2GB limitation of the 32bit OS and since I have=20
> this 7GB index built already (and optimized), is there a way to split=20
> this into 2GB indices w/o having to re-index?  Or is this due to
another factor?
>
>
>
> Van
>
> United Rentals
> Consider it done.(tm)
> 800-UR-RENTS
> unitedrentals.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
--
Yueyu Lin
--6zHA7.46mE1DgKB.CtuxI.FyBrvU
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

United Rentals
Consider it done.=E2=84=A2
800-UR-RENTS
unitedrentals.com


--6zHA7.46mE1DgKB.CtuxI.FyBrvU
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--6zHA7.46mE1DgKB.CtuxI.FyBrvU--

From java-user-return-22707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 00:40:31 2006
Return-Path: <java-user-return-22707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10141 invoked from network); 15 Aug 2006 00:40:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 00:40:30 -0000
Received: (qmail 26394 invoked by uid 500); 15 Aug 2006 00:40:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26364 invoked by uid 500); 15 Aug 2006 00:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26353 invoked by uid 99); 15 Aug 2006 00:40:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:40:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 17:40:23 -0700
Received: by py-out-1112.google.com with SMTP id s49so1649475pyc
        for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 17:40:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FiL86Ad7X7+yX8rqfD8HtQG4Odrz4oYZtsE46iJn114yvSDgKeq031L+cUsowhUjRbf6+n3uHDg3lVk0dGYQpUjjOOp7vCYeDofW46YqFOght3xU/nytr82XMAS9lP5wftMwIhG6aJlbV01lcQdRCbSO26oVSrpQZmxW4WgJjdE=
Received: by 10.35.105.18 with SMTP id h18mr14358822pym;
        Mon, 14 Aug 2006 17:40:02 -0700 (PDT)
Received: by 10.35.8.2 with HTTP; Mon, 14 Aug 2006 17:40:02 -0700 (PDT)
Message-ID: <8e7e4d020608141740l5c4cf050m82a85a5c94f509cd@mail.gmail.com>
Date: Mon, 14 Aug 2006 17:40:02 -0700
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 7GB index taking forever to return hits
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E811450932F@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_158259_9046779.1155602402372"
References: <0D6A3C278F4DC346B98DF4D2F1397E811450932F@UREXCHVS3.ur.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_158259_9046779.1155602402372
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

To avoid "TooManyClauses", you can try Filter instead of Query. But that
will be slower.
Form what I see is that there are so many keys that match your query, it
will be tough for Lucene.

On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
>
> It was how I was implementing the search.
>
> I am using a boolean query.  Prior to the 7GB index, I was searching
> over a 150MB index that consist of a very small part of the bigger
> index.  I was able to set my BooleanQuery to
> BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) and that worked fine.
> But I think that's the cause of my problem with this bigger index.
> Commenting that out, I get an TooManyClause Exception.  A typical query
> would look something like this:
>
> +CONTENTS:*white* +CONTENTS:*hard* +CONTENTS:*hat* +COMPANY_CODE:u1
> +LANGUAGE:enu -SKU_DESC_ID:0 +IS_DC:d +LOCATION:b72
>
> BooleanQuery q =3D new BooleanQuery();
>
> WildcardQuery wc1 =3D new WildcardQuery("CONTENTS", "*white*");
> WildcardQuery wc2 =3D new WildcardQuery("CONTENTS", "*hard*");
> WildcardQuery wc3 =3D new WildcardQuery("CONTENTS", "*hat*");
> q.add(wc1, BooleanClause.Occur.MUST);
> q.add(wc2, BooleanClause.Occur.MUST);
> q.add(wc3, BooleanClause.Occur.MUST);
>
> TermQuery t1 =3D new TermQuery("COMPANY_CODE", "u1");
> q.add(t1, BooleanClause.Occur.MUST);
>
> TermQuery t2 =3D new TermQuery("LANGUAGE", "enu");
> q.add(t2, BooleanClause.Occur.MUST);
> .
> .
> .
>
> I take it this is not the most optimal way about this.
>
> So that leads me to my next question... What is the most optimal way
> about this?
>
> Van
>
> -----Original Message-----
> From: yueyu lin [mailto:popeyelin@gmail.com]
> Sent: Monday, August 14, 2006 11:30 AM
> To: java-user@lucene.apache.org
> Subject: Re: 7GB index taking forever to return hits
>
> 2GB limitation only exists when you want to put them to memory in 32bits
> box.
> Our index size is larger than 13 giga bytes, and it works fine.
> I think it must be something error in your design. You can use Luke to
> see what happened in your index.
>
> On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
> >
> >  Hi,
> >
> >
> >
> > I have a 7GB index (about 45 fields per document X roughly 5.5 million
> > docs) running on a Windows 2003 32bit machine (dual proc, 2GB memory).
>
> > The index is optimized.  Performing a search on this index will just
> > "hang" when performing the search (wild card query with a sort).  At
> > first the CPU usage is 100%, then drops down to 50% after a minute or
> > so, and then no CPU utilization... but the thread is still trying to
> > perform the search.  I've tried this in my J2EE app and in a main
> > program.  Is this due to the 2GB limitation of the 32bit OS (I didn't
> > realize the index would be this big... just let it run over the
> weekend).
> >
> >
> >
> > If this is due to the 2GB limitation of the 32bit OS and since I have
> > this 7GB index built already (and optimized), is there a way to split
> > this into 2GB indices w/o having to re-index?  Or is this due to
> another factor?
> >
> >
> >
> > Van
> >
> > United Rentals
> > Consider it done.(tm)
> > 800-UR-RENTS
> > unitedrentals.com
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> --
> Yueyu Lin
>
> United Rentals
> Consider it done.=99
> 800-UR-RENTS
> unitedrentals.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
--
Yueyu Lin

------=_Part_158259_9046779.1155602402372--

From java-user-return-22708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 01:20:58 2006
Return-Path: <java-user-return-22708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22493 invoked from network); 15 Aug 2006 01:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 01:20:58 -0000
Received: (qmail 61921 invoked by uid 500); 15 Aug 2006 01:20:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61899 invoked by uid 500); 15 Aug 2006 01:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61882 invoked by uid 99); 15 Aug 2006 01:20:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 18:20:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 18:20:50 -0700
Received: by py-out-1112.google.com with SMTP id s49so1661671pyc
        for <java-user@lucene.apache.org>; Mon, 14 Aug 2006 18:20:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kOjUzjCGScfJAAB+cDVZyyTOGj+Hf2A6z3kGu8q2vFRusoyAYXDUH/9tpJLJvNQH845HJtHzrJGYpVI5LZH7u3OWxRY5REXxz0LvXQjfG9l9G9G2xENxMeOjJa6R1p4j2kFVt3crFSNDZKiGV3rewlEU2iZIBte8sxH79k2VQRY=
Received: by 10.35.78.9 with SMTP id f9mr14433879pyl;
        Mon, 14 Aug 2006 18:20:29 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 14 Aug 2006 18:20:29 -0700 (PDT)
Message-ID: <359a92830608141820o608e11a5xae12471f1a4e68c5@mail.gmail.com>
Date: Mon, 14 Aug 2006 21:20:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 7GB index taking forever to return hits
In-Reply-To: <8e7e4d020608141740l5c4cf050m82a85a5c94f509cd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9661_16476071.1155604829483"
References: <0D6A3C278F4DC346B98DF4D2F1397E811450932F@UREXCHVS3.ur.com>
	 <8e7e4d020608141740l5c4cf050m82a85a5c94f509cd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9661_16476071.1155604829483
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I actually suspect that your process isn't hung, it's just taking forever
because it's swapping a lot. Like a really, really, really lot. Like more
than you ever want to deal with <G>.

I think you're pretty much forced, as Lin said, to use a filter. I was
pleasantly surprised at how quickly filters can be built, and if you have a
small set of wildcards you really expect, you can use a CachingWrapperFilte=
r
to keep them around. NOTE: we're only recommending the filters for the
wildcard portions of the query.

For a generous explanation of wildcards in general from "the guys", search
the archive for a thread "I just don't get wildcards at all". There's quite
an explanation of wildcards, as well as some alternative indexing schemes t=
o
make wildcard queries without wildcards. Which is faster but bloats the
index.

If you're unfamiliar with filters, you really need to become familiar with
them. Basically, they're a bitset with the bit corresponding to each
document turned on for terms that could match.

You'll probably want to use a WildcardTermEnum, or perhaps a RegexTermEnum,
and for each term, enumerate all the docs containing that term (see
TermDocs) and set your bit in the filter. When the filter is created, use i=
t
to construct a ConstantScoreQuery that you add to your BooleanQuery. It
sounds more complicated than it is <G>.

Just to clarify Lin's comment. The filter won't be slower than what you are
doing now. But it will be slower than a straight-up query. Each filter will
be under a megabyte (one bit for each of 5.5M docs), so you could consider
caching a bunch of them if you expect a small number of terms to be
repeated. Or let CachingWrapperFilter do it for you (I think).

Note that ConstantScoreQuery loses relevance scoring (but you'll still get
relevance for the non-wildcard terms in your BooleanQuery). I don't conside=
r
this a flaw since it's tricky defining how much *use* relevance really is
for wildcards.

Finally, your test queries (and I commend you for making limit-testing test=
s
before putting it in production) are about as bad as they get. From the
javadoc for WildcardQuery.

" In order to prevent extremely slow WildcardQueries, a Wildcard term shoul=
d
not start with one of the wildcards * or ?"

Best
Erick



On 8/14/06, yueyu lin <popeyelin@gmail.com> wrote:
>
> To avoid "TooManyClauses", you can try Filter instead of Query. But that
> will be slower.
> Form what I see is that there are so many keys that match your query, it
> will be tough for Lucene.
>
> On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
> >
> > It was how I was implementing the search.
> >
> > I am using a boolean query.  Prior to the 7GB index, I was searching
> > over a 150MB index that consist of a very small part of the bigger
> > index.  I was able to set my BooleanQuery to
> > BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) and that worked fine.
> > But I think that's the cause of my problem with this bigger index.
> > Commenting that out, I get an TooManyClause Exception.  A typical query
> > would look something like this:
> >
> > +CONTENTS:*white* +CONTENTS:*hard* +CONTENTS:*hat* +COMPANY_CODE:u1
> > +LANGUAGE:enu -SKU_DESC_ID:0 +IS_DC:d +LOCATION:b72
> >
> > BooleanQuery q =3D new BooleanQuery();
> >
> > WildcardQuery wc1 =3D new WildcardQuery("CONTENTS", "*white*");
> > WildcardQuery wc2 =3D new WildcardQuery("CONTENTS", "*hard*");
> > WildcardQuery wc3 =3D new WildcardQuery("CONTENTS", "*hat*");
> > q.add(wc1, BooleanClause.Occur.MUST);
> > q.add(wc2, BooleanClause.Occur.MUST);
> > q.add(wc3, BooleanClause.Occur.MUST);
> >
> > TermQuery t1 =3D new TermQuery("COMPANY_CODE", "u1");
> > q.add(t1, BooleanClause.Occur.MUST);
> >
> > TermQuery t2 =3D new TermQuery("LANGUAGE", "enu");
> > q.add(t2, BooleanClause.Occur.MUST);
> > .
> > .
> > .
> >
> > I take it this is not the most optimal way about this.
> >
> > So that leads me to my next question... What is the most optimal way
> > about this?
> >
> > Van
> >
> > -----Original Message-----
> > From: yueyu lin [mailto:popeyelin@gmail.com]
> > Sent: Monday, August 14, 2006 11:30 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: 7GB index taking forever to return hits
> >
> > 2GB limitation only exists when you want to put them to memory in 32bit=
s
> > box.
> > Our index size is larger than 13 giga bytes, and it works fine.
> > I think it must be something error in your design. You can use Luke to
> > see what happened in your index.
> >
> > On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
> > >
> > >  Hi,
> > >
> > >
> > >
> > > I have a 7GB index (about 45 fields per document X roughly 5.5 millio=
n
> > > docs) running on a Windows 2003 32bit machine (dual proc, 2GB memory)=
.
> >
> > > The index is optimized.  Performing a search on this index will just
> > > "hang" when performing the search (wild card query with a sort).  At
> > > first the CPU usage is 100%, then drops down to 50% after a minute or
> > > so, and then no CPU utilization... but the thread is still trying to
> > > perform the search.  I've tried this in my J2EE app and in a main
> > > program.  Is this due to the 2GB limitation of the 32bit OS (I didn't
> > > realize the index would be this big... just let it run over the
> > weekend).
> > >
> > >
> > >
> > > If this is due to the 2GB limitation of the 32bit OS and since I have
> > > this 7GB index built already (and optimized), is there a way to split
> > > this into 2GB indices w/o having to re-index?  Or is this due to
> > another factor?
> > >
> > >
> > >
> > > Van
> > >
> > > United Rentals
> > > Consider it done.(tm)
> > > 800-UR-RENTS
> > > unitedrentals.com
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > --
> > Yueyu Lin
> >
> > United Rentals
> > Consider it done.=99
> > 800-UR-RENTS
> > unitedrentals.com
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> --
> Yueyu Lin
>
>

------=_Part_9661_16476071.1155604829483--

From java-user-return-22709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 01:27:06 2006
Return-Path: <java-user-return-22709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23315 invoked from network); 15 Aug 2006 01:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 01:27:06 -0000
Received: (qmail 68893 invoked by uid 500); 15 Aug 2006 01:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68275 invoked by uid 500); 15 Aug 2006 01:27:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68264 invoked by uid 99); 15 Aug 2006 01:27:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 18:27:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.158.62.197] (HELO ws6-2.us4.outblaze.com) (205.158.62.197)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Aug 2006 18:26:59 -0700
Received: (qmail 12797 invoked from network); 15 Aug 2006 01:26:37 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.248.88.244)
  by ws6-2.us4.outblaze.com with SMTP; 15 Aug 2006 01:26:37 -0000
Message-ID: <44E122D0.1050504@curtin.com>
Date: Mon, 14 Aug 2006 21:26:40 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: a "fair" similarity
References: <200608150220.26216@danielnaber.de>
In-Reply-To: <200608150220.26216@danielnaber.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> Hi,
> 
> as some of you may have noticed, Lucene prefers shorter documents over 
> longer ones, i.e. shorter documents get a higher ranking, even if the 
> ratio "matched terms / total terms in document" is the same.
> 
> For example, take these two artificial documents:
> 
> doc1: x 2 3 4 5 6 7 8 9 10
> doc2: x x 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
> 
> When searching for "x" doc1 will get a higher ranking, even though "x" 
> makes up 1/10 of the terms in both documents.

I think it depends upon what you want "similar" to mean.  The shorter doc 
thing comes from the "parsimony" concept, if I remember my Information Theory 
correctly.  In other words, the less data to get to a given result (1/10 "x" 
in your example) the better.  It sounds like you want doc1 and doc2 to be 
considered exactly similar, at least for "x".  Would you want doc3 below to be 
treated the same way?

doc3: x  2  3  4  5  6  7  8  9 10
       x 12 13 14 15 16 17 18 19 20
       x 22 ...                  30
       x 32 ...                  40
                             ... 1000

In some situations, the appearance of "x" is more significant in doc1, because 
hardly anything is there in the first place.  I think that tends to be more 
common in English prose, which may be why it's the default in Lucene.

I think your proposed formula would treat all docs, 1-3, the same.  If that's 
what you want, I'd say you're good to go.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 06:36:08 2006
Return-Path: <java-user-return-22710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92831 invoked from network); 15 Aug 2006 06:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 06:36:08 -0000
Received: (qmail 5514 invoked by uid 500); 15 Aug 2006 06:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5487 invoked by uid 500); 15 Aug 2006 06:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5476 invoked by uid 99); 15 Aug 2006 06:36:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 23:36:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [145.97.36.132] (HELO mta1.kennisnet.nl) (145.97.36.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Aug 2006 23:35:59 -0700
Received: from Scooter.kennisnet.org (unknown [192.87.94.198])
	by smarthost1.kennisnet.nl (Postfix) with SMTP id D50193A417E
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 08:35:34 +0200 (CEST)
Received: from (192.168.0.30) by Scooter.kennisnet.org via smtp
	 id 703c_369dfe24_2c32_11db_98c1_0030482a3887;
	Tue, 15 Aug 2006 09:46:50 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Index not recreated
Date: Tue, 15 Aug 2006 08:35:34 +0200
Message-ID: <90166A07138C384F88263316F712056C0B401C@robin.kennisnet.org>
In-Reply-To: <359a92830608140751k480dac4cwa5f300fdf473a25e@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index not recreated
Thread-Index: Aca/sT+AOcU8U3GoRWWZhRzzP2gnIQAgeVqg
From: "Ronald Wildenberg" <r.wildenberg@kennisnet.org>
To: <java-user@lucene.apache.org>
X-NAIMIME-Disclaimer: 1
X-NAIMIME-Modified: 1
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

PiBWYW46IEVyaWNrIEVyaWNrc29uIFttYWlsdG86ZXJpY2tlcmlja3NvbkBnbWFpbC5jb21dIAo+
IFZlcnpvbmRlbjogbWFhbmRhZyAxNCBhdWd1c3R1cyAyMDA2IDE2OjUyCj4gQWFuOiBqYXZhLXVz
ZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiBPbmRlcndlcnA6IFJlOiBJbmRleCBub3QgcmVjcmVhdGVk
Cj4gCj4gWW91IGhhdmUgYWxsIG15IHN5bXBhdGh5LiBMZXQgbWUgc2VlIGlmIEkgY2FuIHJlc3Rh
dGUgeW91ciAKPiBwcm9ibGVtLi4uLi4KPiAKPiAiSGV5IFJvbi4gVGhlIGluZGV4aW5nIHByb2Nl
c3MgZG9lc24ndCB3b3JrLiBXZSBjYW4ndC93b24ndCAKPiBsZXQgeW91IGxvb2sgYXQgdGhlIHBy
b2Nlc3Mgb3IgdGhlIHJlc3VsdHMuIFdlIGNhbid0L3dvbid0IAo+IGxldCB5b3UgbG9vayBhdCB0
aGUgZmluaXNoZWQgcHJvZHVjdC4gV2UgY2FuJ3Qvd29uJ3QgbGV0IHlvdSAKPiBvbiB0aGUgbWFj
aGluZSB3aGVyZSBpdCBmYWlscy4gTm93IGZpeCBpdCIKPiA8Rz4uLi4uLgoKClRoYXQncyBtb3Jl
IG9yIGxlc3MgdGhlIGN1cnJlbnQgc2l0dWF0aW9uIDopCgoKPiBUaGVyZSBoYXMgYmVlbiBzb21l
IGRpc2N1c3Npb24gb24gdGhlIHRocmVhZHMgYWJvdXQgCj4gImludGVyZXNpbmciIGJlaGF2aW9y
IHdpdGggTkZTIG1vdW50cywgbW9zdGx5IGhhdmluZyB0byBkbyAKPiB3aXRoIGxvY2tpbmcgaXNz
dWVzLiBCdXQgaWYgeW91J3JlIHVzaW5nIGFuIE5GUyBtb3VudCAob3IgCj4gb3RoZXIgbm9uLWxv
Y2FsIGZpbGVzeXN0ZW0pLCBJIGNhbiBpbWFnaW5lIHRoYXQgdGhlcmUgY291bGQgCj4gYmUgb3Ro
ZXIga2luZHMgb2YgaXNzdWVzLCB5b3UgbWlnaHQgd2FudCB0byBzZWFyY2ggdGhlIAo+IGFyY2hp
dmUgaWYgdGhpcyBhcHBsaWVzIHRvIHlvdS4uLi4KCgpIbW0sIEknbGwgbG9vayBpbnRvIHRoaXMu
IEkgZG9uJ3Qga25vdyB3aGV0aGVyIHRoZSBpbmRleCBpcwpzdG9yZWQgb24gYSBub24tbG9jYWwg
ZmlsZXN5c3RlbS4KCkFub3RoZXIgc3RyYW5nZSB0aGluZyBpcyB0aGF0IGluZGV4aW5nIGluIHRo
ZSBhcHBsaWNhdGlvbiBoYXMKYmVlbiB3b3JraW5nIGZpbmUgZm9yIGFib3V0IGEgeWVhci4gVGhp
bmdzIHdlbnQgd3Jvbmcgb25seQpyZWNlbnRseS4gSSBzdWRkZW5seSBkbyByZW1lbWJlciB0aGF0
IHdlIGhhZCBhbiB1cGdyYWRlIGZyb20KSkRLIDEuNS4wXzA0IHRvIDEuNS4wXzA3LiBDb3VsZCB0
aGlzIGhhdmUgYW55dGhpbmcgdG8gZG8gd2l0aAppdCAocmF0aGVyIHVubGlrZWx5IEkgdGhpbmsp
LgoKCj4gR29vZCBsdWNrIQo+IEVyaWNrCgoKVGhhbmtzLApSb25hbGQuCgoKCj4gCj4gT24gOC8x
NC8wNiwgUm9uYWxkIFdpbGRlbmJlcmcgPHIud2lsZGVuYmVyZ0BrZW5uaXNuZXQub3JnPiB3cm90
ZToKPiA+Cj4gPiBUaGFua3MgZm9yIHlvdXIgcmVzcG9uc2UsIGNvbW1lbnRzIGFyZSBiZWxvdy4g
SSdtIHVzaW5nIAo+IEx1Y2VuZSAxLjkuMS4KPiA+Cj4gPgo+ID4gPiBWYW46IEVyaWNrIEVyaWNr
c29uIFttYWlsdG86ZXJpY2tlcmlja3NvbkBnbWFpbC5jb21dCj4gPiA+IFZlcnpvbmRlbjogbWFh
bmRhZyAxNCBhdWd1c3R1cyAyMDA2IDE2OjIwCj4gPiA+IE9uZGVyd2VycDogUmU6IEluZGV4IG5v
dCByZWNyZWF0ZWQKPiA+ID4KPiA+ID4gTXkgZmlyc3Qgc3VzcGljaW9uIGlzIHRoYXQgeW91IGhh
dmUgZHVwbGljYXRlIGRvY3VtZW50cyBvbiB0aGUgCj4gPiA+ICppbnB1dCogc2lkZSwgb3IgYXJl
IHNvbWVob3cgYWRkaW5nIGRvY3VtZW50cyBtb3JlIHRoYW4gCj4gb25jZS4gSSB1c2UgCj4gPiA+
IGNvZGUgc2ltaWxhciB0byB5b3VycyBhbmQgaXQgd29ya3MganVzdCBmaW5lIGZvciBtZS4uLi4u
Cj4gPgo+ID4KPiA+IFRoaXMgd2FzIG15IGZpcnN0IHN1c3BpY2lvbiBhbHNvLCBidXQgdGhlIGZh
Y3RzIHNlZW0gdG8gCj4gcnVsZSBvdXQgdGhpcyAKPiA+IHBvc3NpYmlsaXR5LiBXaGVuIEkgY3Jl
YXRlIGFuIGluZGV4IGZyb20gc2NyYXRjaCAod2l0aG91dCBoYXZpbmcgYSAKPiA+IHByZXZpb3Vz
LCBvbGQgb25lKSwgZXZlcnl0aGluZyBpcyBvayAobm8gZHVwbGljYXRlcykuIFRoaXMgCj4gb25s
eSBoYXBwZW5zIHRoZSBuZXh0IHRpbWUuCj4gPiBTbyBmaXJzdCBJJ20gZ29pbmcgdG8gZGV0ZXJt
aW5lIHdoZXRoZXIgdGhlIGluZGV4IGlzIHJlYWxseSBkZWxldGVkIAo+ID4gYWZ0ZXIgY2FsbGlu
ZyBGU0RpcmVjdG9yeS5nZXREaXJlY3RvcnkoaW5kZXhEaXJlY3RvcnksIAo+IHRydWUpLiBJZiB0
aGlzIAo+ID4gaXMgdGhlIGNhc2UsIEknbSBnb2luZyB0byBjaGVjayB3aGV0aGVyIEkgYWRkIGR1
cGxpY2F0ZXMgbXlzZWxmLgo+ID4KPiA+Cj4gPiA+IEhvdyBiaWcgaXMgdGhlIGluZGV4IGJlZm9y
ZSBhbmQgYWZ0ZXIgeW91IHJlLWNyZWF0ZSBpdD8gVHdpY2UgdGhlIAo+ID4gPiBzaXplIGFuZCB5
b3UncmUgYXBwZW5kaW5nLCBub3QgdHdpY2UgdGhlbi4uLi4uCj4gPgo+ID4KPiA+IEFuIGFkZGl0
aW9uYWwgcHJvYmxlbSBpcyB0aGF0IG15IGlzc3VlIGlzIG9ubHkgcmVwcm9kdWNhYmxlIG9uIHRo
ZSAKPiA+IHByb2R1Y3Rpb24gZW52aXJvbm1lbnQgYW5kIEkgaGF2ZSB2ZXJ5IGxpbWl0ZWQgYWNj
ZXNzIAo+IHRoZXJlLiBJIGNhbm5vdCAKPiA+IGFuc3dlciB0aGlzIHJpZ2h0IGF3YXkuIEZ1cnRo
ZXJtb3JlLCB0aGUgcHJvYmxlbSBkb2VzIG5vdCBvY2N1ciAKPiA+IGFsd2F5cywgd2hpY2ggbWFr
ZXMgaXQgZXZlbiBtb3JlIGZ1biA7LSkKPiA+Cj4gPgo+ID4gPiBBcmUgeW91IGFic29sdXRlbHkg
c3VyZSB0aGF0IHlvdSdyZSBub3Qgc29tZWhvdywgYWRkaW5nIGRvY3VtZW50cyAKPiA+ID4gbW9y
ZSB0aGFuIG9uY2U/IEkgY2FuIGltYWdpbmUgdGhhdCB0aGlzIGNvdWxkIG9jY3VyIGJ5IHByb2Nl
c3NpbmcgCj4gPiA+IHRoZSBzb3VyY2UgbXVsdGlwbGUgdGltZXMgKGRvbid0IGtub3cgaG93IHlv
dSBnZXQgeW91ciBpbnB1dCkgb3IgCj4gPiA+IGFkZGluZyB0aGUgZG9jdW1lbnQgbXVsdGlwbGUg
dGltZXMgdGhyb3VnaCBzb21lIGxvZ2ljIGVycm9yLiBJJ3ZlIAo+ID4gPiBhbHNvIGhhZCBteSBT
UUwgcXVlcmllcyByZXR1cm4gdGhlIHNhbWUgcm93IG1vcmUgdGhhbiBvbmNlIHVwb24gCj4gPiA+
IG9jY2FzaW9uLCB1c3VhbGx5IGN1cmVkIHdpdGggdGhlICJkaXN0aW5jdCIKPiA+ID4gcXVhbGlm
aWVyLgo+ID4gPgo+ID4gPiBJZiB5b3UgaGF2ZSBzb21lIHNvcnQgb2YgdW5pcXVlIElELCBJIGNh
biBpbWFnaW5lIGRlYnVnIAo+IGNvZGUgd2l0aCBhIAo+ID4gPiBzZXQgb2YgSURzIGFuZCBlcnJv
ciByZXBvcnRpbmcgd2hlbiB5b3UgYWRkIGEgZG9jCj4gPiA+IChyb3cpIGFscmVhZHkgaW4geW91
ciBpbmRleC4uLi4uCj4gPgo+ID4KPiA+IElmIEknbSBhYnNvbHV0ZWx5IHBvc2l0aXZlIHRoYXQg
dGhlIG9yaWdpbmFsIGluZGV4IGlzIHJlbW92ZWQgYnkgCj4gPiBjYWxsaW5nIEZTRGlyZWN0b3J5
LmdldERpcmVjdG9yeShpbmRleERpcmVjdG9yeSwgdHJ1ZSksIEknbSAKPiBnb2luZyB0byAKPiA+
IGV4cGxvcmUgdGhpcyBwb3NzaWJpbGl0eSBhbmQgYWRkIHNvbWUgZXh0ZW5zaXZlIGxvZ2dpbmcg
dG8gCj4gdGhlIHBpZWNlcyAKPiA+IG9mIGNvZGUgd2hlcmUgZG9jdW1lbnRzIGFyZSBhZGRlZCAo
SSBkbyBoYXZlIGEgdW5pcXVlIGlkLCAKPiBzbyB0aGlzIGNhbiBiZSBjaGVja2VkKS4KPiA+Cj4g
Pgo+ID4gPiBMdWtlIHdpbGwgaGVscCB5b3UgZXhhbWluZSB5b3VyIGluZGV4IHRvIHNlZSBpZiBp
dCdzIHdoYXQgCj4geW91IHRoaW5rIAo+ID4gPiBpcyB0aGVyZS4gUGVyaGFwcyBhbm90aGVyIHdh
eSB0byB0ZXN0IHRoaXMgd291bGQgYmUgdG8gYWRkIChhZ2FpbiAKPiA+ID4gZm9yCj4gPiA+IGRl
YnVnZ2luZykgYSB0aW1lc3RhbXAgZmllbGQgaW4geW91ciBpbmRleC4gVGhhdCB3YXksIHlvdSAK
PiB3b3VsZCBrbm93IAo+ID4gPiB3aGVuIHlvdSBhZGRlZCB5b3VyIGR1cGxpY2F0ZSByb3dzLgo+
ID4KPiA+Cj4gPiBJIGhhdmVuJ3QgdHJpZWQgTHVrZSB5ZXQgdG8gbG9vayBhdCB0aGUgaW5kZXgs
IHNpbmNlIEkgaGF2ZW4ndCBiZWVuIAo+ID4gYWJsZSB0byBnZXQgbXkgaGFuZHMgb24gdGhlIGFj
dHVhbCBpbmRleCB1bmZvcnR1bmF0ZWx5Lgo+ID4KPiA+Cj4gPiA+IEZpbmFsbHksIHlvdSBtaWdo
dCB0cnkgY3JlYXRpbmcgYW4gaW5kZXggaW4gYSBuZXcgCj4gZGlyZWN0b3J5IHRoYXQgeW91IAo+
ID4gPiAqa25vdyogaXMgZW1wdHkgYW5kIHNlZWluZyB3aGF0IHlvdSBnZXQgYW5kIGhvdyBpdCAK
PiBjb21wYXJlcyBhZ2FpbnN0IAo+ID4gPiB5b3VyIGN1cnJlbnQgcHJvY2Vzcy4gQWx0aG91Z2gg
SSdkIGV4cGVjdCB5b3VyIAo+IGluZGV4d3JpdGVyIGNvZGUgdG8gCj4gPiA+IGJhcmYgaWYgeW91
IGhhZCBmaWxlIGxvY2tpbmcgaXNzdWVzIGFuZCBjb3VsZG4ndCBlbXB0eSAKPiB0aGUgaW5kZXgs
IEkgCj4gPiA+IHN1cHBvc2UgaXQncyBwb3NzaWJsZS4uLi4KPiA+Cj4gPgo+ID4gVGhhdCdzIGEg
Z29vZCBzb2x1dGlvbiBpZiBhbGwgbXkgb3RoZXIgYXR0ZW1wdHMgZmFpbCA6KQo+ID4KPiA+Cj4g
Pgo+ID4gPiBPbiA4LzE0LzA2LCBSb25hbGQgV2lsZGVuYmVyZyA8ci53aWxkZW5iZXJnQGtlbm5p
c25ldC5vcmc+IHdyb3RlOgo+ID4gPiA+Cj4gPiA+ID4gSGksCj4gPiA+ID4KPiA+ID4gPiBJJ20g
ZXhwZXJpZW5jaW5nIHRoZSBwcm9ibGVtIHRoYXQgbXkgaW5kZXggZG9lcyBub3Qgc2VlbSB0byBi
ZSAKPiA+ID4gPiByZWNyZWF0ZWQsIGRlc3BpdGUgdXNpbmcgdGhlIGNvcnJlY3QgZmxhZ3MuIFRo
ZSByZXN1bHQgaXMgdGhhdCAKPiA+ID4gPiBkb2N1bWVudHMgdGhhdCByZXByZXNlbnQgZXF1YWwg
ZGF0YWJhc2Ugcm93cyBvY2N1ciBtdWx0aXBsZQo+ID4gPiB0aW1lcyBpbgo+ID4gPiA+IHRoZSBp
bmRleC4gSSByZWNyZWF0ZSBteSBlbnRpcmUgaW5kZXggZWFjaCBuaWdodC4KPiA+ID4gPgo+ID4g
PiA+IE15IEluZGV4RGlyZWN0b3J5L0luZGV4V3JpdGVyIGNvbnN0cnVjdGlvbiBjb2RlIGxvb2tz
IGxpa2UgdGhpczoKPiA+ID4gPgo+ID4gPiA+ICAgIEZpbGUgaW5kZXhEaXJlY3RvcnkgPSBuZXcg
RmlsZShpbmRleFBhdGgpOwo+ID4gPiA+ICAgIEZTRGlyZWN0b3J5IGx1Y2VuZUluZGV4RGlyZWN0
b3J5ID0gCj4gPiA+ID4gRlNEaXJlY3RvcnkuZ2V0RGlyZWN0b3J5KGluZGV4RGlyZWN0b3J5LCB0
cnVlKTsKPiA+ID4gPiAgICBJbmRleFdyaXRlciBpbmRleFdyaXRlciA9IG5ldyAKPiBJbmRleFdy
aXRlcihsdWNlbmVJbmRleERpcmVjdG9yeSwgCj4gPiA+ID4gYW5hbHl6ZXIsIHRydWUpOwo+ID4g
PiA+Cj4gPiA+ID4gVGhpcyBjb2RlIHNob3VsZCB0YWtlIGNhcmUgb2YgcmVjcmVhdGluZyBteSBp
bmRleCwgYnV0IAo+IGl0IGRvZXMgbm90IAo+ID4gPiA+IHNlZW0gdG8gYmUgd29ya2luZyBwcm9w
ZXJseS4gSXQgbG9va3MgbGlrZSB0aGUgb2xkIGluZGV4IGlzIG5vdCAKPiA+ID4gPiByZW1vdmVk
IGFuZCB0aGUgc2FtZSBkb2N1bWVudHMgYXJlIGFkZGVkIHRvIG15IGluZGV4IGFnYWluLgo+ID4g
PiA+Cj4gPiA+ID4gSSBoYXZlIHN0cm9uZyByZWFzb25zIHRvIG5vdCBzdXNwZWN0IG90aGVyIGNv
ZGUgdG8gYWRkIAo+IGR1cGxpY2F0ZSAKPiA+ID4gPiBkb2N1bWVudHMuIEZpcnN0LCBpZiBubyBp
bmRleCBoYXMgeWV0IGJlZW4gY3JlYXRlZCwgbm8gCj4gZHVwbGljYXRlIAo+ID4gPiA+IGRvY3Vt
ZW50cyBhcmUgYWRkZWQuIFNlY29uZCwgaWYgYW4gb2xkIGluZGV4IGRvZXMgZXhpc3QsIGFmdGVy
IAo+ID4gPiA+IHJlY3JlYXRpbmcgdGhlIGluZGV4IGFsbCBkb2N1bWVudHMgZXhpc3QgZXhhY3Rs
eSB0d2ljZSAoYW5kIHRoZSAKPiA+ID4gPiBmb2xsb3dpbmcgbmlnaHQgdGhleSBleGlzdCB0aHJl
ZSB0aW1lcywgZXRjLikuIEl0IGlzIG5vdAo+ID4gPiB0aGUgY2FzZSB0aGF0Cj4gPiA+ID4gc29t
ZSBkb2N1bWVudHMgYXJlIGR1cGxpY2F0ZWQuCj4gPiA+ID4KPiA+ID4gPiBEb2VzIGFueW9uZSBo
YXZlIGFueSBpZGVhcz8KPiA+ID4gPgo+ID4gPiA+IFRoYW5rcyBpbiBhZHZhbmNlLAo+ID4gPiA+
IFJvbmFsZC4KPiA+ID4gPgo+ID4gPiA+Cj4gPiA+ID4gRElTQ0xBSU1FUjoKPiA+ID4gPgo+ID4g
PiA+IERpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4pIGlzIG1ldCBncm90ZSB6b3JndnVsZGlnaGVp
ZAo+ID4gPiBzYW1lbmdlc3RlbGQuCj4gPiA+ID4gVm9vciBtb2dlbGlqa2Ugb25qdWlzdGhlaWQg
ZW4vb2Ygb252b2xsZWRpZ2hlaWQgdmFuIGRlIGhpZXJpbiAKPiA+ID4gPiB2ZXJzdHJla3RlIGlu
Zm9ybWF0aWUga2FuIEtlbm5pc25ldCBnZWVuIGFhbnNwcmFrZWxpamtoZWlkCj4gPiA+IGFhbnZh
YXJkZW4sCj4gPiA+ID4gZXZlbm1pbiBrdW5uZW4gYWFuIGRlIGluaG91ZCB2YW4gZGl0IGJlcmlj
aHQgKG1ldCBiaWpsYWdlbikgCj4gPiA+ID4gcmVjaHRlbiB3b3JkZW4gb250bGVlbmQuIERlIGlu
aG91ZCB2YW4gZGl0IGJlcmljaHQgKG1ldCAKPiBiaWpsYWdlbikgCj4gPiA+ID4ga2FuIHZlcnRy
b3V3ZWxpamtlIGluZm9ybWF0aWUgYmV2YXR0ZW4gZW4gaXMgdWl0c2x1aXRlbmQKPiA+ID4gYmVz
dGVtZCB2b29yIGRlCj4gPiA+ID4gZ2VhZHJlc3NlZXJkZSB2YW4gZGl0IGJlcmljaHQuIEluZGll
biB1IG5pZXQgZGUgYmVvb2dkZQo+ID4gPiBvbnR2YW5nZXIgdmFuCj4gPiA+ID4gZGl0IGJlcmlj
aHQgYmVudCwgdmVyem9la3QgS2VubmlzbmV0IHUgZGl0IGJlcmljaHQgdGUgCj4gdmVyd2lqZGVy
ZW4sIAo+ID4gPiA+IGV2ZW50dWVsZSBiaWpsYWdlbiBuaWV0IHRlIG9wZW5lbiBlbiB3aWpzdCBL
ZW5uaXNuZXQgdSBvcCBkZSAKPiA+ID4gPiBvbnJlY2h0bWF0aWdoZWlkIHZhbiBoZXQgZ2VicnVp
a2VuLCBrb3Bpw6tyZW4gb2YgdmVyc3ByZWlkZW4KPiA+ID4gdmFuIGRlIGluaG91ZCB2YW4gZGl0
IGJlcmljaHQgKG1ldCBiaWpsYWdlbikuCj4gPiA+ID4KPiA+ID4gPiBUaGlzIG1lc3NhZ2UgKHdp
dGggYXR0YWNobWVudHMpIGlzIGdpdmVuIGluIGdvb2QgZmFpdGguIAo+IEtlbm5pc25ldCAKPiA+
ID4gPiBjYW5ub3QgYXNzdW1lIGFueSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIGFjY3VyYWN5IG9y
IAo+IHJlbGlhYmlsaXR5IAo+ID4gPiA+IG9mIHRoZSBpbmZvcm1hdGlvbiBjb250YWluZWQgaW4g
dGhpcyBtZXNzYWdlICh3aXRoIAo+IGF0dGFjaG1lbnRzKSwgCj4gPiA+ID4gbm9yIHNoYWxsIHRo
ZSBpbmZvcm1hdGlvbiBiZSBjb25zdHJ1ZWQgYXMgY29uc3RpdHV0aW5nIGFueQo+ID4gPiBvYmxp
Z2F0aW9uIG9uCj4gPiA+ID4gdGhlIHBhcnQgb2YgS2VubmlzbmV0LiBUaGUgaW5mb3JtYXRpb24g
Y29udGFpbmVkIGluIHRoaXMKPiA+ID4gbWVzc2FnZSAod2l0aAo+ID4gPiA+IGF0dGFjaG1lbnRz
KSBtYXkgYmUgY29uZmlkZW50aWFsIG9yIHByaXZpbGVnZWQgYW5kIGlzIG9ubHkgCj4gPiA+ID4g
aW50ZW5kZWQgZm9yIHRoZSB1c2Ugb2YgdGhlIG5hbWVkIGFkZHJlc3NlZS4gSWYgeW91IGFyZSBu
b3QgdGhlIAo+ID4gPiA+IGludGVuZGVkIHJlY2lwaWVudCwgeW91IGFyZSByZXF1ZXN0ZWQgYnkg
S2VubmlzbmV0IHRvIAo+IGRlbGV0ZSB0aGlzCj4gPiA+IG1lc3NhZ2UgKHdpdGgKPiA+ID4gPiBh
dHRhY2htZW50cykgd2l0aG91dCBvcGVuaW5nIGl0IGFuZCB5b3UgYXJlIG5vdGlmaWVkIGJ5Cj4g
PiA+IEtlbm5pc25ldCB0aGF0Cj4gPiA+ID4gYW55IGRpc2Nsb3N1cmUsIGNvcHlpbmcgb3IgZGlz
dHJpYnV0aW9uIG9mIHRoZSBpbmZvcm1hdGlvbgo+ID4gPiBjb250YWluZWQKPiA+ID4gPiBpbiB0
aGlzIG1lc3NhZ2UgKHdpdGggYXR0YWNobWVudHMpIGlzIHN0cmljdGx5IHByb2hpYml0ZWQKPiA+
ID4gYW5kIHVubGF3ZnVsLgo+ID4gPiA+Cj4gPiA+ID4KPiA+ID4gPgo+ID4gPgo+ID4KPiA+Cj4g
PiBESVNDTEFJTUVSOgo+ID4KPiA+IERpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4pIGlzIG1ldCBn
cm90ZSB6b3JndnVsZGlnaGVpZCAKPiBzYW1lbmdlc3RlbGQuIAo+ID4gVm9vciBtb2dlbGlqa2Ug
b25qdWlzdGhlaWQgZW4vb2Ygb252b2xsZWRpZ2hlaWQgdmFuIGRlIGhpZXJpbiAKPiA+IHZlcnN0
cmVrdGUgaW5mb3JtYXRpZSBrYW4gS2VubmlzbmV0IGdlZW4gYWFuc3ByYWtlbGlqa2hlaWQgCj4g
YWFudmFhcmRlbiwgCj4gPiBldmVubWluIGt1bm5lbiBhYW4gZGUgaW5ob3VkIHZhbiBkaXQgYmVy
aWNodCAobWV0IGJpamxhZ2VuKSByZWNodGVuIAo+ID4gd29yZGVuIG9udGxlZW5kLiBEZSBpbmhv
dWQgdmFuIGRpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4pIGthbiAKPiA+IHZlcnRyb3V3ZWxpamtl
IGluZm9ybWF0aWUgYmV2YXR0ZW4gZW4gaXMgdWl0c2x1aXRlbmQgCj4gYmVzdGVtZCB2b29yIGRl
IAo+ID4gZ2VhZHJlc3NlZXJkZSB2YW4gZGl0IGJlcmljaHQuIEluZGllbiB1IG5pZXQgZGUgYmVv
b2dkZSAKPiBvbnR2YW5nZXIgdmFuIAo+ID4gZGl0IGJlcmljaHQgYmVudCwgdmVyem9la3QgS2Vu
bmlzbmV0IHUgZGl0IGJlcmljaHQgdGUgdmVyd2lqZGVyZW4sIAo+ID4gZXZlbnR1ZWxlIGJpamxh
Z2VuIG5pZXQgdGUgb3BlbmVuIGVuIHdpanN0IEtlbm5pc25ldCB1IG9wIGRlIAo+ID4gb25yZWNo
dG1hdGlnaGVpZCB2YW4gaGV0IGdlYnJ1aWtlbiwga29wacOrcmVuIG9mIHZlcnNwcmVpZGVuIAo+
IHZhbiBkZSBpbmhvdWQgdmFuIGRpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4pLgo+ID4KPiA+IFRo
aXMgbWVzc2FnZSAod2l0aCBhdHRhY2htZW50cykgaXMgZ2l2ZW4gaW4gZ29vZCBmYWl0aC4gS2Vu
bmlzbmV0IAo+ID4gY2Fubm90IGFzc3VtZSBhbnkgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSBhY2N1
cmFjeSBvciByZWxpYWJpbGl0eSBvZiAKPiA+IHRoZSBpbmZvcm1hdGlvbiBjb250YWluZWQgaW4g
dGhpcyBtZXNzYWdlICh3aXRoIGF0dGFjaG1lbnRzKSwgbm9yIAo+ID4gc2hhbGwgdGhlIGluZm9y
bWF0aW9uIGJlIGNvbnN0cnVlZCBhcyBjb25zdGl0dXRpbmcgYW55IAo+IG9ibGlnYXRpb24gb24g
Cj4gPiB0aGUgcGFydCBvZiBLZW5uaXNuZXQuIFRoZSBpbmZvcm1hdGlvbiBjb250YWluZWQgaW4g
dGhpcyAKPiBtZXNzYWdlICh3aXRoIAo+ID4gYXR0YWNobWVudHMpIG1heSBiZSBjb25maWRlbnRp
YWwgb3IgcHJpdmlsZWdlZCBhbmQgaXMgb25seSBpbnRlbmRlZCAKPiA+IGZvciB0aGUgdXNlIG9m
IHRoZSBuYW1lZCBhZGRyZXNzZWUuIElmIHlvdSBhcmUgbm90IHRoZSBpbnRlbmRlZCAKPiA+IHJl
Y2lwaWVudCwgeW91IGFyZSByZXF1ZXN0ZWQgYnkgS2VubmlzbmV0IHRvIGRlbGV0ZSB0aGlzIAo+
IG1lc3NhZ2UgKHdpdGggCj4gPiBhdHRhY2htZW50cykgd2l0aG91dCBvcGVuaW5nIGl0IGFuZCB5
b3UgYXJlIG5vdGlmaWVkIGJ5IAo+IEtlbm5pc25ldCB0aGF0IAo+ID4gYW55IGRpc2Nsb3N1cmUs
IGNvcHlpbmcgb3IgZGlzdHJpYnV0aW9uIG9mIHRoZSBpbmZvcm1hdGlvbiAKPiBjb250YWluZWQg
Cj4gPiBpbiB0aGlzIG1lc3NhZ2UgKHdpdGggYXR0YWNobWVudHMpIGlzIHN0cmljdGx5IHByb2hp
Yml0ZWQgCj4gYW5kIHVubGF3ZnVsLgo+ID4KPiA+Cj4gCgoKRElTQ0xBSU1FUjoNCg0KRGl0IGJl
cmljaHQgKG1ldCBiaWpsYWdlbikgaXMgbWV0IGdyb3RlIHpvcmd2dWxkaWdoZWlkIHNhbWVuZ2Vz
dGVsZC4gVm9vciBtb2dlbGlqa2Ugb25qdWlzdGhlaWQgZW4vb2Ygb252b2xsZWRpZ2hlaWQgdmFu
IGRlIGhpZXJpbiB2ZXJzdHJla3RlIGluZm9ybWF0aWUga2FuIEtlbm5pc25ldCBnZWVuIGFhbnNw
cmFrZWxpamtoZWlkIGFhbnZhYXJkZW4sIGV2ZW5taW4ga3VubmVuIGFhbiBkZSBpbmhvdWQgdmFu
IGRpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4pIHJlY2h0ZW4gd29yZGVuIG9udGxlZW5kLiBEZSBp
bmhvdWQgdmFuIGRpdCBiZXJpY2h0IChtZXQgYmlqbGFnZW4pIGthbiB2ZXJ0cm91d2VsaWprZSBp
bmZvcm1hdGllIGJldmF0dGVuIGVuIGlzIHVpdHNsdWl0ZW5kIGJlc3RlbWQgdm9vciBkZSBnZWFk
cmVzc2VlcmRlIHZhbiBkaXQgYmVyaWNodC4gSW5kaWVuIHUgbmlldCBkZSBiZW9vZ2RlIG9udHZh
bmdlciB2YW4gZGl0IGJlcmljaHQgYmVudCwgdmVyem9la3QgS2VubmlzbmV0IHUgZGl0IGJlcmlj
aHQgdGUgdmVyd2lqZGVyZW4sIGV2ZW50dWVsZSBiaWpsYWdlbiBuaWV0IHRlIG9wZW5lbiBlbiB3
aWpzdCBLZW5uaXNuZXQgdSBvcCBkZSBvbnJlY2h0bWF0aWdoZWlkIHZhbiBoZXQgZ2VicnVpa2Vu
LCBrb3Bpw6tyZW4gb2YgdmVyc3ByZWlkZW4gdmFuIGRlIGluaG91ZCB2YW4gZGl0IGJlcmljaHQg
KG1ldCBiaWpsYWdlbikuDQoNClRoaXMgbWVzc2FnZSAod2l0aCBhdHRhY2htZW50cykgaXMgZ2l2
ZW4gaW4gZ29vZCBmYWl0aC4gS2VubmlzbmV0IGNhbm5vdCBhc3N1bWUgYW55IHJlc3BvbnNpYmls
aXR5IGZvciB0aGUgYWNjdXJhY3kgb3IgcmVsaWFiaWxpdHkgb2YgdGhlIGluZm9ybWF0aW9uIGNv
bnRhaW5lZCBpbiB0aGlzIG1lc3NhZ2UgKHdpdGggYXR0YWNobWVudHMpLCBub3Igc2hhbGwgdGhl
IGluZm9ybWF0aW9uIGJlIGNvbnN0cnVlZCBhcyBjb25zdGl0dXRpbmcgYW55IG9ibGlnYXRpb24g
b24gdGhlIHBhcnQgb2YgS2VubmlzbmV0LiBUaGUgaW5mb3JtYXRpb24gY29udGFpbmVkIGluIHRo
aXMgbWVzc2FnZSAod2l0aCBhdHRhY2htZW50cykgbWF5IGJlIGNvbmZpZGVudGlhbCBvciBwcml2
aWxlZ2VkIGFuZCBpcyBvbmx5IGludGVuZGVkIGZvciB0aGUgdXNlIG9mIHRoZSBuYW1lZCBhZGRy
ZXNzZWUuIElmIHlvdSBhcmUgbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQsIHlvdSBhcmUgcmVx
dWVzdGVkIGJ5IEtlbm5pc25ldCB0byBkZWxldGUgdGhpcyBtZXNzYWdlICh3aXRoIGF0dGFjaG1l
bnRzKSB3aXRob3V0IG9wZW5pbmcgaXQgYW5kIHlvdSBhcmUgbm90aWZpZWQgYnkgS2VubmlzbmV0
IHRoYXQgYW55IGRpc2Nsb3N1cmUsIGNvcHlpbmcgb3IgZGlzdHJpYnV0aW9uIG9mIHRoZSBpbmZv
cm1hdGlvbiBjb250YWluZWQgaW4gdGhpcyBtZXNzYWdlICh3aXRoIGF0dGFjaG1lbnRzKSBpcyBz
dHJpY3RseSBwcm9oaWJpdGVkIGFuZCB1bmxhd2Z1bC4NCgo=


From java-user-return-22711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 07:38:05 2006
Return-Path: <java-user-return-22711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22223 invoked from network); 15 Aug 2006 07:38:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 07:38:05 -0000
Received: (qmail 64398 invoked by uid 500); 15 Aug 2006 07:38:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64370 invoked by uid 500); 15 Aug 2006 07:37:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64359 invoked by uid 99); 15 Aug 2006 07:37:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 00:37:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 00:37:58 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 92A8C1887C; Tue, 15 Aug 2006 07:37:36 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust972.asfd.broadband.ntl.com [81.103.211.205])
	by mail.seseit.com (Postfix) with ESMTP id 48F7B1887B
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 07:37:32 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Indexing existing email archives
Date: Tue, 15 Aug 2006 08:37:20 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0082_01C6C046.046501D0"
In-Reply-To: <44E09BAF.4000501@wolfram.com>
Thread-Index: Aca/uV+TaMhPIacKRt2p9gFqmwSTkQAgFwNQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Message-Id: <20060815073732.48F7B1887B@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0082_01C6C046.046501D0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

> I have to have this working in next couple of days.

I had a similar requirement and it look me several weeks to get something
working. I think you'll need to make use of as much off the shelf software
as you can, given your timescale.

If you don't want to get your hands dirty with Lucene and like Tropo, why
not convert your local storage to mbox/maildir/mbx if it is not already in
the appropriate format and light up imapd while you index? e.g. If your
local format is PST (i.e. Outlook), take a look at
http://www.tldp.org/HOWTO/html_single/Outlook-to-Unix-Mailbox/ 

-----Original Message-----
From: Suba Suresh [mailto:subas@wolfram.com] 
Sent: 14 August 2006 16:50
To: java-user@lucene.apache.org
Subject: Indexing existing email archives

I was looking at "http://www.tropo.com/techno/java/lucene/imap.html" and my
understanding is it is used to retrieve and index the emails that is on the
email server. I have some stored emails in folders in my local disk and huge
list of email archives in another system. Is there a way I could index them?

I have to have this working in next couple of days. Any help and suggestions
are appreciated.

thanks,
suba suresh.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0082_01C6C046.046501D0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDgxNTA3
MzcxOFowIwYJKoZIhvcNAQkEMRYEFP24DJSWrjYfa3lsj1NfCh70UcMHMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAEq+5rUwyg13qHXYm7VKVu2k36XWkNuQlmou
/E7/xPB75VJoyYdj00CNPFFyWSg1TUkWCOEwgBFv5WTI32KOXoQrBclm9chJd+nutQr9GWziL5KK
1kaV+55BzRAo5ieTs4OB0L1z2+76nWXP9oo5B3CCZjVVYq1dNQCtwkGwQPrCBhYaWz9gVepg17hc
eR6KdXiSbuCJDo0BUBH7KojD/M3yq9cNcip9m7TVZQEIxgOmL1dOJnBqzdo6GT210F1dsaRLAomA
FHAkwCq2wTDRJAandlsOTSf2RhaWeV9t5/ngKvx3VgAnr/8Ns7luG5z3GZy2QVndzEmF/KsAiZJM
kzMAAAAAAAA=

------=_NextPart_000_0082_01C6C046.046501D0--


From java-user-return-22712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 09:57:40 2006
Return-Path: <java-user-return-22712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61985 invoked from network); 15 Aug 2006 09:57:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 09:57:40 -0000
Received: (qmail 87058 invoked by uid 500); 15 Aug 2006 09:57:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87033 invoked by uid 500); 15 Aug 2006 09:57:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87022 invoked by uid 99); 15 Aug 2006 09:57:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 02:57:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.97.200.65] (HELO gate.fiz-technik.de) (193.97.200.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 02:57:32 -0700
Received: from localhost (localhost [127.0.0.1])
	by localhost.qgroup.de (Postfix) with ESMTP id 8E6EC13F76F
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 11:57:09 +0200 (CEST)
Received: from gate.fiz-technik.de ([127.0.0.1])
 by localhost (gate [127.0.0.1]) (amavisd-new, port 27304) with ESMTP
 id 26761-24 for <java-user@lucene.apache.org>;
 Tue, 15 Aug 2006 11:57:09 +0200 (CEST)
Received: from fizmail.fiz-technik.de (newton1.fiz-technik.de [193.97.200.134])
	by gate.fiz-technik.de (Postfix) with SMTP id 4609313F76E
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 11:57:09 +0200 (CEST)
Received: by fizmail.fiz-technik.de (Postfix, from userid 65534)
	id CA04568195; Tue, 15 Aug 2006 11:57:08 +0200 (CEST)
Received: from newton1.fiz-technik.de (localhost [127.0.0.1])
	by fizmail.fiz-technik.de (Postfix) with ESMTP id 8D71768954
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 11:57:06 +0200 (CEST)
Message-ID: <3154093.1155635826576.SLOX.WebMail.wwwrun@newton1.fiz-technik.de>
From: Waheed Mohammed <Waheed.Mohammed@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Handling OR, NOT, AND operators in search query
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Priority: 3 (normal)
X-Mailer: SuSE Linux Openexchange Server 4 - WebMail (Build 2.3788)
X-Operating-System: Linux 2.4.21-215-default i386 (JVM 1.3.1_04)
Organization: FIZ Technik e.V.
References: <OFC2ECBE60.52D1738A-ON872571CA.0032A189-872571CA.0033ED10@us.ibm.com>
Date: Tue, 15 Aug 2006 11:57:06 +0200 (CEST)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

you are propbably lower casing your queryString before being given to QueryParser.

String queryString = queryString.toLowerCase();
Query query = MultiFieldQueryParser.parse(queryString, ....);

make sure that your queryString has operators in upperCase before being given to QueryParser



Am Mo 14.08.2006 11:27, Nina Khosravi <khosravi@us.ibm.com> schrieb:

> Hello,
> 
> I am refactoring our search code that was written prior to 1.4.3.  I am 
> using Lucene 2.0 now.  The search string entered by users was actually 
> parsed by our custom code to generate the query.  This code was getting 
> fairly big and messy and I'm changing the code to use Lucene's query 
> parsers to build the query.  I am actually using the 
> MultiFieldQueryParser.  The problem I am having is the OR, NOT, and AND 
> operators are not being interpreted as operators but just as terms.  I am 
> using the WhitespaceAnalyzer and defaulting the operator to 
> QueryParser.AND_OPERATOR.  Any ideas how to get these strings to be 
> interpreted as operators?
> 
> Thanks in advance for any help you can give me on this.  I want to also 
> say that not only is Lucene a great powerful search engine but the user 
> mailing list must be one of the best!!   It so nice to see how quickly we 
> get responses on our questions.   I've also learned a lot from what others 
> write about. 
> 
> Regards,
> Nina 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 10:26:26 2006
Return-Path: <java-user-return-22713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68949 invoked from network); 15 Aug 2006 10:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 10:26:26 -0000
Received: (qmail 18457 invoked by uid 500); 15 Aug 2006 10:26:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17895 invoked by uid 500); 15 Aug 2006 10:26:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17884 invoked by uid 99); 15 Aug 2006 10:26:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 03:26:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 03:26:18 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 280CD1887C; Tue, 15 Aug 2006 10:25:56 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust972.asfd.broadband.ntl.com [81.103.211.205])
	by mail.seseit.com (Postfix) with ESMTP id 059021887B
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 10:25:53 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: 7GB index taking forever to return hits
Date: Tue, 15 Aug 2006 11:25:45 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_032B_01C6C05D.8C8648A0"
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E811450932F@UREXCHVS3.ur.com>
Thread-Index: Aca/z6yqE+ELYx84RTyP5WgOpSninQALGBegABYh4cA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Message-Id: <20060815102553.059021887B@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_032B_01C6C05D.8C8648A0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Sounds like you want to tokenise CONTENTS, if you are not already doing so. 

Then you could simply have:

   +CONTENTS:white +CONTENTS:hard +CONTENTS:hat

-----Original Message-----
From: Van Nguyen [mailto:vnguyen@ur.com] 
Sent: 15 August 2006 01:30
To: java-user@lucene.apache.org
Subject: RE: 7GB index taking forever to return hits

It was how I was implementing the search.  

I am using a boolean query.  Prior to the 7GB index, I was searching over a
150MB index that consist of a very small part of the bigger index.  I was
able to set my BooleanQuery to
BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) and that worked fine.
But I think that's the cause of my problem with this bigger index.
Commenting that out, I get an TooManyClause Exception.  A typical query
would look something like this:

+CONTENTS:*white* +CONTENTS:*hard* +CONTENTS:*hat* +COMPANY_CODE:u1 
+LANGUAGE:enu -SKU_DESC_ID:0 +IS_DC:d +LOCATION:b72

BooleanQuery q = new BooleanQuery();

WildcardQuery wc1 = new WildcardQuery("CONTENTS", "*white*"); WildcardQuery
wc2 = new WildcardQuery("CONTENTS", "*hard*"); WildcardQuery wc3 = new
WildcardQuery("CONTENTS", "*hat*"); q.add(wc1, BooleanClause.Occur.MUST);
q.add(wc2, BooleanClause.Occur.MUST); q.add(wc3, BooleanClause.Occur.MUST);

TermQuery t1 = new TermQuery("COMPANY_CODE", "u1"); q.add(t1,
BooleanClause.Occur.MUST);

TermQuery t2 = new TermQuery("LANGUAGE", "enu"); q.add(t2,
BooleanClause.Occur.MUST); .
.
.

I take it this is not the most optimal way about this.  

So that leads me to my next question... What is the most optimal way about
this?

Van

-----Original Message-----
From: yueyu lin [mailto:popeyelin@gmail.com]
Sent: Monday, August 14, 2006 11:30 AM
To: java-user@lucene.apache.org
Subject: Re: 7GB index taking forever to return hits

2GB limitation only exists when you want to put them to memory in 32bits
box.
Our index size is larger than 13 giga bytes, and it works fine.
I think it must be something error in your design. You can use Luke to see
what happened in your index.

On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
>
>  Hi,
>
>
>
> I have a 7GB index (about 45 fields per document X roughly 5.5 million
> docs) running on a Windows 2003 32bit machine (dual proc, 2GB memory).

> The index is optimized.  Performing a search on this index will just 
> "hang" when performing the search (wild card query with a sort).  At 
> first the CPU usage is 100%, then drops down to 50% after a minute or 
> so, and then no CPU utilization... but the thread is still trying to 
> perform the search.  I've tried this in my J2EE app and in a main 
> program.  Is this due to the 2GB limitation of the 32bit OS (I didn't 
> realize the index would be this big... just let it run over the
weekend).
>
>
>
> If this is due to the 2GB limitation of the 32bit OS and since I have 
> this 7GB index built already (and optimized), is there a way to split 
> this into 2GB indices w/o having to re-index?  Or is this due to
another factor?
>
>
>
> Van
>
> United Rentals
> Consider it done.(tm)
> 800-UR-RENTS
> unitedrentals.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
--
Yueyu Lin

------=_NextPart_000_032B_01C6C05D.8C8648A0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDgxNTEw
MjU0NFowIwYJKoZIhvcNAQkEMRYEFF1i7Bpxa2v3XE/ZMEoansCg8cvNMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAJAJTxymSA1fR54s+PjyOZ4gHNYBA/mCb1Nt
fMxDlrSPFm6v9uulza3dfTYCGtoiwGMkhaIHM1Xf+dIb0yVQLOiti0rXhJOCAjlycp1T8M2SJ3ep
9k6JJ+HfPcdu+766W59vCeBThHFTmxSFKVwjvoEHHH1QjP1SKufMEkSUPxE7KH0mTT9D54uRe8LN
8EKvFxfEXNnA/+/TJDli2+2jor69NMZcreedWc3szIJMNZgp6RUkXaxzEGty5FlXRLbmJVwK8Ll/
q5rOMVxzcpxOvb5AuBmrJaXzeBEVNsnx4pKOIMMP0zAfhB7cpOM6y/BwLtT6T5UlXr7dPHrx36Ks
svMAAAAAAAA=

------=_NextPart_000_032B_01C6C05D.8C8648A0--


From java-user-return-22714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 10:53:21 2006
Return-Path: <java-user-return-22714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77136 invoked from network); 15 Aug 2006 10:53:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 10:53:21 -0000
Received: (qmail 49517 invoked by uid 500); 15 Aug 2006 10:53:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49482 invoked by uid 500); 15 Aug 2006 10:53:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49471 invoked by uid 99); 15 Aug 2006 10:53:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 03:53:15 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 205.152.59.65 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from [205.152.59.65] (HELO imf17aec.mail.bellsouth.net) (205.152.59.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 03:53:13 -0700
Received: from ibm57aec.bellsouth.net ([68.209.119.157])
          by imf17aec.mail.bellsouth.net with ESMTP
          id <20060815105252.NNXN12386.imf17aec.mail.bellsouth.net@ibm57aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Tue, 15 Aug 2006 06:52:52 -0400
Received: from jimwormold ([68.209.119.157]) by ibm57aec.bellsouth.net
          with ESMTP
          id <20060815105246.FBMA29821.ibm57aec.bellsouth.net@jimwormold>
          for <java-user@lucene.apache.org>;
          Tue, 15 Aug 2006 06:52:46 -0400
Date: Tue, 15 Aug 2006 06:58:33 -0400 (EDT)
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: stemmed search and exact match on "same" field
In-Reply-To: <Pine.LNX.4.58.0608141157210.14331@hal.rescomp.berkeley.edu>
Message-ID: <Pine.LNX.4.63.0608150653420.18897@jimwormold>
References: <Pine.LNX.4.63.0608140856001.21921@jimwormold>
 <Pine.LNX.4.58.0608141157210.14331@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you, Chris. You have confirmed what I had all but resigned myself
to (and you summarized my goal precisely). I am sticking with the two
versions of the field and just accepting the fact that the search
clients will need to use my custom query parser.

Even if one doesn't get the answer one wants, it's at least comforting
to get a definitive answer so that the speculation can stop and the work
can get done.

thanks again,
-- Robert

On Mon, 14 Aug 2006, Chris Hostetter wrote:

>
> Therre's a lot of information in your email, and a lot of questions that
> relate to similar topics and address different ways of acomplishing
> similar but different things ... too much for me to digest
> all at once, so lemme start by seeing if i can summarize your goal, and
> then give you my suggestion based on the goal as i see it...
>
> You want simple term matches to be "stemmed" but you want phrase ueries to
> be "unstemmed"
>
> so if i user queries for the word...
> 	jumped
> ...you want that to match any of the words: jump, jumps, jumped, etc...
>
> if a user queries for...
> 	"the dogs"
> ...you want that to only match the exact phrase and not something with the
> tokens "the dog"
>
> you want these ideas to work, even if phrases and terms are mixed in
> the users query...
> 	foo:jumped bar:"the dogs"
>
> My first though is that you kepe using two versions of hte field (one
> stemmed and one unstemmed) and you then subclass QueryParser and override
> the getFieldQuery(String field, String queryText) method ... if the second
> arg looks like a phrase to you (ie: it has spaces or what not) them return
> super.getField(field, queryText).  If it's not a phrase, then call
> super.getField(field + "_STEMMED", queryText).
>
> where this breaks down is if you want the non-stemmed behavior even if hte
> users "phrase" only contains one word, ie...
> 	foo:jumped bar:"dogs"
> ...because the information that "dogs" was in quotes is lost by the time
> getFieldQuery is called.  You'd have to write a lot more QueryParsing code
> to get that behavior.
>
>
> In general, for your goal, i would not attempt to put both teh stemmed and
> unstemmed tokens in the same field -- because as i think you mentioned,
> there is not way to tell them apart at query time.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 10:54:21 2006
Return-Path: <java-user-return-22715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78917 invoked from network); 15 Aug 2006 10:54:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 10:54:20 -0000
Received: (qmail 51135 invoked by uid 500); 15 Aug 2006 10:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51098 invoked by uid 500); 15 Aug 2006 10:54:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51087 invoked by uid 99); 15 Aug 2006 10:54:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 03:54:14 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 205.152.59.65 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from [205.152.59.65] (HELO imf17aec.mail.bellsouth.net) (205.152.59.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 03:54:14 -0700
Received: from ibm57aec.bellsouth.net ([68.209.119.157])
          by imf17aec.mail.bellsouth.net with ESMTP
          id <20060815105353.NOKX12386.imf17aec.mail.bellsouth.net@ibm57aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Tue, 15 Aug 2006 06:53:53 -0400
Received: from jimwormold ([68.209.119.157]) by ibm57aec.bellsouth.net
          with ESMTP
          id <20060815105353.FBOC29821.ibm57aec.bellsouth.net@jimwormold>
          for <java-user@lucene.apache.org>;
          Tue, 15 Aug 2006 06:53:53 -0400
Date: Tue, 15 Aug 2006 06:59:40 -0400 (EDT)
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: stemmed search and exact match on "same" field
In-Reply-To: <Pine.LNX.4.58.0608141157210.14331@hal.rescomp.berkeley.edu>
Message-ID: <Pine.LNX.4.63.0608150658530.18897@jimwormold>
References: <Pine.LNX.4.63.0608140856001.21921@jimwormold>
 <Pine.LNX.4.58.0608141157210.14331@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you, Chris. You have confirmed what I had all but resigned myself
to (and you summarized my goal precisely). I am sticking with the two
versions of the field and just accepting the fact that the search
clients will need to use my custom query parser.

Even if one doesn't get the answer one wants, it's at least comforting
to get a definitive answer so that the speculation can stop and the work
can get done.

thanks again,
-- Robert

On Mon, 14 Aug 2006, Chris Hostetter wrote:

>
> Therre's a lot of information in your email, and a lot of questions that
> relate to similar topics and address different ways of acomplishing
> similar but different things ... too much for me to digest
> all at once, so lemme start by seeing if i can summarize your goal, and
> then give you my suggestion based on the goal as i see it...
>
> You want simple term matches to be "stemmed" but you want phrase ueries to
> be "unstemmed"
>
> so if i user queries for the word...
> 	jumped
> ...you want that to match any of the words: jump, jumps, jumped, etc...
>
> if a user queries for...
> 	"the dogs"
> ...you want that to only match the exact phrase and not something with the
> tokens "the dog"
>
> you want these ideas to work, even if phrases and terms are mixed in
> the users query...
> 	foo:jumped bar:"the dogs"
>
> My first though is that you kepe using two versions of hte field (one
> stemmed and one unstemmed) and you then subclass QueryParser and override
> the getFieldQuery(String field, String queryText) method ... if the second
> arg looks like a phrase to you (ie: it has spaces or what not) them return
> super.getField(field, queryText).  If it's not a phrase, then call
> super.getField(field + "_STEMMED", queryText).
>
> where this breaks down is if you want the non-stemmed behavior even if hte
> users "phrase" only contains one word, ie...
> 	foo:jumped bar:"dogs"
> ...because the information that "dogs" was in quotes is lost by the time
> getFieldQuery is called.  You'd have to write a lot more QueryParsing code
> to get that behavior.
>
>
> In general, for your goal, i would not attempt to put both teh stemmed and
> unstemmed tokens in the same field -- because as i think you mentioned,
> there is not way to tell them apart at query time.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 11:46:42 2006
Return-Path: <java-user-return-22716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6036 invoked from network); 15 Aug 2006 11:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 11:46:41 -0000
Received: (qmail 92826 invoked by uid 500); 15 Aug 2006 11:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92797 invoked by uid 500); 15 Aug 2006 11:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92786 invoked by uid 99); 15 Aug 2006 11:46:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 04:46:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 04:46:35 -0700
Received: from [192.168.0.105] (c-24-63-81-15.hsd1.ma.comcast.net [24.63.81.15])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k7FBkL4i024013
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 06:46:22 -0500
Message-ID: <44E1B406.3030509@wolfram.com>
Date: Tue, 15 Aug 2006 07:46:14 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing existing email archives
References: <20060815073732.48F7B1887B@mail.seseit.com>
In-Reply-To: <20060815073732.48F7B1887B@mail.seseit.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The mail archives and saved mail folders can be opened up and read as a 
text file using textpad or wordpad. Will it be possible to index them as 
it is? The mail client is Thunderbird Mailbox.

If I have to use third party software is there anything you can suggest?

suba suresh.

Rob Staveley (Tom) wrote:
>> I have to have this working in next couple of days.
> 
> I had a similar requirement and it look me several weeks to get something
> working. I think you'll need to make use of as much off the shelf software
> as you can, given your timescale.
> 
> If you don't want to get your hands dirty with Lucene and like Tropo, why
> not convert your local storage to mbox/maildir/mbx if it is not already in
> the appropriate format and light up imapd while you index? e.g. If your
> local format is PST (i.e. Outlook), take a look at
> http://www.tldp.org/HOWTO/html_single/Outlook-to-Unix-Mailbox/ 
> 
> -----Original Message-----
> From: Suba Suresh [mailto:subas@wolfram.com] 
> Sent: 14 August 2006 16:50
> To: java-user@lucene.apache.org
> Subject: Indexing existing email archives
> 
> I was looking at "http://www.tropo.com/techno/java/lucene/imap.html" and my
> understanding is it is used to retrieve and index the emails that is on the
> email server. I have some stored emails in folders in my local disk and huge
> list of email archives in another system. Is there a way I could index them?
> 
> I have to have this working in next couple of days. Any help and suggestions
> are appreciated.
> 
> thanks,
> suba suresh.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 12:27:11 2006
Return-Path: <java-user-return-22717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20259 invoked from network); 15 Aug 2006 12:27:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 12:27:11 -0000
Received: (qmail 58530 invoked by uid 500); 15 Aug 2006 12:27:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58464 invoked by uid 500); 15 Aug 2006 12:27:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58453 invoked by uid 99); 15 Aug 2006 12:27:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 05:27:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 05:27:03 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 1B7C51887C; Tue, 15 Aug 2006 12:26:40 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust972.asfd.broadband.ntl.com [81.103.211.205])
	by mail.seseit.com (Postfix) with ESMTP id 364C21887B
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 12:26:36 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Indexing existing email archives
Date: Tue, 15 Aug 2006 13:26:24 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0032_01C6C06E.650834D0"
Thread-Index: AcbAYHk7ucMiSqhGR/+ohZan0kqsUgAA5KaA
In-Reply-To: <44E1B406.3030509@wolfram.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Message-Id: <20060815122636.364C21887B@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0032_01C6C06E.650834D0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

OK, we're well off topic now. If you have follow up on this can I recommend
that you don't do this via java-user@lucene.apache.org. 

You'll see from http://www.mozilla.org/support/thunderbird/faq#q2.10 that
Thunderbird stores its mail in mbox format. If you use Dovecot for your imap
server, you'll be able to use the mbox file directly. Just copy the file
over. mbox is very easy to work with. You'll have seen from looking at it
with your text editor that  there are "From lines" followed by raw RFC 822
data. You can append one mbox file to another very simply.

-----Original Message-----
From: Suba Suresh [mailto:subas@wolfram.com] 
Sent: 15 August 2006 12:46
To: java-user@lucene.apache.org
Subject: Re: Indexing existing email archives

The mail archives and saved mail folders can be opened up and read as a text
file using textpad or wordpad. Will it be possible to index them as it is?
The mail client is Thunderbird Mailbox.

If I have to use third party software is there anything you can suggest?

suba suresh.

Rob Staveley (Tom) wrote:
>> I have to have this working in next couple of days.
> 
> I had a similar requirement and it look me several weeks to get 
> something working. I think you'll need to make use of as much off the 
> shelf software as you can, given your timescale.
> 
> If you don't want to get your hands dirty with Lucene and like Tropo, 
> why not convert your local storage to mbox/maildir/mbx if it is not 
> already in the appropriate format and light up imapd while you index? 
> e.g. If your local format is PST (i.e. Outlook), take a look at 
> http://www.tldp.org/HOWTO/html_single/Outlook-to-Unix-Mailbox/
> 
> -----Original Message-----
> From: Suba Suresh [mailto:subas@wolfram.com]
> Sent: 14 August 2006 16:50
> To: java-user@lucene.apache.org
> Subject: Indexing existing email archives
> 
> I was looking at "http://www.tropo.com/techno/java/lucene/imap.html" 
> and my understanding is it is used to retrieve and index the emails 
> that is on the email server. I have some stored emails in folders in 
> my local disk and huge list of email archives in another system. Is there
a way I could index them?
> 
> I have to have this working in next couple of days. Any help and 
> suggestions are appreciated.
> 
> thanks,
> suba suresh.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0032_01C6C06E.650834D0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDgxNTEy
MjYyMFowIwYJKoZIhvcNAQkEMRYEFBLA3O2pX0TVFQlGesBWet/GuFzaMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAIm+Lhsi2nMkCW5SsmfT/C/5UrEZSc/9Eh6v
A0FqC6yOgjWpSWUt8dpeyM8uhQpI2mALA3xhyQWol2yYITFeil9Ak489k3wp4zjILibWqaejkZM0
IQ2eB4/cziY1n3WVF/u+x7+JLnYnYIlDqS/0nPysv+edv5gMGJ0/cS7JSOu5JI5t2FMyqRibau3V
YEkjjRLZeN0LJ9qNuEuBu5DqfNEQqxD6+9E64IQoaEJTiAccXQsX9gEal7rqFfrXceuY3i+3V9Lz
4LS9mDlgTai9ANLC/5Qrzr7Xflg9L28I+fB6ZlENCo3nvyCEilg6wooF5ZvDo8D78ssW2daWXG3J
QjYAAAAAAAA=

------=_NextPart_000_0032_01C6C06E.650834D0--


From java-user-return-22718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 12:38:48 2006
Return-Path: <java-user-return-22718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24130 invoked from network); 15 Aug 2006 12:38:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 12:38:48 -0000
Received: (qmail 80692 invoked by uid 500); 15 Aug 2006 12:38:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80649 invoked by uid 500); 15 Aug 2006 12:38:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80638 invoked by uid 99); 15 Aug 2006 12:38:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 05:38:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 05:38:41 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 73F291887C; Tue, 15 Aug 2006 12:38:20 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust972.asfd.broadband.ntl.com [81.103.211.205])
	by mail.seseit.com (Postfix) with ESMTP id 580131887B
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 12:38:18 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Indexing existing email archives
Date: Tue, 15 Aug 2006 13:38:11 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0055_01C6C070.0CA025D0"
Thread-Index: AcbAYHk7ucMiSqhGR/+ohZan0kqsUgAA5KaAAACSYhA=
In-Reply-To: <20060815122636.364C21887B@mail.seseit.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Message-Id: <20060815123818.580131887B@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0055_01C6C070.0CA025D0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

 > Will it be possible to index them as it is?

You'll not be indexing headers or the From field specially if you simply
throw the text at the indexer. You'll not even be separating out separate
e-mail messages. You certainly need to be able to separate out e-mail
messages, to treat messages as separate documents. You'll also probably want
to MIME-decode to index attachments etc. Also you may want to unzip etc. If
you want to do this yourself, you should start by getting the Lucene In
Action book and look at the content handlers for different file types etc
etc, but reading the book will probably take a chunk out of your "couple of
days". That's why taking Tropo off the shelf is probably your best route,
assuming that Tropo's analysis is adequate for your needs, handling all of
your attachment requirements. 

Disclaimer: I'm not familiar with Tropo.

-----Original Message-----
From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com] 
Sent: 15 August 2006 13:26
To: java-user@lucene.apache.org
Subject: RE: Indexing existing email archives

OK, we're well off topic now. If you have follow up on this can I recommend
that you don't do this via java-user@lucene.apache.org. 

You'll see from http://www.mozilla.org/support/thunderbird/faq#q2.10 that
Thunderbird stores its mail in mbox format. If you use Dovecot for your imap
server, you'll be able to use the mbox file directly. Just copy the file
over. mbox is very easy to work with. You'll have seen from looking at it
with your text editor that  there are "From lines" followed by raw RFC 822
data. You can append one mbox file to another very simply.

-----Original Message-----
From: Suba Suresh [mailto:subas@wolfram.com]
Sent: 15 August 2006 12:46
To: java-user@lucene.apache.org
Subject: Re: Indexing existing email archives

The mail archives and saved mail folders can be opened up and read as a text
file using textpad or wordpad. Will it be possible to index them as it is?
The mail client is Thunderbird Mailbox.

If I have to use third party software is there anything you can suggest?

suba suresh.

Rob Staveley (Tom) wrote:
>> I have to have this working in next couple of days.
> 
> I had a similar requirement and it look me several weeks to get 
> something working. I think you'll need to make use of as much off the 
> shelf software as you can, given your timescale.
> 
> If you don't want to get your hands dirty with Lucene and like Tropo, 
> why not convert your local storage to mbox/maildir/mbx if it is not 
> already in the appropriate format and light up imapd while you index?
> e.g. If your local format is PST (i.e. Outlook), take a look at 
> http://www.tldp.org/HOWTO/html_single/Outlook-to-Unix-Mailbox/
> 
> -----Original Message-----
> From: Suba Suresh [mailto:subas@wolfram.com]
> Sent: 14 August 2006 16:50
> To: java-user@lucene.apache.org
> Subject: Indexing existing email archives
> 
> I was looking at "http://www.tropo.com/techno/java/lucene/imap.html" 
> and my understanding is it is used to retrieve and index the emails 
> that is on the email server. I have some stored emails in folders in 
> my local disk and huge list of email archives in another system. Is 
> there
a way I could index them?
> 
> I have to have this working in next couple of days. Any help and 
> suggestions are appreciated.
> 
> thanks,
> suba suresh.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0055_01C6C070.0CA025D0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDgxNTEy
MzgxMFowIwYJKoZIhvcNAQkEMRYEFKk5qVz5sXIJivSXboCgLvr4dYqbMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBABX25stZvUYWqYqxDArGbbudtKFONOvvX9pQ
KiysBemtozlXpizjaZ22RquXeHEzUVMIA093xA3m1bTrxX5zyDjF3VrHK6jy+Ux89nIRjCaKkKq4
l1oG+XNAvC5Dhw+oFlB88muc1SgGjrNo68c4EBOl+kP8gwgtzS3pYwj/qbTDPxG0xg9L6JVfr1xw
5dZ321i58MCWDo9Knygh9ShunXGLLrGaWWl6EFQ0WkpKtJd8fiBm5h8G3T5uHVAo/ihJyTPV8WwQ
c05bpg4ep0FVo67ijb5O0XCIbxdmFDcYJJuIK0ZbPgvJTnePYijE1upqbyuMgJIOzPvtCv6VBgEm
7IMAAAAAAAA=

------=_NextPart_000_0055_01C6C070.0CA025D0--


From java-user-return-22719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 12:58:49 2006
Return-Path: <java-user-return-22719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31709 invoked from network); 15 Aug 2006 12:58:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 12:58:48 -0000
Received: (qmail 7431 invoked by uid 500); 15 Aug 2006 12:58:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7408 invoked by uid 500); 15 Aug 2006 12:58:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7395 invoked by uid 99); 15 Aug 2006 12:58:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 05:58:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 05:58:28 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1GCyUg-0000sb-Dj
	for java-user@lucene.apache.org; Tue, 15 Aug 2006 14:58:06 +0200
Message-ID: <44E1C53A.1080602@tejnora.cz>
Date: Tue, 15 Aug 2006 14:59:38 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: updating document
References: <1155145453.2739.8.camel@localhost.localdomain>	 <359a92830608100616re219fe3la419623871885798@mail.gmail.com>	 <1155171673.3388.3.camel@localhost.localdomain>	 <d8050f240608100858h7b93b695nb027fb588ca2e901@mail.gmail.com>	 <1155230981.9137.4.camel@localhost.localdomain>	 <d8050f240608102323i6110fa70oa78ea72ca77f7d92@mail.gmail.com>	 <44DC791A.2030800@tejnora.cz> <d8050f240608120933v7bc6019fm39d01197c2d1bc23@mail.gmail.com>
In-Reply-To: <d8050f240608120933v7bc6019fm39d01197c2d1bc23@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Well, you can have! :-) Even I have not tested, just an idea.

You can get document id after add - numDocs() and insert if DB fails, 
you can delete document from RAMDir.

Or in my case of batches - im adding documents in DB with savepoint, 
than create clear index (create=true) and at the end if everything is 
allright
use addIndexes() if not than rollback to savepoint and send sms.
> Unfortunately you may have transactional problems with this approach.  
> That
> is, if you write to lucene and in the same logical transaction you 
> write to
> external storage you may have atomicity problems if one of these actions
> fails.  But you can't have everything!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 13:05:04 2006
Return-Path: <java-user-return-22720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35526 invoked from network); 15 Aug 2006 13:05:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 13:05:04 -0000
Received: (qmail 21221 invoked by uid 500); 15 Aug 2006 13:04:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21197 invoked by uid 500); 15 Aug 2006 13:04:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21186 invoked by uid 99); 15 Aug 2006 13:04:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 06:04:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [145.97.36.132] (HELO mta1.kennisnet.nl) (145.97.36.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 06:04:57 -0700
Received: from Scooter.kennisnet.org (unknown [192.87.94.198])
	by smarthost1.kennisnet.nl (Postfix) with SMTP id 6F51B3A406B
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 15:04:35 +0200 (CEST)
Received: from (192.168.0.30) by Scooter.kennisnet.org via smtp
	 id 6f88_8fa1ab2a_2c68_11db_8542_0030482a3887;
	Tue, 15 Aug 2006 16:15:53 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Index not recreated
Date: Tue, 15 Aug 2006 15:04:35 +0200
Message-ID: <90166A07138C384F88263316F712056C0B4025@robin.kennisnet.org>
In-Reply-To: <d8050f240608141728s48f88b99waabaa4ca4a7fb261@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index not recreated
Thread-Index: AcbAAb883tRwuqYuQXGKm9ebd7AqmAAaSQeg
From: "Ronald Wildenberg" <r.wildenberg@kennisnet.org>
To: <java-user@lucene.apache.org>
X-NAIMIME-Disclaimer: 1
X-NAIMIME-Modified: 1
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Van: Jason Polites [mailto:jason.polites@gmail.com]=20
> Verzonden: dinsdag 15 augustus 2006 2:28
> Onderwerp: Re: Index not recreated
>=20
> The "intermittent" nature of your problem points to a=20
> concurrency issue.
> Does the production environment have a greater number of=20
> users?  If so, this likely translates to a greater number of=20
> threads acting upon the index.  I'd be looking for possible=20
> conflicts between different threads accessing the index. =20
> This would also explain why you see the problem in production=20
> and not testing.


Well, reindexing takes place at 2 in the morning, so the number of
threads executing upon the index should not be a problem. But I'll keep
it in mind. Thanks.


DISCLAIMER:=0D
=0D
Dit bericht (met bijlagen) is met grote zorgvuldigheid samengesteld. Voor=
 mogelijke onjuistheid en/of onvolledigheid van de hierin verstrekte info=
rmatie kan Kennisnet geen aansprakelijkheid aanvaarden, evenmin kunnen aa=
n de inhoud van dit bericht (met bijlagen) rechten worden ontleend. De in=
houd van dit bericht (met bijlagen) kan vertrouwelijke informatie bevatte=
n en is uitsluitend bestemd voor de geadresseerde van dit bericht. Indien=
 u niet de beoogde ontvanger van dit bericht bent, verzoekt Kennisnet u d=
it bericht te verwijderen, eventuele bijlagen niet te openen en wijst Ken=
nisnet u op de onrechtmatigheid van het gebruiken, kopi=EBren of versprei=
den van de inhoud van dit bericht (met bijlagen).=0D
=0D
This message (with attachments) is given in good faith. Kennisnet cannot =
assume any responsibility for the accuracy or reliability of the informat=
ion contained in this message (with attachments), nor shall the informati=
on be construed as constituting any obligation on the part of Kennisnet. =
The information contained in this message (with attachments) may be confi=
dential or privileged and is only intended for the use of the named addre=
ssee. If you are not the intended recipient, you are requested by Kennisn=
et to delete this message (with attachments) without opening it and you a=
re notified by Kennisnet that any disclosure, copying or distribution of =
the information contained in this message (with attachments) is strictly =
prohibited and unlawful.=0D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 13:31:06 2006
Return-Path: <java-user-return-22721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49180 invoked from network); 15 Aug 2006 13:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 13:31:05 -0000
Received: (qmail 69494 invoked by uid 500); 15 Aug 2006 13:31:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69459 invoked by uid 500); 15 Aug 2006 13:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69448 invoked by uid 99); 15 Aug 2006 13:30:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 06:30:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 06:30:59 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1GCz09-00012n-9b
	for java-user@lucene.apache.org; Tue, 15 Aug 2006 15:30:37 +0200
Message-ID: <44E1CCD9.9020502@tejnora.cz>
Date: Tue, 15 Aug 2006 15:32:09 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: updating document
References: <1155145453.2739.8.camel@localhost.localdomain>
In-Reply-To: <1155145453.2739.8.camel@localhost.localdomain>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Im sending a snippet of code how to reconstruct UNSTORED fields.
It has two parts:
DB+terms

Class.forName("org.postgresql.Driver").newInstance();
            con = DriverManager.getConnection("jdbc:postgresql:lucene", 
"lucene", "lucene");
            PreparedStatement psCompany=con.prepareStatement("INSERT 
INTO term (name,value,doc,pos) VALUES ('company',?,?,?)");
           
            Directory sourceDir = FSDirectory.getDirectory(source,false);
            Directory targetDir = FSDirectory.getDirectory(target,true);
            Analyzer analyzer = (Analyzer)analyzers.get(lang);

            if(!IndexReader.indexExists(sourceDir))
            {
                System.err.println("Source index doesn't live on 
specified path");
                return;
            }
           
            ir = IndexReader.open(sourceDir);
            iw = new IndexWriter(targetDir,analyzer,true);
           
            int numdocs = ir.numDocs();
           
            TermEnum terms = ir.terms();

            String fnCompany = "company".intern();
            while(terms.next())
            {
                Term t = terms.term();
                if(fnCompany==t.field())
                {
                    int docfreq = ir.docFreq(t);
                    psCompany.setString(1, t.text());
                    TermPositions tp = ir.termPositions(t);
                    for(int i=0;i<docfreq;i++)
                    {
                        tp.next();
                        int docId =tp.doc();
                        for(int j=0,len=tp.freq();j<len;j++)
                        {
                            int pos = tp.nextPosition();
                            psCompany.setInt(2, docId);
                            psCompany.setInt(3, pos);
                            psCompany.executeUpdate();
                        }
                    }
                }
            }

For indexing you need, I suppose, - length of field (max(pos) + 
maxPosTerm.length())
and fields is recon by select pos,value,length(value) from term where 
name=? and doc=? order by pos asc;
and (analyzer) tokenstream is just wrapper for resultset.


If you would like to check if table is correct than
select t.value,count(*) as co from (select distinct doc,value from term) 
as t group by t.value order by co desc;

Isssues - you can store it but the information is not OK - it just clone 
UN_STORED well

PS: PostgreSQL with proper PK is pretty fast

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 13:47:38 2006
Return-Path: <java-user-return-22722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54160 invoked from network); 15 Aug 2006 13:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 13:47:38 -0000
Received: (qmail 95614 invoked by uid 500); 15 Aug 2006 13:47:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95130 invoked by uid 500); 15 Aug 2006 13:47:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95119 invoked by uid 99); 15 Aug 2006 13:47:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 06:47:31 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 06:47:29 -0700
Received: by py-out-1112.google.com with SMTP id s49so1873518pyc
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 06:47:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Gya4/DNCznBrEsUZuZIpwA9hKBZaFSdl4KUksM05fnYloQblwdLpl6ccE8xtxjYrqwF9i35E3uOxtYtsj0dm8v6uXD8xbQ9DB73Zl5TtrNWnQUX99mEEQ0BWYHDXf0wKqEG5anyek7+L88dkwn5EKxWCpE9N7BYjl9vj9U1J1Y4=
Received: by 10.35.114.16 with SMTP id r16mr15562712pym;
        Tue, 15 Aug 2006 06:47:08 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 15 Aug 2006 06:47:08 -0700 (PDT)
Message-ID: <359a92830608150647g595622d9i3605fee5fa25d1b9@mail.gmail.com>
Date: Tue, 15 Aug 2006 09:47:08 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index not recreated
In-Reply-To: <90166A07138C384F88263316F712056C0B401C@robin.kennisnet.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18418_5551458.1155649628419"
References: <359a92830608140751k480dac4cwa5f300fdf473a25e@mail.gmail.com>
	 <90166A07138C384F88263316F712056C0B401C@robin.kennisnet.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_18418_5551458.1155649628419
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm wondering if your best (and fastest) solution might be to just create a
fresh index each night in a new place and copy it over upon completion to
the "real" index location, then re-open your IndexReader(s). This has the
added benefit of always providing you with a backup in case, say, the power
goes out half way through creating your index. Your index may then be a day
older than you want, but at least your app does *something* useful....

Anyway, back to work....

Erick

On 8/15/06, Ronald Wildenberg <r.wildenberg@kennisnet.org> wrote:
>
> > Van: Erick Erickson [mailto:erickerickson@gmail.com]
> > Verzonden: maandag 14 augustus 2006 16:52
> > Aan: java-user@lucene.apache.org
> > Onderwerp: Re: Index not recreated
> >
> > You have all my sympathy. Let me see if I can restate your
> > problem.....
> >
> > "Hey Ron. The indexing process doesn't work. We can't/won't
> > let you look at the process or the results. We can't/won't
> > let you look at the finished product. We can't/won't let you
> > on the machine where it fails. Now fix it"
> > <G>.....
>
>
> That's more or less the current situation :)
>
>
> > There has been some discussion on the threads about
> > "interesing" behavior with NFS mounts, mostly having to do
> > with locking issues. But if you're using an NFS mount (or
> > other non-local filesystem), I can imagine that there could
> > be other kinds of issues, you might want to search the
> > archive if this applies to you....
>
>
> Hmm, I'll look into this. I don't know whether the index is
> stored on a non-local filesystem.
>
> Another strange thing is that indexing in the application has
> been working fine for about a year. Things went wrong only
> recently. I suddenly do remember that we had an upgrade from
> JDK 1.5.0_04 to 1.5.0_07. Could this have anything to do with
> it (rather unlikely I think).
>
>
> > Good luck!
> > Erick
>
>
> Thanks,
> Ronald.
>
>
>
> >
> > On 8/14/06, Ronald Wildenberg <r.wildenberg@kennisnet.org> wrote:
> > >
> > > Thanks for your response, comments are below. I'm using
> > Lucene 1.9.1.
> > >
> > >
> > > > Van: Erick Erickson [mailto:erickerickson@gmail.com]
> > > > Verzonden: maandag 14 augustus 2006 16:20
> > > > Onderwerp: Re: Index not recreated
> > > >
> > > > My first suspicion is that you have duplicate documents on the
> > > > *input* side, or are somehow adding documents more than
> > once. I use
> > > > code similar to yours and it works just fine for me.....
> > >
> > >
> > > This was my first suspicion also, but the facts seem to
> > rule out this
> > > possibility. When I create an index from scratch (without having a
> > > previous, old one), everything is ok (no duplicates). This
> > only happens the next time.
> > > So first I'm going to determine whether the index is really deleted
> > > after calling FSDirectory.getDirectory(indexDirectory,
> > true). If this
> > > is the case, I'm going to check whether I add duplicates myself.
> > >
> > >
> > > > How big is the index before and after you re-create it? Twice the
> > > > size and you're appending, not twice then.....
> > >
> > >
> > > An additional problem is that my issue is only reproducable on the
> > > production environment and I have very limited access
> > there. I cannot
> > > answer this right away. Furthermore, the problem does not occur
> > > always, which makes it even more fun ;-)
> > >
> > >
> > > > Are you absolutely sure that you're not somehow, adding documents
> > > > more than once? I can imagine that this could occur by processing
> > > > the source multiple times (don't know how you get your input) or
> > > > adding the document multiple times through some logic error. I've
> > > > also had my SQL queries return the same row more than once upon
> > > > occasion, usually cured with the "distinct"
> > > > qualifier.
> > > >
> > > > If you have some sort of unique ID, I can imagine debug
> > code with a
> > > > set of IDs and error reporting when you add a doc
> > > > (row) already in your index.....
> > >
> > >
> > > If I'm absolutely positive that the original index is removed by
> > > calling FSDirectory.getDirectory(indexDirectory, true), I'm
> > going to
> > > explore this possibility and add some extensive logging to
> > the pieces
> > > of code where documents are added (I do have a unique id,
> > so this can be checked).
> > >
> > >
> > > > Luke will help you examine your index to see if it's what
> > you think
> > > > is there. Perhaps another way to test this would be to add (again
> > > > for
> > > > debugging) a timestamp field in your index. That way, you
> > would know
> > > > when you added your duplicate rows.
> > >
> > >
> > > I haven't tried Luke yet to look at the index, since I haven't been
> > > able to get my hands on the actual index unfortunately.
> > >
> > >
> > > > Finally, you might try creating an index in a new
> > directory that you
> > > > *know* is empty and seeing what you get and how it
> > compares against
> > > > your current process. Although I'd expect your
> > indexwriter code to
> > > > barf if you had file locking issues and couldn't empty
> > the index, I
> > > > suppose it's possible....
> > >
> > >
> > > That's a good solution if all my other attempts fail :)
> > >
> > >
> > >
> > > > On 8/14/06, Ronald Wildenberg <r.wildenberg@kennisnet.org> wrote:
> > > > >
> > > > > Hi,
> > > > >
> > > > > I'm experiencing the problem that my index does not seem to be
> > > > > recreated, despite using the correct flags. The result is that
> > > > > documents that represent equal database rows occur multiple
> > > > times in
> > > > > the index. I recreate my entire index each night.
> > > > >
> > > > > My IndexDirectory/IndexWriter construction code looks like this:
> > > > >
> > > > >    File indexDirectory =3D new File(indexPath);
> > > > >    FSDirectory luceneIndexDirectory =3D
> > > > > FSDirectory.getDirectory(indexDirectory, true);
> > > > >    IndexWriter indexWriter =3D new
> > IndexWriter(luceneIndexDirectory,
> > > > > analyzer, true);
> > > > >
> > > > > This code should take care of recreating my index, but
> > it does not
> > > > > seem to be working properly. It looks like the old index is not
> > > > > removed and the same documents are added to my index again.
> > > > >
> > > > > I have strong reasons to not suspect other code to add
> > duplicate
> > > > > documents. First, if no index has yet been created, no
> > duplicate
> > > > > documents are added. Second, if an old index does exist, after
> > > > > recreating the index all documents exist exactly twice (and the
> > > > > following night they exist three times, etc.). It is not
> > > > the case that
> > > > > some documents are duplicated.
> > > > >
> > > > > Does anyone have any ideas?
> > > > >
> > > > > Thanks in advance,
> > > > > Ronald.
> > > > >
> > > > >
> > > > > DISCLAIMER:
> > > > >
> > > > > Dit bericht (met bijlagen) is met grote zorgvuldigheid
> > > > samengesteld.
> > > > > Voor mogelijke onjuistheid en/of onvolledigheid van de hierin
> > > > > verstrekte informatie kan Kennisnet geen aansprakelijkheid
> > > > aanvaarden,
> > > > > evenmin kunnen aan de inhoud van dit bericht (met bijlagen)
> > > > > rechten worden ontleend. De inhoud van dit bericht (met
> > bijlagen)
> > > > > kan vertrouwelijke informatie bevatten en is uitsluitend
> > > > bestemd voor de
> > > > > geadresseerde van dit bericht. Indien u niet de beoogde
> > > > ontvanger van
> > > > > dit bericht bent, verzoekt Kennisnet u dit bericht te
> > verwijderen,
> > > > > eventuele bijlagen niet te openen en wijst Kennisnet u op de
> > > > > onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden
> > > > van de inhoud van dit bericht (met bijlagen).
> > > > >
> > > > > This message (with attachments) is given in good faith.
> > Kennisnet
> > > > > cannot assume any responsibility for the accuracy or
> > reliability
> > > > > of the information contained in this message (with
> > attachments),
> > > > > nor shall the information be construed as constituting any
> > > > obligation on
> > > > > the part of Kennisnet. The information contained in this
> > > > message (with
> > > > > attachments) may be confidential or privileged and is only
> > > > > intended for the use of the named addressee. If you are not the
> > > > > intended recipient, you are requested by Kennisnet to
> > delete this
> > > > message (with
> > > > > attachments) without opening it and you are notified by
> > > > Kennisnet that
> > > > > any disclosure, copying or distribution of the information
> > > > contained
> > > > > in this message (with attachments) is strictly prohibited
> > > > and unlawful.
> > > > >
> > > > >
> > > > >
> > > >
> > >
> > >
> > > DISCLAIMER:
> > >
> > > Dit bericht (met bijlagen) is met grote zorgvuldigheid
> > samengesteld.
> > > Voor mogelijke onjuistheid en/of onvolledigheid van de hierin
> > > verstrekte informatie kan Kennisnet geen aansprakelijkheid
> > aanvaarden,
> > > evenmin kunnen aan de inhoud van dit bericht (met bijlagen) rechten
> > > worden ontleend. De inhoud van dit bericht (met bijlagen) kan
> > > vertrouwelijke informatie bevatten en is uitsluitend
> > bestemd voor de
> > > geadresseerde van dit bericht. Indien u niet de beoogde
> > ontvanger van
> > > dit bericht bent, verzoekt Kennisnet u dit bericht te verwijderen,
> > > eventuele bijlagen niet te openen en wijst Kennisnet u op de
> > > onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden
> > van de inhoud van dit bericht (met bijlagen).
> > >
> > > This message (with attachments) is given in good faith. Kennisnet
> > > cannot assume any responsibility for the accuracy or reliability of
> > > the information contained in this message (with attachments), nor
> > > shall the information be construed as constituting any
> > obligation on
> > > the part of Kennisnet. The information contained in this
> > message (with
> > > attachments) may be confidential or privileged and is only intended
> > > for the use of the named addressee. If you are not the intended
> > > recipient, you are requested by Kennisnet to delete this
> > message (with
> > > attachments) without opening it and you are notified by
> > Kennisnet that
> > > any disclosure, copying or distribution of the information
> > contained
> > > in this message (with attachments) is strictly prohibited
> > and unlawful.
> > >
> > >
> >
>
>
> DISCLAIMER:
>
> Dit bericht (met bijlagen) is met grote zorgvuldigheid samengesteld. Voor
> mogelijke onjuistheid en/of onvolledigheid van de hierin verstrekte
> informatie kan Kennisnet geen aansprakelijkheid aanvaarden, evenmin kunne=
n
> aan de inhoud van dit bericht (met bijlagen) rechten worden ontleend. De
> inhoud van dit bericht (met bijlagen) kan vertrouwelijke informatie bevat=
ten
> en is uitsluitend bestemd voor de geadresseerde van dit bericht. Indien u
> niet de beoogde ontvanger van dit bericht bent, verzoekt Kennisnet u dit
> bericht te verwijderen, eventuele bijlagen niet te openen en wijst Kennis=
net
> u op de onrechtmatigheid van het gebruiken, kopi=EBren of verspreiden van=
 de
> inhoud van dit bericht (met bijlagen).
>
> This message (with attachments) is given in good faith. Kennisnet cannot
> assume any responsibility for the accuracy or reliability of the informat=
ion
> contained in this message (with attachments), nor shall the information b=
e
> construed as constituting any obligation on the part of Kennisnet. The
> information contained in this message (with attachments) may be confident=
ial
> or privileged and is only intended for the use of the named addressee. If
> you are not the intended recipient, you are requested by Kennisnet to del=
ete
> this message (with attachments) without opening it and you are notified b=
y
> Kennisnet that any disclosure, copying or distribution of the information
> contained in this message (with attachments) is strictly prohibited and
> unlawful.
>
>

------=_Part_18418_5551458.1155649628419--

From java-user-return-22723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 16:51:48 2006
Return-Path: <java-user-return-22723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34037 invoked from network); 15 Aug 2006 16:51:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 16:51:48 -0000
Received: (qmail 119 invoked by uid 500); 15 Aug 2006 16:51:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99981 invoked by uid 500); 15 Aug 2006 16:51:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99970 invoked by uid 99); 15 Aug 2006 16:51:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 09:51:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO nz-out-0102.google.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 09:51:39 -0700
Received: by nz-out-0102.google.com with SMTP id z6so561088nzd
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 09:51:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=CMsxCYiejng4CsIx8gRIOszB79j8MINevL1qr66qv2tqJIriLL2DVkQyPZi3LBycpHOXt9mnwKTH4P+Por62F5X+Ca6cycJZbp2zN2SNjSk05cW/SHjuls5l3rcypfrbXkdrROFmHGWpjnMlyK0WR73hPFx8KV6HIGjwO/p3o/0=
Received: by 10.35.20.14 with SMTP id x14mr15921483pyi;
        Tue, 15 Aug 2006 09:51:18 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 43sm1234391wri.2006.08.15.09.51.12;
        Tue, 15 Aug 2006 09:51:17 -0700 (PDT)
Message-ID: <44E1FB83.60303@gmail.com>
Date: Tue, 15 Aug 2006 12:51:15 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: 30 milllion+ docs on a single server
References: <006001c6bfbc$e54be130$8380a8c0@safarijv.com>
In-Reply-To: <006001c6bfbc$e54be130$8380a8c0@safarijv.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for all of the useful info on this topic. You have been very 
enlightening. My RAM requirements where obviously off the mark. Here is 
my current understanding of this issue:

A standard 32-bit processor has access to 4GB of RAM. If your CPU 
supports Physical Address Extension (PAE) the OS can access up to 64GB 
of RAM, although a single application is still limited to 4GB. In 
Windows, Address Windowing Extensions (AWE) solves this limitation but 
you must use OS specific calls to manage your memory. Unix/Linux has 
it's own memory mapping scheme that accomplishes something similar to AWE.

 I have no problem requiring that the server i use be maxed to the 
gills. I just want to support Windows as well as Unix/Linux/Sun. I was 
shortsighted in my RAM comments.

As far as Solr: it looks like this will not necessarily solve my problem 
of handling an index so big on a single server--the entire index is 
replicated across each slave searcher--but if load is a factor 
(according to Hoss, load will probably be the big issue, not the size of 
the index) than this distribution is exactly what I need. I think that 
the average load I can expect will be pretty low though. Updates to the 
large index will also be relatively rare. 30-200 items added every 
morning with the occasional update scattered throughout the day. There 
will only be a few hundred searchers in total and they will not be 
hammering the system but consulting it here and there throughout the day.

When I said that Solr required hardlinks I was referring to the 
replication feature. My fault--replication was the benefit I was seeing 
from solar and I was unclear. I bet solr's caching helps a lot too and I 
will be looking into that. What I did not know was that Windows supports 
hard links when using ntfs. Fsutil.exe creates them. This gives me hope 
that cygwin might support them. I do not know if  I can use the same cp 
-l -r trick, but it at least it looks hopeful. I did not realize that 
solr's replication feature was so external and easily changeable.

as far as rmi: splitting the index across several boxes seems relatively 
easy (the index can be naturally partitioned without much trouble) but I 
would still have to deal with sorting on a single box.  I am not so 
worried about that anymore though. Warming a new searcher and tons of 
RAM should handle my sorts in an acceptable way.

It seems to me that one way or another I can make this happen.

I am  wondering whether  I should try and use a RAM directory. While I 
am sure it might be faster, what happens when the power goes out? System 
reboots? I would have to occasionally flush to disk anyway. Would it be 
better to use a normal directory and turn the maxbuffered docs way up?


Thanks,

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 17:29:09 2006
Return-Path: <java-user-return-22724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49123 invoked from network); 15 Aug 2006 17:29:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 17:29:09 -0000
Received: (qmail 78020 invoked by uid 500); 15 Aug 2006 17:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77987 invoked by uid 500); 15 Aug 2006 17:29:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77976 invoked by uid 99); 15 Aug 2006 17:29:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 10:29:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 10:29:02 -0700
Received: by nf-out-0910.google.com with SMTP id x4so375335nfb
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 10:28:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=KbK9eSjxSEi1JHs9ifRrWqfbqGhcgBMdgltQU4HxWZi7ytMJdNrlZrYUz9mMPBy/IL3P77+DllHFweWqHHWOlT3KSOIa4scEaVZtcx619qnRhND7GTi5eJ6IWdYf/VvwvIT/So6xzax12TipEGxUoQFC+X5XZFrseVqLP1MJ4Z8=
Received: by 10.49.90.4 with SMTP id s4mr1616478nfl;
        Tue, 15 Aug 2006 10:28:41 -0700 (PDT)
Received: by 10.78.125.4 with HTTP; Tue, 15 Aug 2006 10:28:41 -0700 (PDT)
Message-ID: <a218b3050608151028g5db2a055s668aeba6c071adf7@mail.gmail.com>
Date: Tue, 15 Aug 2006 19:28:41 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Best Practice: emails and file-attachments
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56730_23876651.1155662921056"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_56730_23876651.1155662921056
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

does anybody has an idea what is the best design approch for realizing
the following:

The goal is to index emails and their corresponding file attachments.
One email could contain for example:

1 x subject
1 x sender-address
1 x to-addresses
1 x message-text
0..n x file-attachments  (each contains a 'file-name' and the
'file-content')

How should I build the index?

First approach:
Each email + attachments gets one document with the following fields:
subject, sender_address, to_address, message_text, 1_attachment_name,
1_attachment_content, 2_attachment_name, 2_attachment_content,
3_attachment_name, 3_attachment_content
Disadvantage:
Only three attachments could be indexed. It isn't a generic solution for
indexing 'n' file-attachments.

Second approach:
Each email gets one document with the main email-data and 0 to n documents
of file-attachments:
1 x  email_id, subject, sender_address, to_address, message_text
0..n x  email_id, attachment_name, attachment_content
Disadvantage:
At query time it is difficult to aggregate the documents that belongs to
each other. One hit per email (including attachments) should be shown.

Any thoughts?

Thanks
lude

------=_Part_56730_23876651.1155662921056--

From java-user-return-22725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 18:03:53 2006
Return-Path: <java-user-return-22725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61244 invoked from network); 15 Aug 2006 18:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 18:03:53 -0000
Received: (qmail 32284 invoked by uid 500); 15 Aug 2006 18:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32240 invoked by uid 500); 15 Aug 2006 18:03:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32201 invoked by uid 99); 15 Aug 2006 18:03:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 11:03:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 11:03:41 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k7FI3JsL030661
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 19:03:19 +0100
Received: from [192.168.0.22] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.153-alpha)
    via ESMTP; Tue, 15 Aug 2006 19:03:18 +0100 (BST)
Date: Tue, 15 Aug 2006 19:02:46 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <44E20C46.5050101@scalix.com>
In-Reply-To: <a218b3050608151028g5db2a055s668aeba6c071adf7@mail.gmail.com>
References: <a218b3050608151028g5db2a055s668aeba6c071adf7@mail.gmail.com>
Subject: Re: Best Practice: emails and file-attachments
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.5 (X11/20060808)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

lude wrote:
> does anybody has an idea what is the best design approch for realizing
> the following:
>
> The goal is to index emails and their corresponding file attachments.
> One email could contain for example:
I put a fair amount of thought into this when I was doing the design for 
our mail server -- I know about mail :-)   After a little trial and 
error I came up with the following scheme:

   1. All header fields indexed under their own name with the name
      converted to lower case.
   2. Almost all bodyparts indexed in a single field called BODY (in
      upper case)
   3. Meta-data such as SIZE, DELIVERY-DATE and similar indexed with
      uppercase fields
   4. Extensions for other bodypart-specific or application-specific
      fields indexed as something with an initial uppercase letter and
      at least one lowercase letter

That gives an extensible set of fields and does require that the index 
knows ahead of time what header fields will be present or relevant.   It 
means that there are potentially a lot of fields: we're running at about 
60 depending on the user.

Some header fields are special.   The various message-id fields 
(Message-Id, Resent-Message-Id, In-Reply-To and References) need to have 
their mesage-ids carefully extracted and then indexed untokenized.   
Recipient fields (to, cc, from, etc) need to parsed and then have their 
addresses re-assembled as a friendly-name and an RFC822 address -- the 
reason for the re-assembly is that addresses can be presented in 
equivalent but odd fashions.   Most header fields can have RFC2047 
encoded text which needs to be decoded.

When indexing the bodyparts you need to be a little careful.   In 
general, the MIME headers for each part are all indexed as other message 
headers (content-id is a messge id field) and I also indexed the 
canonical content type under a CONTENT-TYPE field, again to get rid of 
fluff so that I can search for, say, 
CONTENT-TYPE:application/x-vnd-powerpoint to find all those annoyingly 
huge messages :-)  An attached message probably doesn't want all its 
headers indexed: subject is good; recipients are probably bad as it'll 
confuse the normal search and give unexpected results; message-id fields 
are almost certainly a bad idea.  If you're indexing a 
multipart/alternative bodypart then index all the MIME headers, but only 
index the content of the *first* bodypart.

Does that all make sense?  Javamail is great for this, it's good at 
parsing and extracting the content of messages.  However, it's not 
enough to just read what I've said and the javamail doc.   If you're not 
intimately familiar with the MIME RFCs (I think the first one is 
RFC2045, but their not difficult to find as their all around RFC2047) 
and RFC2822, the message structure RFC itself.   If you just guess 
because the structure is "obvious" you'll come unstuck.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 18:38:07 2006
Return-Path: <java-user-return-22726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73090 invoked from network); 15 Aug 2006 18:38:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 18:38:07 -0000
Received: (qmail 82357 invoked by uid 500); 15 Aug 2006 18:38:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82337 invoked by uid 500); 15 Aug 2006 18:37:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82326 invoked by uid 99); 15 Aug 2006 18:37:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 11:37:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.181] (HELO smtpauth01-04.prod.mesa1.secureserver.net) (64.202.165.181)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Aug 2006 11:37:58 -0700
Received: (qmail 10020 invoked from network); 15 Aug 2006 18:24:09 -0000
Received: from unknown (209.204.147.41)
  by smtpauth01-04.prod.mesa1.secureserver.net (64.202.165.181) with ESMTP; 15 Aug 2006 18:24:09 -0000
From: "Dejan Nenov" <dejannenov@jollyobject.com>
To: <java-user@lucene.apache.org>
Subject: RE: Best Practice: emails and file-attachments
Date: Tue, 15 Aug 2006 11:24:14 -0700
Organization: Dejan Nenov Privarte Email
Message-ID: <016801c6c098$036301e0$8380a8c0@safarijv.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcbAkE+aMEE5586QQBiYpF1GVL2FSwABvo7g
In-Reply-To: <a218b3050608151028g5db2a055s668aeba6c071adf7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The approach we I find best is to create both Email documents - where a list
(and links) to all attachments is contained as well as individual Attachment
documents.

It gets a little tricky when you have a forwarded email, containing an
original Email that contains a tar.gz attachment, which contains the
"actual" attached files :)

(Shameless promotion follows) If you are a Windows user, for a _very_ good
example get a copy of X1 Desktop (free - also distributed as Yahoo! Desktop
search) - then right-click on the column headers and look at the available
fields for email.


Dejan

-----Original Message-----
From: lude [mailto:lucene.developer@googlemail.com] 
Sent: Tuesday, August 15, 2006 10:29 AM
To: java-user@lucene.apache.org
Subject: Best Practice: emails and file-attachments

Hello,

does anybody has an idea what is the best design approch for realizing
the following:

The goal is to index emails and their corresponding file attachments.
One email could contain for example:

1 x subject
1 x sender-address
1 x to-addresses
1 x message-text
0..n x file-attachments  (each contains a 'file-name' and the
'file-content')

How should I build the index?

First approach:
Each email + attachments gets one document with the following fields:
subject, sender_address, to_address, message_text, 1_attachment_name,
1_attachment_content, 2_attachment_name, 2_attachment_content,
3_attachment_name, 3_attachment_content
Disadvantage:
Only three attachments could be indexed. It isn't a generic solution for
indexing 'n' file-attachments.

Second approach:
Each email gets one document with the main email-data and 0 to n documents
of file-attachments:
1 x  email_id, subject, sender_address, to_address, message_text
0..n x  email_id, attachment_name, attachment_content
Disadvantage:
At query time it is difficult to aggregate the documents that belongs to
each other. One hit per email (including attachments) should be shown.

Any thoughts?

Thanks
lude


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 20:00:09 2006
Return-Path: <java-user-return-22727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1954 invoked from network); 15 Aug 2006 20:00:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 20:00:09 -0000
Received: (qmail 2019 invoked by uid 500); 15 Aug 2006 20:00:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1991 invoked by uid 500); 15 Aug 2006 20:00:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1980 invoked by uid 99); 15 Aug 2006 20:00:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:00:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:00:01 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 15 Aug 2006 15:59:39 -0400
X-OriginatingIP: 10.6.134.35
Content-Type: multipart/mixed; boundary="6+Aea.46nFPqEFQ.+KeE4.3YBfQw6"
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 15 Aug 2006 15:59:11 -0400
X-MIMEOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Subject: RE: 7GB index taking forever to return hits
Date: Tue, 15 Aug 2006 16:00:22 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E8114509896@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 7GB index taking forever to return hits
Thread-index: Aca/z6yqE+ELYx84RTyP5WgOpSninQALGBegABYh4cAAFCtqgA==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Aug 2006 19:59:11.0068 (UTC) FILETIME=[467271C0:01C6C0A5]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--6+Aea.46nFPqEFQ.+KeE4.3YBfQw6
MIME-Version: 1.0
Content-class: urn:content-classes:message
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I am tokenizing CONTENTS... But unfortunately, it's part of the
requirements that we search for:

+CONTENTS:*white* +CONTENTS:*hard* +CONTENTS:*hat*

=20

-----Original Message-----
From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com]=20
Sent: Tuesday, August 15, 2006 3:26 AM
To: java-user@lucene.apache.org
Subject: RE: 7GB index taking forever to return hits

Sounds like you want to tokenise CONTENTS, if you are not already doing
so.=20

Then you could simply have:

   +CONTENTS:white +CONTENTS:hard +CONTENTS:hat

-----Original Message-----
From: Van Nguyen [mailto:vnguyen@ur.com]
Sent: 15 August 2006 01:30
To: java-user@lucene.apache.org
Subject: RE: 7GB index taking forever to return hits

It was how I was implementing the search. =20

I am using a boolean query.  Prior to the 7GB index, I was searching
over a 150MB index that consist of a very small part of the bigger
index.  I was able to set my BooleanQuery to
BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) and that worked fine.
But I think that's the cause of my problem with this bigger index.
Commenting that out, I get an TooManyClause Exception.  A typical query
would look something like this:

+CONTENTS:*white* +CONTENTS:*hard* +CONTENTS:*hat* +COMPANY_CODE:u1=20
+LANGUAGE:enu -SKU_DESC_ID:0 +IS_DC:d +LOCATION:b72

BooleanQuery q =3D new BooleanQuery();

WildcardQuery wc1 =3D new WildcardQuery("CONTENTS", "*white*");
WildcardQuery
wc2 =3D new WildcardQuery("CONTENTS", "*hard*"); WildcardQuery wc3 =3D =
new
WildcardQuery("CONTENTS", "*hat*"); q.add(wc1,
BooleanClause.Occur.MUST); q.add(wc2, BooleanClause.Occur.MUST);
q.add(wc3, BooleanClause.Occur.MUST);

TermQuery t1 =3D new TermQuery("COMPANY_CODE", "u1"); q.add(t1,
BooleanClause.Occur.MUST);

TermQuery t2 =3D new TermQuery("LANGUAGE", "enu"); q.add(t2,
BooleanClause.Occur.MUST); .
.
.

I take it this is not the most optimal way about this. =20

So that leads me to my next question... What is the most optimal way
about this?

Van

-----Original Message-----
From: yueyu lin [mailto:popeyelin@gmail.com]
Sent: Monday, August 14, 2006 11:30 AM
To: java-user@lucene.apache.org
Subject: Re: 7GB index taking forever to return hits

2GB limitation only exists when you want to put them to memory in 32bits
box.
Our index size is larger than 13 giga bytes, and it works fine.
I think it must be something error in your design. You can use Luke to
see what happened in your index.

On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
>
>  Hi,
>
>
>
> I have a 7GB index (about 45 fields per document X roughly 5.5 million
> docs) running on a Windows 2003 32bit machine (dual proc, 2GB memory).

> The index is optimized.  Performing a search on this index will just=20
> "hang" when performing the search (wild card query with a sort).  At=20
> first the CPU usage is 100%, then drops down to 50% after a minute or=20
> so, and then no CPU utilization... but the thread is still trying to=20
> perform the search.  I've tried this in my J2EE app and in a main=20
> program.  Is this due to the 2GB limitation of the 32bit OS (I didn't=20
> realize the index would be this big... just let it run over the
weekend).
>
>
>
> If this is due to the 2GB limitation of the 32bit OS and since I have=20
> this 7GB index built already (and optimized), is there a way to split=20
> this into 2GB indices w/o having to re-index?  Or is this due to
another factor?
>
>
>
> Van
>
> United Rentals
> Consider it done.(tm)
> 800-UR-RENTS
> unitedrentals.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
--
Yueyu Lin
--6+Aea.46nFPqEFQ.+KeE4.3YBfQw6
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

United Rentals
Consider it done.=E2=84=A2
800-UR-RENTS
unitedrentals.com


--6+Aea.46nFPqEFQ.+KeE4.3YBfQw6
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--6+Aea.46nFPqEFQ.+KeE4.3YBfQw6--

From java-user-return-22728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 20:03:39 2006
Return-Path: <java-user-return-22728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4659 invoked from network); 15 Aug 2006 20:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 20:03:39 -0000
Received: (qmail 12226 invoked by uid 500); 15 Aug 2006 20:03:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12206 invoked by uid 500); 15 Aug 2006 20:03:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12186 invoked by uid 99); 15 Aug 2006 20:03:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:03:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:03:14 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 15 Aug 2006 16:02:53 -0400
X-OriginatingIP: 10.6.134.35
Content-Type: multipart/mixed; boundary="6+ApN.46nFbOfRu.1RLH4v.9NHmZG+"
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 15 Aug 2006 16:02:23 -0400
X-MIMEOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Subject: RE: 7GB index taking forever to return hits
Date: Tue, 15 Aug 2006 16:03:34 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81145098A7@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 7GB index taking forever to return hits
Thread-index: AcbACR+4UYcquUeSQCaGFkUHyB0MYAAnFRLg
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Aug 2006 20:02:23.0587 (UTC) FILETIME=[B9328330:01C6C0A5]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--6+ApN.46nFbOfRu.1RLH4v.9NHmZG+
MIME-Version: 1.0
Content-class: urn:content-classes:message
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I'm now using a filter on the wildcard portion of the query.  Takes 10s
to return results.  I took out the wildcard query and just search on
terms and that takes 187ms to return the same results (well... Not
same... But a lot faster to return results).  Unfortunately, the
wildcard query is part of the requirement.  I'll play around with the
filter to see if I can reduce the search time.

Thanks,

Van

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Monday, August 14, 2006 6:20 PM
To: java-user@lucene.apache.org
Subject: Re: 7GB index taking forever to return hits

I actually suspect that your process isn't hung, it's just taking
forever because it's swapping a lot. Like a really, really, really lot.
Like more than you ever want to deal with <G>.

I think you're pretty much forced, as Lin said, to use a filter. I was
pleasantly surprised at how quickly filters can be built, and if you
have a small set of wildcards you really expect, you can use a
CachingWrapperFilter to keep them around. NOTE: we're only recommending
the filters for the wildcard portions of the query.

For a generous explanation of wildcards in general from "the guys",
search the archive for a thread "I just don't get wildcards at all".
There's quite an explanation of wildcards, as well as some alternative
indexing schemes to make wildcard queries without wildcards. Which is
faster but bloats the index.

If you're unfamiliar with filters, you really need to become familiar
with them. Basically, they're a bitset with the bit corresponding to
each document turned on for terms that could match.

You'll probably want to use a WildcardTermEnum, or perhaps a
RegexTermEnum, and for each term, enumerate all the docs containing that
term (see
TermDocs) and set your bit in the filter. When the filter is created,
use it to construct a ConstantScoreQuery that you add to your
BooleanQuery. It sounds more complicated than it is <G>.

Just to clarify Lin's comment. The filter won't be slower than what you
are doing now. But it will be slower than a straight-up query. Each
filter will be under a megabyte (one bit for each of 5.5M docs), so you
could consider caching a bunch of them if you expect a small number of
terms to be repeated. Or let CachingWrapperFilter do it for you (I
think).

Note that ConstantScoreQuery loses relevance scoring (but you'll still
get relevance for the non-wildcard terms in your BooleanQuery). I don't
consider this a flaw since it's tricky defining how much *use* relevance
really is for wildcards.

Finally, your test queries (and I commend you for making limit-testing
tests before putting it in production) are about as bad as they get.
>From the javadoc for WildcardQuery.

" In order to prevent extremely slow WildcardQueries, a Wildcard term
should not start with one of the wildcards * or ?"

Best
Erick



On 8/14/06, yueyu lin <popeyelin@gmail.com> wrote:
>
> To avoid "TooManyClauses", you can try Filter instead of Query. But=20
> that will be slower.
> Form what I see is that there are so many keys that match your query,=20
> it will be tough for Lucene.
>
> On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
> >
> > It was how I was implementing the search.
> >
> > I am using a boolean query.  Prior to the 7GB index, I was searching

> > over a 150MB index that consist of a very small part of the bigger=20
> > index.  I was able to set my BooleanQuery to
> > BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) and that worked
fine.
> > But I think that's the cause of my problem with this bigger index.
> > Commenting that out, I get an TooManyClause Exception.  A typical=20
> > query would look something like this:
> >
> > +CONTENTS:*white* +CONTENTS:*hard* +CONTENTS:*hat* +COMPANY_CODE:u1=20
> > +LANGUAGE:enu -SKU_DESC_ID:0 +IS_DC:d +LOCATION:b72
> >
> > BooleanQuery q =3D new BooleanQuery();
> >
> > WildcardQuery wc1 =3D new WildcardQuery("CONTENTS", "*white*");=20
> > WildcardQuery wc2 =3D new WildcardQuery("CONTENTS", "*hard*");=20
> > WildcardQuery wc3 =3D new WildcardQuery("CONTENTS", "*hat*");=20
> > q.add(wc1, BooleanClause.Occur.MUST); q.add(wc2,=20
> > BooleanClause.Occur.MUST); q.add(wc3, BooleanClause.Occur.MUST);
> >
> > TermQuery t1 =3D new TermQuery("COMPANY_CODE", "u1"); q.add(t1,=20
> > BooleanClause.Occur.MUST);
> >
> > TermQuery t2 =3D new TermQuery("LANGUAGE", "enu"); q.add(t2,=20
> > BooleanClause.Occur.MUST); .
> > .
> > .
> >
> > I take it this is not the most optimal way about this.
> >
> > So that leads me to my next question... What is the most optimal way

> > about this?
> >
> > Van
> >
> > -----Original Message-----
> > From: yueyu lin [mailto:popeyelin@gmail.com]
> > Sent: Monday, August 14, 2006 11:30 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: 7GB index taking forever to return hits
> >
> > 2GB limitation only exists when you want to put them to memory in=20
> > 32bits box.
> > Our index size is larger than 13 giga bytes, and it works fine.
> > I think it must be something error in your design. You can use Luke=20
> > to see what happened in your index.
> >
> > On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
> > >
> > >  Hi,
> > >
> > >
> > >
> > > I have a 7GB index (about 45 fields per document X roughly 5.5=20
> > > million
> > > docs) running on a Windows 2003 32bit machine (dual proc, 2GB
memory).
> >
> > > The index is optimized.  Performing a search on this index will=20
> > > just "hang" when performing the search (wild card query with a=20
> > > sort).  At first the CPU usage is 100%, then drops down to 50%=20
> > > after a minute or so, and then no CPU utilization... but the=20
> > > thread is still trying to perform the search.  I've tried this in=20
> > > my J2EE app and in a main program.  Is this due to the 2GB=20
> > > limitation of the 32bit OS (I didn't realize the index would be=20
> > > this big... just let it run over the
> > weekend).
> > >
> > >
> > >
> > > If this is due to the 2GB limitation of the 32bit OS and since I=20
> > > have this 7GB index built already (and optimized), is there a way=20
> > > to split this into 2GB indices w/o having to re-index?  Or is this

> > > due to
> > another factor?
> > >
> > >
> > >
> > > Van
> > >
> > > United Rentals
> > > Consider it done.(tm)
> > > 800-UR-RENTS
> > > unitedrentals.com
> > >
> > >
> > >
> > > ------------------------------------------------------------------
> > > --- To unsubscribe, e-mail:=20
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > --
> > Yueyu Lin
> >
> > United Rentals
> > Consider it done.(tm)
> > 800-UR-RENTS
> > unitedrentals.com
> >
> >
> >
> > --------------------------------------------------------------------
> > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> --
> Yueyu Lin
>
>
--6+ApN.46nFbOfRu.1RLH4v.9NHmZG+
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

United Rentals
Consider it done.=E2=84=A2
800-UR-RENTS
unitedrentals.com


--6+ApN.46nFbOfRu.1RLH4v.9NHmZG+
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--6+ApN.46nFbOfRu.1RLH4v.9NHmZG+--

From java-user-return-22729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 20:15:17 2006
Return-Path: <java-user-return-22729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7594 invoked from network); 15 Aug 2006 20:15:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 20:15:17 -0000
Received: (qmail 33537 invoked by uid 500); 15 Aug 2006 20:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32596 invoked by uid 500); 15 Aug 2006 20:15:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32585 invoked by uid 99); 15 Aug 2006 20:15:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:15:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 13:15:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 710BE5B77B; Tue, 15 Aug 2006 13:14:47 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 609037F403
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 13:14:47 -0700 (PDT)
Date: Tue, 15 Aug 2006 13:14:47 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: 7GB index taking forever to return hits
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81145098A7@UREXCHVS3.ur.com>
Message-ID: <Pine.LNX.4.58.0608151310210.4133@hal.rescomp.berkeley.edu>
References: <0D6A3C278F4DC346B98DF4D2F1397E81145098A7@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I'm now using a filter on the wildcard portion of the query.  Takes 10s
: to return results.  I took out the wildcard query and just search on
: terms and that takes 187ms to return the same results (well... Not
: same... But a lot faster to return results).  Unfortunately, the
: wildcard query is part of the requirement.  I'll play around with the
: filter to see if I can reduce the search time.

If i'm reading between the lines correctly, you have a requirement that
every search be a "substring" search, so that the input "foo" searches for
any docs containing any words where "foo" is a substring.

if that's the case, you should definitely read up on teh thread someone
else mentioned which talks about a lot of tricks to make prefix wildcards
work faster -- you have to understand that as is to query on *foo* it's
got to scan every term in the index for you.

Even if index size is precious to you and you don't wnat to index
ngrams or rotated tokens or any of those other ideas, use a tokenizer that
splits the input on every letter, and puts a big position incriment gap
between words so that all of your "wild card" searches are really just
phrase searches ... that should still be faster then what you're doing
now.




:
: Thanks,
:
: Van
:
: -----Original Message-----
: From: Erick Erickson [mailto:erickerickson@gmail.com]
: Sent: Monday, August 14, 2006 6:20 PM
: To: java-user@lucene.apache.org
: Subject: Re: 7GB index taking forever to return hits
:
: I actually suspect that your process isn't hung, it's just taking
: forever because it's swapping a lot. Like a really, really, really lot.
: Like more than you ever want to deal with <G>.
:
: I think you're pretty much forced, as Lin said, to use a filter. I was
: pleasantly surprised at how quickly filters can be built, and if you
: have a small set of wildcards you really expect, you can use a
: CachingWrapperFilter to keep them around. NOTE: we're only recommending
: the filters for the wildcard portions of the query.
:
: For a generous explanation of wildcards in general from "the guys",
: search the archive for a thread "I just don't get wildcards at all".
: There's quite an explanation of wildcards, as well as some alternative
: indexing schemes to make wildcard queries without wildcards. Which is
: faster but bloats the index.
:
: If you're unfamiliar with filters, you really need to become familiar
: with them. Basically, they're a bitset with the bit corresponding to
: each document turned on for terms that could match.
:
: You'll probably want to use a WildcardTermEnum, or perhaps a
: RegexTermEnum, and for each term, enumerate all the docs containing that
: term (see
: TermDocs) and set your bit in the filter. When the filter is created,
: use it to construct a ConstantScoreQuery that you add to your
: BooleanQuery. It sounds more complicated than it is <G>.
:
: Just to clarify Lin's comment. The filter won't be slower than what you
: are doing now. But it will be slower than a straight-up query. Each
: filter will be under a megabyte (one bit for each of 5.5M docs), so you
: could consider caching a bunch of them if you expect a small number of
: terms to be repeated. Or let CachingWrapperFilter do it for you (I
: think).
:
: Note that ConstantScoreQuery loses relevance scoring (but you'll still
: get relevance for the non-wildcard terms in your BooleanQuery). I don't
: consider this a flaw since it's tricky defining how much *use* relevance
: really is for wildcards.
:
: Finally, your test queries (and I commend you for making limit-testing
: tests before putting it in production) are about as bad as they get.
: >From the javadoc for WildcardQuery.
:
: " In order to prevent extremely slow WildcardQueries, a Wildcard term
: should not start with one of the wildcards * or ?"
:
: Best
: Erick
:
:
:
: On 8/14/06, yueyu lin <popeyelin@gmail.com> wrote:
: >
: > To avoid "TooManyClauses", you can try Filter instead of Query. But
: > that will be slower.
: > Form what I see is that there are so many keys that match your query,
: > it will be tough for Lucene.
: >
: > On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
: > >
: > > It was how I was implementing the search.
: > >
: > > I am using a boolean query.  Prior to the 7GB index, I was searching
:
: > > over a 150MB index that consist of a very small part of the bigger
: > > index.  I was able to set my BooleanQuery to
: > > BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) and that worked
: fine.
: > > But I think that's the cause of my problem with this bigger index.
: > > Commenting that out, I get an TooManyClause Exception.  A typical
: > > query would look something like this:
: > >
: > > +CONTENTS:*white* +CONTENTS:*hard* +CONTENTS:*hat* +COMPANY_CODE:u1
: > > +LANGUAGE:enu -SKU_DESC_ID:0 +IS_DC:d +LOCATION:b72
: > >
: > > BooleanQuery q = new BooleanQuery();
: > >
: > > WildcardQuery wc1 = new WildcardQuery("CONTENTS", "*white*");
: > > WildcardQuery wc2 = new WildcardQuery("CONTENTS", "*hard*");
: > > WildcardQuery wc3 = new WildcardQuery("CONTENTS", "*hat*");
: > > q.add(wc1, BooleanClause.Occur.MUST); q.add(wc2,
: > > BooleanClause.Occur.MUST); q.add(wc3, BooleanClause.Occur.MUST);
: > >
: > > TermQuery t1 = new TermQuery("COMPANY_CODE", "u1"); q.add(t1,
: > > BooleanClause.Occur.MUST);
: > >
: > > TermQuery t2 = new TermQuery("LANGUAGE", "enu"); q.add(t2,
: > > BooleanClause.Occur.MUST); .
: > > .
: > > .
: > >
: > > I take it this is not the most optimal way about this.
: > >
: > > So that leads me to my next question... What is the most optimal way
:
: > > about this?
: > >
: > > Van
: > >
: > > -----Original Message-----
: > > From: yueyu lin [mailto:popeyelin@gmail.com]
: > > Sent: Monday, August 14, 2006 11:30 AM
: > > To: java-user@lucene.apache.org
: > > Subject: Re: 7GB index taking forever to return hits
: > >
: > > 2GB limitation only exists when you want to put them to memory in
: > > 32bits box.
: > > Our index size is larger than 13 giga bytes, and it works fine.
: > > I think it must be something error in your design. You can use Luke
: > > to see what happened in your index.
: > >
: > > On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
: > > >
: > > >  Hi,
: > > >
: > > >
: > > >
: > > > I have a 7GB index (about 45 fields per document X roughly 5.5
: > > > million
: > > > docs) running on a Windows 2003 32bit machine (dual proc, 2GB
: memory).
: > >
: > > > The index is optimized.  Performing a search on this index will
: > > > just "hang" when performing the search (wild card query with a
: > > > sort).  At first the CPU usage is 100%, then drops down to 50%
: > > > after a minute or so, and then no CPU utilization... but the
: > > > thread is still trying to perform the search.  I've tried this in
: > > > my J2EE app and in a main program.  Is this due to the 2GB
: > > > limitation of the 32bit OS (I didn't realize the index would be
: > > > this big... just let it run over the
: > > weekend).
: > > >
: > > >
: > > >
: > > > If this is due to the 2GB limitation of the 32bit OS and since I
: > > > have this 7GB index built already (and optimized), is there a way
: > > > to split this into 2GB indices w/o having to re-index?  Or is this
:
: > > > due to
: > > another factor?
: > > >
: > > >
: > > >
: > > > Van
: > > >
: > > > United Rentals
: > > > Consider it done.(tm)
: > > > 800-UR-RENTS
: > > > unitedrentals.com
: > > >
: > > >
: > > >
: > > > ------------------------------------------------------------------
: > > > --- To unsubscribe, e-mail:
: > > > java-user-unsubscribe@lucene.apache.org
: > > > For additional commands, e-mail: java-user-help@lucene.apache.org
: > > >
: > > >
: > >
: > >
: > > --
: > > --
: > > Yueyu Lin
: > >
: > > United Rentals
: > > Consider it done.(tm)
: > > 800-UR-RENTS
: > > unitedrentals.com
: > >
: > >
: > >
: > > --------------------------------------------------------------------
: > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > > For additional commands, e-mail: java-user-help@lucene.apache.org
: > >
: > >
: >
: >
: > --
: > --
: > Yueyu Lin
: >
: >



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 21:10:57 2006
Return-Path: <java-user-return-22730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24014 invoked from network); 15 Aug 2006 21:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:10:57 -0000
Received: (qmail 10225 invoked by uid 500); 15 Aug 2006 21:10:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10199 invoked by uid 500); 15 Aug 2006 21:10:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10188 invoked by uid 99); 15 Aug 2006 21:10:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:10:50 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:10:49 -0700
Received: by py-out-1112.google.com with SMTP id s49so60590pyc
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 14:10:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=c0wmNcahmQM2RHl9jNedz7haihnkRh+pFB3endFt996FOR3e7mmmerGIObYbInoy6PYO83qQef+tPwu7E6bJc2NcFSZQYCcJXz/+WfOfXXq+BAxFLmnByKbeGqSairNOaw8geHaAw3LUd2KD5I7JFigoFMDAQtfOQJTMCLiFqZo=
Received: by 10.35.49.1 with SMTP id b1mr16260160pyk;
        Tue, 15 Aug 2006 14:10:28 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 15 Aug 2006 14:10:28 -0700 (PDT)
Message-ID: <359a92830608151410n5f982852ye1d4faa2d4b27dd6@mail.gmail.com>
Date: Tue, 15 Aug 2006 17:10:28 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing the same field multiple times in a doc.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6385_28311872.1155676228616"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6385_28311872.1155676228616
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That's waaaaay cool. I'm not entirely clear on this point, but my test sure
worked out well. So I thought I'd see if the behavior I'm seeing is
expected. If so, way cool coding guys!

Here's the root question: "Am I reasonably safe, for a single document, in
thinking of indexing multiple chunks with the same field as being identical,
for all practical purposes, with indexing the field once with all the chunks
concatenated together?".

Details follow...

Background: I'm working with books now, so the 10,000 word limit isn't
acceptable. It is, of course, easy to bump it up via
IndexWriter.setMaxFieldLength, but I'd rather just break up the input stream
since I don't have a realistic expectation of putting an upper limit on the
size of a doc. So I experimented a bit with indexing the same field multiple
times in a document. It seems to me that everything "just works", at least
in my simple test case. This is one heck of a coincidence if not intended
behavior <G>, so all I'm asking is if anybody is surprised by this
(especially Otis, Chris, Erik, etc).

Please ignore the Field.Store, I realize it will probably have to be NO for
this app......

Lucene is fine with indexing the same field multiple times, like this....

    Document doc = new Document();
    doc.add(new Field("tokens", "one two three", Field.Store.YES,
Field.Index.TOKENIZED));

    doc.add(new Field("tokens", "four five six", Field.Store.YES,
Field.Index.TOKENIZED));
    writer.addDocument(doc);

What surprised me a bit is that SpanQueries work just fine this way. If I
create a span query for "two" and "five", this doc is found for some slop
factors and not found for other slop factors, just as though I indexed the
"tokens" field once with "one two three four five six".

Boolean MUST clauses work as well.

So, are there any "gotchas" that spring to mind with the notion of chunking
the input to < 10,000 words and indexing the chunks multiple times in the
same field? Let me be clear I'm just beginning to design this, so all I'm
thinking about here is whether indexing the same field multiple times is
fraught with danger <G>, I have a bunch of details to work out about what
the requirements are and whether I really *want* to do this, but that's my
problem.

Thanks
Erick

------=_Part_6385_28311872.1155676228616--

From java-user-return-22731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 21:13:21 2006
Return-Path: <java-user-return-22731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24572 invoked from network); 15 Aug 2006 21:13:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:13:20 -0000
Received: (qmail 13087 invoked by uid 500); 15 Aug 2006 21:13:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13057 invoked by uid 500); 15 Aug 2006 21:13:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13046 invoked by uid 99); 15 Aug 2006 21:13:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:13:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bg7550@rambler.ru designates 81.19.66.30 as permitted sender)
Received: from [81.19.66.30] (HELO mxb.rambler.ru) (81.19.66.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:13:13 -0700
Received: from mcgi12.rambler.ru (mcgi12.rambler.ru [81.19.67.190])
	by mxb.rambler.ru (Postfix) with ESMTP id 7C3821ECA4B
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 01:12:52 +0400 (MSD)
Received: from [64.157.93.162] by mcgi12.rambler.ru with HTTP (mailimap); Wed, 16 Aug 2006 01:12:43 +0400
From: Boris Galitsky <bg7550@rambler.ru>
To: <java-user@lucene.apache.org>
Subject: desired constructor Field("contents", new FileReader(f), Field.Store.COMPRESS)
Date: Wed, 16 Aug 2006 01:12:43 +0400
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset="windows-1251"; format="flowed"
MIME-Version: 1.0
Message-Id: <928222749.1155676363.155594488.85599@mcgi12.rambler.ru>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello

 I need to index the content of a file (using our in-house analyzer)
and store in compressed way.
So  Field("contents", new FileReader(f), Field.Store.COMPRESS) would be 
a desired constructor
(but it does not exist in this form).

 How would one "combine"  new FileReader(f) and Field.Store.COMPRESS ?

Regards
--
Boris Galitsky.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 21:20:22 2006
Return-Path: <java-user-return-22732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26241 invoked from network); 15 Aug 2006 21:20:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:20:22 -0000
Received: (qmail 21573 invoked by uid 500); 15 Aug 2006 21:20:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21539 invoked by uid 500); 15 Aug 2006 21:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21528 invoked by uid 99); 15 Aug 2006 21:20:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:20:15 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:20:13 -0700
Received: by py-out-1112.google.com with SMTP id s49so62797pyc
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 14:19:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LVThRRCVfzF4krD7t1bvq093JaNtH6MSaw9rfMJmOnuiHG0086XG/KgJnU011mjCAXoDV5yyFbRQm8UmHrBBoMYjGjt087mdcoYhA100n1J8PL+K8/xt/TuAxkIDID7N0wlG5IJWumEKsd6xnM8A6FPwtiRiqZ8LqqCthC+2FwQ=
Received: by 10.35.117.5 with SMTP id u5mr16314267pym;
        Tue, 15 Aug 2006 14:19:51 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 15 Aug 2006 14:19:51 -0700 (PDT)
Message-ID: <359a92830608151419p5707a7c2ma5b86886571d232c@mail.gmail.com>
Date: Tue, 15 Aug 2006 17:19:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 7GB index taking forever to return hits
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81145098A7@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6645_3178611.1155676791277"
References: <0D6A3C278F4DC346B98DF4D2F1397E81145098A7@UREXCHVS3.ur.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6645_3178611.1155676791277
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Three things come to mind:

1> You can think about caching your filters. This only makes sense if you
have a fairly small number of wildcards that you *expect*. Probably not
really viable, but I thought I'd mention it.

2> You say that the search is "part of the requirements". It might be worth
asking the people who wrote the requirements why. I've sometimes found that
requirements aren't cast in stone, and things get in there that would be
"nice" to have, but when informed of the trade-offs, the requirements may
not be inflexible. Speaking of tradeoffs, I'm not sure a person can
reasonably complain about 10s wildcard searches on a 7G index of the type
you outlined.<G>.

3> Not that I expect it to matter much for search speed, but is the 7G
necessary? In other words, do you store things that you don't need to store
in your index? This could be important if you decide to try some of the
alternative indexing schemes.

Best
Erick

On 8/15/06, Van Nguyen <vnguyen@ur.com> wrote:
>
> I'm now using a filter on the wildcard portion of the query.  Takes 10s
> to return results.  I took out the wildcard query and just search on
> terms and that takes 187ms to return the same results (well... Not
> same... But a lot faster to return results).  Unfortunately, the
> wildcard query is part of the requirement.  I'll play around with the
> filter to see if I can reduce the search time.
>
> Thanks,
>
> Van
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, August 14, 2006 6:20 PM
> To: java-user@lucene.apache.org
> Subject: Re: 7GB index taking forever to return hits
>
> I actually suspect that your process isn't hung, it's just taking
> forever because it's swapping a lot. Like a really, really, really lot.
> Like more than you ever want to deal with <G>.
>
> I think you're pretty much forced, as Lin said, to use a filter. I was
> pleasantly surprised at how quickly filters can be built, and if you
> have a small set of wildcards you really expect, you can use a
> CachingWrapperFilter to keep them around. NOTE: we're only recommending
> the filters for the wildcard portions of the query.
>
> For a generous explanation of wildcards in general from "the guys",
> search the archive for a thread "I just don't get wildcards at all".
> There's quite an explanation of wildcards, as well as some alternative
> indexing schemes to make wildcard queries without wildcards. Which is
> faster but bloats the index.
>
> If you're unfamiliar with filters, you really need to become familiar
> with them. Basically, they're a bitset with the bit corresponding to
> each document turned on for terms that could match.
>
> You'll probably want to use a WildcardTermEnum, or perhaps a
> RegexTermEnum, and for each term, enumerate all the docs containing that
> term (see
> TermDocs) and set your bit in the filter. When the filter is created,
> use it to construct a ConstantScoreQuery that you add to your
> BooleanQuery. It sounds more complicated than it is <G>.
>
> Just to clarify Lin's comment. The filter won't be slower than what you
> are doing now. But it will be slower than a straight-up query. Each
> filter will be under a megabyte (one bit for each of 5.5M docs), so you
> could consider caching a bunch of them if you expect a small number of
> terms to be repeated. Or let CachingWrapperFilter do it for you (I
> think).
>
> Note that ConstantScoreQuery loses relevance scoring (but you'll still
> get relevance for the non-wildcard terms in your BooleanQuery). I don't
> consider this a flaw since it's tricky defining how much *use* relevance
> really is for wildcards.
>
> Finally, your test queries (and I commend you for making limit-testing
> tests before putting it in production) are about as bad as they get.
> From the javadoc for WildcardQuery.
>
> " In order to prevent extremely slow WildcardQueries, a Wildcard term
> should not start with one of the wildcards * or ?"
>
> Best
> Erick
>
>
>
> On 8/14/06, yueyu lin <popeyelin@gmail.com> wrote:
> >
> > To avoid "TooManyClauses", you can try Filter instead of Query. But
> > that will be slower.
> > Form what I see is that there are so many keys that match your query,
> > it will be tough for Lucene.
> >
> > On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
> > >
> > > It was how I was implementing the search.
> > >
> > > I am using a boolean query.  Prior to the 7GB index, I was searching
>
> > > over a 150MB index that consist of a very small part of the bigger
> > > index.  I was able to set my BooleanQuery to
> > > BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) and that worked
> fine.
> > > But I think that's the cause of my problem with this bigger index.
> > > Commenting that out, I get an TooManyClause Exception.  A typical
> > > query would look something like this:
> > >
> > > +CONTENTS:*white* +CONTENTS:*hard* +CONTENTS:*hat* +COMPANY_CODE:u1
> > > +LANGUAGE:enu -SKU_DESC_ID:0 +IS_DC:d +LOCATION:b72
> > >
> > > BooleanQuery q =3D new BooleanQuery();
> > >
> > > WildcardQuery wc1 =3D new WildcardQuery("CONTENTS", "*white*");
> > > WildcardQuery wc2 =3D new WildcardQuery("CONTENTS", "*hard*");
> > > WildcardQuery wc3 =3D new WildcardQuery("CONTENTS", "*hat*");
> > > q.add(wc1, BooleanClause.Occur.MUST); q.add(wc2,
> > > BooleanClause.Occur.MUST); q.add(wc3, BooleanClause.Occur.MUST);
> > >
> > > TermQuery t1 =3D new TermQuery("COMPANY_CODE", "u1"); q.add(t1,
> > > BooleanClause.Occur.MUST);
> > >
> > > TermQuery t2 =3D new TermQuery("LANGUAGE", "enu"); q.add(t2,
> > > BooleanClause.Occur.MUST); .
> > > .
> > > .
> > >
> > > I take it this is not the most optimal way about this.
> > >
> > > So that leads me to my next question... What is the most optimal way
>
> > > about this?
> > >
> > > Van
> > >
> > > -----Original Message-----
> > > From: yueyu lin [mailto:popeyelin@gmail.com]
> > > Sent: Monday, August 14, 2006 11:30 AM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: 7GB index taking forever to return hits
> > >
> > > 2GB limitation only exists when you want to put them to memory in
> > > 32bits box.
> > > Our index size is larger than 13 giga bytes, and it works fine.
> > > I think it must be something error in your design. You can use Luke
> > > to see what happened in your index.
> > >
> > > On 8/14/06, Van Nguyen <vnguyen@ur.com> wrote:
> > > >
> > > >  Hi,
> > > >
> > > >
> > > >
> > > > I have a 7GB index (about 45 fields per document X roughly 5.5
> > > > million
> > > > docs) running on a Windows 2003 32bit machine (dual proc, 2GB
> memory).
> > >
> > > > The index is optimized.  Performing a search on this index will
> > > > just "hang" when performing the search (wild card query with a
> > > > sort).  At first the CPU usage is 100%, then drops down to 50%
> > > > after a minute or so, and then no CPU utilization... but the
> > > > thread is still trying to perform the search.  I've tried this in
> > > > my J2EE app and in a main program.  Is this due to the 2GB
> > > > limitation of the 32bit OS (I didn't realize the index would be
> > > > this big... just let it run over the
> > > weekend).
> > > >
> > > >
> > > >
> > > > If this is due to the 2GB limitation of the 32bit OS and since I
> > > > have this 7GB index built already (and optimized), is there a way
> > > > to split this into 2GB indices w/o having to re-index?  Or is this
>
> > > > due to
> > > another factor?
> > > >
> > > >
> > > >
> > > > Van
> > > >
> > > > United Rentals
> > > > Consider it done.(tm)
> > > > 800-UR-RENTS
> > > > unitedrentals.com
> > > >
> > > >
> > > >
> > > > ------------------------------------------------------------------
> > > > --- To unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > --
> > > Yueyu Lin
> > >
> > > United Rentals
> > > Consider it done.(tm)
> > > 800-UR-RENTS
> > > unitedrentals.com
> > >
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > --
> > Yueyu Lin
> >
> >
>
> United Rentals
> Consider it done.=99
> 800-UR-RENTS
> unitedrentals.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6645_3178611.1155676791277--

From java-user-return-22733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 21:40:33 2006
Return-Path: <java-user-return-22733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32436 invoked from network); 15 Aug 2006 21:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 21:40:33 -0000
Received: (qmail 57293 invoked by uid 500); 15 Aug 2006 21:40:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57260 invoked by uid 500); 15 Aug 2006 21:40:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57249 invoked by uid 99); 15 Aug 2006 21:40:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:40:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 14:40:25 -0700
Received: from [10.65.253.201] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15677FCC@mailer.syr.edu>; Tue, 15 Aug 2006 17:40:04 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <928222749.1155676363.155594488.85599@mcgi12.rambler.ru>
References: <928222749.1155676363.155594488.85599@mcgi12.rambler.ru>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <66E1AB27-50F8-47D8-B6CE-772C20FC6D43@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: desired constructor Field("contents", new FileReader(f), Field.Store.COMPRESS)
Date: Tue, 15 Aug 2006 17:40:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Boris,

Readers are never stored, so I don't believe you can do it that way.   
Of course, you can always read the values into a String and then  
access the appropriate String based constructor.

Storage is a separate mechanism from indexing, so my _guess_ is that  
if you want Readers to be stored, it would result in having to use  
the Reader twice (once for indexing and once for storage), which  
isn't possible, I don't believe, since not all Readers support the  
mark() and reset() functionality.  Besides, you will get better  
performance reading once...


-Grant


On Aug 15, 2006, at 5:12 PM, Boris Galitsky wrote:

> Hello
>
> I need to index the content of a file (using our in-house analyzer)
> and store in compressed way.
> So  Field("contents", new FileReader(f), Field.Store.COMPRESS)  
> would be a desired constructor
> (but it does not exist in this form).
>
> How would one "combine"  new FileReader(f) and Field.Store.COMPRESS ?
>
> Regards
> --
> Boris Galitsky.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 22:09:07 2006
Return-Path: <java-user-return-22734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40535 invoked from network); 15 Aug 2006 22:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 22:09:07 -0000
Received: (qmail 7064 invoked by uid 500); 15 Aug 2006 22:09:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7030 invoked by uid 500); 15 Aug 2006 22:09:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7019 invoked by uid 99); 15 Aug 2006 22:09:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:09:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:09:01 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 10EC05B77B; Tue, 15 Aug 2006 15:08:34 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0A53C7F403
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 15:08:34 -0700 (PDT)
Date: Tue, 15 Aug 2006 15:08:34 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: desired constructor Field("contents", new FileReader(f),
 Field.Store.COMPRESS)
In-Reply-To: <66E1AB27-50F8-47D8-B6CE-772C20FC6D43@syr.edu>
Message-ID: <Pine.LNX.4.58.0608151503280.10503@hal.rescomp.berkeley.edu>
References: <928222749.1155676363.155594488.85599@mcgi12.rambler.ru>
 <66E1AB27-50F8-47D8-B6CE-772C20FC6D43@syr.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Storage is a separate mechanism from indexing, so my _guess_ is that
: if you want Readers to be stored, it would result in having to use
: the Reader twice (once for indexing and once for storage), which
: isn't possible, I don't believe, since not all Readers support the
: mark() and reset() functionality.  Besides, you will get better
: performance reading once...

To elaborate: this really isn't a flaw in the way Fields work -- the
fact that seperate mechanisms are involved doesn't result in any penalty
that you wouldn't also be facing if it was done at once....

The advantage of indexing a "Reader" based Field is that you can
tokenize/index a stream of text from a Reader without needing the entire
contents the Reader refrences in memory at one time -- it's a true stream
opeeration.  Storing a field requires the full data set to be available in
memory at once -- so if you are going to Store the data, you have to read
it into a String anyway.

That said, it would certainly be possible to have a convince method that
let you construct a Stored Field with a Reader, and it could slurp in the
whole reader for you, but it would be missleading to people who expect the
Reader based Fields to be stream based.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 22:09:14 2006
Return-Path: <java-user-return-22735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40605 invoked from network); 15 Aug 2006 22:09:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 22:09:14 -0000
Received: (qmail 8241 invoked by uid 500); 15 Aug 2006 22:09:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8211 invoked by uid 500); 15 Aug 2006 22:09:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8164 invoked by uid 99); 15 Aug 2006 22:09:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:09:05 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:09:04 -0700
Received: by py-out-1112.google.com with SMTP id s49so75162pyc
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 15:08:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fq3cenbDAfK8hIJBRrP1zy3qxwmgiRMJnIVuQe4AlrgRHVdkrtoKMhBNrP7keVpglnopIyjRqHpX4+pt+XbiGGYxctS+5yBw5lwiLi61Ah+C0dtyUjJXsD0oREJtBnTfInzOtE5qPv7ViKMK/ut1Kc/FDdtn0GPEV4ZKIUMAo08=
Received: by 10.35.108.12 with SMTP id k12mr16393223pym;
        Tue, 15 Aug 2006 15:08:43 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 15 Aug 2006 15:08:43 -0700 (PDT)
Message-ID: <359a92830608151508t4a52bafdref031f62f5c235b2@mail.gmail.com>
Date: Tue, 15 Aug 2006 18:08:43 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing the same field multiple times in a doc.
In-Reply-To: <359a92830608151410n5f982852ye1d4faa2d4b27dd6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7741_446004.1155679723301"
References: <359a92830608151410n5f982852ye1d4faa2d4b27dd6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7741_446004.1155679723301
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think I just answered my own question. No, there's no difference.
Including running into an OutOfMemory error when adding the doc. It seems
like I can think of this exactly as concatenating all the chunks together
and indexing them all at once, including the limitations.

So even though it all seems to work for small examples, I don't think it
helps.

Never mind......

Erick

On 8/15/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> That's waaaaay cool. I'm not entirely clear on this point, but my test
> sure worked out well. So I thought I'd see if the behavior I'm seeing is
> expected. If so, way cool coding guys!
>
> Here's the root question: "Am I reasonably safe, for a single document, in
> thinking of indexing multiple chunks with the same field as being identical,
> for all practical purposes, with indexing the field once with all the chunks
> concatenated together?".
>
> Details follow...
>
> Background: I'm working with books now, so the 10,000 word limit isn't
> acceptable. It is, of course, easy to bump it up via
> IndexWriter.setMaxFieldLength, but I'd rather just break up the input
> stream since I don't have a realistic expectation of putting an upper limit
> on the size of a doc. So I experimented a bit with indexing the same field
> multiple times in a document. It seems to me that everything "just works",
> at least in my simple test case. This is one heck of a coincidence if not
> intended behavior <G>, so all I'm asking is if anybody is surprised by this
> (especially Otis, Chris, Erik, etc).
>
> Please ignore the Field.Store, I realize it will probably have to be NO
> for this app......
>
> Lucene is fine with indexing the same field multiple times, like this....
>
>     Document doc = new Document();
>     doc.add(new Field("tokens", "one two three", Field.Store.YES,
> Field.Index.TOKENIZED));
>
>     doc.add(new Field("tokens", "four five six", Field.Store.YES,
> Field.Index.TOKENIZED ));
>     writer.addDocument(doc);
>
> What surprised me a bit is that SpanQueries work just fine this way. If I
> create a span query for "two" and "five", this doc is found for some slop
> factors and not found for other slop factors, just as though I indexed the
> "tokens" field once with "one two three four five six".
>
> Boolean MUST clauses work as well.
>
> So, are there any "gotchas" that spring to mind with the notion of
> chunking the input to < 10,000 words and indexing the chunks multiple times
> in the same field? Let me be clear I'm just beginning to design this, so all
> I'm thinking about here is whether indexing the same field multiple times is
> fraught with danger <G>, I have a bunch of details to work out about what
> the requirements are and whether I really *want* to do this, but that's my
> problem.
>
> Thanks
> Erick
>

------=_Part_7741_446004.1155679723301--

From java-user-return-22736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 22:16:45 2006
Return-Path: <java-user-return-22736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45219 invoked from network); 15 Aug 2006 22:16:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 22:16:45 -0000
Received: (qmail 23790 invoked by uid 500); 15 Aug 2006 22:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23766 invoked by uid 500); 15 Aug 2006 22:16:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23755 invoked by uid 99); 15 Aug 2006 22:16:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:16:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:16:38 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D4C5C5B77B; Tue, 15 Aug 2006 15:16:17 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CFE767F403
	for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 15:16:17 -0700 (PDT)
Date: Tue, 15 Aug 2006 15:16:17 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Indexing the same field multiple times in a doc.
In-Reply-To: <359a92830608151410n5f982852ye1d4faa2d4b27dd6@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608151511290.10503@hal.rescomp.berkeley.edu>
References: <359a92830608151410n5f982852ye1d4faa2d4b27dd6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

:
: Here's the root question: "Am I reasonably safe, for a single document, in
: thinking of indexing multiple chunks with the same field as being identical,
: for all practical purposes, with indexing the field once with all the chunks
: concatenated together?".

esentially that's true -- the differnce is in the way the
positionIncrimentGap method of your analyzer is used.  For a single large
field value, it is never used.  for two or more values, it's called in
between each value.

: What surprised me a bit is that SpanQueries work just fine this way. If I
: create a span query for "two" and "five", this doc is found for some slop
: factors and not found for other slop factors, just as though I indexed the
: "tokens" field once with "one two three four five six".

right ... that's where the positionIncrimentGap can come in handy .. you
can introduce a "large" gap size so that you can make phrase/span queries
which match across multiple values, and others which don't.

: So, are there any "gotchas" that spring to mind with the notion of chunking
: the input to < 10,000 words and indexing the chunks multiple times in the
: same field? Let me be clear I'm just beginning to design this, so all I'm

well, there's really nothing wrong with using multiple values, as far as
doing that to deal with the 10,000 terms limit...

 a) if you don't wnat the limit, change the limit -- there's no reason to
work arround it.
 b) i'm not entirely sure if that limit is on a single field value, or on
the total number of indexed tokens for that field name -- in which case
this approach doesn't work arround it at all -- make sure you test with
two fields whose total number of tokens is bigger then 10,000




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 22:20:19 2006
Return-Path: <java-user-return-22737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45972 invoked from network); 15 Aug 2006 22:20:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 22:20:18 -0000
Received: (qmail 29375 invoked by uid 500); 15 Aug 2006 22:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28361 invoked by uid 500); 15 Aug 2006 22:20:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28350 invoked by uid 99); 15 Aug 2006 22:20:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:20:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.70.12.230] (HELO squidward.siderean.com) (64.70.12.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:20:10 -0700
Received: from squidward.siderean.com by squidward.siderean.com
	with ESMTP id 4675741155680282; Tue, 15 Aug 2006 15:18:02 -0700
Message-ID: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com>
Date: Tue, 15 Aug 2006 15:18:02 -0700 (PDT)
From: Sameer Maggon <smaggon@siderean.com>
To: java-user@lucene.apache.org
Subject: Quotes dependent StopWords removal
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_97_19877959.1155680282850"
Accept-Language: en-US
X-Mailer: Oracle Collaboration Suite Web Access 10.1.2.0.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_97_19877959.1155680282850
Content-Type: text/plain;charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Currently, in my application (that uses Lucene), I am using a Porter + Stan=
dardAnalyzer (with stop words).



I would like to do the following:

When the user performs a search, the analyzer should remove the "stopwords"=
 only if the stop word is not present in quotes. If the stop word is presen=
t in quotes, I don't want the stop word to be removed by the analyzer.



For e.g.



"no dress code" - should not remove "no"=A0 as it's present in quotes.



shirts with trousers - should remove "with" as a stop word.



I have been trying to do this with Lucene, but have not found a straight fo=
rward way of doing it. I have been digging in Lucene mail archives, but it =
seems like there is no easy way to do this apart from extending / modifying=
 the QueryParser. In some sense, it is similar to the issue discussed in:



http://www.gossamer-threads.com/lists/lucene/java-user/38946



Is there any way I can avoid subclassing QueryParser ?



Thanks,

Sameer Maggon.


------=_Part_97_19877959.1155680282850--


From java-user-return-22738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 22:37:00 2006
Return-Path: <java-user-return-22738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51279 invoked from network); 15 Aug 2006 22:36:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 22:36:59 -0000
Received: (qmail 53233 invoked by uid 500); 15 Aug 2006 22:36:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53205 invoked by uid 500); 15 Aug 2006 22:36:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53194 invoked by uid 99); 15 Aug 2006 22:36:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:36:54 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:36:53 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1437416wxc
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 15:36:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=W0hIU/bkry3Nd6OwmPCBzBgZng+/HhOeLF/ghT3DtlTP8mZU32Ei73WrhvFXBoDVjssV5clAf8ajjq/+wsBx+Jv2Co7HaoQsiC8AxJqLv/j0/DUssAHUMoh3kZsT0BX2O2MIAWeJCI7EW8xrfE6m7CD9n6o+jxEpvY7gLI/VZ9I=
Received: by 10.70.99.11 with SMTP id w11mr12434027wxb;
        Tue, 15 Aug 2006 15:36:31 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 7sm19479wrh.2006.08.15.15.36.30;
        Tue, 15 Aug 2006 15:36:31 -0700 (PDT)
Message-ID: <44E24C72.1060100@gmail.com>
Date: Tue, 15 Aug 2006 18:36:34 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Quotes dependent StopWords removal
References: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com>
In-Reply-To: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you do not put the stop words in the index during analysis what use 
will they be at search time?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 15 22:50:19 2006
Return-Path: <java-user-return-22739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55902 invoked from network); 15 Aug 2006 22:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2006 22:50:19 -0000
Received: (qmail 71304 invoked by uid 500); 15 Aug 2006 22:50:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70670 invoked by uid 500); 15 Aug 2006 22:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70657 invoked by uid 99); 15 Aug 2006 22:50:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:50:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.70.12.230] (HELO squidward.siderean.com) (64.70.12.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 15:50:13 -0700
Received: from squidward.siderean.com by squidward.siderean.com
	with ESMTP id 4676451155682093; Tue, 15 Aug 2006 15:48:13 -0700
Message-ID: <20347436.1155682093891.JavaMail.oracle@squidward.siderean.com>
Date: Tue, 15 Aug 2006 15:48:13 -0700 (PDT)
From: Sameer Maggon <smaggon@siderean.com>
To: java-user@lucene.apache.org
Subject: Re: Quotes dependent StopWords removal
In-Reply-To: <44E24C72.1060100@gmail.com>
Mime-Version: 1.0
Content-Type: text/plain;charset=US-ASCII
Content-Transfer-Encoding: 7bit
Accept-Language: en-US
X-Mailer: Oracle Collaboration Suite Web Access 10.1.2.0.0
References: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com> <44E24C72.1060100@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I won't remove the stop words while indexing.

Sameer.

-----Original Message-----
>From Mark Miller <markrmiller@gmail.com>
Sent Tue 8/15/2006 3:36 PM
To java-user@lucene.apache.org
Subject Re: Quotes dependent StopWords removal

If you do not put the stop words in the index during analysis what use 
will they be at search time?

- Mark



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 00:32:06 2006
Return-Path: <java-user-return-22740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82799 invoked from network); 16 Aug 2006 00:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 00:32:06 -0000
Received: (qmail 2759 invoked by uid 500); 16 Aug 2006 00:32:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2726 invoked by uid 500); 16 Aug 2006 00:32:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2715 invoked by uid 99); 16 Aug 2006 00:32:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 17:32:00 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 17:31:59 -0700
Received: by wx-out-0506.google.com with SMTP id s15so8847wxc
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 17:31:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=CXYeS4BLydkks1qCRSYr2iuev1H7ME7zZCUAU4xu8BLo6Z3j72XpEALqYJCRWtnu1/r88lzXrFnECH0kv7G0t7zlQT+hD5Vrr+KjKThYb4fHJ7QA0aQOAffUbfffO3qYnwcbIBNrD/JJSzhfHJzpYhORBcW3cGuHcAFlUKTg7Ro=
Received: by 10.70.125.2 with SMTP id x2mr94543wxc;
        Tue, 15 Aug 2006 17:31:38 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 10sm39756wrl.2006.08.15.17.31.35;
        Tue, 15 Aug 2006 17:31:38 -0700 (PDT)
Message-ID: <44E26769.8040006@gmail.com>
Date: Tue, 15 Aug 2006 20:31:37 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Quotes dependent StopWords removal
References: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com> <44E24C72.1060100@gmail.com> <20347436.1155682093891.JavaMail.oracle@squidward.siderean.com>
In-Reply-To: <20347436.1155682093891.JavaMail.oracle@squidward.siderean.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This appears tricky to me. I may be completely wrong but I would start 
by looking at the Standard Analyzer. I would try and create a new token 
that matched an open parenthesis. I would then change the next() method 
in StandardAnalyzer.jj to mark when it recognizes an open parenthesis. 
Now you are in a quote. Somehow mark each token (might not be an obvious 
way to do this) until you find another close parenthesis. Now mark that 
you are not in a quote. When not in a quote do not mark the tokens 
coming out of Next(). ) Now in the Stop Filter, check the token for your 
marker and do not remove it if it is marked.

Bear in mind...this all may be worthless speculating...

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 01:10:18 2006
Return-Path: <java-user-return-22741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91514 invoked from network); 16 Aug 2006 01:10:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 01:10:16 -0000
Received: (qmail 41470 invoked by uid 500); 16 Aug 2006 01:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41392 invoked by uid 500); 16 Aug 2006 01:10:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41381 invoked by uid 99); 16 Aug 2006 01:10:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 18:10:08 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 18:10:04 -0700
Received: by wx-out-0506.google.com with SMTP id s15so14754wxc
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 18:09:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cAiiqK3gYigj71PkNBAuxZ1evagv6QIUJWA7SlP6ZnTyBvHcjBCFqrNMylOMdODCFO/W7lO0vogFA+QQtcpBURLp3nzBKFdG3tpdXmVwGp541b+q8k6mIwMSEed+Hto7aMIGal1YDQGQyb3x7Oxnu/WA0PJVNNUNTOuDsT4FaTE=
Received: by 10.70.76.11 with SMTP id y11mr48709wxa;
        Tue, 15 Aug 2006 18:09:42 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 39sm124227wrl.2006.08.15.18.09.40;
        Tue, 15 Aug 2006 18:09:41 -0700 (PDT)
Message-ID: <44E27058.7040203@gmail.com>
Date: Tue, 15 Aug 2006 21:09:44 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Quotes dependent StopWords removal
References: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com> <44E24C72.1060100@gmail.com> <20347436.1155682093891.JavaMail.oracle@squidward.siderean.com>
In-Reply-To: <20347436.1155682093891.JavaMail.oracle@squidward.siderean.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My last answer was terrible. QueryParser will not sent any parenthesis 
into the analyzer. How about this:

Below are lines about 965-992 of QueryParser.java. Change 
getFieldQuery(field, term.image.substring(1, term.image.length()-1), s) 
(line 992) to call an identical function to the one called except have 
this function use an analyzer that does not remove stop words. Case 
QUOTED occurs when a QUOTED token is eaten. getFieldQuery puts that 
token (or tokens, possibly at the same position) through an analyzer and 
returns a Query object. You want that analyzer that is used to not strip 
stop words if the token type is QUOTED. Sounds reasonable to me.

Now replacing the entire method to just change the analyzer is very 
brute force but maybe it will spark an idea to something more elegant. 
Same "bear in mind this might be BS" applies to this answer.

- Mark

line 965 of QueryParser.java
    case QUOTED:
      term = jj_consume_token(QUOTED);
      switch ((jj_ntk==-1)?jj_ntk():jj_ntk) {
      case FUZZY_SLOP:
        fuzzySlop = jj_consume_token(FUZZY_SLOP);
        break;
      default:
        jj_la1[19] = jj_gen;
        ;
      }
      switch ((jj_ntk==-1)?jj_ntk():jj_ntk) {
      case CARAT:
        jj_consume_token(CARAT);
        boost = jj_consume_token(NUMBER);
        break;
      default:
        jj_la1[20] = jj_gen;
        ;
      }
         int s = phraseSlop;

         if (fuzzySlop != null) {
           try {
             s = Float.valueOf(fuzzySlop.image.substring(1)).intValue();
           }
           catch (Exception ignored) { }
         }
         q = getFieldQuery(field, term.image.substring(1, 
term.image.length()-1), s);

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 01:21:22 2006
Return-Path: <java-user-return-22742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3848 invoked from network); 16 Aug 2006 01:21:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 01:21:21 -0000
Received: (qmail 51046 invoked by uid 500); 16 Aug 2006 01:21:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51007 invoked by uid 500); 16 Aug 2006 01:21:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50996 invoked by uid 99); 16 Aug 2006 01:21:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 18:21:16 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 18:21:15 -0700
Received: by wx-out-0506.google.com with SMTP id s15so16437wxc
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 18:20:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cPdXVpmOpvdR5i0EopY4hf9ZHzZ/v4HapfHO4oBDk/iSg6SDfey/qob41Djr8OB9LNyTTK4cQeywlsi1R/gG56DcqLnwR0b3WgOIlJHhiZ/fOQ6aXNKj/9/uxE+b1wTRCWoeOJUhL43pfF44eItFjtor32++VR55T91Z7xs5Wg0=
Received: by 10.70.50.18 with SMTP id x18mr160940wxx;
        Tue, 15 Aug 2006 18:20:53 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 64sm16521wra.2006.08.15.18.20.51;
        Tue, 15 Aug 2006 18:20:53 -0700 (PDT)
Message-ID: <44E272F4.8050607@gmail.com>
Date: Tue, 15 Aug 2006 21:20:52 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Quotes dependent StopWords removal
References: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com> <44E24C72.1060100@gmail.com> <20347436.1155682093891.JavaMail.oracle@squidward.siderean.com>
In-Reply-To: <20347436.1155682093891.JavaMail.oracle@squidward.siderean.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Allow me to amend my last email: you should not be making those changes 
in QueryParser.java but in QueryParser.jj (line 866) . Also, I know you 
did not want to subclass QueryParser, but you cannot know you are in 
quotes in the analyzer unless you hook into QueryParser.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 02:27:57 2006
Return-Path: <java-user-return-22743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25864 invoked from network); 16 Aug 2006 02:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 02:27:57 -0000
Received: (qmail 10251 invoked by uid 500); 16 Aug 2006 02:27:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10218 invoked by uid 500); 16 Aug 2006 02:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10207 invoked by uid 99); 16 Aug 2006 02:27:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 19:27:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Aug 2006 19:27:50 -0700
Received: by py-out-1112.google.com with SMTP id s49so45421pyc
        for <java-user@lucene.apache.org>; Tue, 15 Aug 2006 19:27:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=bITJFSRKotI09TPPkBs579oHI60tI1W815ZOZxk87AFf0ipev2FxYc7i3lSsxe9zQ7uqbFUBGGeCgkJ4W8EzIA2pA8PGPyWtkR2AkoHxZDvTfa1yGkcy5mozI8En8Muuoc7ztfE3ut6rLFAe3k9w7Q2G/1+Bc3cW5sqNLMnhAq4=
Received: by 10.35.22.17 with SMTP id z17mr272059pyi;
        Tue, 15 Aug 2006 19:27:29 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Tue, 15 Aug 2006 19:27:29 -0700 (PDT)
Message-ID: <c68e39170608151927r335638cfj3146735cab647257@mail.gmail.com>
Date: Tue, 15 Aug 2006 22:27:29 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Indexing the same field multiple times in a doc.
In-Reply-To: <Pine.LNX.4.58.0608151511290.10503@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <359a92830608151410n5f982852ye1d4faa2d4b27dd6@mail.gmail.com>
	 <Pine.LNX.4.58.0608151511290.10503@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: 22c051f7843a1473
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/15/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>  b) i'm not entirely sure if that limit is on a single field value, or on
> the total number of indexed tokens for that field name -- in which case
> this approach doesn't work arround it at all -- make sure you test with
> two fields whose total number of tokens is bigger then 10,000

maxFieldLength is number of tokens indexed *per field name*, not per
field value.  Breaking up a big field into multiple small fields with
the same field name does not change the number of tokens indexed.  As
Hoss says, simply change maxFieldLength to whatever you want.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 07:16:44 2006
Return-Path: <java-user-return-22744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8735 invoked from network); 16 Aug 2006 07:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 07:16:44 -0000
Received: (qmail 88655 invoked by uid 500); 16 Aug 2006 07:16:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87804 invoked by uid 500); 16 Aug 2006 07:16:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87789 invoked by uid 99); 16 Aug 2006 07:16:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 00:16:38 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=EXTRA_MPART_TYPE,HTML_IMAGE_ONLY_28,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.224] (HELO smtpout06-04.prod.mesa1.secureserver.net) (64.202.165.224)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Aug 2006 00:16:36 -0700
Received: (qmail 25019 invoked from network); 16 Aug 2006 07:16:15 -0000
Received: from unknown (202.153.32.162)
  by smtpout06-04.prod.mesa1.secureserver.net (64.202.165.227) with ESMTP; 16 Aug 2006 07:16:14 -0000
Subject: Re: Highlighter
From: Ramesh Salla <ramesh.salla@iptouch.com>
Reply-To: ramesh.salla@iptouch.com
To: java-user@lucene.apache.org
In-Reply-To: <1155341147.44dd1b5bf1757@webmail.uu.se>
References: <009c01c6bd50$6260c420$0200a8c0@hercules>
	 <359a92830608111306p24f6edaar8d4fb66d2764188@mail.gmail.com>
	 <44DD05D5.8030306@gmail.com>  <1155341147.44dd1b5bf1757@webmail.uu.se>
Content-Type: multipart/related; type="multipart/alternative"; boundary="=-hF1ycalmfwiEAhlNV3n8"
Organization: iptouch
Date: Wed, 16 Aug 2006 12:47:22 +0530
Message-Id: <1155712642.3967.8.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 (2.2.2-5) 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=-hF1ycalmfwiEAhlNV3n8
Content-Type: multipart/alternative; boundary="=-ibvXIt4Xl334xdXQ0z6t"


--=-ibvXIt4Xl334xdXQ0z6t
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

which version of Lucene and which version of Highlighter, do you use.
I dont see any such issues?
I think,  I can resolve the issue,  if you can pass on a few info on you
are trying to get the data and highlight things.

:)


On Sat, 2006-08-12 at 00:05 +0000, Ronnie Kolehmainen wrote:

> There is an issue in JIRA, see http://issues.apache.org/jira/browse/LUCENE-645
> 
> So I guess you're not the only one.
> 
> /Ronnie
> 
> Citerar Mark Miller <markrmiller@gmail.com>:
> 
> > Am I the only one that gets back a string missing the final character 
> > when using the highlighter and the null fragmenter? I always have to add 
> > the last character of what I have asked to be highlighted to what the 
> > highlighter returns when trying to hit highlight an entire 
> > document...anyone else every run into this?
> > 
> > cheers ( don't I wish i was British),
> > 
> > - mark
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

--=-ibvXIt4Xl334xdXQ0z6t
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 TRANSITIONAL//EN">
<HTML>
<HEAD>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=UTF-8">
  <META NAME="GENERATOR" CONTENT="GtkHTML/3.6.2">
</HEAD>
<BODY>
which version of Lucene and which version of Highlighter, do you use.<BR>
I dont see any such issues?<BR>
I think,&nbsp; I can resolve the issue,&nbsp; if you can pass on a few info on you are trying to get the data and highlight things.<BR>
<BR>
<IMG SRC="cid:1155712642.3967.7.camel@localhost.localdomain" ALIGN="middle" ALT=":)" BORDER="0"><BR>
<BR>
<BR>
On Sat, 2006-08-12 at 00:05 +0000, Ronnie Kolehmainen wrote:
<BLOCKQUOTE TYPE=CITE>
<PRE>
<FONT COLOR="#000000">There is an issue in JIRA, see <A HREF="http://issues.apache.org/jira/browse/LUCENE-645">http://issues.apache.org/jira/browse/LUCENE-645</A></FONT>

<FONT COLOR="#000000">So I guess you're not the only one.</FONT>

<FONT COLOR="#000000">/Ronnie</FONT>

<FONT COLOR="#000000">Citerar Mark Miller &lt;<A HREF="mailto:markrmiller@gmail.com">markrmiller@gmail.com</A>&gt;:</FONT>

<FONT COLOR="#000000">&gt; Am I the only one that gets back a string missing the final character </FONT>
<FONT COLOR="#000000">&gt; when using the highlighter and the null fragmenter? I always have to add </FONT>
<FONT COLOR="#000000">&gt; the last character of what I have asked to be highlighted to what the </FONT>
<FONT COLOR="#000000">&gt; highlighter returns when trying to hit highlight an entire </FONT>
<FONT COLOR="#000000">&gt; document...anyone else every run into this?</FONT>
<FONT COLOR="#000000">&gt; </FONT>
<FONT COLOR="#000000">&gt; cheers ( don't I wish i was British),</FONT>
<FONT COLOR="#000000">&gt; </FONT>
<FONT COLOR="#000000">&gt; - mark</FONT>
<FONT COLOR="#000000">&gt; </FONT>
<FONT COLOR="#000000">&gt; ---------------------------------------------------------------------</FONT>
<FONT COLOR="#000000">&gt; To unsubscribe, e-mail: <A HREF="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</A></FONT>
<FONT COLOR="#000000">&gt; For additional commands, e-mail: <A HREF="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</A></FONT>
<FONT COLOR="#000000">&gt; </FONT>
<FONT COLOR="#000000">&gt; </FONT>




<FONT COLOR="#000000">---------------------------------------------------------------------</FONT>
<FONT COLOR="#000000">To unsubscribe, e-mail: <A HREF="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</A></FONT>
<FONT COLOR="#000000">For additional commands, e-mail: <A HREF="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</A></FONT>


</PRE>
</BLOCKQUOTE>
</BODY>
</HTML>

--=-ibvXIt4Xl334xdXQ0z6t--

--=-hF1ycalmfwiEAhlNV3n8--


From java-user-return-22745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 07:33:16 2006
Return-Path: <java-user-return-22745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22844 invoked from network); 16 Aug 2006 07:33:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 07:33:16 -0000
Received: (qmail 3895 invoked by uid 500); 16 Aug 2006 07:33:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3272 invoked by uid 500); 16 Aug 2006 07:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3260 invoked by uid 99); 16 Aug 2006 07:33:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 00:33:09 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=EXTRA_MPART_TYPE,HTML_IMAGE_ONLY_16,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.182] (HELO smtpauth02.prod.mesa1.secureserver.net) (64.202.165.182)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Aug 2006 00:33:08 -0700
Received: (qmail 8614 invoked from network); 16 Aug 2006 07:32:46 -0000
Received: from unknown (202.153.32.162)
  by smtpauth02-04.prod.mesa1.secureserver.net (64.202.165.182) with ESMTP; 16 Aug 2006 07:32:46 -0000
Subject: Re: HELP: how to highlight the search key word in lucene's search
	results?
From: Ramesh Salla <ramesh.salla@iptouch.com>
Reply-To: ramesh.salla@iptouch.com
To: java-user@lucene.apache.org
Cc: kevin <kevindig@gmail.com>
In-Reply-To: <44DCB14E.70808@gmail.com>
References:
	 <8834A84C87A2C148AD46921BB8BFC97C021E57F0@S1SE1MAIL.emea1.ad.group>
	 <359a92830608100611h4c4c58f4we1997b5a46f6bca@mail.gmail.com>
	 <44DCB14E.70808@gmail.com>
Content-Type: multipart/related; type="multipart/alternative"; boundary="=-iFbVWhMSrgsZ9w+okzV3"
Organization: iptouch
Date: Wed, 16 Aug 2006 13:03:54 +0530
Message-Id: <1155713634.3967.17.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 (2.2.2-5) 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=-iFbVWhMSrgsZ9w+okzV3
Content-Type: multipart/alternative; boundary="=-LMhqRkLgJiDYxGGT409G"


--=-LMhqRkLgJiDYxGGT409G
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

goto mailing list archive and you find a lot of info there.

i can brief you out procdure for now.
get the Highlighter jar from the lucene-sandbox and see the examples
from this downloaded folder.
Get the Search Results from the Hits and pass this string to the
highlighter class.

if you still need help... please ping, i can pass you some code on.

:)



On Sat, 2006-08-12 at 00:33 +0800, kevin wrote:

> Hi,
> how to highlight the search key word in lucene's search results? pls 
> give advise,thanks!
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

--=-LMhqRkLgJiDYxGGT409G
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 TRANSITIONAL//EN">
<HTML>
<HEAD>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=UTF-8">
  <META NAME="GENERATOR" CONTENT="GtkHTML/3.6.2">
</HEAD>
<BODY>
goto mailing list archive and you find a lot of info there.<BR>
<BR>
i can brief you out procdure for now.<BR>
get the Highlighter jar from the lucene-sandbox and see the examples from this downloaded folder.<BR>
Get the Search Results from the Hits and pass this string to the highlighter class.<BR>
<BR>
if you still need help... please ping, i can pass you some code on.<BR>
<BR>
<IMG SRC="cid:1155713634.3967.16.camel@localhost.localdomain" ALIGN="middle" ALT=":)" BORDER="0"><BR>
<BR>
<BR>
<BR>
On Sat, 2006-08-12 at 00:33 +0800, kevin wrote:
<BLOCKQUOTE TYPE=CITE>
<PRE>
<FONT COLOR="#000000">Hi,</FONT>
<FONT COLOR="#000000">how to highlight the search key word in lucene's search results? pls </FONT>
<FONT COLOR="#000000">give advise,thanks!</FONT>

<FONT COLOR="#000000">---------------------------------------------------------------------</FONT>
<FONT COLOR="#000000">To unsubscribe, e-mail: <A HREF="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</A></FONT>
<FONT COLOR="#000000">For additional commands, e-mail: <A HREF="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</A></FONT>


</PRE>
</BLOCKQUOTE>
</BODY>
</HTML>

--=-LMhqRkLgJiDYxGGT409G--

--=-iFbVWhMSrgsZ9w+okzV3--


From java-user-return-22746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 08:47:10 2006
Return-Path: <java-user-return-22746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48696 invoked from network); 16 Aug 2006 08:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 08:47:10 -0000
Received: (qmail 14421 invoked by uid 500); 16 Aug 2006 08:47:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14385 invoked by uid 500); 16 Aug 2006 08:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14374 invoked by uid 99); 16 Aug 2006 08:47:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 01:47:04 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 01:47:01 -0700
Received: (qmail 365 invoked by uid 509); 16 Aug 2006 10:46:34 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.098629 secs); 16 Aug 2006 08:46:34 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.098629 secs Process 359)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 16 Aug 2006 10:46:34 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6C110.6F5FDF15"
Subject: addIndexes method without the merge
Date: Wed, 16 Aug 2006 10:46:33 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C022715E2@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: addIndexes method without the merge
Thread-Index: AcbBEHoNwK4C5F9tTq6qD6LUEK4z6Q==
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6C110.6F5FDF15
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

In my search engine (based on top of the lucene 1.4.3 api) I'm using one
RAMDir as a live indexing buffert and one FSDir as the main persisted
index.

=20

When the RAMDir buffert has been filled I'm adding those documents to
the FSDir and clear the RAMDir.=20

=20

At first I was iterating thru the RAMDir and added every document to the
FSDir. But that turned out to be very inefficient. So I tried to use the
addIndexes method but soon I realized that the addIndexes method will
always leave me with one optimized file ( as long as the maxMergeDocs
hasn't been reached ??).  Then I tried to do my own
addIndexesWithoutOptimize method which main purpose is to ALWAYS create
a new segment file for the directory added to it. At first this method
seemed to work but after a while I realized that this was not the case,
my method seems to do some minor screw up to the index.

=20

So I'm wondering if somebody could help my do a new method?

=20

=20

/

Regards

Marcus=20

=20


------_=_NextPart_001_01C6C110.6F5FDF15--

From java-user-return-22747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 08:47:20 2006
Return-Path: <java-user-return-22747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48750 invoked from network); 16 Aug 2006 08:47:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 08:47:19 -0000
Received: (qmail 15768 invoked by uid 500); 16 Aug 2006 08:47:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15744 invoked by uid 500); 16 Aug 2006 08:47:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15733 invoked by uid 99); 16 Aug 2006 08:47:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 01:47:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 01:47:12 -0700
Received: by nf-out-0910.google.com with SMTP id x4so590142nfb
        for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 01:46:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mXmuCtBnquJJoEFRQKwOOniqKkKHuB40+906Mkw4XE+4GNeTN7fa6/ZzBp93wqki+bNJHHa32M3LGh72VQ1QVjDmHjrkZ4Hx/i1Zpnt6kiFngJyaloh1txS8BvbASzlicP9kW2VE8zORSGpRKXBHai7twLB7CWAYOOIrXCnAG0c=
Received: by 10.49.29.3 with SMTP id g3mr397196nfj;
        Wed, 16 Aug 2006 01:46:50 -0700 (PDT)
Received: by 10.78.125.4 with HTTP; Wed, 16 Aug 2006 01:46:50 -0700 (PDT)
Message-ID: <a218b3050608160146v2d79854bteb3957c7feb328ec@mail.gmail.com>
Date: Wed, 16 Aug 2006 10:46:50 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Best Practice: emails and file-attachments
In-Reply-To: <44E20C46.5050101@scalix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76889_19519371.1155718010607"
References: <a218b3050608151028g5db2a055s668aeba6c071adf7@mail.gmail.com>
	 <44E20C46.5050101@scalix.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_76889_19519371.1155718010607
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi John,

thanks for the detailed answer.

You wrote:
> If you're indexing a
> multipart/alternative bodypart then index all the MIME headers, but only
> index the content of the *first* bodypart.

Does this mean you index just the first file-attachment?
What do you advice, if you have to index mulitpart bodys (== more then one
file-attachment)?
One lucene-document for each part (==file)?
How do you handle the queries?

Greetings
lude



On 8/15/06, John Haxby <jch@scalix.com> wrote:
>
> lude wrote:
> > does anybody has an idea what is the best design approch for realizing
> > the following:
> >
> > The goal is to index emails and their corresponding file attachments.
> > One email could contain for example:
> I put a fair amount of thought into this when I was doing the design for
> our mail server -- I know about mail :-)   After a little trial and
> error I came up with the following scheme:
>
>   1. All header fields indexed under their own name with the name
>      converted to lower case.
>   2. Almost all bodyparts indexed in a single field called BODY (in
>      upper case)
>   3. Meta-data such as SIZE, DELIVERY-DATE and similar indexed with
>      uppercase fields
>   4. Extensions for other bodypart-specific or application-specific
>      fields indexed as something with an initial uppercase letter and
>      at least one lowercase letter
>
> That gives an extensible set of fields and does require that the index
> knows ahead of time what header fields will be present or relevant.   It
> means that there are potentially a lot of fields: we're running at about
> 60 depending on the user.
>
> Some header fields are special.   The various message-id fields
> (Message-Id, Resent-Message-Id, In-Reply-To and References) need to have
> their mesage-ids carefully extracted and then indexed untokenized.
> Recipient fields (to, cc, from, etc) need to parsed and then have their
> addresses re-assembled as a friendly-name and an RFC822 address -- the
> reason for the re-assembly is that addresses can be presented in
> equivalent but odd fashions.   Most header fields can have RFC2047
> encoded text which needs to be decoded.
>
> When indexing the bodyparts you need to be a little careful.   In
> general, the MIME headers for each part are all indexed as other message
> headers (content-id is a messge id field) and I also indexed the
> canonical content type under a CONTENT-TYPE field, again to get rid of
> fluff so that I can search for, say,
> CONTENT-TYPE:application/x-vnd-powerpoint to find all those annoyingly
> huge messages :-)  An attached message probably doesn't want all its
> headers indexed: subject is good; recipients are probably bad as it'll
> confuse the normal search and give unexpected results; message-id fields
> are almost certainly a bad idea.  If you're indexing a
> multipart/alternative bodypart then index all the MIME headers, but only
> index the content of the *first* bodypart.
>
> Does that all make sense?  Javamail is great for this, it's good at
> parsing and extracting the content of messages.  However, it's not
> enough to just read what I've said and the javamail doc.   If you're not
> intimately familiar with the MIME RFCs (I think the first one is
> RFC2045, but their not difficult to find as their all around RFC2047)
> and RFC2822, the message structure RFC itself.   If you just guess
> because the structure is "obvious" you'll come unstuck.
>
> jch
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_76889_19519371.1155718010607--

From java-user-return-22748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 08:50:54 2006
Return-Path: <java-user-return-22748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49633 invoked from network); 16 Aug 2006 08:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 08:50:54 -0000
Received: (qmail 20981 invoked by uid 500); 16 Aug 2006 08:50:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20947 invoked by uid 500); 16 Aug 2006 08:50:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20936 invoked by uid 99); 16 Aug 2006 08:50:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 01:50:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 01:50:47 -0700
Received: by nf-out-0910.google.com with SMTP id x4so591075nfb
        for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 01:50:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Hfwqmwksp7Xk6u5TNjEygPV/vS5iC481c746aFHi00PkXF5kVVqrVBgwj5sTD4x943+01twZr2YCcC75SaU+vMnTZogAGpOfvDzyBSywDE41wd47epkNeeo21YP9JFXSGnX9soDI+GqgSj1KWeaurheoLBEMo0xFZkhJxRtJbYI=
Received: by 10.48.254.10 with SMTP id b10mr417801nfi;
        Wed, 16 Aug 2006 01:50:25 -0700 (PDT)
Received: by 10.78.125.4 with HTTP; Wed, 16 Aug 2006 01:50:25 -0700 (PDT)
Message-ID: <a218b3050608160150q49a58221m51959e87ceef69c7@mail.gmail.com>
Date: Wed, 16 Aug 2006 10:50:25 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Best Practice: emails and file-attachments
In-Reply-To: <016801c6c098$036301e0$8380a8c0@safarijv.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76933_15566236.1155718225508"
References: <a218b3050608151028g5db2a055s668aeba6c071adf7@mail.gmail.com>
	 <016801c6c098$036301e0$8380a8c0@safarijv.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_76933_15566236.1155718225508
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Dejan,

how do you query for email- and(!) attachment-documents,
if you just want to present one hit per email (even if the searchterm
matches
in the email- and(!) in the corresponding attachment-document)?

Thanks
lude


On 8/15/06, Dejan Nenov <dejannenov@jollyobject.com> wrote:
>
> The approach we I find best is to create both Email documents - where a
> list
> (and links) to all attachments is contained as well as individual
> Attachment
> documents.
>
> It gets a little tricky when you have a forwarded email, containing an
> original Email that contains a tar.gz attachment, which contains the
> "actual" attached files :)
>
> (Shameless promotion follows) If you are a Windows user, for a _very_ good
> example get a copy of X1 Desktop (free - also distributed as Yahoo!
> Desktop
> search) - then right-click on the column headers and look at the available
> fields for email.
>
>
> Dejan
>
> -----Original Message-----
> From: lude [mailto:lucene.developer@googlemail.com]
> Sent: Tuesday, August 15, 2006 10:29 AM
> To: java-user@lucene.apache.org
> Subject: Best Practice: emails and file-attachments
>
> Hello,
>
> does anybody has an idea what is the best design approch for realizing
> the following:
>
> The goal is to index emails and their corresponding file attachments.
> One email could contain for example:
>
> 1 x subject
> 1 x sender-address
> 1 x to-addresses
> 1 x message-text
> 0..n x file-attachments  (each contains a 'file-name' and the
> 'file-content')
>
> How should I build the index?
>
> First approach:
> Each email + attachments gets one document with the following fields:
> subject, sender_address, to_address, message_text, 1_attachment_name,
> 1_attachment_content, 2_attachment_name, 2_attachment_content,
> 3_attachment_name, 3_attachment_content
> Disadvantage:
> Only three attachments could be indexed. It isn't a generic solution for
> indexing 'n' file-attachments.
>
> Second approach:
> Each email gets one document with the main email-data and 0 to n documents
> of file-attachments:
> 1 x  email_id, subject, sender_address, to_address, message_text
> 0..n x  email_id, attachment_name, attachment_content
> Disadvantage:
> At query time it is difficult to aggregate the documents that belongs to
> each other. One hit per email (including attachments) should be shown.
>
> Any thoughts?
>
> Thanks
> lude
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_76933_15566236.1155718225508--

From java-user-return-22749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 08:58:01 2006
Return-Path: <java-user-return-22749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52137 invoked from network); 16 Aug 2006 08:58:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 08:58:00 -0000
Received: (qmail 33566 invoked by uid 500); 16 Aug 2006 08:57:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32701 invoked by uid 500); 16 Aug 2006 08:57:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32690 invoked by uid 99); 16 Aug 2006 08:57:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 01:57:54 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 01:57:54 -0700
Received: (qmail 1772 invoked by uid 509); 16 Aug 2006 10:57:32 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.084583 secs); 16 Aug 2006 08:57:32 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.084583 secs Process 1766)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 16 Aug 2006 10:57:31 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: addIndexes method without the merge
Date: Wed, 16 Aug 2006 10:57:31 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C02271618@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: addIndexes method without the merge
Thread-Index: AcbBEHoNwK4C5F9tTq6qD6LUEK4z6QAASJgQ
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



-----Ursprungligt meddelande-----
Fr=E5n: Marcus Falck [mailto:marcus.falck@observer.se]=20
Skickat: den 16 augusti 2006 10:47
Till: java-user@lucene.apache.org
=C4mne: addIndexes method without the merge

Hi,

=20

In my search engine (based on top of the lucene 1.4.3 api) I'm using one
RAMDir as a live indexing buffert and one FSDir as the main persisted
index.

=20

When the RAMDir buffert has been filled I'm adding those documents to
the FSDir and clear the RAMDir.=20

=20

At first I was iterating thru the RAMDir and added every document to the
FSDir. But that turned out to be very inefficient. So I tried to use the
addIndexes method but soon I realized that the addIndexes method will
always leave me with one optimized file ( as long as the maxMergeDocs
hasn't been reached ??).  Then I tried to do my own
addIndexesWithoutOptimize method which main purpose is to ALWAYS create
a new segment file for the directory added to it (and still merge at the =
mergeFactor). At first this method
seemed to work but after a while I realized that this was not the case,
my method seems to do some minor screw up to the index.

=20

So I'm wondering if somebody could help my do a new method?

Example 1:
Adding 50000 docs using the addIndexes
After 5000:
One 20 MB file
After 10000:
One 40 MB file.
After 15000:
One 60 MB file.

And so on... (very inefficient).

Example 2:
Adding 50000 docs using my addIndexesWithoutMerge
After 5000:
One 20 MB file.
After 10000:
2 x 20 MB files.
After 50000:
1 x 200 MB file.

Example 2 is how I want it. How can I accomplish this?
=20
=20

/

Regards

Marcus=20

=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 09:26:05 2006
Return-Path: <java-user-return-22750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59828 invoked from network); 16 Aug 2006 09:26:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 09:26:04 -0000
Received: (qmail 69552 invoked by uid 500); 16 Aug 2006 09:25:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69371 invoked by uid 500); 16 Aug 2006 09:25:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69360 invoked by uid 99); 16 Aug 2006 09:25:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 02:25:58 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [131.246.120.5] (HELO mailgate1.uni-kl.de) (131.246.120.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 02:25:57 -0700
Received: from dfki-2203.dfki.uni-kl.de (pc-210.dfki.uni-kl.de [131.246.241.70])
	by mailgate1.uni-kl.de (8.13.4/8.13.4/Debian-3sarge1) with ESMTP id k7G9PYkP011865
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 11:25:34 +0200
Received: from serv-3100.kl.dfki.de (serv-3100.kl.dfki.de [192.168.31.180])
	by dfki-2203.dfki.uni-kl.de (8.11.7p1+Sun/8.11.4) with ESMTP id k7G9PY506032
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 11:25:34 +0200 (MEST)
Received: from [192.168.31.173] (pc-3153 [192.168.31.173])
	by serv-3100.kl.dfki.de (8.13.6+Sun/8.13.6) with ESMTP id k7G9PWpl018359
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 11:25:32 +0200 (CEST)
Message-ID: <44E2E48D.8040700@web.de>
Date: Wed, 16 Aug 2006 11:25:33 +0200
From: duiduder@web.de
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Quotes dependent StopWords removal
References: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com>
In-Reply-To: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Sameer,

what about this:

- during indexing, use the StandardAnalyzer without stopwords
- during the search, use 2 different Analyzers - one with and one without stopwords. Thereyby, you look first whether the user
  has typed in quotes inside her query String.
  # If so, look whether there are stopwords between the quotes
    * in the case there is a stopword between quotes, use the Analyzer without stopwords
    * in the case there is no stopword between quotes, use the one with stopwords
  # If not, use the one with stopwords anyway

...the lack on this approach is that when a user mix up stopwords queries with and without quotes, you can not decide such easily-
maybe there a solution can be to modify the analyzer stopword lists on the fly...then the last problem left is when the user types
a specific stopword twice - with and without quotes..so maybe you can live in this situation to use the Analyzer without stopwords -
depending on your scenario, it could be a good compromise...or search n times - but this wouldn't straight forward also ;)


greetz

Christian



Sameer Maggon schrieb:
> Currently, in my application (that uses Lucene), I am using a Porter + StandardAnalyzer (with stop words).
> 
> 
> 
> I would like to do the following:
> 
> When the user performs a search, the analyzer should remove the "stopwords" only if the stop word is not present in quotes. If the stop word is present in quotes, I don't want the stop word to be removed by the analyzer.
> 
> 
> 
> For e.g.
> 
> 
> 
> "no dress code" - should not remove "no"  as it's present in quotes.
> 
> 
> 
> shirts with trousers - should remove "with" as a stop word.
> 
> 
> 
> I have been trying to do this with Lucene, but have not found a straight forward way of doing it. I have been digging in Lucene mail archives, but it seems like there is no easy way to do this apart from extending / modifying the QueryParser. In some sense, it is similar to the issue discussed in:
> 
> 
> 
> http://www.gossamer-threads.com/lists/lucene/java-user/38946
> 
> 
> 
> Is there any way I can avoid subclassing QueryParser ?
> 
> 
> 
> Thanks,
> 
> Sameer Maggon.
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 09:39:50 2006
Return-Path: <java-user-return-22751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62830 invoked from network); 16 Aug 2006 09:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 09:39:50 -0000
Received: (qmail 96242 invoked by uid 500); 16 Aug 2006 09:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96212 invoked by uid 500); 16 Aug 2006 09:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96201 invoked by uid 99); 16 Aug 2006 09:39:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 02:39:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 02:39:40 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k7G9dIHB010449
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 10:39:19 +0100
Received: from [192.168.0.22] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.153-alpha)
    via ESMTP; Wed, 16 Aug 2006 10:39:18 +0100 (BST)
Date: Wed, 16 Aug 2006 10:39:18 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <44E2E7C6.1000501@scalix.com>
In-Reply-To: <a218b3050608160146v2d79854bteb3957c7feb328ec@mail.gmail.com>
References: <a218b3050608151028g5db2a055s668aeba6c071adf7@mail.gmail.com>
References: <44E20C46.5050101@scalix.com>
References: <a218b3050608160146v2d79854bteb3957c7feb328ec@mail.gmail.com>
Subject: Re: Best Practice: emails and file-attachments
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.5 (X11/20060808)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

lude wrote:
> Hi John,
>
> thanks for the detailed answer.
>
> You wrote:
>> If you're indexing a
>> multipart/alternative bodypart then index all the MIME headers, but only
>> index the content of the *first* bodypart.
>
> Does this mean you index just the first file-attachment?
> What do you advice, if you have to index mulitpart bodys (== more then 
> one
> file-attachment)?
> One lucene-document for each part (==file)?
> How do you handle the queries?
MIME has no concept of "attachment", that's something that the user 
agent programs have a concept of -- you "attach" a file to a message.  
The file might be a picture, a word document, a compressed tar archive 
-- as far MIME is concerned they're all the same (well, apart from the 
content-* headers that describe what's "attached").   The MIME type for 
a message with "attachments" is "multipart".   There are several 
subtypes though.   If you're typing a plain text message (whose MIME 
type is text/plain, a message like this one) and you attach a jpeg image 
to it you'll be sending a message whose type is multipart/mixed;  the 
first part will have type text/plain and the second image/jpeg.   In 
Google Mail  under "more options" you can "show original" to see the 
complete MIME message and you'll see the different parts separated by a 
boundary.

OK.   Now I'm in a position to answer your question.   Often, when you 
send an HTML formatted message the content of the message is sent twice: 
once as text/plain and once as text/html (or multipart/related if it has 
pictures and stuff).   The two parts are alternatives, apart from the 
formatting (and pictures) there's no difference between the two parts, 
you can read either.  The best fidelity of the alternatives (and there 
can be more than two) is last, the poorest fidelity first, but the 
intent of the sender is that you can read any of them.   This is a 
multipart/alternative bodypart.   Because all parts of the 
multipart/alternative have the same text then you can index any of them, 
so index the first as that's going to be the easiest to process (it's 
almost always going to be text/plain).

I've skipped loads.   You need to read the RFCs.   Start with RFC2045 
(http://www.rfc.net/rfc2045.html) and keep going.  If you get stuck with 
the details of how messages are constructed, go back and read RFC2822 
first, or at least skim it (it's quite long).  Note that RFC2045 
references RFC822 in its abstract, where ever you see references to 
RFC821 and RFC822 you can read them as references to RFC2821 and RFC2822 
respectively -- the newer ones are a little more precise when they need 
to be and have rather more explanation of awkward cases that you need to 
know about.

Someone earlier (and I'm sorry, I deleleted the message before realising 
i should reply) said something about attached files really being in an 
attached .tar.gz file.   Well, yes and no.   An attached compressed tar 
archive is a bodypart like any other and will need to be indexed like 
any other.   That will involve breaking it open and indexing the files 
that it contains.   It's not really any different to indexing an open 
office document (which is actually a zip file).

You also mentioned indexing each bodypart ("attachment") separately.   
Why?   When I'm searching, am I going to look for the word "xyzzy" in 
the first bodypart?   What if it was a multipart/alternative and 
Thunderbird (in my case) suppressed the first bodypart and "xyzzy" is 
something that couldn't be rendered in the (first) text/plain 
alternative?   To my mind, there is no use case where it makes sense to 
search a particular bodypart.  There *might* be a case for searching the 
"prime" bodypart and "attachments" but when you read the MIME spec 
you'll realise that detecting what the user sees as an attachment is not 
easy: it gets even harder when you discover that different mail user 
agents have different and legal (and sometimes reasonable) ways of 
deciding whether to treat something as in-line or as an attachment.   To 
be honest, people don't remember whether something was an attachment.   
They think "I remember reading about xyzzy in a mail message" and go off 
looking for that.   They often can't tell and remember even less that 
the "xyzzy" was in something that you decided was an attachment.   And 
if your rules for deciding whether you have something that's intended to 
be viewed as an attachment or in-line are different to the rules that 
the  user's mail reader is using then you'll have Awkward Bugs to 
explain.   You'll read about "Content-Disposition" in the RFCs, but 
don't believe that it's a foolproof way of deciding whether or not 
something is an attachment, lack of a content-disposition header doesn't 
mean "inline" or "attachment" and Microsoft, bless, have weird rules all 
of their own for deciding whether to display something in-line or not.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 09:56:26 2006
Return-Path: <java-user-return-22752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66016 invoked from network); 16 Aug 2006 09:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 09:56:25 -0000
Received: (qmail 18921 invoked by uid 500); 16 Aug 2006 09:56:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18474 invoked by uid 500); 16 Aug 2006 09:56:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18463 invoked by uid 99); 16 Aug 2006 09:56:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 02:56:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [167.202.193.26] (HELO triton10-out.abnamro.nl) (167.202.193.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 02:56:18 -0700
Received: from aaamsr001.abnamro.com (aaamsr001 [10.124.6.13])
	by triton10-out.abnamro.nl (Postfix) with ESMTP id D2FB042E27
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 11:55:56 +0200 (CEST)
Subject: Memory allocation to Ram Directory
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.3 September 14, 2004
From: adrena.keating@nl.abnamro.com
Message-ID: <OFCC6C566D.E91F27B1-ONC12571CC.003491F8-C12571CC.00368E86@abnamro.com>
Date: Wed, 16 Aug 2006 11:55:08 +0200
X-MIMETrack: Serialize by Router on AAAMSR001/HUB/ABNAMRO/NL(Release 6.5.4FP1|June 19, 2005) at
 08/16/2006 11:55:56 AM
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,  my lucene index updates via the fileserver is eating up almost a huge
amount of heap memory and once the index is completed the memory is not
been returned.  Ram Drive is enabled.

Does anyone know if this might be a problem with the amount of memory been
allocated to the Ram Directory?
Can you tell me where to look to see what the current memory allocation is?
i.e what configuration file?

And is the Ram Directory been fed from the overall heap memory allocation
or has the Ram Directory got a seperate memory allocation?


Kind Regards
Adrena Keating



---------------------------------------------------------------------------
This message (including any attachments) is confidential and may be
privileged. If you have received it by mistake please notify the sender by
return e-mail and delete this message from your system. Any unauthorised
use or dissemination of this message in whole or in part is strictly
prohibited. Please note that e-mails are susceptible to change. ABN AMRO
Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
registered in the Commercial Register under number 33002587, including its
group companies, shall not be liable for the improper or incomplete
transmission of the information contained in this communication nor for any
delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
group companies) does not guarantee that the integrity of this
communication has been maintained nor that this communication is free of
viruses, interceptions or interference.
---------------------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 10:41:09 2006
Return-Path: <java-user-return-22753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78249 invoked from network); 16 Aug 2006 10:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 10:41:09 -0000
Received: (qmail 76841 invoked by uid 500); 16 Aug 2006 10:41:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76805 invoked by uid 500); 16 Aug 2006 10:41:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76787 invoked by uid 99); 16 Aug 2006 10:41:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 03:41:03 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_FONT_BIG,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of piroligor@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 03:41:02 -0700
Received: by ug-out-1314.google.com with SMTP id y2so112706uge
        for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 03:40:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=CVtgCpVvtbLhquNwXf67rOhyAfgZbWUnHahfI9a6zPkMxv7K6dJLP+VH3Xd65Y15/MGEnWYmWfKlUhsj0A5z7eFw1H8a5HwQ0pLFsUzMmi1UX8TYVPYdj8xLrIm2KpBXlW/RlTnyT68Ze/WciHnxlQ+6W1l/n7GkzMUphIe+ONg=
Received: by 10.67.21.11 with SMTP id y11mr250856ugi;
        Wed, 16 Aug 2006 03:40:40 -0700 (PDT)
Received: by 10.67.96.1 with HTTP; Wed, 16 Aug 2006 03:40:40 -0700 (PDT)
Message-ID: <3499b2e80608160340s181add7fqcde978a0547587e9@mail.gmail.com>
Date: Wed, 16 Aug 2006 12:40:40 +0200
From: IgO <piroligor@gmail.com>
To: java-user@lucene.apache.org
Subject: counting and updating the index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_180207_27803691.1155724840182"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_180207_27803691.1155724840182
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
here the scenario, i'm trying to index a database and i'd like to put in the
index "the counts of  all related table",

the first option is to count against the db and then store the data into the
documents but i think is not a real option because of huge ammount of
structured-data doesnt like to be counted...;-)

so the idea is to count against the index;

this leads me to to possibility:
- the index is filled up and then updated, but if i count after the index
has been created i must update(delete and create) the most part of the
documents; it's better(for the performances) to use a temp index?
- the index is counted while it is created but in this case i have to
respect an order of the table to index

Thanks

------=_Part_180207_27803691.1155724840182--

From java-user-return-22754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 12:23:50 2006
Return-Path: <java-user-return-22754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24489 invoked from network); 16 Aug 2006 12:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 12:23:50 -0000
Received: (qmail 35314 invoked by uid 500); 16 Aug 2006 12:23:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35282 invoked by uid 500); 16 Aug 2006 12:23:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35271 invoked by uid 99); 16 Aug 2006 12:23:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 05:23:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 05:23:42 -0700
Received: by nf-out-0910.google.com with SMTP id x4so645900nfb
        for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 05:23:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TiRjEtS189Z1YLDKSpBcxx9MBTJl4RyxXpta4OXXHAP7Wzgxd57LLr/1we1Ie+1vfe3RHwh5sXs/Jbrrqd5PJ2ZcBLg+TZwxvUYpcbTNBLDKfPUqNTGT9RAKk2qyffqOdE5RTT3sm92d0PCy/mliB2hQh2Sn+5q1P6zZSlUE05Q=
Received: by 10.48.210.20 with SMTP id i20mr617739nfg;
        Wed, 16 Aug 2006 05:23:21 -0700 (PDT)
Received: by 10.78.125.4 with HTTP; Wed, 16 Aug 2006 05:23:21 -0700 (PDT)
Message-ID: <a218b3050608160523s5cbc37e0pad8940eab5224504@mail.gmail.com>
Date: Wed, 16 Aug 2006 14:23:21 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Best Practice: emails and file-attachments
In-Reply-To: <44E2E7C6.1000501@scalix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_80989_7052095.1155731001645"
References: <a218b3050608160146v2d79854bteb3957c7feb328ec@mail.gmail.com>
	 <44E2E7C6.1000501@scalix.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_80989_7052095.1155731001645
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Johan,

thanks again for the many words and explanations!

> You also mentioned indexing each bodypart ("attachment") separately.
> Why? ....
> To my mind, there is no use case where it makes sense to search a
particular bodypart

I will give you the use case:

1.)  User searches for "abcd"
2.) Lucene matches the searchterm (at least) two times:
    - One email has the term in the plain message text   (mail-1)
    - One email contains five "file-attachment". One of this files matches
the search term  (mail-2)
3.) The result list would show this:
    1.   mail-1  'subject'
         'Abstract of the message-text'
    2.   mail-2 'subject'
         Attachment with name 'filename.doc' contains 'Abstract of
file-content'

Another Use-Case would be an extended search, which allows to select if
"attached files"
should be searched (yes or no).

Greetings
lude



>
>
>

------=_Part_80989_7052095.1155731001645--

From java-user-return-22755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 12:27:29 2006
Return-Path: <java-user-return-22755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25913 invoked from network); 16 Aug 2006 12:27:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 12:27:29 -0000
Received: (qmail 44175 invoked by uid 500); 16 Aug 2006 12:27:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44154 invoked by uid 500); 16 Aug 2006 12:27:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44142 invoked by uid 99); 16 Aug 2006 12:27:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 05:27:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 05:27:22 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id k7GCQx8h017545
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 15:27:00 +0300
Message-ID: <44E30F13.8040409@sirma.bg>
Date: Wed, 16 Aug 2006 15:26:59 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Split an existing index into smaller segments without a re-index?
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I searched the mail list archives for an answer to that question;
The closest (and perhaps the only) thread in this regard that I found is:

http://www.gossamer-threads.com/lists/lucene/java-user/9928


So the answer was "No", but this is way back in the mid 2004 (2 years ago).
Is there a solution to that problem now?

Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 13:01:37 2006
Return-Path: <java-user-return-22756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36499 invoked from network); 16 Aug 2006 13:01:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 13:01:36 -0000
Received: (qmail 2085 invoked by uid 500); 16 Aug 2006 13:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2055 invoked by uid 500); 16 Aug 2006 13:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2036 invoked by uid 99); 16 Aug 2006 13:01:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 06:01:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 06:01:30 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k7GD13T3018926
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 14:01:04 +0100
Received: from [10.11.108.20] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.153-alpha)
    via ESMTP; Wed, 16 Aug 2006 14:01:02 +0100 (BST)
Date: Wed, 16 Aug 2006 14:00:51 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <44E31703.9050705@scalix.com>
In-Reply-To: <a218b3050608160523s5cbc37e0pad8940eab5224504@mail.gmail.com>
References: <a218b3050608160146v2d79854bteb3957c7feb328ec@mail.gmail.com>
References: <44E2E7C6.1000501@scalix.com>
References: <a218b3050608160523s5cbc37e0pad8940eab5224504@mail.gmail.com>
Subject: Re: Best Practice: emails and file-attachments
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.5 (X11/20060808)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

lude wrote:
>> You also mentioned indexing each bodypart ("attachment") separately.
>> Why? ....
>> To my mind, there is no use case where it makes sense to search a 
>> particular bodypart
>
> I will give you the use case:
>
> [snip]
> 3.) The result list would show this:
> 1. mail-1 'subject'
> 'Abstract of the message-text'
> 2. mail-2 'subject'
> Attachment with name 'filename.doc' contains 'Abstract of
> file-content'
>
> Another Use-Case would be an extended search, which allows to select if
> "attached files"
> should be searched (yes or no).

That's a good use case. File it as a bug and close it WONTFIX :-) The 
problem that you have is trying to determine whether something is going 
to be inline or an attachment. I'll give you a real-life example that 
caught out some old code the other day. We had a message with this 
structure:

multipart/alternative
text/plain
multipart/related
text/html
image/gif
image/gif
application/msword

Is there an attached file in there? Think before you read on.






The answer should be "no". Are you surprised that at least one client 
decided that there was? What we have is three representations of the 
same document: plain text, html (with two pictures) and MS Word. The 
original, the Word document obviously has the best fidelity and comes 
last. The one client I'm thinking of (and I've lost track of which one 
it was) correctly suppressed the display of the text/plain alternative, 
displayed the HTML with its pictures in-line and then mistakenly 
displayed the Word document as an attachment.

This is a fictional example, but it could exist:

multipart/related
text/html
image/gif
application/msword

The gif image (and let's assume it can be indexed sensibly) is 
"obviously" a picture in the HTML bodypart. What's the word document? 
It's referenced from the HTML as a link just like the picture is. Is it 
an attachment? What's the difference between the word document 
referenced as a link within the multipart/related (by content-id) and a 
link to an external document (by http URL)? From a user perspective both 
are the same, but is one an attachment and the other not? I'm being 
unfair, this is not only an unrealistic problem but there isn't a right 
or a wrong answer. The word document isn't an attachment because it 
doesn't (or shouldn't) appear in the list of attachments and it's not 
in-line because you have to click on something to see it.

So yes, I agree, your use-cases are good; I'm just not sure how you're 
going to identify an attachment :-)

I do like the idea, though, of when you do a search for "xyzzy" that you 
get the abstract of the bodypart that contains "xyzzy" rather than the 
abstract (or subject) of the entire message and I'm going to think about 
that one some more. The problem that immediately springs to mind though 
is that a message can have an arbitrary number of bodyparts so if I have 
BODY-1, BODY-2, ..., BODY-N (where N is unknown) how hard is it for me 
to construct the search? I think I probably should construct the search 
that way because the score depends upon the size of the document and it 
seems to make sense that the document is the bodypart, not the entire 
message, but it seems more complex than is useful for mail messages.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 13:44:50 2006
Return-Path: <java-user-return-22757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55722 invoked from network); 16 Aug 2006 13:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 13:44:50 -0000
Received: (qmail 96189 invoked by uid 500); 16 Aug 2006 13:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96153 invoked by uid 500); 16 Aug 2006 13:44:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96142 invoked by uid 99); 16 Aug 2006 13:44:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 06:44:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 06:44:42 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k7GDiKlp020315
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 14:44:20 +0100
Received: from [10.11.108.20] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.153-alpha)
    via ESMTP; Wed, 16 Aug 2006 14:44:19 +0100 (BST)
Date: Wed, 16 Aug 2006 14:44:20 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <44E32134.5010904@scalix.com>
In-Reply-To: <44E31703.9050705@scalix.com>
References: <a218b3050608160146v2d79854bteb3957c7feb328ec@mail.gmail.com>
References: <44E31703.9050705@scalix.com>
Subject: Re: Best Practice: emails and file-attachments
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.5 (X11/20060808)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Oh rats. Thunderbird ate the indenting. The two examples should be:

multipart/alternative
	text/plain
	multipart/related
		text/html
		image/gif
		image/gif
	application/msword

and

multipart/related
	text/html
	image/gif
	application/msword

the indenting indicates nesting. A message isn't just a bodypart 
followed by attachments, it has structure like a file system. Something 
which escapes most mail readers. Sigh.


John Haxby wrote:
> lude wrote:
>>> You also mentioned indexing each bodypart ("attachment") separately.
>>> Why? ....
>>> To my mind, there is no use case where it makes sense to search a 
>>> particular bodypart
>>
>> I will give you the use case:
>>
>> [snip]
>> 3.) The result list would show this:
>> 1. mail-1 'subject'
>> 'Abstract of the message-text'
>> 2. mail-2 'subject'
>> Attachment with name 'filename.doc' contains 'Abstract of
>> file-content'
>>
>> Another Use-Case would be an extended search, which allows to select if
>> "attached files"
>> should be searched (yes or no).
>
> That's a good use case. File it as a bug and close it WONTFIX :-) The 
> problem that you have is trying to determine whether something is 
> going to be inline or an attachment. I'll give you a real-life example 
> that caught out some old code the other day. We had a message with 
> this structure:
>
> multipart/alternative
> text/plain
> multipart/related
> text/html
> image/gif
> image/gif
> application/msword
>
> Is there an attached file in there? Think before you read on.
>
>
>
>
>
>
> The answer should be "no". Are you surprised that at least one client 
> decided that there was? What we have is three representations of the 
> same document: plain text, html (with two pictures) and MS Word. The 
> original, the Word document obviously has the best fidelity and comes 
> last. The one client I'm thinking of (and I've lost track of which one 
> it was) correctly suppressed the display of the text/plain 
> alternative, displayed the HTML with its pictures in-line and then 
> mistakenly displayed the Word document as an attachment.
>
> This is a fictional example, but it could exist:
>
> multipart/related
> text/html
> image/gif
> application/msword
>
> The gif image (and let's assume it can be indexed sensibly) is 
> "obviously" a picture in the HTML bodypart. What's the word document? 
> It's referenced from the HTML as a link just like the picture is. Is 
> it an attachment? What's the difference between the word document 
> referenced as a link within the multipart/related (by content-id) and 
> a link to an external document (by http URL)? From a user perspective 
> both are the same, but is one an attachment and the other not? I'm 
> being unfair, this is not only an unrealistic problem but there isn't 
> a right or a wrong answer. The word document isn't an attachment 
> because it doesn't (or shouldn't) appear in the list of attachments 
> and it's not in-line because you have to click on something to see it.
>
> So yes, I agree, your use-cases are good; I'm just not sure how you're 
> going to identify an attachment :-)
>
> I do like the idea, though, of when you do a search for "xyzzy" that 
> you get the abstract of the bodypart that contains "xyzzy" rather than 
> the abstract (or subject) of the entire message and I'm going to think 
> about that one some more. The problem that immediately springs to mind 
> though is that a message can have an arbitrary number of bodyparts so 
> if I have BODY-1, BODY-2, ..., BODY-N (where N is unknown) how hard is 
> it for me to construct the search? I think I probably should construct 
> the search that way because the score depends upon the size of the 
> document and it seems to make sense that the document is the bodypart, 
> not the entire message, but it seems more complex than is useful for 
> mail messages.
>
> jch
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 14:36:51 2006
Return-Path: <java-user-return-22758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82800 invoked from network); 16 Aug 2006 14:36:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 14:36:51 -0000
Received: (qmail 56736 invoked by uid 500); 16 Aug 2006 14:36:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56710 invoked by uid 500); 16 Aug 2006 14:36:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56699 invoked by uid 99); 16 Aug 2006 14:36:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 07:36:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.90.206.104] (HELO office.redwerk.com) (85.90.206.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 07:36:38 -0700
Received: from bofh by office.redwerk.com with local (Exim 4.63 (FreeBSD))
	(envelope-from <bofh@redwerk.com>)
	id 1GDMVJ-00066M-A7
	for java-user@lucene.apache.org; Wed, 16 Aug 2006 17:36:21 +0300
Date: Wed, 16 Aug 2006 17:36:21 +0300
From: Eugeny N Dzhurinsky <bofh@redwerk.com>
To: java-user@lucene.apache.org
Subject: Re: search document for keywords and keyphrases
Message-ID: <20060816143621.GA23420@office.redwerk.com>
References: <20060811073512.GC1584@office.redwerk.com> <d8050f240608110311r5ab06779vd9c490b1dc3bd50d@mail.gmail.com> <20060811110910.GA3505@office.redwerk.com> <f18c9dde0608110422m3c173a2cgc0d1416a3b49be02@mail.gmail.com> <20060811113919.GA3804@office.redwerk.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=koi8-r
Content-Disposition: inline
In-Reply-To: <20060811113919.GA3804@office.redwerk.com>
User-Agent: Mutt/1.5.12-2006-07-14
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, Aug 11, 2006 at 02:39:19PM +0300, Eugeny N Dzhurinsky wrote:
> On Fri, Aug 11, 2006 at 01:22:26PM +0200, Simon Willnauer wrote:
> > Sure you can do this.
> > You index your document with the keywords assigned to the document and
> > search with and Boolean Query to get all document having the keyword
> > 1,2,...n-1,n. Just be aware that there are limitations to boolean
> > queries in lucene. see setMaxClauseCount(). which can be very memory
> > consuming. 
> 
> Well, I don't understand whet do you mean "index your document with the
> keywords assigned to the document". Thre is no keywords assigned to a
> document. I was thinking in his way - may, is it possible to index the
> database of keywords, and use entire document as search phrase?
> 
> Sould that find single words as well a phrases?
> 
> For example, if document contains a phrase
> 
> some things happens there
> 
> and there are entries in keywords database
> 
> some things
> happens here
> some things happens here
> 
> I will need to get all of these entries.
> 
> > But I guess you will search for a small amounts of
> > keywords, do you?
> 
> This database could be VERY large, several millions of records.

So could somebody please advice - will Lucene suit my requirements or I have
to develop a solution by myself/search for something else?

Thanks in advance.

-- 
Eugene N Dzhurinsky

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 14:42:40 2006
Return-Path: <java-user-return-22759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84839 invoked from network); 16 Aug 2006 14:42:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 14:42:40 -0000
Received: (qmail 71103 invoked by uid 500); 16 Aug 2006 14:42:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71072 invoked by uid 500); 16 Aug 2006 14:42:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71061 invoked by uid 99); 16 Aug 2006 14:42:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 07:42:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 07:42:32 -0700
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 3F3C51880A1F
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 07:42:11 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <1155712642.3967.8.camel@localhost.localdomain>
References: <009c01c6bd50$6260c420$0200a8c0@hercules> <359a92830608111306p24f6edaar8d4fb66d2764188@mail.gmail.com> <44DD05D5.8030306@gmail.com>  <1155341147.44dd1b5bf1757@webmail.uu.se> <1155712642.3967.8.camel@localhost.localdomain>
Content-Type: multipart/alternative; boundary=Apple-Mail-29--807044729
Message-Id: <fbe88748eceafcaed3ec43fb5ea4c6a2@as-st.com>
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Highlighter
Date: Wed, 16 Aug 2006 11:14:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-29--807044729
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed

markrmiller@gmail.com told me that the highlighter ALWAYS does this=20
under certain conditions.  In my case, it is when the string ends with=20=

<BR>.  He knew why but I did not.  I just fixed it in my code by=20
putting things back.

On Aug 16, 2006, at 3:17 AM, Ramesh Salla wrote:

>  which version of Lucene and which version of Highlighter, do you use.
>  I dont see any such issues?
>  I think,=A0 I can resolve the issue,=A0 if you can pass on a few info =
on=20
> you are trying to get the data and highlight things.
>
> <image.tiff>
>
>
>  On Sat, 2006-08-12 at 00:05 +0000, Ronnie Kolehmainen wrote:
>> There is an issue in JIRA, see=20
>> http://issues.apache.org/jira/browse/LUCENE-645
>>
>> So I guess you're not the only one.
>>
>> /Ronnie
>>
>> Citerar Mark Miller <markrmiller@gmail.com>:
>>
>> > Am I the only one that gets back a string missing the final=20
>> character
>> > when using the highlighter and the null fragmenter? I always have=20=

>> to add
>> > the last character of what I have asked to be highlighted to what=20=

>> the
>> > highlighter returns when trying to hit highlight an entire
>> > document...anyone else every run into this?
>> >
>> > cheers ( don't I wish i was British),
>> >
>> > - mark
>> >
>> >=20
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>

--Apple-Mail-29--807044729--


From java-user-return-22760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 15:34:35 2006
Return-Path: <java-user-return-22760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10917 invoked from network); 16 Aug 2006 15:34:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 15:34:35 -0000
Received: (qmail 1389 invoked by uid 500); 16 Aug 2006 15:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1311 invoked by uid 500); 16 Aug 2006 15:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1284 invoked by uid 99); 16 Aug 2006 15:34:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 08:34:15 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 08:34:13 -0700
Received: by wx-out-0506.google.com with SMTP id s15so140693wxc
        for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 08:33:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=HlhiidzqAWrpCej3KHZ/lYOwOu4jA83uiSb1D7GQqeePIzBlvV8rEhvmGgUeOWSz2Sz76sRtHBTaz3i+Ntc2oB8ShZPyGU4sqVPrsCogc60ABzUMigpYchL5S+IslL3BlMcD5An3Bv9hG2iN0mZ6fgL9ANtCmzuR95gf4HKaHYE=
Received: by 10.70.78.4 with SMTP id a4mr966978wxb;
        Wed, 16 Aug 2006 08:33:52 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 38sm1191851wrl.2006.08.16.08.33.50;
        Wed, 16 Aug 2006 08:33:52 -0700 (PDT)
Message-ID: <44E33AE2.6020101@gmail.com>
Date: Wed, 16 Aug 2006 11:33:54 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter
References: <009c01c6bd50$6260c420$0200a8c0@hercules> <359a92830608111306p24f6edaar8d4fb66d2764188@mail.gmail.com> <44DD05D5.8030306@gmail.com>  <1155341147.44dd1b5bf1757@webmail.uu.se> <1155712642.3967.8.camel@localhost.localdomain> <fbe88748eceafcaed3ec43fb5ea4c6a2@as-st.com>
In-Reply-To: <fbe88748eceafcaed3ec43fb5ea4c6a2@as-st.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The reason has already been posted in response to my initial inquiry. 
This problem bugged me last month. I did not know the particulars but I 
assumed it was a bug.

I inquired on the mailing list and someone responded with the following 
link:

Highligter fails to include non-token at end of string to be highlighted
http://issues.apache.org/jira/browse/LUCENE-645

That seemed to resolve the issue for me. It's a bug and it has not been 
fixed and may be slightly complicated. Thanks to that guy who gave the 
link, I don't recall who it was.

Case closed on this one from my end.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 15:46:25 2006
Return-Path: <java-user-return-22761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15086 invoked from network); 16 Aug 2006 15:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 15:46:25 -0000
Received: (qmail 31113 invoked by uid 500); 16 Aug 2006 15:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31082 invoked by uid 500); 16 Aug 2006 15:46:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31071 invoked by uid 99); 16 Aug 2006 15:46:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 08:46:18 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 08:46:16 -0700
Received: by wx-out-0506.google.com with SMTP id s15so143672wxc
        for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 08:45:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qxagJMuAX2qp6BHcytjgodg7INhjEshUSQMCYNeZu8/EkRroRMq7kyOORrtkOnod78Ef/yO6oyNRiHT5eQ4pSajEEriTbDtTrLNCKMNIL+3aa3xFqMXakMhVWsjg8LWihDBGQTcyyPvf4OhJSJ1Vr4eDW0M3etd659uc14L5cxU=
Received: by 10.70.90.18 with SMTP id n18mr1052825wxb;
        Wed, 16 Aug 2006 08:45:56 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 5sm715109wrh.2006.08.16.08.45.54;
        Wed, 16 Aug 2006 08:45:55 -0700 (PDT)
Message-ID: <44E33DB7.4020200@gmail.com>
Date: Wed, 16 Aug 2006 11:45:59 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Quotes dependent StopWords removal
References: <20945207.1155680282851.JavaMail.oracle@squidward.siderean.com> <44E2E48D.8040700@web.de>
In-Reply-To: <44E2E48D.8040700@web.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This keeps popping back into my head. A little more info for you. Bear 
in mind I have not dealt with the QueryParser before.

Use the approach I gave last time. Pull out the QueryParser and change 
either QueryParser.jj or QueryParser.java...you may be able to just 
change QueryParser.java and avoid having to recompile the JavaCC grammer 
file. Now at line 992 of QueryParser.java (different line in 
QueryParser.jj) you will see the line: 

q = getFieldQuery(field, term.image.substring(1, term.image.length()-1), s);

This is still using the same strategy I mentioned last time. The query 
parser will analyze the text passed into the getFieldQuery function. 
This particular call of getFieldQuery is made when the query parser sees 
a quoted set of tokens (remember...I'm half guessing on all of this...I 
don't know). The analyzer used by getFieldQuery is stored in the 
QueryParser member variable analyzer. So a possible solution is to save 
the member variable analyzer to a local variable and replace it with a 
non stop word using analyzer right before the getFieldQuery call. 
Restore the original analyzer to the analyzer member variable after the 
call.

This may work for you.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 15:55:59 2006
Return-Path: <java-user-return-22762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18189 invoked from network); 16 Aug 2006 15:55:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 15:55:58 -0000
Received: (qmail 52909 invoked by uid 500); 16 Aug 2006 15:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52886 invoked by uid 500); 16 Aug 2006 15:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52875 invoked by uid 99); 16 Aug 2006 15:55:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 08:55:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 08:55:50 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 16 Aug 2006 11:55:29 -0400
X-OriginatingIP: 10.6.134.35
Content-Type: multipart/mixed; boundary="6++Kd.46oIETRFt.BSytI.42brR6o"
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 16 Aug 2006 11:55:00 -0400
X-MIMEOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Subject: is there such an analyzer?
Date: Wed, 16 Aug 2006 11:56:11 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E8114509D8F@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: is there such an analyzer?
Thread-index: AcbBTH7HrEbpfHk3SSC0nXWlT9hFWg==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 16 Aug 2006 15:55:00.0719 (UTC) FILETIME=[549257F0:01C6C14C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--6++Kd.46oIETRFt.BSytI.42brR6o
MIME-Version: 1.0
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6C14C.64ED4776"

------_=_NextPart_001_01C6C14C.64ED4776
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I'm looking for a cross between a WhitespaceAnalyzer and
StandardAnalyzer.  If I pass in:
=20
I-Pity-da-fool who has a 1" ladder said MR.T
=20
I want it to index these:
=20
i-pity-da-fool
pity
fool
1"
1
ladder
mr.t

------_=_NextPart_001_01C6C14C.64ED4776
Content-Type: text/html;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2900.2963" name=3DGENERATOR></HEAD>
<BODY>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D125185115-16082006>I'm =
looking for a=20
cross between a&nbsp;WhitespaceAnalyzer and StandardAnalyzer.&nbsp; If I =
pass=20
in:</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN =
class=3D125185115-16082006>I-Pity-da-fool who=20
has a 1" ladder&nbsp;said MR.T</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D125185115-16082006>I want =
it to index=20
these:</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006>i-pity-da-fool</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006>pity</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006>fool</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006>1"</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006>1</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006>ladder</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D125185115-16082006>mr.t</SPAN></FONT></DIV></BODY></HTML>

------_=_NextPart_001_01C6C14C.64ED4776--
--6++Kd.46oIETRFt.BSytI.42brR6o
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline



United Rentals
Consider it done.=E2=84=A2
800-UR-RENTS
unitedrentals.com


--6++Kd.46oIETRFt.BSytI.42brR6o
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--6++Kd.46oIETRFt.BSytI.42brR6o--

From java-user-return-22763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 16:34:35 2006
Return-Path: <java-user-return-22763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41788 invoked from network); 16 Aug 2006 16:34:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 16:34:35 -0000
Received: (qmail 55215 invoked by uid 500); 16 Aug 2006 16:34:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55146 invoked by uid 500); 16 Aug 2006 16:34:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55119 invoked by uid 99); 16 Aug 2006 16:34:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 09:34:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [167.202.193.25] (HELO triton09-out.inet.nl.abnamro.com) (167.202.193.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 09:34:21 -0700
Received: from aaamsr001.abnamro.com (aaamsr001 [10.124.6.13])
	by triton09-out.inet.nl.abnamro.com (Postfix) with ESMTP id 2AC79FA83
	for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 18:33:59 +0200 (CEST)
In-Reply-To: <1155313436.44dcaf1c23624@webmail.uu.se>
Subject: Re: Lucene/Tomcat Memory Leak Issue
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.3 September 14, 2004
From: adrena.keating@nl.abnamro.com
Message-ID: <OF611B86BD.807F65D9-ONC12571CC.005A4D26-C12571CC.005B0005@abnamro.com>
Date: Wed, 16 Aug 2006 18:33:11 +0200
X-MIMETrack: Serialize by Router on AAAMSR001/HUB/ABNAMRO/NL(Release 6.5.4FP1|June 19, 2005) at
 08/16/2006 06:33:59 PM
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We are indexing the file server via Lucene.  We have a 15 MB index file and
have set up a once a day re-index and then switch to a continuous index
update.
So everytime a content item is published it is immediately indexed and
deployed.  Problem persists with both scenario's.

We are using jconsole as a profiler but this does not give us information
if tomcat objects are released from their references and so are not garbage
collected.
Certainly its looks like the long-term heap memory is the issue and is not
being garbage collected effectively.

We dont even know what the likely culprit is.  i.e memory leak, heap/pergen
memory settings, lucene bug, bug in the way the code is interacting with
lucene.

We have been looking at this problem for months now..

We dont index xml files with xalan.

Kind Regards
Adrena Keating




                                                                                                                                         
                      Ronnie Kolehmainen                                                                                                 
                      <ronnie.kolehmaine         To:      java-user@lucene.apache.org                                                    
                      n@ub.uu.se>                cc:                                                                                     
                                                 Subject: Re: Lucene/Tomcat Memory Leak Issue                                            
                      08/11/2006 06:23                                                                                                   
                      PM                                                                                                                 
                      Please respond to                                                                                                  
                      java-user                                                                                                          
                                                                                                                                         




How do you index your documents? Are you releasing old resources? Can you
use a
profiler to see referenced objects?

I've experienced the same problem when indexing xml files which were parsed
with
xalan, and the memory leak in that case was in xalan. Switching to saxon
solved
the problems for us.

/Ronnie

Citerar adrena.keating@nl.abnamro.com:

>
> Hello, can anyone help?
>
>
> We're experiencing the following issue an Widows Intranet website:
>
>
> Following a Tomcat restart, our application has Lucene creating a single
> new index in a RAMDirectory, followed by continuous creation of
additional
> index entries as new content is published.
>
>
> During the initial index creation process, Heap Memory utilization jumps
to
> over 300 MB and never drops back down, even though the new index itself
is
> ~15 MB in size. Then, as additional index entries are added, the Heap
> Memory utilization continues to increase and garbage collection reduces
in
> size, until we max out the available Heap Memory and Tomcat crashes.
>
>
> Relevant configuration items:
>         Windows 2000 5.0
>         4 Processors, 2GB RAM
>         Tomcat 5.0.27
>         JDK 1.5.0_06
>         Lucene 1.9.1
>         VM arguments:
>                 -Djava.io.tmpdir=D:\Appldata\Lucene\lockDir
>                 -Dorg.apache.lucene.commitLockTimeout=60000
>                 -Dorg.apache.lucene.writeLockTimeout=60000
>                 -XX:PermSize=256m
>                 -XX:MaxPermSize=512m
>                 -Xrs
>                 -Xms256m
>                 -Xmx1024m
>                 -Xss512k
>         lucene.searcher.keep.open=true
>         lucene.searcher.retries=6
>
>
> Has anyone experienced similar conditions? Any suggestions?
>
> Kind Regards
> Adrena Keating
>
>
>
>
---------------------------------------------------------------------------
> This message (including any attachments) is confidential and may be
> privileged. If you have received it by mistake please notify the sender
by
> return e-mail and delete this message from your system. Any unauthorised
> use or dissemination of this message in whole or in part is strictly
> prohibited. Please note that e-mails are susceptible to change. ABN AMRO
> Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
> registered in the Commercial Register under number 33002587, including
its
> group companies, shall not be liable for the improper or incomplete
> transmission of the information contained in this communication nor for
any
> delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
> group companies) does not guarantee that the integrity of this
> communication has been maintained nor that this communication is free of
> viruses, interceptions or interference.
>
---------------------------------------------------------------------------
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------------
This message (including any attachments) is confidential and may be
privileged. If you have received it by mistake please notify the sender by
return e-mail and delete this message from your system. Any unauthorised
use or dissemination of this message in whole or in part is strictly
prohibited. Please note that e-mails are susceptible to change. ABN AMRO
Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
registered in the Commercial Register under number 33002587, including its
group companies, shall not be liable for the improper or incomplete
transmission of the information contained in this communication nor for any
delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
group companies) does not guarantee that the integrity of this
communication has been maintained nor that this communication is free of
viruses, interceptions or interference.
---------------------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 16 20:04:04 2006
Return-Path: <java-user-return-22764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30939 invoked from network); 16 Aug 2006 20:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2006 20:04:04 -0000
Received: (qmail 97864 invoked by uid 500); 16 Aug 2006 20:03:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97715 invoked by uid 500); 16 Aug 2006 20:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97704 invoked by uid 99); 16 Aug 2006 20:03:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 13:03:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 13:03:56 -0700
Received: by nz-out-0102.google.com with SMTP id z6so170497nzd
        for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 13:03:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FYjUgbVYaI793ESrW/ISqehRWRy4j6ykHre0E2Mv6l9lMYZt2CTeEr7C94zKkmqU1Cazqu7eUFZjSxtgGI6oMd7czduvBqukjYhVw2w1/C45YO6yhoR9r14w6nlCRejlQ/Trvv0bTBEV3sXAsqXYCeHYlZYLoueWgpSN5hIXaYw=
Received: by 10.35.135.12 with SMTP id m12mr2077672pyn;
        Wed, 16 Aug 2006 13:03:34 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 16 Aug 2006 13:03:34 -0700 (PDT)
Message-ID: <359a92830608161303p3c61f3d3jdc5753eeea33fcac@mail.gmail.com>
Date: Wed, 16 Aug 2006 16:03:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: is there such an analyzer?
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E8114509D8F@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27880_26654118.1155758614878"
References: <0D6A3C278F4DC346B98DF4D2F1397E8114509D8F@UREXCHVS3.ur.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27880_26654118.1155758614878
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I suspect you'll have to roll your own. I'd use the SynonymAnalyzer from
Lucene in Action as a model, starting around page 129. I really doubt that
there's much you can expect Lucene to do for you for this specialized kind
of tokenizing.....

Erick


On 8/16/06, Van Nguyen <vnguyen@ur.com> wrote:
>
>  I'm looking for a cross between a WhitespaceAnalyzer and
> StandardAnalyzer.  If I pass in:
>
> I-Pity-da-fool who has a 1" ladder said MR.T
>
> I want it to index these:
>
> i-pity-da-fool
> pity
> fool
> 1"
> 1
> ladder
> mr.t
>
>
>
> United Rentals
> Consider it done.=99
> 800-UR-RENTS
> unitedrentals.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27880_26654118.1155758614878--

From java-user-return-22765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 17 03:02:17 2006
Return-Path: <java-user-return-22765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50075 invoked from network); 17 Aug 2006 03:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 03:02:16 -0000
Received: (qmail 74475 invoked by uid 500); 17 Aug 2006 03:02:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73496 invoked by uid 500); 17 Aug 2006 03:02:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73485 invoked by uid 99); 17 Aug 2006 03:02:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 20:02:11 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Aug 2006 20:02:10 -0700
Received: by py-out-1112.google.com with SMTP id s49so480477pyc
        for <java-user@lucene.apache.org>; Wed, 16 Aug 2006 20:01:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=h+RRwh17IV/6pqMRw4CgO7KsOEkUGHFxmBTC9AjnJ9jmgD/rIGaeSCJ0RCFe2wm7bUcLDyJlQkqhCwK+bI3Sp7HJhqa94XY2sra/YQRcx7QV50H/6VguhQgSTPHxQaTeAVicPTtJ4hQViGKeXA+SsGkFjFI5MrR9vdFnPhb1hJE=
Received: by 10.35.106.15 with SMTP id i15mr2669676pym;
        Wed, 16 Aug 2006 20:01:49 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Wed, 16 Aug 2006 20:01:49 -0700 (PDT)
Message-ID: <c68e39170608162001q5c91310aq9d5941b6bd129899@mail.gmail.com>
Date: Wed, 16 Aug 2006 23:01:49 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Split an existing index into smaller segments without a re-index?
In-Reply-To: <44E30F13.8040409@sirma.bg>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44E30F13.8040409@sirma.bg>
X-Google-Sender-Auth: dce7738d5e2fd385
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/16/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
> I searched the mail list archives for an answer to that question;
> The closest (and perhaps the only) thread in this regard that I found is:
>
> http://www.gossamer-threads.com/lists/lucene/java-user/9928
>
>
> So the answer was "No", but this is way back in the mid 2004 (2 years ago).
> Is there a solution to that problem now?

Nope.
If you have the source material, it would be easiest to re-index into
separate indicies.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 17 10:00:31 2006
Return-Path: <java-user-return-22766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49266 invoked from network); 17 Aug 2006 10:00:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 10:00:31 -0000
Received: (qmail 62219 invoked by uid 500); 17 Aug 2006 10:00:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61766 invoked by uid 500); 17 Aug 2006 10:00:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61752 invoked by uid 99); 17 Aug 2006 10:00:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 03:00:23 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.160.149.192] (HELO kitsite.com) (66.160.149.192)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Aug 2006 03:00:22 -0700
Received: from 213.202.160.11 ([213.202.160.11]) by kitsite.com for <java-user@lucene.apache.org>; Thu, 17 Aug 2006 02:59:59 -0700
Message-ID: <44E43E29.8070309@kitsite.com>
Date: Thu, 17 Aug 2006 11:00:09 +0100
From: kieran <kieran@kitsite.com>
Reply-To:  kieran@kitsite.com
Organization: Kitsite
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene/Tomcat Memory Leak Issue
References: <OF611B86BD.807F65D9-ONC12571CC.005A4D26-C12571CC.005B0005@abnamro.com>
In-Reply-To: <OF611B86BD.807F65D9-ONC12571CC.005A4D26-C12571CC.005B0005@abnamro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Adrena,

You might want to consult the following thread:

  http://issues.apache.org/jira/browse/LUCENE-436

The issue /might/ be to do with your JVM's implementation of ThreadLocal.
The above discussion contains a fix/workaround for this issue.

Kieran



adrena.keating@nl.abnamro.com wrote:
> We are indexing the file server via Lucene.  We have a 15 MB index file and
> have set up a once a day re-index and then switch to a continuous index
> update.
> So everytime a content item is published it is immediately indexed and
> deployed.  Problem persists with both scenario's.
>
> We are using jconsole as a profiler but this does not give us information
> if tomcat objects are released from their references and so are not garbage
> collected.
> Certainly its looks like the long-term heap memory is the issue and is not
> being garbage collected effectively.
>
> We dont even know what the likely culprit is.  i.e memory leak, heap/pergen
> memory settings, lucene bug, bug in the way the code is interacting with
> lucene.
>
> We have been looking at this problem for months now..
>
> We dont index xml files with xalan.
>
> Kind Regards
> Adrena Keating
>
>
>
>
>                                                                                                                                          
>                       Ronnie Kolehmainen                                                                                                 
>                       <ronnie.kolehmaine         To:      java-user@lucene.apache.org                                                    
>                       n@ub.uu.se>                cc:                                                                                     
>                                                  Subject: Re: Lucene/Tomcat Memory Leak Issue                                            
>                       08/11/2006 06:23                                                                                                   
>                       PM                                                                                                                 
>                       Please respond to                                                                                                  
>                       java-user                                                                                                          
>                                                                                                                                          
>
>
>
>
> How do you index your documents? Are you releasing old resources? Can you
> use a
> profiler to see referenced objects?
>
> I've experienced the same problem when indexing xml files which were parsed
> with
> xalan, and the memory leak in that case was in xalan. Switching to saxon
> solved
> the problems for us.
>
> /Ronnie
>
> Citerar adrena.keating@nl.abnamro.com:
>
>   
>> Hello, can anyone help?
>>
>>
>> We're experiencing the following issue an Widows Intranet website:
>>
>>
>> Following a Tomcat restart, our application has Lucene creating a single
>> new index in a RAMDirectory, followed by continuous creation of
>>     
> additional
>   
>> index entries as new content is published.
>>
>>
>> During the initial index creation process, Heap Memory utilization jumps
>>     
> to
>   
>> over 300 MB and never drops back down, even though the new index itself
>>     
> is
>   
>> ~15 MB in size. Then, as additional index entries are added, the Heap
>> Memory utilization continues to increase and garbage collection reduces
>>     
> in
>   
>> size, until we max out the available Heap Memory and Tomcat crashes.
>>
>>
>> Relevant configuration items:
>>         Windows 2000 5.0
>>         4 Processors, 2GB RAM
>>         Tomcat 5.0.27
>>         JDK 1.5.0_06
>>         Lucene 1.9.1
>>         VM arguments:
>>                 -Djava.io.tmpdir=D:\Appldata\Lucene\lockDir
>>                 -Dorg.apache.lucene.commitLockTimeout=60000
>>                 -Dorg.apache.lucene.writeLockTimeout=60000
>>                 -XX:PermSize=256m
>>                 -XX:MaxPermSize=512m
>>                 -Xrs
>>                 -Xms256m
>>                 -Xmx1024m
>>                 -Xss512k
>>         lucene.searcher.keep.open=true
>>         lucene.searcher.retries=6
>>
>>
>> Has anyone experienced similar conditions? Any suggestions?
>>
>> Kind Regards
>> Adrena Keating
>>
>>
>>
>>
>>     
> ---------------------------------------------------------------------------
>   
>> This message (including any attachments) is confidential and may be
>> privileged. If you have received it by mistake please notify the sender
>>     
> by
>   
>> return e-mail and delete this message from your system. Any unauthorised
>> use or dissemination of this message in whole or in part is strictly
>> prohibited. Please note that e-mails are susceptible to change. ABN AMRO
>> Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
>> registered in the Commercial Register under number 33002587, including
>>     
> its
>   
>> group companies, shall not be liable for the improper or incomplete
>> transmission of the information contained in this communication nor for
>>     
> any
>   
>> delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
>> group companies) does not guarantee that the integrity of this
>> communication has been maintained nor that this communication is free of
>> viruses, interceptions or interference.
>>
>>     
> ---------------------------------------------------------------------------
>   
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------------
> This message (including any attachments) is confidential and may be
> privileged. If you have received it by mistake please notify the sender by
> return e-mail and delete this message from your system. Any unauthorised
> use or dissemination of this message in whole or in part is strictly
> prohibited. Please note that e-mails are susceptible to change. ABN AMRO
> Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
> registered in the Commercial Register under number 33002587, including its
> group companies, shall not be liable for the improper or incomplete
> transmission of the information contained in this communication nor for any
> delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
> group companies) does not guarantee that the integrity of this
> communication has been maintained nor that this communication is free of
> viruses, interceptions or interference.
> ---------------------------------------------------------------------------
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 17 10:40:05 2006
Return-Path: <java-user-return-22767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58409 invoked from network); 17 Aug 2006 10:40:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 10:40:05 -0000
Received: (qmail 14741 invoked by uid 500); 17 Aug 2006 10:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14709 invoked by uid 500); 17 Aug 2006 10:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14698 invoked by uid 99); 17 Aug 2006 10:39:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 03:39:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 03:39:58 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1GDfHj-0004w0-Nb
	for java-user@lucene.apache.org; Thu, 17 Aug 2006 12:39:35 +0200
Message-ID: <44E447C8.8070109@tejnora.cz>
Date: Thu, 17 Aug 2006 12:41:12 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Split an existing index into smaller segments without a re-index?
References: <44E30F13.8040409@sirma.bg>
In-Reply-To: <44E30F13.8040409@sirma.bg>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Depends.

0) optimize big index

1) on big index delete all documents except those for a part of index
2) use AddIndexes on IndexWriter on destination dir (empty)
3) delete segments.del in big index directory (the segments.del is a 
just serialized BitVector)
4) repeat for another set

do not make optimize or any other action if segments.del lives-  that 
will delete your documents

> I searched the mail list archives for an answer to that question;
> The closest (and perhaps the only) thread in this regard that I found is:
>
> http://www.gossamer-threads.com/lists/lucene/java-user/9928
>
> So the answer was "No", but this is way back in the mid 2004 (2 years 
> ago).
> Is there a solution to that problem now?
>
> Stanislav


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 17 12:21:29 2006
Return-Path: <java-user-return-22768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97655 invoked from network); 17 Aug 2006 12:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 12:21:29 -0000
Received: (qmail 76093 invoked by uid 500); 17 Aug 2006 12:21:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75992 invoked by uid 500); 17 Aug 2006 12:21:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75971 invoked by uid 99); 17 Aug 2006 12:21:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 05:21:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [167.202.193.25] (HELO triton09-out.inet.nl.abnamro.com) (167.202.193.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 05:21:17 -0700
Received: from aaamsr001.abnamro.com (aaamsr001 [10.124.6.13])
	by triton09-out.inet.nl.abnamro.com (Postfix) with ESMTP id E94B0FA83
	for <java-user@lucene.apache.org>; Thu, 17 Aug 2006 14:20:46 +0200 (CEST)
In-Reply-To: <44E43E29.8070309@kitsite.com>
Subject: Lucene/Tomcat Memory Leak Issue
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.3 September 14, 2004
From: adrena.keating@nl.abnamro.com
Message-ID: <OF4EA544DD.741D9EA6-ONC12571CD.00437E02-C12571CD.0043D117@abnamro.com>
Date: Thu, 17 Aug 2006 14:19:58 +0200
X-MIMETrack: Serialize by Router on AAAMSR001/HUB/ABNAMRO/NL(Release 6.5.4FP1|June 19, 2005) at
 08/17/2006 02:20:47 PM
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Kieran,

Yep iv seen this patch before but our organisation has grave concerns
putting it into a production environment as its not verified/support by
Lucene as an official patch nor have they verified that there is an actual
bug.

Do you know if you or anyone has actuall installed in prod env and where
there any problems?

Kind Regards
Adrena Keating



                                                                                                                                       
                      kieran                                                                                                           
                      <kieran@kitsite.         To:      java-user@lucene.apache.org                                                    
                      com>                     cc:                                                                                     
                                               Subject: Re: Lucene/Tomcat Memory Leak Issue                                            
                      08/17/2006 12:00                                                                                                 
                      PM                                                                                                               
                      Please respond                                                                                                   
                      to java-user                                                                                                     
                                                                                                                                       




Hello Adrena,

You might want to consult the following thread:

  http://issues.apache.org/jira/browse/LUCENE-436

The issue /might/ be to do with your JVM's implementation of ThreadLocal.
The above discussion contains a fix/workaround for this issue.

Kieran



adrena.keating@nl.abnamro.com wrote:
> We are indexing the file server via Lucene.  We have a 15 MB index file
and
> have set up a once a day re-index and then switch to a continuous index
> update.
> So everytime a content item is published it is immediately indexed and
> deployed.  Problem persists with both scenario's.
>
> We are using jconsole as a profiler but this does not give us information
> if tomcat objects are released from their references and so are not
garbage
> collected.
> Certainly its looks like the long-term heap memory is the issue and is
not
> being garbage collected effectively.
>
> We dont even know what the likely culprit is.  i.e memory leak,
heap/pergen
> memory settings, lucene bug, bug in the way the code is interacting with
> lucene.
>
> We have been looking at this problem for months now..
>
> We dont index xml files with xalan.
>
> Kind Regards
> Adrena Keating
>
>
>
>
>

>                       Ronnie Kolehmainen

>                       <ronnie.kolehmaine         To:
java-user@lucene.apache.org

>                       n@ub.uu.se>                cc:

>                                                  Subject: Re:
Lucene/Tomcat Memory Leak Issue
>                       08/11/2006 06:23

>                       PM

>                       Please respond to

>                       java-user

>

>
>
>
>
> How do you index your documents? Are you releasing old resources? Can you
> use a
> profiler to see referenced objects?
>
> I've experienced the same problem when indexing xml files which were
parsed
> with
> xalan, and the memory leak in that case was in xalan. Switching to saxon
> solved
> the problems for us.
>
> /Ronnie
>
> Citerar adrena.keating@nl.abnamro.com:
>
>
>> Hello, can anyone help?
>>
>>
>> We're experiencing the following issue an Widows Intranet website:
>>
>>
>> Following a Tomcat restart, our application has Lucene creating a single
>> new index in a RAMDirectory, followed by continuous creation of
>>
> additional
>
>> index entries as new content is published.
>>
>>
>> During the initial index creation process, Heap Memory utilization jumps
>>
> to
>
>> over 300 MB and never drops back down, even though the new index itself
>>
> is
>
>> ~15 MB in size. Then, as additional index entries are added, the Heap
>> Memory utilization continues to increase and garbage collection reduces
>>
> in
>
>> size, until we max out the available Heap Memory and Tomcat crashes.
>>
>>
>> Relevant configuration items:
>>         Windows 2000 5.0
>>         4 Processors, 2GB RAM
>>         Tomcat 5.0.27
>>         JDK 1.5.0_06
>>         Lucene 1.9.1
>>         VM arguments:
>>                 -Djava.io.tmpdir=D:\Appldata\Lucene\lockDir
>>                 -Dorg.apache.lucene.commitLockTimeout=60000
>>                 -Dorg.apache.lucene.writeLockTimeout=60000
>>                 -XX:PermSize=256m
>>                 -XX:MaxPermSize=512m
>>                 -Xrs
>>                 -Xms256m
>>                 -Xmx1024m
>>                 -Xss512k
>>         lucene.searcher.keep.open=true
>>         lucene.searcher.retries=6
>>
>>
>> Has anyone experienced similar conditions? Any suggestions?
>>
>> Kind Regards
>> Adrena Keating
>>
>>
>>
>>
>>
>
---------------------------------------------------------------------------
>
>> This message (including any attachments) is confidential and may be
>> privileged. If you have received it by mistake please notify the sender
>>
> by
>
>> return e-mail and delete this message from your system. Any unauthorised
>> use or dissemination of this message in whole or in part is strictly
>> prohibited. Please note that e-mails are susceptible to change. ABN AMRO
>> Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
>> registered in the Commercial Register under number 33002587, including
>>
> its
>
>> group companies, shall not be liable for the improper or incomplete
>> transmission of the information contained in this communication nor for
>>
> any
>
>> delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or
its
>> group companies) does not guarantee that the integrity of this
>> communication has been maintained nor that this communication is free of
>> viruses, interceptions or interference.
>>
>>
>
---------------------------------------------------------------------------
>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
---------------------------------------------------------------------------
> This message (including any attachments) is confidential and may be
> privileged. If you have received it by mistake please notify the sender
by
> return e-mail and delete this message from your system. Any unauthorised
> use or dissemination of this message in whole or in part is strictly
> prohibited. Please note that e-mails are susceptible to change. ABN AMRO
> Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
> registered in the Commercial Register under number 33002587, including
its
> group companies, shall not be liable for the improper or incomplete
> transmission of the information contained in this communication nor for
any
> delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
> group companies) does not guarantee that the integrity of this
> communication has been maintained nor that this communication is free of
> viruses, interceptions or interference.
>
---------------------------------------------------------------------------
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------------
This message (including any attachments) is confidential and may be
privileged. If you have received it by mistake please notify the sender by
return e-mail and delete this message from your system. Any unauthorised
use or dissemination of this message in whole or in part is strictly
prohibited. Please note that e-mails are susceptible to change. ABN AMRO
Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
registered in the Commercial Register under number 33002587, including its
group companies, shall not be liable for the improper or incomplete
transmission of the information contained in this communication nor for any
delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
group companies) does not guarantee that the integrity of this
communication has been maintained nor that this communication is free of
viruses, interceptions or interference.
---------------------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 17 12:39:22 2006
Return-Path: <java-user-return-22769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3894 invoked from network); 17 Aug 2006 12:39:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 12:39:21 -0000
Received: (qmail 33332 invoked by uid 500); 17 Aug 2006 12:39:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33212 invoked by uid 500); 17 Aug 2006 12:39:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33199 invoked by uid 99); 17 Aug 2006 12:39:14 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.160.149.192] (HELO kitsite.com) (66.160.149.192)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Aug 2006 05:39:13 -0700
Received: from 213.202.160.11 ([213.202.160.11]) by kitsite.com for <java-user@lucene.apache.org>; Thu, 17 Aug 2006 05:35:42 -0700
Message-ID: <44E462A8.6030002@kitsite.com>
Date: Thu, 17 Aug 2006 13:35:52 +0100
From: kieran <kieran@kitsite.com>
Reply-To:  kieran@kitsite.com
Organization: Kitsite
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene/Tomcat Memory Leak Issue
References: <OF4EA544DD.741D9EA6-ONC12571CD.00437E02-C12571CD.0043D117@abnamro.com>
In-Reply-To: <OF4EA544DD.741D9EA6-ONC12571CD.00437E02-C12571CD.0043D117@abnamro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The source code is there to look at, modify, and/or compile yourself ;-)
Any "grave concerns" should be addressable by examining the contents of 
the patch.
The change is pretty minor. As far as problems are concerned: in some 
circumstances, there could (arguably) be a performance overhead.
We use it in a production environment; an array of 6 sun blade servers 
that was running out of memory regularly. This patch stopped this bug.
Our particular installation uses the RAMDirectory class to load indexes. 
This appears to vastly speed up the occurrence of the out of memory 
exceptions, but I don't think it's crucial.
If you want any more details, you're welcome to email me either on or 
off-list.
Kieran


adrena.keating@nl.abnamro.com wrote:
> Thanks Kieran,
>
> Yep iv seen this patch before but our organisation has grave concerns
> putting it into a production environment as its not verified/support by
> Lucene as an official patch nor have they verified that there is an actual
> bug.
>
> Do you know if you or anyone has actuall installed in prod env and where
> there any problems?
>
> Kind Regards
> Adrena Keating
>
>
>
>                                                                                                                                        
>                       kieran                                                                                                           
>                       <kieran@kitsite.         To:      java-user@lucene.apache.org                                                    
>                       com>                     cc:                                                                                     
>                                                Subject: Re: Lucene/Tomcat Memory Leak Issue                                            
>                       08/17/2006 12:00                                                                                                 
>                       PM                                                                                                               
>                       Please respond                                                                                                   
>                       to java-user                                                                                                     
>                                                                                                                                        
>
>
>
>
> Hello Adrena,
>
> You might want to consult the following thread:
>
>   http://issues.apache.org/jira/browse/LUCENE-436
>
> The issue /might/ be to do with your JVM's implementation of ThreadLocal.
> The above discussion contains a fix/workaround for this issue.
>
> Kieran
>
>
>
> adrena.keating@nl.abnamro.com wrote:
>   
>> We are indexing the file server via Lucene.  We have a 15 MB index file
>>     
> and
>   
>> have set up a once a day re-index and then switch to a continuous index
>> update.
>> So everytime a content item is published it is immediately indexed and
>> deployed.  Problem persists with both scenario's.
>>
>> We are using jconsole as a profiler but this does not give us information
>> if tomcat objects are released from their references and so are not
>>     
> garbage
>   
>> collected.
>> Certainly its looks like the long-term heap memory is the issue and is
>>     
> not
>   
>> being garbage collected effectively.
>>
>> We dont even know what the likely culprit is.  i.e memory leak,
>>     
> heap/pergen
>   
>> memory settings, lucene bug, bug in the way the code is interacting with
>> lucene.
>>
>> We have been looking at this problem for months now..
>>
>> We dont index xml files with xalan.
>>
>> Kind Regards
>> Adrena Keating
>>
>>
>>
>>
>>
>>     
>
>   
>>                       Ronnie Kolehmainen
>>     
>
>   
>>                       <ronnie.kolehmaine         To:
>>     
> java-user@lucene.apache.org
>
>   
>>                       n@ub.uu.se>                cc:
>>     
>
>   
>>                                                  Subject: Re:
>>     
> Lucene/Tomcat Memory Leak Issue
>   
>>                       08/11/2006 06:23
>>     
>
>   
>>                       PM
>>     
>
>   
>>                       Please respond to
>>     
>
>   
>>                       java-user
>>     
>
>   
>
>   
>>
>>
>> How do you index your documents? Are you releasing old resources? Can you
>> use a
>> profiler to see referenced objects?
>>
>> I've experienced the same problem when indexing xml files which were
>>     
> parsed
>   
>> with
>> xalan, and the memory leak in that case was in xalan. Switching to saxon
>> solved
>> the problems for us.
>>
>> /Ronnie
>>
>> Citerar adrena.keating@nl.abnamro.com:
>>
>>
>>     
>>> Hello, can anyone help?
>>>
>>>
>>> We're experiencing the following issue an Widows Intranet website:
>>>
>>>
>>> Following a Tomcat restart, our application has Lucene creating a single
>>> new index in a RAMDirectory, followed by continuous creation of
>>>
>>>       
>> additional
>>
>>     
>>> index entries as new content is published.
>>>
>>>
>>> During the initial index creation process, Heap Memory utilization jumps
>>>
>>>       
>> to
>>
>>     
>>> over 300 MB and never drops back down, even though the new index itself
>>>
>>>       
>> is
>>
>>     
>>> ~15 MB in size. Then, as additional index entries are added, the Heap
>>> Memory utilization continues to increase and garbage collection reduces
>>>
>>>       
>> in
>>
>>     
>>> size, until we max out the available Heap Memory and Tomcat crashes.
>>>
>>>
>>> Relevant configuration items:
>>>         Windows 2000 5.0
>>>         4 Processors, 2GB RAM
>>>         Tomcat 5.0.27
>>>         JDK 1.5.0_06
>>>         Lucene 1.9.1
>>>         VM arguments:
>>>                 -Djava.io.tmpdir=D:\Appldata\Lucene\lockDir
>>>                 -Dorg.apache.lucene.commitLockTimeout=60000
>>>                 -Dorg.apache.lucene.writeLockTimeout=60000
>>>                 -XX:PermSize=256m
>>>                 -XX:MaxPermSize=512m
>>>                 -Xrs
>>>                 -Xms256m
>>>                 -Xmx1024m
>>>                 -Xss512k
>>>         lucene.searcher.keep.open=true
>>>         lucene.searcher.retries=6
>>>
>>>
>>> Has anyone experienced similar conditions? Any suggestions?
>>>
>>> Kind Regards
>>> Adrena Keating
>>>
>>>
>>>
>>>
>>>
>>>       
> ---------------------------------------------------------------------------
>   
>>> This message (including any attachments) is confidential and may be
>>> privileged. If you have received it by mistake please notify the sender
>>>
>>>       
>> by
>>
>>     
>>> return e-mail and delete this message from your system. Any unauthorised
>>> use or dissemination of this message in whole or in part is strictly
>>> prohibited. Please note that e-mails are susceptible to change. ABN AMRO
>>> Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
>>> registered in the Commercial Register under number 33002587, including
>>>
>>>       
>> its
>>
>>     
>>> group companies, shall not be liable for the improper or incomplete
>>> transmission of the information contained in this communication nor for
>>>
>>>       
>> any
>>
>>     
>>> delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or
>>>       
> its
>   
>>> group companies) does not guarantee that the integrity of this
>>> communication has been maintained nor that this communication is free of
>>> viruses, interceptions or interference.
>>>
>>>
>>>       
> ---------------------------------------------------------------------------
>   
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>       
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>>     
> ---------------------------------------------------------------------------
>   
>> This message (including any attachments) is confidential and may be
>> privileged. If you have received it by mistake please notify the sender
>>     
> by
>   
>> return e-mail and delete this message from your system. Any unauthorised
>> use or dissemination of this message in whole or in part is strictly
>> prohibited. Please note that e-mails are susceptible to change. ABN AMRO
>> Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
>> registered in the Commercial Register under number 33002587, including
>>     
> its
>   
>> group companies, shall not be liable for the improper or incomplete
>> transmission of the information contained in this communication nor for
>>     
> any
>   
>> delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
>> group companies) does not guarantee that the integrity of this
>> communication has been maintained nor that this communication is free of
>> viruses, interceptions or interference.
>>
>>     
> ---------------------------------------------------------------------------
>   
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------------
> This message (including any attachments) is confidential and may be
> privileged. If you have received it by mistake please notify the sender by
> return e-mail and delete this message from your system. Any unauthorised
> use or dissemination of this message in whole or in part is strictly
> prohibited. Please note that e-mails are susceptible to change. ABN AMRO
> Bank N.V, which has its seat at Amsterdam, the Netherlands, and is
> registered in the Commercial Register under number 33002587, including its
> group companies, shall not be liable for the improper or incomplete
> transmission of the information contained in this communication nor for any
> delay in its receipt or damage to your system. ABN AMRO Bank N.V. (or its
> group companies) does not guarantee that the integrity of this
> communication has been maintained nor that this communication is free of
> viruses, interceptions or interference.
> ---------------------------------------------------------------------------
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 17 16:01:42 2006
Return-Path: <java-user-return-22770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85987 invoked from network); 17 Aug 2006 16:01:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 16:01:42 -0000
Received: (qmail 86533 invoked by uid 500); 17 Aug 2006 16:01:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86501 invoked by uid 500); 17 Aug 2006 16:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86489 invoked by uid 99); 17 Aug 2006 16:01:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 09:01:35 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_IMAGE_ONLY_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kevindig@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 09:01:33 -0700
Received: by ug-out-1314.google.com with SMTP id y2so538212uge
        for <java-user@lucene.apache.org>; Thu, 17 Aug 2006 09:01:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yg0cS1u/85pqxEyxNxXxQVtUnRTASG8sgeXlCkdPxAfDtWj+jAwcvQC7tR6ftvlC67v9qObeOMIgby26HMZfjzveFLeEhDkH/g8tb9tTrHqGSErtWCU0I8Bno+PwTkNj0Jn21ccY1J3VikMHdQnbzXWgUQryMzfwL+yxlw+qUuo=
Received: by 10.66.244.10 with SMTP id r10mr1221793ugh;
        Thu, 17 Aug 2006 09:01:12 -0700 (PDT)
Received: by 10.67.118.1 with HTTP; Thu, 17 Aug 2006 09:01:12 -0700 (PDT)
Message-ID: <d1cb8d120608170901v5ff2da24ma13a141c774f9f0d@mail.gmail.com>
Date: Fri, 18 Aug 2006 00:01:12 +0800
From: "kelvin pang" <kevindig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HELP: how to highlight the search key word in lucene's search results?
In-Reply-To: <1155713634.3967.17.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/related; 
	boundary="----=_Part_157566_4533644.1155830472068"
References: <8834A84C87A2C148AD46921BB8BFC97C021E57F0@S1SE1MAIL.emea1.ad.group>
	 <359a92830608100611h4c4c58f4we1997b5a46f6bca@mail.gmail.com>
	 <44DCB14E.70808@gmail.com>
	 <1155713634.3967.17.camel@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_157566_4533644.1155830472068
Content-Type: multipart/alternative; 
	boundary="----=_Part_157565_23440656.1155830472068"

------=_Part_157565_23440656.1155830472068
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks for your reply.
show me the lucene-sandbox examples URL pls. if u can send me some sample
code,that's great!

2006/8/16, Ramesh Salla <ramesh.salla@iptouch.com>:
>
>  goto mailing list archive and you find a lot of info there.
>
> i can brief you out procdure for now.
> get the Highlighter jar from the lucene-sandbox and see the examples from
> this downloaded folder.
> Get the Search Results from the Hits and pass this string to the
> highlighter class.
>
> if you still need help... please ping, i can pass you some code on.
>
>
> [image: :)]
>
>
>
> On Sat, 2006-08-12 at 00:33 +0800, kevin wrote:
>
>  Hi, how to highlight the search key word in lucene's search results? pls give
> advise,thanks!
> --------------------------------------------------------------------- To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
kevin

------=_Part_157565_23440656.1155830472068
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks for your reply.<br>show me the lucene-sandbox examples URL pls. if u can send me some sample code,that's great!<br><br><div><span class="gmail_quote">2006/8/16, Ramesh Salla &lt;<a href="mailto:ramesh.salla@iptouch.com">
ramesh.salla@iptouch.com</a>&gt;:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"><div>


  
  

<div>
goto mailing list archive and you find a lot of info there.<br>
<br>
i can brief you out procdure for now.<br>
get the Highlighter jar from the lucene-sandbox and see the examples from this downloaded folder.<br>
Get the Search Results from the Hits and pass this string to the highlighter class.<br>
<br>
if you still need help... please ping, i can pass you some code on.</div><div><span class="e" id="q_10d15e58b5fcb603_1"><br>
<br>
<img src="cid:1155713634.3967.16.camel@localhost.localdomain" alt=":)" align="middle" border="0"><br>
<br>
<br>
<br>
On Sat, 2006-08-12 at 00:33 +0800, kevin wrote:
</span></div><div><blockquote type="CITE">
<pre></pre></blockquote></div><div><span class="e" id="q_10d15e58b5fcb603_3">
<font color="#000000">Hi,</font>
<font color="#000000">how to highlight the search key word in lucene's search results? pls </font>
<font color="#000000">give advise,thanks!</font>

</span></div><div><span class="q"><font color="#000000">---------------------------------------------------------------------</font>
<font color="#000000">To unsubscribe, e-mail: <a href="mailto:java-user-unsubscribe@lucene.apache.org" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">java-user-unsubscribe@lucene.apache.org</a></font>

<font color="#000000">For additional commands, e-mail: <a href="mailto:java-user-help@lucene.apache.org" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">java-user-help@lucene.apache.org</a></font>


</span></div><div>

</div>


</div></blockquote></div><br><br clear="all"><br>-- <br>kevin

------=_Part_157565_23440656.1155830472068--

------=_Part_157566_4533644.1155830472068--

From java-user-return-22771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 17 21:46:19 2006
Return-Path: <java-user-return-22771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13997 invoked from network); 17 Aug 2006 21:46:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2006 21:46:19 -0000
Received: (qmail 75172 invoked by uid 500); 17 Aug 2006 21:46:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75127 invoked by uid 500); 17 Aug 2006 21:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75116 invoked by uid 99); 17 Aug 2006 21:46:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 14:46:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 14:46:10 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 17 Aug 2006 17:45:36 -0400
X-OriginatingIP: 10.6.134.35
Content-Type: multipart/mixed; boundary="70Okt.46psGOnsK.9RHSE.AE70sr0"
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 17 Aug 2006 17:42:24 -0400
X-MIMEOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Subject: RE: is there such an analyzer?
Date: Thu, 17 Aug 2006 17:42:54 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E8114619681@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: is there such an analyzer?
Thread-index: AcbBbyAf2WOP1274R2iOMTXix5wayQA160FQ
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Aug 2006 21:42:24.0841 (UTC) FILETIME=[070CB390:01C6C246]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--70Okt.46psGOnsK.9RHSE.AE70sr0
MIME-Version: 1.0
Content-class: urn:content-classes:message
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

That definitely pointed me in the right direction.  Thanks

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Wednesday, August 16, 2006 1:04 PM
To: java-user@lucene.apache.org
Subject: Re: is there such an analyzer?

I suspect you'll have to roll your own. I'd use the SynonymAnalyzer from
Lucene in Action as a model, starting around page 129. I really doubt
that
there's much you can expect Lucene to do for you for this specialized
kind
of tokenizing.....

Erick


On 8/16/06, Van Nguyen <vnguyen@ur.com> wrote:
>
>  I'm looking for a cross between a WhitespaceAnalyzer and
> StandardAnalyzer.  If I pass in:
>
> I-Pity-da-fool who has a 1" ladder said MR.T
>
> I want it to index these:
>
> i-pity-da-fool
> pity
> fool
> 1"
> 1
> ladder
> mr.t
>
>
>
> United Rentals
> Consider it done.(tm)
> 800-UR-RENTS
> unitedrentals.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
--70Okt.46psGOnsK.9RHSE.AE70sr0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline



United Rentals
Consider it done.=E2=84=A2
800-UR-RENTS
unitedrentals.com


--70Okt.46psGOnsK.9RHSE.AE70sr0
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--70Okt.46psGOnsK.9RHSE.AE70sr0--

From java-user-return-22772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 06:13:58 2006
Return-Path: <java-user-return-22772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36360 invoked from network); 18 Aug 2006 06:13:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 06:13:58 -0000
Received: (qmail 64196 invoked by uid 500); 18 Aug 2006 06:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64158 invoked by uid 500); 18 Aug 2006 06:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64147 invoked by uid 99); 18 Aug 2006 06:13:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 23:13:52 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,RCVD_IN_NJABL_PROXY,RCVD_IN_SORBS_SOCKS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.43.219.31] (HELO web8316.mail.in.yahoo.com) (202.43.219.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Aug 2006 23:13:50 -0700
Received: (qmail 35380 invoked by uid 60001); 18 Aug 2006 06:13:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=jjbLCuT9mokS8S2bJS7hhNOrCoeifzKPvC4NTl54avfTzsFyDupNtoKQ1Sr9uE+fs6lBob2EY8U2XpC7R/1jBO9wF0XaurqHujn/AMhtT9aoJwrNjFGM4rVsF9n+OtW8+XJY8whnksTNBEASWF1r96geEtcmi67Tc1chJsL8N/U=  ;
Message-ID: <20060818061328.35378.qmail@web8316.mail.in.yahoo.com>
Received: from [59.95.165.170] by web8316.mail.in.yahoo.com via HTTP; Fri, 18 Aug 2006 07:13:27 BST
Date: Fri, 18 Aug 2006 07:13:27 +0100 (BST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Words Frequency Problem
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-521639886-1155881607=:31997"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-521639886-1155881607=:31997
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Dear All,
  I am new to Lucene. I am searching for a word "circle" in my indexed document list. It gives me total document found 4 i.e. Hits. But now i want to get how many occurances are there in each document i.e. frequency of words in result document. Plz. give me suggestions.
   
  Thanks...

 				
---------------------------------
 Here's a new way to find what you're looking for - Yahoo! Answers 
 Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get it NOW
--0-521639886-1155881607=:31997--

From java-user-return-22773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 06:27:31 2006
Return-Path: <java-user-return-22773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39241 invoked from network); 18 Aug 2006 06:27:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 06:27:31 -0000
Received: (qmail 75387 invoked by uid 500); 18 Aug 2006 06:27:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75357 invoked by uid 500); 18 Aug 2006 06:27:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75346 invoked by uid 99); 18 Aug 2006 06:27:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 23:27:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 23:27:24 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.7/8.13.7) with ESMTP id k7I6R1Zn128432
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 06:27:01 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7I6UtWh080766
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 08:30:55 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7I6R11A014392
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 08:27:01 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7I6R1wl014381
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 08:27:01 +0200
In-Reply-To: <20060818061328.35378.qmail@web8316.mail.in.yahoo.com>
Subject: Re: Words Frequency Problem
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF06EBDD33.37E69B8B-ON882571CE.00230A6C-882571CE.00234F13@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 17 Aug 2006 23:25:40 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 18/08/2006 09:30:54
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See
http://www.nabble.com/Accessing-%22term-frequency-information%22-for-documents-tf1964461.html#a5390696


- Doron

aslam bari <iamaslamok@yahoo.co.in> wrote on 17/08/2006 23:13:27:

> Dear All,
>   I am new to Lucene. I am searching for a word "circle" in my
> indexed document list. It gives me total document found 4 i.e. Hits.
> But now i want to get how many occurances are there in each document
> i.e. frequency of words in result document. Plz. give me suggestions.
>
>   Thanks...
>
>
> ---------------------------------
>  Here's a new way to find what you're looking for - Yahoo! Answers
>  Send FREE SMS to your friend's mobile from Yahoo! Messenger Version
> 8. Get it NOW


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 06:42:14 2006
Return-Path: <java-user-return-22774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44813 invoked from network); 18 Aug 2006 06:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 06:42:13 -0000
Received: (qmail 87585 invoked by uid 500); 18 Aug 2006 06:42:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87568 invoked by uid 500); 18 Aug 2006 06:42:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87554 invoked by uid 99); 18 Aug 2006 06:42:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 23:42:07 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,RCVD_IN_NJABL_PROXY,RCVD_IN_SORBS_SOCKS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.43.219.75] (HELO web8320.mail.in.yahoo.com) (202.43.219.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Aug 2006 23:42:06 -0700
Received: (qmail 94255 invoked by uid 60001); 18 Aug 2006 06:41:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=EGb7GnaeS45diGhJK4EaH1sZ5vguPTNYsmVoPU5Q+7AQ6Wmhxv+BL3YH/0HEE7OhdmCHsLRsYtWW0rZkuioP5iSsz2/VIjoBoM45zNRL5pLR3EdL3aoQMo0l2Q+268zrj7ABKP4YBZBtrqF49+79XI2heHzcU2U/Gl9+dihWGts=  ;
Message-ID: <20060818064144.94253.qmail@web8320.mail.in.yahoo.com>
Received: from [59.95.165.170] by web8320.mail.in.yahoo.com via HTTP; Fri, 18 Aug 2006 07:41:44 BST
Date: Fri, 18 Aug 2006 07:41:44 +0100 (BST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Re: Words Frequency Problem
To: java-user@lucene.apache.org
In-Reply-To: <OF06EBDD33.37E69B8B-ON882571CE.00230A6C-882571CE.00234F13@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-919101097-1155883304=:93547"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-919101097-1155883304=:93547
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks Doron,
   
  My Code is as below please tell me where to add/modify for TermFreqVector.
   
  IBasicResultSet result = new BasicResultSetImpl (false);
          try
        {
            Searcher searcher = new IndexSearcher(indexPath);
              Query query = QueryParser.parse(searchedText, TextContentIndexer.CONTENT_TEXT, analyzer);
            
            
            Hits hits = searcher.search (query);
            int noOfHits = hits.length();
            
            
            for (int i = 0; i < noOfHits; i++)
            {
                Document doc = hits.doc(i);   
                
                String uri = doc.get(TextContentIndexer.URI_FIELD);
                IBasicQuery q = factory.getQuery();
                String scope = q.getSearchToken().getSlideContext().getSlidePath(q.getScope().getHref());
                if (uri.startsWith(scope)) {
                    RequestedResource resource = createResource(uri);
                    result.add (resource);
                }
            }
        }
   
   
  I have another question, if i am searching for "circle red color", then by default it uses "OR" as i think. If i want to search exact word "red color" , then how can i query for this.

Doron Cohen <DORONC@il.ibm.com> wrote:
  See
http://www.nabble.com/Accessing-%22term-frequency-information%22-for-documents-tf1964461.html#a5390696


- Doron

aslam bari wrote on 17/08/2006 23:13:27:

> Dear All,
> I am new to Lucene. I am searching for a word "circle" in my
> indexed document list. It gives me total document found 4 i.e. Hits.
> But now i want to get how many occurances are there in each document
> i.e. frequency of words in result document. Plz. give me suggestions.
>
> Thanks...
>
>
> ---------------------------------
> Here's a new way to find what you're looking for - Yahoo! Answers
> Send FREE SMS to your friend's mobile from Yahoo! Messenger Version
> 8. Get it NOW


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 				
---------------------------------
 Here's a new way to find what you're looking for - Yahoo! Answers 
 Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get it NOW
--0-919101097-1155883304=:93547--

From java-user-return-22775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 06:47:00 2006
Return-Path: <java-user-return-22775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46389 invoked from network); 18 Aug 2006 06:46:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 06:46:59 -0000
Received: (qmail 93955 invoked by uid 500); 18 Aug 2006 06:46:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93500 invoked by uid 500); 18 Aug 2006 06:46:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93489 invoked by uid 99); 18 Aug 2006 06:46:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 23:46:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Aug 2006 23:46:52 -0700
Received: (qmail invoked by alias); 18 Aug 2006 06:46:31 -0000
Received: from p548C7C43.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.124.67]
  by mail.gmx.net (mp030) with SMTP; 18 Aug 2006 08:46:31 +0200
X-Authenticated: #3493418
Message-ID: <44E5622F.3000707@gmx.de>
Date: Fri, 18 Aug 2006 08:46:07 +0200
From: =?ISO-8859-1?Q?S=F6ren_Pekrul?= <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Words Frequency Problem
References: <20060818061328.35378.qmail@web8316.mail.in.yahoo.com>
In-Reply-To: <20060818061328.35378.qmail@web8316.mail.in.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

aslam bari wrote:
>   I am searching for a word "circle" in my indexed document list. It gives me total document found 4 i.e. Hits. But now i want to get how many occurances are there in each document i.e. frequency of words in result document.

Hello Aslam,

you should store the TermVector in the index as well:

doc.add(new Field("field name", "field value", Field.Store.YES, 
Field.Index.TOKENIZED, Field.TermVector.YES));

"A term vector is a list of the document's terms and their number of 
occurences in that document."

The IndexReader allows you to access the TermVector of a document:

TermFreqVector IndexReader.getTermFreqVector(int docNumber, String field)

I hope it helps.

Sören

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 06:55:12 2006
Return-Path: <java-user-return-22776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49294 invoked from network); 18 Aug 2006 06:55:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 06:55:12 -0000
Received: (qmail 4917 invoked by uid 500); 18 Aug 2006 06:55:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4442 invoked by uid 500); 18 Aug 2006 06:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4427 invoked by uid 99); 18 Aug 2006 06:55:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 23:55:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.128.166.60] (HELO 2k3srv002.KCS.KCSPLC.COM) (193.128.166.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Aug 2006 23:55:00 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SpellChecker
Date: Fri, 18 Aug 2006 07:46:38 +0100
Message-ID: <1FADA56D562C6A4090AEDF3CFC606C9F0FDF5F@2k3srv002.KCS.KCSPLC.COM>
From: "Matthew York" <matthew.york@kcsplc.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, I'm having issues creating a SpellChecker index.

I am running JRE 1.5.0_06, and have the following in my classpath - =
lucene-core-2.0.0.jar & lucene-spellchecker-2.0.0.jar.

When I run the code below I get the following exception and a 1KB =
segments file in the spellIndexDirectoryPath:

Exception in thread "main" java.lang.NullPointerException
	at =
org.apache.lucene.search.spell.SpellChecker.indexDictionary(SpellChecker.=
java:298)
	at com.kcs.pi.Search.main(Search.java:49)

Any help would be appreciated. Thanks


IndexWriter writer =3D new IndexWriter(originalIndexDirectoryPath, new =
StandardAnalyzer(), true);
Document doc =3D new Document();
doc.add(new Field("contents",	"seventy", Field.Store.YES, =
Field.Index.TOKENIZED));
writer.addDocument(doc);
writer.optimize();
writer.close();
		=09
FSDirectory originalIndexDirectory =3D =
FSDirectory.getDirectory(originalIndexDirectoryPath, false);
FSDirectory spellIndexDirectory =3D =
FSDirectory.getDirectory(spellIndexDirectoryPath, true);
IndexReader indexReader =3D IndexReader.open(originalIndexDirectory);
Dictionary dictionary =3D new LuceneDictionary(indexReader,"contents");
		=09
SpellChecker spellChecker =3D new SpellChecker(spellIndexDirectory);
spellChecker.indexDictionary(dictionary);
indexReader.close();






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 07:28:51 2006
Return-Path: <java-user-return-22777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69187 invoked from network); 18 Aug 2006 07:28:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 07:28:51 -0000
Received: (qmail 42618 invoked by uid 500); 18 Aug 2006 07:28:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42584 invoked by uid 500); 18 Aug 2006 07:28:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42573 invoked by uid 99); 18 Aug 2006 07:28:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 00:28:44 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,RCVD_IN_NJABL_PROXY,RCVD_IN_SORBS_SOCKS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.43.219.53] (HELO web8318.mail.in.yahoo.com) (202.43.219.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Aug 2006 00:28:42 -0700
Received: (qmail 94562 invoked by uid 60001); 18 Aug 2006 07:28:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=rwjKunynsinOaaqu2t+ZMdqwnqEAaEQdebTN/rQklr6eWJsmImAhPHpfxA5kvDm8BZOFM+XPZYXW5XRA2A7pejOyQbF3vfuMLbyChbTKwULauApdzY4cqOcfXpBe+xhDekiSFiRIc/5fyDoan/xFa1TtEd+ss9mQgVH5aX+Vxmc=  ;
Message-ID: <20060818072820.94560.qmail@web8318.mail.in.yahoo.com>
Received: from [59.95.165.170] by web8318.mail.in.yahoo.com via HTTP; Fri, 18 Aug 2006 08:28:20 BST
Date: Fri, 18 Aug 2006 08:28:20 +0100 (BST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Re: Words Frequency Problem
To: java-user@lucene.apache.org
In-Reply-To: <44E5622F.3000707@gmx.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1887033657-1155886100=:94278"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1887033657-1155886100=:94278
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi soren,
  Thanks a lot for help.
  As you suggest me, i written the code, but i wonder Field does not contain Store, Index YES etc. It only contains Field.Keyword, Field.Text etc. Am i missing something. My Code is as Below.
   
    indexWriter = new IndexWriter(indexpath, analyzer, false);
           // Create document
         Document doc = new Document();
           doc.add(Field.Keyword(URI_FIELD, uri.toString()));
         doc.add(Field.Text(CONTENT_TEXT, readContent(revisionDescriptor, revisionContent)));
        
  //It gives error
  /* doc.add(new Field("frequency", "field value", Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.YES));*/
         
         if ( revisionContent != null && revisionDescriptor != null ) {
            List extractor = ExtractorManager.getInstance().getContentExtractors(uri.getNamespace().getName(), (NodeRevisionDescriptors)null, revisionDescriptor);
                 for ( int i = 0, l = extractor.size(); i < l; i++ ) {
                      Reader reader = ((ContentExtractor)extractor.get(i)).extract(new ByteArrayInputStream(revisionContent.getContentBytes()));
                      doc.add(Field.Text(CONTENT_TEXT, reader));
                 }
            }
              indexWriter.addDocument(doc);
            indexWriter.optimize();

Sören Pekrul <soeren.pekrul@gmx.de> wrote:
  aslam bari wrote:
> I am searching for a word "circle" in my indexed document list. It gives me total document found 4 i.e. Hits. But now i want to get how many occurances are there in each document i.e. frequency of words in result document.

Hello Aslam,

you should store the TermVector in the index as well:

doc.add(new Field("field name", "field value", Field.Store.YES, 
Field.Index.TOKENIZED, Field.TermVector.YES));

"A term vector is a list of the document's terms and their number of 
occurences in that document."

The IndexReader allows you to access the TermVector of a document:

TermFreqVector IndexReader.getTermFreqVector(int docNumber, String field)

I hope it helps.

Sören

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 				
---------------------------------
 Here's a new way to find what you're looking for - Yahoo! Answers 
 Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get it NOW
--0-1887033657-1155886100=:94278--

From java-user-return-22778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 08:22:40 2006
Return-Path: <java-user-return-22778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86744 invoked from network); 18 Aug 2006 08:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 08:22:39 -0000
Received: (qmail 91051 invoked by uid 500); 18 Aug 2006 08:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90560 invoked by uid 500); 18 Aug 2006 08:22:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90549 invoked by uid 99); 18 Aug 2006 08:22:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 01:22:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.54.76.193] (HELO ron.emn.fr) (193.54.76.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 01:22:31 -0700
Received: from spip.dsic.emn.fr (root@spip.dsic.emn.fr [193.104.32.156])
          by ron.emn.fr (8.9.3/jtpda-5.3.1) with ESMTP id KAA01054
          for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 10:20:58 +0200 (CEST)
Received: from ifs.emn.fr (ifs.emn.fr [193.54.76.100])
	by spip.dsic.emn.fr (8.12.1/8.12.1) with ESMTP id k7I8M43I010990
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 10:22:04 +0200
Received: from [192.168.18.35] (dhcp35.rech18.emn.fr [192.168.18.35])
          by ifs.emn.fr (8.9.3/jtpda-5.1) with ESMTP id KAA21083
          for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 10:20:37 +0200 (MEST)
Message-ID: <44E578A8.7070507@emn.fr>
Date: Fri, 18 Aug 2006 10:22:00 +0200
From: "ould sid'ahmed" <nouldsid@emn.fr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: search for web address
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
I indexed my document but, Can I search for an address web,  it returns 
me  no result,
and when I search the same address with a query like "http*" it returns 
me a result,
can you help me

thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 08:50:07 2006
Return-Path: <java-user-return-22779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93927 invoked from network); 18 Aug 2006 08:50:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 08:50:07 -0000
Received: (qmail 18326 invoked by uid 500); 18 Aug 2006 08:50:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18297 invoked by uid 500); 18 Aug 2006 08:50:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18284 invoked by uid 99); 18 Aug 2006 08:50:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 01:50:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 01:50:00 -0700
Received: by ug-out-1314.google.com with SMTP id y2so730669uge
        for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 01:49:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=V4OFguExOgWODUx1xEHws/I8cKmQL48RfrHDUMdAbRQx5/JAP2nG8uiikmCHJ+SkMYQauVwDziHrpZPsI3F3ZaiyIujV5wlWliCyd9bbo0erUEOF02nwWyQUSjqJc5kkfl1aHX7WKI4tUjNnvbMpJZxmfXKjwX9fC4YCQ85UFlY=
Received: by 10.66.244.11 with SMTP id r11mr1552613ugh;
        Fri, 18 Aug 2006 01:49:38 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Fri, 18 Aug 2006 01:49:38 -0700 (PDT)
Message-ID: <f18c9dde0608180149xc92d18q80a414f2f3d41d59@mail.gmail.com>
Date: Fri, 18 Aug 2006 10:49:38 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: search for web address
In-Reply-To: <44E578A8.7070507@emn.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44E578A8.7070507@emn.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's like looking for a needle in a haystack without any sinppets of your code.
If you provide some infomation about how you index and search the
specific field you will get an answer. :)

best regards simon

On 8/18/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
> Hello,
> I indexed my document but, Can I search for an address web,  it returns
> me  no result,
> and when I search the same address with a query like "http*" it returns
> me a result,
> can you help me
>
> thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 08:51:25 2006
Return-Path: <java-user-return-22780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94196 invoked from network); 18 Aug 2006 08:51:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 08:51:24 -0000
Received: (qmail 22217 invoked by uid 500); 18 Aug 2006 08:51:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21729 invoked by uid 500); 18 Aug 2006 08:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21718 invoked by uid 99); 18 Aug 2006 08:51:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 01:51:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 01:51:16 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k7I8oqu1004157
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 10:50:52 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id A10A08B9C3
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 10:50:52 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 06135-08 for <java-user@lucene.apache.org>;
 Fri, 18 Aug 2006 10:50:51 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 5BBAA8B9B7
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 10:50:51 +0200 (CEST)
Message-ID: <44E57F64.4030205@uni-hd.de>
Date: Fri, 18 Aug 2006 10:50:44 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search for web address
References: <44E578A8.7070507@emn.fr>
In-Reply-To: <44E578A8.7070507@emn.fr>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hello ould,
 sid'ahmed schrieb:
> Hello,
> I indexed my document but, Can I search for an address web,  it returns
> me  no result,
> and when I search the same address with a query like "http*" it returns
> me a result,

It depends on which analyzer you use:

the StandardAnalyzer will do this with an URL:

 Analzying "http://www.test.fr"
	org.apache.lucene.analysis.standard.StandardAnalyzer:
		[http] [www.test.fr]

1: [http:0->4:<ALPHANUM>]
2: [www.test.fr:7->18:<HOST>]

1: [http]
2: [www.test.fr]

If the URL is stored in an extra field you should consider using
KeywordAnalyzer only for this field with
org.apache.lucene.analysis.PerFieldAnalyzerWrapper;






> can you help me
> 
> thanks
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 09:03:39 2006
Return-Path: <java-user-return-22781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97109 invoked from network); 18 Aug 2006 09:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 09:03:39 -0000
Received: (qmail 36313 invoked by uid 500); 18 Aug 2006 09:03:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36276 invoked by uid 500); 18 Aug 2006 09:03:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36265 invoked by uid 99); 18 Aug 2006 09:03:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 02:03:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.54.76.193] (HELO ron.emn.fr) (193.54.76.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 02:03:31 -0700
Received: from spip.dsic.emn.fr (root@spip.dsic.emn.fr [193.104.32.156])
          by ron.emn.fr (8.9.3/jtpda-5.3.1) with ESMTP id LAA01783
          for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 11:02:00 +0200 (CEST)
Received: from ifs.emn.fr (ifs.emn.fr [193.54.76.100])
	by spip.dsic.emn.fr (8.12.1/8.12.1) with ESMTP id k7I9353I011327
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 11:03:05 +0200
Received: from [192.168.18.35] (dhcp35.rech18.emn.fr [192.168.18.35])
          by ifs.emn.fr (8.9.3/jtpda-5.1) with ESMTP id LAA22264
          for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 11:01:39 +0200 (MEST)
Message-ID: <44E58245.2020203@emn.fr>
Date: Fri, 18 Aug 2006 11:03:01 +0200
From: "ould sid'ahmed" <nouldsid@emn.fr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search for web address
References: <44E578A8.7070507@emn.fr> <f18c9dde0608180149xc92d18q80a414f2f3d41d59@mail.gmail.com>
In-Reply-To: <f18c9dde0608180149xc92d18q80a414f2f3d41d59@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thank you for your response,
I index an URL, I use WhiteSpaceAnalyzer, but if do a search at this 
URL, it returns me nothings,
I have an example :
I index this URL: "http://www.yahoo.fr", If I do a search at the word 
"yahoo.fr", it returns me no result, and if I do the search like 
"http*", it returns me all address indexed

Simon Willnauer a Ã©crit :
> It's like looking for a needle in a haystack without any sinppets of 
> your code.
> If you provide some infomation about how you index and search the
> specific field you will get an answer. :)
>
> best regards simon
>
> On 8/18/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> Hello,
>> I indexed my document but, Can I search for an address web,  it returns
>> me  no result,
>> and when I search the same address with a query like "http*" it returns
>> me a result,
>> can you help me
>>
>> thanks
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 09:13:45 2006
Return-Path: <java-user-return-22782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 639 invoked from network); 18 Aug 2006 09:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 09:13:45 -0000
Received: (qmail 55352 invoked by uid 500); 18 Aug 2006 09:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55328 invoked by uid 500); 18 Aug 2006 09:13:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55317 invoked by uid 99); 18 Aug 2006 09:13:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 02:13:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 02:13:35 -0700
Received: by ug-out-1314.google.com with SMTP id y2so734581uge
        for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 02:13:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sWh9rffHZWr2i9n9xsx5GLVxAulMXSL0DuQHnuuzQaAxsa6a1ucEILSFO2abOUAyFATLVxGGmULXyU/hNdBlmD+b8/zIXsubAf562rq4Eq35BZM1HMMVtp/UodI/8ox4GkCQFOroJnFhWybFwTh9JCoCa3u1aqDo4cNP/lgbMwQ=
Received: by 10.66.216.6 with SMTP id o6mr1578036ugg;
        Fri, 18 Aug 2006 02:13:14 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Fri, 18 Aug 2006 02:13:14 -0700 (PDT)
Message-ID: <f18c9dde0608180213m8c2416do97a35bfbaf36416a@mail.gmail.com>
Date: Fri, 18 Aug 2006 11:13:14 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: search for web address
In-Reply-To: <44E58245.2020203@emn.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <44E578A8.7070507@emn.fr>
	 <f18c9dde0608180149xc92d18q80a414f2f3d41d59@mail.gmail.com>
	 <44E58245.2020203@emn.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SWYgeW91IGFuYWx5emUgdGhlIHVybCBodHRwOi8vd3d3LnlhaG9vLmZyIHdpdGggdGhlIHdoaXRl
c3BhY2UKYW5hbHl6ZXIgeW91IHdpbGwgZ2V0IG9uZSBzaW5nbGUgdG9rZW4gbG9va2luZyBsaWtl
IHRoYXQgMToKW2h0dHA6Ly93d3cueWFob28uZnI6MC0+MTk6d29yZF0gaW4gYW4gaW50ZXJuYWwg
cmVwcmVzZW50YXRpb24uCgpzbyBpZiB5b3Ugc2VhcmNoIGZvciB5YWhvby5mciB5b3Ugd29uJ3Qg
Z2V0IGFueSBoaXQgYW5kIHlvdSBjYW50IHVzZQpsZWZ0IGhhbmQgd2lsZGNhcmRzIGFzIHRoZXkg
YXJlIG5vdCBzdXBwb3J0ZWQuIHNvIHRoZSBxdWVyeSBmb3IgaHR0cCoKdXNlcyBhIHJpZ2h0IGhh
bmQgd2lsZGNhcmQgYW5kIGhpdHMgdGhlIFVSTCB5b3UgaW5kZXhlZCBiZWZvcmUuCgpUaGUgU3Rh
bmRhcmRBbmFseXplciBwcm9kdWNlcyB0aGVzZSB0b2tlbnMKCjE6IFtodHRwOjAtPjQ6PEFMUEhB
TlVNPl0KMjogW3d3dy55YWhvby5mcjo3LT4xOTo8SE9TVD5dCgp0aGV5IHdvdWxkIGhpdCBhbGwg
eW91ciBxdWVyaWVzIHNvIGZhci4gSSBzdWdnZXN0IHlvdSBjcmVhdGUgYSBsaXR0bGUKQW5hbHl6
ZXIgaGVscGVyIG1ldGhvZCBzaG93cyB5b3UgdGhlIG91dHB1dCBvZiBhbiBhbmFseXplciB0aGF0
IHNob3dzCnlvdSBleGFjdGx5IHdoYXQgaGFwcGVucyB3aXRoIHRoZSBhbmFseXplZCB0ZXh0LiBk
b24ndCBmb3JnZXQgdG8gdXNlCnRoZSBzYW1lIGFuYWx5emVyIGZvciBzZWFyY2ggYXMgeW91IHVz
ZWQgZm9yIGluZGV4aW5nLCBhdCBsZWFzdCBpbgp0aGlzIHNjZW5hcmlvLgoKYmVzdCByZWdhcmRz
IFNpbW9uCgpPbiA4LzE4LzA2LCBvdWxkIHNpZCdhaG1lZCA8bm91bGRzaWRAZW1uLmZyPiB3cm90
ZToKPiB0aGFuayB5b3UgZm9yIHlvdXIgcmVzcG9uc2UsCj4gSSBpbmRleCBhbiBVUkwsIEkgdXNl
IFdoaXRlU3BhY2VBbmFseXplciwgYnV0IGlmIGRvIGEgc2VhcmNoIGF0IHRoaXMKPiBVUkwsIGl0
IHJldHVybnMgbWUgbm90aGluZ3MsCj4gSSBoYXZlIGFuIGV4YW1wbGUgOgo+IEkgaW5kZXggdGhp
cyBVUkw6ICJodHRwOi8vd3d3LnlhaG9vLmZyIiwgSWYgSSBkbyBhIHNlYXJjaCBhdCB0aGUgd29y
ZAo+ICJ5YWhvby5mciIsIGl0IHJldHVybnMgbWUgbm8gcmVzdWx0LCBhbmQgaWYgSSBkbyB0aGUg
c2VhcmNoIGxpa2UKPiAiaHR0cCoiLCBpdCByZXR1cm5zIG1lIGFsbCBhZGRyZXNzIGluZGV4ZWQK
Pgo+IFNpbW9uIFdpbGxuYXVlciBhIMOpY3JpdCA6Cj4gPiBJdCdzIGxpa2UgbG9va2luZyBmb3Ig
YSBuZWVkbGUgaW4gYSBoYXlzdGFjayB3aXRob3V0IGFueSBzaW5wcGV0cyBvZgo+ID4geW91ciBj
b2RlLgo+ID4gSWYgeW91IHByb3ZpZGUgc29tZSBpbmZvbWF0aW9uIGFib3V0IGhvdyB5b3UgaW5k
ZXggYW5kIHNlYXJjaCB0aGUKPiA+IHNwZWNpZmljIGZpZWxkIHlvdSB3aWxsIGdldCBhbiBhbnN3
ZXIuIDopCj4gPgo+ID4gYmVzdCByZWdhcmRzIHNpbW9uCj4gPgo+ID4gT24gOC8xOC8wNiwgb3Vs
ZCBzaWQnYWhtZWQgPG5vdWxkc2lkQGVtbi5mcj4gd3JvdGU6Cj4gPj4gSGVsbG8sCj4gPj4gSSBp
bmRleGVkIG15IGRvY3VtZW50IGJ1dCwgQ2FuIEkgc2VhcmNoIGZvciBhbiBhZGRyZXNzIHdlYiwg
IGl0IHJldHVybnMKPiA+PiBtZSAgbm8gcmVzdWx0LAo+ID4+IGFuZCB3aGVuIEkgc2VhcmNoIHRo
ZSBzYW1lIGFkZHJlc3Mgd2l0aCBhIHF1ZXJ5IGxpa2UgImh0dHAqIiBpdCByZXR1cm5zCj4gPj4g
bWUgYSByZXN1bHQsCj4gPj4gY2FuIHlvdSBoZWxwIG1lCj4gPj4KPiA+PiB0aGFua3MKPiA+Pgo+
ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQo+ID4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4KPiA+Pgo+ID4K
PiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQo+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVu
c3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywg
ZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4KPiA+Cj4KPgo+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=


From java-user-return-22783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 09:53:02 2006
Return-Path: <java-user-return-22783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10552 invoked from network); 18 Aug 2006 09:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 09:53:02 -0000
Received: (qmail 18070 invoked by uid 500); 18 Aug 2006 09:52:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17067 invoked by uid 500); 18 Aug 2006 09:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17055 invoked by uid 99); 18 Aug 2006 09:52:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 02:52:56 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,RCVD_IN_NJABL_PROXY,RCVD_IN_SORBS_SOCKS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.43.219.32] (HELO web8317.mail.in.yahoo.com) (202.43.219.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Aug 2006 02:52:54 -0700
Received: (qmail 62929 invoked by uid 60001); 18 Aug 2006 09:52:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=CaCBUlEz0nHBu95FlKqJPMdMpwbYJRR0VXqEAChFfqIrtp2PsGy4q/fATwCKLBniOsJEP74SmkfP7PywZEc+yTGbtAv08cvdqfXmgZJrjWv+hmsdRld9EsoyWrMWXUyDkrs7Og5KMhxUclK4dQWCuRRQ6Kz9cqJRTy1e1c1kG3k=  ;
Message-ID: <20060818095231.62927.qmail@web8317.mail.in.yahoo.com>
Received: from [59.95.161.104] by web8317.mail.in.yahoo.com via HTTP; Fri, 18 Aug 2006 10:52:31 BST
Date: Fri, 18 Aug 2006 10:52:31 +0100 (BST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: TextContentIndexer Problem
To: java-user@lucene.apache.org, Slide User <slide-user@jakarta.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1985265195-1155894751=:60914"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1985265195-1155894751=:60914
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Dear All,
  I have used TextContentIndexer to Index my docs.It uses the TextContainsExpression Class for searching. When i am using DASL search for a single word like:-
  "<D:where>" +
  "<D:contains>ques</D:contains>"+
  
  
  "</D:where>" +
   
  It gives the result successfully. But if i want to give complex query it gives the exception like:-
  "<D:where>" +
  "<D:and>"+
  "<D:contains>ques</D:contains>"+
  "<D:contains>ques</D:contains>"+
  "</D:and>"+
  
  
  "</D:where>" +
   
  What is the problem.
  Thanks...
   

 				
---------------------------------
 Here's a new way to find what you're looking for - Yahoo! Answers 
 Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get it NOW
--0-1985265195-1155894751=:60914--

From java-user-return-22784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 10:15:27 2006
Return-Path: <java-user-return-22784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17231 invoked from network); 18 Aug 2006 10:15:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 10:15:26 -0000
Received: (qmail 55378 invoked by uid 500); 18 Aug 2006 10:15:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55349 invoked by uid 500); 18 Aug 2006 10:15:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55338 invoked by uid 99); 18 Aug 2006 10:15:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 03:15:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Aug 2006 03:15:17 -0700
Received: (qmail invoked by alias); 18 Aug 2006 10:14:55 -0000
Received: from p548C4D0F.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.77.15]
  by mail.gmx.net (mp041) with SMTP; 18 Aug 2006 12:14:55 +0200
X-Authenticated: #3493418
Message-ID: <44E592F0.2080906@gmx.de>
Date: Fri, 18 Aug 2006 12:14:08 +0200
From: =?ISO-8859-1?Q?S=F6ren_Pekrul?= <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Words Frequency Problem
References: <20060818072820.94560.qmail@web8318.mail.in.yahoo.com>
In-Reply-To: <20060818072820.94560.qmail@web8318.mail.in.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

aslam bari wrote:
>   As you suggest me, i written the code, but i wonder Field does not contain Store, Index YES etc. It only contains Field.Keyword, Field.Text etc. Am i missing something.

That sounds to me you using an older version. I use lucene-2.0.0. It 
should be the latest stabil. Sorry, I don't know how to store the 
TermIndex in former versions.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 10:36:13 2006
Return-Path: <java-user-return-22785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23626 invoked from network); 18 Aug 2006 10:36:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 10:36:12 -0000
Received: (qmail 6358 invoked by uid 500); 18 Aug 2006 10:36:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6306 invoked by uid 500); 18 Aug 2006 10:36:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6283 invoked by uid 99); 18 Aug 2006 10:36:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 03:36:02 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE,RCVD_IN_NJABL_PROXY,RCVD_IN_SORBS_SOCKS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.43.219.32] (HELO web8317.mail.in.yahoo.com) (202.43.219.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Aug 2006 03:36:01 -0700
Received: (qmail 80320 invoked by uid 60001); 18 Aug 2006 10:35:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=skfCPB4ERJQuruNQZOB6Wm8yESAwhQXjjWMd+kVg0ezJ82F1JSAhaLVT+u0M8JIIRxgAM3VAwpTnr/CflH+eGvt6ClDIXbYJ2aSsMJX/0c8H3TWiezk8Ka0pWmjQvLLgxbDr8QB7jge2rNvd7Gh7A+aN+FqdL7RoIFQ/Sf1G/OU=  ;
Message-ID: <20060818103538.80318.qmail@web8317.mail.in.yahoo.com>
Received: from [59.95.161.104] by web8317.mail.in.yahoo.com via HTTP; Fri, 18 Aug 2006 11:35:35 BST
Date: Fri, 18 Aug 2006 11:35:35 +0100 (BST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Navigating Through the document
To: Slide User <slide-user@jakarta.apache.org>, java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1190536963-1155897335=:76253"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1190536963-1155897335=:76253
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Dear all,
   
  I am using LuceneContentIndexer and slide2.2.
  I am searching whitin a XML document. I searched a word "circle". It gives me result that try.xml file contains it. Now i want to Navigate through this try.xml file for all "circle" occurrence. (Note:- "circle" is not a Node , it is a value comes under "Entity" Node).
  How can i achive this.
  Thanks...

 				
---------------------------------
 Here's a new way to find what you're looking for - Yahoo! Answers 
 Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get it NOW
--0-1190536963-1155897335=:76253--

From java-user-return-22786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 14:34:04 2006
Return-Path: <java-user-return-22786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22393 invoked from network); 18 Aug 2006 14:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 14:34:03 -0000
Received: (qmail 53269 invoked by uid 500); 18 Aug 2006 14:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53238 invoked by uid 500); 18 Aug 2006 14:33:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53220 invoked by uid 99); 18 Aug 2006 14:33:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 07:33:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [38.117.191.181] (HELO glgexchange01.glgroup.com) (38.117.191.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 07:33:54 -0700
Content-Transfer-Encoding: 7bit
Importance: normal
Priority: normal
Received: from glgexchange04.glgroup.com ([192.168.1.19]) by glgexchange01.glgroup.com with Microsoft SMTPSVC(6.0.3790.0); Fri, 18 Aug 2006 10:33:32 -0400
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2663
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6C2D3.4762FAFB"
Subject: More frustration with Lucene/Java file i/o on Windows
Date: Fri, 18 Aug 2006 10:33:31 -0400
Message-ID: <973858C2ADFF5C4F99415784F9391C060130C907@glgexchange04.glgroup.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: More frustration with Lucene/Java file i/o on Windows
Thread-Index: AcbC00dAR/LlCf5wTCy3mvxTZ7YNjA==
From: "Mark Modrall" <MModrall@glgroup.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Aug 2006 14:33:32.0251 (UTC) FILETIME=[47A4D2B0:01C6C2D3]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6C2D3.4762FAFB
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi...

=20

            It was a little comforting to know that other people have
seen Windows Explorer refreshes crash java Lucene on Windows.  We seem
to be running into a long list of file system issues with Lucene, and I
was wondering if other people had noticed these sort of things (and
hopefully any tips and tricks for working around them).

=20

            We've got a process running as a Windows service that's
trying to keep a set of Lucene indexes up-to-date from a database.  The
corpus is pretty small, so we copy the last index build to a temp
directory and then try to do an incremental index of the changes on the
working copy.  Since our software is evolving, we've put a version
number in the meta data of the index files which we check when we're
starting up.  If the version numbers don't match, we scrap the whole
thing and start over.  The problem is that java Lucene on Windows
doesn't do "scrap" very well.

=20

            The current hypothesis is that File.renameTo, File.delete,
and other jvm operations on windows fail if there is any other handle
open on the file and that Lucene objects aren't closing/finalizing their
file handles cleanly/reliably so other things blow up later.

=20

            Here's the chain of events we had in our service process
last night:

20060817T165611.682,EDT [Indexer.java 813]: Exception occurred deleting
document 183971: Lock obtain timed out:
Lock@C:\WINDOWS\TEMP\lucene-22b8462f0f541160a41abfdff8d52f94-write.lock

20060817T165612.682,EDT [Indexer.java 813]: Exception occurred deleting
document 257265: Lock obtain timed out:
Lock@C:\WINDOWS\TEMP\lucene-22b8462f0f541160a41abfdff8d52f94-write.lock

20060817T165613.744,EDT [Indexer.java 1184]: Indexing failure, db
changes will be rolled back and partial index deleted.

java.io.IOException: Lock obtain timed out:
Lock@C:\WINDOWS\TEMP\lucene-22b8462f0f541160a41abfdff8d52f94-write.lock

            at org.apache.lucene.store.Lock.obtain(Lock.java:56)

            at
org.apache.lucene.index.IndexReader.aquireWriteLock(IndexReader.java:489
)

            at
org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:514)

            at
org.apache.lucene.index.IndexReader.deleteDocuments(IndexReader.java:541
)

            at ...Indexer.buildIncrementalIndex(Indexer.java:915)

...

=20

Why it couldn't get that temporary lock file, I don't know.  The same
process runs continuously, and I don't know if Lucene reuses the same
tmpnames from run to run.  If the files were left around because of
these JVM File system errors, maybe that would explain it.

=20

The "partial index deleted" part of our message means that we did a
recursive (java) delete of all the index directories we were working
with.  Our attempt to clean the slate got everything but
contact_index\_3zhe.cfs.

=20

An hour later, we come back and try to start another index build.  We
find the directory still exists, so we try to validate the index version
number using

            searcher =3D new
IndexSearcher(FSDirectory.getDirectory(indexFile, false));

            TermQuery tq =3D new TermQuery(new
Term(METADATA_DOCUMENT_FIELD, METADATA_DOCUMENT_FIELD_VALUE));

            Hits h =3D searcher.search(tq);

            if (h.length() =3D=3D 1)

            ...

        finally

        {

            if (searcher !=3D null)

            {

                try { searcher.close(); } catch (Exception e) { /*
ignore */ }

            }

        }

=20

Obviously with only the _3zhe.cfs file left, it's not a valid index, so
the attempt to get the metadata fails.  No matter what happens, we do a
searcher.close().  My suspicion is that IndexSearch.close() isn't really
doing a File.close() on all the files it's using, so you have to wait
until searcher is garbage collected and its file objects finalized
before things will work - because immediately after this check, Lucene
fails a full build with

20060817T175614.323,EDT [Indexer.java 843]: Error building full index

java.io.IOException: Cannot delete
\\xx.xx.xx.xx\indexbuild2\contact_index\_3zhe.cfs

            at
org.apache.lucene.store.FSDirectory.create(FSDirectory.java:198)

            at
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:144)

            at
org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:224)

...

=20

Doing a full build, Lucene does it's own attempt to clear out the
leftovers which fails because it can't delete the file.  And we're stuck
in this loop all night.

=20

The guy who wrote the Indexing code says the version check is the only
place in the code where we have an IndexSearcher created using a file
path string - that all others have a pre-existing IndexReader.  He wants
me to try it that way instead, so that we can explicitly close the
reader and hopefully clear that loose file handle.

=20

Sorry for the long-winded vent, but does anyone have any advice for
getting java lucene working on windows?  Any idea why it would seize up
on the lock files?  This service process is the only lucene process on
the system, and the finished indexes are copied off to another server to
serve the search requests, so it's puzzling that the daemon process
would block itself...  Anyone know if an IndexReader.close() would do a
better job of cleaning up the file handles than IndexSearcher.close()?

=20

Thanks

-Mark

=20
This e-mail message, and any attachments, is intended only for the use =
of the individual or entity identified in the alias address of this =
message and may contain information that is confidential, privileged and =
subject to legal restrictions and penalties regarding its unauthorized =
disclosure and use. Any unauthorized review, copying, disclosure, use or =
distribution is strictly prohibited. If you have received this e-mail =
message in error, please notify the sender immediately by reply e-mail =
and delete this message, and any attachments, from your system. Thank =
you.

------_=_NextPart_001_01C6C2D3.4762FAFB--

From java-user-return-22787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 18:41:04 2006
Return-Path: <java-user-return-22787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9495 invoked from network); 18 Aug 2006 18:41:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 18:41:04 -0000
Received: (qmail 16063 invoked by uid 500); 18 Aug 2006 18:40:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16037 invoked by uid 500); 18 Aug 2006 18:40:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16026 invoked by uid 99); 18 Aug 2006 18:40:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:40:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:40:56 -0700
Received: from [10.65.253.201] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.156951C2@mailer.syr.edu>; Fri, 18 Aug 2006 14:40:35 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <EE38B784-267C-4224-9FB3-4974BC4910C7@syr.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Grant Ingersoll <GSIngers@syr.edu>
Subject: Overriding Similarity
Date: Fri, 18 Aug 2006 14:40:34 -0400
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Luceners,

I am doing some documentation on scoring and I am interested in use  
cases people have for overriding the DefaultSimilarity.  If you can  
share what you did and why you did it, it would be much appreciated.

For example, Daniel Naber posted his at: http://www.gossamer- 
threads.com/lists/lucene/java-user/38967?search_string=Similarity;#38967

Thanks,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 18:50:16 2006
Return-Path: <java-user-return-22788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13379 invoked from network); 18 Aug 2006 18:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 18:50:16 -0000
Received: (qmail 38368 invoked by uid 500); 18 Aug 2006 18:50:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37412 invoked by uid 500); 18 Aug 2006 18:50:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37401 invoked by uid 99); 18 Aug 2006 18:50:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:50:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:50:09 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 33AF05B777; Fri, 18 Aug 2006 11:49:49 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 30D6A7F403;
	Fri, 18 Aug 2006 11:49:49 -0700 (PDT)
Date: Fri, 18 Aug 2006 11:49:49 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>,
	iamaslamok@yahoo.co.in
Subject: Re: Navigating Through the document
In-Reply-To: <20060818103538.80318.qmail@web8317.mail.in.yahoo.com>
Message-ID: <Pine.LNX.4.58.0608181146370.31103@hal.rescomp.berkeley.edu>
References: <20060818103538.80318.qmail@web8317.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: To: Slide User <slide-user@jakarta.apache.org>, java-user@lucene.apache.org
: Subject: Navigating Through the document

Please do not cross post questions about Slide to the Lucene java-user
mailing list.  The Lucene java-user mailing list is for people with
questions about using the Lucene Java APIs -- not for asking questions
about applications that happen to use Lucene internally.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 18:57:44 2006
Return-Path: <java-user-return-22789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17385 invoked from network); 18 Aug 2006 18:57:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 18:57:43 -0000
Received: (qmail 55264 invoked by uid 500); 18 Aug 2006 18:57:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55238 invoked by uid 500); 18 Aug 2006 18:57:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55227 invoked by uid 99); 18 Aug 2006 18:57:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:57:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 11:57:34 -0700
Received: by py-out-1112.google.com with SMTP id w49so1278067pyg
        for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 11:57:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JhezLhHTPn/bs3XV4gM7HUJlMRENZY6/j/2lL5YoXSeC2kZnOq/V5mV36qmyFT/oVTGaZnF7jn7Piq/dwdxYvwwFpzWmrmAPGrKPr//Ao9S0g6jKXf52CkcWKsi0twLoY5NTHptEaGO7NYX97UgVr5/s8T0KvSMyUBaPcF4Cj4I=
Received: by 10.35.108.12 with SMTP id k12mr6470028pym;
        Fri, 18 Aug 2006 11:57:14 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Fri, 18 Aug 2006 11:57:14 -0700 (PDT)
Message-ID: <359a92830608181157n24afc20etaa4557ebdf9a50de@mail.gmail.com>
Date: Fri, 18 Aug 2006 14:57:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for web address
In-Reply-To: <44E58245.2020203@emn.fr>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27155_2321323.1155927434096"
References: <44E578A8.7070507@emn.fr>
	 <f18c9dde0608180149xc92d18q80a414f2f3d41d59@mail.gmail.com>
	 <44E58245.2020203@emn.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27155_2321323.1155927434096
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

When you say you use a WhitespaceAnalyzer, is it for both indexing AND
searching? That's important.

Also, I'd advise getting a copy of Luke and examining your index to see if
what you indexed is indexed as you expect. See http://www.getopt.org/luke/

Best
Erick

On 8/18/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>
> thank you for your response,
> I index an URL, I use WhiteSpaceAnalyzer, but if do a search at this
> URL, it returns me nothings,
> I have an example :
> I index this URL: "http://www.yahoo.fr", If I do a search at the word
> "yahoo.fr", it returns me no result, and if I do the search like
> "http*", it returns me all address indexed
>
> Simon Willnauer a =E9crit :
> > It's like looking for a needle in a haystack without any sinppets of
> > your code.
> > If you provide some infomation about how you index and search the
> > specific field you will get an answer. :)
> >
> > best regards simon
> >
> > On 8/18/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
> >> Hello,
> >> I indexed my document but, Can I search for an address web,  it return=
s
> >> me  no result,
> >> and when I search the same address with a query like "http*" it return=
s
> >> me a result,
> >> can you help me
> >>
> >> thanks
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27155_2321323.1155927434096--

From java-user-return-22790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 19:11:02 2006
Return-Path: <java-user-return-22790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23276 invoked from network); 18 Aug 2006 19:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 19:11:01 -0000
Received: (qmail 75348 invoked by uid 500); 18 Aug 2006 19:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75313 invoked by uid 500); 18 Aug 2006 19:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75299 invoked by uid 99); 18 Aug 2006 19:10:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 12:10:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 12:10:54 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 61116D9C040
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 15:10:32 -0400 (EDT)
Received: from heartbeat1.internal ([10.202.2.160])
  by frontend3.internal (MEProxy); Fri, 18 Aug 2006 15:10:33 -0400
X-Sasl-enc: rUNkkB8DADlKV1qOQVFxecUDRuw5Tik3xvrZdgBlwU6o 1155928233
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 22AE5E3
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 15:10:32 -0400 (EDT)
Message-ID: <44E610A7.20903@mikemccandless.com>
Date: Fri, 18 Aug 2006 15:10:31 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: More frustration with Lucene/Java file i/o on Windows
References: <973858C2ADFF5C4F99415784F9391C060130C907@glgexchange04.glgroup.com>
In-Reply-To: <973858C2ADFF5C4F99415784F9391C060130C907@glgexchange04.glgroup.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>             It was a little comforting to know that other people have
> seen Windows Explorer refreshes crash java Lucene on Windows.  We seem
> to be running into a long list of file system issues with Lucene, and I
> was wondering if other people had noticed these sort of things (and
> hopefully any tips and tricks for working around them).

Sorry you're having so many troubles.  Keep these emails, questions &
issues coming because this is how we [gradually] fix Lucene to be more
robust!

OK a few quick possibilities / suggestions:

   * Make sure in your Indexer.java that when you delete docs, you
     close any open IndexWriter's before you try to call
     deleteDocuments from your IndexReader.  Only one writer
     (IndexWriter adding docs or IndexReader deleting docs) can be open
     at once and if you fail to do this you'll get exactly that "lock
     obtain timed out" error.  You could also use IndexModifier which
     under the hood is doing this open-close logic for you.  But: try
     to buffer up adds and deletes together if possible to minimize
     cost of open/closes.

   * That one file really seems to have an open file handle on it.  Are
     you sure you called close on all IndexReaders (IndexSearchers)?
     That file is a "compound file format" segment, and IndexReaders
     hold an open file handle to these files (IndexWriters do as well,
     but they quickly close the file handles after writing to them).

   * There was a thread recently, similar to this issue, where
     File.renameTo was failing, and there was a suggestion that this is
     a bug in some JVMs and to get the JVM to GC (System.gc()) to see
     if that then closes the underlying file.

   * IndexSearcher.close() will only close the underlying IndexReader
     if you created it with a String.  If you create it with just an
     IndexReader it will not close that reader.  You have to separately
     call IndexReader.close to close the reader.

   * If the JVM exited un-gracefully then the lock files will be left
     on disk and Lucene will incorrectly think the lock is held by
     another process (and then hit that "lock obtain timed out"
     error).  You can just remove the lock files (from
     c:\windows\temp\...) if you are certain no Lucene processes are
     running.

     We are working towards using native locks in Lucene (for a future
     release) so that even un-graceful exits of the JVM will properly
     free the lock.

   * Perhaps, change your "build a new index" logic so that it does so
     in an entirely fresh directory?  Just to avoid any hazards at all
     of anything holding files open in the old directory ...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 19:17:50 2006
Return-Path: <java-user-return-22791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25010 invoked from network); 18 Aug 2006 19:17:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 19:17:49 -0000
Received: (qmail 83718 invoked by uid 500); 18 Aug 2006 19:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83695 invoked by uid 500); 18 Aug 2006 19:17:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83684 invoked by uid 99); 18 Aug 2006 19:17:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 12:17:44 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 12:17:43 -0700
Received: by nf-out-0910.google.com with SMTP id b2so540599nfe
        for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 12:17:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=rw8oo6aYqJ5cj7mE1KaVeYxPLwrykt2AT8zXui0MwkO9PZFhjbGvhSRl20U++cPnyaRxYnHcATOtrukfjF5XqJVXn2HQzWpymhzAdbCL5yl9zEgx6umJGCB33XvAYj6dnSyU4UtTHCH16F6A7jchwtamZ4zmqy6X4IH8ZSrL2hA=
Received: by 10.49.8.4 with SMTP id l4mr4438826nfi;
        Fri, 18 Aug 2006 12:17:21 -0700 (PDT)
Received: by 10.78.138.20 with HTTP; Fri, 18 Aug 2006 12:17:21 -0700 (PDT)
Message-ID: <6e3ae6310608181217l41ba012av80a7fdd5738475d0@mail.gmail.com>
Date: Fri, 18 Aug 2006 12:17:21 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More frustration with Lucene/Java file i/o on Windows
In-Reply-To: <973858C2ADFF5C4F99415784F9391C060130C907@glgexchange04.glgroup.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <973858C2ADFF5C4F99415784F9391C060130C907@glgexchange04.glgroup.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Mark,

I had the same issue with Lucene when maintaining Lucene index on
Windows. It's mostly due to Windows OS can not delete a file
correctly. While some versioning can alivate the problem somehow,  my
advice is to move to Linux according to my experience.

Regarding the lock, you need to delete all locks before the indexing starts.

Regarding the leftover index, you can create a new index in a new
directory and copy the new index to your target directory.

Chris Lu
------------------------------------
Lucene Search Server for Any Databases/Applications
http://www.dbsight.net

On 8/18/06, Mark Modrall <MModrall@glgroup.com> wrote:
> Hi...
>
>
>
>             It was a little comforting to know that other people have
> seen Windows Explorer refreshes crash java Lucene on Windows.  We seem
> to be running into a long list of file system issues with Lucene, and I
> was wondering if other people had noticed these sort of things (and
> hopefully any tips and tricks for working around them).
>
>
>
>             We've got a process running as a Windows service that's
> trying to keep a set of Lucene indexes up-to-date from a database.  The
> corpus is pretty small, so we copy the last index build to a temp
> directory and then try to do an incremental index of the changes on the
> working copy.  Since our software is evolving, we've put a version
> number in the meta data of the index files which we check when we're
> starting up.  If the version numbers don't match, we scrap the whole
> thing and start over.  The problem is that java Lucene on Windows
> doesn't do "scrap" very well.
>
>
>
>             The current hypothesis is that File.renameTo, File.delete,
> and other jvm operations on windows fail if there is any other handle
> open on the file and that Lucene objects aren't closing/finalizing their
> file handles cleanly/reliably so other things blow up later.
>
>
>
>             Here's the chain of events we had in our service process
> last night:
>
> 20060817T165611.682,EDT [Indexer.java 813]: Exception occurred deleting
> document 183971: Lock obtain timed out:
> Lock@C:\WINDOWS\TEMP\lucene-22b8462f0f541160a41abfdff8d52f94-write.lock
>
> 20060817T165612.682,EDT [Indexer.java 813]: Exception occurred deleting
> document 257265: Lock obtain timed out:
> Lock@C:\WINDOWS\TEMP\lucene-22b8462f0f541160a41abfdff8d52f94-write.lock
>
> 20060817T165613.744,EDT [Indexer.java 1184]: Indexing failure, db
> changes will be rolled back and partial index deleted.
>
> java.io.IOException: Lock obtain timed out:
> Lock@C:\WINDOWS\TEMP\lucene-22b8462f0f541160a41abfdff8d52f94-write.lock
>
>             at org.apache.lucene.store.Lock.obtain(Lock.java:56)
>
>             at
> org.apache.lucene.index.IndexReader.aquireWriteLock(IndexReader.java:489
> )
>
>             at
> org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:514)
>
>             at
> org.apache.lucene.index.IndexReader.deleteDocuments(IndexReader.java:541
> )
>
>             at ...Indexer.buildIncrementalIndex(Indexer.java:915)
>
> ...
>
>
>
> Why it couldn't get that temporary lock file, I don't know.  The same
> process runs continuously, and I don't know if Lucene reuses the same
> tmpnames from run to run.  If the files were left around because of
> these JVM File system errors, maybe that would explain it.
>
>
>
> The "partial index deleted" part of our message means that we did a
> recursive (java) delete of all the index directories we were working
> with.  Our attempt to clean the slate got everything but
> contact_index\_3zhe.cfs.
>
>
>
> An hour later, we come back and try to start another index build.  We
> find the directory still exists, so we try to validate the index version
> number using
>
>             searcher = new
> IndexSearcher(FSDirectory.getDirectory(indexFile, false));
>
>             TermQuery tq = new TermQuery(new
> Term(METADATA_DOCUMENT_FIELD, METADATA_DOCUMENT_FIELD_VALUE));
>
>             Hits h = searcher.search(tq);
>
>             if (h.length() == 1)
>
>             ...
>
>         finally
>
>         {
>
>             if (searcher != null)
>
>             {
>
>                 try { searcher.close(); } catch (Exception e) { /*
> ignore */ }
>
>             }
>
>         }
>
>
>
> Obviously with only the _3zhe.cfs file left, it's not a valid index, so
> the attempt to get the metadata fails.  No matter what happens, we do a
> searcher.close().  My suspicion is that IndexSearch.close() isn't really
> doing a File.close() on all the files it's using, so you have to wait
> until searcher is garbage collected and its file objects finalized
> before things will work - because immediately after this check, Lucene
> fails a full build with
>
> 20060817T175614.323,EDT [Indexer.java 843]: Error building full index
>
> java.io.IOException: Cannot delete
> \\xx.xx.xx.xx\indexbuild2\contact_index\_3zhe.cfs
>
>             at
> org.apache.lucene.store.FSDirectory.create(FSDirectory.java:198)
>
>             at
> org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:144)
>
>             at
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:224)
>
> ...
>
>
>
> Doing a full build, Lucene does it's own attempt to clear out the
> leftovers which fails because it can't delete the file.  And we're stuck
> in this loop all night.
>
>
>
> The guy who wrote the Indexing code says the version check is the only
> place in the code where we have an IndexSearcher created using a file
> path string - that all others have a pre-existing IndexReader.  He wants
> me to try it that way instead, so that we can explicitly close the
> reader and hopefully clear that loose file handle.
>
>
>
> Sorry for the long-winded vent, but does anyone have any advice for
> getting java lucene working on windows?  Any idea why it would seize up
> on the lock files?  This service process is the only lucene process on
> the system, and the finished indexes are copied off to another server to
> serve the search requests, so it's puzzling that the daemon process
> would block itself...  Anyone know if an IndexReader.close() would do a
> better job of cleaning up the file handles than IndexSearcher.close()?
>
>
>
> Thanks
>
> -Mark
>
>
> This e-mail message, and any attachments, is intended only for the use of the individual or entity identified in the alias address of this message and may contain information that is confidential, privileged and subject to legal restrictions and penalties regarding its unauthorized disclosure and use. Any unauthorized review, copying, disclosure, use or distribution is strictly prohibited. If you have received this e-mail message in error, please notify the sender immediately by reply e-mail and delete this message, and any attachments, from your system. Thank you.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 19:27:29 2006
Return-Path: <java-user-return-22792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35670 invoked from network); 18 Aug 2006 19:27:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 19:27:29 -0000
Received: (qmail 4271 invoked by uid 500); 18 Aug 2006 19:27:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4050 invoked by uid 500); 18 Aug 2006 19:27:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4039 invoked by uid 99); 18 Aug 2006 19:27:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 12:27:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 12:27:22 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3B63B5B770; Fri, 18 Aug 2006 12:27:02 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2BEF67F403
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 12:27:02 -0700 (PDT)
Date: Fri, 18 Aug 2006 12:27:02 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Overriding Similarity
In-Reply-To: <EE38B784-267C-4224-9FB3-4974BC4910C7@syr.edu>
Message-ID: <Pine.LNX.4.58.0608181220440.31103@hal.rescomp.berkeley.edu>
References: <EE38B784-267C-4224-9FB3-4974BC4910C7@syr.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I am doing some documentation on scoring and I am interested in use
: cases people have for overriding the DefaultSimilarity.  If you can
: share what you did and why you did it, it would be much appreciated.

I touched on this a little bit when i commited SweetSpotSimilarity...

http://www.nabble.com/Re%3A-SweetSpotSimiliarity-p4536312.html

...really any situation where you know more about your data then just that
it's "text" is a situation where it *might* make sense to to override your
SImilarity method.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 21:52:35 2006
Return-Path: <java-user-return-22793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80172 invoked from network); 18 Aug 2006 21:52:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 21:52:34 -0000
Received: (qmail 181 invoked by uid 500); 18 Aug 2006 21:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99872 invoked by uid 500); 18 Aug 2006 21:52:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99861 invoked by uid 99); 18 Aug 2006 21:52:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:52:28 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mathias.herberts@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:52:27 -0700
Received: by py-out-1112.google.com with SMTP id w49so1327207pyg
        for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 14:52:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=oH79Sm4LRfXIDBpx2gBxx8iPlItmMb2CBSn0aPVVfSnOBi3tK6T2dz44Jqt6FuzfibpAyhZXn2rSJ1IHz2QJD2lahS+vFvsupykgfixHNb+kEyObmNKeuNPvkH4eing5ntY3o3Hbsw7CnrBbTYO9fvNTkkRsX+bxjOUTOvWQuYQ=
Received: by 10.35.114.16 with SMTP id r16mr6761483pym;
        Fri, 18 Aug 2006 14:52:06 -0700 (PDT)
Received: by 10.35.81.3 with HTTP; Fri, 18 Aug 2006 14:52:06 -0700 (PDT)
Message-ID: <1c5747850608181452v56d39ca8vd4eaf8079aea0b70@mail.gmail.com>
Date: Fri, 18 Aug 2006 23:52:06 +0200
From: "Mathias Herberts" <mathias.herberts@gmail.com>
To: java-user@lucene.apache.org
Subject: Exception raised when searching with sorting on an empty index.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have an instance of MultiSearcher searching two indices, one based
on an FSDirectory, and another one based on a RAMDirectory. The file
based index is static, i.e. no changes are made to it. The RAM based
index is used to add documents.

When starting up, the RAM based index is empty. If I attempt to do a
search for a Term on the MultiSearcher it returns the results from the
file index.

When doing a search with sorting on a field (ts) on the MultiSearcher
with an empty RAM based index, an exception is thrown saying:

no terms in field ts - cannot determine sort type

Unless I'm misunderstanding something it appears to me this is a bug.

I am using Lucene 2.0.0 with JDK 1.4 on Mac OS X 10.4

Did anybody else notice this problem?


Mathias.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 21:54:26 2006
Return-Path: <java-user-return-22794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80542 invoked from network); 18 Aug 2006 21:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 21:54:25 -0000
Received: (qmail 2796 invoked by uid 500); 18 Aug 2006 21:54:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2771 invoked by uid 500); 18 Aug 2006 21:54:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2760 invoked by uid 99); 18 Aug 2006 21:54:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:54:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [38.117.191.181] (HELO glgexchange01.glgroup.com) (38.117.191.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 14:54:17 -0700
Received: from glgexchange04.glgroup.com ([192.168.1.19]) by glgexchange01.glgroup.com with Microsoft SMTPSVC(6.0.3790.0); Fri, 18 Aug 2006 17:53:55 -0400
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2663
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: More frustration with Lucene/Java file i/o on Windows
Date: Fri, 18 Aug 2006 17:53:55 -0400
Message-ID: <973858C2ADFF5C4F99415784F9391C060130C90B@glgexchange04.glgroup.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: More frustration with Lucene/Java file i/o on Windows
Thread-Index: AcbC+hPiTqp2H4nfTYGRpUxDk7co9QAFKi8g
From: "Mark Modrall" <MModrall@glgroup.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Aug 2006 21:53:55.0234 (UTC) FILETIME=[CCF81020:01C6C310]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Mike,

	I do appreciate the thoroughness and graciousness of your
responses, and I hope there's nothing in my frustration that you would
take personally.  Googling around, I've found other references to the
sun jvm handling of the Windows file system to be, well, quixotic at
best.

	In our current system, we have two modes of operation, full
index recreation and incremental indexing.  Which to use is determined
by a quick validate check (check to see if the path exists, see if it is
a directory.  If it is, make an IndexSearcher to check the meta data as
below.  If the reader passes the test, build incremental; otherwise
delete the directory and start fresh
  searcher =3D new IndexSearcher(FSDirectory.getDirectory(indexFile,
false));
  TermQuery tq =3D new TermQuery(new Term(METADATA_DOCUMENT_FIELD,
METADATA_DOCUMENT_FIELD_VALUE));
  Hits h =3D searcher.search(tq);
).

	The validation IndexSearcher gets closed in a finally block, so
there shouldn't be anything left over from that.

	If it's a full rebuild, we just have an IndexWriter (no reader).
If it's incremental, there's an IndexReader to delete old documents,
which is closed, followed by an IndexWriter that is also closed (when
things go well).

	I haven't gone looking in the source to figure out what goes
into the middle of the lucene-<xxx>-write.lock naming convention, but as
you say they could have been left over from some abnormal termination.

	Our indexing schema bats back and forth between 2 build dirs;
one's supposed to be the last successful build, the other is the one you
can work on.  When a successful build is finished, all the files are
copied over into the scratch dir and the next build goes in the scratch
dir.  If part of the glorp in the lock file name is a hash of the
directory path, we could run for a while and not hit the locking issue
for a couple of builds.

	I still can't figure out how the .cfs file delete would fail,
though, unless the IndexSearcher.close() hadn't really let go of the
file.  What would happen with an IndexSearcher on a malformed directory?
I.e. if there was only a .cfs file there?  Would .close() know to
release the one handle it had?

	Anyway, I'll implement something at the root to delete the lock
files before starting to do anything to make sure the slate is clean and
cross my fingers.

Thanks
-Mark




=20
This e-mail message, and any attachments, is intended only for the use =
of the individual or entity identified in the alias address of this =
message and may contain information that is confidential, privileged and =
subject to legal restrictions and penalties regarding its unauthorized =
disclosure and use. Any unauthorized review, copying, disclosure, use or =
distribution is strictly prohibited. If you have received this e-mail =
message in error, please notify the sender immediately by reply e-mail =
and delete this message, and any attachments, from your system. Thank =
you.=20

-----Original Message-----

From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Friday, August 18, 2006 3:11 PM
To: java-user@lucene.apache.org
Subject: Re: More frustration with Lucene/Java file i/o on Windows


>             It was a little comforting to know that other people have
> seen Windows Explorer refreshes crash java Lucene on Windows.  We seem
> to be running into a long list of file system issues with Lucene, and
I
> was wondering if other people had noticed these sort of things (and
> hopefully any tips and tricks for working around them).

Sorry you're having so many troubles.  Keep these emails, questions &
issues coming because this is how we [gradually] fix Lucene to be more
robust!

OK a few quick possibilities / suggestions:

   * Make sure in your Indexer.java that when you delete docs, you
     close any open IndexWriter's before you try to call
     deleteDocuments from your IndexReader.  Only one writer
     (IndexWriter adding docs or IndexReader deleting docs) can be open
     at once and if you fail to do this you'll get exactly that "lock
     obtain timed out" error.  You could also use IndexModifier which
     under the hood is doing this open-close logic for you.  But: try
     to buffer up adds and deletes together if possible to minimize
     cost of open/closes.

   * That one file really seems to have an open file handle on it.  Are
     you sure you called close on all IndexReaders (IndexSearchers)?
     That file is a "compound file format" segment, and IndexReaders
     hold an open file handle to these files (IndexWriters do as well,
     but they quickly close the file handles after writing to them).

   * There was a thread recently, similar to this issue, where
     File.renameTo was failing, and there was a suggestion that this is
     a bug in some JVMs and to get the JVM to GC (System.gc()) to see
     if that then closes the underlying file.

   * IndexSearcher.close() will only close the underlying IndexReader
     if you created it with a String.  If you create it with just an
     IndexReader it will not close that reader.  You have to separately
     call IndexReader.close to close the reader.

   * If the JVM exited un-gracefully then the lock files will be left
     on disk and Lucene will incorrectly think the lock is held by
     another process (and then hit that "lock obtain timed out"
     error).  You can just remove the lock files (from
     c:\windows\temp\...) if you are certain no Lucene processes are
     running.

     We are working towards using native locks in Lucene (for a future
     release) so that even un-graceful exits of the JVM will properly
     free the lock.

   * Perhaps, change your "build a new index" logic so that it does so
     in an entirely fresh directory?  Just to avoid any hazards at all
     of anything holding files open in the old directory ...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 18 22:35:39 2006
Return-Path: <java-user-return-22795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99192 invoked from network); 18 Aug 2006 22:35:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2006 22:35:38 -0000
Received: (qmail 56563 invoked by uid 500); 18 Aug 2006 22:35:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56541 invoked by uid 500); 18 Aug 2006 22:35:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56528 invoked by uid 99); 18 Aug 2006 22:35:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 15:35:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 15:35:26 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 09FA7D9C001
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 18:35:00 -0400 (EDT)
Received: from heartbeat1.internal ([10.202.2.160])
  by frontend3.internal (MEProxy); Fri, 18 Aug 2006 18:35:01 -0400
X-Sasl-enc: kivV7FFydgEe9I/yJ8Rn8GJeAno/GW7AmaBzzlalplBh 1155940500
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id DB5085E4B
	for <java-user@lucene.apache.org>; Fri, 18 Aug 2006 18:35:00 -0400 (EDT)
Message-ID: <44E64087.6010806@mikemccandless.com>
Date: Fri, 18 Aug 2006 18:34:47 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: More frustration with Lucene/Java file i/o on Windows
References: <973858C2ADFF5C4F99415784F9391C060130C90B@glgexchange04.glgroup.com>
In-Reply-To: <973858C2ADFF5C4F99415784F9391C060130C90B@glgexchange04.glgroup.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> 	I do appreciate the thoroughness and graciousness of your
> responses, and I hope there's nothing in my frustration that you would
> take personally.  Googling around, I've found other references to the
> sun jvm handling of the Windows file system to be, well, quixotic at
> best.

No problem!

And I suspect Sun doesn't like Microsoft :)

> 	In our current system, we have two modes of operation, full
> index recreation and incremental indexing.  Which to use is determined
> by a quick validate check (check to see if the path exists, see if it is
> a directory.  If it is, make an IndexSearcher to check the meta data as
> below.  If the reader passes the test, build incremental; otherwise
> delete the directory and start fresh
>   searcher = new IndexSearcher(FSDirectory.getDirectory(indexFile,
> false));
>   TermQuery tq = new TermQuery(new Term(METADATA_DOCUMENT_FIELD,
> METADATA_DOCUMENT_FIELD_VALUE));
>   Hits h = searcher.search(tq);
> ).
> 
> 	The validation IndexSearcher gets closed in a finally block, so
> there shouldn't be anything left over from that.

OK, this sounds fine.

> 	If it's a full rebuild, we just have an IndexWriter (no reader).
> If it's incremental, there's an IndexReader to delete old documents,
> which is closed, followed by an IndexWriter that is also closed (when
> things go well).

OK but be real careful on the incremental case: you can only have 
exactly one of IndexReader or IndexWriter open at a time.  In other 
words, you have to close one in order to open the other, and vice/versa. 
  It sounds like you do all deletes with an IndexReader, then close it, 
then open an IndexWriter, do all your adds, then close it?  In which 
case that should be fine... the closes are also in finally blocks?

> 	I haven't gone looking in the source to figure out what goes
> into the middle of the lucene-<xxx>-write.lock naming convention, but as
> you say they could have been left over from some abnormal termination.

The Lucene classes have finalizers that try to release these locks so 
"in theory" (cross fingers) it should only be a hard KILL or C-level 
exception in the JVM that would cause these lock files to be left behind.

> 	Our indexing schema bats back and forth between 2 build dirs;
> one's supposed to be the last successful build, the other is the one you
> can work on.  When a successful build is finished, all the files are
> copied over into the scratch dir and the next build goes in the scratch
> dir.  If part of the glorp in the lock file name is a hash of the
> directory path, we could run for a while and not hit the locking issue
> for a couple of builds.

OK I see.  Yes indeed the glorp is a "digest" from the directory name ...

> 	I still can't figure out how the .cfs file delete would fail,
> though, unless the IndexSearcher.close() hadn't really let go of the
> file.  What would happen with an IndexSearcher on a malformed directory?
> I.e. if there was only a .cfs file there?  Would .close() know to
> release the one handle it had?

Yeah the fact that the OS wouldn't let Lucene nor you delete the CFS 
file means it was indeed still open.  That combined with write locks 
stuck in the filesystem really sorta feels like there was an 
IndexSearcher that didn't get closed.  Or it could indeed be the lurking 
[possible] bug in the JVM that fails to really close a file even when 
you call File.close() from Java.

What JVM & version of Lucene are you using?

> 	Anyway, I'll implement something at the root to delete the lock
> files before starting to do anything to make sure the slate is clean and
> cross my fingers.

OK good luck!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 19 05:49:00 2006
Return-Path: <java-user-return-22796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86030 invoked from network); 19 Aug 2006 05:49:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 05:49:00 -0000
Received: (qmail 17305 invoked by uid 500); 19 Aug 2006 05:48:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17277 invoked by uid 500); 19 Aug 2006 05:48:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17266 invoked by uid 99); 19 Aug 2006 05:48:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Aug 2006 22:48:54 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.245] (HELO web50410.mail.yahoo.com) (206.190.38.245)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Aug 2006 22:48:52 -0700
Received: (qmail 62472 invoked by uid 60001); 19 Aug 2006 05:48:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=lSV4ZXmk70ys6FLIKyRME/WcIG0Y3u1BZt1vynB1/Yqbp2NlMov3OWhF0el64Q3djNFtm5dYbRqP9UCzXlPa6Ev8hZ2omF17TsdNuvwib+cG0Bb6e8WF7rLmH6kCXvKMvZF8Bg37lwqX8rRZNBWcD5OwozBbXAqwzrfNVpqRElg=  ;
Message-ID: <20060819054831.62470.qmail@web50410.mail.yahoo.com>
Received: from [82.99.196.156] by web50410.mail.yahoo.com via HTTP; Fri, 18 Aug 2006 22:48:30 PDT
Date: Fri, 18 Aug 2006 22:48:30 -0700 (PDT)
From: Shaghayegh Sahebie <shaghayegh_sahebie@yahoo.com>
Subject: Re: Indexing Documents which has Attachments and are Refered many times!!
To: java-user@lucene.apache.org
In-Reply-To: <44DE267B.6020901@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1549594843-1155966510=:58674"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1549594843-1155966510=:58674
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

thanks Jason and Steve;
maybe i didn't understand your solution well, but in this system a document is refered many times (we have a refer description wich we should index it also) and each time a document is refered i should update it in the lucene index and so i should delete it and then index it again. and it means deleting and indexing this document many times. i think indexing is time consuming. 
and as another question can lucene have different value for one of it's fields? 'cause i refer a doc many time and i need many refer fields(but i don't know how many) in one documents fields. and i can not e.g. concat all the refers in one feld 'cause i may have other constraints on a refer and doument also (e.g. give me the documents which they have word "foo" in their refers and the refer of them which has this wordis on "yyyy/mm/dd" date. if i concat the refers i may find a refer which has the word in it but another refer of this document is on the given date. i mean i should know which refer is on which date and also other fields of a refer other than date. the same is true for attachments) on the date of a refer an

i think the main problem i got is that lucene can not handle joins and i think i need joins.

regards 
--Shaghayegh

Steven Rowe <sarowe@syr.edu> wrote: As Jason says, you can structure each Lucene document with one Field per
content type, and index all data that way.  The database is not required.

To address your search complexity concern, you can create queries that
search only those Field(s) the user wants -- there is no need to have a
Field for each possible combination of content type.

Steve

Jason Polites wrote:
> Maybe I'm not understanding your requirement, but this should be fairly
> simple in Lucene.
> 
> Each document in your document management system would be represented by a
> single Lucene document in the index.  Each lucene document will then have
> several fields, each field representing the values of the "meta data"
> associated with your document in the document management system.
> 
> For example:
> 
> Lets say you have a document which has the following structure:
> 
> Title: Sample Document
> Date: 01/01/2006
> Attachment: Some attachment (this is the content of the attachment)
> Attachment: Some other attachment
> Refers: Mr X
> Refers: Mr Y
> 
> Your Lucene document would have the same structure.  All of these items in
> your "real" document would simply be Fields in the lucene document.
> 
> In the case of your attachments, you could also consider indexing them
> separately (as well).  This way users could search for attachments without
> needing the documents to which they are attached.
> 
> If your attachments ARE documents (that is, your just have a foreign key
> style relationship between two documents), then you would simple index each
> "real" document as a separate document in lucene and add some sort of
> reference field which contains the ID of all related documents.
> 
> For Example:
> -------------------
> ID: 123
> Title: Sample Document
> Date: 01/01/2006
> Attachment: 456
> Attachment: 789
> Refers: Mr X
> Refers: Mr Y
> --------------------
> ID: 456
> Title: Other Document
> Date:.. etc etc...
> 
> The one thing to be mindful of is re-indexing existing documents.  If you
> have document that is already indexed and you want to make a change (eg you
> want to add a new "refers" value), then you need to re-index the entire
> document.  This means you need to either "store" all fields you want to
> keep
> during re-indexing (which is typically all of them), or you need to
> re-index
> the document from its source. Storing all the data in the index can have
> adverse effects on the performance of the index however. (hope this makes
> sense).
> 
> 
> 
> On 8/12/06, Shaghayegh Sahebie  wrote:
>>
>> Hi all;
>> We have got a Document management system and we want to build a search on
>> it. We have tree kind of content in our system: Refers, Documents and
>> Attachments. A document can have multiple attachments and can be
>> Refered to
>> many users.
>> Our users want to be able to search on documents attachments and refers.
>> for example they want to search the Documents which are created at
>> "2006/07/06" date and have the word "Lucene" in it or their Refers and
>> are
>> Refered to Mr.x.
>> Our users want to be ale to search in all 8 possible selections of
>> Document, Refer and Attachment, I mean they want to be able to search
>> just
>> in Refers, in both Refers and Documents, ...
>> How can we handle it?
>> I thaught to store diferent kinds of Docs in a DB, search in the DB at
>> first and search in Lucene based on DB results and phrases given to
>> search
>> (Handling Document, Refer or Attachments parts in a DB search). But
>> the DB
>> results maybe so big and i don't know if a Lucene query can have these
>> much
>> of search Terms.
>> Another way is to Index each document, refer and attachment in the
>> index 8
>> times(all the possible selections of Refer, Document and Attachment) but
>> this way has lots of redundancy even more than 8 times! 'cause each
>> Document
>> is indexed "8 * Refer number of Document" times.
>> I really don't know what to do, Any suggestions Please?
>>
>> Thanks in advance


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 			
---------------------------------
Do you Yahoo!?
 Everyone is raving about the  all-new Yahoo! Mail Beta.
--0-1549594843-1155966510=:58674--

From java-user-return-22797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 19 07:08:25 2006
Return-Path: <java-user-return-22797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94933 invoked from network); 19 Aug 2006 07:08:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 07:08:25 -0000
Received: (qmail 53970 invoked by uid 500); 19 Aug 2006 07:08:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53933 invoked by uid 500); 19 Aug 2006 07:08:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53922 invoked by uid 99); 19 Aug 2006 07:08:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 00:08:19 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 00:08:18 -0700
Received: by wx-out-0506.google.com with SMTP id s15so900376wxc
        for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 00:07:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NfJo0RV77TfMP6/9/1ymRcgdw3qy2dNCxtN4+F3Lj0YK4NF5A5ZSmDMAILvTX3VDIJ+q4yupNrboqefW+4ryAtUI6B5QtBjFiJ1Pks3fU/S5bqe+2jHHcsdOPvSulEbxSnMLH1f5TWpjBWNpxP8OXCtYz+akH7nIXgSYfwK6pIo=
Received: by 10.70.52.2 with SMTP id z2mr6138010wxz;
        Sat, 19 Aug 2006 00:07:57 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Sat, 19 Aug 2006 00:07:57 -0700 (PDT)
Message-ID: <d8050f240608190007y2df01b8br657b6460da85da80@mail.gmail.com>
Date: Sat, 19 Aug 2006 17:07:57 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Documents which has Attachments and are Refered many times!!
In-Reply-To: <20060819054831.62470.qmail@web50410.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13835_3250593.1155971277840"
References: <44DE267B.6020901@syr.edu>
	 <20060819054831.62470.qmail@web50410.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13835_3250593.1155971277840
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you can still achieve your desired outcome, but I'm not sure I fully
understand the use case.  Can you describe more clearly a specific example
of what you need to achieve?

You are correct that "joins" in lucene aren't really a strong point, but
this is often a by-product of thinking about Lucene in the same wy we think
about a database; which is a mistake (in my opinion).

I often have trouble trying to use Lucene in the same way I use a database
(joined queries etc).  Usually I need to re-think the way I am using Lucene
to avoid needing to do this.

On 8/19/06, Shaghayegh Sahebie <shaghayegh_sahebie@yahoo.com> wrote:
>
> thanks Jason and Steve;
> maybe i didn't understand your solution well, but in this system a
> document is refered many times (we have a refer description wich we should
> index it also) and each time a document is refered i should update it in the
> lucene index and so i should delete it and then index it again. and it means
> deleting and indexing this document many times. i think indexing is time
> consuming.
> and as another question can lucene have different value for one of it's
> fields? 'cause i refer a doc many time and i need many refer fields(but i
> don't know how many) in one documents fields. and i can not e.g. concat
> all the refers in one feld 'cause i may have other constraints on a refer
> and doument also (e.g. give me the documents which they have word "foo" in
> their refers and the refer of them which has this wordis on "yyyy/mm/dd"
> date. if i concat the refers i may find a refer which has the word in it but
> another refer of this document is on the given date. i mean i should know
> which refer is on which date and also other fields of a refer other than
> date. the same is true for attachments) on the date of a refer an
>
> i think the main problem i got is that lucene can not handle joins and i
> think i need joins.
>
> regards
> --Shaghayegh
>
> Steven Rowe <sarowe@syr.edu> wrote: As Jason says, you can structure each
> Lucene document with one Field per
> content type, and index all data that way.  The database is not required.
>
> To address your search complexity concern, you can create queries that
> search only those Field(s) the user wants -- there is no need to have a
> Field for each possible combination of content type.
>
> Steve
>
> Jason Polites wrote:
> > Maybe I'm not understanding your requirement, but this should be fairly
> > simple in Lucene.
> >
> > Each document in your document management system would be represented by
> a
> > single Lucene document in the index.  Each lucene document will then
> have
> > several fields, each field representing the values of the "meta data"
> > associated with your document in the document management system.
> >
> > For example:
> >
> > Lets say you have a document which has the following structure:
> >
> > Title: Sample Document
> > Date: 01/01/2006
> > Attachment: Some attachment (this is the content of the attachment)
> > Attachment: Some other attachment
> > Refers: Mr X
> > Refers: Mr Y
> >
> > Your Lucene document would have the same structure.  All of these items
> in
> > your "real" document would simply be Fields in the lucene document.
> >
> > In the case of your attachments, you could also consider indexing them
> > separately (as well).  This way users could search for attachments
> without
> > needing the documents to which they are attached.
> >
> > If your attachments ARE documents (that is, your just have a foreign key
> > style relationship between two documents), then you would simple index
> each
> > "real" document as a separate document in lucene and add some sort of
> > reference field which contains the ID of all related documents.
> >
> > For Example:
> > -------------------
> > ID: 123
> > Title: Sample Document
> > Date: 01/01/2006
> > Attachment: 456
> > Attachment: 789
> > Refers: Mr X
> > Refers: Mr Y
> > --------------------
> > ID: 456
> > Title: Other Document
> > Date:.. etc etc...
> >
> > The one thing to be mindful of is re-indexing existing documents.  If
> you
> > have document that is already indexed and you want to make a change (eg
> you
> > want to add a new "refers" value), then you need to re-index the entire
> > document.  This means you need to either "store" all fields you want to
> > keep
> > during re-indexing (which is typically all of them), or you need to
> > re-index
> > the document from its source. Storing all the data in the index can have
> > adverse effects on the performance of the index however. (hope this
> makes
> > sense).
> >
> >
> >
> > On 8/12/06, Shaghayegh Sahebie  wrote:
> >>
> >> Hi all;
> >> We have got a Document management system and we want to build a search
> on
> >> it. We have tree kind of content in our system: Refers, Documents and
> >> Attachments. A document can have multiple attachments and can be
> >> Refered to
> >> many users.
> >> Our users want to be able to search on documents attachments and
> refers.
> >> for example they want to search the Documents which are created at
> >> "2006/07/06" date and have the word "Lucene" in it or their Refers and
> >> are
> >> Refered to Mr.x.
> >> Our users want to be ale to search in all 8 possible selections of
> >> Document, Refer and Attachment, I mean they want to be able to search
> >> just
> >> in Refers, in both Refers and Documents, ...
> >> How can we handle it?
> >> I thaught to store diferent kinds of Docs in a DB, search in the DB at
> >> first and search in Lucene based on DB results and phrases given to
> >> search
> >> (Handling Document, Refer or Attachments parts in a DB search). But
> >> the DB
> >> results maybe so big and i don't know if a Lucene query can have these
> >> much
> >> of search Terms.
> >> Another way is to Index each document, refer and attachment in the
> >> index 8
> >> times(all the possible selections of Refer, Document and Attachment)
> but
> >> this way has lots of redundancy even more than 8 times! 'cause each
> >> Document
> >> is indexed "8 * Refer number of Document" times.
> >> I really don't know what to do, Any suggestions Please?
> >>
> >> Thanks in advance
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------
> Do you Yahoo!?
> Everyone is raving about the  all-new Yahoo! Mail Beta.
>

------=_Part_13835_3250593.1155971277840--

From java-user-return-22798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 19 07:53:27 2006
Return-Path: <java-user-return-22798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13696 invoked from network); 19 Aug 2006 07:53:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 07:53:26 -0000
Received: (qmail 72613 invoked by uid 500); 19 Aug 2006 07:53:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72195 invoked by uid 500); 19 Aug 2006 07:53:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72184 invoked by uid 99); 19 Aug 2006 07:53:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 00:53:21 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mhh1977@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 00:53:19 -0700
Received: by wx-out-0506.google.com with SMTP id s15so910202wxc
        for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 00:52:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MAtz+VPy0V5i+YRZ/67tFkalDqggDTOVQEUoajcidKlzAnV8pFxz0R1xmp2QQDUNf3o+Pm+vLo06EacIzLaezy+fVca5qVI2tFhSCHFEBh2K4NgQkro3SdmcouKnoS+vrUcOMsQnsBpavarNgw/oI9ElwmGgMhK2+aR3kVKXqvA=
Received: by 10.90.49.1 with SMTP id w1mr60511agw;
        Sat, 19 Aug 2006 00:52:58 -0700 (PDT)
Received: by 10.90.51.1 with HTTP; Sat, 19 Aug 2006 00:52:58 -0700 (PDT)
Message-ID: <30dc7a660608190052v1ad48223r427b2ec1c00fc737@mail.gmail.com>
Date: Sat, 19 Aug 2006 16:52:58 +0900
From: "MH H" <mhh1977@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Overriding Similarity
In-Reply-To: <746be7310608182359w197a1b56vc5f0a5ed876e5c4e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <EE38B784-267C-4224-9FB3-4974BC4910C7@syr.edu>
	 <Pine.LNX.4.58.0608181220440.31103@hal.rescomp.berkeley.edu>
	 <746be7310608182359w197a1b56vc5f0a5ed876e5c4e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I had a situation where I was only interested in whether the term was
there or not (not how many times), and I didn't want to penalize long
fields. So I wrote a Similariy subclass where I overrided the
following methods as this:

   public float lengthNorm(String fieldName, int numTerms) {
      return numTerms > 0 ? 1.0f : 0.0f;
   }
	
   public float tf(float freq) {
      return freq > 0 ? 1.0f : 0.0f;
   }

And then I made this subclass the default similarity. It worked well
for tf but not for lengthNorm. The reason appears to be that the
TermScorer class does not call lengthNorm, but instead uses a cache
implemented as an static array in Similarity, made available through
static methods in Similarity. Since TermScorer calls these static
methods in Similarity, changing the default similarity has no effect
in this regard. So I ended up having to customize the code of core
lucene by changing the following code in Similarity:

   static {
      for (int i = 0; i < 256; i++)
         NORM_TABLE[i] = 1.0f; //Originally: NORM_TABLE[i] =
SmallFloat.byte315ToFloat((byte)i);
   }

This worked well, but I had hoped not having to change core lucene, so
if anyone has any other/better solution, I would appreciate some tips.

MHH


> : I am doing some documentation on scoring and I am interested in use
> : cases people have for overriding the DefaultSimilarity.  If you can
> : share what you did and why you did it, it would be much appreciated.
>
> I touched on this a little bit when i commited SweetSpotSimilarity...
>
> http://www.nabble.com/Re%3A-SweetSpotSimiliarity-p4536312.html
>
> ...really any situation where you know more about your data then just that
> it's "text" is a situation where it *might* make sense to to override your
> SImilarity method.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 19 13:55:34 2006
Return-Path: <java-user-return-22799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89853 invoked from network); 19 Aug 2006 13:55:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 13:55:33 -0000
Received: (qmail 71318 invoked by uid 500); 19 Aug 2006 13:55:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71154 invoked by uid 500); 19 Aug 2006 13:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71143 invoked by uid 99); 19 Aug 2006 13:55:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 06:55:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 06:55:25 -0700
Received: by py-out-1112.google.com with SMTP id w49so1600852pyg
        for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 06:55:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=VZhoTp4RRTCRyb6RMwgCcNAJzDNqMvU27CCu2M7xZMFAxXtinEQ94Vfd8NHnHu+34HHg0bpmXtp+hjFSempFZetZ1XbDyh8AVI2WowFQKK8po88V4hMLqJosFI1HHTIjscDdSWIg8y3oypjR/e3Iu1pjPFT9E4oZV87tzWqrRu0=
Received: by 10.65.250.11 with SMTP id c11mr4887240qbs;
        Sat, 19 Aug 2006 06:55:04 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Sat, 19 Aug 2006 06:55:04 -0700 (PDT)
Message-ID: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
Date: Sat, 19 Aug 2006 14:55:04 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Search Performance Problem 16 sec for 250K docs
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12579_26277258.1155995704601"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12579_26277258.1155995704601
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi there,

I have an index with about 250K document, to be indexed full text.

there are 2 types of searches carried out, 1. using 1 field, the other using
4 .. for a query string ...

given the nature of the queries required, all stop words are maintained in
the index, thereby allowing for phrasal queries, (this is a requirement) ..

So search I am using the following ..

if(fldArray.length > 1)
    {
      // use four fields
      BooleanClause.Occur[] flags = {BooleanClause.Occur.SHOULD,
BooleanClause.Occur.SHOULD, BooleanClause.Occur.SHOULD,
BooleanClause.Occur.SHOULD};
      query = MultiFieldQueryParser.parse(queryString, fldArray, flags,
analyzer); //parse the
    }
    else
    {
      //use only 1 field
      query = new QueryParser("tags", analyzer).parse(queryString);
    }


When i search on the 4 fields the average search time is 16 sec ..
When i search on the 1 field the average search time is 9 secs ...

The Analyzer used for both searching and indexing is
Analyzer analyzer = new StandardAnalyzer(new String[]{});

The index size is about a 1GB ..

The documents vary in size some are less than 1K max size is about 5k



Is there anything I can do to make this faster.... 16 secs is just not
acceptable ..

Machine : 512MB, celeron 2600 ...  Lucene 2.0

I could go for a bigger machine but wanted to make sure that the problem was
not something I was doing, given 250K is not that large a figure ..

Please Help

Thanx

Mo

------=_Part_12579_26277258.1155995704601--

From java-user-return-22800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 19 15:23:07 2006
Return-Path: <java-user-return-22800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99859 invoked from network); 19 Aug 2006 15:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 15:23:06 -0000
Received: (qmail 46177 invoked by uid 500); 19 Aug 2006 15:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46146 invoked by uid 500); 19 Aug 2006 15:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46135 invoked by uid 99); 19 Aug 2006 15:23:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 08:23:00 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 08:22:59 -0700
Received: by py-out-1112.google.com with SMTP id w49so1624908pyg
        for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 08:22:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EHfRa0sFDLVCuDuVc9/ELYU1grQy1XTp6l3w2W7rzcji1iRIDZo/jbr7H+0dcLbVFgY+1Ir2t5nq/nFX5IgkDovPmR1yyo0T2ca8sE/ncZ6esNjyVRN9KLQf6OJdGloarQ9oTP7FBSh+W6+G9g6i4BfLPF1GKxskrlrt6aSDZfw=
Received: by 10.35.99.5 with SMTP id b5mr8599721pym;
        Sat, 19 Aug 2006 08:22:38 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sat, 19 Aug 2006 08:22:38 -0700 (PDT)
Message-ID: <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
Date: Sat, 19 Aug 2006 11:22:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36150_29562408.1156000958643"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_36150_29562408.1156000958643
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is a loooonnnnnggg time, I think you're right, it's excessive.

What are you timing? The time to complete the search (i.e. get a Hits object
back) or the total time to assemble the response? Why I ask is that the Hits
object is designed to return the fir st100 or so docs efficiently. Every 100
docs or so, it re-executes the query. So, if you're returning a large result
set, the using the Hits object to iterate over them, this could account for
your time. Use a HitCollector instead... But do note this from the javadoc
for hitcollector

----
. For good search performance, implementations of this method should not
call Searcher.doc(int)<file:///C:/lucene_1.9.1/docs/api/org/apache/lucene/search/Searcher.html#doc%28int%29>or
IndexReader.document(int)<file:///C:/lucene_1.9.1/docs/api/org/apache/lucene/index/IndexReader.html#document%28int%29>on
every document number encountered. Doing so can slow searches by an
order
of magnitude or more.
-----

FWIW, I have indexes larger that 1G that return in far less time than you
are indicating, through three layers and constructing web pages in the
meantime. It contains over 800K documents and the response time is around a
second (haven't timed it lately). This includes 5-way sorts.

You might also either get a copy of Luke and have it explain exactly what
the parse does or use one of the query exlain calls (sorry, don't remember
them off the top of my head) to see what query is *actually* submitted and
whether it's what you expect.

Are you using wildcards? They also have an effect on query speed.

If none of this applies, perhaps you could post the query and the how the
index is constructed. If you haven't already gotten a copy of Luke, I
heartily recommend it....

Hope this helps
Erick

On 8/19/06, M A <geneticflyer@googlemail.com> wrote:
>
> Hi there,
>
> I have an index with about 250K document, to be indexed full text.
>
> there are 2 types of searches carried out, 1. using 1 field, the other
> using
> 4 .. for a query string ...
>
> given the nature of the queries required, all stop words are maintained in
> the index, thereby allowing for phrasal queries, (this is a requirement)
> ..
>
> So search I am using the following ..
>
> if(fldArray.length > 1)
>     {
>       // use four fields
>       BooleanClause.Occur[] flags = {BooleanClause.Occur.SHOULD,
> BooleanClause.Occur.SHOULD, BooleanClause.Occur.SHOULD,
> BooleanClause.Occur.SHOULD};
>       query = MultiFieldQueryParser.parse(queryString, fldArray, flags,
> analyzer); //parse the
>     }
>     else
>     {
>       //use only 1 field
>       query = new QueryParser("tags", analyzer).parse(queryString);
>     }
>
>
> When i search on the 4 fields the average search time is 16 sec ..
> When i search on the 1 field the average search time is 9 secs ...
>
> The Analyzer used for both searching and indexing is
> Analyzer analyzer = new StandardAnalyzer(new String[]{});
>
> The index size is about a 1GB ..
>
> The documents vary in size some are less than 1K max size is about 5k
>
>
>
> Is there anything I can do to make this faster.... 16 secs is just not
> acceptable ..
>
> Machine : 512MB, celeron 2600 ...  Lucene 2.0
>
> I could go for a bigger machine but wanted to make sure that the problem
> was
> not something I was doing, given 250K is not that large a figure ..
>
> Please Help
>
> Thanx
>
> Mo
>
>

------=_Part_36150_29562408.1156000958643--

From java-user-return-22801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 19 15:53:49 2006
Return-Path: <java-user-return-22801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7765 invoked from network); 19 Aug 2006 15:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 15:53:49 -0000
Received: (qmail 65011 invoked by uid 500); 19 Aug 2006 15:53:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64603 invoked by uid 500); 19 Aug 2006 15:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64590 invoked by uid 99); 19 Aug 2006 15:53:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 08:53:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 08:53:40 -0700
Received: by py-out-1112.google.com with SMTP id x66so2945603pye
        for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 08:53:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ik7IukwAUPp5AdxnVVPkGP3UhNK9AJZM5narAvZ0veC/hiigD/WOLlD41xyYUsxgxoW8vvHOm0V1Fd8cFKDrqW7F+bSez1DJv3kdD/1O+M3lmvgCPiHP33kpMx1qdEUhutw65Y0en8o+P1vUmu1fF5iFqcreAZhrFGKdVUyQGYo=
Received: by 10.64.149.15 with SMTP id w15mr1888666qbd;
        Sat, 19 Aug 2006 08:53:19 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Sat, 19 Aug 2006 08:53:19 -0700 (PDT)
Message-ID: <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
Date: Sat, 19 Aug 2006 16:53:19 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13143_19132331.1156002799608"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13143_19132331.1156002799608
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

what i am measuring is this

Analyzer analyzer = new StandardAnalyzer(new String[]{});

    if(fldArray.length > 1)
    {
      BooleanClause.Occur[] flags = {BooleanClause.Occur.SHOULD,
BooleanClause.Occur.SHOULD, BooleanClause.Occur.SHOULD,
BooleanClause.Occur.SHOULD};
      query = MultiFieldQueryParser.parse(queryString, fldArray, flags,
analyzer); //parse the
    }
    else
    {
      query = new QueryParser("tags", analyzer).parse(queryString);
      System.err.println("QUERY IS " + query.toString());

    }

long ts = System.currentTimeMillis();

    hits = searcher.search(query, new Sort("sid", true));
    java.util.Set terms = new java.util.HashSet();
    query.extractTerms(terms);
    Object[] strTerms = terms.toArray();

long ta = System.currentTimeMillis();

 System.err.println("Retrived Hits in " + (ta - ts));

 recent figures for this ..

Retrived Hits in 26974 (msec)
Retrived Hits in 61415 (msec)

The query itself is just a word, eg "apple"

The index is contructed as follows ..

// this process runs as a daemon process ...

                iwriter = new IndexWriter(INDEX_PATH, new
StandardAnalyzer(new String[]{}), false);
                Document doc = new Document();
                doc.add(new Field("id", String.valueOf(story.getId()),
Field.Store.YES, Field.Index.NO));
                doc.add(new
Field("sid",String.valueOf(story.getDate().getTime()),
Field.Store.YES, Field.Index.UN_TOKENIZED));
                String tags = getTags(story.getId());
                doc.add(new Field("tags", tags, Field.Store.YES,
Field.Index.TOKENIZED));
                doc.add(new Field("headline", story.getHeadline(),
Field.Store.YES, Field.Index.TOKENIZED));
                doc.add(new Field("blurb", story.getBlurb(), Field.Store.YES,
Field.Index.TOKENIZED));
                doc.add(new Field("content", story.getContent(),
Field.Store.YES, Field.Index.TOKENIZED));
                doc.add(new Field("catid", String.valueOf(story.getCategory()),
Field.Store.YES, Field.Index.TOKENIZED));
                iwriter.addDocument(doc);

// then iwriter.close()

optimize just runs once a day, after some deletions .

The tags are select words  .. in total about 20K different ones in
combination ..

so story.getTags() -> Returns a string of the type "XXX YYY ZZZ YYY CCC DDD"
story.getId() -> returns a long
story.sid -> thats a long too
story.getContent() -> returns text in most cases sometimes its blank
story.getHeadline() -> returns text usually about 512 chars
story.getBlurb() -> returns text about 255 chars
story.getCatid() -> returns a long


that covers both sections i.e. the read and the write ..

I did look at luke, but unfortunately the docs dont seem to refer to a
commandline interface to it (unless i missed something).. This is running on
a headless box ..

Cheers

Mohammed.



On 8/19/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> This is a loooonnnnnggg time, I think you're right, it's excessive.
>
> What are you timing? The time to complete the search (i.e. get a Hits
> object
> back) or the total time to assemble the response? Why I ask is that the
> Hits
> object is designed to return the fir st100 or so docs efficiently. Every
> 100
> docs or so, it re-executes the query. So, if you're returning a large
> result
> set, the using the Hits object to iterate over them, this could account
> for
> your time. Use a HitCollector instead... But do note this from the javadoc
> for hitcollector
>
> ----
> . For good search performance, implementations of this method should not
> call Searcher.doc(int)<
> file:///C:/lucene_1.9.1/docs/api/org/apache/lucene/search/Searcher.html#doc%28int%29
> >or
> IndexReader.document(int)<
> file:///C:/lucene_1.9.1/docs/api/org/apache/lucene/index/IndexReader.html#document%28int%29
> >on
> every document number encountered. Doing so can slow searches by an
> order
> of magnitude or more.
> -----
>
> FWIW, I have indexes larger that 1G that return in far less time than you
> are indicating, through three layers and constructing web pages in the
> meantime. It contains over 800K documents and the response time is around
> a
> second (haven't timed it lately). This includes 5-way sorts.
>
> You might also either get a copy of Luke and have it explain exactly what
> the parse does or use one of the query exlain calls (sorry, don't remember
> them off the top of my head) to see what query is *actually* submitted and
> whether it's what you expect.
>
> Are you using wildcards? They also have an effect on query speed.
>
> If none of this applies, perhaps you could post the query and the how the
> index is constructed. If you haven't already gotten a copy of Luke, I
> heartily recommend it....
>
> Hope this helps
> Erick
>
> On 8/19/06, M A <geneticflyer@googlemail.com> wrote:
> >
> > Hi there,
> >
> > I have an index with about 250K document, to be indexed full text.
> >
> > there are 2 types of searches carried out, 1. using 1 field, the other
> > using
> > 4 .. for a query string ...
> >
> > given the nature of the queries required, all stop words are maintained
> in
> > the index, thereby allowing for phrasal queries, (this is a requirement)
> > ..
> >
> > So search I am using the following ..
> >
> > if(fldArray.length > 1)
> >     {
> >       // use four fields
> >       BooleanClause.Occur[] flags = {BooleanClause.Occur.SHOULD,
> > BooleanClause.Occur.SHOULD, BooleanClause.Occur.SHOULD,
> > BooleanClause.Occur.SHOULD};
> >       query = MultiFieldQueryParser.parse(queryString, fldArray, flags,
> > analyzer); //parse the
> >     }
> >     else
> >     {
> >       //use only 1 field
> >       query = new QueryParser("tags", analyzer).parse(queryString);
> >     }
> >
> >
> > When i search on the 4 fields the average search time is 16 sec ..
> > When i search on the 1 field the average search time is 9 secs ...
> >
> > The Analyzer used for both searching and indexing is
> > Analyzer analyzer = new StandardAnalyzer(new String[]{});
> >
> > The index size is about a 1GB ..
> >
> > The documents vary in size some are less than 1K max size is about 5k
> >
> >
> >
> > Is there anything I can do to make this faster.... 16 secs is just not
> > acceptable ..
> >
> > Machine : 512MB, celeron 2600 ...  Lucene 2.0
> >
> > I could go for a bigger machine but wanted to make sure that the problem
> > was
> > not something I was doing, given 250K is not that large a figure ..
> >
> > Please Help
> >
> > Thanx
> >
> > Mo
> >
> >
>
>

------=_Part_13143_19132331.1156002799608--

From java-user-return-22802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 19 22:47:51 2006
Return-Path: <java-user-return-22802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25123 invoked from network); 19 Aug 2006 22:47:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 22:47:51 -0000
Received: (qmail 10102 invoked by uid 500); 19 Aug 2006 22:47:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10061 invoked by uid 500); 19 Aug 2006 22:47:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10050 invoked by uid 99); 19 Aug 2006 22:47:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 15:47:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 15:47:43 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4BF085B76C; Sat, 19 Aug 2006 15:47:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 32EFF7F403
	for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 15:47:08 -0700 (PDT)
Date: Sat, 19 Aug 2006 15:47:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Overriding Similarity
In-Reply-To: <30dc7a660608190052v1ad48223r427b2ec1c00fc737@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608191538060.31867@hal.rescomp.berkeley.edu>
References: <EE38B784-267C-4224-9FB3-4974BC4910C7@syr.edu> 
 <Pine.LNX.4.58.0608181220440.31103@hal.rescomp.berkeley.edu> 
 <746be7310608182359w197a1b56vc5f0a5ed876e5c4e@mail.gmail.com>
 <30dc7a660608190052v1ad48223r427b2ec1c00fc737@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: And then I made this subclass the default similarity. It worked well
: for tf but not for lengthNorm. The reason appears to be that the
: TermScorer class does not call lengthNorm, but instead uses a cache

Acctually, the lengthNorm method is used by the IndexWriter; it compresses
the float returned by lengthNorm into a representation that uses a single
byte, and writes it to a file (one per field) which is exposed by
IndexReader.norms(field) for use in the Scorers.

:          NORM_TABLE[i] = 1.0f; //Originally: NORM_TABLE[i] =
: SmallFloat.byte315ToFloat((byte)i);

that norm table is just used as a cache of mappings from the "byte
encoded" values to the nearest float value so that Scorers don't need to
call SmallFloat.byte315ToFloat((byte)i) everytime.

If you use Similarity.setDefault (or IndexWriter.setSimilarity) before
building your index you shouldn't need that change.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 19 22:52:44 2006
Return-Path: <java-user-return-22803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26765 invoked from network); 19 Aug 2006 22:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2006 22:52:43 -0000
Received: (qmail 16752 invoked by uid 500); 19 Aug 2006 22:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16715 invoked by uid 500); 19 Aug 2006 22:52:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16704 invoked by uid 99); 19 Aug 2006 22:52:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 15:52:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 15:52:37 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 424885B76C; Sat, 19 Aug 2006 15:52:17 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3F8217F403
	for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 15:52:17 -0700 (PDT)
Date: Sat, 19 Aug 2006 15:52:17 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com> 
 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


:     hits = searcher.search(query, new Sort("sid", true));

you don't show where searcher is initialized, and you don't clarify how
you are timing your multiple iterations -- i'm going to guess that you are
opening a new searcher every iteration right?

sorting on a field requires pre-computing an array of information for that
field -- this is both time and space expensive, and is cached per
IndexReader/IndexSearcher -- so if you reuse the same searcher and time
multiple iterations you'll find that hte first iteration might be somewhat
slow, but the rest should be very fast.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 00:01:37 2006
Return-Path: <java-user-return-22804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35846 invoked from network); 20 Aug 2006 00:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 00:01:37 -0000
Received: (qmail 66089 invoked by uid 500); 20 Aug 2006 00:01:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65788 invoked by uid 500); 20 Aug 2006 00:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65777 invoked by uid 99); 20 Aug 2006 00:01:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 17:01:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 17:01:29 -0700
Received: by py-out-1112.google.com with SMTP id w49so1759821pyg
        for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 17:01:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OVzXxbCwlC0eYoCxXP8S7Wn6nrypswm8tT9kFK5bcyzmdWO8mKoSClsn+16wjm5qpcQHRZafcdIszzVA031NYGEcc+EtOhwMVrL25VhiJP8etYU4RIfS2fLLy0imcb2ZYDQOFpAmFIEk/lFi0wop3qI6IEbsgHAt0GGYh/FaACQ=
Received: by 10.65.251.1 with SMTP id d1mr3725417qbs;
        Sat, 19 Aug 2006 17:01:05 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Sat, 19 Aug 2006 17:01:05 -0700 (PDT)
Message-ID: <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
Date: Sun, 20 Aug 2006 01:01:05 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15155_4738209.1156032065125"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_15155_4738209.1156032065125
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes there is a new searcher opened each time a search is conducted,

This is because the index is updated every 5 mins or so, due to the incoming
feed of stories ..

When you say iteration, i take it you mean, search request, well for each
search that is conducted I create a new one .. search reader that is ..



On 8/19/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> :     hits = searcher.search(query, new Sort("sid", true));
>
> you don't show where searcher is initialized, and you don't clarify how
> you are timing your multiple iterations -- i'm going to guess that you are
> opening a new searcher every iteration right?
>
> sorting on a field requires pre-computing an array of information for that
> field -- this is both time and space expensive, and is cached per
> IndexReader/IndexSearcher -- so if you reuse the same searcher and time
> multiple iterations you'll find that hte first iteration might be somewhat
> slow, but the rest should be very fast.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15155_4738209.1156032065125--

From java-user-return-22805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 00:44:06 2006
Return-Path: <java-user-return-22805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48858 invoked from network); 20 Aug 2006 00:44:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 00:44:06 -0000
Received: (qmail 92818 invoked by uid 500); 20 Aug 2006 00:44:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92781 invoked by uid 500); 20 Aug 2006 00:44:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92770 invoked by uid 99); 20 Aug 2006 00:44:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 17:44:00 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mhh1977@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 17:44:00 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1127834wxc
        for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 17:43:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=elURtDcPlVnf3B75/yjOfV42m2QeFPrxicjZ00hlb67eJ31tzhEvEgiMf9FbCd3t3rfMSOLGQvYgqepx82uLAQOo1kgxwGKecsERpVjTDk7+yLBSeZTT/jPzg3/DPexFLleXm6Lu8asFBKfDeUTQuVcHgtoEXPXue6HreGYjNw0=
Received: by 10.90.52.18 with SMTP id z18mr69266agz;
        Sat, 19 Aug 2006 17:43:39 -0700 (PDT)
Received: by 10.90.51.1 with HTTP; Sat, 19 Aug 2006 17:43:39 -0700 (PDT)
Message-ID: <30dc7a660608191743y4f8b40b7xab364ddc6d2e4415@mail.gmail.com>
Date: Sun, 20 Aug 2006 09:43:39 +0900
From: "MH H" <mhh1977@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Overriding Similarity
In-Reply-To: <Pine.LNX.4.58.0608191538060.31867@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <EE38B784-267C-4224-9FB3-4974BC4910C7@syr.edu>
	 <Pine.LNX.4.58.0608181220440.31103@hal.rescomp.berkeley.edu>
	 <746be7310608182359w197a1b56vc5f0a5ed876e5c4e@mail.gmail.com>
	 <30dc7a660608190052v1ad48223r427b2ec1c00fc737@mail.gmail.com>
	 <Pine.LNX.4.58.0608191538060.31867@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ah, I see, I should of course use the same similarity during indexing
and searching. Many thanks!

On 20/08/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : And then I made this subclass the default similarity. It worked well
> : for tf but not for lengthNorm. The reason appears to be that the
> : TermScorer class does not call lengthNorm, but instead uses a cache
>
> Acctually, the lengthNorm method is used by the IndexWriter; it compresses
> the float returned by lengthNorm into a representation that uses a single
> byte, and writes it to a file (one per field) which is exposed by
> IndexReader.norms(field) for use in the Scorers.
>
> :          NORM_TABLE[i] = 1.0f; //Originally: NORM_TABLE[i] =
> : SmallFloat.byte315ToFloat((byte)i);
>
> that norm table is just used as a cache of mappings from the "byte
> encoded" values to the nearest float value so that Scorers don't need to
> call SmallFloat.byte315ToFloat((byte)i) everytime.
>
> If you use Similarity.setDefault (or IndexWriter.setSimilarity) before
> building your index you shouldn't need that change.
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 00:48:42 2006
Return-Path: <java-user-return-22806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49499 invoked from network); 20 Aug 2006 00:48:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 00:48:42 -0000
Received: (qmail 95380 invoked by uid 500); 20 Aug 2006 00:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95346 invoked by uid 500); 20 Aug 2006 00:48:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95335 invoked by uid 99); 20 Aug 2006 00:48:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 17:48:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Aug 2006 17:48:36 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6FEAC5B76C; Sat, 19 Aug 2006 17:48:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5A2C17F403
	for <java-user@lucene.apache.org>; Sat, 19 Aug 2006 17:48:13 -0700 (PDT)
Date: Sat, 19 Aug 2006 17:48:13 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com> 
 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com> 
 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com> 
 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: This is because the index is updated every 5 mins or so, due to the incoming
: feed of stories ..
:
: When you say iteration, i take it you mean, search request, well for each
: search that is conducted I create a new one .. search reader that is ..

yeah ... i ment iteration of your test.  don't do that.

if the index is updated every 5 minutes, then open a new searcher every 5
minutes -- and reuse it for theentire 5 minutes.  if it's updated
"sparadically throughout the day" then open a search, and keep using it
untill the index is udated, then open a new one.

reusing an indexsearcher as long as possible is one of biggest factors of
Lucene applications.

:
:
:
: On 8/19/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
: >
: >
: > :     hits = searcher.search(query, new Sort("sid", true));
: >
: > you don't show where searcher is initialized, and you don't clarify how
: > you are timing your multiple iterations -- i'm going to guess that you are
: > opening a new searcher every iteration right?
: >
: > sorting on a field requires pre-computing an array of information for that
: > field -- this is both time and space expensive, and is cached per
: > IndexReader/IndexSearcher -- so if you reuse the same searcher and time
: > multiple iterations you'll find that hte first iteration might be somewhat
: > slow, but the rest should be very fast.
: >
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 09:36:18 2006
Return-Path: <java-user-return-22807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72658 invoked from network); 20 Aug 2006 09:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 09:36:18 -0000
Received: (qmail 10828 invoked by uid 500); 20 Aug 2006 09:36:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10795 invoked by uid 500); 20 Aug 2006 09:36:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10784 invoked by uid 99); 20 Aug 2006 09:36:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 02:36:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 02:36:08 -0700
Received: by py-out-1112.google.com with SMTP id w49so1899198pyg
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 02:35:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VtmrOMGBQ4WJDZwX6htc302mkXGJ7l8j+AhUA2a4mW19vOAzr7ESgWXr28Dm+QxIme65JaDwEQ5D6LnGreW+If37C0t3Ba948tU4U4UvYOb3VZfHXL2ESc+fqTtqjo1S8mZPbJE6LaSDbM45DESIsH5tkhoUzE3P1gk9BX2WXvQ=
Received: by 10.64.210.3 with SMTP id i3mr2491226qbg;
        Sun, 20 Aug 2006 02:35:45 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Sun, 20 Aug 2006 02:35:45 -0700 (PDT)
Message-ID: <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
Date: Sun, 20 Aug 2006 10:35:45 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16689_5469988.1156066545398"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_16689_5469988.1156066545398
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok I get your point, this still however means the first search on the new
searcher will take a huge amount of time .. given that this is happening now
..

i.e. new search -> new query -> get hits ->20+ secs ..  this happens every 5
mins or so ..

although subsequent searches may be quicker ..

Am i to assume for a first search the amount of  time is ok -> .. seems like
a long time to me ..?

The other thing is the sorting is fixed .. it never changes .. it is always
sorted by the same field ..

i just built the entire index and it still takes ages .,..








On 8/20/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : This is because the index is updated every 5 mins or so, due to the
> incoming
> : feed of stories ..
> :
> : When you say iteration, i take it you mean, search request, well for
> each
> : search that is conducted I create a new one .. search reader that is ..
>
> yeah ... i ment iteration of your test.  don't do that.
>
> if the index is updated every 5 minutes, then open a new searcher every 5
> minutes -- and reuse it for theentire 5 minutes.  if it's updated
> "sparadically throughout the day" then open a search, and keep using it
> untill the index is udated, then open a new one.
>
> reusing an indexsearcher as long as possible is one of biggest factors of
> Lucene applications.
>
> :
> :
> :
> : On 8/19/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : >
> : >
> : > :     hits = searcher.search(query, new Sort("sid", true));
> : >
> : > you don't show where searcher is initialized, and you don't clarify
> how
> : > you are timing your multiple iterations -- i'm going to guess that you
> are
> : > opening a new searcher every iteration right?
> : >
> : > sorting on a field requires pre-computing an array of information for
> that
> : > field -- this is both time and space expensive, and is cached per
> : > IndexReader/IndexSearcher -- so if you reuse the same searcher and
> time
> : > multiple iterations you'll find that hte first iteration might be
> somewhat
> : > slow, but the rest should be very fast.
> : >
> : >
> : >
> : > -Hoss
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> : >
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16689_5469988.1156066545398--

From java-user-return-22808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 12:52:42 2006
Return-Path: <java-user-return-22808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10443 invoked from network); 20 Aug 2006 12:52:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 12:52:41 -0000
Received: (qmail 68835 invoked by uid 500); 20 Aug 2006 12:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67860 invoked by uid 500); 20 Aug 2006 12:52:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67849 invoked by uid 99); 20 Aug 2006 12:52:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 05:52:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 05:52:33 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 407A730EFCD3; Sun, 20 Aug 2006 08:52:13 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9109930EFCD3
	for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 08:52:09 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com> <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com> <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com> <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu> <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com> <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu> <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6DCFE9CE-ABD0-4EE6-B5B9-A686876B2286@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search Performance Problem 16 sec for 250K docs
Date: Sun, 20 Aug 2006 08:52:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is why a warming strategy like Solr takes is very valuable.  The  
searchable index is always serving up requests as fast as Lucene  
works, which is achieved by warming a new IndexSearcher with searches/ 
sorts/filter creating/etc before it is swapped into use.

	Erik


On Aug 20, 2006, at 5:35 AM, M A wrote:

> Ok I get your point, this still however means the first search on  
> the new
> searcher will take a huge amount of time .. given that this is  
> happening now
> ..
>
> i.e. new search -> new query -> get hits ->20+ secs ..  this  
> happens every 5
> mins or so ..
>
> although subsequent searches may be quicker ..
>
> Am i to assume for a first search the amount of  time is ok -> ..  
> seems like
> a long time to me ..?
>
> The other thing is the sorting is fixed .. it never changes .. it  
> is always
> sorted by the same field ..
>
> i just built the entire index and it still takes ages .,..
>
>
>
>
>
>
>
>
> On 8/20/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>>
>>
>> : This is because the index is updated every 5 mins or so, due to the
>> incoming
>> : feed of stories ..
>> :
>> : When you say iteration, i take it you mean, search request, well  
>> for
>> each
>> : search that is conducted I create a new one .. search reader  
>> that is ..
>>
>> yeah ... i ment iteration of your test.  don't do that.
>>
>> if the index is updated every 5 minutes, then open a new searcher  
>> every 5
>> minutes -- and reuse it for theentire 5 minutes.  if it's updated
>> "sparadically throughout the day" then open a search, and keep  
>> using it
>> untill the index is udated, then open a new one.
>>
>> reusing an indexsearcher as long as possible is one of biggest  
>> factors of
>> Lucene applications.
>>
>> :
>> :
>> :
>> : On 8/19/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>> : >
>> : >
>> : > :     hits = searcher.search(query, new Sort("sid", true));
>> : >
>> : > you don't show where searcher is initialized, and you don't  
>> clarify
>> how
>> : > you are timing your multiple iterations -- i'm going to guess  
>> that you
>> are
>> : > opening a new searcher every iteration right?
>> : >
>> : > sorting on a field requires pre-computing an array of  
>> information for
>> that
>> : > field -- this is both time and space expensive, and is cached per
>> : > IndexReader/IndexSearcher -- so if you reuse the same searcher  
>> and
>> time
>> : > multiple iterations you'll find that hte first iteration might be
>> somewhat
>> : > slow, but the rest should be very fast.
>> : >
>> : >
>> : >
>> : > -Hoss
>> : >
>> : >
>> : >  
>> ---------------------------------------------------------------------
>> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> : > For additional commands, e-mail: java-user-help@lucene.apache.org
>> : >
>> : >
>> :
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 12:57:12 2006
Return-Path: <java-user-return-22809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11465 invoked from network); 20 Aug 2006 12:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 12:57:12 -0000
Received: (qmail 72850 invoked by uid 500); 20 Aug 2006 12:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71792 invoked by uid 500); 20 Aug 2006 12:57:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71781 invoked by uid 99); 20 Aug 2006 12:57:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 05:57:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 05:57:05 -0700
Received: by py-out-1112.google.com with SMTP id w49so1951192pyg
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 05:56:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q/lq7v7iUOxngdMSg0iNMStIOS5XdtfYyoszo4/qLSaZcPGI4hyZCB7URWm8O+6MUcvGtZG8BqoAZx/cV0Na7xmtRH2avAA3BTvZqTMZuNRxPrHbOOz8XvE1RNdPCTVxawQr1PKOOQSya571ZEZEUb9Ghm+1op9dCmkaY0mfXP0=
Received: by 10.64.143.4 with SMTP id q4mr4054423qbd;
        Sun, 20 Aug 2006 05:56:44 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Sun, 20 Aug 2006 05:56:44 -0700 (PDT)
Message-ID: <78bc38bc0608200556j8332d96ge98c8c01c5d02b92@mail.gmail.com>
Date: Sun, 20 Aug 2006 13:56:44 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <6DCFE9CE-ABD0-4EE6-B5B9-A686876B2286@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17437_32629851.1156078604765"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <6DCFE9CE-ABD0-4EE6-B5B9-A686876B2286@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17437_32629851.1156078604765
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Just ran some tests .. it appears that the problem is in the sorting ..

i.e.

//hits = searcher.search(query, new Sort("sid", true));    -> 17 secs
//hits = searcher.search(query, new Sort("sid", false)); -> 17 secs
hits = searcher.search(query);    -> less than 1 sec ..

am trying something out .. .. will keep you posted





On 8/20/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> This is why a warming strategy like Solr takes is very valuable.  The
> searchable index is always serving up requests as fast as Lucene
> works, which is achieved by warming a new IndexSearcher with searches/
> sorts/filter creating/etc before it is swapped into use.
>
>        Erik
>
>
> On Aug 20, 2006, at 5:35 AM, M A wrote:
>
> > Ok I get your point, this still however means the first search on
> > the new
> > searcher will take a huge amount of time .. given that this is
> > happening now
> > ..
> >
> > i.e. new search -> new query -> get hits ->20+ secs ..  this
> > happens every 5
> > mins or so ..
> >
> > although subsequent searches may be quicker ..
> >
> > Am i to assume for a first search the amount of  time is ok -> ..
> > seems like
> > a long time to me ..?
> >
> > The other thing is the sorting is fixed .. it never changes .. it
> > is always
> > sorted by the same field ..
> >
> > i just built the entire index and it still takes ages .,..
> >
> >
> >
> >
> >
> >
> >
> >
> > On 8/20/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >>
> >>
> >> : This is because the index is updated every 5 mins or so, due to the
> >> incoming
> >> : feed of stories ..
> >> :
> >> : When you say iteration, i take it you mean, search request, well
> >> for
> >> each
> >> : search that is conducted I create a new one .. search reader
> >> that is ..
> >>
> >> yeah ... i ment iteration of your test.  don't do that.
> >>
> >> if the index is updated every 5 minutes, then open a new searcher
> >> every 5
> >> minutes -- and reuse it for theentire 5 minutes.  if it's updated
> >> "sparadically throughout the day" then open a search, and keep
> >> using it
> >> untill the index is udated, then open a new one.
> >>
> >> reusing an indexsearcher as long as possible is one of biggest
> >> factors of
> >> Lucene applications.
> >>
> >> :
> >> :
> >> :
> >> : On 8/19/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >> : >
> >> : >
> >> : > :     hits = searcher.search(query, new Sort("sid", true));
> >> : >
> >> : > you don't show where searcher is initialized, and you don't
> >> clarify
> >> how
> >> : > you are timing your multiple iterations -- i'm going to guess
> >> that you
> >> are
> >> : > opening a new searcher every iteration right?
> >> : >
> >> : > sorting on a field requires pre-computing an array of
> >> information for
> >> that
> >> : > field -- this is both time and space expensive, and is cached per
> >> : > IndexReader/IndexSearcher -- so if you reuse the same searcher
> >> and
> >> time
> >> : > multiple iterations you'll find that hte first iteration might be
> >> somewhat
> >> : > slow, but the rest should be very fast.
> >> : >
> >> : >
> >> : >
> >> : > -Hoss
> >> : >
> >> : >
> >> : >
> >> ---------------------------------------------------------------------
> >> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> : >
> >> : >
> >> :
> >>
> >>
> >>
> >> -Hoss
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17437_32629851.1156078604765--

From java-user-return-22810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 13:17:12 2006
Return-Path: <java-user-return-22810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15214 invoked from network); 20 Aug 2006 13:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 13:17:12 -0000
Received: (qmail 90493 invoked by uid 500); 20 Aug 2006 13:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89451 invoked by uid 500); 20 Aug 2006 13:17:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89440 invoked by uid 99); 20 Aug 2006 13:17:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 06:17:06 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 06:17:05 -0700
Received: by py-out-1112.google.com with SMTP id w49so1956592pyg
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 06:16:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XJQ5Rk7MxMnoL8mXESOWmsfhRUDXjYQjgqwXW0Hnclv5L/J6rZmsUcLBfiRdfwhfoUK5/A5PurO9BJgQ2HSWZHIG/6WnXCGE4I1KT3ZcNfxJkG5yGVrrh3ll2uEjt1ftAF34Aho9f8EiCGFvqCLO9JP0+mlktN7y51duKPQYWsI=
Received: by 10.35.45.1 with SMTP id x1mr10735533pyj;
        Sun, 20 Aug 2006 06:16:22 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 20 Aug 2006 06:16:21 -0700 (PDT)
Message-ID: <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
Date: Sun, 20 Aug 2006 09:16:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43747_7913067.1156079781764"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_43747_7913067.1156079781764
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

About luke... I don't know about command-line interfaces, but if you copy
your index to a different machine and use Luke there. I do this between
Linux and Windows boxes all the time. Or, if you can mount the remote drive
so you can see it, you can just use Luke to browse to it and open it up. You
may have some latency though.....

See below...

On 8/20/06, M A <geneticflyer@googlemail.com> wrote:
>
> Ok I get your point, this still however means the first search on the new
> searcher will take a huge amount of time .. given that this is happening
> now
> ..


You can fire one or several canned queries at the searcher whenever you open
a new one. That way the first time a *user* hits the box, the warm-up will
already have happened. Note that the same searcher can be used by multiple
threads...


i.e. new search -> new query -> get hits ->20+ secs ..  this happens every 5
> mins or so ..
>
> although subsequent searches may be quicker ..
>
> Am i to assume for a first search the amount of  time is ok -> .. seems
> like
> a long time to me ..?
>
> The other thing is the sorting is fixed .. it never changes .. it is
> always
> sorted by the same field ..


Assuming that you still have performance issues, you could think about
building your index in pre-sorted order an just avoiding the sorting all
together. The internal Lucene document IDs are then your sort order (a newly
added doc hast an ID that is always greater than any existing doc ID). I
don't know details of your problem space, but this might be relatively
easy.... You won't want to return things in relevance order in that case. In
fact, you probably don't want relevance in place at all since your sorting
doesn't change.... I think a ConstantScoreQuery  might work for you here.

But I wouldn't go there unless you have evidence that your sort is slowing
you down, which is easy enough to verify by just taking it out. Don't bother
with any of this until you re-use your reader though....

i just built the entire index and it still takes ages .,..


The search took ages? Or building the index? If the former, then rebuilding
the index is irrelevant, it's the first time you use a searcher that counts.

On 8/20/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> >
> > : This is because the index is updated every 5 mins or so, due to the
> > incoming
> > : feed of stories ..
> > :
> > : When you say iteration, i take it you mean, search request, well for
> > each
> > : search that is conducted I create a new one .. search reader that is
> ..
> >
> > yeah ... i ment iteration of your test.  don't do that.
> >
> > if the index is updated every 5 minutes, then open a new searcher every
> 5
> > minutes -- and reuse it for theentire 5 minutes.  if it's updated
> > "sparadically throughout the day" then open a search, and keep using it
> > untill the index is udated, then open a new one.
> >
> > reusing an indexsearcher as long as possible is one of biggest factors
> of
> > Lucene applications.
> >
> > :
> > :
> > :
> > : On 8/19/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > : >
> > : >
> > : > :     hits = searcher.search(query, new Sort("sid", true));
> > : >
> > : > you don't show where searcher is initialized, and you don't clarify
> > how
> > : > you are timing your multiple iterations -- i'm going to guess that
> you
> > are
> > : > opening a new searcher every iteration right?
> > : >
> > : > sorting on a field requires pre-computing an array of information
> for
> > that
> > : > field -- this is both time and space expensive, and is cached per
> > : > IndexReader/IndexSearcher -- so if you reuse the same searcher and
> > time
> > : > multiple iterations you'll find that hte first iteration might be
> > somewhat
> > : > slow, but the rest should be very fast.
> > : >
> > : >
> > : >
> > : > -Hoss
> > : >
> > : >
> > : >
> ---------------------------------------------------------------------
> > : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > : > For additional commands, e-mail: java-user-help@lucene.apache.org
> > : >
> > : >
> > :
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_43747_7913067.1156079781764--

From java-user-return-22811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 13:20:11 2006
Return-Path: <java-user-return-22811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18170 invoked from network); 20 Aug 2006 13:20:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 13:20:11 -0000
Received: (qmail 93396 invoked by uid 500); 20 Aug 2006 13:20:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92847 invoked by uid 500); 20 Aug 2006 13:20:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92836 invoked by uid 99); 20 Aug 2006 13:20:05 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 06:20:04 -0700
Received: by py-out-1112.google.com with SMTP id w49so1957208pyg
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 06:18:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SidoTk6E4QqF0LqojQQ8+IAlCoo4KpybHm/z5X+6DI5aZWXyuuo2JDrsojQDgfNMkVZQxJPfMwTtVAQclj1IdgQNdx1Cfpdo5XoJuIdHeiuKss907RXkQwftgrHbwFtsG6FfGKkBwykVcUcC0NgdqR+LxhZBCyjniw49SydNaJs=
Received: by 10.35.63.2 with SMTP id q2mr10774645pyk;
        Sun, 20 Aug 2006 06:18:43 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 20 Aug 2006 06:18:43 -0700 (PDT)
Message-ID: <359a92830608200618r7d4ef7a0y459784ed85e0282d@mail.gmail.com>
Date: Sun, 20 Aug 2006 09:18:43 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43755_9340613.1156079923527"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_43755_9340613.1156079923527
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Talk about mails crossing in the aether...... wrote my resonse before seeing
the last two...

Sounds like you're on track.

Erick

On 8/20/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> About luke... I don't know about command-line interfaces, but if you copy
> your index to a different machine and use Luke there. I do this between
> Linux and Windows boxes all the time. Or, if you can mount the remote drive
> so you can see it, you can just use Luke to browse to it and open it up. You
> may have some latency though.....
>
> See below...
>
> On 8/20/06, M A <geneticflyer@googlemail.com> wrote:
> >
> > Ok I get your point, this still however means the first search on the
> > new
> > searcher will take a huge amount of time .. given that this is happening
> > now
> > ..
>
>
> You can fire one or several canned queries at the searcher whenever you
> open a new one. That way the first time a *user* hits the box, the warm-up
> will already have happened. Note that the same searcher can be used by
> multiple threads...
>
>
> i.e. new search -> new query -> get hits ->20+ secs ..  this happens every
> > 5
> > mins or so ..
> >
> > although subsequent searches may be quicker ..
> >
> > Am i to assume for a first search the amount of  time is ok -> .. seems
> > like
> > a long time to me ..?
> >
> > The other thing is the sorting is fixed .. it never changes .. it is
> > always
> > sorted by the same field ..
>
>
> Assuming that you still have performance issues, you could think about
> building your index in pre-sorted order an just avoiding the sorting all
> together. The internal Lucene document IDs are then your sort order (a newly
> added doc hast an ID that is always greater than any existing doc ID). I
> don't know details of your problem space, but this might be relatively
> easy.... You won't want to return things in relevance order in that case. In
> fact, you probably don't want relevance in place at all since your sorting
> doesn't change.... I think a ConstantScoreQuery  might work for you here.
>
> But I wouldn't go there unless you have evidence that your sort is slowing
> you down, which is easy enough to verify by just taking it out. Don't bother
> with any of this until you re-use your reader though....
>
>
> i just built the entire index and it still takes ages .,..
>
>
> The search took ages? Or building the index? If the former, then
> rebuilding the index is irrelevant, it's the first time you use a searcher
> that counts.
>
> On 8/20/06, Chris Hostetter <hossman_lucene@fucit.org > wrote:
> > >
> > >
> > > : This is because the index is updated every 5 mins or so, due to the
> > > incoming
> > > : feed of stories ..
> > > :
> > > : When you say iteration, i take it you mean, search request, well for
> >
> > > each
> > > : search that is conducted I create a new one .. search reader that is
> > ..
> > >
> > > yeah ... i ment iteration of your test.  don't do that.
> > >
> > > if the index is updated every 5 minutes, then open a new searcher
> > every 5
> > > minutes -- and reuse it for theentire 5 minutes.  if it's updated
> > > "sparadically throughout the day" then open a search, and keep using
> > it
> > > untill the index is udated, then open a new one.
> > >
> > > reusing an indexsearcher as long as possible is one of biggest factors
> > of
> > > Lucene applications.
> > >
> > > :
> > > :
> > > :
> > > : On 8/19/06, Chris Hostetter < hossman_lucene@fucit.org> wrote:
> > > : >
> > > : >
> > > : > :     hits = searcher.search(query, new Sort("sid", true));
> > > : >
> > > : > you don't show where searcher is initialized, and you don't
> > clarify
> > > how
> > > : > you are timing your multiple iterations -- i'm going to guess that
> > you
> > > are
> > > : > opening a new searcher every iteration right?
> > > : >
> > > : > sorting on a field requires pre-computing an array of information
> > for
> > > that
> > > : > field -- this is both time and space expensive, and is cached per
> > > : > IndexReader/IndexSearcher -- so if you reuse the same searcher and
> > > time
> > > : > multiple iterations you'll find that hte first iteration might be
> > > somewhat
> > > : > slow, but the rest should be very fast.
> > > : >
> > > : >
> > > : >
> > > : > -Hoss
> > > : >
> > > : >
> > > : >
> > ---------------------------------------------------------------------
> > > : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > : > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > : >
> > > : >
> > > :
> > >
> > >
> > >
> > > -Hoss
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>

------=_Part_43755_9340613.1156079923527--

From java-user-return-22812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 13:49:10 2006
Return-Path: <java-user-return-22812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27533 invoked from network); 20 Aug 2006 13:49:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 13:49:10 -0000
Received: (qmail 12450 invoked by uid 500); 20 Aug 2006 13:48:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12407 invoked by uid 500); 20 Aug 2006 13:48:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12396 invoked by uid 99); 20 Aug 2006 13:48:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 06:48:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 06:48:57 -0700
Received: by py-out-1112.google.com with SMTP id w49so1965098pyg
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 06:48:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XOEGvRUxUZ+qcYFZJP3Q03Q6aGr0OAB7R/pks374yeDTnHdZ6w0YbsneeSwCGu6EbEf0F7c/TPjJqVeEHPPnwk8WdW8gFR6E4eSov15qFNyrqVSh/Sp75eaij1p97m6jHtdD2Tw8Xyhc2q1J7fCvm6dOGCcCBvBaXONEcc8ITzY=
Received: by 10.65.154.10 with SMTP id g10mr5606770qbo;
        Sun, 20 Aug 2006 06:48:11 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Sun, 20 Aug 2006 06:48:11 -0700 (PDT)
Message-ID: <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
Date: Sun, 20 Aug 2006 14:48:11 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17793_5189881.1156081691296"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17793_5189881.1156081691296
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The index is already built in date order i.e. the older documents appear
first in the index, what i am trying to achieve is however the latest
documents appearing first in the search results ..  without the sort .. i
think they appear by relevance .. well thats what it looked like ..

I am looking at the scoring as we speak,



On 8/20/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> About luke... I don't know about command-line interfaces, but if you copy
> your index to a different machine and use Luke there. I do this between
> Linux and Windows boxes all the time. Or, if you can mount the remote
> drive
> so you can see it, you can just use Luke to browse to it and open it up.
> You
> may have some latency though.....
>
> See below...
>
> On 8/20/06, M A <geneticflyer@googlemail.com> wrote:
> >
> > Ok I get your point, this still however means the first search on the
> new
> > searcher will take a huge amount of time .. given that this is happening
> > now
> > ..
>
>
> You can fire one or several canned queries at the searcher whenever you
> open
> a new one. That way the first time a *user* hits the box, the warm-up will
> already have happened. Note that the same searcher can be used by multiple
> threads...
>
>
> i.e. new search -> new query -> get hits ->20+ secs ..  this happens every
> 5
> > mins or so ..
> >
> > although subsequent searches may be quicker ..
> >
> > Am i to assume for a first search the amount of  time is ok -> .. seems
> > like
> > a long time to me ..?
> >
> > The other thing is the sorting is fixed .. it never changes .. it is
> > always
> > sorted by the same field ..
>
>
> Assuming that you still have performance issues, you could think about
> building your index in pre-sorted order an just avoiding the sorting all
> together. The internal Lucene document IDs are then your sort order (a
> newly
> added doc hast an ID that is always greater than any existing doc ID). I
> don't know details of your problem space, but this might be relatively
> easy.... You won't want to return things in relevance order in that case.
> In
> fact, you probably don't want relevance in place at all since your sorting
> doesn't change.... I think a ConstantScoreQuery  might work for you here.
>
> But I wouldn't go there unless you have evidence that your sort is slowing
> you down, which is easy enough to verify by just taking it out. Don't
> bother
> with any of this until you re-use your reader though....
>
> i just built the entire index and it still takes ages .,..
>
>
> The search took ages? Or building the index? If the former, then
> rebuilding
> the index is irrelevant, it's the first time you use a searcher that
> counts.
>
> On 8/20/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > >
> > >
> > > : This is because the index is updated every 5 mins or so, due to the
> > > incoming
> > > : feed of stories ..
> > > :
> > > : When you say iteration, i take it you mean, search request, well for
> > > each
> > > : search that is conducted I create a new one .. search reader that is
> > ..
> > >
> > > yeah ... i ment iteration of your test.  don't do that.
> > >
> > > if the index is updated every 5 minutes, then open a new searcher
> every
> > 5
> > > minutes -- and reuse it for theentire 5 minutes.  if it's updated
> > > "sparadically throughout the day" then open a search, and keep using
> it
> > > untill the index is udated, then open a new one.
> > >
> > > reusing an indexsearcher as long as possible is one of biggest factors
> > of
> > > Lucene applications.
> > >
> > > :
> > > :
> > > :
> > > : On 8/19/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > > : >
> > > : >
> > > : > :     hits = searcher.search(query, new Sort("sid", true));
> > > : >
> > > : > you don't show where searcher is initialized, and you don't
> clarify
> > > how
> > > : > you are timing your multiple iterations -- i'm going to guess that
> > you
> > > are
> > > : > opening a new searcher every iteration right?
> > > : >
> > > : > sorting on a field requires pre-computing an array of information
> > for
> > > that
> > > : > field -- this is both time and space expensive, and is cached per
> > > : > IndexReader/IndexSearcher -- so if you reuse the same searcher and
> > > time
> > > : > multiple iterations you'll find that hte first iteration might be
> > > somewhat
> > > : > slow, but the rest should be very fast.
> > > : >
> > > : >
> > > : >
> > > : > -Hoss
> > > : >
> > > : >
> > > : >
> > ---------------------------------------------------------------------
> > > : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > : > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > : >
> > > : >
> > > :
> > >
> > >
> > >
> > > -Hoss
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
>

------=_Part_17793_5189881.1156081691296--

From java-user-return-22813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 15:08:14 2006
Return-Path: <java-user-return-22813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39334 invoked from network); 20 Aug 2006 15:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 15:08:14 -0000
Received: (qmail 81792 invoked by uid 500); 20 Aug 2006 15:08:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81601 invoked by uid 500); 20 Aug 2006 15:08:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81590 invoked by uid 99); 20 Aug 2006 15:08:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 08:08:07 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 08:08:00 -0700
Received: by py-out-1112.google.com with SMTP id w49so1986355pyg
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 08:07:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=GDtobtZdvKM9OoH+BpV/bwsq6+PhTxJ3XT1O4SprWfkSzhROtmrKs1bFcqL+TZfIOg9B7E4w85AGyZpEa0CKHBNuK5QmcesJmWA+HOzdjTHasRgWzUFQBJ4mOmqNqPSVRWZJ/CRDWJ4y7lR9dmoX6/lkvSQihx2ATyqYuJO1WQw=
Received: by 10.35.40.10 with SMTP id s10mr10955624pyj;
        Sun, 20 Aug 2006 08:07:33 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Sun, 20 Aug 2006 08:07:33 -0700 (PDT)
Message-ID: <c68e39170608200807p5eda6a73i8a2c61bd51339ad8@mail.gmail.com>
Date: Sun, 20 Aug 2006 11:07:33 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Exception raised when searching with sorting on an empty index.
In-Reply-To: <1c5747850608181452v56d39ca8vd4eaf8079aea0b70@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1c5747850608181452v56d39ca8vd4eaf8079aea0b70@mail.gmail.com>
X-Google-Sender-Auth: 189cfa3cde42710a
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/18/06, Mathias Herberts <mathias.herberts@gmail.com> wrote:
> When doing a search with sorting on a field (ts) on the MultiSearcher
> with an empty RAM based index, an exception is thrown saying:
>
> no terms in field ts - cannot determine sort type

If you specify the type of sort you want, this shouldn't happen.
Letting Lucene guess the type (AUTO) shouldn't be done in a production
environment IMO.

Thinking about it though, I'm not sure why we need an exception thrown
in the case where there are no fields... that means all docs are equal
and we can simply select a string sort.

This made me thing of another failure mode for AUTO sorting (besides
guessing wrong or not having documents with that field)... a different
type could be guessed for different subsearchers.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 16:18:45 2006
Return-Path: <java-user-return-22814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58578 invoked from network); 20 Aug 2006 16:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 16:18:44 -0000
Received: (qmail 42351 invoked by uid 500); 20 Aug 2006 16:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42322 invoked by uid 500); 20 Aug 2006 16:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42283 invoked by uid 99); 20 Aug 2006 16:18:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 09:18:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO nz-out-0102.google.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 09:18:31 -0700
Received: by nz-out-0102.google.com with SMTP id i1so607118nzh
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 09:18:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=f56x2g6GcTBcfppPTc22W6PAyvwfeOTZwC+etfqh2mqoeLdNIlim+mmWCF6vTxSjyB6gKGi0XVX2DFGWRniNyaMN8jMjazIO1elzopPfmDooiDjm+eO4MYamhpFg10guxgxWxNt+v4qSclqnmYw1tn+KouITUNQs/uvzj391vB0=
Received: by 10.65.232.12 with SMTP id j12mr5754977qbr;
        Sun, 20 Aug 2006 09:18:04 -0700 (PDT)
Received: by 10.65.83.3 with HTTP; Sun, 20 Aug 2006 09:18:04 -0700 (PDT)
Message-ID: <a218b3050608200918k1f4a7f59if794ea5dc6c4e735@mail.gmail.com>
Date: Sun, 20 Aug 2006 18:18:04 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user <java-user@lucene.apache.org>
Subject: Singleton and IndexModifier
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18190_21915648.1156090684538"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_18190_21915648.1156090684538
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

when using the new IndexModifier of Lucene 2.0, what would be
the best creation-pattern?

Should there be one IndexModifier instance in the application (==singelton)?
Could an IndexModifier be opened for a longer time or should it be created
on use and immediately closed?

Another issue:
- I create an IndexModifier
- The applicaton crashes
- There exists a write-lock on the index
--> Next time I start the application the IndexModifier couldn't be opened
because of the locks.

What is the right way to check and delete old write locks?

Thanks
lude

------=_Part_18190_21915648.1156090684538--

From java-user-return-22815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 16:48:40 2006
Return-Path: <java-user-return-22815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64494 invoked from network); 20 Aug 2006 16:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 16:48:39 -0000
Received: (qmail 59689 invoked by uid 500); 20 Aug 2006 16:48:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59665 invoked by uid 500); 20 Aug 2006 16:48:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59654 invoked by uid 99); 20 Aug 2006 16:48:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 09:48:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 09:48:26 -0700
Received: by ug-out-1314.google.com with SMTP id y2so1250736uge
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 09:47:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WDVgZCzZ4JLcS8A1SIW+k9m+GveLONrgxxfWbkiqZaHuKFukpjuSAqJirUh5ZT3XjVheZtyKFU5Ix+6jWkQaoXrxrve7tSEzaYWSzc4VMsEPfox26dyGeJwNOw3WPeC+9W2eGPIqYx1LTWNNqtZCUEQ9egt7efSqzrnGQcxxVAI=
Received: by 10.67.101.8 with SMTP id d8mr3054804ugm;
        Sun, 20 Aug 2006 09:47:58 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Sun, 20 Aug 2006 09:47:58 -0700 (PDT)
Message-ID: <f18c9dde0608200947t7c48fc8dt29569fe0cf8e8e66@mail.gmail.com>
Date: Sun, 20 Aug 2006 18:47:58 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Singleton and IndexModifier
In-Reply-To: <a218b3050608200918k1f4a7f59if794ea5dc6c4e735@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a218b3050608200918k1f4a7f59if794ea5dc6c4e735@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/20/06, lude <lucene.developer@googlemail.com> wrote:
> Hello,
>
> when using the new IndexModifier of Lucene 2.0, what would be
> the best creation-pattern?
>
> Should there be one IndexModifier instance in the application (==singelton)?
> Could an IndexModifier be opened for a longer time or should it be created
> on use and immediately closed?
You create an indexmodifier if you want to modify your index. if you
wanna commit your data (make it available via index reader / searcher)
you close or rather flush your indexmodifier. After closing the
modifier you can create a new searcher and all modifications are
visible to the searcher / reader. Basically there is one index
modifier (or one single modifying instances per index as you must not
modify your index with more that one instance of indexreader -writer
-modifier). If you use the flush() method you don't need to create a
new IndexModifier instance.

You can leave your indexmod. open for a long time but without a commit
the indexed or deleted documents won't be visible to your searcher /
reader) Opening indexmodifiers is a heavy operation which should be
used carefully so you can close your modifier every n docs or after a
certain idle time.
Just be aware that IndexModifier uses IndexReader and IndexWriter
internally so if you do a delete after a addDocument the indexwriter
will be closed and a new indexreader will be opened. This is also a
heavy operation in the meaning of performance.
You could keep your deletes until you want to flush your instance of
IndexModifier to gain a bit of performance.
>
> Another issue:
> - I create an IndexModifier
> - The applicaton crashes
> - There exists a write-lock on the index
> --> Next time I start the application the IndexModifier couldn't be opened
> because of the locks.
>
> What is the right way to check and delete old write locks?
You can use the IndexReader.unlock(Directory dir) method the java doc says:

   * Caution: this should only be used by failure recovery code,
   * when it is known that no other process nor thread is in fact
   * currently accessing this index.

To make sure this happens only in recovery mode.

best regards Simon
>
> Thanks
> lude
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 23:17:37 2006
Return-Path: <java-user-return-22816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62004 invoked from network); 20 Aug 2006 23:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 23:17:36 -0000
Received: (qmail 32289 invoked by uid 500); 20 Aug 2006 23:17:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31992 invoked by uid 500); 20 Aug 2006 23:17:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31981 invoked by uid 99); 20 Aug 2006 23:17:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 16:17:30 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of samuelgiffney@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 16:17:29 -0700
Received: by wr-out-0506.google.com with SMTP id 37so254563wra
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 16:17:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=HUIDJcvEY1H/f+JfIvIBd2XUGXZtVXCNCVHbGb84JFbdp5rBNNQIWxRIbpZcX2ceZzu4ZgHS/MJUv1co08Xd8YGrwUuqBBwMVeVg4v7+OEjFXVNkdQfkgNJeJtFrSZCcE46n/T7EG+mss9Sbf9aNB7TMsOBY1P/asBmYAKQNlTg=
Received: by 10.90.73.3 with SMTP id v3mr82663aga;
        Sun, 20 Aug 2006 16:17:08 -0700 (PDT)
Received: by 10.90.82.12 with HTTP; Sun, 20 Aug 2006 16:17:08 -0700 (PDT)
Message-ID: <fc7839340608201617g45b7d259nf62272fe92b1f909@mail.gmail.com>
Date: Mon, 21 Aug 2006 11:17:08 +1200
From: "Sam Giffney" <samuelgiffney@gmail.com>
To: java-user@lucene.apache.org
Subject: Apostrophe S ('s)
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Using the Standard Analyzer the string
McDonald's
is indexed with the term
mcdonald

so it will be found by a (QueryParser parsed) query for
McDonald
or
McDonald's
but not
McDonalds

Wikipedia (who uses lucene) says on
http://en.wikipedia.org/wiki/Wikipedia:Searching

An apostrophe is identical to a single quote, therefore Mu'ammar can
be found searching for exactly that (and not otherwise). A word with
apostrophe s is an exception in that it can be found also searching
for the word without the apostrophe and the s.

Is this a custom parser?
How can one achieve this same exception most easily?

Sam

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 20 23:42:18 2006
Return-Path: <java-user-return-22817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65433 invoked from network); 20 Aug 2006 23:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2006 23:42:18 -0000
Received: (qmail 58790 invoked by uid 500); 20 Aug 2006 23:42:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58766 invoked by uid 500); 20 Aug 2006 23:42:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58755 invoked by uid 99); 20 Aug 2006 23:42:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 16:42:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 16:42:12 -0700
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 75751B735C
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 09:41:09 +1000 (EST)
Message-ID: <44E8F3DE.90304@nuix.com.au>
Date: Mon, 21 Aug 2006 09:44:30 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20060817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Apostrophe S ('s)
References: <fc7839340608201617g45b7d259nf62272fe92b1f909@mail.gmail.com>
In-Reply-To: <fc7839340608201617g45b7d259nf62272fe92b1f909@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sam Giffney wrote:
> Using the Standard Analyzer the string
> McDonald's
> is indexed with the term
> mcdonald
> 
> so it will be found by a (QueryParser parsed) query for
> McDonald
> or
> McDonald's
> but not
> McDonalds
> 
> Wikipedia (who uses lucene) says on
> http://en.wikipedia.org/wiki/Wikipedia:Searching
> 
> An apostrophe is identical to a single quote, therefore Mu'ammar can
> be found searching for exactly that (and not otherwise). A word with
> apostrophe s is an exception in that it can be found also searching
> for the word without the apostrophe and the s.
> 
> Is this a custom parser?

Following Wikipedia's explanation, McDonald's -> McDonald, by removing 
the apostrophe *AND* the s.  That text you quoted doesn't say that you 
can omit the apostrophe while leaving in the s, so my guess is they're 
using the exact same analyser.

In any case, have you tried using stemming?  Stemming would convert 
"mcdonalds" -> "mcdonald" so that both work.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 03:32:24 2006
Return-Path: <java-user-return-22818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35611 invoked from network); 21 Aug 2006 03:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 03:32:24 -0000
Received: (qmail 56730 invoked by uid 500); 21 Aug 2006 03:32:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56684 invoked by uid 500); 21 Aug 2006 03:32:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56673 invoked by uid 99); 21 Aug 2006 03:32:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 20:32:18 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yzy1980@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Aug 2006 20:32:17 -0700
Received: by ug-out-1314.google.com with SMTP id o2so1426730uge
        for <java-user@lucene.apache.org>; Sun, 20 Aug 2006 20:31:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=o+wUQj9wkR5Qv9iPU+MN8v96ZF/ZNvqSAeod0RCnAgDxSqCoaBnXAZH9q3pqem4QN/DZbut2qWkMiOE5Wa9ZkqxPDQsn2LzGKitD4DdfQ4k3OFETOeR/pW28152dHTzsQ8rSyG8Vdord20myr2fLCx5zRA1i5cvYpTlI3UFe6vU=
Received: by 10.67.100.17 with SMTP id c17mr3309881ugm;
        Sun, 20 Aug 2006 20:31:56 -0700 (PDT)
Received: by 10.67.25.3 with HTTP; Sun, 20 Aug 2006 20:31:56 -0700 (PDT)
Message-ID: <c2174c890608202031o6964e6b2t71442d808c636b10@mail.gmail.com>
Date: Mon, 21 Aug 2006 11:31:56 +0800
From: "zhongyi yuan" <yzy1980@gmail.com>
To: java-user@lucene.apache.org
Subject: =?GB2312?B?aG93IHRvIHVzZSBleHBsYWluIGZ1bmN0aW9uo6E=?=
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,all.Please give me  some example to use explain function.I want to
know detail information about compute weight and Score.

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 08:05:58 2006
Return-Path: <java-user-return-22819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16748 invoked from network); 21 Aug 2006 08:05:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 08:05:58 -0000
Received: (qmail 99641 invoked by uid 500); 21 Aug 2006 08:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99607 invoked by uid 500); 21 Aug 2006 08:05:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99596 invoked by uid 99); 21 Aug 2006 08:05:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 01:05:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 01:05:49 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D8D1130EFCD5; Mon, 21 Aug 2006 04:05:28 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 454EE30EFCD3
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 04:05:19 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c2174c890608202031o6964e6b2t71442d808c636b10@mail.gmail.com>
References: <c2174c890608202031o6964e6b2t71442d808c636b10@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2C933A81-6802-4E92-98FE-C9964EFAC91D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: =?UTF-8?Q?Re:_how_to_use_explain_function=EF=BC=81?=
Date: Mon, 21 Aug 2006 04:05:16 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 20, 2006, at 11:31 PM, zhongyi yuan wrote:

> Hi,all.Please give me  some example to use explain function.I want to
> know detail information about compute weight and Score.

<http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
Searcher.html#explain(org.apache.lucene.search.Query,%20int)>

Call searcher.explain(query, docId) and you'll get an Explanation  
<http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
Explanation.html> back.  To see it, output its toString().

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 08:17:43 2006
Return-Path: <java-user-return-22820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19334 invoked from network); 21 Aug 2006 08:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 08:17:43 -0000
Received: (qmail 19097 invoked by uid 500); 21 Aug 2006 08:17:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19018 invoked by uid 500); 21 Aug 2006 08:17:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18987 invoked by uid 99); 21 Aug 2006 08:17:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 01:17:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.54.76.193] (HELO ron.emn.fr) (193.54.76.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 01:17:27 -0700
Received: from spip.dsic.emn.fr (root@spip.dsic.emn.fr [193.104.32.156])
          by ron.emn.fr (8.9.3/jtpda-5.3.1) with ESMTP id KAA09208
          for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 10:15:54 +0200 (CEST)
Received: from ifs.emn.fr (ifs.emn.fr [193.54.76.100])
	by spip.dsic.emn.fr (8.12.1/8.12.1) with ESMTP id k7L8H03I008321
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 10:17:00 +0200
Received: from [192.168.18.35] (dhcp35.rech18.emn.fr [192.168.18.35])
          by ifs.emn.fr (8.9.3/jtpda-5.1) with ESMTP id KAA01491
          for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 10:15:33 +0200 (MEST)
Message-ID: <44E96BF7.4010906@emn.fr>
Date: Mon, 21 Aug 2006 10:16:55 +0200
From: "ould sid'ahmed" <nouldsid@emn.fr>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search for web address
References: <44E578A8.7070507@emn.fr>	 <f18c9dde0608180149xc92d18q80a414f2f3d41d59@mail.gmail.com>	 <44E58245.2020203@emn.fr> <359a92830608181157n24afc20etaa4557ebdf9a50de@mail.gmail.com>
In-Reply-To: <359a92830608181157n24afc20etaa4557ebdf9a50de@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thank you for your response,
I use WhiteSpaceAnalyzer for searching, and  the field it entirely 
indexed, I verified with Luke.
thanks
Erick Erickson a écrit :
> When you say you use a WhitespaceAnalyzer, is it for both indexing AND
> searching? That's important.
>
> Also, I'd advise getting a copy of Luke and examining your index to 
> see if
> what you indexed is indexed as you expect. See 
> http://www.getopt.org/luke/
>
> Best
> Erick
>
> On 8/18/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>>
>> thank you for your response,
>> I index an URL, I use WhiteSpaceAnalyzer, but if do a search at this
>> URL, it returns me nothings,
>> I have an example :
>> I index this URL: "http://www.yahoo.fr", If I do a search at the word
>> "yahoo.fr", it returns me no result, and if I do the search like
>> "http*", it returns me all address indexed
>>
>> Simon Willnauer a écrit :
>> > It's like looking for a needle in a haystack without any sinppets of
>> > your code.
>> > If you provide some infomation about how you index and search the
>> > specific field you will get an answer. :)
>> >
>> > best regards simon
>> >
>> > On 8/18/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> Hello,
>> >> I indexed my document but, Can I search for an address web,  it 
>> returns
>> >> me  no result,
>> >> and when I search the same address with a query like "http*" it 
>> returns
>> >> me a result,
>> >> can you help me
>> >>
>> >> thanks
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 09:31:04 2006
Return-Path: <java-user-return-22821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33812 invoked from network); 21 Aug 2006 09:31:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 09:31:03 -0000
Received: (qmail 99592 invoked by uid 500); 21 Aug 2006 09:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99446 invoked by uid 500); 21 Aug 2006 09:30:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99435 invoked by uid 99); 21 Aug 2006 09:30:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 02:30:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 02:30:56 -0700
Received: by nz-out-0102.google.com with SMTP id i1so649859nzh
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 02:30:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=spyHmKq0pgnX1K5PHtxTrZODd9eAbRyH5MpPl89uhc3E11jZAdJ9Vxlxk0OdhnrdNBuYfqxDOR52cGAuWJ9+2bE6CMnEXzmgirx21seEmMJBRGSP6gPetDS36gw1S2sp5qkIPl5rC/bZVU9XxNNh+dzbjgt1sBg9D/GbJH9hM1I=
Received: by 10.65.126.4 with SMTP id d4mr4929911qbn;
        Mon, 21 Aug 2006 02:30:35 -0700 (PDT)
Received: by 10.65.83.3 with HTTP; Mon, 21 Aug 2006 02:30:31 -0700 (PDT)
Message-ID: <a218b3050608210230j53656827sb8c1f2320b2f3b20@mail.gmail.com>
Date: Mon, 21 Aug 2006 11:30:31 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: Singleton and IndexModifier
In-Reply-To: <f18c9dde0608200947t7c48fc8dt29569fe0cf8e8e66@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25971_7149281.1156152631372"
References: <a218b3050608200918k1f4a7f59if794ea5dc6c4e735@mail.gmail.com>
	 <f18c9dde0608200947t7c48fc8dt29569fe0cf8e8e66@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_25971_7149281.1156152631372
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks simon.

In practice my application would have around 100 queries and around 10
add/deletes per minute.
Add/deletes should show up immediately.
That means that I should always create and close an IndexModifier (and
IndexReader for Searching) for each operation, right?

Sure, it cost's a litte performance. But it ensures that
1.)  The change is visible immediately
2.)  The write.lock (and commit.lock) doesn't remain when the application
shut down or crashes


On 8/20/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>
> On 8/20/06, lude <lucene.developer@googlemail.com> wrote:
> > Hello,
> >
> > when using the new IndexModifier of Lucene 2.0, what would be
> > the best creation-pattern?
> >
> > Should there be one IndexModifier instance in the application
> (==singelton)?
> > Could an IndexModifier be opened for a longer time or should it be
> created
> > on use and immediately closed?
> You create an indexmodifier if you want to modify your index. if you
> wanna commit your data (make it available via index reader / searcher)
> you close or rather flush your indexmodifier. After closing the
> modifier you can create a new searcher and all modifications are
> visible to the searcher / reader. Basically there is one index
> modifier (or one single modifying instances per index as you must not
> modify your index with more that one instance of indexreader -writer
> -modifier). If you use the flush() method you don't need to create a
> new IndexModifier instance.
>
> You can leave your indexmod. open for a long time but without a commit
> the indexed or deleted documents won't be visible to your searcher /
> reader) Opening indexmodifiers is a heavy operation which should be
> used carefully so you can close your modifier every n docs or after a
> certain idle time.
> Just be aware that IndexModifier uses IndexReader and IndexWriter
> internally so if you do a delete after a addDocument the indexwriter
> will be closed and a new indexreader will be opened. This is also a
> heavy operation in the meaning of performance.
> You could keep your deletes until you want to flush your instance of
> IndexModifier to gain a bit of performance.
> >
> > Another issue:
> > - I create an IndexModifier
> > - The applicaton crashes
> > - There exists a write-lock on the index
> > --> Next time I start the application the IndexModifier couldn't be
> opened
> > because of the locks.
> >
> > What is the right way to check and delete old write locks?
> You can use the IndexReader.unlock(Directory dir) method the java doc
> says:
>
>   * Caution: this should only be used by failure recovery code,
>   * when it is known that no other process nor thread is in fact
>   * currently accessing this index.
>
> To make sure this happens only in recovery mode.
>
> best regards Simon
> >
> > Thanks
> > lude
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25971_7149281.1156152631372--

From java-user-return-22822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 10:02:18 2006
Return-Path: <java-user-return-22822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40916 invoked from network); 21 Aug 2006 10:02:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 10:02:17 -0000
Received: (qmail 32515 invoked by uid 500); 21 Aug 2006 10:02:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32484 invoked by uid 500); 21 Aug 2006 10:02:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32473 invoked by uid 99); 21 Aug 2006 10:02:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 03:02:11 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.214] (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Aug 2006 03:02:09 -0700
Received: (qmail 29701 invoked by uid 60001); 21 Aug 2006 10:01:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=i/63jRzf0icu9oEsNJPgJIarwNiTlnmdjMBPlFfgik2SyB90Zyd9gKtRAaeo28vEma3zS1BFSF55dIW8SgqRBWv7QF9Lhq9rF6UKlZHIPOPvDy+z1K+sgJHzA9ebp8qqNnEGX4B5rwIMFI+7rEzmNGQKDv6Toe3CY0cyhACir9o=  ;
Message-ID: <20060821100147.29699.qmail@web26003.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26003.mail.ukl.yahoo.com via HTTP; Mon, 21 Aug 2006 10:01:47 GMT
Date: Mon, 21 Aug 2006 10:01:47 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: search for web address
To: java-user@lucene.apache.org
In-Reply-To: <44E96BF7.4010906@emn.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I suspect the problem is not the analyzer - it's the QueryParser.

The parser looks for the ':' character to denote a fieldname eg author:mark=
 and so the parser assumes you are searching for a field named "http" inste=
ad of the desired "url" field.

You'll need to escape the ':' character in your search string.

Cheers
Mark

----- Original Message ----
From: ould sid'ahmed <nouldsid@emn.fr>
To: java-user@lucene.apache.org
Sent: Monday, 21 August, 2006 9:16:55 AM
Subject: Re: search for web address

thank you for your response,
I use WhiteSpaceAnalyzer for searching, and  the field it entirely=20
indexed, I verified with Luke.
thanks
Erick Erickson a =E9crit :
> When you say you use a WhitespaceAnalyzer, is it for both indexing AND
> searching? That's important.
>
> Also, I'd advise getting a copy of Luke and examining your index to=20
> see if
> what you indexed is indexed as you expect. See=20
> http://www.getopt.org/luke/
>
> Best
> Erick
>
> On 8/18/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>>
>> thank you for your response,
>> I index an URL, I use WhiteSpaceAnalyzer, but if do a search at this
>> URL, it returns me nothings,
>> I have an example :
>> I index this URL: "http://www.yahoo.fr";, If I do a search at the word
>> "yahoo.fr", it returns me no result, and if I do the search like
>> "http*", it returns me all address indexed
>>
>> Simon Willnauer a =E9crit :
>> > It's like looking for a needle in a haystack without any sinppets of
>> > your code.
>> > If you provide some infomation about how you index and search the
>> > specific field you will get an answer. :)
>> >
>> > best regards simon
>> >
>> > On 8/18/06, ould sid'ahmed <nouldsid@emn.fr> wrote:
>> >> Hello,
>> >> I indexed my document but, Can I search for an address web,  it=20
>> returns
>> >> me  no result,
>> >> and when I search the same address with a query like "http*" it=20
>> returns
>> >> me a result,
>> >> can you help me
>> >>
>> >> thanks
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 10:43:56 2006
Return-Path: <java-user-return-22823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53781 invoked from network); 21 Aug 2006 10:43:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 10:43:55 -0000
Received: (qmail 81738 invoked by uid 500); 21 Aug 2006 10:43:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81693 invoked by uid 500); 21 Aug 2006 10:43:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81682 invoked by uid 99); 21 Aug 2006 10:43:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 03:43:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 03:43:49 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id AF79BD9DC18
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 06:43:28 -0400 (EDT)
Received: from heartbeat1.internal ([10.202.2.160])
  by frontend3.internal (MEProxy); Mon, 21 Aug 2006 06:43:29 -0400
X-Sasl-enc: dG39dN0ur5rYRIjfc77miPKfIfEErupzQcGxPgGwBNYn 1156157009
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 21DF16109
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 06:43:29 -0400 (EDT)
Message-ID: <44E98E4F.7050609@mikemccandless.com>
Date: Mon, 21 Aug 2006 06:43:27 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: index update with database insertion
References: <200608211014533705821@taowap.com>
In-Reply-To: <200608211014533705821@taowap.com>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> In my project,I want to update the lucene's index when there has database insertion operations,in this way,my users could search the fresh information immediately if someone inserted the information into database.That's what I need,could someone give me suggestions to implement my need?Thank you very much!

Have a look at this recent thread:

  http://www.gossamer-threads.com/lists/lucene/java-user/38636

That was about DB2 in particular but it should carry over to your DB.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 11:29:53 2006
Return-Path: <java-user-return-22824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83631 invoked from network); 21 Aug 2006 11:29:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 11:29:52 -0000
Received: (qmail 29097 invoked by uid 500); 21 Aug 2006 11:29:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28637 invoked by uid 500); 21 Aug 2006 11:29:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28626 invoked by uid 99); 21 Aug 2006 11:29:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 04:29:46 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 04:29:45 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1669388wxc
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 04:29:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BRRBFUV9IYQWacAlglHBEdtK7kJYvFIrzvGxPmKz5JSPBJTpNoUwKwDiN6jvQfQt3I1vYFpPMm/jq4eM+5HryzQvfwV3PLTjDMA5k00SD02C4iBZUplOsq38xBEZoMQd1DBC8K9dRXAbq1E9dVl2AVO7p/d1WyeONStC49E7vcM=
Received: by 10.70.99.11 with SMTP id w11mr9322827wxb;
        Mon, 21 Aug 2006 04:29:25 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Mon, 21 Aug 2006 04:29:24 -0700 (PDT)
Message-ID: <d8050f240608210429nd523fbem6fbca4e8273cf1c5@mail.gmail.com>
Date: Mon, 21 Aug 2006 21:29:24 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index update with database insertion
In-Reply-To: <44E98E4F.7050609@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32781_21732838.1156159764928"
References: <200608211014533705821@taowap.com>
	 <44E98E4F.7050609@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_32781_21732838.1156159764928
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not sure about the solution in the referenced thread.  It will work, but
doesn't it run the risk of breaching the transaction isolation of the
database write?

The issue is when the index is notified of a database update.  If it is
notified prior to the transaction commit, and the commit fails then you are
out of synch.  If it is notified after commit, and the notify fails you are
out of sync.

Maybe more of a "publish/subscribe" model would work (or.. maybe this is
what was suggested and I am way off!).  That is, when the DB write occurs,
and within the same transaction, an "index" task is published to some new
"IndexTask" table which your index process polls.  This way if the index
process is offline.. when it comes back up it simply has a list of tasks to
perform.

Apologies if this is what you meant Michael.

Or.. better still (for transaction isolation, but arguably not performance)
do the index update within the same transaction.  I have just been
implementing some test code using Compass (Open Symphony) which provides
full transaction isolation for Lucene.

On 8/21/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> > In my project,I want to update the lucene's index when there has
> database insertion operations,in this way,my users could search the fresh
> information immediately if someone inserted the information into
> database.That's what I need,could someone give me suggestions to implement
> my need?Thank you very much!
>
> Have a look at this recent thread:
>
>   http://www.gossamer-threads.com/lists/lucene/java-user/38636
>
> That was about DB2 in particular but it should carry over to your DB.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_32781_21732838.1156159764928--

From java-user-return-22825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 11:55:17 2006
Return-Path: <java-user-return-22825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95449 invoked from network); 21 Aug 2006 11:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 11:55:17 -0000
Received: (qmail 69957 invoked by uid 500); 21 Aug 2006 11:55:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69926 invoked by uid 500); 21 Aug 2006 11:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69907 invoked by uid 99); 21 Aug 2006 11:55:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 04:55:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 04:55:10 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 94185D9D9F9
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 07:54:48 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Mon, 21 Aug 2006 07:54:49 -0400
X-Sasl-enc: eT6Q7cJ6pxnOtT2WDQqHbpjhAQ/WVZzTJfccwDMZfCTr 1156161289
Received: from [10.17.4.91] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 3D4E7CF5
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 07:54:49 -0400 (EDT)
Message-ID: <44E99F07.3070105@mikemccandless.com>
Date: Mon, 21 Aug 2006 07:54:47 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: index update with database insertion
References: <200608211014533705821@taowap.com>	 <44E98E4F.7050609@mikemccandless.com> <d8050f240608210429nd523fbem6fbca4e8273cf1c5@mail.gmail.com>
In-Reply-To: <d8050f240608210429nd523fbem6fbca4e8273cf1c5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jason Polites wrote:
> I'm not sure about the solution in the referenced thread.  It will work, 
> but
> doesn't it run the risk of breaching the transaction isolation of the
> database write?
> 
> The issue is when the index is notified of a database update.  If it is
> notified prior to the transaction commit, and the commit fails then you are
> out of synch.  If it is notified after commit, and the notify fails you are
> out of sync.
> 
> Maybe more of a "publish/subscribe" model would work (or.. maybe this is
> what was suggested and I am way off!).  That is, when the DB write occurs,
> and within the same transaction, an "index" task is published to some new
> "IndexTask" table which your index process polls.  This way if the index
> process is offline.. when it comes back up it simply has a list of tasks to
> perform.
> 
> Apologies if this is what you meant Michael.
> 
> Or.. better still (for transaction isolation, but arguably not performance)
> do the index update within the same transaction.  I have just been
> implementing some test code using Compass (Open Symphony) which provides
> full transaction isolation for Lucene.

That is an excellent point Jason -- that thread I linked to doesn't
talk to how to have transaction isolation with your DB updates.

I like the idea of a separate "IndexTasks" table.  This is better
than a simple timestamp column added to all content tables because it
can handle deleted docs correctly.  And it allows full decoupling of
when the DB transaction is committed vs. when Lucene commits its
corresponding index updates.

I think ideally you would indeed want to commit both at once (your
last paragraph above), meaning, your end users see changes to DB
simultaneous with changes to searching on the Lucene index.  Compass
sounds like it will address this nicely!

Solr also adds some transactional semantics on top of Lucene, in that
you add/delete documents, but these changes are not visible to the end
user until a "commit" is issued.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 13:31:59 2006
Return-Path: <java-user-return-22826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26940 invoked from network); 21 Aug 2006 13:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 13:31:59 -0000
Received: (qmail 7492 invoked by uid 500); 21 Aug 2006 13:31:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7020 invoked by uid 500); 21 Aug 2006 13:31:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7006 invoked by uid 99); 21 Aug 2006 13:31:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 06:31:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 06:31:50 -0700
Received: by py-out-1112.google.com with SMTP id w49so2372071pyg
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 06:31:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pql8lQeFfDJEu4OqX8VMcZRh4RzbJN6/ipjK0VSuH3DMlEck8+Of/zqejMz6/bi9AKvDVDO+gQJfSaB0KLj6+lqZSWaAebyXYsUJLI/ysT7zXS/x1pvstdIUTahia9/En+nHchSQLsquAl8moJbsRgPwQLr98LQnDrh8tr9EW64=
Received: by 10.35.105.18 with SMTP id h18mr13241165pym;
        Mon, 21 Aug 2006 06:31:29 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 21 Aug 2006 06:31:29 -0700 (PDT)
Message-ID: <359a92830608210631t979f01p8edac0dead1567b9@mail.gmail.com>
Date: Mon, 21 Aug 2006 09:31:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Singleton and IndexModifier
In-Reply-To: <a218b3050608210230j53656827sb8c1f2320b2f3b20@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57921_657622.1156167089188"
References: <a218b3050608200918k1f4a7f59if794ea5dc6c4e735@mail.gmail.com>
	 <f18c9dde0608200947t7c48fc8dt29569fe0cf8e8e66@mail.gmail.com>
	 <a218b3050608210230j53656827sb8c1f2320b2f3b20@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_57921_657622.1156167089188
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

my only caution is that as your index grows, the close/open of your readers
may take more time than you are willing to spend. Not that I'm recommending
against it as I don't know the details, but it's something to keep an eye
on. In my experience, "immediately available" may really mean "available
after 10 minutes", so you can think about allowing a little latency to
improve query speed if that becomes an issue.....

Best
Erick

On 8/21/06, lude <lucene.developer@googlemail.com> wrote:
>
> Thanks simon.
>
> In practice my application would have around 100 queries and around 10
> add/deletes per minute.
> Add/deletes should show up immediately.
> That means that I should always create and close an IndexModifier (and
> IndexReader for Searching) for each operation, right?
>
> Sure, it cost's a litte performance. But it ensures that
> 1.)  The change is visible immediately
> 2.)  The write.lock (and commit.lock) doesn't remain when the application
> shut down or crashes
>
>
> On 8/20/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> >
> > On 8/20/06, lude <lucene.developer@googlemail.com> wrote:
> > > Hello,
> > >
> > > when using the new IndexModifier of Lucene 2.0, what would be
> > > the best creation-pattern?
> > >
> > > Should there be one IndexModifier instance in the application
> > (==singelton)?
> > > Could an IndexModifier be opened for a longer time or should it be
> > created
> > > on use and immediately closed?
> > You create an indexmodifier if you want to modify your index. if you
> > wanna commit your data (make it available via index reader / searcher)
> > you close or rather flush your indexmodifier. After closing the
> > modifier you can create a new searcher and all modifications are
> > visible to the searcher / reader. Basically there is one index
> > modifier (or one single modifying instances per index as you must not
> > modify your index with more that one instance of indexreader -writer
> > -modifier). If you use the flush() method you don't need to create a
> > new IndexModifier instance.
> >
> > You can leave your indexmod. open for a long time but without a commit
> > the indexed or deleted documents won't be visible to your searcher /
> > reader) Opening indexmodifiers is a heavy operation which should be
> > used carefully so you can close your modifier every n docs or after a
> > certain idle time.
> > Just be aware that IndexModifier uses IndexReader and IndexWriter
> > internally so if you do a delete after a addDocument the indexwriter
> > will be closed and a new indexreader will be opened. This is also a
> > heavy operation in the meaning of performance.
> > You could keep your deletes until you want to flush your instance of
> > IndexModifier to gain a bit of performance.
> > >
> > > Another issue:
> > > - I create an IndexModifier
> > > - The applicaton crashes
> > > - There exists a write-lock on the index
> > > --> Next time I start the application the IndexModifier couldn't be
> > opened
> > > because of the locks.
> > >
> > > What is the right way to check and delete old write locks?
> > You can use the IndexReader.unlock(Directory dir) method the java doc
> > says:
> >
> >   * Caution: this should only be used by failure recovery code,
> >   * when it is known that no other process nor thread is in fact
> >   * currently accessing this index.
> >
> > To make sure this happens only in recovery mode.
> >
> > best regards Simon
> > >
> > > Thanks
> > > lude
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_57921_657622.1156167089188--

From java-user-return-22827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 13:43:18 2006
Return-Path: <java-user-return-22827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30473 invoked from network); 21 Aug 2006 13:43:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 13:43:18 -0000
Received: (qmail 38769 invoked by uid 500); 21 Aug 2006 13:43:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38736 invoked by uid 500); 21 Aug 2006 13:43:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38702 invoked by uid 99); 21 Aug 2006 13:43:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 06:43:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 06:43:09 -0700
Received: by ug-out-1314.google.com with SMTP id y2so1472828uge
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 06:42:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=U8oRP3HAuUZ1lmoHU1mpylksrV0GAKGb+Wu1zCUNMCUe751Q+sVFn9Dpgg5lyG/TLiJG9RHuIoCRLcfpGFpjfH61z1KpgtEacbf3QQ4yUhnyJ3FgaPhAwmhYSd20WpeVeX+yor3lvpUp1qgR8P4Ph5UyyWBdoz3iVzvNtdxUvTg=
Received: by 10.67.119.13 with SMTP id w13mr3645706ugm;
        Mon, 21 Aug 2006 06:42:48 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Mon, 21 Aug 2006 06:42:48 -0700 (PDT)
Message-ID: <f18c9dde0608210642v6e6dae6cg526251940c3f31c8@mail.gmail.com>
Date: Mon, 21 Aug 2006 15:42:48 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Singleton and IndexModifier
In-Reply-To: <359a92830608210631t979f01p8edac0dead1567b9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a218b3050608200918k1f4a7f59if794ea5dc6c4e735@mail.gmail.com>
	 <f18c9dde0608200947t7c48fc8dt29569fe0cf8e8e66@mail.gmail.com>
	 <a218b3050608210230j53656827sb8c1f2320b2f3b20@mail.gmail.com>
	 <359a92830608210631t979f01p8edac0dead1567b9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In GDataServer I use a timed indexer who commits the modifications
after a certain idle time or after n documents insert/update/delete.
This ensures that your modifications will be available after a defined
time. it also minimize opening and closing readers and writers as the
deletes will be done after all inserts. I do really recommend to keep
your searcher open as long as possible and keep your index modifiers
open and close action to a minimum.

best regards Simon

On 8/21/06, Erick Erickson <erickerickson@gmail.com> wrote:
> my only caution is that as your index grows, the close/open of your readers
> may take more time than you are willing to spend. Not that I'm recommending
> against it as I don't know the details, but it's something to keep an eye
> on. In my experience, "immediately available" may really mean "available
> after 10 minutes", so you can think about allowing a little latency to
> improve query speed if that becomes an issue.....
>
> Best
> Erick
>
> On 8/21/06, lude <lucene.developer@googlemail.com> wrote:
> >
> > Thanks simon.
> >
> > In practice my application would have around 100 queries and around 10
> > add/deletes per minute.
> > Add/deletes should show up immediately.
> > That means that I should always create and close an IndexModifier (and
> > IndexReader for Searching) for each operation, right?
> >
> > Sure, it cost's a litte performance. But it ensures that
> > 1.)  The change is visible immediately
> > 2.)  The write.lock (and commit.lock) doesn't remain when the application
> > shut down or crashes
> >
> >
> > On 8/20/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> > >
> > > On 8/20/06, lude <lucene.developer@googlemail.com> wrote:
> > > > Hello,
> > > >
> > > > when using the new IndexModifier of Lucene 2.0, what would be
> > > > the best creation-pattern?
> > > >
> > > > Should there be one IndexModifier instance in the application
> > > (==singelton)?
> > > > Could an IndexModifier be opened for a longer time or should it be
> > > created
> > > > on use and immediately closed?
> > > You create an indexmodifier if you want to modify your index. if you
> > > wanna commit your data (make it available via index reader / searcher)
> > > you close or rather flush your indexmodifier. After closing the
> > > modifier you can create a new searcher and all modifications are
> > > visible to the searcher / reader. Basically there is one index
> > > modifier (or one single modifying instances per index as you must not
> > > modify your index with more that one instance of indexreader -writer
> > > -modifier). If you use the flush() method you don't need to create a
> > > new IndexModifier instance.
> > >
> > > You can leave your indexmod. open for a long time but without a commit
> > > the indexed or deleted documents won't be visible to your searcher /
> > > reader) Opening indexmodifiers is a heavy operation which should be
> > > used carefully so you can close your modifier every n docs or after a
> > > certain idle time.
> > > Just be aware that IndexModifier uses IndexReader and IndexWriter
> > > internally so if you do a delete after a addDocument the indexwriter
> > > will be closed and a new indexreader will be opened. This is also a
> > > heavy operation in the meaning of performance.
> > > You could keep your deletes until you want to flush your instance of
> > > IndexModifier to gain a bit of performance.
> > > >
> > > > Another issue:
> > > > - I create an IndexModifier
> > > > - The applicaton crashes
> > > > - There exists a write-lock on the index
> > > > --> Next time I start the application the IndexModifier couldn't be
> > > opened
> > > > because of the locks.
> > > >
> > > > What is the right way to check and delete old write locks?
> > > You can use the IndexReader.unlock(Directory dir) method the java doc
> > > says:
> > >
> > >   * Caution: this should only be used by failure recovery code,
> > >   * when it is known that no other process nor thread is in fact
> > >   * currently accessing this index.
> > >
> > > To make sure this happens only in recovery mode.
> > >
> > > best regards Simon
> > > >
> > > > Thanks
> > > > lude
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 13:57:22 2006
Return-Path: <java-user-return-22828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35210 invoked from network); 21 Aug 2006 13:57:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 13:57:22 -0000
Received: (qmail 63487 invoked by uid 500); 21 Aug 2006 13:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63452 invoked by uid 500); 21 Aug 2006 13:57:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63441 invoked by uid 99); 21 Aug 2006 13:57:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 06:57:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 06:57:15 -0700
Received: by nz-out-0102.google.com with SMTP id i1so691226nzh
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 06:56:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=buFGKg1pl22ErubREGbI4r0rkTsWugK3cs+uaKm9g/Og7YXyFuNQ2EYnDVeJ8RH+gh6S8vdN2dOOkw6x8Z2vLfkSIa5Q3Xcg8VGSLhDeHf3K0hLwrzM20wwAI0HrpWGRLaJp89SKvDdkdfbOp7/BIxNs1rcZfxFNA2/EdeacRrc=
Received: by 10.65.232.12 with SMTP id j12mr6789337qbr;
        Mon, 21 Aug 2006 06:56:54 -0700 (PDT)
Received: by 10.65.83.3 with HTTP; Mon, 21 Aug 2006 06:56:54 -0700 (PDT)
Message-ID: <a218b3050608210656r51e60edapfca9cb17dd78e050@mail.gmail.com>
Date: Mon, 21 Aug 2006 15:56:54 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: Singleton and IndexModifier
In-Reply-To: <f18c9dde0608210642v6e6dae6cg526251940c3f31c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28568_22010412.1156168614266"
References: <a218b3050608200918k1f4a7f59if794ea5dc6c4e735@mail.gmail.com>
	 <f18c9dde0608200947t7c48fc8dt29569fe0cf8e8e66@mail.gmail.com>
	 <a218b3050608210230j53656827sb8c1f2320b2f3b20@mail.gmail.com>
	 <359a92830608210631t979f01p8edac0dead1567b9@mail.gmail.com>
	 <f18c9dde0608210642v6e6dae6cg526251940c3f31c8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_28568_22010412.1156168614266
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok, you've got me! ;)

How do you assure that your IndexModifier (or IndexWriter/IndexReader)
is closed, when your application ends.

Or do you always use a IndexReader.unlock(Directory dir) at startup-time of
your application.

Thanks!
lude

On 8/21/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>
> In GDataServer I use a timed indexer who commits the modifications
> after a certain idle time or after n documents insert/update/delete.
> This ensures that your modifications will be available after a defined
> time. it also minimize opening and closing readers and writers as the
> deletes will be done after all inserts. I do really recommend to keep
> your searcher open as long as possible and keep your index modifiers
> open and close action to a minimum.
>
> best regards Simon
>
> On 8/21/06, Erick Erickson <erickerickson@gmail.com> wrote:
> > my only caution is that as your index grows, the close/open of your
> readers
> > may take more time than you are willing to spend. Not that I'm
> recommending
> > against it as I don't know the details, but it's something to keep an
> eye
> > on. In my experience, "immediately available" may really mean "available
> > after 10 minutes", so you can think about allowing a little latency to
> > improve query speed if that becomes an issue.....
> >
> > Best
> > Erick
> >
> > On 8/21/06, lude <lucene.developer@googlemail.com> wrote:
> > >
> > > Thanks simon.
> > >
> > > In practice my application would have around 100 queries and around 10
> > > add/deletes per minute.
> > > Add/deletes should show up immediately.
> > > That means that I should always create and close an IndexModifier (and
> > > IndexReader for Searching) for each operation, right?
> > >
> > > Sure, it cost's a litte performance. But it ensures that
> > > 1.)  The change is visible immediately
> > > 2.)  The write.lock (and commit.lock) doesn't remain when the
> application
> > > shut down or crashes
> > >
> > >
> > > On 8/20/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> > > >
> > > > On 8/20/06, lude <lucene.developer@googlemail.com> wrote:
> > > > > Hello,
> > > > >
> > > > > when using the new IndexModifier of Lucene 2.0, what would be
> > > > > the best creation-pattern?
> > > > >
> > > > > Should there be one IndexModifier instance in the application
> > > > (==singelton)?
> > > > > Could an IndexModifier be opened for a longer time or should it be
> > > > created
> > > > > on use and immediately closed?
> > > > You create an indexmodifier if you want to modify your index. if you
> > > > wanna commit your data (make it available via index reader /
> searcher)
> > > > you close or rather flush your indexmodifier. After closing the
> > > > modifier you can create a new searcher and all modifications are
> > > > visible to the searcher / reader. Basically there is one index
> > > > modifier (or one single modifying instances per index as you must
> not
> > > > modify your index with more that one instance of indexreader -writer
> > > > -modifier). If you use the flush() method you don't need to create a
> > > > new IndexModifier instance.
> > > >
> > > > You can leave your indexmod. open for a long time but without a
> commit
> > > > the indexed or deleted documents won't be visible to your searcher /
> > > > reader) Opening indexmodifiers is a heavy operation which should be
> > > > used carefully so you can close your modifier every n docs or after
> a
> > > > certain idle time.
> > > > Just be aware that IndexModifier uses IndexReader and IndexWriter
> > > > internally so if you do a delete after a addDocument the indexwriter
> > > > will be closed and a new indexreader will be opened. This is also a
> > > > heavy operation in the meaning of performance.
> > > > You could keep your deletes until you want to flush your instance of
> > > > IndexModifier to gain a bit of performance.
> > > > >
> > > > > Another issue:
> > > > > - I create an IndexModifier
> > > > > - The applicaton crashes
> > > > > - There exists a write-lock on the index
> > > > > --> Next time I start the application the IndexModifier couldn't
> be
> > > > opened
> > > > > because of the locks.
> > > > >
> > > > > What is the right way to check and delete old write locks?
> > > > You can use the IndexReader.unlock(Directory dir) method the java
> doc
> > > > says:
> > > >
> > > >   * Caution: this should only be used by failure recovery code,
> > > >   * when it is known that no other process nor thread is in fact
> > > >   * currently accessing this index.
> > > >
> > > > To make sure this happens only in recovery mode.
> > > >
> > > > best regards Simon
> > > > >
> > > > > Thanks
> > > > > lude
> > > > >
> > > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28568_22010412.1156168614266--

From java-user-return-22829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 14:00:45 2006
Return-Path: <java-user-return-22829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35863 invoked from network); 21 Aug 2006 14:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 14:00:45 -0000
Received: (qmail 68229 invoked by uid 500); 21 Aug 2006 14:00:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68193 invoked by uid 500); 21 Aug 2006 14:00:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68172 invoked by uid 99); 21 Aug 2006 14:00:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 07:00:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 07:00:31 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GFAK3-0003Dx-IN
	for java-user@lucene.apache.org; Mon, 21 Aug 2006 07:00:11 -0700
Message-ID: <5907346.post@talk.nabble.com>
Date: Mon, 21 Aug 2006 07:00:11 -0700 (PDT)
From: melvincarvalho <melvincarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: Field.Text
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi All

I am trying to run some of the demos for Lucene but cant seem to find the
Field.Text class in the javadoc or to compile with lucene 2.0.0

Am I doing something wrong?

doc.add(Field.Text("title",acc.getTitle()));

http://www.jroller.com/page/wakaleo/?anchor=lucene_a_tutorial_introduction_to
-- 
View this message in context: http://www.nabble.com/Field.Text-tf2140381.html#a5907346
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 14:13:02 2006
Return-Path: <java-user-return-22830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42467 invoked from network); 21 Aug 2006 14:13:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 14:13:02 -0000
Received: (qmail 95509 invoked by uid 500); 21 Aug 2006 14:12:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95160 invoked by uid 500); 21 Aug 2006 14:12:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95149 invoked by uid 99); 21 Aug 2006 14:12:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 07:12:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 07:12:54 -0700
Received: by ug-out-1314.google.com with SMTP id y2so1481412uge
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 07:12:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jlhsMN3DhbGx/bWsfCoYXI7J1/ELqDaM37m+pwJM8P9H4AiFZNkQdtjKsWexPIwU5FQHqltBfJ86YsSZ4m+LVK7oRczet+zuOTep+ADl/mxCGAV0SciSaRY1YgCoLFY9wWYtzMDDDNCsTwEdCE605LvY+qA/JxKSQc9XSaAQJic=
Received: by 10.67.105.19 with SMTP id h19mr3661455ugm;
        Mon, 21 Aug 2006 07:12:33 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Mon, 21 Aug 2006 07:12:32 -0700 (PDT)
Message-ID: <f18c9dde0608210712s70259894ld8358be74d1f3f16@mail.gmail.com>
Date: Mon, 21 Aug 2006 16:12:32 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Field.Text
In-Reply-To: <5907346.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5907346.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/21/06, melvincarvalho <melvincarvalho@gmail.com> wrote:
>
> Hi All
>
> I am trying to run some of the demos for Lucene but cant seem to find the
> Field.Text class in the javadoc or to compile with lucene 2.0.0
>
> Am I doing something wrong?
>
> doc.add(Field.Text("title",acc.getTitle()));
This static method has been removed after 1.9 which is the last
compatible version to 1.4

The 1.9 java doc says:
 /** Constructs a String-valued Field that is tokenized and indexed,
    and is stored in the index, for return with hits.  Useful for short text
    fields, like "title" or "subject". Term vector will not be stored
for this field.
  @deprecated use {@link #Field(String, String, Field.Store, Field.Index)
    Field(name, value, Field.Store.YES, Field.Index.TOKENIZED)} instead */

best regards simon

> http://www.jroller.com/page/wakaleo/?anchor=lucene_a_tutorial_introduction_to
> --
> View this message in context: http://www.nabble.com/Field.Text-tf2140381.html#a5907346
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 15:32:44 2006
Return-Path: <java-user-return-22831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67920 invoked from network); 21 Aug 2006 15:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 15:32:44 -0000
Received: (qmail 96612 invoked by uid 500); 21 Aug 2006 15:32:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96583 invoked by uid 500); 21 Aug 2006 15:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96572 invoked by uid 99); 21 Aug 2006 15:32:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 08:32:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.239.116.71] (HELO mail01.bassnet.biz) (212.239.116.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 08:32:35 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail01.bassnet.biz (Postfix) with ESMTP id B03471797
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 17:31:33 +0200 (CEST)
Received: from mail01.bassnet.biz ([127.0.0.1])
	by localhost (urano [127.0.0.1]) (amavisd-new, port 10024) with LMTP
	id 28542-03-5 for <java-user@lucene.apache.org>;
	Mon, 21 Aug 2006 17:31:33 +0200 (CEST)
Received: from [192.168.136.123] (unknown [192.168.136.123])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail01.bassnet.biz (Postfix) with ESMTP id 642BB1209
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 17:31:33 +0200 (CEST)
Message-ID: <44E9E04E.6090802@bassnet.biz>
Date: Mon, 21 Aug 2006 16:33:18 +0000
From: Lorenzo Di Gaetano <lorenzo.digaetano@bassnet.biz>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
X-Accept-Language: it, it-it, en-us, en
MIME-Version: 1.0
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Searching a untokenized field using SnowballAnalyzer
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at bassnet.biz
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I have the following problem. I use SnowballAnalyzer to index Documents 
containing tokenized and untokenized fields. But when I try to search a 
document using one of the untokenized fields (usually keywords and 
unique identifiers) it doesn't find anything...

Simple exampe of code:

doc.add(new Field("car","ferrari",Field.Store.NO,Field.Index.UN_TOKENIZED);

when I try to search it using the following search strings:

car:ferrari

or

car:"ferrari"

it finds nothing.

If I use StandardAnalyzer instead of SnowballAnalyzer it finds the 
Document correctly!!! Even the field name and the field value are 
lowercases, it seems that there is a problem on querying untokenized 
fields using SnowballAnalyzer... The only way I have to find my "car" 
field is using TermQueries...  But  I absolutely need  to make complex 
queries on multiple field values at once.

Please help me! Thank you in advance.

Lorenzo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 17:43:46 2006
Return-Path: <java-user-return-22832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20677 invoked from network); 21 Aug 2006 17:43:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 17:43:46 -0000
Received: (qmail 65148 invoked by uid 500); 21 Aug 2006 17:43:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65123 invoked by uid 500); 21 Aug 2006 17:43:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65112 invoked by uid 99); 21 Aug 2006 17:43:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:43:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 10:43:40 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B57845B77E; Mon, 21 Aug 2006 10:43:19 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A93367F403
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 10:43:19 -0700 (PDT)
Date: Mon, 21 Aug 2006 10:43:19 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Re: Searching a untokenized field using SnowballAnalyzer
In-Reply-To: <44E9E04E.6090802@bassnet.biz>
Message-ID: <Pine.LNX.4.58.0608211040460.2877@hal.rescomp.berkeley.edu>
References: <44E9E04E.6090802@bassnet.biz>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: doc.add(new Field("car","ferrari",Field.Store.NO,Field.Index.UN_TOKENIZED);
:
: when I try to search it using the following search strings:
:
: car:ferrari

: it finds nothing.

the IndexWriter knew that the "car" field was UN_TOKENIZED, but the
QueryParser doesn't -- you've told it every query should be processed with
the SnowballAnalyzer.  (take a look at the query.toString() to see what i
mean)

Try using telling the QueryParser to use a PerFieldAnalyzer with the
KeywordAnalyzer configured for the fields you left UN_TOKENIZED and see if
that helps.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 18:10:32 2006
Return-Path: <java-user-return-22833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28399 invoked from network); 21 Aug 2006 18:10:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 18:10:31 -0000
Received: (qmail 10660 invoked by uid 500); 21 Aug 2006 18:10:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10635 invoked by uid 500); 21 Aug 2006 18:10:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10374 invoked by uid 99); 21 Aug 2006 18:10:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:10:18 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=BIZ_TLD,DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:10:16 -0700
Received: by ug-out-1314.google.com with SMTP id y2so1549254uge
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 11:09:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=D9O2aiCIQRSC4bFTTl1a8ZJUrCrg/z71p/pRmqHcLAwqBrsWfyIq4Enk7tFzkcSuU+n3WDHWPolDMnsMIqeymydWO8VbZKHNCA6F+TP35Gi8XwqRHmnsriK7XZ85IKkOLldykvhum4va05Q3a4zuTu2IhocjXALdfT0FgKxVsV0=
Received: by 10.67.93.6 with SMTP id v6mr3854156ugl;
        Mon, 21 Aug 2006 11:09:55 -0700 (PDT)
Received: by 10.67.93.3 with HTTP; Mon, 21 Aug 2006 11:09:55 -0700 (PDT)
Message-ID: <ab0709bf0608211109o1a18793fn53c9244977864924@mail.gmail.com>
Date: Mon, 21 Aug 2006 14:09:55 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching a untokenized field using SnowballAnalyzer
In-Reply-To: <44E9E04E.6090802@bassnet.biz>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55858_22700943.1156183795128"
References: <44E9E04E.6090802@bassnet.biz>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_55858_22700943.1156183795128
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My guess? When you store those field untokenized, they are untokenized. When
you use the SnowBall analyzer with the query parser and search those
untokenized fields, you're query is tokenized. As you can imagine, a
tokenized search by not match un untokenzied field. Why does this not happen
with StandardAnalyzer? Most likely because StandardAnalyzer does not modify
ferrari during it's processing (in fact I know it does not) while
SnowBallAnalyzer probably does modify ferrari...perhaps to ferrar.

The results:

search query: ferrari
query parser /SnowballAnalyzer: ferrar
query parser /StandardAnalyzer: ferrari

- Mark

On 8/21/06, Lorenzo Di Gaetano <lorenzo.digaetano@bassnet.biz> wrote:
>
> Hi all,
>
> I have the following problem. I use SnowballAnalyzer to index Documents
> containing tokenized and untokenized fields. But when I try to search a
> document using one of the untokenized fields (usually keywords and
> unique identifiers) it doesn't find anything...
>
> Simple exampe of code:
>
> doc.add(new Field("car","ferrari",Field.Store.NO,Field.Index.UN_TOKENIZED
> );
>
> when I try to search it using the following search strings:
>
> car:ferrari
>
> or
>
> car:"ferrari"
>
> it finds nothing.
>
> If I use StandardAnalyzer instead of SnowballAnalyzer it finds the
> Document correctly!!! Even the field name and the field value are
> lowercases, it seems that there is a problem on querying untokenized
> fields using SnowballAnalyzer... The only way I have to find my "car"
> field is using TermQueries...  But  I absolutely need  to make complex
> queries on multiple field values at once.
>
> Please help me! Thank you in advance.
>
> Lorenzo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_55858_22700943.1156183795128--

From java-user-return-22834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 18:12:35 2006
Return-Path: <java-user-return-22834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29446 invoked from network); 21 Aug 2006 18:12:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 18:12:34 -0000
Received: (qmail 17594 invoked by uid 500); 21 Aug 2006 18:12:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17413 invoked by uid 500); 21 Aug 2006 18:12:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17402 invoked by uid 99); 21 Aug 2006 18:12:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:12:28 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.224.152] (HELO mail.masterfile.com) (205.207.224.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 11:12:27 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.masterfile.com (Postfix) with ESMTP id 4A50586D562;
	Mon, 21 Aug 2006 14:12:05 -0400 (EDT)
Received: from [127.0.0.1] (unknown [172.16.8.63])
	by mail.masterfile.com (Postfix) with ESMTP id 39602855665
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 14:12:05 -0400 (EDT)
Message-ID: <44E9F772.4050504@masterfile.com>
Date: Mon, 21 Aug 2006 14:12:02 -0400
From: Rupinder Singh Mazara <rmazara@masterfile.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: searching for keywords
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi all

  I need to be able to index and search for documents based on keywords 
that are attached to a document.

  Some of the keywords have white spaces in them like "red hat"  or 
"place of worship" ,

  I need to able to search for FULLTEXT:"red hat" AND KEYWORD:"red hat" 
 

  For indexing purposes I was able to construct a NullTokenizer based on 
the lucene mailling lists but the query parse seems to intent on 
splitting any search term. Apart from writing my own parser is there any 
way so as not to get FULLTEXT:red FULLTEXT:hat AND KEYWORD:red KEYWORD:hat

thanks



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 19:03:12 2006
Return-Path: <java-user-return-22835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49411 invoked from network); 21 Aug 2006 19:03:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:03:10 -0000
Received: (qmail 6330 invoked by uid 500); 21 Aug 2006 19:03:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6295 invoked by uid 500); 21 Aug 2006 19:03:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6284 invoked by uid 99); 21 Aug 2006 19:03:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:03:03 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:03:02 -0700
Received: by nz-out-0102.google.com with SMTP id i1so767745nzh
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 12:02:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qJMEfgyNofJ+M3r7OSf0HYMUNDkCr15CYs6QJbrMhyx2KbpbRWFiepkl/3/kPstfNk/m1V9WoKCkoKb6PEhfgDLi3NukfulIVvagXsb/YCL8rSlt6LMGh5MbVIgjgZqRyeho1s0AHZZC+sdYgWlI2c0tS1PuoYtxo7AO93rRj5U=
Received: by 10.35.128.1 with SMTP id f1mr8071959pyn;
        Mon, 21 Aug 2006 12:02:42 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 21 Aug 2006 12:02:41 -0700 (PDT)
Message-ID: <359a92830608211202qecb96b5qfb0e7a9221ecd154@mail.gmail.com>
Date: Mon, 21 Aug 2006 15:02:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching for keywords
In-Reply-To: <44E9F772.4050504@masterfile.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65166_31989416.1156186961836"
References: <44E9F772.4050504@masterfile.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_65166_31989416.1156186961836
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you can use this form
*QueryParser<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/queryParser/QueryParser.html#QueryParser%28java.lang.String,%20org.apache.lucene.analysis.Analyzer%29>
*(String <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> f,
Analyzer<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/analysis/Analyzer.html>
 a)  where the analyzer is a PerFieldAnalyzerWrapper. Then use the same
analyzer you used during the indexing process.

This is Lucene 2.0...

Best
Erick


On 8/21/06, Rupinder Singh Mazara <rmazara@masterfile.com> wrote:
>
> hi all
>
>   I need to be able to index and search for documents based on keywords
> that are attached to a document.
>
>   Some of the keywords have white spaces in them like "red hat"  or
> "place of worship" ,
>
>   I need to able to search for FULLTEXT:"red hat" AND KEYWORD:"red hat"
>
>
>   For indexing purposes I was able to construct a NullTokenizer based on
> the lucene mailling lists but the query parse seems to intent on
> splitting any search term. Apart from writing my own parser is there any
> way so as not to get FULLTEXT:red FULLTEXT:hat AND KEYWORD:red KEYWORD:hat
>
> thanks
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_65166_31989416.1156186961836--

From java-user-return-22836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 19:31:10 2006
Return-Path: <java-user-return-22836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63224 invoked from network); 21 Aug 2006 19:31:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:31:10 -0000
Received: (qmail 53067 invoked by uid 500); 21 Aug 2006 19:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52110 invoked by uid 500); 21 Aug 2006 19:31:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52099 invoked by uid 99); 21 Aug 2006 19:31:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:31:04 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.224.152] (HELO mail.masterfile.com) (205.207.224.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:31:03 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.masterfile.com (Postfix) with ESMTP id 1630F8800DB;
	Mon, 21 Aug 2006 15:30:43 -0400 (EDT)
Received: from [127.0.0.1] (unknown [172.16.8.63])
	by mail.masterfile.com (Postfix) with ESMTP id 0F03288006F
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 15:30:43 -0400 (EDT)
Message-ID: <44EA09DF.50402@masterfile.com>
Date: Mon, 21 Aug 2006 15:30:39 -0400
From: Rupinder Singh Mazara <rmazara@masterfile.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: searching for keywords
References: <44E9F772.4050504@masterfile.com> <359a92830608211202qecb96b5qfb0e7a9221ecd154@mail.gmail.com>
In-Reply-To: <359a92830608211202qecb96b5qfb0e7a9221ecd154@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

nope that does not really help i end up with the same result
query entered:"red hat"  ( without the quotes )
results in FULLTEXT:red FULLTEXT:hat AND KEYWORD:red KEYWORD:hat




Erick Erickson wrote:
> I think you can use this form
> *QueryParser<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/queryParser/QueryParser.html#QueryParser%28java.lang.String,%20org.apache.lucene.analysis.Analyzer%29> 
>
> *(String <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> f,
> Analyzer<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/analysis/Analyzer.html> 
>
> a)  where the analyzer is a PerFieldAnalyzerWrapper. Then use the same
> analyzer you used during the indexing process.
>
> This is Lucene 2.0...
>
> Best
> Erick
>
>
> On 8/21/06, Rupinder Singh Mazara <rmazara@masterfile.com> wrote:
>>
>> hi all
>>
>>   I need to be able to index and search for documents based on keywords
>> that are attached to a document.
>>
>>   Some of the keywords have white spaces in them like "red hat"  or
>> "place of worship" ,
>>
>>   I need to able to search for FULLTEXT:"red hat" AND KEYWORD:"red hat"
>>
>>
>>   For indexing purposes I was able to construct a NullTokenizer based on
>> the lucene mailling lists but the query parse seems to intent on
>> splitting any search term. Apart from writing my own parser is there any
>> way so as not to get FULLTEXT:red FULLTEXT:hat AND KEYWORD:red 
>> KEYWORD:hat
>>
>> thanks
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 19:39:55 2006
Return-Path: <java-user-return-22837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66042 invoked from network); 21 Aug 2006 19:39:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:39:55 -0000
Received: (qmail 63160 invoked by uid 500); 21 Aug 2006 19:39:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63133 invoked by uid 500); 21 Aug 2006 19:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63122 invoked by uid 99); 21 Aug 2006 19:39:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:39:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:39:47 -0700
Received: by ug-out-1314.google.com with SMTP id y2so1572764uge
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 12:39:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=C7Y285PAIKB10XW2uWzcxEzYCBn1L1j7iV1rXLe+XfT+xxM9LL6ixS/G1zcUZMQylHEPSAwwa5eTRXNBJWZKg4dXLmdSr9Lykbuoy2CykTrngMLbMmAw6KBT4MM5dpGu3SCptrqlrzuz25ChkhLOJwjQn/hX0KNu6GUF4xvCuwo=
Received: by 10.66.219.11 with SMTP id r11mr3897950ugg;
        Mon, 21 Aug 2006 12:39:25 -0700 (PDT)
Received: by 10.67.93.3 with HTTP; Mon, 21 Aug 2006 12:39:24 -0700 (PDT)
Message-ID: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com>
Date: Mon, 21 Aug 2006 15:39:25 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Test new query parser?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58736_220472.1156189165268"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_58736_220472.1156189165268
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is anyone interested in helping me test out a new query parser (i.e is
anyone interested in using this, thereby helping me test it) ?

 The parser uses a intermediate parse tree representation, unlike Lucene's
Query Filter.


The syntax:

date[april 6, 1992] & field2,field3[parrot ~3s yore] | ((cat | horse) &
rabbit ~6 pete)

'&' is an 'and'


'|' is an 'or'


~2 is a 'within 2 words'


~5p is a 'within 5 paragraphs'


~6s is a 'within 6 sentences'


'!' is 'butnot'


' ' is an 'and' that binds tighter than anything else but can only connect
search tokens (i.e 'old man' not 'date[today] man'--that would be
date[today] & man...changeable of course:_)


field1, field2, field3[mark | butternut] performs a search on all 3 fields


date[20050601 to 20060504] uses constant scoring range query filter to date
search (can parse most date formats).


no arbitrary range search yet...

paragraph/sentence support requires a replacement (supplied) standard
analyzer and is optional.
there is also support for a "did you mean" feature that spits back the query
substituted with a did you mean guess based on the words in a supplied index
(the corpus or a dictionary maybe):


field1,field2[horke | tomcat] might return a suggested search of =
field1,field2[horse | tomcat]

I am about to add quoted searches as well as the ability to escape query
keywords.

more feature to come, there is a lot I want to change and add (and fix)...

if you are interested, drop me a line at markrmiller@gmail.com

- mark

Some sample proximity queries:

        example = "monkey fowl ~3 man ~5 horse head ~4 lamb";
        expected = "+(+spanNear([allFields:monkey, allFields:man], 3, false)
+spanNear([allFields:fowl, allFields:man], 3, false))
+(+spanNear([allFields:man, allFields:horse], 5, false)
+spanNear([allFields:man, allFields:head], 5, false)
+(+spanNear([allFields:horse, allFields:lamb], 4, false)
+spanNear([allFields:head, allFields:lamb], 4, false)))";
        assertEquals(expected, parse(example));
//
        example = "monkey ~3 man";
        expected = "spanNear([allFields:monkey, allFields:man], 3, false)";
        assertEquals(expected, parse(example));

        example = "monkey ord~3 man";
        expected = "spanNear([allFields:monkey, allFields:man], 3, true)";
        assertEquals(expected, parse(example));

        example = "monkey ~3 man ~2 her";
        expected = "+spanNear([allFields:monkey, allFields:man], 3, false)
+spanNear([allFields:man, allFields:her], 2, false)";
        assertEquals(expected, parse(example));

        example = "(fowl & helicopter) ~8 hillary";
        expected = "+spanNear([allFields:fowl, allFields:hillary], 8, false)
+spanNear([allFields:helicopter, allFields:hillary], 8, false)";
        assertEquals(expected, parse(example));

        example = "(fowl | helicopter) ~6 hillary";
        expected = "+spanNear([allFields:fowl, allFields:hillary], 8, false)
+spanNear([allFields:helicopter, allFields:hillary], 8, false)";
        assertEquals(expected, parse(example));
//
//        // butnot resolves before proximity search
//        example = "(cop | fowl) & (fowl & priest man) ! helicopter ~8
hillary";
//        expected = "+(allFields:cop allFields:fowl)
+(+spanNear([allFields:fowl, allFields:hillary], 8, false)
+spanNear([allFields:priest, allFields:hillary], 8, false)
+spanNear([allFields:man, allFields:hillary], 8, false)
-spanNear([allFields:helicopter, allFields:hillary], 8, false))";
//        assertEquals(expected, parse(example));
//
        example = "priest man ! helicopter ~8 hillary";
        expected = "+spanNear([allFields:priest, allFields:hillary], 8,
false) +spanNear([allFields:man, allFields:hillary], 8, false)
-spanNear([allFields:helicopter, allFields:hillary], 8, false)";
        assertEquals(expected, parse(example));

------=_Part_58736_220472.1156189165268--

From java-user-return-22838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 19:59:12 2006
Return-Path: <java-user-return-22838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69929 invoked from network); 21 Aug 2006 19:59:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 19:59:12 -0000
Received: (qmail 90350 invoked by uid 500); 21 Aug 2006 19:58:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90321 invoked by uid 500); 21 Aug 2006 19:58:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90302 invoked by uid 99); 21 Aug 2006 19:58:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:58:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 12:58:57 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A1A2130EFCD3; Mon, 21 Aug 2006 15:58:36 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 4B5C630EFC19
	for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 15:58:31 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com>
References: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <45B681D2-4957-4D69-973B-2D5BFEEC35BA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Test new query parser?
Date: Mon, 21 Aug 2006 15:58:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 21, 2006, at 3:39 PM, Mark Miller wrote:
> Is anyone interested in helping me test out a new query parser (i.e is
> anyone interested in using this, thereby helping me test it) ?

I'm definitely interested in giving it a try.  The syntax looks nice.

> ~5p is a 'within 5 paragraphs'
>
> ~6s is a 'within 6 sentences'

What defines paragraphs and sentences?   What types of queries do  
those resolve to?

Thanks,
	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 20:21:52 2006
Return-Path: <java-user-return-22839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78861 invoked from network); 21 Aug 2006 20:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 20:21:52 -0000
Received: (qmail 34059 invoked by uid 500); 21 Aug 2006 20:21:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34038 invoked by uid 500); 21 Aug 2006 20:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34027 invoked by uid 99); 21 Aug 2006 20:21:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:21:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:21:43 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1141871nfe
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 13:21:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pdb0krupM36SpXuTd9lLaGtQZ7og1PfMLkKPlKqR1ScWp1J5nj8+52pAf0KREWh17pW+y3K6lnMlfkw7yqEspeWpT2XjLvA1KYi76zowU8T9dT+GloMPZI0vobo3rHfU++J0hXY6AJb4h2d8kb1OTHVgY3LBuxuwNyvbWo3HDBY=
Received: by 10.65.232.12 with SMTP id j12mr7401214qbr;
        Mon, 21 Aug 2006 13:21:21 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Mon, 21 Aug 2006 13:21:21 -0700 (PDT)
Message-ID: <78bc38bc0608211321k720dbfcckd4ce82beb06fd2ff@mail.gmail.com>
Date: Mon, 21 Aug 2006 21:21:21 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33489_21117847.1156191681312"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
	 <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_33489_21117847.1156191681312
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok this is what i have done so far ->

static class MyIndexSearcher extends IndexSearcher {
         IndexReader reader = null;
         public MyIndexSearcher(IndexReader r) {
             super(r);
             reader = r;
         }
         public void search(Weight weight,
org.apache.lucene.search.Filterfilter, final HitCollector results)
throws IOException {
             HitCollector collector = new HitCollector() {
                 public final void collect(int doc, float score) {
                     try {
                         // System.err.println(" doc " + doc + " score " +
score );
                         String str = reader.document(doc).get("sid");
                         results.collect(doc, Float.parseFloat(str));
                     } catch(Exception e) {

                     }
                 }
             };

             Scorer scorer = weight.scorer(reader);
             if (scorer == null)
                 return;
             scorer.score(collector);
         }

    };


Which is essentially an overriden method, although not fully optimized im
sure there is a way to make it quicker .. my timing has gone down to sub, 5
secs a query, not ideal but definately better than what i was getting before
..

In fact some searches now complete in under an sec .. which is a definate
result ..

The reason for doing it this way is simple .. the field sid stores a long
value that is the epoch, therefore the larger this value the more recent the
story and hence .. the higher it should be in the ranking ..

I guess the only bottleneck now is reading the value from the field .. since
for the multifield queries that value gets called (collect(int doc, float
score) ) a hell of a lot of times ..

now just have to find a way to eliminate low scoring ones .. and i am set ..


Thanx




On 8/20/06, M A <geneticflyer@googlemail.com> wrote:
>
>  The index is already built in date order i.e. the older documents appear
> first in the index, what i am trying to achieve is however the latest
> documents appearing first in the search results ..  without the sort .. i
> think they appear by relevance .. well thats what it looked like ..
>
> I am looking at the scoring as we speak,
>
>
>
> On 8/20/06, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > About luke... I don't know about command-line interfaces, but if you
> > copy
> > your index to a different machine and use Luke there. I do this between
> > Linux and Windows boxes all the time. Or, if you can mount the remote
> > drive
> > so you can see it, you can just use Luke to browse to it and open it up.
> > You
> > may have some latency though.....
> >
> > See below...
> >
> > On 8/20/06, M A <geneticflyer@googlemail.com> wrote:
> > >
> > > Ok I get your point, this still however means the first search on the
> > new
> > > searcher will take a huge amount of time .. given that this is
> > happening
> > > now
> > > ..
> >
> >
> > You can fire one or several canned queries at the searcher whenever you
> > open
> > a new one. That way the first time a *user* hits the box, the warm-up
> > will
> > already have happened. Note that the same searcher can be used by
> > multiple
> > threads...
> >
> >
> > i.e. new search -> new query -> get hits ->20+ secs ..  this happens
> > every 5
> > > mins or so ..
> > >
> > > although subsequent searches may be quicker ..
> > >
> > > Am i to assume for a first search the amount of  time is ok -> ..
> > seems
> > > like
> > > a long time to me ..?
> > >
> > > The other thing is the sorting is fixed .. it never changes .. it is
> > > always
> > > sorted by the same field ..
> >
> >
> > Assuming that you still have performance issues, you could think about
> > building your index in pre-sorted order an just avoiding the sorting all
> > together. The internal Lucene document IDs are then your sort order (a
> > newly
> > added doc hast an ID that is always greater than any existing doc ID). I
> >
> > don't know details of your problem space, but this might be relatively
> > easy.... You won't want to return things in relevance order in that
> > case. In
> > fact, you probably don't want relevance in place at all since your
> > sorting
> > doesn't change.... I think a ConstantScoreQuery  might work for you
> > here.
> >
> > But I wouldn't go there unless you have evidence that your sort is
> > slowing
> > you down, which is easy enough to verify by just taking it out. Don't
> > bother
> > with any of this until you re-use your reader though....
> >
> > i just built the entire index and it still takes ages .,..
> >
> >
> > The search took ages? Or building the index? If the former, then
> > rebuilding
> > the index is irrelevant, it's the first time you use a searcher that
> > counts.
> >
> > On 8/20/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > > >
> > > >
> > > > : This is because the index is updated every 5 mins or so, due to
> > the
> > > > incoming
> > > > : feed of stories ..
> > > > :
> > > > : When you say iteration, i take it you mean, search request, well
> > for
> > > > each
> > > > : search that is conducted I create a new one .. search reader that
> > is
> > > ..
> > > >
> > > > yeah ... i ment iteration of your test.  don't do that.
> > > >
> > > > if the index is updated every 5 minutes, then open a new searcher
> > every
> > > 5
> > > > minutes -- and reuse it for theentire 5 minutes.  if it's updated
> > > > "sparadically throughout the day" then open a search, and keep using
> > it
> > > > untill the index is udated, then open a new one.
> > > >
> > > > reusing an indexsearcher as long as possible is one of biggest
> > factors
> > > of
> > > > Lucene applications.
> > > >
> > > > :
> > > > :
> > > > :
> > > > : On 8/19/06, Chris Hostetter <hossman_lucene@fucit.org > wrote:
> > > > : >
> > > > : >
> > > > : > :     hits = searcher.search(query, new Sort("sid", true));
> > > > : >
> > > > : > you don't show where searcher is initialized, and you don't
> > clarify
> > > > how
> > > > : > you are timing your multiple iterations -- i'm going to guess
> > that
> > > you
> > > > are
> > > > : > opening a new searcher every iteration right?
> > > > : >
> > > > : > sorting on a field requires pre-computing an array of
> > information
> > > for
> > > > that
> > > > : > field -- this is both time and space expensive, and is cached
> > per
> > > > : > IndexReader/IndexSearcher -- so if you reuse the same searcher
> > and
> > > > time
> > > > : > multiple iterations you'll find that hte first iteration might
> > be
> > > > somewhat
> > > > : > slow, but the rest should be very fast.
> > > > : >
> > > > : >
> > > > : >
> > > > : > -Hoss
> > > > : >
> > > > : >
> > > > : >
> > > ---------------------------------------------------------------------
> > > > : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > : > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > > > : >
> > > > : >
> > > > :
> > > >
> > > >
> > > >
> > > > -Hoss
> > > >
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> >
> >
>

------=_Part_33489_21117847.1156191681312--

From java-user-return-22840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 20:26:54 2006
Return-Path: <java-user-return-22840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81216 invoked from network); 21 Aug 2006 20:26:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 20:26:54 -0000
Received: (qmail 43714 invoked by uid 500); 21 Aug 2006 20:26:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43677 invoked by uid 500); 21 Aug 2006 20:26:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43666 invoked by uid 99); 21 Aug 2006 20:26:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:26:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:26:48 -0700
Received: by py-out-1112.google.com with SMTP id w49so2494165pyg
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 13:26:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=C/etUhklPAWCeV7t3iRHpMMaYyK+vULFWHuHnll89T1rvRi0wF4hQPYXn25zAUlhV+yFBFmMLj6QapnRZNhT986QGiDPJtNe6dk2S6q2UeQsLW9+wYLarFzAv8b8twHJsO25mPGYICdh1GcI5rfAzcvgXk7wbLRjggN2wjCnx9k=
Received: by 10.35.127.7 with SMTP id e7mr13981843pyn;
        Mon, 21 Aug 2006 13:26:22 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Mon, 21 Aug 2006 13:26:08 -0700 (PDT)
Message-ID: <c68e39170608211326w33fcd341pf12273a3a5706516@mail.gmail.com>
Date: Mon, 21 Aug 2006 16:26:08 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <78bc38bc0608211321k720dbfcckd4ce82beb06fd2ff@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
	 <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
	 <78bc38bc0608211321k720dbfcckd4ce82beb06fd2ff@mail.gmail.com>
X-Google-Sender-Auth: 14d321e7bfb4d1f1
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>          public void search(Weight weight,
> org.apache.lucene.search.Filterfilter, final HitCollector results)
> throws IOException {
>              HitCollector collector = new HitCollector() {
>                  public final void collect(int doc, float score) {
>                      try {
>                          String str = reader.document(doc).get("sid");
>                          results.collect(doc, Float.parseFloat(str));
>                      } catch(Exception e) {

Ahhh... that explains things.
Retrieving documents is much slower than using Lucene's indicies.
If you want to do something like this, use FunctionQuery or use the FieldCache.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 20:28:30 2006
Return-Path: <java-user-return-22841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81683 invoked from network); 21 Aug 2006 20:28:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 20:28:30 -0000
Received: (qmail 46154 invoked by uid 500); 21 Aug 2006 20:28:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46120 invoked by uid 500); 21 Aug 2006 20:28:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46109 invoked by uid 99); 21 Aug 2006 20:28:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:28:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:28:23 -0700
Received: by py-out-1112.google.com with SMTP id w49so2494649pyg
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 13:28:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=RicaagcvPRZ6CGy0o3hWp4LbTm12j1JpF9DW5IwNbj7iNMO3jxs4RmsUSc0xaJ1xbh9V5KnfgxIk1HvlqqlM6YBJS1dSAhVaDnyXrPByhdKfMS5hsXdjwub7qvNkMAH3pSZg4q5jEKWOdknWoQkMysSbyzk5yyEyabVmmOUTShc=
Received: by 10.35.126.7 with SMTP id d7mr14038972pyn;
        Mon, 21 Aug 2006 13:28:02 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Mon, 21 Aug 2006 13:27:47 -0700 (PDT)
Message-ID: <c68e39170608211327w5c42905ax36f45361e9d94fd7@mail.gmail.com>
Date: Mon, 21 Aug 2006 16:27:47 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
	 <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
X-Google-Sender-Auth: 509ed7ae7f5482c5
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/20/06, M A <geneticflyer@googlemail.com> wrote:
> The index is already built in date order i.e. the older documents appear
> first in the index, what i am trying to achieve is however the latest
> documents appearing first in the search results ..  without the sort .. i
> think they appear by relevance .. well thats what it looked like ..

You can specify a Sort by internal lucene docid (forward or reverse).
That's your fastest and least memory intensive option if the docs are
indexed in date order.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 20:38:18 2006
Return-Path: <java-user-return-22842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85603 invoked from network); 21 Aug 2006 20:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 20:38:18 -0000
Received: (qmail 72450 invoked by uid 500); 21 Aug 2006 20:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72426 invoked by uid 500); 21 Aug 2006 20:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72415 invoked by uid 99); 21 Aug 2006 20:38:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:38:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 13:38:09 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1145787nfe
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 13:37:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ce04ii5RoUu0NKV5oBCJuBgkEZULrnBRMbnFKTWFdQ7JS8ebwn17pEINaxJotpbGF4eZvj8+D4zN0zu8mEvNE7BW+sGZEgz1hpLScmHLVQTh1CmGB8tPEGei3AKq8nseMQPL7qiSAOarHMP32Hvj/yR3fwLKIbUaa6/4YYSZADs=
Received: by 10.67.105.19 with SMTP id h19mr3929809ugm;
        Mon, 21 Aug 2006 13:37:47 -0700 (PDT)
Received: by 10.67.93.3 with HTTP; Mon, 21 Aug 2006 13:37:47 -0700 (PDT)
Message-ID: <ab0709bf0608211337u45385c21n56e84ce5744f7c55@mail.gmail.com>
Date: Mon, 21 Aug 2006 16:37:47 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Test new query parser?
In-Reply-To: <45B681D2-4957-4D69-973B-2D5BFEEC35BA@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60559_30192665.1156192667752"
References: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com>
	 <45B681D2-4957-4D69-973B-2D5BFEEC35BA@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_60559_30192665.1156192667752
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Great, I will get something ready to be given out within a day or so then.

Paragraph/Sent prox support is one thing I really need to test and improve.

The parapraph and sentence search uses a SpanWithinQuery. This is just a
SpanNotQuery that can span a specified number of times instead of not at
all.

mark ~3p dopey

SpanWithinQuery(spanNear([allFields:mark, allFields:dopey], 99999, false),
3, allFields:=B6)

>
> mark ord~3p dopey

SpanWithinQuery(spanNear([allFields:mark, allFields:dopey], 99999, true), 3=
,
allFields:=B6)

I use 99999 terribly arbitrarily. Integer.max_value blows things up.

This example uses =B6 as a marker. I think a better default might be a doub=
le
newline of some kind. Unfortunately, the marker is not nicely configurable
without source code access because it must be defined in the .jj file of th=
e
modified standard analyzer. Sentences can be deduced more universally:

Sentences are matched with:

<SENTENCE: ([".","?","!","]","[","]","\"","'",")"])+ ([" ","\t","\r","\n"])=
+
(["[","\"","'","`","("])* >

which is seems to be the standard sentence finder, although it lacks the
ability to check that an alphanumeric comes next (so that it doesn't mark a
sentence at the end of the text). No biggie for now though.

Also, right now paragraphs and sentences are marked separately at all
spots...for compactness a paragraph marker should also represent a sentence
marker. I need to check speed on these things though.

With some others interested in this I will get a move on these issues
though. I really want some feedback to make this thing better. It is not
perfect but I believe it has potential. Adding the other span type query fo=
r
example, would not be very difficult. The syntax is pretty easily modified
and extended

- Mark

------=_Part_60559_30192665.1156192667752--

From java-user-return-22843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 21:20:04 2006
Return-Path: <java-user-return-22843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97497 invoked from network); 21 Aug 2006 21:20:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 21:20:04 -0000
Received: (qmail 42781 invoked by uid 500); 21 Aug 2006 21:20:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42650 invoked by uid 500); 21 Aug 2006 21:20:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42600 invoked by uid 99); 21 Aug 2006 21:20:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 14:20:00 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 14:19:59 -0700
Received: by py-out-1112.google.com with SMTP id w49so2509410pyg
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 14:19:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j5vL5zGGFyZU61MOcDST7NdCE9Ppi/+y14xnwH8TTBPU/UREPcCHWd0s0U+yRF9ETndQzU2WtgrPIs8TTpCuQbbZZjYX2tRZlCJ4ej78gbQMEIKvueLjH7iJpcVjbBKUaffapcAeBzxCAetNgVxBq7gWklOBK5G/YyMRT0/jyts=
Received: by 10.35.40.10 with SMTP id s10mr14067180pyj;
        Mon, 21 Aug 2006 14:19:37 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 21 Aug 2006 14:19:37 -0700 (PDT)
Message-ID: <359a92830608211419j5c940abey25cf2e5caaabfb05@mail.gmail.com>
Date: Mon, 21 Aug 2006 17:19:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching for keywords
In-Reply-To: <44EA09DF.50402@masterfile.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67487_17506468.1156195177298"
References: <44E9F772.4050504@masterfile.com>
	 <359a92830608211202qecb96b5qfb0e7a9221ecd154@mail.gmail.com>
	 <44EA09DF.50402@masterfile.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_67487_17506468.1156195177298
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm a twit. How about PhraseQuery? From the Javadoc....

A Query that matches documents containing a particular sequence of terms. A
PhraseQuery is built by QueryParser for input like "new york".


You can also add phrase queries to a BooleanQuery.

Best
Erick

On 8/21/06, Rupinder Singh Mazara <rmazara@masterfile.com> wrote:
>
> nope that does not really help i end up with the same result
> query entered:"red hat"  ( without the quotes )
> results in FULLTEXT:red FULLTEXT:hat AND KEYWORD:red KEYWORD:hat
>
>
>
>
> Erick Erickson wrote:
> > I think you can use this form
> > *QueryParser<
> file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/queryParser/QueryParser.html#QueryParser%28java.lang.String,%20org.apache.lucene.analysis.Analyzer%29
> >
> >
> > *(String <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html>
> f,
> > Analyzer<
> file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/analysis/Analyzer.html>
> >
> > a)  where the analyzer is a PerFieldAnalyzerWrapper. Then use the same
> > analyzer you used during the indexing process.
> >
> > This is Lucene 2.0...
> >
> > Best
> > Erick
> >
> >
> > On 8/21/06, Rupinder Singh Mazara <rmazara@masterfile.com> wrote:
> >>
> >> hi all
> >>
> >>   I need to be able to index and search for documents based on keywords
> >> that are attached to a document.
> >>
> >>   Some of the keywords have white spaces in them like "red hat"  or
> >> "place of worship" ,
> >>
> >>   I need to able to search for FULLTEXT:"red hat" AND KEYWORD:"red hat"
> >>
> >>
> >>   For indexing purposes I was able to construct a NullTokenizer based
> on
> >> the lucene mailling lists but the query parse seems to intent on
> >> splitting any search term. Apart from writing my own parser is there
> any
> >> way so as not to get FULLTEXT:red FULLTEXT:hat AND KEYWORD:red
> >> KEYWORD:hat
> >>
> >> thanks
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_67487_17506468.1156195177298--

From java-user-return-22844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 22:24:37 2006
Return-Path: <java-user-return-22844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23861 invoked from network); 21 Aug 2006 22:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 22:24:37 -0000
Received: (qmail 62544 invoked by uid 500); 21 Aug 2006 22:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62523 invoked by uid 500); 21 Aug 2006 22:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62512 invoked by uid 99); 21 Aug 2006 22:24:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:24:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:24:29 -0700
Received: by nz-out-0102.google.com with SMTP id i1so804992nzh
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 15:24:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aixztJNQ9RgA2TESNy/NErHhwQqDdqdN03Yy+p4i/QreGPP5VFAoAAMuj+eB0/YWzXcVMwH2ZprIsaT3JFijSHIfsnOqk2bmnhEYH72Js2WmAjwflNYnTlrltO5fzRI+stp//DKNRcbfW7s4MRech8/0uiaPvemKQA94GEmHXb4=
Received: by 10.65.211.16 with SMTP id n16mr7549185qbq;
        Mon, 21 Aug 2006 15:24:08 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Mon, 21 Aug 2006 15:24:08 -0700 (PDT)
Message-ID: <78bc38bc0608211524u69d1071dn36fb60837510042f@mail.gmail.com>
Date: Mon, 21 Aug 2006 23:24:08 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <c68e39170608211327w5c42905ax36f45361e9d94fd7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34653_17430891.1156199048618"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <359a92830608190822g68263974we13490c444bd676b@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
	 <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
	 <c68e39170608211327w5c42905ax36f45361e9d94fd7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_34653_17430891.1156199048618
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yeah I tried looking this up,

If i wanted to do it by document id (highest docs first) , does this mean
doing something like

hits = searcher.search(query, new Sort(new SortFeild(DOC, true); // or
something like that,

is this way of sorting any different performance wise to what i was doing
before ..






On 8/21/06, Yonik Seeley <yonik@apache.org> wrote:
>
> On 8/20/06, M A <geneticflyer@googlemail.com> wrote:
> > The index is already built in date order i.e. the older documents appear
> > first in the index, what i am trying to achieve is however the latest
> > documents appearing first in the search results ..  without the sort ..
> i
> > think they appear by relevance .. well thats what it looked like ..
>
> You can specify a Sort by internal lucene docid (forward or reverse).
> That's your fastest and least memory intensive option if the docs are
> indexed in date order.
>
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search
> server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_34653_17430891.1156199048618--

From java-user-return-22845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 22:39:26 2006
Return-Path: <java-user-return-22845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29988 invoked from network); 21 Aug 2006 22:39:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 22:39:25 -0000
Received: (qmail 97367 invoked by uid 500); 21 Aug 2006 22:39:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97344 invoked by uid 500); 21 Aug 2006 22:39:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97333 invoked by uid 99); 21 Aug 2006 22:39:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:39:18 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of artvas@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:39:17 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1167402nfe
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 15:38:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=Nh3ojI67VTHUz49h5/sdQVVTMl3eKWMZXUGGssygoyI68TKBCpHM+nLmOWbWvzxARISplABhjsAMZXgbB51ROjXKC2ZoIljmIKeBviWyz0x8tJMTDpusVGCxtGLz2jIDiXc5e7vGUL7JMytZSJFO129ysK92BSH33odp1JEAnH4=
Received: by 10.49.43.2 with SMTP id v2mr140759nfj;
        Mon, 21 Aug 2006 15:38:56 -0700 (PDT)
Received: from ppp234-101.pptp.mtu-net.ru ( [81.195.234.101])
        by mx.gmail.com with ESMTP id h1sm36235nfe.2006.08.21.15.38.55;
        Mon, 21 Aug 2006 15:38:55 -0700 (PDT)
Date: Tue, 22 Aug 2006 02:39:05 +0400
From: Artem Vasiliev <artvas@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem Vasiliev <artvas@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <198589064.20060822023905@gmail.com>
To: java-user@lucene.apache.org
Subject: Re[2]: 30 milllion+ docs on a single server
In-Reply-To: <20060813051507.31793.qmail@web50309.mail.yahoo.com>
References: <44DE680B.8030502@gmail.com>
 <20060813051507.31793.qmail@web50309.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi guys!

I have noticed many questions on the list vonsidering Lucene sorting
memory consumption and hope my solution can help someone.

I faced a memory/time consumption problem on sorting in Lucene back in
April. With a help of this list's experts I came to solution which I
like: documents from the sorting set (instead of given the field's
values from the whole index) are lazy-cached in a WeakHashMap so the
cached items are candidates for GC. I didn't create a patch yet (and
I'm going to make it) but the code is ready to be reused and it's used
for a while as a part of my open-source project, sharehound
(http://sharehound.sourceforge.net). The code can be now reached by a
CVS browser, it's in 4 classes in subdirectories of
http://sharehound.cvs.sourceforge.net/sharehound/jNetCrawler/src/java/org/apache/lucene/.

They (both classes, as a part of sharehound.jar, and sources) can also
be downloaded with the latest (1.1.3 alpha) sharehound release zip
file.

LazyCachingSortFactory class have an example of use in its header
comments, I duplicate it here:

/**
 * Creates a Sort that doesn't use FieldCache and doesn't therefore load all the field values from the index while sorting.
 * Instead it uses CachingIndexReader (via CachingDocFieldComparatorSource) to cache documents from which field values
 * are fetched. If the caller Searcher is based on CachingIndexReader itself its document cache will be used here.
 *
 *
 * An example of use:
  ...
  hits = getQueryHits(query, getSort(listSorting.getSortFieldName(), listSorting.isSortDescending()));
  ...

  public Sort getSort(String sortFieldName, boolean sortDescending) {
    return LazyCachingSortFactory.create(sortFieldName, sortDescending);
  }
  ...
  protected Hits getQueryHits(Query query, Sort sort) throws IOException {
     IndexSearcher indexSearcher = new IndexSearcher(CachingIndexReader.decorateIfNeeded(IndexReader.open(getIndexDir())));
     return indexSearcher.search(query, sort);
  }

*/

This solution does great work saving a memory and in case of
relatively search resultsets it's almost as fast as the default
implementation. Note that this solution is ready only for single-field
sorting currently.

Best regards,
Artem

OG> This is unlikely to work well/fast.  It will depend on the
OG> size of the index (not in terms of the number of docs, but its
OG> physical size), the number of queries/second and desired query
OG> latency.  If you can wait 10 seconds to get a query and if only a
OG> few queries are hitting the server at any one time, then you may
OG> be Ok.  Having things be up to date with non-relevancy sorting
OG> will be quite tough.  FieldCache will consume some RAM.  Warming
OG> it up will take some number of seconds.  Re-opening an
OG> IndexSearcher after index changes will also cost you a bit of time.

OG> Consider a 64-bit server with more RAM that allowed larger
OG> Java heaps, and try to fit your index into RAM.

OG> Otis

OG> ----- Original Message ----
OG> From: Mark Miller <markrmiller@gmail.com>
OG> To: java-user@lucene.apache.org
OG> Sent: Saturday, August 12, 2006 7:45:15 PM
OG> Subject: Re: 30 milllion+ docs on a single server

OG> The single server is important because I think it will take a lot of
OG> work to scale it to multiple servers. The index must allow for close to
OG> real-time updates and additions. It must also remain searchable at all
OG> times (other than than during the brief period of single updates and
OG> additions). If it is easy to scale this to multiple servers please tell
OG> me how.

OG> - Mark
>> Why is a single server so important?  I can scale horizontally much
>> cheaper
>> than I scale vertically.
>>
>>
>>
>> On 8/11/06, Mark Miller <markrmiller@gmail.com> wrote:
>>>
>>> I've made a nice little archive application with lucene. I made it to
>>> handle our largest need: 2.5 million docs or so on a single server. Now
>>> the powers that be say: lets use it for a 30+ million document archive
>>> on a single server! (each doc size maybe 10k max...as small as a 1 or
>>> 2k) Please tell me why we are in trouble...please tell me why we are
>>> not. I have tested up to 2 million docs without much trouble but 30
>>> million...the average search will include a sort on a field as
>>> well...can I search 30+ million docs with a sort? Man am I worried about
>>> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
>>> Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5
>>> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds like
>>> too much of a load to me for a single server. Not that they care what I
>>> think...I only wrote the thing (man I hate my job, offer me a new one :)
>>> )...please...comments?
>>>
>>> Cheers,
>>>
>>> Miserable Mark
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>


OG> ---------------------------------------------------------------------
OG> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
OG> For additional commands, e-mail: java-user-help@lucene.apache.org





OG> ---------------------------------------------------------------------
OG> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
OG> For additional commands, e-mail: java-user-help@lucene.apache.org






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 22:45:44 2006
Return-Path: <java-user-return-22846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31482 invoked from network); 21 Aug 2006 22:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 22:45:44 -0000
Received: (qmail 8149 invoked by uid 500); 21 Aug 2006 22:45:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8119 invoked by uid 500); 21 Aug 2006 22:45:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8108 invoked by uid 99); 21 Aug 2006 22:45:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:45:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 15:45:37 -0700
Received: by py-out-1112.google.com with SMTP id w49so2533970pyg
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 15:45:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=jHFk95TJ1Owg1cgLBcl6ySCnYPm8zVJhK6bA7RmYeZboYRo0gm7oi0RL51SV+T5EFYFLlAVa+LvmtKAlHFr8O3lZSIuqNbg6aS0BUNXBpHpJ90SnmMGSotquGRX4ImV9jpYyiVtmGA0dIdAFZOajy8QBx8CirM1JcHd/qw1xUz4=
Received: by 10.35.94.2 with SMTP id w2mr14198941pyl;
        Mon, 21 Aug 2006 15:45:16 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Mon, 21 Aug 2006 15:45:16 -0700 (PDT)
Message-ID: <c68e39170608211545k3e649fbas26a442585e9be036@mail.gmail.com>
Date: Mon, 21 Aug 2006 18:45:16 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <78bc38bc0608211524u69d1071dn36fb60837510042f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <78bc38bc0608190853g5ddc2f0ald2b6e5ec4994c7f1@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
	 <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
	 <c68e39170608211327w5c42905ax36f45361e9d94fd7@mail.gmail.com>
	 <78bc38bc0608211524u69d1071dn36fb60837510042f@mail.gmail.com>
X-Google-Sender-Auth: 6721fb2a39eb575a
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/21/06, M A <geneticflyer@googlemail.com> wrote:
> Yeah I tried looking this up,
>
> If i wanted to do it by document id (highest docs first) , does this mean
> doing something like
>
> hits = searcher.search(query, new Sort(new SortFeild(DOC, true); // or
> something like that,
>
> is this way of sorting any different performance wise to what i was doing
> before ..

Definitely a lot faster if you don't warm up and re-use your searchers.
Sorting by docid doesn't require the FieldCache, so you don't get the
first-search penalty.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 23:05:05 2006
Return-Path: <java-user-return-22847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35843 invoked from network); 21 Aug 2006 23:05:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 23:05:04 -0000
Received: (qmail 34349 invoked by uid 500); 21 Aug 2006 23:05:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33847 invoked by uid 500); 21 Aug 2006 23:04:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33836 invoked by uid 99); 21 Aug 2006 23:04:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 16:04:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 16:04:56 -0700
Received: by nz-out-0102.google.com with SMTP id i1so809227nzh
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 16:04:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZrHrQVM8JhNoaZ0XaT/T8pysF7NrLHRVg1MgUHRZm0LwS8rLAf1qVQDnnZ54mxhSSRhlWOLwt2l4x45/Oj7kOht7CBd6i+OC71dTR1Tk/qZfO6hZTGgMpMobfiJOqbRUP3bA6ina3qkuLNeSnAfRgjslt96je3U9etUR7vypWNU=
Received: by 10.65.211.16 with SMTP id n16mr7591505qbq;
        Mon, 21 Aug 2006 16:04:35 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Mon, 21 Aug 2006 16:04:34 -0700 (PDT)
Message-ID: <78bc38bc0608211604g8090f7y584fa517bafdf64a@mail.gmail.com>
Date: Tue, 22 Aug 2006 00:04:34 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <c68e39170608211545k3e649fbas26a442585e9be036@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35098_12200770.1156201474716"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <Pine.LNX.4.58.0608191549050.31867@hal.rescomp.berkeley.edu>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
	 <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
	 <c68e39170608211327w5c42905ax36f45361e9d94fd7@mail.gmail.com>
	 <78bc38bc0608211524u69d1071dn36fb60837510042f@mail.gmail.com>
	 <c68e39170608211545k3e649fbas26a442585e9be036@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_35098_12200770.1156201474716
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I still dont get this,  How would i do this, so i can try it out ..

is

searcher.search(query, new Sort(SortField.DOC))

..correct this would return stuff in the order of the documents, so how
would i reverse this, i mean the later documents appearing fisrt ..

searcher.search(query, new Sort(????)

How do you get document number descending .. ?? for the sort that is



On 8/21/06, Yonik Seeley <yonik@apache.org> wrote:
>
> On 8/21/06, M A <geneticflyer@googlemail.com> wrote:
> > Yeah I tried looking this up,
> >
> > If i wanted to do it by document id (highest docs first) , does this
> mean
> > doing something like
> >
> > hits = searcher.search(query, new Sort(new SortFeild(DOC, true); // or
> > something like that,
> >
> > is this way of sorting any different performance wise to what i was
> doing
> > before ..
>
> Definitely a lot faster if you don't warm up and re-use your searchers.
> Sorting by docid doesn't require the FieldCache, so you don't get the
> first-search penalty.
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search
> server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_35098_12200770.1156201474716--

From java-user-return-22848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 23:16:02 2006
Return-Path: <java-user-return-22848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39020 invoked from network); 21 Aug 2006 23:16:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 23:16:02 -0000
Received: (qmail 54482 invoked by uid 500); 21 Aug 2006 23:15:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53978 invoked by uid 500); 21 Aug 2006 23:15:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53967 invoked by uid 99); 21 Aug 2006 23:15:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 16:15:55 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 16:15:55 -0700
Received: by py-out-1112.google.com with SMTP id w49so2542900pyg
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 16:15:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=lDVLjeECUraCYY5+L8riYtRNa+Qe3fKRz1q+svPeIxwHwdu3/UMRtK+jtb5WwEs/sACXNOrBUdmvynA5+E7XyFooYK9MXpAlETv1Sp+zJBVLM5oykM294AcFkgqei9ZlVABh6xZTTMYWePdLdWUt6g12NuvuoXVqZONBqUArOiY=
Received: by 10.35.63.2 with SMTP id q2mr14249488pyk;
        Mon, 21 Aug 2006 16:15:34 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Mon, 21 Aug 2006 16:15:34 -0700 (PDT)
Message-ID: <c68e39170608211615w5de3e4ebw1319502f48126352@mail.gmail.com>
Date: Mon, 21 Aug 2006 19:15:34 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <78bc38bc0608211604g8090f7y584fa517bafdf64a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <78bc38bc0608191701w2bc033d1oea94592fee44ce14@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
	 <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
	 <c68e39170608211327w5c42905ax36f45361e9d94fd7@mail.gmail.com>
	 <78bc38bc0608211524u69d1071dn36fb60837510042f@mail.gmail.com>
	 <c68e39170608211545k3e649fbas26a442585e9be036@mail.gmail.com>
	 <78bc38bc0608211604g8090f7y584fa517bafdf64a@mail.gmail.com>
X-Google-Sender-Auth: ccefbafd0ce306fe
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/21/06, M A <geneticflyer@googlemail.com> wrote:
> I still dont get this,  How would i do this, so i can try it out ..

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/SortField.html#SortField(java.lang.String,%20int,%20boolean)

new Sort(new SortField(null,SortField.DOC,true)


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 21 23:41:40 2006
Return-Path: <java-user-return-22849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44197 invoked from network); 21 Aug 2006 23:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2006 23:41:39 -0000
Received: (qmail 84203 invoked by uid 500); 21 Aug 2006 23:41:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84157 invoked by uid 500); 21 Aug 2006 23:41:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84146 invoked by uid 99); 21 Aug 2006 23:41:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 16:41:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of geneticflyer@googlemail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Aug 2006 16:41:32 -0700
Received: by py-out-1112.google.com with SMTP id w49so2550540pyg
        for <java-user@lucene.apache.org>; Mon, 21 Aug 2006 16:41:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aqMWG2jA00HOH+sufV0G3hmuVPLEhexpQbmAjCQ7PXlpIdBkmGV8+I7Ugfe8VIF2oS13JMGrdLGQDD6iDzg/e3BnSlCEJtjKSWPJhz7b7D3LKwPJg1TeT4YES9l6Q9pmWNc2blZUarxiDclNP1hvL1J3/gijNFAbOZfXpHj0EEg=
Received: by 10.65.219.4 with SMTP id w4mr7619313qbq;
        Mon, 21 Aug 2006 16:41:08 -0700 (PDT)
Received: by 10.65.123.3 with HTTP; Mon, 21 Aug 2006 16:41:08 -0700 (PDT)
Message-ID: <78bc38bc0608211641n376339c7lec3da059c82d4257@mail.gmail.com>
Date: Tue, 22 Aug 2006 00:41:08 +0100
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Performance Problem 16 sec for 250K docs
In-Reply-To: <c68e39170608211615w5de3e4ebw1319502f48126352@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35540_25494102.1156203668296"
References: <78bc38bc0608190655q3b777279m39dbb16469c1c17a@mail.gmail.com>
	 <Pine.LNX.4.58.0608191746120.1134@hal.rescomp.berkeley.edu>
	 <78bc38bc0608200235n1d7c71fbm3a46823a80e716f6@mail.gmail.com>
	 <359a92830608200616s1bb2aef8md7f406598595e9ac@mail.gmail.com>
	 <78bc38bc0608200648wb83f1cl611cbcc0299e1eca@mail.gmail.com>
	 <c68e39170608211327w5c42905ax36f45361e9d94fd7@mail.gmail.com>
	 <78bc38bc0608211524u69d1071dn36fb60837510042f@mail.gmail.com>
	 <c68e39170608211545k3e649fbas26a442585e9be036@mail.gmail.com>
	 <78bc38bc0608211604g8090f7y584fa517bafdf64a@mail.gmail.com>
	 <c68e39170608211615w5de3e4ebw1319502f48126352@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_35540_25494102.1156203668296
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It is indeed alot faster ...

Will use that one now ..

hits = searcher.search(query, new Sort(new
SortField(null,SortField.DOC,true)));


That is completing in under a sec for pretty much all the queries ..




On 8/22/06, Yonik Seeley <yonik@apache.org> wrote:
>
> On 8/21/06, M A <geneticflyer@googlemail.com> wrote:
> > I still dont get this,  How would i do this, so i can try it out ..
>
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/SortField.html#SortField(java.lang.String,%20int,%20boolean)
>
> new Sort(new SortField(null,SortField.DOC,true)
>
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search
> server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_35540_25494102.1156203668296--

From java-user-return-22850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 22 08:48:05 2006
Return-Path: <java-user-return-22850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96538 invoked from network); 22 Aug 2006 08:48:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 08:48:05 -0000
Received: (qmail 70172 invoked by uid 500); 22 Aug 2006 08:48:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69680 invoked by uid 500); 22 Aug 2006 08:47:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69668 invoked by uid 99); 22 Aug 2006 08:47:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 01:47:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.239.116.71] (HELO mail01.bassnet.biz) (212.239.116.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 01:47:58 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail01.bassnet.biz (Postfix) with ESMTP id 531A13AA9
	for <java-user@lucene.apache.org>; Tue, 22 Aug 2006 10:46:52 +0200 (CEST)
Received: from mail01.bassnet.biz ([127.0.0.1])
	by localhost (urano [127.0.0.1]) (amavisd-new, port 10024) with LMTP
	id 15178-03 for <java-user@lucene.apache.org>;
	Tue, 22 Aug 2006 10:46:52 +0200 (CEST)
Received: from [192.168.136.123] (unknown [192.168.136.123])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail01.bassnet.biz (Postfix) with ESMTP id 046CA3A95
	for <java-user@lucene.apache.org>; Tue, 22 Aug 2006 10:46:51 +0200 (CEST)
Message-ID: <44EAD2F4.5050300@bassnet.biz>
Date: Tue, 22 Aug 2006 09:48:36 +0000
From: Lorenzo Di Gaetano <lorenzo.digaetano@bassnet.biz>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
X-Accept-Language: it, it-it, en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Searching a untokenized field using SnowballAnalyzer
References: <44E9E04E.6090802@bassnet.biz> <Pine.LNX.4.58.0608211040460.2877@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0608211040460.2877@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at bassnet.biz
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>Try using telling the QueryParser to use a PerFieldAnalyzer with the
>KeywordAnalyzer configured for the fields you left UN_TOKENIZED and see if
>that helps.
>  
>
It helps!!! I wrapped (with PerFieldAnalyzerWrapper) KeywordAnalyzer as 
default analyzer and SnowballAnalyzer only for the field that I need to 
be tokenized. You solved my problem!!!

Thank you all very much!

Regards,

Lorenzo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 22 10:33:24 2006
Return-Path: <java-user-return-22851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26103 invoked from network); 22 Aug 2006 10:33:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 10:33:24 -0000
Received: (qmail 10218 invoked by uid 500); 22 Aug 2006 10:33:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10187 invoked by uid 500); 22 Aug 2006 10:33:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10175 invoked by uid 99); 22 Aug 2006 10:33:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 03:33:18 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pvsaikrishna@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 03:33:17 -0700
Received: by wx-out-0506.google.com with SMTP id s15so2038675wxc
        for <java-user@lucene.apache.org>; Tue, 22 Aug 2006 03:32:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FaPfuzvmUtjlmmUJF5LDwfz3mlsxAK4xJM/Y4hEzk/awmVq0k/1OhvZ+pgCDJFMzKE1IFhLhB1jDSDmpRJ/jVQ8OM0Jy2m+c9NbTSIPwW2GG2zKEAZCSWRUMr+47bcpZJa10vsz/iVa1aX2I1oEpCjVbFqSA2djjyjj4mJ/tEbA=
Received: by 10.90.56.14 with SMTP id e14mr385746aga;
        Tue, 22 Aug 2006 03:32:56 -0700 (PDT)
Received: by 10.90.82.19 with HTTP; Tue, 22 Aug 2006 03:32:56 -0700 (PDT)
Message-ID: <171dbfa60608220332j1364eb0eued9086f1be359479@mail.gmail.com>
Date: Tue, 22 Aug 2006 16:02:56 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help on Fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11862_10451226.1156242776256"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_11862_10451226.1156242776256
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hai,
     Can I store multiple values for same Field, with same field name for a
given document.

      I mean is this operation permitted

     doc.add(Field.text("title","T1"))
     doc.add(Field.text("title","T2"))
     doc.add(Field.text("title","T3"))

     So when I ask for title it should return all the titles.

regards,
Saikrishna

------=_Part_11862_10451226.1156242776256--

From java-user-return-22852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 22 12:57:18 2006
Return-Path: <java-user-return-22852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91720 invoked from network); 22 Aug 2006 12:57:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 12:57:18 -0000
Received: (qmail 49942 invoked by uid 500); 22 Aug 2006 12:57:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49923 invoked by uid 500); 22 Aug 2006 12:57:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49912 invoked by uid 99); 22 Aug 2006 12:57:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 05:57:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 05:57:10 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F09BA30EFCD5; Tue, 22 Aug 2006 08:56:49 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id B52CB30EFCD3
	for <java-user@lucene.apache.org>; Tue, 22 Aug 2006 08:56:46 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <171dbfa60608220332j1364eb0eued9086f1be359479@mail.gmail.com>
References: <171dbfa60608220332j1364eb0eued9086f1be359479@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EFEF252D-64EE-4446-90BD-F64DB996F690@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Help on Fields
Date: Tue, 22 Aug 2006 08:56:43 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, no problem.  Except there is no Field.text() method, so you'll  
want to use the Field constructor to make the fields at least stored  
to get them back, but most likely you'd also want them indexed and  
tokenized too.

	Erik


On Aug 22, 2006, at 6:32 AM, saikrishna venkata pendyala wrote:

> Hai,
>     Can I store multiple values for same Field, with same field  
> name for a
> given document.
>
>      I mean is this operation permitted
>
>     doc.add(Field.text("title","T1"))
>     doc.add(Field.text("title","T2"))
>     doc.add(Field.text("title","T3"))
>
>     So when I ask for title it should return all the titles.
>
> regards,
> Saikrishna


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 22 14:58:53 2006
Return-Path: <java-user-return-22853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40792 invoked from network); 22 Aug 2006 14:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 14:58:52 -0000
Received: (qmail 28625 invoked by uid 500); 22 Aug 2006 14:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28522 invoked by uid 500); 22 Aug 2006 14:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28511 invoked by uid 99); 22 Aug 2006 14:58:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 07:58:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 07:58:42 -0700
Received: from [10.10.150.11] ([10.10.150.11])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k7MEwUhB002211
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 22 Aug 2006 09:58:31 -0500
Message-ID: <44EB1B8C.4020909@wolfram.com>
Date: Tue, 22 Aug 2006 10:58:20 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Information:  For Indexing Emails
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I thought I would pass it along if anyone is interested.

If the emails are in mbox format "Tropo" as suggested in lucene's faq 
works perfectly if it is in an imap store.

For archived emails stored in mbox format I used mstor.jar from 
mstor.sourceforge.net with "Tropo".

thanks,
suba suresh.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 22 21:09:57 2006
Return-Path: <java-user-return-22854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70570 invoked from network); 22 Aug 2006 21:09:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 21:09:57 -0000
Received: (qmail 23524 invoked by uid 500); 22 Aug 2006 21:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22813 invoked by uid 500); 22 Aug 2006 21:09:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22802 invoked by uid 99); 22 Aug 2006 21:09:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 14:09:51 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 205.152.59.66 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from [205.152.59.66] (HELO imf18aec.mail.bellsouth.net) (205.152.59.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 14:09:50 -0700
Received: from ibm59aec.bellsouth.net ([68.209.119.157])
          by imf18aec.mail.bellsouth.net with ESMTP
          id <20060822210928.BBNQ16267.imf18aec.mail.bellsouth.net@ibm59aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Tue, 22 Aug 2006 17:09:28 -0400
Received: from jimwormold ([68.209.119.157]) by ibm59aec.bellsouth.net
          with ESMTP
          id <20060822210923.PCFK21151.ibm59aec.bellsouth.net@jimwormold>
          for <java-user@lucene.apache.org>;
          Tue, 22 Aug 2006 17:09:23 -0400
Date: Tue, 22 Aug 2006 17:15:00 -0400 (EDT)
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: Test new query parser?
In-Reply-To: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com>
Message-ID: <Pine.LNX.4.63.0608221708120.22579@jimwormold>
References: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mark --

Yes please! I'm very interested in the mixing of boolean and proximity
operators. I have also worked on a parser (using JavaCC) but haven't
managed to crack queries such as:

     ((a OR b) AND c) NEAR (d NOT e)

I can get the parse tree okay, but haven't figured out how to translate
that into a valid Lucene Query object. Simple queries such as:

     (a OR b) NEXT (c OR d)   // note the use of OR exclusively!

are okay, but nothing more complex. So: bring it on!

-- Robert
rwatkins at foo-bar.org

On Mon, 21 Aug 2006, Mark Miller wrote:

> Is anyone interested in helping me test out a new query parser (i.e is
> anyone interested in using this, thereby helping me test it) ?
>
> The parser uses a intermediate parse tree representation, unlike Lucene's
> Query Filter.
>
> [ snipped ]

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 22 22:23:43 2006
Return-Path: <java-user-return-22855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91676 invoked from network); 22 Aug 2006 22:23:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 22:23:42 -0000
Received: (qmail 41233 invoked by uid 500); 22 Aug 2006 22:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41199 invoked by uid 500); 22 Aug 2006 22:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41188 invoked by uid 99); 22 Aug 2006 22:23:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:23:36 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:23:35 -0700
Received: by nf-out-0910.google.com with SMTP id x4so200297nfb
        for <java-user@lucene.apache.org>; Tue, 22 Aug 2006 15:23:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=LkLAD46W2R2CbAe3wYqRmjtC3PDE6uszQweT7AHNZiW7pxd4SXGFIL0L8wnE7CDvooYX+q8xjfKEnJ20JfKKF4AS+qAL7sdhAHqHGN1O0gkhbn+IHgyQQ6gOflg9pxxT4h5MQWhY+XJLVJPYE9sf6H8uHNZibkucG7ecSqcaznA=
Received: by 10.49.10.3 with SMTP id n3mr1090498nfi;
        Tue, 22 Aug 2006 15:23:14 -0700 (PDT)
Received: by 10.78.198.6 with HTTP; Tue, 22 Aug 2006 15:23:14 -0700 (PDT)
Message-ID: <1cbd6f830608221523v321b18cas3bb951b148b375d2@mail.gmail.com>
Date: Tue, 22 Aug 2006 18:23:14 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: correct classpath
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17912_10735253.1156285394190"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17912_10735253.1156285394190
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,
I am getting into Java + Lucene. To compile a Lucene program

CreateIndex.java

public class CreateIndex {
  // usage: CreateIndex index-directory
  public static void main(String[] args) throws Exception {
    String indexPath = args[0];
    IndexWriter writer;

    // An index is created by opening an IndexWriter with the
    // create argument set to true.
    writer = new IndexWriter(indexPath, null, true);
    writer.close();
  }
}

What CLASSPATH should I set? I currently have this:

/home/tomcat/lucene-2.0.0/lucene-core-2.0.0.jar

thanks!


**

*
*

------=_Part_17912_10735253.1156285394190--

From java-user-return-22856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 22 22:43:21 2006
Return-Path: <java-user-return-22856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95746 invoked from network); 22 Aug 2006 22:43:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2006 22:43:21 -0000
Received: (qmail 73995 invoked by uid 500); 22 Aug 2006 22:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73966 invoked by uid 500); 22 Aug 2006 22:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73955 invoked by uid 99); 22 Aug 2006 22:43:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:43:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [198.144.201.51] (HELO aptos.esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 15:43:14 -0700
Received: from exchange.esseff.org (capitola.esseff.org [10.0.0.2])
	by aptos.esseff.org (8.13.1/8.13.1) with ESMTP id k7MMgr0g025186
	for <java-user@lucene.apache.org>; Tue, 22 Aug 2006 15:42:53 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Subject: apachecon
Date: Tue, 22 Aug 2006 15:42:53 -0700
Message-ID: <F737CD18A0708B49857E49809BC7ED762DF620@capitola.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: apachecon
Thread-Index: AcbGOZ8kvC0WxgoaQ5Os7+AAOmanuwAAjfDA
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So it looks like there's only a little Lucene-oriented stuff on the
program at ApacheCon 2006. The Solr talk looks interesting.

I was wondering if there have been any other self/semi-organized things
around Lucene in the past, like a BOF?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 01:10:54 2006
Return-Path: <java-user-return-22857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32411 invoked from network); 23 Aug 2006 01:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 01:10:54 -0000
Received: (qmail 50735 invoked by uid 500); 23 Aug 2006 01:10:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50704 invoked by uid 500); 23 Aug 2006 01:10:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50690 invoked by uid 99); 23 Aug 2006 01:10:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 18:10:47 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 18:10:44 -0700
Received: by wx-out-0506.google.com with SMTP id s15so2264018wxc
        for <java-user@lucene.apache.org>; Tue, 22 Aug 2006 18:10:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=rdiff5qlmH2bNhUqUxeskT9f7VzHPhemiOS5xONoMEAMSReRof/h1vH5UVRx4KVpbCI7H5jel1dkFFIbHFfN3wGTgq4u6MdgNwjaKfTFAgHq6iF54Tua8myROuZidIZuOHlI2JplGpAk/vRtwdX3z/F+vcaduI8pFD0UHHFLbkY=
Received: by 10.70.99.11 with SMTP id w11mr12588128wxb;
        Tue, 22 Aug 2006 18:10:23 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id i39sm10556202wxd.2006.08.22.18.10.11;
        Tue, 22 Aug 2006 18:10:23 -0700 (PDT)
Message-ID: <44EBAAF6.10106@gmail.com>
Date: Tue, 22 Aug 2006 21:10:14 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Solr Cache
References: <F737CD18A0708B49857E49809BC7ED762DF620@capitola.esseff.org>
In-Reply-To: <F737CD18A0708B49857E49809BC7ED762DF620@capitola.esseff.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It looks like Solr does not use a simple cached queryfilter as a query 
cache. Why is this? Is a cache queryfilter not efficient enough? Is this 
alternate method just so you can easily load the cache from an old 
Searcher to a new Searcher? Any info appreciated.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 02:25:13 2006
Return-Path: <java-user-return-22858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51861 invoked from network); 23 Aug 2006 02:25:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 02:25:13 -0000
Received: (qmail 18694 invoked by uid 500); 23 Aug 2006 02:25:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18363 invoked by uid 500); 23 Aug 2006 02:25:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18351 invoked by uid 99); 23 Aug 2006 02:25:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 19:25:05 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Aug 2006 19:25:04 -0700
Received: by nf-out-0910.google.com with SMTP id b2so219183nfe
        for <java-user@lucene.apache.org>; Tue, 22 Aug 2006 19:24:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=XOXReIjCgWvRo2nIfmOzfzF7mu+P2dvh1itsG83M+tjZx8GZd7pl5W7QzKh5jUcIb6HAh7GFalBdEIYwfj0EhYQ/eQCAVmKZ7YVLqNQOfhQrBcWLOOiuLeapfuvM0wk9Gd5kdIar34ldzztnvR93Bi35a52MZDtJHQ589v7Uxfg=
Received: by 10.49.91.6 with SMTP id t6mr1319230nfl;
        Tue, 22 Aug 2006 19:24:42 -0700 (PDT)
Received: by 10.78.198.6 with HTTP; Tue, 22 Aug 2006 19:24:42 -0700 (PDT)
Message-ID: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>
Date: Tue, 22 Aug 2006 22:24:42 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Tomcat Simple Example
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21584_32002056.1156299882906"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21584_32002056.1156299882906
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

Does anyone have a simple Tomcat search/result example? I have 4 text files,
i would like to index.

Thanks

------=_Part_21584_32002056.1156299882906--

From java-user-return-22859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 07:19:13 2006
Return-Path: <java-user-return-22859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20475 invoked from network); 23 Aug 2006 07:19:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 07:19:12 -0000
Received: (qmail 27969 invoked by uid 500); 23 Aug 2006 07:19:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27937 invoked by uid 500); 23 Aug 2006 07:19:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27926 invoked by uid 99); 23 Aug 2006 07:19:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:19:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.wechner@wyona.com designates 195.226.6.68 as permitted sender)
Received: from [195.226.6.68] (HELO mx1.wyona.com) (195.226.6.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:19:04 -0700
Received: from [195.226.6.66] (helo=[192.168.1.55])
	by mx1.wyona.com with asmtp (Exim 3.35 #1 (Debian))
	id 1GFn0c-0001FB-00
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 09:18:42 +0200
Message-ID: <44EC0150.2020203@wyona.com>
Date: Wed, 23 Aug 2006 09:18:40 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.12) Gecko/20050920
X-Accept-Language: en-us, de, fr-ch, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Tomcat Simple Example
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>
In-Reply-To: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mag Gam wrote:

> Hi All,
>
> Does anyone have a simple Tomcat search/result example?


you mean like the war file of Nutch?

Michi

> I have 4 text files,
> i would like to index.
>
> Thanks
>


-- 
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 07:49:59 2006
Return-Path: <java-user-return-22860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40252 invoked from network); 23 Aug 2006 07:49:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 07:49:58 -0000
Received: (qmail 64593 invoked by uid 500); 23 Aug 2006 07:49:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64561 invoked by uid 500); 23 Aug 2006 07:49:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64550 invoked by uid 99); 23 Aug 2006 07:49:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:49:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:49:52 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7a46d505f188ada2e41344@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 23 Aug 2006 09:46:15 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6C688.A746DF36"
Subject: Update index
Date: Wed, 23 Aug 2006 09:49:25 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF442@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Update index
Thread-Index: AcbGiKh1K/UYMnraRWqTaAfMfxBK3Q==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6C688.A746DF36
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is it possible to update fields in an existing index.
If yes how to proceed.

------_=_NextPart_001_01C6C688.A746DF36--

From java-user-return-22861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 07:50:49 2006
Return-Path: <java-user-return-22861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40537 invoked from network); 23 Aug 2006 07:50:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 07:50:49 -0000
Received: (qmail 67108 invoked by uid 500); 23 Aug 2006 07:50:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67081 invoked by uid 500); 23 Aug 2006 07:50:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67070 invoked by uid 99); 23 Aug 2006 07:50:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:50:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 00:50:42 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7a46d5d71c88ada2e41344@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 23 Aug 2006 09:47:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6C688.C0DEA80A"
Subject: Change index structure
Date: Wed, 23 Aug 2006 09:50:08 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF443@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Change index structure
Thread-Index: AcbGiMHvM+Xj2H2fQDeouxMELSY6ww==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6C688.C0DEA80A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is it possible to change index structure in an existing index.
If yes how to proceed.

------_=_NextPart_001_01C6C688.C0DEA80A--

From java-user-return-22862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 08:11:56 2006
Return-Path: <java-user-return-22862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45119 invoked from network); 23 Aug 2006 08:11:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 08:11:56 -0000
Received: (qmail 88697 invoked by uid 500); 23 Aug 2006 08:11:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88668 invoked by uid 500); 23 Aug 2006 08:11:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88657 invoked by uid 99); 23 Aug 2006 08:11:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:11:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:11:49 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7FFD75B77A; Wed, 23 Aug 2006 01:11:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7AA817F403
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 01:11:29 -0700 (PDT)
Date: Wed, 23 Aug 2006 01:11:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Tomcat Simple Example
In-Reply-To: <44EC0150.2020203@wyona.com>
Message-ID: <Pine.LNX.4.58.0608230110350.18339@hal.rescomp.berkeley.edu>
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>
 <44EC0150.2020203@wyona.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > Does anyone have a simple Tomcat search/result example?

: > I have 4 text files,
: > i would like to index.

take a look at the geting started guide, and the demo WAR that comes with
the Lucene distribution...

http://lucene.apache.org/java/docs/gettingstarted.html



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 08:14:42 2006
Return-Path: <java-user-return-22863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46494 invoked from network); 23 Aug 2006 08:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 08:14:42 -0000
Received: (qmail 96147 invoked by uid 500); 23 Aug 2006 08:14:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96123 invoked by uid 500); 23 Aug 2006 08:14:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96112 invoked by uid 99); 23 Aug 2006 08:14:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:14:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:14:35 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k7N8EBI4009138
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 10:14:12 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id D5FA98B9F7
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 10:14:11 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 32490-07 for <java-user@lucene.apache.org>;
 Wed, 23 Aug 2006 10:14:10 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id E28FA8B9C4
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 10:14:10 +0200 (CEST)
Message-ID: <44EC0E47.3030202@uni-hd.de>
Date: Wed, 23 Aug 2006 10:13:59 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Update index
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF442@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF442@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi  Thomas,

> Is it possible to update fields in an existing index.
> If yes how to proceed.
> 
I think you can only delete a document and then reindex the updated
document:

    public static int  delTitle(String ID) {
    	try {
    		return writer.deleteDocuments(new Term("ID",ID));		
		} catch (IOException e) {
			e.printStackTrace();
		}
		return -1;
    }
and then add the new document.

The prerequisite will be that you need a unique Identifier for that
Document to use for the deleteDocuments function (normally you won't
know the lucene's index document-id for the specific doc). The downside
of this is that the lucene-index document-id will change.

hth,
martin




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 08:14:49 2006
Return-Path: <java-user-return-22864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46560 invoked from network); 23 Aug 2006 08:14:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 08:14:48 -0000
Received: (qmail 96320 invoked by uid 500); 23 Aug 2006 08:14:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96298 invoked by uid 500); 23 Aug 2006 08:14:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96282 invoked by uid 99); 23 Aug 2006 08:14:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:14:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:14:36 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 034CC5B77A; Wed, 23 Aug 2006 01:14:12 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EB3217F403
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 01:14:12 -0700 (PDT)
Date: Wed, 23 Aug 2006 01:14:12 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: apachecon
In-Reply-To: <F737CD18A0708B49857E49809BC7ED762DF620@capitola.esseff.org>
Message-ID: <Pine.LNX.4.58.0608230112070.18339@hal.rescomp.berkeley.edu>
References: <F737CD18A0708B49857E49809BC7ED762DF620@capitola.esseff.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: program at ApacheCon 2006. The Solr talk looks interesting.

Why thank you :)

: I was wondering if there have been any other self/semi-organized things
: around Lucene in the past, like a BOF?

This will be my first ApacheCon, so i can't speak to what's happened in
the past -- but I'm certainly up for putting some faces to some names.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 08:22:26 2006
Return-Path: <java-user-return-22865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48540 invoked from network); 23 Aug 2006 08:22:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 08:22:25 -0000
Received: (qmail 11676 invoked by uid 500); 23 Aug 2006 08:22:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11655 invoked by uid 500); 23 Aug 2006 08:22:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11642 invoked by uid 99); 23 Aug 2006 08:22:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:22:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 01:22:17 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 43E905B77A; Wed, 23 Aug 2006 01:21:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3DF927F403
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 01:21:50 -0700 (PDT)
Date: Wed, 23 Aug 2006 01:21:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Solr Cache
In-Reply-To: <44EBAAF6.10106@gmail.com>
Message-ID: <Pine.LNX.4.58.0608230114530.18339@hal.rescomp.berkeley.edu>
References: <F737CD18A0708B49857E49809BC7ED762DF620@capitola.esseff.org>
 <44EBAAF6.10106@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: It looks like Solr does not use a simple cached queryfilter as a query
: cache. Why is this? Is a cache queryfilter not efficient enough? Is this
: alternate method just so you can easily load the cache from an old
: Searcher to a new Searcher? Any info appreciated.

This would probably be better addressed on the solr-user mailing list --
please post any followup question there.

I'll through out some high level answers though in case any one else is
interested...

 * there's nothign to stop a solr request handler from using
   QueryFilter's if they want (i have and do)
 * Solr has several types of caches for different things
 * the "filterCache" has the most direct conceptual mapping to how a
   QueryFilter and CachedWrapperFilter work.  The big benefits it has are:
    - the DocSet API allows for more memory efficient representations of
      small sets of documents then just a BitSet
    - it can be configured with a size and replacement strategy
      (CachedWrapperFilter is more for things that can live "forever"
      relative the IndexReader)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 09:27:14 2006
Return-Path: <java-user-return-22866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75012 invoked from network); 23 Aug 2006 09:27:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 09:27:14 -0000
Received: (qmail 9899 invoked by uid 500); 23 Aug 2006 09:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9867 invoked by uid 500); 23 Aug 2006 09:27:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9856 invoked by uid 99); 23 Aug 2006 09:27:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 02:27:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 02:27:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6A7C930EFCD3; Wed, 23 Aug 2006 05:26:44 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 3B66030EFCD3
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 05:26:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1cbd6f830608221523v321b18cas3bb951b148b375d2@mail.gmail.com>
References: <1cbd6f830608221523v321b18cas3bb951b148b375d2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5911B0A5-3EE6-4DFD-85B6-42F089921C2B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: correct classpath
Date: Wed, 23 Aug 2006 05:26:32 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 22, 2006, at 6:23 PM, Mag Gam wrote:

> Hi All,
> I am getting into Java + Lucene. To compile a Lucene program
>
> CreateIndex.java
>
> public class CreateIndex {
>  // usage: CreateIndex index-directory
>  public static void main(String[] args) throws Exception {
>    String indexPath = args[0];
>    IndexWriter writer;
>
>    // An index is created by opening an IndexWriter with the
>    // create argument set to true.
>    writer = new IndexWriter(indexPath, null, true);
>    writer.close();
>  }
> }
>
> What CLASSPATH should I set? I currently have this:
>
> /home/tomcat/lucene-2.0.0/lucene-core-2.0.0.jar

Is compilation working for you?   If so, then you've got the  
classpath correct :)   If not, what errors are you seeing?

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 09:57:10 2006
Return-Path: <java-user-return-22867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84097 invoked from network); 23 Aug 2006 09:57:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 09:57:10 -0000
Received: (qmail 58453 invoked by uid 500); 23 Aug 2006 09:57:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58430 invoked by uid 500); 23 Aug 2006 09:57:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58419 invoked by uid 99); 23 Aug 2006 09:57:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 02:57:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 02:57:03 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7426030EFCD5; Wed, 23 Aug 2006 05:56:42 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id F243430EFCD3
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 05:56:39 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF443@EPLUXSEX01.ep.parl.union.eu>
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF443@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EC81E792-E419-489F-839D-03774E202DF2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Change index structure
Date: Wed, 23 Aug 2006 05:56:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 23, 2006, at 3:50 AM, WATHELET Thomas wrote:
> Is it possible to change index structure in an existing index.
> If yes how to proceed.

Please elaborate on what you mean by "index structure".  Lucene  
supports incremental indexing, if that is what you mean - so you can  
always add/delete documents from an existing index.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 10:01:04 2006
Return-Path: <java-user-return-22868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85044 invoked from network); 23 Aug 2006 10:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 10:01:04 -0000
Received: (qmail 66165 invoked by uid 500); 23 Aug 2006 10:00:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66131 invoked by uid 500); 23 Aug 2006 10:00:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66120 invoked by uid 99); 23 Aug 2006 10:00:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 03:00:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 03:00:55 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1GFpX9-0001YR-40
	for java-user@lucene.apache.org; Wed, 23 Aug 2006 12:00:27 +0200
Message-ID: <44EC27A7.8080102@tejnora.cz>
Date: Wed, 23 Aug 2006 12:02:15 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Change index structure
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF443@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF443@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes it is possible. Only UNSTORED fields became UNSTORED again and You 
cannot change TERM in them.
If you have SQL db I have neat code to doing this.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 10:23:26 2006
Return-Path: <java-user-return-22869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93007 invoked from network); 23 Aug 2006 10:23:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 10:23:26 -0000
Received: (qmail 8256 invoked by uid 500); 23 Aug 2006 10:23:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8226 invoked by uid 500); 23 Aug 2006 10:23:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8215 invoked by uid 99); 23 Aug 2006 10:23:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 03:23:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 03:23:18 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7a4761836688ada2e411b4@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 23 Aug 2006 12:19:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Change index structure
Date: Wed, 23 Aug 2006 12:22:31 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF446@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Change index structure
Thread-Index: AcbGmoJEW/cyM09BQJuP8VIt84iiVAAA3eJg
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If I want to add a new field for exemple into an existing index=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 23 August 2006 11:57
To: java-user@lucene.apache.org
Subject: Re: Change index structure


On Aug 23, 2006, at 3:50 AM, WATHELET Thomas wrote:
> Is it possible to change index structure in an existing index.
> If yes how to proceed.

Please elaborate on what you mean by "index structure".  Lucene =20
supports incremental indexing, if that is what you mean - so you can =20
always add/delete documents from an existing index.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 10:36:47 2006
Return-Path: <java-user-return-22870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98720 invoked from network); 23 Aug 2006 10:36:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 10:36:47 -0000
Received: (qmail 34888 invoked by uid 500); 23 Aug 2006 10:36:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34554 invoked by uid 500); 23 Aug 2006 10:36:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34514 invoked by uid 99); 23 Aug 2006 10:36:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 03:36:39 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 03:36:38 -0700
Received: by wx-out-0506.google.com with SMTP id s15so64018wxc
        for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 03:36:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=lGGIPfVWOLAdsT+lUy7fB0WxVg9bQkwfLOxKywHdqUXtWnMNnOXJJ8qaqVNh9a+eHGidLTpPwqX73wMXVaLrw3w7ZR7StxflgLgjwxVbo0KwwFoJxUZzDY9w98B7L9vyK6ivoyMTPNHIq5AK4K3L9KbfnJ1PsotpGVRGB6HSCKQ=
Received: by 10.70.72.11 with SMTP id u11mr234765wxa;
        Wed, 23 Aug 2006 03:36:17 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 67sm124732wra.2006.08.23.03.36.14;
        Wed, 23 Aug 2006 03:36:16 -0700 (PDT)
Message-ID: <44EC2FA1.6020804@gmail.com>
Date: Wed, 23 Aug 2006 06:36:17 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Solr Cache
References: <F737CD18A0708B49857E49809BC7ED762DF620@capitola.esseff.org> <44EBAAF6.10106@gmail.com> <Pine.LNX.4.58.0608230114530.18339@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0608230114530.18339@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Hoss. I apologize for being  slightly off topic.  Instead of 
using  Solr, I am trying to steal from it, and so Lucene was still 
mostly what was on my mind :) I posted too soon as well because I 
finally found the wiki page on caching at Solr's site.

I have just implemented the "warm a new searcher" trick in my Lucene 
app, and I am now looking into the best way to add caching--if caching 
turns out to be beneficial to the app I am making. Of course I might 
just drop all of this and use Solr, but it seems to be a nice learning 
experience to go through all of this using just Lucene. Thanks for the 
high level answers though...exactly what I was looking for.

- Mark
> : It looks like Solr does not use a simple cached queryfilter as a query
> : cache. Why is this? Is a cache queryfilter not efficient enough? Is this
> : alternate method just so you can easily load the cache from an old
> : Searcher to a new Searcher? Any info appreciated.
>
> This would probably be better addressed on the solr-user mailing list --
> please post any followup question there.
>
> I'll through out some high level answers though in case any one else is
> interested...
>
>  * there's nothign to stop a solr request handler from using
>    QueryFilter's if they want (i have and do)
>  * Solr has several types of caches for different things
>  * the "filterCache" has the most direct conceptual mapping to how a
>    QueryFilter and CachedWrapperFilter work.  The big benefits it has are:
>     - the DocSet API allows for more memory efficient representations of
>       small sets of documents then just a BitSet
>     - it can be configured with a size and replacement strategy
>       (CachedWrapperFilter is more for things that can live "forever"
>       relative the IndexReader)
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 11:04:09 2006
Return-Path: <java-user-return-22871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14388 invoked from network); 23 Aug 2006 11:04:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 11:04:09 -0000
Received: (qmail 76800 invoked by uid 500); 23 Aug 2006 11:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76764 invoked by uid 500); 23 Aug 2006 11:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76753 invoked by uid 99); 23 Aug 2006 11:04:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 04:04:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.15.245.75] (HELO post01.avanza.se) (217.15.245.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 04:04:02 -0700
Received: from ad01.aza.se (ad01.aza.se [172.22.30.200])
	by post01.avanza.se (Postfix) with ESMTP id 3D646746C5
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 13:03:40 +0200 (MET DST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Problem updating index while reader is open
Date: Wed, 23 Aug 2006 13:04:23 +0200
Message-ID: <6F4F5B8F19AA954DB9002305E4D6D14901BD98@ad01.aza.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem updating index while reader is open
Thread-Index: AcbGo8oxewzV3zZCRL2m+y5RPop/1w==
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If I try to add documents to an index while a reader is open I get en =
error message saying "Cannot delete C:\myindex\_3n.f0". I suspect that =
this is due to the fact that the windows fs won't allow deletion of a =
file when there is a filehandler connected to it. The solution I have at =
the moment is this:

            boolean isWindows =3D =
System.getProperty("os.name").indexOf("indows")!=3D-1;
            IndexReader reader =3D =
searcher.getIndexSearcher().getIndexReader();
            try {
                if(isWindows)
                    reader.close(); // Need to close reader on windows =
since the windows file system won't allow deletion of a file with an =
open filehandler
                IIndexer indexer =3D searcher.getIndexer();
                addedDocuments =3D indexer.rebuildIndex();
                if(isWindows)
                    searcher.setIndexSearcher(new =
IndexSearcher(searcher.getIndexDir()));//restore index searcher
            } catch (IOException e) {
                e.printStackTrace();
            }

However this means that I cannot search the index while updating it (or =
in this case rebuilding it completely). Are there any workaround for =
this ? Maybe you could rebuild the index into another place on the disk =
and when it is finished set the searcher to operate in the new place. =
This would lead to that it is not possible to query the new index until =
finished. Could you get around this if you build the new index as a =
RamDirectory which is flushed to disk when finished ?

--regards

/Bjorn

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 11:31:04 2006
Return-Path: <java-user-return-22872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36396 invoked from network); 23 Aug 2006 11:31:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 11:31:04 -0000
Received: (qmail 21505 invoked by uid 500); 23 Aug 2006 11:30:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21477 invoked by uid 500); 23 Aug 2006 11:30:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21466 invoked by uid 99); 23 Aug 2006 11:30:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 04:30:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 04:30:55 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 7C0C8D9E26B
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 07:30:33 -0400 (EDT)
Received: from heartbeat1.internal ([10.202.2.160])
  by frontend3.internal (MEProxy); Wed, 23 Aug 2006 07:30:34 -0400
X-Sasl-enc: lZyhlUXt+zBK0gG+s8axylQObj/i/2wAntk3Ya5pq7t+ 1156332634
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 0A00663A9
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 07:30:33 -0400 (EDT)
Message-ID: <44EC3C58.8040404@mikemccandless.com>
Date: Wed, 23 Aug 2006 07:30:32 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem updating index while reader is open
References: <6F4F5B8F19AA954DB9002305E4D6D14901BD98@ad01.aza.se>
In-Reply-To: <6F4F5B8F19AA954DB9002305E4D6D14901BD98@ad01.aza.se>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> If I try to add documents to an index while a reader is open I get en error message saying "Cannot delete C:\myindex\_3n.f0". I suspect that this is due to the fact that the windows fs won't allow deletion of a file when there is a filehandler connected to it. The solution I have at the moment is this:

You are correct: Lucene is trying to remove all previous index files
because you are doing a clean rebuild of your index.

Doing a clean rebuild (create=true on opening the IndexWriter) against
an index that's open for searching is not currently a supported use
case, and this is exactly the error you'll hit on Windows.  As a
workaround, you could do a clean build into a fresh directory and then
restart your index searchers against this fresh directory (and remove
the old one)?

However, making incremental changes to an index (adding or deleting
docs) that's open for searching is a valid use case.  You need to
ensure your locking directory (defaults to windows temp dir) is set to
the same [local, not remote NFS/Samba] directory for readers &
writers.  Since you're using a single JVM (I think?) you probably have
that already.  Are you also hitting an exception for that case?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 12:26:41 2006
Return-Path: <java-user-return-22873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64042 invoked from network); 23 Aug 2006 12:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 12:26:41 -0000
Received: (qmail 20262 invoked by uid 500); 23 Aug 2006 12:26:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20233 invoked by uid 500); 23 Aug 2006 12:26:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20222 invoked by uid 99); 23 Aug 2006 12:26:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 05:26:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 05:26:33 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 044AB30EFCD5; Wed, 23 Aug 2006 08:26:12 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 77CB930EFCD3
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 08:26:11 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF446@EPLUXSEX01.ep.parl.union.eu>
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF446@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CD58AA60-AB47-40CA-A32F-7240DB74042D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Change index structure
Date: Wed, 23 Aug 2006 08:26:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 23, 2006, at 6:22 AM, WATHELET Thomas wrote:
> If I want to add a new field for exemple into an existing index

Documents in Lucene are heterogeneous, with fields being defined per  
document not per index.  You can introduce a new field on a new  
document at any time.  There is currently no way to _update_ a  
document other than deleting it and re-adding it though - so if you  
want to add a new field to an existing document you need to take  
those two steps.

	Erik



>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 23 August 2006 11:57
> To: java-user@lucene.apache.org
> Subject: Re: Change index structure
>
>
> On Aug 23, 2006, at 3:50 AM, WATHELET Thomas wrote:
>> Is it possible to change index structure in an existing index.
>> If yes how to proceed.
>
> Please elaborate on what you mean by "index structure".  Lucene
> supports incremental indexing, if that is what you mean - so you can
> always add/delete documents from an existing index.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 12:31:15 2006
Return-Path: <java-user-return-22874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65192 invoked from network); 23 Aug 2006 12:31:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 12:31:15 -0000
Received: (qmail 30593 invoked by uid 500); 23 Aug 2006 12:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30570 invoked by uid 500); 23 Aug 2006 12:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30559 invoked by uid 99); 23 Aug 2006 12:31:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 05:31:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [70.84.250.228] (HELO nix1.fastnix.com) (70.84.250.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 05:31:07 -0700
Received: from [59.182.52.139] (helo=youra9279112e3)
	by nix1.fastnix.com with esmtpa (Exim 4.52)
	id 1GFrsR-0005JG-A9
	for java-user@lucene.apache.org; Wed, 23 Aug 2006 18:00:14 +0530
From: "sachin" <sachin.khaire@noemacorp.com>
To: <java-user@lucene.apache.org>
Subject: Scoring Technique based on Relevance Feeback & other Parameters
Date: Wed, 23 Aug 2006 18:00:53 +0530
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_003D_01C6C6DE.15487FB0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcbGr/lPBwFjXCfxQKKd3gmy64uB3Q==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nix1.fastnix.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - noemacorp.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060823123108.4D79110FB00B@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_003D_01C6C6DE.15487FB0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_003E_01C6C6DE.15487FB0"


------=_NextPart_001_003E_01C6C6DE.15487FB0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

 

Hello Great/smart guys 

       This is my first question for this group as I started working on the
Lucene last month. 

 

        Lucene provide the scoring of documents based on TF-IDF vector
analysis. Lucene also provides the Scorer and Weight inside the Search
package. By implementing new type of  tuple (Query,Weight,Scorer) I can
easily implement new Scoring technique. Unfortunatly Lucene index shows that
it stores only TF / Position vectors for each term within document. 

 

        I am interested in investigating new scoring technique where I will
use some other parameters relating to the Term to rank the documents. For an
example web page ranking is assisted by parameters like number of links
towards webpage and number of link from web - page.  It indicates that we
need to store relatively more information about terms within the index. But
HoW ? . I need to investigate

 

        Another parameter is relevance feedback from the User. Ranking
should get affected by relevance feedback from the user. 

 

Would someone interested in helping out or thinking about the same problem.


------=_NextPart_001_003E_01C6C6DE.15487FB0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:Georgia;
	color:#CCCCCC;
	mso-believe-normal-left:yes;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	color:#CCCCCC;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>
<![if mso 9]>
<style>
p.MsoNormal
	{margin-left:58.5pt;}
</style>
<![endif]><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext=3D"edit">
  <o:idmap v:ext=3D"edit" data=3D"1" />
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=3D"#3F555A" =
background=3D"cid:image001.gif@01C6C6DE.12EAE0A0"
lang=3DEN-US link=3Dblue vlink=3Dpurple style=3D'margin-left:58.5pt'>
<img src=3D"cid:image001.gif@01C6C6DE.12EAE0A0"
v:src=3D"cid:image001.gif@01C6C6DE.12EAE0A0" v:shapes=3D"_x0000_Mail" =
width=3D0
height=3D0 class=3Dshape style=3D'display:none;width:0;height:0'>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'>Hello Great/smart guys =
<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is =
my first question for this group as I
started working on the Lucene last month. <o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Lucene provide the scoring of documents based
on TF-IDF vector analysis. Lucene also provides the Scorer and Weight =
inside
the Search package. By implementing new type of &nbsp;tuple =
(Query,Weight,Scorer) I
can easily implement new Scoring technique. Unfortunatly Lucene index =
shows
that it stores only TF / Position vectors for each term within document. =
<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I =
am interested in investigating new scoring
technique where I will use some other parameters relating to the Term to =
rank
the documents. For an example web page ranking is assisted by parameters =
like
number of links towards webpage and number of link from web &#8211; =
page. &nbsp;It
indicates that we need to store relatively more information about terms =
within
the index. But HoW ? &#8230; I need to =
investigate<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Another parameter is relevance feedback from
the User. Ranking should get affected by relevance feedback from the =
user. <o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3D"#cccccc" =
face=3DGeorgia><span
style=3D'font-size:12.0pt'>Would someone interested in helping out or =
thinking
about the same problem.<o:p></o:p></span></font></p>

</div>

</body>

</html>

------=_NextPart_001_003E_01C6C6DE.15487FB0--

------=_NextPart_000_003D_01C6C6DE.15487FB0--



From java-user-return-22875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 12:56:01 2006
Return-Path: <java-user-return-22875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76829 invoked from network); 23 Aug 2006 12:56:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 12:56:01 -0000
Received: (qmail 86375 invoked by uid 500); 23 Aug 2006 12:55:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86044 invoked by uid 500); 23 Aug 2006 12:55:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86033 invoked by uid 99); 23 Aug 2006 12:55:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 05:55:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 05:55:53 -0700
Received: from [10.65.253.201] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.156B8937@mailer.syr.edu>; Wed, 23 Aug 2006 8:55:32 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20060823123108.4D79110FB00B@asf.osuosl.org>
References: <20060823123108.4D79110FB00B@asf.osuosl.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-14--210611615
Message-Id: <DC51AE5D-E3C9-42EB-BEF7-FEA1C100394C@syr.edu>
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: Scoring Technique based on Relevance Feeback & other Parameters
Date: Wed, 23 Aug 2006 08:55:31 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-14--210611615
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=WINDOWS-1252;
	delsp=yes;
	format=flowed


On Aug 23, 2006, at 8:30 AM, sachin wrote:

> Hello Great/smart guys
>
>        This is my first question for this group as I started =20
> working on the Lucene last month.
>
>
>
>         Lucene provide the scoring of documents based on TF-IDF =20
> vector analysis. Lucene also provides the Scorer and Weight inside =20
> the Search package. By implementing new type of  tuple =20
> (Query,Weight,Scorer) I can easily implement new Scoring technique. =20=

> Unfortunatly Lucene index shows that it stores only TF / Position =20
> vectors for each term within document.
>
>
>
>         I am interested in investigating new scoring technique =20
> where I will use some other parameters relating to the Term to rank =20=

> the documents. For an example web page ranking is assisted by =20
> parameters like number of links towards webpage and number of link =20
> from web =96 page.  It indicates that we need to store relatively =20
> more information about terms within the index. But HoW ? =85 I need =20=

> to investigate
>
>
People are working on this.  Search the java-dev archives for =20
Flexible Indexing or Payloads.  See http://issues.apache.org/jira/=20
browse/LUCENE-662 for a possible patch.  Note that the patch is not =20
committed yet (you can be one of the first to test it!)

>
>
>         Another parameter is relevance feedback from the User. =20
> Ranking should get affected by relevance feedback from the user.
>
>
Take a look at Term Vectors.  Search the list.  Read about them at =20
http://www.cnlp.org/apachecon2005 or in "Lucene In Action".  There is =20=

also a contribution called "More Like This" that you may find useful


> Would someone interested in helping out or thinking about the same =20
> problem.
>
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




--Apple-Mail-14--210611615--

From java-user-return-22876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 14:29:34 2006
Return-Path: <java-user-return-22876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14478 invoked from network); 23 Aug 2006 14:29:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 14:29:34 -0000
Received: (qmail 56966 invoked by uid 500); 23 Aug 2006 14:29:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56708 invoked by uid 500); 23 Aug 2006 14:29:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56697 invoked by uid 99); 23 Aug 2006 14:29:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 07:29:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Russell.Allen@aebn.net designates 216.54.226.11 as permitted sender)
Received: from [216.54.226.11] (HELO mail.dataconversions.biz) (216.54.226.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 07:29:24 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6C6C0.9382BD33"
Subject: RE: Scoring Technique based on Relevance Feeback & other Parameters
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Wed, 23 Aug 2006 10:29:43 -0400
Message-ID: <E9BF7E0FD95D1143B399B129908A58FF0180D019@datachange01.dataconversions.biz>
In-Reply-To: <20060823123108.4D79110FB00B@asf.osuosl.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoring Technique based on Relevance Feeback & other Parameters
Thread-Index: AcbGr/lPBwFjXCfxQKKd3gmy64uB3QAD+13Q
From: "Russell M. Allen" <Russell.Allen@aebn.net>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6C6C0.9382BD33
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have a similar interest in specifying a custom scoring strategy.  I
previously posted about it under the subject "Scoring a document
(count?)" on 7/27/06.  In brief, I want a documents score to be a count
of term matches.  This is nearly identical to a SQL count()
functionality.
=20
If you are able to modify Lucene such that I can specify a weight and
scorer as the calling code then, yes, I am definitely interested.
=20
=20

________________________________

From: sachin [mailto:sachin.khaire@noemacorp.com]=20
Sent: Wednesday, August 23, 2006 8:31 AM
To: java-user@lucene.apache.org
Subject: Scoring Technique based on Relevance Feeback & other Parameters


=20

Hello Great/smart guys=20

       This is my first question for this group as I started working on
the Lucene last month.=20

=20

        Lucene provide the scoring of documents based on TF-IDF vector
analysis. Lucene also provides the Scorer and Weight inside the Search
package. By implementing new type of  tuple (Query,Weight,Scorer) I can
easily implement new Scoring technique. Unfortunatly Lucene index shows
that it stores only TF / Position vectors for each term within document.


=20

        I am interested in investigating new scoring technique where I
will use some other parameters relating to the Term to rank the
documents. For an example web page ranking is assisted by parameters
like number of links towards webpage and number of link from web - page.
It indicates that we need to store relatively more information about
terms within the index. But HoW ? ... I need to investigate

=20

        Another parameter is relevance feedback from the User. Ranking
should get affected by relevance feedback from the user.=20

=20

Would someone interested in helping out or thinking about the same
problem.


------_=_NextPart_001_01C6C6C0.9382BD33--

From java-user-return-22877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 14:51:54 2006
Return-Path: <java-user-return-22877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23182 invoked from network); 23 Aug 2006 14:51:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 14:51:54 -0000
Received: (qmail 1399 invoked by uid 500); 23 Aug 2006 14:51:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1374 invoked by uid 500); 23 Aug 2006 14:51:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1363 invoked by uid 99); 23 Aug 2006 14:51:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 07:51:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 07:51:47 -0700
Received: from [10.10.150.11] ([10.10.150.11])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k7NEpZEr018546
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 09:51:36 -0500
Message-ID: <44EC6B6D.5080601@wolfram.com>
Date: Wed, 23 Aug 2006 10:51:25 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Search and Hits
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have this application where I indexed different file formats and used 
"phraseQuery"  on the "body" of the documents to do the search. Now I 
have added email archives to the index. I have to use 
"TermQuery/MultiFieldQuery" to search the emails. For a user entered 
query I have to search both the documents and email archives to bring 
back results. What will be the best way to approach it.

  Will it be better to have two different indexes - one for all files 
and one for emails? If so can I have one IndexSearcher open to query 
both the indexes? How will I do it? When the Hits comes back from both 
the search how will it  be organized?

Is there another way to approach it. Any suggestion?

thanks,
suba suresh.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 15:36:31 2006
Return-Path: <java-user-return-22878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39487 invoked from network); 23 Aug 2006 15:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 15:36:30 -0000
Received: (qmail 87830 invoked by uid 500); 23 Aug 2006 15:36:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87795 invoked by uid 500); 23 Aug 2006 15:36:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87784 invoked by uid 99); 23 Aug 2006 15:36:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 08:36:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 08:36:22 -0700
Received: from [10.10.150.11] ([10.10.150.11])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k7NFaA7d019309
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 10:36:11 -0500
Message-ID: <44EC75E0.4050301@wolfram.com>
Date: Wed, 23 Aug 2006 11:36:00 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: How to combine multiple fields to a single field for indexing
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In "Lucene In Action" book it says it is better practice to combine two 
fields into one field and index it than use the MultiFieldQueryParser. 
Do I initially index both the fields and then index them again together? 
When I index them together do I index the fieldnames or values? Can 
someone give me an example of how to do it?

thanks,
suba suresh.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 15:58:43 2006
Return-Path: <java-user-return-22879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49281 invoked from network); 23 Aug 2006 15:58:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 15:58:43 -0000
Received: (qmail 48319 invoked by uid 500); 23 Aug 2006 15:58:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48289 invoked by uid 500); 23 Aug 2006 15:58:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48271 invoked by uid 99); 23 Aug 2006 15:58:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 08:58:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.238] (HELO smtpout10-04.prod.mesa1.secureserver.net) (64.202.165.238)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 23 Aug 2006 08:58:35 -0700
Received: (qmail 3397 invoked from network); 23 Aug 2006 15:58:15 -0000
Received: from unknown (209.204.147.41)
  by smtpout10-04.prod.mesa1.secureserver.net (64.202.165.238) with ESMTP; 23 Aug 2006 15:58:14 -0000
From: "Dejan Nenov" <dejannenov@jollyobject.com>
To: <java-user@lucene.apache.org>
Subject: RE: Scoring Technique based on Relevance Feeback & other Parameters
Date: Wed, 23 Aug 2006 08:58:14 -0700
Organization: Dejan Nenov Privarte Email
Message-ID: <005401c6c6cc$f11c7580$8380a8c0@safarijv.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0055_01C6C692.44BD9D80"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcbGr/lPBwFjXCfxQKKd3gmy64uB3QAHMFDw
In-Reply-To: <20060823123108.4D79110FB00B@asf.osuosl.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0055_01C6C692.44BD9D80
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Indeed - you bring up interesting questions. You may want to take a look at
NUTCH first, however - I am not sure if they have done some of the
Google-like ranking you mention.

However - collaborative relevance enhancement, based on user feedback, would
be a nice Web-2.0-ish feature to bake into the Lucene core :-)

 

Dejan

 

  _____  

From: sachin [mailto:sachin.khaire@noemacorp.com] 
Sent: Wednesday, August 23, 2006 5:31 AM
To: java-user@lucene.apache.org
Subject: Scoring Technique based on Relevance Feeback & other Parameters

 

Hello Great/smart guys 

       This is my first question for this group as I started working on the
Lucene last month. 

 

        Lucene provide the scoring of documents based on TF-IDF vector
analysis. Lucene also provides the Scorer and Weight inside the Search
package. By implementing new type of  tuple (Query,Weight,Scorer) I can
easily implement new Scoring technique. Unfortunatly Lucene index shows that
it stores only TF / Position vectors for each term within document. 

 

        I am interested in investigating new scoring technique where I will
use some other parameters relating to the Term to rank the documents. For an
example web page ranking is assisted by parameters like number of links
towards webpage and number of link from web - page.  It indicates that we
need to store relatively more information about terms within the index. But
HoW ? . I need to investigate

 

        Another parameter is relevance feedback from the User. Ranking
should get affected by relevance feedback from the user. 

 

Would someone interested in helping out or thinking about the same problem.


------=_NextPart_000_0055_01C6C692.44BD9D80--


From java-user-return-22880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 19:44:39 2006
Return-Path: <java-user-return-22880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31122 invoked from network); 23 Aug 2006 19:44:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 19:44:38 -0000
Received: (qmail 10662 invoked by uid 500); 23 Aug 2006 19:44:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10635 invoked by uid 500); 23 Aug 2006 19:44:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10624 invoked by uid 99); 23 Aug 2006 19:44:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 12:44:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 12:44:30 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2C88E5B779; Wed, 23 Aug 2006 12:44:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1F2FB7F403
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 12:44:03 -0700 (PDT)
Date: Wed, 23 Aug 2006 12:44:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Scoring Technique based on Relevance Feeback & other Parameters
In-Reply-To: <20060823123108.4D79110FB00B@asf.osuosl.org>
Message-ID: <Pine.LNX.4.58.0608231238360.12489@hal.rescomp.berkeley.edu>
References: <20060823123108.4D79110FB00B@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: package. By implementing new type of  tuple (Query,Weight,Scorer) I can
: easily implement new Scoring technique. Unfortunatly Lucene index shows that
: it stores only TF / Position vectors for each term within document.

:         I am interested in investigating new scoring technique where I will
: use some other parameters relating to the Term to rank the documents. For an
: example web page ranking is assisted by parameters like number of links
: towards webpage and number of link from web - page.  It indicates that we
: need to store relatively more information about terms within the index. But
: HoW ? . I need to investigate

there is a distinction between storing more information about a term and
storing additional information about a document.

the flexible payload type approaches that have been discussed should make
info about a term easy (ie: the term is "wind", it's type is "noun", it's
usage in the sentence is as a "subject", it's importance is "88.3") but
you can already store additional information about documents (like the
total popularity of a document) in Lucene -- either by using the document
boost (if you always want it to be part of the score calculations) or as a
seperate field which you can factor into the score calculations using
something like FunctionQuery...

http://incubator.apache.org/solr/docs/api/org/apache/solr/search/function/package-summary.html

...i use this all the time to make "recent" docs score better, or "more
popular docs" score better.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 20:21:08 2006
Return-Path: <java-user-return-22881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41922 invoked from network); 23 Aug 2006 20:21:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 20:21:07 -0000
Received: (qmail 95085 invoked by uid 500); 23 Aug 2006 20:21:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95008 invoked by uid 500); 23 Aug 2006 20:21:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94996 invoked by uid 99); 23 Aug 2006 20:21:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 13:21:00 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 13:20:59 -0700
Received: by wx-out-0506.google.com with SMTP id s15so217226wxc
        for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 13:20:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=SGo7oYbYXtRmHlRsMPzYPyBTacyJAdAFeuX4dc4sTl7bDeFneluJlmwYMNZgqkBH6r0ox6vIVJW6OCCHfKGL54bhKrn7eyQozBD+is3+ZvPC8qpPFLY0u6EVKZoghsw1jppjwbPedTu44drfuGq1G418KUSwpw50kzPkltZnA3g=
Received: by 10.70.33.10 with SMTP id g10mr1221032wxg;
        Wed, 23 Aug 2006 13:20:36 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id h34sm889287wxd.2006.08.23.13.20.34;
        Wed, 23 Aug 2006 13:20:35 -0700 (PDT)
Message-ID: <44ECB899.1010303@gmail.com>
Date: Wed, 23 Aug 2006 16:20:41 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Test new query parser?
References: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com> <Pine.LNX.4.63.0608221708120.22579@jimwormold>
In-Reply-To: <Pine.LNX.4.63.0608221708120.22579@jimwormold>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You are not kidding. I keep finding this tougher and tougher. Originally 
my method worked for most simple queries, but not all. I improved it to 
cover some more ground, allowing some modestly complex queries, but now 
even that improvement seems woefully inadequate for solving the general 
case. I was handling some pretty complex queries, but losing order of 
operations in a proximity query if things got too exciting. Among other 
small bugs.

The parse tree handles the boolean stuff fine on its own, but the 
proximity seems to require a distributed attack (think algebra) that 
still maintains order of operations. It is a bit nasty.

consider:
cop | fowl & (fowl | priest & man) ! helicopter ~8 (hillary | tom)

this must distribute to (roughly)
cop | ( (fowl & ( (fowl ~8 hillary | (priest ~8 hillary & man ~8 
hillary) ) ! helicopter ~8 hillary) | (fowl ~8 tom | (priest ~8 tom & 
man ~8 tom) ) ! helicopter ~8 tom))

I have gotten close but instead of (fowl | (priest & man)) I might get 
((fowl | priest) & man)...a naive distribution will ignore order of ops 
and order by left to right.

my order of ops:
& "and"
| "or"
~ "within"
! "butnot"
<space between words>

I have a new plan of attack that I have begun, but who knows where it 
will lead. I thought I was so close, but apparently just a tease...that 
method could only take me so far. I hate to put so much work into this 
since I doubt anyone will even use such complex queries (the queries I 
monitor are always so basic) but I may give it a go just to see if my 
new idea will solve the general case.

We will see if this parser actually has any life in it. Maybe I am no 
closer than you where-- I am very new at this.

- Mark
> Mark --
>
> Yes please! I'm very interested in the mixing of boolean and proximity
> operators. I have also worked on a parser (using JavaCC) but haven't
> managed to crack queries such as:
>
>     ((a OR b) AND c) NEAR (d NOT e)
>
> I can get the parse tree okay, but haven't figured out how to translate
> that into a valid Lucene Query object. Simple queries such as:
>
>     (a OR b) NEXT (c OR d)   // note the use of OR exclusively!
>
> are okay, but nothing more complex. So: bring it on!
>
> -- Robert
> rwatkins at foo-bar.org
>
> On Mon, 21 Aug 2006, Mark Miller wrote:
>
>> Is anyone interested in helping me test out a new query parser (i.e is
>> anyone interested in using this, thereby helping me test it) ?
>>
>> The parser uses a intermediate parse tree representation, unlike 
>> Lucene's
>> Query Filter.
>>
>> [ snipped ]
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 21:19:03 2006
Return-Path: <java-user-return-22882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60967 invoked from network); 23 Aug 2006 21:19:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 21:19:03 -0000
Received: (qmail 98237 invoked by uid 500); 23 Aug 2006 21:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98206 invoked by uid 500); 23 Aug 2006 21:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98188 invoked by uid 99); 23 Aug 2006 21:18:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 14:18:55 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 14:18:55 -0700
Received: by nf-out-0910.google.com with SMTP id b2so423772nfe
        for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 14:18:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Y0RYDIsssiUboUmz1o0Ri51Up45q5mwzRxnsKdPkI2WKwt8iOi1b/nPT1BOzKIJvP7Zlhc8cXzFdDM+h4npWOMB2jFkOQHq9AJ93YZBXU29ED7WbiWNRhOllhUR+9OdPO4D0ZEGHixN2thz5L3eNN1VySaOY1RHR/bV3Xu5yY9o=
Received: by 10.49.29.2 with SMTP id g2mr2650184nfj;
        Wed, 23 Aug 2006 14:18:33 -0700 (PDT)
Received: by 10.78.198.6 with HTTP; Wed, 23 Aug 2006 14:18:33 -0700 (PDT)
Message-ID: <1cbd6f830608231418k6ee943e0m5200e15d5e7be706@mail.gmail.com>
Date: Wed, 23 Aug 2006 17:18:33 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Tomcat Simple Example
In-Reply-To: <Pine.LNX.4.58.0608230110350.18339@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13640_24784623.1156367913798"
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>
	 <44EC0150.2020203@wyona.com>
	 <Pine.LNX.4.58.0608230110350.18339@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13640_24784623.1156367913798
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks!

So, when working with Tomcat, for a simple Index + Search, it is recommend
to use JSP over servlets?

any advice?



On 8/23/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : > Does anyone have a simple Tomcat search/result example?
>
> : > I have 4 text files,
> : > i would like to index.
>
> take a look at the geting started guide, and the demo WAR that comes with
> the Lucene distribution...
>
> http://lucene.apache.org/java/docs/gettingstarted.html
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13640_24784623.1156367913798--

From java-user-return-22883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 21:38:15 2006
Return-Path: <java-user-return-22883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67586 invoked from network); 23 Aug 2006 21:38:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 21:38:15 -0000
Received: (qmail 35587 invoked by uid 500); 23 Aug 2006 21:38:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35559 invoked by uid 500); 23 Aug 2006 21:38:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35548 invoked by uid 99); 23 Aug 2006 21:38:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 14:38:09 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 205.152.59.73 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from [205.152.59.73] (HELO imf25aec.mail.bellsouth.net) (205.152.59.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 14:38:08 -0700
Received: from ibm69aec.bellsouth.net ([68.209.119.157])
          by imf25aec.mail.bellsouth.net with ESMTP
          id <20060823213746.YCRB249.imf25aec.mail.bellsouth.net@ibm69aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Wed, 23 Aug 2006 17:37:46 -0400
Received: from jimwormold ([68.209.119.157]) by ibm69aec.bellsouth.net
          with ESMTP
          id <20060823213746.BUWL6857.ibm69aec.bellsouth.net@jimwormold>
          for <java-user@lucene.apache.org>;
          Wed, 23 Aug 2006 17:37:46 -0400
Date: Wed, 23 Aug 2006 17:43:17 -0400 (EDT)
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: Test new query parser?
In-Reply-To: <44ECB899.1010303@gmail.com>
Message-ID: <Pine.LNX.4.63.0608231732190.20104@jimwormold>
References: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com>
 <Pine.LNX.4.63.0608221708120.22579@jimwormold> <44ECB899.1010303@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mark --

Don't lose hope! We are migrating from Verity to Lucene, and I know for
a fact that we will have to support the kind of complex queries you talk
about; maybe not /quite/ as complex as your magnificent:

> cop | fowl & (fowl | priest & man) ! helicopter ~8 (hillary | tom)

but certainly more complex than I have been able to solve.

We can also take heart in that Verity hasn't quite cracked it either. In
trying to see exactly what I needed to support I was doing some
experiments against known data and discovered that Verity has some
parsing bugs that do not reveal themselves easily. For example:

   title:  "get me out of here, please"
   queryA: title:((here OR there) NEAR/2 please)
   queryB: title:(there OR here) NEAR/2 please)

In theory both queries should find the example title, but only queryB
works with Verity, so something is wrong.

-- Robert

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 22:48:25 2006
Return-Path: <java-user-return-22884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90356 invoked from network); 23 Aug 2006 22:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 22:48:25 -0000
Received: (qmail 72653 invoked by uid 500); 23 Aug 2006 22:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72619 invoked by uid 500); 23 Aug 2006 22:48:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72608 invoked by uid 99); 23 Aug 2006 22:48:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 15:48:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 15:48:18 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8C14C30EFCD5; Wed, 23 Aug 2006 18:47:57 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id D6ECC30EFCD3
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 18:47:53 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1cbd6f830608231418k6ee943e0m5200e15d5e7be706@mail.gmail.com>
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com> <44EC0150.2020203@wyona.com> <Pine.LNX.4.58.0608230110350.18339@hal.rescomp.berkeley.edu> <1cbd6f830608231418k6ee943e0m5200e15d5e7be706@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <83C508A3-12C7-4141-BA3F-81F8809FD7C7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Tomcat Simple Example
Date: Wed, 23 Aug 2006 18:47:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 23, 2006, at 5:18 PM, Mag Gam wrote:
> So, when working with Tomcat, for a simple Index + Search, it is  
> recommend
> to use JSP over servlets?
>
> any advice?

No such recommendation would ever officially come from the Lucene  
community.  Lucene is entirely independent of how search results get  
rendered.  The demo application is nothing more than a demonstration,  
not a recommendation of technologies to use around Lucene.

Whatever technologies best fit your environment is what I'd  
recommend :)   I've used all types of technologies on top of Lucene,  
from a servlet, to JSP pages, Struts, Tapestry (what lucenebook.com  
uses) to now using Ruby on Rails  backed by Solr (which fronts Lucene  
with servlets).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 23:23:17 2006
Return-Path: <java-user-return-22885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95660 invoked from network); 23 Aug 2006 23:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 23:23:16 -0000
Received: (qmail 5414 invoked by uid 500); 23 Aug 2006 23:23:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5385 invoked by uid 500); 23 Aug 2006 23:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5374 invoked by uid 99); 23 Aug 2006 23:23:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 16:23:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 16:23:08 -0700
Received: by nf-out-0910.google.com with SMTP id b2so442250nfe
        for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 16:22:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xu/pTxHMaeOvyiG8tY/1sqxiGdN35xpZAPUZ6UTvRV57HcbCEmY27nMZFsoRtIyZ/ocs8yvXMnFp7CIYEP1fPF90D7W83KZNmvCD1HXLrETIFCKJtMqCMxS08lMC/r/Iy7A3Pb7YW/PcoqyXK31gLWQID+50rm228aqsFqmCb7w=
Received: by 10.49.41.18 with SMTP id t18mr2764344nfj;
        Wed, 23 Aug 2006 16:22:44 -0700 (PDT)
Received: by 10.78.198.6 with HTTP; Wed, 23 Aug 2006 16:22:44 -0700 (PDT)
Message-ID: <1cbd6f830608231622ia67102fl32187d341f62ae3d@mail.gmail.com>
Date: Wed, 23 Aug 2006 19:22:44 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Tomcat Simple Example
In-Reply-To: <83C508A3-12C7-4141-BA3F-81F8809FD7C7@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14951_8092878.1156375364450"
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>
	 <44EC0150.2020203@wyona.com>
	 <Pine.LNX.4.58.0608230110350.18339@hal.rescomp.berkeley.edu>
	 <1cbd6f830608231418k6ee943e0m5200e15d5e7be706@mail.gmail.com>
	 <83C508A3-12C7-4141-BA3F-81F8809FD7C7@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14951_8092878.1156375364450
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the response Erik! You make a good point. I have the 'Lucene in
Action' book, and it has some good ways of doing things...its at work now (I
am away for 3 weeks), thats the only bad thing :-(



On 8/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Aug 23, 2006, at 5:18 PM, Mag Gam wrote:
> > So, when working with Tomcat, for a simple Index + Search, it is
> > recommend
> > to use JSP over servlets?
> >
> > any advice?
>
> No such recommendation would ever officially come from the Lucene
> community.  Lucene is entirely independent of how search results get
> rendered.  The demo application is nothing more than a demonstration,
> not a recommendation of technologies to use around Lucene.
>
> Whatever technologies best fit your environment is what I'd
> recommend :)   I've used all types of technologies on top of Lucene,
> from a servlet, to JSP pages, Struts, Tapestry (what lucenebook.com
> uses) to now using Ruby on Rails  backed by Solr (which fronts Lucene
> with servlets).
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14951_8092878.1156375364450--

From java-user-return-22886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 23:24:49 2006
Return-Path: <java-user-return-22886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95904 invoked from network); 23 Aug 2006 23:24:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 23:24:49 -0000
Received: (qmail 8771 invoked by uid 500); 23 Aug 2006 23:24:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8747 invoked by uid 500); 23 Aug 2006 23:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8735 invoked by uid 99); 23 Aug 2006 23:24:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 16:24:41 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 16:24:40 -0700
Received: by nf-out-0910.google.com with SMTP id b2so442483nfe
        for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 16:24:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=oy+6ARaSNieaM9+vup89xzeW+QAiLstspwPY/StU5tyi/9oH0oIl7elq1BfuO3PI6E8jOwq6zv+5JvCEY7qqkI4VRAwkG6Ydg51rmwskgCK4FjJEtIY2ilCRTbc788NnLFrDLfHQeZNZaEsmb417Av8413smmXiRNfnxSZ7fxqY=
Received: by 10.48.202.19 with SMTP id z19mr2737689nff;
        Wed, 23 Aug 2006 16:24:18 -0700 (PDT)
Received: by 10.78.198.6 with HTTP; Wed, 23 Aug 2006 16:24:18 -0700 (PDT)
Message-ID: <1cbd6f830608231624w1931fdfdw7c1a133c004ce5de@mail.gmail.com>
Date: Wed, 23 Aug 2006 19:24:18 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Query parser.parse (line);
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14975_5606699.1156375458691"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14975_5606699.1156375458691
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I am trying to do a Query parse line in a doGET method (J2EE).

I keep getting this type of message;
unreported exception org.apache.lucene.queryParser.ParseException; must be
caught or declared to be thrown

Anyone have an example of a Class being thrown an exception?

I would kindly appreciate it.

tia

------=_Part_14975_5606699.1156375458691--

From java-user-return-22887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 23 23:51:17 2006
Return-Path: <java-user-return-22887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99263 invoked from network); 23 Aug 2006 23:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2006 23:51:17 -0000
Received: (qmail 32557 invoked by uid 500); 23 Aug 2006 23:51:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32521 invoked by uid 500); 23 Aug 2006 23:51:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32510 invoked by uid 99); 23 Aug 2006 23:51:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 16:51:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 16:51:10 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C7F5430EFCD5; Wed, 23 Aug 2006 19:50:49 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 32B2330EFCD3
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 19:50:47 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1cbd6f830608231624w1931fdfdw7c1a133c004ce5de@mail.gmail.com>
References: <1cbd6f830608231624w1931fdfdw7c1a133c004ce5de@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B2DFC692-0CAC-4D54-B5FD-72D6D7990C37@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query parser.parse (line);
Date: Wed, 23 Aug 2006 19:50:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 23, 2006, at 7:24 PM, Mag Gam wrote:
> I am trying to do a Query parse line in a doGET method (J2EE).
>
> I keep getting this type of message;
> unreported exception org.apache.lucene.queryParser.ParseException;  
> must be
> caught or declared to be thrown
>
> Anyone have an example of a Class being thrown an exception?
>
> I would kindly appreciate it.

The simplest thing would be something like this in a servlet:

try {
   Query query = parser.parse(...);
}
catch (ParseException pe) {
   throw new IOException(pe.getMessage());
}

But you may not want the user to see that harsh of an error from your  
servlet when an unparsable expression is used.  Typically that  
exception is caught and a friendlier message is provided to the user.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 00:46:03 2006
Return-Path: <java-user-return-22888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9137 invoked from network); 24 Aug 2006 00:46:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 00:46:03 -0000
Received: (qmail 92317 invoked by uid 500); 24 Aug 2006 00:45:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92068 invoked by uid 500); 24 Aug 2006 00:45:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92057 invoked by uid 99); 24 Aug 2006 00:45:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 17:45:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 17:45:53 -0700
Received: by wx-out-0506.google.com with SMTP id s15so286181wxc
        for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 17:45:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MDrDensza0J04WqKr24cMWfE6T9P57cjpRtWNimeL6w6LwLazSYyUH+JBdz+8Xp776hw4y8p7eDuVyi2Vbn9jmKzZyY0pmn2tQCF3+vJ4Wl3wijB4VAR7BSjiQIB2MAVwUwqSRwXi/nFJK1AW6CjIK7OpOrelYQqhJVSbHMKTrE=
Received: by 10.90.120.13 with SMTP id s13mr327558agc;
        Wed, 23 Aug 2006 17:45:32 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Wed, 23 Aug 2006 17:45:32 -0700 (PDT)
Message-ID: <1cbd6f830608231745p52ec881creb43d2294357cd46@mail.gmail.com>
Date: Wed, 23 Aug 2006 20:45:32 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query parser.parse (line);
In-Reply-To: <B2DFC692-0CAC-4D54-B5FD-72D6D7990C37@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8751_33167681.1156380332653"
References: <1cbd6f830608231624w1931fdfdw7c1a133c004ce5de@mail.gmail.com>
	 <B2DFC692-0CAC-4D54-B5FD-72D6D7990C37@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8751_33167681.1156380332653
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erik, thanks for the quick reply

I am looking at this page
http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html

Any chance there is a new version for 2.0? Or are there any 2.0 examples
(other than the stock example)?



On 8/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Aug 23, 2006, at 7:24 PM, Mag Gam wrote:
> > I am trying to do a Query parse line in a doGET method (J2EE).
> >
> > I keep getting this type of message;
> > unreported exception org.apache.lucene.queryParser.ParseException;
> > must be
> > caught or declared to be thrown
> >
> > Anyone have an example of a Class being thrown an exception?
> >
> > I would kindly appreciate it.
>
> The simplest thing would be something like this in a servlet:
>
> try {
>    Query query = parser.parse(...);
> }
> catch (ParseException pe) {
>    throw new IOException(pe.getMessage());
> }
>
> But you may not want the user to see that harsh of an error from your
> servlet when an unparsable expression is used.  Typically that
> exception is caught and a friendlier message is provided to the user.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8751_33167681.1156380332653--

From java-user-return-22889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 00:50:35 2006
Return-Path: <java-user-return-22889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10290 invoked from network); 24 Aug 2006 00:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 00:50:34 -0000
Received: (qmail 4303 invoked by uid 500); 24 Aug 2006 00:50:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4265 invoked by uid 500); 24 Aug 2006 00:50:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4254 invoked by uid 99); 24 Aug 2006 00:50:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 17:50:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 17:50:29 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7CD2D30EFCD6; Wed, 23 Aug 2006 20:50:08 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 0065B30EFCD5
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 20:50:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44EC75E0.4050301@wolfram.com>
References: <44EC75E0.4050301@wolfram.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to combine multiple fields to a single field for indexing
Date: Wed, 23 Aug 2006 20:49:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 23, 2006, at 11:36 AM, Suba Suresh wrote:
> In "Lucene In Action" book it says it is better practice to combine  
> two fields into one field and index it than use the  
> MultiFieldQueryParser. Do I initially index both the fields and  
> then index them again together? When I index them together do I  
> index the fieldnames or values? Can someone give me an example of  
> how to do it?

What I do is simply index all the fields individually that need to be  
searchable or just stored, but also index a general-purpose  
"contents" field with all of that same text.

You can add multiple fields of the same name to a document, making it  
easy to just keep appending to a "contents" field for a document.   
You can see how this is done in the Lucene in Action code in the  
TestDataDocumentHandler.java - however I took a cruder approach and  
appended the fields together with a space in between them rather than  
using the multiple valued field approach.  Either technique will work  
just fine.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 01:05:13 2006
Return-Path: <java-user-return-22890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12390 invoked from network); 24 Aug 2006 01:05:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 01:05:12 -0000
Received: (qmail 14886 invoked by uid 500); 24 Aug 2006 01:05:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14854 invoked by uid 500); 24 Aug 2006 01:05:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14843 invoked by uid 99); 24 Aug 2006 01:05:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 18:05:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 18:05:06 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 77F7D30EFCD6; Wed, 23 Aug 2006 21:04:46 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 79F2030EFCD6
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 21:04:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1cbd6f830608231745p52ec881creb43d2294357cd46@mail.gmail.com>
References: <1cbd6f830608231624w1931fdfdw7c1a133c004ce5de@mail.gmail.com> <B2DFC692-0CAC-4D54-B5FD-72D6D7990C37@ehatchersolutions.com> <1cbd6f830608231745p52ec881creb43d2294357cd46@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B5C4B2B0-41EB-469C-BB30-4B24F4D2AE36@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query parser.parse (line);
Date: Wed, 23 Aug 2006 21:04:32 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 23, 2006, at 8:45 PM, Mag Gam wrote:
> I am looking at this page
> http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html
>
> Any chance there is a new version for 2.0? Or are there any 2.0  
> examples
> (other than the stock example)?

No, that article has not been updated for the 2.0 API.

The main things that changed from the version of Lucene used in that  
article are:

	* QueryParser must now be instantiated and the instance .parse()  
must be used instead of the previous QueryParser.parse() static method.

	* BooleanQuery.add() now uses the Occur enumeration rather than the  
boolean flags.

You can reference the javadocs for the 2.0 QueryParser and  
BooleanQuery APIs here: <http://lucene.apache.org/java/docs/api/ 
index.html> and that will help you resolve any compilation issues you  
get when using code examples for previous versions.

Given the nature of your questions I recommend you download Lucene  
1.9 and use it for the time being (at least for the javadocs to see  
the deprecation messages with upgrade details), while you become  
familiar with Lucene.  All the examples you'll find online and in  
Lucene in Action are 1.9 compatible, and the main change between 1.9  
and 2.0 is that all the deprecated methods have been removed.  Once  
you have a working system and understand Lucene's API in more detail,  
you can tidy up any deprecation warnings you get and upgrade to 2.0.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 01:23:03 2006
Return-Path: <java-user-return-22891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20992 invoked from network); 24 Aug 2006 01:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 01:23:03 -0000
Received: (qmail 26580 invoked by uid 500); 24 Aug 2006 01:22:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26394 invoked by uid 500); 24 Aug 2006 01:22:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26375 invoked by uid 99); 24 Aug 2006 01:22:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 18:22:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 18:22:56 -0700
Received: by wx-out-0506.google.com with SMTP id s15so295708wxc
        for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 18:22:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NVB1SUpYFmnuflJ+/Ek0JrfTWWpgj3aLEuKAjcX8meqP4bvjgx2TjOuITvBYRfdAtmu+9a9X96SFhUwvk5rR0QG4iEejElDp2TwruIGsi+EQ5Mj+q+VRnbSWTPrUzzuhsDTnN6Y6JC85At+SNf/Iv+QCMWdlD6CzRtsWDYAiJA8=
Received: by 10.90.106.18 with SMTP id e18mr328960agc;
        Wed, 23 Aug 2006 18:22:33 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Wed, 23 Aug 2006 18:22:33 -0700 (PDT)
Message-ID: <1cbd6f830608231822v6ff99be5ye9b7abdcb335ab4f@mail.gmail.com>
Date: Wed, 23 Aug 2006 21:22:33 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query parser.parse (line);
In-Reply-To: <B5C4B2B0-41EB-469C-BB30-4B24F4D2AE36@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9055_7788266.1156382553587"
References: <1cbd6f830608231624w1931fdfdw7c1a133c004ce5de@mail.gmail.com>
	 <B2DFC692-0CAC-4D54-B5FD-72D6D7990C37@ehatchersolutions.com>
	 <1cbd6f830608231745p52ec881creb43d2294357cd46@mail.gmail.com>
	 <B5C4B2B0-41EB-469C-BB30-4B24F4D2AE36@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9055_7788266.1156382553587
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Very good advice!

With the previous code you gave me, I was able to get everything for 2.0!
good call!



On 8/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Aug 23, 2006, at 8:45 PM, Mag Gam wrote:
> > I am looking at this page
> > http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html
> >
> > Any chance there is a new version for 2.0? Or are there any 2.0
> > examples
> > (other than the stock example)?
>
> No, that article has not been updated for the 2.0 API.
>
> The main things that changed from the version of Lucene used in that
> article are:
>
>         * QueryParser must now be instantiated and the instance .parse()
> must be used instead of the previous QueryParser.parse() static method.
>
>         * BooleanQuery.add() now uses the Occur enumeration rather than
> the
> boolean flags.
>
> You can reference the javadocs for the 2.0 QueryParser and
> BooleanQuery APIs here: <http://lucene.apache.org/java/docs/api/
> index.html> and that will help you resolve any compilation issues you
> get when using code examples for previous versions.
>
> Given the nature of your questions I recommend you download Lucene
> 1.9 and use it for the time being (at least for the javadocs to see
> the deprecation messages with upgrade details), while you become
> familiar with Lucene.  All the examples you'll find online and in
> Lucene in Action are 1.9 compatible, and the main change between 1.9
> and 2.0 is that all the deprecated methods have been removed.  Once
> you have a working system and understand Lucene's API in more detail,
> you can tidy up any deprecation warnings you get and upgrade to 2.0.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9055_7788266.1156382553587--

From java-user-return-22892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 01:43:17 2006
Return-Path: <java-user-return-22892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24370 invoked from network); 24 Aug 2006 01:43:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 01:43:17 -0000
Received: (qmail 52213 invoked by uid 500); 24 Aug 2006 01:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52137 invoked by uid 500); 24 Aug 2006 01:43:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52126 invoked by uid 99); 24 Aug 2006 01:43:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 18:43:10 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of khoon.ee.gan@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 18:43:09 -0700
Received: by wx-out-0506.google.com with SMTP id s15so301099wxc
        for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 18:42:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TYEjiWdqcUzRwxMlf5nf8pnJ07cGEcIKQCSIs1ZKzquhycuSW0RGZk+87qwn2EgHEz9IUZCQMVpTRR6gq6Gm4izVuGVQEDNnyVQQfj6Yl8cjUPuJhjG6Fr/46eYHWxNs9GnyY3PVMKEkvFo3LT0ujy0q49SRztFOD6aPpjQYstQ=
Received: by 10.70.100.1 with SMTP id x1mr1622368wxb;
        Wed, 23 Aug 2006 18:42:49 -0700 (PDT)
Received: by 10.70.48.5 with HTTP; Wed, 23 Aug 2006 18:42:47 -0700 (PDT)
Message-ID: <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com>
Date: Thu, 24 Aug 2006 09:42:47 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to combine multiple fields to a single field for indexing
In-Reply-To: <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81806_7565731.1156383767444"
References: <44EC75E0.4050301@wolfram.com>
	 <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_81806_7565731.1156383767444
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erik,

What is generally the reason for indexing both individual fields, and the
general-purpose "content" field ?

Also, if we search in the general-purpose "content" field, wouldnt this
problem occurs. Let say we have 2 fields and the following values:

name : John Smith
food  : subway sandwich

So the general-purpose "content" would have the following values:

John Smith subway sandwich

Hence, if the user search for "smith subway" (with quotation), the said
document will be returned. On the other hand, if both fields were indexed
seperately, this document would not be returned, since there is no field
that contain the value "smith subway".

How do we go about this problem ?


On 8/24/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Aug 23, 2006, at 11:36 AM, Suba Suresh wrote:
> > In "Lucene In Action" book it says it is better practice to combine
> > two fields into one field and index it than use the
> > MultiFieldQueryParser. Do I initially index both the fields and
> > then index them again together? When I index them together do I
> > index the fieldnames or values? Can someone give me an example of
> > how to do it?
>
> What I do is simply index all the fields individually that need to be
> searchable or just stored, but also index a general-purpose
> "contents" field with all of that same text.
>
> You can add multiple fields of the same name to a document, making it
> easy to just keep appending to a "contents" field for a document.
> You can see how this is done in the Lucene in Action code in the
> TestDataDocumentHandler.java - however I took a cruder approach and
> appended the fields together with a space in between them rather than
> using the multiple valued field approach.  Either technique will work
> just fine.
>
>        Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_81806_7565731.1156383767444--

From java-user-return-22893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 04:36:14 2006
Return-Path: <java-user-return-22893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51738 invoked from network); 24 Aug 2006 04:36:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 04:36:14 -0000
Received: (qmail 79257 invoked by uid 500); 24 Aug 2006 04:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79228 invoked by uid 500); 24 Aug 2006 04:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79216 invoked by uid 99); 24 Aug 2006 04:36:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 21:36:06 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hasan.diwan@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 21:36:05 -0700
Received: by nf-out-0910.google.com with SMTP id b2so477820nfe
        for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 21:35:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=foxPgQibf3SG+4ZHE6d6NIvO33tH9aUbzkLFQpOI7FXzEC0LTX6bdo8i6isrWI08oxjZenSYlvv6NkLiUPs0G5MVk8C1SGxAN/9TNQWXTVY4BS8eng2svTQkstVMW4hV4X/kNbzuQKJ7uFcVlH4ruMS5LhhKLCOb8CT7W9ONZeE=
Received: by 10.48.48.18 with SMTP id v18mr3016560nfv;
        Wed, 23 Aug 2006 21:35:43 -0700 (PDT)
Received: by 10.49.67.7 with HTTP; Wed, 23 Aug 2006 21:35:43 -0700 (PDT)
Message-ID: <2cda2fc90608232135m7736471dq7401fe769b3cd813@mail.gmail.com>
Date: Wed, 23 Aug 2006 21:35:43 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Tomcat Simple Example
In-Reply-To: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 22/08/06, Mag Gam <magawake@gmail.com> wrote:
> Does anyone have a simple Tomcat search/result example? I have 4 text files,
> i would like to index.

There's a demonstration war file included with lucene.

-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 05:13:50 2006
Return-Path: <java-user-return-22894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56517 invoked from network); 24 Aug 2006 05:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 05:13:50 -0000
Received: (qmail 6335 invoked by uid 500); 24 Aug 2006 05:13:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5325 invoked by uid 500); 24 Aug 2006 05:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5314 invoked by uid 99); 24 Aug 2006 05:13:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 22:13:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.173.110.23] (HELO mailgw.postbulletin.com) (66.173.110.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Aug 2006 22:13:43 -0700
Received: from TS18 [10.117.240.254] by mailgw.postbulletin.com with ESMTP
  (SMTPD32-8.05) id A572890007C; Thu, 24 Aug 2006 00:13:22 -0500
From: "Paul Snyder" <psnyder@postbulletin.com>
To: <java-user@lucene.apache.org>
Subject: DateTools.set-
Date: Thu, 24 Aug 2006 00:11:17 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcbHO7oVDRs5wCSDRFCKU2vUcDOU6w==
Message-Id: <200608240013781.SM02072@TS18>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a question about DateTools conversions.  I am having trouble with
results of trying to store a date truncated to DAY resolution. 

Here is an example.

----------------------------------------------------------------------------
----

OK:

DateTools.stringToDate(DateTools.dateToString(new Date("01/12/2006"),
DateTools.Resolution.SECOND))
	 (java.util.Date) Thu Jan 12 00:00:00 CST 2006

NOT OK:

DateTools.stringToDate(DateTools.dateToString(new Date("01/12/2006"),
DateTools.Resolution.DAY))
	 (java.util.Date) Wed Jan 11 18:00:00 CST 2006

----------------------------------------------------------------------------
----

The problem appears to be on the stringToDate conversion.

----------------------------------------------------------------------------
----

OK:

DateTools.dateToString(new Date("01/12/2006"), DateTools.Resolution.DAY)
	 (java.lang.String) 20060112

NOT OK:

DateTools.stringToDate("20060112")
	 (java.util.Date) Wed Jan 11 18:00:00 CST 2006

----------------------------------------------------------------------------
----

I assume there is something simple I am missing, please, anybody, WHAT?

Local time zone is GMT-0600 (CST)

OS is Redhat E-L 4.

jre is from Sun jdk 1.4

Lucene is lucene-core-2.0.1.jar

Paul Snyder
Web Programmer
Post-Bulletin Company, L.L.C.
Phone (507) 281-7402 Fax (507) 281-7491 TollFree (800) 562-1758 
http://www.postbulletin.com http://www.pbinternetservices.com
http://www.rochestermn.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 07:01:05 2006
Return-Path: <java-user-return-22895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4918 invoked from network); 24 Aug 2006 07:01:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 07:01:05 -0000
Received: (qmail 53868 invoked by uid 500); 24 Aug 2006 07:00:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53501 invoked by uid 500); 24 Aug 2006 07:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53424 invoked by uid 99); 24 Aug 2006 07:00:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:00:35 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A375B5B794; Wed, 23 Aug 2006 23:59:26 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9D64D7F403
	for <java-user@lucene.apache.org>; Wed, 23 Aug 2006 23:59:26 -0700 (PDT)
Date: Wed, 23 Aug 2006 23:59:26 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to combine multiple fields to a single field for indexing
In-Reply-To: <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608232353170.31230@hal.rescomp.berkeley.edu>
References: <44EC75E0.4050301@wolfram.com>  <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com>
 <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: What is generally the reason for indexing both individual fields, and the
: general-purpose "content" field ?

so you can explicitly query for "name:paris" or "city:paris" instead of
just "paris"

: name : John Smith
: food  : subway sandwich
:
: So the general-purpose "content" would have the following values:
:
: John Smith subway sandwich
:
: Hence, if the user search for "smith subway" (with quotation), the said

not exactly ... this is where the position incriment gap of your Analyzer
comes in.  you can say how much gap exists between two seperate values in
the same field, so if your gap is 10 then contents:"smith subway"~5 won't
match ... but contents:(smith subway) will


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 07:06:06 2006
Return-Path: <java-user-return-22896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7248 invoked from network); 24 Aug 2006 07:06:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 07:06:05 -0000
Received: (qmail 64110 invoked by uid 500); 24 Aug 2006 07:05:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64088 invoked by uid 500); 24 Aug 2006 07:05:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64077 invoked by uid 99); 24 Aug 2006 07:05:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:05:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gopi.subramani@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:05:58 -0700
Received: by nz-out-0102.google.com with SMTP id z6so255337nzd
        for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 00:05:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eQlnQl0UK9xd4sMkJ0xs4L7guRjojUArVJENwNiDZm0RpW8Bs5sxlZYidG9+mNCRbg4maRncuvJcfQXQc0AMaNPOjA1IjyUvOqJ8oNlfDWY8Ig7KoTd7P9KPtfcBMX6QR00kTwDyuAU8on9nbNwSis/9ipq0DEIna5QFDfY87Yg=
Received: by 10.65.219.4 with SMTP id w4mr1725935qbq;
        Thu, 24 Aug 2006 00:05:37 -0700 (PDT)
Received: by 10.65.51.3 with HTTP; Thu, 24 Aug 2006 00:05:37 -0700 (PDT)
Message-ID: <733777220608240005i1fc4b3f7qadb1c47529c5774f@mail.gmail.com>
Date: Thu, 24 Aug 2006 12:35:37 +0530
From: "Gopikrishnan Subramani" <gopi.subramani@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to combine multiple fields to a single field for indexing
In-Reply-To: <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_82821_9672055.1156403137893"
References: <44EC75E0.4050301@wolfram.com>
	 <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com>
	 <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_82821_9672055.1156403137893
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erik's has used a space as the field separator. May be you can use a
different field separator that your analyzer won't eat up, so that will
change the token position by 1.

Gopi

On 8/24/06, KEGan <khoon.ee.gan@gmail.com> wrote:
>
> Erik,
>
> What is generally the reason for indexing both individual fields, and the
> general-purpose "content" field ?
>
> Also, if we search in the general-purpose "content" field, wouldnt this
> problem occurs. Let say we have 2 fields and the following values:
>
> name : John Smith
> food  : subway sandwich
>
> So the general-purpose "content" would have the following values:
>
> John Smith subway sandwich
>
> Hence, if the user search for "smith subway" (with quotation), the said
> document will be returned. On the other hand, if both fields were indexed
> seperately, this document would not be returned, since there is no field
> that contain the value "smith subway".
>
> How do we go about this problem ?
>
>
> On 8/24/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >
> >
> > On Aug 23, 2006, at 11:36 AM, Suba Suresh wrote:
> > > In "Lucene In Action" book it says it is better practice to combine
> > > two fields into one field and index it than use the
> > > MultiFieldQueryParser. Do I initially index both the fields and
> > > then index them again together? When I index them together do I
> > > index the fieldnames or values? Can someone give me an example of
> > > how to do it?
> >
> > What I do is simply index all the fields individually that need to be
> > searchable or just stored, but also index a general-purpose
> > "contents" field with all of that same text.
> >
> > You can add multiple fields of the same name to a document, making it
> > easy to just keep appending to a "contents" field for a document.
> > You can see how this is done in the Lucene in Action code in the
> > TestDataDocumentHandler.java - however I took a cruder approach and
> > appended the fields together with a space in between them rather than
> > using the multiple valued field approach.  Either technique will work
> > just fine.
> >
> >        Erik
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_82821_9672055.1156403137893--

From java-user-return-22897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 07:21:49 2006
Return-Path: <java-user-return-22897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19418 invoked from network); 24 Aug 2006 07:21:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 07:21:49 -0000
Received: (qmail 88692 invoked by uid 500); 24 Aug 2006 07:21:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88657 invoked by uid 500); 24 Aug 2006 07:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88645 invoked by uid 99); 24 Aug 2006 07:21:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:21:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:21:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CA5BD5B794; Thu, 24 Aug 2006 00:21:18 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C46497F403
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 00:21:18 -0700 (PDT)
Date: Thu, 24 Aug 2006 00:21:18 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: DateTools.set-
In-Reply-To: <200608240013781.SM02072@TS18>
Message-ID: <Pine.LNX.4.58.0608240012070.31230@hal.rescomp.berkeley.edu>
References: <200608240013781.SM02072@TS18>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I think the confusion here is that when DateTools looks at a Date object
and a Resolution, it does it's calculations in GMT (so when you ask what
"day" it is at a particular moment, it tells you the current day in GMT,
when you ask which month, it tells you the month in GMT, etc...)

This may seem arbitrary, and it is, but it's fixed like that so that
no matter what Locale your jvm is configured with, you'll get the same
results from an index as everybody else.

If you print the Date object with a robust DateFormatter (instead of the
default toString()) you'll see what i mean.



: Date: Thu, 24 Aug 2006 00:11:17 -0500
: From: Paul Snyder <psnyder@postbulletin.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: DateTools.set-
:
: I have a question about DateTools conversions.  I am having trouble with
: results of trying to store a date truncated to DAY resolution.
:
: Here is an example.
:
: ----------------------------------------------------------------------------
: ----
:
: OK:
:
: DateTools.stringToDate(DateTools.dateToString(new Date("01/12/2006"),
: DateTools.Resolution.SECOND))
: 	 (java.util.Date) Thu Jan 12 00:00:00 CST 2006
:
: NOT OK:
:
: DateTools.stringToDate(DateTools.dateToString(new Date("01/12/2006"),
: DateTools.Resolution.DAY))
: 	 (java.util.Date) Wed Jan 11 18:00:00 CST 2006
:
: ----------------------------------------------------------------------------
: ----
:
: The problem appears to be on the stringToDate conversion.
:
: ----------------------------------------------------------------------------
: ----
:
: OK:
:
: DateTools.dateToString(new Date("01/12/2006"), DateTools.Resolution.DAY)
: 	 (java.lang.String) 20060112
:
: NOT OK:
:
: DateTools.stringToDate("20060112")
: 	 (java.util.Date) Wed Jan 11 18:00:00 CST 2006
:
: ----------------------------------------------------------------------------
: ----
:
: I assume there is something simple I am missing, please, anybody, WHAT?
:
: Local time zone is GMT-0600 (CST)
:
: OS is Redhat E-L 4.
:
: jre is from Sun jdk 1.4
:
: Lucene is lucene-core-2.0.1.jar
:
: Paul Snyder
: Web Programmer
: Post-Bulletin Company, L.L.C.
: Phone (507) 281-7402 Fax (507) 281-7491 TollFree (800) 562-1758
: http://www.postbulletin.com http://www.pbinternetservices.com
: http://www.rochestermn.com
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 07:30:02 2006
Return-Path: <java-user-return-22898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24846 invoked from network); 24 Aug 2006 07:30:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 07:30:02 -0000
Received: (qmail 2367 invoked by uid 500); 24 Aug 2006 07:29:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2331 invoked by uid 500); 24 Aug 2006 07:29:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2320 invoked by uid 99); 24 Aug 2006 07:29:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:29:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.wechner@wyona.com designates 195.226.6.68 as permitted sender)
Received: from [195.226.6.68] (HELO mx1.wyona.com) (195.226.6.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:29:53 -0700
Received: from [195.226.6.66] (helo=[192.168.1.55])
	by mx1.wyona.com with asmtp (Exim 3.35 #1 (Debian))
	id 1GG9eb-0007xm-00
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 09:29:29 +0200
Message-ID: <44ED555B.1000200@wyona.com>
Date: Thu, 24 Aug 2006 09:29:31 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.12) Gecko/20050920
X-Accept-Language: en-us, de, fr-ch, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Tomcat Simple Example
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>	 <44EC0150.2020203@wyona.com>	 <Pine.LNX.4.58.0608230110350.18339@hal.rescomp.berkeley.edu> <1cbd6f830608231418k6ee943e0m5200e15d5e7be706@mail.gmail.com>
In-Reply-To: <1cbd6f830608231418k6ee943e0m5200e15d5e7be706@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mag Gam wrote:

> Thanks!
>
> So, when working with Tomcat, for a simple Index + Search, it is 
> recommend
> to use JSP over servlets?
>
> any advice?


well, the issue seems to me rather that the (X)HTML is hardcoded into 
the JSP resp. Servlet which creates
a maintenance nightmare when one wants to customize the layout and at 
the same time upgrade from time to time.

As an alternative I would rather suggest that one generates a 
well-defined XML with JSP or a servlet and then applies
an XSLT. If somebody is afraid of performance issues then one might want 
to consider generating the servlet or jsp code
dynamically out of the XSLT ...

cheers

Michi

>
>
>
> On 8/23/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>>
>>
>> : > Does anyone have a simple Tomcat search/result example?
>>
>> : > I have 4 text files,
>> : > i would like to index.
>>
>> take a look at the geting started guide, and the demo WAR that comes 
>> with
>> the Lucene distribution...
>>
>> http://lucene.apache.org/java/docs/gettingstarted.html
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


-- 
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 07:33:08 2006
Return-Path: <java-user-return-22899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26646 invoked from network); 24 Aug 2006 07:33:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 07:33:08 -0000
Received: (qmail 8624 invoked by uid 500); 24 Aug 2006 07:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8600 invoked by uid 500); 24 Aug 2006 07:33:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8588 invoked by uid 99); 24 Aug 2006 07:33:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:33:02 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of khoon.ee.gan@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:33:01 -0700
Received: by wx-out-0506.google.com with SMTP id s15so383485wxc
        for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 00:32:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hsZo+fs8HNuLkQ4Oc6y7aal16G3pfCnYgq+K9g8oTgAEoKoWRFGIzJASpToQhAmT8cc+0FHXUek56gCWheVYdFMjIjmbyZ8hQe6NScanPcbwlifNjrrY3/8my/kpJ/ZbelcAgbvG8iEH4lKKIJ7C/NAbDyZQG7LxLauIOgfZZ2w=
Received: by 10.70.87.9 with SMTP id k9mr2046690wxb;
        Thu, 24 Aug 2006 00:32:40 -0700 (PDT)
Received: by 10.70.48.5 with HTTP; Thu, 24 Aug 2006 00:32:40 -0700 (PDT)
Message-ID: <85c493340608240032s73e5829qb60764a3462c7861@mail.gmail.com>
Date: Thu, 24 Aug 2006 15:32:40 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to combine multiple fields to a single field for indexing
In-Reply-To: <733777220608240005i1fc4b3f7qadb1c47529c5774f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85553_19515239.1156404760576"
References: <44EC75E0.4050301@wolfram.com>
	 <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com>
	 <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com>
	 <733777220608240005i1fc4b3f7qadb1c47529c5774f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_85553_19515239.1156404760576
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think I start to understand this :) .. Thanks guys.

~KEGan


On 8/24/06, Gopikrishnan Subramani <gopi.subramani@gmail.com> wrote:
>
> Erik's has used a space as the field separator. May be you can use a
> different field separator that your analyzer won't eat up, so that will
> change the token position by 1.
>
> Gopi
>
> On 8/24/06, KEGan <khoon.ee.gan@gmail.com> wrote:
> >
> > Erik,
> >
> > What is generally the reason for indexing both individual fields, and
> the
> > general-purpose "content" field ?
> >
> > Also, if we search in the general-purpose "content" field, wouldnt this
> > problem occurs. Let say we have 2 fields and the following values:
> >
> > name : John Smith
> > food  : subway sandwich
> >
> > So the general-purpose "content" would have the following values:
> >
> > John Smith subway sandwich
> >
> > Hence, if the user search for "smith subway" (with quotation), the said
> > document will be returned. On the other hand, if both fields were
> indexed
> > seperately, this document would not be returned, since there is no field
> > that contain the value "smith subway".
> >
> > How do we go about this problem ?
> >
> >
> > On 8/24/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> > >
> > >
> > > On Aug 23, 2006, at 11:36 AM, Suba Suresh wrote:
> > > > In "Lucene In Action" book it says it is better practice to combine
> > > > two fields into one field and index it than use the
> > > > MultiFieldQueryParser. Do I initially index both the fields and
> > > > then index them again together? When I index them together do I
> > > > index the fieldnames or values? Can someone give me an example of
> > > > how to do it?
> > >
> > > What I do is simply index all the fields individually that need to be
> > > searchable or just stored, but also index a general-purpose
> > > "contents" field with all of that same text.
> > >
> > > You can add multiple fields of the same name to a document, making it
> > > easy to just keep appending to a "contents" field for a document.
> > > You can see how this is done in the Lucene in Action code in the
> > > TestDataDocumentHandler.java - however I took a cruder approach and
> > > appended the fields together with a space in between them rather than
> > > using the multiple valued field approach.  Either technique will work
> > > just fine.
> > >
> > >        Erik
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
>

------=_Part_85553_19515239.1156404760576--

From java-user-return-22900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 07:36:39 2006
Return-Path: <java-user-return-22900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27262 invoked from network); 24 Aug 2006 07:36:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 07:36:38 -0000
Received: (qmail 11226 invoked by uid 500); 24 Aug 2006 07:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11188 invoked by uid 500); 24 Aug 2006 07:36:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11177 invoked by uid 99); 24 Aug 2006 07:36:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:36:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 00:36:28 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T7a4bf206f388ad3ee41fd8@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Thu, 24 Aug 2006 09:36:02 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Change index structure
Date: Thu, 24 Aug 2006 09:36:04 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF447@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Change index structure
Thread-Index: AcbGr2SDkjnDox23S7epbZYNPNiUtAAoIGzw
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks a lot.=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 23 August 2006 14:26
To: java-user@lucene.apache.org
Subject: Re: Change index structure


On Aug 23, 2006, at 6:22 AM, WATHELET Thomas wrote:
> If I want to add a new field for exemple into an existing index

Documents in Lucene are heterogeneous, with fields being defined per =20
document not per index.  You can introduce a new field on a new =20
document at any time.  There is currently no way to _update_ a =20
document other than deleting it and re-adding it though - so if you =20
want to add a new field to an existing document you need to take =20
those two steps.

	Erik



>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 23 August 2006 11:57
> To: java-user@lucene.apache.org
> Subject: Re: Change index structure
>
>
> On Aug 23, 2006, at 3:50 AM, WATHELET Thomas wrote:
>> Is it possible to change index structure in an existing index.
>> If yes how to proceed.
>
> Please elaborate on what you mean by "index structure".  Lucene
> supports incremental indexing, if that is what you mean - so you can
> always add/delete documents from an existing index.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 09:42:07 2006
Return-Path: <java-user-return-22901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66786 invoked from network); 24 Aug 2006 09:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 09:42:07 -0000
Received: (qmail 79597 invoked by uid 500); 24 Aug 2006 09:42:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79087 invoked by uid 500); 24 Aug 2006 09:42:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79076 invoked by uid 99); 24 Aug 2006 09:42:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 02:42:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 02:41:59 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0C83930EFCD6; Thu, 24 Aug 2006 05:41:39 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 8697F30EFCD5
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 05:41:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44ED555B.1000200@wyona.com>
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>	 <44EC0150.2020203@wyona.com>	 <Pine.LNX.4.58.0608230110350.18339@hal.rescomp.berkeley.edu> <1cbd6f830608231418k6ee943e0m5200e15d5e7be706@mail.gmail.com> <44ED555B.1000200@wyona.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EBCA6D19-C55B-4A68-8DDE-2D88BE4045C8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Tomcat Simple Example
Date: Thu, 24 Aug 2006 05:41:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 24, 2006, at 3:29 AM, Michael Wechner wrote:
> As an alternative I would rather suggest that one generates a well- 
> defined XML with JSP or a servlet and then applies
> an XSLT. If somebody is afraid of performance issues then one might  
> want to consider generating the servlet or jsp code
> dynamically out of the XSLT ...

You must be one of those Cocoon (*wink*) folks that use the XSLT  
hammer for every problem ;)

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 09:47:17 2006
Return-Path: <java-user-return-22902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67817 invoked from network); 24 Aug 2006 09:47:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 09:47:17 -0000
Received: (qmail 85633 invoked by uid 500); 24 Aug 2006 09:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85203 invoked by uid 500); 24 Aug 2006 09:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85192 invoked by uid 99); 24 Aug 2006 09:47:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 02:47:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 02:47:08 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6C00D30EFCD5; Thu, 24 Aug 2006 05:46:48 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 2547930EFCD5
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 05:46:40 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <733777220608240005i1fc4b3f7qadb1c47529c5774f@mail.gmail.com>
References: <44EC75E0.4050301@wolfram.com> <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com> <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com> <733777220608240005i1fc4b3f7qadb1c47529c5774f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C5311C92-9CAB-421E-A64F-B8EEAF164503@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to combine multiple fields to a single field for indexing
Date: Thu, 24 Aug 2006 05:46:37 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yeah, I used a cruder form by appending all the text together into a  
single string with a space separator in that LIA example.

Given the position increment gap between instances of same-named  
fields that is now part of Lucene, I recommend using multiple field  
instances instead.

	Erik



On Aug 24, 2006, at 3:05 AM, Gopikrishnan Subramani wrote:
> Erik's has used a space as the field separator. May be you can use a
> different field separator that your analyzer won't eat up, so that  
> will
> change the token position by 1.
>
> Gopi
>
> On 8/24/06, KEGan <khoon.ee.gan@gmail.com> wrote:
>>
>> Erik,
>>
>> What is generally the reason for indexing both individual fields,  
>> and the
>> general-purpose "content" field ?
>>
>> Also, if we search in the general-purpose "content" field, wouldnt  
>> this
>> problem occurs. Let say we have 2 fields and the following values:
>>
>> name : John Smith
>> food  : subway sandwich
>>
>> So the general-purpose "content" would have the following values:
>>
>> John Smith subway sandwich
>>
>> Hence, if the user search for "smith subway" (with quotation), the  
>> said
>> document will be returned. On the other hand, if both fields were  
>> indexed
>> seperately, this document would not be returned, since there is no  
>> field
>> that contain the value "smith subway".
>>
>> How do we go about this problem ?
>>
>>
>> On 8/24/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>> >
>> >
>> > On Aug 23, 2006, at 11:36 AM, Suba Suresh wrote:
>> > > In "Lucene In Action" book it says it is better practice to  
>> combine
>> > > two fields into one field and index it than use the
>> > > MultiFieldQueryParser. Do I initially index both the fields and
>> > > then index them again together? When I index them together do I
>> > > index the fieldnames or values? Can someone give me an example of
>> > > how to do it?
>> >
>> > What I do is simply index all the fields individually that need  
>> to be
>> > searchable or just stored, but also index a general-purpose
>> > "contents" field with all of that same text.
>> >
>> > You can add multiple fields of the same name to a document,  
>> making it
>> > easy to just keep appending to a "contents" field for a document.
>> > You can see how this is done in the Lucene in Action code in the
>> > TestDataDocumentHandler.java - however I took a cruder approach and
>> > appended the fields together with a space in between them rather  
>> than
>> > using the multiple valued field approach.  Either technique will  
>> work
>> > just fine.
>> >
>> >        Erik
>> >
>> >
>> >  
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 09:48:22 2006
Return-Path: <java-user-return-22903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69559 invoked from network); 24 Aug 2006 09:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 09:48:21 -0000
Received: (qmail 89189 invoked by uid 500); 24 Aug 2006 09:48:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89169 invoked by uid 500); 24 Aug 2006 09:48:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89158 invoked by uid 99); 24 Aug 2006 09:48:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 02:48:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.wechner@wyona.com designates 195.226.6.68 as permitted sender)
Received: from [195.226.6.68] (HELO mx1.wyona.com) (195.226.6.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 02:48:14 -0700
Received: from [195.226.6.66] (helo=[192.168.1.55])
	by mx1.wyona.com with asmtp (Exim 3.35 #1 (Debian))
	id 1GGBoV-0002kg-00
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 11:47:51 +0200
Message-ID: <44ED75C9.6030207@wyona.com>
Date: Thu, 24 Aug 2006 11:47:53 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.12) Gecko/20050920
X-Accept-Language: en-us, de, fr-ch, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Tomcat Simple Example
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>	 <44EC0150.2020203@wyona.com>	 <Pine.LNX.4.58.0608230110350.18339@hal.rescomp.berkeley.edu> <1cbd6f830608231418k6ee943e0m5200e15d5e7be706@mail.gmail.com> <44ED555B.1000200@wyona.com> <EBCA6D19-C55B-4A68-8DDE-2D88BE4045C8@ehatchersolutions.com>
In-Reply-To: <EBCA6D19-C55B-4A68-8DDE-2D88BE4045C8@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

>
> On Aug 24, 2006, at 3:29 AM, Michael Wechner wrote:
>
>> As an alternative I would rather suggest that one generates a well- 
>> defined XML with JSP or a servlet and then applies
>> an XSLT. If somebody is afraid of performance issues then one might  
>> want to consider generating the servlet or jsp code
>> dynamically out of the XSLT ...
>
>
> You must be one of those Cocoon (*wink*) folks that use the XSLT  
> hammer for every problem ;)


I wouldn't say every problem, but I would consider this appropriate ;-)

Michi

>
>     Erik
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 10:08:50 2006
Return-Path: <java-user-return-22904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78547 invoked from network); 24 Aug 2006 10:08:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 10:08:50 -0000
Received: (qmail 36657 invoked by uid 500); 24 Aug 2006 10:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36626 invoked by uid 500); 24 Aug 2006 10:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36615 invoked by uid 99); 24 Aug 2006 10:08:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 03:08:41 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=BLANK_LINES_70_80
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [70.84.250.228] (HELO nix1.fastnix.com) (70.84.250.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 03:08:36 -0700
Received: from [134.159.98.227] (helo=youra9279112e3)
	by nix1.fastnix.com with esmtpa (Exim 4.52)
	id 1GGC81-00078S-7f
	for java-user@lucene.apache.org; Thu, 24 Aug 2006 15:37:40 +0530
From: "sachin" <sachin.khaire@noemacorp.com>
To: <java-user@lucene.apache.org>
Subject: sharing of Design documents of Lucene
Date: Thu, 24 Aug 2006 15:38:04 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <Pine.LNX.4.58.0608231238360.12489@hal.rescomp.berkeley.edu>
Thread-Index: AcbG7IATScph6Au3Q5CZrpyOR3l5LgAd2INA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nix1.fastnix.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - noemacorp.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060824100840.CF89710FB006@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Its nice if someone shares design documents of Lucene with Me.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 11:02:57 2006
Return-Path: <java-user-return-22905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4551 invoked from network); 24 Aug 2006 11:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 11:02:57 -0000
Received: (qmail 51625 invoked by uid 500); 24 Aug 2006 11:02:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51603 invoked by uid 500); 24 Aug 2006 11:02:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51592 invoked by uid 99); 24 Aug 2006 11:02:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 04:02:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.61.132.12] (HELO server1.livestoryboard.com) (209.61.132.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 04:02:49 -0700
Received: from [127.0.0.1] (livestoryboard.com [209.61.132.12] (may be forged))
	(authenticated)
	by server1.livestoryboard.com (8.11.6/8.11.6) with ESMTP id k7OB6bg30727
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 06:06:37 -0500
Message-ID: <44ED86BC.5080301@koberg.com>
Date: Thu, 24 Aug 2006 07:00:12 -0400
From: Robert Koberg <rob@koberg.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Tomcat Simple Example
References: <1cbd6f830608221924r753b93aese0636ec917ec47d1@mail.gmail.com>	 <44EC0150.2020203@wyona.com>	 <Pine.LNX.4.58.0608230110350.18339@hal.rescomp.berkeley.edu> <1cbd6f830608231418k6ee943e0m5200e15d5e7be706@mail.gmail.com> <44ED555B.1000200@wyona.com> <EBCA6D19-C55B-4A68-8DDE-2D88BE4045C8@ehatchersolutions.com>
In-Reply-To: <EBCA6D19-C55B-4A68-8DDE-2D88BE4045C8@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> 
> On Aug 24, 2006, at 3:29 AM, Michael Wechner wrote:
>> As an alternative I would rather suggest that one generates a 
>> well-defined XML with JSP or a servlet and then applies
>> an XSLT. If somebody is afraid of performance issues then one might 
>> want to consider generating the servlet or jsp code
>> dynamically out of the XSLT ...
> 
> You must be one of those Cocoon (*wink*) folks that use the XSLT hammer 
> for every problem ;)

Awww... come on now... everybody who prescribes XSL for (almost) every 
problem is not a cocooner! :)

-Rob


> 
>     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 11:59:02 2006
Return-Path: <java-user-return-22906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37266 invoked from network); 24 Aug 2006 11:59:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 11:59:01 -0000
Received: (qmail 42663 invoked by uid 500); 24 Aug 2006 11:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42374 invoked by uid 500); 24 Aug 2006 11:58:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42363 invoked by uid 99); 24 Aug 2006 11:58:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 04:58:54 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 04:58:53 -0700
Received: by wx-out-0506.google.com with SMTP id s13so447611wxc
        for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 04:58:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cZ3x/xTU2a2U9DJ1v338okiccDOg28Uufxz+XXapUVn5Abwo7KyBJ8RQCEQ9FbmX4JLrZT+MMk0Z+Dn9u46FEPxiTspCrWxW6Bk6gM37N04OspjPiixpjWkVYjRRABM2KkB7xDLIukt5OubvvxiLIwfD9GK3Kmm9oHICbB/f7eI=
Received: by 10.90.49.20 with SMTP id w20mr361581agw;
        Thu, 24 Aug 2006 04:58:32 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Thu, 24 Aug 2006 04:58:32 -0700 (PDT)
Message-ID: <1cbd6f830608240458h6220b455mb0ed64de0798970f@mail.gmail.com>
Date: Thu, 24 Aug 2006 07:58:32 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: NoClassDefFoundError
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12895_1918280.1156420712617"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12895_1918280.1156420712617
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I keep getting this error in my tomcatlogs


Aug 24, 2006 7:44:09 AM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet search as unavailable
Aug 24, 2006 7:44:09 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet search
java.lang.NoClassDefFoundError: org/apache/lucene/queryParser/ParseException
        at java.lang.Class.getDeclaredConstructors0(Native Method)
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2357)
        at java.lang.Class.getConstructor0(Class.java:2671)
        at java.lang.Class.newInstance0(Class.java:321)
        at java.lang.Class.newInstance(Class.java:303)
        at org.apache.catalina.core.StandardWrapper.loadServlet(
StandardWrapper.java:1048)
        at org.apache.catalina.core.StandardWrapper.allocate(
StandardWrapper.java:750)
        at org.apache.catalina.core.StandardWrapperValve.invoke(
StandardWrapperValve.java:130)
        at org.apache.catalina.core.StandardContextValve.invoke(
StandardContextValve.java:178)
        at org.apache.catalina.core.StandardHostValve.invoke(
StandardHostValve.java:126)
        at org.apache.catalina.valves.ErrorReportValve.invoke(
ErrorReportValve.java:105)
        at org.apache.catalina.core.StandardEngineValve.invoke(
StandardEngineValve.java:107)
        at org.apache.catalina.connector.CoyoteAdapter.service(
CoyoteAdapter.java:148)
        at org.apache.coyote.http11.Http11Processor.process(
Http11Processor.java:868)
        at

org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection
(Http11BaseProtocol.java:

663)
        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(
PoolTcpEndpoint.java:527)
        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(
LeaderFollowerWorkerThread.java:80)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(
ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)




My code works well, in Linux but on Solaris 9 it tanks, I keep getting this
exception. Is there anything I can tweak? The code in question I am assuming
is this:

try

{

Query query = parser.parse (request.getParameter ("param1"));

Hits hits = searcher.search (query);

out.println (hits.length () + " results<br><hr>");

for (int i = 0; i < hits.length (); i++)

{

Document doc = hits.doc (i);

out.println (doc.get ("path"));

out.println ("<br>");

}

}

catch (ParseException pe)

{

throw new IOException (pe.getMessage ());

}



Any thoughts?

tia

------=_Part_12895_1918280.1156420712617--

From java-user-return-22907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 12:48:24 2006
Return-Path: <java-user-return-22907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49016 invoked from network); 24 Aug 2006 12:48:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 12:48:24 -0000
Received: (qmail 6803 invoked by uid 500); 24 Aug 2006 12:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6390 invoked by uid 500); 24 Aug 2006 12:48:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6379 invoked by uid 99); 24 Aug 2006 12:48:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 05:48:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 05:48:16 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B60C430EFCD5; Thu, 24 Aug 2006 08:47:54 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id AD43D30EFCD5
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 08:47:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1cbd6f830608240458h6220b455mb0ed64de0798970f@mail.gmail.com>
References: <1cbd6f830608240458h6220b455mb0ed64de0798970f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A71E94CA-7A38-4B82-BFFA-613DD2116EEA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: NoClassDefFoundError
Date: Thu, 24 Aug 2006 08:47:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My hunch is you don't have the Lucene JAR in the classpath at runtime.

	Erik


On Aug 24, 2006, at 7:58 AM, Mag Gam wrote:

> Hi All,
>
> I keep getting this error in my tomcatlogs
>
>
> Aug 24, 2006 7:44:09 AM org.apache.catalina.core.ApplicationContext  
> log
> INFO: Marking servlet search as unavailable
> Aug 24, 2006 7:44:09 AM  
> org.apache.catalina.core.StandardWrapperValve invoke
> SEVERE: Allocate exception for servlet search
> java.lang.NoClassDefFoundError: org/apache/lucene/queryParser/ 
> ParseException
>        at java.lang.Class.getDeclaredConstructors0(Native Method)
>        at java.lang.Class.privateGetDeclaredConstructors(Class.java: 
> 2357)
>        at java.lang.Class.getConstructor0(Class.java:2671)
>        at java.lang.Class.newInstance0(Class.java:321)
>        at java.lang.Class.newInstance(Class.java:303)
>        at org.apache.catalina.core.StandardWrapper.loadServlet(
> StandardWrapper.java:1048)
>        at org.apache.catalina.core.StandardWrapper.allocate(
> StandardWrapper.java:750)
>        at org.apache.catalina.core.StandardWrapperValve.invoke(
> StandardWrapperValve.java:130)
>        at org.apache.catalina.core.StandardContextValve.invoke(
> StandardContextValve.java:178)
>        at org.apache.catalina.core.StandardHostValve.invoke(
> StandardHostValve.java:126)
>        at org.apache.catalina.valves.ErrorReportValve.invoke(
> ErrorReportValve.java:105)
>        at org.apache.catalina.core.StandardEngineValve.invoke(
> StandardEngineValve.java:107)
>        at org.apache.catalina.connector.CoyoteAdapter.service(
> CoyoteAdapter.java:148)
>        at org.apache.coyote.http11.Http11Processor.process(
> Http11Processor.java:868)
>        at
>
> org.apache.coyote.http11.Http11BaseProtocol 
> $Http11ConnectionHandler.processConnection
> (Http11BaseProtocol.java:
>
> 663)
>        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(
> PoolTcpEndpoint.java:527)
>        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(
> LeaderFollowerWorkerThread.java:80)
>        at org.apache.tomcat.util.threads.ThreadPool 
> $ControlRunnable.run(
> ThreadPool.java:684)
>        at java.lang.Thread.run(Thread.java:595)
>
>
>
>
> My code works well, in Linux but on Solaris 9 it tanks, I keep  
> getting this
> exception. Is there anything I can tweak? The code in question I am  
> assuming
> is this:
>
> try
>
> {
>
> Query query = parser.parse (request.getParameter ("param1"));
>
> Hits hits = searcher.search (query);
>
> out.println (hits.length () + " results<br><hr>");
>
> for (int i = 0; i < hits.length (); i++)
>
> {
>
> Document doc = hits.doc (i);
>
> out.println (doc.get ("path"));
>
> out.println ("<br>");
>
> }
>
> }
>
> catch (ParseException pe)
>
> {
>
> throw new IOException (pe.getMessage ());
>
> }
>
>
>
> Any thoughts?
>
> tia


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 12:59:59 2006
Return-Path: <java-user-return-22908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52370 invoked from network); 24 Aug 2006 12:59:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 12:59:59 -0000
Received: (qmail 28342 invoked by uid 500); 24 Aug 2006 12:59:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28071 invoked by uid 500); 24 Aug 2006 12:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28060 invoked by uid 99); 24 Aug 2006 12:59:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 05:59:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 05:59:51 -0700
Received: by wx-out-0506.google.com with SMTP id s15so461600wxc
        for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 05:59:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=tzGAQU2kNybRkg2igJpqUNXnRvZEjjUvox2UfyzXCulpal++XTszZuF2Zbd4lwKoj1kTZubOqW9Wund4l63/DaWknh1AWYQ36YY1OxmpM2Xgf08IFdjomKrih8Ifp+IC/rOwusKNjYL9c4TUDxJ1nnIJ/J5Zc1Qj0h6tlyf+RaU=
Received: by 10.70.52.2 with SMTP id z2mr2496660wxz;
        Thu, 24 Aug 2006 05:59:30 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 25sm980343wra.2006.08.24.05.59.28;
        Thu, 24 Aug 2006 05:59:29 -0700 (PDT)
Message-ID: <44EDA2B5.2000500@gmail.com>
Date: Thu, 24 Aug 2006 08:59:33 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Test new query parser?
References: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com> <Pine.LNX.4.63.0608221708120.22579@jimwormold> <44ECB899.1010303@gmail.com> <Pine.LNX.4.63.0608231732190.20104@jimwormold>
In-Reply-To: <Pine.LNX.4.63.0608231732190.20104@jimwormold>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is interesting to note that Lucene would also seem to suffer from 
bugs when using spans if you only have a single document in the index. 
At least with the NotSpanQuery, the spans could wrap around the document 
from end to beginning. This would be unexpected but would also go away 
if you add a second doc. This is a limitation (if you could call it 
that) of the spans implementation and not a bug though (I'm speculating 
on all of this).

Hopefully my new idea will sort this problem out. This is a non-work 
project so I don't have much time for it, but it is much more 
interesting than my work so I will probably keep plugging away on off hours.

The new idea is to collect the terms in a composite object that will 
maintain order of operations as well as the tokens.

I have much to do on this composite class, but this query seems to 
generate an acceptable composite:

(me | cop & her) ~2 (old & women) :

cdistrib(cdistrib(distrib(allFields:me)' 
'cdistrib(distrib(allFields:cop)'+'distrib(allFields:her)))) ~3 
cdistrib(distrib(allFields:old)'+'distrib(allFields:women))

Then I will need a function that will distribute one composite across 
another, creating the proximity query (I would guess a boolean at its 
root). I am confident I can make the composite class work, but I have 
not investigated how hard it will be to do the distribution. All of the 
information is there though, so I am assuming it won't be too difficult 
(don't i wish).

- Mark
> Mark --
>
> Don't lose hope! We are migrating from Verity to Lucene, and I know for
> a fact that we will have to support the kind of complex queries you talk
> about; maybe not /quite/ as complex as your magnificent:
>
>> cop | fowl & (fowl | priest & man) ! helicopter ~8 (hillary | tom)
>
> but certainly more complex than I have been able to solve.
>
> We can also take heart in that Verity hasn't quite cracked it either. In
> trying to see exactly what I needed to support I was doing some
> experiments against known data and discovered that Verity has some
> parsing bugs that do not reveal themselves easily. For example:
>
>   title:  "get me out of here, please"
>   queryA: title:((here OR there) NEAR/2 please)
>   queryB: title:(there OR here) NEAR/2 please)
>
> In theory both queries should find the example title, but only queryB
> works with Verity, so something is wrong.
>
> -- Robert
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 13:24:01 2006
Return-Path: <java-user-return-22909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75359 invoked from network); 24 Aug 2006 13:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 13:24:00 -0000
Received: (qmail 65314 invoked by uid 500); 24 Aug 2006 13:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65095 invoked by uid 500); 24 Aug 2006 13:23:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65080 invoked by uid 99); 24 Aug 2006 13:23:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 06:23:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.173.110.23] (HELO mailgw.postbulletin.com) (66.173.110.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 06:23:52 -0700
Received: from TS18 [10.117.240.254] by mailgw.postbulletin.com with ESMTP
  (SMTPD32-8.05) id A853A9F013E; Thu, 24 Aug 2006 08:23:31 -0500
From: "Paul Snyder" <psnyder@postbulletin.com>
To: <java-user@lucene.apache.org>
Subject: RE: DateTools.set-
Date: Thu, 24 Aug 2006 08:21:25 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <Pine.LNX.4.58.0608240012070.31230@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcbHTfaUV8be1dlqSh+dHAGjUiyXywAMEyCg
Message-Id: <20060824082378.SM02072@TS18>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

OK, that being the case, is there a prescribed method for dealing with this?
Does anybody have a "best practice" for me?

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: Thursday, August 24, 2006 2:21 AM
To: java-user@lucene.apache.org
Subject: Re: DateTools.set-


I think the confusion here is that when DateTools looks at a Date object and
a Resolution, it does it's calculations in GMT (so when you ask what "day"
it is at a particular moment, it tells you the current day in GMT, when you
ask which month, it tells you the month in GMT, etc...)

This may seem arbitrary, and it is, but it's fixed like that so that no
matter what Locale your jvm is configured with, you'll get the same results
from an index as everybody else.

If you print the Date object with a robust DateFormatter (instead of the
default toString()) you'll see what i mean.



: Date: Thu, 24 Aug 2006 00:11:17 -0500
: From: Paul Snyder <psnyder@postbulletin.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: DateTools.set-
:
: I have a question about DateTools conversions.  I am having trouble with
: results of trying to store a date truncated to DAY resolution.
:
: Here is an example.
:
:
----------------------------------------------------------------------------
: ----
:
: OK:
:
: DateTools.stringToDate(DateTools.dateToString(new Date("01/12/2006"),
: DateTools.Resolution.SECOND))
: 	 (java.util.Date) Thu Jan 12 00:00:00 CST 2006
:
: NOT OK:
:
: DateTools.stringToDate(DateTools.dateToString(new Date("01/12/2006"),
: DateTools.Resolution.DAY))
: 	 (java.util.Date) Wed Jan 11 18:00:00 CST 2006
:
:
----------------------------------------------------------------------------
: ----
:
: The problem appears to be on the stringToDate conversion.
:
:
----------------------------------------------------------------------------
: ----
:
: OK:
:
: DateTools.dateToString(new Date("01/12/2006"), DateTools.Resolution.DAY)
: 	 (java.lang.String) 20060112
:
: NOT OK:
:
: DateTools.stringToDate("20060112")
: 	 (java.util.Date) Wed Jan 11 18:00:00 CST 2006
:
:
----------------------------------------------------------------------------
: ----
:
: I assume there is something simple I am missing, please, anybody, WHAT?
:
: Local time zone is GMT-0600 (CST)
:
: OS is Redhat E-L 4.
:
: jre is from Sun jdk 1.4
:
: Lucene is lucene-core-2.0.1.jar
:
: Paul Snyder
: Web Programmer
: Post-Bulletin Company, L.L.C.
: Phone (507) 281-7402 Fax (507) 281-7491 TollFree (800) 562-1758
: http://www.postbulletin.com http://www.pbinternetservices.com
: http://www.rochestermn.com
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 13:39:15 2006
Return-Path: <java-user-return-22910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81395 invoked from network); 24 Aug 2006 13:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 13:39:15 -0000
Received: (qmail 96347 invoked by uid 500); 24 Aug 2006 13:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96051 invoked by uid 500); 24 Aug 2006 13:39:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96033 invoked by uid 99); 24 Aug 2006 13:39:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 06:39:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 06:39:07 -0700
Received: by wr-out-0506.google.com with SMTP id i5so135282wra
        for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 06:38:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TET9qY7Cs4vIefNaj0W7Vf3ADt+3HoP7kMmYpDMvdOCz3nqzjwLz2ntqxF/ry3SaOmfhTqPs/NVGjoVIrjpUJbzLLHW3PH5PbBgBKfQPoNM0yDPbjs/AxYag5eUU4GPvkdWAnYWlGVm98MzFW+zvw8LWrf/FYkJioB//kfu1nUs=
Received: by 10.90.100.6 with SMTP id x6mr376272agb;
        Thu, 24 Aug 2006 06:38:46 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Thu, 24 Aug 2006 06:38:46 -0700 (PDT)
Message-ID: <1cbd6f830608240638q45671d98ra93a4449ddaf6ed2@mail.gmail.com>
Date: Thu, 24 Aug 2006 09:38:46 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NoClassDefFoundError
In-Reply-To: <A71E94CA-7A38-4B82-BFFA-613DD2116EEA@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13908_15568234.1156426726757"
References: <1cbd6f830608240458h6220b455mb0ed64de0798970f@mail.gmail.com>
	 <A71E94CA-7A38-4B82-BFFA-613DD2116EEA@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13908_15568234.1156426726757
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thankyou! You are right. Seems like tomcat overwrites my path. I had to
manually move the .jar files into Tomcat's precence.



On 8/24/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> My hunch is you don't have the Lucene JAR in the classpath at runtime.
>
>         Erik
>
>
> On Aug 24, 2006, at 7:58 AM, Mag Gam wrote:
>
> > Hi All,
> >
> > I keep getting this error in my tomcatlogs
> >
> >
> > Aug 24, 2006 7:44:09 AM org.apache.catalina.core.ApplicationContext
> > log
> > INFO: Marking servlet search as unavailable
> > Aug 24, 2006 7:44:09 AM
> > org.apache.catalina.core.StandardWrapperValve invoke
> > SEVERE: Allocate exception for servlet search
> > java.lang.NoClassDefFoundError: org/apache/lucene/queryParser/
> > ParseException
> >        at java.lang.Class.getDeclaredConstructors0(Native Method)
> >        at java.lang.Class.privateGetDeclaredConstructors(Class.java:
> > 2357)
> >        at java.lang.Class.getConstructor0(Class.java:2671)
> >        at java.lang.Class.newInstance0(Class.java:321)
> >        at java.lang.Class.newInstance(Class.java:303)
> >        at org.apache.catalina.core.StandardWrapper.loadServlet(
> > StandardWrapper.java:1048)
> >        at org.apache.catalina.core.StandardWrapper.allocate(
> > StandardWrapper.java:750)
> >        at org.apache.catalina.core.StandardWrapperValve.invoke(
> > StandardWrapperValve.java:130)
> >        at org.apache.catalina.core.StandardContextValve.invoke(
> > StandardContextValve.java:178)
> >        at org.apache.catalina.core.StandardHostValve.invoke(
> > StandardHostValve.java:126)
> >        at org.apache.catalina.valves.ErrorReportValve.invoke(
> > ErrorReportValve.java:105)
> >        at org.apache.catalina.core.StandardEngineValve.invoke(
> > StandardEngineValve.java:107)
> >        at org.apache.catalina.connector.CoyoteAdapter.service(
> > CoyoteAdapter.java:148)
> >        at org.apache.coyote.http11.Http11Processor.process(
> > Http11Processor.java:868)
> >        at
> >
> > org.apache.coyote.http11.Http11BaseProtocol
> > $Http11ConnectionHandler.processConnection
> > (Http11BaseProtocol.java:
> >
> > 663)
> >        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(
> > PoolTcpEndpoint.java:527)
> >        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(
> > LeaderFollowerWorkerThread.java:80)
> >        at org.apache.tomcat.util.threads.ThreadPool
> > $ControlRunnable.run(
> > ThreadPool.java:684)
> >        at java.lang.Thread.run(Thread.java:595)
> >
> >
> >
> >
> > My code works well, in Linux but on Solaris 9 it tanks, I keep
> > getting this
> > exception. Is there anything I can tweak? The code in question I am
> > assuming
> > is this:
> >
> > try
> >
> > {
> >
> > Query query = parser.parse (request.getParameter ("param1"));
> >
> > Hits hits = searcher.search (query);
> >
> > out.println (hits.length () + " results<br><hr>");
> >
> > for (int i = 0; i < hits.length (); i++)
> >
> > {
> >
> > Document doc = hits.doc (i);
> >
> > out.println (doc.get ("path"));
> >
> > out.println ("<br>");
> >
> > }
> >
> > }
> >
> > catch (ParseException pe)
> >
> > {
> >
> > throw new IOException (pe.getMessage ());
> >
> > }
> >
> >
> >
> > Any thoughts?
> >
> > tia
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13908_15568234.1156426726757--

From java-user-return-22911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 13:55:21 2006
Return-Path: <java-user-return-22911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90736 invoked from network); 24 Aug 2006 13:55:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 13:55:21 -0000
Received: (qmail 35893 invoked by uid 500); 24 Aug 2006 13:55:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35871 invoked by uid 500); 24 Aug 2006 13:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35854 invoked by uid 99); 24 Aug 2006 13:55:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 06:55:14 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 06:55:13 -0700
Received: by wr-out-0506.google.com with SMTP id i5so139756wra
        for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 06:54:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ciM3IYWJST//bTm0g9kN3oyl/rR9dtarJ+W537NzdCJYM3rCjeOsBcn/gjcy33U6kETZWaI0fJvRyxwG6uVIammNv12S+dgC4/GyuhOlpjWegqaLpfEHsUgELF0K+qm8k69K8HVPpAQRYZA8Z9GALgBG6oLK4iOl8+6O8/hj39I=
Received: by 10.90.51.17 with SMTP id y17mr379008agy;
        Thu, 24 Aug 2006 06:54:52 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Thu, 24 Aug 2006 06:54:51 -0700 (PDT)
Message-ID: <1cbd6f830608240654u21e8d2fesb68af7678864691a@mail.gmail.com>
Date: Thu, 24 Aug 2006 09:54:52 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Document Get question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14112_15109866.1156427692021"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14112_15109866.1156427692021
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is it possible to get Document Name, instead of its entire path?

Currently, i have something like this:
out.println (doc.get ("path"));   // Which gives me /documents/file.txt

Is it possible to get  "file.txt"

------=_Part_14112_15109866.1156427692021--

From java-user-return-22912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 14:11:29 2006
Return-Path: <java-user-return-22912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97219 invoked from network); 24 Aug 2006 14:11:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 14:11:29 -0000
Received: (qmail 79918 invoked by uid 500); 24 Aug 2006 14:11:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79885 invoked by uid 500); 24 Aug 2006 14:11:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79874 invoked by uid 99); 24 Aug 2006 14:11:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 07:11:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 07:11:17 -0700
Received: from emss09g01.ems.lmco.com (relay6.ems.lmco.com [166.17.13.59])by mailgw3a.lmco.com  (LM-6) with ESMTP id k7OEAt4l009393for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 10:10:56 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3 #31239)
 id <0J4I00701A05FT@lmco.com> for java-user@lucene.apache.org; Thu, 24 Aug 2006 10:09:46 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.3 #31239)
 with ESMTP id <0J4I00MZXA09LV@lmco.com> for java-user@lucene.apache.org; Thu, 24 Aug 2006 10:09:45 -0400 (EDT)
Received: from emss10m02.us.lmco.com ([158.187.0.186]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 24 Aug 2006 10:09:45 -0400
Date: Thu, 24 Aug 2006 10:09:44 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Document Get question
To: java-user@lucene.apache.org
Message-id: <A79A2D741A822A46B9F0BFF4F4585DDB3EC3A4@emss10m02.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: Document Get question
thread-index: AcbHhPR6tgtECRF1S9W642QNzHO5HQAAd7lg
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 24 Aug 2006 14:09:45.0414 (UTC) FILETIME=[F3A94660:01C6C786]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is up to you. What ever you put in the document during indexing
you'll get back. If you'll add a field of just the document name you can
retrieve that, or just parse the file name from the path.

Aviran
http://www.aviransplace.com
 

-----Original Message-----
From: Mag Gam [mailto:magawake@gmail.com] 
Sent: Thursday, August 24, 2006 9:55 AM
To: java-user@lucene.apache.org
Subject: Document Get question

Is it possible to get Document Name, instead of its entire path?

Currently, i have something like this:
out.println (doc.get ("path"));   // Which gives me /documents/file.txt

Is it possible to get  "file.txt"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 14:16:13 2006
Return-Path: <java-user-return-22913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99117 invoked from network); 24 Aug 2006 14:16:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 14:16:13 -0000
Received: (qmail 96695 invoked by uid 500); 24 Aug 2006 14:16:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96660 invoked by uid 500); 24 Aug 2006 14:16:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96649 invoked by uid 99); 24 Aug 2006 14:16:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 07:16:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 07:16:05 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id EC5FFD9E9F5
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 10:15:42 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Thu, 24 Aug 2006 10:15:43 -0400
X-Sasl-enc: TYvvksCKBISR8x6NSAlWeZKKiK5rTygcHF1sVlG1pkLB 1156428942
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id CDB57FAB
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 10:15:42 -0400 (EDT)
Message-ID: <44EDB48C.2000201@mikemccandless.com>
Date: Thu, 24 Aug 2006 10:15:40 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: sharing of Design documents of Lucene
References: <20060824100840.CF89710FB006@asf.osuosl.org>
In-Reply-To: <20060824100840.CF89710FB006@asf.osuosl.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Its nice if someone shares design documents of Lucene with Me.

You could start with the javadocs here:

    http://lucene.apache.org/java/docs/api/index.html

Click on the "Document" class to see some decription for Documents in 
particular.

Or for a broader "get your feet wet" introduction, here:

   http://lucene.apache.org/java/docs/gettingstarted.html

And the FAQ is also helpful:

   http://wiki.apache.org/jakarta-lucene/LuceneFAQ

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 14:22:08 2006
Return-Path: <java-user-return-22914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4353 invoked from network); 24 Aug 2006 14:22:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 14:22:08 -0000
Received: (qmail 12983 invoked by uid 500); 24 Aug 2006 14:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12782 invoked by uid 500); 24 Aug 2006 14:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12764 invoked by uid 99); 24 Aug 2006 14:22:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 07:22:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 07:22:00 -0700
Received: from [10.10.150.11] ([10.10.150.11])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k7OELnxM001981
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 09:21:49 -0500
Message-ID: <44EDB5F2.8000102@wolfram.com>
Date: Thu, 24 Aug 2006 10:21:38 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to combine multiple fields to a single field for indexing
References: <44EC75E0.4050301@wolfram.com> <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com> <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com> <733777220608240005i1fc4b3f7qadb1c47529c5774f@mail.gmail.com> <C5311C92-9CAB-421E-A64F-B8EEAF164503@ehatchersolutions.com>
In-Reply-To: <C5311C92-9CAB-421E-A64F-B8EEAF164503@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for everyone's help. I understand how it works now. I can get rid 
of MultiFieldQueryParser in search.

thanks
suba suresh.


Erik Hatcher wrote:
> Yeah, I used a cruder form by appending all the text together into a 
> single string with a space separator in that LIA example.
> 
> Given the position increment gap between instances of same-named fields 
> that is now part of Lucene, I recommend using multiple field instances 
> instead.
> 
>     Erik
> 
> 
> 
> On Aug 24, 2006, at 3:05 AM, Gopikrishnan Subramani wrote:
>> Erik's has used a space as the field separator. May be you can use a
>> different field separator that your analyzer won't eat up, so that will
>> change the token position by 1.
>>
>> Gopi
>>
>> On 8/24/06, KEGan <khoon.ee.gan@gmail.com> wrote:
>>>
>>> Erik,
>>>
>>> What is generally the reason for indexing both individual fields, and 
>>> the
>>> general-purpose "content" field ?
>>>
>>> Also, if we search in the general-purpose "content" field, wouldnt this
>>> problem occurs. Let say we have 2 fields and the following values:
>>>
>>> name : John Smith
>>> food  : subway sandwich
>>>
>>> So the general-purpose "content" would have the following values:
>>>
>>> John Smith subway sandwich
>>>
>>> Hence, if the user search for "smith subway" (with quotation), the said
>>> document will be returned. On the other hand, if both fields were 
>>> indexed
>>> seperately, this document would not be returned, since there is no field
>>> that contain the value "smith subway".
>>>
>>> How do we go about this problem ?
>>>
>>>
>>> On 8/24/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>> >
>>> >
>>> > On Aug 23, 2006, at 11:36 AM, Suba Suresh wrote:
>>> > > In "Lucene In Action" book it says it is better practice to combine
>>> > > two fields into one field and index it than use the
>>> > > MultiFieldQueryParser. Do I initially index both the fields and
>>> > > then index them again together? When I index them together do I
>>> > > index the fieldnames or values? Can someone give me an example of
>>> > > how to do it?
>>> >
>>> > What I do is simply index all the fields individually that need to be
>>> > searchable or just stored, but also index a general-purpose
>>> > "contents" field with all of that same text.
>>> >
>>> > You can add multiple fields of the same name to a document, making it
>>> > easy to just keep appending to a "contents" field for a document.
>>> > You can see how this is done in the Lucene in Action code in the
>>> > TestDataDocumentHandler.java - however I took a cruder approach and
>>> > appended the fields together with a space in between them rather than
>>> > using the multiple valued field approach.  Either technique will work
>>> > just fine.
>>> >
>>> >        Erik
>>> >
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 14:25:06 2006
Return-Path: <java-user-return-22915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5309 invoked from network); 24 Aug 2006 14:25:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 14:25:05 -0000
Received: (qmail 19624 invoked by uid 500); 24 Aug 2006 14:24:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19598 invoked by uid 500); 24 Aug 2006 14:24:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19582 invoked by uid 99); 24 Aug 2006 14:24:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 07:24:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 07:24:52 -0700
Received: from [10.10.150.11] ([10.10.150.11])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k7OEOeBU002024
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 09:24:41 -0500
Message-ID: <44EDB69D.8000900@wolfram.com>
Date: Thu, 24 Aug 2006 10:24:29 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document Get question
References: <1cbd6f830608240654u21e8d2fesb68af7678864691a@mail.gmail.com>
In-Reply-To: <1cbd6f830608240654u21e8d2fesb68af7678864691a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Index the "filename" when you are indexing as you did the "path". You 
can get it back with doc.get("filename");

suba suresh.

Mag Gam wrote:
> Is it possible to get Document Name, instead of its entire path?
> 
> Currently, i have something like this:
> out.println (doc.get ("path"));   // Which gives me /documents/file.txt
> 
> Is it possible to get  "file.txt"
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 15:09:13 2006
Return-Path: <java-user-return-22916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19476 invoked from network); 24 Aug 2006 15:09:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 15:09:13 -0000
Received: (qmail 599 invoked by uid 500); 24 Aug 2006 15:09:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 569 invoked by uid 500); 24 Aug 2006 15:09:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 555 invoked by uid 99); 24 Aug 2006 15:09:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 08:09:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.238.164.5] (HELO elvira.its.uu.se) (130.238.164.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 08:09:05 -0700
Received: by elvira.its.uu.se (Postfix, from userid 204)
	id 8B03634D; Thu, 24 Aug 2006 17:08:43 +0200 (MSZ)
Received: from elvira.its.uu.se(127.0.0.1) by elvira.its.uu.se via virus-scan 
	id s26684; Thu, 24 Aug 06 17:08:39 +0200
Received: from tyto.its.uu.se (tyto3.its.uu.se [IPv6:2001:6b0:b:1::192])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	by elvira.its.uu.se (Postfix) with ESMTP id AA1933BD
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 17:08:39 +0200 (MSZ)
Received: from localhost ([127.0.0.1])
	by tyto.its.uu.se with esmtp (Exim 4.50)
	id 1GGGox-0001VN-Eh
	for java-user@lucene.apache.org; Thu, 24 Aug 2006 17:08:39 +0200
Received: from c-234de253.16-1-64736c11.cust.bredbandsbolaget.se (c-234de253.16-1-64736c11.cust.bredbandsbolaget.se [83.226.77.35]) 
	by webmail.uu.se (IMP) with HTTP 
	for <rokol669@localhost>; Thu, 24 Aug 2006 15:08:39 +0000
Message-ID: <1156432119.44edc0f76a0cd@webmail.uu.se>
Date: Thu, 24 Aug 2006 15:08:39 +0000
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
To: java-user@lucene.apache.org
Subject: Re: Document Get question
References: <1cbd6f830608240654u21e8d2fesb68af7678864691a@mail.gmail.com>
In-Reply-To: <1cbd6f830608240654u21e8d2fesb68af7678864691a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
User-Agent: Internet Messaging Program (IMP) 3.2.7
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you want to get "file.txt" out of "/documents/file.txt" simply cut of
everything before the last "/":

  String path =3D doc.get("path");
  String name =3D path !=3D null ? path.substring(path.lastIndexOf("/") +=
 1) :
path;

Otherwise, if you want to store only the name in the index, you will have=
 to do
something similar to the above when you create the document field in the
indexing process.

/Ronnie


Citerar Mag Gam <magawake@gmail.com>:

> Is it possible to get Document Name, instead of its entire path?
>=20
> Currently, i have something like this:
> out.println (doc.get ("path"));   // Which gives me /documents/file.txt
>=20
> Is it possible to get  "file.txt"
>=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 15:16:56 2006
Return-Path: <java-user-return-22917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21570 invoked from network); 24 Aug 2006 15:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 15:16:56 -0000
Received: (qmail 13351 invoked by uid 500); 24 Aug 2006 15:16:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13087 invoked by uid 500); 24 Aug 2006 15:16:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13076 invoked by uid 99); 24 Aug 2006 15:16:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 08:16:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [162.129.8.151] (HELO ipex2.johnshopkins.edu) (162.129.8.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 08:16:49 -0700
Received: from atis9nn0d91.monument1.jhmi.edu (HELO ATIS9NN0D91) ([162.129.49.150])
  by ipex2.johnshopkins.edu with SMTP; 24 Aug 2006 11:16:13 -0400
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.08,165,1154923200"; 
   d="scan'208,217"; a="188611773:sNHT44414540"
Message-ID: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu>
Reply-To: "Zhao, Xin" <xzhao@jhu.edu>
From: "Zhao, Xin" <xzhao9@jhmi.edu>
To: <java-user@lucene.apache.org>
Subject: controlled library
Date: Thu, 24 Aug 2006 11:15:25 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_16E6_01C6C76E.990D8D50"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_16E6_01C6C76E.990D8D50
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
I have a design question. Here is what we try to do for indexing:
We designed an indexing tool to generate standard MeSH terms from =
medical citations, and then use Lucene to save the terms and citations =
for future search. The information we need to save are:
a) the exact mesh terms (top 10)
b) the score for each term
so the codings are like
-----------------------------------=20
for the top 10 MeSH Terms
 myField=3DField.Keyword("mesh", mesh.toLowerCase());
 myField.setBoost(score);
 doc.add(myFiled);
end for
------------------------------------
as you could see we generate all the terms under named field "mesh". If =
I understand correctly, all the fields under the same name would =
eventually  save into one field, with all the scores be normalized into =
filed boost. In this case, we wouldn't be able to save separate score, =
so the information is lost. Am I correct? Is there anyway we could =
change it? I understand Lucene is for keyword search, and what we try to =
do is Controlled Vocabulary search, Any other tool we could use?

Thank you,
Xin
 =20

------=_NextPart_000_16E6_01C6C76E.990D8D50--


From java-user-return-22918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 17:07:04 2006
Return-Path: <java-user-return-22918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61255 invoked from network); 24 Aug 2006 17:07:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 17:07:04 -0000
Received: (qmail 74353 invoked by uid 500); 24 Aug 2006 17:06:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74329 invoked by uid 500); 24 Aug 2006 17:06:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74318 invoked by uid 99); 24 Aug 2006 17:06:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 10:06:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 10:06:56 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GGIf5-0002Ld-WA
	for java-user@lucene.apache.org; Thu, 24 Aug 2006 10:06:36 -0700
Message-ID: <5968287.post@talk.nabble.com>
Date: Thu, 24 Aug 2006 10:06:35 -0700 (PDT)
From: AlexeyG <agorokhov@z-techcorp.com>
To: java-user@lucene.apache.org
Subject: Boosting Documents and score calculation
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello,

I ran into some very strange behavior by Lucene 1.9.  Boost factor under 1.3
does not effect the result score!  I wrote a simple test to isolate the
issue:

Writing test index
Creating 3 documents with same KEY and boosts of default, 1.1, 1.2, and 1.3

	public static void writeTestIndex() throws IOException {
		
		// opening index writer
		IndexWriter writer = null;
		writer = new IndexWriter("C:\\a_temp", new StandardAnalyzer(), true);
		
		Document currentDocument = null;
		
		// creating and adding document with DEFAULT boost
		currentDocument = new Document();
		currentDocument.add(new Field("KEY", "AA", Field.Store.YES,
Field.Index.UN_TOKENIZED));
		currentDocument.add(new Field("BOOST_FACTOR", "1", Field.Store.YES,
Field.Index.UN_TOKENIZED));
		writer.addDocument(currentDocument);

		// creating and adding document with 1.1 boost
		currentDocument = new Document();
		currentDocument.add(new Field("KEY", "AA", Field.Store.YES,
Field.Index.UN_TOKENIZED));
		currentDocument.add( new Field("BOOST_FACTOR", "1.1", Field.Store.YES,
Field.Index.UN_TOKENIZED));
		currentDocument.setBoost((float)1.1);
		writer.addDocument(currentDocument);

		// creating and adding document with 1.2 boost
		currentDocument = new Document();
		currentDocument.add(new Field("KEY", "AA", Field.Store.YES,
Field.Index.UN_TOKENIZED));
		currentDocument.add( new Field("BOOST_FACTOR", "1.2", Field.Store.YES,
Field.Index.UN_TOKENIZED));
		currentDocument.setBoost((float)1.2);
		writer.addDocument(currentDocument);
		
		// creating and adding document with 1.3 boost
		currentDocument = new Document();
		currentDocument.add(new Field("KEY", "AA", Field.Store.YES,
Field.Index.UN_TOKENIZED));
		currentDocument.add(new Field("BOOST_FACTOR", "1.3", Field.Store.YES,
Field.Index.UN_TOKENIZED));
		currentDocument.setBoost((float)1.3);
		writer.addDocument(currentDocument);			

		// optimizing and closing IndexWriter
		writer.optimize();
		writer.close();
	}


Test Search
Searching for the KEY value, which is the same in all 4 documents

	public static void testIndex() throws IOException {

		// opening IndexSearcher
		IndexSearcher searcher = null;
		searcher = new IndexSearcher("C:\\a_temp");

		// searching for KEY
		Hits hits = searcher.search(new TermQuery(new Term("KEY", "AA")));

		// listing documents and their BOOST_FACTOR field
		Document doc = null;
		if (null != hits) {
			logger.debug("Listing results: ");
			for (int i = 0; i < hits.length(); i++) {
				doc = hits.doc(i);
				logger.debug("BOOST_FACTOR field: " + doc.get("BOOST_FACTOR") + " Score:
" + hits.score(i));
			}
		}
		
		// closing IndexSearcher
		searcher.close();
	}

Output

BOOST_FACTOR field: 1.3 Score: 0.9710705
BOOST_FACTOR field: 1 Score: 0.7768564
BOOST_FACTOR field: 1.1 Score: 0.7768564
BOOST_FACTOR field: 1.2 Score: 0.7768564

Boost of 1.1 and 1.2 did not effect score for the last 2 documents! 
Document with boost of 1.3 jumped to the top, but the rest were returned in
the order they were added to the index.

What am I missing here?  I thought document score would reflect all levels
of boost, not just 1.3 and above?  Please help.
-- 
View this message in context: http://www.nabble.com/Boosting-Documents-and-score-calculation-tf2159899.html#a5968287
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 20:24:00 2006
Return-Path: <java-user-return-22919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45830 invoked from network); 24 Aug 2006 20:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 20:24:00 -0000
Received: (qmail 25890 invoked by uid 500); 24 Aug 2006 20:22:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25836 invoked by uid 500); 24 Aug 2006 20:22:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25635 invoked by uid 99); 24 Aug 2006 20:22:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:22:31 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gdedian@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 13:22:29 -0700
Received: by ug-out-1314.google.com with SMTP id y2so577262uge
        for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 13:22:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OX3JfSi9oBDvozATXIChuzLXBVCueHO1rIgd0j15JvcxOwBxHLOo4T0qU8Lj5Kxf9X9UNPvc/xtLUpIgz/K1gj/yuKagfUkCTdBnaFxbWzJL4SHLLRuC4/1TJU1Ny5ntM3qoB6/xjb2oApbCRdmmTLCva+BGc9RY4yu0WM6S88w=
Received: by 10.67.93.6 with SMTP id v6mr1378542ugl;
        Thu, 24 Aug 2006 13:22:08 -0700 (PDT)
Received: by 10.67.27.10 with HTTP; Thu, 24 Aug 2006 13:22:08 -0700 (PDT)
Message-ID: <b10f7c0b0608241322p6934a65dndcf56f9e6666c924@mail.gmail.com>
Date: Thu, 24 Aug 2006 13:22:08 -0700
From: "Dedian Guo" <gdedian@gmail.com>
To: java-user@lucene.apache.org, "Zhao, Xin" <xzhao@jhu.edu>
Subject: Re: controlled library
In-Reply-To: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_140221_16146051.1156450928201"
References: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_140221_16146051.1156450928201
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

in my solution, you can apply one doc for each mesh term, or apply different
keyword such as "mesh_1"...."mesh_10" for your top 10 terms...or u can group
your mesh terms as one string then add into a field, which requires a simple
string parser for the group string when you wanna read the terms...

not sure if that works or answers your question...

On 8/24/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
>
> Hi,
> I have a design question. Here is what we try to do for indexing:
> We designed an indexing tool to generate standard MeSH terms from medical
> citations, and then use Lucene to save the terms and citations for future
> search. The information we need to save are:
> a) the exact mesh terms (top 10)
> b) the score for each term
> so the codings are like
> -----------------------------------
> for the top 10 MeSH Terms
> myField=Field.Keyword("mesh", mesh.toLowerCase());
> myField.setBoost(score);
> doc.add(myFiled);
> end for
> ------------------------------------
> as you could see we generate all the terms under named field "mesh". If I
> understand correctly, all the fields under the same name would
> eventually  save into one field, with all the scores be normalized into
> filed boost. In this case, we wouldn't be able to save separate score, so
> the information is lost. Am I correct? Is there anyway we could change it? I
> understand Lucene is for keyword search, and what we try to do is Controlled
> Vocabulary search, Any other tool we could use?
>
> Thank you,
> Xin
>
>
>

------=_Part_140221_16146051.1156450928201--

From java-user-return-22920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 23:04:59 2006
Return-Path: <java-user-return-22920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4508 invoked from network); 24 Aug 2006 23:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:04:59 -0000
Received: (qmail 67805 invoked by uid 500); 24 Aug 2006 23:04:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67710 invoked by uid 500); 24 Aug 2006 23:04:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67698 invoked by uid 99); 24 Aug 2006 23:04:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:04:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:04:49 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7E1065B78C; Thu, 24 Aug 2006 16:04:26 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 785A27F403
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 16:04:26 -0700 (PDT)
Date: Thu, 24 Aug 2006 16:04:26 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boosting Documents and score calculation
In-Reply-To: <5968287.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0608241558200.19535@hal.rescomp.berkeley.edu>
References: <5968287.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


First off, when trying to make sense of socres you should allways use
either HitCollector or one of  the TopDocs methods of the Searcher
interface -- otherwise the "normalize if greater then 1" logic of the Hits
class might confuse you.

Second: Searcher.explain(Query,int) is your friend ... it will help you
understand exactly where your scores are coming from

Third: index time document boosts are folded into the "norm" value for
that field (along with any index time field boosts and the length norm)
... these norms are "encoded" as a single byte, which can result in a loss
of precision, so it wouldn't be too suprising if boosts of 1.0, 1.1,
and 1.2 all encoded as the same value.  (you can use
Similarity.decodeNorm(Similarity.encodeNorm(some_float)) to see exactly
how much precision is lost for any given float value.



: Date: Thu, 24 Aug 2006 10:06:35 -0700 (PDT)
: From: AlexeyG <agorokhov@z-techcorp.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Boosting Documents and score calculation
:
:
: Hello,
:
: I ran into some very strange behavior by Lucene 1.9.  Boost factor under 1.3
: does not effect the result score!  I wrote a simple test to isolate the
: issue:
:
: Writing test index
: Creating 3 documents with same KEY and boosts of default, 1.1, 1.2, and 1.3
:
: 	public static void writeTestIndex() throws IOException {
:
: 		// opening index writer
: 		IndexWriter writer = null;
: 		writer = new IndexWriter("C:\\a_temp", new StandardAnalyzer(), true);
:
: 		Document currentDocument = null;
:
: 		// creating and adding document with DEFAULT boost
: 		currentDocument = new Document();
: 		currentDocument.add(new Field("KEY", "AA", Field.Store.YES,
: Field.Index.UN_TOKENIZED));
: 		currentDocument.add(new Field("BOOST_FACTOR", "1", Field.Store.YES,
: Field.Index.UN_TOKENIZED));
: 		writer.addDocument(currentDocument);
:
: 		// creating and adding document with 1.1 boost
: 		currentDocument = new Document();
: 		currentDocument.add(new Field("KEY", "AA", Field.Store.YES,
: Field.Index.UN_TOKENIZED));
: 		currentDocument.add( new Field("BOOST_FACTOR", "1.1", Field.Store.YES,
: Field.Index.UN_TOKENIZED));
: 		currentDocument.setBoost((float)1.1);
: 		writer.addDocument(currentDocument);
:
: 		// creating and adding document with 1.2 boost
: 		currentDocument = new Document();
: 		currentDocument.add(new Field("KEY", "AA", Field.Store.YES,
: Field.Index.UN_TOKENIZED));
: 		currentDocument.add( new Field("BOOST_FACTOR", "1.2", Field.Store.YES,
: Field.Index.UN_TOKENIZED));
: 		currentDocument.setBoost((float)1.2);
: 		writer.addDocument(currentDocument);
:
: 		// creating and adding document with 1.3 boost
: 		currentDocument = new Document();
: 		currentDocument.add(new Field("KEY", "AA", Field.Store.YES,
: Field.Index.UN_TOKENIZED));
: 		currentDocument.add(new Field("BOOST_FACTOR", "1.3", Field.Store.YES,
: Field.Index.UN_TOKENIZED));
: 		currentDocument.setBoost((float)1.3);
: 		writer.addDocument(currentDocument);
:
: 		// optimizing and closing IndexWriter
: 		writer.optimize();
: 		writer.close();
: 	}
:
:
: Test Search
: Searching for the KEY value, which is the same in all 4 documents
:
: 	public static void testIndex() throws IOException {
:
: 		// opening IndexSearcher
: 		IndexSearcher searcher = null;
: 		searcher = new IndexSearcher("C:\\a_temp");
:
: 		// searching for KEY
: 		Hits hits = searcher.search(new TermQuery(new Term("KEY", "AA")));
:
: 		// listing documents and their BOOST_FACTOR field
: 		Document doc = null;
: 		if (null != hits) {
: 			logger.debug("Listing results: ");
: 			for (int i = 0; i < hits.length(); i++) {
: 				doc = hits.doc(i);
: 				logger.debug("BOOST_FACTOR field: " + doc.get("BOOST_FACTOR") + " Score:
: " + hits.score(i));
: 			}
: 		}
:
: 		// closing IndexSearcher
: 		searcher.close();
: 	}
:
: Output
:
: BOOST_FACTOR field: 1.3 Score: 0.9710705
: BOOST_FACTOR field: 1 Score: 0.7768564
: BOOST_FACTOR field: 1.1 Score: 0.7768564
: BOOST_FACTOR field: 1.2 Score: 0.7768564
:
: Boost of 1.1 and 1.2 did not effect score for the last 2 documents!
: Document with boost of 1.3 jumped to the top, but the rest were returned in
: the order they were added to the index.
:
: What am I missing here?  I thought document score would reflect all levels
: of boost, not just 1.3 and above?  Please help.
: --
: View this message in context: http://www.nabble.com/Boosting-Documents-and-score-calculation-tf2159899.html#a5968287
: Sent from the Lucene - Java Users forum at Nabble.com.
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 23:30:09 2006
Return-Path: <java-user-return-22921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10252 invoked from network); 24 Aug 2006 23:30:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:30:09 -0000
Received: (qmail 99454 invoked by uid 500); 24 Aug 2006 23:30:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99420 invoked by uid 500); 24 Aug 2006 23:30:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99409 invoked by uid 99); 24 Aug 2006 23:30:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:30:03 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.197] (HELO web36405.mail.mud.yahoo.com) (209.191.91.197)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Aug 2006 16:30:03 -0700
Received: (qmail 42123 invoked by uid 60001); 24 Aug 2006 23:29:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=6C9GStWoKsnEaOasF2YUEHg7swqJ+lkPc25imRq6Q3Kvz4sweyZx8m7oOXxj74AN9QcaZjNapjA5+EWTaDHzwwqq0oeeH0pEphvMhq5yU4r63TkPt6oLK1IIknf0GL4oTSRNhWz7iycgq9F1V+CiaMS25yCA98cX0Wr+oTxcE6k=  ;
Message-ID: <20060824232942.42121.qmail@web36405.mail.mud.yahoo.com>
Received: from [24.125.100.254] by web36405.mail.mud.yahoo.com via HTTP; Thu, 24 Aug 2006 16:29:42 PDT
Date: Thu, 24 Aug 2006 16:29:42 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Indexmodifier optimize
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-816681680-1156462182=:39327"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-816681680-1156462182=:39327
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
  I added one record to the index and did flush(), optimize() and close() in that order.
  I had one index file _twca.cfs. After the inserting the document and doing optimization, I have two index files _twca.cfs and _twcf.cfs (both approx. same size) and deletable file having entry for _twca.cfs.
   
  Can anyone help me what could be the problem.
   
  Thanks,
  -Vasu

 				
---------------------------------
Get your own web address for just $1.99/1st yr. We'll help. Yahoo! Small Business.
--0-816681680-1156462182=:39327--

From java-user-return-22922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 23:37:09 2006
Return-Path: <java-user-return-22922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12328 invoked from network); 24 Aug 2006 23:37:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:37:09 -0000
Received: (qmail 6576 invoked by uid 500); 24 Aug 2006 23:37:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6548 invoked by uid 500); 24 Aug 2006 23:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6537 invoked by uid 99); 24 Aug 2006 23:37:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:37:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:37:03 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D6DA05B78C; Thu, 24 Aug 2006 16:36:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B525E7F403
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 16:36:42 -0700 (PDT)
Date: Thu, 24 Aug 2006 16:36:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Indexmodifier optimize
In-Reply-To: <20060824232942.42121.qmail@web36405.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0608241632400.19535@hal.rescomp.berkeley.edu>
References: <20060824232942.42121.qmail@web36405.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

:   I added one record to the index and did flush(), optimize() and close() in that order.
:   I had one index file _twca.cfs. After the inserting the document and doing optimization, I have two index files _twca.cfs and _twcf.cfs (both approx. same size) and deletable file having entry for _twca.cfs.
:
:   Can anyone help me what could be the problem.

this isn't really a problem -- it's the expected behavior in Windows,
where the OS won't let the JVM dleete files that are open (or if i recall
collectly: were closed very recently) ... to deal with this problem,
Lucene makes a note of the file and the next time it's doing
"housekeeping" it tires again to delete it.

(i don't remember when exactly the housekeeping is, but if someone else
knows off the top of their head, it would probably be worthwhile to add
"Why do i have a deletable file after optimizing my index?" to the FAQ
with an explanation including when exactly Lucene will try again)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 23:42:08 2006
Return-Path: <java-user-return-22923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14009 invoked from network); 24 Aug 2006 23:42:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:42:08 -0000
Received: (qmail 11773 invoked by uid 500); 24 Aug 2006 23:41:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11717 invoked by uid 500); 24 Aug 2006 23:41:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11648 invoked by uid 99); 24 Aug 2006 23:41:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:41:54 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.125.35] (HELO web38404.mail.mud.yahoo.com) (209.191.125.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Aug 2006 16:41:53 -0700
Received: (qmail 67792 invoked by uid 60001); 24 Aug 2006 23:41:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=HCAV5R6yi/QHszSKwoCe1sO+SpKgI1DHDXVPQFQxC2ncsnOX5PW6ulkaK9UMPfkgq6t8JZfGxdMK3ZA975KU5VTcTIKAcFe1rk7JNuWZCEckMUaEone4FoHPFfK52H0KSqmEmCqZxwOnpeFZ1WuzYFizhnxmAxx5tRLYSIEhRsY=  ;
Message-ID: <20060824234132.67790.qmail@web38404.mail.mud.yahoo.com>
Received: from [24.125.100.254] by web38404.mail.mud.yahoo.com via HTTP; Thu, 24 Aug 2006 16:41:32 PDT
Date: Thu, 24 Aug 2006 16:41:32 -0700 (PDT)
From: kalpesh patel <kalpesh.modi01@yahoo.com>
Subject: Lucene vs Database Search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-652155934-1156462892=:67555"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-652155934-1156462892=:67555
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  I have an application. It has large number of records around (1.2 million) with a possibility of doubling every year. The average records being added per day is around 3000 distributed over the day. The inserted record has to be searchable immediately once it is entered into the database and the index updated. I have created a Lucene index, and the size is around 0.5 GB. 
   
  The search DOES not require text search. It just includes search by First Name, Last Name, Employee ID.
   
  What would be better solution in the existing situation and long run? Keeping all the searchable records in one database table (issuing a select query against one table) or using Lucene index.
   
  Thanks in advance.
   
  -Kalpesh

 		
---------------------------------
How low will we go? Check out Yahoo! Messenger’s low  PC-to-Phone call rates.
--0-652155934-1156462892=:67555--

From java-user-return-22924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 24 23:58:54 2006
Return-Path: <java-user-return-22924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25109 invoked from network); 24 Aug 2006 23:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2006 23:58:54 -0000
Received: (qmail 56183 invoked by uid 500); 24 Aug 2006 23:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56148 invoked by uid 500); 24 Aug 2006 23:58:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56137 invoked by uid 99); 24 Aug 2006 23:58:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:58:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 16:58:48 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C31285B78C; Thu, 24 Aug 2006 16:58:23 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BE05F7F403
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 16:58:23 -0700 (PDT)
Date: Thu, 24 Aug 2006 16:58:23 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: DateTools.set-
In-Reply-To: <20060824082378.SM02072@TS18>
Message-ID: <Pine.LNX.4.58.0608241637020.19535@hal.rescomp.berkeley.edu>
References: <20060824082378.SM02072@TS18>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: OK, that being the case, is there a prescribed method for dealing with this?
: Does anybody have a "best practice" for me?

It depends on how/why you see it as a problem.

If all you want to do is sort on the date - you have no problem, they will
sort correctly.

If you want to display the date - Store the date with the value you want
to display, index the date using DateTools

If you want to use the dates in RangeFilters - Tell your users to "think
globally" :) ... or use a finer level of granularity (ie: hours) to
decrease the suprising descrepency.

or you can just use your own DateFormat with the TimeZone set to whatever
you want.

(In Solr, we just said "screw imprecision, screw ambiguity" and defined a
DateField using the XML schema part 2 dateTime specification; with
mandatory franctional seconds in UTC -- so clients allways know what to
expect ... that doesn't mean less precise field types can't be defined
later, just that we wanted the defaut to handle every possibility)


:
: -----Original Message-----
: From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
: Sent: Thursday, August 24, 2006 2:21 AM
: To: java-user@lucene.apache.org
: Subject: Re: DateTools.set-
:
:
: I think the confusion here is that when DateTools looks at a Date object and
: a Resolution, it does it's calculations in GMT (so when you ask what "day"
: it is at a particular moment, it tells you the current day in GMT, when you
: ask which month, it tells you the month in GMT, etc...)
:
: This may seem arbitrary, and it is, but it's fixed like that so that no
: matter what Locale your jvm is configured with, you'll get the same results
: from an index as everybody else.
:
: If you print the Date object with a robust DateFormatter (instead of the
: default toString()) you'll see what i mean.
:
:
:
: : Date: Thu, 24 Aug 2006 00:11:17 -0500
: : From: Paul Snyder <psnyder@postbulletin.com>
: : Reply-To: java-user@lucene.apache.org
: : To: java-user@lucene.apache.org
: : Subject: DateTools.set-
: :
: : I have a question about DateTools conversions.  I am having trouble with
: : results of trying to store a date truncated to DAY resolution.
: :
: : Here is an example.
: :
: :
: ----------------------------------------------------------------------------
: : ----
: :
: : OK:
: :
: : DateTools.stringToDate(DateTools.dateToString(new Date("01/12/2006"),
: : DateTools.Resolution.SECOND))
: : 	 (java.util.Date) Thu Jan 12 00:00:00 CST 2006
: :
: : NOT OK:
: :
: : DateTools.stringToDate(DateTools.dateToString(new Date("01/12/2006"),
: : DateTools.Resolution.DAY))
: : 	 (java.util.Date) Wed Jan 11 18:00:00 CST 2006
: :
: :
: ----------------------------------------------------------------------------
: : ----
: :
: : The problem appears to be on the stringToDate conversion.
: :
: :
: ----------------------------------------------------------------------------
: : ----
: :
: : OK:
: :
: : DateTools.dateToString(new Date("01/12/2006"), DateTools.Resolution.DAY)
: : 	 (java.lang.String) 20060112
: :
: : NOT OK:
: :
: : DateTools.stringToDate("20060112")
: : 	 (java.util.Date) Wed Jan 11 18:00:00 CST 2006
: :
: :
: ----------------------------------------------------------------------------
: : ----
: :
: : I assume there is something simple I am missing, please, anybody, WHAT?
: :
: : Local time zone is GMT-0600 (CST)
: :
: : OS is Redhat E-L 4.
: :
: : jre is from Sun jdk 1.4
: :
: : Lucene is lucene-core-2.0.1.jar
: :
: : Paul Snyder
: : Web Programmer
: : Post-Bulletin Company, L.L.C.
: : Phone (507) 281-7402 Fax (507) 281-7491 TollFree (800) 562-1758
: : http://www.postbulletin.com http://www.pbinternetservices.com
: : http://www.rochestermn.com
: :
: :
: :
: : ---------------------------------------------------------------------
: : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: : For additional commands, e-mail: java-user-help@lucene.apache.org
: :
:
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 00:14:02 2006
Return-Path: <java-user-return-22925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28869 invoked from network); 25 Aug 2006 00:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 00:14:02 -0000
Received: (qmail 73574 invoked by uid 500); 25 Aug 2006 00:13:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73529 invoked by uid 500); 25 Aug 2006 00:13:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73512 invoked by uid 99); 25 Aug 2006 00:13:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 17:13:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 17:13:55 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 0C353D9E701
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 20:13:33 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Thu, 24 Aug 2006 20:13:34 -0400
X-Sasl-enc: YhJQfoihzrUGVdKO0nEqvyzakyKaosHv8JJoV/j+9R63 1156464814
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 17707103A
	for <java-user@lucene.apache.org>; Thu, 24 Aug 2006 20:13:33 -0400 (EDT)
Message-ID: <44EE40AB.8080406@mikemccandless.com>
Date: Thu, 24 Aug 2006 20:13:31 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexmodifier optimize
References: <20060824232942.42121.qmail@web36405.mail.mud.yahoo.com> <Pine.LNX.4.58.0608241632400.19535@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0608241632400.19535@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:
> :   I added one record to the index and did flush(), optimize() and close() in that order.
> :   I had one index file _twca.cfs. After the inserting the document and doing optimization, I have two index files _twca.cfs and _twcf.cfs (both approx. same size) and deletable file having entry for _twca.cfs.
> :
> :   Can anyone help me what could be the problem.
> 
> this isn't really a problem -- it's the expected behavior in Windows,
> where the OS won't let the JVM dleete files that are open (or if i recall
> collectly: were closed very recently) ... to deal with this problem,
> Lucene makes a note of the file and the next time it's doing
> "housekeeping" it tires again to delete it.
> 
> (i don't remember when exactly the housekeeping is, but if someone else
> knows off the top of their head, it would probably be worthwhile to add
> "Why do i have a deletable file after optimizing my index?" to the FAQ
> with an explanation including when exactly Lucene will try again)

I'll update the FAQ with this.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 06:29:45 2006
Return-Path: <java-user-return-22926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24360 invoked from network); 25 Aug 2006 06:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 06:29:45 -0000
Received: (qmail 74488 invoked by uid 500); 25 Aug 2006 06:29:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74454 invoked by uid 500); 25 Aug 2006 06:29:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74443 invoked by uid 99); 25 Aug 2006 06:29:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 23:29:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.39.31.158] (HELO zeus.atlassian.com) (64.39.31.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Aug 2006 23:29:37 -0700
Received: from [192.168.0.36] ([203.14.171.190])
	(authenticated (0 bits))
	by zeus.atlassian.com (8.12.11.20060308/8.11.6) with ESMTP id k7P6TFuU025860
	for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 01:29:16 -0500
Message-ID: <44EE98FC.7070505@atlassian.com>
Date: Fri, 25 Aug 2006 16:30:20 +1000
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Upgrade from 1.4.3 to 1.9.1. Any problems with using existing index
 files?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

We are upgrading from Lucene 1.4.3 to 1.9.1, and have many customers 
with large existing index files. In our testing we have reused large 
indexes created in 1.4.3 in 1.9.1 without incident. We have looked 
through the changelog and the code and can't see any reason there should 
be any problems doing so.

So, we're just wondering, has anyone had any problems, or is there 
anything we need to look out for?

-- 
cheers,
- jed.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 07:48:30 2006
Return-Path: <java-user-return-22927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60708 invoked from network); 25 Aug 2006 07:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 07:48:30 -0000
Received: (qmail 84931 invoked by uid 500); 25 Aug 2006 07:48:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84907 invoked by uid 500); 25 Aug 2006 07:48:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84891 invoked by uid 99); 25 Aug 2006 07:48:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 00:48:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 00:48:20 -0700
Received: by py-out-1112.google.com with SMTP id w49so934080pyg
        for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 00:47:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WoKfUgKkgu9FRJruGSCL70mV29oM7fYtP+QsUwB4wz2om4GJzI1i3h8+e56nwE3/5RC69cNr4l78OmopawDOMXbbVW5YmSiiI2RlUN15V2u3r08vYLf7kxDpfdDJvBP77IMUynyD2udUludiz7hLDEIB8yCinIKIfEjJzmkg3Oc=
Received: by 10.64.193.9 with SMTP id q9mr3294723qbf;
        Fri, 25 Aug 2006 00:47:58 -0700 (PDT)
Received: by 10.65.83.3 with HTTP; Fri, 25 Aug 2006 00:47:58 -0700 (PDT)
Message-ID: <a218b3050608250047h394e6517ra4dd29cde3e11a21@mail.gmail.com>
Date: Fri, 25 Aug 2006 09:47:58 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org, ab@getopt.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
In-Reply-To: <44BF38DB.3060503@getopt.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89602_11234022.1156492078502"
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>
	 <200607182058.56551.nicolas.lalevee@anyware-tech.com>
	 <a218b3050607190332k71f5942cjcd8f6565e403daff@mail.gmail.com>
	 <200607191259.29548.nicolas.lalevee@anyware-tech.com>
	 <a218b3050607200031x62d9d695ub10db8d642c274ca@mail.gmail.com>
	 <44BF38DB.3060503@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_89602_11234022.1156492078502
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Andrzej,

a month ago you mentioned a new Lucene 2.0 compatible Version of luke.
Does it exist somewhere?

Thanks
lude


On 7/20/06, Andrzej Bialecki <ab@getopt.org> wrote:
>
> lude wrote:
> >> As Luke was release with a Lucene-1.9 ....
> >
> > Where did you get this information? From all I know Luke is based on
> > Lucene
> > Version 1.4.3.
> >
>
> The latest version of Luke was released with an early snapshot of 1.9. I
> plan to release a 2.0-based version in a few days.
>
> --
> Best regards,
> Andrzej Bialecki     <><
> ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_89602_11234022.1156492078502--

From java-user-return-22928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 08:22:55 2006
Return-Path: <java-user-return-22928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72059 invoked from network); 25 Aug 2006 08:22:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 08:22:54 -0000
Received: (qmail 40976 invoked by uid 500); 25 Aug 2006 08:22:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40952 invoked by uid 500); 25 Aug 2006 08:22:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40941 invoked by uid 99); 25 Aug 2006 08:22:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 01:22:47 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gopi.subramani@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 01:22:46 -0700
Received: by py-out-1112.google.com with SMTP id s49so975928pyc
        for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 01:22:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eXGvBH9kTYYqmKME52U3KC/vv1E7gI8qmpY2fXYwa9+pKZS5Eqb8G6OSE5pMHGZhpLgd55EfRt2pP/k52NjpYYVz4F2E2lq8OZg9TLSdTqQfu6I3TNibHIcua1hJtcSmcJuQg/KX1poikpbQ2dbmDiKq9h/EmyORMSm4DR3qqCo=
Received: by 10.65.251.1 with SMTP id d1mr3293831qbs;
        Fri, 25 Aug 2006 01:22:26 -0700 (PDT)
Received: by 10.65.51.3 with HTTP; Fri, 25 Aug 2006 01:22:21 -0700 (PDT)
Message-ID: <733777220608250122v764949fj9d7cc87be33edfc0@mail.gmail.com>
Date: Fri, 25 Aug 2006 13:52:21 +0530
From: "Gopikrishnan Subramani" <gopi.subramani@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
In-Reply-To: <a218b3050608250047h394e6517ra4dd29cde3e11a21@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101129_18813465.1156494141315"
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>
	 <200607182058.56551.nicolas.lalevee@anyware-tech.com>
	 <a218b3050607190332k71f5942cjcd8f6565e403daff@mail.gmail.com>
	 <200607191259.29548.nicolas.lalevee@anyware-tech.com>
	 <a218b3050607200031x62d9d695ub10db8d642c274ca@mail.gmail.com>
	 <44BF38DB.3060503@getopt.org>
	 <a218b3050608250047h394e6517ra4dd29cde3e11a21@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_101129_18813465.1156494141315
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Not sure if it helps, but I have been using Luke (webstart version) from
it's website for quite sometime now for inspecting and manipulating my
indexes built using Lucene 2.0. I may not be a power user of Luke in that
sense, but I haven't found any issues using the basic features.

Gopi


On 8/25/06, lude <lucene.developer@googlemail.com> wrote:
>
> Hi Andrzej,
>
> a month ago you mentioned a new Lucene 2.0 compatible Version of luke.
> Does it exist somewhere?
>
> Thanks
> lude
>
>
> On 7/20/06, Andrzej Bialecki <ab@getopt.org> wrote:
> >
> > lude wrote:
> > >> As Luke was release with a Lucene-1.9 ....
> > >
> > > Where did you get this information? From all I know Luke is based on
> > > Lucene
> > > Version 1.4.3.
> > >
> >
> > The latest version of Luke was released with an early snapshot of 1.9. I
> > plan to release a 2.0-based version in a few days.
> >
> > --
> > Best regards,
> > Andrzej Bialecki     <><
> > ___. ___ ___ ___ _ _   __________________________________
> > [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> > ___|||__||  \|  ||  |  Embedded Unix, System Integration
> > http://www.sigram.com  Contact: info at sigram dot com
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_101129_18813465.1156494141315--

From java-user-return-22929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 11:25:48 2006
Return-Path: <java-user-return-22929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42016 invoked from network); 25 Aug 2006 11:25:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 11:25:46 -0000
Received: (qmail 91253 invoked by uid 500); 25 Aug 2006 11:25:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91219 invoked by uid 500); 25 Aug 2006 11:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91207 invoked by uid 99); 25 Aug 2006 11:25:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 04:25:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 04:25:39 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 707F2D9E73F
	for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 07:25:18 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Fri, 25 Aug 2006 07:25:19 -0400
X-Sasl-enc: HRhoj2mtGXbRC+y8xNQ0fPylhwGeudr25EJRDFEAuRI4 1156505118
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id C1FB6F04
	for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 07:25:18 -0400 (EDT)
Message-ID: <44EEDE14.7090504@mikemccandless.com>
Date: Fri, 25 Aug 2006 07:25:08 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Upgrade from 1.4.3 to 1.9.1. Any problems with using existing
 index files?
References: <44EE98FC.7070505@atlassian.com>
In-Reply-To: <44EE98FC.7070505@atlassian.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> We are upgrading from Lucene 1.4.3 to 1.9.1, and have many customers 
> with large existing index files. In our testing we have reused large 
> indexes created in 1.4.3 in 1.9.1 without incident. We have looked 
> through the changelog and the code and can't see any reason there should 
> be any problems doing so.
> 
> So, we're just wondering, has anyone had any problems, or is there 
> anything we need to look out for?

Looking at the code and also at the file formats specification:

   http://lucene.apache.org/java/docs/fileformats.html

I believe this is completely fine.  Meaning, the 1.9.x code can open the 
older index format for both searching and writing (either deletes or 
added docs), without issue.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 11:44:31 2006
Return-Path: <java-user-return-22930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55654 invoked from network); 25 Aug 2006 11:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 11:44:31 -0000
Received: (qmail 23924 invoked by uid 500); 25 Aug 2006 11:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23891 invoked by uid 500); 25 Aug 2006 11:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23879 invoked by uid 99); 25 Aug 2006 11:44:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 04:44:25 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 04:44:24 -0700
Received: by wx-out-0506.google.com with SMTP id s15so804427wxc
        for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 04:44:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=T8VUKD8dJ8M2PC5qWdihehMPspI/Eb79QOh/FUxSPPx8S3vW/zgKl8dWRJ5QChjw9h35vLNAoRdwVvBBys7mwUkOiIS1UH0v3sNRim9TOjQzxm7Mc4k6TZhmQALSnSpmO9BccIrmSANzIG7jTCPmpwKC7DFhx3ndbriYgmaGv2E=
Received: by 10.90.117.11 with SMTP id p11mr520487agc;
        Fri, 25 Aug 2006 04:44:03 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Fri, 25 Aug 2006 04:44:03 -0700 (PDT)
Message-ID: <1cbd6f830608250444t5978788cs7045b76a2086192b@mail.gmail.com>
Date: Fri, 25 Aug 2006 07:44:03 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Index Stat Functions
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2896_24890468.1156506243711"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2896_24890468.1156506243711
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I am trying to get some stats on my Index such as:

1) When it was created
2) Size in MB of the index
3) If I can get the size, date of each file in the index. For example: I
index 100 files, is it possible for me to get their name, size, and date
when the last modification of that file (similar to a unix "ls -la
/path/to/file)

tia

------=_Part_2896_24890468.1156506243711--

From java-user-return-22931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 13:27:26 2006
Return-Path: <java-user-return-22931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98587 invoked from network); 25 Aug 2006 13:27:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 13:27:26 -0000
Received: (qmail 95068 invoked by uid 500); 25 Aug 2006 13:27:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95049 invoked by uid 500); 25 Aug 2006 13:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95038 invoked by uid 99); 25 Aug 2006 13:27:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 06:27:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 06:27:17 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k7PDQtjt028959
	for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 15:26:55 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 7BA2B8BA0E
	for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 15:26:55 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 20443-08 for <java-user@lucene.apache.org>;
 Fri, 25 Aug 2006 15:26:54 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 4BBF78B9C4
	for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 15:26:54 +0200 (CEST)
Message-ID: <44EEFA8E.7040401@uni-hd.de>
Date: Fri, 25 Aug 2006 15:26:38 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: what do i get with FieldCache.DEFAULT.getStrings(...);
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hello,
I am using FieldCache.DEFAULT.getStrings in combination with an own
HitCollector (I loop through all results and count the number of
occurences of a fieldvalue in the results).

My Problem is that I have Filed values like dt.|lat or ger.|eng. an it
seems that only the last token of the fields value is stored in the
returned array of FieldCache.DEFAULT.getStrings(is.getIndexReader(),
category).

But both values are Stored in the Index (I can find dt. and lat.)

The same issue is with another field which contains the word cd-rom an I
get only "rom" back.

Is this an Analyzer Problem? How do I get all tokens?



tia,
martin




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 14:22:06 2006
Return-Path: <java-user-return-22932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21367 invoked from network); 25 Aug 2006 14:22:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 14:22:06 -0000
Received: (qmail 3866 invoked by uid 500); 25 Aug 2006 14:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3645 invoked by uid 500); 25 Aug 2006 14:21:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3621 invoked by uid 99); 25 Aug 2006 14:21:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:21:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [162.129.8.151] (HELO ipex2.johnshopkins.edu) (162.129.8.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:21:58 -0700
Received: from atis9nn0d91.monument1.jhmi.edu (HELO ATIS9NN0D91) ([162.129.49.150])
  by ipex2.johnshopkins.edu with SMTP; 25 Aug 2006 10:22:15 -0400
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.08,168,1154923200"; 
   d="scan'208"; a="189109192:sNHT36451298"
Message-ID: <207101c6c851$d24e4990$963181a2@win.ad.jhu.edu>
Reply-To: "Zhao, Xin" <xzhao@jhu.edu>
From: "Zhao, Xin" <xzhao9@jhmi.edu>
To: <java-user@lucene.apache.org>
References: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu> <b10f7c0b0608241322p6934a65dndcf56f9e6666c924@mail.gmail.com>
Subject: Re: controlled vocabulary
Date: Fri, 25 Aug 2006 10:21:57 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
Thank you for your reply. I had thought about the first two solutions 
before. If we apply one doc for each MeSH term, it would be 26 docs for each 
item digested(we actually need the top 25 MeSH terms generated), would it be 
any problem if there are too many documents? If we apply field name like 
"mesh_1", "mesh_2"..., when it comes to search, we will have to generate a 
loop for each single one of the query terms( there will be more than 20-30 
terms on average, since we are using sematic web to implement concept 
search), do you think it would affect the performance in a very bad way?
Regards,
Xin


----- Original Message ----- 
From: "Dedian Guo" <gdedian@gmail.com>
To: <java-user@lucene.apache.org>; "Zhao, Xin" <xzhao@jhu.edu>
Sent: Thursday, August 24, 2006 4:22 PM
Subject: Re: controlled library


> in my solution, you can apply one doc for each mesh term, or apply 
> different
> keyword such as "mesh_1"...."mesh_10" for your top 10 terms...or u can 
> group
> your mesh terms as one string then add into a field, which requires a 
> simple
> string parser for the group string when you wanna read the terms...
>
> not sure if that works or answers your question...
>
> On 8/24/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
>>
>> Hi,
>> I have a design question. Here is what we try to do for indexing:
>> We designed an indexing tool to generate standard MeSH terms from medical
>> citations, and then use Lucene to save the terms and citations for future
>> search. The information we need to save are:
>> a) the exact mesh terms (top 10)
>> b) the score for each term
>> so the codings are like
>> -----------------------------------
>> for the top 10 MeSH Terms
>> myField=Field.Keyword("mesh", mesh.toLowerCase());
>> myField.setBoost(score);
>> doc.add(myFiled);
>> end for
>> ------------------------------------
>> as you could see we generate all the terms under named field "mesh". If I
>> understand correctly, all the fields under the same name would
>> eventually  save into one field, with all the scores be normalized into
>> filed boost. In this case, we wouldn't be able to save separate score, so
>> the information is lost. Am I correct? Is there anyway we could change 
>> it? I
>> understand Lucene is for keyword search, and what we try to do is 
>> Controlled
>> Vocabulary search, Any other tool we could use?
>>
>> Thank you,
>> Xin
>>
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 14:22:46 2006
Return-Path: <java-user-return-22933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21693 invoked from network); 25 Aug 2006 14:22:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 14:22:46 -0000
Received: (qmail 6048 invoked by uid 500); 25 Aug 2006 14:22:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6023 invoked by uid 500); 25 Aug 2006 14:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5999 invoked by uid 99); 25 Aug 2006 14:22:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:22:36 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:22:34 -0700
Received: by wx-out-0506.google.com with SMTP id s15so847646wxc
        for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 07:22:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DQIOO9grQYa6TLgtr8M2EpYJA2t0wBvlxdKLg6lnCB0mqT5PWVgGFj8JVvu/09LvCPYU3XSQ+OiniutS5862dHE4bKWB5QtJvDosbyxJwvl223ArWHqhG7N+0wwMBJEjAKosQJP9/ziNQh2FJvTRSt74z9LUih/RM1fszqGSJyY=
Received: by 10.90.25.9 with SMTP id 9mr576568agy;
        Fri, 25 Aug 2006 07:22:13 -0700 (PDT)
Received: by 10.90.68.19 with HTTP; Fri, 25 Aug 2006 07:22:13 -0700 (PDT)
Message-ID: <6e3ae6310608250722g7323b6bfs4f98180220bc45e5@mail.gmail.com>
Date: Fri, 25 Aug 2006 07:22:13 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene vs Database Search
In-Reply-To: <20060824234132.67790.qmail@web38404.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060824234132.67790.qmail@web38404.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Performance wise, Lucene search is much faster for full-text search.
If you only do "Employee ID" search, or exact match of Names,
database's search can do a good job already.

If it's regarding the index maintenance, you should have a updated_at
column for each record, and select the latest records out. And do an
"update" to the index periodically.

Chris Lu
-------------------------------------------------
Lucene Search for Any Databases/Applications
http://www.dbsight.net

On 8/24/06, kalpesh patel <kalpesh.modi01@yahoo.com> wrote:
> Hi,
>
>   I have an application. It has large number of records around (1.2 million) with a possibility of doubling every year. The average records being added per day is around 3000 distributed over the day. The inserted record has to be searchable immediately once it is entered into the database and the index updated. I have created a Lucene index, and the size is around 0.5 GB.
>
>   The search DOES not require text search. It just includes search by First Name, Last Name, Employee ID.
>
>   What would be better solution in the existing situation and long run? Keeping all the searchable records in one database table (issuing a select query against one table) or using Lucene index.
>
>   Thanks in advance.
>
>   -Kalpesh
>
>
> ---------------------------------
> How low will we go? Check out Yahoo! Messenger's low  PC-to-Phone call rates.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 14:27:20 2006
Return-Path: <java-user-return-22934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23490 invoked from network); 25 Aug 2006 14:27:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 14:27:20 -0000
Received: (qmail 19704 invoked by uid 500); 25 Aug 2006 14:27:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19684 invoked by uid 500); 25 Aug 2006 14:27:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19673 invoked by uid 99); 25 Aug 2006 14:27:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:27:13 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:27:13 -0700
Received: by wx-out-0506.google.com with SMTP id s15so848970wxc
        for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 07:26:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=a8CyG6CNVE2jUIpG6zlydC6y3LCs5GP7ATFIUXmgtA8FYh2jITxu9mDKnHo4tFqnSJA5qMgdIIw1TAjLPskdN20cGgimVEldzWQgE4JP6w/jGU08LYm67AOauDtXhM0M8xZ10UPoP79PqJwLqWj3l7eyQrYxN4neUuMnhBHZIMQ=
Received: by 10.90.100.6 with SMTP id x6mr580231agb;
        Fri, 25 Aug 2006 07:26:52 -0700 (PDT)
Received: by 10.90.68.19 with HTTP; Fri, 25 Aug 2006 07:26:51 -0700 (PDT)
Message-ID: <6e3ae6310608250726u5c5014dcnbe667105db10447a@mail.gmail.com>
Date: Fri, 25 Aug 2006 07:26:51 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: what do i get with FieldCache.DEFAULT.getStrings(...);
In-Reply-To: <44EEFA8E.7040401@uni-hd.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44EEFA8E.7040401@uni-hd.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not sure of the solution though. But FieldCache.DEFAULT.getStrings()
is returning a String[], with one String for each document. Seems your
field is analyzed into multiple String values.

Chris Lu
-------------------------------------------------------
Lucene Search on Any Databases/Applications
http://www.dbsight.net

On 8/25/06, Martin Braun <mbraun@uni-hd.de> wrote:
> hello,
> I am using FieldCache.DEFAULT.getStrings in combination with an own
> HitCollector (I loop through all results and count the number of
> occurences of a fieldvalue in the results).
>
> My Problem is that I have Filed values like dt.|lat or ger.|eng. an it
> seems that only the last token of the fields value is stored in the
> returned array of FieldCache.DEFAULT.getStrings(is.getIndexReader(),
> category).
>
> But both values are Stored in the Index (I can find dt. and lat.)
>
> The same issue is with another field which contains the word cd-rom an I
> get only "rom" back.
>
> Is this an Analyzer Problem? How do I get all tokens?
>
>
>
> tia,
> martin
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 14:44:52 2006
Return-Path: <java-user-return-22935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29712 invoked from network); 25 Aug 2006 14:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 14:44:51 -0000
Received: (qmail 58325 invoked by uid 500); 25 Aug 2006 14:44:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58300 invoked by uid 500); 25 Aug 2006 14:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58289 invoked by uid 99); 25 Aug 2006 14:44:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:44:44 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.224.152] (HELO mail.masterfile.com) (205.207.224.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:44:43 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.masterfile.com (Postfix) with ESMTP id CD5D58655D9;
	Fri, 25 Aug 2006 10:44:22 -0400 (EDT)
Received: from [127.0.0.1] (unknown [172.16.8.63])
	by mail.masterfile.com (Postfix) with ESMTP id C614C84E17C
	for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 10:44:22 -0400 (EDT)
Message-ID: <44EF0CC6.4010700@masterfile.com>
Date: Fri, 25 Aug 2006 10:44:22 -0400
From: Rupinder Singh Mazara <rmazara@masterfile.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: WIll storing  docs affect lucene's search performance ?
References: <44DC80FB.1030401@aol.com> <917EE8D7-D5F6-4AC1-BB6E-FADD253EE655@syr.edu>
In-Reply-To: <917EE8D7-D5F6-4AC1-BB6E-FADD253EE655@syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Where can I find information which version / tag to checkout so as to
get the lazy loading verity of lucene


Grant Ingersoll wrote:
>
> Large stored fields can affect performance when you are iterating over 
> your hits (assuming you are not interested in the value of the stored 
> field at that point in time) for a results display since all Fields 
> are loaded when getting the Document.  The SVN trunk has a version of 
> lazy loading that allows you to specify which fields are loaded and 
> which ones are lazy, so you can avoid loading fields that a user will 
> never view.
>
> -Grant
>
> On Aug 11, 2006, at 9:07 AM, Prasenjit Mukherjee wrote:
>
>> I have a requirement ( use highlighter) to  store the doc content 
>> somewhere., and I am not allowed to use a RDBMS. I am thinking of 
>> using Lucene's Field with (Field.Store.YES and Field.Index.NO) to 
>> store the doc content. Will it have any negative affect on my search 
>> performance ?
>> I think I have read somewhere that  Lucene shouldn't be used(or 
>> misused)  to provide RDBMS like storage.
>>
>> --prasen
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
> Voice: 315-443-5484
> Skype: grant_ingersoll
> Fax: 315-443-6886
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 14:50:08 2006
Return-Path: <java-user-return-22936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30899 invoked from network); 25 Aug 2006 14:50:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 14:50:08 -0000
Received: (qmail 64413 invoked by uid 500); 25 Aug 2006 14:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64376 invoked by uid 500); 25 Aug 2006 14:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64365 invoked by uid 99); 25 Aug 2006 14:50:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:50:02 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.224.152] (HELO mail.masterfile.com) (205.207.224.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 07:50:01 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.masterfile.com (Postfix) with ESMTP id E2E9486CEE6;
	Fri, 25 Aug 2006 10:49:40 -0400 (EDT)
Received: from [127.0.0.1] (unknown [172.16.8.63])
	by mail.masterfile.com (Postfix) with ESMTP id DBA6181405C
	for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 10:49:40 -0400 (EDT)
Message-ID: <44EF0E04.50308@masterfile.com>
Date: Fri, 25 Aug 2006 10:49:40 -0400
From: Rupinder Singh Mazara <rmazara@masterfile.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: controlled vocabulary
References: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu> <b10f7c0b0608241322p6934a65dndcf56f9e6666c924@mail.gmail.com> <207101c6c851$d24e4990$963181a2@win.ad.jhu.edu>
In-Reply-To: <207101c6c851$d24e4990$963181a2@win.ad.jhu.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi Xin

  this is take a look at this you can add multiple fields with the name 
mesh
for ( i=0; i< meshList.size() ; i++ ){
    meshTerm = meshList.get(i)
  document.addField( new Field( "mesh", meshTerm.semanticWebConceptId, 
Field.Store.YES , Field.Index.NO_NORMS  );
}

  when querying this index, create a analyzer that infers the text 
string and generates id's that correspond to the mesh term in the 
semantic web

 
 
Zhao, Xin wrote:
> Hi,
> Thank you for your reply. I had thought about the first two solutions 
> before. If we apply one doc for each MeSH term, it would be 26 docs 
> for each item digested(we actually need the top 25 MeSH terms 
> generated), would it be any problem if there are too many documents? 
> If we apply field name like "mesh_1", "mesh_2"..., when it comes to 
> search, we will have to generate a loop for each single one of the 
> query terms( there will be more than 20-30 terms on average, since we 
> are using sematic web to implement concept search), do you think it 
> would affect the performance in a very bad way?
> Regards,
> Xin
>
>
> ----- Original Message ----- From: "Dedian Guo" <gdedian@gmail.com>
> To: <java-user@lucene.apache.org>; "Zhao, Xin" <xzhao@jhu.edu>
> Sent: Thursday, August 24, 2006 4:22 PM
> Subject: Re: controlled library
>
>
>> in my solution, you can apply one doc for each mesh term, or apply 
>> different
>> keyword such as "mesh_1"...."mesh_10" for your top 10 terms...or u 
>> can group
>> your mesh terms as one string then add into a field, which requires a 
>> simple
>> string parser for the group string when you wanna read the terms...
>>
>> not sure if that works or answers your question...
>>
>> On 8/24/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
>>>
>>> Hi,
>>> I have a design question. Here is what we try to do for indexing:
>>> We designed an indexing tool to generate standard MeSH terms from 
>>> medical
>>> citations, and then use Lucene to save the terms and citations for 
>>> future
>>> search. The information we need to save are:
>>> a) the exact mesh terms (top 10)
>>> b) the score for each term
>>> so the codings are like
>>> -----------------------------------
>>> for the top 10 MeSH Terms
>>> myField=Field.Keyword("mesh", mesh.toLowerCase());
>>> myField.setBoost(score);
>>> doc.add(myFiled);
>>> end for
>>> ------------------------------------
>>> as you could see we generate all the terms under named field "mesh". 
>>> If I
>>> understand correctly, all the fields under the same name would
>>> eventually  save into one field, with all the scores be normalized into
>>> filed boost. In this case, we wouldn't be able to save separate 
>>> score, so
>>> the information is lost. Am I correct? Is there anyway we could 
>>> change it? I
>>> understand Lucene is for keyword search, and what we try to do is 
>>> Controlled
>>> Vocabulary search, Any other tool we could use?
>>>
>>> Thank you,
>>> Xin
>>>
>>>
>>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 15:20:18 2006
Return-Path: <java-user-return-22937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41371 invoked from network); 25 Aug 2006 15:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 15:20:18 -0000
Received: (qmail 6000 invoked by uid 500); 25 Aug 2006 15:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5963 invoked by uid 500); 25 Aug 2006 15:20:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5952 invoked by uid 99); 25 Aug 2006 15:20:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:20:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [162.129.8.151] (HELO ipex2.johnshopkins.edu) (162.129.8.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:20:10 -0700
Received: from atis9nn0d91.monument1.jhmi.edu (HELO ATIS9NN0D91) ([162.129.49.150])
  by ipex2.johnshopkins.edu with SMTP; 25 Aug 2006 11:20:32 -0400
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.08,169,1154923200"; 
   d="scan'208"; a="189139375:sNHT294910672"
Message-ID: <20a601c6c859$fb03c290$963181a2@win.ad.jhu.edu>
Reply-To: "Zhao, Xin" <xzhao@jhu.edu>
From: "Zhao, Xin" <xzhao9@jhmi.edu>
To: <java-user@lucene.apache.org>
References: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu> <b10f7c0b0608241322p6934a65dndcf56f9e6666c924@mail.gmail.com> <207101c6c851$d24e4990$963181a2@win.ad.jhu.edu> <44EF0E04.50308@masterfile.com>
Subject: Re: controlled vocabulary
Date: Fri, 25 Aug 2006 11:20:21 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Rupinder,
My understanding is Field.Index.NO_NORMS disables  index-time boosting and 
field length normalization at the same time. But I do need index-time 
boosting to store the scoring of each mesh term. Have I missed anything?
Thank you very much for your help,
Xin

----- Original Message ----- 
From: "Rupinder Singh Mazara" <rmazara@masterfile.com>
To: <java-user@lucene.apache.org>
Sent: Friday, August 25, 2006 10:49 AM
Subject: Re: controlled vocabulary


> hi Xin
>
>  this is take a look at this you can add multiple fields with the name 
> mesh
> for ( i=0; i< meshList.size() ; i++ ){
>    meshTerm = meshList.get(i)
>  document.addField( new Field( "mesh", meshTerm.semanticWebConceptId, 
> Field.Store.YES , Field.Index.NO_NORMS  );
> }
>
>  when querying this index, create a analyzer that infers the text string 
> and generates id's that correspond to the mesh term in the semantic web
>
>
>
> Zhao, Xin wrote:
>> Hi,
>> Thank you for your reply. I had thought about the first two solutions 
>> before. If we apply one doc for each MeSH term, it would be 26 docs for 
>> each item digested(we actually need the top 25 MeSH terms generated), 
>> would it be any problem if there are too many documents? If we apply 
>> field name like "mesh_1", "mesh_2"..., when it comes to search, we will 
>> have to generate a loop for each single one of the query terms( there 
>> will be more than 20-30 terms on average, since we are using sematic web 
>> to implement concept search), do you think it would affect the 
>> performance in a very bad way?
>> Regards,
>> Xin
>>
>>
>> ----- Original Message ----- From: "Dedian Guo" <gdedian@gmail.com>
>> To: <java-user@lucene.apache.org>; "Zhao, Xin" <xzhao@jhu.edu>
>> Sent: Thursday, August 24, 2006 4:22 PM
>> Subject: Re: controlled library
>>
>>
>>> in my solution, you can apply one doc for each mesh term, or apply 
>>> different
>>> keyword such as "mesh_1"...."mesh_10" for your top 10 terms...or u can 
>>> group
>>> your mesh terms as one string then add into a field, which requires a 
>>> simple
>>> string parser for the group string when you wanna read the terms...
>>>
>>> not sure if that works or answers your question...
>>>
>>> On 8/24/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
>>>>
>>>> Hi,
>>>> I have a design question. Here is what we try to do for indexing:
>>>> We designed an indexing tool to generate standard MeSH terms from 
>>>> medical
>>>> citations, and then use Lucene to save the terms and citations for 
>>>> future
>>>> search. The information we need to save are:
>>>> a) the exact mesh terms (top 10)
>>>> b) the score for each term
>>>> so the codings are like
>>>> -----------------------------------
>>>> for the top 10 MeSH Terms
>>>> myField=Field.Keyword("mesh", mesh.toLowerCase());
>>>> myField.setBoost(score);
>>>> doc.add(myFiled);
>>>> end for
>>>> ------------------------------------
>>>> as you could see we generate all the terms under named field "mesh". If 
>>>> I
>>>> understand correctly, all the fields under the same name would
>>>> eventually  save into one field, with all the scores be normalized into
>>>> filed boost. In this case, we wouldn't be able to save separate score, 
>>>> so
>>>> the information is lost. Am I correct? Is there anyway we could change 
>>>> it? I
>>>> understand Lucene is for keyword search, and what we try to do is 
>>>> Controlled
>>>> Vocabulary search, Any other tool we could use?
>>>>
>>>> Thank you,
>>>> Xin
>>>>
>>>>
>>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 15:27:49 2006
Return-Path: <java-user-return-22938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44695 invoked from network); 25 Aug 2006 15:27:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 15:27:49 -0000
Received: (qmail 20754 invoked by uid 500); 25 Aug 2006 15:27:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20529 invoked by uid 500); 25 Aug 2006 15:27:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20518 invoked by uid 99); 25 Aug 2006 15:27:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:27:43 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.224.152] (HELO mail.masterfile.com) (205.207.224.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:27:41 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.masterfile.com (Postfix) with ESMTP id CA2A6882310;
	Fri, 25 Aug 2006 11:27:20 -0400 (EDT)
Received: from [127.0.0.1] (unknown [172.16.8.63])
	by mail.masterfile.com (Postfix) with ESMTP id C2F0A88103D
	for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 11:27:20 -0400 (EDT)
Message-ID: <44EF16D8.5000406@masterfile.com>
Date: Fri, 25 Aug 2006 11:27:20 -0400
From: Rupinder Singh Mazara <rmazara@masterfile.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: controlled vocabulary
References: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu> <b10f7c0b0608241322p6934a65dndcf56f9e6666c924@mail.gmail.com> <207101c6c851$d24e4990$963181a2@win.ad.jhu.edu> <44EF0E04.50308@masterfile.com> <20a601c6c859$fb03c290$963181a2@win.ad.jhu.edu>
In-Reply-To: <20a601c6c859$fb03c290$963181a2@win.ad.jhu.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Xin

   then perhaps you can change it to Field.Index.TOKENIZED, but i was 
not aware that pubmed boosts mesh terms, they broadly classify terms as 
major and minor, if you plan to use this simple system of classification 
consider adding the major terms twice to the document ?

Zhao, Xin wrote:
> Hi, Rupinder,
> My understanding is Field.Index.NO_NORMS disables  index-time boosting 
> and field length normalization at the same time. But I do need 
> index-time boosting to store the scoring of each mesh term. Have I 
> missed anything?
> Thank you very much for your help,
> Xin
>
> ----- Original Message ----- From: "Rupinder Singh Mazara" 
> <rmazara@masterfile.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, August 25, 2006 10:49 AM
> Subject: Re: controlled vocabulary
>
>
>> hi Xin
>>
>>  this is take a look at this you can add multiple fields with the 
>> name mesh
>> for ( i=0; i< meshList.size() ; i++ ){
>>    meshTerm = meshList.get(i)
>>  document.addField( new Field( "mesh", meshTerm.semanticWebConceptId, 
>> Field.Store.YES , Field.Index.NO_NORMS  );
>> }
>>
>>  when querying this index, create a analyzer that infers the text 
>> string and generates id's that correspond to the mesh term in the 
>> semantic web
>>
>>
>>
>> Zhao, Xin wrote:
>>> Hi,
>>> Thank you for your reply. I had thought about the first two 
>>> solutions before. If we apply one doc for each MeSH term, it would 
>>> be 26 docs for each item digested(we actually need the top 25 MeSH 
>>> terms generated), would it be any problem if there are too many 
>>> documents? If we apply field name like "mesh_1", "mesh_2"..., when 
>>> it comes to search, we will have to generate a loop for each single 
>>> one of the query terms( there will be more than 20-30 terms on 
>>> average, since we are using sematic web to implement concept 
>>> search), do you think it would affect the performance in a very bad 
>>> way?
>>> Regards,
>>> Xin
>>>
>>>
>>> ----- Original Message ----- From: "Dedian Guo" <gdedian@gmail.com>
>>> To: <java-user@lucene.apache.org>; "Zhao, Xin" <xzhao@jhu.edu>
>>> Sent: Thursday, August 24, 2006 4:22 PM
>>> Subject: Re: controlled library
>>>
>>>
>>>> in my solution, you can apply one doc for each mesh term, or apply 
>>>> different
>>>> keyword such as "mesh_1"...."mesh_10" for your top 10 terms...or u 
>>>> can group
>>>> your mesh terms as one string then add into a field, which requires 
>>>> a simple
>>>> string parser for the group string when you wanna read the terms...
>>>>
>>>> not sure if that works or answers your question...
>>>>
>>>> On 8/24/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
>>>>>
>>>>> Hi,
>>>>> I have a design question. Here is what we try to do for indexing:
>>>>> We designed an indexing tool to generate standard MeSH terms from 
>>>>> medical
>>>>> citations, and then use Lucene to save the terms and citations for 
>>>>> future
>>>>> search. The information we need to save are:
>>>>> a) the exact mesh terms (top 10)
>>>>> b) the score for each term
>>>>> so the codings are like
>>>>> -----------------------------------
>>>>> for the top 10 MeSH Terms
>>>>> myField=Field.Keyword("mesh", mesh.toLowerCase());
>>>>> myField.setBoost(score);
>>>>> doc.add(myFiled);
>>>>> end for
>>>>> ------------------------------------
>>>>> as you could see we generate all the terms under named field 
>>>>> "mesh". If I
>>>>> understand correctly, all the fields under the same name would
>>>>> eventually  save into one field, with all the scores be normalized 
>>>>> into
>>>>> filed boost. In this case, we wouldn't be able to save separate 
>>>>> score, so
>>>>> the information is lost. Am I correct? Is there anyway we could 
>>>>> change it? I
>>>>> understand Lucene is for keyword search, and what we try to do is 
>>>>> Controlled
>>>>> Vocabulary search, Any other tool we could use?
>>>>>
>>>>> Thank you,
>>>>> Xin
>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 15:49:21 2006
Return-Path: <java-user-return-22939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54559 invoked from network); 25 Aug 2006 15:49:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 15:49:20 -0000
Received: (qmail 69085 invoked by uid 500); 25 Aug 2006 15:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69065 invoked by uid 500); 25 Aug 2006 15:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69054 invoked by uid 99); 25 Aug 2006 15:49:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:49:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [162.129.8.151] (HELO ipex2.johnshopkins.edu) (162.129.8.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 08:49:11 -0700
Received: from atis9nn0d91.monument1.jhmi.edu (HELO ATIS9NN0D91) ([162.129.49.150])
  by ipex2.johnshopkins.edu with SMTP; 25 Aug 2006 11:49:33 -0400
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.08,169,1154923200"; 
   d="scan'208"; a="189150413:sNHT40644762"
Message-ID: <20bc01c6c85e$0aeb9490$963181a2@win.ad.jhu.edu>
Reply-To: "Zhao, Xin" <xzhao@jhu.edu>
From: "Zhao, Xin" <xzhao9@jhmi.edu>
To: <java-user@lucene.apache.org>
References: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu> <b10f7c0b0608241322p6934a65dndcf56f9e6666c924@mail.gmail.com> <207101c6c851$d24e4990$963181a2@win.ad.jhu.edu> <44EF0E04.50308@masterfile.com> <20a601c6c859$fb03c290$963181a2@win.ad.jhu.edu> <44EF16D8.5000406@masterfile.com>
Subject: Re: controlled vocabulary
Date: Fri, 25 Aug 2006 11:49:26 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Rupinder,
Our algorithm is a little different from what PubMed does. We have scoring 
for each mesh term, which will affect the search result.
What do you think the difference would be for these two:
document.addField(Field.Keyword("mesh", "xxxx"));
and
document.addField( new Field( "mesh", "xxxx", Field.Store.YES , 
Field.Index.TOKENIZED );

Thank you,
Xin



----- Original Message ----- 
From: "Rupinder Singh Mazara" <rmazara@masterfile.com>
To: <java-user@lucene.apache.org>
Sent: Friday, August 25, 2006 11:27 AM
Subject: Re: controlled vocabulary


> Hi Xin
>
>   then perhaps you can change it to Field.Index.TOKENIZED, but i was not 
> aware that pubmed boosts mesh terms, they broadly classify terms as major 
> and minor, if you plan to use this simple system of classification 
> consider adding the major terms twice to the document ?
>
> Zhao, Xin wrote:
>> Hi, Rupinder,
>> My understanding is Field.Index.NO_NORMS disables  index-time boosting 
>> and field length normalization at the same time. But I do need index-time 
>> boosting to store the scoring of each mesh term. Have I missed anything?
>> Thank you very much for your help,
>> Xin
>>
>> ----- Original Message ----- From: "Rupinder Singh Mazara" 
>> <rmazara@masterfile.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, August 25, 2006 10:49 AM
>> Subject: Re: controlled vocabulary
>>
>>
>>> hi Xin
>>>
>>>  this is take a look at this you can add multiple fields with the name 
>>> mesh
>>> for ( i=0; i< meshList.size() ; i++ ){
>>>    meshTerm = meshList.get(i)
>>>  document.addField( new Field( "mesh", meshTerm.semanticWebConceptId, 
>>> Field.Store.YES , Field.Index.NO_NORMS  );
>>> }
>>>
>>>  when querying this index, create a analyzer that infers the text string 
>>> and generates id's that correspond to the mesh term in the semantic web
>>>
>>>
>>>
>>> Zhao, Xin wrote:
>>>> Hi,
>>>> Thank you for your reply. I had thought about the first two solutions 
>>>> before. If we apply one doc for each MeSH term, it would be 26 docs for 
>>>> each item digested(we actually need the top 25 MeSH terms generated), 
>>>> would it be any problem if there are too many documents? If we apply 
>>>> field name like "mesh_1", "mesh_2"..., when it comes to search, we will 
>>>> have to generate a loop for each single one of the query terms( there 
>>>> will be more than 20-30 terms on average, since we are using sematic 
>>>> web to implement concept search), do you think it would affect the 
>>>> performance in a very bad way?
>>>> Regards,
>>>> Xin
>>>>
>>>>
>>>> ----- Original Message ----- From: "Dedian Guo" <gdedian@gmail.com>
>>>> To: <java-user@lucene.apache.org>; "Zhao, Xin" <xzhao@jhu.edu>
>>>> Sent: Thursday, August 24, 2006 4:22 PM
>>>> Subject: Re: controlled library
>>>>
>>>>
>>>>> in my solution, you can apply one doc for each mesh term, or apply 
>>>>> different
>>>>> keyword such as "mesh_1"...."mesh_10" for your top 10 terms...or u can 
>>>>> group
>>>>> your mesh terms as one string then add into a field, which requires a 
>>>>> simple
>>>>> string parser for the group string when you wanna read the terms...
>>>>>
>>>>> not sure if that works or answers your question...
>>>>>
>>>>> On 8/24/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
>>>>>>
>>>>>> Hi,
>>>>>> I have a design question. Here is what we try to do for indexing:
>>>>>> We designed an indexing tool to generate standard MeSH terms from 
>>>>>> medical
>>>>>> citations, and then use Lucene to save the terms and citations for 
>>>>>> future
>>>>>> search. The information we need to save are:
>>>>>> a) the exact mesh terms (top 10)
>>>>>> b) the score for each term
>>>>>> so the codings are like
>>>>>> -----------------------------------
>>>>>> for the top 10 MeSH Terms
>>>>>> myField=Field.Keyword("mesh", mesh.toLowerCase());
>>>>>> myField.setBoost(score);
>>>>>> doc.add(myFiled);
>>>>>> end for
>>>>>> ------------------------------------
>>>>>> as you could see we generate all the terms under named field "mesh". 
>>>>>> If I
>>>>>> understand correctly, all the fields under the same name would
>>>>>> eventually  save into one field, with all the scores be normalized 
>>>>>> into
>>>>>> filed boost. In this case, we wouldn't be able to save separate 
>>>>>> score, so
>>>>>> the information is lost. Am I correct? Is there anyway we could 
>>>>>> change it? I
>>>>>> understand Lucene is for keyword search, and what we try to do is 
>>>>>> Controlled
>>>>>> Vocabulary search, Any other tool we could use?
>>>>>>
>>>>>> Thank you,
>>>>>> Xin
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 19:17:17 2006
Return-Path: <java-user-return-22940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49114 invoked from network); 25 Aug 2006 19:17:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 19:17:16 -0000
Received: (qmail 32606 invoked by uid 500); 25 Aug 2006 19:17:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32218 invoked by uid 500); 25 Aug 2006 19:17:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32204 invoked by uid 99); 25 Aug 2006 19:17:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:17:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO nz-out-0102.google.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:17:05 -0700
Received: by nz-out-0102.google.com with SMTP id z6so620164nzd
        for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 12:16:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=QTUcDs3CT4K0F3v3I7JcDihT+PBOM9UpYH+7ejNKUGl52Vc/pWC/VtR2zpoNfkJavKk+8TP3MTyIaPRKY1KgJ/Ug+d520TK8Xm3XxSFSBYMit3CRbMwq0GSoVhf011Uh79sSticMCjdtpgdPGYQiG9NcTGLsfP1W+bX9rhhc2AY=
Received: by 10.65.154.10 with SMTP id g10mr4259814qbo;
        Fri, 25 Aug 2006 12:16:44 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id p4sm2542318qba.2006.08.25.12.16.42;
        Fri, 25 Aug 2006 12:16:43 -0700 (PDT)
Message-ID: <44EF4CA5.4040103@gmail.com>
Date: Fri, 25 Aug 2006 15:16:53 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Test new query parser?
References: <ab0709bf0608211239q5ec9bf8ah4be128ee4896e319@mail.gmail.com> <Pine.LNX.4.63.0608221708120.22579@jimwormold> <44ECB899.1010303@gmail.com> <Pine.LNX.4.63.0608231732190.20104@jimwormold>
In-Reply-To: <Pine.LNX.4.63.0608231732190.20104@jimwormold>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have received a few inquires about my new query parser. I apologize 
for making that announcement a little premature. My current 
implementation only allows simple mixing of proximity queries with 
boolean queries...complex mixing would result in an incorrect search. A 
reply to my first email made me consider this more (I had done that part 
a while ago) and I came to the conclusion that it was obviously 
unacceptable to release the parser to anyone in this hobbled form. The 
parser must support arbitrary mixing of boolean and proximity searchers.

I think I have cracked this. I would say I am at 90%  of the way to a 
solution and can see the light at the end of the tunnel. When I have 
resolved this issue, I will contact those that have expressed interest 
and provide them with the parser. With some feedback and improvements I 
will think about how to release it generally.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 19:55:39 2006
Return-Path: <java-user-return-22941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76406 invoked from network); 25 Aug 2006 19:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 19:55:35 -0000
Received: (qmail 25167 invoked by uid 500); 25 Aug 2006 19:55:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25141 invoked by uid 500); 25 Aug 2006 19:55:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25130 invoked by uid 99); 25 Aug 2006 19:55:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:55:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [162.129.8.151] (HELO ipex2.johnshopkins.edu) (162.129.8.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 12:55:26 -0700
Received: from atis9nn0d91.monument1.jhmi.edu (HELO ATIS9NN0D91) ([162.129.49.150])
  by ipex2.johnshopkins.edu with SMTP; 25 Aug 2006 15:55:55 -0400
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.08,169,1154923200"; 
   d="scan'208"; a="189235091:sNHT71146560"
Message-ID: <246b01c6c880$49a2c150$963181a2@win.ad.jhu.edu>
Reply-To: "Zhao, Xin" <xzhao@jhu.edu>
From: "Zhao, Xin" <xzhao9@jhmi.edu>
To: <java-user@lucene.apache.org>
References: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu> <b10f7c0b0608241322p6934a65dndcf56f9e6666c924@mail.gmail.com> <207101c6c851$d24e4990$963181a2@win.ad.jhu.edu>
Subject: Re: controlled vocabulary
Date: Fri, 25 Aug 2006 15:54:34 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

now. i have a second thought about one meah term per document. the scoring 
formula(hits too) is based on document, right? does it mean that we 
shouldn't have more than one document for each object indexed?
for example, i try to index a publication,  for some of the information, 
like title, abstract i would like to store and index them using default 
similarity, while the other information i would like to use customized 
similarity. i probably should use a different indexing directory and writer 
instead of two documents in the same index, right?
thank you for helping me. you could see that i am in the early learning 
stage now.
xin



----- Original Message ----- 
From: "Zhao, Xin" <xzhao9@jhmi.edu>
To: <java-user@lucene.apache.org>
Sent: Friday, August 25, 2006 10:21 AM
Subject: Re: controlled vocabulary


> Hi,
> Thank you for your reply. I had thought about the first two solutions 
> before. If we apply one doc for each MeSH term, it would be 26 docs for 
> each item digested(we actually need the top 25 MeSH terms generated), 
> would it be any problem if there are too many documents? If we apply field 
> name like "mesh_1", "mesh_2"..., when it comes to search, we will have to 
> generate a loop for each single one of the query terms( there will be more 
> than 20-30 terms on average, since we are using sematic web to implement 
> concept search), do you think it would affect the performance in a very 
> bad way?
> Regards,
> Xin
>
>
> ----- Original Message ----- 
> From: "Dedian Guo" <gdedian@gmail.com>
> To: <java-user@lucene.apache.org>; "Zhao, Xin" <xzhao@jhu.edu>
> Sent: Thursday, August 24, 2006 4:22 PM
> Subject: Re: controlled library
>
>
>> in my solution, you can apply one doc for each mesh term, or apply 
>> different
>> keyword such as "mesh_1"...."mesh_10" for your top 10 terms...or u can 
>> group
>> your mesh terms as one string then add into a field, which requires a 
>> simple
>> string parser for the group string when you wanna read the terms...
>>
>> not sure if that works or answers your question...
>>
>> On 8/24/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
>>>
>>> Hi,
>>> I have a design question. Here is what we try to do for indexing:
>>> We designed an indexing tool to generate standard MeSH terms from 
>>> medical
>>> citations, and then use Lucene to save the terms and citations for 
>>> future
>>> search. The information we need to save are:
>>> a) the exact mesh terms (top 10)
>>> b) the score for each term
>>> so the codings are like
>>> -----------------------------------
>>> for the top 10 MeSH Terms
>>> myField=Field.Keyword("mesh", mesh.toLowerCase());
>>> myField.setBoost(score);
>>> doc.add(myFiled);
>>> end for
>>> ------------------------------------
>>> as you could see we generate all the terms under named field "mesh". If 
>>> I
>>> understand correctly, all the fields under the same name would
>>> eventually  save into one field, with all the scores be normalized into
>>> filed boost. In this case, we wouldn't be able to save separate score, 
>>> so
>>> the information is lost. Am I correct? Is there anyway we could change 
>>> it? I
>>> understand Lucene is for keyword search, and what we try to do is 
>>> Controlled
>>> Vocabulary search, Any other tool we could use?
>>>
>>> Thank you,
>>> Xin
>>>
>>>
>>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 20:22:20 2006
Return-Path: <java-user-return-22942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86900 invoked from network); 25 Aug 2006 20:22:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 20:22:19 -0000
Received: (qmail 89483 invoked by uid 500); 25 Aug 2006 20:22:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89454 invoked by uid 500); 25 Aug 2006 20:22:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89443 invoked by uid 99); 25 Aug 2006 20:22:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 13:22:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 13:22:10 -0700
Received: from [10.65.253.201] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.156D48F5@mailer.syr.edu>; Fri, 25 Aug 2006 16:21:49 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44EF0CC6.4010700@masterfile.com>
References: <44DC80FB.1030401@aol.com> <917EE8D7-D5F6-4AC1-BB6E-FADD253EE655@syr.edu> <44EF0CC6.4010700@masterfile.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CD098AB8-F045-4E51-B6B3-AA90C3623EC5@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: WIll storing  docs affect lucene's search performance ?
Date: Fri, 25 Aug 2006 16:21:47 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is on the HEAD version in SVN.

See  http://wiki.apache.org/jakarta-lucene/SourceRepository for info  
on checking out from SVN.


-Grant

On Aug 25, 2006, at 10:44 AM, Rupinder Singh Mazara wrote:

> Where can I find information which version / tag to checkout so as to
> get the lazy loading verity of lucene
>
>
> Grant Ingersoll wrote:
>>
>> Large stored fields can affect performance when you are iterating  
>> over your hits (assuming you are not interested in the value of  
>> the stored field at that point in time) for a results display  
>> since all Fields are loaded when getting the Document.  The SVN  
>> trunk has a version of lazy loading that allows you to specify  
>> which fields are loaded and which ones are lazy, so you can avoid  
>> loading fields that a user will never view.
>>
>> -Grant
>>
>> On Aug 11, 2006, at 9:07 AM, Prasenjit Mukherjee wrote:
>>
>>> I have a requirement ( use highlighter) to  store the doc content  
>>> somewhere., and I am not allowed to use a RDBMS. I am thinking of  
>>> using Lucene's Field with (Field.Store.YES and Field.Index.NO) to  
>>> store the doc content. Will it have any negative affect on my  
>>> search performance ?
>>> I think I have read somewhere that  Lucene shouldn't be used(or  
>>> misused)  to provide RDBMS like storage.
>>>
>>> --prasen
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> Sr. Software Engineer
>> Center for Natural Language Processing
>> Syracuse University
>> 335 Hinds Hall
>> Syracuse, NY 13244
>> http://www.cnlp.org
>>
>> Voice: 315-443-5484
>> Skype: grant_ingersoll
>> Fax: 315-443-6886
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 20:26:10 2006
Return-Path: <java-user-return-22943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88255 invoked from network); 25 Aug 2006 20:26:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 20:26:03 -0000
Received: (qmail 98890 invoked by uid 500); 25 Aug 2006 20:25:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98869 invoked by uid 500); 25 Aug 2006 20:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 89178 invoked by uid 99); 25 Aug 2006 20:21:30 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of grant.ingersoll@gmail.com designates 66.249.82.224 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=PkdyEboqJ8zd45ZZSOHZlJu/wmGbXZSRdzMZH7nXvTMubYzUZUPLRx5pMb7HG+JwLlLVGdNFLJFmnZf69ZmMi8sv0Y3D+FICnxa8ck24fl65nohAvcSDWi1zhYgKhZnJscWLR32Xp4vA8efIPiOFb2IOpw63FoVaW+unfwieg2E=
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44EF0CC6.4010700@masterfile.com>
References: <44DC80FB.1030401@aol.com> <917EE8D7-D5F6-4AC1-BB6E-FADD253EE655@syr.edu> <44EF0CC6.4010700@masterfile.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <11C7C4CB-2787-4E15-8792-899EB282DFB4@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: WIll storing  docs affect lucene's search performance ?
Date: Fri, 25 Aug 2006 16:20:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is on the HEAD version in SVN.

See  http://wiki.apache.org/jakarta-lucene/SourceRepository for info  
on checking out from SVN.


On Aug 25, 2006, at 10:44 AM, Rupinder Singh Mazara wrote:

> Where can I find information which version / tag to checkout so as to
> get the lazy loading verity of lucene
>
>
> Grant Ingersoll wrote:
>>
>> Large stored fields can affect performance when you are iterating  
>> over your hits (assuming you are not interested in the value of  
>> the stored field at that point in time) for a results display  
>> since all Fields are loaded when getting the Document.  The SVN  
>> trunk has a version of lazy loading that allows you to specify  
>> which fields are loaded and which ones are lazy, so you can avoid  
>> loading fields that a user will never view.
>>
>> -Grant
>>
>> On Aug 11, 2006, at 9:07 AM, Prasenjit Mukherjee wrote:
>>
>>> I have a requirement ( use highlighter) to  store the doc content  
>>> somewhere., and I am not allowed to use a RDBMS. I am thinking of  
>>> using Lucene's Field with (Field.Store.YES and Field.Index.NO) to  
>>> store the doc content. Will it have any negative affect on my  
>>> search performance ?
>>> I think I have read somewhere that  Lucene shouldn't be used(or  
>>> misused)  to provide RDBMS like storage.
>>>
>>> --prasen
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> Sr. Software Engineer
>> Center for Natural Language Processing
>> Syracuse University
>> 335 Hinds Hall
>> Syracuse, NY 13244
>> http://www.cnlp.org
>>
>> Voice: 315-443-5484
>> Skype: grant_ingersoll
>> Fax: 315-443-6886
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 21:34:00 2006
Return-Path: <java-user-return-22944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14931 invoked from network); 25 Aug 2006 21:34:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 21:34:00 -0000
Received: (qmail 7657 invoked by uid 500); 25 Aug 2006 21:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7629 invoked by uid 500); 25 Aug 2006 21:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7618 invoked by uid 99); 25 Aug 2006 21:33:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 14:33:53 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of drjat320@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO nz-out-0102.google.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 14:33:52 -0700
Received: by nz-out-0102.google.com with SMTP id z6so646855nzd
        for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 14:33:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=oPeCoZ1NUnLqOc2dErYJrLQHEjy0csiyBNLf6J6i6Bo6eKKicm8W0R94KTBLUeOnxB76Ji6ySdVajKkfgfStExysAV3PLpTJ2bsY72/WGhmstZAX7TvJcK4SOygO3zco/6zje2s0bkzjMFTE72Na8O0Xq9hAvjdxXT03WJimcoQ=
Received: by 10.64.185.7 with SMTP id i7mr4444061qbf;
        Fri, 25 Aug 2006 14:33:31 -0700 (PDT)
Received: by 10.65.160.20 with HTTP; Fri, 25 Aug 2006 14:33:30 -0700 (PDT)
Message-ID: <288e77f30608251433r3738511yc03ec0f7affe135b@mail.gmail.com>
Date: Fri, 25 Aug 2006 17:33:30 -0400
From: "d rj" <drjat320@gmail.com>
To: java-user@lucene.apache.org
Subject: Sharing Documents between Lucene and DotLucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_98983_13662387.1156541610616"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_98983_13662387.1156541610616
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello-

I am just wondering if any one has encountered any good strategies for
sharing search records between a Linux based server using Lucene and a
Windows based client using DotLucene.

I am doing all the indexing on the server ( i.e. the master index is
contained on the server) and I would like to transfer parts of that index
across the wire to a client.

Presently I am creating a temporary sub-index on the server, adding the
appropriate Document objects to that index, then transferring the the entire
index to the client which then merges the index into any existing index it
may already have.  However, I would like to avoid building/transferring a
sub-index.

I would like to know if anyone has attempted to directly marshall Document
objects from Java to C#.  Or if there are any other good approaches sharing
individual Document objects between Lucene and DotLucene.

Thanks.
-drj

------=_Part_98983_13662387.1156541610616--

From java-user-return-22945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 21:38:28 2006
Return-Path: <java-user-return-22945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16570 invoked from network); 25 Aug 2006 21:38:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 21:38:28 -0000
Received: (qmail 17456 invoked by uid 500); 25 Aug 2006 21:38:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17423 invoked by uid 500); 25 Aug 2006 21:38:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17412 invoked by uid 99); 25 Aug 2006 21:38:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 14:38:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gdedian@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 14:38:20 -0700
Received: by ug-out-1314.google.com with SMTP id y2so928483uge
        for <java-user@lucene.apache.org>; Fri, 25 Aug 2006 14:37:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=p4qfZSS0msEkwm5l8mQJqnCuZcd6Dyoo3vusSPf+wISI4Rw8Ey+Jxwg52Cdl8hpB+nlvv/uzd4kuoHxX8Igd9WAjOKbtK3wafbFe4hskVWjRuxgLX4ls9PqxDu+VTz5f1r25hrjs9qraO+TjZ8f+dt+apsLDJ+N6hy7vArHzlQg=
Received: by 10.67.10.12 with SMTP id n12mr2152987ugi;
        Fri, 25 Aug 2006 14:37:58 -0700 (PDT)
Received: by 10.67.27.10 with HTTP; Fri, 25 Aug 2006 14:37:58 -0700 (PDT)
Message-ID: <b10f7c0b0608251437h3ef4ad6dj7ea7c9ced107c290@mail.gmail.com>
Date: Fri, 25 Aug 2006 14:37:58 -0700
From: "Dedian Guo" <gdedian@gmail.com>
To: java-user@lucene.apache.org, "Zhao, Xin" <xzhao@jhu.edu>
Subject: Re: controlled vocabulary
In-Reply-To: <246b01c6c880$49a2c150$963181a2@win.ad.jhu.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_167111_31066147.1156541878834"
References: <16ee01c6c790$2f7b36e0$963181a2@win.ad.jhu.edu>
	 <b10f7c0b0608241322p6934a65dndcf56f9e6666c924@mail.gmail.com>
	 <207101c6c851$d24e4990$963181a2@win.ad.jhu.edu>
	 <246b01c6c880$49a2c150$963181a2@win.ad.jhu.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_167111_31066147.1156541878834
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, Xin, in my understanding , the document in Lucene is a term of
collection of fields, while a field is pair of keyword and value, tough it
can be indexed or stored or both. That is plain structure. if you wanna
index a deep tree structure such as complex objects and keep those
relationship inside, i guess we need do some tricky of that. so in my
mentioned solution, i will do something on the keyword of a document(here, a
document represent a object...) . the score problem you mentioned in your
question is similar, i mean, score is actually an attribute of mesh object,
so u wanna index the information which has a tree-like structure (i met the
similar problem when i indexing xml-based pages. esp. for those have lots of
deep element nodes, deep index needed for deep searching).

correct me if i was wrong or there are some better solutions...

On 8/25/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
>
> now. i have a second thought about one meah term per document. the scoring
> formula(hits too) is based on document, right? does it mean that we
> shouldn't have more than one document for each object indexed?
> for example, i try to index a publication,  for some of the information,
> like title, abstract i would like to store and index them using default
> similarity, while the other information i would like to use customized
> similarity. i probably should use a different indexing directory and
> writer
> instead of two documents in the same index, right?
> thank you for helping me. you could see that i am in the early learning
> stage now.
> xin
>
>
>
> ----- Original Message -----
> From: "Zhao, Xin" <xzhao9@jhmi.edu>
> To: <java-user@lucene.apache.org>
> Sent: Friday, August 25, 2006 10:21 AM
> Subject: Re: controlled vocabulary
>
>
> > Hi,
> > Thank you for your reply. I had thought about the first two solutions
> > before. If we apply one doc for each MeSH term, it would be 26 docs for
> > each item digested(we actually need the top 25 MeSH terms generated),
> > would it be any problem if there are too many documents? If we apply
> field
> > name like "mesh_1", "mesh_2"..., when it comes to search, we will have
> to
> > generate a loop for each single one of the query terms( there will be
> more
> > than 20-30 terms on average, since we are using sematic web to implement
> > concept search), do you think it would affect the performance in a very
> > bad way?
> > Regards,
> > Xin
> >
> >
> > ----- Original Message -----
> > From: "Dedian Guo" <gdedian@gmail.com>
> > To: <java-user@lucene.apache.org>; "Zhao, Xin" <xzhao@jhu.edu>
> > Sent: Thursday, August 24, 2006 4:22 PM
> > Subject: Re: controlled library
> >
> >
> >> in my solution, you can apply one doc for each mesh term, or apply
> >> different
> >> keyword such as "mesh_1"...."mesh_10" for your top 10 terms...or u can
> >> group
> >> your mesh terms as one string then add into a field, which requires a
> >> simple
> >> string parser for the group string when you wanna read the terms...
> >>
> >> not sure if that works or answers your question...
> >>
> >> On 8/24/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
> >>>
> >>> Hi,
> >>> I have a design question. Here is what we try to do for indexing:
> >>> We designed an indexing tool to generate standard MeSH terms from
> >>> medical
> >>> citations, and then use Lucene to save the terms and citations for
> >>> future
> >>> search. The information we need to save are:
> >>> a) the exact mesh terms (top 10)
> >>> b) the score for each term
> >>> so the codings are like
> >>> -----------------------------------
> >>> for the top 10 MeSH Terms
> >>> myField=Field.Keyword("mesh", mesh.toLowerCase());
> >>> myField.setBoost(score);
> >>> doc.add(myFiled);
> >>> end for
> >>> ------------------------------------
> >>> as you could see we generate all the terms under named field "mesh".
> If
> >>> I
> >>> understand correctly, all the fields under the same name would
> >>> eventually  save into one field, with all the scores be normalized
> into
> >>> filed boost. In this case, we wouldn't be able to save separate score,
> >>> so
> >>> the information is lost. Am I correct? Is there anyway we could change
> >>> it? I
> >>> understand Lucene is for keyword search, and what we try to do is
> >>> Controlled
> >>> Vocabulary search, Any other tool we could use?
> >>>
> >>> Thank you,
> >>> Xin
> >>>
> >>>
> >>>
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_167111_31066147.1156541878834--

From java-user-return-22946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 22:03:28 2006
Return-Path: <java-user-return-22946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24653 invoked from network); 25 Aug 2006 22:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 22:03:22 -0000
Received: (qmail 71538 invoked by uid 500); 25 Aug 2006 22:03:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71175 invoked by uid 500); 25 Aug 2006 22:03:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71161 invoked by uid 99); 25 Aug 2006 22:03:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 15:03:16 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.222.193.2] (HELO sidekick.frogspace.net) (216.222.193.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 15:03:15 -0700
Received: from static-64-83-60-154.t1.cavtel.net ([64.83.60.154] helo=aroushlt)
	by sidekick.frogspace.net with esmtp (Exim 4.44)
	id 1GGjlP-00047e-8Y
	for java-user@lucene.apache.org; Fri, 25 Aug 2006 15:02:55 -0700
From: "George Aroush" <george@aroush.net>
To: <java-user@lucene.apache.org>
Subject: RE: Sharing Documents between Lucene and DotLucene
Date: Fri, 25 Aug 2006 18:02:54 -0400
Message-ID: <0fea01c6c892$37ca67f0$a8674c09@aroushlt>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: 
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-index: AcbIji1ytCJrCxWbRvmnn7ECUPtDdQAArUNwAABQCDAAAAQPAA==
X-SA-Exim-Connect-IP: 64.83.60.154
X-SA-Exim-Mail-From: george@aroush.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am the developer and maintainer of Lucene.Net.

DotLucene is the old name, Lucene.Net is the official name.  You can find
out more about Lucene.Net by visiting this link:
http://incubator.apache.org/lucene.net/

I am not sure what you mean by "marshall Document objects from Java to C#".
However, if mean sharing an index that's created by Jakarta Lucene be
searched/updated by Lucene.Net and via-vise, then the answer is yes.  In
fact, if you share the lock file, you can have concurrent access and update
to the Lucene index from the Jakarta Lucene and Lucene.Net

As part of Lucene.Net release, I always test and validate this test-case.

Regards,

-- George Aroush


-----Original Message-----
From: d rj [mailto:drjat320@gmail.com]
Sent: Friday, August 25, 2006 5:33 PM
To: java-user@lucene.apache.org
Subject: Sharing Documents between Lucene and DotLucene

Hello-

I am just wondering if any one has encountered any good strategies for
sharing search records between a Linux based server using Lucene and a
Windows based client using DotLucene.

I am doing all the indexing on the server ( i.e. the master index is
contained on the server) and I would like to transfer parts of that index
across the wire to a client.

Presently I am creating a temporary sub-index on the server, adding the
appropriate Document objects to that index, then transferring the the entire
index to the client which then merges the index into any existing index it
may already have.  However, I would like to avoid building/transferring a
sub-index.

I would like to know if anyone has attempted to directly marshall Document
objects from Java to C#.  Or if there are any other good approaches sharing
individual Document objects between Lucene and DotLucene.

Thanks.
-drj


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 25 22:13:32 2006
Return-Path: <java-user-return-22947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28375 invoked from network); 25 Aug 2006 22:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2006 22:13:31 -0000
Received: (qmail 96682 invoked by uid 500); 25 Aug 2006 22:13:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96627 invoked by uid 500); 25 Aug 2006 22:13:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96614 invoked by uid 99); 25 Aug 2006 22:13:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 15:13:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 15:13:23 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7D70B5B781; Fri, 25 Aug 2006 15:13:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 773A57F403;
	Fri, 25 Aug 2006 15:13:03 -0700 (PDT)
Date: Fri, 25 Aug 2006 15:13:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: what do i get with FieldCache.DEFAULT.getStrings(...);
In-Reply-To: <44EEFA8E.7040401@uni-hd.de>
Message-ID: <Pine.LNX.4.58.0608251508440.22135@hal.rescomp.berkeley.edu>
References: <44EEFA8E.7040401@uni-hd.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


FieldCache was designed with searching in mind, where there can only be a
single indexed Term for each doc (otherwise how would you sort a doc that
had two Terms "a" and "z" ?)  I'm acctually suprised you are getting any
values out instead of an Exception

If you index your Field as UN_TOKENIZED you should get the resultss you
expect -- but then searching on individual words may not work the way you
expect, adding the data to two differnet fields (on TOKENIZED for
search and one UN_TOKENIZED for sorting/FieldCache) is the typicaly solution.

You also may want to look at hte LazyFieldLoading using the Fieldable APIs
.... they are for accessing the STORED fields of a Document, and are
aparently much faster then the old method of pulling out the whole
Document ... wether they are as fast as FieldCache or not I don't know.


: Date: Fri, 25 Aug 2006 15:26:38 +0200
: From: Martin Braun <mbraun@uni-hd.de>
: Reply-To: java-user@lucene.apache.org, mbraun@uni-hd.de
: To: java-user@lucene.apache.org
: Subject: what do i get with FieldCache.DEFAULT.getStrings(...);
:
: hello,
: I am using FieldCache.DEFAULT.getStrings in combination with an own
: HitCollector (I loop through all results and count the number of
: occurences of a fieldvalue in the results).
:
: My Problem is that I have Filed values like dt.|lat or ger.|eng. an it
: seems that only the last token of the fields value is stored in the
: returned array of FieldCache.DEFAULT.getStrings(is.getIndexReader(),
: category).
:
: But both values are Stored in the Index (I can find dt. and lat.)
:
: The same issue is with another field which contains the word cd-rom an I
: get only "rom" back.
:
: Is this an Analyzer Problem? How do I get all tokens?
:
:
:
: tia,
: martin
:
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 00:58:58 2006
Return-Path: <java-user-return-22948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70489 invoked from network); 26 Aug 2006 00:58:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 00:58:58 -0000
Received: (qmail 65542 invoked by uid 500); 26 Aug 2006 00:58:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65474 invoked by uid 500); 26 Aug 2006 00:58:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65396 invoked by uid 99); 26 Aug 2006 00:58:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 17:58:43 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of helix_ogg@hotmail.com designates 65.54.246.87 as permitted sender)
Received: from [65.54.246.87] (HELO bay0-omc1-s15.bay0.hotmail.com) (65.54.246.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 17:58:41 -0700
Received: from hotmail.com ([65.54.169.30]) by bay0-omc1-s15.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 25 Aug 2006 17:58:20 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 25 Aug 2006 17:58:20 -0700
Message-ID: <BAY114-F202F5D814019173567DE728F3A0@phx.gbl>
Received: from 65.54.169.200 by by114fd.bay114.hotmail.msn.com with HTTP;
	Sat, 26 Aug 2006 00:58:15 GMT
X-Originating-IP: [210.77.13.191]
X-Originating-Email: [helix_ogg@hotmail.com]
X-Sender: helix_ogg@hotmail.com
From: "luan xl" <helix_ogg@hotmail.com>
To: java-user@lucene.apache.org
Subject: A problem on performance
Date: Sat, 26 Aug 2006 00:58:15 +0000
Mime-Version: 1.0
Content-Type: text/plain; charset=gb2312; format=flowed
X-OriginalArrivalTime: 26 Aug 2006 00:58:20.0406 (UTC) FILETIME=[B9379160:01C6C8AA]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have got nearly 4 million chinese documents, each size ranges from 1k - 
300k. So I use
org.apache.lucene.analysis.cn.ChineseAnalyzer as the analyzer for the text. 
The index have
four fields: 

content - tokenized not stored
title - tokenized and stored
path - stored only
date - stored only

For some reason, I divide these documents into 12 sets and use 
IndexSearcher over 
MultiReader for search. For all the english query, the speed is very fast, 
only cost about
10-100ms. But when I use the Chinese words for query, the situation is a 
bit confused:
If the word is only one char, so the Query is actually a TermQuery, the 
speed is very fast.
however, If the word is more than one char, the Query is actually a 
PhraseQuery with slop 0,
IndexSearcher usually cost 3000-5000ms to return the Hits.

I have also tested with the QueryParser and get the same results, and my 
environment is a
Dell PE2600 2G*2 Xeon, 2GRAM, 10000R/s SCSI, Debian/sarge, Sun JDK 1.5 + 
lucene 2.0.0

thanks.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 06:59:29 2006
Return-Path: <java-user-return-22949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40030 invoked from network); 26 Aug 2006 06:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 06:59:28 -0000
Received: (qmail 56623 invoked by uid 500); 26 Aug 2006 06:59:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55612 invoked by uid 500); 26 Aug 2006 06:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55601 invoked by uid 99); 26 Aug 2006 06:59:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 23:59:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Aug 2006 23:59:21 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GGs8D-0001zz-6K
	for java-user@lucene.apache.org; Fri, 25 Aug 2006 23:59:01 -0700
Message-ID: <5995363.post@talk.nabble.com>
Date: Fri, 25 Aug 2006 23:59:01 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Incemental Updating
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

i have two applications on an windows machine. One is the searchengine where
the index is can be searched.
The second application runs one time on a day which updates
(deletions/adding)
the index.

My question:
The index is already opened (Indexreader) by the frist application. Is there
a problem when second application accesses the same indexfiles for updating 
at the same time? I tried it and i get no exception, but when i search for
the for documents where the values where changed (first delete, than add 
new document), i can only find it with the old values, not with new ones.


Thanks a lot for you help :-))

-- 
View this message in context: http://www.nabble.com/Incemental-Updating-tf2168389.html#a5995363
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 07:17:24 2006
Return-Path: <java-user-return-22950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43179 invoked from network); 26 Aug 2006 07:17:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 07:17:23 -0000
Received: (qmail 64874 invoked by uid 500); 26 Aug 2006 07:17:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64851 invoked by uid 500); 26 Aug 2006 07:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64840 invoked by uid 99); 26 Aug 2006 07:17:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 00:17:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 00:17:16 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.7/8.13.7) with ESMTP id k7Q7GsT0152300
	for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 07:16:54 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7Q7L02d3121166
	for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 09:21:00 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7Q7GrKa001616
	for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 09:16:53 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7Q7Gr0F001613
	for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 09:16:53 +0200
In-Reply-To: <5995363.post@talk.nabble.com>
Subject: Re: Incemental Updating
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF92A24A86.E55B6A8D-ON882571D6.0027369E-882571D6.0027EC9D@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sat, 26 Aug 2006 00:16:04 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 26/08/2006 10:21:00
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> i have two applications on an windows machine. One is the searchengine
where
> the index is can be searched.
> The second application runs one time on a day which updates
> (deletions/adding)
> the index.
>
> My question:
> The index is already opened (Indexreader) by the frist application. Is
there
> a problem when second application accesses the same indexfiles for
updating
> at the same time?

No problem at all - you can update an index while it is used for search.

> I tried it and i get no exception, but when i search for
> the for documents where the values where changed (first delete, than add
> new document), i can only find it with the old values, not with new ones.

Once the update is done, you need to close the searcher and open a new one.
A searcher, once open, will not reflect further updates to the index. One
more thing to consider is warming a newly opened searcher before switching
from an "old" searcher to the new one.

Lucene FAQ - http://wiki.apache.org/jakarta-lucene/LuceneFAQ - has a few
relevant items, in particular
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-e1cf4d5e35de90d7dd76d9097648a6b720d54cb5
 and
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 07:25:45 2006
Return-Path: <java-user-return-22951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52465 invoked from network); 26 Aug 2006 07:25:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 07:25:44 -0000
Received: (qmail 70492 invoked by uid 500); 26 Aug 2006 07:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70458 invoked by uid 500); 26 Aug 2006 07:25:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70447 invoked by uid 99); 26 Aug 2006 07:25:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 00:25:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 00:25:36 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1070045wxc
        for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 00:25:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=PhCMEM3/jdDqu2RvEBstOj1Qz8h2FRWJdP0/32xzxEc47kO0z5FiHw4Y8RqyX7ZkP1eGtMG76wuWff6XtKKPOoTtDa3Nvt/mNQfWMlBB+RIG/R7TijLsZdYOk7ZZWp7XkMsaevNn17u1X9Gcf3RhpLu617qYsRBcQ2E474yXfe0=
Received: by 10.70.109.12 with SMTP id h12mr5870320wxc;
        Sat, 26 Aug 2006 00:25:16 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Sat, 26 Aug 2006 00:25:16 -0700 (PDT)
Message-ID: <d8050f240608260025u14ce9fe7jac44f45d02940acc@mail.gmail.com>
Date: Sat, 26 Aug 2006 17:25:16 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_115847_22510544.1156577116047"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_115847_22510544.1156577116047
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

When indexing with multiple threads, and under heavy load, I get the
following exception:

java.io.IOException: Access is denied
    at java.io.WinNTFileSystem.createFileExclusively(Native Method)
    at java.io.File.createNewFile(File.java:850)
    at org.apache.lucene.store.FSDirectory$1.obtain(FSDirectory.java:363)
    at org.apache.lucene.store.Lock.obtain(Lock.java:63)

I am using the Compass framework from Open Symphony, however this simply
sits on top of Lucene and the folks at Open Symphony have assured me that
the access to Lucene indexes within their framework is appropriately
synchronized.  In either case, I would have thought Lucene should be
managing its locks regardless of how the indexes are accessed (within the
same JVM at least).

There is a bug report on the Sun website for this issue:

http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6325169

This appears to be relevant, however it maybe Lucene is not synchronizing
appropriately when obtaining a lock?

The org.apache.lucene.store.FSDirectory implementation in Lucene
2.0.0appears to obtain a file lock thus:

      public boolean obtain() throws IOException {
        if (disableLocks)
          return true;

        if (!lockDir.exists()) {
          if (!lockDir.mkdirs()) {
            throw new IOException("Cannot create lock directory: " +
lockDir);
          }
        }

        return lockFile.createNewFile();
      }

Should the line "lockFile.createNewFile();" be within some form of
synchronizion block?

Thanks.

------=_Part_115847_22510544.1156577116047--

From java-user-return-22952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 09:12:12 2006
Return-Path: <java-user-return-22952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74694 invoked from network); 26 Aug 2006 09:12:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 09:12:11 -0000
Received: (qmail 22200 invoked by uid 500); 26 Aug 2006 09:12:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22177 invoked by uid 500); 26 Aug 2006 09:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22166 invoked by uid 99); 26 Aug 2006 09:12:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 02:12:05 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of khoon.ee.gan@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 02:12:04 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1084219wxc
        for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 02:11:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fO55DchPWCc4doUduQImH8h+1ygXY8J0A9bY6JZxNixJ2xdbyMFdu1yAjb0vk6GzG6Vd/aYJ1oPNes9QSzjjzHvitAg64nfidBW7nyx6ODaAqEIn5xNN6MfRtJHSsavOPQ2qznyZTkSD+J4Mu0k6yDgKyEnRi5nY31aJV4O3+ZQ=
Received: by 10.70.42.15 with SMTP id p15mr5970918wxp;
        Sat, 26 Aug 2006 02:11:43 -0700 (PDT)
Received: by 10.70.48.5 with HTTP; Sat, 26 Aug 2006 02:11:43 -0700 (PDT)
Message-ID: <85c493340608260211r71b7d089p465b31dd51d79f25@mail.gmail.com>
Date: Sat, 26 Aug 2006 17:11:43 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to combine multiple fields to a single field for indexing
In-Reply-To: <C5311C92-9CAB-421E-A64F-B8EEAF164503@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_119772_29457041.1156583503639"
References: <44EC75E0.4050301@wolfram.com>
	 <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com>
	 <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com>
	 <733777220608240005i1fc4b3f7qadb1c47529c5774f@mail.gmail.com>
	 <C5311C92-9CAB-421E-A64F-B8EEAF164503@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_119772_29457041.1156583503639
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erik,

"Given the position increment gap between instances of same-named
fields that is now part of Lucene, I recommend using multiple field
instances instead."

Did you mean ... recommend "NOT" using multiple field ?

If we want to do query like "name:John" or boasting of Fields ... then we
have to use multiple field instances, right ?


On 8/24/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> Yeah, I used a cruder form by appending all the text together into a
> single string with a space separator in that LIA example.
>
> Given the position increment gap between instances of same-named
> fields that is now part of Lucene, I recommend using multiple field
> instances instead.
>
>        Erik
>
>
>
> On Aug 24, 2006, at 3:05 AM, Gopikrishnan Subramani wrote:
> > Erik's has used a space as the field separator. May be you can use a
> > different field separator that your analyzer won't eat up, so that
> > will
> > change the token position by 1.
> >
> > Gopi
> >
> > On 8/24/06, KEGan <khoon.ee.gan@gmail.com> wrote:
> >>
> >> Erik,
> >>
> >> What is generally the reason for indexing both individual fields,
> >> and the
> >> general-purpose "content" field ?
> >>
> >> Also, if we search in the general-purpose "content" field, wouldnt
> >> this
> >> problem occurs. Let say we have 2 fields and the following values:
> >>
> >> name : John Smith
> >> food  : subway sandwich
> >>
> >> So the general-purpose "content" would have the following values:
> >>
> >> John Smith subway sandwich
> >>
> >> Hence, if the user search for "smith subway" (with quotation), the
> >> said
> >> document will be returned. On the other hand, if both fields were
> >> indexed
> >> seperately, this document would not be returned, since there is no
> >> field
> >> that contain the value "smith subway".
> >>
> >> How do we go about this problem ?
> >>
> >>
> >> On 8/24/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >> >
> >> >
> >> > On Aug 23, 2006, at 11:36 AM, Suba Suresh wrote:
> >> > > In "Lucene In Action" book it says it is better practice to
> >> combine
> >> > > two fields into one field and index it than use the
> >> > > MultiFieldQueryParser. Do I initially index both the fields and
> >> > > then index them again together? When I index them together do I
> >> > > index the fieldnames or values? Can someone give me an example of
> >> > > how to do it?
> >> >
> >> > What I do is simply index all the fields individually that need
> >> to be
> >> > searchable or just stored, but also index a general-purpose
> >> > "contents" field with all of that same text.
> >> >
> >> > You can add multiple fields of the same name to a document,
> >> making it
> >> > easy to just keep appending to a "contents" field for a document.
> >> > You can see how this is done in the Lucene in Action code in the
> >> > TestDataDocumentHandler.java - however I took a cruder approach and
> >> > appended the fields together with a space in between them rather
> >> than
> >> > using the multiple valued field approach.  Either technique will
> >> work
> >> > just fine.
> >> >
> >> >        Erik
> >> >
> >> >
> >> >
> >> ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_119772_29457041.1156583503639--

From java-user-return-22953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 11:48:49 2006
Return-Path: <java-user-return-22953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22870 invoked from network); 26 Aug 2006 11:48:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 11:48:46 -0000
Received: (qmail 54125 invoked by uid 500); 26 Aug 2006 11:48:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54091 invoked by uid 500); 26 Aug 2006 11:48:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54080 invoked by uid 99); 26 Aug 2006 11:48:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 04:48:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 04:48:38 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 656F8DA077B
	for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 07:48:16 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Sat, 26 Aug 2006 07:48:17 -0400
X-Sasl-enc: OvA2p/codYBdHPMXg9qARcQ9iRRXMZtZbDjfsGd5xwm/ 1156592896
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id AE0E5C9E9
	for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 07:48:16 -0400 (EDT)
Message-ID: <44F034FF.4050108@mikemccandless.com>
Date: Sat, 26 Aug 2006 07:48:15 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
References: <d8050f240608260025u14ce9fe7jac44f45d02940acc@mail.gmail.com>
In-Reply-To: <d8050f240608260025u14ce9fe7jac44f45d02940acc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jason Polites wrote:
> Hi all,
> 
> When indexing with multiple threads, and under heavy load, I get the
> following exception:
> 
> java.io.IOException: Access is denied
>    at java.io.WinNTFileSystem.createFileExclusively(Native Method)
>    at java.io.File.createNewFile(File.java:850)
>    at org.apache.lucene.store.FSDirectory$1.obtain(FSDirectory.java:363)
>    at org.apache.lucene.store.Lock.obtain(Lock.java:63)
> 
> I am using the Compass framework from Open Symphony, however this simply
> sits on top of Lucene and the folks at Open Symphony have assured me that
> the access to Lucene indexes within their framework is appropriately
> synchronized.  In either case, I would have thought Lucene should be
> managing its locks regardless of how the indexes are accessed (within the
> same JVM at least).

Are you also running searchers against this index?  Are they re-init'ing 
frequently or being opened and then held open?

This looks similar to http://issues.apache.org/jira/browse/LUCENE-665 
(that was just opened) as well as other issues in the past, but in these 
cases there are usually also IndexReaders/Searchers against the index. 
Could you try the patch to FSDirectory.java (in that issue) and see if 
it helps?

> There is a bug report on the Sun website for this issue:
> 
> http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6325169

I think that bug is probably a different issue.

> Should the line "lockFile.createNewFile();" be within some form of
> synchronizion block?

Good question ... however, in your use case (the commits that 
IndexWriter is doing) the code above Lock.obtain is already 
synchronized(directory) so it's only one thread that can make it down 
into the Lock.obtain method.  So I don't believe adding synchronization 
in this method will help you.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 12:07:13 2006
Return-Path: <java-user-return-22954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28477 invoked from network); 26 Aug 2006 12:07:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 12:07:11 -0000
Received: (qmail 64610 invoked by uid 500); 26 Aug 2006 12:07:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64574 invoked by uid 500); 26 Aug 2006 12:07:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64562 invoked by uid 99); 26 Aug 2006 12:07:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 05:07:06 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of drjat320@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 05:07:05 -0700
Received: by py-out-1112.google.com with SMTP id w49so1400533pyg
        for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 05:06:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uItKH4RJNGCaN9IOCkWQRHYw1EX7noTXGvNue9BV6ReQWsziLSiXhb9kKJM6aa7OSxqO9fXrB6XX3c7emAcLsS6QqdcXiXEAM856fZRrg8UKq1X9LnOkVk0BFQfSalVeg5bCsaGveBIpbfePCAk/djA+BedlC+aBKivRkHVVedE=
Received: by 10.64.241.3 with SMTP id o3mr4887642qbh;
        Sat, 26 Aug 2006 05:06:44 -0700 (PDT)
Received: by 10.65.160.20 with HTTP; Sat, 26 Aug 2006 05:06:44 -0700 (PDT)
Message-ID: <288e77f30608260506r704469c7y7b30939309af8e4e@mail.gmail.com>
Date: Sat, 26 Aug 2006 08:06:44 -0400
From: "d rj" <drjat320@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sharing Documents between Lucene and DotLucene
In-Reply-To: <0fea01c6c892$37ca67f0$a8674c09@aroushlt>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102903_1252729.1156594004278"
References: <0fea01c6c892$37ca67f0$a8674c09@aroushlt>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_102903_1252729.1156594004278
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

George.

I am wondering if there is a way to share Document objects between Lucene
and Lucene.Net.  In this client/server structure sharing the same physical
index directory is not possible (the client is on a remote machine w/ only
http access to the server).

By marshalling Document objects from Lucene to Lucene.Net I am curious to
know if any one has created, for example, a webservice that allows the
transfer of Document object from Lucene to Lucene.Net.  For example if the
Document class implemented XMLSerializable one could simply marshal the
Document to XML, serialize, and transfer it the client which would then do
the same steps in reverse to reconstruct the object.  The Document could
then be added to the Lucene.Net index.

Thanks.
-drj


On 8/25/06, George Aroush <george@aroush.net> wrote:
>
> Hi,
>
> I am the developer and maintainer of Lucene.Net.
>
> DotLucene is the old name, Lucene.Net is the official name.  You can find
> out more about Lucene.Net by visiting this link:
> http://incubator.apache.org/lucene.net/
>
> I am not sure what you mean by "marshall Document objects from Java to
> C#".
> However, if mean sharing an index that's created by Jakarta Lucene be
> searched/updated by Lucene.Net and via-vise, then the answer is yes.  In
> fact, if you share the lock file, you can have concurrent access and
> update
> to the Lucene index from the Jakarta Lucene and Lucene.Net
>
> As part of Lucene.Net release, I always test and validate this test-case.
>
> Regards,
>
> -- George Aroush
>
>
> -----Original Message-----
> From: d rj [mailto:drjat320@gmail.com]
> Sent: Friday, August 25, 2006 5:33 PM
> To: java-user@lucene.apache.org
> Subject: Sharing Documents between Lucene and DotLucene
>
> Hello-
>
> I am just wondering if any one has encountered any good strategies for
> sharing search records between a Linux based server using Lucene and a
> Windows based client using DotLucene.
>
> I am doing all the indexing on the server ( i.e. the master index is
> contained on the server) and I would like to transfer parts of that index
> across the wire to a client.
>
> Presently I am creating a temporary sub-index on the server, adding the
> appropriate Document objects to that index, then transferring the the
> entire
> index to the client which then merges the index into any existing index it
> may already have.  However, I would like to avoid building/transferring a
> sub-index.
>
> I would like to know if anyone has attempted to directly marshall Document
> objects from Java to C#.  Or if there are any other good approaches
> sharing
> individual Document objects between Lucene and DotLucene.
>
> Thanks.
> -drj
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_102903_1252729.1156594004278--

From java-user-return-22955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 15:56:31 2006
Return-Path: <java-user-return-22955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94521 invoked from network); 26 Aug 2006 15:56:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 15:56:22 -0000
Received: (qmail 947 invoked by uid 500); 26 Aug 2006 15:56:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 910 invoked by uid 500); 26 Aug 2006 15:56:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 883 invoked by uid 99); 26 Aug 2006 15:56:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 08:56:15 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 08:56:14 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1150983wxc
        for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 08:55:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i2r2op30vX8iL/iUtniKcTBPXnysMpCWhxUmG5Jbbrpdu2nsXiiBySEB/W2uhKuODkzhTqV+qV0bHOc16lsL4XCrmuJiDnoAqJ8/cxbT66ZqaItbRkVlZuEOiQBnZ0EK54d6CC/kX/T2FJUi2ifTd1ozWFtXHcsYaZtNcDnpBJo=
Received: by 10.70.125.2 with SMTP id x2mr6480709wxc;
        Sat, 26 Aug 2006 08:55:53 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Sat, 26 Aug 2006 08:55:53 -0700 (PDT)
Message-ID: <d8050f240608260855gc02ca81sb00bb816572b491e@mail.gmail.com>
Date: Sun, 27 Aug 2006 01:55:53 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
In-Reply-To: <44F034FF.4050108@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118781_11009090.1156607753434"
References: <d8050f240608260025u14ce9fe7jac44f45d02940acc@mail.gmail.com>
	 <44F034FF.4050108@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_118781_11009090.1156607753434
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 8/26/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Are you also running searchers against this index?  Are they re-init'ing
> frequently or being opened and then held open?


No searches running in my initial test, although I can't be certain what is
happening under the Compass hood.

This looks similar to http://issues.apache.org/jira/browse/LUCENE-665
> (that was just opened) as well as other issues in the past, but in these
> cases there are usually also IndexReaders/Searchers against the index.
> Could you try the patch to FSDirectory.java (in that issue) and see if
> it helps?


Does look related, although I'm not sure I like the suggested fix.
Detecting a specific exception is always a tricky deal (if only Sun
described error codes in the spec!), but whilst the solution suggested will
almost certainly fix my problem, it seems a little "loose".

I think that bug is probably a different issue.


Roger that.

Good question ... however, in your use case (the commits that
> IndexWriter is doing) the code above Lock.obtain is already
> synchronized(directory) so it's only one thread that can make it down
> into the Lock.obtain method.  So I don't believe adding synchronization
> in this method will help you.


Maybe I'm off-base here, but I'm not sure how you were able to determine
that.  I had to double check, but didn't have the original stack trace (only
the snippet I posted).  When I looked at the source, it seemed that the
Lock.obtain() method (in my case) is being called by "public Lock
makeLock(String name)"  (FSDirectory: line 344); which in turn is called by:

    mergeSegments(int, int) - org.apache.lucene.index.IndexWriter (2
matches)
    unlock(Directory) - org.apache.lucene.index.IndexReader (2 matches)
    IndexWriter(Directory, Analyzer, boolean, boolean) -
org.apache.lucene.index.IndexWriter (2 matches)
    open(Directory, boolean) - org.apache.lucene.index.IndexReader
    isCurrent() - org.apache.lucene.index.IndexReader
    aquireWriteLock() - org.apache.lucene.index.IndexReader
    getCurrentVersion(Directory) - org.apache.lucene.index.IndexReader
    addIndexes(IndexReader[]) - org.apache.lucene.index.IndexWriter (2
matches)
    isLocked(Directory) - org.apache.lucene.index.IndexReader (2 matches)
    commit() - org.apache.lucene.index.IndexReader

Not all of which synchronize on the Directory object.  In my case, the call
is made by:

org.apache.lucene.index.TransIndex.<init>(TransIndex.java:137)

(which oddly enough is not actually part of Lucene, but part of Compass).

This does not appear to provide any index-relative synchronization.

Synchronization at this low level would ensure that outer application layers
would be guaranteed of IO isolation.

Obviously you shouldn't have to bother.  Windows should take care of it, but
in this case it doesn't appear to.

I'll have a deeper look into the Compass source to see if there are any
obvious problem areas in this regard.

Thanks for your help.

------=_Part_118781_11009090.1156607753434--

From java-user-return-22956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 18:22:21 2006
Return-Path: <java-user-return-22956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31742 invoked from network); 26 Aug 2006 18:22:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 18:22:13 -0000
Received: (qmail 4016 invoked by uid 500); 26 Aug 2006 18:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3120 invoked by uid 500); 26 Aug 2006 18:22:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 6998 invoked by uid 99); 26 Aug 2006 13:12:39 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of SRS0=CKb1=CK=netsweeper.com=martin.kobele@srs.kundenserver.de designates 212.227.126.187 as permitted sender)
From: Martin Kobele <martin.kobele@netsweeper.com>
Reply-To: Martin =?iso-8859-1?q?K=F6bele?= <martin.kobele@netsweeper.com>
To: java-user@lucene.apache.org
Subject: How to warm up
Date: Sat, 26 Aug 2006 09:11:33 -0400
User-Agent: KMail/1.9.4
Organization: Netsweeper Inc
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200608260911.33740.martin.kobele@netsweeper.com>
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:936f82de24844ee2d52cb9fc44cfb340
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have read it several times that sometimes it is practical to warm up a 
searcher. What exactly does that mean? Would I simply perform a search 
for "foo bar" or something like that? What happens inside the searcher so 
that it becomes 'warmed up'?

Thank you!

Regards,
Martin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 18:26:18 2006
Return-Path: <java-user-return-22957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32513 invoked from network); 26 Aug 2006 18:26:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 18:26:15 -0000
Received: (qmail 12531 invoked by uid 500); 26 Aug 2006 18:26:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11952 invoked by uid 500); 26 Aug 2006 18:26:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11941 invoked by uid 99); 26 Aug 2006 18:26:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 11:26:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 11:26:07 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C5A4A30EFCD5; Sat, 26 Aug 2006 14:25:46 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 983C930EFCD4
	for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 14:25:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <85c493340608260211r71b7d089p465b31dd51d79f25@mail.gmail.com>
References: <44EC75E0.4050301@wolfram.com> <DD946AF6-069E-4701-8214-070EB04B3C9D@ehatchersolutions.com> <85c493340608231842p67536de4gf760cc276436ab58@mail.gmail.com> <733777220608240005i1fc4b3f7qadb1c47529c5774f@mail.gmail.com> <C5311C92-9CAB-421E-A64F-B8EEAF164503@ehatchersolutions.com> <85c493340608260211r71b7d089p465b31dd51d79f25@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5F233107-D60F-49D1-BDD9-EA4901D9F955@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to combine multiple fields to a single field for indexing
Date: Sat, 26 Aug 2006 14:25:42 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 26, 2006, at 5:11 AM, KEGan wrote:
> Erik,
>
> "Given the position increment gap between instances of same-named
> fields that is now part of Lucene, I recommend using multiple field
> instances instead."
>
> Did you mean ... recommend "NOT" using multiple field ?

I said what I meant accurately.  Comparing building a single  
aggregate search field either by concatenating text into a single  
string and a single field, say "contents" instance, versus multiple  
"contents" instances that could get separated by a position increment  
gap, I recommend the second approach.

But...

> If we want to do query like "name:John" or boasting of Fields ...  
> then we
> have to use multiple field instances, right ?

of course.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 18:30:13 2006
Return-Path: <java-user-return-22958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33054 invoked from network); 26 Aug 2006 18:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 18:30:13 -0000
Received: (qmail 18138 invoked by uid 500); 26 Aug 2006 18:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18112 invoked by uid 500); 26 Aug 2006 18:30:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18101 invoked by uid 99); 26 Aug 2006 18:30:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 11:30:07 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 11:30:06 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4901E30EFCD5; Sat, 26 Aug 2006 14:29:45 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id B24F730EFCD4
	for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 14:29:43 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <288e77f30608260506r704469c7y7b30939309af8e4e@mail.gmail.com>
References: <0fea01c6c892$37ca67f0$a8674c09@aroushlt> <288e77f30608260506r704469c7y7b30939309af8e4e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <500EDC2D-898A-425D-A305-F8B37E67EFFA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sharing Documents between Lucene and DotLucene
Date: Sat, 26 Aug 2006 14:29:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Keep in mind that a very useful aspect of Lucene is that of indexed,  
tokenized, but unstored fields.  Lucene is often used where it is  
impractical to store the original text.  Serializing a document into  
Lucene, then back out can be a lossy operation.

If you're looking for a Lucene-based web service, check out Solr.   
I'm not sure why you'd want to pull from Java Lucene into Lucene.Net  
how you've mentioned.  It'd be interesting to hear more of a  
rationale for this.

	Erik


On Aug 26, 2006, at 8:06 AM, d rj wrote:

> George.
>
> I am wondering if there is a way to share Document objects between  
> Lucene
> and Lucene.Net.  In this client/server structure sharing the same  
> physical
> index directory is not possible (the client is on a remote machine  
> w/ only
> http access to the server).
>
> By marshalling Document objects from Lucene to Lucene.Net I am  
> curious to
> know if any one has created, for example, a webservice that allows the
> transfer of Document object from Lucene to Lucene.Net.  For example  
> if the
> Document class implemented XMLSerializable one could simply marshal  
> the
> Document to XML, serialize, and transfer it the client which would  
> then do
> the same steps in reverse to reconstruct the object.  The Document  
> could
> then be added to the Lucene.Net index.
>
> Thanks.
> -drj
>
>
> On 8/25/06, George Aroush <george@aroush.net> wrote:
>>
>> Hi,
>>
>> I am the developer and maintainer of Lucene.Net.
>>
>> DotLucene is the old name, Lucene.Net is the official name.  You  
>> can find
>> out more about Lucene.Net by visiting this link:
>> http://incubator.apache.org/lucene.net/
>>
>> I am not sure what you mean by "marshall Document objects from  
>> Java to
>> C#".
>> However, if mean sharing an index that's created by Jakarta Lucene be
>> searched/updated by Lucene.Net and via-vise, then the answer is  
>> yes.  In
>> fact, if you share the lock file, you can have concurrent access and
>> update
>> to the Lucene index from the Jakarta Lucene and Lucene.Net
>>
>> As part of Lucene.Net release, I always test and validate this  
>> test-case.
>>
>> Regards,
>>
>> -- George Aroush
>>
>>
>> -----Original Message-----
>> From: d rj [mailto:drjat320@gmail.com]
>> Sent: Friday, August 25, 2006 5:33 PM
>> To: java-user@lucene.apache.org
>> Subject: Sharing Documents between Lucene and DotLucene
>>
>> Hello-
>>
>> I am just wondering if any one has encountered any good strategies  
>> for
>> sharing search records between a Linux based server using Lucene  
>> and a
>> Windows based client using DotLucene.
>>
>> I am doing all the indexing on the server ( i.e. the master index is
>> contained on the server) and I would like to transfer parts of  
>> that index
>> across the wire to a client.
>>
>> Presently I am creating a temporary sub-index on the server,  
>> adding the
>> appropriate Document objects to that index, then transferring the the
>> entire
>> index to the client which then merges the index into any existing  
>> index it
>> may already have.  However, I would like to avoid building/ 
>> transferring a
>> sub-index.
>>
>> I would like to know if anyone has attempted to directly marshall  
>> Document
>> objects from Java to C#.  Or if there are any other good approaches
>> sharing
>> individual Document objects between Lucene and DotLucene.
>>
>> Thanks.
>> -drj
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 19:33:33 2006
Return-Path: <java-user-return-22959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53434 invoked from network); 26 Aug 2006 19:33:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 19:33:28 -0000
Received: (qmail 69963 invoked by uid 500); 26 Aug 2006 19:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69929 invoked by uid 500); 26 Aug 2006 19:33:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69915 invoked by uid 99); 26 Aug 2006 19:33:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 12:33:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paul.borgermans@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 12:33:21 -0700
Received: by nf-out-0910.google.com with SMTP id b2so958895nfe
        for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 12:33:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=gTL8Sk3PPf3z7EjF2gABEzE+gN29X+VQq0ayMi0h500AI8O14dzE/cUqgaOW5O+CBjf8Qamcw7dj83D4AHjfFmBIzU4DPqIXTfKgbfUx+wT5Mxijtd1lJ4G7JSQcuUj6i8F2to6KjeJ0+hs7kyIETD6tOV65BYvXkDQKad21Vyo=
Received: by 10.49.29.2 with SMTP id g2mr6970149nfj;
        Sat, 26 Aug 2006 12:33:00 -0700 (PDT)
Received: by 10.49.27.13 with HTTP; Sat, 26 Aug 2006 12:32:59 -0700 (PDT)
Message-ID: <8c0c601f0608261232w61effc32lcc33143508098aba@mail.gmail.com>
Date: Sat, 26 Aug 2006 21:32:59 +0200
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sharing Documents between Lucene and DotLucene
In-Reply-To: <500EDC2D-898A-425D-A305-F8B37E67EFFA@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0fea01c6c892$37ca67f0$a8674c09@aroushlt>
	 <288e77f30608260506r704469c7y7b30939309af8e4e@mail.gmail.com>
	 <500EDC2D-898A-425D-A305-F8B37E67EFFA@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> how you've mentioned.  It'd be interesting to hear more of a
> rationale for this.

I'm facing the same issue, and here it is about "politics" where the
MS centered IT department suddenly uses lucene.net after seeing the
power of a local implementation based on the original Java version
(and on Linux servers). The next logical question from users is "can I
search across all indexes" where these indexes are located on
different servers and platforms.

Because in our case these indexes are mostly tied to their own realm,
it is not really a problem to present the users with these different
realms (using a custom soap interface in the backend for example). But
I'm looking at a solution where I could use also a multi-searcher by
having a (java-based) searcher instance on these MS servers running
side by side with the lucene.net cousins ... so basically a searcher
which has a "directory" that lives somewhere else on the network.

--paul

-- 
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 19:53:35 2006
Return-Path: <java-user-return-22960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55991 invoked from network); 26 Aug 2006 19:53:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 19:53:35 -0000
Received: (qmail 79593 invoked by uid 500); 26 Aug 2006 19:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79555 invoked by uid 500); 26 Aug 2006 19:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79544 invoked by uid 99); 26 Aug 2006 19:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 12:53:29 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paul.borgermans@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 12:53:28 -0700
Received: by nf-out-0910.google.com with SMTP id b2so960314nfe
        for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 12:53:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=H9EZOBBwOuZN4/2Tp4vzC+xHgioMjpZIZz6MCyzVfqwzjGBOPOsx2pQGHn+9nnByXUyF68/BY/KgNXB0zcwgj16wgFp7n9HuNpoEbwJq+aYD4bFKAe63/mbPY9AJgEzwJfsmorIUxLz0rb8FDYWRAxNU9X/fZnvA97TGQy1VH6I=
Received: by 10.48.162.15 with SMTP id k15mr7004318nfe;
        Sat, 26 Aug 2006 12:53:07 -0700 (PDT)
Received: by 10.49.27.13 with HTTP; Sat, 26 Aug 2006 12:53:07 -0700 (PDT)
Message-ID: <8c0c601f0608261253s75939408w26a44000b48fe296@mail.gmail.com>
Date: Sat, 26 Aug 2006 21:53:07 +0200
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org, 
	"=?ISO-8859-1?Q?Martin_K=F6bele?=" <martin.kobele@netsweeper.com>
Subject: Re: How to warm up
In-Reply-To: <200608260911.33740.martin.kobele@netsweeper.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <200608260911.33740.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

It are mainly the internal caches that are of interest. If you use
sorting other than the default relevance for example, use a warmin up
search that uses a custom sort. You may also look at what happens in
Solr (http://incubator.apache.org/solr/) related to caching.

I use Java Lucene from a PHP based frontend and found that just using
a Java object cache (like ehcache) can speed up searches a lot by
caching filters that implement security rules for instance. I guess
this also applies to pure Java implementations where Lucene does not
caches on its own.

hth

--paul

On 8/26/06, Martin Kobele <martin.kobele@netsweeper.com> wrote:
> Hi,
>
> I have read it several times that sometimes it is practical to warm up a
> searcher. What exactly does that mean? Would I simply perform a search
> for "foo bar" or something like that? What happens inside the searcher so
> that it becomes 'warmed up'?
>
> Thank you!
>
> Regards,
> Martin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 26 23:25:04 2006
Return-Path: <java-user-return-22961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95752 invoked from network); 26 Aug 2006 23:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2006 23:25:04 -0000
Received: (qmail 1786 invoked by uid 500); 26 Aug 2006 23:24:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1745 invoked by uid 500); 26 Aug 2006 23:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1731 invoked by uid 99); 26 Aug 2006 23:24:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 16:24:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 16:24:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A2DE95B778; Sat, 26 Aug 2006 16:24:27 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9A15E7F403;
	Sat, 26 Aug 2006 16:24:27 -0700 (PDT)
Date: Sat, 26 Aug 2006 16:24:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org,
	Martin =?iso-8859-1?q?K=F6bele?= <martin.kobele@netsweeper.com>
Subject: Re: How to warm up
In-Reply-To: <200608260911.33740.martin.kobele@netsweeper.com>
Message-ID: <Pine.LNX.4.58.0608261618240.10662@hal.rescomp.berkeley.edu>
References: <200608260911.33740.martin.kobele@netsweeper.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: searcher. What exactly does that mean? Would I simply perform a search
: for "foo bar" or something like that? What happens inside the searcher so
: that it becomes 'warmed up'?

The key do warming up an index is do execute some *typical* queries.  If
your users typically query the contents and author fields, and sort on
pubDate or score then do at least one query that looks at both of those
fields, and does a sort on pubDate (there's nothing to be warmed with
regards to sorting on score)

the benefits of warming are that any initial "costs" are "paid" in advance
... getting the index files into your OS's filesystem cache is one cost,
building up the FilterCache for sorting is another cost ... i also seem to
recall that SegmentReaders cache every N terms (and their offset in the
file) so it's faster to find a sepcific Term when needed, but i'm not sure
if that is done when the SegmentReader is opened or if it happens the
first time it's asked for a TermEnum.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 05:40:12 2006
Return-Path: <java-user-return-22962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51807 invoked from network); 27 Aug 2006 05:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 05:40:10 -0000
Received: (qmail 88020 invoked by uid 500); 27 Aug 2006 05:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87985 invoked by uid 500); 27 Aug 2006 05:40:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87974 invoked by uid 99); 27 Aug 2006 05:40:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 22:40:05 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hasan.diwan@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 22:40:04 -0700
Received: by nf-out-0910.google.com with SMTP id b2so996983nfe
        for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 22:39:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WrjwPAYKhCA+ftkOcKuSFPtvE3J9+RsNXLLSMOlCqR6FvRgcXHRMgyqkn90Gs+R6SnoqcQCasNmhgfv6Mrgxmij5by/A3oGk2dY2UNJKkMQ0PX7VlPEz1KOj5pCpaeiHiEsxJkkamcn7kT1Awqupyr9ZLav5TPhQjECPsqFOoMU=
Received: by 10.49.55.13 with SMTP id h13mr7433497nfk;
        Sat, 26 Aug 2006 22:39:43 -0700 (PDT)
Received: by 10.49.67.7 with HTTP; Sat, 26 Aug 2006 22:39:42 -0700 (PDT)
Message-ID: <2cda2fc90608262239t1ce9768vaadd12bc3eeb9167@mail.gmail.com>
Date: Sat, 26 Aug 2006 22:39:42 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document Get question
In-Reply-To: <1cbd6f830608240654u21e8d2fesb68af7678864691a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1cbd6f830608240654u21e8d2fesb68af7678864691a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 24/08/06, Mag Gam <magawake@gmail.com> wrote:
> Is it possible to get Document Name, instead of its entire path?
>
> Currently, i have something like this:
> out.println (doc.get ("path"));   // Which gives me /documents/file.txt

doc.get("path").split("/")[doc.get("path").split("/").length - 1]

-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 06:27:44 2006
Return-Path: <java-user-return-22963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56977 invoked from network); 27 Aug 2006 06:27:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 06:27:44 -0000
Received: (qmail 5459 invoked by uid 500); 27 Aug 2006 06:27:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5438 invoked by uid 500); 27 Aug 2006 06:27:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5427 invoked by uid 99); 27 Aug 2006 06:27:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 23:27:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hasan.diwan@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Aug 2006 23:27:37 -0700
Received: by nf-out-0910.google.com with SMTP id b2so999547nfe
        for <java-user@lucene.apache.org>; Sat, 26 Aug 2006 23:27:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=j0HCSimOs/3ajSUKq0O1UOAYsGtXFJhZlK4oo5CpEVyUhb+jw9c3gAdLG98cu6tABeC0PLKxqbCPTQRNOk8KaUQscTyuOk/tOvWlTlSWVLmVe6quJeAOjV7rY9+eONa3NZQB2m+pl5cjcG7J0lIkAiIEGvCXQQxtMsugjQSXIrs=
Received: by 10.49.8.1 with SMTP id l1mr7456183nfi;
        Sat, 26 Aug 2006 23:27:16 -0700 (PDT)
Received: by 10.49.67.7 with HTTP; Sat, 26 Aug 2006 23:27:16 -0700 (PDT)
Message-ID: <2cda2fc90608262327v2132da3bhff69ddd2968af8cf@mail.gmail.com>
Date: Sat, 26 Aug 2006 23:27:16 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Stat Functions
In-Reply-To: <1cbd6f830608250444t5978788cs7045b76a2086192b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1cbd6f830608250444t5978788cs7045b76a2086192b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 25/08/06, Mag Gam <magawake@gmail.com> wrote:
> 1) When it was created
> 2) Size in MB of the index
> 3) If I can get the size, date of each file in the index. For example: I
> index 100 files, is it possible for me to get their name, size, and date
> when the last modification of that file (similar to a unix "ls -la
> /path/to/file)

You can get all this using the stat() system call. There's a sample of
designing a JNI wrapper at
http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html.
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 10:54:16 2006
Return-Path: <java-user-return-22964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15925 invoked from network); 27 Aug 2006 10:54:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 10:54:15 -0000
Received: (qmail 20622 invoked by uid 500); 27 Aug 2006 10:54:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20599 invoked by uid 500); 27 Aug 2006 10:54:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20588 invoked by uid 99); 27 Aug 2006 10:54:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 03:54:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 03:54:08 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 03F4CDA002C
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 06:53:46 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Sun, 27 Aug 2006 06:53:46 -0400
X-Sasl-enc: v2bbM2CTFe00i7OO5rtlC/mO3UJbJ5dh4rAiyQ/QYfnO 1156676026
Received: from [192.168.1.202] (pool-72-93-213-68.bstnma.fios.verizon.net [72.93.213.68])
	by mail.messagingengine.com (Postfix) with ESMTP id 55E9C12E8
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 06:53:46 -0400 (EDT)
Message-ID: <44F179B5.5070709@mikemccandless.com>
Date: Sun, 27 Aug 2006 06:53:41 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
References: <d8050f240608260025u14ce9fe7jac44f45d02940acc@mail.gmail.com>	 <44F034FF.4050108@mikemccandless.com> <d8050f240608260855gc02ca81sb00bb816572b491e@mail.gmail.com>
In-Reply-To: <d8050f240608260855gc02ca81sb00bb816572b491e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jason Polites wrote:

>> Are you also running searchers against this index?  Are they re-init'ing
>> frequently or being opened and then held open?
> 
> 
> No searches running in my initial test, although I can't be certain what is
> happening under the Compass hood.

OK.

> This looks similar to http://issues.apache.org/jira/browse/LUCENE-665
>> (that was just opened) as well as other issues in the past, but in these
>> cases there are usually also IndexReaders/Searchers against the index.
>> Could you try the patch to FSDirectory.java (in that issue) and see if
>> it helps?
> 
> 
> Does look related, although I'm not sure I like the suggested fix.
> Detecting a specific exception is always a tricky deal (if only Sun
> described error codes in the spec!), but whilst the solution suggested will
> almost certainly fix my problem, it seems a little "loose".
> 
> I think that bug is probably a different issue.

Agreed, it's not a very clean fix.  I'd really love to get to the root 
cause in your case (and from that bug).  I'm unable to reproduce that 
bug on my Windows XP machine ...

> Good question ... however, in your use case (the commits that
>> IndexWriter is doing) the code above Lock.obtain is already
>> synchronized(directory) so it's only one thread that can make it down
>> into the Lock.obtain method.  So I don't believe adding synchronization
>> in this method will help you.
> 
> 
> Maybe I'm off-base here, but I'm not sure how you were able to determine
> that.  I had to double check, but didn't have the original stack trace 
> (only
> the snippet I posted).  When I looked at the source, it seemed that the
> Lock.obtain() method (in my case) is being called by "public Lock
> makeLock(String name)"  (FSDirectory: line 344); which in turn is called 
> by:

I'm sorry, you are correct: I had assumed your case was the commit lock 
ant it was coming through the standard IndexWriter commit paths (under 
ther Lock.With() calls).  In fact, even in standard Lucene sources, the 
write lock obtain is not synchronized.

> Not all of which synchronize on the Directory object.  In my case, the call
> is made by:
> 
> org.apache.lucene.index.TransIndex.<init>(TransIndex.java:137)
> 
> (which oddly enough is not actually part of Lucene, but part of Compass).
> 
> This does not appear to provide any index-relative synchronization.

Ahh, OK.  It's interesting that compass acquires the lock directly 
itself.  That line is actually acquiring the write lock.

> Synchronization at this low level would ensure that outer application 
> layers
> would be guaranteed of IO isolation.

Agreed, this really hinges on whether java.io.File.createNewFile is 
thread safe.  I would assume/hope/expect that it would be (??) but alas 
  the javadocs don't say one way or another.

> Obviously you shouldn't have to bother.  Windows should take care of it, 
> but
> in this case it doesn't appear to.

Oh: if you add "synchronized" to the Lock.obtain method, does this in 
fact completely fix your issue?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 15:19:36 2006
Return-Path: <java-user-return-22965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75569 invoked from network); 27 Aug 2006 15:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 15:19:35 -0000
Received: (qmail 81138 invoked by uid 500); 27 Aug 2006 15:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81083 invoked by uid 500); 27 Aug 2006 15:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81065 invoked by uid 99); 27 Aug 2006 15:19:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 08:19:28 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 08:19:27 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1366757wxc
        for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 08:19:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qvT/YRVClQrq8JFlxyMDHi1GaxW1ysqk23/Gybiu8RbCGBbGBeppoc5QYN/uwR6Jy7BOXX3pHbdhLeFK2JU2nlsaqcLUIv5To+n/0rUowW5izNzxpGe5PYvNr1g7Ud3iYcI/488zxHMB4Uc3s/hIQ43Sn2YqE+CSOMDWjN/kkTY=
Received: by 10.90.63.16 with SMTP id l16mr853669aga;
        Sun, 27 Aug 2006 08:19:06 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Sun, 27 Aug 2006 08:19:06 -0700 (PDT)
Message-ID: <1cbd6f830608270819y7cd23b60o409fae6d0c3eaf6f@mail.gmail.com>
Date: Sun, 27 Aug 2006 11:19:06 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Any 2.0 examples yet?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2105_7533308.1156691946868"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2105_7533308.1156691946868
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

While searching the net for 2.0 API examples, I noticed there aren't that
many. The only example I have seen is the stock example. Are there any
tutorials or example codes out there?

Tia

------=_Part_2105_7533308.1156691946868--

From java-user-return-22966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 15:19:48 2006
Return-Path: <java-user-return-22966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75949 invoked from network); 27 Aug 2006 15:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 15:19:48 -0000
Received: (qmail 83187 invoked by uid 500); 27 Aug 2006 15:19:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83165 invoked by uid 500); 27 Aug 2006 15:19:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83154 invoked by uid 99); 27 Aug 2006 15:19:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 08:19:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 08:19:40 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GHMPw-00053W-22
	for java-user@lucene.apache.org; Sun, 27 Aug 2006 08:19:20 -0700
Message-ID: <6007759.post@talk.nabble.com>
Date: Sun, 27 Aug 2006 08:19:20 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: ParallelReader fails on Deletion
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

I'm using a parallelreader to hold on two indicies. There have to be updated
everyday.

When I'm performing a deletion e.g. parallelreader.delete(New
Term("ID","100)), the documents are still there.

When i do the some with normal indexreader e.g. indexreader.delete(New
Term("ID","100)) it works.

Thanks a lot for your help :-))
-- 
View this message in context: http://www.nabble.com/ParallelReader-fails-on-Deletion-tf2172816.html#a6007759
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 16:06:07 2006
Return-Path: <java-user-return-22967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81861 invoked from network); 27 Aug 2006 16:05:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 16:05:58 -0000
Received: (qmail 6860 invoked by uid 500); 27 Aug 2006 16:05:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6834 invoked by uid 500); 27 Aug 2006 16:05:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6823 invoked by uid 99); 27 Aug 2006 16:05:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 09:05:53 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO nz-out-0102.google.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 09:05:52 -0700
Received: by nz-out-0102.google.com with SMTP id z6so767673nzd
        for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 09:05:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=kLCYasfXFo7bSq22YhxCyS3qCd2l5/+5o1dDFVXbwHvNgHkLnVnxClBAEJ/LRmOM3gGEA/FK3N7mrz2vQNV7xmcen7yjP1P2gTH5BuWTB/hm6jCUJD3w6S6/SffVH6qD94AokYbIlE9wOnlFCL3MuvhvY3sxQHXV1YPsb4NoK3g=
Received: by 10.35.93.15 with SMTP id v15mr10177066pyl;
        Sun, 27 Aug 2006 09:05:31 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Sun, 27 Aug 2006 09:05:31 -0700 (PDT)
Message-ID: <c68e39170608270905p57e200f4ib00ee8088e95d699@mail.gmail.com>
Date: Sun, 27 Aug 2006 12:05:31 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
In-Reply-To: <d8050f240608260855gc02ca81sb00bb816572b491e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <d8050f240608260025u14ce9fe7jac44f45d02940acc@mail.gmail.com>
	 <44F034FF.4050108@mikemccandless.com>
	 <d8050f240608260855gc02ca81sb00bb816572b491e@mail.gmail.com>
X-Google-Sender-Auth: 36643d4b3b491204
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/26/06, Jason Polites <jason.polites@gmail.com> wrote:
> Synchronization at this low level would ensure that outer application layers
> would be guaranteed of IO isolation.

That still wouldn't solve two JVMs (or even two webapps) trying to
grab the same lock and getting an exception, correct?

It seems like it's possible to immediately get an IOException while
opening an IndexReader or IndexWriter w/o the wait/retry logic kicking
in.  So perhaps IOException should be caught by obtain() and false
returned (i.e. treated as a failure to aquire)?

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 16:36:39 2006
Return-Path: <java-user-return-22968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86390 invoked from network); 27 Aug 2006 16:36:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 16:36:37 -0000
Received: (qmail 25747 invoked by uid 500); 27 Aug 2006 16:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25708 invoked by uid 500); 27 Aug 2006 16:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25697 invoked by uid 99); 27 Aug 2006 16:36:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 09:36:29 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 09:36:28 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1380700wxc
        for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 09:36:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PiI7BNUSbOLIPoWD03zn3Ap0tUlsZRzOq0xvbgLr/KbfDaL36F4UyX2NL3bKO2KeboJYZeo69KT1e11yu2AlCjct+HQvvt80rgZPejhhTC4pdxucr2GwxVTxG9CMCoFV29KsvaUzMKzTjCVEDm7Oqy7P817YZTCjpnQ5Rm4LD4E=
Received: by 10.70.116.1 with SMTP id o1mr7842172wxc;
        Sun, 27 Aug 2006 09:36:07 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Sun, 27 Aug 2006 09:36:07 -0700 (PDT)
Message-ID: <d8050f240608270936y1c2c69c6rb2d05e1e4a09d755@mail.gmail.com>
Date: Mon, 28 Aug 2006 02:36:07 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
In-Reply-To: <c68e39170608270905p57e200f4ib00ee8088e95d699@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_126592_304912.1156696567395"
References: <d8050f240608260025u14ce9fe7jac44f45d02940acc@mail.gmail.com>
	 <44F034FF.4050108@mikemccandless.com>
	 <d8050f240608260855gc02ca81sb00bb816572b491e@mail.gmail.com>
	 <c68e39170608270905p57e200f4ib00ee8088e95d699@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_126592_304912.1156696567395
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would have thought that simultaneous cross-JVM access to an index was
outside of scope of the core Lucene API (although it would be great), but
maybe the file system basis allows for this (?).

I like the idea of catching IOExceptions and returning false.  Conceptually,
failing to obtain a lock due to any reason can be thought of as the same
thing, regardless of the reason (so long as its logged).

Seems like the simplest solution too.

On 8/28/06, Yonik Seeley <yonik@apache.org> wrote:
>
> On 8/26/06, Jason Polites <jason.polites@gmail.com> wrote:
> > Synchronization at this low level would ensure that outer application
> layers
> > would be guaranteed of IO isolation.
>
> That still wouldn't solve two JVMs (or even two webapps) trying to
> grab the same lock and getting an exception, correct?
>
> It seems like it's possible to immediately get an IOException while
> opening an IndexReader or IndexWriter w/o the wait/retry logic kicking
> in.  So perhaps IOException should be caught by obtain() and false
> returned (i.e. treated as a failure to aquire)?
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search
> server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_126592_304912.1156696567395--

From java-user-return-22969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 16:38:42 2006
Return-Path: <java-user-return-22969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87933 invoked from network); 27 Aug 2006 16:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 16:38:42 -0000
Received: (qmail 29137 invoked by uid 500); 27 Aug 2006 16:38:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29104 invoked by uid 500); 27 Aug 2006 16:38:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29093 invoked by uid 99); 27 Aug 2006 16:38:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 09:38:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 09:38:34 -0700
Received: by py-out-1112.google.com with SMTP id w49so1770205pyg
        for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 09:38:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VAoeZ9VHXraTPsmG3TLihQh+jFs+FnnpBhkdG1JWKB+4DqCLkNBXJWYadaFm4Wo9J5BDx0JQvL4YriuHRscBDnbiDmbbEevxKUfJInedk6RqBMgxh+rafSnVMKycn4L7xNoaL0JSWoY8rltbay2wbqVGAJN3/yhvLOqU59ZtZyg=
Received: by 10.35.8.1 with SMTP id l1mr10289597pyi;
        Sun, 27 Aug 2006 09:38:14 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 27 Aug 2006 09:38:14 -0700 (PDT)
Message-ID: <359a92830608270938o354f99acm1f1c0b17a99f08b4@mail.gmail.com>
Date: Sun, 27 Aug 2006 12:38:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ParallelReader fails on Deletion
In-Reply-To: <6007759.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_168805_20420627.1156696694086"
References: <6007759.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_168805_20420627.1156696694086
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The first place I'd look is whether you're closing your *searcher* between
times in both cases.

If that leads nowhere, I'd make sure I had a copy of Luke so I could
reassure myself that the document was actually in both cases.

After that, I'd think about posting a fragment of both your deletion code
and test case <G>...

Best
Erick

On 8/27/06, neils <neils@gmx.net> wrote:
>
>
> Hi,
>
> I'm using a parallelreader to hold on two indicies. There have to be
> updated
> everyday.
>
> When I'm performing a deletion e.g. parallelreader.delete(New
> Term("ID","100)), the documents are still there.
>
> When i do the some with normal indexreader e.g. indexreader.delete(New
> Term("ID","100)) it works.
>
> Thanks a lot for your help :-))
> --
> View this message in context:
> http://www.nabble.com/ParallelReader-fails-on-Deletion-tf2172816.html#a6007759
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_168805_20420627.1156696694086--

From java-user-return-22970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 17:45:36 2006
Return-Path: <java-user-return-22970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99304 invoked from network); 27 Aug 2006 17:45:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 17:45:33 -0000
Received: (qmail 66300 invoked by uid 500); 27 Aug 2006 17:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66268 invoked by uid 500); 27 Aug 2006 17:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66256 invoked by uid 99); 27 Aug 2006 17:45:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 10:45:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 10:45:27 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.7/8.13.7) with ESMTP id k7RHj5PJ098804
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 17:45:05 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k7RHnEXB2895896
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 19:49:14 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k7RHj5vE004033
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 19:45:05 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k7RHj5UC004030
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 19:45:05 +0200
In-Reply-To: <d8050f240608270936y1c2c69c6rb2d05e1e4a09d755@mail.gmail.com>
Subject: Re: java.io.IOException: Access is denied on
 java.io.WinNTFileSystem.createFileExclusively
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sun, 27 Aug 2006 10:43:36 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 27/08/2006 20:49:14
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"Jason Polites" <jason.polites@gmail.com> wrote on 27/08/2006 09:36:07:

> I would have thought that simultaneous cross-JVM access to an index was
> outside of scope of the core Lucene API (although it would be great), but
> maybe the file system basis allows for this (?).

Lucene does protect you from mis-accessing its indexes from separate jvms
or even, to a certain extent, separate machines.

>
> I like the idea of catching IOExceptions and returning false.
Conceptually,
> failing to obtain a lock due to any reason can be thought of as the same
> thing, regardless of the reason (so long as its logged).
>
> Seems like the simplest solution too.

I agree with this - as this would be a more correct behavior when the lock
could not be obtained.

However it would not handle the problem that I had, and I think you had too
- that due to some temporary situation in the  OS/FS there is a temporary
inability to perform an action that should be possible - i.e. creating a
new file, or renaming another. Application writers would be "surprised" to
be having to deal with this failure to obtain a lock with no "expected"
reason.

Since this painful situation is evidently possible, and since this is so
frustrating for Lucene users to get their index corrupted in this case, I
still think it is worth the effort of spending some 30ms or so on the rare
occasions that this happen, and retry, trying to bypass this temporary
obstacle.

Did you try that patch? Does it work for you?

I plan to submit an update to that patch later today accommodating your
comments (and others); It will most probably retry for IOExceptions (not
analyzing the exception text); also, it would return false if the *retry*
for obtain() failed with exception.

If you can try out this patch it would be very valuable information to know
whether it prevents the problem or not.

Thanks,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 18:05:43 2006
Return-Path: <java-user-return-22971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2728 invoked from network); 27 Aug 2006 18:05:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 18:05:43 -0000
Received: (qmail 82266 invoked by uid 500); 27 Aug 2006 18:05:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81714 invoked by uid 500); 27 Aug 2006 18:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81703 invoked by uid 99); 27 Aug 2006 18:05:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 11:05:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 11:05:36 -0700
Received: by py-out-1112.google.com with SMTP id w49so1785468pyg
        for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 11:05:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=q/PRemSrTRR3FcsR8iHVbKduGKVZI7xZH0lDtZX5PcJCZPH5gGWpj19eO7VLsSaDGKtZqibEL0QDsPDbLaOdkykpyCJho7TJ0P0octX4vtGVQfBguzl7jiRObqt3BmfU8YJ1efTDSHPsxJj4WinbNHFcoV9xgzcOx4+454feYGE=
Received: by 10.35.97.17 with SMTP id z17mr10367790pyl;
        Sun, 27 Aug 2006 11:05:13 -0700 (PDT)
Received: by 10.35.11.9 with HTTP; Sun, 27 Aug 2006 11:05:13 -0700 (PDT)
Message-ID: <c68e39170608271105h54f4e401mefb592db1f1124a3@mail.gmail.com>
Date: Sun, 27 Aug 2006 14:05:13 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
In-Reply-To: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <d8050f240608270936y1c2c69c6rb2d05e1e4a09d755@mail.gmail.com>
	 <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>
X-Google-Sender-Auth: 030e46f60aa0459a
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/27/06, Doron Cohen <DORONC@il.ibm.com> wrote:
> I plan to submit an update to that patch later today accommodating your
> comments (and others); It will most probably retry for IOExceptions (not
> analyzing the exception text); also, it would return false if the *retry*
> for obtain() failed with exception.

Lock.obtain(timeout) already has retry/timeout logic around
Lock.obtain(), so wouldn't the change to return false on an
IOException be sufficient?  User level applications should then use
obtain(timeout) rather than obtain() unless they want to do
timeout/retry logic themselves.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 19:36:02 2006
Return-Path: <java-user-return-22972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27461 invoked from network); 27 Aug 2006 19:36:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 19:36:02 -0000
Received: (qmail 77591 invoked by uid 500); 27 Aug 2006 19:35:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76806 invoked by uid 500); 27 Aug 2006 19:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76795 invoked by uid 99); 27 Aug 2006 19:35:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 12:35:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 12:35:55 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GHQPt-0001sX-Sv
	for java-user@lucene.apache.org; Sun, 27 Aug 2006 12:35:34 -0700
Message-ID: <6010089.post@talk.nabble.com>
Date: Sun, 27 Aug 2006 12:35:33 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: ParallelReader fails on Deletion
In-Reply-To: <359a92830608270938o354f99acm1f1c0b17a99f08b4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
References: <6007759.post@talk.nabble.com> <359a92830608270938o354f99acm1f1c0b17a99f08b4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Erik,

i made some several test as follows:

Create new indicies with only on document with one Value ("ID"=100).
Open it with parallelreader.
Delete Document with parallelreader.delete(new Term("ID","100"))
Close Reader with parallelreader.close.

After this i open the index with luke and could the that document is still
inside the index.

I repeated the test with and normal indexreader and saw that document was
deleted.




Erick Erickson wrote:
> 
> The first place I'd look is whether you're closing your *searcher* between
> times in both cases.
> 
> If that leads nowhere, I'd make sure I had a copy of Luke so I could
> reassure myself that the document was actually in both cases.
> 
> After that, I'd think about posting a fragment of both your deletion code
> and test case <G>...
> 
> Best
> Erick
> 
> On 8/27/06, neils <neils@gmx.net> wrote:
>>
>>
>> Hi,
>>
>> I'm using a parallelreader to hold on two indicies. There have to be
>> updated
>> everyday.
>>
>> When I'm performing a deletion e.g. parallelreader.delete(New
>> Term("ID","100)), the documents are still there.
>>
>> When i do the some with normal indexreader e.g. indexreader.delete(New
>> Term("ID","100)) it works.
>>
>> Thanks a lot for your help :-))
>> --
>> View this message in context:
>> http://www.nabble.com/ParallelReader-fails-on-Deletion-tf2172816.html#a6007759
>> Sent from the Lucene - Java Users forum at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/ParallelReader-fails-on-Deletion-tf2172816.html#a6010089
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 20:11:33 2006
Return-Path: <java-user-return-22973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36922 invoked from network); 27 Aug 2006 20:11:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 20:11:29 -0000
Received: (qmail 12477 invoked by uid 500); 27 Aug 2006 20:11:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11504 invoked by uid 500); 27 Aug 2006 20:11:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11493 invoked by uid 99); 27 Aug 2006 20:11:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:11:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:11:21 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id D26A3DA0CDE
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 16:10:59 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Sun, 27 Aug 2006 16:11:00 -0400
X-Sasl-enc: GWwAS3rg5fvksV8yVDlb/nQdWTkdV6mgSZGKlF/Ewt07 1156709460
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 72644CA7E
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 16:11:00 -0400 (EDT)
Message-ID: <44F1FC53.9070403@mikemccandless.com>
Date: Sun, 27 Aug 2006 16:10:59 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Any 2.0 examples yet?
References: <1cbd6f830608270819y7cd23b60o409fae6d0c3eaf6f@mail.gmail.com>
In-Reply-To: <1cbd6f830608270819y7cd23b60o409fae6d0c3eaf6f@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> While searching the net for 2.0 API examples, I noticed there aren't that
> many. The only example I have seen is the stock example. Are there any
> tutorials or example codes out there?

You can start with the getting started page which walks through the demo 
code:

   http://lucene.apache.org/java/docs/gettingstarted.html

I'm not sure what you mean by "2.0 API examples": not all that much 
changed in the 2.0 release of Lucene besides removing deprecated APIs. 
I don't know of any tutorials that are "focused" on 2.0.

There are a number of good introductory articles to Lucene that Google 
will find for you...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 20:19:54 2006
Return-Path: <java-user-return-22974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37949 invoked from network); 27 Aug 2006 20:19:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 20:19:53 -0000
Received: (qmail 16936 invoked by uid 500); 27 Aug 2006 20:19:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16899 invoked by uid 500); 27 Aug 2006 20:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16888 invoked by uid 99); 27 Aug 2006 20:19:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:19:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:19:47 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F34D930EFCD4; Sun, 27 Aug 2006 16:19:26 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 1C85730EFCD4
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 16:19:19 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44F1FC53.9070403@mikemccandless.com>
References: <1cbd6f830608270819y7cd23b60o409fae6d0c3eaf6f@mail.gmail.com> <44F1FC53.9070403@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <61973596-61B3-4655-8019-4A6E0F890ABB@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Any 2.0 examples yet?
Date: Sun, 27 Aug 2006 16:19:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Also let me also emphasize the test cases that are built into the  
Lucene codebase itself.  These are premium *always working* examples  
of how to use specific parts of Lucene in an isolated fashion.    
Check out Lucene's trunk (or 2.0 branch) via Subversion and enjoy.

	Erik

p.s. I had updated all of the "Lucene in Action" code to be 2.0  
compliant a while back but have never published it.  I'll make a  
point of doing that as soon as possible and posting its location here.

On Aug 27, 2006, at 4:10 PM, Michael McCandless wrote:

>
>> While searching the net for 2.0 API examples, I noticed there  
>> aren't that
>> many. The only example I have seen is the stock example. Are there  
>> any
>> tutorials or example codes out there?
>
> You can start with the getting started page which walks through the  
> demo code:
>
>   http://lucene.apache.org/java/docs/gettingstarted.html
>
> I'm not sure what you mean by "2.0 API examples": not all that much  
> changed in the 2.0 release of Lucene besides removing deprecated  
> APIs. I don't know of any tutorials that are "focused" on 2.0.
>
> There are a number of good introductory articles to Lucene that  
> Google will find for you...
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 20:32:54 2006
Return-Path: <java-user-return-22975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40323 invoked from network); 27 Aug 2006 20:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 20:32:54 -0000
Received: (qmail 28364 invoked by uid 500); 27 Aug 2006 20:32:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28325 invoked by uid 500); 27 Aug 2006 20:32:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28313 invoked by uid 99); 27 Aug 2006 20:32:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:32:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:32:48 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id C7F56DA0B80
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 16:32:26 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Sun, 27 Aug 2006 16:32:27 -0400
X-Sasl-enc: 4b3rsj8YI4attAVkGAPBYrSyRrWhsmLFAPLc7n98Q3rU 1156710747
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 7DD54CA79
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 16:32:27 -0400 (EDT)
Message-ID: <44F2015A.1080204@mikemccandless.com>
Date: Sun, 27 Aug 2006 16:32:26 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Any 2.0 examples yet?
References: <1cbd6f830608270819y7cd23b60o409fae6d0c3eaf6f@mail.gmail.com> <44F1FC53.9070403@mikemccandless.com> <61973596-61B3-4655-8019-4A6E0F890ABB@ehatchersolutions.com>
In-Reply-To: <61973596-61B3-4655-8019-4A6E0F890ABB@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> Also let me also emphasize the test cases that are built into the Lucene 
> codebase itself.  These are premium *always working* examples of how to 
> use specific parts of Lucene in an isolated fashion.   Check out 
> Lucene's trunk (or 2.0 branch) via Subversion and enjoy.

Here here!!

I found the examples in LIA (all junit test cases) excellent and in 
general units tests are an awesome way to learn the APIs.  Also, they 
only grow/improve (and track API changes) with time so they'll continue 
to be a great way to learn the APIs.

> p.s. I had updated all of the "Lucene in Action" code to be 2.0 
> compliant a while back but have never published it.  I'll make a point 
> of doing that as soon as possible and posting its location here.

This would be fantastic.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 20:34:10 2006
Return-Path: <java-user-return-22976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40549 invoked from network); 27 Aug 2006 20:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 20:34:01 -0000
Received: (qmail 33022 invoked by uid 500); 27 Aug 2006 20:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32768 invoked by uid 500); 27 Aug 2006 20:33:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32752 invoked by uid 99); 27 Aug 2006 20:33:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:33:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:33:54 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 78F0BDA0B80
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 16:33:33 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Sun, 27 Aug 2006 16:33:34 -0400
X-Sasl-enc: BHYfh3dthHTXwf0T0LWXGn6IygLh+7adl8+qXK4cMj9s 1156710814
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id E8F6AAED9
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 16:33:33 -0400 (EDT)
Message-ID: <44F2019C.3050705@mikemccandless.com>
Date: Sun, 27 Aug 2006 16:33:32 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
References: <d8050f240608270936y1c2c69c6rb2d05e1e4a09d755@mail.gmail.com>	 <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com> <c68e39170608271105h54f4e401mefb592db1f1124a3@mail.gmail.com>
In-Reply-To: <c68e39170608271105h54f4e401mefb592db1f1124a3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> On 8/27/06, Doron Cohen <DORONC@il.ibm.com> wrote:
>> I plan to submit an update to that patch later today accommodating your
>> comments (and others); It will most probably retry for IOExceptions (not
>> analyzing the exception text); also, it would return false if the *retry*
>> for obtain() failed with exception.
> 
> Lock.obtain(timeout) already has retry/timeout logic around
> Lock.obtain(), so wouldn't the change to return false on an
> IOException be sufficient?  User level applications should then use
> obtain(timeout) rather than obtain() unless they want to do
> timeout/retry logic themselves.

I would agree: the retry/timeout logic already exists above so let's 
just return false on hitting any IOException when calling createNewFile.

(Doron, this still wouldn't fix the other strange "across the board" IO 
problems you see on Windows.  I'd really like to reproduce this but so 
far (running your stress test) I can't -- are you sure it's not a virus 
checker or something?).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 20:46:34 2006
Return-Path: <java-user-return-22977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41848 invoked from network); 27 Aug 2006 20:46:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 20:46:34 -0000
Received: (qmail 40390 invoked by uid 500); 27 Aug 2006 20:46:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40365 invoked by uid 500); 27 Aug 2006 20:46:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40344 invoked by uid 99); 27 Aug 2006 20:46:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:46:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 13:46:28 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 7F965D9F325
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 16:46:06 -0400 (EDT)
Received: from heartbeat1.internal ([10.202.2.160])
  by frontend3.internal (MEProxy); Sun, 27 Aug 2006 16:46:07 -0400
X-Sasl-enc: d0RfWD/aMOBl5PkIMsHfXqjOApWcojFRfPI3NkkNaQKM 1156711567
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 2B39815853
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 16:46:07 -0400 (EDT)
Message-ID: <44F2048D.6060208@mikemccandless.com>
Date: Sun, 27 Aug 2006 16:46:05 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
References: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>
In-Reply-To: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doron Cohen wrote:
> "Jason Polites" <jason.polites@gmail.com> wrote on 27/08/2006 09:36:07:
> 
>> I would have thought that simultaneous cross-JVM access to an index was
>> outside of scope of the core Lucene API (although it would be great), but
>> maybe the file system basis allows for this (?).
> 
> Lucene does protect you from mis-accessing its indexes from separate jvms
> or even, to a certain extent, separate machines.

I would strengthen this statement: it is within scope of Lucene to allow 
cross-JVM access to the same underlying index.  Lucene has file-based 
locks for precisely this reason.  Lucene in Action (the book) has a 
great discussion about concurrency.

It is also within scope for cross-JVM access when the JVMs are running 
on different machines, however, there are known problems (related to 
locking) when the index resides on an NFS mounted filesystems (and 
possibly other remote-mounted filesystems).  We are trying to address 
these known issues (see java-dev for the gory details) but it's not 
clear when these fixes will become available.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 27 21:07:05 2006
Return-Path: <java-user-return-22978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44830 invoked from network); 27 Aug 2006 21:07:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2006 21:07:04 -0000
Received: (qmail 53984 invoked by uid 500); 27 Aug 2006 21:06:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53961 invoked by uid 500); 27 Aug 2006 21:06:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53950 invoked by uid 99); 27 Aug 2006 21:06:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 14:06:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 14:06:57 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GHRq1-0004bD-CA
	for java-user@lucene.apache.org; Sun, 27 Aug 2006 14:06:37 -0700
Message-ID: <6011016.post@talk.nabble.com>
Date: Sun, 27 Aug 2006 14:06:37 -0700 (PDT)
From: AlexeyG <agorokhov@z-techcorp.com>
To: java-user@lucene.apache.org
Subject: Lucene displaying results in the order they were added
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Is there a way to update a document in the Index without causing any change
to the order in which it comes up in searches?

I have a bunch of search results being returned as a result of a query. 
This is done in order to allow users to "request boost" - they have a
drop-down box with options slight/average/high boost to select from for
every search result.  Selecting an option results in a field being added to
the document called "BOOST_REQUEST", which is alter used to review requets
and add boost.

The problem is, the document gets overwritten when users request boost. 
This results in that document automaticallty jumping to the end of search
results that have the same score.

Is there a way to update a document in the Index without causing any change
to the order in which it comes up in searches?

Thank You.
-- 
View this message in context: http://www.nabble.com/Lucene-displaying-results-in-the-order-they-were-added-tf2173858.html#a6011016
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 01:41:22 2006
Return-Path: <java-user-return-22979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10171 invoked from network); 28 Aug 2006 01:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 01:41:22 -0000
Received: (qmail 46227 invoked by uid 500); 28 Aug 2006 01:41:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45939 invoked by uid 500); 28 Aug 2006 01:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45928 invoked by uid 99); 28 Aug 2006 01:41:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 18:41:15 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 18:41:14 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1479714wxc
        for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 18:40:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=icKieDOm4BtUaBPkDL8zXYwuytBpwyzISCs5GW8mpncoB6JuKSY75TCLcxoew/KZ6/1bumPgB694+2sVvb+jWfNaaBRolPcqXx6Ls8s0J0hiFleFiqEYe2I+jtlRV5Mo3x2BdCh1avDiHXdHBWrZFE1k4SFobJAqjlx//d5fskw=
Received: by 10.90.52.2 with SMTP id z2mr870972agz;
        Sun, 27 Aug 2006 18:40:54 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Sun, 27 Aug 2006 18:40:53 -0700 (PDT)
Message-ID: <1cbd6f830608271840q5fef8b1fqebc66651eff31586@mail.gmail.com>
Date: Sun, 27 Aug 2006 21:40:53 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Any 2.0 examples yet?
In-Reply-To: <44F2015A.1080204@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4695_3608587.1156729253705"
References: <1cbd6f830608270819y7cd23b60o409fae6d0c3eaf6f@mail.gmail.com>
	 <44F1FC53.9070403@mikemccandless.com>
	 <61973596-61B3-4655-8019-4A6E0F890ABB@ehatchersolutions.com>
	 <44F2015A.1080204@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4695_3608587.1156729253705
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the replies.
I should of waited a little bit longer for the Genie book (LIA) :-)




On 8/27/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Erik Hatcher wrote:
> > Also let me also emphasize the test cases that are built into the Lucene
> > codebase itself.  These are premium *always working* examples of how to
> > use specific parts of Lucene in an isolated fashion.   Check out
> > Lucene's trunk (or 2.0 branch) via Subversion and enjoy.
>
> Here here!!
>
> I found the examples in LIA (all junit test cases) excellent and in
> general units tests are an awesome way to learn the APIs.  Also, they
> only grow/improve (and track API changes) with time so they'll continue
> to be a great way to learn the APIs.
>
> > p.s. I had updated all of the "Lucene in Action" code to be 2.0
> > compliant a while back but have never published it.  I'll make a point
> > of doing that as soon as possible and posting its location here.
>
> This would be fantastic.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4695_3608587.1156729253705--

From java-user-return-22980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 04:00:55 2006
Return-Path: <java-user-return-22980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43035 invoked from network); 28 Aug 2006 04:00:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 04:00:51 -0000
Received: (qmail 70323 invoked by uid 500); 28 Aug 2006 04:00:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69917 invoked by uid 500); 28 Aug 2006 04:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69906 invoked by uid 99); 28 Aug 2006 04:00:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 21:00:45 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 21:00:44 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1509003wxc
        for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 21:00:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AH28kX0diDtLKMK4Kgjp6vcP4MxzI0rxxaDlMXL6ivbr3rWuM9jwxoYLqQlcaBscQFyNa8dzDIic+JTTH4Xh9vq1nsGyWbBnoaWfH45bxnFhZ6DujZcRYnzTQ4UQH8TOmebLt4M9x2Qx5u4Bf5DFMksPOLsLlbKg0rE7QBYtnB8=
Received: by 10.70.70.7 with SMTP id s7mr8535849wxa;
        Sun, 27 Aug 2006 21:00:21 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Sun, 27 Aug 2006 21:00:21 -0700 (PDT)
Message-ID: <d8050f240608272100n2c1de4e0j56e04a1ee63d014e@mail.gmail.com>
Date: Mon, 28 Aug 2006 14:00:21 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
In-Reply-To: <44F2048D.6060208@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_131997_6509485.1156737621788"
References: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>
	 <44F2048D.6060208@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_131997_6509485.1156737621788
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Wow.  That's awesome.

I had just assumed (foolishly) that cross-JVM access would be problematic.
Maybe I should read the manual ;)

Cross machine access could be solved with some RMI magic.. but
performance/scalability may be an issue.

On 8/28/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Doron Cohen wrote:
> > "Jason Polites" <jason.polites@gmail.com> wrote on 27/08/2006 09:36:07:
> >
> >> I would have thought that simultaneous cross-JVM access to an index was
> >> outside of scope of the core Lucene API (although it would be great),
> but
> >> maybe the file system basis allows for this (?).
> >
> > Lucene does protect you from mis-accessing its indexes from separate
> jvms
> > or even, to a certain extent, separate machines.
>
> I would strengthen this statement: it is within scope of Lucene to allow
> cross-JVM access to the same underlying index.  Lucene has file-based
> locks for precisely this reason.  Lucene in Action (the book) has a
> great discussion about concurrency.
>
> It is also within scope for cross-JVM access when the JVMs are running
> on different machines, however, there are known problems (related to
> locking) when the index resides on an NFS mounted filesystems (and
> possibly other remote-mounted filesystems).  We are trying to address
> these known issues (see java-dev for the gory details) but it's not
> clear when these fixes will become available.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_131997_6509485.1156737621788--

From java-user-return-22981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 04:05:11 2006
Return-Path: <java-user-return-22981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43528 invoked from network); 28 Aug 2006 04:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 04:05:11 -0000
Received: (qmail 76566 invoked by uid 500); 28 Aug 2006 04:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76542 invoked by uid 500); 28 Aug 2006 04:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76531 invoked by uid 99); 28 Aug 2006 04:05:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 21:05:05 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 21:05:04 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1509986wxc
        for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 21:04:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mA3dk4I+2J5WZFKpEtIY3zUMugSuzrTKulCYCHGLr9H5sAyMiLbSuXGUIinsK+TGgFNrhVSxsbaaxat4+vhSmwVEJ6PoTslR25Bo1Hu7WFVb5s0seVc71mbGpTwMfeLzQNs+Wi3dCJR3Rm/R/MR9xFDu1r0nf/JP84Lv53RtG/M=
Received: by 10.70.21.4 with SMTP id 4mr8519593wxu;
        Sun, 27 Aug 2006 21:04:43 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Sun, 27 Aug 2006 21:04:43 -0700 (PDT)
Message-ID: <d8050f240608272104if6ad49fgb81095eb8859c46f@mail.gmail.com>
Date: Mon, 28 Aug 2006 14:04:43 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene displaying results in the order they were added
In-Reply-To: <6011016.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_132041_2326198.1156737883911"
References: <6011016.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_132041_2326198.1156737883911
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Not sure what the desired end result is here, but you shouldn't need to
update the document jut to give it a boost factor.  This can be done in the
query string used to search the index.

As for updating affecting search order, I don't think you can assume any
guarantees in this regard.  You're probably better off sorting the results
manually.  The simplest solution would be to add a timestamp to each
document when it's created (milliseconds since epoch for example), then sort
by that.  This will have an impact on speed, but in my experience it's
marginal.

On 8/28/06, AlexeyG <agorokhov@z-techcorp.com> wrote:
>
>
> Is there a way to update a document in the Index without causing any
> change
> to the order in which it comes up in searches?
>
> I have a bunch of search results being returned as a result of a query.
> This is done in order to allow users to "request boost" - they have a
> drop-down box with options slight/average/high boost to select from for
> every search result.  Selecting an option results in a field being added
> to
> the document called "BOOST_REQUEST", which is alter used to review requets
> and add boost.
>
> The problem is, the document gets overwritten when users request boost.
> This results in that document automaticallty jumping to the end of search
> results that have the same score.
>
> Is there a way to update a document in the Index without causing any
> change
> to the order in which it comes up in searches?
>
> Thank You.
> --
> View this message in context:
> http://www.nabble.com/Lucene-displaying-results-in-the-order-they-were-added-tf2173858.html#a6011016
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_132041_2326198.1156737883911--

From java-user-return-22982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 04:30:27 2006
Return-Path: <java-user-return-22982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46316 invoked from network); 28 Aug 2006 04:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 04:30:27 -0000
Received: (qmail 87434 invoked by uid 500); 28 Aug 2006 04:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87408 invoked by uid 500); 28 Aug 2006 04:30:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87397 invoked by uid 99); 28 Aug 2006 04:30:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 21:30:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Aug 2006 21:30:21 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A70BE5B795; Sun, 27 Aug 2006 21:29:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9E8A77F403
	for <java-user@lucene.apache.org>; Sun, 27 Aug 2006 21:29:43 -0700 (PDT)
Date: Sun, 27 Aug 2006 21:29:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on
 java.io.WinNTFileSystem.createFileExclusively
In-Reply-To: <d8050f240608272100n2c1de4e0j56e04a1ee63d014e@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0608272128370.25413@hal.rescomp.berkeley.edu>
References: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>
  <44F2048D.6060208@mikemccandless.com> <d8050f240608272100n2c1de4e0j56e04a1ee63d014e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I had just assumed (foolishly) that cross-JVM access would be problematic.

nope .. the whole point of the lockfiles is to deal with multiple JVMs ...
otherwise Lucene locking could be accomplished entirely with
synchronization.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 08:11:02 2006
Return-Path: <java-user-return-22983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12859 invoked from network); 28 Aug 2006 08:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 08:10:54 -0000
Received: (qmail 40309 invoked by uid 500); 28 Aug 2006 08:10:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40281 invoked by uid 500); 28 Aug 2006 08:10:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40247 invoked by uid 99); 28 Aug 2006 08:10:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 01:10:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 01:10:41 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GHcCK-0000y7-La
	for java-user@lucene.apache.org; Mon, 28 Aug 2006 01:10:20 -0700
Message-ID: <6016090.post@talk.nabble.com>
Date: Mon, 28 Aug 2006 01:10:20 -0700 (PDT)
From: John Pailet <9i7svel2zr6uujn@jetable.org>
To: java-user@lucene.apache.org
Subject: Sorting based on a selling rate
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I want to implement a specific search based on a selling rate.

Let me explain this:

I have a book collection in my store.
I index my books like that:

- One Lucene Document by book
- Two Lucene Fields in the document
	- TITLE OF THE BOOK
	- KEYWORDS OF THE BOOK

The keyword field is a BOOSTED field (* 1000)

This is working fine :-)

Now, I would like to search and sort my books according to the selling rate
of the 

book.
Exemple:

If the user search for: "Java", the first books that lucene will return must
be the 

best sellers books based on this specific search: "Java"

If the user search for "Java and .net", the first books that lucene will
return must 

bze the best sellers books based on this specific search: "Java and .net"

For each query, I have a programm that records the product selling rate
based on the 

specifiq query.

For exemple:

Query: "Java" -> [ProductId:123, rate: 23%], [ProductId:222, rate: 15%], 

[ProductId:567, rate: 7%]...


Query: "Java and .net" -> [ProductId:99, rate: 45%], [ProductId:194, rate:
30%], 

[ProductId:93, rate: 10%]...

How can I return books based on the selling rate (for a specific query)
Must I developp a specifiq handler after the basic Lucene search and sort it 

programmatically, or is it possible to implement a mechanism at Index or
search time ?

Thank you for your help and sorry for my bad english ;-)

John
-- 
View this message in context: http://www.nabble.com/Sorting-based-on-a-selling-rate-tf2175860.html#a6016090
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 10:09:14 2006
Return-Path: <java-user-return-22984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53765 invoked from network); 28 Aug 2006 10:09:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 10:09:13 -0000
Received: (qmail 74718 invoked by uid 500); 28 Aug 2006 10:09:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74685 invoked by uid 500); 28 Aug 2006 10:09:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74674 invoked by uid 99); 28 Aug 2006 10:09:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 03:09:06 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 03:09:05 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1588471wxc
        for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 03:08:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C5gbiRwQLgpqT1qL0jH3El60NG2e+2KpbuNobdIozTIrUO1UvMHVyIVh6nGNdIIvWRWWnEFLQAxLgYR/IrM77bSla/cOOHEwTDL9UAQLuNL6aVr2H8MJskJQpHDbIsQPN56zTiZI2RcxHCCinOjRpE0Jnr7GQaAfY0a8wYTURsU=
Received: by 10.70.89.1 with SMTP id m1mr9016417wxb;
        Mon, 28 Aug 2006 03:08:43 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Mon, 28 Aug 2006 03:08:42 -0700 (PDT)
Message-ID: <d8050f240608280308h5b364771la38407f6a6315f3@mail.gmail.com>
Date: Mon, 28 Aug 2006 20:08:42 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
In-Reply-To: <Pine.LNX.4.58.0608272128370.25413@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_135348_7329526.1156759722938"
References: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>
	 <44F2048D.6060208@mikemccandless.com>
	 <d8050f240608272100n2c1de4e0j56e04a1ee63d014e@mail.gmail.com>
	 <Pine.LNX.4.58.0608272128370.25413@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_135348_7329526.1156759722938
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yeah.. I had a think about this, and I now remember why I originally came to
the conclusion about cross-JVM access.

When I was adding documents to the index, and searching at the same time
(from a different JVM) I would get the occassional (but regular)
FileNotFoundException.

I don't recall the exact stack trace, but I put it down to cross JVM access
at the time...

On 8/28/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I had just assumed (foolishly) that cross-JVM access would be
> problematic.
>
> nope .. the whole point of the lockfiles is to deal with multiple JVMs ...
> otherwise Lucene locking could be accomplished entirely with
> synchronization.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_135348_7329526.1156759722938--

From java-user-return-22985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 10:35:10 2006
Return-Path: <java-user-return-22985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60620 invoked from network); 28 Aug 2006 10:35:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 10:35:10 -0000
Received: (qmail 11789 invoked by uid 500); 28 Aug 2006 10:35:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11416 invoked by uid 500); 28 Aug 2006 10:35:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11405 invoked by uid 99); 28 Aug 2006 10:35:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 03:35:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 03:35:02 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id A8165DA0776
	for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 06:34:41 -0400 (EDT)
Received: from heartbeat1.internal ([10.202.2.160])
  by frontend3.internal (MEProxy); Mon, 28 Aug 2006 06:34:42 -0400
X-Sasl-enc: p+4Q7XpYahibvfLCBewyt3qCVeBIEya6Sf3+Y0BqQbMx 1156761282
Received: from [10.17.4.91] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id F0D023D84
	for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 06:34:41 -0400 (EDT)
Message-ID: <44F2C6BD.6030402@mikemccandless.com>
Date: Mon, 28 Aug 2006 06:34:37 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
References: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>	 <44F2048D.6060208@mikemccandless.com>	 <d8050f240608272100n2c1de4e0j56e04a1ee63d014e@mail.gmail.com>	 <Pine.LNX.4.58.0608272128370.25413@hal.rescomp.berkeley.edu> <d8050f240608280308h5b364771la38407f6a6315f3@mail.gmail.com>
In-Reply-To: <d8050f240608280308h5b364771la38407f6a6315f3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jason Polites wrote:
> Yeah.. I had a think about this, and I now remember why I originally 
> came to
> the conclusion about cross-JVM access.
> 
> When I was adding documents to the index, and searching at the same time
> (from a different JVM) I would get the occassional (but regular)
> FileNotFoundException.
> 
> I don't recall the exact stack trace, but I put it down to cross JVM access
> at the time...

Was this with an index accessed via NFS or Samba or other remote 
filesystem?  I'd be interested in getting the details if you still have 
/ remember them.

We very much want to get use cases like to work correctly but there are 
known issues with locking against at least NFS.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 10:42:46 2006
Return-Path: <java-user-return-22986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63635 invoked from network); 28 Aug 2006 10:42:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 10:42:36 -0000
Received: (qmail 25321 invoked by uid 500); 28 Aug 2006 10:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25283 invoked by uid 500); 28 Aug 2006 10:42:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25256 invoked by uid 99); 28 Aug 2006 10:42:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 03:42:29 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 03:42:28 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1595958wxc
        for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 03:42:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HixCnOuonHin8N1ZN1F/mNpFAN8j8vIvnxbe22mgNlwIcz3f6YEQCKDAgWj5Py7Fn3mlMZDcS0e832yu5tSZSzojE5oNCbHKBdwe0qc2aEsXIjGsk+AIld9KvuqDJO0qLugmK7jOewFbpg+0JtnZvqdhDXmBdOG35bfK+wBxtzw=
Received: by 10.70.122.13 with SMTP id u13mr9026008wxc;
        Mon, 28 Aug 2006 03:42:07 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Mon, 28 Aug 2006 03:42:06 -0700 (PDT)
Message-ID: <d8050f240608280342l4b7211c1u420f42b63c05f0d4@mail.gmail.com>
Date: Mon, 28 Aug 2006 20:42:06 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
In-Reply-To: <44F2C6BD.6030402@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_135692_13190885.1156761726060"
References: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>
	 <44F2048D.6060208@mikemccandless.com>
	 <d8050f240608272100n2c1de4e0j56e04a1ee63d014e@mail.gmail.com>
	 <Pine.LNX.4.58.0608272128370.25413@hal.rescomp.berkeley.edu>
	 <d8050f240608280308h5b364771la38407f6a6315f3@mail.gmail.com>
	 <44F2C6BD.6030402@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_135692_13190885.1156761726060
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It was definately NTFS, unfortunately it was a while ago, and most of the
code has changed.

Basically I had a multi-threaded app where multiple threads were writing to
the index (but exclusively... that is, I had my own locking mechanism
preventing concurrent writes).

In a separate JVM, I had a fairly standard IndexSearcher based component via
a web interface.  Rapid hits on "refresh" in the browser executing a search
while indexing was being performed resulted in occasional but recurring
FileNotFound errors.

I recall that it was a "segments" file reported as not found.. if that
helps.

On 8/28/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Jason Polites wrote:
> > Yeah.. I had a think about this, and I now remember why I originally
> > came to
> > the conclusion about cross-JVM access.
> >
> > When I was adding documents to the index, and searching at the same time
> > (from a different JVM) I would get the occassional (but regular)
> > FileNotFoundException.
> >
> > I don't recall the exact stack trace, but I put it down to cross JVM
> access
> > at the time...
>
> Was this with an index accessed via NFS or Samba or other remote
> filesystem?  I'd be interested in getting the details if you still have
> / remember them.
>
> We very much want to get use cases like to work correctly but there are
> known issues with locking against at least NFS.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_135692_13190885.1156761726060--

From java-user-return-22987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 13:53:02 2006
Return-Path: <java-user-return-22987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50806 invoked from network); 28 Aug 2006 13:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 13:53:01 -0000
Received: (qmail 6924 invoked by uid 500); 28 Aug 2006 13:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6899 invoked by uid 500); 28 Aug 2006 13:52:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6888 invoked by uid 99); 28 Aug 2006 13:52:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 06:52:54 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of drjat320@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 06:52:53 -0700
Received: by wr-out-0506.google.com with SMTP id i3so336999wra
        for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 06:52:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gnoPbUAeCLKpT+d0nxIIUdmcYHu4lnZT1Vp8uUKYV41A2/caH+9asYrNWXlDIZKozZU0648+Wootc+jQdSxFP/mzRfhG8LhZKxwAHSuGN0boSe3IKIu9wxl3jezxGdcdtA0SV3CpB/ePy5b4sLSK7sHk+4DfSQZjBCddjAvd+jU=
Received: by 10.65.81.19 with SMTP id i19mr6849993qbl;
        Mon, 28 Aug 2006 06:52:30 -0700 (PDT)
Received: by 10.64.91.13 with HTTP; Mon, 28 Aug 2006 06:52:29 -0700 (PDT)
Message-ID: <288e77f30608280652n54e9286clbe8210c979edb05e@mail.gmail.com>
Date: Mon, 28 Aug 2006 09:52:30 -0400
From: "d rj" <drjat320@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sharing Documents between Lucene and DotLucene
In-Reply-To: <500EDC2D-898A-425D-A305-F8B37E67EFFA@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_133045_7945512.1156773150014"
References: <0fea01c6c892$37ca67f0$a8674c09@aroushlt>
	 <288e77f30608260506r704469c7y7b30939309af8e4e@mail.gmail.com>
	 <500EDC2D-898A-425D-A305-F8B37E67EFFA@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_133045_7945512.1156773150014
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Erik-

The primary reason for building a smaller client side sub-index is quality
of service.  Building a client side index will avoid both network latency
and network outage issues.  Rather than have the client application attempt
to query the server's Lucene index for search results I would like to
transfer a minimal index to the client that can be queried in a fast and
100% reliable manner regardless of network latency, network connectivity and
server load.

That is the general rationale.

Presently I have a webservice that creates a temporary sub index on the
server and streams it across to the requesting client.  This method is
functional although less than ideal.

So, I was wondering if anyone had any approaches to transferring Documents
between Lucene and Lucene.Net.  Or if there is something similar to an xsdl
schema for the Document class that would allow one to transfer Document via
a webservice between Lucene and Lucene.Net.

Thanks.
-drj


On 8/26/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> Keep in mind that a very useful aspect of Lucene is that of indexed,
> tokenized, but unstored fields.  Lucene is often used where it is
> impractical to store the original text.  Serializing a document into
> Lucene, then back out can be a lossy operation.
>
> If you're looking for a Lucene-based web service, check out Solr.
> I'm not sure why you'd want to pull from Java Lucene into Lucene.Net
> how you've mentioned.  It'd be interesting to hear more of a
> rationale for this.
>
>         Erik
>
>
> On Aug 26, 2006, at 8:06 AM, d rj wrote:
>
> > George.
> >
> > I am wondering if there is a way to share Document objects between
> > Lucene
> > and Lucene.Net.  In this client/server structure sharing the same
> > physical
> > index directory is not possible (the client is on a remote machine
> > w/ only
> > http access to the server).
> >
> > By marshalling Document objects from Lucene to Lucene.Net I am
> > curious to
> > know if any one has created, for example, a webservice that allows the
> > transfer of Document object from Lucene to Lucene.Net.  For example
> > if the
> > Document class implemented XMLSerializable one could simply marshal
> > the
> > Document to XML, serialize, and transfer it the client which would
> > then do
> > the same steps in reverse to reconstruct the object.  The Document
> > could
> > then be added to the Lucene.Net index.
> >
> > Thanks.
> > -drj
> >
> >
> > On 8/25/06, George Aroush <george@aroush.net> wrote:
> >>
> >> Hi,
> >>
> >> I am the developer and maintainer of Lucene.Net.
> >>
> >> DotLucene is the old name, Lucene.Net is the official name.  You
> >> can find
> >> out more about Lucene.Net by visiting this link:
> >> http://incubator.apache.org/lucene.net/
> >>
> >> I am not sure what you mean by "marshall Document objects from
> >> Java to
> >> C#".
> >> However, if mean sharing an index that's created by Jakarta Lucene be
> >> searched/updated by Lucene.Net and via-vise, then the answer is
> >> yes.  In
> >> fact, if you share the lock file, you can have concurrent access and
> >> update
> >> to the Lucene index from the Jakarta Lucene and Lucene.Net
> >>
> >> As part of Lucene.Net release, I always test and validate this
> >> test-case.
> >>
> >> Regards,
> >>
> >> -- George Aroush
> >>
> >>
> >> -----Original Message-----
> >> From: d rj [mailto:drjat320@gmail.com]
> >> Sent: Friday, August 25, 2006 5:33 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Sharing Documents between Lucene and DotLucene
> >>
> >> Hello-
> >>
> >> I am just wondering if any one has encountered any good strategies
> >> for
> >> sharing search records between a Linux based server using Lucene
> >> and a
> >> Windows based client using DotLucene.
> >>
> >> I am doing all the indexing on the server ( i.e. the master index is
> >> contained on the server) and I would like to transfer parts of
> >> that index
> >> across the wire to a client.
> >>
> >> Presently I am creating a temporary sub-index on the server,
> >> adding the
> >> appropriate Document objects to that index, then transferring the the
> >> entire
> >> index to the client which then merges the index into any existing
> >> index it
> >> may already have.  However, I would like to avoid building/
> >> transferring a
> >> sub-index.
> >>
> >> I would like to know if anyone has attempted to directly marshall
> >> Document
> >> objects from Java to C#.  Or if there are any other good approaches
> >> sharing
> >> individual Document objects between Lucene and DotLucene.
> >>
> >> Thanks.
> >> -drj
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_133045_7945512.1156773150014--

From java-user-return-22988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 16:15:52 2006
Return-Path: <java-user-return-22988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4634 invoked from network); 28 Aug 2006 16:15:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 16:15:44 -0000
Received: (qmail 26524 invoked by uid 500); 28 Aug 2006 16:15:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26088 invoked by uid 500); 28 Aug 2006 16:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26077 invoked by uid 99); 28 Aug 2006 16:15:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 09:15:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.221] (HELO smtpout05-04.prod.mesa1.secureserver.net) (64.202.165.221)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 28 Aug 2006 09:15:35 -0700
Received: (qmail 16877 invoked from network); 28 Aug 2006 16:15:13 -0000
Received: from unknown (209.204.147.43)
  by smtpout05-04.prod.mesa1.secureserver.net (64.202.165.221) with ESMTP; 28 Aug 2006 16:15:13 -0000
From: "Dejan Nenov" <dejannenov@jollyobject.com>
To: <java-user@lucene.apache.org>
Subject: RE: Sorting based on a selling rate
Date: Mon, 28 Aug 2006 09:16:08 -0700
Organization: Dejan Nenov Privarte Email
Message-ID: <000001c6cabd$45b57f30$8380a8c0@safarijv.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcbKeXpmc1JubT5sRsuwgcnDqoGjcAAQ4CdA
In-Reply-To: <6016090.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

(excuse the semi-appropriate forum to make this comment in - but it is very
brief and may actually help improve the final Lucene-based app)

You may also like to import popularity data from Amazon using their open
APIs and mix the relevancy between your own popularity score and theirs.

Dejan (affiliated with safaribooksonline)

-----Original Message-----
From: John Pailet [mailto:9i7svel2zr6uujn@jetable.org] 
Sent: Monday, August 28, 2006 1:10 AM
To: java-user@lucene.apache.org
Subject: Sorting based on a selling rate


I want to implement a specific search based on a selling rate.

Let me explain this:

I have a book collection in my store.
I index my books like that:

- One Lucene Document by book
- Two Lucene Fields in the document
	- TITLE OF THE BOOK
	- KEYWORDS OF THE BOOK

The keyword field is a BOOSTED field (* 1000)

This is working fine :-)

Now, I would like to search and sort my books according to the selling rate
of the 

book.
Exemple:

If the user search for: "Java", the first books that lucene will return must
be the 

best sellers books based on this specific search: "Java"

If the user search for "Java and .net", the first books that lucene will
return must 

bze the best sellers books based on this specific search: "Java and .net"

For each query, I have a programm that records the product selling rate
based on the 

specifiq query.

For exemple:

Query: "Java" -> [ProductId:123, rate: 23%], [ProductId:222, rate: 15%], 

[ProductId:567, rate: 7%]...


Query: "Java and .net" -> [ProductId:99, rate: 45%], [ProductId:194, rate:
30%], 

[ProductId:93, rate: 10%]...

How can I return books based on the selling rate (for a specific query)
Must I developp a specifiq handler after the basic Lucene search and sort it


programmatically, or is it possible to implement a mechanism at Index or
search time ?

Thank you for your help and sorry for my bad english ;-)

John
-- 
View this message in context:
http://www.nabble.com/Sorting-based-on-a-selling-rate-tf2175860.html#a601609
0
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 16:18:32 2006
Return-Path: <java-user-return-22989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5932 invoked from network); 28 Aug 2006 16:18:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 16:18:31 -0000
Received: (qmail 35615 invoked by uid 500); 28 Aug 2006 16:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35577 invoked by uid 500); 28 Aug 2006 16:18:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35566 invoked by uid 99); 28 Aug 2006 16:18:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 09:18:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 09:18:24 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id D9408D9F5B5
	for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 12:18:01 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Mon, 28 Aug 2006 12:18:02 -0400
X-Sasl-enc: REE5iWtWjIurQYHxxtfO86JietL3YJw1JjYDGvwLUeQH 1156781882
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 6338AFDF
	for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 12:18:02 -0400 (EDT)
Message-ID: <44F31739.8050404@mikemccandless.com>
Date: Mon, 28 Aug 2006 12:18:01 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: java.io.IOException: Access is denied on java.io.WinNTFileSystem.createFileExclusively
References: <OFC393C607.2B74353A-ON882571D7.005FC6E4-882571D7.00616057@il.ibm.com>	 <44F2048D.6060208@mikemccandless.com>	 <d8050f240608272100n2c1de4e0j56e04a1ee63d014e@mail.gmail.com>	 <Pine.LNX.4.58.0608272128370.25413@hal.rescomp.berkeley.edu>	 <d8050f240608280308h5b364771la38407f6a6315f3@mail.gmail.com>	 <44F2C6BD.6030402@mikemccandless.com> <d8050f240608280342l4b7211c1u420f42b63c05f0d4@mail.gmail.com>
In-Reply-To: <d8050f240608280342l4b7211c1u420f42b63c05f0d4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jason Polites wrote:
> It was definately NTFS, unfortunately it was a while ago, and most of the
> code has changed.
> 
> Basically I had a multi-threaded app where multiple threads were writing to
> the index (but exclusively... that is, I had my own locking mechanism
> preventing concurrent writes).
> 
> In a separate JVM, I had a fairly standard IndexSearcher based component 
> via
> a web interface.  Rapid hits on "refresh" in the browser executing a search
> while indexing was being performed resulted in occasional but recurring
> FileNotFound errors.
> 
> I recall that it was a "segments" file reported as not found.. if that
> helps.

OK thanks for the info.  It's odd that you saw this with a local NTFS 
drive.  I was under the impression that locking worked correctly in that 
case.  Lucene's commit lock is supposed to prevent a searcher from 
init'ing while a writer is writing a new segments file.

One of the things in process (see java-dev for gory details) is to 
switch to the OS native locking that's now available through java.nio. 
Currently Lucene uses java.io.File.createNewFile for locking and the 
javadoc for that method has a spooky warning about not using it for locking.

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 18:43:19 2006
Return-Path: <java-user-return-22990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91718 invoked from network); 28 Aug 2006 18:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 18:43:11 -0000
Received: (qmail 57784 invoked by uid 500); 28 Aug 2006 18:43:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57707 invoked by uid 500); 28 Aug 2006 18:43:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57636 invoked by uid 99); 28 Aug 2006 18:43:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:43:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:42:58 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3288D30EFCD5; Mon, 28 Aug 2006 14:42:38 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id D199130EFCD4
	for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 14:42:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <288e77f30608280652n54e9286clbe8210c979edb05e@mail.gmail.com>
References: <0fea01c6c892$37ca67f0$a8674c09@aroushlt> <288e77f30608260506r704469c7y7b30939309af8e4e@mail.gmail.com> <500EDC2D-898A-425D-A305-F8B37E67EFFA@ehatchersolutions.com> <288e77f30608280652n54e9286clbe8210c979edb05e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <287D83E9-A3EE-440D-B2FB-6231775286D9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sharing Documents between Lucene and DotLucene
Date: Mon, 28 Aug 2006 14:42:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 28, 2006, at 9:52 AM, d rj wrote:
> The primary reason for building a smaller client side sub-index is  
> quality
> of service.  Building a client side index will avoid both network  
> latency
> and network outage issues.  Rather than have the client application  
> attempt
> to query the server's Lucene index for search results I would like to
> transfer a minimal index to the client that can be queried in a  
> fast and
> 100% reliable manner regardless of network latency, network  
> connectivity and
> server load.

What would define the documents in the sub-index?   What about  
building client-specific indexes and transfer the actual index to the  
client rather than pulling out individual documents?

> So, I was wondering if anyone had any approaches to transferring  
> Documents
> between Lucene and Lucene.Net.  Or if there is something similar to  
> an xsdl
> schema for the Document class that would allow one to transfer  
> Document via
> a webservice between Lucene and Lucene.Net.

There really isn't anything special about a Document object - pulling  
its fields into Map would do the trick for transferring it.  But,  
again, what about unstored fields?  What about analysis?  You'd have  
to re-index the a document on the client, which may be an issue to  
keep Java and .NET analyzers in sync exactly with one another.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 18:51:30 2006
Return-Path: <java-user-return-22991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96937 invoked from network); 28 Aug 2006 18:51:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 18:51:29 -0000
Received: (qmail 81782 invoked by uid 500); 28 Aug 2006 18:51:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81756 invoked by uid 500); 28 Aug 2006 18:51:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81745 invoked by uid 99); 28 Aug 2006 18:51:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:51:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 11:51:22 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8D2855B7A8; Mon, 28 Aug 2006 11:50:55 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 865407F403
	for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 11:50:55 -0700 (PDT)
Date: Mon, 28 Aug 2006 11:50:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting based on a selling rate
In-Reply-To: <6016090.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu>
References: <6016090.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Sorting on an integer field can be done using any of the Searcher.search
methods which take a "Sort" object.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 28 19:51:40 2006
Return-Path: <java-user-return-22992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39029 invoked from network); 28 Aug 2006 19:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2006 19:51:39 -0000
Received: (qmail 6124 invoked by uid 500); 28 Aug 2006 19:51:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6083 invoked by uid 500); 28 Aug 2006 19:51:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6072 invoked by uid 99); 28 Aug 2006 19:51:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:51:32 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of drjat320@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Aug 2006 12:51:31 -0700
Received: by nz-out-0102.google.com with SMTP id z6so999806nzd
        for <java-user@lucene.apache.org>; Mon, 28 Aug 2006 12:51:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nZhoM7k38laN+1MgoZDxx5wP/2jxxn8VmbXHUJjYeYn3URdgTCQfxFgys9EoErWYaNyDSSRiY7WyuX0i9TZDo9EvcI03UG+sNA4WyiB/ZovJwLEpSKLx83BcOODQvyFrOv2alN/eH9LIjikn9fLLbxeosfacch9Aqls7mkSNCcs=
Received: by 10.65.250.11 with SMTP id c11mr7475480qbs;
        Mon, 28 Aug 2006 12:51:10 -0700 (PDT)
Received: by 10.64.91.13 with HTTP; Mon, 28 Aug 2006 12:51:10 -0700 (PDT)
Message-ID: <288e77f30608281251v2b7917e1rff20fa16e021486b@mail.gmail.com>
Date: Mon, 28 Aug 2006 15:51:10 -0400
From: "d rj" <drjat320@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sharing Documents between Lucene and DotLucene
In-Reply-To: <287D83E9-A3EE-440D-B2FB-6231775286D9@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_140368_31794344.1156794670688"
References: <0fea01c6c892$37ca67f0$a8674c09@aroushlt>
	 <288e77f30608260506r704469c7y7b30939309af8e4e@mail.gmail.com>
	 <500EDC2D-898A-425D-A305-F8B37E67EFFA@ehatchersolutions.com>
	 <288e77f30608280652n54e9286clbe8210c979edb05e@mail.gmail.com>
	 <287D83E9-A3EE-440D-B2FB-6231775286D9@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_140368_31794344.1156794670688
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Anything could be in the client's sub-index (for example, say if searches
are being done against a large mail archive one may want to keep an local
index of the just the user's to/from as that may be the most often searched
data).

Building the index on the server than transferring it across to the client
is a feasible solution (in fact it is the method that I currently employ).
However, building a temporary index in a temporary directory on the server,
then transferring all files (minimally 3) to the client, then merging this
temporary index into the clients already existing index and cleaning up the
temporary index on both server and client it is not as clean as simply
transferring a Document or list of Documents to a requesting client.
Although it does work.

I think that the best method to transfer Document objects across the wire
from Lucene to Lucene.Net is to write the appropriate xml schema using xsdl,
then write the necessary translation code for both Java and C# that would
marshall Lucene Document objects to schema based Document objects and vise
versa.  The schema based Documents being what is now transferable over the
wire.

This is my current approach.  I wanted to post to the group to know if
schema descriptors for Lucene Documents already exists or if anyone has
employed some other successful technique for transferring Documents from
Lucene to Lucene.Net.

Thanks.

-drj

On 8/28/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Aug 28, 2006, at 9:52 AM, d rj wrote:
> > The primary reason for building a smaller client side sub-index is
> > quality
> > of service.  Building a client side index will avoid both network
> > latency
> > and network outage issues.  Rather than have the client application
> > attempt
> > to query the server's Lucene index for search results I would like to
> > transfer a minimal index to the client that can be queried in a
> > fast and
> > 100% reliable manner regardless of network latency, network
> > connectivity and
> > server load.
>
> What would define the documents in the sub-index?   What about
> building client-specific indexes and transfer the actual index to the
> client rather than pulling out individual documents?
>
> > So, I was wondering if anyone had any approaches to transferring
> > Documents
> > between Lucene and Lucene.Net.  Or if there is something similar to
> > an xsdl
> > schema for the Document class that would allow one to transfer
> > Document via
> > a webservice between Lucene and Lucene.Net.
>
> There really isn't anything special about a Document object - pulling
> its fields into Map would do the trick for transferring it.  But,
> again, what about unstored fields?  What about analysis?  You'd have
> to re-index the a document on the client, which may be an issue to
> keep Java and .NET analyzers in sync exactly with one another.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_140368_31794344.1156794670688--

From java-user-return-22993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 08:10:16 2006
Return-Path: <java-user-return-22993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81437 invoked from network); 29 Aug 2006 08:10:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 08:10:16 -0000
Received: (qmail 39581 invoked by uid 500); 29 Aug 2006 08:10:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39551 invoked by uid 500); 29 Aug 2006 08:10:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39523 invoked by uid 99); 29 Aug 2006 08:10:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 01:10:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 01:10:01 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id k7T89b8h019397
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 11:09:38 +0300
Message-ID: <44F3F64B.8030709@sirma.bg>
Date: Tue, 29 Aug 2006 11:09:47 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Reviving a dead index
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What might be the possible reason for an IndexReader failing to open 
properly,
because it can not find a .fnm file that is expected to be there:

java.io.FileNotFoundException: E:\index4\_1j8s.fnm (The system cannot 
find the file specified)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
    at 
org.apache.lucene.store.FSIndexInput$Descriptor.<init>(FSDirectory.java:425)
    at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:434)
    at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:324)
    at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:56)
    at 
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:144)
    at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:129)
    at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:110)
    at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:154)
    at org.apache.lucene.store.Lock$With.run(Lock.java:109)
    at org.apache.lucene.index.IndexReader.open(IndexReader.java:143)
    at org.apache.lucene.index.IndexReader.open(IndexReader.java:127)
    at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:42)



The only thing that comes to my mind is that last time the indexing 
process was not shut down properly.
Is there a way to revive the index or everything should be reindexed 
from scratch?


Thanks,
Stanislav


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 09:41:27 2006
Return-Path: <java-user-return-22994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11979 invoked from network); 29 Aug 2006 09:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 09:41:26 -0000
Received: (qmail 82966 invoked by uid 500); 29 Aug 2006 09:41:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81982 invoked by uid 500); 29 Aug 2006 09:41:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81966 invoked by uid 99); 29 Aug 2006 09:41:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 02:41:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 02:41:20 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GI05I-0002Nd-53
	for java-user@lucene.apache.org; Tue, 29 Aug 2006 02:40:40 -0700
Message-ID: <6035831.post@talk.nabble.com>
Date: Tue, 29 Aug 2006 02:40:40 -0700 (PDT)
From: John Pailet <9i7svel2zr6uujn@jetable.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting based on a selling rate
In-Reply-To: <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello,

Ok, for the sort object, but my problem is I don't know haox to retrieve (or
store) information of the sell rate of the products (the sell rate deponds
on the QUERY ! The sort is different for each queries.)

I imagine to connect to the DB and get sell rate of products for this
specific query... but connecting to DB at each query is not a right choice
;-)

any idea ?


Chris Hostetter wrote:
> 
> 
> Sorting on an integer field can be done using any of the Searcher.search
> methods which take a "Sort" object.
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Sorting-based-on-a-selling-rate-tf2175860.html#a6035831
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 10:42:04 2006
Return-Path: <java-user-return-22995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31031 invoked from network); 29 Aug 2006 10:41:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 10:41:57 -0000
Received: (qmail 62108 invoked by uid 500); 29 Aug 2006 10:41:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62066 invoked by uid 500); 29 Aug 2006 10:41:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62055 invoked by uid 99); 29 Aug 2006 10:41:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 03:41:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 03:41:49 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C3C0530EFCD3; Tue, 29 Aug 2006 06:41:27 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 1325830EFCD3
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 06:41:18 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <288e77f30608281251v2b7917e1rff20fa16e021486b@mail.gmail.com>
References: <0fea01c6c892$37ca67f0$a8674c09@aroushlt> <288e77f30608260506r704469c7y7b30939309af8e4e@mail.gmail.com> <500EDC2D-898A-425D-A305-F8B37E67EFFA@ehatchersolutions.com> <288e77f30608280652n54e9286clbe8210c979edb05e@mail.gmail.com> <287D83E9-A3EE-440D-B2FB-6231775286D9@ehatchersolutions.com> <288e77f30608281251v2b7917e1rff20fa16e021486b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CA279A58-2216-42CA-9590-70325AB3EB9D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sharing Documents between Lucene and DotLucene
Date: Tue, 29 Aug 2006 06:41:16 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 28, 2006, at 3:51 PM, d rj wrote:
> I think that the best method to transfer Document objects across  
> the wire
> from Lucene to Lucene.Net is to write the appropriate xml schema  
> using xsdl,
> then write the necessary translation code for both Java and C# that  
> would
> marshall Lucene Document objects to schema based Document objects  
> and vise
> versa.  The schema based Documents being what is now transferable  
> over the
> wire.

How about putting Solr on the Java side and using its Document  
serialization?  It is documented here:

	<http://wiki.apache.org/solr/StandardRequestHandler>

You'll even get the datatypes of each field based on the schema  
configuration :)

> This is my current approach.  I wanted to post to the group to know if
> schema descriptors for Lucene Documents already exists or if anyone  
> has
> employed some other successful technique for transferring Documents  
> from
> Lucene to Lucene.Net.

Again, what about the issue of analysis synchronization between the  
two indexes?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 11:32:17 2006
Return-Path: <java-user-return-22996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59082 invoked from network); 29 Aug 2006 11:32:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 11:32:08 -0000
Received: (qmail 48289 invoked by uid 500); 29 Aug 2006 11:32:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48128 invoked by uid 500); 29 Aug 2006 11:32:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48117 invoked by uid 99); 29 Aug 2006 11:32:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 04:32:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 04:32:00 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 4D9F4D9F649
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 07:31:39 -0400 (EDT)
Received: from heartbeat1.internal ([10.202.2.160])
  by frontend3.internal (MEProxy); Tue, 29 Aug 2006 07:31:39 -0400
X-Sasl-enc: gV6B8ajE0of8jrQTBBBqogq3hauuPHqsan4CSAj3QHdF 1156851095
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id E9849391F
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 07:31:34 -0400 (EDT)
Message-ID: <44F42594.3040609@mikemccandless.com>
Date: Tue, 29 Aug 2006 07:31:32 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Reviving a dead index
References: <44F3F64B.8030709@sirma.bg>
In-Reply-To: <44F3F64B.8030709@sirma.bg>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stanislav Jordanov wrote:
> What might be the possible reason for an IndexReader failing to open 
> properly,
> because it can not find a .fnm file that is expected to be there:

This means the segments files is referencing a segment named _1j8s and 
in trying to load that segment, the first thing Lucene does is load the 
"field infos" (_1j8s.fnm).  It tries to do so from a compound file (if 
you have it turned on & it exists), else from the filesystem directly.

Which version of Lucene are you using?  And which OS are you running on?

Is this error easily repeated (not a transient error)?  Ie, 
instantiating an IndexSearcher against your index always causes this 
exception?  Because, this sort of exception is certainly possible when 
Lucene's locking is not working correctly (for exmple over NFS), but in 
that case it's typically very intermittant.

Could you send a list of the files in your index?

> The only thing that comes to my mind is that last time the indexing 
> process was not shut down properly.
> Is there a way to revive the index or everything should be reindexed 
> from scratch?

Hmmm.  It's surprising that an improper shutdown caused this because 
when the IndexWriter commits its change, it first writes all files for 
the new segment and only when that's successful does it write a new 
segments file referencing the newly written segment.  Could you provide 
some more detail about your setup and how the improper shutdown happened?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 12:10:57 2006
Return-Path: <java-user-return-22997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82579 invoked from network); 29 Aug 2006 12:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 12:10:57 -0000
Received: (qmail 16004 invoked by uid 500); 29 Aug 2006 12:10:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15975 invoked by uid 500); 29 Aug 2006 12:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15964 invoked by uid 99); 29 Aug 2006 12:10:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 05:10:50 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of liuping.james@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 05:10:50 -0700
Received: by wr-out-0506.google.com with SMTP id i5so525053wra
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 05:10:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=q8ulnLHmMxY2lkIGpRcVysdT1vS96bpB6aJPwwEOWnbhvtchonTIafkYnC2OAeJwCYH+FdvOFbiOyO5YDjfNiTDqV1KglRG6f7EPPQ3VjhD0kEE2pyK83QxoxitKcWSNb8P5+T9x1Fu4c1eyrCrq1F21YegEdCqh01LLsT1ST4U=
Received: by 10.90.100.6 with SMTP id x6mr1444071agb;
        Tue, 29 Aug 2006 05:10:29 -0700 (PDT)
Received: by 10.90.118.7 with HTTP; Tue, 29 Aug 2006 05:10:19 -0700 (PDT)
Message-ID: <5d5204510608290510j8928990wc2e9f28d06fdb1da@mail.gmail.com>
Date: Tue, 29 Aug 2006 20:10:19 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: how to write this regexps?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5312_7652594.1156853419379"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5312_7652594.1156853419379
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i wanna index html,,,but it have image,flash,javascript, and i wanna make
index quick,,

but i don't know how to get textmode content,,,

anyone can help me?

------=_Part_5312_7652594.1156853419379--

From java-user-return-22998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 13:10:35 2006
Return-Path: <java-user-return-22998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 155 invoked from network); 29 Aug 2006 13:10:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 13:10:34 -0000
Received: (qmail 99869 invoked by uid 500); 29 Aug 2006 13:10:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99827 invoked by uid 500); 29 Aug 2006 13:10:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99815 invoked by uid 99); 29 Aug 2006 13:10:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 06:10:26 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of drjat320@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO nz-out-0102.google.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 06:10:25 -0700
Received: by nz-out-0102.google.com with SMTP id z6so1166988nzd
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 06:10:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XdGMBxyHw0EIx6KLWgF0kCF2IHkk2Ccw4yXQMyn2IJtyy4Ej/6DUe/ZCVSSaM/rYvzmxb8p+3XrVLKazxW4NEsHFRG38Ogkig2sno7Y0snmXrTD7dw16ouHVTufFli4fX58HKsfpj6DTcfS/7uK6VT1kCAiqlLEOGnON5z6C7b4=
Received: by 10.65.154.10 with SMTP id g10mr8369811qbo;
        Tue, 29 Aug 2006 06:10:03 -0700 (PDT)
Received: by 10.64.91.13 with HTTP; Tue, 29 Aug 2006 06:10:03 -0700 (PDT)
Message-ID: <288e77f30608290610u13d1d504p8e5a299d02110144@mail.gmail.com>
Date: Tue, 29 Aug 2006 09:10:03 -0400
From: "d rj" <drjat320@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to write this regexps?
In-Reply-To: <5d5204510608290510j8928990wc2e9f28d06fdb1da@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3098_4506363.1156857003308"
References: <5d5204510608290510j8928990wc2e9f28d06fdb1da@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3098_4506363.1156857003308
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would recommend using the open source project HTMLParser (
http://htmlparser.sourceforge.net/).  It provides an excellent API for
parsing html files and extracting the relevant text.
-drj

On 8/29/06, James liu <liuping.james@gmail.com> wrote:
>
> i wanna index html,,,but it have image,flash,javascript, and i wanna make
> index quick,,
>
> but i don't know how to get textmode content,,,
>
> anyone can help me?
>
>

------=_Part_3098_4506363.1156857003308--

From java-user-return-22999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 14:07:24 2006
Return-Path: <java-user-return-22999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28813 invoked from network); 29 Aug 2006 14:07:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 14:07:16 -0000
Received: (qmail 17591 invoked by uid 500); 29 Aug 2006 14:07:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17561 invoked by uid 500); 29 Aug 2006 14:07:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17550 invoked by uid 99); 29 Aug 2006 14:07:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 07:07:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 07:07:08 -0700
Received: from postoffice.omnis.com (mail-hub-2.int.omnis.com [10.0.0.37])
	by smtp.omnis.com (Postfix) with ESMTP id 039461B5AC
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 07:06:46 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id C8DDD1880A23
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 07:06:46 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <44F3F64B.8030709@sirma.bg>
References: <44F3F64B.8030709@sirma.bg>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <d746a7a72a985ab1dacb0e1a6ae4ed16@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Installing a custom tokenizer
Date: Tue, 29 Aug 2006 10:40:04 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am indexing documents which are filled with government jargon.  As 
one would expect, the standard tokenizer has problems with 
governmenteese.

In particular, the documents use words such as 310N-P-Q as references 
to other documents.  The standard tokenizer breaks this "word" at the 
dashes so that I can find P or Q but not the entire token.

I know how to write a new tokenizer.  I would like hints on how to 
install it and get my indexing system to use it.  I don't want to 
modify the standard .jar file.  What I think I want to do is set up my 
indexing operation to use the WhitespaceTokenizer instead of the normal 
one, but I am unsure how to do this.

I know that the IndexTask has a setAnalyzer method.  The document 
formats are rather complicated and I need special code to isolate the 
text strings which should be indexed.   My file analyzer isolates the 
string I want to index, then does

doc.add(new Field(DocFormatters.CONTENT_FIELD, <string from the file>, 
Field.Store.YES, Field.index.TOKENIZED));

I suspect that my issue is getting the Field constructor to use a 
different tokenizer.  Can anyone help?

Thanks.

Bill Taylor


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 14:39:00 2006
Return-Path: <java-user-return-23000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40536 invoked from network); 29 Aug 2006 14:39:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 14:39:00 -0000
Received: (qmail 84893 invoked by uid 500); 29 Aug 2006 14:38:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84819 invoked by uid 500); 29 Aug 2006 14:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84793 invoked by uid 99); 29 Aug 2006 14:38:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 07:38:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 07:38:40 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k7TEcFZK007466
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 07:38:17 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Tue, 29 
	Aug 2006 07:38:15 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Documents that know more?
Date: Tue, 29 Aug 2006 07:38:13 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49E1@mcaosx2.ca.mcao.maricopa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Documents that know more?
Thread-Index: AcbLeMESRF+n/gzyQrq7NlRrtBdaKw==
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.042
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.6.1039(14658.003)
X-imss-scores: Clean:24.07722 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm sure this is just a design point that I'm missing, but is there a
way to have my document objects know more about themselves?

At the time I create my document, I know a bit about how information is
being stored in it (e.g., this field represents a SOUNDEX copy, etc.),
yet the logic for that kind of stuff is kept in separate, unrelated
classes that have to be used properly in the document creation/retrieval
programs.

Would it make sense and, if so, is there a way to embed more logic in my
document objects (or some kind of subclass)?

Gary Furash, MBA, PMP
Applications Manager, Maricopa County Attorney's Office

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 14:46:29 2006
Return-Path: <java-user-return-23001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42778 invoked from network); 29 Aug 2006 14:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 14:46:29 -0000
Received: (qmail 4891 invoked by uid 500); 29 Aug 2006 14:46:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4857 invoked by uid 500); 29 Aug 2006 14:46:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4846 invoked by uid 99); 29 Aug 2006 14:46:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 07:46:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.158.62.24] (HELO ws6-8.us4.outblaze.com) (205.158.62.24)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Aug 2006 07:46:21 -0700
Received: (qmail 6963 invoked from network); 29 Aug 2006 14:44:13 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@67.38.2.237)
  by ws6-8.us4.outblaze.com with SMTP; 29 Aug 2006 14:44:12 -0000
Message-ID: <44F452AC.4020401@curtin.com>
Date: Tue, 29 Aug 2006 10:43:56 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Documents that know more?
References: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49E1@mcaosx2.ca.mcao.maricopa.gov>
In-Reply-To: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49E1@mcaosx2.ca.mcao.maricopa.gov>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Furash Gary wrote:

> I'm sure this is just a design point that I'm missing, but is there a
> way to have my document objects know more about themselves?
> 
> At the time I create my document, I know a bit about how information is
> being stored in it (e.g., this field represents a SOUNDEX copy, etc.),
> yet the logic for that kind of stuff is kept in separate, unrelated
> classes that have to be used properly in the document creation/retrieval
> programs.
> 
> Would it make sense and, if so, is there a way to embed more logic in my
> document objects (or some kind of subclass)?

Whether it would make sense for your application or not is something I think 
you're going to have to decide yourself.  From your description, it sounds 
like it might be useful to have some of that additional information around later.

If so, how about adding a field or two to your Lucene index that store the 
additional facts?  You don't have to index them, if you don't intend to search 
based on them.  If you use an efficient encoding scheme, such fields might not 
add much to your disk usage either.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 14:50:41 2006
Return-Path: <java-user-return-23002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44994 invoked from network); 29 Aug 2006 14:50:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 14:50:41 -0000
Received: (qmail 12794 invoked by uid 500); 29 Aug 2006 14:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12761 invoked by uid 500); 29 Aug 2006 14:50:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12706 invoked by uid 99); 29 Aug 2006 14:50:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 07:50:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 07:50:31 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.13.7/8.13.7/2.0.kim.desco.357) with ESMTP id k7TEo1UT008230
 for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 20:20:06 +0530 (IST)
Received: from mailhyd2.hyd.deshaw.com ([149.77.160.75]) by mshydpub1.hyd.deshaw.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 29 Aug 2006 20:20:01 +0530
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Installing a custom tokenizer
Date: Tue, 29 Aug 2006 20:20:01 +0530
Message-ID: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Installing a custom tokenizer
Thread-Index: AcbLdMzjP2S3yEPIRg2AsfzR0CE3yQABQZ1Q
From: "Krovi, DVSR_Sarma" <DVSR.Sarma.Krovi@deshaw.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Aug 2006 14:50:01.0405 (UTC) FILETIME=[67C4FED0:01C6CB7A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I suspect that my issue is getting the Field constructor to use a=20
> different tokenizer.  Can anyone help?=20

You need to basically come up with your own Tokenizer (You can always
write a corresponding JavaCC grammar and compiling it would give the
Tokenizer)
Then you need to extend org.apache.lucene.analysis.Analyzer class and
override the tokenStream() method. Now, wherever you are
indexing/searching, use the object of this CustomAnalyzer.
Public class MyAnalyzer extended Analyzer
{
	public TokenStream tokenStream(....)
	{
		TokenStream ts =3D null;
		ts =3D new MyTokenizer(reader);
		/* Pass this tokenstream through other filters you are
interested in */
	}
}

Krovi.

-----Original Message-----
From: Bill Taylor [mailto:wataylor@as-st.com]=20
Sent: Tuesday, August 29, 2006 8:10 PM
To: java-user@lucene.apache.org
Subject: Installing a custom tokenizer

I am indexing documents which are filled with government jargon.  As=20
one would expect, the standard tokenizer has problems with=20
governmenteese.

In particular, the documents use words such as 310N-P-Q as references=20
to other documents.  The standard tokenizer breaks this "word" at the=20
dashes so that I can find P or Q but not the entire token.

I know how to write a new tokenizer.  I would like hints on how to=20
install it and get my indexing system to use it.  I don't want to=20
modify the standard .jar file.  What I think I want to do is set up my=20
indexing operation to use the WhitespaceTokenizer instead of the normal=20
one, but I am unsure how to do this.

I know that the IndexTask has a setAnalyzer method.  The document=20
formats are rather complicated and I need special code to isolate the=20
text strings which should be indexed.   My file analyzer isolates the=20
string I want to index, then does

doc.add(new Field(DocFormatters.CONTENT_FIELD, <string from the file>,=20
Field.Store.YES, Field.index.TOKENIZED));

I suspect that my issue is getting the Field constructor to use a=20
different tokenizer.  Can anyone help?

Thanks.

Bill Taylor


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 15:04:11 2006
Return-Path: <java-user-return-23003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50411 invoked from network); 29 Aug 2006 15:04:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 15:04:10 -0000
Received: (qmail 41082 invoked by uid 500); 29 Aug 2006 15:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40838 invoked by uid 500); 29 Aug 2006 15:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40827 invoked by uid 99); 29 Aug 2006 15:04:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 08:04:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 08:04:01 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.156F3AD0@mailer.syr.edu>; Tue, 29 Aug 2006 11:03:38 -0400
Message-ID: <44F4574A.8090003@syr.edu>
Date: Tue, 29 Aug 2006 11:03:38 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Documents that know more?
References: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49E1@mcaosx2.ca.mcao.maricopa.gov>
In-Reply-To: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49E1@mcaosx2.ca.mcao.maricopa.gov>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There has been a long-running thread on the java-dev list about how to
allow application-specific "extra stuff" to be placed in the index, at
multiple levels of granularity.  Some of this conversation is captured
on the Wiki at:

http://wiki.apache.org/jakarta-lucene/FlexibleIndexing

Maybe you could modify the above page to include your requirements?

Steve

Furash Gary wrote:
> I'm sure this is just a design point that I'm missing, but is there a
> way to have my document objects know more about themselves?
> 
> At the time I create my document, I know a bit about how information is
> being stored in it (e.g., this field represents a SOUNDEX copy, etc.),
> yet the logic for that kind of stuff is kept in separate, unrelated
> classes that have to be used properly in the document creation/retrieval
> programs.
> 
> Would it make sense and, if so, is there a way to embed more logic in my
> document objects (or some kind of subclass)?
> 
> Gary Furash, MBA, PMP
> Applications Manager, Maricopa County Attorney's Office
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 15:34:43 2006
Return-Path: <java-user-return-23004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65465 invoked from network); 29 Aug 2006 15:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 15:34:39 -0000
Received: (qmail 11837 invoked by uid 500); 29 Aug 2006 15:34:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11806 invoked by uid 500); 29 Aug 2006 15:34:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11787 invoked by uid 99); 29 Aug 2006 15:34:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 08:34:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 08:34:32 -0700
Received: from postoffice.omnis.com (mail-hub-2.int.omnis.com [10.0.0.37])
	by smtp.omnis.com (Postfix) with ESMTP id F0DFC1B6E8
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 08:34:10 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 28D2A1880A04
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 08:34:11 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com>
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <cf49d06c1d912dfaef83efcb08c4c583@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Installing a custom tokenizer
Date: Tue, 29 Aug 2006 12:07:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

is there some way to get the standard Field constructor to use, say, 
the Whitespace Tokenizer as opposed to the standard tokenizer?

On Aug 29, 2006, at 10:50 AM, Krovi, DVSR_Sarma wrote:

>> I suspect that my issue is getting the Field constructor to use a
>> different tokenizer.  Can anyone help?
>
> You need to basically come up with your own Tokenizer (You can always
> write a corresponding JavaCC grammar and compiling it would give the
> Tokenizer)
> Then you need to extend org.apache.lucene.analysis.Analyzer class and
> override the tokenStream() method. Now, wherever you are
> indexing/searching, use the object of this CustomAnalyzer.
> Public class MyAnalyzer extended Analyzer
> {
> 	public TokenStream tokenStream(....)
> 	{
> 		TokenStream ts = null;
> 		ts = new MyTokenizer(reader);
> 		/* Pass this tokenstream through other filters you are
> interested in */
> 	}
> }
>
> Krovi.
>
> -----Original Message-----
> From: Bill Taylor [mailto:wataylor@as-st.com]
> Sent: Tuesday, August 29, 2006 8:10 PM
> To: java-user@lucene.apache.org
> Subject: Installing a custom tokenizer
>
> I am indexing documents which are filled with government jargon.  As
> one would expect, the standard tokenizer has problems with
> governmenteese.
>
> In particular, the documents use words such as 310N-P-Q as references
> to other documents.  The standard tokenizer breaks this "word" at the
> dashes so that I can find P or Q but not the entire token.
>
> I know how to write a new tokenizer.  I would like hints on how to
> install it and get my indexing system to use it.  I don't want to
> modify the standard .jar file.  What I think I want to do is set up my
> indexing operation to use the WhitespaceTokenizer instead of the normal
> one, but I am unsure how to do this.
>
> I know that the IndexTask has a setAnalyzer method.  The document
> formats are rather complicated and I need special code to isolate the
> text strings which should be indexed.   My file analyzer isolates the
> string I want to index, then does
>
> doc.add(new Field(DocFormatters.CONTENT_FIELD, <string from the file>,
> Field.Store.YES, Field.index.TOKENIZED));
>
> I suspect that my issue is getting the Field constructor to use a
> different tokenizer.  Can anyone help?
>
> Thanks.
>
> Bill Taylor
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 15:50:37 2006
Return-Path: <java-user-return-23005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70399 invoked from network); 29 Aug 2006 15:50:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 15:50:36 -0000
Received: (qmail 41817 invoked by uid 500); 29 Aug 2006 15:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40835 invoked by uid 500); 29 Aug 2006 15:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40824 invoked by uid 99); 29 Aug 2006 15:50:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 08:50:30 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 08:50:30 -0700
Received: by wr-out-0506.google.com with SMTP id i5so587057wra
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 08:50:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=m+Lo7s5YokozfIu2ykYWY9S8HrDYAXLtGecjIyYgnrAj8MOXYs+4ipW1SgXwLLj1YArqlbCyNVbE2iR7bIQ6vd/BNqPj4rFZL6J6zfLRMbn82DnzLGpJfN2tuHHYq71dzmjA63SV8GJz98B3ri2+WloCJx+XwH8vVqQDC0hDeqA=
Received: by 10.90.120.6 with SMTP id s6mr1058523agc;
        Tue, 29 Aug 2006 08:50:09 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Tue, 29 Aug 2006 08:50:08 -0700 (PDT)
Message-ID: <1cbd6f830608290850m58f8a46etb116fb2ca3682003@mail.gmail.com>
Date: Tue, 29 Aug 2006 11:50:08 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Sort by Date
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8238_25011094.1156866608913"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8238_25011094.1156866608913
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is it possible to sort results by date of the document?

------=_Part_8238_25011094.1156866608913--

From java-user-return-23006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 16:13:44 2006
Return-Path: <java-user-return-23006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78276 invoked from network); 29 Aug 2006 16:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 16:13:44 -0000
Received: (qmail 88281 invoked by uid 500); 29 Aug 2006 16:13:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88261 invoked by uid 500); 29 Aug 2006 16:13:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88250 invoked by uid 99); 29 Aug 2006 16:13:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:13:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.238.4.154] (HELO colibri.its.uu.se) (130.238.4.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:13:35 -0700
Received: by colibri.its.uu.se (Postfix, from userid 211)
	id 560CC73D; Tue, 29 Aug 2006 18:13:13 +0200 (DFT)
Received: from colibri.its.uu.se(127.0.0.1) by colibri.its.uu.se via virus-scan 
	id s14369; Tue, 29 Aug 06 18:13:07 +0200
Received: from tyto.its.uu.se (tyto.its.uu.se [130.238.4.190])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	by colibri.its.uu.se (Postfix) with ESMTP id 82789732
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 18:13:07 +0200 (DFT)
Received: from localhost ([127.0.0.1])
	by tyto.its.uu.se with esmtp (Exim 4.50)
	id 1GI6D5-00039B-BI
	for java-user@lucene.apache.org; Tue, 29 Aug 2006 18:13:07 +0200
Received: from c-234de253.16-1-64736c11.cust.bredbandsbolaget.se (c-234de253.16-1-64736c11.cust.bredbandsbolaget.se [83.226.77.35]) 
	by webmail.uu.se (IMP) with HTTP 
	for <rokol669@localhost>; Tue, 29 Aug 2006 16:13:07 +0000
Message-ID: <1156867987.44f4679350377@webmail.uu.se>
Date: Tue, 29 Aug 2006 16:13:07 +0000
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
To: java-user@lucene.apache.org
Subject: Re: Installing a custom tokenizer
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com> <cf49d06c1d912dfaef83efcb08c4c583@as-st.com>
In-Reply-To: <cf49d06c1d912dfaef83efcb08c4c583@as-st.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
User-Agent: Internet Messaging Program (IMP) 3.2.7
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have a look at PerFieldAnalyzerWrapper:


http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/PerFiel=
dAnalyzerWrapper.html


Citerar Bill Taylor <wataylor@as-st.com>:

> is there some way to get the standard Field constructor to use, say,=20
> the Whitespace Tokenizer as opposed to the standard tokenizer?
>=20
> On Aug 29, 2006, at 10:50 AM, Krovi, DVSR_Sarma wrote:
>=20
> >> I suspect that my issue is getting the Field constructor to use a
> >> different tokenizer.  Can anyone help?
> >
> > You need to basically come up with your own Tokenizer (You can always
> > write a corresponding JavaCC grammar and compiling it would give the
> > Tokenizer)
> > Then you need to extend org.apache.lucene.analysis.Analyzer class and
> > override the tokenStream() method. Now, wherever you are
> > indexing/searching, use the object of this CustomAnalyzer.
> > Public class MyAnalyzer extended Analyzer
> > {
> > 	public TokenStream tokenStream(....)
> > 	{
> > 		TokenStream ts =3D null;
> > 		ts =3D new MyTokenizer(reader);
> > 		/* Pass this tokenstream through other filters you are
> > interested in */
> > 	}
> > }
> >
> > Krovi.
> >
> > -----Original Message-----
> > From: Bill Taylor [mailto:wataylor@as-st.com]
> > Sent: Tuesday, August 29, 2006 8:10 PM
> > To: java-user@lucene.apache.org
> > Subject: Installing a custom tokenizer
> >
> > I am indexing documents which are filled with government jargon.  As
> > one would expect, the standard tokenizer has problems with
> > governmenteese.
> >
> > In particular, the documents use words such as 310N-P-Q as references
> > to other documents.  The standard tokenizer breaks this "word" at the
> > dashes so that I can find P or Q but not the entire token.
> >
> > I know how to write a new tokenizer.  I would like hints on how to
> > install it and get my indexing system to use it.  I don't want to
> > modify the standard .jar file.  What I think I want to do is set up m=
y
> > indexing operation to use the WhitespaceTokenizer instead of the norm=
al
> > one, but I am unsure how to do this.
> >
> > I know that the IndexTask has a setAnalyzer method.  The document
> > formats are rather complicated and I need special code to isolate the
> > text strings which should be indexed.   My file analyzer isolates the
> > string I want to index, then does
> >
> > doc.add(new Field(DocFormatters.CONTENT_FIELD, <string from the file>=
,
> > Field.Store.YES, Field.index.TOKENIZED));
> >
> > I suspect that my issue is getting the Field constructor to use a
> > different tokenizer.  Can anyone help?
> >
> > Thanks.
> >
> > Bill Taylor
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 16:51:12 2006
Return-Path: <java-user-return-23007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87421 invoked from network); 29 Aug 2006 16:51:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 16:51:10 -0000
Received: (qmail 53806 invoked by uid 500); 29 Aug 2006 16:51:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53787 invoked by uid 500); 29 Aug 2006 16:51:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53776 invoked by uid 99); 29 Aug 2006 16:51:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:51:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:51:02 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k7TGoXN2008485
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 09:50:39 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Tue, 29 
	Aug 2006 09:50:33 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Field.Store.YES and Field.Store.Tokenized with CustomAnalyzer - 
	Double Hit
Date: Tue, 29 Aug 2006 09:50:31 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49EB@mcaosx2.ca.mcao.maricopa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Field.Store.YES and Field.Store.Tokenized with CustomAnalyzer 
	- Double Hit
Thread-Index: AcbLizxZSWBU547dRr+ZpaHsXsn+EA==
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.042
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.6.1039(14658.003)
X-imss-scores: Clean:74.97226 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The behavior I want is that if I store a name (Gary Furash), a user who
searches for "Gary Furash" gets a strong hit, wheras a user who seaches
for "Gray Furish" gets a moderate hit.  I currently achieve this by

1. using a custom analyzer on insertion/search that tokenizes a
"soundex" version of the name field in the document (so "Gray" and
"Gary" become the same soundex code);
2. creating two separate fields in the document (one tokenized and one
plain text) -using a multiquery

So, when I search against the two fields, "Gary Furash" hits against two
fields in the document, but "Gray Furish" hits only one.

However, I noticed that when I say "Field.Store.YES" it stores the
original, pre-tokenized version, so it seems like I'm doubling up here.
Is there a better way to do this?

Gary Furash, MBA, PMP
Applications Manager, Maricopa County Attorney's Office

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 16:52:07 2006
Return-Path: <java-user-return-23008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87600 invoked from network); 29 Aug 2006 16:52:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 16:52:03 -0000
Received: (qmail 58300 invoked by uid 500); 29 Aug 2006 16:51:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58269 invoked by uid 500); 29 Aug 2006 16:51:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58258 invoked by uid 99); 29 Aug 2006 16:51:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:51:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 09:51:55 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6056630EFCD4; Tue, 29 Aug 2006 12:51:34 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 887C330EFCD3
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 12:51:31 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1cbd6f830608290850m58f8a46etb116fb2ca3682003@mail.gmail.com>
References: <1cbd6f830608290850m58f8a46etb116fb2ca3682003@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9ACB9C12-4A84-4743-B2ED-FDF0C48115A1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sort by Date
Date: Tue, 29 Aug 2006 12:51:26 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 29, 2006, at 11:50 AM, Mag Gam wrote:
> Is it possible to sort results by date of the document?

Sure, check out the Sort class and the overloaded IndexSearcher.search 
() methods that take a Sort.  You will need to index the date in a  
sortable way. DateTools provides handy methods for this purpose.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 17:46:41 2006
Return-Path: <java-user-return-23009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4696 invoked from network); 29 Aug 2006 17:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 17:46:41 -0000
Received: (qmail 42190 invoked by uid 500); 29 Aug 2006 17:46:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42160 invoked by uid 500); 29 Aug 2006 17:46:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42149 invoked by uid 99); 29 Aug 2006 17:46:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:46:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:46:33 -0700
Received: by py-out-1112.google.com with SMTP id w49so2475500pyg
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 10:46:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b7NbafOKVAUSJrFOF/hu2oa0socCe5Q2IscDdidazpsnIHGWfxEx7U7HfIZh5B6LPaDM0hXYsEvgivAgopKigK84uQT9vdLV3EzQ6SoiRMKQvOL655OykwZId3uCX7mS/2MAXtTisuHCgRccGp2N8AG4yfQck7kHSEk/lj5fIa4=
Received: by 10.35.78.9 with SMTP id f9mr15364029pyl;
        Tue, 29 Aug 2006 10:46:12 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 29 Aug 2006 10:46:12 -0700 (PDT)
Message-ID: <359a92830608291046l4cd85347ice7e5f75af63ad72@mail.gmail.com>
Date: Tue, 29 Aug 2006 13:46:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Installing a custom tokenizer
In-Reply-To: <d746a7a72a985ab1dacb0e1a6ae4ed16@as-st.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13371_17300962.1156873572243"
References: <44F3F64B.8030709@sirma.bg>
	 <d746a7a72a985ab1dacb0e1a6ae4ed16@as-st.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13371_17300962.1156873572243
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm in a real rush here, so pardon my brevity, but..... one of the
constructors for IndexWriter takes an Analyzer as a parameter, which can be
a PerFieldAnalyzerWrapper. That, if I understand your issue, should fix you
right up.

Same kind of thing for a Query.

Erick

On 8/29/06, Bill Taylor <wataylor@as-st.com> wrote:
>
> I am indexing documents which are filled with government jargon.  As
> one would expect, the standard tokenizer has problems with
> governmenteese.
>
> In particular, the documents use words such as 310N-P-Q as references
> to other documents.  The standard tokenizer breaks this "word" at the
> dashes so that I can find P or Q but not the entire token.
>
> I know how to write a new tokenizer.  I would like hints on how to
> install it and get my indexing system to use it.  I don't want to
> modify the standard .jar file.  What I think I want to do is set up my
> indexing operation to use the WhitespaceTokenizer instead of the normal
> one, but I am unsure how to do this.
>
> I know that the IndexTask has a setAnalyzer method.  The document
> formats are rather complicated and I need special code to isolate the
> text strings which should be indexed.   My file analyzer isolates the
> string I want to index, then does
>
> doc.add(new Field(DocFormatters.CONTENT_FIELD, <string from the file>,
> Field.Store.YES, Field.index.TOKENIZED));
>
> I suspect that my issue is getting the Field constructor to use a
> different tokenizer.  Can anyone help?
>
> Thanks.
>
> Bill Taylor
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13371_17300962.1156873572243--

From java-user-return-23010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 17:50:19 2006
Return-Path: <java-user-return-23010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5416 invoked from network); 29 Aug 2006 17:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 17:50:18 -0000
Received: (qmail 48498 invoked by uid 500); 29 Aug 2006 17:50:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48445 invoked by uid 500); 29 Aug 2006 17:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48423 invoked by uid 99); 29 Aug 2006 17:50:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:50:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:50:10 -0700
Received: by py-out-1112.google.com with SMTP id w49so2476435pyg
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 10:49:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PK9P7HFFu2oSKSri8dtNxB/eBpGXNUhHDhrQ4LTaCvnhIKYjA65KZ+8X5roMLRUCqgA0FbPLSYFrEkdlIaJlrgX/gzLbc2xd4hWkWRwpdqYKmpAxKtzOVXJAiee1xRCwBhQ+/saKqP5XSC2pcfiIcXzwbuqBdRywitXDoRMxT8U=
Received: by 10.35.9.15 with SMTP id m15mr15406916pyi;
        Tue, 29 Aug 2006 10:49:48 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 29 Aug 2006 10:49:48 -0700 (PDT)
Message-ID: <359a92830608291049p4a7bdf88rc44be8d9efb07f8d@mail.gmail.com>
Date: Tue, 29 Aug 2006 13:49:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.YES and Field.Store.Tokenized with CustomAnalyzer - Double Hit
In-Reply-To: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49EB@mcaosx2.ca.mcao.maricopa.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13459_13541732.1156873788699"
References: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49EB@mcaosx2.ca.mcao.maricopa.gov>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13459_13541732.1156873788699
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The only reason you need to store a token is if you need to retrieve it from
the document, storing is completely unnecessary for answering the question
"is this term in the document?". So I guess I'm wondering why you don't just
use Field.Store.NO on *both* of the fields.......

On 8/29/06, Furash Gary <furashg@mcao.maricopa.gov> wrote:
>
> The behavior I want is that if I store a name (Gary Furash), a user who
> searches for "Gary Furash" gets a strong hit, wheras a user who seaches
> for "Gray Furish" gets a moderate hit.  I currently achieve this by
>
> 1. using a custom analyzer on insertion/search that tokenizes a
> "soundex" version of the name field in the document (so "Gray" and
> "Gary" become the same soundex code);
> 2. creating two separate fields in the document (one tokenized and one
> plain text) -using a multiquery
>
> So, when I search against the two fields, "Gary Furash" hits against two
> fields in the document, but "Gray Furish" hits only one.
>
> However, I noticed that when I say "Field.Store.YES" it stores the
> original, pre-tokenized version, so it seems like I'm doubling up here.
> Is there a better way to do this?
>
> Gary Furash, MBA, PMP
> Applications Manager, Maricopa County Attorney's Office
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13459_13541732.1156873788699--

From java-user-return-23011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 17:58:26 2006
Return-Path: <java-user-return-23011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9077 invoked from network); 29 Aug 2006 17:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 17:58:26 -0000
Received: (qmail 72596 invoked by uid 500); 29 Aug 2006 17:58:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72562 invoked by uid 500); 29 Aug 2006 17:58:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72547 invoked by uid 99); 29 Aug 2006 17:58:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:58:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 10:58:12 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k7THvkJf025361
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 10:57:50 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Tue, 29 
	Aug 2006 10:57:45 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: RE: Documents that know more?
Date: Tue, 29 Aug 2006 10:57:43 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49EF@mcaosx2.ca.mcao.maricopa.gov>
In-Reply-To: <44F4574A.8090003@syr.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Documents that know more?
Thread-Index: AcbLfF7xYxZj9ClrSryrcr0NAO+/WQAGB+6g
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.042
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.6.1039(14658.003)
X-imss-scores: Clean:83.42719 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks.  Sort of what I was thinking of was the fact that document X,
field N, was built via tokenizer/analyzer N.  If I need to search an
index of document Xs, then I should be using tokenizer/analyzer N
without having to "know" that it was built that way.

-----Original Message-----
From: Steven Rowe [mailto:sarowe@syr.edu]=20
Sent: Tuesday, August 29, 2006 8:04 AM
To: java-user@lucene.apache.org
Subject: Re: Documents that know more?

There has been a long-running thread on the java-dev list about how to
allow application-specific "extra stuff" to be placed in the index, at
multiple levels of granularity.  Some of this conversation is captured
on the Wiki at:

http://wiki.apache.org/jakarta-lucene/FlexibleIndexing

Maybe you could modify the above page to include your requirements?

Steve

Furash Gary wrote:
> I'm sure this is just a design point that I'm missing, but is there a=20
> way to have my document objects know more about themselves?
>=20
> At the time I create my document, I know a bit about how information=20
> is being stored in it (e.g., this field represents a SOUNDEX copy,=20
> etc.), yet the logic for that kind of stuff is kept in separate,=20
> unrelated classes that have to be used properly in the document=20
> creation/retrieval programs.
>=20
> Would it make sense and, if so, is there a way to embed more logic in=20
> my document objects (or some kind of subclass)?
>=20
> Gary Furash, MBA, PMP
> Applications Manager, Maricopa County Attorney's Office
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 18:38:12 2006
Return-Path: <java-user-return-23012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25423 invoked from network); 29 Aug 2006 18:38:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:38:03 -0000
Received: (qmail 41511 invoked by uid 500); 29 Aug 2006 18:37:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41488 invoked by uid 500); 29 Aug 2006 18:37:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41471 invoked by uid 99); 29 Aug 2006 18:37:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:37:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:37:55 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1EF195B778; Tue, 29 Aug 2006 11:37:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1B9F17F403
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 11:37:35 -0700 (PDT)
Date: Tue, 29 Aug 2006 11:37:35 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting based on a selling rate
In-Reply-To: <6035831.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu>
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu>
 <6035831.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Ok, for the sort object, but my problem is I don't know haox to retrieve (or
: store) information of the sell rate of the products (the sell rate deponds
: on the QUERY ! The sort is different for each queries.)
:
: I imagine to connect to the DB and get sell rate of products for this
: specific query... but connecting to DB at each query is not a right choice
: ;-)

I'm sorry .. i missunderstood your question ... rereading it now here
is what i sounds like you are saying:

When a user tells gives you a search term they are interested in,
you have an external system that that you use to look up the top N selling
books matching those terms, and what their sell rate is.  you would like
to do a search across your entire lucene index, having those N products
score higher based on their sell rate. (which is not in the index)

...assuming i have that right, try adding an optional clauses to your
query for each of your N productIds, with a boost which is proportionate
to the sell rate.  the exact boost values should be based on how importnat
you want the sell rate to be compared with with the textual relevancy of
the query term.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 18:39:15 2006
Return-Path: <java-user-return-23013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25766 invoked from network); 29 Aug 2006 18:39:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:39:14 -0000
Received: (qmail 44264 invoked by uid 500); 29 Aug 2006 18:39:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43994 invoked by uid 500); 29 Aug 2006 18:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43983 invoked by uid 99); 29 Aug 2006 18:39:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:39:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:39:05 -0700
Received: from postoffice.omnis.com (mail-hub-2.int.omnis.com [10.0.0.37])
	by smtp.omnis.com (Postfix) with ESMTP id 588231B986
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 11:38:44 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 4B3FC1880C19
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 11:38:44 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <359a92830608291046l4cd85347ice7e5f75af63ad72@mail.gmail.com>
References: <44F3F64B.8030709@sirma.bg> <d746a7a72a985ab1dacb0e1a6ae4ed16@as-st.com> <359a92830608291046l4cd85347ice7e5f75af63ad72@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <743519bc0934a1bae126d34839ef1202@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Installing a custom tokenizer
Date: Tue, 29 Aug 2006 15:12:03 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 29, 2006, at 1:46 PM, Erick Erickson wrote:

> I'm in a real rush here, so pardon my brevity, but..... one of the
> constructors for IndexWriter takes an Analyzer as a parameter, which 
> can be
> a PerFieldAnalyzerWrapper. That, if I understand your issue, should 
> fix you
> right up.

that almost worked.  I can't use a per Field analyzer because I have to 
process the content fields of all documents.  I built a custom analyzer 
which extended the Standard Analyzer and replaced the tokenStream 
method with a new one which used WhitespaceTokenizer instead of 
StandardTokenizer.  This meant that my document IDs were not split, but 
I lost the conversion of acronyms such as w.o. to wo and the like

So what I need to do is to make a new Tokenizer based on the 
StandardTokenizer except that a NUM on line 83 of StandardTokenizer.jj 
should be

| NUM: (<ALPHANUM> (<P> <ALPHANUM>) +  | <ALPHANUM>) >

so that a serial number need not have a digit in every other segment 
and a series of letters and digits without special characters such as a 
dash will be treated as a single word.

Questions:

1) If I change the .jj file in this way, how to I run javaCC to make a 
new tokenizer?  The JavaCC documentation says that JavaCC generates a 
number of output files; I think that I only need the tokenizer code.

2) I suppose i have to tell the query parser to parse queries in the 
same way, is that right?

The reason I think so is that Luke says I have words such as w.o. in 
the index which the query parser can't find.  I suspect I have to use 
the same Analyzer on both, right?

> On 8/29/06, Bill Taylor <wataylor@as-st.com> wrote:
>>
>> I am indexing documents which are filled with government jargon.  As
>> one would expect, the standard tokenizer has problems with
>> governmenteese.
>>
>> In particular, the documents use words such as 310N-P-Q as references
>> to other documents.  The standard tokenizer breaks this "word" at the
>> dashes so that I can find P or Q but not the entire token.
>>
>> I know how to write a new tokenizer.  I would like hints on how to
>> install it and get my indexing system to use it.  I don't want to
>> modify the standard .jar file.  What I think I want to do is set up my
>> indexing operation to use the WhitespaceTokenizer instead of the 
>> normal
>> one, but I am unsure how to do this.
>>
>> I know that the IndexTask has a setAnalyzer method.  The document
>> formats are rather complicated and I need special code to isolate the
>> text strings which should be indexed.   My file analyzer isolates the
>> string I want to index, then does
>>
>> doc.add(new Field(DocFormatters.CONTENT_FIELD, <string from the file>,
>> Field.Store.YES, Field.index.TOKENIZED));
>>
>> I suspect that my issue is getting the Field constructor to use a
>> different tokenizer.  Can anyone help?
>>
>> Thanks.
>>
>> Bill Taylor
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 18:48:19 2006
Return-Path: <java-user-return-23014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28877 invoked from network); 29 Aug 2006 18:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:48:17 -0000
Received: (qmail 63271 invoked by uid 500); 29 Aug 2006 18:48:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63252 invoked by uid 500); 29 Aug 2006 18:48:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63218 invoked by uid 99); 29 Aug 2006 18:48:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:48:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:48:04 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 54B9F5B778; Tue, 29 Aug 2006 11:47:44 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4E56D7F403
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 11:47:44 -0700 (PDT)
Date: Tue, 29 Aug 2006 11:47:44 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Installing a custom tokenizer
In-Reply-To: <1156867987.44f4679350377@webmail.uu.se>
Message-ID: <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu>
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com>
 <cf49d06c1d912dfaef83efcb08c4c583@as-st.com> <1156867987.44f4679350377@webmail.uu.se>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Have a look at PerFieldAnalyzerWrapper:

: http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html

...which can be specified in the constructors for IndexWriter and
QueryParser.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 18:50:54 2006
Return-Path: <java-user-return-23015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29433 invoked from network); 29 Aug 2006 18:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:50:54 -0000
Received: (qmail 67684 invoked by uid 500); 29 Aug 2006 18:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67659 invoked by uid 500); 29 Aug 2006 18:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67648 invoked by uid 99); 29 Aug 2006 18:50:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:50:47 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.145.48.34] (HELO mail-relay1.yahoo.com) (216.145.48.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:50:46 -0700
Received: from [192.168.1.140] (m810f36d0.tmodns.net [208.54.15.129])
	by mail-relay1.yahoo.com (8.13.6/8.13.6/mr1) with ESMTP id k7TIoKlS048494
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 11:50:25 -0700 (PDT)
Mime-Version: 1.0
Message-Id: <p06230960c11a3bf9a5be@[192.168.1.140]>
In-Reply-To: <743519bc0934a1bae126d34839ef1202@as-st.com>
References: <44F3F64B.8030709@sirma.bg>
 <d746a7a72a985ab1dacb0e1a6ae4ed16@as-st.com>
 <359a92830608291046l4cd85347ice7e5f75af63ad72@mail.gmail.com>
 <743519bc0934a1bae126d34839ef1202@as-st.com>
Date: Tue, 29 Aug 2006 11:50:19 -0700
To: java-user@lucene.apache.org
From: Winton Davies <wdavies@yahoo-inc.com>
Subject: Straight TF-IDF cosine similarity?
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I'm scratching my head - can someone tell me which class implements 
an efficient multiple term TF.IDF Cosine similarity scoring mechanism?

There is clearly the single TermScorer - but I can't find the class 
that would do a bucketed TF.IDF cosine - i.e. fill an accumulator 
with the tf.idf^2 for each of the term posting lists, until 
accumulator is full, and then compute the final score.

I don't need a Boolean Query - at least this seems like overkill.

Cheers,
  Winton

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 18:52:25 2006
Return-Path: <java-user-return-23016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30280 invoked from network); 29 Aug 2006 18:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:52:19 -0000
Received: (qmail 74781 invoked by uid 500); 29 Aug 2006 18:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74754 invoked by uid 500); 29 Aug 2006 18:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74743 invoked by uid 99); 29 Aug 2006 18:52:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:52:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:52:12 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C19C05B778; Tue, 29 Aug 2006 11:51:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BCA427F403
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 11:51:51 -0700 (PDT)
Date: Tue, 29 Aug 2006 11:51:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.YES and Field.Store.Tokenized with CustomAnalyzer
 -  Double Hit
In-Reply-To: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49EB@mcaosx2.ca.mcao.maricopa.gov>
Message-ID: <Pine.LNX.4.58.0608291148300.3758@hal.rescomp.berkeley.edu>
References: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E49EB@mcaosx2.ca.mcao.maricopa.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: However, I noticed that when I say "Field.Store.YES" it stores the
: original, pre-tokenized version, so it seems like I'm doubling up here.
: Is there a better way to do this?

if you are doubling up to get the benefit of two seperate Analyzers, then
there is no need to "Store.YES" in both fields -- just store the value in
one (it doesn't matter which)

you could even choose not to store it in either of those fields, and
instead store it in a differnet field which is *not* indexed -- Stored
fields are really a very different beast then Indexed fields.  hen you say
you want a Stored and Indexed field, the exact same thing is done under
the coveres as if you said you want two Fields with teh same name, one
stored and not indexed and one indexed and not stored.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 18:57:40 2006
Return-Path: <java-user-return-23017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31301 invoked from network); 29 Aug 2006 18:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 18:57:38 -0000
Received: (qmail 88050 invoked by uid 500); 29 Aug 2006 18:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87705 invoked by uid 500); 29 Aug 2006 18:57:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87694 invoked by uid 99); 29 Aug 2006 18:57:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:57:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 11:57:31 -0700
Received: from postoffice.omnis.com (mail-hub-2.int.omnis.com [10.0.0.37])
	by smtp.omnis.com (Postfix) with ESMTP id 57B901B6C5
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 11:57:10 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 6D92D1880A15
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 11:57:10 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu>
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com> <cf49d06c1d912dfaef83efcb08c4c583@as-st.com> <1156867987.44f4679350377@webmail.uu.se> <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <617d2b451b3f7d8e9530363d5b4f4474@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Installing a custom tokenizer
Date: Tue, 29 Aug 2006 15:30:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 29, 2006, at 2:47 PM, Chris Hostetter wrote:

>
> : Have a look at PerFieldAnalyzerWrapper:
>
> :  
> http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/ 
> PerFieldAnalyzerWrapper.html
>
> ...which can be specified in the constructors for IndexWriter and
> QueryParser.

As I understand it, this allows me to specify a different analyzer for  
each field name.  My problem is that the standard analyzer will not  
work for my content field and I need to define a new one.  I need to  
make a modification to the StandardTokenizer so that a number does not  
need to have a digit in every other segment of a part number.

For example, the StandardTokenizer breaks aa-bb-2 on the - between aa  
and bb because it demands that every other string between a - have a  
digit.

I need to modify the .jj file for the Standard Tokenizer and get a new  
one, but I am confused by the javaCC documentation and do not know how  
to run it to get what I need.

Thanks for the help.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 19:04:51 2006
Return-Path: <java-user-return-23018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32632 invoked from network); 29 Aug 2006 19:04:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:04:48 -0000
Received: (qmail 1068 invoked by uid 500); 29 Aug 2006 19:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1043 invoked by uid 500); 29 Aug 2006 19:04:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1031 invoked by uid 99); 29 Aug 2006 19:04:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:04:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO nz-out-0102.google.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:04:40 -0700
Received: by nz-out-0102.google.com with SMTP id z6so1249652nzd
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 12:04:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ElX+KVybrHEa5dUrnwtGZX0UHq4UhI+tl8OrsOCoUVgqCT7479lS16sHB0+yMplAbtjGSdoVVsATIP4wgH9hm8kJ+VTGvB7DVOueRoFDobrK6VdVGN67P6ZcsssKSJgAxmfLsjOmJvi9IrCTTL/uQbqy5ef+jLdStTP/jN5BK5A=
Received: by 10.64.241.3 with SMTP id o3mr8931652qbh;
        Tue, 29 Aug 2006 12:04:19 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id q15sm2000124qbq.2006.08.29.12.04.17;
        Tue, 29 Aug 2006 12:04:19 -0700 (PDT)
Message-ID: <44F48FC4.2030204@gmail.com>
Date: Tue, 29 Aug 2006 15:04:36 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Installing a custom tokenizer
References: <44F3F64B.8030709@sirma.bg> <d746a7a72a985ab1dacb0e1a6ae4ed16@as-st.com> <359a92830608291046l4cd85347ice7e5f75af63ad72@mail.gmail.com> <743519bc0934a1bae126d34839ef1202@as-st.com>
In-Reply-To: <743519bc0934a1bae126d34839ef1202@as-st.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bill Taylor wrote:
>
> On Aug 29, 2006, at 1:46 PM, Erick Erickson wrote:
>
>> I'm in a real rush here, so pardon my brevity, but..... one of the
>> constructors for IndexWriter takes an Analyzer as a parameter, which 
>> can be
>> a PerFieldAnalyzerWrapper. That, if I understand your issue, should 
>> fix you
>> right up.
>
> that almost worked.  I can't use a per Field analyzer because I have 
> to process the content fields of all documents.  I built a custom 
> analyzer which extended the Standard Analyzer and replaced the 
> tokenStream method with a new one which used WhitespaceTokenizer 
> instead of StandardTokenizer.  This meant that my document IDs were 
> not split, but I lost the conversion of acronyms such as w.o. to wo 
> and the like
>
> So what I need to do is to make a new Tokenizer based on the 
> StandardTokenizer except that a NUM on line 83 of StandardTokenizer.jj 
> should be
>
> | NUM: (<ALPHANUM> (<P> <ALPHANUM>) +  | <ALPHANUM>) >
>
> so that a serial number need not have a digit in every other segment 
> and a series of letters and digits without special characters such as 
> a dash will be treated as a single word.
>
> Questions:
>
> 1) If I change the .jj file in this way, how to I run javaCC to make a 
> new tokenizer?  The JavaCC documentation says that JavaCC generates a 
> number of output files; I think that I only need the tokenizer code.
>
> 2) I suppose i have to tell the query parser to parse queries in the 
> same way, is that right?
>
> The reason I think so is that Luke says I have words such as w.o. in 
> the index which the query parser can't find.  I suspect I have to use 
> the same Analyzer on both, right?
>
Get JavaCC and run it on StandardTokenizer.jj. This should be as simple 
as typing 'JavaCC StandardTokenizer.jj'...I believe with no output 
folder specified all of the files will be built in the current 
directory. Don't worry about not generating the ones you do not 
need--JavaCC will handle everything for you. If you use Eclipse I 
recommend the JavaCC plug-in. I find it very handy.

Generally you must run the same analyzer that you indexed with on your 
search strings...if the standard analyzer parses oldman-83 to oldman 
while indexing and you use whitespace analyzer while searching then you 
will attempt to find oldman-83 in the index instead of oldman (which was 
what standard analyzer stored).

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 19:55:09 2006
Return-Path: <java-user-return-23019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53056 invoked from network); 29 Aug 2006 19:55:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 19:55:06 -0000
Received: (qmail 95600 invoked by uid 500); 29 Aug 2006 19:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95518 invoked by uid 500); 29 Aug 2006 19:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95490 invoked by uid 99); 29 Aug 2006 19:54:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:54:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 12:54:58 -0700
Received: by wr-out-0506.google.com with SMTP id i12so701603wra
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 12:54:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iirYl3IqFXKQ9b6khfSF4yMoRcQP7KsAlS2krkE4RJv6aDdoAsKkYcJWEW14qCwCud2zeqCyOH/WlhxVrVz04mPDUhpmYHwLRLuswqtccdd1zE6l9DFmiGUmBYkOFA2EY/ngfFV+s71hhbpmbvckwosT+MJcVOHN8K4022DNs6w=
Received: by 10.90.118.10 with SMTP id q10mr1933235agc;
        Tue, 29 Aug 2006 12:54:37 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Tue, 29 Aug 2006 12:54:37 -0700 (PDT)
Message-ID: <1cbd6f830608291254x2c8a2668l76fc3d78fc25ec08@mail.gmail.com>
Date: Tue, 29 Aug 2006 15:54:37 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sort by Date
In-Reply-To: <9ACB9C12-4A84-4743-B2ED-FDF0C48115A1@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11381_12182739.1156881277351"
References: <1cbd6f830608290850m58f8a46etb116fb2ca3682003@mail.gmail.com>
	 <9ACB9C12-4A84-4743-B2ED-FDF0C48115A1@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_11381_12182739.1156881277351
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

"Index the date". Do you mean, index date, or the document date?

Could this be in a LIA book?



On 8/29/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Aug 29, 2006, at 11:50 AM, Mag Gam wrote:
> > Is it possible to sort results by date of the document?
>
> Sure, check out the Sort class and the overloaded IndexSearcher.search
> () methods that take a Sort.  You will need to index the date in a
> sortable way. DateTools provides handy methods for this purpose.
>
>        Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11381_12182739.1156881277351--

From java-user-return-23020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 20:14:29 2006
Return-Path: <java-user-return-23020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57774 invoked from network); 29 Aug 2006 20:14:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:14:28 -0000
Received: (qmail 28704 invoked by uid 500); 29 Aug 2006 20:14:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28679 invoked by uid 500); 29 Aug 2006 20:14:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28668 invoked by uid 99); 29 Aug 2006 20:14:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:14:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:14:21 -0700
Received: from postoffice.omnis.com (mail-hub-2.int.omnis.com [10.0.0.37])
	by smtp.omnis.com (Postfix) with ESMTP id 8255B1B4D4
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 13:14:00 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 558661880A01
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 13:14:00 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <1cbd6f830608291254x2c8a2668l76fc3d78fc25ec08@mail.gmail.com>
References: <1cbd6f830608290850m58f8a46etb116fb2ca3682003@mail.gmail.com> <9ACB9C12-4A84-4743-B2ED-FDF0C48115A1@ehatchersolutions.com> <1cbd6f830608291254x2c8a2668l76fc3d78fc25ec08@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <ffcbe714aad443763af07d1aad5fc826@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Sort by Date
Date: Tue, 29 Aug 2006 16:47:19 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

i gave each of my documents a special field named date and I put in a 
normalized Lucene date with a precision of one day.  This date is 
yyyymmdd so that it can be sorted.  having done that, however, I am 
unsure how to ask Lucene to sort on that date, but I'll figure it out 
in time or someone will tell me.

On Aug 29, 2006, at 3:54 PM, Mag Gam wrote:

> "Index the date". Do you mean, index date, or the document date?
>
> Could this be in a LIA book?
>
>
>
> On 8/29/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>>
>> On Aug 29, 2006, at 11:50 AM, Mag Gam wrote:
>> > Is it possible to sort results by date of the document?
>>
>> Sure, check out the Sort class and the overloaded IndexSearcher.search
>> () methods that take a Sort.  You will need to index the date in a
>> sortable way. DateTools provides handy methods for this purpose.
>>
>>        Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 20:25:25 2006
Return-Path: <java-user-return-23021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61741 invoked from network); 29 Aug 2006 20:25:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:25:20 -0000
Received: (qmail 57534 invoked by uid 500); 29 Aug 2006 20:25:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57504 invoked by uid 500); 29 Aug 2006 20:25:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57488 invoked by uid 99); 29 Aug 2006 20:25:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:25:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:25:02 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B846A5B778; Tue, 29 Aug 2006 13:24:41 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B24947F403
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 13:24:41 -0700 (PDT)
Date: Tue, 29 Aug 2006 13:24:41 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sort by Date
In-Reply-To: <ffcbe714aad443763af07d1aad5fc826@as-st.com>
Message-ID: <Pine.LNX.4.58.0608291324020.11959@hal.rescomp.berkeley.edu>
References: <1cbd6f830608290850m58f8a46etb116fb2ca3682003@mail.gmail.com>
 <9ACB9C12-4A84-4743-B2ED-FDF0C48115A1@ehatchersolutions.com>
 <1cbd6f830608291254x2c8a2668l76fc3d78fc25ec08@mail.gmail.com>
 <ffcbe714aad443763af07d1aad5fc826@as-st.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: yyyymmdd so that it can be sorted.  having done that, however, I am
: unsure how to ask Lucene to sort on that date, but I'll figure it out
: in time or someone will tell me.

you don't need to wait ... it's already been explained in this thread,
look at the Sort class and the methods in IdexSearcher which take Sort
objects.

:
: On Aug 29, 2006, at 3:54 PM, Mag Gam wrote:
:
: > "Index the date". Do you mean, index date, or the document date?
: >
: > Could this be in a LIA book?
: >
: >
: >
: > On 8/29/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
: >>
: >>
: >> On Aug 29, 2006, at 11:50 AM, Mag Gam wrote:
: >> > Is it possible to sort results by date of the document?
: >>
: >> Sure, check out the Sort class and the overloaded IndexSearcher.search
: >> () methods that take a Sort.  You will need to index the date in a
: >> sortable way. DateTools provides handy methods for this purpose.
: >>
: >>        Erik
: >>
: >>
: >> ---------------------------------------------------------------------
: >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: >> For additional commands, e-mail: java-user-help@lucene.apache.org
: >>
: >>
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 20:58:17 2006
Return-Path: <java-user-return-23022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76222 invoked from network); 29 Aug 2006 20:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 20:58:17 -0000
Received: (qmail 24036 invoked by uid 500); 29 Aug 2006 20:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24008 invoked by uid 500); 29 Aug 2006 20:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23997 invoked by uid 99); 29 Aug 2006 20:58:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:58:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 13:58:05 -0700
Received: by py-out-1112.google.com with SMTP id w49so2525231pyg
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 13:57:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BtTXEJIXiNvE/NES+7nkjxN5Dg5+ylVWYN90U/vIGbO18lWG2ok+vrFmEQqbdI3JUvqSJw0uNPtbmlzZnMFJVhhUPuwkskhwAWxUtN+ZuJ3jcbZBNQJbvblO56LvsXWLHOJV9ZNXvPNHEEpMXjXWtA7evDY9mDZ/8+KQLE54buM=
Received: by 10.35.100.6 with SMTP id c6mr21146pym;
        Tue, 29 Aug 2006 13:57:44 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 29 Aug 2006 13:57:44 -0700 (PDT)
Message-ID: <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com>
Date: Tue, 29 Aug 2006 16:57:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Installing a custom tokenizer
In-Reply-To: <617d2b451b3f7d8e9530363d5b4f4474@as-st.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17217_26657837.1156885064463"
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com>
	 <cf49d06c1d912dfaef83efcb08c4c583@as-st.com>
	 <1156867987.44f4679350377@webmail.uu.se>
	 <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu>
	 <617d2b451b3f7d8e9530363d5b4f4474@as-st.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17217_26657837.1156885064463
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Tucked away in the contrib section of  Lucene (I'm using 2.0) there is....

org.apache.lucene.index.memory.PatternAnalyzer

which takes a regular expression as and tokenizes with it. Would that help?
Word of warning... the regex determines what is NOT a token, not what IS a
token (as I remember), which threw me for a bit.

Don't know if this is really useful, but it might work for you without as
much work...

Best
Erick@I'mNowBeyondMyCompetence.WhyDoTheyStillEmployMeHere?

On 8/29/06, Bill Taylor <wataylor@as-st.com> wrote:
>
>
> On Aug 29, 2006, at 2:47 PM, Chris Hostetter wrote:
>
> >
> > : Have a look at PerFieldAnalyzerWrapper:
> >
> > :
> > http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/
> > PerFieldAnalyzerWrapper.html
> >
> > ...which can be specified in the constructors for IndexWriter and
> > QueryParser.
>
> As I understand it, this allows me to specify a different analyzer for
> each field name.  My problem is that the standard analyzer will not
> work for my content field and I need to define a new one.  I need to
> make a modification to the StandardTokenizer so that a number does not
> need to have a digit in every other segment of a part number.
>
> For example, the StandardTokenizer breaks aa-bb-2 on the - between aa
> and bb because it demands that every other string between a - have a
> digit.
>
> I need to modify the .jj file for the Standard Tokenizer and get a new
> one, but I am confused by the javaCC documentation and do not know how
> to run it to get what I need.
>
> Thanks for the help.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17217_26657837.1156885064463--

From java-user-return-23023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 22:02:38 2006
Return-Path: <java-user-return-23023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11482 invoked from network); 29 Aug 2006 22:02:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 22:02:38 -0000
Received: (qmail 50507 invoked by uid 500); 29 Aug 2006 22:02:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50440 invoked by uid 500); 29 Aug 2006 22:02:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50429 invoked by uid 99); 29 Aug 2006 22:02:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:02:31 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.196.97.117] (HELO web57013.mail.re3.yahoo.com) (66.196.97.117)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Aug 2006 15:02:31 -0700
Received: (qmail 99095 invoked by uid 60001); 29 Aug 2006 22:02:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ttz2Rc01BODr3hDR0kZT4wf2rEf+V6zOp1KcvwBQejJjaoxQxSavvp56rZuKOZn3Q/vvaRAd+yEh819F8Y0EH+pSLSpOoRNigL2DFX4GMrJvbgL2rn611EAM31Dd2QhUcUs4JGey/mylRpM6eErr2AaPtvq066VvWcmj+QttQGg=  ;
Message-ID: <20060829220209.99093.qmail@web57013.mail.re3.yahoo.com>
Received: from [38.99.201.242] by web57013.mail.re3.yahoo.com via HTTP; Tue, 29 Aug 2006 15:02:09 PDT
Date: Tue, 29 Aug 2006 15:02:09 -0700 (PDT)
From: Xiaocheng Luan <jenaluan@yahoo.com>
Subject: Creating a new index from an existing index
To: java-user@lucene.apache.org
In-Reply-To: <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1865721952-1156888929=:93359"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1865721952-1156888929=:93359
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
Got a question. Here is what I want to achieve:

Create a new index from an existing index, to change the boosting factor for some of the documents (and potentially some other tweaks), without reindexing it from the source.

Is there any tools or ways to do this?
Thanks!
Xiaocheng Luan

 				
---------------------------------
Get your own web address for just $1.99/1st yr. We'll help. Yahoo! Small Business.
--0-1865721952-1156888929=:93359--

From java-user-return-23024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 22:49:07 2006
Return-Path: <java-user-return-23024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27298 invoked from network); 29 Aug 2006 22:49:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 22:49:06 -0000
Received: (qmail 9028 invoked by uid 500); 29 Aug 2006 22:49:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8717 invoked by uid 500); 29 Aug 2006 22:48:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8705 invoked by uid 99); 29 Aug 2006 22:48:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:48:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:48:58 -0700
Received: from postoffice.omnis.com (mail-hub-2.int.omnis.com [10.0.0.37])
	by smtp.omnis.com (Postfix) with ESMTP id 1ED481B6AB
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 15:48:37 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 539F31880A15
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 15:48:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com>
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com> <cf49d06c1d912dfaef83efcb08c4c583@as-st.com> <1156867987.44f4679350377@webmail.uu.se> <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu> <617d2b451b3f7d8e9530363d5b4f4474@as-st.com> <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <b335c71e9b18c0a7ee27e52b37dccb7a@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Installing a custom tokenizer
Date: Tue, 29 Aug 2006 19:21:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have copied Lucene's StandardTokenizer.jj into my directory, renamed 
it, and did a global change of the names to my class name, 
LogTokenizer.

The issue is that the generated LogTokenizer.java does not compile for 
2 reasons:

1) in the constructor, this(new FastCharStream(reader)); fails because 
there is no such constructor in the parent class.  I commented it out.

2) I get an error on the next() method which throws ParseException and 
IO Exception.  The message is Exception ParseException is not 
compatible with throws clause in TokenStream.next().  As far as I can 
see, the exceptions are OK.

Since all of this is generated code, my feelings are a bit hurt.  Did 
Lucene use an older version of JavaCC?  I am using javacc-4.0

On Aug 29, 2006, at 4:57 PM, Erick Erickson wrote:

> Tucked away in the contrib section of  Lucene (I'm using 2.0) there 
> is....
>
> org.apache.lucene.index.memory.PatternAnalyzer
>
> which takes a regular expression as and tokenizes with it. Would that 
> help?
> Word of warning... the regex determines what is NOT a token, not what 
> IS a
> token (as I remember), which threw me for a bit.
>
> Don't know if this is really useful, but it might work for you without 
> as
> much work...
>
> Best
> Erick@I'mNowBeyondMyCompetence.WhyDoTheyStillEmployMeHere?
>
> On 8/29/06, Bill Taylor <wataylor@as-st.com> wrote:
>>
>>
>> On Aug 29, 2006, at 2:47 PM, Chris Hostetter wrote:
>>
>> >
>> > : Have a look at PerFieldAnalyzerWrapper:
>> >
>> > :
>> > http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/
>> > PerFieldAnalyzerWrapper.html
>> >
>> > ...which can be specified in the constructors for IndexWriter and
>> > QueryParser.
>>
>> As I understand it, this allows me to specify a different analyzer for
>> each field name.  My problem is that the standard analyzer will not
>> work for my content field and I need to define a new one.  I need to
>> make a modification to the StandardTokenizer so that a number does not
>> need to have a digit in every other segment of a part number.
>>
>> For example, the StandardTokenizer breaks aa-bb-2 on the - between aa
>> and bb because it demands that every other string between a - have a
>> digit.
>>
>> I need to modify the .jj file for the Standard Tokenizer and get a new
>> one, but I am confused by the javaCC documentation and do not know how
>> to run it to get what I need.
>>
>> Thanks for the help.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 22:55:55 2006
Return-Path: <java-user-return-23025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28955 invoked from network); 29 Aug 2006 22:55:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 22:55:54 -0000
Received: (qmail 17780 invoked by uid 500); 29 Aug 2006 22:55:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17737 invoked by uid 500); 29 Aug 2006 22:55:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17722 invoked by uid 99); 29 Aug 2006 22:55:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:55:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 15:55:47 -0700
Received: by nz-out-0102.google.com with SMTP id z6so1293819nzd
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 15:55:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nEO5Ip4J9ZiYOlwGhNPNE+61CW9Q/l3BHOdjcjeVP/k85F3ElQo7vcYeJR27mAXNzOQs+2d+C5n5JxPgcbeCIE3kXiAIEfZgulgWKwpLM18rAZggSf12oKH9EbOLkW2G1VLKzcmUeU6xKUE5z4to/b+9X74e7+tYm765SANYA08=
Received: by 10.64.204.19 with SMTP id b19mr88255qbg;
        Tue, 29 Aug 2006 15:55:27 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id e18sm5667495qba.2006.08.29.15.55.25;
        Tue, 29 Aug 2006 15:55:26 -0700 (PDT)
Message-ID: <44F4C5F1.3060301@gmail.com>
Date: Tue, 29 Aug 2006 18:55:45 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Installing a custom tokenizer
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com> <cf49d06c1d912dfaef83efcb08c4c583@as-st.com> <1156867987.44f4679350377@webmail.uu.se> <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu> <617d2b451b3f7d8e9530363d5b4f4474@as-st.com> <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com> <b335c71e9b18c0a7ee27e52b37dccb7a@as-st.com>
In-Reply-To: <b335c71e9b18c0a7ee27e52b37dccb7a@as-st.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bill Taylor wrote:
> I have copied Lucene's StandardTokenizer.jj into my directory, renamed 
> it, and did a global change of the names to my class name, LogTokenizer.
>
> The issue is that the generated LogTokenizer.java does not compile for 
> 2 reasons:
>
> 1) in the constructor, this(new FastCharStream(reader)); fails because 
> there is no such constructor in the parent class.  I commented it out.
>
> 2) I get an error on the next() method which throws ParseException and 
> IO Exception.  The message is Exception ParseException is not 
> compatible with throws clause in TokenStream.next().  As far as I can 
> see, the exceptions are OK.
>
> Since all of this is generated code, my feelings are a bit hurt.  Did 
> Lucene use an older version of JavaCC?  I am using javacc-4.0
>
> On Aug 29, 2006, at 4:57 PM, Erick Erickson wrote:
>
>
>
1. I would need to know more, but it sounds like you should uncomment it :)

2. JavaCC 4.0 is fine.  If you look at the Lucene build.xml you will see 
that  it compile the javacc generated classes in a separate directory so 
that it can exclude the ParseException class from compilation. Check out 
the build file and copy that method.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 23:12:39 2006
Return-Path: <java-user-return-23026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33334 invoked from network); 29 Aug 2006 23:12:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 23:12:36 -0000
Received: (qmail 42109 invoked by uid 500); 29 Aug 2006 23:12:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42071 invoked by uid 500); 29 Aug 2006 23:12:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42060 invoked by uid 99); 29 Aug 2006 23:12:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 16:12:30 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 16:12:29 -0700
Received: by nz-out-0102.google.com with SMTP id z6so1296176nzd
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 16:12:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=hB7HEcQNhykv4h7tF7PwC131aECWmOsACUFI8nL5n++EOu6tjMrj5UC5VZKRpQSYxmv+YAskBYbMflPTtdneStC6KywHOlZOFzR241tu9brakbPYR74tSRb8sYRkxeLRz53iweDJXXhglAylw01QWWhp9ccd4nVeKQHLxBMNOgE=
Received: by 10.65.75.19 with SMTP id c19mr147022qbl;
        Tue, 29 Aug 2006 16:12:08 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id e14sm5673563qba.2006.08.29.16.12.07;
        Tue, 29 Aug 2006 16:12:08 -0700 (PDT)
Message-ID: <44F4C9DB.8030501@gmail.com>
Date: Tue, 29 Aug 2006 19:12:27 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Installing a custom tokenizer
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com> <cf49d06c1d912dfaef83efcb08c4c583@as-st.com> <1156867987.44f4679350377@webmail.uu.se> <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu> <617d2b451b3f7d8e9530363d5b4f4474@as-st.com> <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com> <b335c71e9b18c0a7ee27e52b37dccb7a@as-st.com>
In-Reply-To: <b335c71e9b18c0a7ee27e52b37dccb7a@as-st.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bill Taylor wrote:
> I have copied Lucene's StandardTokenizer.jj into my directory, renamed 
> it, and did a global change of the names to my class name, LogTokenizer.
>
> The issue is that the generated LogTokenizer.java does not compile for 
> 2 reasons:
>
> 1) in the constructor, this(new FastCharStream(reader)); fails because 
> there is no such constructor in the parent class.  I commented it out.
>
> 2) I get an error on the next() method which throws ParseException and 
> IO Exception.  The message is Exception ParseException is not 
> compatible with throws clause in TokenStream.next().  As far as I can 
> see, the exceptions are OK.
>
> Since all of this is generated code, my feelings are a bit hurt.  Did 
> Lucene use an older version of JavaCC?  I am using javacc-4.0
>
> On Aug 29, 2006, at 4:57 PM, Erick Erickson wrote:
>
>
Ok. How about some better answers:

1. this(new FastCharStream(reader)) does not refer to the parent class 
but the LogTokenizer class itself. There should be a constructor on the 
LogTokenizer that takes a CharStream:

  public StandardTokenizer(CharStream stream) {
    token_source = new StandardTokenizerTokenManager(stream);
    token = new Token();
    jj_ntk = -1;
    jj_gen = 0;
    for (int i = 0; i < 1; i++) jj_la1[i] = -1;
  }

If you're LogTokenizer does not have this then something did not go right.

2. The ParseException that is generated when making the StandardAnalyzer 
must be killed because there is another ParseException class (maybe in 
queryparser?) that must be used instead. The lucene build file excludes 
the StandardAnalyzer ParseException so that the other one is used. You 
could prob just delete it as well but then of course you would have to 
remember to delete it every time you rebuilt the javacc file.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 23:19:57 2006
Return-Path: <java-user-return-23027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36171 invoked from network); 29 Aug 2006 23:19:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 23:19:56 -0000
Received: (qmail 54072 invoked by uid 500); 29 Aug 2006 23:19:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54045 invoked by uid 500); 29 Aug 2006 23:19:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54034 invoked by uid 99); 29 Aug 2006 23:19:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 16:19:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 16:19:49 -0700
Received: by py-out-1112.google.com with SMTP id w49so2563030pyg
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 16:19:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qmKzDFo7igpgKdkN+Ss1dwjYt6RnOFFXy/SjvXsy5PTZJBsXh5Dfr4XbXv7ELBp5oXKbwUn7y49sMvzw2tOMPRvyXyQCPU5KV8iIgvfR7//369ogb4KwnqQgSJxSTPY1V6eubz9epNFyk1ZgMZbykrpRtP0hk+nBSdD73Qur7CY=
Received: by 10.35.94.2 with SMTP id w2mr233345pyl;
        Tue, 29 Aug 2006 16:19:28 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 29 Aug 2006 16:19:28 -0700 (PDT)
Message-ID: <359a92830608291619g8c15c1bp9d04e32c8ef0dab9@mail.gmail.com>
Date: Tue, 29 Aug 2006 19:19:28 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating a new index from an existing index
In-Reply-To: <20060829220209.99093.qmail@web57013.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19749_3006467.1156893568629"
References: <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com>
	 <20060829220209.99093.qmail@web57013.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19749_3006467.1156893568629
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A couple of things..

1> I don't think you set the boost when indexing. You set the boost when
querying, so you don't need to re-index for boosting.

2> A recurring theme is that you can't do an update-in-place for a lucene
document. You might search the mail archive for a discussion of this. The
short form is that if you want to change every document, you're probably
better off re-indexing the whole thing. If, for some reason you can't/don't
want to just re-index it all, then be aware that if you didn't store the
fields for the documents (i.e. use Field.Store.YES), then you really can't
reconstruct the document from the index without potentially losing
information.

Hope this helps
Erick

On 8/29/06, Xiaocheng Luan <jenaluan@yahoo.com> wrote:
>
> Hi,
> Got a question. Here is what I want to achieve:
>
> Create a new index from an existing index, to change the boosting factor
> for some of the documents (and potentially some other tweaks), without
> reindexing it from the source.
>
> Is there any tools or ways to do this?
> Thanks!
> Xiaocheng Luan
>
>
> ---------------------------------
> Get your own web address for just $1.99/1st yr. We'll help. Yahoo! Small
> Business.
>

------=_Part_19749_3006467.1156893568629--

From java-user-return-23028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 29 23:35:51 2006
Return-Path: <java-user-return-23028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40156 invoked from network); 29 Aug 2006 23:35:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2006 23:35:51 -0000
Received: (qmail 71550 invoked by uid 500); 29 Aug 2006 23:35:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70517 invoked by uid 500); 29 Aug 2006 23:35:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70491 invoked by uid 99); 29 Aug 2006 23:35:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 16:35:45 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 16:35:44 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1238wxc
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 16:35:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eKDm+qgfdRAjMfRLUT3XEEc0R+jHpHUBNGPSwxpLxhSzjAUVFVBkXmGPs3HBS62k/shwRpuFm3Uq3qYdRUetwKfZXEx46C960L52nPCT2Hft4pJiCrKpbicZMdgm3CDDf45aKf9VD9bWHTao2wE71U4PBVmln2U6ucgcyZcHVSE=
Received: by 10.70.15.15 with SMTP id 15mr248912wxo;
        Tue, 29 Aug 2006 16:35:23 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Tue, 29 Aug 2006 16:35:23 -0700 (PDT)
Message-ID: <d8050f240608291635g24c25821l32e43e24059cee02@mail.gmail.com>
Date: Wed, 30 Aug 2006 09:35:23 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Straight TF-IDF cosine similarity?
In-Reply-To: <p06230960c11a3bf9a5be@192.168.1.140>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19161_9902348.1156894523652"
References: <44F3F64B.8030709@sirma.bg>
	 <d746a7a72a985ab1dacb0e1a6ae4ed16@as-st.com>
	 <359a92830608291046l4cd85347ice7e5f75af63ad72@mail.gmail.com>
	 <743519bc0934a1bae126d34839ef1202@as-st.com>
	 <p06230960c11a3bf9a5be@192.168.1.140>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19161_9902348.1156894523652
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you looked at the MoreLikeThis class in the similarity package?

On 8/30/06, Winton Davies <wdavies@yahoo-inc.com> wrote:
>
> Hi All,
>
> I'm scratching my head - can someone tell me which class implements
> an efficient multiple term TF.IDF Cosine similarity scoring mechanism?
>
> There is clearly the single TermScorer - but I can't find the class
> that would do a bucketed TF.IDF cosine - i.e. fill an accumulator
> with the tf.idf^2 for each of the term posting lists, until
> accumulator is full, and then compute the final score.
>
> I don't need a Boolean Query - at least this seems like overkill.
>
> Cheers,
>   Winton
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19161_9902348.1156894523652--

From java-user-return-23029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 00:06:17 2006
Return-Path: <java-user-return-23029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47033 invoked from network); 30 Aug 2006 00:06:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 00:06:14 -0000
Received: (qmail 95855 invoked by uid 500); 30 Aug 2006 00:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95820 invoked by uid 500); 30 Aug 2006 00:06:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95804 invoked by uid 99); 30 Aug 2006 00:06:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 17:06:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 17:06:07 -0700
Received: from postoffice.omnis.com (mail-hub-2.int.omnis.com [10.0.0.37])
	by smtp.omnis.com (Postfix) with ESMTP id 9EDA01B6E5
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 17:05:46 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id CBEF31880A22
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 17:05:46 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <44F4C9DB.8030501@gmail.com>
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com> <cf49d06c1d912dfaef83efcb08c4c583@as-st.com> <1156867987.44f4679350377@webmail.uu.se> <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu> <617d2b451b3f7d8e9530363d5b4f4474@as-st.com> <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com> <b335c71e9b18c0a7ee27e52b37dccb7a@as-st.com> <44F4C9DB.8030501@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <bd1c1017f6e107c3eac217b4f50cfc36@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Installing a custom tokenizer
Date: Tue, 29 Aug 2006 20:39:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 29, 2006, at 7:12 PM, Mark Miller wrote:

>
> 2. The ParseException that is generated when making the 
> StandardAnalyzer must be killed because there is another 
> ParseException class (maybe in queryparser?) that must be used 
> instead. The lucene build file excludes the StandardAnalyzer 
> ParseException so that the other one is used. You could prob just 
> delete it as well but then of course you would have to remember to 
> delete it every time you rebuilt the javacc file.
>

If I use the generated parse exception, I get the message that the 
ParseException which is thrown by next() is incompatible with the 
throws statement in the generated code.  If I get rid of it and use the 
older one, it turns out that generateException cannot generate a 
ParseException because it passes a generated Token instead of the 
Lucene Token.

It appears that the JavaCC I am using is generating code which is a bit 
ahead of Lucene.


So I simply generated a new token of hte roper Lucene type for the 
error message and everything compiled.  Now I have to tell the query 
parser to use the same analyzer and all will be well.

Thanks.

The good news is that Lucene is unbelievably wonderful.  The bad news 
is that Lucene is unbelievably wonderful.

Thanks again.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 00:13:07 2006
Return-Path: <java-user-return-23030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48510 invoked from network); 30 Aug 2006 00:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 00:12:59 -0000
Received: (qmail 2566 invoked by uid 500); 30 Aug 2006 00:12:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2530 invoked by uid 500); 30 Aug 2006 00:12:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2519 invoked by uid 99); 30 Aug 2006 00:12:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 17:12:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 17:12:51 -0700
Received: by py-out-1112.google.com with SMTP id w49so10386pyg
        for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 17:12:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qOMGcj6m3+XR5xc5S9hLEqhYyBvK7OXv2/Ov2rMxIjbS7/A+MqjWjk4sNJS/nqEKg0ALSvDSC1R9iJ9sEu+ehSApf0h1l84CI+vQkB74Oo4zbPDZoyIuBcBTbVH+HzRSuaD/Bjyo3b2bGLFaibNU9mCgcQlYR5ryLgmOm6P9Xl4=
Received: by 10.35.123.10 with SMTP id a10mr348224pyn;
        Tue, 29 Aug 2006 17:12:31 -0700 (PDT)
Received: by 10.35.8.2 with HTTP; Tue, 29 Aug 2006 17:12:30 -0700 (PDT)
Message-ID: <8e7e4d020608291712v50d57a20w1f3e173b87099f2@mail.gmail.com>
Date: Tue, 29 Aug 2006 17:12:30 -0700
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Installing a custom tokenizer
In-Reply-To: <bd1c1017f6e107c3eac217b4f50cfc36@as-st.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19660_15151148.1156896750958"
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com>
	 <cf49d06c1d912dfaef83efcb08c4c583@as-st.com>
	 <1156867987.44f4679350377@webmail.uu.se>
	 <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu>
	 <617d2b451b3f7d8e9530363d5b4f4474@as-st.com>
	 <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com>
	 <b335c71e9b18c0a7ee27e52b37dccb7a@as-st.com>
	 <44F4C9DB.8030501@gmail.com>
	 <bd1c1017f6e107c3eac217b4f50cfc36@as-st.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19660_15151148.1156896750958
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Your problem is that StandardTokenizer doesn's fit your requirements.
Since you know how to implement a new one, just do it.
If you just want to modify StandardTokenizer, you can get the codes and
rename it to your class, then modify something that you dislike. I think
it's a so simple stuff, why do you make it so complicated?

On 8/29/06, Bill Taylor <wataylor@as-st.com> wrote:
>
>
> On Aug 29, 2006, at 7:12 PM, Mark Miller wrote:
>
> >
> > 2. The ParseException that is generated when making the
> > StandardAnalyzer must be killed because there is another
> > ParseException class (maybe in queryparser?) that must be used
> > instead. The lucene build file excludes the StandardAnalyzer
> > ParseException so that the other one is used. You could prob just
> > delete it as well but then of course you would have to remember to
> > delete it every time you rebuilt the javacc file.
> >
>
> If I use the generated parse exception, I get the message that the
> ParseException which is thrown by next() is incompatible with the
> throws statement in the generated code.  If I get rid of it and use the
> older one, it turns out that generateException cannot generate a
> ParseException because it passes a generated Token instead of the
> Lucene Token.
>
> It appears that the JavaCC I am using is generating code which is a bit
> ahead of Lucene.
>
>
> So I simply generated a new token of hte roper Lucene type for the
> error message and everything compiled.  Now I have to tell the query
> parser to use the same analyzer and all will be well.
>
> Thanks.
>
> The good news is that Lucene is unbelievably wonderful.  The bad news
> is that Lucene is unbelievably wonderful.
>
> Thanks again.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
Yueyu Lin

------=_Part_19660_15151148.1156896750958--

From java-user-return-23031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 00:23:00 2006
Return-Path: <java-user-return-23031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50733 invoked from network); 30 Aug 2006 00:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 00:22:59 -0000
Received: (qmail 12281 invoked by uid 500); 30 Aug 2006 00:22:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11925 invoked by uid 500); 30 Aug 2006 00:22:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11914 invoked by uid 99); 30 Aug 2006 00:22:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 17:22:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 17:22:52 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A10AF30EFCD4; Tue, 29 Aug 2006 20:22:28 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 3C7C630EFCD4
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 20:22:16 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1cbd6f830608291254x2c8a2668l76fc3d78fc25ec08@mail.gmail.com>
References: <1cbd6f830608290850m58f8a46etb116fb2ca3682003@mail.gmail.com> <9ACB9C12-4A84-4743-B2ED-FDF0C48115A1@ehatchersolutions.com> <1cbd6f830608291254x2c8a2668l76fc3d78fc25ec08@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <691DEDD0-39E9-44F3-BBAA-D9E3DBFC1797@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sort by Date
Date: Tue, 29 Aug 2006 20:22:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 29, 2006, at 3:54 PM, Mag Gam wrote:
> "Index the date". Do you mean, index date, or the document date?
>
> Could this be in a LIA book?


This is entirely up to you.  What gets indexed is entirely within the  
developers control.  What date do you want indexed?  I presume by  
"document date" you mean a file system document.  But I'm thinking  
more generally here - "documents" in Lucene can be pulled from thin  
air, not just from file system documents.  You are welcome to use the  
file system date.

LIA does have an example of this, which actually makes some tests  
fail if the data file dates are changed.   
TestDataDocumentHandler.java indexes .properties files via the Ant  
<index> task (in contrib/ant in Subversion), and that task indexes  
the file last modified timestamp automatically with each document.   
SortingExample.java has examples of sorting (though not by this  
datestamp, but same idea).

	Erik


>
>
>
> On 8/29/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>>
>> On Aug 29, 2006, at 11:50 AM, Mag Gam wrote:
>> > Is it possible to sort results by date of the document?
>>
>> Sure, check out the Sort class and the overloaded  
>> IndexSearcher.search
>> () methods that take a Sort.  You will need to index the date in a
>> sortable way. DateTools provides handy methods for this purpose.
>>
>>        Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 00:59:22 2006
Return-Path: <java-user-return-23032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59980 invoked from network); 30 Aug 2006 00:59:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 00:59:21 -0000
Received: (qmail 56507 invoked by uid 500); 30 Aug 2006 00:59:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56468 invoked by uid 500); 30 Aug 2006 00:59:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56457 invoked by uid 99); 30 Aug 2006 00:59:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 17:59:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 17:59:14 -0700
Received: from postoffice.omnis.com (mail-hub-2.int.omnis.com [10.0.0.37])
	by smtp.omnis.com (Postfix) with ESMTP id 1570A1B7EC
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 17:58:52 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 58F751880A37
	for <java-user@lucene.apache.org>; Tue, 29 Aug 2006 17:58:51 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <8e7e4d020608291712v50d57a20w1f3e173b87099f2@mail.gmail.com>
References: <33432A11DBA32B4EACBF6E37C5671DFA04F4EF@mailhyd2.hyd.deshaw.com> <cf49d06c1d912dfaef83efcb08c4c583@as-st.com> <1156867987.44f4679350377@webmail.uu.se> <Pine.LNX.4.58.0608291144410.3758@hal.rescomp.berkeley.edu> <617d2b451b3f7d8e9530363d5b4f4474@as-st.com> <359a92830608291357x1355af16p2a1f129cbce12add@mail.gmail.com> <b335c71e9b18c0a7ee27e52b37dccb7a@as-st.com> <44F4C9DB.8030501@gmail.com> <bd1c1017f6e107c3eac217b4f50cfc36@as-st.com> <8e7e4d020608291712v50d57a20w1f3e173b87099f2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <b1643057326aa61a700534e26f9453a4@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Installing a custom tokenizer
Date: Tue, 29 Aug 2006 21:32:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Because I wanted to use the javaCC input code from Lucene.  99.99% of 
what the standard parser did was VERY GOOD.  having worked with 
computer-generated compilers in the past, I realized that if I were to 
modify the parser itself, I would eventually get into real trouble.  So 
I took the time to figure out how to use JavaCC, with a great deal of 
help from Mr. Miller.  Now I can make changes much more easily.

That is why I took the trouble to do it that way.

On Aug 29, 2006, at 8:12 PM, yueyu lin wrote:

> Your problem is that StandardTokenizer doesn's fit your requirements.
> Since you know how to implement a new one, just do it.
> If you just want to modify StandardTokenizer, you can get the codes and
> rename it to your class, then modify something that you dislike. I 
> think
> it's a so simple stuff, why do you make it so complicated?
>
> On 8/29/06, Bill Taylor <wataylor@as-st.com> wrote:
>>
>>
>> On Aug 29, 2006, at 7:12 PM, Mark Miller wrote:
>>
>> >
>> > 2. The ParseException that is generated when making the
>> > StandardAnalyzer must be killed because there is another
>> > ParseException class (maybe in queryparser?) that must be used
>> > instead. The lucene build file excludes the StandardAnalyzer
>> > ParseException so that the other one is used. You could prob just
>> > delete it as well but then of course you would have to remember to
>> > delete it every time you rebuilt the javacc file.
>> >
>>
>> If I use the generated parse exception, I get the message that the
>> ParseException which is thrown by next() is incompatible with the
>> throws statement in the generated code.  If I get rid of it and use 
>> the
>> older one, it turns out that generateException cannot generate a
>> ParseException because it passes a generated Token instead of the
>> Lucene Token.
>>
>> It appears that the JavaCC I am using is generating code which is a 
>> bit
>> ahead of Lucene.
>>
>>
>> So I simply generated a new token of hte roper Lucene type for the
>> error message and everything compiled.  Now I have to tell the query
>> parser to use the same analyzer and all will be well.
>>
>> Thanks.
>>
>> The good news is that Lucene is unbelievably wonderful.  The bad news
>> is that Lucene is unbelievably wonderful.
>>
>> Thanks again.
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> --
> Yueyu Lin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 01:00:59 2006
Return-Path: <java-user-return-23033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60257 invoked from network); 30 Aug 2006 01:00:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 01:00:57 -0000
Received: (qmail 58369 invoked by uid 500); 30 Aug 2006 01:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58345 invoked by uid 500); 30 Aug 2006 01:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58331 invoked by uid 99); 30 Aug 2006 01:00:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Aug 2006 18:00:52 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.196.97.111] (HELO web57007.mail.re3.yahoo.com) (66.196.97.111)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Aug 2006 18:00:51 -0700
Received: (qmail 67335 invoked by uid 60001); 30 Aug 2006 01:00:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=h/xhHJe+XQjLw4NMFiq8ndcr/va2n4eTt35z+dg2l3XpScKeZVImfYY/ttcDEvagyWA8C8HANBQd7DTA1nRRQOF98nKGRqCUqkw7uYKWZohotF8xHADlrPS9c4gnvRO3w9xb6YZwXh8e6hF0wXGGK4VoGcucw/zFFCRm55EOgkY=  ;
Message-ID: <20060830010030.67333.qmail@web57007.mail.re3.yahoo.com>
Received: from [69.255.227.192] by web57007.mail.re3.yahoo.com via HTTP; Tue, 29 Aug 2006 18:00:29 PDT
Date: Tue, 29 Aug 2006 18:00:29 -0700 (PDT)
From: Xiaocheng Luan <jenaluan@yahoo.com>
Subject: Re: Creating a new index from an existing index
To: java-user@lucene.apache.org
In-Reply-To: <359a92830608291619g8c15c1bp9d04e32c8ef0dab9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-629730866-1156899629=:65837"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-629730866-1156899629=:65837
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks, Erick.
I agree that it might be unlikely to reconstruct from an existing index, but I think document boosting (that is, one document has a higher boost factor than other documents) as well as field boosting is specified during indexing.

Our use case is performancce/results tuning. We have huge indexes (in the range of dozens of GBs) and some sources are remote. I'm trying to figure out ways to avoid re-ingesting the contents as much as possible.
Any suggestions?
Thanks.
X.

Erick Erickson <erickerickson@gmail.com> wrote: A couple of things..

1> I don't think you set the boost when indexing. You set the boost when
querying, so you don't need to re-index for boosting.

2> A recurring theme is that you can't do an update-in-place for a lucene
document. You might search the mail archive for a discussion of this. The
short form is that if you want to change every document, you're probably
better off re-indexing the whole thing. If, for some reason you can't/don't
want to just re-index it all, then be aware that if you didn't store the
fields for the documents (i.e. use Field.Store.YES), then you really can't
reconstruct the document from the index without potentially losing
information.

Hope this helps
Erick

On 8/29/06, Xiaocheng Luan  wrote:
>
> Hi,
> Got a question. Here is what I want to achieve:
>
> Create a new index from an existing index, to change the boosting factor
> for some of the documents (and potentially some other tweaks), without
> reindexing it from the source.
>
> Is there any tools or ways to do this?
> Thanks!
> Xiaocheng Luan
>
>
> ---------------------------------
> Get your own web address for just $1.99/1st yr. We'll help. Yahoo! Small
> Business.
>


 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-629730866-1156899629=:65837--

From java-user-return-23034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 09:14:40 2006
Return-Path: <java-user-return-23034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99713 invoked from network); 30 Aug 2006 09:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 09:14:39 -0000
Received: (qmail 70945 invoked by uid 500); 30 Aug 2006 09:14:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69965 invoked by uid 500); 30 Aug 2006 09:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69954 invoked by uid 99); 30 Aug 2006 09:14:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 02:14:33 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Aug 2006 02:14:32 -0700
Received: (qmail 20416 invoked from network); 30 Aug 2006 09:11:35 -0000
Received: from unknown (HELO bhavin) (172.16.3.11)
  by mailserver with SMTP; 30 Aug 2006 09:11:35 -0000
Message-ID: <00f701c6cc16$79f16d90$0b0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: read past EOF
Date: Wed, 30 Aug 2006 14:57:13 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00F4_01C6CC44.93883EE0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00F4_01C6CC44.93883EE0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

Can anyone have any idea that what are the reason to lucene index got =
corrupted ?

I am running lucene 1.9 on unix machine...updating my index very =
frequently....after few updation it says "read past eof"

I know this exception generally comes when one of the index got =
corrupted...but i dont know why it got corrupted ?

may be mine code problem but i am not able to figure out exact =
problem...

plz help..

Thanks.
Bhavin
------=_NextPart_000_00F4_01C6CC44.93883EE0--


From java-user-return-23035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 10:38:30 2006
Return-Path: <java-user-return-23035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28246 invoked from network); 30 Aug 2006 10:38:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 10:38:25 -0000
Received: (qmail 60698 invoked by uid 500); 30 Aug 2006 10:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60561 invoked by uid 500); 30 Aug 2006 10:38:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60548 invoked by uid 99); 30 Aug 2006 10:38:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 03:38:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 03:38:16 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id C0A86DA06DC
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 06:37:54 -0400 (EDT)
Received: from heartbeat1.internal ([10.202.2.160])
  by frontend3.internal (MEProxy); Wed, 30 Aug 2006 06:37:55 -0400
X-Sasl-enc: FyFTu/VHMhALrgo/Ie+JtmYpUL+4TJHd4MBh1qYEaVqf 1156934274
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 3151760AF
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 06:37:53 -0400 (EDT)
Message-ID: <44F56A7E.5060503@mikemccandless.com>
Date: Wed, 30 Aug 2006 06:37:50 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: read past EOF
References: <00f701c6cc16$79f16d90$0b0310ac@bhavin>
In-Reply-To: <00f701c6cc16$79f16d90$0b0310ac@bhavin>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bhavin Pandya wrote:

> I am running lucene 1.9 on unix machine...updating my index very frequently....after few updation it says "read past eof"
> 
> I know this exception generally comes when one of the index got corrupted...but i dont know why it got corrupted ?
> 
> may be mine code problem but i am not able to figure out exact problem...

Is it your IndexWriter that's raising the exception?  Can you post the 
full exception here?  Also could you provide more detail about how your 
application works, what filesystem you're using under Unix, etc?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 11:38:12 2006
Return-Path: <java-user-return-23036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64887 invoked from network); 30 Aug 2006 11:38:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 11:38:11 -0000
Received: (qmail 71855 invoked by uid 500); 30 Aug 2006 11:38:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71820 invoked by uid 500); 30 Aug 2006 11:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71809 invoked by uid 99); 30 Aug 2006 11:38:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 04:38:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 04:38:02 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GIOO6-0003rR-4H
	for java-user@lucene.apache.org; Wed, 30 Aug 2006 04:37:42 -0700
Message-ID: <6057151.post@talk.nabble.com>
Date: Wed, 30 Aug 2006 04:37:42 -0700 (PDT)
From: John Pailet <9i7svel2zr6uujn@jetable.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting based on a selling rate
In-Reply-To: <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu> <6035831.post@talk.nabble.com> <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Yes, that is exactly what I want to do !

My external system gives me sell rate/Top N Selling books matching the user
terms (query)

I don't know what is the best way:

Storing sell rate into lucene Fields of the documents... (multiple
combination) and sort by this field, 

or doing something like you said: "adding an optional clauses to your
query for each of your N productIds"... but I don't really know how to do
this...

Any sample code exemple ?

Thank you very much,

John


Chris Hostetter wrote:
> 
> 
> : Ok, for the sort object, but my problem is I don't know haox to retrieve
> (or
> : store) information of the sell rate of the products (the sell rate
> deponds
> : on the QUERY ! The sort is different for each queries.)
> :
> : I imagine to connect to the DB and get sell rate of products for this
> : specific query... but connecting to DB at each query is not a right
> choice
> : ;-)
> 
> I'm sorry .. i missunderstood your question ... rereading it now here
> is what i sounds like you are saying:
> 
> When a user tells gives you a search term they are interested in,
> you have an external system that that you use to look up the top N selling
> books matching those terms, and what their sell rate is.  you would like
> to do a search across your entire lucene index, having those N products
> score higher based on their sell rate. (which is not in the index)
> 
> ...assuming i have that right, try adding an optional clauses to your
> query for each of your N productIds, with a boost which is proportionate
> to the sell rate.  the exact boost values should be based on how importnat
> you want the sell rate to be compared with with the textual relevancy of
> the query term.
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Sorting-based-on-a-selling-rate-tf2175860.html#a6057151
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 12:20:23 2006
Return-Path: <java-user-return-23037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86584 invoked from network); 30 Aug 2006 12:20:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 12:20:23 -0000
Received: (qmail 45642 invoked by uid 500); 30 Aug 2006 12:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45614 invoked by uid 500); 30 Aug 2006 12:20:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45603 invoked by uid 99); 30 Aug 2006 12:20:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 05:20:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 05:20:16 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id k7UCJq32023300
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 15:19:52 +0300
Message-ID: <44F58268.6080404@sirma.bg>
Date: Wed, 30 Aug 2006 15:19:52 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: segments' size and getMaxMergeDocs()
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu> <6035831.post@talk.nabble.com> <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu> <6057151.post@talk.nabble.com>
In-Reply-To: <6057151.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If IndexWriter.getMaxMergeDocs() always returns M
then which one is true:
1) No segment file will ever contain > M documents;
2) Any segment that participates in a merge contains <= M documents (but 
the resulting segment of the merge may contain > M documents)

Obviously (1) implies (2) but my guess (based on my practical 
experience) is that only (2) is true.


Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 12:45:25 2006
Return-Path: <java-user-return-23038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92724 invoked from network); 30 Aug 2006 12:45:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 12:45:21 -0000
Received: (qmail 72152 invoked by uid 500); 30 Aug 2006 12:45:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72129 invoked by uid 500); 30 Aug 2006 12:45:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72117 invoked by uid 99); 30 Aug 2006 12:45:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 05:45:14 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Aug 2006 05:45:12 -0700
Received: (qmail 12204 invoked from network); 30 Aug 2006 12:41:21 -0000
Received: from unknown (HELO bhavin) (172.16.3.11)
  by mailserver with SMTP; 30 Aug 2006 12:41:21 -0000
Message-ID: <001901c6cc33$c75d3290$0b0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <00f701c6cc16$79f16d90$0b0310ac@bhavin> <44F56A7E.5060503@mikemccandless.com>
Subject: Re: read past EOF
Date: Wed, 30 Aug 2006 18:26:58 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Mike,


Here is the full stack trace of error which I got at search time....

java.io.IOException: read past EOF
at org.apache.lucene.store.FSIndexInput.readInternal FSDirectory.java:451)
at 
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:45)
at 
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:219)
at 
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:64)
at 
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:33)
at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:46)
at org.apache.lucene.index.SegmentTermEnum.(SegmentTermEnum.java:47)
at org.apache.lucene.index.TermInfosReader.(TermInfosReader.java:48)
at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:147)
at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:129)
at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:110)
at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:154)
at org.apache.lucene.store.Lock$With.run(Lock.java:109)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:143)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:127)
at org.apache.lucene.search.IndexSearcher.(IndexSearcher.java:42)


same kind of exception i am getting while i am trying to optimize my 
index..but at that time Its throwing from IndexWriter ...

My guess is ..."One of my index is got corrupted so whenever I am trying to 
search the index or optimize the index or merging the multiple index ...It 
will throws same exception but from different class...sometime from 
IndexReader or sometime from IndexWriter depends on how it is being called"

I am storing my index on local file system only ..on unix machine.

Here is in short what i am doing actually...

I have a index which is updated every 15min... using lucene 1.9 and jdk1.4.. 
. on unix machine....
once the index gets done I am moving index folder to "searchable-index" 
folder...so searchable index is completely saparate from actual index.
Its not multi-threaded application...so I am sure only one thread at a time 
accessing the index...

Thanks.
Bhavin

----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, August 30, 2006 4:07 PM
Subject: Re: read past EOF


> Bhavin Pandya wrote:
>
>> I am running lucene 1.9 on unix machine...updating my index very 
>> frequently....after few updation it says "read past eof"
>>
>> I know this exception generally comes when one of the index got 
>> corrupted...but i dont know why it got corrupted ?
>>
>> may be mine code problem but i am not able to figure out exact problem...
>
> Is it your IndexWriter that's raising the exception?  Can you post the 
> full exception here?  Also could you provide more detail about how your 
> application works, what filesystem you're using under Unix, etc?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 13:15:01 2006
Return-Path: <java-user-return-23039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3040 invoked from network); 30 Aug 2006 13:15:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 13:15:00 -0000
Received: (qmail 28891 invoked by uid 500); 30 Aug 2006 13:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28862 invoked by uid 500); 30 Aug 2006 13:14:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28851 invoked by uid 99); 30 Aug 2006 13:14:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 06:14:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 06:14:53 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id k7UDEV32029323
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 16:14:31 +0300
Message-ID: <44F58F36.6040307@sirma.bg>
Date: Wed, 30 Aug 2006 16:14:30 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Reviving a dead index
References: <44F3F64B.8030709@sirma.bg> <44F42594.3040609@mikemccandless.com>
In-Reply-To: <44F42594.3040609@mikemccandless.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Michael McCandless wrote:

/This means the segments files is referencing a segment named _1j8s and 
in trying to load that segment, the first thing Lucene does is load the 
"field infos" (_1j8s.fnm).  It tries to do so from a compound file (if 
you have it turned on & it exists), else from the filesystem directly.

/Michael,
For a moment I wondered what exactly do you mean by "compound file"?
Then I read http://lucene.apache.org/java/docs/fileformats.html and got 
the idea.
I do not have access to that specific machine that all this is happening at.
It is a 80x86 machine running Win 2003 server;
Sorry, but they neglected my question about the index is stored on a 
Local FS or on a NFS.
I was only able to obtain a directory listing of the index dir and guess 
what - there's no a /*_1j8s.cfs * /file at all!
Pitty, I can't have a look at segments file, but I guess it lists the _1j8s
Given these scarce resources, can you give me some further advise about 
what has happened and what can be done to prevent it from happening again?

Regards,
Stanislav


> Stanislav Jordanov wrote:
>> What might be the possible reason for an IndexReader failing to open 
>> properly,
>> because it can not find a .fnm file that is expected to be there:
>
> This means the segments files is referencing a segment named _1j8s and 
> in trying to load that segment, the first thing Lucene does is load 
> the "field infos" (_1j8s.fnm).  It tries to do so from a compound file 
> (if you have it turned on & it exists), else from the filesystem 
> directly.
>
> Which version of Lucene are you using?  And which OS are you running on?
>
> Is this error easily repeated (not a transient error)?  Ie, 
> instantiating an IndexSearcher against your index always causes this 
> exception?  Because, this sort of exception is certainly possible when 
> Lucene's locking is not working correctly (for exmple over NFS), but 
> in that case it's typically very intermittant.
>
> Could you send a list of the files in your index?
>
>> The only thing that comes to my mind is that last time the indexing 
>> process was not shut down properly.
>> Is there a way to revive the index or everything should be reindexed 
>> from scratch?
>
> Hmmm.  It's surprising that an improper shutdown caused this because 
> when the IndexWriter commits its change, it first writes all files for 
> the new segment and only when that's successful does it write a new 
> segments file referencing the newly written segment.  Could you 
> provide some more detail about your setup and how the improper 
> shutdown happened?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 13:25:29 2006
Return-Path: <java-user-return-23040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12181 invoked from network); 30 Aug 2006 13:25:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 13:25:24 -0000
Received: (qmail 53409 invoked by uid 500); 30 Aug 2006 13:25:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52756 invoked by uid 500); 30 Aug 2006 13:25:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52745 invoked by uid 99); 30 Aug 2006 13:25:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 06:25:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 06:25:17 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id k7UDOt32030575
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 16:24:55 +0300
Message-ID: <44F591A7.9090905@sirma.bg>
Date: Wed, 30 Aug 2006 16:24:55 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Reviving a dead index
References: <44F3F64B.8030709@sirma.bg> <44F42594.3040609@mikemccandless.com> <44F58F36.6040307@sirma.bg>
In-Reply-To: <44F58F36.6040307@sirma.bg>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I missed something that may be very important:
I find it really strange, that the exception log reads:

java.io.FileNotFoundException: F:\Indexes\index1\_16f6.fnm (The system 
cannot find the file specified)
    at java.io.RandomAccessFile.open(Native 
Method)                                                     
    at 
java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)                                        

    at 
org.apache.lucene.store.FSIndexInput$Descriptor.<init>(FSDirectory.java:425)                      

    at 
org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:434)                                 

    at 
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:324)                               

    at 
org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:56)                                     

    at 
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:144)                          

    at 
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:129)                                 

    at 
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:110)                                 

    at 
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:154)                                

    at 
org.apache.lucene.store.Lock$With.run(Lock.java:109)                                              

    at 
org.apache.lucene.index.IndexReader.open(IndexReader.java:143)                                    

    at 
org.apache.lucene.index.IndexReader.open(IndexReader.java:127)                                    

    at 
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:42)                              



After all, the Lucene's CFS format is abstraction over the OS's native 
FS and the App should not be trying to open a native FS file named *.fnm
when it is supposed to open the corresponding *.cfs file and "manually" 
extract the *.fnm file from it.
Right?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 15:07:49 2006
Return-Path: <java-user-return-23041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53585 invoked from network); 30 Aug 2006 15:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 15:07:46 -0000
Received: (qmail 17502 invoked by uid 500); 30 Aug 2006 15:07:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17471 invoked by uid 500); 30 Aug 2006 15:07:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17460 invoked by uid 99); 30 Aug 2006 15:07:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 08:07:39 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jason.polites@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 08:07:38 -0700
Received: by wx-out-0506.google.com with SMTP id s15so241199wxc
        for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 08:07:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=U1CW4RVUi7ikmlJSAJDtgcQiLBB/ehMagi+fJpmB1LueEiaC3MWdWRy1Pb1a4sI7+nqTkIa7irkucp4CyttRhWSx4tAyj8uHXTfNmrQJrI0M0GxmSu0WjwweIUQxOoogyiNZPN1pJlgjMX0k7Qp8odVHPBELBAupc+xu4LnGtW4=
Received: by 10.70.59.20 with SMTP id h20mr829169wxa;
        Wed, 30 Aug 2006 08:07:17 -0700 (PDT)
Received: by 10.70.109.14 with HTTP; Wed, 30 Aug 2006 08:07:17 -0700 (PDT)
Message-ID: <d8050f240608300807i773bfef9h5ed3c755dc2599f2@mail.gmail.com>
Date: Thu, 31 Aug 2006 01:07:17 +1000
From: "Jason Polites" <jason.polites@gmail.com>
To: java-user@lucene.apache.org
Subject: Re-created fields consistently indexed?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29636_2334915.1156950437655"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_29636_2334915.1156950437655
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I understand that it is possible to "re-create" fields which are indexed but
not stored (as is done by Luke), and that this is a lossy process, however I
am wondering whether the indexed version of this remains consistent.

That is, if I re-create a non-stored field, then re-index this field in a
new document, will the indexed (inverted) data be the same as in the
original version?

Thanks.

------=_Part_29636_2334915.1156950437655--

From java-user-return-23042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 15:42:14 2006
Return-Path: <java-user-return-23042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70791 invoked from network); 30 Aug 2006 15:42:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 15:42:14 -0000
Received: (qmail 10221 invoked by uid 500); 30 Aug 2006 15:42:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10196 invoked by uid 500); 30 Aug 2006 15:42:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10185 invoked by uid 99); 30 Aug 2006 15:42:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 08:42:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 08:42:05 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 6DE73DA11CA
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 11:41:43 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Wed, 30 Aug 2006 11:41:44 -0400
X-Sasl-enc: auAWD5F9y75E+2n0MJUn6GY1EvRvUG37kxO1WW/sDK1V 1156952502
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id A0833240C
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 11:41:42 -0400 (EDT)
Message-ID: <44F5B1B5.5070602@mikemccandless.com>
Date: Wed, 30 Aug 2006 11:41:41 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Reviving a dead index
References: <44F3F64B.8030709@sirma.bg> <44F42594.3040609@mikemccandless.com> <44F58F36.6040307@sirma.bg> <44F591A7.9090905@sirma.bg>
In-Reply-To: <44F591A7.9090905@sirma.bg>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stanislav Jordanov wrote:

> After all, the Lucene's CFS format is abstraction over the OS's native 
> FS and the App should not be trying to open a native FS file named *.fnm
> when it is supposed to open the corresponding *.cfs file and "manually" 
> extract the *.fnm file from it.
> Right?

Yes, good catch :)

This always confuses people, but it's actually "normal" (when a segments 
file is missing) because Lucene first checks whether the compound-file 
exists and if it does it will use that.  If it does not, it falls back 
to trying to directly open the individual files against the filesystem.

So, when there is a problem and a given segment is referenced but does 
not exist, you will see this [confusing] exception making it look like 
Lucene "forgot" that it's using the compound file format.

[Still intending to respond to your previous email but a bit busy right 
now...]

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 16:02:14 2006
Return-Path: <java-user-return-23043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81823 invoked from network); 30 Aug 2006 16:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 16:02:08 -0000
Received: (qmail 59378 invoked by uid 500); 30 Aug 2006 16:02:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59324 invoked by uid 500); 30 Aug 2006 16:02:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 11772 invoked by uid 99); 30 Aug 2006 15:42:20 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mamcxyz@gmail.com designates 64.233.162.202 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XVlz5bpLDnJyH+7mDYJ4eZJc4m8WwUQuBo9uJAD56U3pULVp6fThmrLVJYuYqscpb2ZMNq2hP6wUFoawcIJqKGoNm3csL49r+sz4yXno5YUdoYrrY0877CQOBzNNcGcdKlAQm2CZK0uDvMlaMolh7sdx5T38AzrsshDHuTS4bNs=
Message-ID: <8a5fe2600608300841q411ffd45ua27a862fc4e096b2@mail.gmail.com>
Date: Wed, 30 Aug 2006 10:41:57 -0500
From: "Mario Alejandro M." <mamcxyz@gmail.com>
To: java-user@lucene.apache.org
Subject: First BETA release of MUTIS
In-Reply-To: <8a5fe2600608300828r57f93afau6a489ea8311c69ac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38532_10080264.1156952517671"
References: <8a5fe2600608300828r57f93afau6a489ea8311c69ac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_38532_10080264.1156952517671
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm happy to announce the first BETA of MUTIS (mutis.sourceforge.net). I
include a small demo on searching txt files (this kind of demo is like a
must ;) ).

I'm looking for more developers to archieve:

1- Plataform independence. Mutis run only under .NET, and I want it to run
under native Win32/64, FreePascal, .NET Win32/64
2- Start to add unique abilities, like clustering (www.clusty.com ) and
improvenments on threading and other things
3- Reduce the code. I found that the code size can be reduced with a smart
aproach but need more help on this
4- Get Lucene 2.0 compability

Thanks.

--=20
Mario Alejandro Montoya
http://mutis.sourceforge.net
The Only and best open source search engine for Delphi


--=20
Mario Alejandro Montoya
MCP
www.solucionesvulcano.com
!Obtenga su sitio Web din=E1mico!

------=_Part_38532_10080264.1156952517671--

From java-user-return-23044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 16:30:11 2006
Return-Path: <java-user-return-23044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97548 invoked from network); 30 Aug 2006 16:30:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 16:30:10 -0000
Received: (qmail 25044 invoked by uid 500); 30 Aug 2006 16:30:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25010 invoked by uid 500); 30 Aug 2006 16:30:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24998 invoked by uid 99); 30 Aug 2006 16:30:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:30:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:30:02 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9DF0530EFCD7; Wed, 30 Aug 2006 12:29:41 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 554EE30EFCD6
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 12:29:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <d8050f240608300807i773bfef9h5ed3c755dc2599f2@mail.gmail.com>
References: <d8050f240608300807i773bfef9h5ed3c755dc2599f2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3027E751-7DCE-41B1-80DD-BF0B2FC780C9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Re-created fields consistently indexed?
Date: Wed, 30 Aug 2006 12:29:31 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 30, 2006, at 11:07 AM, Jason Polites wrote:
> I understand that it is possible to "re-create" fields which are  
> indexed but
> not stored (as is done by Luke), and that this is a lossy process,  
> however I
> am wondering whether the indexed version of this remains consistent.
>
> That is, if I re-create a non-stored field, then re-index this  
> field in a
> new document, will the indexed (inverted) data be the same as in the
> original version?

That really all depends.  For example, the original analysis process  
could put in position increment gaps between sentences or overlay  
terms in same positions, and don't forget about term offsets.   Just  
pulling out the terms without getting those details would be even  
lossier.  I'm not even sure how you could recreate that even if you  
had all of that position and offset information without some kind of  
special Analyzer that would set things exactly as they were.  I  
suspect there is some low-level tricks that could be played to do  
this bypassing an analyzer.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 16:50:39 2006
Return-Path: <java-user-return-23045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7266 invoked from network); 30 Aug 2006 16:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 16:50:39 -0000
Received: (qmail 56187 invoked by uid 500); 30 Aug 2006 16:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56154 invoked by uid 500); 30 Aug 2006 16:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56143 invoked by uid 99); 30 Aug 2006 16:50:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:50:32 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:50:31 -0700
Received: by py-out-1112.google.com with SMTP id w49so285942pyg
        for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 09:50:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XwV5/Am9Fxbc5ow++pNkucg2P0aA717pZM2zIQ5czQSWdlOm8WD0s/r+IdRrRfq6/+elKM4TLCfwfI8HrRCdO2jwKSp6Uz8fbLq3U06atOSR3HGY/dl8ayDQ0d/tH1DOcFXcrtOciMwDCIR2jBX/PljouGyySzyhjbespzNrW4U=
Received: by 10.35.115.18 with SMTP id s18mr1396118pym;
        Wed, 30 Aug 2006 09:50:03 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 30 Aug 2006 09:50:03 -0700 (PDT)
Message-ID: <359a92830608300950j2706a11bi21dafc6ed1c03093@mail.gmail.com>
Date: Wed, 30 Aug 2006 12:50:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating a new index from an existing index
In-Reply-To: <20060830010030.67333.qmail@web57007.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32762_26649262.1156956603536"
References: <359a92830608291619g8c15c1bp9d04e32c8ef0dab9@mail.gmail.com>
	 <20060830010030.67333.qmail@web57007.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_32762_26649262.1156956603536
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, assuming you can get all the information you need out of your index,
you really only have two choices that I see.
1> iterate through your documents and delete and re-add each document to
that same index.
2> iterate through your documents and add the doc to a *new* index, then
replace your old index with the new one.

It should be straight forward to do either, you just have to do something
like IndexReader.document(#) where # is the internal Lucene doc ID. You'd
have to know ahead of time what the largest existing doc ID is, but that's
not hard....

But not this from the javadoc

Note that fields which are *not*
stored<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/document/Field.html#isStored%28%29>are
*not* available in documents retrieved from the index, e.g. with
Hits.doc(int)<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/search/Hits.html#doc%28int%29>,
Searcher.doc(int)<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/search/Searcher.html#doc%28int%29>or
IndexReader.document(int)<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/index/IndexReader.html#document%28int%29>
.

Given the size of your indexes, I don't think that there's much to be gained
by trying to delete from/add to the same index, I'd just create a new one.

If you can't get everything you need from the index, I'm afraid you're out
of luck. I might suggest that if you *do* have to go through the pain of
hitting your remote resources, you store the raw data locally in case you
need to do this again in the future. I know that's not much help, but....

Or, figure out how to make Lucene update-in-place, write the code, test it
and submit a patch. I'm sure Erik, Otis et.al. would offer you profuse
thanks <G>

good luck
Erick

On 8/29/06, Xiaocheng Luan <jenaluan@yahoo.com> wrote:
>
> Thanks, Erick.
> I agree that it might be unlikely to reconstruct from an existing index,
> but I think document boosting (that is, one document has a higher boost
> factor than other documents) as well as field boosting is specified during
> indexing.
>
> Our use case is performancce/results tuning. We have huge indexes (in the
> range of dozens of GBs) and some sources are remote. I'm trying to figure
> out ways to avoid re-ingesting the contents as much as possible.
> Any suggestions?
> Thanks.
> X.
>
> Erick Erickson <erickerickson@gmail.com> wrote: A couple of things..
>
> 1> I don't think you set the boost when indexing. You set the boost when
> querying, so you don't need to re-index for boosting.
>
> 2> A recurring theme is that you can't do an update-in-place for a lucene
> document. You might search the mail archive for a discussion of this. The
> short form is that if you want to change every document, you're probably
> better off re-indexing the whole thing. If, for some reason you
> can't/don't
> want to just re-index it all, then be aware that if you didn't store the
> fields for the documents (i.e. use Field.Store.YES), then you really can't
> reconstruct the document from the index without potentially losing
> information.
>
> Hope this helps
> Erick
>
> On 8/29/06, Xiaocheng Luan  wrote:
> >
> > Hi,
> > Got a question. Here is what I want to achieve:
> >
> > Create a new index from an existing index, to change the boosting factor
> > for some of the documents (and potentially some other tweaks), without
> > reindexing it from the source.
> >
> > Is there any tools or ways to do this?
> > Thanks!
> > Xiaocheng Luan
> >
> >
> > ---------------------------------
> > Get your own web address for just $1.99/1st yr. We'll help. Yahoo! Small
> > Business.
> >
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>

------=_Part_32762_26649262.1156956603536--

From java-user-return-23046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 16:56:00 2006
Return-Path: <java-user-return-23046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9513 invoked from network); 30 Aug 2006 16:55:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 16:55:57 -0000
Received: (qmail 63268 invoked by uid 500); 30 Aug 2006 16:55:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63247 invoked by uid 500); 30 Aug 2006 16:55:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63236 invoked by uid 99); 30 Aug 2006 16:55:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:55:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 09:55:49 -0700
Received: by py-out-1112.google.com with SMTP id w49so287257pyg
        for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 09:55:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iyh5LQmT3ysBgmmQa2FRR2JYPSHbwYNjOhXPilkmZbZO6sc3C5tpuQ8app8030iROUwdr0/tZss2TAJdNqYEqHnz9cGyIKa2psfEJmP1Hvz46eSOea2NwLbrENyiVYY3r5wr1SPGe5v/y8oD6PRTFcyg4CvlIq5tZwmHGFTbfhE=
Received: by 10.35.102.18 with SMTP id e18mr1355633pym;
        Wed, 30 Aug 2006 09:55:28 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 30 Aug 2006 09:55:22 -0700 (PDT)
Message-ID: <359a92830608300955l2a1134dia39c56ad13a6d9a3@mail.gmail.com>
Date: Wed, 30 Aug 2006 12:55:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating a new index from an existing index
In-Reply-To: <359a92830608300950j2706a11bi21dafc6ed1c03093@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32798_23002693.1156956922961"
References: <359a92830608291619g8c15c1bp9d04e32c8ef0dab9@mail.gmail.com>
	 <20060830010030.67333.qmail@web57007.mail.re3.yahoo.com>
	 <359a92830608300950j2706a11bi21dafc6ed1c03093@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_32798_23002693.1156956922961
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This just in from the thread "*Re-created fields consistently indexed"

*Erik Hatcher replied as below, and believe me, Erik knows waaaaaay more
about this than I do .....


On Aug 30, 2006, at 11:07 AM, Jason Polites wrote:
> I understand that it is possible to "re-create" fields which are
> indexed but
> not stored (as is done by Luke), and that this is a lossy process,
> however I
> am wondering whether the indexed version of this remains consistent.
>
> That is, if I re-create a non-stored field, then re-index this
> field in a
> new document, will the indexed (inverted) data be the same as in the
> original version?

That really all depends.  For example, the original analysis process
could put in position increment gaps between sentences or overlay
terms in same positions, and don't forget about term offsets.   Just
pulling out the terms without getting those details would be even
lossier.  I'm not even sure how you could recreate that even if you
had all of that position and offset information without some kind of
special Analyzer that would set things exactly as they were.  I
suspect there is some low-level tricks that could be played to do
this bypassing an analyzer.

       Erik*
*
On 8/30/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Well, assuming you can get all the information you need out of your index,
> you really only have two choices that I see.
> 1> iterate through your documents and delete and re-add each document to
> that same index.
> 2> iterate through your documents and add the doc to a *new* index, then
> replace your old index with the new one.
>
> It should be straight forward to do either, you just have to do something
> like IndexReader.document(#) where # is the internal Lucene doc ID. You'd
> have to know ahead of time what the largest existing doc ID is, but that's
> not hard....
>
> But not this from the javadoc
>
> Note that fields which are *not* stored are *not* available in documents
> retrieved from the index, e.g. with Hits.doc(int), Searcher.doc(int) or
> IndexReader.document(int).
>
> Given the size of your indexes, I don't think that there's much to be
> gained by trying to delete from/add to the same index, I'd just create a new
> one.
>
> If you can't get everything you need from the index, I'm afraid you're out
> of luck. I might suggest that if you *do* have to go through the pain of
> hitting your remote resources, you store the raw data locally in case you
> need to do this again in the future. I know that's not much help, but....
>
> Or, figure out how to make Lucene update-in-place, write the code, test it
> and submit a patch. I'm sure Erik, Otis et.al. would offer you profuse
> thanks <G>
>
> good luck
> Erick
>
>
> On 8/29/06, Xiaocheng Luan <jenaluan@yahoo.com> wrote:
> >
> > Thanks, Erick.
> > I agree that it might be unlikely to reconstruct from an existing index,
> > but I think document boosting (that is, one document has a higher boost
> > factor than other documents) as well as field boosting is specified during
> > indexing.
> >
> > Our use case is performancce/results tuning. We have huge indexes (in
> > the range of dozens of GBs) and some sources are remote. I'm trying to
> > figure out ways to avoid re-ingesting the contents as much as possible.
> > Any suggestions?
> > Thanks.
> > X.
> >
> > Erick Erickson <erickerickson@gmail.com> wrote: A couple of things..
> >
> > 1> I don't think you set the boost when indexing. You set the boost when
> >
> > querying, so you don't need to re-index for boosting.
> >
> > 2> A recurring theme is that you can't do an update-in-place for a
> > lucene
> > document. You might search the mail archive for a discussion of this.
> > The
> > short form is that if you want to change every document, you're probably
> > better off re-indexing the whole thing. If, for some reason you
> > can't/don't
> > want to just re-index it all, then be aware that if you didn't store the
> >
> > fields for the documents (i.e. use Field.Store.YES), then you really
> > can't
> > reconstruct the document from the index without potentially losing
> > information.
> >
> > Hope this helps
> > Erick
> >
> > On 8/29/06, Xiaocheng Luan  wrote:
> > >
> > > Hi,
> > > Got a question. Here is what I want to achieve:
> > >
> > > Create a new index from an existing index, to change the boosting
> > factor
> > > for some of the documents (and potentially some other tweaks), without
> >
> > > reindexing it from the source.
> > >
> > > Is there any tools or ways to do this?
> > > Thanks!
> > > Xiaocheng Luan
> > >
> > >
> > > ---------------------------------
> > > Get your own web address for just $1.99/1st yr. We'll help. Yahoo!
> > Small
> > > Business.
> > >
> >
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam protection around
> > http://mail.yahoo.com
> >
>
>

------=_Part_32798_23002693.1156956922961--

From java-user-return-23047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 17:37:45 2006
Return-Path: <java-user-return-23047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30361 invoked from network); 30 Aug 2006 17:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 17:37:45 -0000
Received: (qmail 50415 invoked by uid 500); 30 Aug 2006 17:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50387 invoked by uid 500); 30 Aug 2006 17:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50366 invoked by uid 99); 30 Aug 2006 17:37:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 10:37:37 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.196.97.111] (HELO web57007.mail.re3.yahoo.com) (66.196.97.111)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Aug 2006 10:37:35 -0700
Received: (qmail 61760 invoked by uid 60001); 30 Aug 2006 17:37:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RcJxkp8Y6nGmB7lr5zF22NYwMRgvvtmrJAFdlo4lnNLaLtPDBgjMPAgVw1ZMhuMUEIY8t4qEXwCd5tl87eEGv1Pn07PMNkQDKB10BxNiODjlUbCLTO7pJvUvlGmBe70gq+A+IiiZhMW+jwX7eJZrE2mBdyBoqiEVNSFKMKPOIyw=  ;
Message-ID: <20060830173713.61758.qmail@web57007.mail.re3.yahoo.com>
Received: from [38.99.201.242] by web57007.mail.re3.yahoo.com via HTTP; Wed, 30 Aug 2006 10:37:13 PDT
Date: Wed, 30 Aug 2006 10:37:13 -0700 (PDT)
From: Xiaocheng Luan <jenaluan@yahoo.com>
Subject: Re: Creating a new index from an existing index
To: java-user@lucene.apache.org
In-Reply-To: <359a92830608300955l2a1134dia39c56ad13a6d9a3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1613591682-1156959433=:58667"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1613591682-1156959433=:58667
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks Erick, it looks like we'll have to recreate from the sources ...

Erick Erickson <erickerickson@gmail.com> wrote: This just in from the thread "*Re-created fields consistently indexed"

*Erik Hatcher replied as below, and believe me, Erik knows waaaaaay more
about this than I do .....


On Aug 30, 2006, at 11:07 AM, Jason Polites wrote:
> I understand that it is possible to "re-create" fields which are
> indexed but
> not stored (as is done by Luke), and that this is a lossy process,
> however I
> am wondering whether the indexed version of this remains consistent.
>
> That is, if I re-create a non-stored field, then re-index this
> field in a
> new document, will the indexed (inverted) data be the same as in the
> original version?

That really all depends.  For example, the original analysis process
could put in position increment gaps between sentences or overlay
terms in same positions, and don't forget about term offsets.   Just
pulling out the terms without getting those details would be even
lossier.  I'm not even sure how you could recreate that even if you
had all of that position and offset information without some kind of
special Analyzer that would set things exactly as they were.  I
suspect there is some low-level tricks that could be played to do
this bypassing an analyzer.

       Erik*
*
On 8/30/06, Erick Erickson  wrote:
>
> Well, assuming you can get all the information you need out of your index,
> you really only have two choices that I see.
> 1> iterate through your documents and delete and re-add each document to
> that same index.
> 2> iterate through your documents and add the doc to a *new* index, then
> replace your old index with the new one.
>
> It should be straight forward to do either, you just have to do something
> like IndexReader.document(#) where # is the internal Lucene doc ID. You'd
> have to know ahead of time what the largest existing doc ID is, but that's
> not hard....
>
> But not this from the javadoc
>
> Note that fields which are *not* stored are *not* available in documents
> retrieved from the index, e.g. with Hits.doc(int), Searcher.doc(int) or
> IndexReader.document(int).
>
> Given the size of your indexes, I don't think that there's much to be
> gained by trying to delete from/add to the same index, I'd just create a new
> one.
>
> If you can't get everything you need from the index, I'm afraid you're out
> of luck. I might suggest that if you *do* have to go through the pain of
> hitting your remote resources, you store the raw data locally in case you
> need to do this again in the future. I know that's not much help, but....
>
> Or, figure out how to make Lucene update-in-place, write the code, test it
> and submit a patch. I'm sure Erik, Otis et.al. would offer you profuse
> thanks 
>
> good luck
> Erick
>
>
> On 8/29/06, Xiaocheng Luan  wrote:
> >
> > Thanks, Erick.
> > I agree that it might be unlikely to reconstruct from an existing index,
> > but I think document boosting (that is, one document has a higher boost
> > factor than other documents) as well as field boosting is specified during
> > indexing.
> >
> > Our use case is performancce/results tuning. We have huge indexes (in
> > the range of dozens of GBs) and some sources are remote. I'm trying to
> > figure out ways to avoid re-ingesting the contents as much as possible.
> > Any suggestions?
> > Thanks.
> > X.
> >
> > Erick Erickson  wrote: A couple of things..
> >
> > 1> I don't think you set the boost when indexing. You set the boost when
> >
> > querying, so you don't need to re-index for boosting.
> >
> > 2> A recurring theme is that you can't do an update-in-place for a
> > lucene
> > document. You might search the mail archive for a discussion of this.
> > The
> > short form is that if you want to change every document, you're probably
> > better off re-indexing the whole thing. If, for some reason you
> > can't/don't
> > want to just re-index it all, then be aware that if you didn't store the
> >
> > fields for the documents (i.e. use Field.Store.YES), then you really
> > can't
> > reconstruct the document from the index without potentially losing
> > information.
> >
> > Hope this helps
> > Erick
> >
> > On 8/29/06, Xiaocheng Luan  wrote:
> > >
> > > Hi,
> > > Got a question. Here is what I want to achieve:
> > >
> > > Create a new index from an existing index, to change the boosting
> > factor
> > > for some of the documents (and potentially some other tweaks), without
> >
> > > reindexing it from the source.
> > >
> > > Is there any tools or ways to do this?
> > > Thanks!
> > > Xiaocheng Luan
> > >
> > >
> > > ---------------------------------
> > > Get your own web address for just $1.99/1st yr. We'll help. Yahoo!
> > Small
> > > Business.
> > >
> >
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam protection around
> > http://mail.yahoo.com
> >
>
>


 		
---------------------------------
Stay in the know. Pulse on the new Yahoo.com.  Check it out. 
--0-1613591682-1156959433=:58667--

From java-user-return-23048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 17:44:25 2006
Return-Path: <java-user-return-23048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37504 invoked from network); 30 Aug 2006 17:44:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 17:44:25 -0000
Received: (qmail 65438 invoked by uid 500); 30 Aug 2006 17:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65417 invoked by uid 500); 30 Aug 2006 17:44:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65404 invoked by uid 99); 30 Aug 2006 17:44:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 10:44:11 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=HTML_MESSAGE,INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.47.165.5] (HELO luke.radius.ad) (206.47.165.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 10:44:10 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6CC5C.3615D338"
Subject: lucene1.4 queries locking up in Solaris
Date: Wed, 30 Aug 2006 10:46:24 -0700
Message-ID: <A1C50561B5543D45A91A0E5505A79B9805C5C0FB@luke.radius.ad>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene1.4 queries locking up in Solaris
Thread-Index: AcbMXDYhBJJmrpnyRh2bPo7Sp43oLQ==
From: "Salman Shahid" <salman.shahid@blastradius.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6CC5C.3615D338
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Folks,

=20

We had an issue recently in which one of our web application using
Lucene 1.4-final started to max out CPU under heavy load with ~20
concurrent users during testing. Web application was not able to serve
any more pages after this and we could see all lucene threads "wating
for monitor" in  the JVM  thread dump.

=20

Oddly this only happens on Solaris 10 box, with 1.5 JDK. Windows XP has
no issue in dealing with a concurrent access of more then 50 users with
compatible index size.=20

=20

We have tried all possible options to fix the issue on Solaris, but have
not been successful so far. The problem is quiet similar to what has
been posted in the following thread.

=20

http://www.archivum.info/java-dev@lucene.apache.org/2005-07/msg00046.htm
l

=20

Our Env.

=20

Solaris 10, dual core AMD 64

JDK 1.5.

=20

  =20

=20

=20

Salman Shahid=20

=20


------_=_NextPart_001_01C6CC5C.3615D338--

From java-user-return-23049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 17:58:08 2006
Return-Path: <java-user-return-23049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43557 invoked from network); 30 Aug 2006 17:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 17:58:07 -0000
Received: (qmail 97572 invoked by uid 500); 30 Aug 2006 17:58:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97545 invoked by uid 500); 30 Aug 2006 17:58:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97534 invoked by uid 99); 30 Aug 2006 17:57:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 10:57:59 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=HTML_MESSAGE,INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.47.165.5] (HELO luke.radius.ad) (206.47.165.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 10:57:57 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6CC5E.24154B67"
Subject: Lucene maxing CPU on Solaris 10
Date: Wed, 30 Aug 2006 11:00:12 -0700
Message-ID: <A1C50561B5543D45A91A0E5505A79B9805C5C142@luke.radius.ad>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene maxing CPU on Solaris 10
Thread-Index: AcbMXiOvpTHssr9hTt2eD2GAMtttOQ==
From: "Salman Shahid" <salman.shahid@blastradius.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6CC5E.24154B67
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

Folks,

=20

Recently we are observing an issue with one of our web applications
(using Lucene 1.4) maxing out on CPU under concurrent access of ~20
users doing a lucene query. At this point web application fails to serve
any more pages and thread dump shows all lucene threads "waiting for
monitor" access.

=20

Oddly this only happens on our production Solaris 10 boxes, with JDK
1.5. The load test passes with flying colors on a Windows XP box, even
for 50+ concurrent access.

=20

We have tried many options all the way from patching Solaris to
efficient disk access as well as various JVM arguments, but nothing
worked for us. The issue is similar to what this thread presents.

=20

http://www.archivum.info/java-dev@lucene.apache.org/2005-07/msg00046.htm
l

=20

Env. in questions is :

=20

OS - Solaris 10, dual core AMD 64

JVM - 1.5.0_06

Tomcat - 5.0.27

Lucene 1.4-final

=20

Any pointers on this would be greatly appreciated.

=20

Thanks much!

=20

Salman

=20


------_=_NextPart_001_01C6CC5E.24154B67--

From java-user-return-23050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 18:19:56 2006
Return-Path: <java-user-return-23050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52835 invoked from network); 30 Aug 2006 18:19:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 18:19:54 -0000
Received: (qmail 39428 invoked by uid 500); 30 Aug 2006 18:19:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38801 invoked by uid 500); 30 Aug 2006 18:19:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 25591 invoked by uid 99); 30 Aug 2006 18:13:51 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Message-ID: <44F5D548.4010401@mindspring.com>
Date: Wed, 30 Aug 2006 11:13:28 -0700
From: Jason Pump <jpump@mindspring.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: word frequency list?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 30 Aug 2006 18:13:04.0008 (UTC) FILETIME=[EF947080:01C6CC5F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there a large list of words and their frequency in the english 
language? Obviously it would differ by corpus but I would like to see 
what's already available.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 18:43:22 2006
Return-Path: <java-user-return-23051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60725 invoked from network); 30 Aug 2006 18:43:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 18:43:22 -0000
Received: (qmail 78737 invoked by uid 500); 30 Aug 2006 18:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78702 invoked by uid 500); 30 Aug 2006 18:43:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78691 invoked by uid 99); 30 Aug 2006 18:43:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 11:43:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 11:43:14 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EAFE15B770; Wed, 30 Aug 2006 11:42:53 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E794D7F403
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 11:42:53 -0700 (PDT)
Date: Wed, 30 Aug 2006 11:42:53 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting based on a selling rate
In-Reply-To: <6057151.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0608301137380.4558@hal.rescomp.berkeley.edu>
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu>
 <6035831.post@talk.nabble.com> <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu>
 <6057151.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I don't know what is the best way:

that depends on your needs ... if Selling rate changes very infrequently,
or if you are dealing with teh sell rate for lots of books per
query then i'd put it in your index ... if it's constantly in flux and you
only care about the sell rate of one or two books for each query, doing it
at query time is fine.

the definitions of "infrequently", "lots", and "constantly" all being
specific to the scope of your problem, and not something i can give
general advice on.

: or doing something like you said: "adding an optional clauses to your
: query for each of your N productIds"... but I don't really know how to do
: this...
:
: Any sample code exemple ?

I suggest you start by looking at the javadocs for BooleanQuery.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 22:13:57 2006
Return-Path: <java-user-return-23052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50318 invoked from network); 30 Aug 2006 22:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 22:13:52 -0000
Received: (qmail 27864 invoked by uid 500); 30 Aug 2006 22:13:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27824 invoked by uid 500); 30 Aug 2006 22:13:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27808 invoked by uid 99); 30 Aug 2006 22:13:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 15:13:46 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 15:13:44 -0700
Received: by nz-out-0102.google.com with SMTP id z6so218549nzd
        for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 15:13:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=X8XimxPuywZYDuYeXXyUwAokQjCq2HmBDxAk8REQWnKsh9WjbNgiDd8IMbSShkMaH5sHeoOi9uuF0kImZ9oDv+XToiyWcmED7CdBHFIzR/h5nsvs3ZfP8LuwFD4mAKOi/1TuJWA6kXWAQS3mMzsirJeGiRsD7YL7aQvOm6cEI50=
Received: by 10.64.184.14 with SMTP id h14mr210499qbf;
        Wed, 30 Aug 2006 15:13:23 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id e13sm56461qbe.2006.08.30.15.13.21;
        Wed, 30 Aug 2006 15:13:23 -0700 (PDT)
Message-ID: <44F60D80.1070802@gmail.com>
Date: Wed, 30 Aug 2006 18:13:20 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: SpanRegex speed
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu> <6035831.post@talk.nabble.com> <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu> <6057151.post@talk.nabble.com> <Pine.LNX.4.58.0608301137380.4558@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0608301137380.4558@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 * An implementation tying Java's built-in java.util.regex to RegexQuery.
 *
 * Note that because this implementation currently only returns null from
 * {@link #prefix} that queries using this implementation will enumerate and
 * attempt to {@link #match} each term for the specified field in the index.

Is this another way to say im gonna be friggen slow? Say it aint so...

I want to use this as a multi-phrase query...a spannear with a term that 
could be the regex "term1|term2"

I need this. Pipe dream for speed on a huge index?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 23:14:10 2006
Return-Path: <java-user-return-23053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78708 invoked from network); 30 Aug 2006 23:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 23:14:10 -0000
Received: (qmail 4930 invoked by uid 500); 30 Aug 2006 23:14:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4893 invoked by uid 500); 30 Aug 2006 23:14:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4876 invoked by uid 99); 30 Aug 2006 23:14:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 16:14:04 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.159 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 16:14:03 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn1.fre.skanova.net (7.2.075)
        id 44F1FA590010AB69 for java-user@lucene.apache.org; Thu, 31 Aug 2006 01:13:38 +0200
Subject: Re: Lucene maxing CPU on Solaris 10
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <A1C50561B5543D45A91A0E5505A79B9805C5C142@luke.radius.ad>
References: <A1C50561B5543D45A91A0E5505A79B9805C5C142@luke.radius.ad>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Thu, 31 Aug 2006 01:13:33 +0200
Message-Id: <1156979613.4598.10.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, 2006-08-30 at 11:00 -0700, Salman Shahid wrote:
> 
> Oddly this only happens on our production Solaris 10 boxes, with JDK
> 1.5. The load test passes with flying colors on a Windows XP box, even
> for 50+ concurrent access. 

This will not help you, but I've got a Solaris 10 box on ADM64 and 1.5
handling tens of thousands queries every minute. The CPU is at 95% idle.

>>From my experience I have only good stuff to say about Solaris. Many
dirty applications I wrote will die on any other platform. Things as the
JVM not beeing able to allocate memory enough, threads with heap more
than a couple of MB, et.c.

You can always fiddle with AggressiveHeap and all thos undocumented VM
parameters to see if it helps.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 30 23:19:08 2006
Return-Path: <java-user-return-23054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79397 invoked from network); 30 Aug 2006 23:19:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2006 23:19:05 -0000
Received: (qmail 8797 invoked by uid 500); 30 Aug 2006 23:19:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8766 invoked by uid 500); 30 Aug 2006 23:19:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8755 invoked by uid 99); 30 Aug 2006 23:19:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 16:19:00 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 16:19:00 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44EDA0BC001C2FA5 for java-user@lucene.apache.org; Thu, 31 Aug 2006 01:18:38 +0200
Subject: Re: Lucene maxing CPU on Solaris 10
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1156979613.4598.10.camel@localhost>
References: <A1C50561B5543D45A91A0E5505A79B9805C5C142@luke.radius.ad>
	 <1156979613.4598.10.camel@localhost>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Thu, 31 Aug 2006 01:18:33 +0200
Message-Id: <1156979913.4598.11.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2006-08-31 at 01:13 +0200, karl wettin wrote:
> On Wed, 2006-08-30 at 11:00 -0700, Salman Shahid wrote:
> > 
> > Oddly this only happens on our production Solaris 10 boxes, with JDK
> > 1.5. The load test passes with flying colors on a Windows XP box, even
> > for 50+ concurrent access. 
> 
> This will not help you

Oh, one more thing. You are not using NFS, are you?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 00:26:39 2006
Return-Path: <java-user-return-23055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2366 invoked from network); 31 Aug 2006 00:26:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 00:26:39 -0000
Received: (qmail 97662 invoked by uid 500); 31 Aug 2006 00:26:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97619 invoked by uid 500); 31 Aug 2006 00:26:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97607 invoked by uid 99); 31 Aug 2006 00:26:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 17:26:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.47.165.5] (HELO luke.radius.ad) (206.47.165.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 17:26:32 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene maxing CPU on Solaris 10
Date: Wed, 30 Aug 2006 17:28:47 -0700
Message-ID: <A1C50561B5543D45A91A0E5505A79B9805C5C729@luke.radius.ad>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene maxing CPU on Solaris 10
Thread-Index: AcbMixuvwPeeu5v5TSiX/s55XEVDiwACTsww
From: "Salman Shahid" <salman.shahid@blastradius.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No..index is local.



-----Original Message-----
From: karl wettin [mailto:karl.wettin@gmail.com]=20
Sent: Wednesday, August 30, 2006 4:19 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene maxing CPU on Solaris 10

On Thu, 2006-08-31 at 01:13 +0200, karl wettin wrote:
> On Wed, 2006-08-30 at 11:00 -0700, Salman Shahid wrote:
> >=20
> > Oddly this only happens on our production Solaris 10 boxes, with JDK
> > 1.5. The load test passes with flying colors on a Windows XP box,
even
> > for 50+ concurrent access.=20
>=20
> This will not help you

Oh, one more thing. You are not using NFS, are you?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 01:34:26 2006
Return-Path: <java-user-return-23056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25401 invoked from network); 31 Aug 2006 01:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 01:34:24 -0000
Received: (qmail 55392 invoked by uid 500); 31 Aug 2006 01:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55367 invoked by uid 500); 31 Aug 2006 01:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55356 invoked by uid 99); 31 Aug 2006 01:34:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 18:34:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 18:34:18 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0240C30EFCD7; Wed, 30 Aug 2006 21:33:56 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 0883930EFCD6
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 21:33:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44F60D80.1070802@gmail.com>
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu> <6035831.post@talk.nabble.com> <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu> <6057151.post@talk.nabble.com> <Pine.LNX.4.58.0608301137380.4558@hal.rescomp.berkeley.edu> <44F60D80.1070802@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9A767EEF-1DF0-41A6-8991-28516D912ADF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: SpanRegex speed
Date: Wed, 30 Aug 2006 21:33:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 30, 2006, at 6:13 PM, Mark Miller wrote:
> * An implementation tying Java's built-in java.util.regex to  
> RegexQuery.
> *
> * Note that because this implementation currently only returns null  
> from
> * {@link #prefix} that queries using this implementation will  
> enumerate and
> * attempt to {@link #match} each term for the specified field in  
> the index.
>
> Is this another way to say im gonna be friggen slow? Say it aint so...

"slow" is relative.  It will enumerate all the terms for the  
specified field and run a regular expression match on each one.  The  
same thing happens with FuzzyQuery and prefixed WildcardQuery too.   
These aren't necessarily "slow", so try it and see.

> I want to use this as a multi-phrase query...a spannear with a term  
> that could be the regex "term1|term2"

What about nesting a SpanOrQuery for those two terms inside a  
SpanNearQuery?

> I need this. Pipe dream for speed on a huge index?

Feel free to implement a robust prefix method :)  It's much more  
difficult than I wanted to tackle when I created this  
infrastructure.  But thankfully Regexp implemented it, so you could  
use it for prefix computation and a different matcher implementation  
if you like.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 01:43:14 2006
Return-Path: <java-user-return-23057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26938 invoked from network); 31 Aug 2006 01:43:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 01:43:14 -0000
Received: (qmail 61709 invoked by uid 500); 31 Aug 2006 01:43:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61682 invoked by uid 500); 31 Aug 2006 01:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61671 invoked by uid 99); 31 Aug 2006 01:43:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 18:43:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 18:43:06 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 6729EDA0EEF
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 21:42:43 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Wed, 30 Aug 2006 21:42:44 -0400
X-Sasl-enc: cGraQx4Ucz1pdDgJi7p6ReUrPXdZSsQ/HvzEzNbiZqOK 1156988564
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 583CE1363
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 21:42:44 -0400 (EDT)
Message-ID: <44F63E84.7080402@mikemccandless.com>
Date: Wed, 30 Aug 2006 21:42:28 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Reviving a dead index
References: <44F3F64B.8030709@sirma.bg> <44F42594.3040609@mikemccandless.com> <44F58F36.6040307@sirma.bg>
In-Reply-To: <44F58F36.6040307@sirma.bg>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stanislav Jordanov wrote:

> For a moment I wondered what exactly do you mean by "compound file"?
> Then I read http://lucene.apache.org/java/docs/fileformats.html and got 
> the idea.
> I do not have access to that specific machine that all this is happening 
> at.
> It is a 80x86 machine running Win 2003 server;
> Sorry, but they neglected my question about the index is stored on a 
> Local FS or on a NFS.
> I was only able to obtain a directory listing of the index dir and guess 
> what - there's no a /*_1j8s.cfs * /file at all!
> Pitty, I can't have a look at segments file, but I guess it lists the _1j8s
> Given these scarce resources, can you give me some further advise about 
> what has happened and what can be done to prevent it from happening again?

I'm assuming this is easily repeated (question from my last email) and
not a transient error?  If it's transient, this could be explained by
locking not working properly.

If it's not transient (ie, happens every time you open this index),
it sounds like indeed the segments file is referencing a segment that
does not exist.

But, how the index got into this state is a mystery.  I don't know of
any existing Lucene bugs that can do this.  Furthermore, crashing
an indexing process should not lead to this (it can lead to other things
like only have a segments.new file and no segments file).

Were there any earlier exceptions (before indexing hit an "improper
shutdown") in your indexing process that could give a clue as to root
cause?  Or for example was the machine rebooted and did windows to run
a "filesystem check" on rebooting this box (which can remove corrupt
files)?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 02:05:42 2006
Return-Path: <java-user-return-23058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30886 invoked from network); 31 Aug 2006 02:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 02:05:42 -0000
Received: (qmail 80354 invoked by uid 500); 31 Aug 2006 02:05:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80338 invoked by uid 500); 31 Aug 2006 02:05:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80323 invoked by uid 99); 31 Aug 2006 02:05:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 19:05:36 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 19:05:34 -0700
Received: by nz-out-0102.google.com with SMTP id z6so242238nzd
        for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 19:05:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=aDlHkQyW/E0vs1EEggtPRmZ+1se6yCMg6/Hf3V36X+wExr1CR8PnHBw7k67H8Y+3rgHvAWxugO/wEFGdubP5uz8z3Ey805xPKHaDqTjjtPm6j7LEjLHFZQ8joQGbrCRMlW3I0RZIG9nb+L163WTKmOGF4YXFqVZJMc+2NEMULfI=
Received: by 10.65.59.19 with SMTP id m19mr481624qbk;
        Wed, 30 Aug 2006 19:05:13 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id q19sm219077qbq.2006.08.30.19.05.12;
        Wed, 30 Aug 2006 19:05:13 -0700 (PDT)
Message-ID: <44F643D5.1030307@gmail.com>
Date: Wed, 30 Aug 2006 22:05:09 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: SpanRegex speed
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu> <6035831.post@talk.nabble.com> <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu> <6057151.post@talk.nabble.com> <Pine.LNX.4.58.0608301137380.4558@hal.rescomp.berkeley.edu> <44F60D80.1070802@gmail.com> <9A767EEF-1DF0-41A6-8991-28516D912ADF@ehatchersolutions.com>
In-Reply-To: <9A767EEF-1DF0-41A6-8991-28516D912ADF@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
>
> On Aug 30, 2006, at 6:13 PM, Mark Miller wrote:
>> * An implementation tying Java's built-in java.util.regex to RegexQuery.
>> *
>> * Note that because this implementation currently only returns null from
>> * {@link #prefix} that queries using this implementation will 
>> enumerate and
>> * attempt to {@link #match} each term for the specified field in the 
>> index.
>>
>> Is this another way to say im gonna be friggen slow? Say it aint so...
>
> "slow" is relative.  It will enumerate all the terms for the specified 
> field and run a regular expression match on each one.  The same thing 
> happens with FuzzyQuery and prefixed WildcardQuery too.  These aren't 
> necessarily "slow", so try it and see.
>
>> I want to use this as a multi-phrase query...a spannear with a term 
>> that could be the regex "term1|term2"
>
> What about nesting a SpanOrQuery for those two terms inside a 
> SpanNearQuery?
>
>> I need this. Pipe dream for speed on a huge index?
>
> Feel free to implement a robust prefix method :)  It's much more 
> difficult than I wanted to tackle when I created this infrastructure.  
> But thankfully Regexp implemented it, so you could use it for prefix 
> computation and a different matcher implementation if you like.
>
>     Erik
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Thanks for the info Erik. I did not realize that WildcardQuery and 
FuzzyQuery did this as well. A lot of my concern was that I needed to 
implement WildcardQuery as a SpanRegexQuery so that I could get nested 
wildcard searches in my proximity searches. If it's the same speed as 
WildcardQuery I am not worried. However, it seems like it could be even 
faster:

I only need to support * and ? as wildcard does. I don't want to include 
Jakarta regex with my distro. I made a new Regex implementation based on 
the Java 5 util stuff that only allows * and ?.

I pass the pattern string into a short method that:
     * Removes single backslashes, halves double backslashes, escapes
     * non-alphanumeric, and records prefix. Ignores * and ?.

Then I replace * with .* and ? with *{1}.

Only supporting * and ? seems to make grabbing the prefix nice and simple.

Now my question: should I use this instead of wildcardquery even when 
not in a span search? Sounds like it would be more efficient.
A
lso, how does a spanOr query work? Is the resulting span anchored at the 
start of the word and the length of the word? Like a term span? So that 
its an Or Term span? If there are more than one matches does the span 
cover all of them or is each match a span the size of each hit?

Thanks,

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 02:17:33 2006
Return-Path: <java-user-return-23059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33697 invoked from network); 31 Aug 2006 02:17:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 02:17:29 -0000
Received: (qmail 96268 invoked by uid 500); 31 Aug 2006 02:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96235 invoked by uid 500); 31 Aug 2006 02:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96223 invoked by uid 99); 31 Aug 2006 02:17:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 19:17:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 19:17:22 -0700
Received: by py-out-1112.google.com with SMTP id w49so442209pyg
        for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 19:17:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=koyx+Ews4qKreeePmTo4ECiIA4l17LX3AiH3mil3AOZ6SWXXyTeIq96d1u8mK7GRQfduZXY+sw9bcruzBFKIzwL7X6+P1Iui02O7FAykycFaXHrw/w5Mr13eOQhQGUNb+lptp19TMVnfH8GK1e7kbNWpREwVIx8L5SG7Il3crOs=
Received: by 10.65.112.5 with SMTP id p5mr417707qbm;
        Wed, 30 Aug 2006 19:17:01 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id q15sm222827qbq.2006.08.30.19.17.00;
        Wed, 30 Aug 2006 19:17:00 -0700 (PDT)
Message-ID: <44F64698.3070800@gmail.com>
Date: Wed, 30 Aug 2006 22:16:56 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: SpanRegex speed
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu> <6035831.post@talk.nabble.com> <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu> <6057151.post@talk.nabble.com> <Pine.LNX.4.58.0608301137380.4558@hal.rescomp.berkeley.edu> <44F60D80.1070802@gmail.com> <9A767EEF-1DF0-41A6-8991-28516D912ADF@ehatchersolutions.com>
In-Reply-To: <9A767EEF-1DF0-41A6-8991-28516D912ADF@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ignore that last question. I see that you said prefix wildcard query and 
not wildcard query. A quick look at the code seems to show it grabbing a 
prefix as well.

Do you think one would be any faster than the other? Should I used 
Wildcardqueries outside of spanqueries and the regexquery inside 
spanqueries or use regex both places?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 02:32:11 2006
Return-Path: <java-user-return-23060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36885 invoked from network); 31 Aug 2006 02:32:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 02:32:05 -0000
Received: (qmail 9461 invoked by uid 500); 31 Aug 2006 02:32:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9439 invoked by uid 500); 31 Aug 2006 02:32:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9428 invoked by uid 99); 31 Aug 2006 02:32:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 19:32:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 19:31:59 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 715F3D9F4F7
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 22:31:37 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Wed, 30 Aug 2006 22:31:38 -0400
X-Sasl-enc: PVlV8jA2SR7c5ogpadmZj1x2AC+FXxZMwDeslmNlo3bZ 1156991498
Received: from [10.17.4.3] (pool-72-70-33-153.bstnma.fios.verizon.net [72.70.33.153])
	by mail.messagingengine.com (Postfix) with ESMTP id 5C709CEB0
	for <java-user@lucene.apache.org>; Wed, 30 Aug 2006 22:31:38 -0400 (EDT)
Message-ID: <44F64A08.1080209@mikemccandless.com>
Date: Wed, 30 Aug 2006 22:31:36 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 2.0a1 (X11/20060724)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: read past EOF
References: <00f701c6cc16$79f16d90$0b0310ac@bhavin> <44F56A7E.5060503@mikemccandless.com> <001901c6cc33$c75d3290$0b0310ac@bhavin>
In-Reply-To: <001901c6cc33$c75d3290$0b0310ac@bhavin>
Content-Type: text/plain; charset=iso-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bhavin Pandya wrote:
> My guess is ..."One of my index is got corrupted so whenever I am trying 
> to search the index or optimize the index or merging the multiple index 
> ...It will throws same exception but from different class...sometime 
> from IndexReader or sometime from IndexWriter depends on how it is being 
> called"

It indeed looks like you have an X.cfs file that is truncated.  It would
be good to get to the root cause that led to this ...

Were there any other errors leading up to this?  For example, when you
move your index after it's built, is this actually a copy (and maybe
the disk filled up when copying)?  Or a previous [initial] exception
when building the index?

Are you really sure only one writer is building the index at once?

Also is this easily reproduced?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 05:25:16 2006
Return-Path: <java-user-return-23061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81111 invoked from network); 31 Aug 2006 05:25:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 05:25:12 -0000
Received: (qmail 97961 invoked by uid 500); 31 Aug 2006 05:24:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97895 invoked by uid 500); 31 Aug 2006 05:24:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97847 invoked by uid 99); 31 Aug 2006 05:24:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Aug 2006 22:24:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Aug 2006 22:24:49 -0700
Received: (qmail 14930 invoked from network); 31 Aug 2006 05:21:49 -0000
Received: from unknown (HELO bhavin) (172.16.3.11)
  by mailserver with SMTP; 31 Aug 2006 05:21:49 -0000
Message-ID: <001401c6ccbf$893db3e0$0b0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <00f701c6cc16$79f16d90$0b0310ac@bhavin> <44F56A7E.5060503@mikemccandless.com> <001901c6cc33$c75d3290$0b0310ac@bhavin> <44F64A08.1080209@mikemccandless.com>
Subject: Re: read past EOF
Date: Thu, 31 Aug 2006 11:07:23 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>> Mike wrote:
> Were there any other errors leading up to this?  For example, when you
> move your index after it's built, is this actually a copy (and maybe
> the disk filled up when copying)?  Or a previous [initial] exception
> when building the index?
>
> Are you really sure only one writer is building the index at once?
>
> Also is this easily reproduced?


Hi Mike,

Yes I am sure only one writer at a time accessing index.

no i am not getting any other exception.

and there is no problem of disk space also.

right now i have backcopy of indexes so whenever one index got corrupted i m 
replacing with backup one and starting the indexer again from that duration.

Here is the script which i am using to move index after its built.

- rm -rf backupindex/*
- mv index backupindex;
- mv newindex index;
- mkdir newindex
- cp -dpR index/* newindex/
- touch index.done
- echo "done";

where "newindex" is the index which I am using for indexing...."index" which 
i am using for search purpose....and "backupindex" contains previous index.

Is there any way through which  I can check if index is corrupt or 
not....right now because of this exception (read past EOF ) i made few 
changes in my code to check for corrupt index. But i am checking for corrupt 
index through optimizing...If in optimization of index i m getting 
IOException I am considering that index got corrupted or there is permission 
issue..

Thanks.
Bhavin



----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, August 31, 2006 8:01 AM
Subject: Re: read past EOF


> Bhavin Pandya wrote:
>> My guess is ..."One of my index is got corrupted so whenever I am trying 
>> to search the index or optimize the index or merging the multiple index 
>> ...It will throws same exception but from different class...sometime from 
>> IndexReader or sometime from IndexWriter depends on how it is being 
>> called"
>
> It indeed looks like you have an X.cfs file that is truncated.  It would
> be good to get to the root cause that led to this ...
>
> Were there any other errors leading up to this?  For example, when you
> move your index after it's built, is this actually a copy (and maybe
> the disk filled up when copying)?  Or a previous [initial] exception
> when building the index?
>
> Are you really sure only one writer is building the index at once?
>
> Also is this easily reproduced?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 09:17:32 2006
Return-Path: <java-user-return-23062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60611 invoked from network); 31 Aug 2006 09:17:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 09:17:29 -0000
Received: (qmail 96983 invoked by uid 500); 31 Aug 2006 09:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96346 invoked by uid 500); 31 Aug 2006 09:17:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96335 invoked by uid 99); 31 Aug 2006 09:17:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 02:17:21 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 194.52.12.17 is neither permitted nor denied by domain of marcus.falck@observer.se)
Received: from [194.52.12.17] (HELO mail1.observergroup.com) (194.52.12.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 02:17:18 -0700
Received: (qmail 21586 invoked by uid 509); 31 Aug 2006 11:16:31 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.090641 secs); 31 Aug 2006 09:16:31 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.090641 secs Process 21580)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 31 Aug 2006 11:16:31 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6CCDE.256662FF"
Subject: GetMoreDocs question
Date: Thu, 31 Aug 2006 11:16:30 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C024497AD@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: GetMoreDocs question
Thread-Index: AcbM3iUeYWbE70NwSGGOjVmStCmhEw==
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6CCDE.256662FF
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I have some questions regarding the GetMoreDocs(50) call in the
constructors of the Hits class.

=20

First off whats the purposes of this call?

=20

Why do I have to make this call if I only want to get out a count of the
matching documents and don't want to reterive any document from the
index?

Can I do something so I don't cache up 100 docs when I'm just asking for
a count?

=20

/

Regards

Marcus


------_=_NextPart_001_01C6CCDE.256662FF--

From java-user-return-23063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 09:22:17 2006
Return-Path: <java-user-return-23063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61653 invoked from network); 31 Aug 2006 09:22:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 09:22:10 -0000
Received: (qmail 3423 invoked by uid 500); 31 Aug 2006 09:22:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3399 invoked by uid 500); 31 Aug 2006 09:22:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3388 invoked by uid 99); 31 Aug 2006 09:22:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [70.84.250.228] (HELO nix1.fastnix.com) (70.84.250.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 02:22:02 -0700
Received: from [59.182.52.139] (helo=youra9279112e3)
	by nix1.fastnix.com with esmtpa (Exim 4.52)
	id 1GIijE-0006hz-2e
	for java-user@lucene.apache.org; Thu, 31 Aug 2006 14:50:53 +0530
From: "sachin" <sachin.khaire@noemacorp.com>
To: <java-user@lucene.apache.org>
Subject: RE: Scoring Technique based on Relevance Feeback & other Parameters
Date: Thu, 31 Aug 2006 14:50:52 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
In-Reply-To: <Pine.LNX.4.58.0608231238360.12489@hal.rescomp.berkeley.edu>
Thread-Index: AcbG7IATScph6Au3Q5CZrpyOR3l5LgF7446g
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nix1.fastnix.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - noemacorp.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
Very small and sweet Question?

Does Apache allow me to change the Final classes which are distributed by
Apache for Scorers?  Or can I copy and paste some of the Lucene code into my
commercial application within my organization?

TermScorer, BooleanScorer are final classes. But all other scorers are
non-final classes.

Because my interest lies with changes in scoring strategy which is based on
Relevance Feedback? 

One observation :
Lucene is designed with inflexible scoring mechanism based on TF-IDF.
It would be really nice if much simpler scoring mechanisms should have given
chance for implementation

Query object should have construct "ScoringStrategy" object which will pass
to the scorer.

ScoringStrategy may look like this..

Interface ScoringStragey
{
// Where float is the score... 
// List of objects will be passed to the strategy which will calculate the
// scoreof 
 	float score(vector[] objects) ;		 
}

There may be other implementations possible for flexible scoring ?





-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: Thursday, August 24, 2006 1:14 AM
To: java-user@lucene.apache.org
Subject: Re: Scoring Technique based on Relevance Feeback & other Parameters


: package. By implementing new type of  tuple (Query,Weight,Scorer) I can
: easily implement new Scoring technique. Unfortunatly Lucene index shows
that
: it stores only TF / Position vectors for each term within document.

:         I am interested in investigating new scoring technique where I
will
: use some other parameters relating to the Term to rank the documents. For
an
: example web page ranking is assisted by parameters like number of links
: towards webpage and number of link from web - page.  It indicates that we
: need to store relatively more information about terms within the index.
But
: HoW ? . I need to investigate

there is a distinction between storing more information about a term and
storing additional information about a document.

the flexible payload type approaches that have been discussed should make
info about a term easy (ie: the term is "wind", it's type is "noun", it's
usage in the sentence is as a "subject", it's importance is "88.3") but
you can already store additional information about documents (like the
total popularity of a document) in Lucene -- either by using the document
boost (if you always want it to be part of the score calculations) or as a
seperate field which you can factor into the score calculations using
something like FunctionQuery...

http://incubator.apache.org/solr/docs/api/org/apache/solr/search/function/pa
ckage-summary.html

...i use this all the time to make "recent" docs score better, or "more
popular docs" score better.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 09:45:13 2006
Return-Path: <java-user-return-23064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67681 invoked from network); 31 Aug 2006 09:45:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 09:45:08 -0000
Received: (qmail 33348 invoked by uid 500); 31 Aug 2006 09:45:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33328 invoked by uid 500); 31 Aug 2006 09:45:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33317 invoked by uid 99); 31 Aug 2006 09:45:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 02:45:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 02:45:00 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T7a7073f1b588ad3ee41fd8@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Thu, 31 Aug 2006 11:44:16 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6CCE1.F3138B4C"
Subject: Escaping escape char
Date: Thu, 31 Aug 2006 11:43:44 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Escaping escape char
Thread-Index: AcbM4fMEDvw7aFhORQOX/lorIFVzgA==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6CCE1.F3138B4C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I have an index with a field 'content' (tokenized, stored, indexed)
using Lucene 1.9.1.
I tried to search this text in exact string: "european parliament
resolution on the Commission report on the regional meetings arranged by
the Commission in 1998-1999 on the common fisheries policy after 2002"
I use this part of code to parse the query:
public void addQuery(String field, String value, Occur occ) {
        QueryParser queryparser =3D new QueryParser(field, new
SimpleAnalyzer());
        Query query =3D null;
        try {
            if (value.charAt(0) =3D=3D '"' && =
value.charAt((value.length() -
1)) =3D=3D '"') {
                value =3D QueryParser.escape(value.substring(1,
(value.length() - 1)));
                value =3D '"' + value + '"';
            } else {
                value =3D QueryParser.escape(value);
            }
            // PhraseQuery phraseQuery =3D new PhraseQuery();
            // phraseQuery.add(new Term(field, value));
            query =3D queryparser.parse(value);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        combinedQueries.add(query, occ);
=20
When I print the Query I retrived this string:=20

+doccontent:"european parliament resolution on the commission report on
the regional meetings arranged by the commission in on the common
fisheries policy after"

Why 1998-1999  have been removed by the parser?


------_=_NextPart_001_01C6CCE1.F3138B4C--

From java-user-return-23065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 10:55:48 2006
Return-Path: <java-user-return-23065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91357 invoked from network); 31 Aug 2006 10:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 10:55:42 -0000
Received: (qmail 35148 invoked by uid 500); 31 Aug 2006 10:55:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34364 invoked by uid 500); 31 Aug 2006 10:55:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34353 invoked by uid 99); 31 Aug 2006 10:55:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 03:55:35 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 03:55:34 -0700
Received: by nz-out-0102.google.com with SMTP id z6so324949nzd
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 03:55:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=QsUeKMn1HJr1BHGU4LsR453XjnVR0KsmjaH7eV1JwxEukBdh/i2ndHI1ELA+i3aHw71PheoVI4h3naWbY1GYZUGYI+f6fiWroeEtEjhYoFumsUJEs/owOYuJWEzyo5pkG7e+qbo1NScJdqNmBgEkmSvYHA8d0TpK36Zb2/ue+ho=
Received: by 10.65.126.4 with SMTP id d4mr823202qbn;
        Thu, 31 Aug 2006 03:55:14 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id a29sm530270qbd.2006.08.31.03.55.12;
        Thu, 31 Aug 2006 03:55:13 -0700 (PDT)
Message-ID: <44F6C011.9010203@gmail.com>
Date: Thu, 31 Aug 2006 06:55:13 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: FuzzyQurey in SpanQuery
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Anyone know of a way to get a fuzzy query into a spanquery?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 11:24:17 2006
Return-Path: <java-user-return-23066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8204 invoked from network); 31 Aug 2006 11:24:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 11:24:14 -0000
Received: (qmail 68814 invoked by uid 500); 31 Aug 2006 11:24:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67804 invoked by uid 500); 31 Aug 2006 11:24:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67788 invoked by uid 99); 31 Aug 2006 11:24:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 04:24:07 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 31 Aug 2006 04:24:04 -0700
Received: (qmail 85383 invoked by uid 60001); 31 Aug 2006 11:23:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=jFOgXJPW0NDPUc+88uTVFMuakV9tXmAeCw4o++wuswgILoVOUMGsEljVlwSzyTgui1sUEl0NlxxYp4YoCPJfXbJL4Dyg4rv913jIdxUw8LG5WRV9+Z6HQRxSqlBIoW1G3wmkhg935CHeWpP3fBlGR95IbFnNlQHgyeeVY5V9AkU=  ;
Message-ID: <20060831112342.85381.qmail@web26001.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Thu, 31 Aug 2006 11:23:42 GMT
Date: Thu, 31 Aug 2006 11:23:42 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: FuzzyQurey in SpanQuery
To: java-user@lucene.apache.org
In-Reply-To: <44F6C011.9010203@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Something like this?

Query expandedQuery=fuzzyQuery.rewrite(reader);
HashSet termsSet=new HashSet();
expandedQuery.extractTerms(termsSet);
ArrayList termsList=new ArrayList();
for (Iterator iter = termsSet.iterator(); iter.hasNext();)
 {
      Term term = (Term) iter.next();
      SpanTermQuery stq=new SpanTermQuery(term);
       termsList.add(stq);       
 }
 SpanOrQuery soq=new SpanOrQuery((SpanQuery[]) termsList.toArray(new SpanQuery[termsList.size()]));

I imagine this general approach should work for other multi-term queries eg wildcards too.


----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, 31 August, 2006 11:55:13 AM
Subject: FuzzyQurey in SpanQuery

Anyone know of a way to get a fuzzy query into a spanquery?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 11:46:41 2006
Return-Path: <java-user-return-23067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21716 invoked from network); 31 Aug 2006 11:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 11:46:41 -0000
Received: (qmail 2167 invoked by uid 500); 31 Aug 2006 11:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1744 invoked by uid 500); 31 Aug 2006 11:46:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1733 invoked by uid 99); 31 Aug 2006 11:46:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 04:46:35 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 04:46:34 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44EDA0BC001E8EEB for java-user@lucene.apache.org; Thu, 31 Aug 2006 13:46:13 +0200
Subject: Re: FuzzyQurey in SpanQuery
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <44F6C011.9010203@gmail.com>
References:
	 <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>
	 <44F6C011.9010203@gmail.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Thu, 31 Aug 2006 13:46:12 +0200
Message-Id: <1157024772.4787.0.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2006-08-31 at 06:55 -0400, Mark Miller wrote:
> Anyone know of a way to get a fuzzy query into a spanquery?

http://issues.apache.org/jira/browse/LUCENE-522


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 12:32:18 2006
Return-Path: <java-user-return-23068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38390 invoked from network); 31 Aug 2006 12:32:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 12:32:13 -0000
Received: (qmail 82096 invoked by uid 500); 31 Aug 2006 12:32:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82059 invoked by uid 500); 31 Aug 2006 12:32:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82048 invoked by uid 99); 31 Aug 2006 12:32:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 05:32:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 05:32:04 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5A80330EFCD8; Thu, 31 Aug 2006 08:31:43 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 1C63730EFCD6
	for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 08:31:40 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3D4E7E7C-92E2-437D-8CD0-4133091C6C6A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Escaping escape char
Date: Thu, 31 Aug 2006 08:31:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 31, 2006, at 5:43 AM, WATHELET Thomas wrote:

> Hi,
>         QueryParser queryparser = new QueryParser(field, new
> SimpleAnalyzer());
> +doccontent:"european parliament resolution on the commission  
> report on
> the regional meetings arranged by the commission in on the common
> fisheries policy after"
>
> Why 1998-1999  have been removed by the parser

SimpleAnalyzer only passes through alphabetic characters, not  
numerics or special characters.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 13:28:29 2006
Return-Path: <java-user-return-23069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60659 invoked from network); 31 Aug 2006 13:28:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 13:28:27 -0000
Received: (qmail 65696 invoked by uid 500); 31 Aug 2006 13:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65673 invoked by uid 500); 31 Aug 2006 13:28:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65662 invoked by uid 99); 31 Aug 2006 13:28:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:28:20 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:28:19 -0700
Received: by nz-out-0102.google.com with SMTP id z6so359888nzd
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 06:27:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UcxYclj7tlmmi7psurJjfyYltczl32NgmEpcm4uc4xUaAZ/NKFEj99SyDCl7XRSSE77E5L5CQxaGAK3rFbikXZykW66/yVPqZ/9MQvGxMhUz96ePiqu6j0OLiWYRPMOJw113SrNTmRHgz7br3KejNuSHPVLN2quueLQN7UIEBdk=
Received: by 10.35.106.15 with SMTP id i15mr715817pym;
        Thu, 31 Aug 2006 06:27:58 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Thu, 31 Aug 2006 06:27:58 -0700 (PDT)
Message-ID: <359a92830608310627r5a463c04kbbe6fcd7841465ff@mail.gmail.com>
Date: Thu, 31 Aug 2006 09:27:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SpanRegex speed
In-Reply-To: <44F64698.3070800@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44728_9890867.1157030878329"
References: <6016090.post@talk.nabble.com>
	 <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu>
	 <6035831.post@talk.nabble.com>
	 <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu>
	 <6057151.post@talk.nabble.com>
	 <Pine.LNX.4.58.0608301137380.4558@hal.rescomp.berkeley.edu>
	 <44F60D80.1070802@gmail.com>
	 <9A767EEF-1DF0-41A6-8991-28516D912ADF@ehatchersolutions.com>
	 <44F64698.3070800@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44728_9890867.1157030878329
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Let me chime in here on a different note.... before you get happy with
wildcard queries, take a look at the thread "I just don't get wildcards at
all". There is lots of good info that Erik, Chris and Otis provided me.

The danger with prefixquery and wildcard query is that they will throw
TooManyClauses exceptions when you start matching a number of terms (the
default is 1024, although you can make this much bigger if memory allows).
If you're aware of this and it is and will be OK in your app, ignore this.
But if your index is going to grow significantly, this is a real problem. I
went with implementing filters with WildCardTermEnum (you could also use
RegexTermEnum) for the wildcard portions of my query. Which has interesting
implications for spans, we elected to say spans didn't work with wildcards.

Anyway, as I said, if you're aware of the TooManyClauses issue and are sure
it doesn't matter, ignore me. After all, everybody else does <G>.....


Best
Erick



On 8/30/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> Ignore that last question. I see that you said prefix wildcard query and
> not wildcard query. A quick look at the code seems to show it grabbing a
> prefix as well.
>
> Do you think one would be any faster than the other? Should I used
> Wildcardqueries outside of spanqueries and the regexquery inside
> spanqueries or use regex both places?
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44728_9890867.1157030878329--

From java-user-return-23070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 13:37:02 2006
Return-Path: <java-user-return-23070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62783 invoked from network); 31 Aug 2006 13:37:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 13:37:01 -0000
Received: (qmail 79058 invoked by uid 500); 31 Aug 2006 13:36:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78739 invoked by uid 500); 31 Aug 2006 13:36:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78728 invoked by uid 99); 31 Aug 2006 13:36:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:36:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.6.224.137] (HELO damocles.rain.fr) (195.6.224.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:36:53 -0700
Received: from chronos.viaccess.fr (unverified [192.168.202.202]) by 
    damocles.rain.fr (Content Technologies SMTPRS 4.3.14) with ESMTP id 
    <T7a71486e86c0a86f044a4@damocles.rain.fr> for 
    <java-user@lucene.apache.org>; Thu, 31 Aug 2006 15:36:22 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: graphically representing an index
Date: Thu, 31 Aug 2006 15:36:30 +0200
Message-ID: <8D6EB075336C7B4D8251D3557F6FEF1D6CE652@chronos.viaccess.fr>
In-Reply-To: <359a92830608310627r5a463c04kbbe6fcd7841465ff@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: graphically representing an index
Thread-Index: AcbNAVc4Kb+9PYD4Sf2NsvncPd0q1QAAB1ag
From: "SOMMERIA KLEIN Ariel Ext       VIACCESS-BU_DRM" 
    <a.klein.ext@viaccess.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
I'm a newbie with Lucene and I'm looking to implement the following:
I want to index posts from a forum, and, rather than proposing a search
on the contents, graphically represent the contents of the index. More
precisely, I would like to have a list of the most popular words, with a
number next to each indicating how often they occur.=20
The icing on the cake would be to be able to click on such a word and
get a subset of the posts including that word.=20
Can Lucene be used for this? Has anyone already implemented it? Any
links?
I've dug around a bit without any success, but my apologies if this has
already been dealt with

-----------------------------------------

"Privileged/Confidential information may be contained in this e-mail=20
and attachments. This e-mail, including attachments, constitutes non-public=
 information intended to be conveyed only to the designated recipient(s). I=
f you are not an intended recipient, please delete this e-mail, including a=
ttachments, and notify us immediately. The unauthorized use, dissemination,=
 distribution or reproduction of this e-mail, including attachments, is pro=
hibited and may be unlawful. In general, the content of this e-mail and att=
achments does not constitute any form of commitment by VIACCESS SA."

-----------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 13:41:39 2006
Return-Path: <java-user-return-23071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64150 invoked from network); 31 Aug 2006 13:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 13:41:39 -0000
Received: (qmail 85269 invoked by uid 500); 31 Aug 2006 13:41:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85229 invoked by uid 500); 31 Aug 2006 13:41:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85218 invoked by uid 99); 31 Aug 2006 13:41:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:41:32 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:41:31 -0700
Received: by py-out-1112.google.com with SMTP id w49so635412pyg
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 06:41:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YjDLbO2eSuxkgoOVMA+ZryAgg3avT29YXWh8QiB5Ecna/C2FwGoffFeIen7LnlzzC5Ly4shNOZ5MWyPK56Tt4yiPK4jtK3dmjVvadFfXj4Si72VM0JDP4MpS69rzSKNfw5ue4XWM26dYsXiJ2Dsamsh8gH8ayJOBh9Zpc61Vg5A=
Received: by 10.35.78.9 with SMTP id f9mr730869pyl;
        Thu, 31 Aug 2006 06:41:10 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Thu, 31 Aug 2006 06:41:09 -0700 (PDT)
Message-ID: <359a92830608310641l4d6783c7r39c33dd6db9bbc62@mail.gmail.com>
Date: Thu, 31 Aug 2006 09:41:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: GetMoreDocs question
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C024497AD@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44916_30599906.1157031669694"
References: <8834A84C87A2C148AD46921BB8BFC97C024497AD@S1SE1MAIL.emea1.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44916_30599906.1157031669694
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below...

On 8/31/06, Marcus Falck <marcus.falck@observer.se> wrote:
>
> Hi,
>
>
>
> I have some questions regarding the GetMoreDocs(50) call in the
> constructors of the Hits class.


What constructors? I just get a Hits object returned from the Searcher. Or
are you looking in the source?


First off whats the purposes of this call?


I'll pass on this since I don't know.


Why do I have to make this call if I only want to get out a count of the
> matching documents and don't want to reterive any document from the
> index?


You don't. Just look at the Hits.length()


Can I do something so I don't cache up 100 docs when I'm just asking for
> a count?


Why do you care? Is this a demonstrable performance issue? Premature
optimization and all that...

I don't know any way of getting around this, but since this hasn't been a
performance issue for me, I haven't
looked very hard.

And I assume you're counting the results of a query, in which case getting
around the cached documents sounds like way more work than it's worth.

If you're asking how many documents are in the index, that's another issue.
One technique I've used is to keep a "statistics document" in the index with
fields orthogonal to the fields in my "regular" documents (so no queries
match) with summary statistics that I assemble while making the index. Then,
when I want meta-information, I can just query that specific document and
read it.

Best
Erick


/
>
> Regards
>
> Marcus
>
>
>

------=_Part_44916_30599906.1157031669694--

From java-user-return-23072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 13:49:52 2006
Return-Path: <java-user-return-23072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67220 invoked from network); 31 Aug 2006 13:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 13:49:52 -0000
Received: (qmail 232 invoked by uid 500); 31 Aug 2006 13:49:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 213 invoked by uid 500); 31 Aug 2006 13:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 201 invoked by uid 99); 31 Aug 2006 13:49:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:49:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:49:44 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k7VDnPk15124
	for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 08:49:25 -0500
Message-ID: <44F6E8DF.40009@getopt.org>
Date: Thu, 31 Aug 2006 15:49:19 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: graphically representing an index
References: <8D6EB075336C7B4D8251D3557F6FEF1D6CE652@chronos.viaccess.fr>
In-Reply-To: <8D6EB075336C7B4D8251D3557F6FEF1D6CE652@chronos.viaccess.fr>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SOMMERIA KLEIN Ariel Ext VIACCESS-BU_DRM wrote:
> Hi all,
> I'm a newbie with Lucene and I'm looking to implement the following:
> I want to index posts from a forum, and, rather than proposing a search
> on the contents, graphically represent the contents of the index. More
> precisely, I would like to have a list of the most popular words, with a
> number next to each indicating how often they occur. 
> The icing on the cake would be to be able to click on such a word and
> get a subset of the posts including that word. 
> Can Lucene be used for this? Has anyone already implemented it? Any
> links?
> I've dug around a bit without any success, but my apologies if this has
> already been dealt with
>
>   

See http://www.getopt.org/luke for an example of such functionality. 
However, I must disappoint you - the most frequent words in a corpus are 
quite probably also most useless words. For English these are: the, a, 
to, for, by, in, can, I, ...
 So, you will need to eliminate them from the top of the list to get any 
useful results.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 13:53:12 2006
Return-Path: <java-user-return-23073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68267 invoked from network); 31 Aug 2006 13:53:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 13:53:05 -0000
Received: (qmail 7126 invoked by uid 500); 31 Aug 2006 13:52:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7100 invoked by uid 500); 31 Aug 2006 13:52:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7049 invoked by uid 99); 31 Aug 2006 13:52:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:52:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 06:52:46 -0700
Received: by nf-out-0910.google.com with SMTP id x4so421953nfb
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 06:52:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MF5fYwMtZmYBMSCGqp8PXS38eI4/q178EZl4LtQtFwC/hHJ18aNKnjKt+jgKHLEPo88dbk/Y/B/RK625hacPNgfl+XeeUyt9ANjYnsqIal4awrDj4RrqPaE4wBQW7sK+1875zI3SnB0M7Q+tgjQNgQzl1pE8zQppzSndZYlf9Vo=
Received: by 10.35.106.15 with SMTP id i15mr756968pym;
        Thu, 31 Aug 2006 06:52:24 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Thu, 31 Aug 2006 06:52:24 -0700 (PDT)
Message-ID: <359a92830608310652n61f06343t122f5555e4563500@mail.gmail.com>
Date: Thu, 31 Aug 2006 09:52:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: graphically representing an index
In-Reply-To: <8D6EB075336C7B4D8251D3557F6FEF1D6CE652@chronos.viaccess.fr>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45044_7923476.1157032344485"
References: <359a92830608310627r5a463c04kbbe6fcd7841465ff@mail.gmail.com>
	 <8D6EB075336C7B4D8251D3557F6FEF1D6CE652@chronos.viaccess.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_45044_7923476.1157032344485
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Take a look at Luke (http://www.getopt.org/luke/). I think this does a lot
of what you're asking for. It's opensource, so you could see how it's done.
There are screenshots at the link above so you can see if it's actually what
you want.....

You might also want to look at the Term* classes in the API, particularly
TermDocs, TermEnum, TermFreqVector, TermPositionVector and TermPositions.

I'm quite sure all the information is there, it'll probably be interesting
to put it all together efficiently <G>

Hope this helps
Erick

On 8/31/06, SOMMERIA KLEIN Ariel Ext VIACCESS-BU_DRM <
a.klein.ext@viaccess.com> wrote:
>
> Hi all,
> I'm a newbie with Lucene and I'm looking to implement the following:
> I want to index posts from a forum, and, rather than proposing a search
> on the contents, graphically represent the contents of the index. More
> precisely, I would like to have a list of the most popular words, with a
> number next to each indicating how often they occur.
> The icing on the cake would be to be able to click on such a word and
> get a subset of the posts including that word.
> Can Lucene be used for this? Has anyone already implemented it? Any
> links?
> I've dug around a bit without any success, but my apologies if this has
> already been dealt with
>
> -----------------------------------------
>
> "Privileged/Confidential information may be contained in this e-mail
> and attachments. This e-mail, including attachments, constitutes
> non-public information intended to be conveyed only to the designated
> recipient(s). If you are not an intended recipient, please delete this
> e-mail, including attachments, and notify us immediately. The unauthorized
> use, dissemination, distribution or reproduction of this e-mail, including
> attachments, is prohibited and may be unlawful. In general, the content of
> this e-mail and attachments does not constitute any form of commitment by
> VIACCESS SA."
>
> -----------------------------------------
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_45044_7923476.1157032344485--

From java-user-return-23074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 17:09:54 2006
Return-Path: <java-user-return-23074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30983 invoked from network); 31 Aug 2006 17:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 17:09:54 -0000
Received: (qmail 65630 invoked by uid 500); 31 Aug 2006 17:09:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65588 invoked by uid 500); 31 Aug 2006 17:09:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 62079 invoked by uid 99); 31 Aug 2006 16:14:22 -0000
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,MIME_BOUND_NEXTPART,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saurabh@danicorp.com designates 63.134.207.28 as permitted sender)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary=----_SmarterMail_NextPart_5332481154283688
Date: Thu, 31 Aug 2006 09:13:02 -0700
Subject: Using Lucene Index for Business Intelligence / Analytics
From: "Saurabh Dani" <saurabh@danicorp.com>
Reply-To: saurabh@danicorp.com
To: <java-user@lucene.apache.org>
CC: 
Message-ID: <ae918380a0bd438aa46af9c7ddb8d61f@danicorp.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_SmarterMail_NextPart_5332481154283688
Content-Type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0D=0A=0D=0A				I don't have a lot of experience with reporting tools and h=
ow data is stored by high priced tools which use OLAP and other similar sto=
rage types but we needed a solution for drill down reports and searching wi=
thin large application logs / web server logs.=0D=0A=0D=0ASo, we decided to=
 build a reporting / analytics solution using Lucene. The product is almost=
 ready and we are doing closed beta testing for now for reporting & searchi=
ng in Web Server logs with our small set of beta customers. I am not here t=
o promote the product or drop the URL, but wanted to get an opinion from th=
is group on using Lucene as the data store for Business Intelligence / Anal=
ytics.=0D=0A=0D=0AIf implemented correctly, is there any reason why a Lucen=
e based data store cannot compete with the high priced reporting / data ana=
lytics products for drill down reports? I know about a lot of Lucene advant=
ages which I can talk about with customers, but what can be the downside of=
 using Lucene / competitive advantages in other products which we should be=
 aware of?=0D=0A=0D=0AThanks=0D=0ASaurabh Dani =0D=0A=0D=0A

------_SmarterMail_NextPart_5332481154283688--




From java-user-return-23075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 17:12:38 2006
Return-Path: <java-user-return-23075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31520 invoked from network); 31 Aug 2006 17:12:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 17:12:36 -0000
Received: (qmail 71832 invoked by uid 500); 31 Aug 2006 17:12:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71800 invoked by uid 500); 31 Aug 2006 17:12:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71789 invoked by uid 99); 31 Aug 2006 17:12:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:12:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 10:12:27 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GIq5H-0006DI-CF
	for java-user@lucene.apache.org; Thu, 31 Aug 2006 10:12:07 -0700
Message-ID: <6083872.post@talk.nabble.com>
Date: Thu, 31 Aug 2006 10:12:07 -0700 (PDT)
From: John Pailet <9i7svel2zr6uujn@jetable.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting based on a selling rate
In-Reply-To: <Pine.LNX.4.58.0608301137380.4558@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
References: <6016090.post@talk.nabble.com> <Pine.LNX.4.58.0608281149320.10385@hal.rescomp.berkeley.edu> <6035831.post@talk.nabble.com> <Pine.LNX.4.58.0608291132220.3758@hal.rescomp.berkeley.edu> <6057151.post@talk.nabble.com> <Pine.LNX.4.58.0608301137380.4558@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Putting selling rate in the index is OK for me, I also think that is a good
idea.

The problem is: I don't  know how to store the sell rate of the product that
depends on a specific query

Can you please give me your idea about how to store it in the Lucene
document ? (field/value)

Thank you very much,

John

 




Chris Hostetter wrote:
> 
> 
> : I don't know what is the best way:
> 
> that depends on your needs ... if Selling rate changes very infrequently,
> or if you are dealing with teh sell rate for lots of books per
> query then i'd put it in your index ... if it's constantly in flux and you
> only care about the sell rate of one or two books for each query, doing it
> at query time is fine.
> 
> the definitions of "infrequently", "lots", and "constantly" all being
> specific to the scope of your problem, and not something i can give
> general advice on.
> 
> : or doing something like you said: "adding an optional clauses to your
> : query for each of your N productIds"... but I don't really know how to
> do
> : this...
> :
> : Any sample code exemple ?
> 
> I suggest you start by looking at the javadocs for BooleanQuery.
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Sorting-based-on-a-selling-rate-tf2175860.html#a6083872
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 18:09:26 2006
Return-Path: <java-user-return-23076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46204 invoked from network); 31 Aug 2006 18:09:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:09:26 -0000
Received: (qmail 86448 invoked by uid 500); 31 Aug 2006 18:09:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86422 invoked by uid 500); 31 Aug 2006 18:09:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86411 invoked by uid 99); 31 Aug 2006 18:09:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:09:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:09:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5B30E5B76E; Thu, 31 Aug 2006 11:08:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 57CDB7F403
	for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 11:08:58 -0700 (PDT)
Date: Thu, 31 Aug 2006 11:08:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: GetMoreDocs question
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C024497AD@S1SE1MAIL.emea1.ad.group>
Message-ID: <Pine.LNX.4.58.0608311103180.7313@hal.rescomp.berkeley.edu>
References: <8834A84C87A2C148AD46921BB8BFC97C024497AD@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I have some questions regarding the GetMoreDocs(50) call in the
: constructors of the Hits class.

: First off whats the purposes of this call?

Hits is designed to meet the simple needs of simple clients -- the
assumption is that clients using Hits want simple paginated results - so
Hits goes ahead and gets you page#1.

: Can I do something so I don't cache up 100 docs when I'm just asking for
: a count?

This is what the search method that returns TopDocs is designed for --
when all you care about is the totalHits and the first N docs (in your
case N is 0 or maybe 1)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 18:25:49 2006
Return-Path: <java-user-return-23077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49297 invoked from network); 31 Aug 2006 18:25:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:25:49 -0000
Received: (qmail 14190 invoked by uid 500); 31 Aug 2006 18:25:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13747 invoked by uid 500); 31 Aug 2006 18:25:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13736 invoked by uid 99); 31 Aug 2006 18:25:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:25:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:25:40 -0700
Received: by nz-out-0102.google.com with SMTP id z6so433138nzd
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 11:25:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=tl+QBSh5QNr0CdqQmQzJWcnMOR7MSZAKNEq1oDF1ADIgdpsoPqgtu3J3BMYrx3m6wqmtJjVQRMpxJ2Ksf091a1Chj57ERkHZJ1WL/MK9crDwusgCIj65mF1hxfWqToO15I/espRPhZgYoquZh1YxtdcpEM7cH96kuiD3+tziNg0=
Received: by 10.65.237.19 with SMTP id o19mr1633142qbr;
        Thu, 31 Aug 2006 11:25:17 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id f12sm930909qba.2006.08.31.11.25.16;
        Thu, 31 Aug 2006 11:25:17 -0700 (PDT)
Message-ID: <44F7298C.2020209@gmail.com>
Date: Thu, 31 Aug 2006 14:25:16 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FuzzyQurey in SpanQuery
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>	 <44F6C011.9010203@gmail.com> <1157024772.4787.0.camel@localhost>
In-Reply-To: <1157024772.4787.0.camel@localhost>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

karl wettin wrote:
> On Thu, 2006-08-31 at 06:55 -0400, Mark Miller wrote:
>   
>> Anyone know of a way to get a fuzzy query into a spanquery?
>>     
>
> http://issues.apache.org/jira/browse/LUCENE-522
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
Great. Very sweet karl.

Question:
You run into problems with it crapping out on tostring with a null 
pointer exception?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 18:28:06 2006
Return-Path: <java-user-return-23078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49678 invoked from network); 31 Aug 2006 18:28:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 18:28:05 -0000
Received: (qmail 17906 invoked by uid 500); 31 Aug 2006 18:27:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17875 invoked by uid 500); 31 Aug 2006 18:27:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17864 invoked by uid 99); 31 Aug 2006 18:27:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:27:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 11:27:56 -0700
Received: by nz-out-0102.google.com with SMTP id z6so433643nzd
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 11:27:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=BZQvzmE4wG5q6pA4vrHvwpkwjhSCwE226HxzRBQOJVrpF78NPS+p2dJ9eiVN0/7Tf8pF+gVyyox8kicEXsJCcEsoUC8Sz1hxZXZZFyE467Fm0w3I3cBDbldDr7kyM8/+Ggcr8Z+QE/UYwRm6ro3ldXXgGIjPMuEHS6ECbwnQ7Zg=
Received: by 10.64.143.12 with SMTP id q12mr1581005qbd;
        Thu, 31 Aug 2006 11:27:35 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id d12sm931396qbc.2006.08.31.11.27.33;
        Thu, 31 Aug 2006 11:27:34 -0700 (PDT)
Message-ID: <44F72A15.8030009@gmail.com>
Date: Thu, 31 Aug 2006 14:27:33 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FuzzyQurey in SpanQuery
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>	 <44F6C011.9010203@gmail.com> <1157024772.4787.0.camel@localhost>
In-Reply-To: <1157024772.4787.0.camel@localhost>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

karl wettin wrote:
> On Thu, 2006-08-31 at 06:55 -0400, Mark Miller wrote:
>   
>> Anyone know of a way to get a fuzzy query into a spanquery?
>>     
>
> http://issues.apache.org/jira/browse/LUCENE-522
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
I found this:
Also it throws nullpointer if you do a toString() prior to rewriting the 
query. Perhaps thats the way it is? Didn't check it out. Just reporting 
before I forget about it.

When is a query rewritten? I build my query and then before using it, I 
would like to print it out to double check it. Not possible? Does the 
rewrite happen inside search?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 21:06:15 2006
Return-Path: <java-user-return-23079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4077 invoked from network); 31 Aug 2006 21:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:06:08 -0000
Received: (qmail 99194 invoked by uid 500); 31 Aug 2006 21:06:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99165 invoked by uid 500); 31 Aug 2006 21:06:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99151 invoked by uid 99); 31 Aug 2006 21:06:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:06:01 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.164 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:06:00 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn2.hy.skanova.net (7.2.075)
        id 44F2F2F700126043 for java-user@lucene.apache.org; Thu, 31 Aug 2006 23:05:38 +0200
Subject: Re: FuzzyQurey in SpanQuery
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <44F72A15.8030009@gmail.com>
References:
	 <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>
	 <44F6C011.9010203@gmail.com> <1157024772.4787.0.camel@localhost>
	 <44F72A15.8030009@gmail.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Thu, 31 Aug 2006 23:05:36 +0200
Message-Id: <1157058336.4787.11.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2006-08-31 at 14:27 -0400, Mark Miller wrote:

> When is a query rewritten? I build my query and then before using it, I 
> would like to print it out to double check it. Not possible? Does the 
> rewrite happen inside search?

Right, you can't do a toString prior to rewriting it. The problem is of
course that the rewritten query contains lots of possible choises for
the fuzzy term, extracted from the IndexReader passed when rewriting it.

If you reallt really want to inspect the rewritten query, create a new
instance and pass on the IndexReader. This will be slow though. In fact,
fuzzy span is quite slow by it self.

By the way, what do you plan to use it for? I use it as a very crued
text mining classifier, never exposed to the end user.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 21:18:12 2006
Return-Path: <java-user-return-23080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8471 invoked from network); 31 Aug 2006 21:18:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:18:06 -0000
Received: (qmail 32006 invoked by uid 500); 31 Aug 2006 21:17:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31974 invoked by uid 500); 31 Aug 2006 21:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31963 invoked by uid 99); 31 Aug 2006 21:17:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:17:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:17:58 -0700
Received: by wr-out-0506.google.com with SMTP id i5so308716wra
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 14:17:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=gJon9CeUaxCZtjD4kz6YB0kKso6RN1mbE/rocXbY8ra9ZZbgHluZBq+j2Jkaf/y5RRwx0h66SbMXELeIbRi07RQMECB1Z4V7KOMaC5nYRVtM2ig+ek8ceal4JxltOC0K46i3YHOXMO/9zaLjuR3eTRMsDB44K1RAVyNe22C7Xgo=
Received: by 10.64.250.3 with SMTP id x3mr1797871qbh;
        Thu, 31 Aug 2006 14:17:37 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id e15sm1070494qbe.2006.08.31.14.17.35;
        Thu, 31 Aug 2006 14:17:37 -0700 (PDT)
Message-ID: <44F751F0.1000700@gmail.com>
Date: Thu, 31 Aug 2006 17:17:36 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FuzzyQurey in SpanQuery
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>	 <44F6C011.9010203@gmail.com> <1157024772.4787.0.camel@localhost>	 <44F72A15.8030009@gmail.com> <1157058336.4787.11.camel@localhost>
In-Reply-To: <1157058336.4787.11.camel@localhost>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

karl wettin wrote:
> On Thu, 2006-08-31 at 14:27 -0400, Mark Miller wrote:
>
>   
>> When is a query rewritten? I build my query and then before using it, I 
>> would like to print it out to double check it. Not possible? Does the 
>> rewrite happen inside search?
>>     
>
> Right, you can't do a toString prior to rewriting it. The problem is of
> course that the rewritten query contains lots of possible choises for
> the fuzzy term, extracted from the IndexReader passed when rewriting it.
>
> If you reallt really want to inspect the rewritten query, create a new
> instance and pass on the IndexReader. This will be slow though. In fact,
> fuzzy span is quite slow by it self.
>
> By the way, what do you plan to use it for? I use it as a very crued
> text mining classifier, never exposed to the end user.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
I want to use it for my query parser so you can do a fuzzy search inside 
of a proximity search. Is it any slower than a standard fuzzy query?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 21:19:26 2006
Return-Path: <java-user-return-23081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8914 invoked from network); 31 Aug 2006 21:19:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:19:25 -0000
Received: (qmail 36640 invoked by uid 500); 31 Aug 2006 21:19:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36615 invoked by uid 500); 31 Aug 2006 21:19:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36604 invoked by uid 99); 31 Aug 2006 21:19:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:19:18 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:19:17 -0700
Received: by nz-out-0102.google.com with SMTP id z6so477377nzd
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 14:18:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=JaBpcVLWyrOhhX+W8tk+hID95kGImdFfZiATVuZyxZxtS2+b8afkqJx0PrYwa9U7hm43o/ZOb8E4ecYCKPYKezk3G3y88v0RUB51rEVX3yYroxvCxKscPOFGNFxQ8nvYqCZFjp3WNkebxDnicUTawCp88edx9W7Pb3XizEWYkfE=
Received: by 10.64.250.3 with SMTP id x3mr1799523qbh;
        Thu, 31 Aug 2006 14:18:56 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id q13sm1075372qbq.2006.08.31.14.18.54;
        Thu, 31 Aug 2006 14:18:55 -0700 (PDT)
Message-ID: <44F7523F.5030106@gmail.com>
Date: Thu, 31 Aug 2006 17:18:55 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Proximity Query Parser
References: <8834A84C87A2C148AD46921BB8BFC97C024497AD@S1SE1MAIL.emea1.ad.group> <Pine.LNX.4.58.0608311103180.7313@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0608311103180.7313@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am not a huge fan of the queryparser's syntax so I have started an 
open source project to create a viable alternative. I could really use 
some helping testing it out. The more I can get it tested the better 
chance it has of serving the community. The parser is called Qsol. I am 
right up against its initial release. So far it:

offers a simple clean syntax.
allows arbitrary combinations/nesting of proximity and boolean queries.
allows special date field processing (date searches can use a 
constantscore range filter).
other minor features ( like makeAllTermsFuzzy() to make your standard 
search a fuzzy search (would prob be god awful slow I know, but I have 
seen this option in MediaWare I think).

The first initial release (if I can get some people to take the plunge 
and help me test) will also include sentence/paragraph proximity search 
support and a goggle suggest/spell-check type function. I have roughly 
implemented both of these, but have not combined them into the parser yet.

I have set up a rough page with some sparse documentation for the parser 
at http://famestalker.com/devwiki/ You can download the jar there.

A general query parser is such a pluggable part of Lucene that it would 
be really nice to have a few viable options. It seems that everyone that 
makes one keeps it proprietary (other than Surround). Help me push this 
thing to a 1.0 release! It is almost there. Try it out! Keep in mind, 
there are probably plenty of optimizations to be had in the future.

Below is a simple syntax explanation and some sample queries.

- Mark Miller


    Order of Operations

   1. '( )' *parenthesis* : me & (him | her)
   2. '!' *and not* : mill ! bucketloader
   3. '~' *within* : score ~5 lunch : use ord to only find terms in
      order : score ord~5 lunch
   4. '&' *and* : beat & pony
   5. '|' *or* : him | her

Spaces between terms default to & but this can be changed to |

*Escape* - A '\' will escape an operator : m\&m's

*Quotes* - an in-order phrase search with or without a specified slop : 
"holy war sick":3 | "gimme all my cake"

*Range Queries* - a query in the form: /beingword - endword/ will 
perform a range search. The default search is inclusive. For an 
exclusive search use '--' instead of '-' : creditcard[23907094 - 
23094345] | creditcard[23907094 -- 23094345]

*Wildcards* - * indicates zero or more unknowns and ? indicates a single 
unknown : old harr*t?n | kil?r

A wildcard query cannot begin with an unknown.

*Fuzzy Query* : a ` indicates the preceding term should be a fuzzy 
term : old carrot & devil` may cry

*Paragraph/Sentence Proximity Searching*

If you have enabled sentence and paragraph proximity searching then the 
'~' operator may also be used as '~3p' or '~5s' to perform paragraph and 
sentence proximity searches.

*Sample Queries:*

        example = "(good witch & "killa the willaw") ~4 scary ! man";
        expected = "+(+spanNear([allFields:good, allFields:scary], 4, 
false) -spanNear([allFields:good, allFields:man], 4, false)) 
+(+spanNear([allFields:witch, allFields:scary], 4, false) 
-spanNear([allFields:witch, allFields:man], 4, false)) 
+(+spanNear([spanNear([allFields:killa, allFields:willaw], 1, true), 
allFields:scary], 4, false) -spanNear([spanNear([allFields:killa, 
allFields:willaw], 1, true), allFields:man], 4, false))";
        assertEquals(expected, parse(example));
       
        example = "beat` old magpie`";
        expected = "+allFields:beat~0.5 +allFields:old 
+allFields:magpie~0.5";
        assertEquals(expected, parse(example));

        example = "me \| the & test & hole";
        expected = "+allFields:me +allFields:test +allFields:hole";
        assertEquals(expected, parse(example));

        example = ""test the big search":30 & me";
        expected = "+spanNear([allFields:test, allFields:big, 
allFields:search], 30, true) +allFields:me";
        assertEquals(expected, parse(example));

        example = "me & fox & cop";
        expected = "+allFields:me +allFields:fox +allFields:cop";
        assertEquals(expected, parse(example));
       
        example = "date[8/5/82]";
        expected = "date:19820805";
        assertEquals(expected, parse(example));

        example = "date[> 12/31/02]";
        expected = "ConstantScore(date:[20021231-})";
        assertEquals(expected, parse(example));

        example = "date[< 03/23/2004]";
        expected = "ConstantScore(date:{-20040323])";
        assertEquals(expected, parse(example));
       
        example = "date[3/23/2004 - 6/34/02]";
        expected = "ConstantScore(date:[20040323-20020704])";
        assertEquals(expected, parse(example));
       
        example = "field1,field2[(search & old) ~3 horse]";
        expected = "(+spanNear([field1:search, field1:horse], 3, false) 
+spanNear([field1:old, field1:horse], 3, false)) 
(+spanNear([field2:search, field2:horse], 3, false) 
+spanNear([field2:old, field2:horse], 3, false))";
        assertEquals(expected, parse(example));

        example = "field1[search | old ~3 horse]";
        expected = "(field1:search spanNear([field1:old, field1:horse], 
3, false))";
        assertEquals(expected, parse(example));

        parser.makeAllTermsFuzzy(true);
        example = "meat & old cleaver | mike ~3 (dirty man)";
        expected = "(+allFields:meat~0.5 +allFields:old~0.5 
+allFields:cleaver~0.5) (+spanNear([fuzzy(allFields:mike), 
fuzzy(allFields:dirty)], 3, false) +spanNear([fuzzy(allFields:mike), 
fuzzy(allFields:man)], 3, false))";
        assertEquals(expected, parse(example));
        parser.makeAllTermsFuzzy(false);
       
        example = "goat-valley";
        expected = "spanNear([allFields:goat, allFields:valley], 1, true)";
        assertEquals(expected, parse(example));
       
        example = "goat -- valley";
        expected = "allFields:[goat TO valley]";
        assertEquals(expected, parse(example));
       
        example = "goat \\-- valley";
        expected = "+allFields:goat +allFields:valley";
        assertEquals(expected, parse(example));
       
        example = "goat \\- valley";
        expected = "+allFields:goat +allFields:valley";
        assertEquals(expected, parse(example));
       
        example = "goat - valley";
        expected = "allFields:{goat TO valley}";
        assertEquals(expected, parse(example));




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 21:28:33 2006
Return-Path: <java-user-return-23082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13118 invoked from network); 31 Aug 2006 21:28:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:28:33 -0000
Received: (qmail 60300 invoked by uid 500); 31 Aug 2006 21:28:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60263 invoked by uid 500); 31 Aug 2006 21:28:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60230 invoked by uid 99); 31 Aug 2006 21:28:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:28:18 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of baleksan@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO nz-out-0102.google.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:28:17 -0700
Received: by nz-out-0102.google.com with SMTP id z6so479308nzd
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 14:27:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kOiljyRE8SsJmjj7cRXPBYpZSRej6hiGLP77u4+Z/JUoe9vXDmm66M7ZSm+G1TioQ0uhDpd8VuHKJgp+ercY1NKbxipY4RItRl7NHuIbjEihD9xLci93nKJA/uded8sLocnTVIofIbFiqysorIxfT3ycxX72zo5sYM1Jl69jIpU=
Received: by 10.65.126.4 with SMTP id d4mr760951qbn;
        Thu, 31 Aug 2006 14:27:56 -0700 (PDT)
Received: by 10.65.40.12 with HTTP; Thu, 31 Aug 2006 14:27:56 -0700 (PDT)
Message-ID: <97aa8b3e0608311427u47400eafsc4378435ba5f78ae@mail.gmail.com>
Date: Thu, 31 Aug 2006 14:27:56 -0700
From: "Boris Aleksandrovsky" <baleksan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: word frequency list?
In-Reply-To: <44F5D548.4010401@mindspring.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47775_30628033.1157059676381"
References: <44F5D548.4010401@mindspring.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_47775_30628033.1157059676381
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Jason,

You can look here:

http://www.cs.ualberta.ca/~lindek/downloads.htm

for

Word frequency counts from a 1.5B word corpus (TREC disks 1-5 and the Reuters
corpus <http://about.reuters.com/researchandstandards/corpus/>). The words
are normalized as follows: ALL CAP words are prepended with a_ and
Capitalized words are prepended with c_ after downcasing. Digits are all
replaced with 0.

Cheers,
Boris

On 8/30/06, Jason Pump <jpump@mindspring.com> wrote:
>
> Is there a large list of words and their frequency in the english
> language? Obviously it would differ by corpus but I would like to see
> what's already available.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanks,

Boris

------=_Part_47775_30628033.1157059676381--

From java-user-return-23083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 21:30:12 2006
Return-Path: <java-user-return-23083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14394 invoked from network); 31 Aug 2006 21:30:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:30:08 -0000
Received: (qmail 65430 invoked by uid 500); 31 Aug 2006 21:30:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65179 invoked by uid 500); 31 Aug 2006 21:30:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65168 invoked by uid 99); 31 Aug 2006 21:30:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:30:01 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.83 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:30:01 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn2.hy.skanova.net (7.2.075)
        id 44F471DC000C0320 for java-user@lucene.apache.org; Thu, 31 Aug 2006 23:29:39 +0200
Subject: Re: FuzzyQurey in SpanQuery
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <44F751F0.1000700@gmail.com>
References:
	 <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>
	 <44F6C011.9010203@gmail.com> <1157024772.4787.0.camel@localhost>
	 <44F72A15.8030009@gmail.com> <1157058336.4787.11.camel@localhost>
	 <44F751F0.1000700@gmail.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Thu, 31 Aug 2006 23:29:31 +0200
Message-Id: <1157059772.4787.17.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2006-08-31 at 17:17 -0400, Mark Miller wrote:
> 
> I want to use it for my query parser so you can do a fuzzy search
> inside of a proximity search. Is it any slower than a standard fuzzy
> query? 

I find it to be extremly slow. All terms in the index need to be
enumerated (or a subset if a prefix length is provided). But try it out.
You are more than welcome to report the speed here or in the jira issue.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 21:34:07 2006
Return-Path: <java-user-return-23084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15249 invoked from network); 31 Aug 2006 21:34:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:34:05 -0000
Received: (qmail 76803 invoked by uid 500); 31 Aug 2006 21:33:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76770 invoked by uid 500); 31 Aug 2006 21:33:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76759 invoked by uid 99); 31 Aug 2006 21:33:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:33:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:33:56 -0700
Received: by nz-out-0102.google.com with SMTP id z6so480424nzd
        for <java-user@lucene.apache.org>; Thu, 31 Aug 2006 14:33:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=q3QeVwM0H+JHkIgSHtcFDo+HqDQSCaCf2u0aaQ2vHmOojRP1+cZpANf/e86UaLLtonJcX96/Ot3Kll1qzM283j/Nn0Li5fs0lX1T+lqGAvDrG95jtjwq1WFftslpNMSx9Du2hYNMCtpgCkCLk3LZo3uJZgMUKarEYij1/EDmKcA=
Received: by 10.65.59.20 with SMTP id m20mr1871116qbk;
        Thu, 31 Aug 2006 14:33:27 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id q15sm1069908qbq.2006.08.31.14.33.24;
        Thu, 31 Aug 2006 14:33:26 -0700 (PDT)
Message-ID: <44F75590.6090300@gmail.com>
Date: Thu, 31 Aug 2006 17:33:04 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FuzzyQurey in SpanQuery
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>	 <44F6C011.9010203@gmail.com> <1157024772.4787.0.camel@localhost>	 <44F72A15.8030009@gmail.com> <1157058336.4787.11.camel@localhost>	 <44F751F0.1000700@gmail.com> <1157059772.4787.17.camel@localhost>
In-Reply-To: <1157059772.4787.17.camel@localhost>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

karl wettin wrote:
> On Thu, 2006-08-31 at 17:17 -0400, Mark Miller wrote:
>   
>> I want to use it for my query parser so you can do a fuzzy search
>> inside of a proximity search. Is it any slower than a standard fuzzy
>> query? 
>>     
>
> I find it to be extremly slow. All terms in the index need to be
> enumerated (or a subset if a prefix length is provided). But try it out.
> You are more than welcome to report the speed here or in the jira issue.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
Bad news for me. Any hope of a speedier fuzzy span?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 21:46:46 2006
Return-Path: <java-user-return-23085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21353 invoked from network); 31 Aug 2006 21:46:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 21:46:42 -0000
Received: (qmail 98986 invoked by uid 500); 31 Aug 2006 21:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98961 invoked by uid 500); 31 Aug 2006 21:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98947 invoked by uid 99); 31 Aug 2006 21:46:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:46:36 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.83 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 14:46:36 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn2.hy.skanova.net (7.2.075)
        id 44F471DC000C0C4F for java-user@lucene.apache.org; Thu, 31 Aug 2006 23:46:15 +0200
Subject: Re: FuzzyQurey in SpanQuery
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <44F75590.6090300@gmail.com>
References:
	 <AD97D5F23B201C448EAB13B4F6DA6A421BF451@EPLUXSEX01.ep.parl.union.eu>
	 <44F6C011.9010203@gmail.com> <1157024772.4787.0.camel@localhost>
	 <44F72A15.8030009@gmail.com> <1157058336.4787.11.camel@localhost>
	 <44F751F0.1000700@gmail.com> <1157059772.4787.17.camel@localhost>
	 <44F75590.6090300@gmail.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Thu, 31 Aug 2006 23:46:12 +0200
Message-Id: <1157060773.4787.25.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2006-08-31 at 17:33 -0400, Mark Miller wrote:
> 
> Bad news for me. Any hope of a speedier fuzzy span? 

Using a spell checker comes in mind.

A speedier index is another way to go. RAMDirectory is n times faster
than FSDirectory and issue 550-index is 5x faster than RAMDirectory if
you only look at fuzzyness.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 22:24:30 2006
Return-Path: <java-user-return-23086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38849 invoked from network); 31 Aug 2006 22:24:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 22:24:30 -0000
Received: (qmail 53901 invoked by uid 500); 31 Aug 2006 22:24:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53880 invoked by uid 500); 31 Aug 2006 22:24:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53869 invoked by uid 99); 31 Aug 2006 22:24:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 15:24:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 15:24:21 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GIux6-0001sr-WC
	for java-user@lucene.apache.org; Thu, 31 Aug 2006 15:24:01 -0700
Message-ID: <6089447.post@talk.nabble.com>
Date: Thu, 31 Aug 2006 15:24:00 -0700 (PDT)
From: Philip Brown <pmb@us.ibm.com>
To: java-user@lucene.apache.org
Subject: Lock error attempting update of RAMDirectory index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I'm getting the following error trying to instantiate an IndexModifier on a
RAMDirectory index:

java.io.IOException: Lock obtain timed out:
org.apache.lucene.store.RAMDirectory$1@a336b7
	at org.apache.lucene.store.Lock.obtain(Lock.java(Compiled Code))
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:254)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:244)
	at org.apache.lucene.index.IndexModifier.init(IndexModifier.java:148)
	at org.apache.lucene.index.IndexModifier.<init>(IndexModifier.java:111)
...

Here's some background:

I have a web application where, upon startup, this RAMDirectory is created
and loaded with a set of values from 2 databases.  When a user makes a call
to do a delete or add of data, it should update not only the database
(obviously) but also the RAMDirectory index, such that the 2 are always in
sync with one another.  

It was my thought to have a static class which calls an update method on
itself every X number of minutes to recreate/reload the RAMDirectory index
from the database -- this in addition to the simultaneous updates to
RAMDirectory (removal of documents and adding of documents) and database to
keep the data in sync.  Then, I should be able to just use searching
capabilities that Lucene offers to get the data requested by the user,
rather than issuing tons of select queries to the databases.  

What is causing this error, and how do I fix?  What would be a good approach
for achieving the goal of database and index synchronization?

Thanks in advance,

Philip
-- 
View this message in context: http://www.nabble.com/Lock-error-attempting-update-of-RAMDirectory-index-tf2199620.html#a6089447
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 23:17:21 2006
Return-Path: <java-user-return-23087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50431 invoked from network); 31 Aug 2006 23:17:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 23:17:21 -0000
Received: (qmail 9641 invoked by uid 500); 31 Aug 2006 23:17:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9611 invoked by uid 500); 31 Aug 2006 23:17:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9599 invoked by uid 99); 31 Aug 2006 23:17:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:17:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.williams@agentlogic.com designates 66.92.157.243 as permitted sender)
Received: from [66.92.157.243] (HELO max.agentlogic.com) (66.92.157.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:17:13 -0700
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6CD53.8DCE345E"
Subject: highlight using a MemoryIndex
Date: Thu, 31 Aug 2006 19:12:25 -0400
Message-ID: <5EFE17D8B31D584388677AC5ADD1282439EE59@max.agentlogic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: highlight using a MemoryIndex
thread-index: AcbNUuu1RmFpDTa4S3qkKPxXBhZ6Sw==
From: "Daniel J. Williams" <daniel.williams@agentlogic.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6CD53.8DCE345E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I was able to get the following code to work using a RAMDirectory, but =
after reading the description of the MemoryIndex, I wanted to try to use =
it instead for speed reasons. I removed the RAMDir code, and replaced =
the references with the MemoryIndex, and all seems to go well till I =
start stepping through the hits. 1 hit is found, but the String returned =
from the "hits.doc(i).get(FIELD_NAME);" call is always null. Any ideas =
where I went wrong?

=20

Thank you,

Dan Williams

=20

    public String findAndWrap( String queryString, String value)

    {

//        System.out.println( "Methods output =3D [" + =
Methods.containsBoolean(queryString, value) + "]");

        String returnString =3D null;

=20

=20

        try {

            // store the string to search

            MemoryIndex index =3D new MemoryIndex();

            index.addField(FIELD_NAME, value, new StandardAnalyzer());

=20

            /* RAMDir method

            RAMDirectory ramDir =3D new RAMDirectory();

            IndexWriter writer =3D new IndexWriter(ramDir, new =
StandardAnalyzer(), true);

            addDoc(writer, value);

=20

            writer.optimize();

            writer.close();

            IndexReader reader =3D IndexReader.open(ramDir);

            */

=20

            // setup the queryString

            QueryParser parser=3Dnew QueryParser(FIELD_NAME, new =
StandardAnalyzer());

            Query unReWrittenQuery =3D parser.parse(queryString);

            System.out.println("UnRewritten Query: [" + =
unReWrittenQuery.toString(FIELD_NAME) + "]");

=20

            System.out.println("score =3D " + =
index.search(unReWrittenQuery));

=20

            IndexSearcher searcher =3D index.createSearcher();

/*          IndexSearcher searcher =3D new IndexSearcher(ramDir);*/

            System.out.println("Searcher =3D " + searcher.toString());

                                    IndexReader reader =3D =
searcher.getIndexReader();

=20

            Query query =3D unReWrittenQuery.rewrite(reader);

            System.out.println("Searching for: " + =
query.toString(FIELD_NAME));

            Hits hits =3D searcher.search(query);

=20

            System.out.println("Number of Hits =3D [" + hits.length() + =
"]");

=20

            if( hits.length() > 0)

            {

                Highlighter highlighter =3Dnew Highlighter(this,new =
QueryScorer(query));

                highlighter.setTextFragmenter(new NullFragmenter());

                for (int i =3D 0; i < hits.length(); i++)

                {

                    String text =3D hits.doc(i).get(FIELD_NAME);

                    int maxNumFragmentsRequired =3D 2;

                    String fragmentSeparator =3D "...";

                    StandardAnalyzer analyzer2 =3D new =
StandardAnalyzer();

                    TokenStream =
tokenStream=3Danalyzer2.tokenStream(FIELD_NAME,new StringReader(text));

=20

                    returnString =3D

                        highlighter.getBestFragments(

                                tokenStream,

                                text,

                                maxNumFragmentsRequired,

                                fragmentSeparator);

                }

            }

            else

            {

                System.out.println("No Matches found to highlight.");

                returnString =3D value;

            }

        } catch (ParseException e) {

            // TODO Auto-generated catch block

            e.printStackTrace();

        } catch (IOException e) {

            // TODO Auto-generated catch block

            e.printStackTrace();

        }

=20

        return returnString;

    }

=20

    public static void main(String[] args) {

=20

        StringBuffer contents =3D new StringBuffer();

=20

        contents.append("bob\n");

        contents.append("\n");

        contents.append("bobberson\n");

        contents.append("\n");

        contents.append("test\n");

        contents.append("\n");

        contents.append("\n");

        contents.append("\n");

        contents.append("\n");

        contents.append("dated this is also a test sentence\n");

        contents.append("\n");

        contents.append("Dated:7/24/2006\n");

        contents.append("\n");

        contents.append("#Dated: 7/24/2006\n");

        contents.append("\n");

        contents.append("asdf asdfas dfasdfDateda sdfasdfa sdfasd fasdf: =
7/24/2006\n");

=20

=20

        String queryString1 =3D "(+test +Dated*)";

=20

        String queryString2 =3D "sdfasd and !ted";

        String queryString3 =3D "test";

=20

        modularHtmlHighlighter hl =3D new modularHtmlHighlighter();

=20

        System.out.println("string 1");

        System.out.println( hl.findAndWrap(queryString1, =
contents.toString()) );

        System.out.println("string 2");

        System.out.println( hl.findAndWrap(queryString2, =
contents.toString()) );

        System.out.println("string 3");

        System.out.println( hl.findAndWrap(queryString3, =
contents.toString()) );

=20

    }

=20

=20


CONFIDENTIALITY NOTICE:  This e-mail (including attachments) may contain =
information that is proprietary or confidential. If you are not the =
intended recipient or a person responsible for its delivery to the =
intended recipient, do not copy or distribute it. Please permanently =
delete the e-mail and any attachments, and notify us immediately at =
(703) 387-2400 x23.


------_=_NextPart_001_01C6CD53.8DCE345E--

From java-user-return-23088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 23:18:12 2006
Return-Path: <java-user-return-23088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50519 invoked from network); 31 Aug 2006 23:18:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 23:18:08 -0000
Received: (qmail 11083 invoked by uid 500); 31 Aug 2006 23:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11059 invoked by uid 500); 31 Aug 2006 23:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 83368 invoked by uid 99); 31 Aug 2006 21:37:07 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Message-ID: <44F7566C.9090002@mindspring.com>
Date: Thu, 31 Aug 2006 14:36:44 -0700
From: Jason Pump <jpump@mindspring.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: word frequency list?
References: <44F5D548.4010401@mindspring.com> <97aa8b3e0608311427u47400eafsc4378435ba5f78ae@mail.gmail.com>
In-Reply-To: <97aa8b3e0608311427u47400eafsc4378435ba5f78ae@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 31 Aug 2006 21:36:20.0080 (UTC) FILETIME=[7F6B1700:01C6CD45]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Boris,

Jason

Boris Aleksandrovsky wrote:
> Jason,
>
> You can look here:
>
> http://www.cs.ualberta.ca/~lindek/downloads.htm
>
> for
>
> Word frequency counts from a 1.5B word corpus (TREC disks 1-5 and the 
> Reuters
> corpus <http://about.reuters.com/researchandstandards/corpus/>). The 
> words
> are normalized as follows: ALL CAP words are prepended with a_ and
> Capitalized words are prepended with c_ after downcasing. Digits are all
> replaced with 0.
>
> Cheers,
> Boris
>
> On 8/30/06, Jason Pump <jpump@mindspring.com> wrote:
>>
>> Is there a large list of words and their frequency in the english
>> language? Obviously it would differ by corpus but I would like to see
>> what's already available.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 31 23:24:09 2006
Return-Path: <java-user-return-23089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51838 invoked from network); 31 Aug 2006 23:24:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2006 23:24:09 -0000
Received: (qmail 21681 invoked by uid 500); 31 Aug 2006 23:24:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21651 invoked by uid 500); 31 Aug 2006 23:24:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21640 invoked by uid 99); 31 Aug 2006 23:24:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:24:03 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.164 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 16:24:02 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn2.hy.skanova.net (7.2.075)
        id 44F2F2F70012A27E for java-user@lucene.apache.org; Fri, 1 Sep 2006 01:23:41 +0200
Subject: Re: Lock error attempting update of RAMDirectory index
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6089447.post@talk.nabble.com>
References: <6089447.post@talk.nabble.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Fri, 01 Sep 2006 01:23:40 +0200
Message-Id: <1157066620.4727.3.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2006-08-31 at 15:24 -0700, Philip Brown wrote:
> 
> I'm getting the following error trying to instantiate an IndexModifier
> on a RAMDirectory index:
> 
> java.io.IOException: Lock obtain timed out:
> org.apache.lucene.store.RAMDirectory$1@a336b7 

You probably forgot to close an IndexWriter?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 01 02:34:57 2006
Return-Path: <java-user-return-23090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94258 invoked from network); 1 Sep 2006 02:34:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 02:34:57 -0000
Received: (qmail 98031 invoked by uid 500); 1 Sep 2006 02:34:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97577 invoked by uid 500); 1 Sep 2006 02:34:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97566 invoked by uid 99); 1 Sep 2006 02:34:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 19:34:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 19:34:49 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GIyrV-0008T2-9H
	for java-user@lucene.apache.org; Thu, 31 Aug 2006 19:34:29 -0700
Message-ID: <6091907.post@talk.nabble.com>
Date: Thu, 31 Aug 2006 19:34:29 -0700 (PDT)
From: Philip Brown <pmb@us.ibm.com>
To: java-user@lucene.apache.org
Subject: Re: Lock error attempting update of RAMDirectory index
In-Reply-To: <1157066620.4727.3.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
References: <6089447.post@talk.nabble.com> <1157066620.4727.3.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Well, I wish it were that easy...I open one IndexWriter to write the
documents to the index after it is created, and then call writer.optimize()
and writer.close().  Your suggestion is a good one in that, from what I've
read, the writer needs to be closed to release the lock file.  Apparently,
there is more to it than that.  Also, this doesn't happen consistently --
just occasionally.

Thanks.


karl wettin-3 wrote:
> 
> On Thu, 2006-08-31 at 15:24 -0700, Philip Brown wrote:
>> 
>> I'm getting the following error trying to instantiate an IndexModifier
>> on a RAMDirectory index:
>> 
>> java.io.IOException: Lock obtain timed out:
>> org.apache.lucene.store.RAMDirectory$1@a336b7 
> 
> You probably forgot to close an IndexWriter?
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lock-error-attempting-update-of-RAMDirectory-index-tf2199620.html#a6091907
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 01 05:38:16 2006
Return-Path: <java-user-return-23091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32805 invoked from network); 1 Sep 2006 05:38:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Sep 2006 05:38:15 -0000
Received: (qmail 31879 invoked by uid 500); 1 Sep 2006 05:38:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31844 invoked by uid 500); 1 Sep 2006 05:38:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31833 invoked by uid 99); 1 Sep 2006 05:38:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 22:38:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Aug 2006 22:38:08 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GJ1it-0004bg-Oy
	for java-user@lucene.apache.org; Thu, 31 Aug 2006 22:37:47 -0700
Message-ID: <6093138.post@talk.nabble.com>
Date: Thu, 31 Aug 2006 22:37:47 -0700 (PDT)
From: Philip Brown <pmb@us.ibm.com>
To: java-user@lucene.apache.org
Subject: Phrase search using quotes -- special Tokenizer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

After running some tests using the StandardAnalyzer, and getting 0 results
from the search, I believe I need a special Tokenizer/Analyzer.  Does
anybody have something that parses like the following:

- doesn't parse apart phrases (in quotes)
- doesn't parse/separate hyphentated or underscored words
other normal stuff like
- parses on whitespace
- removes periods in acronyms
- lowercases everything (even in quotes? -- maybe)

I basically have a set of terms, some of which are multi-worded phrases, but
none should ever be broken apart -- not when adding the documents, not when
querying the search results, etc.  I'm creating the field in the documents
as UN_TOKENIZED and using a StandardAnalyzer and basic Query object to get
the results.  Any suggestions and/or existing code that I could re-use to
fit this purpose?

Thanks.
-- 
View this message in context: http://www.nabble.com/Phrase-search-using-quotes----special-Tokenizer-tf2200760.html#a6093138
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


