From java-user-return-38363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 01 10:33:48 2009
Return-Path: <java-user-return-38363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73605 invoked from network); 1 Feb 2009 10:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2009 10:33:48 -0000
Received: (qmail 65181 invoked by uid 500); 1 Feb 2009 10:33:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65155 invoked by uid 500); 1 Feb 2009 10:33:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65144 invoked by uid 99); 1 Feb 2009 10:33:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 02:33:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 212.101.4.135 is neither permitted nor denied by domain of sylvaintersideral@gmail.com)
Received: from [212.101.4.135] (HELO mail01.solnet.ch) (212.101.4.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 10:33:30 +0000
X-Virus-Scanned: by SolNet-Check at mail01.solnet.ch
Received: from mail01.solnet.ch ([127.0.0.1])
	by localhost (mail01.solnet.ch [127.0.0.1]) (SolNet-Check, port 10024)
	with LMTP id k1oxIC7sVC0s for <java-user@lucene.apache.org>;
	Sun,  1 Feb 2009 10:33:09 +0000 (UTC)
Received: from [192.168.111.136] (212-41-98-107.adsl.solnet.ch [212.41.98.107])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail01.solnet.ch (Postfix) with ESMTPS id 1B6CA4B165
	for <java-user@lucene.apache.org>; Sun,  1 Feb 2009 10:33:09 +0000 (UTC)
Message-ID: <49857A64.9060009@gmail.com>
Date: Sun, 01 Feb 2009 11:33:08 +0100
From: Sylvain <sylvaintersideral@gmail.com>
User-Agent: Mozilla-Thunderbird 2.0.0.19 (X11/20090103)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Set a field as required in a MultiFieldQueryParser
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello everybody,

I have a search app in which the user can specify in which category the
documents he's searching are. So all my indexed documents have a
"category" field as well as other fields such as title, description,
etc. So when the user enters his query, only the documents that are in
the given category and which match a part of the query must be returned.

So I tried to use a MultiFieldQueryParser with SHOULD clauses on the
title, description, etc and a MUST clause on the category field. It
works pretty well but the problem is that _all_ the documents in the
searched category are returned, even if they don't have any similarity
with the search string (except for the category of course).

I think that's because of the MUST field which takes precedence on the
SHOULD fields or something like that ? I saw in the BooleanQuery the
method setMinimumNumberShouldMatch(). I think I should use this with my
MultiFieldQueryParser to set a minimum of 1 or 2 fields, but this method
only exists for BooleanQuery instances so I can't use it... I thought
about using directly a BooleanQuery but I want to use the FrenchAnalyzer
for the request.

Any idea on how to achieve this ?

Thanks for your help !

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 01 10:43:40 2009
Return-Path: <java-user-return-38364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75359 invoked from network); 1 Feb 2009 10:43:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2009 10:43:40 -0000
Received: (qmail 74134 invoked by uid 500); 1 Feb 2009 10:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73738 invoked by uid 500); 1 Feb 2009 10:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73727 invoked by uid 99); 1 Feb 2009 10:43:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 02:43:31 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 10:43:21 +0000
Received: by yx-out-2324.google.com with SMTP id 3so349320yxj.5
        for <java-user@lucene.apache.org>; Sun, 01 Feb 2009 02:42:59 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.201.17 with SMTP id y17mr1095637ybf.116.1233484979554; 
	Sun, 01 Feb 2009 02:42:59 -0800 (PST)
In-Reply-To: <359a92830901280602u26fa2974x17c1337a29cc2609@mail.gmail.com>
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com>
	 <7e536b1f0711050449u15b6af6j8456e9c5e89f4364@mail.gmail.com>
	 <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org>
	 <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com>
	 <14170395.post@talk.nabble.com>
	 <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com>
	 <21702721.post@talk.nabble.com> <21702742.post@talk.nabble.com>
	 <7e536b1f0901280343q4370a9c3x5c8bb86f9eb65326@mail.gmail.com>
	 <359a92830901280602u26fa2974x17c1337a29cc2609@mail.gmail.com>
Date: Sun, 1 Feb 2009 11:42:59 +0100
Message-ID: <7e536b1f0902010242u203d571dp80f33089d80f827f@mail.gmail.com>
Subject: Re: Group by in Lucene ?
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd487720aca270461d91a4d
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd487720aca270461d91a4d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Yep, you are correct, this is a lousy implementation which I knew when I
wrote it.

I'm not interested in the entire document just the grouping term and the
docId which it is connected to.

So how do I get hold of the TermDocs for the grouping field ?

I mean I probably first need to perform the query: searcher.search(...)
which would give me set of doc ids. Then I need to group them all by for
instance: "ip-address", save each ip-address in another set and in the end
calculate the size of that set.

i.e the equiv of: select count(distinct(ipAddress)) from AccessLog where
date='2009-01-25' (optionally group by ipAddress ?)


//Marcus





On Wed, Jan 28, 2009 at 3:02 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> At a quick glance, this line is really suspicious:
>
> Document document = this.indexReader.document(doc)
>
> From the Javadoc for HitCollector.collect:
>
> Note: This is called in an inner search loop. For good search performance,
> implementations of this method should not call
>
> Searcher.doc(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Searcher.html#doc%28int%29>or
>
> IndexReader.document(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/index/IndexReader.html#document%28int%29>on
> every document number encountered. Doing so can slow searches by an
> order
> of magnitude or more.
>
> You're loading the document each time through the loop. I think you'd get
> much better
> performance by making sure that your groupField is indexed, then use
> TermDocs (TermEnum?)
> to get the value of the field.
>
> Best
> Erick
>
>
>
> On Wed, Jan 28, 2009 at 6:43 AM, Marcus Herou <marcus.herou@tailsweep.com
> >wrote:
>
> > Hi.
> >
> > This is way too slow I think since what you are explaining is something I
> > already tested. However I might be using the HitCollector badly.
> >
> > Please prove me wrong. Supplying some code which I tested this with.
> > It stores a hash of the value of the term in a TIntHashSet and just
> > calculates the size of that set.
> > This one takes approx 3 sec on about 0.5M rows = way too slow.
> >
> >
> > main test class:
> > public class GroupingTest
> > {
> >    protected static final Log log =
> > LogFactory.getLog(GroupingTest.class.getName());
> >    static DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
> >    public static void main(String[] args)
> >    {
> >        Utils.initLogger();
> >        String[] fields =
> > {"uid","ip","date","siteId","visits","countryCode"};
> >        try
> >        {
> >            IndexFactory fact = new IndexFactory();
> >            String d = "/tmp/csvtest";
> >            fact.initDir(d);
> >            IndexReader reader = fact.getReader(d);
> >            IndexSearcher searcher = fact.getSearcher(d, reader);
> >            QueryParser parser = new MultiFieldQueryParser(fields,
> > fact.getAnalyzer());
> >            Query q = parser.parse("date:20090125");
> >
> >
> >            GroupingHitCollector coll = new GroupingHitCollector();
> >            coll.setDistinct(true);
> >            coll.setGroupField("uid");
> >            coll.setIndexReader(reader);
> >            long start = System.currentTimeMillis();
> >            searcher.search(q, coll);
> >            long stop = System.currentTimeMillis();
> >            System.out.println("Time: " + (stop-start) + ", distinct
> > count(uid):"+coll.getDistinctCount() + ", count(uid): "+coll.getCount());
> >        }
> >        catch (Exception e)
> >        {
> >            log.error(e.toString(), e);
> >        }
> >    }
> > }
> >
> >
> > public class GroupingHitCollector  extends HitCollector
> > {
> >    protected IndexReader indexReader;
> >    protected String groupField;
> >    protected boolean distinct;
> >    //protected TLongHashSet set;
> >    protected TIntHashSet set;
> >    protected int distinctSize;
> >
> >    int count = 0;
> >    int sum = 0;
> >
> >    public GroupingHitCollector()
> >    {
> >        set = new TIntHashSet();
> >    }
> >
> >    public String getGroupField()
> >    {
> >        return groupField;
> >    }
> >
> >    public void setGroupField(String groupField)
> >    {
> >        this.groupField = groupField;
> >    }
> >
> >    public IndexReader getIndexReader()
> >    {
> >        return indexReader;
> >    }
> >
> >    public void setIndexReader(IndexReader indexReader)
> >    {
> >        this.indexReader = indexReader;
> >    }
> >
> >    public boolean isDistinct()
> >    {
> >        return distinct;
> >    }
> >
> >    public void setDistinct(boolean distinct)
> >    {
> >        this.distinct = distinct;
> >    }
> >
> >    public void collect(int doc, float score)
> >    {
> >        if(distinct)
> >        {
> >            try
> >            {
> >                Document document = this.indexReader.document(doc);
> >                if(document != null)
> >                {
> >                    String s = document.get(groupField);
> >                    if(s != null)
> >                    {
> >                        set.add(s.hashCode());
> >                        //set.add(Crc64.generate(s));
> >                    }
> >                }
> >            }
> >            catch (IOException e)
> >            {
> >                e.printStackTrace();
> >            }
> >        }
> >        count++;
> >        sum += doc;  // use it to avoid any possibility of being optimized
> > away
> >    }
> >
> >    public int getCount() { return count; }
> >    public int getSum() { return sum; }
> >
> >    public int getDistinctCount()
> >    {
> >        distinctSize = set.size();
> >        return distinctSize;
> >     }
> > }
> >
> >
> > On Wed, Jan 28, 2009 at 10:51 AM, ninaS <nina256@gmx.de> wrote:
> >
> > >
> > > By the way: if you only need to count documents (count groups)
> > HitCollector
> > > is a good choice. If you only count you don't need to sort anything.
> > >
> > >
> > > ninaS wrote:
> > > >
> > > > Hello,
> > > >
> > > > yes I tried HitCollector but I am not satisfied with it because you
> can
> > > > not use sorting with HitCollector unless you implement a way to use
> > > > TopFieldTocCollector. I did not manage to do that in a performant
> way.
> > > >
> > > > It is easier to first do a normal search und "group by" afterwards:
> > > >
> > > > Iterate through the result documents and take one of each group. Each
> > > > document has a groupingKey. I remember which groupingKey is already
> > used
> > > > and don't take another document of this group into the result list.
> > > >
> > > > Regards,
> > > > Nina
> > > >
> > >
> > > --
> > > View this message in context:
> > > http://www.nabble.com/Group-by-in-Lucene---tp13581760p21702742.html
> > > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Marcus Herou CTO and co-founder Tailsweep AB
> > +46702561312
> > marcus.herou@tailsweep.com
> > http://www.tailsweep.com/
> > http://blogg.tailsweep.com/
> >
>



-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

--000e0cd487720aca270461d91a4d--

From java-user-return-38365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 01 15:01:22 2009
Return-Path: <java-user-return-38365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75137 invoked from network); 1 Feb 2009 15:01:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2009 15:01:22 -0000
Received: (qmail 15145 invoked by uid 500); 1 Feb 2009 15:01:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15124 invoked by uid 500); 1 Feb 2009 15:01:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15113 invoked by uid 99); 1 Feb 2009 15:01:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 07:01:15 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 15:01:04 +0000
Received: by yx-out-2324.google.com with SMTP id 3so361064yxj.5
        for <java-user@lucene.apache.org>; Sun, 01 Feb 2009 07:00:43 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.96.10 with SMTP id t10mr1323889ybb.119.1233500442239; Sun, 
	01 Feb 2009 07:00:42 -0800 (PST)
In-Reply-To: <498081A9.50105@gmail.com>
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com>
	 <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org>
	 <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com>
	 <14170395.post@talk.nabble.com>
	 <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com>
	 <21702721.post@talk.nabble.com> <21702742.post@talk.nabble.com>
	 <7e536b1f0901280343q4370a9c3x5c8bb86f9eb65326@mail.gmail.com>
	 <359a92830901280602u26fa2974x17c1337a29cc2609@mail.gmail.com>
	 <498081A9.50105@gmail.com>
Date: Sun, 1 Feb 2009 16:00:42 +0100
Message-ID: <7e536b1f0902010700p3ea6f51cnd0cdd7dd408e6f45@mail.gmail.com>
Subject: Re: Group by in Lucene ?
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6ae96b0a48d0461dcb3ba
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6ae96b0a48d0461dcb3ba
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Yep. Probably an external sort should be used when flushing to disk. I have
written such code so that is probably a no brainer, the problem is to get it
speedy :)
<http://dev.tailsweep.com/projects/utils/apidocs/org/tailsweep/utils/sort/TupleSorter.html>
http://dev.tailsweep.com/projects/utils/apidocs/com/tailsweep/utils/sort/TupleSorter.html

Another way could be to use HDFS and MapFiles/SequenceFiles Not speedy at
all but scalable.

Thinking of writing my own Inverted Index, specialized for these kind of
operations. Any pointers in where to start look for material for that ?

/Marcus























On Wed, Jan 28, 2009 at 5:02 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Group-by in Lucene/Solr has not been solved in a great general way yet to
> my knowledge.
>
> Ideally, we would want a solution that does not need to fit into memory.
> However, you need the value of the field for each document. to do the
> grouping As you are finding, this is not cheap to get. Currently, the
> efficient way to get it is to use a FieldCache. This, however, requires that
> every distinct value can fit into memory.
>
> Once you have efficient access to the values, you need to be able to
> efficiently group the results, again not bounded by memory (which we already
> are with the FieldCache).
>
> There are quite a few ways to do this. The simplest is to group until you
> have used all the memory you want, then for everything left, anything that
> doesnt match a group, write it to a file, if it does, increment the group
> count. Use the overflow file as the input in the next run, repeat until
> there is no overflow. You can improve on that by partitioning the overflow
> file.
>
> And then there are a dozen other methods.
>
> Solr has a patch in JIRA that uses a sorting method. First the results are
> sorted on the group-by field, then scanned through for grouping - all field
> values that are the same will be next to each other. Finally, if you really
> wanted to sort on a different field, another sort is applied. Thats not
> ideal IMO, but its a start.
>
> - Mark
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

--000e0cd6ae96b0a48d0461dcb3ba--

From java-user-return-38366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 01 17:07:20 2009
Return-Path: <java-user-return-38366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24888 invoked from network); 1 Feb 2009 17:07:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2009 17:07:20 -0000
Received: (qmail 90886 invoked by uid 500); 1 Feb 2009 17:07:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90866 invoked by uid 500); 1 Feb 2009 17:07:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90834 invoked by uid 99); 1 Feb 2009 17:07:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 09:07:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of abdulazizrehan@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 17:07:04 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1150591rvb.5
        for <java-user@lucene.apache.org>; Sun, 01 Feb 2009 09:06:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=UjHkLjWgC4EwHGOQP404CDjC4XiHcnmKZq4m25HYUAQ=;
        b=Xu+Ml4cExgnlpKtUjIVULWczABMQ7TyAwrUSGXbiUg7K2W6Z8XxyY0BcBsj8gchymy
         6xiGzpC3o1jFqYnSm34qUDxlvaG+OzssWSfohyHjqUWTPidKkkRwMuEE3SOIzq2DLoOD
         jjUYClnnGqoStR8GAOyxxMj72rCSN17Szknm0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=joCvWiCUBp7ZVXJQ76DMY6jYkw1iY9YNLyIJIWp6eBR62xs4Nu/N9DQ5jHxiRBeZLl
         uhTpiqYuy/+pdfQ4ED+Qh+XZreb4IMON4+09xJVXCTNxLIrFQ4c+bmeWmrT1wdzjyVb+
         LV20eiQN8s6pdg/QVVUuUomUB8j854vvUFkEk=
MIME-Version: 1.0
Received: by 10.142.223.4 with SMTP id v4mr1442122wfg.11.1233508002858; Sun, 
	01 Feb 2009 09:06:42 -0800 (PST)
Date: Sun, 1 Feb 2009 23:06:42 +0600
Message-ID: <bd7f960f0902010906k1f0a6cb7j396c1a837e5acc66@mail.gmail.com>
Subject: tfIdf weights
From: Rehan Abdulaziz <abdulazizrehan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2553456857f0461de769b
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2553456857f0461de769b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,
Is it possible to retrieve the tfidf weights (or relative weight calculated
from any formula) instead of simple term frequencies through
getTermFreqVector()? I am more interested in knowing the relative weight of
each term in each field rather than just the frequency of terms.

Thank you very much

-- 
Rehan Abdul Aziz
Software Engineer
Scrybe Inc. (www.iscrybe.com)
Cell: +92-344-5514583

--000e0cd2553456857f0461de769b--

From java-user-return-38367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 01 17:09:54 2009
Return-Path: <java-user-return-38367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25712 invoked from network); 1 Feb 2009 17:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2009 17:09:54 -0000
Received: (qmail 94572 invoked by uid 500); 1 Feb 2009 17:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94548 invoked by uid 500); 1 Feb 2009 17:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94537 invoked by uid 99); 1 Feb 2009 17:09:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 09:09:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 17:09:41 +0000
Received: by yw-out-2324.google.com with SMTP id 3so366652ywj.5
        for <java-user@lucene.apache.org>; Sun, 01 Feb 2009 09:09:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=gTvFWxAkBHxlGbE7WXVlfb6st3CSsp9XWdTxAnv3c+w=;
        b=x99HXwXsTdTQKPyzOeLGW7VDx1/lzEtqMMH2s8m4H526txq0bxTiIKY/efnGAirrrC
         EMbMFDPmSMMZbHvbThOFK27m4Ldx0Vp1xqVsIMQzMHA1PIGOBomE7kG7fF6wFZKNCvSf
         osWjstDagQrbotYpnH2KDo9yEXsrYl04HXuVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=T0dt2zwT3M7cTfk00gzPF2GCXrnf/ri4/JxsD8kvvS6ohTIDOMhbAuoCvKPT7ZgYjD
         nTexqjUqDfSZcCiEBSBXBG1dh9CbYY2BPBoCNYytX6lSTdQYa7akRU063Wf31/s1axcC
         /p50RedC9RnE+96KqKOp6ul1PIMoqmcesd0BA=
MIME-Version: 1.0
Received: by 10.90.63.6 with SMTP id l6mr2174890aga.46.1233508160681; Sun, 01 
	Feb 2009 09:09:20 -0800 (PST)
In-Reply-To: <49857A64.9060009@gmail.com>
References: <49857A64.9060009@gmail.com>
Date: Sun, 1 Feb 2009 12:09:20 -0500
Message-ID: <359a92830902010909w4e8bdb87y126d5ab3b825afbe@mail.gmail.com>
Subject: Re: Set a field as required in a MultiFieldQueryParser
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163616451bbeb8100461de7fcd
X-Virus-Checked: Checked by ClamAV on apache.org

--00163616451bbeb8100461de7fcd
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I think query.toString() is your friend here. I'm having a hard
time figuring out, from your description, what you actually want,
so maybe some examples would help too.

If your users enter terms for each field, then it seems to me that
you'd want MUST between clauses (in which case MultiFieldQueryParser
seems unnecesary). That is, if your form is somethinng like
title: <user enters term>
description: <user enters another term>
category: <user enters category>

If you have them enter just a single term, that is your form looks
something like
word:<user enters term to find in title OR description OR etc>
category: <user enters category>

 and want to form a query like
(title:term OR description:term OR etc:term) AND category:cat, it's not
clear from the docs how you would create this in a *single* MFQP. But
you could easily use MFQP to form the (a OR b OR c) clause, add that
to a BoleanQuery with MUST, and then create your simple query on
category and add *that* as a second MUST clause in your BooleanQuery
and use that for your search.

HTH
Erick


On Sun, Feb 1, 2009 at 5:33 AM, Sylvain <sylvaintersideral@gmail.com> wrote:

> Hello everybody,
>
> I have a search app in which the user can specify in which category the
> documents he's searching are. So all my indexed documents have a
> "category" field as well as other fields such as title, description,
> etc. So when the user enters his query, only the documents that are in
> the given category and which match a part of the query must be returned.
>
> So I tried to use a MultiFieldQueryParser with SHOULD clauses on the
> title, description, etc and a MUST clause on the category field. It
> works pretty well but the problem is that _all_ the documents in the
> searched category are returned, even if they don't have any similarity
> with the search string (except for the category of course).
>
> I think that's because of the MUST field which takes precedence on the
> SHOULD fields or something like that ? I saw in the BooleanQuery the
> method setMinimumNumberShouldMatch(). I think I should use this with my
> MultiFieldQueryParser to set a minimum of 1 or 2 fields, but this method
> only exists for BooleanQuery instances so I can't use it... I thought
> about using directly a BooleanQuery but I want to use the FrenchAnalyzer
> for the request.
>
> Any idea on how to achieve this ?
>
> Thanks for your help !
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163616451bbeb8100461de7fcd--

From java-user-return-38368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 01 23:27:14 2009
Return-Path: <java-user-return-38368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53904 invoked from network); 1 Feb 2009 23:27:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2009 23:27:14 -0000
Received: (qmail 68538 invoked by uid 500); 1 Feb 2009 23:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68500 invoked by uid 500); 1 Feb 2009 23:27:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68489 invoked by uid 99); 1 Feb 2009 23:27:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 15:27:06 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 23:26:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LTli0-0002wo-KD
	for java-user@lucene.apache.org; Sun, 01 Feb 2009 15:26:36 -0800
Message-ID: <21781870.post@talk.nabble.com>
Date: Sun, 1 Feb 2009 15:26:36 -0800 (PST)
From: ilwes <onetime@mailinator.com>
To: java-user@lucene.apache.org
Subject: Re: Best Practice for Lucene Search
In-Reply-To: <21748839.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: onetime@mailinator.com
References: <21748839.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I like the point about doing things the easiest way possible until it starts
to become a problem. 
Thank you very much for your answers and for the insight how you handle this
issue. You helped me a lot.

Ilwes
-- 
View this message in context: http://www.nabble.com/Best-Practice-for-Lucene-Search-tp21748839p21781870.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 05:21:38 2009
Return-Path: <java-user-return-38369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52467 invoked from network); 2 Feb 2009 05:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 05:21:37 -0000
Received: (qmail 81397 invoked by uid 500); 2 Feb 2009 05:21:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81366 invoked by uid 500); 2 Feb 2009 05:21:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81355 invoked by uid 99); 2 Feb 2009 05:21:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Feb 2009 21:21:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dipshrestha@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 05:21:20 +0000
Received: by wa-out-1112.google.com with SMTP id m33so694307wag.5
        for <java-user@lucene.apache.org>; Sun, 01 Feb 2009 21:20:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=IZGQ/5uHLbb6q1l9EU3RdrCtfRXr5CEoBpKxmSUBs5c=;
        b=UP1wPpNQ1F6Pp3mY/dqOdjjqMWPe8IijRypfxB831pFsPqhKV8QhELeWElBLU9xx6K
         FnboEFL+JU+inkqDbeSF2fs5DjMbmKEjjeWersgWWER1JjcoIdymC6ZwGnOvrnR4/qS6
         vC4x61uaxIuqZHtZ4uqyxDW7ILHCKTTgkLE6w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=JI6KkpFAUTKiKMZztprL5+NSpNAbcTCsdL3MEOJ4JjWZx7cPfufNjR+Jq5inMg8iZq
         bZMeCdzZRxaG9u9REVp3wIa+wjqECh4lzhW5jWBqOQMR0UF9tBohS6Px5A1MYrp9O8El
         AtE6kXVJW88MmSQDNdJyyIE/zcjz9nkET2KP0=
MIME-Version: 1.0
Received: by 10.114.73.14 with SMTP id v14mr2666299waa.104.1233552059464; Sun, 
	01 Feb 2009 21:20:59 -0800 (PST)
In-Reply-To: <bd7f960f0902010906k1f0a6cb7j396c1a837e5acc66@mail.gmail.com>
References: <bd7f960f0902010906k1f0a6cb7j396c1a837e5acc66@mail.gmail.com>
Date: Mon, 2 Feb 2009 14:20:59 +0900
Message-ID: <aec6319e0902012120m42e86b96i63d5ecae22be425d@mail.gmail.com>
Subject: Re: tfIdf weights
From: dipesh <dipshrestha@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163645731e50fb1a0461e8b846
X-Virus-Checked: Checked by ClamAV on apache.org

--00163645731e50fb1a0461e8b846
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

hi,
i used lucene-2.4.0 to get tf-idf. i'm not sure if the newer versions have
direct methods to get tf-idfs as well.
this is lengthy but might help.

   // Get Term Enum that contains all the terms in the index using
FilterIndexReader
    TermEnum e = freader.terms();

  // find total number of docs
  int noOfDocs = freader.numDocs();

// Get TermDocs Enum
  TermDocs td = freader.termDocs();

    // seeking through all the terms
    while(e.next()){

      // get the term
      Term t = e.term();
      // only search the contents field
      Term term = new Term("contents",t.text());
      // Move to the <document, frequency>  pairs for term from the TermDocs
Enum containing the term t
      td.seek(term);


      // loop through each document containing the term.
      while(td.next())  {
        double weight = td.freq()*Math.log(noOfDocs/e.docFreq());
      // do something with the weight
      //......

     }
}

regards,
Dipesh




On Mon, Feb 2, 2009 at 2:06 AM, Rehan Abdulaziz <abdulazizrehan@gmail.com>wrote:

> Hi,
> Is it possible to retrieve the tfidf weights (or relative weight calculated
> from any formula) instead of simple term frequencies through
> getTermFreqVector()? I am more interested in knowing the relative weight of
> each term in each field rather than just the frequency of terms.
>
> Thank you very much
>
> --
> Rehan Abdul Aziz
> Software Engineer
> Scrybe Inc. (www.iscrybe.com)
> Cell: +92-344-5514583
>



-- 
----------------------------------------
"Help Ever Hurt Never"- Baba

--00163645731e50fb1a0461e8b846--

From java-user-return-38370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 09:19:06 2009
Return-Path: <java-user-return-38370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57052 invoked from network); 2 Feb 2009 09:19:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 09:19:05 -0000
Received: (qmail 54819 invoked by uid 500); 2 Feb 2009 09:18:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54797 invoked by uid 500); 2 Feb 2009 09:18:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54786 invoked by uid 99); 2 Feb 2009 09:18:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 01:18:58 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 09:18:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LTuwo-00061u-LR
	for java-user@lucene.apache.org; Mon, 02 Feb 2009 01:18:30 -0800
Message-ID: <21786431.post@talk.nabble.com>
Date: Mon, 2 Feb 2009 01:18:30 -0800 (PST)
From: ninaS <nina256@gmx.de>
To: java-user@lucene.apache.org
Subject: Re: NullPointerException in FieldDocSortedHitQueue.lessThan with
  custom SortComparator
In-Reply-To: <359a92830901280555i4e6da184n6ead80d4a45cb79c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nina256@gmx.de
References: <21702845.post@talk.nabble.com> <359a92830901280555i4e6da184n6ead80d4a45cb79c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


That's not true: have a look at the "else"-block.

The problem is that lucene's FieldDocSortedHitQueue does only test for null
values if uses the type FieldDoc.STRING. With FieldDoc.CUSTOM lucene assumes
ci to be never null:

FieldDocSortedHitQueue 163-166:

        case SortField.CUSTOM:{
					c = docA.fields[i].compareTo (docB.fields[i]);
					break;
        }

If I have null values in the field that I want to sort by: I can not use a
custom SortComparator.
-- 
View this message in context: http://www.nabble.com/NullPointerException-in-FieldDocSortedHitQueue.lessThan-with-custom-SortComparator-tp21702845p21786431.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 11:49:14 2009
Return-Path: <java-user-return-38371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16214 invoked from network); 2 Feb 2009 11:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 11:49:14 -0000
Received: (qmail 22424 invoked by uid 500); 2 Feb 2009 11:49:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22383 invoked by uid 500); 2 Feb 2009 11:49:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 199 invoked by uid 99); 2 Feb 2009 07:58:46 -0000
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Sourabh-931.Mittal@morganstanley.com designates 199.89.103.68 as permitted sender)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9850B.FE5FB460"
Content-Transfer-Encoding: 7bit
Subject: Performance issue
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.3168
Date: Mon, 2 Feb 2009 13:28:11 +0530
Message-ID: <C2B2FFAA016E5241864A7A308D4A49201A0FA8@tiwexmb06.msad.ms.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Importance: normal
Thread-Topic: Performance issue
Priority: normal
Thread-Index: AcmFC/5wDwmnUqZtSrKdy2wV7wCPCA==
From: "Mittal, Sourabh \(IDEAS\)" <Sourabh-931.Mittal@morganstanley.com>
To: <java-user@lucene.apache.org>
Cc: <java-user-subscribe@lucene.apache.org>
X-OriginalArrivalTime: 02 Feb 2009 07:58:11.0701 (UTC) FILETIME=[FE756250:01C9850B]
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.35/RELEASE, bases: 02022009 #1564617, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9850B.FE5FB460
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi All,=20

We face serious performance issues when users do 2 letter search e.g ho,
jo, pa ma, um ar, ma fi etc. time taken between 10 - 15 secs.=20
Below is our implementation details:
=20
1. Search performs on 7 fields.
2. PrefixQuery implementation on all fields
3. AND search.=20
4. Our indexer size is 300 MB.=20
5. We show only 100 top documents only on the basis of score.=20
6. We user StandardAnalyzer & StandardTokenizer for indexing &
searching.=20
7. Lucene 2.4
8. JDK1 .6

Please suggest me how can we improve the performance.=20

Regards,
Sourabh Mittal
Morgan Stanley | IDEAS Practice Areas
Manikchand Ikon | South Wing 18 | Dhole Patil Road
Pune, 411001
Phone: +91 20 2620-7053
Sourabh-931.Mittal@morganstanley.com

=20

-------------------------------------------------------------------------=
-
NOTICE: If received in error, please destroy and notify sender. Sender =
does not intend to waive confidentiality or privilege. Use of this email =
is prohibited when received in error.

------_=_NextPart_001_01C9850B.FE5FB460--

From java-user-return-38372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 11:54:39 2009
Return-Path: <java-user-return-38372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17748 invoked from network); 2 Feb 2009 11:54:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 11:54:39 -0000
Received: (qmail 27827 invoked by uid 500); 2 Feb 2009 11:54:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27799 invoked by uid 500); 2 Feb 2009 11:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27788 invoked by uid 99); 2 Feb 2009 11:54:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 03:54:31 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 11:54:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LTxNK-0003hV-8n
	for java-user@lucene.apache.org; Mon, 02 Feb 2009 03:54:02 -0800
Message-ID: <21788361.post@talk.nabble.com>
Date: Mon, 2 Feb 2009 03:54:02 -0800 (PST)
From: mittals <sourabh-931.mittal@morganstanley.com>
To: java-user@lucene.apache.org
Subject: How to extract Document object after the search?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sourabh-931.mittal@morganstanley.com
X-Virus-Checked: Checked by ClamAV on apache.org


As per Lucene documentation - 
"For good search performance, implementations of this method should not call
Searcher.doc(int) or IndexReader.document(int) on every document number
encountered. Doing so can slow searches by an order of magnitude or more."

My question is - what's the other way to get the Document object to avoid
performance bottleneck?

-- 
View this message in context: http://www.nabble.com/How-to-extract-Document-object-after-the-search--tp21788361p21788361.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 12:19:10 2009
Return-Path: <java-user-return-38373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24783 invoked from network); 2 Feb 2009 12:19:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 12:19:10 -0000
Received: (qmail 56975 invoked by uid 500); 2 Feb 2009 12:19:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56953 invoked by uid 500); 2 Feb 2009 12:19:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56942 invoked by uid 99); 2 Feb 2009 12:19:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 04:19:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.15 as permitted sender)
Received: from [209.85.218.15] (HELO mail-bw0-f15.google.com) (209.85.218.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 12:18:55 +0000
Received: by bwz8 with SMTP id 8so1262814bwz.5
        for <java-user@lucene.apache.org>; Mon, 02 Feb 2009 04:18:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=bEEh13YOrPBV7EB201/8slwuAAee1LYdlaq9BDRlPYM=;
        b=idAh1vBQm/FFWuNCWGWu7LC1VxBQVU8SvBcPItB3dNuRcEi0GQFC3FCxsQGIA400uV
         y5l5ylcalzh5lBSkCQobVusKMXxN3comso/W8B+8862Cr/ZmDg0mhIg+TMCiv0txDLrn
         jcy2wUoYUzz2ZaZsgoc9Nnkf33wB4jv9ZVZWI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=XZgRXRmuzpKr9u2Xogr0iYKJNqhHtBstPATbHtqlAo4VvPOp7CGL7vpQkuGAu+WFCv
         y0zzHQFdw6lDX7jpBVnWF8W8jPieiBtocvT/VnYYdHCUG3vZWKJUTTvQFZTGVWP1ELWT
         UmVevwgNLDVbF58nHQFEMg8KPiEefTHsP0hfY=
MIME-Version: 1.0
Received: by 10.181.217.2 with SMTP id u2mr1654102bkq.153.1233576894002; Mon, 
	02 Feb 2009 04:14:54 -0800 (PST)
In-Reply-To: <21788361.post@talk.nabble.com>
References: <21788361.post@talk.nabble.com>
Date: Mon, 2 Feb 2009 12:14:53 +0000
Message-ID: <8c4e68610902020414u7d9cbc5dw1609d1b5b84f7aee@mail.gmail.com>
Subject: Re: How to extract Document object after the search?
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


That quote is from the javadoc for
HitCollector/TopDocCollector.collect().  You missed out the bit saying
"This is called in an inner search loop".

If, as your subject implies, you want to get at the Document object
AFTER the search, those methods are fine.  Just don't use them for any
more documents than you need, and not inside the collect() method.

If you really need to get at document data inside the inner search
loop I think you'll have to accept the performance hit or look into
advanced stuff like payloads.


--
Ian.



On Mon, Feb 2, 2009 at 11:54 AM, mittals
<sourabh-931.mittal@morganstanley.com> wrote:
>
> As per Lucene documentation -
> "For good search performance, implementations of this method should not call
> Searcher.doc(int) or IndexReader.document(int) on every document number
> encountered. Doing so can slow searches by an order of magnitude or more."
>
> My question is - what's the other way to get the Document object to avoid
> performance bottleneck?
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 12:38:16 2009
Return-Path: <java-user-return-38374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37405 invoked from network); 2 Feb 2009 12:38:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 12:38:16 -0000
Received: (qmail 79262 invoked by uid 500); 2 Feb 2009 12:38:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79227 invoked by uid 500); 2 Feb 2009 12:38:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79216 invoked by uid 99); 2 Feb 2009 12:38:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 04:38:09 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.15] (HELO smtp128.mail.mud.yahoo.com) (209.191.85.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Feb 2009 12:38:00 +0000
Received: (qmail 27996 invoked from network); 2 Feb 2009 12:37:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=H2LXv1ZxCYb94cjMNFisIL5G/D33qyLDVlzfPsw5NpWvBXCtN3K0+3H+NYuEAHIdtSAnZzisG6/gg9/fFIL/+XKn7zIgamUF9T7tkz6i9D8eWW7/qah0xh4QAKM68LjhDb44G1roAci3g4yJGXecIm3a13biX0Zre++yj6IvVO8=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp128.mail.mud.yahoo.com with SMTP; 2 Feb 2009 12:37:36 -0000
X-YMail-OSG: PD9VWskVM1nHlajHMpFFNy_QpwznFQr_NrLHfoOVk85P6ZALJ3e2WWC0rcc3dmleBLNn3vmgrfTRKSid7REycZ7VmUwYVyL6CtzZhSJT.ThU3_Thv2tmxmvJfjT.xj4cuMlU5GtcofLuOTWuvnpdJdCKixw6fIXc_k4HI7s4IgmRmk2hseiYGd48JPtNPczDzhAGVg--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <027101c98533$07337950$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <21788361.post@talk.nabble.com>
Subject: Re: How to extract Document object after the search?
Date: Mon, 2 Feb 2009 18:07:33 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Searcher.doc(int) or IndexReader.document(int) will give you the document 
object and to my knowledge this is the only way available, however it is not 
advisable to query all documents (MatchAllDocsQuery) and load all document 
objects. While using Searcher.doc(int) or IndexReader.document(int), load 
only the required fields to display the results Searcher.doc(int, 
FieldSelector).

Regards
Ganesh


----- Original Message ----- 
From: "mittals" <sourabh-931.mittal@morganstanley.com>
To: <java-user@lucene.apache.org>
Sent: Monday, February 02, 2009 5:24 PM
Subject: How to extract Document object after the search?


>
> As per Lucene documentation -
> "For good search performance, implementations of this method should not 
> call
> Searcher.doc(int) or IndexReader.document(int) on every document number
> encountered. Doing so can slow searches by an order of magnitude or more."
>
> My question is - what's the other way to get the Document object to avoid
> performance bottleneck?
>
> -- 
> View this message in context: 
> http://www.nabble.com/How-to-extract-Document-object-after-the-search--tp21788361p21788361.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 12:47:10 2009
Return-Path: <java-user-return-38375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40455 invoked from network); 2 Feb 2009 12:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 12:47:10 -0000
Received: (qmail 95042 invoked by uid 500); 2 Feb 2009 12:47:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95022 invoked by uid 500); 2 Feb 2009 12:47:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95002 invoked by uid 99); 2 Feb 2009 12:47:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 04:47:03 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [80.190.230.99] (HELO mail.troja.net) (80.190.230.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 12:46:54 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 3C9804F490
	for <java-user@lucene.apache.org>; Mon,  2 Feb 2009 13:46:30 +0100 (CET)
Received: from mail.troja.net ([127.0.0.1])
 by localhost (cyca.troja.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 18668-05 for <java-user@lucene.apache.org>;
 Mon,  2 Feb 2009 13:46:28 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTP id 15CFE4F404
	for <java-user@lucene.apache.org>; Mon,  2 Feb 2009 13:46:28 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <21788361.post@talk.nabble.com>
Subject: RE: How to extract Document object after the search?
Date: Mon, 2 Feb 2009 13:46:30 +0100
Message-ID: <A4925A4B7EFE422283C16F6873E18E5B@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
In-Reply-To: <21788361.post@talk.nabble.com>
Thread-Index: AcmFLQa/Xof6Pdu4To6lEYhefK+WyAABng0Q
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

you should generally not download all fields for all documents in the
HitCollector Loop, if you really need it (because you want to do some
analysis on the whole result set after search), you should do the following:

- only retrieve those document fields, you really need (using a
FieldSelector like SetBasedFieldSelector).
- Do some buffering in the HitCollector: Allocate an array of int for the
collected doc ids with a size of say 16,000. For each collect() call, add
the document id to the array. When the array is full and at the end of
collecting, call a flush method: This method sorts the array by ID (because
if the Ids are in increasing order less seeking is needed) and then calls
document(id) for each entry in a bulk. This is faster. In older versions of
Lucene array sorting may not needed, but you really should do it (the newer
search API may not return documents in doc order).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: mittals [mailto:sourabh-931.mittal@morganstanley.com]
> Sent: Monday, February 02, 2009 12:54 PM
> To: java-user@lucene.apache.org
> Subject: How to extract Document object after the search?
> 
> 
> As per Lucene documentation -
> "For good search performance, implementations of this method should not
> call
> Searcher.doc(int) or IndexReader.document(int) on every document number
> encountered. Doing so can slow searches by an order of magnitude or more."
> 
> My question is - what's the other way to get the Document object to avoid
> performance bottleneck?
> 
> --
> View this message in context: http://www.nabble.com/How-to-extract-
> Document-object-after-the-search--tp21788361p21788361.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 13:17:55 2009
Return-Path: <java-user-return-38376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46774 invoked from network); 2 Feb 2009 13:17:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 13:17:55 -0000
Received: (qmail 34226 invoked by uid 500); 2 Feb 2009 13:17:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34200 invoked by uid 500); 2 Feb 2009 13:17:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34189 invoked by uid 99); 2 Feb 2009 13:17:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 05:17:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 13:17:39 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id 34F1F129B37
	for <java-user@lucene.apache.org>; Mon,  2 Feb 2009 05:17:14 -0800 (PST)
Message-Id: <F444F670-22F2-4EC9-B067-E15CE7F7A338@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <C2B2FFAA016E5241864A7A308D4A49201A0FA8@tiwexmb06.msad.ms.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Performance issue
Date: Mon, 2 Feb 2009 08:17:13 -0500
References: <C2B2FFAA016E5241864A7A308D4A49201A0FA8@tiwexmb06.msad.ms.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you give us more info on what they are searching for w/ 2 letter  
searches?  Typically, prefix queries that short are going to have a  
lot of terms to match.  You might try having a field that you index  
using a variation of ngrams that are anchored at the first character.   
For example, encountering the term Lucene, you would index "lu",  
"luc", "luce" all at the same position (this has limits, b/c you will  
need an upper bound cutoff too).  This way, you would get exact  
matches and you don't need to use prefix queries.  Then, you just need  
to recognize these searches and generate the appropriate queries.

Alternatively, you may consider requiring a minimum number of  
characters in a query, but this depends on your application.

-Grant


On Feb 2, 2009, at 2:58 AM, Mittal, Sourabh (IDEAS) wrote:

> Hi All,
>
> We face serious performance issues when users do 2 letter search e.g  
> ho,
> jo, pa ma, um ar, ma fi etc. time taken between 10 - 15 secs.
> Below is our implementation details:
>
> 1. Search performs on 7 fields.
> 2. PrefixQuery implementation on all fields
> 3. AND search.
> 4. Our indexer size is 300 MB.
> 5. We show only 100 top documents only on the basis of score.
> 6. We user StandardAnalyzer & StandardTokenizer for indexing &
> searching.
> 7. Lucene 2.4
> 8. JDK1 .6
>
> Please suggest me how can we improve the performance.
>
> Regards,
> Sourabh Mittal
> Morgan Stanley | IDEAS Practice Areas
> Manikchand Ikon | South Wing 18 | Dhole Patil Road
> Pune, 411001
> Phone: +91 20 2620-7053
> Sourabh-931.Mittal@morganstanley.com
>
>
>
> --------------------------------------------------------------------------
> NOTICE: If received in error, please destroy and notify sender.  
> Sender does not intend to waive confidentiality or privilege. Use of  
> this email is prohibited when received in error.

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ












---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 13:18:53 2009
Return-Path: <java-user-return-38377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47805 invoked from network); 2 Feb 2009 13:18:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 13:18:53 -0000
Received: (qmail 36679 invoked by uid 500); 2 Feb 2009 13:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36653 invoked by uid 500); 2 Feb 2009 13:18:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36642 invoked by uid 99); 2 Feb 2009 13:18:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 05:18:46 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 13:18:38 +0000
Received: by yw-out-2324.google.com with SMTP id 3so447612ywj.5
        for <java-user@lucene.apache.org>; Mon, 02 Feb 2009 05:18:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=3ktf71jtj+uZH6/mavksxdUeo/GN5R91gEvgMX7MO2Q=;
        b=CKBvTJKlrJgprdC1UqFkxCK8x4rF08Xw9Czt+WACUe+IdUJAkTayZ2GiC8GIxHSVBP
         8gS8HiEEkrZ6+Z9M2l5FSPEm0o8nfJjy9svBcq94BB0HBUNY3I2jKNxeyNDXjA0P7vIp
         hqMQWO3pkVvZUFM7DCcjdNPOG9M87H+aIkTAQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WIY3nYRdsY4CQ3+LgevoRUG4/rMJEePPEkTk7hcGHXRRZnqKmRBYHSWfMYU6X4rHgD
         OIrYFvcF4IsYEy68CE5acm3XTwEDw0yuQywSVaqqsUn7+IzKKBxHij8BUQBhjCnns5NV
         CqJqBgUztoayzjBWNAUgfQorx32u/2f2+dtB8=
MIME-Version: 1.0
Received: by 10.90.101.7 with SMTP id y7mr612437agb.59.1233580697855; Mon, 02 
	Feb 2009 05:18:17 -0800 (PST)
In-Reply-To: <21786431.post@talk.nabble.com>
References: <21702845.post@talk.nabble.com>
	 <359a92830901280555i4e6da184n6ead80d4a45cb79c@mail.gmail.com>
	 <21786431.post@talk.nabble.com>
Date: Mon, 2 Feb 2009 08:18:17 -0500
Message-ID: <359a92830902020518q3bed2f8fvf8d74cbb6812b2e@mail.gmail.com>
Subject: Re: NullPointerException in FieldDocSortedHitQueue.lessThan with 
	custom SortComparator
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016362834ee4c28ac0461ef63b4
X-Virus-Checked: Checked by ClamAV on apache.org

--0016362834ee4c28ac0461ef63b4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Ah, I see. The indention and lack of braces fooled me.
You might consider making things as easy as possible when
asking people to volunteer their time trying to help you.

Then I'm unsure what's the problem, you could try showing
us the entire stack trace. Have you defined your own compare
function? If so, do you test in that function to see whether the
values you're comparing are actually set in your objects? The
fragment you've posted doesn't really give us enough to help
very much.

Best
Erick

On Mon, Feb 2, 2009 at 4:18 AM, ninaS <nina256@gmx.de> wrote:

>
> That's not true: have a look at the "else"-block.
>
> The problem is that lucene's FieldDocSortedHitQueue does only test for null
> values if uses the type FieldDoc.STRING. With FieldDoc.CUSTOM lucene
> assumes
> ci to be never null:
>
> FieldDocSortedHitQueue 163-166:
>
>        case SortField.CUSTOM:{
>                                        c = docA.fields[i].compareTo
> (docB.fields[i]);
>                                        break;
>        }
>
> If I have null values in the field that I want to sort by: I can not use a
> custom SortComparator.
> --
> View this message in context:
> http://www.nabble.com/NullPointerException-in-FieldDocSortedHitQueue.lessThan-with-custom-SortComparator-tp21702845p21786431.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016362834ee4c28ac0461ef63b4--

From java-user-return-38378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 13:24:18 2009
Return-Path: <java-user-return-38378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49143 invoked from network); 2 Feb 2009 13:24:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 13:24:18 -0000
Received: (qmail 40181 invoked by uid 500); 2 Feb 2009 13:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40149 invoked by uid 500); 2 Feb 2009 13:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40138 invoked by uid 99); 2 Feb 2009 13:24:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 05:24:11 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 13:24:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LTym7-0007fK-0P
	for java-user@lucene.apache.org; Mon, 02 Feb 2009 05:23:43 -0800
Message-ID: <21789560.post@talk.nabble.com>
Date: Mon, 2 Feb 2009 05:23:43 -0800 (PST)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Best Practice for Lucene Search
In-Reply-To: <21748839.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <21748839.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi ilwes,

Did you noticed the thread
http://www.nabble.com/Lucene-vs.-Database-td19755932.html
?

I think it is usefull for the question about using lucene storage fields
even if you already have the information in DB.

Best regards
  Karsten



ilwes wrote:
> 
> Hello,
> 
> I googled, searched this Forum and read the manual, but I'm not sure what
> would be the best practice for Lucene search.
> 
> I have an e-Commerce application with about 10 mySQL tables for my
> products. And I have an Index (which is working fine), with about 10
> fields for every product. Is it a common way having the same data (title,
> description, tags, paths to pictures, sold_counter..etc) redundant in my
> mySQL DB and in the Index? And everytime I add a product, saving it to
> both? Would it not reduce the performance doing always things twice?
> 
> What would be the best practice? 
> 1) Save it to both index and mySQL DB (as I'm doing right now). 
> 2) Save only searchable fields (title, description and tags) and an
> product_id to index and use product_id to query everything else from DB?
> 3) ..?
> 
> Would be thankful for some hints and your experience.
> 
> Thx,
> ilwes
> 
> p.s. btw. im working with Zend/PHP but this shouldn't have any impact on
> this question
> 

-- 
View this message in context: http://www.nabble.com/Best-Practice-for-Lucene-Search-tp21748839p21789560.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 13:26:01 2009
Return-Path: <java-user-return-38379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50016 invoked from network); 2 Feb 2009 13:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 13:26:01 -0000
Received: (qmail 42079 invoked by uid 500); 2 Feb 2009 13:25:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42045 invoked by uid 500); 2 Feb 2009 13:25:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42034 invoked by uid 99); 2 Feb 2009 13:25:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 05:25:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.162.176 as permitted sender)
Received: from [209.85.162.176] (HELO el-out-1112.google.com) (209.85.162.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 13:25:45 +0000
Received: by el-out-1112.google.com with SMTP id s27so701524ele.14
        for <java-user@lucene.apache.org>; Mon, 02 Feb 2009 05:25:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=vNVz+vXTdun4/bFk3xYMnxJCA71CJL2kesiHhfHJzeM=;
        b=McJFuySZWj4bosczUQ1634ILDb0VvKfD8NphUu6QiURbhT5LGw5AESdhZfT7BHeA2c
         hQYiFItiUWsQ3P485jKDQOMadp+e6Rq+749b50OuVGc8sMH0GGvRlzMa1YAY4ct3pxMF
         Ol1fNhpekhmI5juierA7k5w/xMVDTVS6TxjtI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sG06wojeCK4BjXHAEp7CH5om+69eCCsVNJ0ekDJJBs+Bje6AFYPU9LnwtfscFCt7DQ
         21KeJLFGgX9PF23kTXkjn5EVzM6pHrbGQP+nEOTspF4SUrjb5dyxdzKZD1oRUbpSjWh9
         adrKlmTT9iWszgWBwlPDxIVcNwPjMmZiGub+0=
MIME-Version: 1.0
Received: by 10.90.101.17 with SMTP id y17mr1101488agb.106.1233581124441; Mon, 
	02 Feb 2009 05:25:24 -0800 (PST)
In-Reply-To: <C2B2FFAA016E5241864A7A308D4A49201A0FA8@tiwexmb06.msad.ms.com>
References: <C2B2FFAA016E5241864A7A308D4A49201A0FA8@tiwexmb06.msad.ms.com>
Date: Mon, 2 Feb 2009 08:25:24 -0500
Message-ID: <359a92830902020525y68ef2614n387809ead212418a@mail.gmail.com>
Subject: Re: Performance issue
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636163d19b9556d0461ef7ca7
X-Virus-Checked: Checked by ClamAV on apache.org

--001636163d19b9556d0461ef7ca7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Prefix queries are expensive here. The problem is
that each one forms a very large OR clause on all
the terms that start with those two letters. For instance,
if a field in your index contained
mine
milanta
mica

a prefix search on "mi" would form
mine OR milanta OR mica.

Doing this across seven fields could get expensive.

Two things:
1> what is the problem you are trying to solve? Perhaps some
of the folks on the list can give you some suggestions. You can
think about many strategies depending upon what you want
to accomplish. A 300M index isn't very big, so you could, for
instance, think about indexing a separate field that contains only
the two beginning letters and search *that* in this case. I'll
assume that three letter prefix queries are OK.

2> How are you measuring query time? If you're measuring the
time it takes when you first start a searcher, be aware that the
first few queries are usually slow because the caches haven't
been filled. Further, are you measuring total response time or
are you measuring *just* the query time? It's possible that the
time is being spent assembling the response in your code
rather than actual searching. You might insert some timers
to determine that.

Best
Erick

On Mon, Feb 2, 2009 at 2:58 AM, Mittal, Sourabh (IDEAS) <
Sourabh-931.Mittal@morganstanley.com> wrote:

> Hi All,
>
> We face serious performance issues when users do 2 letter search e.g ho,
> jo, pa ma, um ar, ma fi etc. time taken between 10 - 15 secs.
> Below is our implementation details:
>
> 1. Search performs on 7 fields.
> 2. PrefixQuery implementation on all fields
> 3. AND search.
> 4. Our indexer size is 300 MB.
> 5. We show only 100 top documents only on the basis of score.
> 6. We user StandardAnalyzer & StandardTokenizer for indexing &
> searching.
> 7. Lucene 2.4
> 8. JDK1 .6
>
> Please suggest me how can we improve the performance.
>
> Regards,
> Sourabh Mittal
> Morgan Stanley | IDEAS Practice Areas
> Manikchand Ikon | South Wing 18 | Dhole Patil Road
> Pune, 411001
> Phone: +91 20 2620-7053
> Sourabh-931.Mittal@morganstanley.com
>
>
>
> --------------------------------------------------------------------------
> NOTICE: If received in error, please destroy and notify sender. Sender does
> not intend to waive confidentiality or privilege. Use of this email is
> prohibited when received in error.
>

--001636163d19b9556d0461ef7ca7--

From java-user-return-38380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 13:36:01 2009
Return-Path: <java-user-return-38380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56750 invoked from network); 2 Feb 2009 13:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 13:36:01 -0000
Received: (qmail 56095 invoked by uid 500); 2 Feb 2009 13:35:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55838 invoked by uid 500); 2 Feb 2009 13:35:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55827 invoked by uid 99); 2 Feb 2009 13:35:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 05:35:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 13:35:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LTyxQ-00087q-S3
	for java-user@lucene.apache.org; Mon, 02 Feb 2009 05:35:24 -0800
Message-ID: <21789742.post@talk.nabble.com>
Date: Mon, 2 Feb 2009 05:35:24 -0800 (PST)
From: ninaS <nina256@gmx.de>
To: java-user@lucene.apache.org
Subject: Re: NullPointerException in FieldDocSortedHitQueue.lessThan with
  custom SortComparator
In-Reply-To: <359a92830902020518q3bed2f8fvf8d74cbb6812b2e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nina256@gmx.de
References: <21702845.post@talk.nabble.com> <359a92830901280555i4e6da184n6ead80d4a45cb79c@mail.gmail.com> <21786431.post@talk.nabble.com> <359a92830902020518q3bed2f8fvf8d74cbb6812b2e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I already found another solution: I don't use a custom SortComparator.
Another solution would be to define a default value for null.

Would be nice if lucene in future would be able 
to search by null values also if a custom SortComparator is used.

To tell you more:

public class MyComparator extends SortComparator {

...

 public ScoreDocComparator newComparator (final IndexReader reader, final
String fieldname)
 {

throws IOException {
	    final String field = fieldname.intern();
	    final Comparable[] cachedValues 
	    	= FieldCache.DEFAULT.getCustom (reader, field,
CollatorBasedComparator.this);
	    
	    return new ScoreDocComparator() {

		      public int compare (ScoreDoc i, ScoreDoc j) {
                         ... // compare and handle nulls
		      }

	      public Comparable sortValue (ScoreDoc i) {
	        return cachedValues[i.doc];
	      }

	      public int sortType(){
	    	  return org.apache.lucene.search.SortField.CUSTOM;
	      }
	    };

 }
	@Override
	protected Comparable getComparable(String text) {
		return new MyComparable(text); //implements compare(Object a, Object b),
handles nulls
	}	

}

Using such a comparator will cause the exception above mentioned if null
values appear in the sort field.

That is because:

FieldDocSortedHitQueue 163-166:

 case SortField.CUSTOM:{
           c = docA.fields[i].compareTo(docB.fields[i]);
                                     break;
} 

does not check whether docA.fields[i] is null.

As you see in line 134-148:

case SortField.STRING:{
					String s1 = (String) docA.fields[i];
					String s2 = (String) docB.fields[i];
					// null values need to be sorted first, because of how
FieldCache.getStringIndex()
					// works - in that routine, any documents without a value in the given
field are
					// put first.  If both are null, the next SortField is used
					if (s1 == null) c = (s2==null) ? 0 : -1;
					else if (s2 == null) c = 1;  // 
					else if (fields[i].getLocale() == null) {
						c = s1.compareTo(s2);
					} else {
						c = collators[i].compare (s1, s2);
					}
					break;
        }

nulls are handled with the type SortField.STRING.

-- 
View this message in context: http://www.nabble.com/NullPointerException-in-FieldDocSortedHitQueue.lessThan-with-custom-SortComparator-tp21702845p21789742.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 13:49:25 2009
Return-Path: <java-user-return-38381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65506 invoked from network); 2 Feb 2009 13:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 13:49:25 -0000
Received: (qmail 70743 invoked by uid 500); 2 Feb 2009 13:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70709 invoked by uid 500); 2 Feb 2009 13:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70698 invoked by uid 99); 2 Feb 2009 13:49:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 05:49:17 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 13:49:08 +0000
Received: by yx-out-2324.google.com with SMTP id 3so452922yxj.5
        for <java-user@lucene.apache.org>; Mon, 02 Feb 2009 05:48:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=V83aO1qWowGjC0UwREMUbvbbn5gHkECwu/wmcd33qd0=;
        b=kY3gqSNLKFHsmqjjrPWEBBUTYALGrV/HStv/hnrTgK+0D1I8/ClTo5PCDUMjeBMiKu
         V3PWDlEQe5QxXJqIvele1WSmcpFfEFYx+O7su/iIAbXhYfLApR6SQUfNeh/mcRHPb0+0
         Ggu7q52Gs3L3bFzuTlDxYKy7jfxtZeHEg85fM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nAoFkRLLozZzMaNlEHEKn38UJidFLkUIuyBPkkG96FQFbt++/BMyZFtvIf0F/v2a0s
         mx4cp6VGxW01AcMVgGa7JNZ45N7uHvAQKV/d1Bp5284UFQlleoog3R2I4BSFacTb00O2
         wz4HBZfxUywTyTb9TEOnoNpSEwN3to6YLEUBU=
MIME-Version: 1.0
Received: by 10.90.63.6 with SMTP id l6mr2616613aga.46.1233582526667; Mon, 02 
	Feb 2009 05:48:46 -0800 (PST)
In-Reply-To: <21789742.post@talk.nabble.com>
References: <21702845.post@talk.nabble.com>
	 <359a92830901280555i4e6da184n6ead80d4a45cb79c@mail.gmail.com>
	 <21786431.post@talk.nabble.com>
	 <359a92830902020518q3bed2f8fvf8d74cbb6812b2e@mail.gmail.com>
	 <21789742.post@talk.nabble.com>
Date: Mon, 2 Feb 2009 08:48:46 -0500
Message-ID: <359a92830902020548v62278e3dje385b9258637809d@mail.gmail.com>
Subject: Re: NullPointerException in FieldDocSortedHitQueue.lessThan with 
	custom SortComparator
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163616451b4d9c370461efd045
X-Virus-Checked: Checked by ClamAV on apache.org

--00163616451b4d9c370461efd045
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

To quote the guys... "patches are always welcome".

Glad you found a solution
Erick

On Mon, Feb 2, 2009 at 8:35 AM, ninaS <nina256@gmx.de> wrote:

>
> I already found another solution: I don't use a custom SortComparator.
> Another solution would be to define a default value for null.
>
> Would be nice if lucene in future would be able
> to search by null values also if a custom SortComparator is used.
>
> To tell you more:
>
> public class MyComparator extends SortComparator {
>
> ...
>
>  public ScoreDocComparator newComparator (final IndexReader reader, final
> String fieldname)
>  {
>
> throws IOException {
>            final String field = fieldname.intern();
>            final Comparable[] cachedValues
>                = FieldCache.DEFAULT.getCustom (reader, field,
> CollatorBasedComparator.this);
>
>            return new ScoreDocComparator() {
>
>                      public int compare (ScoreDoc i, ScoreDoc j) {
>                          ... // compare and handle nulls
>                       }
>
>              public Comparable sortValue (ScoreDoc i) {
>                return cachedValues[i.doc];
>              }
>
>              public int sortType(){
>                  return org.apache.lucene.search.SortField.CUSTOM;
>              }
>            };
>
>  }
>         @Override
>        protected Comparable getComparable(String text) {
>                return new MyComparable(text); //implements compare(Object
> a, Object b),
> handles nulls
>        }
>
> }
>
> Using such a comparator will cause the exception above mentioned if null
> values appear in the sort field.
>
> That is because:
>
> FieldDocSortedHitQueue 163-166:
>
>  case SortField.CUSTOM:{
>           c = docA.fields[i].compareTo(docB.fields[i]);
>                                     break;
> }
>
> does not check whether docA.fields[i] is null.
>
> As you see in line 134-148:
>
> case SortField.STRING:{
>                                        String s1 = (String) docA.fields[i];
>                                        String s2 = (String) docB.fields[i];
>                                        // null values need to be sorted
> first, because of how
> FieldCache.getStringIndex()
>                                        // works - in that routine, any
> documents without a value in the given
> field are
>                                        // put first.  If both are null, the
> next SortField is used
>                                        if (s1 == null) c = (s2==null) ? 0 :
> -1;
>                                        else if (s2 == null) c = 1;  //
>                                        else if (fields[i].getLocale() ==
> null) {
>                                                c = s1.compareTo(s2);
>                                        } else {
>                                                c = collators[i].compare
> (s1, s2);
>                                        }
>                                        break;
>        }
>
> nulls are handled with the type SortField.STRING.
>
> --
> View this message in context:
> http://www.nabble.com/NullPointerException-in-FieldDocSortedHitQueue.lessThan-with-custom-SortComparator-tp21702845p21789742.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163616451b4d9c370461efd045--

From java-user-return-38382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 02 19:35:40 2009
Return-Path: <java-user-return-38382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33968 invoked from network); 2 Feb 2009 19:35:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2009 19:35:40 -0000
Received: (qmail 6744 invoked by uid 500); 2 Feb 2009 19:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6714 invoked by uid 500); 2 Feb 2009 19:35:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6702 invoked by uid 99); 2 Feb 2009 19:35:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 11:35:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 19:35:23 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n12JYx0j025369
	for <java-user@lucene.apache.org>; Mon, 2 Feb 2009 14:35:00 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <49874AE3.4000900@informatics.jax.org>
Date: Mon, 02 Feb 2009 14:34:59 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance issue
References: <C2B2FFAA016E5241864A7A308D4A49201A0FA8@tiwexmb06.msad.ms.com> <359a92830902020525y68ef2614n387809ead212418a@mail.gmail.com>
In-Reply-To: <359a92830902020525y68ef2614n387809ead212418a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.1.360522, Antispam-Engine: 2.6.1.350677, Antispam-Data: 2009.2.2.192247
X-PerlMx-Spam: Gauge=IIIIIII, Probability=8%, Report='LEO_OBFU_SUBJ_RE 0.1, BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_CONTACT_NUM 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Do you NEED to be using 7 fields here?

Like Erick said, if you could give us an example of the types of data 
you are trying to search against, it would be quite helpful.

Its possible that you might be able to say collapse your 7 fields down 
to a single field, which would likely reduce the overall number of or 
clauses in your searches, speeding things up nicely.

At my project we search two letter prefix searches in sub seconds, for 
much larger datasets.  Alot of this however is directly due to how our 
indexes are structured.

-Matt

Erick Erickson wrote:
> Prefix queries are expensive here. The problem is
> that each one forms a very large OR clause on all
> the terms that start with those two letters. For instance,
> if a field in your index contained
> mine
> milanta
> mica
>
> a prefix search on "mi" would form
> mine OR milanta OR mica.
>
> Doing this across seven fields could get expensive.
>
> Two things:
> 1> what is the problem you are trying to solve? Perhaps some
> of the folks on the list can give you some suggestions. You can
> think about many strategies depending upon what you want
> to accomplish. A 300M index isn't very big, so you could, for
> instance, think about indexing a separate field that contains only
> the two beginning letters and search *that* in this case. I'll
> assume that three letter prefix queries are OK.
>
> 2> How are you measuring query time? If you're measuring the
> time it takes when you first start a searcher, be aware that the
> first few queries are usually slow because the caches haven't
> been filled. Further, are you measuring total response time or
> are you measuring *just* the query time? It's possible that the
> time is being spent assembling the response in your code
> rather than actual searching. You might insert some timers
> to determine that.
>
> Best
> Erick
>
> On Mon, Feb 2, 2009 at 2:58 AM, Mittal, Sourabh (IDEAS) <
> Sourabh-931.Mittal@morganstanley.com> wrote:
>
>   
>> Hi All,
>>
>> We face serious performance issues when users do 2 letter search e.g ho,
>> jo, pa ma, um ar, ma fi etc. time taken between 10 - 15 secs.
>> Below is our implementation details:
>>
>> 1. Search performs on 7 fields.
>> 2. PrefixQuery implementation on all fields
>> 3. AND search.
>> 4. Our indexer size is 300 MB.
>> 5. We show only 100 top documents only on the basis of score.
>> 6. We user StandardAnalyzer & StandardTokenizer for indexing &
>> searching.
>> 7. Lucene 2.4
>> 8. JDK1 .6
>>
>> Please suggest me how can we improve the performance.
>>
>> Regards,
>> Sourabh Mittal
>> Morgan Stanley | IDEAS Practice Areas
>> Manikchand Ikon | South Wing 18 | Dhole Patil Road
>> Pune, 411001
>> Phone: +91 20 2620-7053
>> Sourabh-931.Mittal@morganstanley.com
>>
>>
>>
>> --------------------------------------------------------------------------
>> NOTICE: If received in error, please destroy and notify sender. Sender does
>> not intend to waive confidentiality or privilege. Use of this email is
>> prohibited when received in error.
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 00:22:18 2009
Return-Path: <java-user-return-38383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62832 invoked from network); 3 Feb 2009 00:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 00:22:18 -0000
Received: (qmail 86188 invoked by uid 500); 3 Feb 2009 00:22:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86155 invoked by uid 500); 3 Feb 2009 00:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86144 invoked by uid 99); 3 Feb 2009 00:22:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 16:22:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 00:22:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 5BF077301F
	for <java-user@lucene.apache.org>; Mon,  2 Feb 2009 17:21:43 -0700 (MST)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DNd34ZMJP7zP for <java-user@lucene.apache.org>;
	Mon,  2 Feb 2009 17:21:37 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 50C2C7001B
	for <java-user@lucene.apache.org>; Mon,  2 Feb 2009 17:21:37 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C98595.6089AFDB"
Subject: Optimization error
Date: Mon, 2 Feb 2009 17:21:36 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB4043B8D39@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Optimization error
Thread-Index: AcmFlV/HTFQGv9iMTeONjmiN/NqHTw==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C98595.6089AFDB
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm optimizing a database and getting the error:

=20

maxClauseCount is set to 1024

=20

I understand what that means coming out of the query parser, but what
does it mean coming from the optimizer?=20

=20

Scott


------_=_NextPart_001_01C98595.6089AFDB--

From java-user-return-38384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 00:54:47 2009
Return-Path: <java-user-return-38384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72418 invoked from network); 3 Feb 2009 00:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 00:54:47 -0000
Received: (qmail 23630 invoked by uid 500); 3 Feb 2009 00:54:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23603 invoked by uid 500); 3 Feb 2009 00:54:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23589 invoked by uid 99); 3 Feb 2009 00:54:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 16:54:36 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 00:54:22 +0000
Received: by gxk6 with SMTP id 6so1744092gxk.5
        for <java-user@lucene.apache.org>; Mon, 02 Feb 2009 16:54:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=L5x7orgZ+VS3NsOIGUAalvU1keDwhCQAPVdhtAmASh4=;
        b=MDo3/NrHXZVDT7dN5OP7VSpRmuHeUxUcQnaLBLg+ntEvXyU5m3letm0AuhXDOmV6Wp
         RSilf2JfKwrPE5jETa+llUDEw5wJ4I2eAbhxlcYp3TnqFrgbOVMkxgMVwVZc505+l+DG
         2taVxqxhjmrEqM11aQZuRt3hlZIClq196cm9I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=p0pyoOHB+JyPE+ACOiDqAH59ohyv6auuNA0aG3B7xLBC9uInrEi6xLEL6/n8qyhgrj
         00MgbgTsqebQ5KfiJCnjYCWghoSABowBo1LhBMg1UQFolH4I5BVxgsCTApLv4v+oIh91
         6CjntH9v4VOgK+S0Mot1UEmsow4HobA+U0KvQ=
MIME-Version: 1.0
Received: by 10.90.74.9 with SMTP id w9mr3117559aga.93.1233622441595; Mon, 02 
	Feb 2009 16:54:01 -0800 (PST)
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB4043B8D39@exchange.slc.mainstreamdata.com>
References: <55F9EF953014514EB6BEE1F5198CEEB4043B8D39@exchange.slc.mainstreamdata.com>
Date: Mon, 2 Feb 2009 19:54:01 -0500
Message-ID: <359a92830902021654q7599b89cvae5054454de19741@mail.gmail.com>
Subject: Re: Optimization error
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e7ed06b13600461f91b0c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e7ed06b13600461f91b0c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

There is not enough information here to even guess
at an answer. Please post the stack trace and any
other relevant information you can think of and maybe
there'll be some useful pointers people can give.

Best
Erick

On Mon, Feb 2, 2009 at 7:21 PM, Scott Smith <ssmith@mainstreamdata.com>wrote:

> I'm optimizing a database and getting the error:
>
>
>
> maxClauseCount is set to 1024
>
>
>
> I understand what that means coming out of the query parser, but what
> does it mean coming from the optimizer?
>
>
>
> Scott
>
>

--0016361e7ed06b13600461f91b0c--

From java-user-return-38385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 02:22:15 2009
Return-Path: <java-user-return-38385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17927 invoked from network); 3 Feb 2009 02:22:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 02:22:15 -0000
Received: (qmail 90472 invoked by uid 500); 3 Feb 2009 02:22:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90448 invoked by uid 500); 3 Feb 2009 02:22:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90437 invoked by uid 99); 3 Feb 2009 02:22:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 18:22:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.83.124.80] (HELO webmail.cymfony.com) (208.83.124.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 02:21:59 +0000
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C985A6.23F097C5"
Subject: MergePolicy$MergeException during IndexWriter.addIndexesNoOptimize
Date: Mon, 2 Feb 2009 21:21:36 -0500
Message-ID: <4881ECF1AB752843908A20CEE07A8EB10D5597@buf-ex01.cymfony.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MergePolicy$MergeException during IndexWriter.addIndexesNoOptimize
Thread-Index: AcmFpiOh9wd8hknxQEuOL6JhhXWV8w==
From: "David Fertig" <dfertig@cymfony.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C985A6.23F097C5
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello. Hopefully this is the correct forum.  I am currently using
release 2.3.2 as my stable release, but have tried this 2.4 as well.

=20

I have 4 threads indexing documents into separate indexes and then
merging them into a larger master index.

=20

If the master index is previously corrupted (such as a file is
'accidentally' removed), and an exception occurs during merge with
IndexWriter.addIndexesNoOptimize(Directory[]), I have been unable to
catch it and report the index.  It would appear that lucene does not
catch or log it either.

=20

Thank you in advance,

Dave=20

=20

=20

Exception in thread "Thread-5"
org.apache.lucene.index.MergePolicy$MergeException:
java.io.FileNotFoundException:
/entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
directory)

        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
entMergeScheduler.java:271)

Caused by: java.io.FileNotFoundException:
/entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
directory)

        at java.io.RandomAccessFile.open(Native Method)

        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)

        at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDir
ectory.java:506)

        at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java
:536)

        at
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)

        at
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
a:70)

        at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:277)

        at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)

        at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)

        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)

        at
org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)

        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
entMergeScheduler.java:240)

Exception in thread "Thread-6"
org.apache.lucene.index.MergePolicy$MergeException:
java.io.FileNotFoundException:
/entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
directory)

        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
entMergeScheduler.java:271)

Caused by: java.io.FileNotFoundException:
/entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
directory)

        at java.io.RandomAccessFile.open(Native Method)

        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)

        at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDir
ectory.java:506)

        at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java
:536)

        at
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)

        at
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
a:70)

        at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:277)

        at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)

        at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)

        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)

        at
org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)

        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
entMergeScheduler.java:240)

Exception in thread "Thread-7"
org.apache.lucene.index.MergePolicy$MergeException:
java.io.FileNotFoundException:
/entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
directory)

        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
entMergeScheduler.java:271)

Caused by: java.io.FileNotFoundException:
/entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
directory)

        at java.io.RandomAccessFile.open(Native Method)

        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)

        at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDir
ectory.java:506)

        at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java
:536)

        at
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)

        at
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
a:70)

        at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:277)

        at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)

        at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)

        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)

        at
org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)

        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
entMergeScheduler.java:240)


------_=_NextPart_001_01C985A6.23F097C5--

From java-user-return-38386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 07:04:09 2009
Return-Path: <java-user-return-38386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29099 invoked from network); 3 Feb 2009 07:04:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 07:04:09 -0000
Received: (qmail 78798 invoked by uid 500); 3 Feb 2009 07:04:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78774 invoked by uid 500); 3 Feb 2009 07:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78763 invoked by uid 99); 3 Feb 2009 07:04:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 23:04:02 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 07:03:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LUFJj-00044U-Ta
	for java-user@lucene.apache.org; Mon, 02 Feb 2009 23:03:31 -0800
Message-ID: <21804802.post@talk.nabble.com>
Date: Mon, 2 Feb 2009 23:03:31 -0800 (PST)
From: mittals <sourabh-931.mittal@morganstanley.com>
To: java-user@lucene.apache.org
Subject: RE: How to extract Document object after the search?
In-Reply-To: <A4925A4B7EFE422283C16F6873E18E5B@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sourabh-931.mittal@morganstanley.com
References: <21788361.post@talk.nabble.com> <A4925A4B7EFE422283C16F6873E18E5B@VEGA>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have not seen much time difference between when I load the single field &
all the fields of a document.

After search, lucene cache the documents into the memory. Is there any way
to configure the no. of documents to be cached into the memory?

what could be the benefit in using FieldSelectorResult.LOAD &
FieldSelectorResult.LAZY_LOAD?

Regards,
Sourabh


Uwe Schindler wrote:
> 
> Hi,
> 
> you should generally not download all fields for all documents in the
> HitCollector Loop, if you really need it (because you want to do some
> analysis on the whole result set after search), you should do the
> following:
> 
> - only retrieve those document fields, you really need (using a
> FieldSelector like SetBasedFieldSelector).
> - Do some buffering in the HitCollector: Allocate an array of int for the
> collected doc ids with a size of say 16,000. For each collect() call, add
> the document id to the array. When the array is full and at the end of
> collecting, call a flush method: This method sorts the array by ID
> (because
> if the Ids are in increasing order less seeking is needed) and then calls
> document(id) for each entry in a bulk. This is faster. In older versions
> of
> Lucene array sorting may not needed, but you really should do it (the
> newer
> search API may not return documents in doc order).
> 
> Uwe
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
>> -----Original Message-----
>> From: mittals [mailto:sourabh-931.mittal@morganstanley.com]
>> Sent: Monday, February 02, 2009 12:54 PM
>> To: java-user@lucene.apache.org
>> Subject: How to extract Document object after the search?
>> 
>> 
>> As per Lucene documentation -
>> "For good search performance, implementations of this method should not
>> call
>> Searcher.doc(int) or IndexReader.document(int) on every document number
>> encountered. Doing so can slow searches by an order of magnitude or
>> more."
>> 
>> My question is - what's the other way to get the Document object to avoid
>> performance bottleneck?
>> 
>> --
>> View this message in context: http://www.nabble.com/How-to-extract-
>> Document-object-after-the-search--tp21788361p21788361.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-extract-Document-object-after-the-search--tp21788361p21804802.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 07:24:45 2009
Return-Path: <java-user-return-38387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41250 invoked from network); 3 Feb 2009 07:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 07:24:45 -0000
Received: (qmail 95216 invoked by uid 500); 3 Feb 2009 07:24:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95186 invoked by uid 500); 3 Feb 2009 07:24:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95167 invoked by uid 99); 3 Feb 2009 07:24:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Feb 2009 23:24:38 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 07:24:28 +0000
Received: by wa-out-1112.google.com with SMTP id m33so985166wag.5
        for <java-user@lucene.apache.org>; Mon, 02 Feb 2009 23:24:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=JBCkqMjSFm58/p00QthHgILV/9f1j0SOgyDZSc2f6po=;
        b=ESUva1dv44x7CRnALAsq+RO5gI/sWH5N2Wjz2OQbDXHaqkeGiwz47ZCphfeid43Uff
         bvUKji2onD841h0J3MeBrmBDw8poZmVtenXBlP0ra7oqz+iQKHZMTJqI7TM6gX3N+U15
         /FQwP4CXBEom4Xxs30zX4t8raJk3N65jzJGC4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=q+LDlIB2i210Amad8Aqh5zW1VMLgFGbes6ayOUuZrA5820LNIL1pvohdxt7P1AQjXj
         fTguRBfg6bDwWYc7pA0R8HsWxfDMM++nVXXQSaU0Ep90IpUz7vGGe/D2YsM3I0W6f+c6
         wDRO6RFAKcuKvfooZwbEwSfUtDERdG6t/fW0s=
MIME-Version: 1.0
Received: by 10.114.95.1 with SMTP id s1mr1424266wab.20.1233645846608; Mon, 02 
	Feb 2009 23:24:06 -0800 (PST)
Date: Mon, 2 Feb 2009 23:24:06 -0800
Message-ID: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>
Subject: Poor QPS with highlighting
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636459246773b620461fe8e68
X-Virus-Checked: Checked by ClamAV on apache.org

--001636459246773b620461fe8e68
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all,

My search backends are only able to eek out 13-15 qps even with the entire
index in memory (this makes it very expensive to scale). According to my
YourKit profiler 80% of the program's time ends up in highlighting. With
highlighting disabled my backend gets about 45-50 qps (cheaper scaling)!
We're using Mark's TokenSources contrib. to make reconstructing of the
document quicker. I was contemplating patching the index to store offsets
for every term (instead of just the ordinal positions) so that I could make
the highlighting faster (since you would know where you hit in the document
on the search pass). I saw this thread from 2004:
http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg04743.html -
which asks about adding offsets to the index but it was decided against
because it would make the index too large. I can totally understand this;
but as machines get more beefy it would probably be nice to make this
optional since having 15 qps vs 50qps is quite a trade-off right now. Are
other folks seeing this? My documents are quite big sometimes up to 300k
tokens. Also my document fields are compressed which is also a time sink for
the cpu.

Please let me know if you need more details, happy to share.

Sincerely,
M

--001636459246773b620461fe8e68--

From java-user-return-38388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 09:15:04 2009
Return-Path: <java-user-return-38388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 917 invoked from network); 3 Feb 2009 09:15:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 09:15:04 -0000
Received: (qmail 2782 invoked by uid 500); 3 Feb 2009 09:14:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2761 invoked by uid 500); 3 Feb 2009 09:14:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2750 invoked by uid 99); 3 Feb 2009 09:14:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 01:14:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Feb 2009 09:14:47 +0000
Received: (qmail 56133 invoked by uid 60001); 3 Feb 2009 09:14:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=GUyKNoJmVoLxLNenuHJBD1ByWIKX+ZQfc+vx4m+b5gZvXFKTAwkOMOnRdKJiMalYYKaCuVW5tEA3en/tDVCJAiNCypKaG0x81STDcdDXzlCO7PKqZhmoI64oA7TfDvk5Vks6bZlSnLchqjBWsd05GVu9FCYfZ4vncCBwup8FTkg=;
X-YMail-OSG: YM3NQNMVM1mv.roZiTxOKaN2bipqlyUQbggX0pPCINTE0_q2Rnl5et7rsDC7pmWe0mON1.r6.MGyL1Es2AY2Y1JWc_WHNKgMLz.X4RW_n8VTSCepD9aXl3a4mOuo887B4qFlgXwHVOHbl.mkj6RhdOCSOTtT2_Bmltly3_S0Q4ir8ggIUp0eZdyNYnLuW7Vy0qAd.lT7nZMDRuliAvue3.30R1lHqovwZtsOdj0-
Received: from [194.106.34.5] by web26002.mail.ukl.yahoo.com via HTTP; Tue, 03 Feb 2009 09:14:24 GMT
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>
Date: Tue, 3 Feb 2009 09:14:24 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Poor QPS with highlighting
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <7770.55606.qm@web26002.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>My documents are quite big sometimes up to 300ktokens.=0A=0AYou could loo=
k at indexing them as seperate documents using overlapping sections of text=
. Erik used this for one of his projects.=0A=0ACheers=0AMark=0A=0A=0A=0A---=
-- Original Message ----=0AFrom: Michael Stoppelman <stopman@gmail.com>=0AT=
o: java-user@lucene.apache.org=0ASent: Tuesday, 3 February, 2009 7:24:06=0A=
Subject: Poor QPS with highlighting=0A=0AHi all,=0A=0AMy search backends ar=
e only able to eek out 13-15 qps even with the entire=0Aindex in memory (th=
is makes it very expensive to scale). According to my=0AYourKit profiler 80=
% of the program's time ends up in highlighting. With=0Ahighlighting disabl=
ed my backend gets about 45-50 qps (cheaper scaling)!=0AWe're using Mark's =
TokenSources contrib. to make reconstructing of the=0Adocument quicker. I w=
as contemplating patching the index to store offsets=0Afor every term (inst=
ead of just the ordinal positions) so that I could make=0Athe highlighting =
faster (since you would know where you hit in the document=0Aon the search =
pass). I saw this thread from 2004:=0Ahttp://www.mail-archive.com/lucene-de=
v@jakarta.apache.org/msg04743.html -=0Awhich asks about adding offsets to t=
he index but it was decided against=0Abecause it would make the index too l=
arge. I can totally understand this;=0Abut as machines get more beefy it wo=
uld probably be nice to make this=0Aoptional since having 15 qps vs 50qps i=
s quite a trade-off right now. Are=0Aother folks seeing this? My documents =
are quite big sometimes up to 300k=0Atokens. Also my document fields are co=
mpressed which is also a time sink for=0Athe cpu.=0A=0APlease let me know i=
f you need more details, happy to share.=0A=0ASincerely,=0AM=0A=0A=0A=0A   =
   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 10:07:06 2009
Return-Path: <java-user-return-38389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49875 invoked from network); 3 Feb 2009 10:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 10:07:06 -0000
Received: (qmail 55065 invoked by uid 500); 3 Feb 2009 10:06:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55034 invoked by uid 500); 3 Feb 2009 10:06:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55015 invoked by uid 99); 3 Feb 2009 10:06:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 02:06:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 10:06:52 +0000
Received: by fxm7 with SMTP id 7so2127404fxm.5
        for <java-user@lucene.apache.org>; Tue, 03 Feb 2009 02:06:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=vnQRu7j2aFBodOuj3jZBLXEzA2KUmRgRlV9N10Q+kKw=;
        b=b0HWCq6iQ5izm+MQgyAu7n+ykKwxNaM96Yhexzs0amNIqKzwp5GTKfKSnJqhqpMwD9
         J4xcu3JNrNNN4Q0SGYL6Uo0kS1AXf2N8LiBBWLuIEJDTGMtNVXEtVv9JWu8GNAyK+fbT
         o8C9EbF/OnJGzYnMmJUAqOVK7TJFNwEVd1Odo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=E9rXAdi3tjWLFWqr3urEYaJyM2juLaTaHexaGCLMxVNvUc0aTjBptvoAyee7FKjVQI
         mzkomIwjpxmzYyuqlBW+a078vglcD6PS7OqOY7asA4/fqWsKwkUbtfWW5rpF3Yq6E9vr
         Wju5ZOAnpbntP74jeeFFGOkRa52B1U4DC0fpg=
MIME-Version: 1.0
Received: by 10.181.21.2 with SMTP id y2mr2030048bki.144.1233655590185; Tue, 
	03 Feb 2009 02:06:30 -0800 (PST)
In-Reply-To: <21804802.post@talk.nabble.com>
References: <21788361.post@talk.nabble.com>
	 <A4925A4B7EFE422283C16F6873E18E5B@VEGA>
	 <21804802.post@talk.nabble.com>
Date: Tue, 3 Feb 2009 10:06:30 +0000
Message-ID: <8c4e68610902030206gfd7068budb25b1605bb7b620@mail.gmail.com>
Subject: Re: How to extract Document object after the search?
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> I have not seen much time difference between when I load the single field &
> all the fields of a document.

That's fine - sometimes it helps, sometimes it doesn't.  Depends on
the structure of your documents, maybe your hardware, maybe more.  And
sometimes a small difference, over many documents, can be worth
having.

> After search, lucene cache the documents into the memory. Is there any way
> to configure the no. of documents to be cached into the memory?

Umm.  No, I don't believe that lucene does explicit document caching.
Your OS may well cache the data files which can make a significant
difference.  See also all the recommendations elsewhere about sharing
and warming searchers.

> what could be the benefit in using FieldSelectorResult.LOAD &
> FieldSelectorResult.LAZY_LOAD?

If you have a document with, say, 2 small fields and 100 large fields
and in some particular circumstance you only want the 2 small ones,
using a FieldSelector like SetBasedFieldSelector, as Uwe suggested,
can help by telling lucene not to load the 100 large fields unless you
explicitly ask for them.  Which you won't in this scenario.


If you google for something like "lucene lazy loading" you'll find
lots more info.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 11:47:08 2009
Return-Path: <java-user-return-38390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16888 invoked from network); 3 Feb 2009 11:47:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 11:47:08 -0000
Received: (qmail 65876 invoked by uid 500); 3 Feb 2009 11:47:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65831 invoked by uid 500); 3 Feb 2009 11:47:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65820 invoked by uid 99); 3 Feb 2009 11:47:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 03:47:00 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 11:46:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LUJjZ-0007sp-EW
	for java-user@lucene.apache.org; Tue, 03 Feb 2009 03:46:29 -0800
Message-ID: <21808283.post@talk.nabble.com>
Date: Tue, 3 Feb 2009 03:46:29 -0800 (PST)
From: mittals <sourabh-931.mittal@morganstanley.com>
To: java-user@lucene.apache.org
Subject: Re: Performance issue
In-Reply-To: <49874AE3.4000900@informatics.jax.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sourabh-931.mittal@morganstanley.com
References: <C2B2FFAA016E5241864A7A308D4A49201A0FA8@tiwexmb06.msad.ms.com> <359a92830902020525y68ef2614n387809ead212418a@mail.gmail.com> <49874AE3.4000900@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

All of the fields are text. We have 3 @IndexedEmbedded object with in a
object.
users can search for any string, few of the cases are morgan, john, orcl,
healthcare, pa ma, ma fin.

here is e.g. of our one query:

(+(trading.tn:pa^150.0 lastName:pa*^45.0 firstName:pa*^30.0 roleDesc:pa^3.0
roleShortDesc:pa^3.0 phoneDesc:pa^9.0 cityDesc:pa^3.0) +(trading.tn:ma^150.0
lastName:ma*^45.0 firstName:ma*^30.0 roleDesc:ma^3.0 roleShortDesc:ma^3.0
phoneDesc:ma^9.0 cityDesc:ma^3.0))

another thing is how lucene merge the result of 2 terms. e.g. in above case
we have an AND operator, so lucene merge result of pa & ma terms.

Regards,
Sourabh


Matthew Hall-7 wrote:
> 
> Do you NEED to be using 7 fields here?
> 
> Like Erick said, if you could give us an example of the types of data 
> you are trying to search against, it would be quite helpful.
> 
> Its possible that you might be able to say collapse your 7 fields down 
> to a single field, which would likely reduce the overall number of or 
> clauses in your searches, speeding things up nicely.
> 
> At my project we search two letter prefix searches in sub seconds, for 
> much larger datasets.  Alot of this however is directly due to how our 
> indexes are structured.
> 
> -Matt
> 
> Erick Erickson wrote:
>> Prefix queries are expensive here. The problem is
>> that each one forms a very large OR clause on all
>> the terms that start with those two letters. For instance,
>> if a field in your index contained
>> mine
>> milanta
>> mica
>>
>> a prefix search on "mi" would form
>> mine OR milanta OR mica.
>>
>> Doing this across seven fields could get expensive.
>>
>> Two things:
>> 1> what is the problem you are trying to solve? Perhaps some
>> of the folks on the list can give you some suggestions. You can
>> think about many strategies depending upon what you want
>> to accomplish. A 300M index isn't very big, so you could, for
>> instance, think about indexing a separate field that contains only
>> the two beginning letters and search *that* in this case. I'll
>> assume that three letter prefix queries are OK.
>>
>> 2> How are you measuring query time? If you're measuring the
>> time it takes when you first start a searcher, be aware that the
>> first few queries are usually slow because the caches haven't
>> been filled. Further, are you measuring total response time or
>> are you measuring *just* the query time? It's possible that the
>> time is being spent assembling the response in your code
>> rather than actual searching. You might insert some timers
>> to determine that.
>>
>> Best
>> Erick
>>
>> On Mon, Feb 2, 2009 at 2:58 AM, Mittal, Sourabh (IDEAS) <
>> Sourabh-931.Mittal@morganstanley.com> wrote:
>>
>>   
>>> Hi All,
>>>
>>> We face serious performance issues when users do 2 letter search e.g ho,
>>> jo, pa ma, um ar, ma fi etc. time taken between 10 - 15 secs.
>>> Below is our implementation details:
>>>
>>> 1. Search performs on 7 fields.
>>> 2. PrefixQuery implementation on all fields
>>> 3. AND search.
>>> 4. Our indexer size is 300 MB.
>>> 5. We show only 100 top documents only on the basis of score.
>>> 6. We user StandardAnalyzer & StandardTokenizer for indexing &
>>> searching.
>>> 7. Lucene 2.4
>>> 8. JDK1 .6
>>>
>>> Please suggest me how can we improve the performance.
>>>
>>> Regards,
>>> Sourabh Mittal
>>> Morgan Stanley | IDEAS Practice Areas
>>> Manikchand Ikon | South Wing 18 | Dhole Patil Road
>>> Pune, 411001
>>> Phone: +91 20 2620-7053
>>> Sourabh-931.Mittal@morganstanley.com
>>>
>>>
>>>
>>> --------------------------------------------------------------------------
>>> NOTICE: If received in error, please destroy and notify sender. Sender
>>> does
>>> not intend to waive confidentiality or privilege. Use of this email is
>>> prohibited when received in error.
>>>
>>>     
>>
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Performance-issue-tp21788313p21808283.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 13:39:02 2009
Return-Path: <java-user-return-38391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69929 invoked from network); 3 Feb 2009 13:39:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 13:39:02 -0000
Received: (qmail 88863 invoked by uid 500); 3 Feb 2009 13:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88776 invoked by uid 500); 3 Feb 2009 13:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88753 invoked by uid 99); 3 Feb 2009 13:38:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 05:38:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 64.233.170.186 as permitted sender)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 13:38:38 +0000
Received: by rn-out-0910.google.com with SMTP id 56so1419671rnw.4
        for <java-user@lucene.apache.org>; Tue, 03 Feb 2009 05:38:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=GdcdH4/VXBLwIylmQsZOO7AVJ7tOupc+CaqyoP8sdio=;
        b=bokfT62LWsF+dlpEI82dy1PtoKhWiNiguFDXVSVv9k7dnspXkFDb5aYsi2syH/Kikc
         TJsuF+U0sGgvk8Dl1uSyq6kYBRAdSnvrUj6D1XS3fB40QdHSh5x9L5s62SoOXjpL8Y2y
         EMAtNMXGDoYUUsqr2BSPbzXs20ad18B7ageOs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Yitfl2ubNCeI1XMIA0uvfrCMal1UYZfjH3ZlW68XmxHmal8mUHuMuozxDc2rmLBMqm
         eMZHcxeCG8naacQOJ47MURPcf8dDHV1rYG9yNFOHEMm5Ou2I3Gct6huZvxIQJF/5vgHG
         +KDr3V72gy0QceMMOL9dUt4VCnpEAfLr1Nh5s=
MIME-Version: 1.0
Received: by 10.90.79.12 with SMTP id c12mr77665agb.57.1233668297306; Tue, 03 
	Feb 2009 05:38:17 -0800 (PST)
In-Reply-To: <8c4e68610902030206gfd7068budb25b1605bb7b620@mail.gmail.com>
References: <21788361.post@talk.nabble.com>
	 <A4925A4B7EFE422283C16F6873E18E5B@VEGA>
	 <21804802.post@talk.nabble.com>
	 <8c4e68610902030206gfd7068budb25b1605bb7b620@mail.gmail.com>
Date: Tue, 3 Feb 2009 08:38:17 -0500
Message-ID: <359a92830902030538p3b72563ay8b2e129b4d3132fd@mail.gmail.com>
Subject: Re: How to extract Document object after the search?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e8868a1b102046203c881
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e8868a1b102046203c881
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Here's a writeup I did a couple of years ago that might help...

http://wiki.apache.org/lucene-java/FieldSelectorPerformance?highlight=(fieldselector)

Best
Erick

On Tue, Feb 3, 2009 at 5:06 AM, Ian Lea <ian.lea@gmail.com> wrote:

> > I have not seen much time difference between when I load the single field
> &
> > all the fields of a document.
>
> That's fine - sometimes it helps, sometimes it doesn't.  Depends on
> the structure of your documents, maybe your hardware, maybe more.  And
> sometimes a small difference, over many documents, can be worth
> having.
>
> > After search, lucene cache the documents into the memory. Is there any
> way
> > to configure the no. of documents to be cached into the memory?
>
> Umm.  No, I don't believe that lucene does explicit document caching.
> Your OS may well cache the data files which can make a significant
> difference.  See also all the recommendations elsewhere about sharing
> and warming searchers.
>
> > what could be the benefit in using FieldSelectorResult.LOAD &
> > FieldSelectorResult.LAZY_LOAD?
>
> If you have a document with, say, 2 small fields and 100 large fields
> and in some particular circumstance you only want the 2 small ones,
> using a FieldSelector like SetBasedFieldSelector, as Uwe suggested,
> can help by telling lucene not to load the 100 large fields unless you
> explicitly ask for them.  Which you won't in this scenario.
>
>
> If you google for something like "lucene lazy loading" you'll find
> lots more info.
>
>
> --
> Ian.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361e8868a1b102046203c881--

From java-user-return-38392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 15:27:13 2009
Return-Path: <java-user-return-38392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69353 invoked from network); 3 Feb 2009 15:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 15:27:13 -0000
Received: (qmail 81469 invoked by uid 500); 3 Feb 2009 15:27:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81447 invoked by uid 500); 3 Feb 2009 15:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81436 invoked by uid 99); 3 Feb 2009 15:27:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 07:27:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 15:26:58 +0000
Received: from [213.94.211.166] (helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1LUNA7-0007Sg-Nz
	for java-user@lucene.apache.org; Tue, 03 Feb 2009 15:26:11 +0000
Message-ID: <4988621A.40207@propylon.com>
Date: Tue, 03 Feb 2009 15:26:18 +0000
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: waaaay too many files in the index!
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.7 required=3.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

Hi,

I've got a weird problem with a lucene index, using 2.3.1. The index 
contains 6660 files. I don't know how this happened.Maybe somone can 
tell me something about the files themselves? (examples below)

On one day, between 10 and 40 of these files were being created every 
minute. The index updates are triggered by updates to an SVN repository, 
but I can't find any corresponding activity in the SVN logs.

The lucene files all have names like this:

 _1qsw.cfs
_1qsx.cfs
 _1qsy.cfs
_1qsz.cfs
_1qt0.cfs

and are mostly < 5K in size.

My application uses just one instance each of 
IndexReader/IndexWriter/IndexSearcher. From looking at

Can anyone shed any light on these files? I'm not too hopeful about 
fixing this index because we are getting "too many open files", even 
with an unlimited ulimit, but any info/suggestions would be great. Thanks.

-John




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 16:25:55 2009
Return-Path: <java-user-return-38393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2177 invoked from network); 3 Feb 2009 16:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 16:25:55 -0000
Received: (qmail 98825 invoked by uid 500); 3 Feb 2009 16:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98797 invoked by uid 500); 3 Feb 2009 16:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98786 invoked by uid 99); 3 Feb 2009 16:25:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 08:25:48 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.146.193.99] (HELO mx.billiger.de) (62.146.193.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 16:25:40 +0000
Received: from solute-exc.solute.ka (norad.solute-gmbh.de [145.253.139.66])
	by mx.billiger.de (Postfix) with ESMTPS id 03C538040FB
	for <java-user@lucene.apache.org>; Tue,  3 Feb 2009 17:25:16 +0100 (CET)
Received: from bunt.amsterdam (10.1.1.47) by solute-exc2k7.solute.ka
 (10.1.1.3) with Microsoft SMTP Server id 8.1.336.0; Tue, 3 Feb 2009 17:25:16
 +0100
From: Jochen =?iso-8859-1?q?Wersd=F6rfer?= <jochen-lucene@wersdoerfer.de>
To: <java-user@lucene.apache.org>
Subject: term frequency normalization
Date: Tue, 3 Feb 2009 17:27:16 +0100
User-Agent: KMail/1.9.10
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-ID: <200902031727.16933.jochen-lucene@wersdoerfer.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

i'd like to use the term frequency normalization described in

http://wiki.apache.org/lucene-java/TREC%202007%20Million%20Queries%20Track%20-%20IBM%20Haifa%20Team

so that the term frequency tf becomes

tf(f, d) = log(1 + feq(t, d)) / log(1 + avgFreq(d))

The easiest way to change the tf calculation would be overwriting
tf in an own implementation of Similarity like it's done in
SweetSpotSimilarity. But the average term frequency of the
document is missing. Is there a simple way to get or calc this
number?

regards,
jochen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 16:27:34 2009
Return-Path: <java-user-return-38394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2816 invoked from network); 3 Feb 2009 16:27:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 16:27:34 -0000
Received: (qmail 3900 invoked by uid 500); 3 Feb 2009 16:27:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3872 invoked by uid 500); 3 Feb 2009 16:27:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3861 invoked by uid 99); 3 Feb 2009 16:27:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 08:27:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 16:27:19 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n13GQt5P012511
	for <java-user@lucene.apache.org>; Tue, 3 Feb 2009 11:26:56 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <49887052.1010801@informatics.jax.org>
Date: Tue, 03 Feb 2009 11:26:58 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: waaaay too many files in the index!
References: <4988621A.40207@propylon.com>
In-Reply-To: <4988621A.40207@propylon.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.1.360522, Antispam-Engine: 2.6.1.350677, Antispam-Data: 2009.2.3.161618
X-PerlMx-Spam: Gauge=IIIIIII, Probability=8%, Report='BODY_SIZE_1400_1499 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __STOCK_SUBJ_9 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Did you optimize your index?

If not, depending on your merge factor, this could be a very normal 
index for you.

-Matt

John Byrne wrote:
> Hi,
>
> I've got a weird problem with a lucene index, using 2.3.1. The index 
> contains 6660 files. I don't know how this happened.Maybe somone can 
> tell me something about the files themselves? (examples below)
>
> On one day, between 10 and 40 of these files were being created every 
> minute. The index updates are triggered by updates to an SVN 
> repository, but I can't find any corresponding activity in the SVN logs.
>
> The lucene files all have names like this:
>
> _1qsw.cfs
> _1qsx.cfs
> _1qsy.cfs
> _1qsz.cfs
> _1qt0.cfs
>
> and are mostly < 5K in size.
>
> My application uses just one instance each of 
> IndexReader/IndexWriter/IndexSearcher. From looking at
>
> Can anyone shed any light on these files? I'm not too hopeful about 
> fixing this index because we are getting "too many open files", even 
> with an unlimited ulimit, but any info/suggestions would be great. 
> Thanks.
>
> -John
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 17:25:44 2009
Return-Path: <java-user-return-38395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30776 invoked from network); 3 Feb 2009 17:25:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 17:25:44 -0000
Received: (qmail 6313 invoked by uid 500); 3 Feb 2009 17:25:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6287 invoked by uid 500); 3 Feb 2009 17:25:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6275 invoked by uid 99); 3 Feb 2009 17:25:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 09:25:36 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 17:25:26 +0000
Received: by wa-out-1112.google.com with SMTP id m33so1104131wag.5
        for <java-user@lucene.apache.org>; Tue, 03 Feb 2009 09:25:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=k+L1cSfz72dtfiLvfK5AMr/SJXJohq28LPcU0vzYPn0=;
        b=gDu1erJaPb0f6Cj1FzzONvTJqY6eKrL5vuJLPCfZGPb76UQCPrblDFleD66bRR/ExH
         qlTh4g6hSvUh/7EsDr3l4lTkey9A/EqgK4xy6fYf15lCvdrdpr6sUaHLRJYGlNYNIAvB
         gi4FUlLn+1vzfDOwZoIAJQ8b7tYoYa84iNWWg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WeJnhRDLT9RGg+k217U/cdbJv6tLGuWulJ63ovecOuNagADmbnXR2xfdGuoUnde3qo
         kEpBrrsD11bn2Mdt1z2DzJ8Ov0xVXtWLXIbaz/nt0dPb6ylFXc20tR7Lqw6K2HQPFJsD
         DMeNHcxxohJZ2CP7Iwr1Dns6WhfuesUhmM4U0=
MIME-Version: 1.0
Received: by 10.114.124.1 with SMTP id w1mr3812439wac.135.1233681905124; Tue, 
	03 Feb 2009 09:25:05 -0800 (PST)
In-Reply-To: <4988621A.40207@propylon.com>
References: <4988621A.40207@propylon.com>
Date: Tue, 3 Feb 2009 09:25:05 -0800
Message-ID: <652776090902030925h574f0166iff1a77328e1326db@mail.gmail.com>
Subject: Re: waaaay too many files in the index!
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646c600b88588046206f312
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646c600b88588046206f312
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Tue, Feb 3, 2009 at 7:26 AM, John Byrne <john.byrne@propylon.com> wrote:

> Hi,
>
> I've got a weird problem with a lucene index, using 2.3.1. The index
> contains 6660 files. I don't know how this happened.Maybe somone can tell me
> something about the files themselves? (examples below)
>
> On one day, between 10 and 40 of these files were being created every
> minute. The index updates are triggered by updates to an SVN repository, but
> I can't find any corresponding activity in the SVN logs.
>
> The lucene files all have names like this:
>
> _1qsw.cfs
> _1qsx.cfs
> _1qsy.cfs
> _1qsz.cfs
> _1qt0.cfs
>
> and are mostly < 5K in size.
>
> My application uses just one instance each of
> IndexReader/IndexWriter/IndexSearcher. From looking at
>
> Can anyone shed any light on these files? I'm not too hopeful about fixing
> this index because we are getting "too many open files", even with an
> unlimited ulimit, but any info/suggestions would be great. Thanks.
>

If you're using linux you can up the number of file descriptors by writing a
value to proc:

   echo 100000 > /proc/sys/fs/file-max  (
http://lists.plug.phoenix.az.us/pipermail/plug-discuss/2000-September/005508.html
)


>
> -John
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163646c600b88588046206f312--

From java-user-return-38396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 18:23:21 2009
Return-Path: <java-user-return-38396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78842 invoked from network); 3 Feb 2009 18:23:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 18:23:21 -0000
Received: (qmail 10952 invoked by uid 500); 3 Feb 2009 18:23:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10920 invoked by uid 500); 3 Feb 2009 18:23:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10909 invoked by uid 99); 3 Feb 2009 18:23:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 10:23:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 18:23:07 +0000
Received: by yx-out-2324.google.com with SMTP id 3so678212yxj.5
        for <java-user@lucene.apache.org>; Tue, 03 Feb 2009 10:22:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=YItr2Gm/9BGbuPaZtQgUz1HqHCy444wrSsvT0PQk/5g=;
        b=jH7x9tco6Cym6Bx4auw3GIm4jplLy8f+A5UGg2V7HRLeULKaLSgwvOumUJmqIVlmui
         J4e+wzsgsV8/8ZtHfoBTxyaEhvG3uYo+JnHhBMREmgdYEfDwoyW+SuDYIxnj263rsZu0
         8H5VjMuoJLrVwvTbRizfLM/Oydd+toFqy6c7A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KHFMR0AuBnaZZIfE5+s3ssrIgbK8dNr25Rb5XZoLza/ZmQxOshycAmBW3kZQASRWOs
         WdL3UiMe7dNjY+RNQH1cEeMrF6TKzn1a2Ag7P5UKiU5Cu+GXK53703PQ4lEZ9FEWsWoU
         yY8tdDdMfA5wRhVYMDF6w1SwPGnFWLwlLKqao=
MIME-Version: 1.0
Received: by 10.90.56.17 with SMTP id e17mr2232422aga.51.1233685366507; Tue, 
	03 Feb 2009 10:22:46 -0800 (PST)
In-Reply-To: <4988621A.40207@propylon.com>
References: <4988621A.40207@propylon.com>
Date: Tue, 3 Feb 2009 13:22:46 -0500
Message-ID: <359a92830902031022r7fe35226o5028474acfe61ede@mail.gmail.com>
Subject: Re: waaaay too many files in the index!
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636283828090982046207c245
X-Virus-Checked: Checked by ClamAV on apache.org

--001636283828090982046207c245
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

What are your IndexWriter MergFactor and MergeDocs set to? Also, are
the dates on all these files indicative of all being create during the same
indexing run?

Finally, how many documents are you indexing?

Best
Erick

On Tue, Feb 3, 2009 at 10:26 AM, John Byrne <john.byrne@propylon.com> wrote:

> Hi,
>
> I've got a weird problem with a lucene index, using 2.3.1. The index
> contains 6660 files. I don't know how this happened.Maybe somone can tell me
> something about the files themselves? (examples below)
>
> On one day, between 10 and 40 of these files were being created every
> minute. The index updates are triggered by updates to an SVN repository, but
> I can't find any corresponding activity in the SVN logs.
>
> The lucene files all have names like this:
>
> _1qsw.cfs
> _1qsx.cfs
> _1qsy.cfs
> _1qsz.cfs
> _1qt0.cfs
>
> and are mostly < 5K in size.
>
> My application uses just one instance each of
> IndexReader/IndexWriter/IndexSearcher. From looking at
>
> Can anyone shed any light on these files? I'm not too hopeful about fixing
> this index because we are getting "too many open files", even with an
> unlimited ulimit, but any info/suggestions would be great. Thanks.
>
> -John
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636283828090982046207c245--

From java-user-return-38397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 18:24:51 2009
Return-Path: <java-user-return-38397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79712 invoked from network); 3 Feb 2009 18:24:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 18:24:51 -0000
Received: (qmail 14638 invoked by uid 500); 3 Feb 2009 18:24:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13898 invoked by uid 500); 3 Feb 2009 18:24:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 73147 invoked by uid 99); 3 Feb 2009 13:25:00 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
From: Jochen =?iso-8859-1?q?Wersd=F6rfer?= <jw@solute.de>
Organization: solute-gmbh
To: <java-user@lucene.apache.org>
Subject: term frequency normalization
Date: Tue, 3 Feb 2009 14:26:28 +0100
User-Agent: KMail/1.9.10
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-ID: <200902031426.29029.jw@solute.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

i'd like to use the term frequency normalization described in

http://wiki.apache.org/lucene-java/TREC%202007%20Million%20Queries%20Track%20-%20IBM%20Haifa%20Team

so that the term frequency tf becomes

tf(f, d) = log(1 + feq(t, d)) / log(1 + avgFreq(d))

The easiest way to change the tf calculation would be overwriting
tf in an own implementation of Similarity like it's done in
SweetSpotSimilarity. But the average term frequency of the
document is missing. Is there a simple way to get or calc this
number?

regards,
jochen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 19:40:47 2009
Return-Path: <java-user-return-38398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7066 invoked from network); 3 Feb 2009 19:40:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 19:40:47 -0000
Received: (qmail 34350 invoked by uid 500); 3 Feb 2009 19:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34329 invoked by uid 500); 3 Feb 2009 19:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34316 invoked by uid 99); 3 Feb 2009 19:40:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 11:40:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 19:40:29 +0000
Received: by wa-out-1112.google.com with SMTP id m33so1133210wag.5
        for <java-user@lucene.apache.org>; Tue, 03 Feb 2009 11:40:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=yQyiZbD4mEF3+zflHkEywJ2kfUg/5veGAF+8jnlblm4=;
        b=Ad6qno/xj+X1z1yCdxHo5We6tbZHExnwIaR9YWF+YJ9EVSft+2LLngbTaoJAaxbyiW
         Mu5927WOc82+S4cWBYDbcd/Z2mnjqPdOoHtCOhOnusj71sguyk9QIzjIcj8DeBjkOZ65
         sSzf8obM9+7yIBEZ0LA6bwuGL8QRqY6vNNM5E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=eMsxUyTEbcFWQQEhe8dFMtsDyC9Cz5UF8ugocFO5HjjHgNeWp22KLuAHKq8SLIN7C9
         esaMe+0AFJ164yXrX1akkegBnqXH0Z4oy476oI6OPi52i2x9F0aB2nLezkJFOk78BiUt
         Mdc4oJpH0FjOKNf33GbyqFhv2crX1Y1jwsaLs=
MIME-Version: 1.0
Received: by 10.114.72.1 with SMTP id u1mr808503waa.33.1233690007915; Tue, 03 
	Feb 2009 11:40:07 -0800 (PST)
In-Reply-To: <7770.55606.qm@web26002.mail.ukl.yahoo.com>
References: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>
	 <7770.55606.qm@web26002.mail.ukl.yahoo.com>
Date: Tue, 3 Feb 2009 11:40:07 -0800
Message-ID: <652776090902031140h370cb16fo600d53c5b7924a03@mail.gmail.com>
Subject: Re: Poor QPS with highlighting
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636417c17af4bc1046208d68b
X-Virus-Checked: Checked by ClamAV on apache.org

--001636417c17af4bc1046208d68b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Tue, Feb 3, 2009 at 1:14 AM, mark harwood <markharw00d@yahoo.co.uk>wrote:

> >>My documents are quite big sometimes up to 300ktokens.
>
> You could look at indexing them as seperate documents using overlapping
> sections of text. Erik used this for one of his projects.
>

Can you describe this in a little more detail; I'm not exactly sure what you
mean.


> Cheers
> Mark
>
>
>
> ----- Original Message ----
> From: Michael Stoppelman <stopman@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, 3 February, 2009 7:24:06
> Subject: Poor QPS with highlighting
>
> Hi all,
>
> My search backends are only able to eek out 13-15 qps even with the entire
> index in memory (this makes it very expensive to scale). According to my
> YourKit profiler 80% of the program's time ends up in highlighting. With
> highlighting disabled my backend gets about 45-50 qps (cheaper scaling)!
> We're using Mark's TokenSources contrib. to make reconstructing of the
> document quicker. I was contemplating patching the index to store offsets
> for every term (instead of just the ordinal positions) so that I could make
> the highlighting faster (since you would know where you hit in the document
> on the search pass). I saw this thread from 2004:
> http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg04743.html -
> which asks about adding offsets to the index but it was decided against
> because it would make the index too large. I can totally understand this;
> but as machines get more beefy it would probably be nice to make this
> optional since having 15 qps vs 50qps is quite a trade-off right now. Are
> other folks seeing this? My documents are quite big sometimes up to 300k
> tokens. Also my document fields are compressed which is also a time sink
> for
> the cpu.
>
> Please let me know if you need more details, happy to share.
>
> Sincerely,
> M
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636417c17af4bc1046208d68b--

From java-user-return-38399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 19:53:50 2009
Return-Path: <java-user-return-38399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12566 invoked from network); 3 Feb 2009 19:53:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 19:53:50 -0000
Received: (qmail 67973 invoked by uid 500); 3 Feb 2009 19:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67950 invoked by uid 500); 3 Feb 2009 19:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67939 invoked by uid 99); 3 Feb 2009 19:53:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 11:53:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sylvaintersideral@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 19:53:36 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2060435wfc.20
        for <java-user@lucene.apache.org>; Tue, 03 Feb 2009 11:53:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=QUGWaLl3+E4TQ0wDgYBQZuqRSIiH5OS2LrYExCCSGbo=;
        b=ojZcr2SY03VXXErFHJEPqzQzASLfQfLAAo0tApGSgJzHhIPwqsLuYmRQlh/r/vhExK
         AGviHLUhQ63++3Uc4JNbuW9UN+VnMmSKCzdGlEmGVuCg0A75EwNxSWCMI0tFe5CyzWei
         0JWUxXjpqO0yCqkzbF3HxyHQSTlLAc/vZAubI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IAc6GBB7yHkzGv0b6LQ33O+XUIMUpBwEvhDaGKWu2FLzwEwx3BRzb1pOzNgMQ6++ei
         1in7I6NMnlReFlroUHFBtJQhiC6c+LcoVRkqrBvhQ+P90NpfaIqM+lPF1FcISFpuTKyx
         IF+6JIc8tLXy1bnTe+NWCg0jMJNcEsYXZ44WM=
MIME-Version: 1.0
Received: by 10.142.125.9 with SMTP id x9mr2503506wfc.38.1233690796246; Tue, 
	03 Feb 2009 11:53:16 -0800 (PST)
In-Reply-To: <359a92830902010909w4e8bdb87y126d5ab3b825afbe@mail.gmail.com>
References: <49857A64.9060009@gmail.com>
	 <359a92830902010909w4e8bdb87y126d5ab3b825afbe@mail.gmail.com>
Date: Tue, 3 Feb 2009 20:53:16 +0100
Message-ID: <83d115ac0902031153l6d2a8c24t709a895241d1c3f2@mail.gmail.com>
Subject: Re: Set a field as required in a MultiFieldQueryParser
From: Sylvain <sylvaintersideral@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd228b8ac4873046209050c
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd228b8ac4873046209050c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

What I wanted to do was to set at least one "SHOULD" field as required in a
MFQP. Because of the MUST field I had, even if no SHOULD field matched the
query, all the documents which had the corresponding MUST field were
returned. I found a very easy solution to solve my problem ::

BooleanQuery myQuery = (BooleanQuery)myMFQP.parse(queries, fields,
booleanClauses, analyzer)
myQuery.setMinimumNumbersShouldMatch(1)
mySearcher.search(myQuery)

And it worked ! Now my results must have at least one "SHOULD" field that
matches the query.

Thanks for your explanations !

2009/2/1 Erick Erickson <erickerickson@gmail.com>

> I think query.toString() is your friend here. I'm having a hard
> time figuring out, from your description, what you actually want,
> so maybe some examples would help too.
>
> If your users enter terms for each field, then it seems to me that
> you'd want MUST between clauses (in which case MultiFieldQueryParser
> seems unnecesary). That is, if your form is somethinng like
> title: <user enters term>
> description: <user enters another term>
> category: <user enters category>
>
> If you have them enter just a single term, that is your form looks
> something like
> word:<user enters term to find in title OR description OR etc>
> category: <user enters category>
>
>  and want to form a query like
> (title:term OR description:term OR etc:term) AND category:cat, it's not
> clear from the docs how you would create this in a *single* MFQP. But
> you could easily use MFQP to form the (a OR b OR c) clause, add that
> to a BoleanQuery with MUST, and then create your simple query on
> category and add *that* as a second MUST clause in your BooleanQuery
> and use that for your search.
>
> HTH
> Erick
>
>
> On Sun, Feb 1, 2009 at 5:33 AM, Sylvain <sylvaintersideral@gmail.com>
> wrote:
>
> > Hello everybody,
> >
> > I have a search app in which the user can specify in which category the
> > documents he's searching are. So all my indexed documents have a
> > "category" field as well as other fields such as title, description,
> > etc. So when the user enters his query, only the documents that are in
> > the given category and which match a part of the query must be returned.
> >
> > So I tried to use a MultiFieldQueryParser with SHOULD clauses on the
> > title, description, etc and a MUST clause on the category field. It
> > works pretty well but the problem is that _all_ the documents in the
> > searched category are returned, even if they don't have any similarity
> > with the search string (except for the category of course).
> >
> > I think that's because of the MUST field which takes precedence on the
> > SHOULD fields or something like that ? I saw in the BooleanQuery the
> > method setMinimumNumberShouldMatch(). I think I should use this with my
> > MultiFieldQueryParser to set a minimum of 1 or 2 fields, but this method
> > only exists for BooleanQuery instances so I can't use it... I thought
> > about using directly a BooleanQuery but I want to use the FrenchAnalyzer
> > for the request.
> >
> > Any idea on how to achieve this ?
> >
> > Thanks for your help !
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--000e0cd228b8ac4873046209050c--

From java-user-return-38400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 20:55:25 2009
Return-Path: <java-user-return-38400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33787 invoked from network); 3 Feb 2009 20:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 20:55:25 -0000
Received: (qmail 95900 invoked by uid 500); 3 Feb 2009 20:55:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95871 invoked by uid 500); 3 Feb 2009 20:55:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95860 invoked by uid 99); 3 Feb 2009 20:55:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 12:55:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [87.248.110.137] (HELO n20.bullet.mail.ukl.yahoo.com) (87.248.110.137)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Feb 2009 20:55:09 +0000
Received: from [217.146.182.177] by n20.bullet.mail.ukl.yahoo.com with NNFMP; 03 Feb 2009 20:53:28 -0000
Received: from [87.248.111.150] by t3.bullet.ukl.yahoo.com with NNFMP; 03 Feb 2009 20:53:28 -0000
Received: from [127.0.0.1] by omp207.mail.ukl.yahoo.com with NNFMP; 03 Feb 2009 20:53:28 -0000
X-Yahoo-Newman-Id: 55300.68846.bm@omp207.mail.ukl.yahoo.com
Received: (qmail 92346 invoked from network); 3 Feb 2009 20:53:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=ih7rfJjN4S2mohXzV6rr12SeOLZd3G5zKv0KNFQczD+HPEgmFPDN/pORs22mU7j2hXjXFNkuqccjt7tulNzWJ3+71V8cAo7wAsu1K0ZnzKpUwPqWkTB/RihwZ8rmXQ1ATOePbLK812+d9+gzFyDfsc+6kE2HZC8ccoVei9hKQJc=  ;
Received: from unknown (HELO ?192.168.2.50?) (markharw00d@194.106.34.5 with plain)
  by smtp142.mail.ukl.yahoo.com with SMTP; 3 Feb 2009 20:53:27 -0000
X-YMail-OSG: MJky4CkVM1narKejaGnDcBAxM9Px8SRIiQxX3.wT_EsJxdiLKdYcyu4cV_I_lKFt.Ktn4dREO9aHkktpxhMX_f0zFg4cta0USMxX9RKVlbscZt9ShQpx2eL2nP310uOil8ZY7FloWTOmakOcg7Nyauu7O.8iOu0aIek1qDKzmewXT7v6pADvmUFRlwOGzw--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <4988AEA1.2060805@yahoo.co.uk>
Date: Tue, 03 Feb 2009 20:52:49 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Poor QPS with highlighting
References: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>	 <7770.55606.qm@web26002.mail.ukl.yahoo.com> <652776090902031140h370cb16fo600d53c5b7924a03@mail.gmail.com>
In-Reply-To: <652776090902031140h370cb16fo600d53c5b7924a03@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> Can you describe this in a little more detail; I'm not exactly sure what you
> mean.
>   

Break your large text documents into multiple Lucene documents. Rather 
than dividing them up into entirely discreet chunks of text consider 
storing/indexing *overlapping* sections of text with an overlap as big 
as the largest "slop" factor you use on Phrase/Span queries so that you 
don't cut any potential phrases in half and fail to match e.g.

This non-overlapping indexing scheme will not match a search for "George 
Bush"

    Doc 1 = "....  outgoing president George "
    Doc 2=  "Bush stated that ..."

While this overlapping scheme will match...
    Doc 1 = "....  outgoing president George "
    Doc 2=  "president George Bush stated that ..."

This fragmenting approach helps avoid the performance cost of 
highlighting very large documents.

The remaining issue is to remove duplicates in your search results when 
you match multiple chunks e.g. Lucene Docs #1 and #2 both refer to Input 
Doc#1 and will match a search for "president". You will need to store a 
field for the "original document number" and remove any duplicates (or 
merge them in the display if that is what is required).

Cheers,
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 03 22:48:11 2009
Return-Path: <java-user-return-38401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6342 invoked from network); 3 Feb 2009 22:48:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2009 22:48:11 -0000
Received: (qmail 53459 invoked by uid 500); 3 Feb 2009 22:48:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53439 invoked by uid 500); 3 Feb 2009 22:48:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53428 invoked by uid 99); 3 Feb 2009 22:48:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 14:48:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 22:47:56 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B3F3271C1E6; Tue,  3 Feb 2009 14:47:34 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B183571C1C3
	for <java-user@lucene.apache.org>; Tue,  3 Feb 2009 14:47:34 -0800 (PST)
Date: Tue, 3 Feb 2009 14:47:34 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Lunene 2.3-2.4 switch: Scoring change
In-Reply-To: <DF8EBBCBD8464E81A5F03BF208E71CCF@VEGA>
Message-ID: <Pine.LNX.4.64.0902031442300.29142@radix.cryptio.net>
References: <21739867.post@talk.nabble.com> <DF8EBBCBD8464E81A5F03BF208E71CCF@VEGA>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: To get the normalized scores use:
	...
: float score = hits[1].score / td.getMaxScore();

Strictly speaking, this code will not return the exact same scores as the 
deprecated Hits API.  the Hits class only normalizes the scores if the max 
score is greater then 1.0f

(yet another one of the marvolously unexpected and hard to explain nuances 
of Hits that make me happy to say goodbye to it)

: > I have project which I am trying to switch from lucene 2.3.2 to 2.4 I am
: > getting some strange scores
: > 
: > Before my code was:
: > 
: > Hits hits= searcher.search(query);
	...




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 01:37:41 2009
Return-Path: <java-user-return-38402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77523 invoked from network); 4 Feb 2009 01:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 01:37:41 -0000
Received: (qmail 22781 invoked by uid 500); 4 Feb 2009 01:37:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22747 invoked by uid 500); 4 Feb 2009 01:37:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22735 invoked by uid 99); 4 Feb 2009 01:37:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Feb 2009 17:37:34 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 01:37:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LUWhM-0006Ev-Hd
	for java-user@lucene.apache.org; Tue, 03 Feb 2009 17:37:04 -0800
Message-ID: <21822877.post@talk.nabble.com>
Date: Tue, 3 Feb 2009 17:37:04 -0800 (PST)
From: AlexElba <ramalex1@yahoo.com>
To: java-user@lucene.apache.org
Subject: TopDocCollector vs Hits: TopDocCollector slowing....
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramalex1@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I was using lucene 2.3.2 with hits and switch to lucene 2.4.0 and now I am
using TopDocCollector.

I have two queries which are running against the same index.
One query is returning 80bytes information other one is returning 2000bytes

With old Hits the query which was returning smaller data was faster which
has bigger data was slower.
After I change to TopDocCollector both big and small once returning same
time. 

Searcher is exactly the same and queries are the same only difference is in
one place I was using Hits in other TopDocCollector 

Who has any idea why, and how can I fix this?
-- 
View this message in context: http://www.nabble.com/TopDocCollector-vs-Hits%3A-TopDocCollector-slowing....-tp21822877p21822877.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 08:42:45 2009
Return-Path: <java-user-return-38403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73539 invoked from network); 4 Feb 2009 08:42:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 08:42:45 -0000
Received: (qmail 53717 invoked by uid 500); 4 Feb 2009 08:42:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53688 invoked by uid 500); 4 Feb 2009 08:42:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53677 invoked by uid 99); 4 Feb 2009 08:42:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 00:42:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 08:42:26 +0000
Received: from [213.94.211.166] (helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1LUdKE-0002Vc-6M
	for java-user@lucene.apache.org; Wed, 04 Feb 2009 08:41:40 +0000
Message-ID: <498954DA.2080800@propylon.com>
Date: Wed, 04 Feb 2009 08:42:02 +0000
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <4988621A.40207@propylon.com> <359a92830902031022r7fe35226o5028474acfe61ede@mail.gmail.com>
In-Reply-To: <359a92830902031022r7fe35226o5028474acfe61ede@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: waaaay too many files in the index!
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.7 required=3.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

MergeFactor and MergeDocs are left at default values. The indexing is 
incremental, i.e. whenever someone adds or modifys a file to in svn 
repository, the lucene index is updated, and the writer/reader/searcher 
are refreshed (closed and opened again).,

According to the svn logs for the time the files were created, a few 
hundred files were added that day.

Overall, the index would have started out with around 150,000 to 200,000 
documents, with anything from 100 to 1000 being added per day.

I don't optimize the index at any point, but I've never seen it get like 
this before.

Thanks,
John

Erick Erickson wrote:
> What are your IndexWriter MergFactor and MergeDocs set to? Also, are
> the dates on all these files indicative of all being create during the same
> indexing run?
>
> Finally, how many documents are you indexing?
>
> Best
> Erick
>
> On Tue, Feb 3, 2009 at 10:26 AM, John Byrne <john.byrne@propylon.com> wrote:
>
>   
>> Hi,
>>
>> I've got a weird problem with a lucene index, using 2.3.1. The index
>> contains 6660 files. I don't know how this happened.Maybe somone can tell me
>> something about the files themselves? (examples below)
>>
>> On one day, between 10 and 40 of these files were being created every
>> minute. The index updates are triggered by updates to an SVN repository, but
>> I can't find any corresponding activity in the SVN logs.
>>
>> The lucene files all have names like this:
>>
>> _1qsw.cfs
>> _1qsx.cfs
>> _1qsy.cfs
>> _1qsz.cfs
>> _1qt0.cfs
>>
>> and are mostly < 5K in size.
>>
>> My application uses just one instance each of
>> IndexReader/IndexWriter/IndexSearcher. From looking at
>>
>> Can anyone shed any light on these files? I'm not too hopeful about fixing
>> this index because we are getting "too many open files", even with an
>> unlimited ulimit, but any info/suggestions would be great. Thanks.
>>
>> -John
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.233 / Virus Database: 270.10.17/1933 - Release Date: 2/3/2009 5:48 PM
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 08:49:15 2009
Return-Path: <java-user-return-38404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76417 invoked from network); 4 Feb 2009 08:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 08:49:14 -0000
Received: (qmail 61457 invoked by uid 500); 4 Feb 2009 08:49:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61428 invoked by uid 500); 4 Feb 2009 08:49:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61417 invoked by uid 99); 4 Feb 2009 08:49:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 00:49:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 08:49:01 +0000
Received: by wa-out-1112.google.com with SMTP id m33so1299927wag.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 00:48:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=5wITfIdyhDdwlw5vmhHpJASKAssx+9WjqRTYPwLYNlY=;
        b=AQgvd3MWTvhoMNKRG0Ojcyb0nggM0OStwnJ/7pz4qLX35ga/YtbkBxtxNGvrsEgzzA
         DFmJ381T284xDmV4ERrbHJ1+w3l2iosQfKNp02GbA5CP+NCWF4htsHwqS5+pXdFY4QFo
         Uf4lA4Vz4dIs8lAcNKQYqHDzOh0kGPHfyZTIk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=l8aN2Ah3v0iNMRmODOHSh9loYKeOij5m/xkqFx7HHHCtWH317kITH6uW0aD1jyqKth
         eIbVJxBjepuPb3eKIX8fTNeh4ojgxgtbYPhjqhhwlFr5KnbfYojId+XfLeC14ZAHb0Bd
         ozP5ItI+ny/SBMEO2UQhb7tLiItymOOG7cLKI=
MIME-Version: 1.0
Received: by 10.114.74.18 with SMTP id w18mr705968waa.205.1233737320534; Wed, 
	04 Feb 2009 00:48:40 -0800 (PST)
In-Reply-To: <4988AEA1.2060805@yahoo.co.uk>
References: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>
	 <7770.55606.qm@web26002.mail.ukl.yahoo.com>
	 <652776090902031140h370cb16fo600d53c5b7924a03@mail.gmail.com>
	 <4988AEA1.2060805@yahoo.co.uk>
Date: Wed, 4 Feb 2009 00:48:40 -0800
Message-ID: <652776090902040048w16f98c94t667d1b8df47b68ba@mail.gmail.com>
Subject: Re: Poor QPS with highlighting
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636417931bc9493046213daf2
X-Virus-Checked: Checked by ClamAV on apache.org

--001636417931bc9493046213daf2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks Mark for the explanation. I think your solution would definitely
change the tf-idf scoring for documents since your field is now split up
over multiple docs.  One option to get around the changing scoring would be
to to run a completely separate index for highlighting (with the overlapping
docs you described). It still seems like storing the offsets would be the
most efficient solution since I wouldn't need a new service to do the
highlighting.

M

On Tue, Feb 3, 2009 at 12:52 PM, markharw00d <markharw00d@yahoo.co.uk>wrote:

>
>  Can you describe this in a little more detail; I'm not exactly sure what
>> you
>> mean.
>>
>>
>
> Break your large text documents into multiple Lucene documents. Rather than
> dividing them up into entirely discreet chunks of text consider
> storing/indexing *overlapping* sections of text with an overlap as big as
> the largest "slop" factor you use on Phrase/Span queries so that you don't
> cut any potential phrases in half and fail to match e.g.
>
> This non-overlapping indexing scheme will not match a search for "George
> Bush"
>
>   Doc 1 = "....  outgoing president George "
>   Doc 2=  "Bush stated that ..."
>
> While this overlapping scheme will match...
>   Doc 1 = "....  outgoing president George "
>   Doc 2=  "president George Bush stated that ..."
>
> This fragmenting approach helps avoid the performance cost of highlighting
> very large documents.
>
> The remaining issue is to remove duplicates in your search results when you
> match multiple chunks e.g. Lucene Docs #1 and #2 both refer to Input Doc#1
> and will match a search for "president". You will need to store a field for
> the "original document number" and remove any duplicates (or merge them in
> the display if that is what is required).
>
> Cheers,
> Mark
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636417931bc9493046213daf2--

From java-user-return-38405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 10:13:28 2009
Return-Path: <java-user-return-38405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38736 invoked from network); 4 Feb 2009 10:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 10:13:28 -0000
Received: (qmail 79779 invoked by uid 500); 4 Feb 2009 10:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79504 invoked by uid 500); 4 Feb 2009 10:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79493 invoked by uid 99); 4 Feb 2009 10:13:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 02:13:21 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 10:13:10 +0000
Received: by gxk6 with SMTP id 6so2317449gxk.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 02:12:49 -0800 (PST)
Received: by 10.150.182.17 with SMTP id e17mr1921569ybf.59.1233742368740;
        Wed, 04 Feb 2009 02:12:48 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id o29sm12586188elf.9.2009.02.04.02.12.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 04 Feb 2009 02:12:47 -0800 (PST)
Message-Id: <D80F716A-7FEB-414A-9C1E-A2DD2A82EF19@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <498954DA.2080800@propylon.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: waaaay too many files in the index!
Date: Wed, 4 Feb 2009 05:12:46 -0500
References: <4988621A.40207@propylon.com> <359a92830902031022r7fe35226o5028474acfe61ede@mail.gmail.com> <498954DA.2080800@propylon.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


These files are normal Lucene segment files (in compound file  
format).  What's odd is that Lucene is not merging them down to a  
smaller set of segments.

Have you done any advanced things, like customize the deletion or  
merge policy?

When you close you writer, are you using just close() or close(false)?

If you can set the InfoStream on the writer for one of your  
incremental update sessions and post the results, maybe that will shed  
some light one what's going on.

Are you sure there are no exceptions being logged somewhere?  Lucene  
runs merges with background threads (by default), and if those threads  
hit unhandled exceptions it's possible they are logged somewhere you  
wouldn't normally look?

Mike

John Byrne wrote:

> MergeFactor and MergeDocs are left at default values. The indexing  
> is incremental, i.e. whenever someone adds or modifys a file to in  
> svn repository, the lucene index is updated, and the writer/reader/ 
> searcher are refreshed (closed and opened again).,
>
> According to the svn logs for the time the files were created, a few  
> hundred files were added that day.
>
> Overall, the index would have started out with around 150,000 to  
> 200,000 documents, with anything from 100 to 1000 being added per day.
>
> I don't optimize the index at any point, but I've never seen it get  
> like this before.
>
> Thanks,
> John
>
> Erick Erickson wrote:
>> What are your IndexWriter MergFactor and MergeDocs set to? Also, are
>> the dates on all these files indicative of all being create during  
>> the same
>> indexing run?
>>
>> Finally, how many documents are you indexing?
>>
>> Best
>> Erick
>>
>> On Tue, Feb 3, 2009 at 10:26 AM, John Byrne  
>> <john.byrne@propylon.com> wrote:
>>
>>
>>> Hi,
>>>
>>> I've got a weird problem with a lucene index, using 2.3.1. The index
>>> contains 6660 files. I don't know how this happened.Maybe somone  
>>> can tell me
>>> something about the files themselves? (examples below)
>>>
>>> On one day, between 10 and 40 of these files were being created  
>>> every
>>> minute. The index updates are triggered by updates to an SVN  
>>> repository, but
>>> I can't find any corresponding activity in the SVN logs.
>>>
>>> The lucene files all have names like this:
>>>
>>> _1qsw.cfs
>>> _1qsx.cfs
>>> _1qsy.cfs
>>> _1qsz.cfs
>>> _1qt0.cfs
>>>
>>> and are mostly < 5K in size.
>>>
>>> My application uses just one instance each of
>>> IndexReader/IndexWriter/IndexSearcher. From looking at
>>>
>>> Can anyone shed any light on these files? I'm not too hopeful  
>>> about fixing
>>> this index because we are getting "too many open files", even with  
>>> an
>>> unlimited ulimit, but any info/suggestions would be great. Thanks.
>>>
>>> -John
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>   
>> ------------------------------------------------------------------------
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG - http://www.avg.com Version: 8.0.233 / Virus  
>> Database: 270.10.17/1933 - Release Date: 2/3/2009 5:48 PM
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 10:29:38 2009
Return-Path: <java-user-return-38406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44928 invoked from network); 4 Feb 2009 10:29:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 10:29:38 -0000
Received: (qmail 6836 invoked by uid 500); 4 Feb 2009 10:29:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6810 invoked by uid 500); 4 Feb 2009 10:29:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6799 invoked by uid 99); 4 Feb 2009 10:29:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 02:29:30 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 10:29:21 +0000
Received: by gxk6 with SMTP id 6so2320472gxk.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 02:29:00 -0800 (PST)
Received: by 10.150.227.14 with SMTP id z14mr2943527ybg.219.1233743340509;
        Wed, 04 Feb 2009 02:29:00 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id e27sm12665939elf.7.2009.02.04.02.28.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 04 Feb 2009 02:29:00 -0800 (PST)
Message-Id: <39D2833E-C1BE-425A-B7E8-47C17748E792@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4881ECF1AB752843908A20CEE07A8EB10D5597@buf-ex01.cymfony.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: MergePolicy$MergeException during IndexWriter.addIndexesNoOptimize
Date: Wed, 4 Feb 2009 05:28:58 -0500
References: <4881ECF1AB752843908A20CEE07A8EB10D5597@buf-ex01.cymfony.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Hmm... this is not in fact considered a fatal error to
addIndexesNoOptimize. If you were to optimize(), you would then see an
exception thrown.

Here's why: when addIndexesNoOptimize runs, it simply appends the
imported segment description to the internal SegmentInfos and then
asks the MergePolicy to do merging in based on its normal criteria (eg
file size).

Then, addIndexesNoOptimize will simply copy over any segments from the
imported index that hadn't been merged according to normal criteria.

If there is an exception hit when merging in the imported segments,
that is fatal and will be thrown back to you.

If instead there is an exception when doing an internal-only merge,
which is non-essential to addIndexesNoOptimize job, this is not fatal
because the index is perfectly usable (with the unmerged segments),
and addIndexesNoOptimize has still done its job (merging in or copying
over all segments from the imported index).

That merge exceptions will be also hit during "normal" merging too
(not just addIndexesNoOptimize).

It's probably best to subclass ConcurrentMergeScheduler, and override
its handleMergeException method, so that you can do something when a
non-essential BG merge hits an exception.

Mike

David Fertig wrote:

> Hello. Hopefully this is the correct forum.  I am currently using
> release 2.3.2 as my stable release, but have tried this 2.4 as well.
>
>
>
> I have 4 threads indexing documents into separate indexes and then
> merging them into a larger master index.
>
>
>
> If the master index is previously corrupted (such as a file is
> 'accidentally' removed), and an exception occurs during merge with
> IndexWriter.addIndexesNoOptimize(Directory[]), I have been unable to
> catch it and report the index.  It would appear that lucene does not
> catch or log it either.
>
>
>
> Thank you in advance,
>
> Dave
>
>
>
>
>
> Exception in thread "Thread-5"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.io.FileNotFoundException:
> /entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
> directory)
>
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(Concurr
> entMergeScheduler.java:271)
>
> Caused by: java.io.FileNotFoundException:
> /entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
> directory)
>
>        at java.io.RandomAccessFile.open(Native Method)
>
>        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>
>        at
> org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDir
> ectory.java:506)
>
>        at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java
> :536)
>
>        at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>
>        at
> org 
> .apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
> a:70)
>
>        at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
> 277)
>
>        at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>
>        at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>
>        at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)
>
>        at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
>
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(Concurr
> entMergeScheduler.java:240)
>
> Exception in thread "Thread-6"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.io.FileNotFoundException:
> /entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
> directory)
>
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(Concurr
> entMergeScheduler.java:271)
>
> Caused by: java.io.FileNotFoundException:
> /entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
> directory)
>
>        at java.io.RandomAccessFile.open(Native Method)
>
>        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>
>        at
> org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDir
> ectory.java:506)
>
>        at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java
> :536)
>
>        at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>
>        at
> org 
> .apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
> a:70)
>
>        at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
> 277)
>
>        at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>
>        at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>
>        at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)
>
>        at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
>
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(Concurr
> entMergeScheduler.java:240)
>
> Exception in thread "Thread-7"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.io.FileNotFoundException:
> /entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
> directory)
>
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(Concurr
> entMergeScheduler.java:271)
>
> Caused by: java.io.FileNotFoundException:
> /entixd/dfertig/indexes/moreover/20090115/0/_0.cfs (No such file or
> directory)
>
>        at java.io.RandomAccessFile.open(Native Method)
>
>        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>
>        at
> org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDir
> ectory.java:506)
>
>        at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java
> :536)
>
>        at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>
>        at
> org 
> .apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.jav
> a:70)
>
>        at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
> 277)
>
>        at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>
>        at
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>
>        at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)
>
>        at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
>
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(Concurr
> entMergeScheduler.java:240)
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 12:11:12 2009
Return-Path: <java-user-return-38407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72854 invoked from network); 4 Feb 2009 12:11:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 12:11:12 -0000
Received: (qmail 56533 invoked by uid 500); 4 Feb 2009 12:11:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56508 invoked by uid 500); 4 Feb 2009 12:11:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56495 invoked by uid 99); 4 Feb 2009 12:11:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 04:11:05 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 12:10:57 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 435EC3BA36
	for <java-user@lucene.apache.org>; Wed,  4 Feb 2009 04:10:36 -0800 (PST)
Message-Id: <8910D8F5-3854-47C3-85C6-62981857A355@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21739867.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Lunene 2.3-2.4 switch: Scoring change
Date: Wed, 4 Feb 2009 07:10:35 -0500
References: <21739867.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

How are you using the score?  The fact that you want them back to the  
old way implies to me that you are using them for something other than  
for sorting the results.


On Jan 29, 2009, at 8:21 PM, AlexElba wrote:

>
> Hello,
> I have project which I am trying to switch from lucene 2.3.2 to 2.4  
> I am
> getting some strange scores
>
> Before my code was:
>
> Hits hits= searcher.search(query);
> Float score = hits.score(1)
>
> and scores from hist was from 0-1; 1 was 100% match
>
> I change code to use hit collector
>
>  TopDocCollector collector = new TopDocCollector(999999);
>     searcher.search(query, collector);
>     ScoreDocs[] hits= collector.topDocs().scoreDocs;
>     int docId = hits[1].doc;
>     Document document = searcher.doc(docId);
>    Float score = hits[1].score
>
> The scores from this class are from 2-12.5 for the same query.
>
> How to change my scores to old way?
>
>
>
>
>
> -- 
> View this message in context: http://www.nabble.com/Lunene-2.3-2.4-switch%3A-Scoring-change-tp21739867p21739867.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ












---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 12:15:11 2009
Return-Path: <java-user-return-38408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74906 invoked from network); 4 Feb 2009 12:15:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 12:15:11 -0000
Received: (qmail 64943 invoked by uid 500); 4 Feb 2009 12:15:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64919 invoked by uid 500); 4 Feb 2009 12:15:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64908 invoked by uid 99); 4 Feb 2009 12:15:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 04:15:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 12:14:54 +0000
Received: from [213.94.211.166] (helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1LUgdp-0008Oj-Jf
	for java-user@lucene.apache.org; Wed, 04 Feb 2009 12:14:06 +0000
Message-ID: <49898684.2060706@propylon.com>
Date: Wed, 04 Feb 2009 12:13:56 +0000
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <4988621A.40207@propylon.com> <359a92830902031022r7fe35226o5028474acfe61ede@mail.gmail.com> <498954DA.2080800@propylon.com> <D80F716A-7FEB-414A-9C1E-A2DD2A82EF19@mikemccandless.com>
In-Reply-To: <D80F716A-7FEB-414A-9C1E-A2DD2A82EF19@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: waaaay too many files in the index!
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.6 required=3.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

No I'm not messing with the delete or merge policy - but  I think I know 
what went wrong though...

We have 2 instances of the application, for failover. They are never 
supposed to be active at the same time, but I just discovered a 
condition that can cause exactly that to happen. When we detect a 
failure and switch to the second instance, it was assumed that the first 
instance was dead - but it looks like it still had an open writer on the 
index, leading to...concurrent write access.

Logs confirmed that fail over happened minutes before these files 
started appearing. Mystery solved!

Thanks everyone.

Michael McCandless wrote:
>
> These files are normal Lucene segment files (in compound file 
> format).  What's odd is that Lucene is not merging them down to a 
> smaller set of segments.
>
> Have you done any advanced things, like customize the deletion or 
> merge policy?
>
> When you close you writer, are you using just close() or close(false)?
>
> If you can set the InfoStream on the writer for one of your 
> incremental update sessions and post the results, maybe that will shed 
> some light one what's going on.
>
> Are you sure there are no exceptions being logged somewhere?  Lucene 
> runs merges with background threads (by default), and if those threads 
> hit unhandled exceptions it's possible they are logged somewhere you 
> wouldn't normally look?
>
> Mike
>
> John Byrne wrote:
>
>> MergeFactor and MergeDocs are left at default values. The indexing is 
>> incremental, i.e. whenever someone adds or modifys a file to in svn 
>> repository, the lucene index is updated, and the 
>> writer/reader/searcher are refreshed (closed and opened again).,
>>
>> According to the svn logs for the time the files were created, a few 
>> hundred files were added that day.
>>
>> Overall, the index would have started out with around 150,000 to 
>> 200,000 documents, with anything from 100 to 1000 being added per day.
>>
>> I don't optimize the index at any point, but I've never seen it get 
>> like this before.
>>
>> Thanks,
>> John
>>
>> Erick Erickson wrote:
>>> What are your IndexWriter MergFactor and MergeDocs set to? Also, are
>>> the dates on all these files indicative of all being create during 
>>> the same
>>> indexing run?
>>>
>>> Finally, how many documents are you indexing?
>>>
>>> Best
>>> Erick
>>>
>>> On Tue, Feb 3, 2009 at 10:26 AM, John Byrne 
>>> <john.byrne@propylon.com> wrote:
>>>
>>>
>>>> Hi,
>>>>
>>>> I've got a weird problem with a lucene index, using 2.3.1. The index
>>>> contains 6660 files. I don't know how this happened.Maybe somone 
>>>> can tell me
>>>> something about the files themselves? (examples below)
>>>>
>>>> On one day, between 10 and 40 of these files were being created every
>>>> minute. The index updates are triggered by updates to an SVN 
>>>> repository, but
>>>> I can't find any corresponding activity in the SVN logs.
>>>>
>>>> The lucene files all have names like this:
>>>>
>>>> _1qsw.cfs
>>>> _1qsx.cfs
>>>> _1qsy.cfs
>>>> _1qsz.cfs
>>>> _1qt0.cfs
>>>>
>>>> and are mostly < 5K in size.
>>>>
>>>> My application uses just one instance each of
>>>> IndexReader/IndexWriter/IndexSearcher. From looking at
>>>>
>>>> Can anyone shed any light on these files? I'm not too hopeful about 
>>>> fixing
>>>> this index because we are getting "too many open files", even with an
>>>> unlimited ulimit, but any info/suggestions would be great. Thanks.
>>>>
>>>> -John
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>  ------------------------------------------------------------------------ 
>>>
>>>
>>>
>>> No virus found in this incoming message.
>>> Checked by AVG - http://www.avg.com Version: 8.0.233 / Virus 
>>> Database: 270.10.17/1933 - Release Date: 2/3/2009 5:48 PM
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.233 / Virus Database: 270.10.17/1933 - Release Date: 2/3/2009 5:48 PM
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 12:16:49 2009
Return-Path: <java-user-return-38409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75152 invoked from network); 4 Feb 2009 12:16:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 12:16:49 -0000
Received: (qmail 66870 invoked by uid 500); 4 Feb 2009 12:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66834 invoked by uid 500); 4 Feb 2009 12:16:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66823 invoked by uid 99); 4 Feb 2009 12:16:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 04:16:41 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 12:16:32 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 891CD87029
	for <java-user@lucene.apache.org>; Wed,  4 Feb 2009 04:16:11 -0800 (PST)
Message-Id: <F07DD663-DC4D-449B-A468-A371534E4667@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21822877.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: TopDocCollector vs Hits: TopDocCollector slowing....
Date: Wed, 4 Feb 2009 07:16:10 -0500
References: <21822877.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I presume they are both now slower, right?  Otherwise you wouldn't  
mind the speedup on the bigger one.  Hits did caching and prefetched  
things, which has it's tradeoffs.  Can you describe how you were  
measuring the queries?  How many results were you getting?



-Grant

On Feb 3, 2009, at 8:37 PM, AlexElba wrote:

>
> Hello,
>
> I was using lucene 2.3.2 with hits and switch to lucene 2.4.0 and  
> now I am
> using TopDocCollector.
>
> I have two queries which are running against the same index.
> One query is returning 80bytes information other one is returning  
> 2000bytes
>
> With old Hits the query which was returning smaller data was faster  
> which
> has bigger data was slower.
> After I change to TopDocCollector both big and small once returning  
> same
> time.
>
> Searcher is exactly the same and queries are the same only  
> difference is in
> one place I was using Hits in other TopDocCollector
>
> Who has any idea why, and how can I fix this?
> -- 
> View this message in context: http://www.nabble.com/TopDocCollector-vs-Hits%3A-TopDocCollector-slowing....-tp21822877p21822877.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ












---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 12:20:46 2009
Return-Path: <java-user-return-38410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81739 invoked from network); 4 Feb 2009 12:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 12:20:46 -0000
Received: (qmail 71610 invoked by uid 500); 4 Feb 2009 12:20:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71582 invoked by uid 500); 4 Feb 2009 12:20:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71571 invoked by uid 99); 4 Feb 2009 12:20:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 04:20:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 12:20:27 +0000
Received: by yx-out-2324.google.com with SMTP id 3so800810yxj.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 04:20:04 -0800 (PST)
Received: by 10.150.177.20 with SMTP id z20mr4524234ybe.97.1233750004348;
        Wed, 04 Feb 2009 04:20:04 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id h27sm12848462elf.17.2009.02.04.04.20.03
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 04 Feb 2009 04:20:04 -0800 (PST)
Message-Id: <65995E20-49EA-47C0-8BB1-EDB7A0FEB3DC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <49898684.2060706@propylon.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: waaaay too many files in the index!
Date: Wed, 4 Feb 2009 07:20:02 -0500
References: <4988621A.40207@propylon.com> <359a92830902031022r7fe35226o5028474acfe61ede@mail.gmail.com> <498954DA.2080800@propylon.com> <D80F716A-7FEB-414A-9C1E-A2DD2A82EF19@mikemccandless.com> <49898684.2060706@propylon.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


OK thanks for bringing closure.

Mike

John Byrne wrote:

> No I'm not messing with the delete or merge policy - but  I think I  
> know what went wrong though...
>
> We have 2 instances of the application, for failover. They are never  
> supposed to be active at the same time, but I just discovered a  
> condition that can cause exactly that to happen. When we detect a  
> failure and switch to the second instance, it was assumed that the  
> first instance was dead - but it looks like it still had an open  
> writer on the index, leading to...concurrent write access.
>
> Logs confirmed that fail over happened minutes before these files  
> started appearing. Mystery solved!
>
> Thanks everyone.
>
> Michael McCandless wrote:
>>
>> These files are normal Lucene segment files (in compound file  
>> format).  What's odd is that Lucene is not merging them down to a  
>> smaller set of segments.
>>
>> Have you done any advanced things, like customize the deletion or  
>> merge policy?
>>
>> When you close you writer, are you using just close() or  
>> close(false)?
>>
>> If you can set the InfoStream on the writer for one of your  
>> incremental update sessions and post the results, maybe that will  
>> shed some light one what's going on.
>>
>> Are you sure there are no exceptions being logged somewhere?   
>> Lucene runs merges with background threads (by default), and if  
>> those threads hit unhandled exceptions it's possible they are  
>> logged somewhere you wouldn't normally look?
>>
>> Mike
>>
>> John Byrne wrote:
>>
>>> MergeFactor and MergeDocs are left at default values. The indexing  
>>> is incremental, i.e. whenever someone adds or modifys a file to in  
>>> svn repository, the lucene index is updated, and the writer/reader/ 
>>> searcher are refreshed (closed and opened again).,
>>>
>>> According to the svn logs for the time the files were created, a  
>>> few hundred files were added that day.
>>>
>>> Overall, the index would have started out with around 150,000 to  
>>> 200,000 documents, with anything from 100 to 1000 being added per  
>>> day.
>>>
>>> I don't optimize the index at any point, but I've never seen it  
>>> get like this before.
>>>
>>> Thanks,
>>> John
>>>
>>> Erick Erickson wrote:
>>>> What are your IndexWriter MergFactor and MergeDocs set to? Also,  
>>>> are
>>>> the dates on all these files indicative of all being create  
>>>> during the same
>>>> indexing run?
>>>>
>>>> Finally, how many documents are you indexing?
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Tue, Feb 3, 2009 at 10:26 AM, John Byrne <john.byrne@propylon.com 
>>>> > wrote:
>>>>
>>>>
>>>>> Hi,
>>>>>
>>>>> I've got a weird problem with a lucene index, using 2.3.1. The  
>>>>> index
>>>>> contains 6660 files. I don't know how this happened.Maybe somone  
>>>>> can tell me
>>>>> something about the files themselves? (examples below)
>>>>>
>>>>> On one day, between 10 and 40 of these files were being created  
>>>>> every
>>>>> minute. The index updates are triggered by updates to an SVN  
>>>>> repository, but
>>>>> I can't find any corresponding activity in the SVN logs.
>>>>>
>>>>> The lucene files all have names like this:
>>>>>
>>>>> _1qsw.cfs
>>>>> _1qsx.cfs
>>>>> _1qsy.cfs
>>>>> _1qsz.cfs
>>>>> _1qt0.cfs
>>>>>
>>>>> and are mostly < 5K in size.
>>>>>
>>>>> My application uses just one instance each of
>>>>> IndexReader/IndexWriter/IndexSearcher. From looking at
>>>>>
>>>>> Can anyone shed any light on these files? I'm not too hopeful  
>>>>> about fixing
>>>>> this index because we are getting "too many open files", even  
>>>>> with an
>>>>> unlimited ulimit, but any info/suggestions would be great. Thanks.
>>>>>
>>>>> -John
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>> ------------------------------------------------------------------------
>>>>
>>>>
>>>> No virus found in this incoming message.
>>>> Checked by AVG - http://www.avg.com Version: 8.0.233 / Virus  
>>>> Database: 270.10.17/1933 - Release Date: 2/3/2009 5:48 PM
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ------------------------------------------------------------------------
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG - http://www.avg.com Version: 8.0.233 / Virus  
>> Database: 270.10.17/1933 - Release Date: 2/3/2009 5:48 PM
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 16:46:47 2009
Return-Path: <java-user-return-38411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54417 invoked from network); 4 Feb 2009 16:46:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 16:46:47 -0000
Received: (qmail 11489 invoked by uid 500); 4 Feb 2009 16:46:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11458 invoked by uid 500); 4 Feb 2009 16:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11447 invoked by uid 99); 4 Feb 2009 16:46:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 08:46:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 16:46:32 +0000
Received: by qyk13 with SMTP id 13so3833712qyk.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 08:46:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=F2AHLg2sb3NW4HZl8Dl88rzHnhFD55Gk1iiPON7Y71Q=;
        b=EOEno+G1xMKlRqWEziyFXBMjS4/q5Pi3MAOZFcEBafMepEeQ8i3eF/twlWx1zeZcRF
         5VgfF36EpZBMlCumK24RbHVhOVXUPjnGE2hbxe2ruzlXYhWe8czzrgiA4t7gV2UzdzoA
         VoaDhBlpiA4OKtZdZrRj3b1VObnMpbwSStUrM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=xjI7EEwmWaCKMsXXR1N2Woph23RUYencFaeBUF0TR0hyF2v9UG6nxCIinVtEhAcPCZ
         GglO84c9lXVyeKgznRFxV3OldaKuvIcQkHQ1fEsw40e6YkaZ3DU0Ozfwnlkzy79rKG5X
         lFCA/ioxelwQQ+6aic+AJcbCJDYFEidOknVgg=
MIME-Version: 1.0
Received: by 10.214.10.12 with SMTP id 12mr4359366qaj.130.1233765967491; Wed, 
	04 Feb 2009 08:46:07 -0800 (PST)
Date: Wed, 4 Feb 2009 09:46:07 -0700
Message-ID: <847931a70902040846r505638a9ub462d7db9b5f3125@mail.gmail.com>
Subject: FieldCache Question
From: Todd Benge <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've been looking into the FieldCache API because of memory problems
we've been seeing in our production environment.

We use various different sorts so over time the cache builds up and
servers stop responding.

I decided to apply the patch for JIRA 831:

https://issues.apache.org/jira/browse/LUCENE-831

so that I can switch out the caching to an LRU based cache.

One thing I noticed in the code is that there is an array cache built
per IndexReader.  I'm wondering what the consequences would be if the
arrays were merged for all IndexReaders.  That would result in single
cached array for Strings, Floats, Ints, etc.

It looks like the arrays are used by the various comparators during
the sort but wasn't exactly sure so thought I'd ask what would happen
if I combined the arrays.

Thanks,

Todd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 17:01:55 2009
Return-Path: <java-user-return-38412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60092 invoked from network); 4 Feb 2009 17:01:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 17:01:55 -0000
Received: (qmail 44658 invoked by uid 500); 4 Feb 2009 17:01:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44381 invoked by uid 500); 4 Feb 2009 17:01:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44365 invoked by uid 99); 4 Feb 2009 17:01:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 09:01:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.162.182 as permitted sender)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 17:01:40 +0000
Received: by el-out-1112.google.com with SMTP id s27so1236973ele.14
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 09:01:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=2bNNp7M0Bh6IPveu61uR+28Tld9ry+Sb7Kh5vfzxJJk=;
        b=UPE9ptDYvVDAyTcp04g1duxqJPlNL/l+JYNs/BBEClLcJ+2UhaexQCzingDECL84+J
         eoY2SYncrI4sVVrpuk9y7eagOOTC2GwIUHmRIoRbkhhnL6EGvt2t+I/6+1oNX5i5vIys
         1Kcm/usUZcTd5tuHlvkHSa57KAtmvXfxYasZ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=k5BNQo4IBDWuBnZsP505QGNa1TUtgiEkIDhf4ElHPCvM2L3OW8E89EPM4ARhpC7oxd
         u+t3nwuDTBkrQERiuu5p6jmnbAykeYuDcTbMxjjaqtIZsGGJAGLMOQs7yXMbMNjYOxuH
         6+qCXClq1qktI9k3zsQkD02OcTa0tedaJE9ks=
Received: by 10.90.53.5 with SMTP id b5mr2051573aga.74.1233766877824;
        Wed, 04 Feb 2009 09:01:17 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 39sm11449922agb.16.2009.02.04.09.01.16
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 04 Feb 2009 09:01:17 -0800 (PST)
Message-ID: <4989C9DD.80405@gmail.com>
Date: Wed, 04 Feb 2009 12:01:17 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FieldCache Question
References: <847931a70902040846r505638a9ub462d7db9b5f3125@mail.gmail.com>
In-Reply-To: <847931a70902040846r505638a9ub462d7db9b5f3125@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Todd Benge wrote:
> Hi,
>
> I've been looking into the FieldCache API because of memory problems
> we've been seeing in our production environment.
>
> We use various different sorts so over time the cache builds up and
> servers stop responding.
>
> I decided to apply the patch for JIRA 831:
>
> https://issues.apache.org/jira/browse/LUCENE-831
>   
This patch is likely to change quite a bit soon. A lot of what it was 
doing has been taken care of by a separate issue. Whats likely to remain 
is just the API change, but even that is likely to change (an iterator 
api was discussed). So thats a volatile patch at the moment.
> so that I can switch out the caching to an LRU based cache.
>
> One thing I noticed in the code is that there is an array cache built
> per IndexReader.  I'm wondering what the consequences would be if the
> arrays were merged for all IndexReaders.  That would result in single
> cached array for Strings, Floats, Ints, etc.
>   
The original intent of this patch was almost to do the opposite if I am 
understanding you right. In any case, I am not sure why you think this 
will help?
> It looks like the arrays are used by the various comparators during
> the sort but wasn't exactly sure so thought I'd ask what would happen
> if I combined the arrays.
>   
I wouldn't combine them. Wouldn't this give less granularity to your LRU 
cache anyway? That code is likely to change drastically, and I'm not 
sure what advantage you would see. Do you have an index so large that 
you can't supply the necessary RAM for the fieldcaches?

How is your custom cache implementation working? Since you are trying to 
tweak things, it sounds like you are still having issues? I am not sure 
how combining arrays would help you, but I don't understand what you are 
trying to solve yet.

- Mark

> Thanks,
>
> Todd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 17:31:23 2009
Return-Path: <java-user-return-38413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81325 invoked from network); 4 Feb 2009 17:31:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 17:31:23 -0000
Received: (qmail 12384 invoked by uid 500); 4 Feb 2009 17:31:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12357 invoked by uid 500); 4 Feb 2009 17:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12333 invoked by uid 99); 4 Feb 2009 17:31:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 09:31:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 17:31:08 +0000
Received: by qyk13 with SMTP id 13so3871906qyk.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 09:30:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=273DWjYm2yHo6NEcivF8kVJ07V3nFKaSC87VETTTkUk=;
        b=ZSwsqKYkY/Owns4XGwq+rTd8RdA1rpPEROeyroFPMTnuod5CovwQOX0B48oFpzOMrC
         bD9kYRWJeP8o+I0MNr1EvIMMswU45HiqZW5WkA2QFjZP+k38Rro2OJau5wJtWfPYM9bZ
         L5418l9wGQBTpY1vDKrqZQUwRNPSUZsv5pH+8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vgo3DeOFQ7znXlIZhSIIUBR1J+IM7LCDiTeHue2wcrpMOcifY7B19vJJV3i/DACmll
         1QQyYgboorFXK/JDkbn39G1WD2C/uAlV7h2zE2F2J5VA5lqIleoTSegn78Dy+UOv1MF5
         W/qe+eDEy/ZKeldj1qXvBEjXu6cSazZVxxAq8=
MIME-Version: 1.0
Received: by 10.214.45.5 with SMTP id s5mr10847282qas.82.1233768647126; Wed, 
	04 Feb 2009 09:30:47 -0800 (PST)
In-Reply-To: <4989C9DD.80405@gmail.com>
References: <847931a70902040846r505638a9ub462d7db9b5f3125@mail.gmail.com>
	 <4989C9DD.80405@gmail.com>
Date: Wed, 4 Feb 2009 10:30:47 -0700
Message-ID: <847931a70902040930y39d76478tf822ad24b2151926@mail.gmail.com>
Subject: Re: FieldCache Question
From: Todd Benge <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cd628f2701d04621b2526
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cd628f2701d04621b2526
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Wed, Feb 4, 2009 at 10:01 AM, Mark Miller <markrmiller@gmail.com> wrote:
> Todd Benge wrote:
>>
>> Hi,
>>
>> I've been looking into the FieldCache API because of memory problems
>> we've been seeing in our production environment.
>>
>> We use various different sorts so over time the cache builds up and
>> servers stop responding.
>>
>> I decided to apply the patch for JIRA 831:
>>
>> https://issues.apache.org/jira/browse/LUCENE-831
>>
>
> This patch is likely to change quite a bit soon. A lot of what it was
doing
> has been taken care of by a separate issue. Whats likely to remain is just
> the API change, but even that is likely to change (an iterator api was
> discussed). So thats a volatile patch at the moment.
>>
>> so that I can switch out the caching to an LRU based cache.
>>
>> One thing I noticed in the code is that there is an array cache built
>> per IndexReader.  I'm wondering what the consequences would be if the
>> arrays were merged for all IndexReaders.  That would result in single
>> cached array for Strings, Floats, Ints, etc.
>>
>
> The original intent of this patch was almost to do the opposite if I am
> understanding you right. In any case, I am not sure why you think this
will
> help?

The intent is to reduce the amount of memory that is held in cache.  As it
is now, it looks like there is an array of comparators for each index
reader.  Most of the data in the array appears to be the same for each cache
so there is duplication for each type ( string, float).


>>
>> It looks like the arrays are used by the various comparators during
>> the sort but wasn't exactly sure so thought I'd ask what would happen
>> if I combined the arrays.
>>
>
> I wouldn't combine them. Wouldn't this give less granularity to your LRU
> cache anyway? That code is likely to change drastically, and I'm not sure
> what advantage you would see. Do you have an index so large that you can't
> supply the necessary RAM for the fieldcaches?
>
Yes - we're runnning about 80G in the indices so there's not enough RAM for
all the data in the fieldcache.

> How is your custom cache implementation working? Since you are trying to
> tweak things, it sounds like you are still having issues? I am not sure
how
> combining arrays would help you, but I don't understand what you are
trying
> to solve yet.
>
I actually have it working now by supplying a LRU cache map for each index
reader.  The only real difference between my implementation and lucene out
of box is the map storing the data is a LRU so it will force data out of the
cache.  The default implementation uses a HashMap that is tied to the
IndexReader so it never gets garbage collected and it's size will continue
to grow.

The problem I'm really trying to solve is stability in the servers.  I
realize that a LRU implementation will probably have some performance
degredation but wanted to try it out and compare.

> - Mark
>
>> Thanks,
>>
>> Todd
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175cd628f2701d04621b2526--

From java-user-return-38414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 17:42:27 2009
Return-Path: <java-user-return-38414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91373 invoked from network); 4 Feb 2009 17:42:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 17:42:27 -0000
Received: (qmail 37537 invoked by uid 500); 4 Feb 2009 17:42:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37511 invoked by uid 500); 4 Feb 2009 17:42:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37500 invoked by uid 99); 4 Feb 2009 17:42:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 09:42:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 17:42:10 +0000
Received: by yw-out-2324.google.com with SMTP id 3so868366ywj.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 09:41:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=5SIa+QBbSfwnYnhNcDDI3kTN/Ck1MkD+oaIcSuISM3Q=;
        b=pBKb9K2HchrNlNsT4N3W1XHHHeJvkF0rJJzu7OkIa4e4vB4fPpk8XxNF1WogGSROSe
         swJCwDHCJ/Q0h7S4xxesnHoFvPfeRwec/ANn3PmInqocO8tKJ7YLUxHuwiaWcXkr3BP1
         slGa2PDm8EzU0d+GFk8fJ4ytE6D5mSXxpHyqA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=s+dI9XgpaNrCqzg8BVWq1VQ9IzwsLKjYQqiemkvr4VywRIb6+gUI/LQDd6X6C8Zqud
         pc98aR8doxYN2sk3fCb36jwmhu6FzRZz4Lu4+E+NLeYcTmnTk/roBA4nw5KDLiXdW6rh
         vh3OsmUPy0b0gypiMsXSFJ1IwpEBIshSBdZgs=
Received: by 10.90.99.3 with SMTP id w3mr1200903agb.89.1233769309876;
        Wed, 04 Feb 2009 09:41:49 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 18sm11519598agb.27.2009.02.04.09.41.49
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 04 Feb 2009 09:41:49 -0800 (PST)
Message-ID: <4989D35D.6040009@gmail.com>
Date: Wed, 04 Feb 2009 12:41:49 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FieldCache Question
References: <847931a70902040846r505638a9ub462d7db9b5f3125@mail.gmail.com>	 <4989C9DD.80405@gmail.com> <847931a70902040930y39d76478tf822ad24b2151926@mail.gmail.com>
In-Reply-To: <847931a70902040930y39d76478tf822ad24b2151926@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Todd Benge wrote:
>
> The intent is to reduce the amount of memory that is held in cache.  As it
> is now, it looks like there is an array of comparators for each index
> reader.  Most of the data in the array appears to be the same for each cache
> so there is duplication for each type ( string, float).
>   
Use an array cachekey and override it as not mergeable.

I suppose in terms of the unuiqes terms array, you could see some 
duplication.

I don't think there should be much duplication though - in the non 
String cases, each SegmentIndexReader will only hold the values for 
itself. The size of the sub arrays would be the same as the full array.
In the String case, you will have duplicates for the unique terms array, 
so if you have a lot, that may cause issues, but the ordinal array will 
not be any larger. And the unuiqe terms array shouldnt be terrible - the 
number of terms per segment should drop logarithmically. I'm not sure 
you'll see much of a difference, and it would only be with String sorts.

That is, unless you are creating your own separate FieldCaches on 
multisegmentreaders - then you would double everything.

>
>   
> Yes - we're runnning about 80G in the indices so there's not enough RAM for
> all the data in the fieldcache.
>   
That is a large index. Can you share how many documents?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 18:01:54 2009
Return-Path: <java-user-return-38415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11241 invoked from network); 4 Feb 2009 18:01:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 18:01:54 -0000
Received: (qmail 90767 invoked by uid 500); 4 Feb 2009 18:01:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90745 invoked by uid 500); 4 Feb 2009 18:01:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90734 invoked by uid 99); 4 Feb 2009 18:01:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 10:01:47 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 18:01:40 +0000
Received: by qyk13 with SMTP id 13so3896192qyk.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 10:01:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=am6EkRt9F34GV2EzCS2treysBwtXc+Vrn7vz1Nn7eT0=;
        b=rav1X4NOzwnEiL9b8DChYvJ2ZvIXFLKSG/BjIip8eamUnUJpxd5fkB6hplkSTi7uRJ
         lahO2hWCiCq6rVKv/ICl4mxzkLh2kxpF79UlCAORnNb73nRYRrYBY5IWpp5bTL68yc63
         9C8aP2FR0+BNyU4NgGyqHC43qtNTyokD8lOuA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YpoZwN3kW6zHxiWcgdjdkglBUgqAi5b/r1q97wQFccZuF7CtfClnGala5ZrA7CM8q1
         iUoS8sNVryX46z+sz5oDV+zRWEKVOgWMXekPzrWutZKp39M+TQKiGKF6LwlpHXURX5IE
         +O2XO0KXwP3pUhiXKD1Sy56SMe9PsgGanZnAU=
MIME-Version: 1.0
Received: by 10.214.81.14 with SMTP id e14mr5696057qab.292.1233770477312; Wed, 
	04 Feb 2009 10:01:17 -0800 (PST)
In-Reply-To: <4989D35D.6040009@gmail.com>
References: <847931a70902040846r505638a9ub462d7db9b5f3125@mail.gmail.com>
	 <4989C9DD.80405@gmail.com>
	 <847931a70902040930y39d76478tf822ad24b2151926@mail.gmail.com>
	 <4989D35D.6040009@gmail.com>
Date: Wed, 4 Feb 2009 11:01:17 -0700
Message-ID: <847931a70902041001r4945bacele00c24962c070066@mail.gmail.com>
Subject: Re: FieldCache Question
From: Todd Benge <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb80608dcc904621b9322
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cb80608dcc904621b9322
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Wed, Feb 4, 2009 at 10:41 AM, Mark Miller <markrmiller@gmail.com> wrote:

> Todd Benge wrote:
>
>>
>> The intent is to reduce the amount of memory that is held in cache.  As it
>> is now, it looks like there is an array of comparators for each index
>> reader.  Most of the data in the array appears to be the same for each
>> cache
>> so there is duplication for each type ( string, float).
>>
>>
> Use an array cachekey and override it as not mergeable.
>
> I suppose in terms of the unuiqes terms array, you could see some
> duplication.
>
> I don't think there should be much duplication though - in the non String
> cases, each SegmentIndexReader will only hold the values for itself. The
> size of the sub arrays would be the same as the full array.
> In the String case, you will have duplicates for the unique terms array, so
> if you have a lot, that may cause issues, but the ordinal array will not be
> any larger. And the unuiqe terms array shouldnt be terrible - the number of
> terms per segment should drop logarithmically. I'm not sure you'll see much
> of a difference, and it would only be with String sorts.
>
> That is, unless you are creating your own separate FieldCaches on
> multisegmentreaders - then you would double everything.
>
>
>>  Yes - we're runnning about 80G in the indices so there's not enough RAM
>> for
>> all the data in the fieldcache.
>>
>>
> That is a large index. Can you share how many documents?


I don't have the exact number but I think it's 200 - 250 million documents.
I'll see if I can get some more realistic numbers and re-post.

Thanks for the help.

Todd


>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175cb80608dcc904621b9322--

From java-user-return-38416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 20:27:51 2009
Return-Path: <java-user-return-38416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22206 invoked from network); 4 Feb 2009 20:27:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 20:27:51 -0000
Received: (qmail 80271 invoked by uid 500); 4 Feb 2009 20:27:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79977 invoked by uid 500); 4 Feb 2009 20:27:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79966 invoked by uid 99); 4 Feb 2009 20:27:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 12:27:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 20:27:35 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2807559rvb.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 12:27:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=fcuCVaEit+boyK7pp1qRH8P2SqEM0NbT+GIwcGRDV3c=;
        b=mgckqWxnY3vLrgx4PKHkOFQgZMjBjUx5t8Q5fup701r8qD6TgPGilpefxCrBaK2rGI
         3LLmwGT6TpPIIMOJ11PMRgSg1DbZpKGGC6FN3eJ9cueU4++uEOxwJpJdeDNo6rWWGv3I
         dl7iK8o9Aa4vol33BHaOm7A2TWwIctlK5vYbU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=rkMZG7YeaSNaMjF6fzjK9C4vCX7dbueEfhEteOd6WtdRfMALY8lWENbPKsgmY78fNT
         Ch+PvJ9ujTq7nA699dt8athlExCgSl+QrNyrFORMQQNFRWOMUT7dAKVl1cpBdpsiSp7Q
         j4NJZq4b7lkvNpH4l6FQwPvwaI6oByDptrLDk=
MIME-Version: 1.0
Received: by 10.141.113.3 with SMTP id q3mr813543rvm.87.1233779234500; Wed, 04 
	Feb 2009 12:27:14 -0800 (PST)
Date: Wed, 4 Feb 2009 15:27:14 -0500
Message-ID: <bf1404350902041227h177d702i88a2ca776770fb8f@mail.gmail.com>
Subject: How to index correctly taking in account the synonyms using Wordnet 
	???
From: Ariel <isaacrc82@gmail.com>
To: lucene user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi every body:

I am using wordnet to index my document taking in account the synonyms
with wordnet.
After I indexed the whole documents collections I made a query with
the word "snort" but documents that contain the word bird are
retrieved, I don't understand this because snort and bird are not
synonyms then Why are the documents that contain "bird" retrieved ???

Could help me to solve that problem ???

How do you index your documents using wordnet ???

Thanks in advance.
Regards
Ariel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 04 22:10:00 2009
Return-Path: <java-user-return-38417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4129 invoked from network); 4 Feb 2009 22:10:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2009 22:10:00 -0000
Received: (qmail 46847 invoked by uid 500); 4 Feb 2009 22:09:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46823 invoked by uid 500); 4 Feb 2009 22:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46812 invoked by uid 99); 4 Feb 2009 22:09:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 14:09:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 22:09:46 +0000
Received: by yw-out-2324.google.com with SMTP id 3so930743ywj.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 14:09:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=jGIE6E1ZBsVbr0xwXnEVgy0NRdQSuZl7JJoYwwYRFTI=;
        b=SD/evKdLEhx9YBTf2Rkb2PbJSRFttRK4B/aYzPlUIElMGQr5kBhJk2dykhE+ytAKhR
         xXXYoHcy/uPWcGBWoMSBWMEx/RljZQA+kK6OG1DgT1BKWXn52zjlSGvCjo6uviegAhVe
         LLW2RcWG1MUI7F/ycfwae1LkEBuK3Nv9UUfHQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tIO1xUqqNDPGTsohUW3pIZpXMu35uM0spbLNELB32lbx3zqvioRv/PwwEl/4Il0cM4
         EDWb6qekGSTJujPXBGQrgId39YIQF1aIiug/Cd+fLFcNMiQuqbrZDEZQXMFSY2uFKrAb
         UwlUBh6Bz0Gg5r/RRmPfPdt6PCMEUuQs4fPtM=
MIME-Version: 1.0
Received: by 10.90.114.11 with SMTP id m11mr4463789agc.10.1233785365331; Wed, 
	04 Feb 2009 14:09:25 -0800 (PST)
In-Reply-To: <bf1404350902041227h177d702i88a2ca776770fb8f@mail.gmail.com>
References: <bf1404350902041227h177d702i88a2ca776770fb8f@mail.gmail.com>
Date: Wed, 4 Feb 2009 17:09:25 -0500
Message-ID: <359a92830902041409j15bd149aj10c5999075e551fc@mail.gmail.com>
Subject: Re: How to index correctly taking in account the synonyms using 
	Wordnet ???
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e84ac6dfdb804621f0acc
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e84ac6dfdb804621f0acc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The first thing I'd do is get a copy of luke (google lucene luke) and
examine your index to see what's actually there in the document
you claim in incorrectly returned. If that doesn't
enlighten you, you really have to provide more details and code
examples, because your question is unanswerable as it
stands.

Best
Erick

On Wed, Feb 4, 2009 at 3:27 PM, Ariel <isaacrc82@gmail.com> wrote:

> Hi every body:
>
> I am using wordnet to index my document taking in account the synonyms
> with wordnet.
> After I indexed the whole documents collections I made a query with
> the word "snort" but documents that contain the word bird are
> retrieved, I don't understand this because snort and bird are not
> synonyms then Why are the documents that contain "bird" retrieved ???
>
> Could help me to solve that problem ???
>
> How do you index your documents using wordnet ???
>
> Thanks in advance.
> Regards
> Ariel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361e84ac6dfdb804621f0acc--

From java-user-return-38418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 02:29:59 2009
Return-Path: <java-user-return-38418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72478 invoked from network); 5 Feb 2009 02:29:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 02:29:59 -0000
Received: (qmail 27778 invoked by uid 500); 5 Feb 2009 02:29:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27752 invoked by uid 500); 5 Feb 2009 02:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27730 invoked by uid 99); 5 Feb 2009 02:29:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 18:29:51 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 02:29:45 +0000
Received: by rv-out-0506.google.com with SMTP id f6so8314rvb.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 18:29:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=B684NknQ9+HjJmPp6RmXalbOoiajqUem0saphwkau5w=;
        b=FXxNrT2HVNfM28VmNacjfPjmJ7ax4U2a1W6jBNh8cKdedD1/HxfiZ/0NqjfBDBX62H
         fSE790FfCwclkBOWGq8Z8cKYnZiSi/XBN2GlhskmkRbRROTjuCXxmxnE76JSgpK9bieD
         r352dT3GrQI6xafUbPI3VOdmeh6d466pFT50M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MWPrgZfEQijXQe03xOdWk23WH6yVtE9nV+QJw+TjeuyaHkd7ZQ8W1JjQDSwvLUYgpT
         3OTS/njYn7ESILeEw2v38Th/n749Kka4pWQhcpaH5VFRQ4afwotpzDOQaLHKIQktYdIq
         1al7LZzvC2kuDjOHlMWNmvBZdM6u3nm7BLxy4=
MIME-Version: 1.0
Received: by 10.140.127.20 with SMTP id z20mr556981rvc.100.1233800964737; Wed, 
	04 Feb 2009 18:29:24 -0800 (PST)
In-Reply-To: <359a92830902041409j15bd149aj10c5999075e551fc@mail.gmail.com>
References: <bf1404350902041227h177d702i88a2ca776770fb8f@mail.gmail.com>
	 <359a92830902041409j15bd149aj10c5999075e551fc@mail.gmail.com>
Date: Wed, 4 Feb 2009 21:29:24 -0500
Message-ID: <bf1404350902041829x11e9bb59ye7aea4388ab3960b@mail.gmail.com>
Subject: Re: How to index correctly taking in account the synonyms using 
	Wordnet ???
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1870e3a0c37046222ac86
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1870e3a0c37046222ac86
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Well, I have the luke 0.8, I opened my index with that tool but there is not
any clue of synonyms in the field I have indexed with the synonym analyzer.
I don't know how can I see the group of synonyms of each term, sould
somebody tell me hot to do that ???



On Wed, Feb 4, 2009 at 5:09 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> The first thing I'd do is get a copy of luke (google lucene luke) and
> examine your index to see what's actually there in the document
> you claim in incorrectly returned. If that doesn't
> enlighten you, you really have to provide more details and code
> examples, because your question is unanswerable as it
> stands.
>
> Best
> Erick
>
> On Wed, Feb 4, 2009 at 3:27 PM, Ariel <isaacrc82@gmail.com> wrote:
>
> > Hi every body:
> >
> > I am using wordnet to index my document taking in account the synonyms
> > with wordnet.
> > After I indexed the whole documents collections I made a query with
> > the word "snort" but documents that contain the word bird are
> > retrieved, I don't understand this because snort and bird are not
> > synonyms then Why are the documents that contain "bird" retrieved ???
> >
> > Could help me to solve that problem ???
> >
> > How do you index your documents using wordnet ???
> >
> > Thanks in advance.
> > Regards
> > Ariel
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--000e0cd1870e3a0c37046222ac86--

From java-user-return-38419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 02:35:50 2009
Return-Path: <java-user-return-38419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75780 invoked from network); 5 Feb 2009 02:35:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 02:35:50 -0000
Received: (qmail 34443 invoked by uid 500); 5 Feb 2009 02:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34410 invoked by uid 500); 5 Feb 2009 02:35:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34399 invoked by uid 99); 5 Feb 2009 02:35:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 18:35:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 02:35:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so10749rvb.5
        for <java-user@lucene.apache.org>; Wed, 04 Feb 2009 18:35:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=7IU3QB8wxgrZRP8kvQgDpeZIq8AELbI6C9gu4c+T5RY=;
        b=W9RKeaIJmaUi+MX9l30gHPCUW5d9kWaVmqi8yQFr9IAVKqpdMJxWtI0wa+yJMFXWTX
         992Ak9felQyPQb7Tmk7VJM2N6WIuq5b8I2t5pkvQDqlnH2jB75gILDADF4hqFn5nU+iF
         TJnATw5JyENo0yx2cnDFAoXTljjsMMW2n3c4g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mIAeHFj3a4G0QoTmCoAbQ1DuC5PEWSd1ZETphh9/Ay/1ni+mGW0J34IzNAOXUHpoSv
         XtGariUngXKmhCNzhPNUQJQN3CLeo9AhgQGCHki5lNmOIBIgKsweH158KDhQD+mm3KjK
         TWkDzCuofQcKxzoj4YtJhwl3ukpy/3FUOa14Q=
MIME-Version: 1.0
Received: by 10.141.122.1 with SMTP id z1mr1979933rvm.210.1233801316016; Wed, 
	04 Feb 2009 18:35:16 -0800 (PST)
In-Reply-To: <239092.96860.qm@web94816.mail.in2.yahoo.com>
References: <bf1404350902041227h177d702i88a2ca776770fb8f@mail.gmail.com>
	 <239092.96860.qm@web94816.mail.in2.yahoo.com>
Date: Wed, 4 Feb 2009 21:35:16 -0500
Message-ID: <bf1404350902041835l3dc4337cu64fabbe8662c77bb@mail.gmail.com>
Subject: Re: How to index correctly taking in account the synonyms using 
	Wordnet ???
From: Ariel <isaacrc82@gmail.com>
To: mkonchady@yahoo.com, lucene user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=000e0cd214702a24d6046222c1aa
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd214702a24d6046222c1aa
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

How can I see the senses of a word with wordnet ??? And How could I select
the most populars ???
Is there a way to make queries ignoring the synonyms I have added to the
index ???

I hope you can help me.

Regards
Ariel


On Wed, Feb 4, 2009 at 7:46 PM, Manu Konchady <mkonchady@yahoo.com> wrote:

>
>
>
> --- On Wed, 4/2/09, Ariel <isaacrc82@gmail.com> wrote:
>
> > From: Ariel <isaacrc82@gmail.com>
> > I am using wordnet to index my document taking in account
> > the synonyms
> > with wordnet.
> > After I indexed the whole documents collections I made a
> > query with
> > the word "snort" but documents that contain the
> > word bird are
> > retrieved, I don't understand this because snort and
> > bird are not
> > synonyms then Why are the documents that contain
> > "bird" retrieved ???
> >
>
>
> In WordNet bird is one of the noun senses for the meaning of snort
>
> Noun
>
> Sense 1: snicker, snort, snigger
> Description: a disrespectful laugh
>
> Sense 2: boo, hoot, Bronx cheer, hiss, raspberry, razzing, razz, snort,
> bird
> Description: a cry or noise made to express displeasure or contempt
>
>
> You may want to try and select just the synonyms of the most popular sense
> of the word.
>
>  Regards,
>
>  Manu
>
>
>      Get perfect Email ID for your Resume. Grab now
> http://in.promos.yahoo.com/address
>
>

--000e0cd214702a24d6046222c1aa--

From java-user-return-38420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 03:34:53 2009
Return-Path: <java-user-return-38420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96986 invoked from network); 5 Feb 2009 03:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 03:34:53 -0000
Received: (qmail 61842 invoked by uid 500); 5 Feb 2009 03:34:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61811 invoked by uid 500); 5 Feb 2009 03:34:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61800 invoked by uid 99); 5 Feb 2009 03:34:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Feb 2009 19:34:46 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 03:34:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LUv0K-0008KQ-Ow
	for java-user@lucene.apache.org; Wed, 04 Feb 2009 19:34:16 -0800
Message-ID: <21844751.post@talk.nabble.com>
Date: Wed, 4 Feb 2009 19:34:16 -0800 (PST)
From: Jay Malaluan <exst_jmalaluan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocCollector vs Hits inquiry
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: exst_jmalaluan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

As I was reading the post "Re: TopDocCollector vs Hits: TopDocCollector
slowing....", I just got curious on how he explained his change from Hits to
TopDocCollector. I'm assuming that the Hits is returned from a call of:
Searcher searcher = new Searcher();
searcher.search(xxx, xxx) - that will return a Hits object

I was searching the javadoc API (2.3 and 2.4) and didn't found any method
that returns TopDocCollector object from a searcher.search(xxx, xxx) call. 

Would be a great help is someone can expound this. I might be able to use
this in future implementation.


Regards,
Jay Joel Malaluan
-- 
View this message in context: http://www.nabble.com/Re%3A-TopDocCollector-vs-Hits-inquiry-tp21844751p21844751.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 08:31:07 2009
Return-Path: <java-user-return-38421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9950 invoked from network); 5 Feb 2009 08:31:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 08:31:07 -0000
Received: (qmail 86658 invoked by uid 500); 5 Feb 2009 08:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86633 invoked by uid 500); 5 Feb 2009 08:30:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86608 invoked by uid 99); 5 Feb 2009 08:30:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 00:30:58 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 08:30:49 +0000
Received: by fxm7 with SMTP id 7so163228fxm.5
        for <java-user@lucene.apache.org>; Thu, 05 Feb 2009 00:30:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=jgsSRROPiLGYlxiDKP5fcIm8NxFoY3gW2WP7p9yyCzo=;
        b=S9SS2hq8/goPzJz4As4L8QrKUpcoWlsCdmavgfIiv0sjO6svG1qtkGDOAsngJ5J0Ls
         Qq4VvVlzY605XICTxUqfrDfjsbhKWDHlVVpoY/EsA5V8+4nv7Lhz+9swVPSPCo24eWzh
         whziEiFwW9YDuy5usRZjzhbcsCVP+xYav+O+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=reeBPX/26OakHm3d9Boe1N+Ix2fF+o0T5311W0O6bQKC2fq25uulwBo16hBVKFBT0s
         aajSch9dhjmybDn5WvvYn90Vg9986n8zWPYjG40ilbAOxTUgmqgAWo19acM9wg5e1Wm4
         VnN8W3PBY84z2Ov0a8paB8fRwJdYINQv+wYjw=
MIME-Version: 1.0
Received: by 10.180.233.15 with SMTP id f15mr76333bkh.188.1233822626536; Thu, 
	05 Feb 2009 00:30:26 -0800 (PST)
Date: Thu, 5 Feb 2009 08:30:26 +0000
Message-ID: <6f4104d80902050030q3ebccdf4g6aeb856ab8f0e542@mail.gmail.com>
Subject: Field.Store.YES Question
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b52e5edddf046227b7c7
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5b52e5edddf046227b7c7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

I'm probably going to get shot down for asking this simple question.
Although I think I understand the basic concept of Field I feel there is
something that I am missing and I was wondering if someone might help to
clarify.

You can store a field value in an index using Field.Store.YES or if the
content is too large then you can exclude it be stored in the index using
Field.Store.NO.   How does Lucene know how to search for a term in an index
if the value hasn't been stored in the index?  I guess I can understand that
if you don't store the field then you can't get the field and it's value
using the document api.

Is there a seperate part in the lucene document that the tokenised strings
are stored and therefore Lucene knows where to look?

Again I do apologise for asking this question...I just feel like I'm missing
something (knew I shouldn't have had those tequilla shots!).


Thanks
Amin

--001636c5b52e5edddf046227b7c7--

From java-user-return-38422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 09:15:07 2009
Return-Path: <java-user-return-38422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25158 invoked from network); 5 Feb 2009 09:15:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 09:15:07 -0000
Received: (qmail 45650 invoked by uid 500); 5 Feb 2009 09:14:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45618 invoked by uid 500); 5 Feb 2009 09:14:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45607 invoked by uid 99); 5 Feb 2009 09:14:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 01:14:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.219.19 as permitted sender)
Received: from [209.85.219.19] (HELO mail-ew0-f19.google.com) (209.85.219.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 09:14:49 +0000
Received: by ewy12 with SMTP id 12so128234ewy.5
        for <java-user@lucene.apache.org>; Thu, 05 Feb 2009 01:14:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=c8f2c+G+w4frlX4LUFUUAMz6tQUukV5LNwisuPRaQYE=;
        b=LKJROAE5rWUfAvrsTRj3bGKf2WklOLoVUL4rdsLhRSInhHeozFNK+Q7b9nwF6PKe2i
         kKEZL+3+nKVuQBxf+02rcvLGrOsg59VpLhA6LdGeCV/jKwrpFTdOrS5DRBbwMwM5jxWr
         sfH1lNHezevHt4cbmy5nv6gH9gxs2xDHFapuc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=qyDw0FJGk3i0zXPaWShQJwnSnqtBBXuXH/2mxuC0fppabRMCXIQ+HaNXxTWjYLqPSs
         kSgHKbGyZCSvVpxNYt/KqLh5Cu9yKd4l6yQ+ABAbXEMqyV44arNOTdZzjCwPXOeZR1Ll
         6S0irV6tda1HP5Vpbef+S/K1Xchv1jX8MlTHo=
Received: by 10.67.89.15 with SMTP id r15mr4338389ugl.59.1233825269152;
        Thu, 05 Feb 2009 01:14:29 -0800 (PST)
Received: from elf_ulfving.lan (c-11e6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se [85.227.230.17])
        by mx.google.com with ESMTPS id f6sm774860nfh.79.2009.02.05.01.14.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 05 Feb 2009 01:14:28 -0800 (PST)
Message-Id: <0918EF47-4910-482B-BA0F-BC798B089888@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6f4104d80902050030q3ebccdf4g6aeb856ab8f0e542@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Field.Store.YES Question
Date: Thu, 5 Feb 2009 10:14:27 +0100
References: <6f4104d80902050030q3ebccdf4g6aeb856ab8f0e542@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


5 feb 2009 kl. 09.30 skrev Amin Mohammed-Coleman:

> Is there a seperate part in the lucene document that the tokenised  
> strings
> are stored and therefore Lucene knows where to look?


Yes.

Stored fields is meta data bound to a document, for instance the  
primary key of the object the Lucene document represents. Note that I  
call this meta data, it is not the data Lucene looks at when searching.

In order to collect a list of documents matching a query Lucene  
navigates an inverted index of string tokens. Usually each word in a  
string is made in to a token, but there are many other strategies. (A  
token is known as a term when associated with a specific field name.)

You might want to take a look at this:
http://en.wikipedia.org/wiki/Inverted_index

There is a third way Lucene stores data, the so called term vector  
view. This is a cache of the terms available in a document, available  
as it is very expensive for an inverted index to extract the terms  
available in a document.




      karl





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 09:29:40 2009
Return-Path: <java-user-return-38423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30860 invoked from network); 5 Feb 2009 09:29:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 09:29:40 -0000
Received: (qmail 79156 invoked by uid 500); 5 Feb 2009 09:29:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79131 invoked by uid 500); 5 Feb 2009 09:29:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79120 invoked by uid 99); 5 Feb 2009 09:29:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 01:29:33 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.107.116] (HELO smtp133.mail.mud.yahoo.com) (209.191.107.116)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Feb 2009 09:29:21 +0000
Received: (qmail 70953 invoked from network); 5 Feb 2009 09:28:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=OwE8g7EX5fDBtO7NZ0M8LY9DFezq8Ki6D4IHKpWScysIEuYRQq6erwLyc6g2gbA+zQE1kzWubqu+n+Mf9Lr0hUaoxG5zA/0AqJygh3HEAhc7ls93BzVjacS4L+z3V/IY7hHfhypE/BFffTLuY1lTSk9qdkLyMJ7u3OHrJv6+Z4I=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp133.mail.mud.yahoo.com with SMTP; 5 Feb 2009 09:28:57 -0000
X-YMail-OSG: c6pWIEMVM1l3LYqgMwXhx6ZLzjXP5Psjw2mj6R9lqffJUd6Ssn0mNh6j7gG03qvnMY4vn52NrnlZrfS3KJS8UTekIClePQ7qHlU5JdRAM5RGf82iGxtbpBgEGsQvgtgm8ZG3CjuHUUY8ai0100jtTKU4K2BRPKnCgOIO08fi5KWzN_JazoK7eOwtQUTO0qh0beJixjH5cBgJTb7DKfwFM7h865TkxIWM
X-Yahoo-Newman-Property: ymail-3
Message-ID: <035001c98774$2bfe4510$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6f4104d80902050030q3ebccdf4g6aeb856ab8f0e542@mail.gmail.com>
Subject: Re: Field.Store.YES Question
Date: Thu, 5 Feb 2009 14:58:54 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Field.Store.Yes is to store the field data as it is, so that it could be 
retrieved to display results.
Field.Index.ANALYZED, tokenizes the field and stores the tokenized content.

Regards
Ganesh

----- Original Message ----- 
From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, February 05, 2009 2:00 PM
Subject: Field.Store.YES Question


> Hi
>
> I'm probably going to get shot down for asking this simple question.
> Although I think I understand the basic concept of Field I feel there is
> something that I am missing and I was wondering if someone might help to
> clarify.
>
> You can store a field value in an index using Field.Store.YES or if the
> content is too large then you can exclude it be stored in the index using
> Field.Store.NO.   How does Lucene know how to search for a term in an 
> index
> if the value hasn't been stored in the index?  I guess I can understand 
> that
> if you don't store the field then you can't get the field and it's value
> using the document api.
>
> Is there a seperate part in the lucene document that the tokenised strings
> are stored and therefore Lucene knows where to look?
>
> Again I do apologise for asking this question...I just feel like I'm 
> missing
> something (knew I shouldn't have had those tequilla shots!).
>
>
> Thanks
> Amin
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 11:47:44 2009
Return-Path: <java-user-return-38424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96146 invoked from network); 5 Feb 2009 11:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 11:47:43 -0000
Received: (qmail 83252 invoked by uid 500); 5 Feb 2009 11:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83208 invoked by uid 500); 5 Feb 2009 11:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83197 invoked by uid 99); 5 Feb 2009 11:47:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 03:47:33 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 11:47:26 +0000
Received: by fk-out-0910.google.com with SMTP id f33so178140fkf.5
        for <java-user@lucene.apache.org>; Thu, 05 Feb 2009 03:47:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=YUuPFs3tjEsKDnLzfj/KlXPHVCVLly9ugIx+hW4bEYo=;
        b=PRoKsIlQuWHPVBCVOmOll1J5O4MvJh7D/2n4Eiw6w5kxEWibHGjQ4OW4CIhRO7jUw/
         Td17QkSFjC59mx3YbbnyhOp3QbK5HrbrQZJ+iw4PbbW0iVRGayk2jT+FFSXTD3F2BHsp
         tyBihIm4MmSw8Mz54CWJTSF87g1+AuyAXn5Ho=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=aovvGq87aAkr+G/703Ss7fcsY7LYvmQ09I/Sw4JFFOE67jfQ+jcRbtDkB2TN7nLywQ
         GEBuiHtK9/9NcZloQ8RKtBr+9KkoH5Gx47QijnBVp9UTp/WSdR0B7f7gFUAR/I2FBWYY
         oNnIrwjDBxYkYGwzrmaTHXqS+vM/m6lWN5ePE=
MIME-Version: 1.0
Received: by 10.181.148.2 with SMTP id a2mr138385bko.117.1233834422854; Thu, 
	05 Feb 2009 03:47:02 -0800 (PST)
In-Reply-To: <035001c98774$2bfe4510$710bc30a@sv.us.sonicwall.com>
References: <6f4104d80902050030q3ebccdf4g6aeb856ab8f0e542@mail.gmail.com>
	 <035001c98774$2bfe4510$710bc30a@sv.us.sonicwall.com>
Date: Thu, 5 Feb 2009 11:47:02 +0000
Message-ID: <6f4104d80902050347r5b63599bref07bf7b108d84ce@mail.gmail.com>
Subject: Re: Field.Store.YES Question
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6de17a77c65f604622a76e6
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6de17a77c65f604622a76e6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks guys for your replies!  It's helped alot!

Cheers
Amin

On Thu, Feb 5, 2009 at 9:28 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Field.Store.Yes is to store the field data as it is, so that it could be
> retrieved to display results.
> Field.Index.ANALYZED, tokenizes the field and stores the tokenized content.
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
> aminmc@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, February 05, 2009 2:00 PM
> Subject: Field.Store.YES Question
>
>
>
>  Hi
>>
>> I'm probably going to get shot down for asking this simple question.
>> Although I think I understand the basic concept of Field I feel there is
>> something that I am missing and I was wondering if someone might help to
>> clarify.
>>
>> You can store a field value in an index using Field.Store.YES or if the
>> content is too large then you can exclude it be stored in the index using
>> Field.Store.NO.   How does Lucene know how to search for a term in an
>> index
>> if the value hasn't been stored in the index?  I guess I can understand
>> that
>> if you don't store the field then you can't get the field and it's value
>> using the document api.
>>
>> Is there a seperate part in the lucene document that the tokenised strings
>> are stored and therefore Lucene knows where to look?
>>
>> Again I do apologise for asking this question...I just feel like I'm
>> missing
>> something (knew I shouldn't have had those tequilla shots!).
>>
>>
>> Thanks
>> Amin
>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6de17a77c65f604622a76e6--

From java-user-return-38425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 12:03:39 2009
Return-Path: <java-user-return-38425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 259 invoked from network); 5 Feb 2009 12:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 12:03:39 -0000
Received: (qmail 8846 invoked by uid 500); 5 Feb 2009 12:03:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8449 invoked by uid 500); 5 Feb 2009 12:03:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8438 invoked by uid 99); 5 Feb 2009 12:03:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 04:03:31 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 12:03:19 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 569815B4F0
	for <java-user@lucene.apache.org>; Thu,  5 Feb 2009 04:02:57 -0800 (PST)
Message-Id: <591C6091-FFC5-4C19-9622-BCB27735A2A7@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21844751.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: TopDocCollector vs Hits inquiry
Date: Thu, 5 Feb 2009 07:02:56 -0500
References: <21844751.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/search/Searcher.html#search(org.apache.lucene.search.Query,%20org.apache.lucene.search.HitCollector)

The TopDocCollector is a HitCollector.

On Feb 4, 2009, at 10:34 PM, Jay Malaluan wrote:

>
> Hi,
>
> As I was reading the post "Re: TopDocCollector vs Hits:  
> TopDocCollector
> slowing....", I just got curious on how he explained his change from  
> Hits to
> TopDocCollector. I'm assuming that the Hits is returned from a call  
> of:
> Searcher searcher = new Searcher();
> searcher.search(xxx, xxx) - that will return a Hits object
>
> I was searching the javadoc API (2.3 and 2.4) and didn't found any  
> method
> that returns TopDocCollector object from a searcher.search(xxx, xxx)  
> call.
>
> Would be a great help is someone can expound this. I might be able  
> to use
> this in future implementation.
>
>
> Regards,
> Jay Joel Malaluan
> -- 
> View this message in context: http://www.nabble.com/Re%3A-TopDocCollector-vs-Hits-inquiry-tp21844751p21844751.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ












---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 12:18:27 2009
Return-Path: <java-user-return-38426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3370 invoked from network); 5 Feb 2009 12:18:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 12:18:26 -0000
Received: (qmail 30168 invoked by uid 500); 5 Feb 2009 12:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30145 invoked by uid 500); 5 Feb 2009 12:18:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30134 invoked by uid 99); 5 Feb 2009 12:18:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 04:18:19 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [98.136.44.35] (HELO n62.bullet.mail.sp1.yahoo.com) (98.136.44.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Feb 2009 12:18:08 +0000
Received: from [216.252.122.216] by n62.bullet.mail.sp1.yahoo.com with NNFMP; 05 Feb 2009 12:17:48 -0000
Received: from [67.195.9.81] by t1.bullet.sp1.yahoo.com with NNFMP; 05 Feb 2009 12:17:47 -0000
Received: from [67.195.9.101] by t1.bullet.mail.gq1.yahoo.com with NNFMP; 05 Feb 2009 12:17:47 -0000
Received: from [127.0.0.1] by omp105.mail.gq1.yahoo.com with NNFMP; 05 Feb 2009 12:17:47 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 809995.2268.bm@omp105.mail.gq1.yahoo.com
Received: (qmail 32654 invoked by uid 60001); 5 Feb 2009 12:17:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=q4fYIxeepvS0OMloE66AaBJQtsFY99IS+wT87+TgOmCmLoCaL9ADHUdf4qy6OJ6RJltCTVYnPN2xQ6YrBdt5r+I1MZrJLk/WJM4Q0u2QMdGS36iQhtiKRXjCq/X1FceW+70jqF7WxgLHIJOAEHUY4qeUZj81mnmrWV4lx2yqdwo=;
X-YMail-OSG: XtsVuz8VM1l1y8jNVsuu6GdPPZAXRMmc3n3XzjM3xqxMcQ_TmOTBG_V0CzteX4Hw_bzdGh8M9xl_G8fS01jARSEs2KhdYKrfLg2.pzaEgBoX143PFW6R8nh.HAe90As3Y0wMMbKPkqcIswSXfcx7vVFdfz73
Received: from [94.194.201.108] by web112223.mail.gq1.yahoo.com via HTTP; Thu, 05 Feb 2009 04:17:42 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.260.1
Date: Thu, 5 Feb 2009 04:17:42 -0800 (PST)
From: Lebiram <lebiram@ymail.com>
Subject: TermQuery search returns the same Document several times
To: Lucene Mailing-List <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1524311335-1233836262=:16309"
Message-ID: <948028.16309.qm@web112223.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1524311335-1233836262=:16309
Content-Type: text/plain; charset=us-ascii

Hi All, 

Is it possible to somehow ensure that a document will be returned only once when collecting from HitCollector?


      
--0-1524311335-1233836262=:16309--


From java-user-return-38427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 13:16:49 2009
Return-Path: <java-user-return-38427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28082 invoked from network); 5 Feb 2009 13:16:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 13:16:49 -0000
Received: (qmail 5444 invoked by uid 500); 5 Feb 2009 13:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5418 invoked by uid 500); 5 Feb 2009 13:16:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5407 invoked by uid 99); 5 Feb 2009 13:16:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 05:16:41 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 13:16:33 +0000
Received: by yw-out-2324.google.com with SMTP id 3so72612ywj.5
        for <java-user@lucene.apache.org>; Thu, 05 Feb 2009 05:16:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=jnQ7tE+sxJdm22NnddI9bVwxT18gOi2qy9q97vTRvM4=;
        b=bvfNkRrbFVPy7zUvq/wV3BkcTTD1KKUer4WWANyRimWDGLs64D8CpZ210ws+H/RHnc
         t5nNo3mNoJ5Z3abbZH+z+32KC5sArIv75VBA/Qsfvn1CHXNh61EsqDgUjpfhMUvxM3Z5
         b3yKgLaKpQy7bkWZ6zwrDTO7jOptUp9mf+e3o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ebz4DWaSO3b3lb4NG6fpMJwfk9i8EIZN3C/w0ueMZjbipWy/Cg8URZgw/ARsuo2XO4
         JVAfcbViE2jmsLv2PeJzX+i2L5/vsf0iQV8F9zXAGnxhiYU2kD4YeGVsd0tb+CmO4qSN
         28IM3syL1uIyZaiNIebIgWosfdMQ1rCN6RQZM=
MIME-Version: 1.0
Received: by 10.90.119.20 with SMTP id r20mr159553agc.81.1233839772233; Thu, 
	05 Feb 2009 05:16:12 -0800 (PST)
In-Reply-To: <948028.16309.qm@web112223.mail.gq1.yahoo.com>
References: <948028.16309.qm@web112223.mail.gq1.yahoo.com>
Date: Thu, 5 Feb 2009 08:16:12 -0500
Message-ID: <359a92830902050516u30ce1b3ndab0c8734f6bc8e@mail.gmail.com>
Subject: Re: TermQuery search returns the same Document several times
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636164afd55717004622bb5a2
X-Virus-Checked: Checked by ClamAV on apache.org

--001636164afd55717004622bb5a2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I don't understand your question. From the API docs for
HitCollector.collect:

<<<Called once for every non-zero scoring document, with
the document number and its score.>>>

Can you ask your question another way? Because the
only answer I can come up with is
"HitCollector.collect only sees each document once by definition".

Best
Erick

On Thu, Feb 5, 2009 at 7:17 AM, Lebiram <lebiram@ymail.com> wrote:

> Hi All,
>
> Is it possible to somehow ensure that a document will be returned only once
> when collecting from HitCollector?
>
>
>

--001636164afd55717004622bb5a2--

From java-user-return-38428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 14:58:41 2009
Return-Path: <java-user-return-38428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85517 invoked from network); 5 Feb 2009 14:58:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 14:58:41 -0000
Received: (qmail 60984 invoked by uid 500); 5 Feb 2009 14:58:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60953 invoked by uid 500); 5 Feb 2009 14:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60942 invoked by uid 99); 5 Feb 2009 14:58:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 06:58:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [12.44.8.171] (HELO birexchange.BIRPLAZA.local) (12.44.8.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 14:58:25 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Poor QPS with highlighting
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Thu, 5 Feb 2009 09:58:12 -0500
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA568C5652@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Poor QPS with highlighting
Thread-Index: AcmGQeuHANhXURgdTtKyJzu2BLUWAwBX1bZA
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

A while ago someone posted a link to a project called XTF which does
this:
http://xtf.wiki.sourceforge.net/

The one problem with this approach still lurking for me (or maybe I
don't understand how to get around) is how to handle multiple terms
which "must" appear in the query, but are in non-overlapping chunks. You
would want a hit, but the hit won't come back because both terms don't
appear in the same document.

Has anyone given any thought to this? =20

-----Original Message-----
From: markharw00d [mailto:markharw00d@yahoo.co.uk]=20
Sent: Tuesday, February 03, 2009 3:53 PM
To: java-user@lucene.apache.org
Subject: Re: Poor QPS with highlighting


> Can you describe this in a little more detail; I'm not exactly sure
what you
> mean.
>  =20

Break your large text documents into multiple Lucene documents. Rather=20
than dividing them up into entirely discreet chunks of text consider=20
storing/indexing *overlapping* sections of text with an overlap as big=20
as the largest "slop" factor you use on Phrase/Span queries so that you=20
don't cut any potential phrases in half and fail to match e.g.

This non-overlapping indexing scheme will not match a search for "George

Bush"

    Doc 1 =3D "....  outgoing president George "
    Doc 2=3D  "Bush stated that ..."

While this overlapping scheme will match...
    Doc 1 =3D "....  outgoing president George "
    Doc 2=3D  "president George Bush stated that ..."

This fragmenting approach helps avoid the performance cost of=20
highlighting very large documents.

The remaining issue is to remove duplicates in your search results when=20
you match multiple chunks e.g. Lucene Docs #1 and #2 both refer to Input

Doc#1 and will match a search for "president". You will need to store a=20
field for the "original document number" and remove any duplicates (or=20
merge them in the display if that is what is required).

Cheers,
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 15:31:42 2009
Return-Path: <java-user-return-38429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54832 invoked from network); 5 Feb 2009 15:31:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 15:31:42 -0000
Received: (qmail 33375 invoked by uid 500); 5 Feb 2009 15:31:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33353 invoked by uid 500); 5 Feb 2009 15:31:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33342 invoked by uid 99); 5 Feb 2009 15:31:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 07:31:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [12.44.8.171] (HELO birexchange.BIRPLAZA.local) (12.44.8.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 15:31:28 +0000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
x-cr-puzzleid: {7D18D7E8-7D39-4541-8463-9A2D8911FC27}
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
x-cr-hashedpuzzle: Ys0= BIV0 BS0h CQgS CZza D1ut D7Xu EDcu Eg+i E9PJ GLD4 Hboh Hy1Q ILFs Itmy I+G7;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{7D18D7E8-7D39-4541-8463-9A2D8911FC27};YgByAGkAYQBuAC4AYgBlAGEAcgBkAEAAbQB5AGIAaQByAC4AYwBvAG0A;Thu, 05 Feb 2009 15:31:08 GMT;dABlAHIAbQBEAG8AYwBzACAALwAgAHQAZQByAG0ARQBuAHUAbQBzACAAcABlAHIAZgBvAHIAbQBhAG4AYwBlACAAaQBuAGMAcgBlAGEAcwBlACAAZgBvAHIAIAAyAC4ANAAuADAA
Content-class: urn:content-classes:message
Subject: termDocs / termEnums performance increase for 2.4.0
Date: Thu, 5 Feb 2009 10:31:08 -0500
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA568C565C@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: termDocs / termEnums performance increase for 2.4.0
Thread-Index: AcmGQeuHANhXURgdTtKyJzu2BLUWAwBX1bZAAADyLFA=
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thought I would report a performance increase noticed in migrating from
2.3.2 to 2.4.0.=20

Performing an iterated loop using termDocs & termEnums like below is
about 30% faster.
The example test set I'm running has about 70K documents to go through
and process (on a dual processor windows machine) which takes about
0.8-0.9 sec in 2.4.0 (vs 1.3-1.4 secs in 2.3.2)

TermDocs termDocs =3D multiReader.termDocs();
TermEnum termEnum =3D multiReader.terms (new Term (field, ""));

do {
	term =3D termEnum.term();
	termDocs.seek(term);		=09
      .....
	while (termDocs.next()) {
        ....
	}

} while (termEnum.next());




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 17:06:07 2009
Return-Path: <java-user-return-38430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91048 invoked from network); 5 Feb 2009 17:06:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 17:06:06 -0000
Received: (qmail 54279 invoked by uid 500); 5 Feb 2009 17:05:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54258 invoked by uid 500); 5 Feb 2009 17:05:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54247 invoked by uid 99); 5 Feb 2009 17:05:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 09:05:58 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 17:05:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so362376rvb.5
        for <java-user@lucene.apache.org>; Thu, 05 Feb 2009 09:05:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=AsbryrIXnuk9MHTog6qUWuPazTzlwwYkpZ3U7eT+9Yc=;
        b=kLPY6bfyvCw1TXgJPteIyMgIme61uziwD3wfpgvr/VnVDRfI5rD+GZVSVfWpasHe86
         jB3l2CJeGan79Sek2l68S6T0U6OoNRCI7DS8Kf4b2P2UU3YBy3FPMZW80JeZQnSy+iZh
         u2l9/8p5F26eRbGdwMSSdwJYhUMhjhjfmxDjY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hKoIZNb53w/+u/4BrHpIz4S5sQmWOnss2S+rYnvgk6vl0BI3IBpCuTo/lOCOLC8Pfv
         EFAZdI8wC3ZE0Gz3ZckGgcxaOrws7q/4acU+Jd/zBXENZnACEpNuxWtV0Hu9SbU09kQY
         DeK/YDynKjrdonJ44sXc9AjJhEvSBt3IqUEAA=
MIME-Version: 1.0
Received: by 10.140.171.18 with SMTP id t18mr519220rve.10.1233853528824; Thu, 
	05 Feb 2009 09:05:28 -0800 (PST)
In-Reply-To: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>
References: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>
Date: Thu, 5 Feb 2009 09:05:28 -0800
Message-ID: <85d3c3b60902050905n35db3c4cna628036dd22b180d@mail.gmail.com>
Subject: Re: Poor QPS with highlighting
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd29d8c4a5da804622ee921
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29d8c4a5da804622ee921
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Google uses dedicated highlighting servers.  Maybe this architecture would
work for you.

On Mon, Feb 2, 2009 at 11:24 PM, Michael Stoppelman <stopman@gmail.com>wrote:

> Hi all,
>
> My search backends are only able to eek out 13-15 qps even with the entire
> index in memory (this makes it very expensive to scale). According to my
> YourKit profiler 80% of the program's time ends up in highlighting. With
> highlighting disabled my backend gets about 45-50 qps (cheaper scaling)!
> We're using Mark's TokenSources contrib. to make reconstructing of the
> document quicker. I was contemplating patching the index to store offsets
> for every term (instead of just the ordinal positions) so that I could make
> the highlighting faster (since you would know where you hit in the document
> on the search pass). I saw this thread from 2004:
> http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg04743.html -
> which asks about adding offsets to the index but it was decided against
> because it would make the index too large. I can totally understand this;
> but as machines get more beefy it would probably be nice to make this
> optional since having 15 qps vs 50qps is quite a trade-off right now. Are
> other folks seeing this? My documents are quite big sometimes up to 300k
> tokens. Also my document fields are compressed which is also a time sink
> for
> the cpu.
>
> Please let me know if you need more details, happy to share.
>
> Sincerely,
> M
>

--000e0cd29d8c4a5da804622ee921--

From java-user-return-38431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 17:26:14 2009
Return-Path: <java-user-return-38431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2119 invoked from network); 5 Feb 2009 17:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 17:26:14 -0000
Received: (qmail 4243 invoked by uid 500); 5 Feb 2009 17:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4223 invoked by uid 500); 5 Feb 2009 17:26:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4212 invoked by uid 99); 5 Feb 2009 17:26:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 09:26:06 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [68.142.237.123] (HELO n10.bullet.re3.yahoo.com) (68.142.237.123)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Feb 2009 17:25:55 +0000
Received: from [68.142.230.28] by n10.bullet.re3.yahoo.com with NNFMP; 05 Feb 2009 17:25:33 -0000
Received: from [67.195.9.81] by t1.bullet.re2.yahoo.com with NNFMP; 05 Feb 2009 17:25:33 -0000
Received: from [67.195.9.97] by t1.bullet.mail.gq1.yahoo.com with NNFMP; 05 Feb 2009 17:25:33 -0000
Received: from [127.0.0.1] by omp101.mail.gq1.yahoo.com with NNFMP; 05 Feb 2009 17:25:33 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 322534.87891.bm@omp101.mail.gq1.yahoo.com
Received: (qmail 24755 invoked by uid 60001); 5 Feb 2009 13:44:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=NUf18jPvaN5NQotffNvaInyc0KpJt3li0U7T1W1o0yiquxvynrqSFLpZCPgs3iU89TI0Makv9tbhzghnRkDK3yQhwMdvR7hxoJNT46udCw57mqzB1xtXr/rKQHxVQJnFNC1FqFWOAB/v5xeUGOTAIVjn4U1lXqWHN39MtkM/8Cs=;
X-YMail-OSG: lKY4bvYVM1mCxsFB0KVeizycuVMh916HG9B5E_nSN3oEQHNSX25TbT9ZcdTHEAtmK8dp063gm1lH5MlQRY7LFwLed8mvEWhz0okPDOV3iDqfcoDBkoDOSc4QdIQ7w1_T1lD.2C0mcB3WNob03iEUVttzbRxwjyOIJlWuz5ESvOy58cZHEjFOl4ZckV3jkw--
Received: from [94.194.201.108] by web112202.mail.gq1.yahoo.com via HTTP; Thu, 05 Feb 2009 05:44:35 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.260.1
References: <948028.16309.qm@web112223.mail.gq1.yahoo.com> <359a92830902050516u30ce1b3ndab0c8734f6bc8e@mail.gmail.com>
Date: Thu, 5 Feb 2009 05:44:35 -0800 (PST)
From: Lebiram <lebiram@ymail.com>
Subject: Re: TermQuery search returns the same Document several times
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2132467683-1233841475=:24397"
Message-ID: <740762.24397.qm@web112202.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2132467683-1233841475=:24397
Content-Type: text/plain; charset=us-ascii


Sorry, I might have misunderstood what my coworker told me.

If HitCollector only returns a document once then he might be referring to an application ID that is assigned to a field that has been indexed twice or more with different document IDs.

I'll clarify this with him.

However is there a way to somehow do a group by field on the results? That field being the application ID?

Thanks.




________________________________
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, February 5, 2009 1:16:12 PM
Subject: Re: TermQuery search returns the same Document several times

I don't understand your question. From the API docs for
HitCollector.collect:

<<<Called once for every non-zero scoring document, with
the document number and its score.>>>

Can you ask your question another way? Because the
only answer I can come up with is
"HitCollector.collect only sees each document once by definition".

Best
Erick

On Thu, Feb 5, 2009 at 7:17 AM, Lebiram <lebiram@ymail.com> wrote:

> Hi All,
>
> Is it possible to somehow ensure that a document will be returned only once
> when collecting from HitCollector?
>
>
>



      
--0-2132467683-1233841475=:24397--


From java-user-return-38432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 20:48:27 2009
Return-Path: <java-user-return-38432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8258 invoked from network); 5 Feb 2009 20:48:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 20:48:26 -0000
Received: (qmail 49433 invoked by uid 500); 5 Feb 2009 20:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49404 invoked by uid 500); 5 Feb 2009 20:48:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49393 invoked by uid 99); 5 Feb 2009 20:48:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 12:48:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 20:48:09 +0000
Received: by wa-out-1112.google.com with SMTP id m33so250271wag.5
        for <java-user@lucene.apache.org>; Thu, 05 Feb 2009 12:47:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ASxqYAl5cJr7VrzAnpqKO+PLXdCTL+Wu9UJgf8nWVPo=;
        b=vEhuHusTuzJTp5kLA3pKhstnRXr5r8Zt8t6inOOvWt4IaLUXtOhP+UvEs0I/sX70zR
         hrTb+Jr+fMl1TB0Too7IHC/quFsjPk1JpvTicuDRh1evE2u7Ics0nUxuX+aFXULWeUQg
         G4ldZ8FSKoLGz/RsnXRQWKXUil17WTvMe+W9s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ked99Jhr/iKkTGbRWy5IhFVlGwgvG8giewWWhuMApvixk9yfmf9Z+rZ2ZoNbT5GU32
         PEp+rtKQf4ZAQJ3wsMa40FQ/sgUurTWDy7dHgQQ83+dmMT1PBywSP+6iwbd5e+zmU+m8
         yKA7KcBuAVzczByHpQxSNu7Y4aKBcsSwrL+rs=
MIME-Version: 1.0
Received: by 10.114.190.18 with SMTP id n18mr587119waf.101.1233866867659; Thu, 
	05 Feb 2009 12:47:47 -0800 (PST)
In-Reply-To: <85d3c3b60902050905n35db3c4cna628036dd22b180d@mail.gmail.com>
References: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>
	 <85d3c3b60902050905n35db3c4cna628036dd22b180d@mail.gmail.com>
Date: Thu, 5 Feb 2009 12:47:47 -0800
Message-ID: <652776090902051247h4a9530e2ycf3959a4baaa68df@mail.gmail.com>
Subject: Re: Poor QPS with highlighting
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646d0d458d3230462320444
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646d0d458d3230462320444
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Thu, Feb 5, 2009 at 9:05 AM, Jason Rutherglen <jason.rutherglen@gmail.com
> wrote:

> Google uses dedicated highlighting servers.  Maybe this architecture would
> work for you.
>

What's your reference? I used to work at Google.


>
> On Mon, Feb 2, 2009 at 11:24 PM, Michael Stoppelman <stopman@gmail.com
> >wrote:
>
> > Hi all,
> >
> > My search backends are only able to eek out 13-15 qps even with the
> entire
> > index in memory (this makes it very expensive to scale). According to my
> > YourKit profiler 80% of the program's time ends up in highlighting. With
> > highlighting disabled my backend gets about 45-50 qps (cheaper scaling)!
> > We're using Mark's TokenSources contrib. to make reconstructing of the
> > document quicker. I was contemplating patching the index to store offsets
> > for every term (instead of just the ordinal positions) so that I could
> make
> > the highlighting faster (since you would know where you hit in the
> document
> > on the search pass). I saw this thread from 2004:
> > http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg04743.html-
> > which asks about adding offsets to the index but it was decided against
> > because it would make the index too large. I can totally understand this;
> > but as machines get more beefy it would probably be nice to make this
> > optional since having 15 qps vs 50qps is quite a trade-off right now. Are
> > other folks seeing this? My documents are quite big sometimes up to 300k
> > tokens. Also my document fields are compressed which is also a time sink
> > for
> > the cpu.
> >
> > Please let me know if you need more details, happy to share.
> >
> > Sincerely,
> > M
> >
>

--00163646d0d458d3230462320444--

From java-user-return-38433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 20:58:00 2009
Return-Path: <java-user-return-38433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11001 invoked from network); 5 Feb 2009 20:58:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 20:58:00 -0000
Received: (qmail 62922 invoked by uid 500); 5 Feb 2009 20:57:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62531 invoked by uid 500); 5 Feb 2009 20:57:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62520 invoked by uid 99); 5 Feb 2009 20:57:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 12:57:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 20:57:44 +0000
Received: by wa-out-1112.google.com with SMTP id m33so252142wag.5
        for <java-user@lucene.apache.org>; Thu, 05 Feb 2009 12:57:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=gIkpY/F1+/2tNALs/ijOL9f+dtQINew3gVPDCVijahw=;
        b=i3aSthm83oaSyQpQIkx/d4YFr4gphL5DyxpbkY2pLtnx0XM7Ee8pbCm7+PfuClGFYp
         DH5y1R5+gWJEYuE/5dnCziBDrJ85ZysLS1LTd2lb5BMgiOMwtsdS+bcMHRWXojPatlCM
         F71q3lUQEXHfT3mRulvrhmhAWV6pW1+5Vsk/Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=s6IDvvt/2oBsIFS2ohzwT5IFLqxUtAsUEYE3Ic9xzoziSL5JTh9GsgI7iBE+z0d7l/
         tzXIgG5wIrXnWYGi6rurSMSztUVGJ/G1VRLgVCL3hhcNMtLHjar0zTGeAJ2fqglwRqPD
         bXiTo5YQmrDwRk9Pq5P7NNGBhThrYeYZHKWFg=
MIME-Version: 1.0
Received: by 10.114.39.5 with SMTP id m5mr577940wam.214.1233867444193; Thu, 05 
	Feb 2009 12:57:24 -0800 (PST)
In-Reply-To: <652776090902051247h4a9530e2ycf3959a4baaa68df@mail.gmail.com>
References: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>
	 <85d3c3b60902050905n35db3c4cna628036dd22b180d@mail.gmail.com>
	 <652776090902051247h4a9530e2ycf3959a4baaa68df@mail.gmail.com>
Date: Thu, 5 Feb 2009 12:57:24 -0800
Message-ID: <652776090902051257r624c80e3y13a97ef5e09ee4b6@mail.gmail.com>
Subject: Re: Poor QPS with highlighting
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636417687b60b2f04623226da
X-Virus-Checked: Checked by ClamAV on apache.org

--001636417687b60b2f04623226da
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Thu, Feb 5, 2009 at 12:47 PM, Michael Stoppelman <stopman@gmail.com>wrote:

>
>
> On Thu, Feb 5, 2009 at 9:05 AM, Jason Rutherglen <
> jason.rutherglen@gmail.com> wrote:
>
>> Google uses dedicated highlighting servers.  Maybe this architecture would
>> work for you.
>>
>
> What's your reference? I used to work at Google.
>

I think creating a separate index/service would be reasonable and it's what
I purposed in a previous email on this thread...
"One option to get around the changing scoring would be to to run a
completely separate index for highlighting (with the overlapping docs you
described)."

Still do lucene developers think storing the offsets is a bad idea from an
index size prospective or some other reason?

M


>
>> On Mon, Feb 2, 2009 at 11:24 PM, Michael Stoppelman <stopman@gmail.com
>> >wrote:
>>
>> > Hi all,
>> >
>> > My search backends are only able to eek out 13-15 qps even with the
>> entire
>> > index in memory (this makes it very expensive to scale). According to my
>> > YourKit profiler 80% of the program's time ends up in highlighting. With
>> > highlighting disabled my backend gets about 45-50 qps (cheaper scaling)!
>> > We're using Mark's TokenSources contrib. to make reconstructing of the
>> > document quicker. I was contemplating patching the index to store
>> offsets
>> > for every term (instead of just the ordinal positions) so that I could
>> make
>> > the highlighting faster (since you would know where you hit in the
>> document
>> > on the search pass). I saw this thread from 2004:
>> > http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg04743.html-
>> > which asks about adding offsets to the index but it was decided against
>> > because it would make the index too large. I can totally understand
>> this;
>> > but as machines get more beefy it would probably be nice to make this
>> > optional since having 15 qps vs 50qps is quite a trade-off right now.
>> Are
>> > other folks seeing this? My documents are quite big sometimes up to 300k
>> > tokens. Also my document fields are compressed which is also a time sink
>> > for
>> > the cpu.
>> >
>> > Please let me know if you need more details, happy to share.
>> >
>> > Sincerely,
>> > M
>> >
>>
>
>

--001636417687b60b2f04623226da--

From java-user-return-38434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 22:13:05 2009
Return-Path: <java-user-return-38434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68303 invoked from network); 5 Feb 2009 22:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 22:13:05 -0000
Received: (qmail 74444 invoked by uid 500); 5 Feb 2009 22:12:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74251 invoked by uid 500); 5 Feb 2009 22:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74240 invoked by uid 99); 5 Feb 2009 22:12:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 14:12:58 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 22:12:49 +0000
Received: by gxk6 with SMTP id 6so517577gxk.5
        for <java-user@lucene.apache.org>; Thu, 05 Feb 2009 14:12:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=wQByKbOGzWPzWHwhoMCsDy4kjR2+S/BYiEYSujz89+o=;
        b=HaZ/6cTjFn+UAvwtOuK1eNrkiT7DxzOs4SKsq22mgnXJeuagvQLVrW++wD2wNKjX7s
         7KFtiZ9Ffto3z30JbG/9JZGzxeY4yZT/7bME32T6v24vBG+sVZH/A3mLa32jOHXCIiC+
         +bfYrndQsApM5Gl51tuUuc3ZjEjvjBt4MXxII=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MEUozf916uaMzSXgtfGzD0FsXjUJAeG2k/frMtxKNOjc6DbqTZ+He5w0Id0xbSDwmm
         cZSB1cFuaGRPGqXYcFiTH25CwK6IP3EFLYkkoA8CLbSFm8Ct+xQAGpcH14wQkQnKhbyp
         vfh9IqDGTYT/XXBUNqJn5vs2Swu4kdka4WTbA=
MIME-Version: 1.0
Received: by 10.151.98.11 with SMTP id a11mr936342ybm.185.1233871946601; Thu, 
	05 Feb 2009 14:12:26 -0800 (PST)
In-Reply-To: <652776090902051257r624c80e3y13a97ef5e09ee4b6@mail.gmail.com>
References: <652776090902022324g7af80223pa7a4c3fe396c5b59@mail.gmail.com>
	 <85d3c3b60902050905n35db3c4cna628036dd22b180d@mail.gmail.com>
	 <652776090902051247h4a9530e2ycf3959a4baaa68df@mail.gmail.com>
	 <652776090902051257r624c80e3y13a97ef5e09ee4b6@mail.gmail.com>
Date: Thu, 5 Feb 2009 14:12:26 -0800
Message-ID: <85d3c3b60902051412g66296475o4ad72178b82134b4@mail.gmail.com>
Subject: Re: Poor QPS with highlighting
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c199613548f0462333346
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c199613548f0462333346
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

http://en.wikipedia.org/wiki/Google_platform

Document server summarization

On Thu, Feb 5, 2009 at 12:57 PM, Michael Stoppelman <stopman@gmail.com>wrote:

> On Thu, Feb 5, 2009 at 12:47 PM, Michael Stoppelman <stopman@gmail.com
> >wrote:
>
> >
> >
> > On Thu, Feb 5, 2009 at 9:05 AM, Jason Rutherglen <
> > jason.rutherglen@gmail.com> wrote:
> >
> >> Google uses dedicated highlighting servers.  Maybe this architecture
> would
> >> work for you.
> >>
> >
> > What's your reference? I used to work at Google.
> >
>
> I think creating a separate index/service would be reasonable and it's what
> I purposed in a previous email on this thread...
> "One option to get around the changing scoring would be to to run a
> completely separate index for highlighting (with the overlapping docs you
> described)."
>
> Still do lucene developers think storing the offsets is a bad idea from an
> index size prospective or some other reason?
>
> M
>
>
> >
> >> On Mon, Feb 2, 2009 at 11:24 PM, Michael Stoppelman <stopman@gmail.com
> >> >wrote:
> >>
> >> > Hi all,
> >> >
> >> > My search backends are only able to eek out 13-15 qps even with the
> >> entire
> >> > index in memory (this makes it very expensive to scale). According to
> my
> >> > YourKit profiler 80% of the program's time ends up in highlighting.
> With
> >> > highlighting disabled my backend gets about 45-50 qps (cheaper
> scaling)!
> >> > We're using Mark's TokenSources contrib. to make reconstructing of the
> >> > document quicker. I was contemplating patching the index to store
> >> offsets
> >> > for every term (instead of just the ordinal positions) so that I could
> >> make
> >> > the highlighting faster (since you would know where you hit in the
> >> document
> >> > on the search pass). I saw this thread from 2004:
> >> >
> http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg04743.html-
> >> > which asks about adding offsets to the index but it was decided
> against
> >> > because it would make the index too large. I can totally understand
> >> this;
> >> > but as machines get more beefy it would probably be nice to make this
> >> > optional since having 15 qps vs 50qps is quite a trade-off right now.
> >> Are
> >> > other folks seeing this? My documents are quite big sometimes up to
> 300k
> >> > tokens. Also my document fields are compressed which is also a time
> sink
> >> > for
> >> > the cpu.
> >> >
> >> > Please let me know if you need more details, happy to share.
> >> >
> >> > Sincerely,
> >> > M
> >> >
> >>
> >
> >
>

--0015174c199613548f0462333346--

From java-user-return-38435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 05 22:38:35 2009
Return-Path: <java-user-return-38435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79760 invoked from network); 5 Feb 2009 22:38:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2009 22:38:35 -0000
Received: (qmail 30352 invoked by uid 500); 5 Feb 2009 22:38:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30317 invoked by uid 500); 5 Feb 2009 22:38:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30250 invoked by uid 99); 5 Feb 2009 22:38:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 14:38:27 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.162.176 as permitted sender)
Received: from [209.85.162.176] (HELO el-out-1112.google.com) (209.85.162.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 22:38:20 +0000
Received: by el-out-1112.google.com with SMTP id s27so303906ele.14
        for <java-user@lucene.apache.org>; Thu, 05 Feb 2009 14:37:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8Zy2r30qj0k7RRVTd9XlsP6d7S2TlBCvRO07Zi7Q+ak=;
        b=noDKSfKlevOyFRmPjIOY5iSTtnm09an8iwfzfbX+grC0F2/nLJlDutXxu0I0nASj9j
         oxtDkHCpqa5rCwbIXu3PBLe8xOrlmr4vyPlOSbSCtDiN7rQ5+8/efaUr7B8oK6ZWzGWA
         u3t+K7VV4+2Krfdh0H6C49bb963LxAkKrt5hM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iYrR0ASz5UfPLfg+D2jGFLrIQAUvEX6pqDCoEIqE7y8e3JslDxUV15kXZQ+mk0++kt
         X2boX56SHi31pw2aMqaPo+e4f71SBaXQotO6xG0zkdifYv8UPtnu2JKdU/FD4upbQlOG
         6EywpfAAhG33JVtIoOoNSt8vxAsT/ptk4NtAM=
MIME-Version: 1.0
Received: by 10.90.98.12 with SMTP id v12mr401226agb.64.1233873479367; Thu, 05 
	Feb 2009 14:37:59 -0800 (PST)
In-Reply-To: <740762.24397.qm@web112202.mail.gq1.yahoo.com>
References: <948028.16309.qm@web112223.mail.gq1.yahoo.com>
	 <359a92830902050516u30ce1b3ndab0c8734f6bc8e@mail.gmail.com>
	 <740762.24397.qm@web112202.mail.gq1.yahoo.com>
Date: Thu, 5 Feb 2009 17:37:59 -0500
Message-ID: <359a92830902051437i2d50bc8el66c35e09eb9326ff@mail.gmail.com>
Subject: Re: TermQuery search returns the same Document several times
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363108ab6f7c120462338e3c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363108ab6f7c120462338e3c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Your coworker *might* have been talking about a Hits object when
iterating over it for documents past the 100th or so. See the
discussion list of the wiki for the messy details.

Well, you can always sort by a field rather than by score, see
SortField and associated. And you can always specify secondary
and tertiary... sorts.

I'll leave it to others for other suggestions since I'm in a rush.

Best
Erick

On Thu, Feb 5, 2009 at 8:44 AM, Lebiram <lebiram@ymail.com> wrote:

>
> Sorry, I might have misunderstood what my coworker told me.
>
> If HitCollector only returns a document once then he might be referring to
> an application ID that is assigned to a field that has been indexed twice or
> more with different document IDs.
>
> I'll clarify this with him.
>
> However is there a way to somehow do a group by field on the results? That
> field being the application ID?
>
> Thanks.
>
>
>
>
> ________________________________
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, February 5, 2009 1:16:12 PM
> Subject: Re: TermQuery search returns the same Document several times
>
> I don't understand your question. From the API docs for
> HitCollector.collect:
>
> <<<Called once for every non-zero scoring document, with
> the document number and its score.>>>
>
> Can you ask your question another way? Because the
> only answer I can come up with is
> "HitCollector.collect only sees each document once by definition".
>
> Best
> Erick
>
> On Thu, Feb 5, 2009 at 7:17 AM, Lebiram <lebiram@ymail.com> wrote:
>
> > Hi All,
> >
> > Is it possible to somehow ensure that a document will be returned only
> once
> > when collecting from HitCollector?
> >
> >
> >
>
>
>
>
>

--0016363108ab6f7c120462338e3c--

From java-user-return-38436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 06 00:56:11 2009
Return-Path: <java-user-return-38436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21094 invoked from network); 6 Feb 2009 00:56:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2009 00:56:11 -0000
Received: (qmail 87866 invoked by uid 500); 6 Feb 2009 00:56:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87832 invoked by uid 500); 6 Feb 2009 00:56:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87821 invoked by uid 99); 6 Feb 2009 00:56:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Feb 2009 16:56:04 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Feb 2009 00:55:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LVF0J-0007S4-T1
	for java-user@lucene.apache.org; Thu, 05 Feb 2009 16:55:35 -0800
Message-ID: <21864589.post@talk.nabble.com>
Date: Thu, 5 Feb 2009 16:55:35 -0800 (PST)
From: Jay Malaluan <exst_jmalaluan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocCollector vs Hits inquiry
In-Reply-To: <591C6091-FFC5-4C19-9622-BCB27735A2A7@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: exst_jmalaluan@yahoo.com
References: <21844751.post@talk.nabble.com> <591C6091-FFC5-4C19-9622-BCB27735A2A7@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Thanks for pointing me to the API. I found the explanation I'm looking for
at:
http://lucene.apache.org/java/2_4_0/api/core/index.html?org/apache/lucene/search/Hits.html

There's an example on how to use the TopDocCollector instead of Hits. 


Regards,
Jay Joel Malaluan



Grant Ingersoll-6 wrote:
> 
> http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/search/Searcher.html#search(org.apache.lucene.search.Query,%20org.apache.lucene.search.HitCollector)
> 
> The TopDocCollector is a HitCollector.
> 
> On Feb 4, 2009, at 10:34 PM, Jay Malaluan wrote:
> 
>>
>> Hi,
>>
>> As I was reading the post "Re: TopDocCollector vs Hits:  
>> TopDocCollector
>> slowing....", I just got curious on how he explained his change from  
>> Hits to
>> TopDocCollector. I'm assuming that the Hits is returned from a call  
>> of:
>> Searcher searcher = new Searcher();
>> searcher.search(xxx, xxx) - that will return a Hits object
>>
>> I was searching the javadoc API (2.3 and 2.4) and didn't found any  
>> method
>> that returns TopDocCollector object from a searcher.search(xxx, xxx)  
>> call.
>>
>> Would be a great help is someone can expound this. I might be able  
>> to use
>> this in future implementation.
>>
>>
>> Regards,
>> Jay Joel Malaluan
>> -- 
>> View this message in context:
>> http://www.nabble.com/Re%3A-TopDocCollector-vs-Hits-inquiry-tp21844751p21844751.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-TopDocCollector-vs-Hits-inquiry-tp21844751p21864589.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 07 14:18:55 2009
Return-Path: <java-user-return-38437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49581 invoked from network); 7 Feb 2009 14:18:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2009 14:18:55 -0000
Received: (qmail 59953 invoked by uid 500); 7 Feb 2009 14:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59824 invoked by uid 500); 7 Feb 2009 14:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59813 invoked by uid 99); 7 Feb 2009 14:18:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 06:18:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.219.15 as permitted sender)
Received: from [209.85.219.15] (HELO mail-ew0-f15.google.com) (209.85.219.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 14:18:37 +0000
Received: by ewy8 with SMTP id 8so510834ewy.5
        for <java-user@lucene.apache.org>; Sat, 07 Feb 2009 06:18:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=3k61wFV8VWeixdJEpVyJMfLvW/sYMPIucCmq8G9iz4k=;
        b=ZNaV4jO0pIDtoIYvT6JmUBvKOc6nm3N6XyVVRbxruSOLg+oNzyIcqJHU1kfIe9y1o3
         eRPEU/sfZ0VOEDgnzfoxEALtngs4Oc6bJa1ElinkSp9zHl0yjxMDwtQ/HlySaNIC5eh4
         9dlv5+MpQSdUrBExwWnWqjz6d/ws7DO/vMngc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=VIBpGyudmC9dNWtqm9pRAMdHhEUQn15B2IDWoUpxWe7W9QQQvVxdmIsrYhBxV49nTD
         se2UQN/MIWt2GboP5neQapAvHm6ZOVuTzhS8TfUYB3f2UiVM0NkANLn8DQkfb62UvA79
         94i5zbBjzEP/r+YANh2lfAHTMLDLjhl5kygug=
Received: by 10.210.35.17 with SMTP id i17mr2230277ebi.140.1234016297533;
        Sat, 07 Feb 2009 06:18:17 -0800 (PST)
Received: from elf_ulfving.lan (c-11e6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se [85.227.230.17])
        by mx.google.com with ESMTPS id c4sm9207969nfi.59.2009.02.07.06.18.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 07 Feb 2009 06:18:17 -0800 (PST)
Message-Id: <B915B771-95DC-41AE-8173-BE43475CF481@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <740762.24397.qm@web112202.mail.gq1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: TermQuery search returns the same Document several times
Date: Sat, 7 Feb 2009 15:18:15 +0100
References: <948028.16309.qm@web112223.mail.gq1.yahoo.com> <359a92830902050516u30ce1b3ndab0c8734f6bc8e@mail.gmail.com> <740762.24397.qm@web112202.mail.gq1.yahoo.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


5 feb 2009 kl. 14.44 skrev Lebiram:

> If HitCollector only returns a document once then he might be  
> referring to an application ID that is assigned to a field that has  
> been indexed twice or more with different document IDs.
>
> I'll clarify this with him.
>
> However is there a way to somehow do a group by field on the  
> results? That field being the application ID?


There is no built in feature for your request, I think it needs to be  
handled by post processing of the collected documents. I recently  
implemented that for an application:

(Perhaps it is possible to implement in a better way using a function  
query.)

It collects lots of documents and expose them to the consumer via a  
facade that lazily load documents from the IndexReader as they are  
requested. A Set<MyPrimaryKey> keeps track of if the entity already is  
a member of the results but with a greater score.

This means I must estimate the number of total hits (and how many  
documents to collect in order to collect enough entities as requested  
by the client) with the mean number of documents collected per entity  
in an average query.


       karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 07 18:57:56 2009
Return-Path: <java-user-return-38438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54147 invoked from network); 7 Feb 2009 18:57:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2009 18:57:56 -0000
Received: (qmail 8547 invoked by uid 500); 7 Feb 2009 18:57:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8509 invoked by uid 500); 7 Feb 2009 18:57:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8498 invoked by uid 99); 7 Feb 2009 18:57:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 10:57:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of r.ventaglio@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 18:57:40 +0000
Received: by qyk13 with SMTP id 13so1761421qyk.5
        for <java-user@lucene.apache.org>; Sat, 07 Feb 2009 10:57:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=MRXiHios7U20lFrJOHp1itAIeqbz873uuVZUrhHwVEM=;
        b=jSkk0ONhTOtouEoRWdJGs8zcYC/7P4zoYd4N1L7navyfnF8Cs8HRp1ma66weAHg+DW
         yVEwqwL8Bt8rJms7G6vhqk2aFvjetQ2vcOiTn91vhBGDigZ5ukrAzKHe7WYrTeyijsb+
         weGOO748zWIDEr7kT6A4Kg6eKqJNyELtTb0Vk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Jw6DozAowtHBv3MHaVvQGyufHIiGMEKQAvrLP0wf+DLXmcryR1H78WFgOQz1qMj4Pr
         TH8UU3AzpFZTSdl41e+7iIZDBwMaE7BnqOAOv2ogsyZgDUb4r9Ib5iHqiqs14Xs9KBpZ
         URb8POKDnem7/jrkiQiigGQNHq13ZSdfYU92s=
MIME-Version: 1.0
Received: by 10.229.100.4 with SMTP id w4mr969996qcn.11.1234033039548; Sat, 07 
	Feb 2009 10:57:19 -0800 (PST)
Date: Sat, 7 Feb 2009 19:57:19 +0100
Message-ID: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
Subject: Faceted search with OpenBitSet/SortedVIntList
From: Raffaella Ventaglio <r.ventaglio@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ef090f6a2b4046258b417
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ef090f6a2b4046258b417
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

I am trying to implement a kind of faceted search using Lucene 2.4.0.

I have a list of configuration rules that tell me how to generate this
facets and the corresponding queries (that can range from simple term
queries to complex boolean queries).

When my application starts, it creates the whole set of facets objects and
initializes them.
For each facet:
- I create the query according to the configured rule;
- I ask the reader for the bitset corresponding to that query and I store it
in the Facet object;
- I get the cardinality of the bitset and I save it in the Facet object as
its "initial count".

When the user does a search I have to update the "counts" associated to each
Facet:
- I get the bitset corresponding to the "query + filter" generated by the
user search;
- I get the cardinality of the ("search bitset" AND "facet bitset") and I
save it as the updated count.


In my first solution, I used only "OpenBitSetDISI" objects, both for Facet
bitset and for search bitset.
So I could use "intersectionCount" method to get updated counts after user
search.

This works very well and it is very fast, but when the number of documents
in the index and the number of facets grows it is too memory consuming.


So I tried a different solution: when I create facet bitsets I use the same
rule applied in ChainedFilter/BooleanFilter to decide if I have to store an
OpenBitSet or a SortedVIntList.
When I have to calculate updated counts:
- if the facet has an OpenBitSet, I use the "intersectionCount" method
directly;
- if the facet has a SortedVIntList, I first create a new OpenBitSetDISI
using the SortedVIntList.iterator and then I use the "intersectionCount"
method.

In this way, I use a smaller amount of memory at initialization time, but
for each user search I create a large number of objects (that I suddenly
throw away) and this affects application performance because it wastes a lot
of time doing GC.

So my question is: is there a better way to accomplish this task?

I think, it would be fine if I could calculate "intersectionCount" directly
on SortedVIntList objects, but I have not found nothing like that in Lucene
2.4 JavaDoc.
Am I missing something?


As a reference, now my index contains more than 500.000 documents and I have
to create/manage up to 50.000 facets.
Using "second solution", at initialization time my facets structure requires
more or less 120MB (and this is good enough), while updating counts it uses
even 2GB of memory (and this is very bad).

Thanks in advance,
Raf

--0016364ef090f6a2b4046258b417--

From java-user-return-38439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 07 19:19:16 2009
Return-Path: <java-user-return-38439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56627 invoked from network); 7 Feb 2009 19:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2009 19:19:16 -0000
Received: (qmail 23949 invoked by uid 500); 7 Feb 2009 19:19:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23916 invoked by uid 500); 7 Feb 2009 19:19:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23905 invoked by uid 99); 7 Feb 2009 19:19:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 11:19:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of maggon@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 19:18:59 +0000
Received: by yx-out-2324.google.com with SMTP id 3so487054yxj.5
        for <java-user@lucene.apache.org>; Sat, 07 Feb 2009 11:18:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=ayjPsJkfCg/AtFMn6ONLOforc0JgsryD8GwGp6REvEk=;
        b=AdVi0Fq1ngOOmRw6ai70UoZnd8i0HCSFjNyCGs41k0SiYlrIDtlh6nFBI4Fg3x7hJG
         HM5MT0/V2iX6UCTC1DN5OTqpAudS+Ml2ktKRy8yIEdHeuQIDkWE2zyIdGbTfRxA70xYv
         Zqjq+LIRGK6KaANtb9TLPs3tXe5EhJAQ0dYzg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=M4+WOX+5iBrjncfOmy3ESnqIiXObtSJ0yXwQOk3HeErfZcIzEZ6jVnK7bSSimsmfId
         0hKibSDULvFCkz2ytNsoN/cxzf2FmoE0KyD3I7g93CUs5D1lUmtiBkLzn4ElsHg8+XLd
         qPFvc7wrqSXLRcJ/qoE1vBFrRiZlTPc7AVLjs=
Received: by 10.65.44.11 with SMTP id w11mr1953979qbj.58.1234034318267;
        Sat, 07 Feb 2009 11:18:38 -0800 (PST)
Received: from ?10.18.192.238? ([32.172.248.85])
        by mx.google.com with ESMTPS id s35sm5684810qbs.6.2009.02.07.11.18.31
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 07 Feb 2009 11:18:37 -0800 (PST)
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
Message-Id: <700526D3-AEDD-402F-A943-DB21BF847134@gmail.com>
From: Sameer Maggon <maggon@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5C1)
Mime-Version: 1.0 (iPhone Mail 5C1)
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
Date: Sat, 7 Feb 2009 11:18:20 -0800
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Did you look at Solr? It provides faceted search out of the box and is  
built on top of Lucene.

Sameer.

On Feb 7, 2009, at 10:57 AM, Raffaella Ventaglio  
<r.ventaglio@gmail.com> wrote:

> Hi,
>
> I am trying to implement a kind of faceted search using Lucene 2.4.0.
>
> I have a list of configuration rules that tell me how to generate this
> facets and the corresponding queries (that can range from simple term
> queries to complex boolean queries).
>
> When my application starts, it creates the whole set of facets  
> objects and
> initializes them.
> For each facet:
> - I create the query according to the configured rule;
> - I ask the reader for the bitset corresponding to that query and I  
> store it
> in the Facet object;
> - I get the cardinality of the bitset and I save it in the Facet  
> object as
> its "initial count".
>
> When the user does a search I have to update the "counts" associated  
> to each
> Facet:
> - I get the bitset corresponding to the "query + filter" generated  
> by the
> user search;
> - I get the cardinality of the ("search bitset" AND "facet bitset")  
> and I
> save it as the updated count.
>
>
> In my first solution, I used only "OpenBitSetDISI" objects, both for  
> Facet
> bitset and for search bitset.
> So I could use "intersectionCount" method to get updated counts  
> after user
> search.
>
> This works very well and it is very fast, but when the number of  
> documents
> in the index and the number of facets grows it is too memory  
> consuming.
>
>
> So I tried a different solution: when I create facet bitsets I use  
> the same
> rule applied in ChainedFilter/BooleanFilter to decide if I have to  
> store an
> OpenBitSet or a SortedVIntList.
> When I have to calculate updated counts:
> - if the facet has an OpenBitSet, I use the "intersectionCount" method
> directly;
> - if the facet has a SortedVIntList, I first create a new  
> OpenBitSetDISI
> using the SortedVIntList.iterator and then I use the  
> "intersectionCount"
> method.
>
> In this way, I use a smaller amount of memory at initialization  
> time, but
> for each user search I create a large number of objects (that I  
> suddenly
> throw away) and this affects application performance because it  
> wastes a lot
> of time doing GC.
>
> So my question is: is there a better way to accomplish this task?
>
> I think, it would be fine if I could calculate "intersectionCount"  
> directly
> on SortedVIntList objects, but I have not found nothing like that in  
> Lucene
> 2.4 JavaDoc.
> Am I missing something?
>
>
> As a reference, now my index contains more than 500.000 documents  
> and I have
> to create/manage up to 50.000 facets.
> Using "second solution", at initialization time my facets structure  
> requires
> more or less 120MB (and this is good enough), while updating counts  
> it uses
> even 2GB of memory (and this is very bad).
>
> Thanks in advance,
> Raf

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 07 20:30:04 2009
Return-Path: <java-user-return-38440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82890 invoked from network); 7 Feb 2009 20:30:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2009 20:30:04 -0000
Received: (qmail 67180 invoked by uid 500); 7 Feb 2009 20:29:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67147 invoked by uid 500); 7 Feb 2009 20:29:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67136 invoked by uid 99); 7 Feb 2009 20:29:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 12:29:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 20:29:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1312028rvb.5
        for <java-user@lucene.apache.org>; Sat, 07 Feb 2009 12:29:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=JU8Tmlu7qvrloJa2bIHs7nXZUit3gHWEXQjYav1gHL0=;
        b=ae6TXtkFwXj2yKPBHVlTQZsieRGxgP9CNKeKTZWkG5SjhqEejvYas6yjUvtvbJ9Nl+
         r40jrL0lGFCrqIqcAMg76G//yvJE2cfLz84R8oZXEk6az01YqckGkrHLDg4lBDqUjRE8
         kArjuO6GMV2ZuAiNkeiVprQV3hWugcJNSg+RA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QPn/y/pHapM4JCPi06OyU8JTJuVNYWdZEArRfbTGAJatF+ZnefPR68YSjV9wA//Lic
         BmUzYm/2yRbU6g/FwyTbgc5RgalbzekXVCrhqa0urOV9bPc6tqRXuZm3PLQZHq93YVj5
         ObDfmeJCLd7cns2l1k03xQWVi05xuBtMALD9c=
MIME-Version: 1.0
Received: by 10.141.88.3 with SMTP id q3mr2446500rvl.125.1234038568355; Sat, 
	07 Feb 2009 12:29:28 -0800 (PST)
In-Reply-To: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
Date: Sat, 7 Feb 2009 12:29:28 -0800
Message-ID: <6e3ae6310902071229q5d8bf31kb9ae1903de230f2b@mail.gmail.com>
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13a168186a0046259fee3
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13a168186a0046259fee3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The first approach is rather limiting when facets number grows.

The "SortedVIntList" approach is similar to field cache. It's better to use
the fieldcache for the facet search, which is the "normal" approach and used
in tools like Solr, DBSight, Bobo Browse Engine, etc.

To avoid creating a lot of objects and quickly throwing them away, you can
adjust Eden memory size, or you can create a bunch of objects and try to
re-use them.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Sat, Feb 7, 2009 at 10:57 AM, Raffaella Ventaglio
<r.ventaglio@gmail.com>wrote:

> Hi,
>
> I am trying to implement a kind of faceted search using Lucene 2.4.0.
>
> I have a list of configuration rules that tell me how to generate this
> facets and the corresponding queries (that can range from simple term
> queries to complex boolean queries).
>
> When my application starts, it creates the whole set of facets objects and
> initializes them.
> For each facet:
> - I create the query according to the configured rule;
> - I ask the reader for the bitset corresponding to that query and I store
> it
> in the Facet object;
> - I get the cardinality of the bitset and I save it in the Facet object as
> its "initial count".
>
> When the user does a search I have to update the "counts" associated to
> each
> Facet:
> - I get the bitset corresponding to the "query + filter" generated by the
> user search;
> - I get the cardinality of the ("search bitset" AND "facet bitset") and I
> save it as the updated count.
>
>
> In my first solution, I used only "OpenBitSetDISI" objects, both for Facet
> bitset and for search bitset.
> So I could use "intersectionCount" method to get updated counts after user
> search.
>
> This works very well and it is very fast, but when the number of documents
> in the index and the number of facets grows it is too memory consuming.
>
>
> So I tried a different solution: when I create facet bitsets I use the same
> rule applied in ChainedFilter/BooleanFilter to decide if I have to store an
> OpenBitSet or a SortedVIntList.
> When I have to calculate updated counts:
> - if the facet has an OpenBitSet, I use the "intersectionCount" method
> directly;
> - if the facet has a SortedVIntList, I first create a new OpenBitSetDISI
> using the SortedVIntList.iterator and then I use the "intersectionCount"
> method.
>
> In this way, I use a smaller amount of memory at initialization time, but
> for each user search I create a large number of objects (that I suddenly
> throw away) and this affects application performance because it wastes a
> lot
> of time doing GC.
>
> So my question is: is there a better way to accomplish this task?
>
> I think, it would be fine if I could calculate "intersectionCount" directly
> on SortedVIntList objects, but I have not found nothing like that in Lucene
> 2.4 JavaDoc.
> Am I missing something?
>
>
> As a reference, now my index contains more than 500.000 documents and I
> have
> to create/manage up to 50.000 facets.
> Using "second solution", at initialization time my facets structure
> requires
> more or less 120MB (and this is good enough), while updating counts it uses
> even 2GB of memory (and this is very bad).
>
> Thanks in advance,
> Raf
>

--000e0cd13a168186a0046259fee3--

From java-user-return-38441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 07 22:07:14 2009
Return-Path: <java-user-return-38441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43413 invoked from network); 7 Feb 2009 22:07:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2009 22:07:14 -0000
Received: (qmail 43061 invoked by uid 500); 7 Feb 2009 22:07:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43016 invoked by uid 500); 7 Feb 2009 22:07:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43004 invoked by uid 99); 7 Feb 2009 22:07:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 14:07:06 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 22:06:58 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id n17M6Z26095843
	for <java-user@lucene.apache.org>; Sat, 7 Feb 2009 23:06:35 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
Date: Sat, 7 Feb 2009 23:06:41 +0100
User-Agent: KMail/1.10.3 (Linux/2.6.27-11-generic; KDE/4.1.3; i686; ; )
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
In-Reply-To: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_xXgjJoBP0aQwJsm"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200902072306.41912.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_xXgjJoBP0aQwJsm
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit

On Saturday 07 February 2009 19:57:19 Raffaella Ventaglio wrote:
> Hi,
> 
> I am trying to implement a kind of faceted search using Lucene 2.4.0.
> 
> I have a list of configuration rules that tell me how to generate this
> facets and the corresponding queries (that can range from simple term
> queries to complex boolean queries).
> 
> When my application starts, it creates the whole set of facets objects and
> initializes them.
> For each facet:
> - I create the query according to the configured rule;
> - I ask the reader for the bitset corresponding to that query and I store it
> in the Facet object;
> - I get the cardinality of the bitset and I save it in the Facet object as
> its "initial count".
> 
> When the user does a search I have to update the "counts" associated to each
> Facet:
> - I get the bitset corresponding to the "query + filter" generated by the
> user search;
> - I get the cardinality of the ("search bitset" AND "facet bitset") and I
> save it as the updated count.
> 
> 
> In my first solution, I used only "OpenBitSetDISI" objects, both for Facet
> bitset and for search bitset.
> So I could use "intersectionCount" method to get updated counts after user
> search.
> 
> This works very well and it is very fast, but when the number of documents
> in the index and the number of facets grows it is too memory consuming.
> 
> 
> So I tried a different solution: when I create facet bitsets I use the same
> rule applied in ChainedFilter/BooleanFilter to decide if I have to store an
> OpenBitSet or a SortedVIntList.
> When I have to calculate updated counts:
> - if the facet has an OpenBitSet, I use the "intersectionCount" method
> directly;
> - if the facet has a SortedVIntList, I first create a new OpenBitSetDISI
> using the SortedVIntList.iterator and then I use the "intersectionCount"
> method.
> 
> In this way, I use a smaller amount of memory at initialization time, but
> for each user search I create a large number of objects (that I suddenly
> throw away) and this affects application performance because it wastes a lot
> of time doing GC.
> 
> So my question is: is there a better way to accomplish this task?
> 
> I think, it would be fine if I could calculate "intersectionCount" directly
> on SortedVIntList objects, but I have not found nothing like that in Lucene
> 2.4 JavaDoc.
> Am I missing something?

You are not missing anything.

OpenBitSet has an optimized implementation for intersection count, and
there is no counterpart of that in SortedVIntList because until now there
has been no need for it.

One way to implement that would be to use one of the boolean combination
filters in contrib, BooleanFilter or ChainedFilter,  and simply count the
the number of times next() returns true on the result.

In case the performance of that is not good enough, another way would be
to directly add an intersection count method to SortedVIntList.
However, SortedVIntList does not allow for an efficient iterator
implementation of skipTo(), and skipTo() is used intensively by intersections.
 
> As a reference, now my index contains more than 500.000 documents and I have
> to create/manage up to 50.000 facets.
> Using "second solution", at initialization time my facets structure requires
> more or less 120MB (and this is good enough), while updating counts it uses
> even 2GB of memory (and this is very bad).

50.000 facets? Well, in case the performance of the last suggestion is
not good enough, one could try and implement a better data structure
than OpenBitSet and SortedVIntList to provide a DocIdSetIterator,
preferably with a fast skipTo() and possibly with a fast intersection count.
In that case, you may want to ask further on the java-dev list.

Regards,
Paul Elschot

--Boundary-00=_xXgjJoBP0aQwJsm--

From java-user-return-38442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 07 23:35:48 2009
Return-Path: <java-user-return-38442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70118 invoked from network); 7 Feb 2009 23:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2009 23:35:48 -0000
Received: (qmail 91082 invoked by uid 500); 7 Feb 2009 23:35:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91009 invoked by uid 500); 7 Feb 2009 23:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90998 invoked by uid 99); 7 Feb 2009 23:35:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 15:35:41 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Feb 2009 23:35:32 +0000
Received: by wf-out-1314.google.com with SMTP id 24so1297640wfg.20
        for <java-user@lucene.apache.org>; Sat, 07 Feb 2009 15:35:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=JhFbZCHZvzT/eOTEW7A41G8sWuHHsWvz3qRlg3BO4Jk=;
        b=PwvqUetc0Ha4/AyUaRS2mi8dzfBdjshr8H4XIAf+1Ou1garQmCfHXUdFPgOIg6FXz8
         D5zF/pwWzm0SmvdxM4zgP3f6QzPqOG70nhUQenNBb1G/fAu1G36HY2P6XuU0Yfbey6FG
         QROyxa0La1geqPYVR+TbR+Ys/Rk8+t8xpRa88=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Pn/INAYvPOAvLNWVvoPqzEvolipymj2iCX5VQ4deCV4PGiGoCbdeYvUqAF1PWNV6i3
         bEAlzBXmT1OOFzv4fP4dupDjJAqjkeb0QfvpJszX1NSea/NJziAQ6ie+yAEVizqc6alw
         PxhGr6I5EeXf9BBqngD/X/NfzCMY6y1yWsSk8=
MIME-Version: 1.0
Received: by 10.142.217.17 with SMTP id p17mr1909974wfg.235.1234049710857; 
	Sat, 07 Feb 2009 15:35:10 -0800 (PST)
In-Reply-To: <200902072306.41912.paul.elschot@xs4all.nl>
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
	 <200902072306.41912.paul.elschot@xs4all.nl>
Date: Sat, 7 Feb 2009 15:35:10 -0800
Message-ID: <8837fb770902071535i127c84dfvdb1f6da1f88d0e65@mail.gmail.com>
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2e082a69d9104625c9601
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2e082a69d9104625c9601
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Our implementation of facet search can handle this. Using bitsets for
intersection is not scalable performance wise when index is large.

We are using a compact forwarded index representation in memory for the
counting. Similar to FieldCache idea but more compact.

Check it out at: http://sourceforge.net/projects/bobo-browse/
Use the branch: BR_DEV_1_5_0
It is rather stable now, we are releasing it soon.

We are using this on production for LinkedIn with live traffic and it is
working well.

Test it out to see if your performance requirement is met and let us know
how to improve.

Thanks

-John

On Sat, Feb 7, 2009 at 2:06 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:

> On Saturday 07 February 2009 19:57:19 Raffaella Ventaglio wrote:
> > Hi,
> >
> > I am trying to implement a kind of faceted search using Lucene 2.4.0.
> >
> > I have a list of configuration rules that tell me how to generate this
> > facets and the corresponding queries (that can range from simple term
> > queries to complex boolean queries).
> >
> > When my application starts, it creates the whole set of facets objects
> and
> > initializes them.
> > For each facet:
> > - I create the query according to the configured rule;
> > - I ask the reader for the bitset corresponding to that query and I store
> it
> > in the Facet object;
> > - I get the cardinality of the bitset and I save it in the Facet object
> as
> > its "initial count".
> >
> > When the user does a search I have to update the "counts" associated to
> each
> > Facet:
> > - I get the bitset corresponding to the "query + filter" generated by the
> > user search;
> > - I get the cardinality of the ("search bitset" AND "facet bitset") and I
> > save it as the updated count.
> >
> >
> > In my first solution, I used only "OpenBitSetDISI" objects, both for
> Facet
> > bitset and for search bitset.
> > So I could use "intersectionCount" method to get updated counts after
> user
> > search.
> >
> > This works very well and it is very fast, but when the number of
> documents
> > in the index and the number of facets grows it is too memory consuming.
> >
> >
> > So I tried a different solution: when I create facet bitsets I use the
> same
> > rule applied in ChainedFilter/BooleanFilter to decide if I have to store
> an
> > OpenBitSet or a SortedVIntList.
> > When I have to calculate updated counts:
> > - if the facet has an OpenBitSet, I use the "intersectionCount" method
> > directly;
> > - if the facet has a SortedVIntList, I first create a new OpenBitSetDISI
> > using the SortedVIntList.iterator and then I use the "intersectionCount"
> > method.
> >
> > In this way, I use a smaller amount of memory at initialization time, but
> > for each user search I create a large number of objects (that I suddenly
> > throw away) and this affects application performance because it wastes a
> lot
> > of time doing GC.
> >
> > So my question is: is there a better way to accomplish this task?
> >
> > I think, it would be fine if I could calculate "intersectionCount"
> directly
> > on SortedVIntList objects, but I have not found nothing like that in
> Lucene
> > 2.4 JavaDoc.
> > Am I missing something?
>
> You are not missing anything.
>
> OpenBitSet has an optimized implementation for intersection count, and
> there is no counterpart of that in SortedVIntList because until now there
> has been no need for it.
>
> One way to implement that would be to use one of the boolean combination
> filters in contrib, BooleanFilter or ChainedFilter,  and simply count the
> the number of times next() returns true on the result.
>
> In case the performance of that is not good enough, another way would be
> to directly add an intersection count method to SortedVIntList.
> However, SortedVIntList does not allow for an efficient iterator
> implementation of skipTo(), and skipTo() is used intensively by
> intersections.
>
> > As a reference, now my index contains more than 500.000 documents and I
> have
> > to create/manage up to 50.000 facets.
> > Using "second solution", at initialization time my facets structure
> requires
> > more or less 120MB (and this is good enough), while updating counts it
> uses
> > even 2GB of memory (and this is very bad).
>
> 50.000 facets? Well, in case the performance of the last suggestion is
> not good enough, one could try and implement a better data structure
> than OpenBitSet and SortedVIntList to provide a DocIdSetIterator,
> preferably with a fast skipTo() and possibly with a fast intersection
> count.
> In that case, you may want to ask further on the java-dev list.
>
> Regards,
> Paul Elschot
>

--000e0cd2e082a69d9104625c9601--

From java-user-return-38443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 08 08:33:10 2009
Return-Path: <java-user-return-38443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46698 invoked from network); 8 Feb 2009 08:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2009 08:33:10 -0000
Received: (qmail 67534 invoked by uid 500); 8 Feb 2009 08:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67511 invoked by uid 500); 8 Feb 2009 08:33:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67500 invoked by uid 99); 8 Feb 2009 08:33:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 00:33:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of r.ventaglio@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 08:32:55 +0000
Received: by qw-out-2122.google.com with SMTP id 5so398110qwi.53
        for <java-user@lucene.apache.org>; Sun, 08 Feb 2009 00:32:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Ue9j9rLctCWpYIfrpGOEKzGfV0MuMexEWBYzBrMHEzM=;
        b=g23JgwhqkLRB94oCbiAaWrFXw3MakYnvrorCqY39lo0gq5qjmq1xGzhrnMHiETraPf
         gmpKUNjB/ChYKgDObJSBzz1M/vg9oHsYOod4K0oyoNoIQSC1mAVgNXBIA3mCMT1F5jDQ
         zVtTNFCWv8V3XKtR+wqVOqEZCQWZxP9ttrbA4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=h+kjXd9dgWeSN0W6pIWM0oOtOMPllhdROQcV2xAnZrmxGIHGihlfUHTiG7mYbPPiJF
         iFvAwK3PDK1KOIK1ZiIrz20N4SJFpddQSSRer3/uvpxyn2LO8TSnfqQxAiLVJ9mY13xi
         Rpz8B16m8D8g8h2kVV7OtpBoKPmDAYLT86PpY=
MIME-Version: 1.0
Received: by 10.229.85.9 with SMTP id m9mr59659qcl.67.1234081954839; Sun, 08 
	Feb 2009 00:32:34 -0800 (PST)
In-Reply-To: <6e3ae6310902071229q5d8bf31kb9ae1903de230f2b@mail.gmail.com>
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
	 <6e3ae6310902071229q5d8bf31kb9ae1903de230f2b@mail.gmail.com>
Date: Sun, 8 Feb 2009 09:32:34 +0100
Message-ID: <70422ecc0902080032p56f65375u64ce9d48113b8195@mail.gmail.com>
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
From: Raffaella Ventaglio <r.ventaglio@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ee2488abc0f046264182f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ee2488abc0f046264182f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Chris,

The "SortedVIntList" approach is similar to field cache. It's better to use
> the fieldcache for the facet search, which is the "normal" approach and
> used
> in tools like Solr, DBSight, Bobo Browse Engine, etc.


Thanks for your answer, I did not know about FieldCache.
However, I think I cannot use it to solve my problem because, as I said in
my previous post, a lot of my "facets" are not related to a "value" on a
single field, but can be configured by the user by writing a complex boolean
query.

And this is also the reason why I think I cannot use Solr to implement this
kind of faceted search.



> To avoid creating a lot of objects and quickly throwing them away, you can
> adjust Eden memory size, or you can create a bunch of objects and try to
> re-use them.
>

Our Eden memory size is already very big, but it is not sufficient and, in
any case, this solution would not be very scalable.
I was also thinking about creating a "pool" of OpenBitSet to reuse, but
before to implement this I thought to look if there were already a better
solution I was not aware of.

Thanks,
Raf

>
>

--0016364ee2488abc0f046264182f--

From java-user-return-38444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 08 08:48:00 2009
Return-Path: <java-user-return-38444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50951 invoked from network); 8 Feb 2009 08:48:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2009 08:48:00 -0000
Received: (qmail 74839 invoked by uid 500); 8 Feb 2009 08:47:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74805 invoked by uid 500); 8 Feb 2009 08:47:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74794 invoked by uid 99); 8 Feb 2009 08:47:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 00:47:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of r.ventaglio@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 08:47:45 +0000
Received: by qyk13 with SMTP id 13so1932904qyk.5
        for <java-user@lucene.apache.org>; Sun, 08 Feb 2009 00:47:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=fjGPiPjuVBat8QnOJSPK1lAfnGL8BncxTufjaBosNo0=;
        b=o5OcXQKNxZi9rNPPXvsggkEd3nB71hQ3RUHdyG35+fvZgWf1fLA6Dhk8VGBtiVqPLK
         N5+7Yoxb4sCvvFucfDj4Y8W+tkKcpal7HsaQPDoBbspKqgJZ+3lCt41Sfy5ARi2sJZ96
         VhrwLhMMCJgA563Dio0WwuraYeMN7IwAM8LaM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=dDubxq4LXegK/7ISxund06Z3sVqqggurf1lV+b2cRKIg93HMizXYErDi67zlfvHAqK
         7t44eALQZjHumXjqm/loupmEYndprdcPIYNtoBclxN/P8N8mCRN58HiqLBDXtvISbcaB
         T0H+6/6GcBrgDBrmFKFZm5jhPCrzZGZP+JZ0I=
MIME-Version: 1.0
Received: by 10.229.96.6 with SMTP id f6mr56168qcn.81.1234082844860; Sun, 08 
	Feb 2009 00:47:24 -0800 (PST)
In-Reply-To: <200902072306.41912.paul.elschot@xs4all.nl>
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
	 <200902072306.41912.paul.elschot@xs4all.nl>
Date: Sun, 8 Feb 2009 09:47:24 +0100
Message-ID: <70422ecc0902080047t3d9c321bwfc35a90927dac8e7@mail.gmail.com>
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
From: Raffaella Ventaglio <r.ventaglio@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368325989762540462644d45
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368325989762540462644d45
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Paul,

One way to implement that would be to use one of the boolean combination
> filters in contrib, BooleanFilter or ChainedFilter,  and simply count the
> the number of times next() returns true on the result.


I am sorry, but I cannot understand: how can I create a BooleanFilter or a
ChainedFilter starting from two SortedVIntList objects?
I have not found any filter that takes an existing "DocIdSet" in its
constructor...

However I have seen that Filter interface is very easy to implement.
Should I create a custom Filter that wraps my SortedVIntList and than use
these filters to create a BooleanFilter?

Thanks,
Raf

--0016368325989762540462644d45--

From java-user-return-38445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 08 09:34:43 2009
Return-Path: <java-user-return-38445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73656 invoked from network); 8 Feb 2009 09:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2009 09:34:43 -0000
Received: (qmail 85442 invoked by uid 500); 8 Feb 2009 09:34:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85413 invoked by uid 500); 8 Feb 2009 09:34:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85402 invoked by uid 99); 8 Feb 2009 09:34:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 01:34:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 09:34:26 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 18D7E30EFC17; Sun,  8 Feb 2009 02:34:05 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.193] (unknown [138.210.8.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 52C1F30EFC16
	for <java-user@lucene.apache.org>; Sun,  8 Feb 2009 02:34:04 -0700 (MST)
Message-Id: <AEBBD285-8163-4FD0-9D31-F7EEC2593C7B@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <70422ecc0902080032p56f65375u64ce9d48113b8195@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
Date: Sun, 8 Feb 2009 04:34:02 -0500
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com> <6e3ae6310902071229q5d8bf31kb9ae1903de230f2b@mail.gmail.com> <70422ecc0902080032p56f65375u64ce9d48113b8195@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 8, 2009, at 3:32 AM, Raffaella Ventaglio wrote:

> Hi Chris,
>
> The "SortedVIntList" approach is similar to field cache. It's better  
> to use
>> the fieldcache for the facet search, which is the "normal" approach  
>> and
>> used
>> in tools like Solr, DBSight, Bobo Browse Engine, etc.
>
>
> Thanks for your answer, I did not know about FieldCache.
> However, I think I cannot use it to solve my problem because, as I  
> said in
> my previous post, a lot of my "facets" are not related to a "value"  
> on a
> single field, but can be configured by the user by writing a complex  
> boolean
> query.

> And this is also the reason why I think I cannot use Solr to  
> implement this kind of faceted search.

Solr also supports facet queries... such that a count of matching  
documents within a constrained subset is returned for each facet.query  
provided.

	Erik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 08 09:35:42 2009
Return-Path: <java-user-return-38446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74600 invoked from network); 8 Feb 2009 09:35:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2009 09:35:42 -0000
Received: (qmail 87119 invoked by uid 500); 8 Feb 2009 09:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87094 invoked by uid 500); 8 Feb 2009 09:35:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 77884 invoked by uid 99); 8 Feb 2009 08:53:31 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
From: "Uwe Schindler" <uschindler@pangaea.de>
To: <java-user@lucene.apache.org>
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com> <200902072306.41912.paul.elschot@xs4all.nl> <70422ecc0902080047t3d9c321bwfc35a90927dac8e7@mail.gmail.com>
Subject: RE: Faceted search with OpenBitSet/SortedVIntList
Date: Sun, 8 Feb 2009 09:53:00 +0100
Message-ID: <95E6867C319B4735AA8B9F18BD30C20E@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <70422ecc0902080047t3d9c321bwfc35a90927dac8e7@mail.gmail.com>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-index: AcmJyfDoi/c3hyn4QHipXbg1YifKGgAAJdBQ
X-Virus-Checked: Checked by ClamAV on apache.org

I would do so, it's really simple, you can even do it in an anonymous inner
class.

-----
UWE SCHINDLER
Webserver/Middleware Development
PANGAEA - Publishing Network for Geoscientific and Environmental Data
MARUM - University of Bremen
Room 2500, Leobener Str., D-28359 Bremen
Tel.: +49 421 218 65595
Fax:  +49 421 218 65505
http://www.pangaea.de/
E-mail: uschindler@pangaea.de

> -----Original Message-----
> From: Raffaella Ventaglio [mailto:r.ventaglio@gmail.com]
> Sent: Sunday, February 08, 2009 9:47 AM
> To: java-user@lucene.apache.org
> Subject: Re: Faceted search with OpenBitSet/SortedVIntList
> 
> Hi Paul,
> 
> One way to implement that would be to use one of the boolean combination
> > filters in contrib, BooleanFilter or ChainedFilter,  and simply count
> the
> > the number of times next() returns true on the result.
> 
> 
> I am sorry, but I cannot understand: how can I create a BooleanFilter or a
> ChainedFilter starting from two SortedVIntList objects?
> I have not found any filter that takes an existing "DocIdSet" in its
> constructor...
> 
> However I have seen that Filter interface is very easy to implement.
> Should I create a custom Filter that wraps my SortedVIntList and than use
> these filters to create a BooleanFilter?
> 
> Thanks,
> Raf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 08 10:41:40 2009
Return-Path: <java-user-return-38447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9838 invoked from network); 8 Feb 2009 10:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2009 10:41:39 -0000
Received: (qmail 13002 invoked by uid 500); 8 Feb 2009 10:41:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12961 invoked by uid 500); 8 Feb 2009 10:41:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12950 invoked by uid 99); 8 Feb 2009 10:41:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 02:41:29 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 10:41:21 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id n18Aewsv063922
	for <java-user@lucene.apache.org>; Sun, 8 Feb 2009 11:40:59 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
Date: Sun, 8 Feb 2009 11:40:57 +0100
User-Agent: KMail/1.10.3 (Linux/2.6.27-11-generic; KDE/4.1.3; i686; ; )
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com> <200902072306.41912.paul.elschot@xs4all.nl> <8837fb770902071535i127c84dfvdb1f6da1f88d0e65@mail.gmail.com>
In-Reply-To: <8837fb770902071535i127c84dfvdb1f6da1f88d0e65@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_6arjJZvKoKUeFNB"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200902081140.58383.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_6arjJZvKoKUeFNB
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit

John,

On Sunday 08 February 2009 00:35:10 John Wang wrote:
> Our implementation of facet search can handle this. Using bitsets for
> intersection is not scalable performance wise when index is large.
> 
> We are using a compact forwarded index representation in memory for the
> counting.

Could you describe how this compact forwarded index works?

> Similar to FieldCache idea but more compact.

Does this also use FieldCacheRangeFilter and/or FieldCacheTermsFilter?


Regards,
Paul Elschot

--Boundary-00=_6arjJZvKoKUeFNB--

From java-user-return-38448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 08 10:52:19 2009
Return-Path: <java-user-return-38448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12122 invoked from network); 8 Feb 2009 10:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2009 10:52:19 -0000
Received: (qmail 18049 invoked by uid 500); 8 Feb 2009 10:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18021 invoked by uid 500); 8 Feb 2009 10:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18010 invoked by uid 99); 8 Feb 2009 10:52:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 02:52:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 10:52:02 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id n18ApgZk078614
	for <java-user@lucene.apache.org>; Sun, 8 Feb 2009 11:51:42 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
Date: Sun, 8 Feb 2009 11:51:41 +0100
User-Agent: KMail/1.10.3 (Linux/2.6.27-11-generic; KDE/4.1.3; i686; ; )
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com> <70422ecc0902080047t3d9c321bwfc35a90927dac8e7@mail.gmail.com> <95E6867C319B4735AA8B9F18BD30C20E@VEGA>
In-Reply-To: <95E6867C319B4735AA8B9F18BD30C20E@VEGA>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_9krjJhQFqi2ANto"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200902081151.41709.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_9krjJhQFqi2ANto
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

On Sunday 08 February 2009 09:53:00 Uwe Schindler wrote:
> I would do so, it's really simple, you can even do it in an anonymous inner
> class.

It is indeed simple, but it might also help to take a look at the source code
of the Lucene classes involved.

Regards,
Paul Elschot

> 
> -----
> UWE SCHINDLER
> Webserver/Middleware Development
> PANGAEA - Publishing Network for Geoscientific and Environmental Data
> MARUM - University of Bremen
> Room 2500, Leobener Str., D-28359 Bremen
> Tel.: +49 421 218 65595
> Fax:  +49 421 218 65505
> http://www.pangaea.de/
> E-mail: uschindler@pangaea.de
> 
> > -----Original Message-----
> > From: Raffaella Ventaglio [mailto:r.ventaglio@gmail.com]
> > Sent: Sunday, February 08, 2009 9:47 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Faceted search with OpenBitSet/SortedVIntList
> > 
> > Hi Paul,
> > 
> > One way to implement that would be to use one of the boolean combination
> > > filters in contrib, BooleanFilter or ChainedFilter,  and simply count
> > the
> > > the number of times next() returns true on the result.
> > 
> > 
> > I am sorry, but I cannot understand: how can I create a BooleanFilter or a
> > ChainedFilter starting from two SortedVIntList objects?
> > I have not found any filter that takes an existing "DocIdSet" in its
> > constructor...
> > 
> > However I have seen that Filter interface is very easy to implement.
> > Should I create a custom Filter that wraps my SortedVIntList and than use
> > these filters to create a BooleanFilter?
> > 
> > Thanks,
> > Raf
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

--Boundary-00=_9krjJhQFqi2ANto--

From java-user-return-38449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 08 13:56:03 2009
Return-Path: <java-user-return-38449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12545 invoked from network); 8 Feb 2009 13:56:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2009 13:56:03 -0000
Received: (qmail 8216 invoked by uid 500); 8 Feb 2009 13:55:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8188 invoked by uid 500); 8 Feb 2009 13:55:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8177 invoked by uid 99); 8 Feb 2009 13:55:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 05:55:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Feb 2009 13:55:46 +0000
Received: by wf-out-1314.google.com with SMTP id 24so1442403wfg.20
        for <java-user@lucene.apache.org>; Sun, 08 Feb 2009 05:55:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Xnga390n+XzIW4a0tMq2kDjCvWGpCjohq01KzIW1EvM=;
        b=HoA0h1isQclYaAr81RX5tQBxfJWTMxzdnBv1BJXaAjUeem71TX0uPVeiRJZg7aO1kq
         UEDAfbjfRdGJedA0uNxhHTEaw5R6QVeW8/ha68jo9usF4uZaS7X5qtTyN+aZ7v+2Wi9J
         DJxVGk7eMCB5//EEte6eXKfGjpBr1f2CJ6VMs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UuLLzYgkWz65f3Fxyg9xtvUkKuXPHqTVBqwOuYUT+hHQ7u+kCW7mLlegu9aL4SgQIP
         DXLiaVaXB/4IlZzu3CaqaC4yWqc8Nz0+LLwE4oeu53Eq9eQ3DM4tY4vCXj+jM4hpufkj
         W1tO8x416vijFhSbPoh+LLvmN0VJBDyhxEkHI=
MIME-Version: 1.0
Received: by 10.142.12.14 with SMTP id 14mr1360842wfl.54.1234101325416; Sun, 
	08 Feb 2009 05:55:25 -0800 (PST)
In-Reply-To: <200902081140.58383.paul.elschot@xs4all.nl>
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
	 <200902072306.41912.paul.elschot@xs4all.nl>
	 <8837fb770902071535i127c84dfvdb1f6da1f88d0e65@mail.gmail.com>
	 <200902081140.58383.paul.elschot@xs4all.nl>
Date: Sun, 8 Feb 2009 05:55:25 -0800
Message-ID: <8837fb770902080555v4d031355yc1d9d1856d250ddf@mail.gmail.com>
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2e2d21e4a600462689b89
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2e2d21e4a600462689b89
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Paul:

     Took a little time to find these classes, they are post-2.4 additions I
think.

     Our representation:

1) We do not build on top of the FieldCacheImpl class for a few reasons: It
is keyed off of the IndexReader, and application cannot clear the cache, and
we assume indexes can update often, using FieldCacheImpl is not ideal. Also,
to support faceted search, we need to store the value array, and the only
thing available in FieldCacheImp is StringIndex. While this is nice and all,
if data is of primitive types, e.g. int, short etc. this is wasteful.
Another reason, though minor, is that we discovered with high doc count
indexes, the order array, keyed from 0 to maxdoc, for each field we want to
support, can cause problems with VM gc. We instead use a segmented index
array representation. Lastly, our data structure is loaded at index load
time, not lazily like FieldCacheImpl.

2) So our forward index representation is an order array, a value array (of
primitive type if specified), and some helper arrays which I will describe
later in detail.

3) For range queries, the idea is very similar to FieldCacheRangeFilter,
except for our primitive value store, and make use of our helper array, e.g.
min/max docid, e.g. for each value, we store corresponding min/max values,
so we know to skip to starting doc and stop early at maxdoc.

4) The differences between FieldCacheTermFilter are similar. Except that we
cased out when termList contains 1 element. We felt that was neccessary due
to the number of times next and skip are called when recall is large, the
price to pay for bitset.get() is too high.

5) We also consider the cases when indexed values are tokenized, e.g. 1 doc
can have more than 1 value in a field. And that representation is a more
involved than can be explained in an email. Comparing to 3), we need to
consider the case of AND in addition to OR which can be assumed when only 1
value per doc is allowed.

6) We also support hierarchical data.

I just merged to our trunk, feel free to take a look.

-John

On Sun, Feb 8, 2009 at 2:40 AM, Paul Elschot <paul.elschot@xs4all.nl> wrote:

> John,
>
> On Sunday 08 February 2009 00:35:10 John Wang wrote:
> > Our implementation of facet search can handle this. Using bitsets for
> > intersection is not scalable performance wise when index is large.
> >
> > We are using a compact forwarded index representation in memory for the
> > counting.
>
> Could you describe how this compact forwarded index works?
>
> > Similar to FieldCache idea but more compact.
>
> Does this also use FieldCacheRangeFilter and/or FieldCacheTermsFilter?
>
>
> Regards,
> Paul Elschot
>

--000e0cd2e2d21e4a600462689b89--

From java-user-return-38450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 09 13:57:35 2009
Return-Path: <java-user-return-38450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85322 invoked from network); 9 Feb 2009 13:57:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2009 13:57:35 -0000
Received: (qmail 69123 invoked by uid 500); 9 Feb 2009 13:57:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69085 invoked by uid 500); 9 Feb 2009 13:57:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69074 invoked by uid 99); 9 Feb 2009 13:57:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Feb 2009 05:57:27 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Feb 2009 13:57:18 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LWWd7-00032N-GM
	for java-user@lucene.apache.org; Mon, 09 Feb 2009 05:56:57 -0800
Message-ID: <21913262.post@talk.nabble.com>
Date: Mon, 9 Feb 2009 05:56:57 -0800 (PST)
From: chanchitodata <chanchitodata@gmail.com>
To: java-user@lucene.apache.org
Subject: Memory Eaten up by TermInfo Instances in Lucene 2.4
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: chanchitodata@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have a weird problem. I use Lucene 2.4 in an web application(Tomcat
5.5.x), running uncer JDK 1.5. After a while (from 1 day to a couple
depending on traffic) all memory gets eaten up by a lot of TermInfo
instances. I have profiled the application and I can see that the TermInfo
instances does not get recovered by the GC. 
I also use Compass and have been posting on a thread in the Compass
forum(http://forum.compass-project.org/thread.jspa?threadID=215943&start=0&tstart=0),
thinking that it was Compass the held on to something in memory but we have
come into conclusion that it must be Lucene that keeps holding on the the
memory.

I have read the thread
http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-td20236834.html#a20236834
and tried to divide my index into smaller parts but with the same result. 

The index contains about 1.5Gb with around 2.7 Million documents and aprox.
30 Fields.

/Rodrigo  
-- 
View this message in context: http://www.nabble.com/Memory-Eaten-up-by-TermInfo-Instances-in-Lucene-2.4-tp21913262p21913262.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 09 18:42:35 2009
Return-Path: <java-user-return-38451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72495 invoked from network); 9 Feb 2009 18:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2009 18:42:35 -0000
Received: (qmail 23816 invoked by uid 500); 9 Feb 2009 18:42:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23796 invoked by uid 500); 9 Feb 2009 18:42:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23784 invoked by uid 99); 9 Feb 2009 18:42:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Feb 2009 10:42:27 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Feb 2009 18:42:18 +0000
Received: by qw-out-2122.google.com with SMTP id 5so65703qwi.53
        for <java-user@lucene.apache.org>; Mon, 09 Feb 2009 10:41:56 -0800 (PST)
Received: by 10.214.241.8 with SMTP id o8mr7221626qah.212.1234204916491;
        Mon, 09 Feb 2009 10:41:56 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 8sm469138qwj.16.2009.02.09.10.41.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 09 Feb 2009 10:41:56 -0800 (PST)
Message-Id: <FABB6596-4F91-4A54-A45E-B7A357C1EBC4@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21913262.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Memory Eaten up by TermInfo Instances in Lucene 2.4
Date: Mon, 9 Feb 2009 13:41:54 -0500
References: <21913262.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Are you certain that old IndexReaders are being closed?

If you are not using CFS file format, how large are your *.tii files?   
If you are using CFS file format, can you run CheckIndex on your index  
and post the output?  This way we can see how many terms are in the  
index (which is what gets loaded as TermInfo instances).

Mike

chanchitodata wrote:

>
> Hi,
>
> I have a weird problem. I use Lucene 2.4 in an web application(Tomcat
> 5.5.x), running uncer JDK 1.5. After a while (from 1 day to a couple
> depending on traffic) all memory gets eaten up by a lot of TermInfo
> instances. I have profiled the application and I can see that the  
> TermInfo
> instances does not get recovered by the GC.
> I also use Compass and have been posting on a thread in the Compass
> forum(http://forum.compass-project.org/thread.jspa?threadID=215943&start=0&tstart=0 
> ),
> thinking that it was Compass the held on to something in memory but  
> we have
> come into conclusion that it must be Lucene that keeps holding on  
> the the
> memory.
>
> I have read the thread
> http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-td20236834.html#a20236834
> and tried to divide my index into smaller parts but with the same  
> result.
>
> The index contains about 1.5Gb with around 2.7 Million documents and  
> aprox.
> 30 Fields.
>
> /Rodrigo
> -- 
> View this message in context: http://www.nabble.com/Memory-Eaten-up-by-TermInfo-Instances-in-Lucene-2.4-tp21913262p21913262.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 10 02:34:48 2009
Return-Path: <java-user-return-38452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81277 invoked from network); 10 Feb 2009 02:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2009 02:34:48 -0000
Received: (qmail 91313 invoked by uid 500); 10 Feb 2009 02:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90665 invoked by uid 500); 10 Feb 2009 02:34:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90654 invoked by uid 99); 10 Feb 2009 02:34:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Feb 2009 18:34:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 02:34:31 +0000
Received: by yx-out-2324.google.com with SMTP id 31so131915yxl.5
        for <java-user@lucene.apache.org>; Mon, 09 Feb 2009 18:34:10 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.195.21 with SMTP id s21mr492083ybf.16.1234233248721; Mon, 
	09 Feb 2009 18:34:08 -0800 (PST)
Reply-To: marc.boucher@hyperix.com
Date: Mon, 9 Feb 2009 18:34:08 -0800
Message-ID: <b4f42b5f0902091834s2bcbf588t8d2083fcc12f6e76@mail.gmail.com>
Subject: Lucene Developer Opportunity in Vancouver
From: Marc Boucher <marc.boucher@hyperix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you're a Lucene/Nutch/Solr developer in the Vancouver, BC area and
are interested in working at a startup please contact me.

Marc Boucher, Hyperix
cooljobs < at > hyperix.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 10 03:55:48 2009
Return-Path: <java-user-return-38453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95043 invoked from network); 10 Feb 2009 03:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2009 03:55:47 -0000
Received: (qmail 45430 invoked by uid 500); 10 Feb 2009 03:55:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45398 invoked by uid 500); 10 Feb 2009 03:55:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45387 invoked by uid 99); 10 Feb 2009 03:55:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Feb 2009 19:55:39 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 03:55:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LWjiF-0006BL-To
	for java-user@lucene.apache.org; Mon, 09 Feb 2009 19:55:07 -0800
Message-ID: <21927297.post@talk.nabble.com>
Date: Mon, 9 Feb 2009 19:55:07 -0800 (PST)
From: Abu Abdulla <montaqa@gmail.com>
To: java-user@lucene.apache.org
Subject: Strange output
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: montaqa@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm getting this message regularly:

++++Whats that? wkey 0x42 (66) 

any hints.

thanks
-- 
View this message in context: http://www.nabble.com/Strange-output-tp21927297p21927297.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 10 12:50:36 2009
Return-Path: <java-user-return-38454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26575 invoked from network); 10 Feb 2009 12:50:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2009 12:50:36 -0000
Received: (qmail 30217 invoked by uid 500); 10 Feb 2009 12:50:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30181 invoked by uid 500); 10 Feb 2009 12:50:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30170 invoked by uid 99); 10 Feb 2009 12:50:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 04:50:25 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 12:50:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LWs3o-0001Ev-J8
	for java-user@lucene.apache.org; Tue, 10 Feb 2009 04:49:56 -0800
Message-ID: <21932951.post@talk.nabble.com>
Date: Tue, 10 Feb 2009 04:49:56 -0800 (PST)
From: chanchitodata <chanchitodata@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Memory Eaten up by TermInfo Instances in Lucene 2.4
In-Reply-To: <FABB6596-4F91-4A54-A45E-B7A357C1EBC4@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: chanchitodata@gmail.com
References: <21913262.post@talk.nabble.com> <FABB6596-4F91-4A54-A45E-B7A357C1EBC4@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Michael,

I=C2=B4m pretty sure that the IndexReaders are being closed. As I said I us=
e
Compass and compass handles all the IndexReader stuff for me. I have
discussed this issue with Shay Banon for a while in the Compass  forum and
he was the guy that lead me to this forum after several diferents test we
did.=20

I have attached a textfile with the output of a CheckIndex on the biggest
index I have. I have also attached an image with the Luke overview of the
same index.

Best regards,
/Rodrigo

http://www.nabble.com/file/p21932951/Checkindex.txt Checkindex.txt=20
http://www.nabble.com/file/p21932951/LukeOverview.JPG LukeOverview.JPG=20

Michael McCandless-2 wrote:
>=20
>=20
> Are you certain that old IndexReaders are being closed?
>=20
> If you are not using CFS file format, how large are your *.tii files?  =
=20
> If you are using CFS file format, can you run CheckIndex on your index =
=20
> and post the output?  This way we can see how many terms are in the =20
> index (which is what gets loaded as TermInfo instances).
>=20
> Mike
>=20
> chanchitodata wrote:
>=20
>>
>> Hi,
>>
>> I have a weird problem. I use Lucene 2.4 in an web application(Tomcat
>> 5.5.x), running uncer JDK 1.5. After a while (from 1 day to a couple
>> depending on traffic) all memory gets eaten up by a lot of TermInfo
>> instances. I have profiled the application and I can see that the =20
>> TermInfo
>> instances does not get recovered by the GC.
>> I also use Compass and have been posting on a thread in the Compass
>> forum(http://forum.compass-project.org/thread.jspa?threadID=3D215943&sta=
rt=3D0&tstart=3D0=20
>> ),
>> thinking that it was Compass the held on to something in memory but =20
>> we have
>> come into conclusion that it must be Lucene that keeps holding on =20
>> the the
>> memory.
>>
>> I have read the thread
>> http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-td2023683=
4.html#a20236834
>> and tried to divide my index into smaller parts but with the same =20
>> result.
>>
>> The index contains about 1.5Gb with around 2.7 Million documents and =20
>> aprox.
>> 30 Fields.
>>
>> /Rodrigo
>> --=20
>> View this message in context:
>> http://www.nabble.com/Memory-Eaten-up-by-TermInfo-Instances-in-Lucene-2.=
4-tp21913262p21913262.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Memory-Eaten-up-by-Term=
Info-Instances-in-Lucene-2.4-tp21913262p21932951.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 10 13:20:09 2009
Return-Path: <java-user-return-38455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33412 invoked from network); 10 Feb 2009 13:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2009 13:20:09 -0000
Received: (qmail 62848 invoked by uid 500); 10 Feb 2009 13:19:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62825 invoked by uid 500); 10 Feb 2009 13:19:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62811 invoked by uid 99); 10 Feb 2009 13:19:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 05:19:56 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 13:19:49 +0000
Received: by gxk6 with SMTP id 6so2104200gxk.5
        for <java-user@lucene.apache.org>; Tue, 10 Feb 2009 05:19:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=USvuWRSHIeOK8uLle9h0rVnApnugIoEbu31F6fw/GV0=;
        b=f/0izbEB7g9Hiz3yOW9QeBxQRsq6qoPE3Wj82uFSdKkOV/P1iuxVjzFyiggHTKAkTH
         lxh0f9eVGacODLABSM2grVEvslka/VQicmLmR8O5wshLQ0OCiaHWBIPSELTUC1r4hT1Z
         WCcvxpUFqESY86x/E0fetfHTiCYae6JRQp5R0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=HdOWh60TnGXHyxhS77zpXvQX4MQcFYRnNGK0V2Wc3wz8J1MRhtNw8fOWlnrRAs9P5i
         8FtBMQE1glGgW+4GVLT/NC2HpPBeRlcdZRKiPQuZirMUi4HjENxDdtZ99KS+tWGWcvRu
         nECVPWI0aPNw45V3tV7bh5DrQy3Q8lLRGMvlI=
MIME-Version: 1.0
Received: by 10.90.32.14 with SMTP id f14mr1122520agf.91.1234271967836; Tue, 
	10 Feb 2009 05:19:27 -0800 (PST)
In-Reply-To: <21927297.post@talk.nabble.com>
References: <21927297.post@talk.nabble.com>
Date: Tue, 10 Feb 2009 08:19:27 -0500
Message-ID: <359a92830902100519v13e0e39eq7c8dc90de5bdac9c@mail.gmail.com>
Subject: Re: Strange output
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64f90e832fa980462905632
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64f90e832fa980462905632
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

You need to provide more context for your question, as
it is it's unanswerable.

What are you doing when you get this message? What are
you trying to do? What is your setup? Code fragments
would be useful for both your indexing and searching.

Best
Erick

On Mon, Feb 9, 2009 at 10:55 PM, Abu Abdulla <montaqa@gmail.com> wrote:

>
> Hi,
>
> I'm getting this message regularly:
>
> ++++Whats that? wkey 0x42 (66)
>
> any hints.
>
> thanks
> --
> View this message in context:
> http://www.nabble.com/Strange-output-tp21927297p21927297.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64f90e832fa980462905632--

From java-user-return-38456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 10 15:00:03 2009
Return-Path: <java-user-return-38456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81294 invoked from network); 10 Feb 2009 15:00:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2009 15:00:03 -0000
Received: (qmail 43163 invoked by uid 500); 10 Feb 2009 14:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43138 invoked by uid 500); 10 Feb 2009 14:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43127 invoked by uid 99); 10 Feb 2009 14:59:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 06:59:55 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 14:59:46 +0000
Received: by wa-out-1112.google.com with SMTP id m33so1464983wag.5
        for <java-user@lucene.apache.org>; Tue, 10 Feb 2009 06:59:24 -0800 (PST)
Received: by 10.114.73.6 with SMTP id v6mr368449waa.48.1234277567339;
        Tue, 10 Feb 2009 06:52:47 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm8746547ywc.10.2009.02.10.06.52.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 10 Feb 2009 06:52:46 -0800 (PST)
Message-Id: <2F672EDE-CADA-4793-B9AC-331398A31696@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21932951.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Memory Eaten up by TermInfo Instances in Lucene 2.4
Date: Tue, 10 Feb 2009 09:52:45 -0500
References: <21913262.post@talk.nabble.com> <FABB6596-4F91-4A54-A45E-B7A357C1EBC4@mikemccandless.com> <21932951.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Your index has relatively few terms: ~13 million.

Lucene stores TermInfo instances in two places.  The first place is a
persistent array, called the terms index, of every 128th term.  It's
created when the IndexReader is first opened.  So in your case this is
~100.000 ("100 thousand") instances.  The JPEG on your original post
on the compass forum is tracing to this terms index.

Then, per thread per segment there is an LRU cache of recently used
TermInfo instances.  That cache is 1024 in size.  Depending on how
many threads, segments and how many unique queries you are testing
with, this will add some number of TermInfo instances.

So... seeing alot of TermInfo instances is fully normal.

Are you actually hitting OOM, or just noticing alot of TermInfo
instances in YourKit?

How many SegmentReader instances do you see held open in YourKit?

Mike

chanchitodata wrote:

>
> Hi Michael,
>
> I=B4m pretty sure that the IndexReaders are being closed. As I said I =20=

> use
> Compass and compass handles all the IndexReader stuff for me. I have
> discussed this issue with Shay Banon for a while in the Compass  =20
> forum and
> he was the guy that lead me to this forum after several diferents =20
> test we
> did.
>
> I have attached a textfile with the output of a CheckIndex on the =20
> biggest
> index I have. I have also attached an image with the Luke overview =20
> of the
> same index.
>
> Best regards,
> /Rodrigo
>
> http://www.nabble.com/file/p21932951/Checkindex.txt Checkindex.txt
> http://www.nabble.com/file/p21932951/LukeOverview.JPG LukeOverview.JPG
>
> Michael McCandless-2 wrote:
>>
>>
>> Are you certain that old IndexReaders are being closed?
>>
>> If you are not using CFS file format, how large are your *.tii files?
>> If you are using CFS file format, can you run CheckIndex on your =20
>> index
>> and post the output?  This way we can see how many terms are in the
>> index (which is what gets loaded as TermInfo instances).
>>
>> Mike
>>
>> chanchitodata wrote:
>>
>>>
>>> Hi,
>>>
>>> I have a weird problem. I use Lucene 2.4 in an web =20
>>> application(Tomcat
>>> 5.5.x), running uncer JDK 1.5. After a while (from 1 day to a couple
>>> depending on traffic) all memory gets eaten up by a lot of TermInfo
>>> instances. I have profiled the application and I can see that the
>>> TermInfo
>>> instances does not get recovered by the GC.
>>> I also use Compass and have been posting on a thread in the Compass
>>> =
forum(http://forum.compass-project.org/thread.jspa?threadID=3D215943&start=
=3D0&tstart=3D0
>>> ),
>>> thinking that it was Compass the held on to something in memory but
>>> we have
>>> come into conclusion that it must be Lucene that keeps holding on
>>> the the
>>> memory.
>>>
>>> I have read the thread
>>> =
http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-td20236834.=
html#a20236834
>>> and tried to divide my index into smaller parts but with the same
>>> result.
>>>
>>> The index contains about 1.5Gb with around 2.7 Million documents and
>>> aprox.
>>> 30 Fields.
>>>
>>> /Rodrigo
>>> --=20
>>> View this message in context:
>>> =
http://www.nabble.com/Memory-Eaten-up-by-TermInfo-Instances-in-Lucene-2.4-=
tp21913262p21913262.html
>>> Sent from the Lucene - Java Users mailing list archive at =20
>>> Nabble.com.
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --=20
> View this message in context: =
http://www.nabble.com/Memory-Eaten-up-by-TermInfo-Instances-in-Lucene-2.4-=
tp21913262p21932951.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 10 15:29:02 2009
Return-Path: <java-user-return-38457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10883 invoked from network); 10 Feb 2009 15:29:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2009 15:29:02 -0000
Received: (qmail 95494 invoked by uid 500); 10 Feb 2009 15:28:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95216 invoked by uid 500); 10 Feb 2009 15:28:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95205 invoked by uid 99); 10 Feb 2009 15:28:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 07:28:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of murat.yakici@cis.strath.ac.uk designates 130.159.196.96 as permitted sender)
Received: from [130.159.196.96] (HELO smtphost.cis.strath.ac.uk) (130.159.196.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 15:28:46 +0000
Received: from [130.159.185.12] (pc-hotdesk.cis.strath.ac.uk [130.159.185.12])
	by arnott.cis.strath.ac.uk (8.14.2/8.14.2/Debian-2build1) with ESMTP id n1AFRlIr007535
	for <java-user@lucene.apache.org>; Tue, 10 Feb 2009 15:27:47 GMT
Message-ID: <49919CF3.9060300@cis.strath.ac.uk>
Date: Tue, 10 Feb 2009 15:27:47 +0000
From: Murat Yakici <murat.yakici@cis.strath.ac.uk>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Listing fields in an index
References: <18959421.post@talk.nabble.com>
In-Reply-To: <18959421.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-CIS-MailScanner-SpamCheck: SpamAssassin score=-1.44, ALL_TRUSTED
X-Scanned-By: MIMEDefang on 130.159.196.96
X-Virus-Checked: Checked by ClamAV on apache.org

Use myIndexReader.|*getFieldNames 
<http://www.netlikon.de/docs/javadoc-lucene/lucene_2_3/org/apache/lucene/index/IndexReader.html#getFieldNames%28org.apache.lucene.index.IndexReader.FieldOption%29>*(IndexReader.FieldOption 
<http://www.netlikon.de/docs/javadoc-lucene/lucene_2_3/org/apache/lucene/index/IndexReader.FieldOption.html> fldOption)|;
That should do.
The selection of FieldOption's is important, therefore you need to know 
what you really want to get.

Cheers,

Murat Yakici
Department of Computer & Information Sciences
University of Strathclyde
Glasgow, UK
-------------------------------------------
The University of Strathclyde is a charitable body, registered in Scotland, 
with registration number SC015263.



John Patterson wrote:
> Hi,
>
> How do I list all the fields in an index? Some documents do not contain all
> fields.
>
> Thanks,
>
> John
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 10 17:45:07 2009
Return-Path: <java-user-return-38458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77831 invoked from network); 10 Feb 2009 17:45:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2009 17:45:06 -0000
Received: (qmail 90363 invoked by uid 500); 10 Feb 2009 17:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90343 invoked by uid 500); 10 Feb 2009 17:44:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90332 invoked by uid 99); 10 Feb 2009 17:44:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 09:44:59 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 17:44:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LWwer-00088Y-58
	for java-user@lucene.apache.org; Tue, 10 Feb 2009 09:44:29 -0800
Message-ID: <21938848.post@talk.nabble.com>
Date: Tue, 10 Feb 2009 09:44:29 -0800 (PST)
From: chanchitodata <chanchitodata@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Memory Eaten up by TermInfo Instances in Lucene 2.4
In-Reply-To: <2F672EDE-CADA-4793-B9AC-331398A31696@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: chanchitodata@gmail.com
References: <21913262.post@talk.nabble.com> <FABB6596-4F91-4A54-A45E-B7A357C1EBC4@mikemccandless.com> <21932951.post@talk.nabble.com> <2F672EDE-CADA-4793-B9AC-331398A31696@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Michael,

I actually dont hit OOM, The memory gets 100% full and the JVM hangs.
Independently what type of GC alogorithm I use. Have tried all sorts of JVM
GC flags.
Profiling the application with YourKit I can see that the TermInfo instance=
s
does not get freed up when the GC is done.

The application starts with around 100.000 instances of TermInfo and then
its starts to accumulate around 1000 and 2000 instances per web request.
This is,if I understand you right, normal but shouldn't the allocated
TermInfo instances be returned after a GC? I never see the instances get
freed up.

The SegmentReader instances are actually just 3 arrays of SegmentReader
instances.=20


Michael McCandless-2 wrote:
>=20
> Your index has relatively few terms: ~13 million.
>=20
> Lucene stores TermInfo instances in two places.  The first place is a
> persistent array, called the terms index, of every 128th term.  It's
> created when the IndexReader is first opened.  So in your case this is
> ~100.000 ("100 thousand") instances.  The JPEG on your original post
> on the compass forum is tracing to this terms index.
>=20
> Then, per thread per segment there is an LRU cache of recently used
> TermInfo instances.  That cache is 1024 in size.  Depending on how
> many threads, segments and how many unique queries you are testing
> with, this will add some number of TermInfo instances.
>=20
> So... seeing alot of TermInfo instances is fully normal.
>=20
> Are you actually hitting OOM, or just noticing alot of TermInfo
> instances in YourKit?
>=20
> How many SegmentReader instances do you see held open in YourKit?
>=20
> Mike
>=20
> chanchitodata wrote:
>=20
>>
>> Hi Michael,
>>
>> I=C2=B4m pretty sure that the IndexReaders are being closed. As I said I=
 =20
>> use
>> Compass and compass handles all the IndexReader stuff for me. I have
>> discussed this issue with Shay Banon for a while in the Compass  =20
>> forum and
>> he was the guy that lead me to this forum after several diferents =20
>> test we
>> did.
>>
>> I have attached a textfile with the output of a CheckIndex on the =20
>> biggest
>> index I have. I have also attached an image with the Luke overview =20
>> of the
>> same index.
>>
>> Best regards,
>> /Rodrigo
>>
>> http://www.nabble.com/file/p21932951/Checkindex.txt Checkindex.txt
>> http://www.nabble.com/file/p21932951/LukeOverview.JPG LukeOverview.JPG
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> Are you certain that old IndexReaders are being closed?
>>>
>>> If you are not using CFS file format, how large are your *.tii files?
>>> If you are using CFS file format, can you run CheckIndex on your =20
>>> index
>>> and post the output?  This way we can see how many terms are in the
>>> index (which is what gets loaded as TermInfo instances).
>>>
>>> Mike
>>>
>>> chanchitodata wrote:
>>>
>>>>
>>>> Hi,
>>>>
>>>> I have a weird problem. I use Lucene 2.4 in an web =20
>>>> application(Tomcat
>>>> 5.5.x), running uncer JDK 1.5. After a while (from 1 day to a couple
>>>> depending on traffic) all memory gets eaten up by a lot of TermInfo
>>>> instances. I have profiled the application and I can see that the
>>>> TermInfo
>>>> instances does not get recovered by the GC.
>>>> I also use Compass and have been posting on a thread in the Compass
>>>> forum(http://forum.compass-project.org/thread.jspa?threadID=3D215943&s=
tart=3D0&tstart=3D0
>>>> ),
>>>> thinking that it was Compass the held on to something in memory but
>>>> we have
>>>> come into conclusion that it must be Lucene that keeps holding on
>>>> the the
>>>> memory.
>>>>
>>>> I have read the thread
>>>> http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-td20236=
834.html#a20236834
>>>> and tried to divide my index into smaller parts but with the same
>>>> result.
>>>>
>>>> The index contains about 1.5Gb with around 2.7 Million documents and
>>>> aprox.
>>>> 30 Fields.
>>>>
>>>> /Rodrigo
>>>> --=20
>>>> View this message in context:
>>>> http://www.nabble.com/Memory-Eaten-up-by-TermInfo-Instances-in-Lucene-=
2.4-tp21913262p21913262.html
>>>> Sent from the Lucene - Java Users mailing list archive at =20
>>>> Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --=20
>> View this message in context:
>> http://www.nabble.com/Memory-Eaten-up-by-TermInfo-Instances-in-Lucene-2.=
4-tp21913262p21932951.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Memory-Eaten-up-by-Term=
Info-Instances-in-Lucene-2.4-tp21913262p21938848.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 10 20:17:33 2009
Return-Path: <java-user-return-38459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45784 invoked from network); 10 Feb 2009 20:17:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2009 20:17:33 -0000
Received: (qmail 20721 invoked by uid 500); 10 Feb 2009 20:17:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20692 invoked by uid 500); 10 Feb 2009 20:17:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20681 invoked by uid 99); 10 Feb 2009 20:17:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 12:17:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.162.179] (HELO el-out-1112.google.com) (209.85.162.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 20:17:14 +0000
Received: by el-out-1112.google.com with SMTP id s27so17591ele.14
        for <java-user@lucene.apache.org>; Tue, 10 Feb 2009 12:16:51 -0800 (PST)
Received: by 10.90.91.6 with SMTP id o6mr382774agb.80.1234297011267;
        Tue, 10 Feb 2009 12:16:51 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 36sm8460634aga.29.2009.02.10.12.16.49
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 10 Feb 2009 12:16:50 -0800 (PST)
Message-Id: <C8AFD22D-5FC7-46F9-A0A7-A20ED81215FA@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21938848.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Memory Eaten up by TermInfo Instances in Lucene 2.4
Date: Tue, 10 Feb 2009 15:16:48 -0500
References: <21913262.post@talk.nabble.com> <FABB6596-4F91-4A54-A45E-B7A357C1EBC4@mikemccandless.com> <21932951.post@talk.nabble.com> <2F672EDE-CADA-4793-B9AC-331398A31696@mikemccandless.com> <21938848.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


chanchitodata wrote:

> I actually dont hit OOM, The memory gets 100% full and the JVM hangs.

Is it GC'ing during this hang?  Can you try reducing your heap size  
down alot and see if the GC runs faster?  (Or, if you can provoke an  
OOM).

How large is your heap now?

> Independently what type of GC alogorithm I use. Have tried all sorts  
> of JVM
> GC flags.
> Profiling the application with YourKit I can see that the TermInfo  
> instances
> does not get freed up when the GC is done.

Well... first off, the 100K TermInfos are still referenced and won't  
be freed until
you close the reader.  Likewise, any entries still in the caches are  
still referenced.

How many TermInfo instances do you see still alive before vs after GC?

> The application starts with around 100.000 instances of TermInfo and  
> then
> its starts to accumulate around 1000 and 2000 instances per web  
> request.

This seems high (1-2K per request).  What are your queries like?

How large is the thread pool in your Tomcat instance?

> This is,if I understand you right, normal but shouldn't the allocated
> TermInfo instances be returned after a GC? I never see the instances  
> get
> freed up.

Make sure you look at before/after numbers of TermInfo instances.   
And, reduce your
heap size so that you see GC successfully complete.

> The SegmentReader instances are actually just 3 arrays of  
> SegmentReader
> instances.

But you only have 1 IndexReader open?  (You should only have 1 array  
of SegmentReaders
if so).  Is it possible Compass is holding open some SegmentReaders  
under-the-hood?

Are you (or Compass) ever reopening the reader?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 10 21:01:10 2009
Return-Path: <java-user-return-38460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58479 invoked from network); 10 Feb 2009 21:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2009 21:01:10 -0000
Received: (qmail 8490 invoked by uid 500); 10 Feb 2009 21:01:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7639 invoked by uid 500); 10 Feb 2009 21:01:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7627 invoked by uid 99); 10 Feb 2009 21:01:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 13:01:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 21:00:50 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Persian (Farsi) Language Analyzer
Date: Tue, 10 Feb 2009 16:00:28 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B4303667B60@mail3.basistech.net>
In-Reply-To: <5d53d5770812170512t50f268e2i142bc60c8cc431e@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Persian (Farsi) Language Analyzer
Thread-Index: AclgSSb+fC0FU7okSmWW6YO5UJb2aQrd+lAg
References: <5d53d5770812170512t50f268e2i142bc60c8cc431e@mail.gmail.com>
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>,
	<ianvink@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

My company, Basis Technology, has a Lucene Analyzer that=20
can process Farsi, among many supported languages.

http://basistech.com/lucene/index.html


Contact info@basistech.com for evaluation kit
and pricing.
-kuro =20

> -----Original Message-----
> From: Ian Vink [mailto:ianvink@gmail.com]=20
> Sent: Wednesday, December 17, 2008 5:12 AM
> To: java-user@lucene.apache.org
> Subject: Persian (Farsi) Language Analyzer
>=20
> I have ported the Java version of the Arabic analyzer=20
> recently committed to Lucene.Net
>=20
> Is there any work been done on a Farsi Analyzer (Persian Language)
>=20
> Thanks,
> Ian
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 07:50:46 2009
Return-Path: <java-user-return-38461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54218 invoked from network); 11 Feb 2009 07:50:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 07:50:46 -0000
Received: (qmail 32096 invoked by uid 500); 11 Feb 2009 07:50:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32066 invoked by uid 500); 11 Feb 2009 07:50:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32055 invoked by uid 99); 11 Feb 2009 07:50:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Feb 2009 23:50:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vinubalaji@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 07:50:32 +0000
Received: by mu-out-0910.google.com with SMTP id w8so18713mue.5
        for <java-user@lucene.apache.org>; Tue, 10 Feb 2009 23:50:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=NsjwlvoMltHhGminSG1htqKYnf46D+4xzSHdHAmmQSo=;
        b=u3JG5r9mcyhf7dx0alVPyzoAi3Hsx89xHQLrzi0YvvCO4f/sANXQYgVGTUszCzPDKy
         BWauLW2gOFfbhlcJRs/Zo7vNAi1wseDaN596iHTCqZ9inu7hzo00CzrKo3XVIwd5SQLF
         tXegM4I8qJQ3KyDBC5Lv9fP5VTqarxhrC1rNM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=X0EFw2rwmSTZ2+IvlzHrLXgnopt0iIc6g1MKeFd/pqCbHrkVcH6yslqjNGgDD8oSTi
         HdfAC4aA7YJ9BMcKuqCImKfLtmnuaEp/ZTFwkdhxiMq9AfSb/msfRg/22tpIJwxy3i2X
         iTPRw9OysKBfKvYcFzuJ35QOO6X/SGJdBP7Ec=
MIME-Version: 1.0
Received: by 10.103.90.17 with SMTP id s17mr696230mul.73.1234338611405; Tue, 
	10 Feb 2009 23:50:11 -0800 (PST)
Date: Tue, 10 Feb 2009 23:50:11 -0800
Message-ID: <7d8fb81e0902102350y4b718590u8b63e33be8606035@mail.gmail.com>
Subject: deletes when the writer is open and autocommit is set to false
From: Vinubalaji Gopal <vinubalaji@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I am a new lucene user and got started with in a really quick time!
Its been really nice and I love it :) -  I am still trying to do a few
things the right way and digging through documentation/archives.
Here is my question:

What is the best/fastest way to batch index a large set of documents.
I open an IndexWriter at the start  and index the documents one by
one. But here is my problem:
Some of the documents I have may be updated after it has been indexed
(even before the batch process completes) and thus I need to reindex
them. The only way to do that is using (I may be wrong - but this is
what I understood from reading the FAQs, documentation)
IndexReader.deleteDocument(term) and indexing it again. But everytime
I have to delete a document - i need to open a new reader since the
writer would have already written more documents and I can't reuse the
reader for the whole session :( - which makes the operation a bit
slow.

I thought the better way would be to set autocommit as false . In
which case even if I reopen the reader everytime to delete any
document (using IndexReader.deleteDocument(term)) - I wouldn't find it
since the commit has not happened. Is there any other way of deleting
the documents before the commit has taken place?

This wouldn't have been a problem if deleteDocument was in IndexWriter
:( - but I believe there would have been strong reason to have
deleteDocument in indexReader and would be interested to hear about
it.(or read some pointers)


-- 
Vinu

In a world without fences who needs Gates?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 10:57:40 2009
Return-Path: <java-user-return-38462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83657 invoked from network); 11 Feb 2009 10:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 10:57:37 -0000
Received: (qmail 18370 invoked by uid 500); 11 Feb 2009 10:57:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18322 invoked by uid 500); 11 Feb 2009 10:57:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18032 invoked by uid 99); 11 Feb 2009 10:57:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 02:57:26 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.179] (HELO el-out-1112.google.com) (209.85.162.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 10:57:17 +0000
Received: by el-out-1112.google.com with SMTP id s27so83423ele.14
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 02:56:55 -0800 (PST)
Received: by 10.90.97.16 with SMTP id u16mr1760620agb.63.1234349815786;
        Wed, 11 Feb 2009 02:56:55 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 5sm9706651agc.10.2009.02.11.02.56.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 11 Feb 2009 02:56:55 -0800 (PST)
Message-Id: <A9C2C34C-5EF7-4AED-A30C-449EDDA96CD6@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <7d8fb81e0902102350y4b718590u8b63e33be8606035@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: deletes when the writer is open and autocommit is set to false
Date: Wed, 11 Feb 2009 05:56:54 -0500
References: <7d8fb81e0902102350y4b718590u8b63e33be8606035@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

IndexWriter can in fact delete documents, by Term or by Query.  It  
also has updateDocument, which under-the-hood simply calls  
deleteDocuments then addDocument.

Mike

Vinubalaji Gopal wrote:

> Hi all,
>
> I am a new lucene user and got started with in a really quick time!
> Its been really nice and I love it :) -  I am still trying to do a few
> things the right way and digging through documentation/archives.
> Here is my question:
>
> What is the best/fastest way to batch index a large set of documents.
> I open an IndexWriter at the start  and index the documents one by
> one. But here is my problem:
> Some of the documents I have may be updated after it has been indexed
> (even before the batch process completes) and thus I need to reindex
> them. The only way to do that is using (I may be wrong - but this is
> what I understood from reading the FAQs, documentation)
> IndexReader.deleteDocument(term) and indexing it again. But everytime
> I have to delete a document - i need to open a new reader since the
> writer would have already written more documents and I can't reuse the
> reader for the whole session :( - which makes the operation a bit
> slow.
>
> I thought the better way would be to set autocommit as false . In
> which case even if I reopen the reader everytime to delete any
> document (using IndexReader.deleteDocument(term)) - I wouldn't find it
> since the commit has not happened. Is there any other way of deleting
> the documents before the commit has taken place?
>
> This wouldn't have been a problem if deleteDocument was in IndexWriter
> :( - but I believe there would have been strong reason to have
> deleteDocument in indexReader and would be interested to hear about
> it.(or read some pointers)
>
>
> -- 
> Vinu
>
> In a world without fences who needs Gates?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 14:05:44 2009
Return-Path: <java-user-return-38463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7841 invoked from network); 11 Feb 2009 14:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 14:05:44 -0000
Received: (qmail 40364 invoked by uid 500); 11 Feb 2009 14:05:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40337 invoked by uid 500); 11 Feb 2009 14:05:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40326 invoked by uid 99); 11 Feb 2009 14:05:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 06:05:35 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 14:05:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LXFi6-0000x5-Ug
	for java-user@lucene.apache.org; Wed, 11 Feb 2009 06:05:06 -0800
Message-ID: <21955474.post@talk.nabble.com>
Date: Wed, 11 Feb 2009 06:05:06 -0800 (PST)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Best Practice for Lucene Search
In-Reply-To: <63293EE0B5034166B83454D2AB8C9F2D@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <21748839.post@talk.nabble.com> <117312.20011.qm@web110407.mail.gq1.yahoo.com> <8c4e68610901300756w608a3545m38f4dd69589f3517@mail.gmail.com> <63293EE0B5034166B83454D2AB8C9F2D@VEGA>
X-Virus-Checked: Checked by ClamAV on apache.org


In the beginning of the development, I was also facing a choice to mirror the
documents in DB/index.

But when the number of raws reached the mark of 7 mio, the query like 

        "select count(id) from documentz" 

(using PostgresQL) would take ages (ok, about 10 minutes!!! ), it became
clear to me, that something is not right with that approach :confused:.

The other reasons to name a few, would be the need to run the data import
(almost) twice for the index and DB, and then synchronize them in case of
changes.

At the moment, I have a set-up of 6 physical indieces, 15 GB each and in
total I have like 46 mio documents, and can say that I'm pretty happy with
the search performance.

Ah, almost forgot! Those 46 mio documents represent around 100 different
sources (field-structures), and would need to be persisted in 100 different
DB-tables. Also a whole lot of new sources are expected to come, and be
added into the stack ONLINE w/o the server restart! 

Using mixed DB/index solution it would be nightmare to maintain that, but a
single Lucene index copes with the task fast and easy.

So, my vote for text-only datas goes clearly to Lucene-only solution :)
-- 
View this message in context: http://www.nabble.com/Best-Practice-for-Lucene-Search-tp21748839p21955474.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 15:52:21 2009
Return-Path: <java-user-return-38464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2921 invoked from network); 11 Feb 2009 15:52:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 15:52:20 -0000
Received: (qmail 99707 invoked by uid 500); 11 Feb 2009 15:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99669 invoked by uid 500); 11 Feb 2009 15:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99658 invoked by uid 99); 11 Feb 2009 15:52:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 07:52:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akshay.ukey@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 15:52:05 +0000
Received: by wa-out-1112.google.com with SMTP id m33so150680wag.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 07:51:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=nt5+q8fBFLOMeaIeq1tnVDZ0BHYTsEfvsMt/xkhY1L0=;
        b=WNGK5jNYmtkre9Jtyn3ZGdL7UhsIKqzTbtUyYRabi4mFu1SEUc4qQeL9xXriiXC40b
         yL++UyrO/J0+usXcn3KBysRB46dMwF2vE5gKUG2ubmUw8bMwcF0r7obF37TwnR8SIO3Y
         09CVquLBuf4fTgocKY8Zw5ajc9d33P1MmEi+Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=BeaMNGIZtwZFg7U6UIsB0xytt2a7bN0hq9Z7bdrq1VM4IlJccryXvDvEeVpO9g73er
         NHREfGSBktPaUBH5+R+itgLeLm9yaMrbJHVOihwaYgwNHMguNii5ZRLpS2BIlLUd/AHW
         S7GkcXZmKX7FnjhsjAkSTzYS7NXv1RzGZn090=
MIME-Version: 1.0
Received: by 10.114.81.1 with SMTP id e1mr5592892wab.212.1234367504485; Wed, 
	11 Feb 2009 07:51:44 -0800 (PST)
Date: Wed, 11 Feb 2009 21:21:44 +0530
Message-ID: <36a9c1920902110751k719c095agb80a1fd10ed6fe76@mail.gmail.com>
Subject: Creation of index for the first time
From: Akshay <akshay.ukey@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364177e1a08e810462a694a3
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364177e1a08e810462a694a3
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Hi List,

How to find if an empty lucene index has been created for the very first
time? Is the generation number 1 enough to determine this?

-- 
Regards,
Akshay K. Ukey.

--0016364177e1a08e810462a694a3--

From java-user-return-38465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 15:56:07 2009
Return-Path: <java-user-return-38465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4890 invoked from network); 11 Feb 2009 15:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 15:56:07 -0000
Received: (qmail 7194 invoked by uid 500); 11 Feb 2009 15:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7089 invoked by uid 500); 11 Feb 2009 15:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7078 invoked by uid 99); 11 Feb 2009 15:56:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 07:56:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vinubalaji@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 15:55:52 +0000
Received: by fxm7 with SMTP id 7so511795fxm.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 07:55:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=gxejatstI8NV9cFM0KO9pBKfVOuZB9pocKOrZ4dRjv8=;
        b=Spqk2duxyIA30m4zmqyYJpFU92mo3wlCSF5vnqqRuCb4O2H2ih7reaDuRE4gkV/SF8
         0alhG1Ckn1s5Bs/ipO3w7p25Cy9rjPrTfJuKwFh+VNRZnHPly50EYqEI89VoPi9aHCWO
         cRWTUFIZGSHm4oVqhDnPyFk9TgnvT8+9jmxY4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=pUWUbMQg8Ch4lOPt2sZL/qi7U5iyveQ4dTfAyTfqTMzmVzj54U3L3E4xIIRPtarHaN
         ANKYmyJcYxQoKfc90pr0sqDMHdzp1jMxPhIvty1vVUVuLmpYDzDNshAw3Z9yRh/SI2nD
         n6w+c6onDnMz+nmocHbYbhrwv8jy1LgZrxQV0=
MIME-Version: 1.0
Received: by 10.103.49.12 with SMTP id b12mr1518927muk.81.1234367586448; Wed, 
	11 Feb 2009 07:53:06 -0800 (PST)
In-Reply-To: <A9C2C34C-5EF7-4AED-A30C-449EDDA96CD6@mikemccandless.com>
References: <7d8fb81e0902102350y4b718590u8b63e33be8606035@mail.gmail.com>
	 <A9C2C34C-5EF7-4AED-A30C-449EDDA96CD6@mikemccandless.com>
Date: Wed, 11 Feb 2009 07:53:06 -0800
Message-ID: <7d8fb81e0902110753r41fac2dbu9f2f9d4a91af2dcd@mail.gmail.com>
Subject: Re: deletes when the writer is open and autocommit is set to false
From: Vinubalaji Gopal <vinubalaji@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Feb 11, 2009 at 2:56 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> IndexWriter can in fact delete documents, by Term or by Query.  It also has
> updateDocument, which under-the-hood simply calls deleteDocuments then
> addDocument.

Awesome that FAQ entry confused me and I didn't look at IndexWriter
javadoc thinking that it wouldn't be there since deleteDocument is
there in IndexReader.

What is the best way to update a document? Search and do an update if
the document is found/else insert or just try an update whatever be
the case - the update will delete in case a document exists or will
just insert a new document if the document doesn't exist in the index.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 16:25:30 2009
Return-Path: <java-user-return-38466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23195 invoked from network); 11 Feb 2009 16:25:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 16:25:30 -0000
Received: (qmail 74740 invoked by uid 500); 11 Feb 2009 16:25:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74715 invoked by uid 500); 11 Feb 2009 16:25:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74703 invoked by uid 99); 11 Feb 2009 16:25:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 08:25:23 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 16:25:14 +0000
Received: by qyk13 with SMTP id 13so302877qyk.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 08:24:51 -0800 (PST)
Received: by 10.224.54.75 with SMTP id p11mr671573qag.208.1234369491189;
        Wed, 11 Feb 2009 08:24:51 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 7sm2361169qwb.1.2009.02.11.08.24.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 11 Feb 2009 08:24:50 -0800 (PST)
Message-Id: <92368973-385E-41D0-8CFE-3800E1F27CBF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <36a9c1920902110751k719c095agb80a1fd10ed6fe76@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Creation of index for the first time
Date: Wed, 11 Feb 2009 11:24:50 -0500
References: <36a9c1920902110751k719c095agb80a1fd10ed6fe76@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


If you create IndexWriter with create=true in a directory that has no  
Lucene index, segments_1 is created.

If you do the same, but in a directory that already has a Lucene  
index, segments_(N+1) is created (where N was the last generation of  
the current index in that directory).

But... this is an internal detail to Lucene's index format and could  
change in some future release.

Mike

Akshay wrote:

> Hi List,
>
> How to find if an empty lucene index has been created for the very  
> first
> time? Is the generation number 1 enough to determine this?
>
> -- 
> Regards,
> Akshay K. Ukey.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 16:50:39 2009
Return-Path: <java-user-return-38467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32232 invoked from network); 11 Feb 2009 16:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 16:50:39 -0000
Received: (qmail 47476 invoked by uid 500); 11 Feb 2009 16:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47247 invoked by uid 500); 11 Feb 2009 16:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47236 invoked by uid 99); 11 Feb 2009 16:50:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 08:50:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 16:50:24 +0000
Received: by qyk13 with SMTP id 13so332617qyk.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 08:50:03 -0800 (PST)
Received: by 10.224.45.75 with SMTP id d11mr717673qaf.153.1234371002629;
        Wed, 11 Feb 2009 08:50:02 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm1151001qwk.37.2009.02.11.08.50.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 11 Feb 2009 08:50:02 -0800 (PST)
Message-Id: <8519135D-4163-4378-AE3E-2B7113B40159@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <7d8fb81e0902110753r41fac2dbu9f2f9d4a91af2dcd@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: deletes when the writer is open and autocommit is set to false
Date: Wed, 11 Feb 2009 11:50:00 -0500
References: <7d8fb81e0902102350y4b718590u8b63e33be8606035@mail.gmail.com> <A9C2C34C-5EF7-4AED-A30C-449EDDA96CD6@mikemccandless.com> <7d8fb81e0902110753r41fac2dbu9f2f9d4a91af2dcd@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Vinubalaji Gopal wrote:

> On Wed, Feb 11, 2009 at 2:56 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> IndexWriter can in fact delete documents, by Term or by Query.  It  
>> also has
>> updateDocument, which under-the-hood simply calls deleteDocuments  
>> then
>> addDocument.
>
> Awesome that FAQ entry confused me and I didn't look at IndexWriter
> javadoc thinking that it wouldn't be there since deleteDocument is
> there in IndexReader.

Hmm -- OK I just fixed that FAQ entry.  Thanks for raising this!

> What is the best way to update a document? Search and do an update if
> the document is found/else insert or just try an update whatever be
> the case - the update will delete in case a document exists or will
> just insert a new document if the document doesn't exist in the index.

If you know the doc doesn't exist already, you gain some performance by
using add instead of update.  But if performance is already fast  
enough, it
may be simpler to just always use update.  Or, if you will have to do  
your
own search to find out whether doc exists or not, then always use update
since that's what update's doing too.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 17:08:42 2009
Return-Path: <java-user-return-38468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38362 invoked from network); 11 Feb 2009 17:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 17:08:42 -0000
Received: (qmail 4958 invoked by uid 500); 11 Feb 2009 17:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4932 invoked by uid 500); 11 Feb 2009 17:08:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4908 invoked by uid 99); 11 Feb 2009 17:08:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 09:08:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 17:08:16 +0000
Received: by yx-out-2324.google.com with SMTP id 31so133240yxl.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 09:07:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=YO1RtnCM7IYossL2VbryJ14HHHQiOxrayrq9PYw+EKY=;
        b=A6rsuQXFkP1wtA4Lg7zQfaPMIxcW82GdJgHwhlVPm944UGxW23a59Cxaz7nkWMdmZw
         qCx7o2yGoNyeNqpBjpNRaZ3cDsH4y3xlU3FGjUtaBrB4SkbN9TmOPzpqFiGE/mt+XTk/
         gc80rVbZ9G1/EFKOjMPfA3W8tb039lYsWI7wM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=xLHFthf8IYpeEXt5XpvRJibIClo7hSAcb0fPu3FVGA0YSMkrkOmO8p1H+v9jbfjN56
         0IDa07ynV8yXKQi/exnOKkdDHS/cZSdyCoqk7Jk69wU6dWrEIggS2bjnjFFNRc+llZxm
         zmxKSrNBm7PovEmgh7KiVRZ5HaFBOeAjcj00U=
MIME-Version: 1.0
Received: by 10.231.15.130 with SMTP id k2mr666751iba.31.1234372075833; Wed, 
	11 Feb 2009 09:07:55 -0800 (PST)
In-Reply-To: <92368973-385E-41D0-8CFE-3800E1F27CBF@mikemccandless.com>
References: <36a9c1920902110751k719c095agb80a1fd10ed6fe76@mail.gmail.com>
	 <92368973-385E-41D0-8CFE-3800E1F27CBF@mikemccandless.com>
Date: Wed, 11 Feb 2009 22:37:55 +0530
Message-ID: <5e76b0ad0902110907l5dfbaa40t1323166c34f66698@mail.gmail.com>
Subject: Re: Creation of index for the first time
From: =?UTF-8?B?Tm9ibGUgUGF1bCDgtKjgtYvgtKzgtL/gtLPgtY3igI0gIOCkqOCli+CkrOCljeCks+CljQ==?= <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

is it reasonable to assume that the generation of a commit point is
always '1' when an empty index is opened?

On Wed, Feb 11, 2009 at 9:54 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> If you create IndexWriter with create=true in a directory that has no Lucene
> index, segments_1 is created.
>
> If you do the same, but in a directory that already has a Lucene index,
> segments_(N+1) is created (where N was the last generation of the current
> index in that directory).
>
> But... this is an internal detail to Lucene's index format and could change
> in some future release.
>
> Mike
>
> Akshay wrote:
>
>> Hi List,
>>
>> How to find if an empty lucene index has been created for the very first
>> time? Is the generation number 1 enough to determine this?
>>
>> --
>> Regards,
>> Akshay K. Ukey.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
--Noble Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 17:14:13 2009
Return-Path: <java-user-return-38469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41586 invoked from network); 11 Feb 2009 17:14:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 17:14:13 -0000
Received: (qmail 25475 invoked by uid 500); 11 Feb 2009 17:14:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25455 invoked by uid 500); 11 Feb 2009 17:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25444 invoked by uid 99); 11 Feb 2009 17:14:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 09:14:06 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 17:13:58 +0000
Received: by qyk13 with SMTP id 13so358634qyk.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 09:13:36 -0800 (PST)
Received: by 10.224.28.207 with SMTP id n15mr759469qac.88.1234372416737;
        Wed, 11 Feb 2009 09:13:36 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 8sm5786039qwj.6.2009.02.11.09.13.35
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 11 Feb 2009 09:13:36 -0800 (PST)
Message-Id: <7338FBDD-A43B-441A-91EF-0ED7ED6A7785@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76b0ad0902110907l5dfbaa40t1323166c34f66698@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Creation of index for the first time
Date: Wed, 11 Feb 2009 12:13:34 -0500
References: <36a9c1920902110751k719c095agb80a1fd10ed6fe76@mail.gmail.com> <92368973-385E-41D0-8CFE-3800E1F27CBF@mikemccandless.com> <5e76b0ad0902110907l5dfbaa40t1323166c34f66698@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=8D=
 =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D wrote:

> is it reasonable to assume that the generation of a commit point is
> always '1' when an empty index is opened?

It depends what "empty index" means.

EG I can make a new index, add docs, do lots of commits, etc., then
open a new IndexWriter with create=3Dtrue on that same Directory.  At
that point I have an "empty index" (no docs), but its generation is > 1.

Or if by empty index you mean zero files in the Directory, then when
I make an IndexWriter w/ create=3Dtrue and immediately close it, then
generation will always be 1.

Mike=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 17:24:37 2009
Return-Path: <java-user-return-38470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47601 invoked from network); 11 Feb 2009 17:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 17:24:37 -0000
Received: (qmail 54596 invoked by uid 500); 11 Feb 2009 17:24:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54566 invoked by uid 500); 11 Feb 2009 17:24:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54475 invoked by uid 99); 11 Feb 2009 17:24:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 09:24:18 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akshay.ukey@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 17:24:11 +0000
Received: by wa-out-1112.google.com with SMTP id m33so171001wag.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 09:23:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=erzrYta/yE3Tt+8pJ+ktP5PrI4J8ZPoZVQrYUvAaTz8=;
        b=NTRwiYIGUAyD/omqQSTQ2zut9hoCHRRZWTfVhj0wfxvjnTR8NuqqGR4lPTigVBh9M2
         k7ZqidsBtWc+dbWrAVcXPs+2eaTdMw3YM4JsZ86z63ByEyPmX5T0q3D9StlIziv/l00t
         +54oHjm/Mh4Fum/CbFCJxFVWtojrgLbtMD4ZI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=EFgyq3cA5Atu1qh75C6egHuZ5Fw965ecG2jwOoPGoSWM68XWex3veRh7oW80pNiz8P
         Npmw4NhtLhsroiphjRhWxJNrsKU9MXh2FbYj2feqBrLxBeT6m8KF9UX3VII9lyzxWo4C
         xCHwZZX8sUzQYD2dTEFnBL4Lcqvfck7m9E7oA=
MIME-Version: 1.0
Received: by 10.114.159.17 with SMTP id h17mr5659018wae.124.1234373030973; 
	Wed, 11 Feb 2009 09:23:50 -0800 (PST)
In-Reply-To: <92368973-385E-41D0-8CFE-3800E1F27CBF@mikemccandless.com>
References: <36a9c1920902110751k719c095agb80a1fd10ed6fe76@mail.gmail.com>
	 <92368973-385E-41D0-8CFE-3800E1F27CBF@mikemccandless.com>
Date: Wed, 11 Feb 2009 22:53:50 +0530
Message-ID: <36a9c1920902110923waf05bebr1a9d471f758f2333@mail.gmail.com>
Subject: Re: Creation of index for the first time
From: Akshay <akshay.ukey@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163645883e0810c40462a7de83
X-Virus-Checked: Checked by ClamAV on apache.org

--00163645883e0810c40462a7de83
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Is there a way, without the knowledge of how IndexWriter was used, by which
we can say that an empty index currently open is a really fresh index
created for the first time?

Thanks.

On Wed, Feb 11, 2009 at 9:54 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> If you create IndexWriter with create=true in a directory that has no
> Lucene index, segments_1 is created.
>
> If you do the same, but in a directory that already has a Lucene index,
> segments_(N+1) is created (where N was the last generation of the current
> index in that directory).
>
> But... this is an internal detail to Lucene's index format and could change
> in some future release.
>
> Mike
>
>
> Akshay wrote:
>
>  Hi List,
>>
>> How to find if an empty lucene index has been created for the very first
>> time? Is the generation number 1 enough to determine this?
>>
>> --
>> Regards,
>> Akshay K. Ukey.
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Akshay K. Ukey.

--00163645883e0810c40462a7de83--

From java-user-return-38471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 17:47:42 2009
Return-Path: <java-user-return-38471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63324 invoked from network); 11 Feb 2009 17:47:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 17:47:41 -0000
Received: (qmail 96959 invoked by uid 500); 11 Feb 2009 17:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96926 invoked by uid 500); 11 Feb 2009 17:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96915 invoked by uid 99); 11 Feb 2009 17:47:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 09:47:34 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 17:47:26 +0000
Received: by qyk13 with SMTP id 13so389608qyk.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 09:47:04 -0800 (PST)
Received: by 10.64.181.19 with SMTP id d19mr3123343qbf.24.1234374423802;
        Wed, 11 Feb 2009 09:47:03 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 9sm8315831qbw.38.2009.02.11.09.47.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 11 Feb 2009 09:47:03 -0800 (PST)
Message-Id: <A8EE2A2B-244C-4706-9956-7F2A4A3A79BD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <36a9c1920902110923waf05bebr1a9d471f758f2333@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Creation of index for the first time
Date: Wed, 11 Feb 2009 12:47:01 -0500
References: <36a9c1920902110751k719c095agb80a1fd10ed6fe76@mail.gmail.com> <92368973-385E-41D0-8CFE-3800E1F27CBF@mikemccandless.com> <36a9c1920902110923waf05bebr1a9d471f758f2333@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


What exactly do you mean by "fresh index created for the first time"?

Ie, does opening an IndexWriter with create=true over a Directory that  
previously had a Lucene index not count as "fresh" for some reason?   
(If so, then it sounds like generation==1 is the test you want).

What's the use case behind this?

Mike

Akshay wrote:

> Is there a way, without the knowledge of how IndexWriter was used,  
> by which
> we can say that an empty index currently open is a really fresh index
> created for the first time?
>
> Thanks.
>
> On Wed, Feb 11, 2009 at 9:54 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> If you create IndexWriter with create=true in a directory that has no
>> Lucene index, segments_1 is created.
>>
>> If you do the same, but in a directory that already has a Lucene  
>> index,
>> segments_(N+1) is created (where N was the last generation of the  
>> current
>> index in that directory).
>>
>> But... this is an internal detail to Lucene's index format and  
>> could change
>> in some future release.
>>
>> Mike
>>
>>
>> Akshay wrote:
>>
>> Hi List,
>>>
>>> How to find if an empty lucene index has been created for the very  
>>> first
>>> time? Is the generation number 1 enough to determine this?
>>>
>>> --
>>> Regards,
>>> Akshay K. Ukey.
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Regards,
> Akshay K. Ukey.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 18:11:38 2009
Return-Path: <java-user-return-38472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79907 invoked from network); 11 Feb 2009 18:11:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 18:11:38 -0000
Received: (qmail 40803 invoked by uid 500); 11 Feb 2009 18:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40773 invoked by uid 500); 11 Feb 2009 18:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40762 invoked by uid 99); 11 Feb 2009 18:11:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 10:11:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mandy.guenther@googlemail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 18:11:20 +0000
Received: by fk-out-0910.google.com with SMTP id f33so145982fkf.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 10:11:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=1JU58hqEJjmwrFAh4vFo9dFEKhxqDJ9jn7B+52AJLLY=;
        b=JolhM0Jg4q3uSz/DMs06HyQlK8dHMkS0etbtcnhayMF5bopSrlOmc1bMqwVQQgxE8k
         IxI39W7qo8EvrCBBLgG0x12szGhNVPhqkhcGqJb99NrCpaerH06x1mI1KFWHUp3lypQS
         /R6sUgZxiYl775ZDuHdmD1Vxd3DRJv18P0QFU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=TniT8pSOwmrVsQ2LQYRRhJ1pPB6YtPmm0ixzUJ3mqObZWFhsJehkX3De+ARwb0Q1yE
         3PiK+H1fiNoSC0Fre83oujuq3rVNyDLiuBUcmDMdpBh+uz1ZEce0X08i+4GlH0XUKua8
         FbV+RNLzHxiXBA990V/v9F5QjY1vP33Fa5/VE=
MIME-Version: 1.0
Received: by 10.181.24.14 with SMTP id b14mr564386bkj.104.1234375545852; Wed, 
	11 Feb 2009 10:05:45 -0800 (PST)
Date: Wed, 11 Feb 2009 19:05:45 +0100
Message-ID: <a7b3ad0c0902111005k7be547cdm4fa30ec6a2b8f7c1@mail.gmail.com>
Subject: What's the best way to store metadata?
From: =?ISO-8859-1?Q?Mandy_G=FCnther?= <mandy.guenther@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,
I want to use Lucene in my project but I have the following problem:
My goal is to store metadata in the index.

Her is an example of the stuff I need to index

1; My; determiner;			
2; project; noun; 1
3; uses; verb; 1
4; Lucene; noun; 1
6; I; noun;		
7; need; verb; 6
8; help; noun; 6

It's a file containing rows with 4 columns.
The first column is a sequential number. The second column is the text
that need to be indexed. In my original file it's more than one word.
The third column
classifies the second column and the fourth column tells me where the
sentence of the word in the second column starts.
I will have large datafiles(up to 30GB) to index. Indexing and
searching performance is very important.
I tried to store the meta data(column no. 3 and 4) over the field names, e.g.

doc.add(new Field("1|determiner", My, ...));
doc.add(new Field("1|noun", project, ...));
...
doc.add(new Field("2|noun", I, ...));

But that's not a classy way!

I was thinking about using Payloads. But the API says the Payload
Status is experimantal and the performance is getting bad using
payloads.
I am not even sure if Payloads are meant to be used to store that kind of data.
Is it possible to store that kind of metadata as payload?
Is there another way to store the meta data. Should I use a database
to store the extra information?
Is somebody there who had the same problem or has experience with Payloads?
So what would be the best way to store metadata?

Thanks for your advice.
Mandy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 18:12:34 2009
Return-Path: <java-user-return-38473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80394 invoked from network); 11 Feb 2009 18:12:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 18:12:33 -0000
Received: (qmail 42730 invoked by uid 500); 11 Feb 2009 18:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42593 invoked by uid 500); 11 Feb 2009 18:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42582 invoked by uid 99); 11 Feb 2009 18:12:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 10:12:26 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akshay.ukey@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 18:12:18 +0000
Received: by wa-out-1112.google.com with SMTP id m33so181424wag.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 10:11:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=kw18r1sYSt04NiA7duXgVLb/l7veMC4FHyS6vTtXMqA=;
        b=EtkTKkQeSHdHmhbF9rqsw6fpphN0SILjTc5uoIDR+daRKWrjXEaNm4WeBgs2d3SIve
         yXXCx6JWu/Lof3zZNTLr9ZGPYOdusInmufydv9oO61bb2rZoh4n9eUX9k6OKRe8eHAgx
         +HfJVUqb4/fLAHM79I0iCfoAlqe5hW1nHpZVE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oPKCxdRE74dTiGpuZ34L/CN7pb/Q68dtJAC6Cr0ImYG2pEu7h/sA3xZRQkI8PzCNCv
         K06twnaf9Xk3IO+n52c8VHyo3AM2JD1Flx4VIEn0krouMhKkqeA4xne4yJgJQ0F3iCgH
         eNJ88rtPYEQRSeMpZnoofpfLjkOWNM1fUWp78=
MIME-Version: 1.0
Received: by 10.114.200.2 with SMTP id x2mr474505waf.83.1234375917092; Wed, 11 
	Feb 2009 10:11:57 -0800 (PST)
In-Reply-To: <A8EE2A2B-244C-4706-9956-7F2A4A3A79BD@mikemccandless.com>
References: <36a9c1920902110751k719c095agb80a1fd10ed6fe76@mail.gmail.com>
	 <92368973-385E-41D0-8CFE-3800E1F27CBF@mikemccandless.com>
	 <36a9c1920902110923waf05bebr1a9d471f758f2333@mail.gmail.com>
	 <A8EE2A2B-244C-4706-9956-7F2A4A3A79BD@mikemccandless.com>
Date: Wed, 11 Feb 2009 23:41:57 +0530
Message-ID: <36a9c1920902111011m579bf30eu63c9fc9e9016e3af@mail.gmail.com>
Subject: Re: Creation of index for the first time
From: Akshay <akshay.ukey@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364580000ec0bd0462a88aee
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364580000ec0bd0462a88aee
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

The use case is in context of replication. The master has a newly created
empty index. When slave requests for data, don't do anything if its a newly
created index.
On Wed, Feb 11, 2009 at 11:17 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> What exactly do you mean by "fresh index created for the first time"?
>
> Ie, does opening an IndexWriter with create=true over a Directory that
> previously had a Lucene index not count as "fresh" for some reason?


Yes this didn't count as fresh for my question, sorry for not being clear.
Thanks.


>  (If so, then it sounds like generation==1 is the test you want).
>
> What's the use case behind this?
>
> Mike
>
>
> Akshay wrote:
>
>  Is there a way, without the knowledge of how IndexWriter was used, by
>> which
>> we can say that an empty index currently open is a really fresh index
>> created for the first time?
>>
>> Thanks.
>>
>> On Wed, Feb 11, 2009 at 9:54 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>
>>> If you create IndexWriter with create=true in a directory that has no
>>> Lucene index, segments_1 is created.
>>>
>>> If you do the same, but in a directory that already has a Lucene index,
>>> segments_(N+1) is created (where N was the last generation of the current
>>> index in that directory).
>>>
>>> But... this is an internal detail to Lucene's index format and could
>>> change
>>> in some future release.
>>>
>>> Mike
>>>
>>>
>>> Akshay wrote:
>>>
>>> Hi List,
>>>
>>>>
>>>> How to find if an empty lucene index has been created for the very first
>>>> time? Is the generation number 1 enough to determine this?
>>>>
>>>> --
>>>> Regards,
>>>> Akshay K. Ukey.
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --
>> Regards,
>> Akshay K. Ukey.
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Akshay K. Ukey.

--0016364580000ec0bd0462a88aee--

From java-user-return-38474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 18:23:48 2009
Return-Path: <java-user-return-38474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87264 invoked from network); 11 Feb 2009 18:23:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 18:23:48 -0000
Received: (qmail 63838 invoked by uid 500); 11 Feb 2009 18:23:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63807 invoked by uid 500); 11 Feb 2009 18:23:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63796 invoked by uid 99); 11 Feb 2009 18:23:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 10:23:41 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 18:23:33 +0000
Received: by qyk13 with SMTP id 13so424193qyk.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 10:23:11 -0800 (PST)
Received: by 10.65.159.14 with SMTP id l14mr1598622qbo.130.1234376591368;
        Wed, 11 Feb 2009 10:23:11 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id k8sm3101142qba.13.2009.02.11.10.23.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 11 Feb 2009 10:23:10 -0800 (PST)
Message-Id: <F11BEE33-B2C8-4A5C-8016-B40170224253@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <36a9c1920902111011m579bf30eu63c9fc9e9016e3af@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Creation of index for the first time
Date: Wed, 11 Feb 2009 13:23:09 -0500
References: <36a9c1920902110751k719c095agb80a1fd10ed6fe76@mail.gmail.com> <92368973-385E-41D0-8CFE-3800E1F27CBF@mikemccandless.com> <36a9c1920902110923waf05bebr1a9d471f758f2333@mail.gmail.com> <A8EE2A2B-244C-4706-9956-7F2A4A3A79BD@mikemccandless.com> <36a9c1920902111011m579bf30eu63c9fc9e9016e3af@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Akshay wrote:

> The use case is in context of replication. The master has a newly  
> created
> empty index. When slave requests for data, don't do anything if its  
> a newly
> created index.

OK.

Hmm, but would master need to tell slave "I created a new index", even  
if
new index happen to be created in a location that previously held an  
index?
(Note: I know very little about replication, so maybe this could  
easily be out
of bounds).

>> What exactly do you mean by "fresh index created for the first time"?
>>
>> Ie, does opening an IndexWriter with create=true over a Directory  
>> that
>> previously had a Lucene index not count as "fresh" for some reason?
>
>
> Yes this didn't count as fresh for my question, sorry for not being  
> clear.
> Thanks.

OK then it sounds like generation==1 is the test you want.

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 22:56:23 2009
Return-Path: <java-user-return-38475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24012 invoked from network); 11 Feb 2009 22:56:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 22:56:23 -0000
Received: (qmail 63039 invoked by uid 500); 11 Feb 2009 22:56:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63006 invoked by uid 500); 11 Feb 2009 22:56:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62995 invoked by uid 99); 11 Feb 2009 22:56:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 14:56:16 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.112 as permitted sender)
Received: from [65.55.111.112] (HELO blu0-omc2-s37.blu0.hotmail.com) (65.55.111.112)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 22:56:06 +0000
Received: from BLU149-W23 ([65.55.111.71]) by blu0-omc2-s37.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 11 Feb 2009 14:55:46 -0800
Message-ID: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_3a4821de-b9c0-4f90-a721-27c8fda20778_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Fields with multiple values...
Date: Wed, 11 Feb 2009 17:55:45 -0500
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 11 Feb 2009 22:55:46.0011 (UTC) FILETIME=[DFD8B2B0:01C98C9B]
X-Virus-Checked: Checked by ClamAV on apache.org

--_3a4821de-b9c0-4f90-a721-27c8fda20778_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


Hi=2C

Let's say I have a single document with 2 fields (namely Field1 and Field2)=
.  2 values are added to each field like below.

// Add 2 values to Field1.
doc.Add (new Field ("Field1"=2C "A"=2C Field.Store.YES=2C Field.Index.UN_TO=
KENIZED))=3B
doc.Add (new Field ("Field1"=2C "B"=2C Field.Store.YES=2C Field.Index.UN_TO=
KENIZED))=3B

// Add 2 values to Field2.
doc.Add (new Field ("Field2"=2C "C"=2C Field.Store.YES=2C Field.Index.UN_TO=
KENIZED))=3B
doc.Add (new Field ("Field2"=2C "D"=2C Field.Store.YES=2C Field.Index.UN_TO=
KENIZED))=3B

I'd like to get a hit if I do:
    Field1:A AND Field2:C
This is fine because that's how Lucene works.  However=2C I do not want to =
get a hit if I do:
    Field1:A AND Field2:D
The reason that I don't want a hit is because A is the first element in Fie=
ld1 and D is the second element in Field2.  I only want a hit when both val=
ues are at the same array index.  Is there a way to do this? Thank you in a=
dvance for your help.

_________________________________________________________________
Windows Live=99: E-mail. Chat. Share. Get more ways to connect.=20
http://windowslive.com/explore?ocid=3DTXT_TAGLM_WL_t2_allup_explore_022009=

--_3a4821de-b9c0-4f90-a721-27c8fda20778_--

From java-user-return-38476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 23:08:01 2009
Return-Path: <java-user-return-38476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26430 invoked from network); 11 Feb 2009 23:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 23:08:01 -0000
Received: (qmail 76121 invoked by uid 500); 11 Feb 2009 23:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76094 invoked by uid 500); 11 Feb 2009 23:07:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76083 invoked by uid 99); 11 Feb 2009 23:07:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 15:07:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.12.71] (HELO mx2.syr.edu) (128.230.12.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 23:07:44 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx2.syr.edu (8.14.3/8.14.3) with ESMTP id n1BN7Mk6027132
	for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 18:07:22 -0500
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.336.0; Wed, 11 Feb 2009 18:07:22 -0500
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Wed, 11 Feb 2009 18:07:22 -0500
x-mimeole: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Fields with multiple values...
Date: Wed, 11 Feb 2009 18:06:28 -0500
Message-ID: <9294E20AED46934EA459020706463F94011EEF1E@SUEXCL-02.ad.syr.edu>
In-Reply-To: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Fields with multiple values...
Thread-Index: AcmMm/kuiupLiQNnR02T3PLicKzz9AAAIxfg
References: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Feb 2009 23:07:22.0025 (UTC) FILETIME=[7EB40190:01C98C9D]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2009-02-11_10:2009-02-10,2009-02-11,2009-02-11 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Dragon Fly,

You could split the original document into multiple Lucene Documents,
one for each array index, all sharing the same "DocID" field value.

Then your queries "just work".  But you'd have to do result
consolidation, removing duplicate original docs when you get matches at
multiple array indexes from the same original doc.

Steve

On 2/11/2009 at 5:56 PM, Dragon Fly wrote:
> Hi,
>=20
> Let's say I have a single document with 2 fields (namely Field1 and
> Field2).  2 values are added to each field like below.
>=20
> // Add 2 values to Field1.
> doc.Add (new Field ("Field1", "A", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.Add (new Field ("Field1", "B", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>=20
> // Add 2 values to Field2.
> doc.Add (new Field ("Field2", "C", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.Add (new Field ("Field2", "D", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>=20
> I'd like to get a hit if I do:
>     Field1:A AND Field2:C
> This is fine because that's how Lucene works.  However, I do not want
> to get a hit if I do:
>     Field1:A AND Field2:D
> The reason that I don't want a hit is because A is the first element
in
> Field1 and D is the second element in Field2.  I only want a hit when
> both values are at the same array index.  Is there a way to do this?
> Thank you in advance for your help.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 23:24:05 2009
Return-Path: <java-user-return-38477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32393 invoked from network); 11 Feb 2009 23:24:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 23:24:05 -0000
Received: (qmail 95270 invoked by uid 500); 11 Feb 2009 23:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95237 invoked by uid 500); 11 Feb 2009 23:23:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95226 invoked by uid 99); 11 Feb 2009 23:23:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 15:23:58 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 23:23:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LXOQT-0002LI-Py
	for java-user@lucene.apache.org; Wed, 11 Feb 2009 15:23:29 -0800
Message-ID: <21966759.post@talk.nabble.com>
Date: Wed, 11 Feb 2009 15:23:29 -0800 (PST)
From: Qingdi <liuqingdi@yahoo.com>
To: java-user@lucene.apache.org
Subject: optimization problem
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: liuqingdi@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


(I posted this question to "solr user" forum, but didn't get a clear answer.
So re-post it here.)

Our index size is about 60G. Most of the time, the optimization works fine.
But this morning, the optimization kept creating new segment files until all
the free disk space (300G) was used up.

Here is how the files generated during optimization look like:
============================================
....................................
-rw-r--r--  1 root root      213464 Feb 10 07:33 _5w9a.tis
-rw-r--r--  1 root root        3039 Feb 10 07:33 _5w9a.tii
-rw-r--r--  1 root root        9360 Feb 10 07:33 _5w9a.prx
-rw-r--r--  1 root root       19824 Feb 10 07:33 _5w9a.frq
-rw-r--r--  1 root root          27 Feb 10 07:33 _5w9a.fnm
-rw-r--r--  1 root root       74884 Feb 10 07:33 _5w9a.fdx
-rw-r--r--  1 root root     3753944 Feb 10 07:33 _5w9a.fdt
-rw-r--r--  1 root root      212513 Feb 10 07:33 _5w99.tis
-rw-r--r--  1 root root        3005 Feb 10 07:33 _5w99.tii
-rw-r--r--  1 root root        9436 Feb 10 07:33 _5w99.prx
-rw-r--r--  1 root root       20052 Feb 10 07:33 _5w99.frq
-rw-r--r--  1 root root          27 Feb 10 07:33 _5w99.fnm
-rw-r--r--  1 root root       75492 Feb 10 07:33 _5w99.fdx
-rw-r--r--  1 root root     3795439 Feb 10 07:33 _5w99.fdt
-rw-r--r--  1 root root      215726 Feb 10 07:33 _5w98.tis
-rw-r--r--  1 root root        2994 Feb 10 07:33 _5w98.tii
-rw-r--r--  1 root root        9438 Feb 10 07:33 _5w98.prx
-rw-r--r--  1 root root       20058 Feb 10 07:33 _5w98.frq
-rw-r--r--  1 root root          27 Feb 10 07:33 _5w98.fnm
-rw-r--r--  1 root root       75508 Feb 10 07:33 _5w98.fdx
-rw-r--r--  1 root root     3779402 Feb 10 07:33 _5w98.fdt
....................................
============================================

This is the third time we encountered this issue. Any idea why the
optimization keeps creating new files? (If we restart the solr server and
run optimization again, the index files can be recovered. we are on solr
1.3.) Where could we find more info. about how the optimization process
work?

Appreciate your help.

Qingdi 
-- 
View this message in context: http://www.nabble.com/optimization-problem-tp21966759p21966759.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 23:24:53 2009
Return-Path: <java-user-return-38478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32504 invoked from network); 11 Feb 2009 23:24:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 23:24:53 -0000
Received: (qmail 97694 invoked by uid 500); 11 Feb 2009 23:24:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97315 invoked by uid 500); 11 Feb 2009 23:24:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97294 invoked by uid 99); 11 Feb 2009 23:24:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 15:24:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.101 as permitted sender)
Received: from [65.55.111.101] (HELO blu0-omc2-s26.blu0.hotmail.com) (65.55.111.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 23:24:36 +0000
Received: from BLU149-W30 ([65.55.111.71]) by blu0-omc2-s26.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 11 Feb 2009 15:24:15 -0800
Message-ID: <BLU149-W3064618E1B9AC33E4B3D32B9BA0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_36517ada-827d-49ab-a4c9-21bc836b2840_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Fields with multiple values...
Date: Wed, 11 Feb 2009 18:24:15 -0500
Importance: Normal
In-Reply-To: <9294E20AED46934EA459020706463F94011EEF1E@SUEXCL-02.ad.syr.edu>
References: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
 <9294E20AED46934EA459020706463F94011EEF1E@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
X-OriginalArrivalTime: 11 Feb 2009 23:24:15.0461 (UTC) FILETIME=[DAC21150:01C98C9F]
X-Virus-Checked: Checked by ClamAV on apache.org

--_36517ada-827d-49ab-a4c9-21bc836b2840_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


> But you'd have to do result consolidation.
That's what I'm trying to avoid.  I could get a lot of hits (e.g. 100=2C000=
 hits) and will have to load all the documents to remove the duplicates.


> Subject: RE: Fields with multiple values...
> Date: Wed=2C 11 Feb 2009 18:06:28 -0500
> From: sarowe@syr.edu
> To: java-user@lucene.apache.org
>=20
> Hi Dragon Fly=2C
>=20
> You could split the original document into multiple Lucene Documents=2C
> one for each array index=2C all sharing the same "DocID" field value.
>=20
> Then your queries "just work".  But you'd have to do result
> consolidation=2C removing duplicate original docs when you get matches at
> multiple array indexes from the same original doc.
>=20
> Steve
>=20
> On 2/11/2009 at 5:56 PM=2C Dragon Fly wrote:
> > Hi=2C
> >=20
> > Let's say I have a single document with 2 fields (namely Field1 and
> > Field2).  2 values are added to each field like below.
> >=20
> > // Add 2 values to Field1.
> > doc.Add (new Field ("Field1"=2C "A"=2C Field.Store.YES=2C
> > Field.Index.UN_TOKENIZED))=3B
> > doc.Add (new Field ("Field1"=2C "B"=2C Field.Store.YES=2C
> > Field.Index.UN_TOKENIZED))=3B
> >=20
> > // Add 2 values to Field2.
> > doc.Add (new Field ("Field2"=2C "C"=2C Field.Store.YES=2C
> > Field.Index.UN_TOKENIZED))=3B
> > doc.Add (new Field ("Field2"=2C "D"=2C Field.Store.YES=2C
> > Field.Index.UN_TOKENIZED))=3B
> >=20
> > I'd like to get a hit if I do:
> >     Field1:A AND Field2:C
> > This is fine because that's how Lucene works.  However=2C I do not want
> > to get a hit if I do:
> >     Field1:A AND Field2:D
> > The reason that I don't want a hit is because A is the first element
> in
> > Field1 and D is the second element in Field2.  I only want a hit when
> > both values are at the same array index.  Is there a way to do this?
> > Thank you in advance for your help.
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Windows Live=99: E-mail. Chat. Share. Get more ways to connect.=20
http://windowslive.com/online/hotmail?ocid=3DTXT_TAGLM_WL_HM_AE_Faster_0220=
09=

--_36517ada-827d-49ab-a4c9-21bc836b2840_--

From java-user-return-38479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 11 23:55:18 2009
Return-Path: <java-user-return-38479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41518 invoked from network); 11 Feb 2009 23:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2009 23:55:18 -0000
Received: (qmail 29657 invoked by uid 500); 11 Feb 2009 23:55:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29625 invoked by uid 500); 11 Feb 2009 23:55:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29611 invoked by uid 99); 11 Feb 2009 23:55:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 15:55:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vinubalaji@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 23:55:04 +0000
Received: by fxm7 with SMTP id 7so887026fxm.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 15:54:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=14JkOoQFOBW7H7a66ioYX6dxGMSthIYoBrpZUM+U69I=;
        b=jcqoOGAp94d+PAqAw0yM1DMKBQb+YApGP5vo5ow3jUaElvxzrPGekZ8Kjvov218Dk1
         GQOkEP7fvDVgnK6lxPe+RtRJUMD3s3D8CWEDZkEQSK2skx7ZZRtAm6QVMCdQdi791aBT
         fNQPE8nvJXdoFiXxexTv3A7u0PS/+h9wEnsK4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Ibn1h5cUHyPuli+tQDANsqrU4KRhQskQ4frKE6aoPwgL8YnFVO1E8DDvCbYK0IGkVF
         Ol5jpoJMEfdaiRbg4I4eBHrI4v7DUq1eUOQ2vhIrqtrUnzYSs94REBmEvxPEki8di0ML
         l3zkYDd2IpvSFmu8KfDLtZ6s5MgVxUek1gvWY=
MIME-Version: 1.0
Received: by 10.103.11.5 with SMTP id o5mr44198mui.75.1234396482661; Wed, 11 
	Feb 2009 15:54:42 -0800 (PST)
In-Reply-To: <8519135D-4163-4378-AE3E-2B7113B40159@mikemccandless.com>
References: <7d8fb81e0902102350y4b718590u8b63e33be8606035@mail.gmail.com>
	 <A9C2C34C-5EF7-4AED-A30C-449EDDA96CD6@mikemccandless.com>
	 <7d8fb81e0902110753r41fac2dbu9f2f9d4a91af2dcd@mail.gmail.com>
	 <8519135D-4163-4378-AE3E-2B7113B40159@mikemccandless.com>
Date: Wed, 11 Feb 2009 15:54:42 -0800
Message-ID: <7d8fb81e0902111554v4b53230cl88d5ac06df65f86f@mail.gmail.com>
Subject: Re: deletes when the writer is open and autocommit is set to false
From: Vinubalaji Gopal <vinubalaji@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Feb 11, 2009 at 8:50 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Hmm -- OK I just fixed that FAQ entry.  Thanks for raising this!
>
Cool.

> If you know the doc doesn't exist already, you gain some performance by
> using add instead of update.  But if performance is already fast enough, it
> may be simpler to just always use update.  Or, if you will have to do your
> own search to find out whether doc exists or not, then always use update
> since that's what update's doing too.

Nice that is what I thought. Thank you very much for all the help :).

-- 
Vinu

In a world without fences who needs Gates?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 00:39:52 2009
Return-Path: <java-user-return-38480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61846 invoked from network); 12 Feb 2009 00:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 00:39:51 -0000
Received: (qmail 67508 invoked by uid 500); 12 Feb 2009 00:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67478 invoked by uid 500); 12 Feb 2009 00:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67467 invoked by uid 99); 12 Feb 2009 00:39:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 16:39:44 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 00:39:35 +0000
Received: by yw-out-2324.google.com with SMTP id 2so242889ywt.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 16:39:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=efdr0ErcIcteaOA9pVeluajdCohoQ095oYVHZ71quMM=;
        b=qFk+ZqkTuzrGLU0/QtpOPOM2EghRJ7QoWKxyvWH2hJ2X6JRX/v7glZAjngGits9owc
         vO6DUD9mNrH57C7uBRBn58J9eX8lDddPbT3dJb4lXXGBa7UzoQC7k8JAB2ubgigt4IT5
         FwAipvGa9LvGPgg0kXeME9dHyzS4pkT13i70s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AhcOJ0cdsxYwsxeaKv+WVyPjrnnXz6olobO5hQD0YT7FZGdKllG589RiJ8aKLZYMXf
         fuf55mLtfixd3LgGtq4K1PtL4QafxjuPcI8o6wBrxF/x9d/2mnWJoxCzdzTBxDtarKvN
         CYonGlCTQgyOhbshZzwCIwkzR1lnAgpHtZPNA=
MIME-Version: 1.0
Received: by 10.90.93.17 with SMTP id q17mr159122agb.9.1234399154716; Wed, 11 
	Feb 2009 16:39:14 -0800 (PST)
In-Reply-To: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
References: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
Date: Wed, 11 Feb 2009 19:39:14 -0500
Message-ID: <359a92830902111639p5495965fw4ad595ee5dc9aa40@mail.gmail.com>
Subject: Re: Fields with multiple values...
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f36720bf340462adf3b6
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630f36720bf340462adf3b6
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Well, you could index with your index as part of the value...
doc.Add (new Field ("Field1", "1A", Field.Store.YES,
Field.Index.UN_TOKENIZED));
doc.Add (new Field ("Field1", "2B", Field.Store.YES,
Field.Index.UN_TOKENIZED));

// Add 2 values to Field2.
doc.Add (new Field ("Field2", "1C", Field.Store.YES,
Field.Index.UN_TOKENIZED));
doc.Add (new Field ("Field2", "2D", Field.Store.YES,
Field.Index.UN_TOKENIZED));

then form your queries with all terms specific to one position and OR
together a clause for each possibility, something like this:


   (Field1:1A AND Field2:1C) OR (Field1:2A AND Field2:2C)
which would hit, but


  ( Field1:1A AND Field2:1D) OR (Field1:2A AND Field2:2D)
would fail.


I'm not sure how complex your queries get, so whether this works out for yo=
u
is an open question. It's obviously clumsy with a very large number of
tokens per field... How big do you expect your index to get, and how many
index positions do you expect as a max?

Do be aware that UN_TOKENIZED not fold case...

Best
Erick


On Wed, Feb 11, 2009 at 5:55 PM, Dragon Fly <dragon-fly999@hotmail.com>wrot=
e:

>
> Hi,
>
> Let's say I have a single document with 2 fields (namely Field1 and
> Field2).  2 values are added to each field like below.
>
> // Add 2 values to Field1.
> doc.Add (new Field ("Field1", "A", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.Add (new Field ("Field1", "B", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
> // Add 2 values to Field2.
> doc.Add (new Field ("Field2", "C", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.Add (new Field ("Field2", "D", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
> I'd like to get a hit if I do:
>    Field1:A AND Field2:C
> This is fine because that's how Lucene works.  However, I do not want to
> get a hit if I do:
>    Field1:A AND Field2:D
> The reason that I don't want a hit is because A is the first element in
> Field1 and D is the second element in Field2.  I only want a hit when bot=
h
> values are at the same array index.  Is there a way to do this? Thank you=
 in
> advance for your help.
>
> _________________________________________________________________
> Windows Live=99: E-mail. Chat. Share. Get more ways to connect.
> http://windowslive.com/explore?ocid=3DTXT_TAGLM_WL_t2_allup_explore_02200=
9

--00163630f36720bf340462adf3b6--

From java-user-return-38481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 00:56:24 2009
Return-Path: <java-user-return-38481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64173 invoked from network); 12 Feb 2009 00:56:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 00:56:23 -0000
Received: (qmail 83168 invoked by uid 500); 12 Feb 2009 00:56:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83137 invoked by uid 500); 12 Feb 2009 00:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83126 invoked by uid 99); 12 Feb 2009 00:56:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 16:56:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.89.202.182] (HELO postoffice2.aconex.com) (203.89.202.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 00:56:09 +0000
X-ASG-Debug-ID: 1234400146-131400610000-H1Y1KX
X-Barracuda-URL: http://postoffice2.aconex.com:8000/cgi-bin/mark.cgi
Received: from postoffice.aconex.com (localhost [127.0.0.1])
	by postoffice2.aconex.com (Spam Firewall) with ESMTP id 6FDD8F9881
	for <java-user@lucene.apache.org>; Thu, 12 Feb 2009 11:55:46 +1100 (EST)
Received: from postoffice.aconex.com (postoffice.yarra.acx [192.168.102.1]) by postoffice2.aconex.com with ESMTP id DKLxEZvoDgrwk6EO for <java-user@lucene.apache.org>; Thu, 12 Feb 2009 11:55:46 +1100 (EST)
Received: from [192.168.5.132] (melho0.aconex.com [203.89.192.141])
	by postoffice.aconex.com (Postfix) with ESMTP id 513BA92C0DA
	for <java-user@lucene.apache.org>; Thu, 12 Feb 2009 11:55:46 +1100 (EST)
Message-ID: <4993737B.60005@aconex.com>
Date: Thu, 12 Feb 2009 11:55:23 +1100
From: Paul Cowan <cowan@aconex.com>
Organization: Aconex
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-ASG-Orig-Subj: Re: Fields with multiple values...
Subject: Re: Fields with multiple values...
References: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
In-Reply-To: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Barracuda-Connect: postoffice.yarra.acx[192.168.102.1]
X-Barracuda-Start-Time: 1234400146
X-Barracuda-Virus-Scanned: by Aconex Staff Email Spam Firewall at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dragon Fly wrote:
> I'd like to get a hit if I do:
>     Field1:A AND Field2:C
> This is fine because that's how Lucene works.  However, I do not want to get a hit if I do:
>     Field1:A AND Field2:D
> The reason that I don't want a hit is because A is the first element in Field1 and D is the second element in Field2.  I only want a hit when both values are at the same array index.  Is there a way to do this? Thank you in advance for your help.

With a bit of fudging, you may be able to use a SpanNearQuery to do this 
-- though you'll need to change your analyzer's positionIncrementGap, 
and depending on how many tokens you'll have for each field (if it 
varies between fields) you may need to patch Lucene to change the way 
the gaps are calculated.

I've done a prototype of exactly this (SpanNearQuery and analyzer 
changes) for a very similar situation here and it works BRILLIANTLY -- 
massively, massively faster for us than indexing a new document for each 
set of 'subfields'.

I've put some patches against 
https://issues.apache.org/jira/browse/LUCENE-1494 -- I think this 
approach might work for you. Let me know if you need clarification.

Cheers,

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 01:12:38 2009
Return-Path: <java-user-return-38482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69603 invoked from network); 12 Feb 2009 01:12:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 01:12:38 -0000
Received: (qmail 1868 invoked by uid 500); 12 Feb 2009 01:12:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1845 invoked by uid 500); 12 Feb 2009 01:12:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1834 invoked by uid 99); 12 Feb 2009 01:12:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 17:12:31 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mark.a.ferguson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 01:12:20 +0000
Received: by rv-out-0506.google.com with SMTP id k40so198403rvb.5
        for <java-user@lucene.apache.org>; Wed, 11 Feb 2009 17:11:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Sf/vTi0Aq/A65krdJcbkDSG2gjKyl46YIQfMxpmrilI=;
        b=cwBGJNdCz8cIQahamEDrsuboXeZ600LRDSACkIGTux44hIbVQi/6GKuV7niqdPZsTZ
         noXiwn65RajjrBcM+jg8ALcHu+Se+YZxjvNeUepGaZ77goVCvx7sxahwhcfURddsy/9/
         lBqJIDSrQQcYzKE3xYRM+xGeKsoTsl4dAJgPQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kobdg71qZKJUAwNokLbmsxht+HZk5uKP0lI0SHA5ApSN4Jd6ZtgJD8kf8VAEzuP5k3
         ciQm2Pcv5Cne9CTZc82iqN5E8jE0u4vcdr2ZeaSf0qdGApLfw3aQ8fnrgHKs1t07P5Cs
         9DeWtmovY+kebbpW31mdbBvBM2PyriY5tPgW8=
MIME-Version: 1.0
Received: by 10.141.10.1 with SMTP id n1mr157331rvi.252.1234401119000; Wed, 11 
	Feb 2009 17:11:59 -0800 (PST)
In-Reply-To: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
References: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
Date: Wed, 11 Feb 2009 18:11:58 -0700
Message-ID: <2dab92100902111711j44d71a82sc2017e52ddd29f62@mail.gmail.com>
Subject: Re: Fields with multiple values...
From: Mark Ferguson <mark.a.ferguson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13bc23557fa0462ae685d
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13bc23557fa0462ae685d
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

One approach is to use dynamic fields, making the value of the second field
part of the name of the first field. So for example, you would have:

doc.Add (new Field ("Field1_A", "C", Field.Store.YES,
Field.Index.UN_TOKENIZED));
doc.Add (new Field ("Field1_B", "D", Field.Store.YES,
Field.Index.UN_TOKENIZED));

Whether this is a viable option really depends on how many fields we're
talking about and what sort of data you're indexing. I use this approach on
my project for storing users' individual data about a URL inside a single
document, by appending the user id to the field name. So I have, for
example, bookmark_title_29:"My Bookmark", and bookmark_title_35:"Another
bookmark" in the same document, and I can search bookmark titles by specifi=
c
users.

On Wed, Feb 11, 2009 at 3:55 PM, Dragon Fly <dragon-fly999@hotmail.com>wrot=
e:

>
> Hi,
>
> Let's say I have a single document with 2 fields (namely Field1 and
> Field2).  2 values are added to each field like below.
>
> // Add 2 values to Field1.
> doc.Add (new Field ("Field1", "A", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.Add (new Field ("Field1", "B", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
> // Add 2 values to Field2.
> doc.Add (new Field ("Field2", "C", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.Add (new Field ("Field2", "D", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
> I'd like to get a hit if I do:
>    Field1:A AND Field2:C
> This is fine because that's how Lucene works.  However, I do not want to
> get a hit if I do:
>    Field1:A AND Field2:D
> The reason that I don't want a hit is because A is the first element in
> Field1 and D is the second element in Field2.  I only want a hit when bot=
h
> values are at the same array index.  Is there a way to do this? Thank you=
 in
> advance for your help.
>
> _________________________________________________________________
> Windows Live=99: E-mail. Chat. Share. Get more ways to connect.
> http://windowslive.com/explore?ocid=3DTXT_TAGLM_WL_t2_allup_explore_02200=
9

--000e0cd13bc23557fa0462ae685d--

From java-user-return-38483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 06:32:03 2009
Return-Path: <java-user-return-38483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85688 invoked from network); 12 Feb 2009 06:32:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 06:32:01 -0000
Received: (qmail 97922 invoked by uid 500); 12 Feb 2009 06:31:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97893 invoked by uid 500); 12 Feb 2009 06:31:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97882 invoked by uid 99); 12 Feb 2009 06:31:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Feb 2009 22:31:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 06:31:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LXV6a-0001h0-Cf
	for java-user@lucene.apache.org; Wed, 11 Feb 2009 22:31:24 -0800
Message-ID: <21970680.post@talk.nabble.com>
Date: Wed, 11 Feb 2009 22:31:24 -0800 (PST)
From: renavatior <lvsaihui@126.com>
To: java-user@lucene.apache.org
Subject: How to compute the simlarity of a web page?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lvsaihui@126.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am doing some research in vertical search? Therefore, i defined some
weights of several keywords in my corpus expressing a certain
theme,later,how can i use these to compute the similarity with the given web
page(passed by url to the compute method).I saw the source code of
Similarity.java in Lucene,but i do not know how to use the method such as
TF,IDF,and so on.
i will really appreciate it if anyone can give me some advice,thanks in
advance.
-- 
View this message in context: http://www.nabble.com/How-to-compute-the-simlarity-of-a-web-page--tp21970680p21970680.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 08:54:11 2009
Return-Path: <java-user-return-38484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44747 invoked from network); 12 Feb 2009 08:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 08:54:11 -0000
Received: (qmail 13028 invoked by uid 500); 12 Feb 2009 08:54:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13004 invoked by uid 500); 12 Feb 2009 08:54:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12993 invoked by uid 99); 12 Feb 2009 08:54:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 00:54:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.200.146] (HELO web30803.mail.mud.yahoo.com) (68.142.200.146)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Feb 2009 08:53:55 +0000
Received: (qmail 24373 invoked by uid 60001); 12 Feb 2009 08:53:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=5NkZW1VykUyakYASn70FwB1zMODx0r+ly6xWEm6D/17W2AiqQjWrk8ztYaAVTLeLcc+iXaE5TRj6jph6UB3I9ddjZYJOZUHNwmPQvoL9ysAL6DBtBuaGjcNKFOgTeZ2N3/wim5fzQYo+yhkFHd11/0nWtVko6aDm/6cMRz/DMHA=;
X-YMail-OSG: UY83zjEVM1m38IGXBeGNYHp7V.jY.XSI7DNxFnZayEv9QmCNvrNw61mbY1XtSStIgg.yaV1rXRlXcoP9GRlkT5woBOYL8XnDCeanoh_geES0tUugM8zoj8b6ubWrF53TyIbYy1K6rqQGWP64Pj_NdL0T
Received: from [66.31.30.224] by web30803.mail.mud.yahoo.com via HTTP; Thu, 12 Feb 2009 00:53:33 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.260.1
Date: Thu, 12 Feb 2009 00:53:33 -0800 (PST)
From: Shashi Kant <shashi_kant@yahoo.com>
Reply-To: Shashi Kant <skant@sloan.mit.edu>
Subject: Visualization
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <199147.22068.qm@web30803.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Apologies for being slightly off-topic, we are looking at novel visualization approaches for rendering results from Lucene queries. I was wondering if you have any recommendations for visualization toolkits (Java) for displaying heat-maps, dendrograms, cluster maps etc. (preferably free/OSS)

Thanks in advance!
Shashi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 09:39:08 2009
Return-Path: <java-user-return-38485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61430 invoked from network); 12 Feb 2009 09:39:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 09:39:08 -0000
Received: (qmail 57039 invoked by uid 500); 12 Feb 2009 09:39:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57016 invoked by uid 500); 12 Feb 2009 09:39:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57005 invoked by uid 99); 12 Feb 2009 09:39:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 01:39:01 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.19] (HELO web52909.mail.re2.yahoo.com) (206.190.49.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Feb 2009 09:38:51 +0000
Received: (qmail 18710 invoked by uid 60001); 12 Feb 2009 09:38:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=VmSiDYJ0qQMme/NZCGkOGB4iPngIHBQ12FgYAeSgbczk5blgSuwsyn9fgZ/Wco6lUBm6XKBRbUGQb1BnithnPoV/kllDDP5fCBHfo/tDDl68rpQmxakoWTSH4LKke1Sb03szvRLtykQxsu3DxQ9l/8IBUwC4cRiKukKqkgW8Vpc=;
X-YMail-OSG: DE8bSU0VM1kvCfuWdJQk3Ga2epdNlRLA9xluLg9svHEc_F3J1B46xvbWehfh3tOuXkVjONnRthR79Vzx4xcaI9XaByZd_0duK_In_beA.oG6p..SBTX.Wf.F9gBwvuLL0KGHVMt4nu46ojXWXWZOzQ4nKNQSQQCPdbtO9jufnjbLbHdDp0dsVqp6kD8rH2s6eWw5jU6BXubJocI0VLXkF._Yxugd6Vk-
Received: from [84.88.78.2] by web52909.mail.re2.yahoo.com via HTTP; Thu, 12 Feb 2009 01:38:29 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Thu, 12 Feb 2009 01:38:29 -0800 (PST)
From: Omar Alonso <oralonso@yahoo.com>
Subject: Re: Visualization
To: java-user@lucene.apache.org, Shashi Kant <skant@sloan.mit.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-574814602-1234431509=:17504"
Message-ID: <616523.17504.qm@web52909.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-574814602-1234431509=:17504
Content-Type: text/plain; charset=us-ascii

prefuse.org


--- On Thu, 2/12/09, Shashi Kant <shashi_kant@yahoo.com> wrote:

From: Shashi Kant <shashi_kant@yahoo.com>
Subject: Visualization
To: java-user@lucene.apache.org
Date: Thursday, February 12, 2009, 12:53 AM

Hi all,

Apologies for being slightly off-topic, we are looking at novel visualization approaches for rendering results from Lucene queries. I was wondering if you have any recommendations for visualization toolkits (Java) for displaying heat-maps, dendrograms, cluster maps etc. (preferably free/OSS)

Thanks in advance!
Shashi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




      
--0-574814602-1234431509=:17504--

From java-user-return-38486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 11:06:29 2009
Return-Path: <java-user-return-38486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8548 invoked from network); 12 Feb 2009 11:06:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 11:06:29 -0000
Received: (qmail 77725 invoked by uid 500); 12 Feb 2009 11:06:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77622 invoked by uid 500); 12 Feb 2009 11:06:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77589 invoked by uid 99); 12 Feb 2009 11:06:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 03:06:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.149] (HELO web30806.mail.mud.yahoo.com) (68.142.200.149)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Feb 2009 11:06:04 +0000
Received: (qmail 92592 invoked by uid 60001); 12 Feb 2009 11:05:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Ki/EJuLh5m2U4ZBFfrkcx8JQGWiBd9x6ZvpHDWfucK8q7D4zTifmnWe1zVFz0nbQxODE4hiXEFdqmYy0k/ol1TxaU5sn9JkMO0e92FrlI/4myPdgD69sg89sq9g4+Dn8Rts3LmGsTYqbhN58HpitcUflKfvhniaIukfkC/Dlt2g=;
X-YMail-OSG: fCKZEeUVM1kDTF6fFXXoQztH_rg_SVyJGpIKPKO6jQ9p2YRGphPARBztFj_Kr9MlVuevxrd.r74pBOQPnTNS_rVdqhhb7T1oLuVNuZcexdy9tJ_gm7FF0GiaAmtlwgQNeF0bE_MdvzmpKy3YGCbXzf6vGHV2HC3D07EiEwfv988BwpsJ3BH8Rgg0GQ5EtS6zcE1aM_3HiMIlMRpBlTSRart7Kf7OtRw-
Received: from [66.31.30.224] by web30806.mail.mud.yahoo.com via HTTP; Thu, 12 Feb 2009 03:05:42 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.260.1
References: <616523.17504.qm@web52909.mail.re2.yahoo.com>
Date: Thu, 12 Feb 2009 03:05:42 -0800 (PST)
From: Shashi Kant <shashi_kant@yahoo.com>
Reply-To: Shashi Kant <skant@sloan.mit.edu>
Subject: Re: Visualization
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <565483.91167.qm@web30806.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Omar, I have looked at Prefuse. 
What has been your experience with it given it is still in beta? any "gotchas" we should look out for?

regards,
shashi





----- Original Message ----
From: Omar Alonso <oralonso@yahoo.com>
To: java-user@lucene.apache.org; Shashi Kant <skant@sloan.mit.edu>
Sent: Thursday, February 12, 2009 4:38:29 AM
Subject: Re: Visualization

prefuse.org


--- On Thu, 2/12/09, Shashi Kant <shashi_kant@yahoo.com> wrote:

From: Shashi Kant <shashi_kant@yahoo.com>
Subject: Visualization
To: java-user@lucene.apache.org
Date: Thursday, February 12, 2009, 12:53 AM

Hi all,

Apologies for being slightly off-topic, we are looking at novel visualization approaches for rendering results from Lucene queries. I was wondering if you have any recommendations for visualization toolkits (Java) for displaying heat-maps, dendrograms, cluster maps etc. (preferably free/OSS)

Thanks in advance!
Shashi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 12:05:46 2009
Return-Path: <java-user-return-38487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27798 invoked from network); 12 Feb 2009 12:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 12:05:46 -0000
Received: (qmail 61681 invoked by uid 500); 12 Feb 2009 12:05:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61649 invoked by uid 500); 12 Feb 2009 12:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61638 invoked by uid 99); 12 Feb 2009 12:05:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 04:05:37 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Feb 2009 12:05:25 +0000
Received: (qmail 91816 invoked by uid 60001); 12 Feb 2009 12:05:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=olfFTOQZTtIhX61FaQShDdq1rdaOIUkgotvEZ3Nmc/FzMU3k5AN1J8gdfS9vlztJiYaYJzCEH7HeX+1ZED2FuEkohl3hYxEkhNCPmJAB8/P3pa3GFm6uXlD+DjchONmldE2ry9v+DWHSKl1JRbk/tUY3IuAckMbAdgbuYBgO3iA=;
X-YMail-OSG: 2._25nAVM1mC_UyaCjyncv7sZ11I4Llnrgh2TOyRKqirXWxwWgSssA_9uxGLthCMfZ172A04SW2txZNRRj1iGtHguBkVKcT2wMIka8tS_c__Mehwv9xGE3LkP3C4JMATX82YWmK.1fGBp2wWB0ygMg4j_HLagbwkiqOYe18SvMuWQRgqeAZWXyU3o.CjbdRsPXg9kQYVGo8uegOjppW1NSQPKKejsZc-
Received: from [80.35.188.102] by web52903.mail.re2.yahoo.com via HTTP; Thu, 12 Feb 2009 04:05:00 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Thu, 12 Feb 2009 04:05:00 -0800 (PST)
From: Omar Alonso <oralonso@yahoo.com>
Subject: Re: Visualization
To: java-user@lucene.apache.org, Shashi Kant <skant@sloan.mit.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2115465269-1234440300=:90354"
Message-ID: <844745.90354.qm@web52903.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2115465269-1234440300=:90354
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

Depends on the kind of work that you want to do. For trying ideas I think i=
s pretty cool. I've used for visualizing the DBLP data set and it was OK. I=
 also played with an early version of LabEscape for TreeMaps. There is a pa=
per on the project in case=A0 you want to take a look: www.oracle.com/techn=
ology/tech/semantic_technologies/pdf/informationgrid_oracle.pdf. BTW, I'm n=
ot longer at Oracle but I'm happy to answer questions that you may have.

Another toolkit that I like is SIMILE (http://simile.mit.edu/).=20

Regards,

o.

--- On Thu, 2/12/09, Shashi Kant <shashi_kant@yahoo.com> wrote:

From: Shashi Kant <shashi_kant@yahoo.com>
Subject: Re: Visualization
To: java-user@lucene.apache.org
Date: Thursday, February 12, 2009, 3:05 AM

Thanks Omar, I have looked at Prefuse.=20
What has been your experience with it given it is still in beta? any "gotch=
as" we should look out for?

regards,
shashi





----- Original Message ----
From: Omar Alonso <oralonso@yahoo.com>
To: java-user@lucene.apache.org; Shashi Kant <skant@sloan.mit.edu>
Sent: Thursday, February 12, 2009 4:38:29 AM
Subject: Re: Visualization

prefuse.org


--- On Thu, 2/12/09, Shashi Kant <shashi_kant@yahoo.com> wrote:

From: Shashi Kant <shashi_kant@yahoo.com>
Subject: Visualization
To: java-user@lucene.apache.org
Date: Thursday, February 12, 2009, 12:53 AM

Hi all,

Apologies for being slightly off-topic, we are looking at novel visualizati=
on approaches for rendering results from Lucene queries. I was wondering if=
 you have any recommendations for visualization toolkits (Java) for display=
ing heat-maps, dendrograms, cluster maps etc. (preferably free/OSS)

Thanks in advance!
Shashi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=0A=0A=0A      
--0-2115465269-1234440300=:90354--

From java-user-return-38488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 14:40:58 2009
Return-Path: <java-user-return-38488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17240 invoked from network); 12 Feb 2009 14:40:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 14:40:58 -0000
Received: (qmail 57981 invoked by uid 500); 12 Feb 2009 14:38:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57959 invoked by uid 500); 12 Feb 2009 14:38:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57944 invoked by uid 99); 12 Feb 2009 14:38:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 06:38:38 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshulnirvana@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 14:38:30 +0000
Received: by fxm7 with SMTP id 7so1456240fxm.5
        for <java-user@lucene.apache.org>; Thu, 12 Feb 2009 06:38:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=GViaADioPd3nf0DaPL9ioZsDrw9OCIMHuWT8IxGqj1Y=;
        b=CoTyasHuT0YIkeWzyq+OtC+Ch4KUkxqtgxDLBXaSoH21QcdFRvefPmBXvcbseKTx0E
         VXgi1KnQcc6ofOipisosOEtCTTrJgfMYFHj9f7bigJy4KJbwnNKMhiHkbgvuL3mBrI3T
         7TJlNXgsg/aX9+0O4eZUUFuVTUGCUVrWQNx2A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        b=MZXxZH6HEVlLXAJYisRVSPUtN9m3NZr6BPGO89UOSes1aWilrzuPhXQsKMpKNRXNPx
         5we5ooIZDeX5Piw9of6KYpA/R+dbVkwV/j3j0vnEKlUIx4UkJbtWdhFiqiuMkD1Wr7rq
         k3o6aoL8VtIK2XPy7e5IaNBmEg+f0Zv49wO0k=
MIME-Version: 1.0
Sender: anshulnirvana@gmail.com
Received: by 10.223.103.147 with SMTP id k19mr1146308fao.0.1234449262686; Thu, 
	12 Feb 2009 06:34:22 -0800 (PST)
Date: Thu, 12 Feb 2009 15:34:22 +0100
X-Google-Sender-Auth: 5f4171906c53303a
Message-ID: <b8bb47ad0902120634g73cdb3d6g5d69da97ccb2b034@mail.gmail.com>
Subject: Lucene Alpha-numeric search
From: Anshul jain <anshul.jain@epfl.ch>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a8e6cbb02a0462b99d60
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a8e6cbb02a0462b99d60
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

I'm using BoostingTermQuery() of lucene. When I search for alpha-numeric
terms(e.g. a647gd), I don't get any results back. Could anyone please help
me out? Am I missing something?

Cheers,
Anshul

-- 
Anshul Jain

--001636c5a8e6cbb02a0462b99d60--

From java-user-return-38489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 14:47:46 2009
Return-Path: <java-user-return-38489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20680 invoked from network); 12 Feb 2009 14:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 14:47:46 -0000
Received: (qmail 72769 invoked by uid 500); 12 Feb 2009 14:47:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72503 invoked by uid 500); 12 Feb 2009 14:47:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72492 invoked by uid 99); 12 Feb 2009 14:47:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 06:47:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.162.183 as permitted sender)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 14:47:03 +0000
Received: by el-out-1112.google.com with SMTP id s27so501087ele.14
        for <java-user@lucene.apache.org>; Thu, 12 Feb 2009 06:46:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=JkrxKngZLqFwJZHrSwx05fTA6WVKBnpUmYJLD8JM0k4=;
        b=a24kYJp1NMl483aHZ94GE6/SZg+H/Z/ehblqNimvbMtcdQPDZOyMqQy8mo8TTTbwag
         /sVsSYpvcTun/5Ydca8cKuXEOltl0u4kotSndH/nZHOwSwOy354+Sb3LnRwQK8k33Ja7
         L9jlnIraPMIuRKpiKHwG4NBQj+N4ApGWCeMnE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IKV6F7xGiwHEm657hg56mpNzRyQiskNU/TTFwhdi/SceGXDBfWM0F1bcL0onWh7lb7
         utMGv9ehUF91DoQA5nnQF+Xh83LCXBfL3NDXa9UYkriX28H7mm89P0reDEDyxyktM9x6
         KsfX+WKZL6rIv1qugLUzWDUgEiUoHdGCsY+bU=
MIME-Version: 1.0
Received: by 10.90.118.19 with SMTP id q19mr530608agc.6.1234450002880; Thu, 12 
	Feb 2009 06:46:42 -0800 (PST)
In-Reply-To: <b8bb47ad0902120634g73cdb3d6g5d69da97ccb2b034@mail.gmail.com>
References: <b8bb47ad0902120634g73cdb3d6g5d69da97ccb2b034@mail.gmail.com>
Date: Thu, 12 Feb 2009 09:46:42 -0500
Message-ID: <359a92830902120646x152ce7c5i15771817d9e62646@mail.gmail.com>
Subject: Re: Lucene Alpha-numeric search
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e88c6ea2aae0462b9c97a
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e88c6ea2aae0462b9c97a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

You need to give a LOT more details. For instance, what
analyzers are you using at index and query time? Have
you used Luke to look at your index and see if it contains
what you expect? Have you used Luke to examine what
queries look like after they are parsed? Have you tried
seeing how your query gets parsed (query.toString())?
Have you looked over the FAQ and tried the suggestions
there?

In short, tell us what your code looks like and what you
have tried. Your question is unanswerable in its present
form.

Best
Erick

On Thu, Feb 12, 2009 at 9:34 AM, Anshul jain <anshul.jain@epfl.ch> wrote:

> Hi,
>
> I'm using BoostingTermQuery() of lucene. When I search for alpha-numeric
> terms(e.g. a647gd), I don't get any results back. Could anyone please help
> me out? Am I missing something?
>
> Cheers,
> Anshul
>
> --
> Anshul Jain
>

--0016361e88c6ea2aae0462b9c97a--

From java-user-return-38490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 15:32:46 2009
Return-Path: <java-user-return-38490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62695 invoked from network); 12 Feb 2009 15:32:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 15:32:46 -0000
Received: (qmail 74804 invoked by uid 500); 12 Feb 2009 15:32:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74647 invoked by uid 500); 12 Feb 2009 15:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74636 invoked by uid 99); 12 Feb 2009 15:32:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 07:32:37 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshulnirvana@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 15:32:29 +0000
Received: by fxm7 with SMTP id 7so1503388fxm.5
        for <java-user@lucene.apache.org>; Thu, 12 Feb 2009 07:32:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/TL7PwQy2qBT2sVOlnaZ4rWOp5eY/WGVtFeu65cg5NI=;
        b=Tx6IuvAEtmMPuCTntqw+ACCWTcSiGknRnWL+1erQBVPJwVtHpLQ4oeXx3Xu3WWRLtF
         VlPcUYZzNLefYEe4sMPVvMjAA+btm/piUSKgReVgvTAQZ88zxaAG3dVk7ittewd+bWp5
         vOYDF+FxOJyognbWHRJMOnwsQMazs4dayGvGw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=avLyNdr4HOZ+yM8CaEurp/0sXNvkZAtWiCNp0CP6n0YPhgnFCS0kKJExWHxb5rQD6i
         K0hOKinCxALyN4D50NbVZ+rPKu3vHO9Yzx8ngo9hkoMhx7h8XqLba6FygFMu1NgwIVv7
         R8XrNtpv7w0AziaBMlHwHgDMkQH0E1icjS7u0=
MIME-Version: 1.0
Received: by 10.223.115.80 with SMTP id h16mr1156262faq.94.1234452618371; Thu, 
	12 Feb 2009 07:30:18 -0800 (PST)
In-Reply-To: <359a92830902120646x152ce7c5i15771817d9e62646@mail.gmail.com>
References: <b8bb47ad0902120634g73cdb3d6g5d69da97ccb2b034@mail.gmail.com>
	 <359a92830902120646x152ce7c5i15771817d9e62646@mail.gmail.com>
Date: Thu, 12 Feb 2009 16:30:18 +0100
Message-ID: <b8bb47ad0902120730x76c0ff50l13684592ba3beb5b@mail.gmail.com>
Subject: Re: Lucene Alpha-numeric search
From: Anshul jain <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b352cf61840462ba659f
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5b352cf61840462ba659f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I was over-looking analyzers, I used LowerCaseTokenizer() in my custom
designed analyzer and it was removing the numeric characters. Thank you very
much Erick, for pointing that out.

Cheers,
Anshul

On Thu, Feb 12, 2009 at 3:46 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> You need to give a LOT more details. For instance, what
> analyzers are you using at index and query time? Have
> you used Luke to look at your index and see if it contains
> what you expect? Have you used Luke to examine what
> queries look like after they are parsed? Have you tried
> seeing how your query gets parsed (query.toString())?
> Have you looked over the FAQ and tried the suggestions
> there?
>
> In short, tell us what your code looks like and what you
> have tried. Your question is unanswerable in its present
> form.
>
> Best
> Erick
>
> On Thu, Feb 12, 2009 at 9:34 AM, Anshul jain <anshul.jain@epfl.ch> wrote:
>
> > Hi,
> >
> > I'm using BoostingTermQuery() of lucene. When I search for alpha-numeric
> > terms(e.g. a647gd), I don't get any results back. Could anyone please
> help
> > me out? Am I missing something?
> >
> > Cheers,
> > Anshul
> >
> > --
> > Anshul Jain
> >
>



-- 
Anshul Jain

--001636c5b352cf61840462ba659f--

From java-user-return-38491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 15:56:37 2009
Return-Path: <java-user-return-38491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72689 invoked from network); 12 Feb 2009 15:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 15:56:37 -0000
Received: (qmail 38197 invoked by uid 500); 12 Feb 2009 15:56:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38174 invoked by uid 500); 12 Feb 2009 15:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38163 invoked by uid 99); 12 Feb 2009 15:56:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 07:56:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 15:56:17 +0000
Received: by qyk13 with SMTP id 13so1013066qyk.5
        for <java-user@lucene.apache.org>; Thu, 12 Feb 2009 07:55:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=WWJKbbIdFvd9YcBB/bYVfMd5FEaJtXGqEYYt7WRSErI=;
        b=bbiMJSwdjXf4jeooa0NEMcjJxDccpDjk+triEIztO1K3BpePNEF1CRy/zTj6fk8d5x
         ig7wrWfs+NHlEeiuGif9DC5XgbCFQTaqfcLexKJkcfFvk1ip5d6V65gA+dXk3P6c8H7w
         KF6ZUACaj2AcroeBNfwZq2HivHItSogaKLy2k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=eMVPKvI7Hm8mBCckqzMj3k3gbVEMl255F6uy24vLYSu+5eHhCfG8EVzQUwIujZCD8q
         Wx396WOKQfMgzJfPvSxb2uBpIjDLhGN0bdqonofifHj8y/SYuelkZ0cWP+yXyFStbdBU
         /3JOfupnATfTY5btu1Du/qU0csNKkAElzBPuE=
MIME-Version: 1.0
Received: by 10.220.90.140 with SMTP id i12mr60653vcm.22.1234454155779; Thu, 
	12 Feb 2009 07:55:55 -0800 (PST)
In-Reply-To: <844745.90354.qm@web52903.mail.re2.yahoo.com>
References: <844745.90354.qm@web52903.mail.re2.yahoo.com>
Date: Thu, 12 Feb 2009 10:55:55 -0500
Message-ID: <5e76f3840902120755o517cf2a4t3fc8e55f398c392@mail.gmail.com>
Subject: Re: Visualization
From: Glen Newton <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

V1 of a project of mine, Ungava[1], which uses Lucene to index
research articles and library catalog metadata, also uses Project
Simile's Metaphor and Timeline. I have some simple examples using
them:

Here is the search for "cell" in articles:
 http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava/Search?collection=3Djos&conte=
nts=3Dcell

Here is a Timeline view of the search "cell" for articles:
 http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava/Search?calyHandler=3DtimeLine=
View&collection=3Djos&contents=3Dcell

here is the Exhibit view:
 http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava/Search?calyHandler=3Dexhibit&=
collection=3Djos&contents=3Dcell

Here is the keyword drill cloud[2] view:
http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava/Search?tagCloud=3Dtrue&collect=
ion=3Djos&tagField=3Dkeyword&contents=3Dcell&numCloudDocs=3D200&numCloudTag=
s=3D50


Here is the "cell" search of the library catalog:
http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava01/Search?collection=3Dcsu&titl=
e=3Dcell&sauthor=3D&keyword=3D&syear=3D-1&eyear=3D-1&sortBy=3Drelevance

Timeline view:
http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava01/Search?calyHandler=3DtimeLin=
eView&collection=3Dcsu&title=3Dcell

Subject Drill Cloud:
http://lab.cisti-icist.nrc-cnrc.gc.ca/ungava01/Search?tagCloud=3Dtrue&colle=
ction=3Dcsu&tagField=3Dkeyword&title=3Dcell&numCloudDocs=3D200&numCloudTags=
=3D50&sortBy=3Drelevance

-Glen

[1]http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/Ungava
[2]http://zzzoot.blogspot.com/2007/10/drill-clouds-for-search-refinement-id=
.html



2009/2/12 Omar Alonso <oralonso@yahoo.com>:
> Hi,
>
> Depends on the kind of work that you want to do. For trying ideas I think=
 is pretty cool. I've used for visualizing the DBLP data set and it was OK.=
 I also played with an early version of LabEscape for TreeMaps. There is a =
paper on the project in case  you want to take a look: www.oracle.com/techn=
ology/tech/semantic_technologies/pdf/informationgrid_oracle.pdf. BTW, I'm n=
ot longer at Oracle but I'm happy to answer questions that you may have.
>
> Another toolkit that I like is SIMILE (http://simile.mit.edu/).
>
> Regards,
>
> o.
>
> --- On Thu, 2/12/09, Shashi Kant <shashi_kant@yahoo.com> wrote:
>
> From: Shashi Kant <shashi_kant@yahoo.com>
> Subject: Re: Visualization
> To: java-user@lucene.apache.org
> Date: Thursday, February 12, 2009, 3:05 AM
>
> Thanks Omar, I have looked at Prefuse.
> What has been your experience with it given it is still in beta? any "got=
chas" we should look out for?
>
> regards,
> shashi
>
>
>
>
>
> ----- Original Message ----
> From: Omar Alonso <oralonso@yahoo.com>
> To: java-user@lucene.apache.org; Shashi Kant <skant@sloan.mit.edu>
> Sent: Thursday, February 12, 2009 4:38:29 AM
> Subject: Re: Visualization
>
> prefuse.org
>
>
> --- On Thu, 2/12/09, Shashi Kant <shashi_kant@yahoo.com> wrote:
>
> From: Shashi Kant <shashi_kant@yahoo.com>
> Subject: Visualization
> To: java-user@lucene.apache.org
> Date: Thursday, February 12, 2009, 12:53 AM
>
> Hi all,
>
> Apologies for being slightly off-topic, we are looking at novel visualiza=
tion approaches for rendering results from Lucene queries. I was wondering =
if you have any recommendations for visualization toolkits (Java) for displ=
aying heat-maps, dendrograms, cluster maps etc. (preferably free/OSS)
>
> Thanks in advance!
> Shashi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>



--=20

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 12 17:58:46 2009
Return-Path: <java-user-return-38492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46135 invoked from network); 12 Feb 2009 17:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2009 17:58:46 -0000
Received: (qmail 86065 invoked by uid 500); 12 Feb 2009 17:58:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86040 invoked by uid 500); 12 Feb 2009 17:58:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86028 invoked by uid 99); 12 Feb 2009 17:58:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 09:58:37 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.90 as permitted sender)
Received: from [65.55.111.90] (HELO blu0-omc2-s15.blu0.hotmail.com) (65.55.111.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 17:58:27 +0000
Received: from BLU149-W46 ([65.55.111.71]) by blu0-omc2-s15.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 12 Feb 2009 09:58:06 -0800
Message-ID: <BLU149-W46AA4F55DD2C86511032D5B9BB0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_78387886-766b-4723-9b3d-f5878621f8f3_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Fields with multiple values...
Date: Thu, 12 Feb 2009 12:58:06 -0500
Importance: Normal
In-Reply-To: <2dab92100902111711j44d71a82sc2017e52ddd29f62@mail.gmail.com>
References: <BLU149-W23B24AB6F4CD2427429754B9BA0@phx.gbl>
 <2dab92100902111711j44d71a82sc2017e52ddd29f62@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 12 Feb 2009 17:58:06.0351 (UTC) FILETIME=[751299F0:01C98D3B]
X-Virus-Checked: Checked by ClamAV on apache.org

--_78387886-766b-4723-9b3d-f5878621f8f3_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


I'll think about your ideas and see which one works best for my project.  T=
hank you.

> Date: Wed=2C 11 Feb 2009 18:11:58 -0700
> Subject: Re: Fields with multiple values...
> From: mark.a.ferguson@gmail.com
> To: java-user@lucene.apache.org
>=20
> One approach is to use dynamic fields=2C making the value of the second f=
ield
> part of the name of the first field. So for example=2C you would have:
>=20
> doc.Add (new Field ("Field1_A"=2C "C"=2C Field.Store.YES=2C
> Field.Index.UN_TOKENIZED))=3B
> doc.Add (new Field ("Field1_B"=2C "D"=2C Field.Store.YES=2C
> Field.Index.UN_TOKENIZED))=3B
>=20
> Whether this is a viable option really depends on how many fields we're
> talking about and what sort of data you're indexing. I use this approach =
on
> my project for storing users' individual data about a URL inside a single
> document=2C by appending the user id to the field name. So I have=2C for
> example=2C bookmark_title_29:"My Bookmark"=2C and bookmark_title_35:"Anot=
her
> bookmark" in the same document=2C and I can search bookmark titles by spe=
cific
> users.
>=20
> On Wed=2C Feb 11=2C 2009 at 3:55 PM=2C Dragon Fly <dragon-fly999@hotmail.=
com>wrote:
>=20
> >
> > Hi=2C
> >
> > Let's say I have a single document with 2 fields (namely Field1 and
> > Field2).  2 values are added to each field like below.
> >
> > // Add 2 values to Field1.
> > doc.Add (new Field ("Field1"=2C "A"=2C Field.Store.YES=2C
> > Field.Index.UN_TOKENIZED))=3B
> > doc.Add (new Field ("Field1"=2C "B"=2C Field.Store.YES=2C
> > Field.Index.UN_TOKENIZED))=3B
> >
> > // Add 2 values to Field2.
> > doc.Add (new Field ("Field2"=2C "C"=2C Field.Store.YES=2C
> > Field.Index.UN_TOKENIZED))=3B
> > doc.Add (new Field ("Field2"=2C "D"=2C Field.Store.YES=2C
> > Field.Index.UN_TOKENIZED))=3B
> >
> > I'd like to get a hit if I do:
> >    Field1:A AND Field2:C
> > This is fine because that's how Lucene works.  However=2C I do not want=
 to
> > get a hit if I do:
> >    Field1:A AND Field2:D
> > The reason that I don't want a hit is because A is the first element in
> > Field1 and D is the second element in Field2.  I only want a hit when b=
oth
> > values are at the same array index.  Is there a way to do this? Thank y=
ou in
> > advance for your help.
> >
> > _________________________________________________________________
> > Windows Live=99: E-mail. Chat. Share. Get more ways to connect.
> > http://windowslive.com/explore?ocid=3DTXT_TAGLM_WL_t2_allup_explore_022=
009

_________________________________________________________________
Windows Live=99: Keep your life in sync.=20
http://windowslive.com/explore?ocid=3DTXT_TAGLM_WL_t1_allup_explore_022009=

--_78387886-766b-4723-9b3d-f5878621f8f3_--

From java-user-return-38493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 01:32:15 2009
Return-Path: <java-user-return-38493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69711 invoked from network); 13 Feb 2009 01:32:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 01:32:15 -0000
Received: (qmail 34698 invoked by uid 500); 13 Feb 2009 01:32:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34664 invoked by uid 500); 13 Feb 2009 01:32:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34653 invoked by uid 99); 13 Feb 2009 01:32:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Feb 2009 17:32:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 01:31:58 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 25AE771C5FF; Thu, 12 Feb 2009 17:31:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B2FB071C49A
	for <java-user@lucene.apache.org>; Thu, 12 Feb 2009 17:31:37 -0800 (PST)
Date: Thu, 12 Feb 2009 17:31:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: term frequency normalization
In-Reply-To: <200902031426.29029.jw@solute.de>
Message-ID: <Pine.LNX.4.64.0902121726530.2158@radix.cryptio.net>
References: <200902031426.29029.jw@solute.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The easiest way to change the tf calculation would be overwriting
: tf in an own implementation of Similarity like it's done in
: SweetSpotSimilarity. But the average term frequency of the
: document is missing. Is there a simple way to get or calc this
: number?

there was quite a bit of discussion about this in the archive ... the 
short answer is no: Lucene doesn't store that stat.  the long answer is 
that you could compute that stat, either while indexing your documents and 
saving it somewhere your Similarity class knows to look for it, or by 
walking all fo the TermFreqVectors when opening an index reader, and then 
set that property on your CustomSimilarity instance before executing any 
searches.  

the hope is that in the future "Flexible indexing" (which i only vaguely 
understand) will make it easier to record/manage stats like this while 
indexing and have Lucene keep track of them for you as part of hte index 
itself.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 08:05:44 2009
Return-Path: <java-user-return-38494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26677 invoked from network); 13 Feb 2009 08:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 08:05:44 -0000
Received: (qmail 13083 invoked by uid 500); 13 Feb 2009 08:05:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13056 invoked by uid 500); 13 Feb 2009 08:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13045 invoked by uid 99); 13 Feb 2009 08:05:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 00:05:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dfader@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 08:05:28 +0000
Received: by bwz11 with SMTP id 11so1580508bwz.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 00:05:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=29pBk3Z26ZeouO4oEyUSPoGu7A4YKRA1Djurx1kx4JE=;
        b=PIF1pV3u2N8cRHO/lA7R5xWOSbglizkNcw9qZY+aaOjFRE7JS3nTzSMLql78aAVs0b
         8ahD+/VCFzkTA6JA4Q5NZHnGGPktsi66QSOsx9GWnCS0eN2127pF3vVuGVDuxgeDi24f
         yYz6ehtb2ePq71zTlTRDoa5PLNY8b7buSiTZw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=QRIpnwCuMshTULqo0l1i7thQYOeysi2XmIeAU86V7ot2xAxllURk8hza4HpyCLETTE
         wiXHVyzHROdAdYuBEypLcyQP4E9gfR2Ehdg/ElcLjaZSW6qJ5klc2xfRCqXymFEzYEAA
         M4F7lJR5U/QeCgMQQFjqCcsmvAhJx8B30ZsYM=
Received: by 10.223.118.15 with SMTP id t15mr2354164faq.85.1234512307364;
        Fri, 13 Feb 2009 00:05:07 -0800 (PST)
Received: from ?192.168.41.154? ([213.197.196.190])
        by mx.google.com with ESMTPS id a1sm22920544ugf.14.2009.02.13.00.05.06
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 13 Feb 2009 00:05:06 -0800 (PST)
Message-ID: <499529D4.2040101@gmail.com>
Date: Fri, 13 Feb 2009 09:05:40 +0100
From: d-fader <dfader@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Partial / starts with searching
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've actually posted this message in de dev mailing list earlier,
because I though my 'issue' is a limitation of the functionality of
Lucene, but they redirected me to this mailinglist, so I hope one of you
guys can help me out :)

Maybe the 'issue' I'm addressing now is discussed thouroughly already,
in that case I think I need some redirection to the sources of those
discussions :) Anyway, here's the thing.
For all I know it's impossible to search partial words with Lucene
(except the asterix method with e.g. the StandardAnalyzer -> ambul* to
find ambulance). My problem with that method is that my index consists
of quite a few terms. This means that if a user would search for 'ambu
amster' (ambulance amsterdam), there will be so many terms to search,
the waiting time is just inacceptable. Now I started thinking why it's
impossible to search only a 'part' of a term or even only the 'start' of
a term and the only reason I could think of was that the Index terms are
stored tokenized (in that way you (of course) can't find partial terms,
since the index doesn't actually contain the literal terms, but tokens
instead). But Lucene can also store all terms untokenized, so in that
case, in my humble opinion, a partial search would be possible, since
all terms would be stored 'literally'.

Maybe my thinking is wrong, I only have a black box view of Lucene, so I
don't know much about indexing algorithm and all, but I just want to
know if this could be done or else why not :) You see, the users of my
index want to know why they can't search parts of the words they enter
and I still can't give them a really good answer, except the 'it would
result in too many OR operators in the query' statement :) . I've tried
using a Dutch stemmer (most of the data I'm indexing is Dutch) but that
didn't work out quite good. Furthermore users sometimes search for a
certain 'filename' and mostly they just enter a part of the name and
thus don't find anything.

I hope someone can enlighten me :) Thanks in advance!

Jori

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 08:40:16 2009
Return-Path: <java-user-return-38495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41313 invoked from network); 13 Feb 2009 08:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 08:40:16 -0000
Received: (qmail 43723 invoked by uid 500); 13 Feb 2009 08:40:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43691 invoked by uid 500); 13 Feb 2009 08:40:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43679 invoked by uid 99); 13 Feb 2009 08:40:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 00:40:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.219.15 as permitted sender)
Received: from [209.85.219.15] (HELO mail-ew0-f15.google.com) (209.85.219.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 08:39:59 +0000
Received: by ewy8 with SMTP id 8so859064ewy.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 00:39:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=qD8a5MyeaZO5JXaBz1e0bx+7WP7U56WphD+0kqjY0Vo=;
        b=tWB/pA6CiRiNRRaruLxIvX0elSLVM73A180Iqn16phJ014O6HUXy46CDN04D/eESvP
         vu1GTYvwk6Ud+IhBDgyRkzJyJ7yZswodzK6eOiS7GcH2ek9qGIrARsBqvYxxHyMqFTsR
         J2VCoA8zJ6LCy3V2IYDUc0ILjlIz5nRfh3g0o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=pIvs3Pcum9uNnI7oXPlOqxOK/0wxVgzqqRLe4aERE0oCrMCLl0bMDuqvI/e2r9TUCK
         sFSAR6GLu1rq0J+4gg8cwI0tX0kBaDxBcmiafC68DVvU2/cGYzp0ZNaZVOBvUzprERz1
         S0HenVeR7FK8GC91eW/f95ZSlpr9ehmwTabgA=
Received: by 10.210.21.6 with SMTP id 6mr1306156ebu.144.1234514379441;
        Fri, 13 Feb 2009 00:39:39 -0800 (PST)
Received: from ?192.168.1.201? (c-cc8770d5.029-18-6d6c6d2.cust.bredbandsbolaget.se [213.112.135.204])
        by mx.google.com with ESMTPS id f8sm1360990nfh.2.2009.02.13.00.39.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 13 Feb 2009 00:39:38 -0800 (PST)
Message-Id: <6B73A2E5-0464-40C5-AAD6-0CB781230D0E@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <499529D4.2040101@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Partial / starts with searching
Date: Fri, 13 Feb 2009 09:39:34 +0100
References: <499529D4.2040101@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi again Jori,

did you try N-grams as suggested in the reply on -dev?


      karl

13 feb 2009 kl. 09.05 skrev d-fader:

> Hi,
>
> I've actually posted this message in de dev mailing list earlier,
> because I though my 'issue' is a limitation of the functionality of
> Lucene, but they redirected me to this mailinglist, so I hope one of  
> you
> guys can help me out :)
>
> Maybe the 'issue' I'm addressing now is discussed thouroughly already,
> in that case I think I need some redirection to the sources of those
> discussions :) Anyway, here's the thing.
> For all I know it's impossible to search partial words with Lucene
> (except the asterix method with e.g. the StandardAnalyzer -> ambul* to
> find ambulance). My problem with that method is that my index consists
> of quite a few terms. This means that if a user would search for 'ambu
> amster' (ambulance amsterdam), there will be so many terms to search,
> the waiting time is just inacceptable. Now I started thinking why it's
> impossible to search only a 'part' of a term or even only the  
> 'start' of
> a term and the only reason I could think of was that the Index terms  
> are
> stored tokenized (in that way you (of course) can't find partial  
> terms,
> since the index doesn't actually contain the literal terms, but tokens
> instead). But Lucene can also store all terms untokenized, so in that
> case, in my humble opinion, a partial search would be possible, since
> all terms would be stored 'literally'.
>
> Maybe my thinking is wrong, I only have a black box view of Lucene,  
> so I
> don't know much about indexing algorithm and all, but I just want to
> know if this could be done or else why not :) You see, the users of my
> index want to know why they can't search parts of the words they enter
> and I still can't give them a really good answer, except the 'it would
> result in too many OR operators in the query' statement :) . I've  
> tried
> using a Dutch stemmer (most of the data I'm indexing is Dutch) but  
> that
> didn't work out quite good. Furthermore users sometimes search for a
> certain 'filename' and mostly they just enter a part of the name and
> thus don't find anything.
>
> I hope someone can enlighten me :) Thanks in advance!
>
> Jori
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 09:43:28 2009
Return-Path: <java-user-return-38496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67439 invoked from network); 13 Feb 2009 09:43:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 09:43:28 -0000
Received: (qmail 25504 invoked by uid 500); 13 Feb 2009 09:43:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25473 invoked by uid 500); 13 Feb 2009 09:43:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25462 invoked by uid 99); 13 Feb 2009 09:43:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 01:43:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dfader@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 09:43:13 +0000
Received: by bwz11 with SMTP id 11so1634734bwz.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 01:42:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=MM0zAowusRxh0k1In8ufUtWKFgr5MCzcyZDObEzYH7Y=;
        b=v3bOUCsLg3GyaUipUX2idvdtWSR7tGRM5Hi0EmOrYXfbgSajR70KzhQ6s2r01z9qjq
         ob0D2TrEsf8I6OehB2z9eEkzkT3Q0HDD4rPtH/MhRepq4y+t1MjoPcf4Lo9NZME/dkNo
         POD0nweA/DaB6BCSaq7H5YJoy0pX1e5jnSkwo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=maYPy8H9T8SzYobaNiYnltTyXWIXsa16d3TsKV4Ijijy58uN7w+VMCUWnDIZ2Iaqqy
         S/1JftXSzYdzXw2dfHzrAjhVJglonU1WZnzS57BVDGFyTnrh6CS/LdIetWHT1vocm2Ua
         y67LzLMJDvg591bs963J0gaoFM8EuF0VuJuug=
Received: by 10.223.117.1 with SMTP id o1mr2486228faq.96.1234518171812;
        Fri, 13 Feb 2009 01:42:51 -0800 (PST)
Received: from ?192.168.41.154? ([213.197.196.190])
        by mx.google.com with ESMTPS id 39sm13134331ugb.13.2009.02.13.01.42.50
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 13 Feb 2009 01:42:51 -0800 (PST)
Message-ID: <499540BB.2030606@gmail.com>
Date: Fri, 13 Feb 2009 10:43:23 +0100
From: d-fader <dfader@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Partial / starts with searching
References: <499529D4.2040101@gmail.com> <6B73A2E5-0464-40C5-AAD6-0CB781230D0E@gmail.com>
In-Reply-To: <6B73A2E5-0464-40C5-AAD6-0CB781230D0E@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Karl,

As a matter of fact I more or less did. I'm not really into NGrams, but 
I read some articles about this technique and I eventually ended up at 
the 'Did you mean: Lucene?' article written by Tom White. To make a long 
story short, this solved my problem partially. I do have 2 indexes now 
and I've written code to extract all terms a user entered, put them 
through the suggestion engine and tries to be clever about what 
suggestion should be used. It includes that stop words are ignored, when 
the entered term exists for more than x times in the index already it's 
probably good (and thus a suggestion is not needed) and when there are 
suggestions available, the suggestion with the most occurences in the 
index is presented. After that the original query is being built up 
again, preserving all command codes (like ", ( ), AND, OR, etc. etc.).
As said, this system works pretty well and mostly if there's a 
suggestion available, it's actually quite accurate, so thanks for this.

Still, it doesn't solve my problem fully. But I think I now know why 
Lucene can't search 'truely' partially. To find a document fast, all 
terms are stored with a list of documents which contain the term and 
when a user searches, Lucene can identify the documents by comparing the 
terms entered to the terms on that list, right? If so, it's 
understandable that a true partial search never will work, but then I 
just don't understand how Google manages to do this :)

Jori.




Karl Wettin wrote:
> Hi again Jori,
>
> did you try N-grams as suggested in the reply on -dev?
>
>
>      karl
>
> 13 feb 2009 kl. 09.05 skrev d-fader:
>
>> Hi,
>>
>> I've actually posted this message in de dev mailing list earlier,
>> because I though my 'issue' is a limitation of the functionality of
>> Lucene, but they redirected me to this mailinglist, so I hope one of you
>> guys can help me out :)
>>
>> Maybe the 'issue' I'm addressing now is discussed thouroughly already,
>> in that case I think I need some redirection to the sources of those
>> discussions :) Anyway, here's the thing.
>> For all I know it's impossible to search partial words with Lucene
>> (except the asterix method with e.g. the StandardAnalyzer -> ambul* to
>> find ambulance). My problem with that method is that my index consists
>> of quite a few terms. This means that if a user would search for 'ambu
>> amster' (ambulance amsterdam), there will be so many terms to search,
>> the waiting time is just inacceptable. Now I started thinking why it's
>> impossible to search only a 'part' of a term or even only the 'start' of
>> a term and the only reason I could think of was that the Index terms are
>> stored tokenized (in that way you (of course) can't find partial terms,
>> since the index doesn't actually contain the literal terms, but tokens
>> instead). But Lucene can also store all terms untokenized, so in that
>> case, in my humble opinion, a partial search would be possible, since
>> all terms would be stored 'literally'.
>>
>> Maybe my thinking is wrong, I only have a black box view of Lucene, so I
>> don't know much about indexing algorithm and all, but I just want to
>> know if this could be done or else why not :) You see, the users of my
>> index want to know why they can't search parts of the words they enter
>> and I still can't give them a really good answer, except the 'it would
>> result in too many OR operators in the query' statement :) . I've tried
>> using a Dutch stemmer (most of the data I'm indexing is Dutch) but that
>> didn't work out quite good. Furthermore users sometimes search for a
>> certain 'filename' and mostly they just enter a part of the name and
>> thus don't find anything.
>>
>> I hope someone can enlighten me :) Thanks in advance!
>>
>> Jori
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 09:52:49 2009
Return-Path: <java-user-return-38497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73266 invoked from network); 13 Feb 2009 09:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 09:52:48 -0000
Received: (qmail 41812 invoked by uid 500); 13 Feb 2009 09:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41774 invoked by uid 500); 13 Feb 2009 09:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41763 invoked by uid 99); 13 Feb 2009 09:52:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 01:52:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.219.15 as permitted sender)
Received: from [209.85.219.15] (HELO mail-ew0-f15.google.com) (209.85.219.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 09:52:31 +0000
Received: by ewy8 with SMTP id 8so880960ewy.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 01:52:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=x1pyq5bYWFYXY6Kpi+sWbMh3zJUWuJhEQLhnRD4KItg=;
        b=S90kOGEQHoRhq/uuxnihPyWA3wLK+OhDN4tWwBXfqaXvvj5AqKlw64N4yJRfItYVuh
         0XafVBlMho5+ZGKnvMNa1qeQIOe0ywKtMeB8+7kUJN/sUhsSlxgVvbPD5FZPdO2L3iqE
         vNppznHzOFgxzF7Di+afqu2PCdVm68ZN7WU7E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=EkfA9a5CNBfsuMTeW8hl/xHMzQwA0i35vLJLdz++1eTfHK0E0q3DdepM2L7HBtJvEx
         Qdj/6+hE64Lv4IL+mPlytZE+3/k8h6kE25Ps0SBj2h8QSno36/e39pZ+C+TySRXRFqEu
         PGvMPkxSSPQhaFH5Ln7VUQgA5eCeTLZ5uoqNE=
Received: by 10.210.133.19 with SMTP id g19mr1482778ebd.101.1234518730897;
        Fri, 13 Feb 2009 01:52:10 -0800 (PST)
Received: from ?192.168.1.201? (c-cc8770d5.029-18-6d6c6d2.cust.bredbandsbolaget.se [213.112.135.204])
        by mx.google.com with ESMTPS id 35sm1622682nfu.47.2009.02.13.01.52.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 13 Feb 2009 01:52:10 -0800 (PST)
Message-Id: <4A0ED6FA-4358-4747-BD1C-7B50228FBE09@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <499540BB.2030606@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Partial / starts with searching
Date: Fri, 13 Feb 2009 10:52:08 +0100
References: <499529D4.2040101@gmail.com> <6B73A2E5-0464-40C5-AAD6-0CB781230D0E@gmail.com> <499540BB.2030606@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

If you attach an NgramTokenFilter to your analyzer at index and query  
time you should be able to query for parts of the word.

http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/analysis/ngram/NGramTokenFilter.html
http://lucene.apache.org/java/2_4_0/api/index.html?org/apache/lucene/analysis/ngram/EdgeNGramTokenFilter.html

The classes are available in the contrib/analyzer module.

You might want to boost edges a bit more than inner parts, start  
trying out with something like 3-5 grams.

Be aware, this will produce a rather large index.


       karl

13 feb 2009 kl. 10.43 skrev d-fader:

> Karl,
>
> As a matter of fact I more or less did. I'm not really into NGrams,  
> but I read some articles about this technique and I eventually ended  
> up at the 'Did you mean: Lucene?' article written by Tom White. To  
> make a long story short, this solved my problem partially. I do have  
> 2 indexes now and I've written code to extract all terms a user  
> entered, put them through the suggestion engine and tries to be  
> clever about what suggestion should be used. It includes that stop  
> words are ignored, when the entered term exists for more than x  
> times in the index already it's probably good (and thus a suggestion  
> is not needed) and when there are suggestions available, the  
> suggestion with the most occurences in the index is presented. After  
> that the original query is being built up again, preserving all  
> command codes (like ", ( ), AND, OR, etc. etc.).
> As said, this system works pretty well and mostly if there's a  
> suggestion available, it's actually quite accurate, so thanks for  
> this.
>
> Still, it doesn't solve my problem fully. But I think I now know why  
> Lucene can't search 'truely' partially. To find a document fast, all  
> terms are stored with a list of documents which contain the term and  
> when a user searches, Lucene can identify the documents by comparing  
> the terms entered to the terms on that list, right? If so, it's  
> understandable that a true partial search never will work, but then  
> I just don't understand how Google manages to do this :)
>
> Jori.
>
>
>
>
> Karl Wettin wrote:
>> Hi again Jori,
>>
>> did you try N-grams as suggested in the reply on -dev?
>>
>>
>>     karl
>>
>> 13 feb 2009 kl. 09.05 skrev d-fader:
>>
>>> Hi,
>>>
>>> I've actually posted this message in de dev mailing list earlier,
>>> because I though my 'issue' is a limitation of the functionality of
>>> Lucene, but they redirected me to this mailinglist, so I hope one  
>>> of you
>>> guys can help me out :)
>>>
>>> Maybe the 'issue' I'm addressing now is discussed thouroughly  
>>> already,
>>> in that case I think I need some redirection to the sources of those
>>> discussions :) Anyway, here's the thing.
>>> For all I know it's impossible to search partial words with Lucene
>>> (except the asterix method with e.g. the StandardAnalyzer ->  
>>> ambul* to
>>> find ambulance). My problem with that method is that my index  
>>> consists
>>> of quite a few terms. This means that if a user would search for  
>>> 'ambu
>>> amster' (ambulance amsterdam), there will be so many terms to  
>>> search,
>>> the waiting time is just inacceptable. Now I started thinking why  
>>> it's
>>> impossible to search only a 'part' of a term or even only the  
>>> 'start' of
>>> a term and the only reason I could think of was that the Index  
>>> terms are
>>> stored tokenized (in that way you (of course) can't find partial  
>>> terms,
>>> since the index doesn't actually contain the literal terms, but  
>>> tokens
>>> instead). But Lucene can also store all terms untokenized, so in  
>>> that
>>> case, in my humble opinion, a partial search would be possible,  
>>> since
>>> all terms would be stored 'literally'.
>>>
>>> Maybe my thinking is wrong, I only have a black box view of  
>>> Lucene, so I
>>> don't know much about indexing algorithm and all, but I just want to
>>> know if this could be done or else why not :) You see, the users  
>>> of my
>>> index want to know why they can't search parts of the words they  
>>> enter
>>> and I still can't give them a really good answer, except the 'it  
>>> would
>>> result in too many OR operators in the query' statement :) . I've  
>>> tried
>>> using a Dutch stemmer (most of the data I'm indexing is Dutch) but  
>>> that
>>> didn't work out quite good. Furthermore users sometimes search for a
>>> certain 'filename' and mostly they just enter a part of the name and
>>> thus don't find anything.
>>>
>>> I hope someone can enlighten me :) Thanks in advance!
>>>
>>> Jori
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 10:31:33 2009
Return-Path: <java-user-return-38498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94543 invoked from network); 13 Feb 2009 10:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 10:31:33 -0000
Received: (qmail 80178 invoked by uid 500); 13 Feb 2009 10:31:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80146 invoked by uid 500); 13 Feb 2009 10:31:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80135 invoked by uid 99); 13 Feb 2009 10:31:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 02:31:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.50.192.7] (HELO eiger.univ-valenciennes.fr) (193.50.192.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 10:31:15 +0000
Received: from [193.50.195.115] (pcinfogest21.univ-valenciennes.fr [193.50.195.115])
	by eiger.univ-valenciennes.fr (Postfix) with ESMTP id 61A008E3B
	for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 11:30:32 +0100 (CET)
Message-ID: <49954BDE.7030304@univ-valenciennes.fr>
Date: Fri, 13 Feb 2009 11:30:54 +0100
From: Yannick Caillaux <yannick.caillaux@univ-valenciennes.fr>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Sorting by relevance and a field
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-UvhcEiger-MailScanner-Information: Please contact the ISP for more information
X-UvhcEiger-MailScanner: Found to be clean
X-UvhcEiger-MailScanner-From: yannick.caillaux@univ-valenciennes.fr
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Hi all,

Lucene sorts by decreasing relevance by default.
The SortField class is used for sorting by lucene field(s).

First I must sort by relevance, then (for the results which have the 
same relevance) I must sort by a lucene field (title for example).

I don't know how to do that. Someone can help me?

Thanks in advance

Yannick

-- 
Ce message a t vrifi par MailScanner
pour des virus ou des polluriels et rien de
suspect n'a t trouv.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 10:41:01 2009
Return-Path: <java-user-return-38499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96126 invoked from network); 13 Feb 2009 10:41:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 10:41:01 -0000
Received: (qmail 90489 invoked by uid 500); 13 Feb 2009 10:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90455 invoked by uid 500); 13 Feb 2009 10:40:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90444 invoked by uid 99); 13 Feb 2009 10:40:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 02:40:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 10:40:42 +0000
Received: by yx-out-2324.google.com with SMTP id 31so557164yxl.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 02:40:20 -0800 (PST)
Received: by 10.100.168.18 with SMTP id q18mr2606682ane.7.1234521620114;
        Fri, 13 Feb 2009 02:40:20 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c23sm1626090ana.32.2009.02.13.02.40.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 13 Feb 2009 02:40:19 -0800 (PST)
Message-Id: <67BDF2B2-BC58-44B6-90C9-110B7CB09B7F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <49954BDE.7030304@univ-valenciennes.fr>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Sorting by relevance and a field
Date: Fri, 13 Feb 2009 05:40:18 -0500
References: <49954BDE.7030304@univ-valenciennes.fr>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


SortField.FIELD_SCORE lets you sort by relevance.

So then make a Sort that contains an array of two SortFields, eg:

   new Sort(new SortField[] {SortField.FIELD_SCORE, new =20
SortField(myField)})

and pass that when searching.  Lucene will then sort first by score, =20
and when there are ties, second by myField (doing auto-detection to =20
infer that field's type; if you know the type, pass that down when you =20=

create the SortField).

Mike

Yannick Caillaux wrote:

> Hi all,
>
> Lucene sorts by decreasing relevance by default.
> The SortField class is used for sorting by lucene field(s).
>
> First I must sort by relevance, then (for the results which have the =20=

> same relevance) I must sort by a lucene field (title for example).
>
> I don't know how to do that. Someone can help me?
>
> Thanks in advance
>
> Yannick
>
> --=20
> Ce message a =E9t=E9 v=E9rifi=E9 par MailScanner
> pour des virus ou des polluriels et rien de
> suspect n'a =E9t=E9 trouv=E9.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 13:32:40 2009
Return-Path: <java-user-return-38500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43680 invoked from network); 13 Feb 2009 13:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 13:32:40 -0000
Received: (qmail 67365 invoked by uid 500); 13 Feb 2009 13:32:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67333 invoked by uid 500); 13 Feb 2009 13:32:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67321 invoked by uid 99); 13 Feb 2009 13:32:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 05:32:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FB_WORD1_END_DOLLAR,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.170 as permitted sender)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 13:32:21 +0000
Received: by gxk18 with SMTP id 18so608920gxk.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 05:32:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=1npkB/QJ68RxIPJ8omP3BTIGBTMM4gVOTtgY/38mtY8=;
        b=aPtkfltRah3lb2atttRQnPrZ1WKTJKxuTajJO0CaQi0nqQZzl50uArEELh0MEkWzKd
         V6cK4gdgw+nr/nh7QjMsZHIKYRqUxMygmvlNj6kkL/tcWBUHf01qJQzZpthEInDETeSt
         914zJ/4KvrqS0eIc/mdVWV+X8g5Y26J5hFGXU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kcs+D/cIhAm1wJkc4r3o3epx3rp1wQ7R4mJjYLO4qPyE3/LlyvL1wLClUng6xPoKPf
         YQ5YIon6z1+/p3h2l3B3klPxWvOIbi5B3Fbut0yQ+ucV4d/WGfAIh0YLcY4bgdr8SCMn
         J46SC5Aa3a+gvhLlgqtgl4z0SPlEkPrvLITBs=
MIME-Version: 1.0
Received: by 10.90.70.15 with SMTP id s15mr1199830aga.73.1234531920390; Fri, 
	13 Feb 2009 05:32:00 -0800 (PST)
In-Reply-To: <499529D4.2040101@gmail.com>
References: <499529D4.2040101@gmail.com>
Date: Fri, 13 Feb 2009 08:32:00 -0500
Message-ID: <359a92830902130532k30b0c3d0rf0f81138c1d37dd2@mail.gmail.com>
Subject: Re: Partial / starts with searching
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f0ef942b790462ccdc32
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630f0ef942b790462ccdc32
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Surprisingly, I found that constructing Filters was surprisingly fast
for partial queries, you might want to give that a spin. See the Filter
class, which is unrelated to any of the TokenFilter-derived classes <G>.


The basic idea here is to use, say, WildCardTermEnum
or RegexTermEnum (in my experience, WildcartTermEnum is faster)
to construct a bit mask for all the docs that contain your
wildcarded term, and pass that along to your query. It'll restrict
the documents returned to only docs whose corresponding bit is
on in your filter. You can get a feel for whether this is fast enough
just by constructing your filter with a bit of test code. This
technique has the downside that your wildcard terms will NOT
contribute to scoring the document though. This is not much of
a problem in my experience.

About timing: Do note that you need to measure response *after*
a few warmup queries, the first few queries incur overhead.

Another possibility, depending upon how big you can stand for
your index to be, and assuming that you're OK with restricting
wildcards to "begins with". You could index, in the same position
(see Lucene In Action, Synonym Analyzer for a discussion) several
tokens for each word. Say you are indexing the word automobile.
Index a$, au$, aut$ and automobile. Now your wildcards (remember
this is only "begins with") search for a* would translate into
a$, no wildcard involved. There are obvious space tradeoffs here,
but since I don't know how big your index is I can't speculate
on how suitable this is. And once you get out beyond, say, 4
leading characters, the number of OR clauses becomes much
smaller so auto* can probably just be submitted as a "regular"
wildcard query.

And finally, consider whether it's worth the time and effort to
match on less than three leading characters. One lesson from
the "too many clauses" exception is that the use *to the user*
of a query term like a* is pretty small. You'll have at least
one term in virtually every document. Ask your product
manager if requiring at least three leading characters is
acceptable, in which case you may not need to do anything.

"The guys" generously spent time with me a couple of years ago
on this topic, see the following for that discussion:

http://www.lucidimagination.com/search/document/65a13a1dbd7035ae/i_just_don_t_get_wildcards_at_all#65a13a1dbd7035ae

Best
Erick

On Fri, Feb 13, 2009 at 3:05 AM, d-fader <dfader@gmail.com> wrote:

> Hi,
>
> I've actually posted this message in de dev mailing list earlier,
> because I though my 'issue' is a limitation of the functionality of
> Lucene, but they redirected me to this mailinglist, so I hope one of you
> guys can help me out :)
>
> Maybe the 'issue' I'm addressing now is discussed thouroughly already,
> in that case I think I need some redirection to the sources of those
> discussions :) Anyway, here's the thing.
> For all I know it's impossible to search partial words with Lucene
> (except the asterix method with e.g. the StandardAnalyzer -> ambul* to
> find ambulance). My problem with that method is that my index consists
> of quite a few terms. This means that if a user would search for 'ambu
> amster' (ambulance amsterdam), there will be so many terms to search,
> the waiting time is just inacceptable. Now I started thinking why it's
> impossible to search only a 'part' of a term or even only the 'start' of
> a term and the only reason I could think of was that the Index terms are
> stored tokenized (in that way you (of course) can't find partial terms,
> since the index doesn't actually contain the literal terms, but tokens
> instead). But Lucene can also store all terms untokenized, so in that
> case, in my humble opinion, a partial search would be possible, since
> all terms would be stored 'literally'.
>
> Maybe my thinking is wrong, I only have a black box view of Lucene, so I
> don't know much about indexing algorithm and all, but I just want to
> know if this could be done or else why not :) You see, the users of my
> index want to know why they can't search parts of the words they enter
> and I still can't give them a really good answer, except the 'it would
> result in too many OR operators in the query' statement :) . I've tried
> using a Dutch stemmer (most of the data I'm indexing is Dutch) but that
> didn't work out quite good. Furthermore users sometimes search for a
> certain 'filename' and mostly they just enter a part of the name and
> thus don't find anything.
>
> I hope someone can enlighten me :) Thanks in advance!
>
> Jori
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163630f0ef942b790462ccdc32--

From java-user-return-38501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 13:39:48 2009
Return-Path: <java-user-return-38501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48629 invoked from network); 13 Feb 2009 13:39:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 13:39:48 -0000
Received: (qmail 80799 invoked by uid 500); 13 Feb 2009 13:39:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80588 invoked by uid 500); 13 Feb 2009 13:39:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80577 invoked by uid 99); 13 Feb 2009 13:39:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 05:39:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dfader@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 13:39:31 +0000
Received: by mu-out-0910.google.com with SMTP id w8so501432mue.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 05:39:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=tgL5d6kKvbUc6NOyepkgtYi75t+9ALxN0bEvu0VHGbk=;
        b=Hrjdxlk01rLlTH7ylouJaMeB1nJIOOjGFY29KL6P791osrTeedg7+lUyJsZpvPTHJr
         7F+sttANDfgiYsgcM7fl5wBKB5EIVVli6aWZrLY0FMnLnSLmJB+rqsHwvjyAl1otnKJX
         zuT5vEVRvQyXf3fJOjGvqLUjS/7hmNEDWFwoY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=cc/ZvDJI5MB67ukNmPRk2qkdWUIMnxcEZ6dFFWBMgbL8w5Vw+4/0/f+ybRpJeCuZVY
         hnUBWqa3964XtwSV1O1bzylWoC9vp2s6KqJdhw5tz7m+f2iZdQlWa+nBz5qgvbiib/oq
         BW02H4EhcJ0+XYdZD5wbHgQcm06YK2w4MyreE=
Received: by 10.103.119.19 with SMTP id w19mr1184003mum.80.1234532351214;
        Fri, 13 Feb 2009 05:39:11 -0800 (PST)
Received: from ?192.168.41.154? ([213.197.196.190])
        by mx.google.com with ESMTPS id e34sm23602997ugd.20.2009.02.13.05.39.10
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 13 Feb 2009 05:39:10 -0800 (PST)
Message-ID: <49957820.2080607@gmail.com>
Date: Fri, 13 Feb 2009 14:39:44 +0100
From: d-fader <dfader@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Partial / starts with searching
References: <499529D4.2040101@gmail.com> <6B73A2E5-0464-40C5-AAD6-0CB781230D0E@gmail.com> <499540BB.2030606@gmail.com> <4A0ED6FA-4358-4747-BD1C-7B50228FBE09@gmail.com>
In-Reply-To: <4A0ED6FA-4358-4747-BD1C-7B50228FBE09@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Well, it worked. I indexed a test database and it indeed grew somewhat 
(from 16 MiB to 200 MiB :)), and it works flawlessly. Still, I can't use 
the result in my application :)
The 'live' index database contains about 2 million documents and is used 
by a multi-user application. As you probably can imagine, not everyone 
may see everything, there are documents that can be seen by everyone, 
documents that can be seen by some and also documents that only can be 
seen by one person. At design time, since we used the StandardAnalyzer, 
we decided to create a field in each document in which we store the 
'login name' of each user that may see the document (2 to 4 characters 
per user, in most cases 2) and that's where the hick-up occurs. When I 
index it with the NGramTokenFilter (3-5) it doesn't seem to index 
anything with 2 letters. I checked in Luke too, if I search for 
UserInitials:(JS BD), Luke's query explanation is empty. When I search 
for UserInitials:(ABC) it seems to do the job well but I when I search 
for DEFG, the query explanation looks like UserAccessInitials:"def efg 
defg" and that is inacceptable, since there can be a user DEFG and a 
user EFG available in the system.

So I think in my case it just won't work, unless I rewrite the 'who may 
see this document' code pretty drastically, if even possible without 
losing too much 'searching' speed.

...or am I wrong?

Karl Wettin wrote:
> If you attach an NgramTokenFilter to your analyzer at index and query 
> time you should be able to query for parts of the word.
>
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/analysis/ngram/NGramTokenFilter.html 
>
> http://lucene.apache.org/java/2_4_0/api/index.html?org/apache/lucene/analysis/ngram/EdgeNGramTokenFilter.html 
>
>
> The classes are available in the contrib/analyzer module.
>
> You might want to boost edges a bit more than inner parts, start 
> trying out with something like 3-5 grams.
>
> Be aware, this will produce a rather large index.
>
>
>       karl
>
> 13 feb 2009 kl. 10.43 skrev d-fader:
>
>> Karl,
>>
>> As a matter of fact I more or less did. I'm not really into NGrams, 
>> but I read some articles about this technique and I eventually ended 
>> up at the 'Did you mean: Lucene?' article written by Tom White. To 
>> make a long story short, this solved my problem partially. I do have 
>> 2 indexes now and I've written code to extract all terms a user 
>> entered, put them through the suggestion engine and tries to be 
>> clever about what suggestion should be used. It includes that stop 
>> words are ignored, when the entered term exists for more than x times 
>> in the index already it's probably good (and thus a suggestion is not 
>> needed) and when there are suggestions available, the suggestion with 
>> the most occurences in the index is presented. After that the 
>> original query is being built up again, preserving all command codes 
>> (like ", ( ), AND, OR, etc. etc.).
>> As said, this system works pretty well and mostly if there's a 
>> suggestion available, it's actually quite accurate, so thanks for this.
>>
>> Still, it doesn't solve my problem fully. But I think I now know why 
>> Lucene can't search 'truely' partially. To find a document fast, all 
>> terms are stored with a list of documents which contain the term and 
>> when a user searches, Lucene can identify the documents by comparing 
>> the terms entered to the terms on that list, right? If so, it's 
>> understandable that a true partial search never will work, but then I 
>> just don't understand how Google manages to do this :)
>>
>> Jori.
>>
>>
>>
>>
>> Karl Wettin wrote:
>>> Hi again Jori,
>>>
>>> did you try N-grams as suggested in the reply on -dev?
>>>
>>>
>>>     karl
>>>
>>> 13 feb 2009 kl. 09.05 skrev d-fader:
>>>
>>>> Hi,
>>>>
>>>> I've actually posted this message in de dev mailing list earlier,
>>>> because I though my 'issue' is a limitation of the functionality of
>>>> Lucene, but they redirected me to this mailinglist, so I hope one 
>>>> of you
>>>> guys can help me out :)
>>>>
>>>> Maybe the 'issue' I'm addressing now is discussed thouroughly already,
>>>> in that case I think I need some redirection to the sources of those
>>>> discussions :) Anyway, here's the thing.
>>>> For all I know it's impossible to search partial words with Lucene
>>>> (except the asterix method with e.g. the StandardAnalyzer -> ambul* to
>>>> find ambulance). My problem with that method is that my index consists
>>>> of quite a few terms. This means that if a user would search for 'ambu
>>>> amster' (ambulance amsterdam), there will be so many terms to search,
>>>> the waiting time is just inacceptable. Now I started thinking why it's
>>>> impossible to search only a 'part' of a term or even only the 
>>>> 'start' of
>>>> a term and the only reason I could think of was that the Index 
>>>> terms are
>>>> stored tokenized (in that way you (of course) can't find partial 
>>>> terms,
>>>> since the index doesn't actually contain the literal terms, but tokens
>>>> instead). But Lucene can also store all terms untokenized, so in that
>>>> case, in my humble opinion, a partial search would be possible, since
>>>> all terms would be stored 'literally'.
>>>>
>>>> Maybe my thinking is wrong, I only have a black box view of Lucene, 
>>>> so I
>>>> don't know much about indexing algorithm and all, but I just want to
>>>> know if this could be done or else why not :) You see, the users of my
>>>> index want to know why they can't search parts of the words they enter
>>>> and I still can't give them a really good answer, except the 'it would
>>>> result in too many OR operators in the query' statement :) . I've 
>>>> tried
>>>> using a Dutch stemmer (most of the data I'm indexing is Dutch) but 
>>>> that
>>>> didn't work out quite good. Furthermore users sometimes search for a
>>>> certain 'filename' and mostly they just enter a part of the name and
>>>> thus don't find anything.
>>>>
>>>> I hope someone can enlighten me :) Thanks in advance!
>>>>
>>>> Jori
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 13:47:18 2009
Return-Path: <java-user-return-38502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52935 invoked from network); 13 Feb 2009 13:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 13:47:18 -0000
Received: (qmail 89681 invoked by uid 500); 13 Feb 2009 13:47:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89649 invoked by uid 500); 13 Feb 2009 13:47:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89638 invoked by uid 99); 13 Feb 2009 13:47:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 05:47:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FB_WORD1_END_DOLLAR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dfader@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 13:47:01 +0000
Received: by fxm7 with SMTP id 7so2353466fxm.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 05:46:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=EhLawRwviofPMRCilvDakhLV4V+BldDayIwNcoH7HD8=;
        b=KquhFX/ScJ7DgXDP7ldSWBnzWzZ8axq1orvQs+N8xTmueldUO+i2IpZlc9L4qiiZ5d
         d1LE4nrOUFMR7/3PR6Ct/3YgEKxBQBN3paUhq0M6PlsOS9d2tbfWFubrDBT6vwNE6ik9
         B5SIFhHYRZ7YlWB2nYDPsTCTL2ccbaf5SPwOI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=EL8qHj0uyetK93qeID0W2BT1AWxONFotuLJcgOJJoZ8ShNK0lcqfKihJrf5QZ2rPmn
         cq3AqGGQHX6ASsiXQirAnlwLvOFk6pHUXUAKOKihR2wQ4Ony4CmUu3MWhDxfj0gcuONY
         ga9eFykP9JfMT8m6t6eODsShY7kqUcvwI/+b4=
Received: by 10.103.228.19 with SMTP id f19mr1197318mur.32.1234532622060;
        Fri, 13 Feb 2009 05:43:42 -0800 (PST)
Received: from ?192.168.41.154? ([213.197.196.190])
        by mx.google.com with ESMTPS id a1sm23662218ugf.14.2009.02.13.05.43.41
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 13 Feb 2009 05:43:41 -0800 (PST)
Message-ID: <4995792F.9050309@gmail.com>
Date: Fri, 13 Feb 2009 14:44:15 +0100
From: d-fader <dfader@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Partial / starts with searching
References: <499529D4.2040101@gmail.com> <359a92830902130532k30b0c3d0rf0f81138c1d37dd2@mail.gmail.com>
In-Reply-To: <359a92830902130532k30b0c3d0rf0f81138c1d37dd2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

Thanks for your pretty 'extensive' reaction. I read it quickly and I 
have to read it more thoroughly before I can give a meaningful response, 
so I'll check-out the discussions and I'll try to apply your idea's and 
then I'll post my findings.
Can take a while though, I'm pretty busy actually :)

Thanks so far.



Erick Erickson wrote:
> Surprisingly, I found that constructing Filters was surprisingly fast
> for partial queries, you might want to give that a spin. See the Filter
> class, which is unrelated to any of the TokenFilter-derived classes <G>.
>
>
> The basic idea here is to use, say, WildCardTermEnum
> or RegexTermEnum (in my experience, WildcartTermEnum is faster)
> to construct a bit mask for all the docs that contain your
> wildcarded term, and pass that along to your query. It'll restrict
> the documents returned to only docs whose corresponding bit is
> on in your filter. You can get a feel for whether this is fast enough
> just by constructing your filter with a bit of test code. This
> technique has the downside that your wildcard terms will NOT
> contribute to scoring the document though. This is not much of
> a problem in my experience.
>
> About timing: Do note that you need to measure response *after*
> a few warmup queries, the first few queries incur overhead.
>
> Another possibility, depending upon how big you can stand for
> your index to be, and assuming that you're OK with restricting
> wildcards to "begins with". You could index, in the same position
> (see Lucene In Action, Synonym Analyzer for a discussion) several
> tokens for each word. Say you are indexing the word automobile.
> Index a$, au$, aut$ and automobile. Now your wildcards (remember
> this is only "begins with") search for a* would translate into
> a$, no wildcard involved. There are obvious space tradeoffs here,
> but since I don't know how big your index is I can't speculate
> on how suitable this is. And once you get out beyond, say, 4
> leading characters, the number of OR clauses becomes much
> smaller so auto* can probably just be submitted as a "regular"
> wildcard query.
>
> And finally, consider whether it's worth the time and effort to
> match on less than three leading characters. One lesson from
> the "too many clauses" exception is that the use *to the user*
> of a query term like a* is pretty small. You'll have at least
> one term in virtually every document. Ask your product
> manager if requiring at least three leading characters is
> acceptable, in which case you may not need to do anything.
>
> "The guys" generously spent time with me a couple of years ago
> on this topic, see the following for that discussion:
>
> http://www.lucidimagination.com/search/document/65a13a1dbd7035ae/i_just_don_t_get_wildcards_at_all#65a13a1dbd7035ae
>
> Best
> Erick
>
> On Fri, Feb 13, 2009 at 3:05 AM, d-fader <dfader@gmail.com> wrote:
>
>   
>> Hi,
>>
>> I've actually posted this message in de dev mailing list earlier,
>> because I though my 'issue' is a limitation of the functionality of
>> Lucene, but they redirected me to this mailinglist, so I hope one of you
>> guys can help me out :)
>>
>> Maybe the 'issue' I'm addressing now is discussed thouroughly already,
>> in that case I think I need some redirection to the sources of those
>> discussions :) Anyway, here's the thing.
>> For all I know it's impossible to search partial words with Lucene
>> (except the asterix method with e.g. the StandardAnalyzer -> ambul* to
>> find ambulance). My problem with that method is that my index consists
>> of quite a few terms. This means that if a user would search for 'ambu
>> amster' (ambulance amsterdam), there will be so many terms to search,
>> the waiting time is just inacceptable. Now I started thinking why it's
>> impossible to search only a 'part' of a term or even only the 'start' of
>> a term and the only reason I could think of was that the Index terms are
>> stored tokenized (in that way you (of course) can't find partial terms,
>> since the index doesn't actually contain the literal terms, but tokens
>> instead). But Lucene can also store all terms untokenized, so in that
>> case, in my humble opinion, a partial search would be possible, since
>> all terms would be stored 'literally'.
>>
>> Maybe my thinking is wrong, I only have a black box view of Lucene, so I
>> don't know much about indexing algorithm and all, but I just want to
>> know if this could be done or else why not :) You see, the users of my
>> index want to know why they can't search parts of the words they enter
>> and I still can't give them a really good answer, except the 'it would
>> result in too many OR operators in the query' statement :) . I've tried
>> using a Dutch stemmer (most of the data I'm indexing is Dutch) but that
>> didn't work out quite good. Furthermore users sometimes search for a
>> certain 'filename' and mostly they just enter a part of the name and
>> thus don't find anything.
>>
>> I hope someone can enlighten me :) Thanks in advance!
>>
>> Jori
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 13:49:25 2009
Return-Path: <java-user-return-38503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53651 invoked from network); 13 Feb 2009 13:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 13:49:25 -0000
Received: (qmail 94162 invoked by uid 500); 13 Feb 2009 13:49:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94129 invoked by uid 500); 13 Feb 2009 13:49:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94118 invoked by uid 99); 13 Feb 2009 13:49:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 05:49:16 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 13:49:09 +0000
Received: by yx-out-2324.google.com with SMTP id 31so578023yxl.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 05:48:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=vq8wfNSOZCPSbnLL53gzI4ri3NJQz74Po3N0Ny4UTVw=;
        b=CnIH7BzXwx6EztCLKfXlIB/dIIAvV6xCL/N2S3Xn7pgVw/sfdBWOHrv7hR667VRUFg
         Aar0adu3ONZ7XxGJsYFIe94/BNl1CCO6gKIgOTJXhPUrfgsj9bARedBIMzh4/BW6AaWL
         gZvTL0Q8EsvW2lEyuq6aZq6URrUTr8wM8KqYs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=w3FWij42Cmzets5ImG50ZBHJ2y0+S0EpuKCGN2QMNmQlvI4uPulfPwr0bSuXIAqWKH
         suyInUPksCQ1hfjpfUhBblxq8UVU36Wr3x9mUFaNlYMojISO3gEHhMzH7JdaGMNRVJq9
         62EoRfMtj9IrpdE6CBChISiMgvUFZN85ckvXY=
MIME-Version: 1.0
Received: by 10.90.106.3 with SMTP id e3mr1214966agc.53.1234532928781; Fri, 13 
	Feb 2009 05:48:48 -0800 (PST)
In-Reply-To: <49957820.2080607@gmail.com>
References: <499529D4.2040101@gmail.com>
	 <6B73A2E5-0464-40C5-AAD6-0CB781230D0E@gmail.com>
	 <499540BB.2030606@gmail.com>
	 <4A0ED6FA-4358-4747-BD1C-7B50228FBE09@gmail.com>
	 <49957820.2080607@gmail.com>
Date: Fri, 13 Feb 2009 08:48:48 -0500
Message-ID: <359a92830902130548of053c89hff66488d48addfd@mail.gmail.com>
Subject: Re: Partial / starts with searching
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163616448daefff50462cd186b
X-Virus-Checked: Checked by ClamAV on apache.org

--00163616448daefff50462cd186b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

*really* think about using Filters here for the user permissions.
I think you'd be surprised how quickly you could construct one,
and depending upon how many users you have you might be able
to get some benefit from CachingWrapperFilter.

And ignore my entire diatribe about whether you can restrict
your wildcards to 3 or more characters, that approach doesn't
fit your problem space at all....

Best
Erick

On Fri, Feb 13, 2009 at 8:39 AM, d-fader <dfader@gmail.com> wrote:

> Well, it worked. I indexed a test database and it indeed grew somewhat
> (from 16 MiB to 200 MiB :)), and it works flawlessly. Still, I can't use the
> result in my application :)
> The 'live' index database contains about 2 million documents and is used by
> a multi-user application. As you probably can imagine, not everyone may see
> everything, there are documents that can be seen by everyone, documents that
> can be seen by some and also documents that only can be seen by one person.
> At design time, since we used the StandardAnalyzer, we decided to create a
> field in each document in which we store the 'login name' of each user that
> may see the document (2 to 4 characters per user, in most cases 2) and
> that's where the hick-up occurs. When I index it with the NGramTokenFilter
> (3-5) it doesn't seem to index anything with 2 letters. I checked in Luke
> too, if I search for UserInitials:(JS BD), Luke's query explanation is
> empty. When I search for UserInitials:(ABC) it seems to do the job well but
> I when I search for DEFG, the query explanation looks like
> UserAccessInitials:"def efg defg" and that is inacceptable, since there can
> be a user DEFG and a user EFG available in the system.
>
> So I think in my case it just won't work, unless I rewrite the 'who may see
> this document' code pretty drastically, if even possible without losing too
> much 'searching' speed.
>
> ...or am I wrong?
>
>
> Karl Wettin wrote:
>
>> If you attach an NgramTokenFilter to your analyzer at index and query time
>> you should be able to query for parts of the word.
>>
>>
>> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/analysis/ngram/NGramTokenFilter.html
>>
>> http://lucene.apache.org/java/2_4_0/api/index.html?org/apache/lucene/analysis/ngram/EdgeNGramTokenFilter.html
>>
>> The classes are available in the contrib/analyzer module.
>>
>> You might want to boost edges a bit more than inner parts, start trying
>> out with something like 3-5 grams.
>>
>> Be aware, this will produce a rather large index.
>>
>>
>>      karl
>>
>> 13 feb 2009 kl. 10.43 skrev d-fader:
>>
>>  Karl,
>>>
>>> As a matter of fact I more or less did. I'm not really into NGrams, but I
>>> read some articles about this technique and I eventually ended up at the
>>> 'Did you mean: Lucene?' article written by Tom White. To make a long story
>>> short, this solved my problem partially. I do have 2 indexes now and I've
>>> written code to extract all terms a user entered, put them through the
>>> suggestion engine and tries to be clever about what suggestion should be
>>> used. It includes that stop words are ignored, when the entered term exists
>>> for more than x times in the index already it's probably good (and thus a
>>> suggestion is not needed) and when there are suggestions available, the
>>> suggestion with the most occurences in the index is presented. After that
>>> the original query is being built up again, preserving all command codes
>>> (like ", ( ), AND, OR, etc. etc.).
>>> As said, this system works pretty well and mostly if there's a suggestion
>>> available, it's actually quite accurate, so thanks for this.
>>>
>>> Still, it doesn't solve my problem fully. But I think I now know why
>>> Lucene can't search 'truely' partially. To find a document fast, all terms
>>> are stored with a list of documents which contain the term and when a user
>>> searches, Lucene can identify the documents by comparing the terms entered
>>> to the terms on that list, right? If so, it's understandable that a true
>>> partial search never will work, but then I just don't understand how Google
>>> manages to do this :)
>>>
>>> Jori.
>>>
>>>
>>>
>>>
>>> Karl Wettin wrote:
>>>
>>>> Hi again Jori,
>>>>
>>>> did you try N-grams as suggested in the reply on -dev?
>>>>
>>>>
>>>>    karl
>>>>
>>>> 13 feb 2009 kl. 09.05 skrev d-fader:
>>>>
>>>>  Hi,
>>>>>
>>>>> I've actually posted this message in de dev mailing list earlier,
>>>>> because I though my 'issue' is a limitation of the functionality of
>>>>> Lucene, but they redirected me to this mailinglist, so I hope one of
>>>>> you
>>>>> guys can help me out :)
>>>>>
>>>>> Maybe the 'issue' I'm addressing now is discussed thouroughly already,
>>>>> in that case I think I need some redirection to the sources of those
>>>>> discussions :) Anyway, here's the thing.
>>>>> For all I know it's impossible to search partial words with Lucene
>>>>> (except the asterix method with e.g. the StandardAnalyzer -> ambul* to
>>>>> find ambulance). My problem with that method is that my index consists
>>>>> of quite a few terms. This means that if a user would search for 'ambu
>>>>> amster' (ambulance amsterdam), there will be so many terms to search,
>>>>> the waiting time is just inacceptable. Now I started thinking why it's
>>>>> impossible to search only a 'part' of a term or even only the 'start'
>>>>> of
>>>>> a term and the only reason I could think of was that the Index terms
>>>>> are
>>>>> stored tokenized (in that way you (of course) can't find partial terms,
>>>>> since the index doesn't actually contain the literal terms, but tokens
>>>>> instead). But Lucene can also store all terms untokenized, so in that
>>>>> case, in my humble opinion, a partial search would be possible, since
>>>>> all terms would be stored 'literally'.
>>>>>
>>>>> Maybe my thinking is wrong, I only have a black box view of Lucene, so
>>>>> I
>>>>> don't know much about indexing algorithm and all, but I just want to
>>>>> know if this could be done or else why not :) You see, the users of my
>>>>> index want to know why they can't search parts of the words they enter
>>>>> and I still can't give them a really good answer, except the 'it would
>>>>> result in too many OR operators in the query' statement :) . I've tried
>>>>> using a Dutch stemmer (most of the data I'm indexing is Dutch) but that
>>>>> didn't work out quite good. Furthermore users sometimes search for a
>>>>> certain 'filename' and mostly they just enter a part of the name and
>>>>> thus don't find anything.
>>>>>
>>>>> I hope someone can enlighten me :) Thanks in advance!
>>>>>
>>>>> Jori
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163616448daefff50462cd186b--

From java-user-return-38504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 13:55:17 2009
Return-Path: <java-user-return-38504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56769 invoked from network); 13 Feb 2009 13:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 13:55:17 -0000
Received: (qmail 5152 invoked by uid 500); 13 Feb 2009 13:55:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4594 invoked by uid 500); 13 Feb 2009 13:55:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4583 invoked by uid 99); 13 Feb 2009 13:55:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 05:55:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dfader@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 13:55:01 +0000
Received: by fxm7 with SMTP id 7so2359423fxm.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 05:54:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=+1iurcq2HK26HVT2hroZgB2IIBXZxICUuvPP2p2ZyDs=;
        b=OPN2IwgMStagCrxlSMEoYYPJvwIKAxf4Fl3U5236+nlTenofxobora4O9RaAXQu0yM
         HijjqwJDzhyb4jbTZAVTNlf4AVFywKtt/MqNOVTicCFXYJgpynLFxr2My1MXgfChV7Fu
         zhks7PO+VoTHP95YsdFCdtcNKwgqKcm5tGijI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=dnouEcl6/1N/5gWeS7AemDUODTYaoCebbwJQ29CYR7QPPSQqN3ZXvALuIiLFNw8Djk
         iQfNjoZamdCFzjjgycraLEFVp2ruLnlIUwslWmGCVHaSd975j89lWb+EIKp7LacNIiu8
         9TCd5xCd48Ydc26IxmZX8dA3xxu2NSaDTrPsg=
Received: by 10.103.5.14 with SMTP id h14mr1189127mui.108.1234533126822;
        Fri, 13 Feb 2009 05:52:06 -0800 (PST)
Received: from ?192.168.41.154? ([213.197.196.190])
        by mx.google.com with ESMTPS id s8sm13362487uge.40.2009.02.13.05.52.05
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 13 Feb 2009 05:52:05 -0800 (PST)
Message-ID: <49957B27.30307@gmail.com>
Date: Fri, 13 Feb 2009 14:52:39 +0100
From: d-fader <dfader@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Partial / starts with searching
References: <499529D4.2040101@gmail.com>	 <6B73A2E5-0464-40C5-AAD6-0CB781230D0E@gmail.com>	 <499540BB.2030606@gmail.com>	 <4A0ED6FA-4358-4747-BD1C-7B50228FBE09@gmail.com>	 <49957820.2080607@gmail.com> <359a92830902130548of053c89hff66488d48addfd@mail.gmail.com>
In-Reply-To: <359a92830902130548of053c89hff66488d48addfd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, I will. It might take a while, but I'll post my findings.

Erick Erickson wrote:
> *really* think about using Filters here for the user permissions.
> I think you'd be surprised how quickly you could construct one,
> and depending upon how many users you have you might be able
> to get some benefit from CachingWrapperFilter.
>
> And ignore my entire diatribe about whether you can restrict
> your wildcards to 3 or more characters, that approach doesn't
> fit your problem space at all....
>
> Best
> Erick
>
> On Fri, Feb 13, 2009 at 8:39 AM, d-fader <dfader@gmail.com> wrote:
>
>   
>> Well, it worked. I indexed a test database and it indeed grew somewhat
>> (from 16 MiB to 200 MiB :)), and it works flawlessly. Still, I can't use the
>> result in my application :)
>> The 'live' index database contains about 2 million documents and is used by
>> a multi-user application. As you probably can imagine, not everyone may see
>> everything, there are documents that can be seen by everyone, documents that
>> can be seen by some and also documents that only can be seen by one person.
>> At design time, since we used the StandardAnalyzer, we decided to create a
>> field in each document in which we store the 'login name' of each user that
>> may see the document (2 to 4 characters per user, in most cases 2) and
>> that's where the hick-up occurs. When I index it with the NGramTokenFilter
>> (3-5) it doesn't seem to index anything with 2 letters. I checked in Luke
>> too, if I search for UserInitials:(JS BD), Luke's query explanation is
>> empty. When I search for UserInitials:(ABC) it seems to do the job well but
>> I when I search for DEFG, the query explanation looks like
>> UserAccessInitials:"def efg defg" and that is inacceptable, since there can
>> be a user DEFG and a user EFG available in the system.
>>
>> So I think in my case it just won't work, unless I rewrite the 'who may see
>> this document' code pretty drastically, if even possible without losing too
>> much 'searching' speed.
>>
>> ...or am I wrong?
>>
>>
>> Karl Wettin wrote:
>>
>>     
>>> If you attach an NgramTokenFilter to your analyzer at index and query time
>>> you should be able to query for parts of the word.
>>>
>>>
>>> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/analysis/ngram/NGramTokenFilter.html
>>>
>>> http://lucene.apache.org/java/2_4_0/api/index.html?org/apache/lucene/analysis/ngram/EdgeNGramTokenFilter.html
>>>
>>> The classes are available in the contrib/analyzer module.
>>>
>>> You might want to boost edges a bit more than inner parts, start trying
>>> out with something like 3-5 grams.
>>>
>>> Be aware, this will produce a rather large index.
>>>
>>>
>>>      karl
>>>
>>> 13 feb 2009 kl. 10.43 skrev d-fader:
>>>
>>>  Karl,
>>>       
>>>> As a matter of fact I more or less did. I'm not really into NGrams, but I
>>>> read some articles about this technique and I eventually ended up at the
>>>> 'Did you mean: Lucene?' article written by Tom White. To make a long story
>>>> short, this solved my problem partially. I do have 2 indexes now and I've
>>>> written code to extract all terms a user entered, put them through the
>>>> suggestion engine and tries to be clever about what suggestion should be
>>>> used. It includes that stop words are ignored, when the entered term exists
>>>> for more than x times in the index already it's probably good (and thus a
>>>> suggestion is not needed) and when there are suggestions available, the
>>>> suggestion with the most occurences in the index is presented. After that
>>>> the original query is being built up again, preserving all command codes
>>>> (like ", ( ), AND, OR, etc. etc.).
>>>> As said, this system works pretty well and mostly if there's a suggestion
>>>> available, it's actually quite accurate, so thanks for this.
>>>>
>>>> Still, it doesn't solve my problem fully. But I think I now know why
>>>> Lucene can't search 'truely' partially. To find a document fast, all terms
>>>> are stored with a list of documents which contain the term and when a user
>>>> searches, Lucene can identify the documents by comparing the terms entered
>>>> to the terms on that list, right? If so, it's understandable that a true
>>>> partial search never will work, but then I just don't understand how Google
>>>> manages to do this :)
>>>>
>>>> Jori.
>>>>
>>>>
>>>>
>>>>
>>>> Karl Wettin wrote:
>>>>
>>>>         
>>>>> Hi again Jori,
>>>>>
>>>>> did you try N-grams as suggested in the reply on -dev?
>>>>>
>>>>>
>>>>>    karl
>>>>>
>>>>> 13 feb 2009 kl. 09.05 skrev d-fader:
>>>>>
>>>>>  Hi,
>>>>>           
>>>>>> I've actually posted this message in de dev mailing list earlier,
>>>>>> because I though my 'issue' is a limitation of the functionality of
>>>>>> Lucene, but they redirected me to this mailinglist, so I hope one of
>>>>>> you
>>>>>> guys can help me out :)
>>>>>>
>>>>>> Maybe the 'issue' I'm addressing now is discussed thouroughly already,
>>>>>> in that case I think I need some redirection to the sources of those
>>>>>> discussions :) Anyway, here's the thing.
>>>>>> For all I know it's impossible to search partial words with Lucene
>>>>>> (except the asterix method with e.g. the StandardAnalyzer -> ambul* to
>>>>>> find ambulance). My problem with that method is that my index consists
>>>>>> of quite a few terms. This means that if a user would search for 'ambu
>>>>>> amster' (ambulance amsterdam), there will be so many terms to search,
>>>>>> the waiting time is just inacceptable. Now I started thinking why it's
>>>>>> impossible to search only a 'part' of a term or even only the 'start'
>>>>>> of
>>>>>> a term and the only reason I could think of was that the Index terms
>>>>>> are
>>>>>> stored tokenized (in that way you (of course) can't find partial terms,
>>>>>> since the index doesn't actually contain the literal terms, but tokens
>>>>>> instead). But Lucene can also store all terms untokenized, so in that
>>>>>> case, in my humble opinion, a partial search would be possible, since
>>>>>> all terms would be stored 'literally'.
>>>>>>
>>>>>> Maybe my thinking is wrong, I only have a black box view of Lucene, so
>>>>>> I
>>>>>> don't know much about indexing algorithm and all, but I just want to
>>>>>> know if this could be done or else why not :) You see, the users of my
>>>>>> index want to know why they can't search parts of the words they enter
>>>>>> and I still can't give them a really good answer, except the 'it would
>>>>>> result in too many OR operators in the query' statement :) . I've tried
>>>>>> using a Dutch stemmer (most of the data I'm indexing is Dutch) but that
>>>>>> didn't work out quite good. Furthermore users sometimes search for a
>>>>>> certain 'filename' and mostly they just enter a part of the name and
>>>>>> thus don't find anything.
>>>>>>
>>>>>> I hope someone can enlighten me :) Thanks in advance!
>>>>>>
>>>>>> Jori
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>             
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 13 20:14:26 2009
Return-Path: <java-user-return-38505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26862 invoked from network); 13 Feb 2009 20:14:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2009 20:14:26 -0000
Received: (qmail 72023 invoked by uid 500); 13 Feb 2009 20:14:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71982 invoked by uid 500); 13 Feb 2009 20:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71966 invoked by uid 99); 13 Feb 2009 20:14:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 12:14:05 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Feb 2009 20:13:59 +0000
Received: by qyk13 with SMTP id 13so1836022qyk.5
        for <java-user@lucene.apache.org>; Fri, 13 Feb 2009 12:13:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=s8rYOJlbppQMldN4XMu/g5MkBjeVR/os9hFsXVH6X6U=;
        b=pr0uMv1REd45btNUALfb4QYaK8nV+m0KODHAuEXIS5sY+QVXuWAKarLTwWE3ov0F4T
         LvOMm1KENsvcq2gvJz3iUx5plvXq8krKXf7WkWmWe26VF16smtdK0s6zBneZJLBxmho+
         FaEkKa9BLzbddivEB1dAxoX6TltR2zNzPeO6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ofUkpZ0GwYuh4eS1ZB7X1by+USpVUOKYsUbMAfjwzFfhNTbZG88JENOHNHYTCvaPXP
         mYv/sgnaumWEmvHN4heAzoT7mw3xXDlm/lvw3XhtAWMW3SDiao2yB2nflafrmT6D+++b
         +3PKR5q4crnayi8NcMluoNrKZyDRIA4Nhgn4Q=
MIME-Version: 1.0
Received: by 10.229.70.141 with SMTP id d13mr951351qcj.70.1234556013083; Fri, 
	13 Feb 2009 12:13:33 -0800 (PST)
In-Reply-To: <49957B27.30307@gmail.com>
References: <499529D4.2040101@gmail.com>
	 <6B73A2E5-0464-40C5-AAD6-0CB781230D0E@gmail.com>
	 <499540BB.2030606@gmail.com>
	 <4A0ED6FA-4358-4747-BD1C-7B50228FBE09@gmail.com>
	 <49957820.2080607@gmail.com>
	 <359a92830902130548of053c89hff66488d48addfd@mail.gmail.com>
	 <49957B27.30307@gmail.com>
Date: Fri, 13 Feb 2009 15:13:33 -0500
Message-ID: <8f0ad1f30902131213y3ad86357o7130f2a3dce3eec7@mail.gmail.com>
Subject: Re: Partial / starts with searching
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016360e3b3c9d7cda0462d27890
X-Virus-Checked: Checked by ClamAV on apache.org

--0016360e3b3c9d7cda0462d27890
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

have you looked at perfieldanalyzerwrapper?

This analyzer is used to facilitate scenarios where different fields require
different analysis techniques... i'm using it for a few things and haven't
had any issues.

agree filters might be better but if you want a quick fix...

On Fri, Feb 13, 2009 at 8:52 AM, d-fader <dfader@gmail.com> wrote:

> Thanks, I will. It might take a while, but I'll post my findings.
>
>
> Erick Erickson wrote:
>
>> *really* think about using Filters here for the user permissions.
>> I think you'd be surprised how quickly you could construct one,
>> and depending upon how many users you have you might be able
>> to get some benefit from CachingWrapperFilter.
>>
>> And ignore my entire diatribe about whether you can restrict
>> your wildcards to 3 or more characters, that approach doesn't
>> fit your problem space at all....
>>
>> Best
>> Erick
>>
>> On Fri, Feb 13, 2009 at 8:39 AM, d-fader <dfader@gmail.com> wrote:
>>
>>
>>
>>> Well, it worked. I indexed a test database and it indeed grew somewhat
>>> (from 16 MiB to 200 MiB :)), and it works flawlessly. Still, I can't use
>>> the
>>> result in my application :)
>>> The 'live' index database contains about 2 million documents and is used
>>> by
>>> a multi-user application. As you probably can imagine, not everyone may
>>> see
>>> everything, there are documents that can be seen by everyone, documents
>>> that
>>> can be seen by some and also documents that only can be seen by one
>>> person.
>>> At design time, since we used the StandardAnalyzer, we decided to create
>>> a
>>> field in each document in which we store the 'login name' of each user
>>> that
>>> may see the document (2 to 4 characters per user, in most cases 2) and
>>> that's where the hick-up occurs. When I index it with the
>>> NGramTokenFilter
>>> (3-5) it doesn't seem to index anything with 2 letters. I checked in Luke
>>> too, if I search for UserInitials:(JS BD), Luke's query explanation is
>>> empty. When I search for UserInitials:(ABC) it seems to do the job well
>>> but
>>> I when I search for DEFG, the query explanation looks like
>>> UserAccessInitials:"def efg defg" and that is inacceptable, since there
>>> can
>>> be a user DEFG and a user EFG available in the system.
>>>
>>> So I think in my case it just won't work, unless I rewrite the 'who may
>>> see
>>> this document' code pretty drastically, if even possible without losing
>>> too
>>> much 'searching' speed.
>>>
>>> ...or am I wrong?
>>>
>>>
>>> Karl Wettin wrote:
>>>
>>>
>>>
>>>> If you attach an NgramTokenFilter to your analyzer at index and query
>>>> time
>>>> you should be able to query for parts of the word.
>>>>
>>>>
>>>>
>>>> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/analysis/ngram/NGramTokenFilter.html
>>>>
>>>>
>>>> http://lucene.apache.org/java/2_4_0/api/index.html?org/apache/lucene/analysis/ngram/EdgeNGramTokenFilter.html
>>>>
>>>> The classes are available in the contrib/analyzer module.
>>>>
>>>> You might want to boost edges a bit more than inner parts, start trying
>>>> out with something like 3-5 grams.
>>>>
>>>> Be aware, this will produce a rather large index.
>>>>
>>>>
>>>>     karl
>>>>
>>>> 13 feb 2009 kl. 10.43 skrev d-fader:
>>>>
>>>>  Karl,
>>>>
>>>>
>>>>> As a matter of fact I more or less did. I'm not really into NGrams, but
>>>>> I
>>>>> read some articles about this technique and I eventually ended up at
>>>>> the
>>>>> 'Did you mean: Lucene?' article written by Tom White. To make a long
>>>>> story
>>>>> short, this solved my problem partially. I do have 2 indexes now and
>>>>> I've
>>>>> written code to extract all terms a user entered, put them through the
>>>>> suggestion engine and tries to be clever about what suggestion should
>>>>> be
>>>>> used. It includes that stop words are ignored, when the entered term
>>>>> exists
>>>>> for more than x times in the index already it's probably good (and thus
>>>>> a
>>>>> suggestion is not needed) and when there are suggestions available, the
>>>>> suggestion with the most occurences in the index is presented. After
>>>>> that
>>>>> the original query is being built up again, preserving all command
>>>>> codes
>>>>> (like ", ( ), AND, OR, etc. etc.).
>>>>> As said, this system works pretty well and mostly if there's a
>>>>> suggestion
>>>>> available, it's actually quite accurate, so thanks for this.
>>>>>
>>>>> Still, it doesn't solve my problem fully. But I think I now know why
>>>>> Lucene can't search 'truely' partially. To find a document fast, all
>>>>> terms
>>>>> are stored with a list of documents which contain the term and when a
>>>>> user
>>>>> searches, Lucene can identify the documents by comparing the terms
>>>>> entered
>>>>> to the terms on that list, right? If so, it's understandable that a
>>>>> true
>>>>> partial search never will work, but then I just don't understand how
>>>>> Google
>>>>> manages to do this :)
>>>>>
>>>>> Jori.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> Karl Wettin wrote:
>>>>>
>>>>>
>>>>>
>>>>>> Hi again Jori,
>>>>>>
>>>>>> did you try N-grams as suggested in the reply on -dev?
>>>>>>
>>>>>>
>>>>>>   karl
>>>>>>
>>>>>> 13 feb 2009 kl. 09.05 skrev d-fader:
>>>>>>
>>>>>>  Hi,
>>>>>>
>>>>>>
>>>>>>> I've actually posted this message in de dev mailing list earlier,
>>>>>>> because I though my 'issue' is a limitation of the functionality of
>>>>>>> Lucene, but they redirected me to this mailinglist, so I hope one of
>>>>>>> you
>>>>>>> guys can help me out :)
>>>>>>>
>>>>>>> Maybe the 'issue' I'm addressing now is discussed thouroughly
>>>>>>> already,
>>>>>>> in that case I think I need some redirection to the sources of those
>>>>>>> discussions :) Anyway, here's the thing.
>>>>>>> For all I know it's impossible to search partial words with Lucene
>>>>>>> (except the asterix method with e.g. the StandardAnalyzer -> ambul*
>>>>>>> to
>>>>>>> find ambulance). My problem with that method is that my index
>>>>>>> consists
>>>>>>> of quite a few terms. This means that if a user would search for
>>>>>>> 'ambu
>>>>>>> amster' (ambulance amsterdam), there will be so many terms to search,
>>>>>>> the waiting time is just inacceptable. Now I started thinking why
>>>>>>> it's
>>>>>>> impossible to search only a 'part' of a term or even only the 'start'
>>>>>>> of
>>>>>>> a term and the only reason I could think of was that the Index terms
>>>>>>> are
>>>>>>> stored tokenized (in that way you (of course) can't find partial
>>>>>>> terms,
>>>>>>> since the index doesn't actually contain the literal terms, but
>>>>>>> tokens
>>>>>>> instead). But Lucene can also store all terms untokenized, so in that
>>>>>>> case, in my humble opinion, a partial search would be possible, since
>>>>>>> all terms would be stored 'literally'.
>>>>>>>
>>>>>>> Maybe my thinking is wrong, I only have a black box view of Lucene,
>>>>>>> so
>>>>>>> I
>>>>>>> don't know much about indexing algorithm and all, but I just want to
>>>>>>> know if this could be done or else why not :) You see, the users of
>>>>>>> my
>>>>>>> index want to know why they can't search parts of the words they
>>>>>>> enter
>>>>>>> and I still can't give them a really good answer, except the 'it
>>>>>>> would
>>>>>>> result in too many OR operators in the query' statement :) . I've
>>>>>>> tried
>>>>>>> using a Dutch stemmer (most of the data I'm indexing is Dutch) but
>>>>>>> that
>>>>>>> didn't work out quite good. Furthermore users sometimes search for a
>>>>>>> certain 'filename' and mostly they just enter a part of the name and
>>>>>>> thus don't find anything.
>>>>>>>
>>>>>>> I hope someone can enlighten me :) Thanks in advance!
>>>>>>>
>>>>>>> Jori
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016360e3b3c9d7cda0462d27890--

From java-user-return-38506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 14 11:28:26 2009
Return-Path: <java-user-return-38506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77285 invoked from network); 14 Feb 2009 11:28:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2009 11:28:26 -0000
Received: (qmail 36332 invoked by uid 500); 14 Feb 2009 11:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36294 invoked by uid 500); 14 Feb 2009 11:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36283 invoked by uid 99); 14 Feb 2009 11:28:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 03:28:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 11:28:08 +0000
Received: by ug-out-1314.google.com with SMTP id a2so101346ugf.23
        for <java-user@lucene.apache.org>; Sat, 14 Feb 2009 03:27:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=XsXlNK4y4G8YimvPTkCYH2dlEB/lc045O6Zl/INcN0c=;
        b=tkgqjgFQIvzjoytg5AQ4+/4NIRnFADijtGpmxBN3M5GgE8B3rR5GqZuDXATvmjsvMP
         Vt8ccBGrqz/jzOOTEXPqRjunTeuDzW8qm8AAPr4ocVUBZ5W4vXwK0qrjSPMVLTW7ZZPU
         mS7qYstdPRA3inf0oGHBSkTseKNxXEOZfRNIk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=ju4puV6ZsxpPGwLu1Mi4Ex1V+YT/v5ZNLz5sNt7d77CREyuIaj/hDM4zT/56Wc6bYY
         BdCXJ/3wCrBRWUdsl981mokn2zF8UmV7V6pMmvW3mD826IONs6RDyaBSPs4fzZO5foJ5
         SXILlS4UnYSjeRHsHKh9wCILI/TA0RXTWqHyk=
Received: by 10.210.28.4 with SMTP id b4mr1510961ebb.82.1234610866317;
        Sat, 14 Feb 2009 03:27:46 -0800 (PST)
Received: from elf_ulfving.lan (c-d78770d5.029-18-6d6c6d2.cust.bredbandsbolaget.se [213.112.135.215])
        by mx.google.com with ESMTPS id 1sm3500935nfv.70.2009.02.14.03.27.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 14 Feb 2009 03:27:45 -0800 (PST)
Message-Id: <EA7973A2-15A4-421F-868D-99FB8E9CD9F0@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <49957820.2080607@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Partial / starts with searching
Date: Sat, 14 Feb 2009 12:27:44 +0100
References: <499529D4.2040101@gmail.com> <6B73A2E5-0464-40C5-AAD6-0CB781230D0E@gmail.com> <499540BB.2030606@gmail.com> <4A0ED6FA-4358-4747-BD1C-7B50228FBE09@gmail.com> <49957820.2080607@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

You probably only want to use Ngrams for the text fields, leaving the  
user name field untokenized. As for loosing text field words less than  
3 characters long: consider letting them through, perhaps by  
implementing a filter that pass longer word to an Ngram filter while  
you just return the shorter input tokens.

      karl

13 feb 2009 kl. 14.39 skrev d-fader:

> Well, it worked. I indexed a test database and it indeed grew  
> somewhat (from 16 MiB to 200 MiB :)), and it works flawlessly.  
> Still, I can't use the result in my application :)
> The 'live' index database contains about 2 million documents and is  
> used by a multi-user application. As you probably can imagine, not  
> everyone may see everything, there are documents that can be seen by  
> everyone, documents that can be seen by some and also documents that  
> only can be seen by one person. At design time, since we used the  
> StandardAnalyzer, we decided to create a field in each document in  
> which we store the 'login name' of each user that may see the  
> document (2 to 4 characters per user, in most cases 2) and that's  
> where the hick-up occurs. When I index it with the NGramTokenFilter  
> (3-5) it doesn't seem to index anything with 2 letters. I checked in  
> Luke too, if I search for UserInitials:(JS BD), Luke's query  
> explanation is empty. When I search for UserInitials:(ABC) it seems  
> to do the job well but I when I search for DEFG, the query  
> explanation looks like UserAccessInitials:"def efg defg" and that is  
> inacceptable, since there can be a user DEFG and a user EFG  
> available in the system.
>
> So I think in my case it just won't work, unless I rewrite the 'who  
> may see this document' code pretty drastically, if even possible  
> without losing too much 'searching' speed.
>
> ...or am I wrong?
>
> Karl Wettin wrote:
>> If you attach an NgramTokenFilter to your analyzer at index and  
>> query time you should be able to query for parts of the word.
>>
>> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/analysis/ngram/NGramTokenFilter.html
>> http://lucene.apache.org/java/2_4_0/api/index.html?org/apache/lucene/analysis/ngram/EdgeNGramTokenFilter.html
>>
>> The classes are available in the contrib/analyzer module.
>>
>> You might want to boost edges a bit more than inner parts, start  
>> trying out with something like 3-5 grams.
>>
>> Be aware, this will produce a rather large index.
>>
>>
>>      karl
>>
>> 13 feb 2009 kl. 10.43 skrev d-fader:
>>
>>> Karl,
>>>
>>> As a matter of fact I more or less did. I'm not really into  
>>> NGrams, but I read some articles about this technique and I  
>>> eventually ended up at the 'Did you mean: Lucene?' article written  
>>> by Tom White. To make a long story short, this solved my problem  
>>> partially. I do have 2 indexes now and I've written code to  
>>> extract all terms a user entered, put them through the suggestion  
>>> engine and tries to be clever about what suggestion should be  
>>> used. It includes that stop words are ignored, when the entered  
>>> term exists for more than x times in the index already it's  
>>> probably good (and thus a suggestion is not needed) and when there  
>>> are suggestions available, the suggestion with the most occurences  
>>> in the index is presented. After that the original query is being  
>>> built up again, preserving all command codes (like ", ( ), AND,  
>>> OR, etc. etc.).
>>> As said, this system works pretty well and mostly if there's a  
>>> suggestion available, it's actually quite accurate, so thanks for  
>>> this.
>>>
>>> Still, it doesn't solve my problem fully. But I think I now know  
>>> why Lucene can't search 'truely' partially. To find a document  
>>> fast, all terms are stored with a list of documents which contain  
>>> the term and when a user searches, Lucene can identify the  
>>> documents by comparing the terms entered to the terms on that  
>>> list, right? If so, it's understandable that a true partial search  
>>> never will work, but then I just don't understand how Google  
>>> manages to do this :)
>>>
>>> Jori.
>>>
>>>
>>>
>>>
>>> Karl Wettin wrote:
>>>> Hi again Jori,
>>>>
>>>> did you try N-grams as suggested in the reply on -dev?
>>>>
>>>>
>>>>    karl
>>>>
>>>> 13 feb 2009 kl. 09.05 skrev d-fader:
>>>>
>>>>> Hi,
>>>>>
>>>>> I've actually posted this message in de dev mailing list earlier,
>>>>> because I though my 'issue' is a limitation of the functionality  
>>>>> of
>>>>> Lucene, but they redirected me to this mailinglist, so I hope  
>>>>> one of you
>>>>> guys can help me out :)
>>>>>
>>>>> Maybe the 'issue' I'm addressing now is discussed thouroughly  
>>>>> already,
>>>>> in that case I think I need some redirection to the sources of  
>>>>> those
>>>>> discussions :) Anyway, here's the thing.
>>>>> For all I know it's impossible to search partial words with Lucene
>>>>> (except the asterix method with e.g. the StandardAnalyzer ->  
>>>>> ambul* to
>>>>> find ambulance). My problem with that method is that my index  
>>>>> consists
>>>>> of quite a few terms. This means that if a user would search for  
>>>>> 'ambu
>>>>> amster' (ambulance amsterdam), there will be so many terms to  
>>>>> search,
>>>>> the waiting time is just inacceptable. Now I started thinking  
>>>>> why it's
>>>>> impossible to search only a 'part' of a term or even only the  
>>>>> 'start' of
>>>>> a term and the only reason I could think of was that the Index  
>>>>> terms are
>>>>> stored tokenized (in that way you (of course) can't find partial  
>>>>> terms,
>>>>> since the index doesn't actually contain the literal terms, but  
>>>>> tokens
>>>>> instead). But Lucene can also store all terms untokenized, so in  
>>>>> that
>>>>> case, in my humble opinion, a partial search would be possible,  
>>>>> since
>>>>> all terms would be stored 'literally'.
>>>>>
>>>>> Maybe my thinking is wrong, I only have a black box view of  
>>>>> Lucene, so I
>>>>> don't know much about indexing algorithm and all, but I just  
>>>>> want to
>>>>> know if this could be done or else why not :) You see, the users  
>>>>> of my
>>>>> index want to know why they can't search parts of the words they  
>>>>> enter
>>>>> and I still can't give them a really good answer, except the 'it  
>>>>> would
>>>>> result in too many OR operators in the query' statement :) .  
>>>>> I've tried
>>>>> using a Dutch stemmer (most of the data I'm indexing is Dutch)  
>>>>> but that
>>>>> didn't work out quite good. Furthermore users sometimes search  
>>>>> for a
>>>>> certain 'filename' and mostly they just enter a part of the name  
>>>>> and
>>>>> thus don't find anything.
>>>>>
>>>>> I hope someone can enlighten me :) Thanks in advance!
>>>>>
>>>>> Jori
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 14 13:27:07 2009
Return-Path: <java-user-return-38507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31599 invoked from network); 14 Feb 2009 13:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2009 13:27:06 -0000
Received: (qmail 78990 invoked by uid 500); 14 Feb 2009 13:27:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78961 invoked by uid 500); 14 Feb 2009 13:26:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78950 invoked by uid 99); 14 Feb 2009 13:26:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 05:26:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 14 Feb 2009 13:26:50 +0000
Received: (qmail invoked by alias); 14 Feb 2009 13:26:29 -0000
Received: from e178121056.adsl.alicedsl.de (EHLO msrvcn04) [85.178.121.56]
  by mail.gmx.net (mp059) with SMTP; 14 Feb 2009 14:26:29 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19ZJ9FY6C9Z127H3tRC43nFF7N4pJl4oSWwO3n8Ct
	T+NsDDXenz1BJR
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Multiple indexes vs single index
Date: Sat, 14 Feb 2009 14:26:30 +0100
Message-ID: <2BC64A44E3844FBE925A422F6084C8DA@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmOp9bFXFDKbXSrS7G7YltweQ/+aQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.75
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We have have an application which manages the data of multiple customers.
A customer can only search its own data, never the data of other customers.

So what is more efficent in respect of performance and resources:

One big single index filtered by an index field (customer-Id) or multiple
smaller indexes, one per customer?

I think there will be 10 million docs max. for all customers together.

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 14 14:30:37 2009
Return-Path: <java-user-return-38508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81638 invoked from network); 14 Feb 2009 14:30:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2009 14:30:37 -0000
Received: (qmail 4996 invoked by uid 500); 14 Feb 2009 14:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4959 invoked by uid 500); 14 Feb 2009 14:30:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4945 invoked by uid 99); 14 Feb 2009 14:30:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 06:30:29 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.162.180 as permitted sender)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 14:30:23 +0000
Received: by el-out-1112.google.com with SMTP id s27so1031968ele.14
        for <java-user@lucene.apache.org>; Sat, 14 Feb 2009 06:30:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=dBYPw/Bv44nZKi9cqfNiT1w0cXSh9/vy1gvrEhTsYzs=;
        b=AoFlmlfHqIMTNuI7fG6j48U+/PoezbophqFufoe2FExpvYXFvclL12syoy4WNJgSiW
         eV8u0FudlhX/G/QZNbcFaI308VRGLgeUcpF4hffYkOW7QX2BVAIYq4XdKNfRFalG+W3S
         v9UQIub6wuUoegaB6dUqKBfvx32Cb97U77bPc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WLiFjwsk6ezvaeDLnChinC6YceIyfjns8rv4scyIV6ry63PlF/1BFt+XbBydg1MqsM
         ugHq/QfMQ2hGEzD3iW09be6nleQ6jbKau5pXLLAMahg6hY2xWFtIYFg3xslco7t1qopK
         MsJHk1JvgmvXfDALMYbPSfpnXTj+tHIlQFBug=
MIME-Version: 1.0
Received: by 10.90.120.19 with SMTP id s19mr1877505agc.112.1234621802108; Sat, 
	14 Feb 2009 06:30:02 -0800 (PST)
In-Reply-To: <2BC64A44E3844FBE925A422F6084C8DA@msrvcn04>
References: <2BC64A44E3844FBE925A422F6084C8DA@msrvcn04>
Date: Sat, 14 Feb 2009 09:30:02 -0500
Message-ID: <359a92830902140630h28b03f1ej75fdd7db12fd717a@mail.gmail.com>
Subject: Re: Multiple indexes vs single index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636283736f256390462e1c99a
X-Virus-Checked: Checked by ClamAV on apache.org

--001636283736f256390462e1c99a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Define efficiency. Define document. Define user. Define....

This kind of question is unanswerable except in gross
generalities unless you take the time to provide details.

You get one answer if each document is 1K, another if it's
1G. If you have 2 users or 10,000 users. If you require
100 queries/sec response time or 1 query can take 10
seconds. If you require an update to the index every
second or month...


That said, I'd try one index first and run some performance
measurements. See the Wiki for performance tuning issues.

You have two problems with maintaining one index/user.
1> Trying to maintain N indexes is much harder than one,
     especially when you factor in backups, etc.
2> There is a cost to opening an index. If you look at the
     Wiki you'll see that the recommendation is that you
     open an index, and run a few warmup queries to fill
     caches etc. before, for instance, measuring performance.
     So if you maintain an index/user, how do you expect
     to handle this issue?


Best
Erick



On Sat, Feb 14, 2009 at 8:26 AM, <spring@gmx.eu> wrote:

> Hi,
>
> We have have an application which manages the data of multiple customers.
> A customer can only search its own data, never the data of other customers.
>
> So what is more efficent in respect of performance and resources:
>
> One big single index filtered by an index field (customer-Id) or multiple
> smaller indexes, one per customer?
>
> I think there will be 10 million docs max. for all customers together.
>
> Thank you
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636283736f256390462e1c99a--

From java-user-return-38509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 14 15:28:34 2009
Return-Path: <java-user-return-38509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33400 invoked from network); 14 Feb 2009 15:28:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2009 15:28:34 -0000
Received: (qmail 36214 invoked by uid 500); 14 Feb 2009 15:28:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35781 invoked by uid 500); 14 Feb 2009 15:28:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35768 invoked by uid 99); 14 Feb 2009 15:28:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 07:28:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 14 Feb 2009 15:28:17 +0000
Received: (qmail invoked by alias); 14 Feb 2009 15:27:56 -0000
Received: from e178121056.adsl.alicedsl.de (EHLO msrvcn04) [85.178.121.56]
  by mail.gmx.net (mp067) with SMTP; 14 Feb 2009 16:27:56 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19vCvsUC7RvUqWgPa3/L8JLQVk8H5icWIYVOEqM+y
	EbU70bW0HNN6tT
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <2BC64A44E3844FBE925A422F6084C8DA@msrvcn04> <359a92830902140630h28b03f1ej75fdd7db12fd717a@mail.gmail.com>
Subject: RE: Multiple indexes vs single index
Date: Sat, 14 Feb 2009 16:27:58 +0100
Message-ID: <DC451789260C43F8AD231E937F2D9A65@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmOsMxQixpVcsDwSp+C29e5AYzSFAAB3RHA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
In-Reply-To: <359a92830902140630h28b03f1ej75fdd7db12fd717a@mail.gmail.com>
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.67
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

> You get one answer if each document is 1K, another if it's
> 1G. If you have 2 users or 10,000 users. If you require
> 100 queries/sec response time or 1 query can take 10
> seconds. If you require an update to the index every
> second or month...

Each doc has up to 10 A4 pages text.
There will be about 100 customers/clients/companies (not users, every
customer will have about 10 users).
I would expect 1 query/s not more.
No updates to the index.

> You have two problems with maintaining one index/user.
> 1> Trying to maintain N indexes is much harder than one,
>      especially when you factor in backups, etc.

This is the biggest problem I see.

> 2> There is a cost to opening an index. If you look at the
>      Wiki you'll see that the recommendation is that you
>      open an index, and run a few warmup queries to fill
>      caches etc. before, for instance, measuring performance.
>      So if you maintain an index/user, how do you expect
>      to handle this issue?

I would open the index on demand and close it after a period of inactivity.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 14 16:14:15 2009
Return-Path: <java-user-return-38510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50454 invoked from network); 14 Feb 2009 16:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2009 16:14:14 -0000
Received: (qmail 63898 invoked by uid 500); 14 Feb 2009 16:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63878 invoked by uid 500); 14 Feb 2009 16:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63867 invoked by uid 99); 14 Feb 2009 16:13:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 08:13:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.144] (HELO web30801.mail.mud.yahoo.com) (68.142.200.144)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 14 Feb 2009 16:13:46 +0000
Received: (qmail 49192 invoked by uid 60001); 14 Feb 2009 16:13:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=tQJbNeHK317BTEtyp6zn8xafDt+5nNMxA5nG8vgPuWtBSxz/i445NCK5rTHg+WXwD/ShTmdhZ+XfEMwaWOpZ25eucp16jSARcrsGRvaXdCkcBT6Py+3irmBJ9gOP3WeNthC3ZtE80qQi6PjVOJRz0M10urMLpfqzjw1JN6Esdns=;
X-YMail-OSG: EeLKs2AVM1kzJ.wEw829ykspxEbEJ4vl8aJghDJPc.CJ4A6IdqPiabJbd3.9CdrjPYzyS0bK_CiWI6kB_dt19o0eHoqGq87zP_1CD.GOAzc0YCSyFcPY9BTCSGvIh9ipa1d3VqTm65cXLJgbBBpcyM9URpOA3iI1WM6MEUaH4gbr0iRZEebBja1Drnb0wL_nLvFL5KkQE2n7sl3c6q2aq2in
Received: from [66.31.30.224] by web30801.mail.mud.yahoo.com via HTTP; Sat, 14 Feb 2009 08:13:24 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.260.1
References: <2BC64A44E3844FBE925A422F6084C8DA@msrvcn04> <359a92830902140630h28b03f1ej75fdd7db12fd717a@mail.gmail.com> <DC451789260C43F8AD231E937F2D9A65@msrvcn04>
Date: Sat, 14 Feb 2009 08:13:24 -0800 (PST)
From: Shashi Kant <shashi_kant@yahoo.com>
Reply-To: Shashi Kant <skant@sloan.mit.edu>
Subject: Re: Multiple indexes vs single index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <446605.49012.qm@web30801.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Take a look at Solr - it should be able to handle the scale you describe. My suggestion is not to partition indexes unless absolutely have to.




----- Original Message ----
From: "spring@gmx.eu" <spring@gmx.eu>
To: java-user@lucene.apache.org
Sent: Saturday, February 14, 2009 10:27:58 AM
Subject: RE: Multiple indexes vs single index

Hi,

> You get one answer if each document is 1K, another if it's
> 1G. If you have 2 users or 10,000 users. If you require
> 100 queries/sec response time or 1 query can take 10
> seconds. If you require an update to the index every
> second or month...

Each doc has up to 10 A4 pages text.
There will be about 100 customers/clients/companies (not users, every
customer will have about 10 users).
I would expect 1 query/s not more.
No updates to the index.

> You have two problems with maintaining one index/user.
> 1> Trying to maintain N indexes is much harder than one,
>      especially when you factor in backups, etc.

This is the biggest problem I see.

> 2> There is a cost to opening an index. If you look at the
>      Wiki you'll see that the recommendation is that you
>      open an index, and run a few warmup queries to fill
>      caches etc. before, for instance, measuring performance.
>      So if you maintain an index/user, how do you expect
>      to handle this issue?

I would open the index on demand and close it after a period of inactivity.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 14 16:48:39 2009
Return-Path: <java-user-return-38511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55233 invoked from network); 14 Feb 2009 16:48:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2009 16:48:38 -0000
Received: (qmail 90527 invoked by uid 500); 14 Feb 2009 16:48:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90501 invoked by uid 500); 14 Feb 2009 16:48:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90490 invoked by uid 99); 14 Feb 2009 16:48:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 08:48:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 16:48:23 +0000
Received: by rv-out-0506.google.com with SMTP id k40so1678668rvb.5
        for <java-user@lucene.apache.org>; Sat, 14 Feb 2009 08:48:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4W74/mQSKRw6NY1wJ87QP7LL+06+2XAqBMD5i48XMiQ=;
        b=IluKqkdo+ROtCUAFn+mR2bR4aURZuq/i5GY61Ramt0sCLJEaep4h1f7uiQ/zMYk9mI
         stT2d8g+IWh9OoQ8+e0EKTCQ8UL1zWxWlTIILRG9qCTee+3ZUKdp3iTPUv6QbhtU15vc
         XlFjvWQ4OtvsFV1mmRfBbfTGG5h2wic4f0Pgo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=dYt7J14x76eXHpKgPAPRiP3D+P9ftgDilU84P8fDKirxhsX21H0fJq73qi1VpXUfpD
         Lp3upafRDCO3pgdlgSlvWn9ITHv0vBzdSD97V+oX2bD0DVJ1YFHVxZk55YUBMDnhOyxO
         wnzuYFV21TcI3bLM2n7IAnPbkAS7y7NB2b1JU=
MIME-Version: 1.0
Received: by 10.141.87.13 with SMTP id p13mr436703rvl.166.1234630082586; Sat, 
	14 Feb 2009 08:48:02 -0800 (PST)
In-Reply-To: <DC451789260C43F8AD231E937F2D9A65@msrvcn04>
References: <2BC64A44E3844FBE925A422F6084C8DA@msrvcn04>
	 <359a92830902140630h28b03f1ej75fdd7db12fd717a@mail.gmail.com>
	 <DC451789260C43F8AD231E937F2D9A65@msrvcn04>
Date: Sat, 14 Feb 2009 08:48:02 -0800
Message-ID: <6e3ae6310902140848i3989cde5u7257cc434ba1e2e6@mail.gmail.com>
Subject: Re: Multiple indexes vs single index
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1519a806a170462e3b79c
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1519a806a170462e3b79c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

A normal Lucene index should be able to handle it.

As long as no frequent insert/update, which can sometimes cause hiccups for
large indexes, one index is enough.

If your customer numbers keep growing, you will need to have one index for
each customer, which isn't that difficult really, especially your QPS is not
so demanding.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Sat, Feb 14, 2009 at 7:27 AM, <spring@gmx.eu> wrote:

> Hi,
>
> > You get one answer if each document is 1K, another if it's
> > 1G. If you have 2 users or 10,000 users. If you require
> > 100 queries/sec response time or 1 query can take 10
> > seconds. If you require an update to the index every
> > second or month...
>
> Each doc has up to 10 A4 pages text.
> There will be about 100 customers/clients/companies (not users, every
> customer will have about 10 users).
> I would expect 1 query/s not more.
> No updates to the index.
>
> > You have two problems with maintaining one index/user.
> > 1> Trying to maintain N indexes is much harder than one,
> >      especially when you factor in backups, etc.
>
> This is the biggest problem I see.
>
> > 2> There is a cost to opening an index. If you look at the
> >      Wiki you'll see that the recommendation is that you
> >      open an index, and run a few warmup queries to fill
> >      caches etc. before, for instance, measuring performance.
> >      So if you maintain an index/user, how do you expect
> >      to handle this issue?
>
> I would open the index on demand and close it after a period of inactivity.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

--000e0cd1519a806a170462e3b79c--

From java-user-return-38512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 03:04:27 2009
Return-Path: <java-user-return-38512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13598 invoked from network); 15 Feb 2009 03:04:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 03:04:27 -0000
Received: (qmail 31300 invoked by uid 500); 15 Feb 2009 03:04:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31272 invoked by uid 500); 15 Feb 2009 03:04:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31261 invoked by uid 99); 15 Feb 2009 03:04:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 19:04:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.217.170 as permitted sender)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 03:04:08 +0000
Received: by gxk18 with SMTP id 18so1967025gxk.5
        for <java-user@lucene.apache.org>; Sat, 14 Feb 2009 19:03:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=RmlgunGRIo/1Dtq5DJsFHmVE0mpvQ6Q7gonTnNaMPJQ=;
        b=RVQ5QuUTzaHlbzaE9vuEpKyrt0Q63WIKxg8pSlgF4eSiZ9EM8M0q6rv6h+01FMeeQk
         Y2/47X3uzSjbVstV2HWBKVU04kw761h00d9vwXM97UkjFgGuMckpXmQ6OCdeR15xB6Y+
         ikqlJGZ4bFpo0ALBeFD9lCWc/5RCg3+dOyn0A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=l3K6b2Tfil1HjGOMzm7by8su+24VGG9um3n1w8x6iPQMb2ozbNp2QtX9fGQ6PQMca6
         vwnENWLYuvN04lTW8AQ/lSuuaYkX7cAt4e4WYadDrgYdDI1sDQlf3aK7GwzGVITdbGou
         ZDclHuQDDAdIX2fazqFuhABOH42mCyv99tyqI=
MIME-Version: 1.0
Received: by 10.220.92.139 with SMTP id r11mr933845vcm.15.1234667027543; Sat, 
	14 Feb 2009 19:03:47 -0800 (PST)
In-Reply-To: <493D12E6.4020701@gmail.com>
References: <5d53d5770812071051g49fc6cau7ed2b142c88fd7e2@mail.gmail.com>
	 <493D12E6.4020701@gmail.com>
Date: Sat, 14 Feb 2009 23:03:47 -0400
Message-ID: <5d53d5770902141903t2bcd1af1ic12ddcfc43d87446@mail.gmail.com>
Subject: Re: Fragment Highlighter Phrase?
From: Ian Vink <ianvink@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636284c7497b6b10462ec51c6
X-Virus-Checked: Checked by ClamAV on apache.org

--001636284c7497b6b10462ec51c6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I use the Lucene.NET implementation. (2.3)
There is a Lucene.Net.Search.Spans.SpanScorer class, but it's not public I
assume I'd have to use it as a base class for my own.

Do you have a simple example on how, in Java, to use the SpanScorer to get a
highlighter to return only fragments that are part of the phrase in the
Query?

Ian



On Mon, Dec 8, 2008 at 8:28 AM, Mark Miller <markrmiller@gmail.com> wrote:

> Ian Vink wrote:
>
>> Is there a way to get phrases counted in the list of fragments that come
>> back from Highlighter.GetBestFragments() in general.
>> It seems to only take words into account.
>>
>> Ian
>>
>>
>>
> Not sure I fully understand, but have you tried the SpanScorer? It allows
> the Highlighter to work with phrase/span queries.
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636284c7497b6b10462ec51c6--

From java-user-return-38513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 03:57:00 2009
Return-Path: <java-user-return-38513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18884 invoked from network); 15 Feb 2009 03:57:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 03:57:00 -0000
Received: (qmail 45376 invoked by uid 500); 15 Feb 2009 03:56:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45345 invoked by uid 500); 15 Feb 2009 03:56:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45334 invoked by uid 99); 15 Feb 2009 03:56:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Feb 2009 19:56:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.162.176 as permitted sender)
Received: from [209.85.162.176] (HELO el-out-1112.google.com) (209.85.162.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 03:56:43 +0000
Received: by el-out-1112.google.com with SMTP id s27so1103727ele.14
        for <java-user@lucene.apache.org>; Sat, 14 Feb 2009 19:56:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=zYt6jPyWdasT7LG2axrGlHzZeuzGQNSiPfEFUHqOSUw=;
        b=E/XNq7P2GyvJ73oWbekrNHPQw5mosGrykAvy54Pjiqens/NLqZnYoTlNQ5d2IEKggg
         l6DmL62ANFvii+uSoKDXoxnePLpBpV4jxRCKpeWtJ+5L72Ga4+TgRsdPK97lz6P2146k
         qucxfXupAuWhdLFJTh/UB/6tz7Gt/0YnR27Mc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=hwEKpfW0f7fuP4WvkQQG8qZCRVIRu//+cjsy1t6RpKygXdpcc5WCSQnjTfUu5qZQU4
         Kfp9Wl2te7Eatn5ohdI9nviTQR0+dHeMl8X4YyvVXt5VWgP20M6ncNEOMDZ2HcZh2zby
         Pzei9zPwUR8Fk5ISzxguJC2VZBPTRoP+GEKv8=
Received: by 10.90.31.8 with SMTP id e8mr615843age.121.1234670182440;
        Sat, 14 Feb 2009 19:56:22 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 8sm7184896agd.18.2009.02.14.19.56.21
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 14 Feb 2009 19:56:22 -0800 (PST)
Message-ID: <49979264.4060501@gmail.com>
Date: Sat, 14 Feb 2009 22:56:20 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fragment Highlighter Phrase?
References: <5d53d5770812071051g49fc6cau7ed2b142c88fd7e2@mail.gmail.com>	 <493D12E6.4020701@gmail.com> <5d53d5770902141903t2bcd1af1ic12ddcfc43d87446@mail.gmail.com>
In-Reply-To: <5d53d5770902141903t2bcd1af1ic12ddcfc43d87446@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I wasn't specific enough. I meant the SpanScorer in the contrib 
highlighter package - they are very different.

I assume the latest Highlighter package has been ported to Lucene .NET, 
but if not I know of a guy that ported the SpanScorer stuff
to C# a while back. I might be able to get my hands on that still, 
though it may be dated now. First check the highlighter contrib
and see if its there though.

- Mark

Ian Vink wrote:
> I use the Lucene.NET implementation. (2.3)
> There is a Lucene.Net.Search.Spans.SpanScorer class, but it's not public I
> assume I'd have to use it as a base class for my own.
>
> Do you have a simple example on how, in Java, to use the SpanScorer to get a
> highlighter to return only fragments that are part of the phrase in the
> Query?
>
> Ian
>
>
>
> On Mon, Dec 8, 2008 at 8:28 AM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> Ian Vink wrote:
>>
>>     
>>> Is there a way to get phrases counted in the list of fragments that come
>>> back from Highlighter.GetBestFragments() in general.
>>> It seems to only take words into account.
>>>
>>> Ian
>>>
>>>
>>>
>>>       
>> Not sure I fully understand, but have you tried the SpanScorer? It allows
>> the Highlighter to work with phrase/span queries.
>>
>> - Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 13:02:53 2009
Return-Path: <java-user-return-38514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77177 invoked from network); 15 Feb 2009 13:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 13:02:53 -0000
Received: (qmail 54283 invoked by uid 500); 15 Feb 2009 13:02:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54263 invoked by uid 500); 15 Feb 2009 13:02:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54251 invoked by uid 99); 15 Feb 2009 13:02:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 05:02:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [79.170.194.127] (HELO mail.roo10.com) (79.170.194.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 13:02:37 +0000
Received: from [192.168.60.45] (78-105-13-3.dsl.cnl.uk.net [78.105.13.3])
	by mail.roo10.com (Postfix) with ESMTP id 056A14612A44
	for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 13:02:16 +0000 (GMT)
Subject: Optimal Solution for Unique Field Values
From: Joel Halbert <joel@su3analytics.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Organization: SU3 Analytics
Date: Sun, 15 Feb 2009 13:02:17 +0000
Message-Id: <1234702937.11015.6.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm looking for an optimal solution for extracting unique field values.
The rub is that I want to be able to perform this for a unique subset of
documents...as per the example:

I have an index with Field1 and Field2.

I want "all unique values of Field1 where Field2=X".

Other than actually performing a query, where I select all documents
that satisfy the condition Field2=x and then collecting the unique field
values myself by iterating across the hits, is there a way of leveraging
the indexreader, and enumerating across Fields, something like the
general example given here:
http://wiki.apache.org/lucene-java/LuceneFAQ#head-a801793d7479264e29157d92440199b35266dc18

Thx,
Joel


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 13:14:42 2009
Return-Path: <java-user-return-38515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78159 invoked from network); 15 Feb 2009 13:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 13:14:42 -0000
Received: (qmail 57916 invoked by uid 500); 15 Feb 2009 13:14:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57887 invoked by uid 500); 15 Feb 2009 13:14:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57876 invoked by uid 99); 15 Feb 2009 13:14:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 05:14:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 13:14:26 +0000
Received: by rv-out-0506.google.com with SMTP id k40so2060746rvb.5
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 05:14:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=aNvQbPFMOePC7bWYS5wq62tH61o4LCB793zgIfVICjw=;
        b=dy7We+kXc6DF+Li76efkKZ3KASgQLz1zLKRdMAOw6PqCSP6qdRc0NfFB0Yue3RIeST
         dkV5OJz8Oczg09++58NJ6RVrDif+TjvL++X5lezjxQU5FNisThwhPdPqME7nyHN+beNY
         VcdNQynDRTi4OVV+KPyqwqVgsesnISsTKY8nA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=h2Q4CaIerEtWlFAv7HqPS29YQhYCs4o422dZUS6A+eoRAwtaGE+G5AYFHRs9jM7VfU
         ItpJtcp2x5GrfAVduG4YzEiOC7zc8DTjGzDIESxt+APqi0+8vdTY8euxWIEVRwubtk+9
         6GmvJRpvKn3QbIndtPPPE+b1ewT2kzuAu9YFE=
MIME-Version: 1.0
Received: by 10.141.96.19 with SMTP id y19mr2138762rvl.201.1234703644761; Sun, 
	15 Feb 2009 05:14:04 -0800 (PST)
In-Reply-To: <1234702937.11015.6.camel@bohr>
References: <1234702937.11015.6.camel@bohr>
Date: Sun, 15 Feb 2009 05:14:04 -0800
Message-ID: <6e3ae6310902150514wcb73cderc5185d81805fbed8@mail.gmail.com>
Subject: Re: Optimal Solution for Unique Field Values
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1a8e42621780462f4d8de
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1a8e42621780462f4d8de
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I think you would need to
1) collect all the matching IDs for Field2=x
2) loop through Field1, for each Term's doc, collect the term if the term
doc is in the matching IDs from step 1.

This should be the fastest approach, pretty similar to what you suggested.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Sun, Feb 15, 2009 at 5:02 AM, Joel Halbert <joel@su3analytics.com> wrote:

> Hi,
>
> I'm looking for an optimal solution for extracting unique field values.
> The rub is that I want to be able to perform this for a unique subset of
> documents...as per the example:
>
> I have an index with Field1 and Field2.
>
> I want "all unique values of Field1 where Field2=X".
>
> Other than actually performing a query, where I select all documents
> that satisfy the condition Field2=x and then collecting the unique field
> values myself by iterating across the hits, is there a way of leveraging
> the indexreader, and enumerating across Fields, something like the
> general example given here:
>
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-a801793d7479264e29157d92440199b35266dc18
>
> Thx,
> Joel
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd1a8e42621780462f4d8de--

From java-user-return-38516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 13:40:02 2009
Return-Path: <java-user-return-38516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91079 invoked from network); 15 Feb 2009 13:40:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 13:40:01 -0000
Received: (qmail 80106 invoked by uid 500); 15 Feb 2009 13:39:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80083 invoked by uid 500); 15 Feb 2009 13:39:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80072 invoked by uid 99); 15 Feb 2009 13:39:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 05:39:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 13:39:45 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.8/8.13.8) with ESMTP id n1FDdOjR016628
	for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 14:39:24 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
Date: Sun, 15 Feb 2009 14:39:26 +0100
User-Agent: KMail/1.10.4 (Linux/2.6.27-11-generic; KDE/4.1.4; i686; ; )
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com> <200902072306.41912.paul.elschot@xs4all.nl> <70422ecc0902080047t3d9c321bwfc35a90927dac8e7@mail.gmail.com>
In-Reply-To: <70422ecc0902080047t3d9c321bwfc35a90927dac8e7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_OsBmJl9RMDoN5Mf"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200902151439.26859.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_OsBmJl9RMDoN5Mf
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit


Meanwhile the choice between SortedVIntList and OpenBitSet
has been removed from the trunk (development version),
that now uses OpenBitSet only:
https://issues.apache.org/jira/browse/LUCENE-1296

In case there is preference to have SortedVIntList used in the
next lucene version (i.e. in cases when it is smaller  than
OpenBitSet), please comment at LUCENE-1296.

Regards,
Paul Elschot



On Sunday 08 February 2009 09:47:24 Raffaella Ventaglio wrote:
> Hi Paul,
> 
> One way to implement that would be to use one of the boolean combination
> > filters in contrib, BooleanFilter or ChainedFilter,  and simply count the
> > the number of times next() returns true on the result.
> 
> 
> I am sorry, but I cannot understand: how can I create a BooleanFilter or a
> ChainedFilter starting from two SortedVIntList objects?
> I have not found any filter that takes an existing "DocIdSet" in its
> constructor...
> 
> However I have seen that Filter interface is very easy to implement.
> Should I create a custom Filter that wraps my SortedVIntList and than use
> these filters to create a BooleanFilter?
> 
> Thanks,
> Raf
> 

--Boundary-00=_OsBmJl9RMDoN5Mf--

From java-user-return-38517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 15:54:52 2009
Return-Path: <java-user-return-38517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49782 invoked from network); 15 Feb 2009 15:54:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 15:54:52 -0000
Received: (qmail 52057 invoked by uid 500); 15 Feb 2009 15:54:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52022 invoked by uid 500); 15 Feb 2009 15:54:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52011 invoked by uid 99); 15 Feb 2009 15:54:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 07:54:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [79.170.194.127] (HELO mail.roo10.com) (79.170.194.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 15:54:35 +0000
Received: from [192.168.60.45] (unknown [78.105.13.3])
	by mail.roo10.com (Postfix) with ESMTP id 78B6F4612A44
	for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 15:51:04 +0000 (GMT)
Subject: Upper limit on number of Fields
From: Joel Halbert <joel@su3analytics.com>
To: Lucene Users <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: SU3 Analytics
Date: Sun, 15 Feb 2009 15:27:54 +0000
Message-Id: <1234711674.11015.15.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Is there any practical limit on the number of fields that can be
maintained on an index?

My index looks something like this, 1 million documents. For each group
of 1000 documents I might have 10 indexed fields. This would mean in
total about 10000 fields. Am I going to run into any issues here?

The index in Ram based.

Rgs,
Joel 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 15:59:10 2009
Return-Path: <java-user-return-38518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51536 invoked from network); 15 Feb 2009 15:59:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 15:59:09 -0000
Received: (qmail 56663 invoked by uid 500); 15 Feb 2009 15:59:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56627 invoked by uid 500); 15 Feb 2009 15:59:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56616 invoked by uid 99); 15 Feb 2009 15:59:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 07:59:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [79.170.194.127] (HELO mail.roo10.com) (79.170.194.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 15:58:54 +0000
Received: from [192.168.60.45] (78-105-13-3.dsl.cnl.uk.net [78.105.13.3])
	by mail.roo10.com (Postfix) with ESMTP id A227B4612A44
	for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 15:58:14 +0000 (GMT)
Subject: Term precendence
From: Joel Halbert <joel@su3analytics.com>
To: Lucene Users <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: SU3 Analytics
Date: Sun, 15 Feb 2009 15:50:00 +0000
Message-Id: <1234713000.11015.19.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

When constructing a query, using a series of terms e.g.

Term1=X, Term2=Y etc...

does it make sense, like in sql, to place to most restrictive term query
first?

i.e. if I know that the query will be mainly constrained by the value of
Term1, does having this as the first in the query make the execution of
the query any faster than if it were the second term?

Rgs,
Joel


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 16:24:37 2009
Return-Path: <java-user-return-38519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61712 invoked from network); 15 Feb 2009 16:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 16:24:37 -0000
Received: (qmail 73958 invoked by uid 500); 15 Feb 2009 16:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73930 invoked by uid 500); 15 Feb 2009 16:24:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73919 invoked by uid 99); 15 Feb 2009 16:24:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 08:24:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 16:24:23 +0000
Received: by qw-out-2122.google.com with SMTP id 5so485249qwi.53
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 08:24:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=+q9NW5JzEOwDn7OV6/pHpTqlxv9Gw2CwRWGqxK1DosU=;
        b=A6vtJhN4jQ4fV6ulAs9LqHutkJk5vJG79dLoMf/Ae6tYjdf9Hf8OUgN6jW+Zvp2uGk
         KqrItS3R7+0IIy5QcPKh8LvHfmQ/WAxEArTQ66XHP34KK1LeIXa4n0FHM5Qh6Vpk4hqP
         aRWVcFXPv6ax6LxW6Wc98OYTgigq5QQm+OkIM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=VBuAL9YvoJgx8XhwVfMCshrBxfUz0dN/MZsYbBSWxioLPtzV+3x7Sh7MDZ/lobRKHO
         XGvTMsx9r4cvYv2w4tMI0PIUkFvbLy0sW/4R+wi1807wUbhfcb9En7x/Bhauzmcxr9vy
         uAw7XFsRn4yERbSlIY8cOR68nrcvewzDkDQLU=
MIME-Version: 1.0
Received: by 10.229.86.196 with SMTP id t4mr4137qcl.39.1234715042656; Sun, 15 
	Feb 2009 08:24:02 -0800 (PST)
In-Reply-To: <1234713000.11015.19.camel@bohr>
References: <1234713000.11015.19.camel@bohr>
Date: Sun, 15 Feb 2009 11:24:02 -0500
Message-ID: <c68e39170902150824y7f010f37pe514aad8634d82a5@mail.gmail.com>
Subject: Re: Term precendence
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, Feb 15, 2009 at 10:50 AM, Joel Halbert <joel@su3analytics.com> wrote:
> When constructing a query, using a series of terms e.g.
>
> Term1=X, Term2=Y etc...
>
> does it make sense, like in sql, to place to most restrictive term query
> first?
>
> i.e. if I know that the query will be mainly constrained by the value of
> Term1, does having this as the first in the query make the execution of
> the query any faster than if it were the second term?

No.  Lucene internally reorders terms and tries to optimize stuff like
this whenever possible.  Disjunctions (ORs) use a priority queue to
skip on the lowest term (by docid) and conjunctions (ANDs) reorder
once by the highest first document (a very rough proxy for estimating
term density).

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 17:32:25 2009
Return-Path: <java-user-return-38520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83455 invoked from network); 15 Feb 2009 17:32:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 17:32:25 -0000
Received: (qmail 60629 invoked by uid 500); 15 Feb 2009 17:32:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60602 invoked by uid 500); 15 Feb 2009 17:32:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60591 invoked by uid 99); 15 Feb 2009 17:32:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 09:32:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 15 Feb 2009 17:32:10 +0000
Received: (qmail invoked by alias); 15 Feb 2009 17:31:46 -0000
Received: from e178087132.adsl.alicedsl.de (EHLO msrvcn04) [85.178.87.132]
  by mail.gmx.net (mp035) with SMTP; 15 Feb 2009 18:31:46 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18LhMIzyUALWFUVwn1xUuNuuiPD4vXJFJhfocTwif
	a2HzvB8QRk/hPm
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: search(Query query, HitCollector results)
Date: Sun, 15 Feb 2009 18:31:46 +0100
Message-ID: <A7D7923512D248089C37EE2FF65BB44A@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmPkuewnNEAvbyOTDWpbMFMscH+QQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.8100000000000001
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

in what order does search(Query query, HitCollector results) return the
results? By relevance?

Thank you.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 17:37:58 2009
Return-Path: <java-user-return-38521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87775 invoked from network); 15 Feb 2009 17:37:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 17:37:58 -0000
Received: (qmail 72282 invoked by uid 500); 15 Feb 2009 17:37:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72254 invoked by uid 500); 15 Feb 2009 17:37:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72243 invoked by uid 99); 15 Feb 2009 17:37:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 09:37:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.170 as permitted sender)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 17:37:43 +0000
Received: by gxk18 with SMTP id 18so2245640gxk.5
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 09:37:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=+XKkbEcE5vwHjh420Gfp3Csqx5Dd2CmDJ7GUaPrlwHc=;
        b=F8paExsLlpaoV7QA3O9DFKm/ABZALKwNXaCpaEwbuGJeIUlox5EqjVBSOSXzHWHM2I
         LtfBcnZNyrSoB1Fj4cdSdbN/ngPagFPD2KvP/9TXC7HrFhLtmdJQBUXKLlFLXD9bYEVb
         dAXaa9mLTYg6yrcK8FEfRol9UTWqIwM341enk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=xmWkt5h/F5hGL5R3RsBQ188sdP8KgC8DZ38rU9eOATfWvywpJphyxwhTluOodINFpC
         BVE62zcnvZLglIBhVfLY9VC2hpHQiTDtp6ZBiytMtqjlyrmHKAbclweMsAt26ol/8Z9f
         bL5g+aGuvQf/EWUfxeI7rOMGGdewfDNHbvJBU=
Received: by 10.90.33.15 with SMTP id g15mr983050agg.10.1234719443028;
        Sun, 15 Feb 2009 09:37:23 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 8sm8329658agd.18.2009.02.15.09.37.22
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 15 Feb 2009 09:37:22 -0800 (PST)
Message-ID: <499852D2.4020407@gmail.com>
Date: Sun, 15 Feb 2009 12:37:22 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search(Query query, HitCollector results)
References: <A7D7923512D248089C37EE2FF65BB44A@msrvcn04>
In-Reply-To: <A7D7923512D248089C37EE2FF65BB44A@msrvcn04>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

spring@gmx.eu wrote:
> Hi,
>
> in what order does search(Query query, HitCollector results) return the
> results? By relevance?
>
> Thank you.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   
The HitCollector used will determine how things are ordered. In 2.4, the 
TopDocCollector will order by relevancy and the TopFieldDocCollector can 
order by
relevancy, index order, or by field. Lucene delivers the hit ids to the 
HitCollector and it can order as it pleases.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 17:45:32 2009
Return-Path: <java-user-return-38522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90708 invoked from network); 15 Feb 2009 17:45:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 17:45:32 -0000
Received: (qmail 76056 invoked by uid 500); 15 Feb 2009 17:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76026 invoked by uid 500); 15 Feb 2009 17:45:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76015 invoked by uid 99); 15 Feb 2009 17:45:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 09:45:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [79.170.194.127] (HELO mail.roo10.com) (79.170.194.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 17:45:18 +0000
Received: from [192.168.60.45] (78-105-13-3.dsl.cnl.uk.net [78.105.13.3])
	by mail.roo10.com (Postfix) with ESMTP id 37AF14612A44
	for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 17:44:55 +0000 (GMT)
Subject: Re: search(Query query, HitCollector results)
From: Joel Halbert <joel@su3analytics.com>
To: java-user@lucene.apache.org
In-Reply-To: <499852D2.4020407@gmail.com>
References: <A7D7923512D248089C37EE2FF65BB44A@msrvcn04>
	 <499852D2.4020407@gmail.com>
Content-Type: text/plain
Organization: SU3 Analytics
Date: Sun, 15 Feb 2009 17:44:54 +0000
Message-Id: <1234719894.6531.1.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Presumably there is no score ordering to the hit id's lucene delivers to
a HitCollector? i.e. they are delivered in the order they are found and
score is neither ascending or descending i.e. the next score could be
higher or lower that the previous one?

-----Original Message-----
From: Mark Miller <markrmiller@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: search(Query query, HitCollector results)
Date: Sun, 15 Feb 2009 12:37:22 -0500

spring@gmx.eu wrote:
> Hi,
>
> in what order does search(Query query, HitCollector results) return the
> results? By relevance?
>
> Thank you.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   
The HitCollector used will determine how things are ordered. In 2.4, the 
TopDocCollector will order by relevancy and the TopFieldDocCollector can 
order by
relevancy, index order, or by field. Lucene delivers the hit ids to the 
HitCollector and it can order as it pleases.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 17:46:57 2009
Return-Path: <java-user-return-38523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91509 invoked from network); 15 Feb 2009 17:46:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 17:46:57 -0000
Received: (qmail 78479 invoked by uid 500); 15 Feb 2009 17:46:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78449 invoked by uid 500); 15 Feb 2009 17:46:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78436 invoked by uid 99); 15 Feb 2009 17:46:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 09:46:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 15 Feb 2009 17:46:41 +0000
Received: (qmail invoked by alias); 15 Feb 2009 17:46:15 -0000
Received: from e178087132.adsl.alicedsl.de (EHLO msrvcn04) [85.178.87.132]
  by mail.gmx.net (mp025) with SMTP; 15 Feb 2009 18:46:15 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/cXkoWMtPcgoSyESyO8QjXvunXiMk/zoopI8Wh90
	9eKwIfuqJAE3/L
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <A7D7923512D248089C37EE2FF65BB44A@msrvcn04> <499852D2.4020407@gmail.com>
Subject: RE: search(Query query, HitCollector results)
Date: Sun, 15 Feb 2009 18:46:17 +0100
Message-ID: <5222E56D1BBD43069788DC43C7A1229C@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmPlCLii4MTs855RfiT9hSronUUCwAAO9uA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
In-Reply-To: <499852D2.4020407@gmail.com>
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.73
X-Virus-Checked: Checked by ClamAV on apache.org

> The HitCollector used will determine how things are ordered. 
> In 2.4, the 
> TopDocCollector will order by relevancy and the 
> TopFieldDocCollector can 
> order by
> relevancy, index order, or by field. Lucene delivers the hit 
> ids to the 
> HitCollector and it can order as it pleases.


So HitCollector#collect(int doc, float score) is not called in a special
(default) order and must order the docs itself by score if one needs the
hits sorted by relevance?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 17:53:01 2009
Return-Path: <java-user-return-38524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95704 invoked from network); 15 Feb 2009 17:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 17:53:01 -0000
Received: (qmail 87230 invoked by uid 500); 15 Feb 2009 17:52:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87210 invoked by uid 500); 15 Feb 2009 17:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87199 invoked by uid 99); 15 Feb 2009 17:52:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 09:52:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.162.176 as permitted sender)
Received: from [209.85.162.176] (HELO el-out-1112.google.com) (209.85.162.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 17:52:34 +0000
Received: by el-out-1112.google.com with SMTP id s27so1161020ele.14
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 09:52:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=Y1LW7VM5zIgjoIOgQ6ozMfKbsMLWDPuAvh6714xxwp0=;
        b=ILdIrDpFnojrcq0jpHVzIU244ipNHhly4LIQP9nyD+7WLE1FgdCF2xdbxqwPxUKuvm
         bfW9194vooAnM5EhLSYSLoK4XbM/IcVMpIh/LAF6qy7/YzPMKYMcvExNP60P4REqYIeo
         Tev205qKR8IYdE9reIizK1TZY7E2B2NWQIJ3k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=amjybMaIMsTwtVuwZbVAthxRInuownSa3YbANe1PolHNWkFoXfu9mtifSwwoKTLq9V
         f0j+nysIMl4jd4VXwHDgS0xLx2V1ReKms5C/glPblEY5/1CW3dTc5yjn3EMlWT0QspG4
         4qrl/4OwcBb0yl4u9UxuOtA/5B1QwFQ2fZApg=
Received: by 10.90.100.20 with SMTP id x20mr2535949agb.12.1234720333594;
        Sun, 15 Feb 2009 09:52:13 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 34sm8300136agc.33.2009.02.15.09.52.13
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 15 Feb 2009 09:52:13 -0800 (PST)
Message-ID: <4998564C.4060401@gmail.com>
Date: Sun, 15 Feb 2009 12:52:12 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search(Query query, HitCollector results)
References: <A7D7923512D248089C37EE2FF65BB44A@msrvcn04> <499852D2.4020407@gmail.com> <5222E56D1BBD43069788DC43C7A1229C@msrvcn04>
In-Reply-To: <5222E56D1BBD43069788DC43C7A1229C@msrvcn04>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> So HitCollector#collect(int doc, float score) is not called in a special
> (default) order and must order the docs itself by score if one needs the
> hits sorted by relevance?
>   

> Presumably there is no score ordering to the hit id's lucene delivers to
> a HitCollector? i.e. they are delivered in the order they are found and
> score is neither ascending or descending i.e. the next score could be
> higher or lower that the previous one?
They come in doc id order unless you change 
BooleanQuery#setAllowDocsOutOfOrder(boolean allow) (I'm pretty sure 
thats the only case, but not positive)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 18:36:14 2009
Return-Path: <java-user-return-38525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20333 invoked from network); 15 Feb 2009 18:36:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 18:36:14 -0000
Received: (qmail 19564 invoked by uid 500); 15 Feb 2009 18:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19537 invoked by uid 500); 15 Feb 2009 18:36:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19526 invoked by uid 99); 15 Feb 2009 18:36:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 10:36:07 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 18:35:57 +0000
Received: by yx-out-2324.google.com with SMTP id 31so799029yxl.5
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 10:35:33 -0800 (PST)
Received: by 10.150.227.14 with SMTP id z14mr4466187ybg.219.1234722933379;
        Sun, 15 Feb 2009 10:35:33 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id t26sm9372867ele.15.2009.02.15.10.35.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 15 Feb 2009 10:35:32 -0800 (PST)
Message-Id: <0C4530B8-4CBD-4BF3-93E8-D0D16F2C5870@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4998564C.4060401@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: search(Query query, HitCollector results)
Date: Sun, 15 Feb 2009 13:35:30 -0500
References: <A7D7923512D248089C37EE2FF65BB44A@msrvcn04> <499852D2.4020407@gmail.com> <5222E56D1BBD43069788DC43C7A1229C@msrvcn04> <4998564C.4060401@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Mark Miller wrote:

>
>> So HitCollector#collect(int doc, float score) is not called in a  
>> special
>> (default) order and must order the docs itself by score if one  
>> needs the
>> hits sorted by relevance?
>>
>
>> Presumably there is no score ordering to the hit id's lucene  
>> delivers to
>> a HitCollector? i.e. they are delivered in the order they are found  
>> and
>> score is neither ascending or descending i.e. the next score could be
>> higher or lower that the previous one?
> They come in doc id order unless you change  
> BooleanQuery#setAllowDocsOutOfOrder(boolean allow) (I'm pretty sure  
> thats the only case, but not positive)

In general, the docIDs are not guaranteed to arrive in order to the  
HitCollector.  EG in 2.9, IndexSearcher can visit the segments in a  
different order.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 18:49:14 2009
Return-Path: <java-user-return-38526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30409 invoked from network); 15 Feb 2009 18:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 18:49:14 -0000
Received: (qmail 33852 invoked by uid 500); 15 Feb 2009 18:49:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33820 invoked by uid 500); 15 Feb 2009 18:49:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33809 invoked by uid 99); 15 Feb 2009 18:49:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 10:49:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.217.170 as permitted sender)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 18:48:57 +0000
Received: by gxk18 with SMTP id 18so2280022gxk.5
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 10:48:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=HU5+kjfDRTZWcPbByv8CzBmIq0kN2sa35sdyIuT8zH8=;
        b=IbBfUmbUs06pQuLmCqxJnS4fvZNhzhv9tbVSh1xwHDloF1ArcVrVaIiYPotHd0Cfg5
         SBAIqUtEn32JgtEjwHK5XE8ii5lg62RBm57yUc5aqniYsr/0MOxJnCgAMoctpqnzU/bN
         CbQ2E3DmRBnuXn1hXQpujXwq+apNtdfClINwk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=jPOwyjZd6iNlSztAJAVqVqZYkFREGsAqvvE9DKe7DSiMzo/e1kAUVZhWy3lG0bWVCj
         A1HEdFyKaRf45xXmlEMFGXdqKJ+0a7VTiE3FpSqy2KUJU3MYIEuvjTvq6/Jta9IcKMr6
         uPTiwc2UPiRMtx78och5tP8E16gxKby9G/eNE=
Received: by 10.90.84.2 with SMTP id h2mr1869662agb.22.1234723716837;
        Sun, 15 Feb 2009 10:48:36 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 9sm8429246agc.8.2009.02.15.10.48.36
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 15 Feb 2009 10:48:36 -0800 (PST)
Message-ID: <49986384.6030500@gmail.com>
Date: Sun, 15 Feb 2009 13:48:36 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search(Query query, HitCollector results)
References: <A7D7923512D248089C37EE2FF65BB44A@msrvcn04> <499852D2.4020407@gmail.com> <5222E56D1BBD43069788DC43C7A1229C@msrvcn04> <4998564C.4060401@gmail.com> <0C4530B8-4CBD-4BF3-93E8-D0D16F2C5870@mikemccandless.com>
In-Reply-To: <0C4530B8-4CBD-4BF3-93E8-D0D16F2C5870@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
>
> Mark Miller wrote:
>
>>
>>> So HitCollector#collect(int doc, float score) is not called in a 
>>> special
>>> (default) order and must order the docs itself by score if one needs 
>>> the
>>> hits sorted by relevance?
>>>
>>
>>> Presumably there is no score ordering to the hit id's lucene 
>>> delivers to
>>> a HitCollector? i.e. they are delivered in the order they are found and
>>> score is neither ascending or descending i.e. the next score could be
>>> higher or lower that the previous one?
>> They come in doc id order unless you change 
>> BooleanQuery#setAllowDocsOutOfOrder(boolean allow) (I'm pretty sure 
>> thats the only case, but not positive)
>
> In general, the docIDs are not guaranteed to arrive in order to the 
> HitCollector.  EG in 2.9, IndexSearcher can visit the segments in a 
> different order.
>
> Mike
>
Up to 2.4 (current release), they do come in order though, right?

We should update the javadocs in BooleanQuery before 2.9 goes out:

   * Specifics: By setting this option to true, calls to
   * {@link HitCollector#collect(int,float)} might be
   * invoked first for docid N and only later for docid N-1.
   * Being static, this setting is system wide.
   * </p>
   */
  public static void setAllowDocsOutOfOrder(boolean allow) {

This implies they are normally in doc id order (which they were until 
2.9 right?)

- Mark

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 20:56:01 2009
Return-Path: <java-user-return-38527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84301 invoked from network); 15 Feb 2009 20:56:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 20:56:01 -0000
Received: (qmail 22488 invoked by uid 500); 15 Feb 2009 20:55:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22449 invoked by uid 500); 15 Feb 2009 20:55:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22438 invoked by uid 99); 15 Feb 2009 20:55:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 12:55:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.219.15 as permitted sender)
Received: from [209.85.219.15] (HELO mail-ew0-f15.google.com) (209.85.219.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 20:55:45 +0000
Received: by ewy8 with SMTP id 8so1553482ewy.5
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 12:55:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=WBFscbf6laQOQnQIYjM3XLy0npZemHD0Zb/IgQ41CSU=;
        b=pGMHg4mIVZaPZlvtj1m7eTgJFFFIX/B9ldgvcIL31JsUPxteC/XW9e+636fbsDIe3y
         UaGLGMbefIFEGYiPSsmXHFeUecQo4S7Yp6ia38l1OHH7idGBvfnpm6QyFx/wqXqjk2h1
         lw/Sl8Y0BtD/sxH5Nv5nxS02WVPM57umgjfro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=FE4WEjozShghVU7ypGRA5U3All8MWzb9x10TvVMHYsdv9Z0wH+V79Tms6VwaVn1UTw
         wSAbLo76C43AeW1YL0PzySQwhEGsASIocFryHQZn21QMJOQTXk3etI4J5GkOwSUPRoBH
         DHiRUwax+EPrOm2IhitL/NngZ/ekZaHDvKjgU=
Received: by 10.210.45.17 with SMTP id s17mr1758827ebs.74.1234731323907;
        Sun, 15 Feb 2009 12:55:23 -0800 (PST)
Received: from elf_ulfving.lan (c-d78770d5.029-18-6d6c6d2.cust.bredbandsbolaget.se [213.112.135.215])
        by mx.google.com with ESMTPS id h1sm2652099nfh.16.2009.02.15.12.55.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 15 Feb 2009 12:55:23 -0800 (PST)
Message-Id: <F21EB688-862A-4C03-AA40-77B33D1EB04E@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1234711674.11015.15.camel@bohr>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Upper limit on number of Fields
Date: Sun, 15 Feb 2009 21:55:21 +0100
References: <1234711674.11015.15.camel@bohr>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


15 feb 2009 kl. 16.27 skrev Joel Halbert:

> Is there any practical limit on the number of fields that can be
> maintained on an index?
>
> My index looks something like this, 1 million documents. For each  
> group
> of 1000 documents I might have 10 indexed fields. This would mean in
> total about 10000 fields. Am I going to run into any issues here?
>
> The index in Ram based.


There is a resource cost to handle identical term values in several  
fields rather than keeping them in a single field as there is one  
index per field. You might however save CPU at query time by dividing  
them up in multiple fields as a field index would be smaller and thus  
faster to navigate.  But at the same time Lucene is more or less  
logarithmic when it comes to speed so you might actually save both  
speed and resources by using the same field if you can.

I don't think there will be a problem. A million documents might  
however consume a lot of RAM. Did you measure how much slower it is on  
FS? The difference really should not be that great, especially when  
the index is that large. Also, reports (including my own) indicate  
that running the index on SSD is  as fast as running in RAM so you  
might want to look in to how much bang for the buck you get by hosting  
in RAM rather than on SSD.

Hope this helps,

        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 15 20:58:05 2009
Return-Path: <java-user-return-38528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84989 invoked from network); 15 Feb 2009 20:58:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2009 20:58:05 -0000
Received: (qmail 25168 invoked by uid 500); 15 Feb 2009 20:57:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25137 invoked by uid 500); 15 Feb 2009 20:57:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25126 invoked by uid 99); 15 Feb 2009 20:57:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 12:57:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 20:57:50 +0000
Received: by gxk18 with SMTP id 18so2346233gxk.5
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 12:57:28 -0800 (PST)
Received: by 10.90.53.5 with SMTP id b5mr2304813aga.44.1234731447824;
        Sun, 15 Feb 2009 12:57:27 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 5sm8570310agc.10.2009.02.15.12.57.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 15 Feb 2009 12:57:27 -0800 (PST)
Message-Id: <88F015E0-F7A8-4E3D-B413-9E4C579EB4B0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <49986384.6030500@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: search(Query query, HitCollector results)
Date: Sun, 15 Feb 2009 15:57:26 -0500
References: <A7D7923512D248089C37EE2FF65BB44A@msrvcn04> <499852D2.4020407@gmail.com> <5222E56D1BBD43069788DC43C7A1229C@msrvcn04> <4998564C.4060401@gmail.com> <0C4530B8-4CBD-4BF3-93E8-D0D16F2C5870@mikemccandless.com> <49986384.6030500@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Mark Miller wrote:

> Michael McCandless wrote:
>>
>> Mark Miller wrote:
>>
>>>
>>>> So HitCollector#collect(int doc, float score) is not called in a  
>>>> special
>>>> (default) order and must order the docs itself by score if one  
>>>> needs the
>>>> hits sorted by relevance?
>>>>
>>>
>>>> Presumably there is no score ordering to the hit id's lucene  
>>>> delivers to
>>>> a HitCollector? i.e. they are delivered in the order they are  
>>>> found and
>>>> score is neither ascending or descending i.e. the next score  
>>>> could be
>>>> higher or lower that the previous one?
>>> They come in doc id order unless you change  
>>> BooleanQuery#setAllowDocsOutOfOrder(boolean allow) (I'm pretty  
>>> sure thats the only case, but not positive)
>>
>> In general, the docIDs are not guaranteed to arrive in order to the  
>> HitCollector.  EG in 2.9, IndexSearcher can visit the segments in a  
>> different order.
>>
>> Mike
>>
> Up to 2.4 (current release), they do come in order though, right?

I believe so (except for BooleanQuery as you described above).

> We should update the javadocs in BooleanQuery before 2.9 goes out:
>
>  * Specifics: By setting this option to true, calls to
>  * {@link HitCollector#collect(int,float)} might be
>  * invoked first for docid N and only later for docid N-1.
>  * Being static, this setting is system wide.
>  * </p>
>  */
> public static void setAllowDocsOutOfOrder(boolean allow) {
>
> This implies they are normally in doc id order (which they were  
> until 2.9 right?)

Agreed!  Can you commit that?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 00:08:12 2009
Return-Path: <java-user-return-38529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78214 invoked from network); 16 Feb 2009 00:08:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 00:08:12 -0000
Received: (qmail 45197 invoked by uid 500); 16 Feb 2009 00:08:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45167 invoked by uid 500); 16 Feb 2009 00:08:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45156 invoked by uid 99); 16 Feb 2009 00:08:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 16:08:04 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.217.170 as permitted sender)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 00:07:55 +0000
Received: by gxk18 with SMTP id 18so2451083gxk.5
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 16:07:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=OagsMZGoHDvUMg9fT3iGVU56ZZQGGCqn1wUZzBvkFDI=;
        b=ti/nhMyVMdZtKwGOb2QlTvKgka5vD18bEUgQTUcMJXAZ4I9CRuEQciIAA/MweGoPcI
         tP+thmN5jzdOGfxO7AIvC9X3mIlPB9fsft5vS+IHzCRn2C0pw2QRv0E5ZhFAZTw3wdrx
         x+ytHuEDp6IZb3oFzoil6to3F0jxKCRapvpCw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cMNANaC81olkjB5+CO2JqayTMJ3sxs+viZI957Xm1kL567ots7qVJrVtYYMnFySG6V
         8WsY3pHGD6lzSYUYDUqTYzV8DVOfWMk6Qq1qN4eICndo55Ce3upYfN5bqCAFsSMaQ1Ry
         VtXqHwNCLWN+TzJ3z1g6NnZXpcKh1hlkfendA=
MIME-Version: 1.0
Received: by 10.220.95.202 with SMTP id e10mr963878vcn.12.1234742852796; Sun, 
	15 Feb 2009 16:07:32 -0800 (PST)
In-Reply-To: <49979264.4060501@gmail.com>
References: <5d53d5770812071051g49fc6cau7ed2b142c88fd7e2@mail.gmail.com>
	 <493D12E6.4020701@gmail.com>
	 <5d53d5770902141903t2bcd1af1ic12ddcfc43d87446@mail.gmail.com>
	 <49979264.4060501@gmail.com>
Date: Sun, 15 Feb 2009 20:07:32 -0400
Message-ID: <5d53d5770902151607s4efec055x13642cedbcc5af58@mail.gmail.com>
Subject: Re: Fragment Highlighter Phrase?
From: Ian Vink <ianvink@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64eacb42140ef0462fdf9bd
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64eacb42140ef0462fdf9bd
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks Mark,
I got the latest Contrib bits for Highlighter.net (Jan 28/2008 Version
2.3.2) but it looks similar to the older 2.0.0

There is a QueryScroer only.

Any ideas? (Really important to me :)

Ian



On Sat, Feb 14, 2009 at 11:56 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Sorry, I wasn't specific enough. I meant the SpanScorer in the contrib
> highlighter package - they are very different.
>
> I assume the latest Highlighter package has been ported to Lucene .NET, but
> if not I know of a guy that ported the SpanScorer stuff
> to C# a while back. I might be able to get my hands on that still, though
> it may be dated now. First check the highlighter contrib
> and see if its there though.
>
> - Mark
>
>
> Ian Vink wrote:
>
>> I use the Lucene.NET implementation. (2.3)
>> There is a Lucene.Net.Search.Spans.SpanScorer class, but it's not public I
>> assume I'd have to use it as a base class for my own.
>>
>> Do you have a simple example on how, in Java, to use the SpanScorer to get
>> a
>> highlighter to return only fragments that are part of the phrase in the
>> Query?
>>
>> Ian
>>
>>
>>
>> On Mon, Dec 8, 2008 at 8:28 AM, Mark Miller <markrmiller@gmail.com>
>> wrote:
>>
>>
>>
>>> Ian Vink wrote:
>>>
>>>
>>>
>>>> Is there a way to get phrases counted in the list of fragments that come
>>>> back from Highlighter.GetBestFragments() in general.
>>>> It seems to only take words into account.
>>>>
>>>> Ian
>>>>
>>>>
>>>>
>>>>
>>>>
>>> Not sure I fully understand, but have you tried the SpanScorer? It allows
>>> the Highlighter to work with phrase/span queries.
>>>
>>> - Mark
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64eacb42140ef0462fdf9bd--

From java-user-return-38530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 00:29:54 2009
Return-Path: <java-user-return-38530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84873 invoked from network); 16 Feb 2009 00:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 00:29:53 -0000
Received: (qmail 60958 invoked by uid 500); 16 Feb 2009 00:29:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60927 invoked by uid 500); 16 Feb 2009 00:29:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60915 invoked by uid 99); 16 Feb 2009 00:29:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 16:29:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.170 as permitted sender)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 00:29:38 +0000
Received: by gxk18 with SMTP id 18so2463292gxk.5
        for <java-user@lucene.apache.org>; Sun, 15 Feb 2009 16:29:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=GxFCcGOB8rBduBtrY1v+tJX6c8SgbJ03RTH9qESP9Ow=;
        b=ciFnyYzfXK7+sk6lVKv5l0Y5E/xoaS2xCAuOkyJoA10wtNapgoBE62Sy+oDKVb9NTz
         OQGbcDht3JvGvwlBn1ofvb37vqXICvB4md23OZqtpZt4MvInuK9ib9veK8knGJ87aiYZ
         kozPyYtxyvugi9EYT4nh1ckzKZJxeHLnMXvnY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=jLZSsQfcw/vklztFgL8aDpVPsvkaNkoDvh6kDeU2UNPhddbyyz1hzH/bmM73vlqF6c
         04RYjh3dxuCqzR66Yk+SPd7zWWr2BbSwnuvOkJtg0ILJm/AYpKVWjqJH8VKF2WU8NNuR
         qoRcY6K/6GZWo/f6CeloRkDWLqtlQlkWilBcA=
Received: by 10.90.82.8 with SMTP id f8mr2679145agb.21.1234744157000;
        Sun, 15 Feb 2009 16:29:17 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 36sm8743189agc.30.2009.02.15.16.29.16
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 15 Feb 2009 16:29:16 -0800 (PST)
Message-ID: <4998B35C.707@gmail.com>
Date: Sun, 15 Feb 2009 19:29:16 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Upper limit on number of Fields
References: <1234711674.11015.15.camel@bohr>
In-Reply-To: <1234711674.11015.15.camel@bohr>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

In my experience, the main issue to be concerned about with tons of 
fields is norms. You'll likely have to turn them off for most of the 
fields unless you have plenty of RAM to burn. They are stored in byte 
arrays of size maxdoc for each field (eg non sparse). Other than that, I 
don't think there is a pronounced penalty in my experience for tons of 
fields. 10,000 fields is probably more than I have ever seen though, so 
do report back how it goes.


-- 
- Mark

http://www.lucidimagination.com



Joel Halbert wrote:
> Hi,
>
> Is there any practical limit on the number of fields that can be
> maintained on an index?
>
> My index looks something like this, 1 million documents. For each group
> of 1000 documents I might have 10 indexed fields. This would mean in
> total about 10000 fields. Am I going to run into any issues here?
>
> The index in Ram based.
>
> Rgs,
> Joel 
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 03:27:15 2009
Return-Path: <java-user-return-38531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56147 invoked from network); 16 Feb 2009 03:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 03:27:15 -0000
Received: (qmail 35225 invoked by uid 500); 16 Feb 2009 03:27:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35188 invoked by uid 500); 16 Feb 2009 03:27:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35177 invoked by uid 99); 16 Feb 2009 03:27:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 19:27:08 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 03:27:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LYu7y-0006Mi-6f
	for java-user@lucene.apache.org; Sun, 15 Feb 2009 19:26:38 -0800
Message-ID: <22031092.post@talk.nabble.com>
Date: Sun, 15 Feb 2009 19:26:38 -0800 (PST)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: Boost factor in MultiFieldQueryParser
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Can I boost different fields in MultiFieldQueryParser with different
factors? Also, what is the maximum boost factor value I can assign to a
field?

Thanks a ton! Ed


-- 
View this message in context: http://www.nabble.com/Boost-factor-in-MultiFieldQueryParser-tp22031092p22031092.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 05:49:15 2009
Return-Path: <java-user-return-38532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99116 invoked from network); 16 Feb 2009 05:49:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 05:49:15 -0000
Received: (qmail 8615 invoked by uid 500); 16 Feb 2009 05:49:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8582 invoked by uid 500); 16 Feb 2009 05:49:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8571 invoked by uid 99); 16 Feb 2009 05:49:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 21:49:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.165.102.83] (HELO web15803.mail.cnb.yahoo.com) (202.165.102.83)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Feb 2009 05:48:57 +0000
Received: (qmail 53711 invoked by uid 60001); 16 Feb 2009 05:48:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.cn;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=rBKhqBoqWTa6khnoVZUwdfUqVOmUk7qXfRIxT0Go7gTx3xzlcMqifsDcA5zNzGHa2KEcUmcG8plI3retpbo6D4yuVuJBFskBeoInCNh5jLtEGSOeUYtACsDw7Q9TayfxLXnfA6eamGSsdY+srQ0syuYvNS/axsAxCjGqNVfWZqU=;
X-YMail-OSG: _H9fVqQVM1nxHC.5TYk4pYUme9jOTOyyNUv7GE_NGMIR1SSLZG4CIcVqczALFrlTyH_qSD17zn8nXQRMmX.xcRgyCKZJb8UlaHjG8jZRUGFY_kH4nGHzVCOPZJ7qRiLsCRsRuCU1V8sty0Nv41jdWbyYxeKqYadyo_JLZwFmvl4ATn0..xmf7Q.LL4d_MUAm6anG65UmBUxNF2x9Ms3UF0F3OXhMYgGyGA_XmjJ3qIKEQME-
Received: from [220.181.24.2] by web15803.mail.cnb.yahoo.com via HTTP; Mon, 16 Feb 2009 13:48:33 CST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Mon, 16 Feb 2009 13:48:33 +0800 (CST)
From: =?gb2312?B?1s69rSDN9Q==?= <wangzhijiang999@yahoo.com.cn>
Subject: the efficiency of creating indexes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1441479969-1234763313=:53700"
Message-ID: <284995.53700.qm@web15803.mail.cnb.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1441479969-1234763313=:53700
Content-Type: text/plain; charset=gb2312
Content-Transfer-Encoding: quoted-printable

As i know, the time effciency of creating index is non-linearity with the s=
ize of documents. For example, if the size of indexes is 1G, the time cost =
is 2 hours, If the size of indexes is 10G, the time cost may be 30 hours. W=
ho can tell me what is the reason? Any tips will be appreciated.=0A=0A=0A  =
    ___________________________________________________________ =0A  =BA=C3=
=CD=E6=BA=D8=BF=A8=B5=C8=C4=E3=B7=A2=A3=AC=D3=CA=CF=E4=BA=D8=BF=A8=C8=AB=D0=
=C2=C9=CF=CF=DF=A3=A1 =0Ahttp://card.mail.cn.yahoo.com/
--0-1441479969-1234763313=:53700--

From java-user-return-38533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 07:52:25 2009
Return-Path: <java-user-return-38533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58649 invoked from network); 16 Feb 2009 07:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 07:52:25 -0000
Received: (qmail 91362 invoked by uid 500); 16 Feb 2009 07:52:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91147 invoked by uid 500); 16 Feb 2009 07:52:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91136 invoked by uid 99); 16 Feb 2009 07:52:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Feb 2009 23:52:18 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 07:52:10 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LYyGb-0006QM-Ld
	for java-user@lucene.apache.org; Sun, 15 Feb 2009 23:51:49 -0800
Message-ID: <22032888.post@talk.nabble.com>
Date: Sun, 15 Feb 2009 23:51:49 -0800 (PST)
From: Abu Abdulla <montaqa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strange output
In-Reply-To: <359a92830902100519v13e0e39eq7c8dc90de5bdac9c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: montaqa@gmail.com
References: <21927297.post@talk.nabble.com> <359a92830902100519v13e0e39eq7c8dc90de5bdac9c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm using this for searching (extracted and not full code):


IndexSearcher indexSearcher = new IndexSearcher("index");

final QueryParser queryParser = new QueryParser("Line", myAnalyzer);
queryParser.setAllowLeadingWildcard(true);
final Query query = queryParser.parse(searchText);

final BitSet bits = new BitSet(indexSearcher.maxDoc());
indexSearcher.search(query, new HitCollector(){public void collect(int doc,
float score){bits.set(doc);}});

for(int j=0; j<bits.length() ; j++)
{
	if(bits.get(j))
	{
		final Document doc = indexSearcher.doc(j);
		searchResults.addElement(doc.get("name"));
	}
}
---------

for indexing:

final IndexWriter indexWriter = new IndexWriter("index", myAnalyzer, true,
new IndexWriter.MaxFieldLength(1500));

while(rs.next())
{
	final Document doc = new Document();
	doc.add(new Field("name", rs.getString("name"), Field.Store.YES,
Field.Index.NOT_ANALYZED));
	doc.add(new Field("Line" , rs.getString("Line"), Field.Store.YES,
Field.Index.ANALYZED));
	
	indexWriter.addDocument(doc);
}

----------

it happens only sometimes.

thanks


Erick Erickson wrote:
> 
> You need to provide more context for your question, as
> it is it's unanswerable.
> 
> What are you doing when you get this message? What are
> you trying to do? What is your setup? Code fragments
> would be useful for both your indexing and searching.
> 

-- 
View this message in context: http://www.nabble.com/Strange-output-tp21927297p22032888.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 12:01:12 2009
Return-Path: <java-user-return-38534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50111 invoked from network); 16 Feb 2009 12:01:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 12:01:12 -0000
Received: (qmail 31297 invoked by uid 500); 16 Feb 2009 12:01:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31268 invoked by uid 500); 16 Feb 2009 12:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31257 invoked by uid 99); 16 Feb 2009 12:01:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 04:01:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Feb 2009 12:00:56 +0000
Received: (qmail invoked by alias); 16 Feb 2009 12:00:34 -0000
Received: from e178118213.adsl.alicedsl.de (EHLO msrvcn04) [85.178.118.213]
  by mail.gmx.net (mp062) with SMTP; 16 Feb 2009 13:00:34 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/7h5QhKX77++/bmWlSO5SqspYrhryftdhRFmlo54
	MpWE7/fumuJIVR
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: FieldSelector
Date: Mon, 16 Feb 2009 13:00:37 +0100
Message-ID: <34E349172A224B36A1FED238631A244B@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmQLiI1DtQmdJsTRK2ZfzqBr1Un0w==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.75
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

what kind of fields loads IndexSearcher.Document doc(int i)? Only those with
Field.Store.YES?
I'm asking because I do not need to load the tokens - should I use a
FieldSelector or are these fields not loaded?

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 12:22:17 2009
Return-Path: <java-user-return-38535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55020 invoked from network); 16 Feb 2009 12:22:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 12:22:17 -0000
Received: (qmail 53370 invoked by uid 500); 16 Feb 2009 12:22:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53037 invoked by uid 500); 16 Feb 2009 12:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53026 invoked by uid 99); 16 Feb 2009 12:22:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 04:22:10 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 12:22:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id B97F9109F2B
	for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 04:21:39 -0800 (PST)
Message-Id: <CE24AC71-159C-4093-A19E-93675FFA13FA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <34E349172A224B36A1FED238631A244B@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: FieldSelector
Date: Mon, 16 Feb 2009 07:21:38 -0500
References: <34E349172A224B36A1FED238631A244B@msrvcn04>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 16, 2009, at 7:00 AM, <spring@gmx.eu> <spring@gmx.eu> wrote:

> Hi,
>
> what kind of fields loads IndexSearcher.Document doc(int i)? Only  
> those with
> Field.Store.YES?

Yes, Lucene can only load those fields that are stored.

>
> I'm asking because I do not need to load the tokens - should I use a
> FieldSelector or are these fields not loaded?

FieldSelector is used to selectively load fields that you want  
returned with the document.   The tokens produced by analysis are  
stored in other places and will not be returned by the document()  
method.



--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 13:18:54 2009
Return-Path: <java-user-return-38536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71699 invoked from network); 16 Feb 2009 13:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 13:18:54 -0000
Received: (qmail 18261 invoked by uid 500); 16 Feb 2009 13:18:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18231 invoked by uid 500); 16 Feb 2009 13:18:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18220 invoked by uid 99); 16 Feb 2009 13:18:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 05:18:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 13:18:38 +0000
Received: by yw-out-2324.google.com with SMTP id 2so870171ywt.5
        for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 05:18:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=1ExvBfuLik5UNJcJe+fauHITmHnSHjw3TnSnPTqPPJE=;
        b=nJOaZ1SWr9rozhgp2uTW2bMFXVYn1XxHk60NFi/E74VliGoyhfCo7LCO063Cw+5aj7
         RgrS0D6COS4UYH0xPu0KdU+myL/GEVlnviIYHNRYo/a1KqDqCkazmfVZlbv+nQQjZtMi
         4vRv94fSfdAha2OEG0EBwHDFfHYlnQBnfHH+Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FDwyfEMzCpBWNJlUbzNY7KyA2/rmrQTsO5uAozBVhmYJDwAVMs+8tw5/htOmktvw9q
         8FxcT4QhRiG9Slg+RcK1w+WwFcYjsZ78Ricw83LkT34MuC8uoYuEed6Ot+ffKGKOBnR8
         +spNDpZd8uiCAmxh5t/KfJWVD4gyyOkh5+dPU=
MIME-Version: 1.0
Received: by 10.90.95.18 with SMTP id s18mr2955580agb.92.1234790297662; Mon, 
	16 Feb 2009 05:18:17 -0800 (PST)
In-Reply-To: <34E349172A224B36A1FED238631A244B@msrvcn04>
References: <34E349172A224B36A1FED238631A244B@msrvcn04>
Date: Mon, 16 Feb 2009 08:18:17 -0500
Message-ID: <359a92830902160518l79c98c46jee6b2c1f2f090a1c@mail.gmail.com>
Subject: Re: FieldSelector
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163628378a10736804630905db
X-Virus-Checked: Checked by ClamAV on apache.org

--00163628378a10736804630905db
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Depending upon the structure of your index, FieldSelector can
make a dramatic difference in your query speed. I wrote up
some data peculiar to my setup, I think if you search FieldSelector
on the Wiki you can find it.

Best
Erick

On Mon, Feb 16, 2009 at 7:00 AM, <spring@gmx.eu> wrote:

> Hi,
>
> what kind of fields loads IndexSearcher.Document doc(int i)? Only those
> with
> Field.Store.YES?
> I'm asking because I do not need to load the tokens - should I use a
> FieldSelector or are these fields not loaded?
>
> Thank you
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163628378a10736804630905db--

From java-user-return-38537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 15:50:13 2009
Return-Path: <java-user-return-38537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99486 invoked from network); 16 Feb 2009 15:50:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 15:50:13 -0000
Received: (qmail 96925 invoked by uid 500); 16 Feb 2009 15:50:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96894 invoked by uid 500); 16 Feb 2009 15:50:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96883 invoked by uid 99); 16 Feb 2009 15:50:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 07:50:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [79.170.194.127] (HELO mail.roo10.com) (79.170.194.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 15:49:58 +0000
Received: from [192.168.60.45] (78-105-13-3.dsl.cnl.uk.net [78.105.13.3])
	by mail.roo10.com (Postfix) with ESMTP id 72D824610066
	for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 15:49:34 +0000 (GMT)
Subject: Pattern for maintaining FSDirectory copy of RAMDirectory
From: Joel Halbert <joel@su3analytics.com>
To: Lucene Users <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: SU3 Analytics
Date: Mon, 16 Feb 2009 15:49:31 +0000
Message-Id: <1234799371.7609.20.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a RAMDirectory based index. The document source for the index is
a database table, where content to be indexed is stored alongside a
status (pending_index, indexed, pending_delete, deleted). Each time the
application is started, and periodically thereafter, all documents from
the database that are "pending_index" or "indexed" are loaded and added
to the index. Once this is done their status is updated to
"indexed" (and this process repeats itself as required).

I would now like to keep a FSDir copy of the index, to speedup the
application start time. I am proposing to simply update both the FSDir
and RAMDir in tandem i.e. whenever a document is to be added to the
index, both Dirs are updated in one "transaction" (and the database
record is then updated to "indexed"). Then when the application is
restarted we know that all database records with a status of "indexed"
exist in the FSDir. This means I can load the FSDir into the InMem dir,
then update both with any outstanding database records which are
"pending_index".

Can anyone see any issues with the above system? Is there anything I
should be aware of when maintaining a RAMDir in parallel to a FSDir?

Regards,
Joel



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 16:15:25 2009
Return-Path: <java-user-return-38538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11411 invoked from network); 16 Feb 2009 16:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 16:15:25 -0000
Received: (qmail 37602 invoked by uid 500); 16 Feb 2009 16:15:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37579 invoked by uid 500); 16 Feb 2009 16:15:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37568 invoked by uid 99); 16 Feb 2009 16:15:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 08:15:17 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 16:15:10 +0000
Received: by yx-out-2324.google.com with SMTP id 31so889088yxl.5
        for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 08:14:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=V48aK7ZFXbx3AvXnXyJFAPKe46viu0Io2mU15lEJ39k=;
        b=rM3QxBkevZrdjxJWF7SyXMaP41sANQnspzvCD6tidCS89GEPPsDSXbBXgFKH2PIo4b
         GuzEjyLhE/AIr/NFmlEvytqxZwEG4+VFU+eYthkTa+oOS3ZddQvSi/NWra7G3tMlrdKM
         IvVzvjTk18ygePonBG13T9ATXlmj+wjM01s14=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=n3z18msBAv0flCrKX/6194kGrkADKHv/iiCsGr5zFbZIeFztyyOx7YhxFSsk80Hxjw
         XqOLLAWgtBIDEmYIRYjIz9DzVlTYyn5Ewg8R0UpDicjyqAG/AGgzxZ93IeAEUvvtshpD
         l7wxuCGxc+EPxfWeKZqG0EadJ1FQQCsjzWfMk=
MIME-Version: 1.0
Received: by 10.90.75.13 with SMTP id x13mr1936007aga.52.1234800889746; Mon, 
	16 Feb 2009 08:14:49 -0800 (PST)
In-Reply-To: <1234799371.7609.20.camel@bohr>
References: <1234799371.7609.20.camel@bohr>
Date: Mon, 16 Feb 2009 11:14:49 -0500
Message-ID: <359a92830902160814l5f79c7fer8b93de7109d50e1@mail.gmail.com>
Subject: Re: Pattern for maintaining FSDirectory copy of RAMDirectory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163628360a66d54504630b7c3e
X-Virus-Checked: Checked by ClamAV on apache.org

--00163628360a66d54504630b7c3e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

WARNING: I haven't had occasion to use the Directory.copy
method, so I'm talking a bit theoretically here.....


I guess my main issue with your scheme is the usual
abnormal termination issues and how you can be absolutely
sure boust what's in your FSDir. So I guess what I'd
do is create some kind of marker for whether your app was
gracefully shut down. Then, when gracefully shutting down,
use Directory.copy to copy FROM your RAMDir TO your
FSDir.

Upon startup, you can check your marker and, if all is well,
read your FSDirectory into your RAMDir, and away you go.
If you have any reason to doubt, you can reconstruct your
RAMDir from the DB.

Then you wouldn't have to worry in the least about making
parallel, transactional updates, you'd just use your RAMDir
and go from there.

Of course you could periodically do this copy if you didn't
regularly shut down.....

I leave the construction of the marker as an exercise for
the reader <G>...

Best
Erick

On Mon, Feb 16, 2009 at 10:49 AM, Joel Halbert <joel@su3analytics.com>wrote:

> Hi,
>
> I have a RAMDirectory based index. The document source for the index is
> a database table, where content to be indexed is stored alongside a
> status (pending_index, indexed, pending_delete, deleted). Each time the
> application is started, and periodically thereafter, all documents from
> the database that are "pending_index" or "indexed" are loaded and added
> to the index. Once this is done their status is updated to
> "indexed" (and this process repeats itself as required).
>
> I would now like to keep a FSDir copy of the index, to speedup the
> application start time. I am proposing to simply update both the FSDir
> and RAMDir in tandem i.e. whenever a document is to be added to the
> index, both Dirs are updated in one "transaction" (and the database
> record is then updated to "indexed"). Then when the application is
> restarted we know that all database records with a status of "indexed"
> exist in the FSDir. This means I can load the FSDir into the InMem dir,
> then update both with any outstanding database records which are
> "pending_index".
>
> Can anyone see any issues with the above system? Is there anything I
> should be aware of when maintaining a RAMDir in parallel to a FSDir?
>
> Regards,
> Joel
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163628360a66d54504630b7c3e--

From java-user-return-38539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 19:21:22 2009
Return-Path: <java-user-return-38539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20258 invoked from network); 16 Feb 2009 19:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 19:21:19 -0000
Received: (qmail 60824 invoked by uid 500); 16 Feb 2009 19:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60793 invoked by uid 500); 16 Feb 2009 19:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60782 invoked by uid 99); 16 Feb 2009 19:21:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 11:21:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.217.170 as permitted sender)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 19:21:03 +0000
Received: by gxk18 with SMTP id 18so3208017gxk.5
        for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 11:20:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=HlltU7ap3G+azm6hFLsH0N1QpDWfucUn1oWDlcRjBvQ=;
        b=E8jOa+UP0FnxMlY9liOmho1TK7bZJoRaflPfzrGI6mnSICiCMvExwdJlzxQ/jL0O3i
         Q48Swi7ax7KbpBGnTG2gQeNFXCy0b56WD1s4Yci6Th+xCQMZtRGO257VFGwJMe06o+eR
         9GuImi4h0ckDNMJ+GKzef4f50qz9vx3FnIRB4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=i0Q18xfeS0tDHJ5ZM2rJoZoIe7/h0DjHj4lb09u+IwN6+jQbYyr6gUf0Vaz7kQP4q0
         t1YzeA5RsQ4xoc0UW928RLqywT0LhOcXAyRj1Sl1Zky4AHlH/ovYWaVD6/iydDU9Jmn/
         9053bIheboPwTRo7+r/E1NbhtgJIAEHTVnRuU=
Received: by 10.101.67.11 with SMTP id u11mr1851009ank.85.1234812042333;
        Mon, 16 Feb 2009 11:20:42 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id c23sm7235144ana.32.2009.02.16.11.20.41
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 16 Feb 2009 11:20:41 -0800 (PST)
Message-ID: <4999BC88.1050000@gmail.com>
Date: Mon, 16 Feb 2009 14:20:40 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090103)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fragment Highlighter Phrase?
References: <5d53d5770812071051g49fc6cau7ed2b142c88fd7e2@mail.gmail.com>	 <493D12E6.4020701@gmail.com>	 <5d53d5770902141903t2bcd1af1ic12ddcfc43d87446@mail.gmail.com>	 <49979264.4060501@gmail.com> <5d53d5770902151607s4efec055x13642cedbcc5af58@mail.gmail.com>
In-Reply-To: <5d53d5770902151607s4efec055x13642cedbcc5af58@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ian Vink wrote:
> Thanks Mark,
> I got the latest Contrib bits for Highlighter.net (Jan 28/2008 Version
> 2.3.2) but it looks similar to the older 2.0.0
>
> There is a QueryScroer only.
>
> Any ideas? (Really important to me :)
>
> Ian
>
>
>   
I'll send out an email and see if I can get my hands on the C# port a 
guy did a year or so ago. He has offered to share it in the past.

-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 20:01:24 2009
Return-Path: <java-user-return-38540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36925 invoked from network); 16 Feb 2009 20:01:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 20:01:24 -0000
Received: (qmail 29783 invoked by uid 500); 16 Feb 2009 20:01:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29553 invoked by uid 500); 16 Feb 2009 20:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29542 invoked by uid 99); 16 Feb 2009 20:01:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 12:01:17 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 20:01:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LZ9e4-0004eJ-1S
	for java-user@lucene.apache.org; Mon, 16 Feb 2009 12:00:48 -0800
Message-ID: <22044596.post@talk.nabble.com>
Date: Mon, 16 Feb 2009 12:00:48 -0800 (PST)
From: AmigoProgrammer <mgr@papaecho.com>
To: java-user@lucene.apache.org
Subject: Querying for a catagory
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mgr@papaecho.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have a number of documents that each relate to a client. I would like to
use an index and queries to answer two question:
- Find relevant documents
- Find relevant clients

The first one is straight forward.
For the second one, I am wondering. Should I iterate over the hits and
compute the most relevant clients. Or is there a clever build-in way of
answering the question? 

Anyone that can help me crack the nut?

Best,

Michael
-- 
View this message in context: http://www.nabble.com/Querying-for-a-catagory-tp22044596p22044596.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 20:38:22 2009
Return-Path: <java-user-return-38541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53769 invoked from network); 16 Feb 2009 20:38:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 20:38:21 -0000
Received: (qmail 81905 invoked by uid 500); 16 Feb 2009 20:38:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81872 invoked by uid 500); 16 Feb 2009 20:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81861 invoked by uid 99); 16 Feb 2009 20:38:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 12:38:15 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 20:38:09 +0000
Received: by fg-out-1718.google.com with SMTP id l26so303071fgb.27
        for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 12:37:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=HN3lgzR8evGtYbAPU+FYFwG/F1vufdQCm8X15xjsJNs=;
        b=Hhr/3EEMxEGdR5CibFOBAycMEbCXowIk43qR9M43kEhn0HP2DE+DYyoRBQJBJ+JYXW
         qZZWISTPQoBRhs6fbILpcviZsOw9+VOw8yqAKm8SJ1i9OceKsoTDJWYL8rDoeo2DqmYc
         +mTOWTlVR3qUePAsvyktKpTZeXMBbd81+iRSg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=mTrO5ubwVT4nM8JKdYcVIojpGK1PfYR0Gp31ze6e1g+RQhfknWyNV2uXVdAFkms/7g
         t2lOSDjKKYykYeh9aabrTKCbH3QZLspmbwfotYiw3FL3aM4ZEa+EpfXM9GMVdPgaoDeE
         76xluzz2CrGS8xqozw5/LaGJY2KpCY7eM5RYM=
MIME-Version: 1.0
Received: by 10.86.3.4 with SMTP id 4mr1665433fgc.41.1234816667465; Mon, 16 
	Feb 2009 12:37:47 -0800 (PST)
Date: Mon, 16 Feb 2009 20:37:47 +0000
Message-ID: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
Subject: Faceted Search using Lucene
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=000e0cd24804d3b85c04630f2862
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd24804d3b85c04630f2862
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi
I am looking at building a faceted search using Lucene.  I know that Solr
comes with this built in, however I would like to try this by myself
(something to add to my CV!).  I have been looking around and I found that
you can use the IndexReader and use TermVectors.  This looks ok but I'm not
sure how to filter the results so that a particular user can only see a
subset of results.  The next option I was looking at was something like

Term term1 = new Term("brand", "ford");

Term term2 = new Term("brand", "vw");

Term[] termsArray = new Term[] { term1, term2 };un

int[] docFreqs = indexSearcher.docFreqs(termsArray);


The only problem here is that I have to provide the brand type each time a
new brand is created.  Again I'm not sure how I can filter the results here.
It may be that I'm using the wrong api methods to do this.


I would be grateful if I could get some advice on this.



Cheers

Amin


P.S.  I am basically trying to do something that displays the following


Personal Contact (23) Business Contact (45) and so on..

--000e0cd24804d3b85c04630f2862--

From java-user-return-38542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 20:48:55 2009
Return-Path: <java-user-return-38542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56510 invoked from network); 16 Feb 2009 20:48:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 20:48:54 -0000
Received: (qmail 93051 invoked by uid 500); 16 Feb 2009 20:48:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93021 invoked by uid 500); 16 Feb 2009 20:48:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93010 invoked by uid 99); 16 Feb 2009 20:48:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 12:48:48 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of crackeur@comcast.net designates 76.96.30.64 as permitted sender)
Received: from [76.96.30.64] (HELO QMTA07.emeryville.ca.mail.comcast.net) (76.96.30.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 20:48:39 +0000
Received: from OMTA04.emeryville.ca.mail.comcast.net ([76.96.30.35])
	by QMTA07.emeryville.ca.mail.comcast.net with comcast
	id Gd2W1b0050lTkoCA7koKqm; Mon, 16 Feb 2009 20:48:19 +0000
Received: from sz0167.ev.mail.comcast.net ([76.96.27.96])
	by OMTA04.emeryville.ca.mail.comcast.net with comcast
	id GkoK1b00F24Qqng8QkoKfP; Mon, 16 Feb 2009 20:48:19 +0000
Date: Mon, 16 Feb 2009 20:48:19 +0000 (UTC)
From: crackeur@comcast.net
To: java-user@lucene.apache.org
Message-ID: <698472717.777911234817299444.JavaMail.root@sz0167a.emeryville.ca.mail.comcast.net>
In-Reply-To: <4999BC88.1050000@gmail.com>
Subject: [ANN] VTD-XML 2.5
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41487_1966215079.1234817299443"
X-Originating-IP: [24.6.133.27]
X-Mailer: Zimbra 5.0.11_GA_2730.RHEL5_64 (ZimbraWebClient - IE7 (Win)/5.0.11_GA_2730.RHEL5_64)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41487_1966215079.1234817299443
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

VTD-XML 2.5 is now released. Please go to https://sourceforge.net/project/s=
howfiles.php?group_id=3D110612&package_id=3D120172&release_id=3D661376 =C2=
=A0to download the latest version.=20

Changes from Version 2.4 (2/2009)=20

* Added separate VTD indexing generating and loading (see http://vtd-xml.sf=
.net/persistence.html for further info)=20
* Integrated extended VTD supporting 256 GB doc (In Java only).=20
* Added duplicateNav() for replicate multiple VTDNav instances sharing XML,=
 VTD and LC buffer (availabe in Java and C#).=20
* Various bug fixes and enhancements=20

------=_Part_41487_1966215079.1234817299443--

From java-user-return-38543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 20:53:36 2009
Return-Path: <java-user-return-38543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58369 invoked from network); 16 Feb 2009 20:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 20:53:36 -0000
Received: (qmail 5268 invoked by uid 500); 16 Feb 2009 20:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5246 invoked by uid 500); 16 Feb 2009 20:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5235 invoked by uid 99); 16 Feb 2009 20:53:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 12:53:29 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 20:53:21 +0000
Received: by yx-out-2324.google.com with SMTP id 31so927091yxl.5
        for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 12:53:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=0TTOcRKgkhmBvZW1l+PfRRt7eTK5BOrJ1yzhQbigyD4=;
        b=W2lgsHVMt8eNjEjjdVFK3VD53jb+vAahoSfe5C1HR5NYfRbQcw+G3x90khUpxswc7z
         HgrlasC+xtR+1KTF4/QVHZDTJK+8c8g3r1/kWynfGLw3NfpJxczppiZPjqR60YBbExwi
         gGorXn07xcxglRVvgSdTTUK9gyB7uNp0LrinI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WO8dqcydHArqIggKiQ0LuU5tENpX7wZozBgMfMPOqUh/N1NSduKAHYVjIoG61wtZhT
         /kAbPy8DS2wd0W/rifJ81HiZyg2syDEokSlzf/PI+Tm2vvnzDeFCB6e1TUXuOJY47EhM
         l37XDBjQL3ytsZ9tMhQVzVR9gVCpWa6Qp9VIA=
MIME-Version: 1.0
Received: by 10.90.65.14 with SMTP id n14mr3206489aga.61.1234817580829; Mon, 
	16 Feb 2009 12:53:00 -0800 (PST)
In-Reply-To: <22044596.post@talk.nabble.com>
References: <22044596.post@talk.nabble.com>
Date: Mon, 16 Feb 2009 15:53:00 -0500
Message-ID: <359a92830902161253m1bfc4ad0sa86b17ed0027aa17@mail.gmail.com>
Subject: Re: Querying for a catagory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636283b74448c4104630f5fdc
X-Virus-Checked: Checked by ClamAV on apache.org

--001636283b74448c4104630f5fdc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

What constitutes a "relevant client"? If you want
to restrict the returned documents to a particular client
(or even a set of clients) a simple +client:<client name>
would do the trick.....

Or you could create a Filter for "relevant clients".

If neither of these helps, could you clarify your
definition of a relevant client?

Best
Erick


On Mon, Feb 16, 2009 at 3:00 PM, AmigoProgrammer <mgr@papaecho.com> wrote:

>
> Hi,
>
> I have a number of documents that each relate to a client. I would like to
> use an index and queries to answer two question:
> - Find relevant documents
> - Find relevant clients
>
> The first one is straight forward.
> For the second one, I am wondering. Should I iterate over the hits and
> compute the most relevant clients. Or is there a clever build-in way of
> answering the question?
>
> Anyone that can help me crack the nut?
>
> Best,
>
> Michael
> --
> View this message in context:
> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22044596.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636283b74448c4104630f5fdc--

From java-user-return-38544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 16 21:52:59 2009
Return-Path: <java-user-return-38544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81624 invoked from network); 16 Feb 2009 21:52:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2009 21:52:59 -0000
Received: (qmail 6091 invoked by uid 500); 16 Feb 2009 21:52:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6059 invoked by uid 500); 16 Feb 2009 21:52:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6048 invoked by uid 99); 16 Feb 2009 21:52:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 13:52:52 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 21:52:43 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id 927D020C1A
	for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 13:52:22 -0800 (PST)
Message-Id: <7429357C-1E0F-4325-9AC5-C8F55BE30D10@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <a7b3ad0c0902111005k7be547cdm4fa30ec6a2b8f7c1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: What's the best way to store metadata?
Date: Mon, 16 Feb 2009 16:52:21 -0500
References: <a7b3ad0c0902111005k7be547cdm4fa30ec6a2b8f7c1@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 11, 2009, at 1:05 PM, Mandy G=FCnther wrote:

> Hi all,
> I want to use Lucene in my project but I have the following problem:
> My goal is to store metadata in the index.
>
> Her is an example of the stuff I need to index
>
> 1; My; determiner;		=09
> 2; project; noun; 1
> 3; uses; verb; 1
> 4; Lucene; noun; 1
> 6; I; noun;	=09
> 7; need; verb; 6
> 8; help; noun; 6
>
> It's a file containing rows with 4 columns.
> The first column is a sequential number. The second column is the text
> that need to be indexed. In my original file it's more than one word.
> The third column
> classifies the second column and the fourth column tells me where the
> sentence of the word in the second column starts.
> I will have large datafiles(up to 30GB) to index. Indexing and
> searching performance is very important.
> I tried to store the meta data(column no. 3 and 4) over the field =20
> names, e.g.
>
> doc.add(new Field("1|determiner", My, ...));
> doc.add(new Field("1|noun", project, ...));
> ...
> doc.add(new Field("2|noun", I, ...));
>
> But that's not a classy way!
>
> I was thinking about using Payloads. But the API says the Payload
> Status is experimantal and the performance is getting bad using
> payloads.
>
> I am not even sure if Payloads are meant to be used to store that =20
> kind of data.
> Is it possible to store that kind of metadata as payload?

I think it makes sense to store these as payloads.  You might even =20
look at the 2.9-dev trunk version for the new AttributeSource =20
capabilities that allow you to, essentially, strongly type payloads =20
and provide custom serialization capabilities.

As for the "experimental" phase of payloads, I'd say they are here to =20=

stay, it's just that the exact methods may change.

How do you plan to search using the info?  Note, that the new =20
AttributeSource stuff is not yet searchable, whereas the Payload stuff =20=

is.  Performance, I would think, should be roughly equivalent to using =20=

Spans, but don't quote me on it.

HTH,
Grant

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) =20
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 00:19:54 2009
Return-Path: <java-user-return-38545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28575 invoked from network); 17 Feb 2009 00:19:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 00:19:54 -0000
Received: (qmail 58421 invoked by uid 500); 17 Feb 2009 00:19:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58396 invoked by uid 500); 17 Feb 2009 00:19:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58385 invoked by uid 99); 17 Feb 2009 00:19:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 16:19:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_FAIL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ppuffinburger@tlcdelivers.com designates 63.119.22.96 as permitted sender)
Received: from [63.119.22.96] (HELO mx.tlcdelivers.com) (63.119.22.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 00:19:39 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx.tlcdelivers.com (Postfix) with ESMTP id C71D2427C0F2
	for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 19:19:17 -0500 (EST)
X-Virus-Scanned: amavisd-new at 
Received: from mx.tlcdelivers.com ([127.0.0.1])
	by localhost (mx.tlcdelivers.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id PVh1BvDVhfbb for <java-user@lucene.apache.org>;
	Mon, 16 Feb 2009 19:19:17 -0500 (EST)
Received: from Gidora (unknown [10.10.60.93])
	by mx.tlcdelivers.com (Postfix) with ESMTP id 1E66C427C07F
	for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 19:19:17 -0500 (EST)
From: "Philip Puffinburger" <ppuffinburger@tlcdelivers.com>
To: <java-user@lucene.apache.org>
Subject: 2.3.2 -> 2.4.0 StandardTokenizer issue
Date: Mon, 16 Feb 2009 19:19:16 -0500
Message-ID: <00cf01c99095$5eda9540$1c8fbfc0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00D0_01C9906B.7604B450"
X-Mailer: Microsoft Office Outlook 12.0
thread-index: AcmQlV2U6dLfZUs5RhSApE6LyG1fUg==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00D0_01C9906B.7604B450
Content-Type: text/plain;
	charset="windows-1258"
Content-Transfer-Encoding: quoted-printable

We have our own Analyzer which has the following

=20

Public final TokenStream tokenStream(String fieldname, Reader reader) {

  TokenStream result =3D new StandardTokenizer(reader);

  result =3D new StandardFilter(result);

  result =3D new MyAccentFilter(result);

  result =3D new LowerCaseFilter(result);

  result =3D new StopFilter(result);

=20

  return result;

}

=20

In 2.3.2 if the token =91Co=ECmo=92 came through this it would get =
changed to
=91como=92 by the time it made it through the filters.    In 2.4.0 this =
isn=92t
the case.   It treats this one token as two so we get =91co=92 and =
=91mo=92.    So
instead of search =91como=92 or =91Co=ECmo=92 to get all the hits we now =
have to do
them separately.

=20

I switched to the WhitespaceTokenizer as a test and that is indexing and
searching the way we expect it, but I haven=92t looked into what we lost =
by
using that tokenizer.

=20

Were we relying on a bug to get what we wanted from StandardTokenizer or =
did
something break in 2.4.0?


------=_NextPart_000_00D0_01C9906B.7604B450--


From java-user-return-38546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 03:09:22 2009
Return-Path: <java-user-return-38546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88456 invoked from network); 17 Feb 2009 03:09:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 03:09:22 -0000
Received: (qmail 48799 invoked by uid 500); 17 Feb 2009 03:09:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48767 invoked by uid 500); 17 Feb 2009 03:09:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48756 invoked by uid 99); 17 Feb 2009 03:09:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 19:09:15 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 03:09:05 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 921423B9C4
	for <java-user@lucene.apache.org>; Mon, 16 Feb 2009 19:08:43 -0800 (PST)
Message-Id: <F56F6B71-0CFA-4409-A394-2D6673F8876A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21970680.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: How to compute the simlarity of a web page?
Date: Mon, 16 Feb 2009 22:08:42 -0500
References: <21970680.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm, you might be able to do the following:

Create a document in a memory index containing the web page
Create a query from the keywords
Do a search with the query against the memory index and see the score.

Alternatively, you could use the corpus statistics plus to create a  
term vector from the document (as if it were a member of the  
collection) and then do the cosine calculation of that document with  
your query (which you also calculated the weights for based on your  
collections stats)

Last, it sounds like you are essentially describing a categorization  
task.  Have a look at some categorization software (for instance,  
Mahout can do Naive Bayes categorization or some alternatives).

Of course, I might be missing something in understanding what you are  
asking, so feel free to give a shout back to discuss.

HTH,
Grant

On Feb 12, 2009, at 1:31 AM, renavatior wrote:

>
> I am doing some research in vertical search? Therefore, i defined some
> weights of several keywords in my corpus expressing a certain
> theme,later,how can i use these to compute the similarity with the  
> given web
> page(passed by url to the compute method).I saw the source code of
> Similarity.java in Lucene,but i do not know how to use the method  
> such as
> TF,IDF,and so on.
> i will really appreciate it if anyone can give me some advice,thanks  
> in
> advance.
> -- 
> View this message in context: http://www.nabble.com/How-to-compute-the-simlarity-of-a-web-page--tp21970680p21970680.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 06:33:46 2009
Return-Path: <java-user-return-38547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35381 invoked from network); 17 Feb 2009 06:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 06:33:46 -0000
Received: (qmail 57153 invoked by uid 500); 17 Feb 2009 06:33:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57117 invoked by uid 500); 17 Feb 2009 06:33:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57104 invoked by uid 99); 17 Feb 2009 06:33:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Feb 2009 22:33:40 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 06:33:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LZJW3-0002JR-JT
	for java-user@lucene.apache.org; Mon, 16 Feb 2009 22:33:11 -0800
Message-ID: <22051332.post@talk.nabble.com>
Date: Mon, 16 Feb 2009 22:33:11 -0800 (PST)
From: selvaa <selvaganapathi_mect@rediffmail.com>
To: java-user@lucene.apache.org
Subject: Unique Filter on search results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: selvaganapathi_mect@rediffmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
         I am creating a tracker for web applications. I am indexing all the
user credentials  while  they are logging .
         The problem is , user might be hit the same web page many times
during the action period .
        So my tracker application is indexing the same value for several
times.  while getting the search with time limit (ex : jan 20 ,2009 to feb
20 ,2009)
        It is giving the repetitive results , but only time pattern is
different .
        This is my Document Fields
             *UserName
             *IP
             *DATE
             *Web Page Name

      Now how can I filter/search the indexes with unique value criteria  on 
Fields ( "UserName " & "Web Page Name" ) ?
      I have found one Filter called Duplicate  Filter , But it is not doing
unique field value filter condition on Search Results , it does on whole
indexes .
      Please help me out  from this head ache  ....
-- 
View this message in context: http://www.nabble.com/Unique-Filter-on-search-results-tp22051332p22051332.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 09:12:48 2009
Return-Path: <java-user-return-38548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73099 invoked from network); 17 Feb 2009 09:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 09:12:47 -0000
Received: (qmail 72011 invoked by uid 500); 17 Feb 2009 09:12:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71370 invoked by uid 500); 17 Feb 2009 09:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71358 invoked by uid 99); 17 Feb 2009 09:12:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 01:12:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of r.ventaglio@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 09:12:34 +0000
Received: by qw-out-2122.google.com with SMTP id 5so669814qwi.53
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 01:12:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=9Nsx+mDjbZXZvSlkQ0KX8kEEtNP9URV9YQo1rYS+6qs=;
        b=OgN48QbD/o2o6sbnkfYxGofkEr/9YeRtJ40P0IJ6etloR/oGEawMjZwJ7FfKUJL2Yd
         uWziUJvauN6N1ere5OQjwdF0kxPmsXKmQ5gr2NA9rW8dJ/fPDSFv1vtPZ5dKztzAIDzs
         dqLv7tyrgrB2I69iV26Oy9Zom5uyLYen6Baos=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=x8TnW2dCGnTKF9NNgNyAHpM0WoItMuIJO4mhMyeIlcT4xh+NtoNxQbJuvl7J29mmhN
         AOzWPtsMr1JlWy9GXyuLvK6aMYkhCk0EPkj9zOtjZPtA01w9lfvJAT91xD+BBeWH7lnd
         hmP+MfzqMv8dl//oZDC2LJl8h+vFCSaeIJjsk=
MIME-Version: 1.0
Received: by 10.229.74.71 with SMTP id t7mr1743868qcj.47.1234861932921; Tue, 
	17 Feb 2009 01:12:12 -0800 (PST)
In-Reply-To: <200902151439.26859.paul.elschot@xs4all.nl>
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com>
	 <200902072306.41912.paul.elschot@xs4all.nl>
	 <70422ecc0902080047t3d9c321bwfc35a90927dac8e7@mail.gmail.com>
	 <200902151439.26859.paul.elschot@xs4all.nl>
Date: Tue, 17 Feb 2009 10:12:12 +0100
Message-ID: <70422ecc0902170112q319d7b86xc6b791edd017f48f@mail.gmail.com>
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
From: Raffaella Ventaglio <r.ventaglio@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636427084dbc220046319b281
X-Virus-Checked: Checked by ClamAV on apache.org

--001636427084dbc220046319b281
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks for sharing this info.
In any case, this is not a problem for me since I have used only the "idea"
to choose between OpenBitSet and SortedViIntList from contrib BooleanFilter,
but I have then implemented it in my own facets manager structure, so I do
not use the "removed" finalResult method.

Regards,
Raf

On Sun, Feb 15, 2009 at 2:39 PM, Paul Elschot <paul.elschot@xs4all.nl>wrote:

>
> Meanwhile the choice between SortedVIntList and OpenBitSet
> has been removed from the trunk (development version),
> that now uses OpenBitSet only:
> https://issues.apache.org/jira/browse/LUCENE-1296
>
> In case there is preference to have SortedVIntList used in the
> next lucene version (i.e. in cases when it is smaller  than
> OpenBitSet), please comment at LUCENE-1296.
>
> Regards,
> Paul Elschot
>
>
>

--001636427084dbc220046319b281--

From java-user-return-38549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 10:11:02 2009
Return-Path: <java-user-return-38549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95394 invoked from network); 17 Feb 2009 10:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 10:11:02 -0000
Received: (qmail 28807 invoked by uid 500); 17 Feb 2009 10:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28770 invoked by uid 500); 17 Feb 2009 10:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28759 invoked by uid 99); 17 Feb 2009 10:10:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 02:10:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of morus.walter.ml@googlemail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 10:10:44 +0000
Received: by fxm7 with SMTP id 7so2357918fxm.5
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 02:10:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:x-mailer:mime-version:content-type
         :content-transfer-encoding;
        bh=brJjMaUOok+t65inEFatjjJJtneBIZm7aeBesf1KnvM=;
        b=ZDPbOx5lByXkNME0B1w6dE/jYe2e0H+GXCEUB/YDLpJGUM1tNbnfCSk7xAPltXLYnt
         7Bnc3FqCL6HGp0wJS4khn/v1SErrSBNlcOTt0SHlLkGGbsf6x4hN/HMPZdphAmw70j/a
         602bvpYFQGnhNiqypj7qnILDwC9RixUQWfq/Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=date:from:to:subject:message-id:x-mailer:mime-version:content-type
         :content-transfer-encoding;
        b=lP6sby7dmLaAq1Jfch+WxzC8CseZVaiyRMZWQwxqeasfknhZvbHzJ4R+/TYNGRvvX1
         K7sRqvvvuUiyIFITdP5Mc04H2OObVNm3Id9wmbaTqi464jan41+H8qLr0K1xDjx59F3J
         o1GMGwI6rBhy6QKZCcGqsarb+k4oDeD6WQMd4=
Received: by 10.103.226.10 with SMTP id d10mr353918mur.105.1234865424232;
        Tue, 17 Feb 2009 02:10:24 -0800 (PST)
Received: from tucholsky.experteer.de (spike.experteer.de [88.217.158.98])
        by mx.google.com with ESMTPS id 23sm1013223mun.30.2009.02.17.02.10.23
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 17 Feb 2009 02:10:23 -0800 (PST)
Date: Tue, 17 Feb 2009 11:10:19 +0100
From: Morus Walter <morus.walter.ml@googlemail.com>
To: java-user@lucene.apache.org
Subject: distinct queries for search and scoring
Message-ID: <20090217111019.236260c8@tucholsky.experteer.de>
X-Mailer: Claws Mail 3.2.0 (GTK+ 2.8.20; i686-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hallo,

I'm currently thinking about what the best solution would be for the
following request:

- a lucene index should be queried for a number of search criteria
- the score for each result should not be the normal query score, but an
  indicator on the similarity between the matched document and some
  other conditions that can be expressed as a query as well.

The use case is something like a search for jobs (defined by arbitrary
user input) and a scoring based on similarity to a users profile
(basically his CV).

This can certainly be done in various ways
- get the scores from a score query; do the main search then and attach
  the scores to the results
- do the main search first and then the score query using the results
  of the main as a filter (the score query might need a small
  modification to match for all documents)
- combine the searches into one and make the scoring part for the
  main query neglectable
- see if it's possible to run two scorer at a time and combine the
  results; of course one scorer would have to score documents in an
  order defined by the other (that's just a vague idea; I didn't check
  the low level APIs thoroughly yet; so maybe this does not work at all)
but I don't have a clear idea what the performance expectations for the
different ways might be.

So before I start experimenting I'd like to ask if anyone on the list
has ever done something like this (or thought about it) or has other
insights that might be helpful.

The indices in question are medium size (50k/200k documents; but that
might increase up to a few millon). The main query might match a large
part of that index (up to all documents), as we do an incremental search
where each user input results in a search even if the complete search
criteria isn't provided yet. The number of documents having a score
larger than 0 (that is match the score query) is usually smaller but
might reach a few thousands.

regards
	Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 11:48:43 2009
Return-Path: <java-user-return-38550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72158 invoked from network); 17 Feb 2009 11:48:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 11:48:43 -0000
Received: (qmail 37251 invoked by uid 500); 17 Feb 2009 11:48:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37229 invoked by uid 500); 17 Feb 2009 11:48:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37218 invoked by uid 99); 17 Feb 2009 11:48:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 03:48:35 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 11:48:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LZOQh-0006pg-UV
	for java-user@lucene.apache.org; Tue, 17 Feb 2009 03:48:00 -0800
Message-ID: <22055571.post@talk.nabble.com>
Date: Tue, 17 Feb 2009 03:47:59 -0800 (PST)
From: AmigoProgrammer <mgr@papaecho.com>
To: java-user@lucene.apache.org
Subject: Re: Querying for a catagory
In-Reply-To: <359a92830902161253m1bfc4ad0sa86b17ed0027aa17@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mgr@papaecho.com
References: <22044596.post@talk.nabble.com> <359a92830902161253m1bfc4ad0sa86b17ed0027aa17@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


A relevant client is one that is related to one or more documents found by a
search. 

I would store client as a keyword with a document and I would like the query
to return clients with the sum of relevant documents score. A client with
many low scoring documents could be as relevant as a client with few high
scoring documents. Basically I am looking for a 'group by'-like
functionality.

Best,

Michael


Erick Erickson wrote:
> 
> What constitutes a "relevant client"? If you want
> to restrict the returned documents to a particular client
> (or even a set of clients) a simple +client:<client name>
> would do the trick.....
> 
> Or you could create a Filter for "relevant clients".
> 
> If neither of these helps, could you clarify your
> definition of a relevant client?
> 
> Best
> Erick
> 
> 
> On Mon, Feb 16, 2009 at 3:00 PM, AmigoProgrammer <mgr@papaecho.com> wrote:
> 
>>
>> Hi,
>>
>> I have a number of documents that each relate to a client. I would like
>> to
>> use an index and queries to answer two question:
>> - Find relevant documents
>> - Find relevant clients
>>
>> The first one is straight forward.
>> For the second one, I am wondering. Should I iterate over the hits and
>> compute the most relevant clients. Or is there a clever build-in way of
>> answering the question?
>>
>> Anyone that can help me crack the nut?
>>
>> Best,
>>
>> Michael
>> --
>> View this message in context:
>> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22044596.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Querying-for-a-catagory-tp22044596p22055571.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 12:43:58 2009
Return-Path: <java-user-return-38551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10566 invoked from network); 17 Feb 2009 12:43:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 12:43:57 -0000
Received: (qmail 17391 invoked by uid 500); 17 Feb 2009 12:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17359 invoked by uid 500); 17 Feb 2009 12:43:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17348 invoked by uid 99); 17 Feb 2009 12:43:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 04:43:50 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 12:43:40 +0000
Received: by qw-out-2122.google.com with SMTP id 5so684953qwi.53
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 04:43:19 -0800 (PST)
Received: by 10.224.74.74 with SMTP id t10mr9987977qaj.331.1234874598816;
        Tue, 17 Feb 2009 04:43:18 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 7sm4604105qwf.40.2009.02.17.04.43.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 17 Feb 2009 04:43:18 -0800 (PST)
Message-Id: <B98B0473-4547-468D-B53D-C3F288E12AC3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21966759.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: optimization problem
Date: Tue, 17 Feb 2009 07:43:17 -0500
References: <21966759.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


It's odd that optimize is creating such tiny segments, and then that  
these tiny segments wind up consuming so much disk space.

Can you turn on IndexWriter's infoStream, and post the output of the  
attempts to optimize?

Are you sure there are no unhandled exceptions being logged to the  
system error log?  By default, merges are done in BG threads (using  
ConcurrentMergeScheduler), so exceptions hit in those threads may be  
logged elsewhere (though optimize() tries to bring such exceptions to  
the foreground thread).

Mike

Qingdi wrote:

>
> (I posted this question to "solr user" forum, but didn't get a clear  
> answer.
> So re-post it here.)
>
> Our index size is about 60G. Most of the time, the optimization  
> works fine.
> But this morning, the optimization kept creating new segment files  
> until all
> the free disk space (300G) was used up.
>
> Here is how the files generated during optimization look like:
> ============================================
> ....................................
> -rw-r--r--  1 root root      213464 Feb 10 07:33 _5w9a.tis
> -rw-r--r--  1 root root        3039 Feb 10 07:33 _5w9a.tii
> -rw-r--r--  1 root root        9360 Feb 10 07:33 _5w9a.prx
> -rw-r--r--  1 root root       19824 Feb 10 07:33 _5w9a.frq
> -rw-r--r--  1 root root          27 Feb 10 07:33 _5w9a.fnm
> -rw-r--r--  1 root root       74884 Feb 10 07:33 _5w9a.fdx
> -rw-r--r--  1 root root     3753944 Feb 10 07:33 _5w9a.fdt
> -rw-r--r--  1 root root      212513 Feb 10 07:33 _5w99.tis
> -rw-r--r--  1 root root        3005 Feb 10 07:33 _5w99.tii
> -rw-r--r--  1 root root        9436 Feb 10 07:33 _5w99.prx
> -rw-r--r--  1 root root       20052 Feb 10 07:33 _5w99.frq
> -rw-r--r--  1 root root          27 Feb 10 07:33 _5w99.fnm
> -rw-r--r--  1 root root       75492 Feb 10 07:33 _5w99.fdx
> -rw-r--r--  1 root root     3795439 Feb 10 07:33 _5w99.fdt
> -rw-r--r--  1 root root      215726 Feb 10 07:33 _5w98.tis
> -rw-r--r--  1 root root        2994 Feb 10 07:33 _5w98.tii
> -rw-r--r--  1 root root        9438 Feb 10 07:33 _5w98.prx
> -rw-r--r--  1 root root       20058 Feb 10 07:33 _5w98.frq
> -rw-r--r--  1 root root          27 Feb 10 07:33 _5w98.fnm
> -rw-r--r--  1 root root       75508 Feb 10 07:33 _5w98.fdx
> -rw-r--r--  1 root root     3779402 Feb 10 07:33 _5w98.fdt
> ....................................
> ============================================
>
> This is the third time we encountered this issue. Any idea why the
> optimization keeps creating new files? (If we restart the solr  
> server and
> run optimization again, the index files can be recovered. we are on  
> solr
> 1.3.) Where could we find more info. about how the optimization  
> process
> work?
>
> Appreciate your help.
>
> Qingdi
> -- 
> View this message in context: http://www.nabble.com/optimization-problem-tp21966759p21966759.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 13:02:40 2009
Return-Path: <java-user-return-38552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25958 invoked from network); 17 Feb 2009 13:02:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 13:02:39 -0000
Received: (qmail 53529 invoked by uid 500); 17 Feb 2009 13:02:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53334 invoked by uid 500); 17 Feb 2009 13:02:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53323 invoked by uid 99); 17 Feb 2009 13:02:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 05:02:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 13:02:24 +0000
Received: by qw-out-2122.google.com with SMTP id 5so686984qwi.53
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 05:02:02 -0800 (PST)
Received: by 10.224.10.205 with SMTP id q13mr7087383qaq.329.1234875722461;
        Tue, 17 Feb 2009 05:02:02 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 8sm1126128qwj.56.2009.02.17.05.02.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 17 Feb 2009 05:02:02 -0800 (PST)
Message-Id: <1DCC579B-ED06-487C-AD75-EAD4D982EBE5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA568C565C@birexchange.BIRPLAZA.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: termDocs / termEnums performance increase for 2.4.0
Date: Tue, 17 Feb 2009 08:02:00 -0500
References: <CC2671C08F06704ABFD37ED1EA09AA568C565C@birexchange.BIRPLAZA.local>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


It's interesting that you found this speedup... I'm not sure offhand  
what changes led to the speedup (but I'm still happy about it!).

But... why do you need to iterate through all terms, and all docs for  
each term, in the first place?

EG this is what FieldCache does in order to populate values the first  
time a given field is loaded.  It's also what segment merging does.

In 2.9, we've switched searching to proceed segment by segment,  
instead of using the MultiSegmentReader API to get TermEnum/TermDocs  
(this was LUCENE-1483).  This gives a good speedup for sort-by- 
relevance queries, and also especially sort-by-field queries.  And,  
when sorting by field it no longer loads the FieldCache at the  
MultiReader level, which means reopen cost for a large index that has  
sort-by-field queries should be much better on average since the cost  
is now in proportion to which segments are new.

Mike

Beard, Brian wrote:

> Thought I would report a performance increase noticed in migrating  
> from
> 2.3.2 to 2.4.0.
>
> Performing an iterated loop using termDocs & termEnums like below is
> about 30% faster.
> The example test set I'm running has about 70K documents to go through
> and process (on a dual processor windows machine) which takes about
> 0.8-0.9 sec in 2.4.0 (vs 1.3-1.4 secs in 2.3.2)
>
> TermDocs termDocs = multiReader.termDocs();
> TermEnum termEnum = multiReader.terms (new Term (field, ""));
>
> do {
> 	term = termEnum.term();
> 	termDocs.seek(term);			
>      .....
> 	while (termDocs.next()) {
>        ....
> 	}
>
> } while (termEnum.next());
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 13:30:58 2009
Return-Path: <java-user-return-38553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44111 invoked from network); 17 Feb 2009 13:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 13:30:58 -0000
Received: (qmail 99671 invoked by uid 500); 17 Feb 2009 13:30:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99636 invoked by uid 500); 17 Feb 2009 13:30:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99625 invoked by uid 99); 17 Feb 2009 13:30:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 05:30:51 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 13:30:43 +0000
Received: by rv-out-0506.google.com with SMTP id k40so3306262rvb.5
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 05:30:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=XGPKeODI708ahUE5xGeCIGxtX1qY3+TNOClapPesVE8=;
        b=cbZw8Oie9N08ZasOn0YZEeC0bLAeK468siggFerGVee0NGGvZGU+pkbW62UTyINaaB
         cb+x2r2A2aj93Pu8VbA5wmzq4WIqheeJ4Jbl2HO9SSVyeBHu0n6aq7+0GESrs6rshDci
         ZzMxOuLGNB1nEyAAYSi7ypt1VQj4+Q9ojwROs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xSo/JWIgDVRu8bN7waIXI4vaspcLAmTyCWPu2As9vze6MDvpaKKyhZ9wM2QUU2/aFB
         Q2lTMMVGeJEAko/JY14MizuKHImdp15HqHaYM/vllXN2tqhi8MSjbk2vjny8nPxpu9nq
         p9TTlv9XcS+6LUCSSbOvUBvWdIcaXz1tsZsGI=
MIME-Version: 1.0
Received: by 10.141.171.3 with SMTP id y3mr3283850rvo.263.1234877423412; Tue, 
	17 Feb 2009 05:30:23 -0800 (PST)
In-Reply-To: <22055571.post@talk.nabble.com>
References: <22044596.post@talk.nabble.com>
	 <359a92830902161253m1bfc4ad0sa86b17ed0027aa17@mail.gmail.com>
	 <22055571.post@talk.nabble.com>
Date: Tue, 17 Feb 2009 08:30:23 -0500
Message-ID: <359a92830902170530o77b34a13sc9e225980a5a99bf@mail.gmail.com>
Subject: Re: Querying for a catagory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd14b9229e6c204631d4e35
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd14b9229e6c204631d4e35
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Well, I can imagine several schemes, how suitable they are depends
upon some as yet unspecified characteristics of your problem space.

You don't want to iterate blindly over the responses in a
HitCollector.collect method  unless your index is quite small (see the
API docs for an explanation).

If you don't have very many users, you could consider creating a Filter
at startup time, one for each user with a bit set for each document
that user has (see TermDocs/TermEnum).

You could *try* FieldSelector (aka Lazy Loading) to make document
fetching more efficient in your collect method. If you try this be sure
that your user field is indexed. Again, depending upon your index
characteristics this may or may not be viable.

Instead of FieldSelector you could try using TermDocs/TermEnum in
your collect method to see if a user was indexed for a particular document.

You could also supply some more details about your index, e.g. number
of documents, number of users, whether more than one user is allowed
per document. What response times you require. What the larger problem
you're trying to solve, that is, what use case are you trying to solve.
Which
is another way of asking if this is an XY problem.

Perhaps wiser heads than mine can come up with something clever with
enough details.

Best
Erick

On Tue, Feb 17, 2009 at 6:47 AM, AmigoProgrammer <mgr@papaecho.com> wrote:

>
> A relevant client is one that is related to one or more documents found by
> a
> search.
>
> I would store client as a keyword with a document and I would like the
> query
> to return clients with the sum of relevant documents score. A client with
> many low scoring documents could be as relevant as a client with few high
> scoring documents. Basically I am looking for a 'group by'-like
> functionality.
>
> Best,
>
> Michael
>
>
> Erick Erickson wrote:
> >
> > What constitutes a "relevant client"? If you want
> > to restrict the returned documents to a particular client
> > (or even a set of clients) a simple +client:<client name>
> > would do the trick.....
> >
> > Or you could create a Filter for "relevant clients".
> >
> > If neither of these helps, could you clarify your
> > definition of a relevant client?
> >
> > Best
> > Erick
> >
> >
> > On Mon, Feb 16, 2009 at 3:00 PM, AmigoProgrammer <mgr@papaecho.com>
> wrote:
> >
> >>
> >> Hi,
> >>
> >> I have a number of documents that each relate to a client. I would like
> >> to
> >> use an index and queries to answer two question:
> >> - Find relevant documents
> >> - Find relevant clients
> >>
> >> The first one is straight forward.
> >> For the second one, I am wondering. Should I iterate over the hits and
> >> compute the most relevant clients. Or is there a clever build-in way of
> >> answering the question?
> >>
> >> Anyone that can help me crack the nut?
> >>
> >> Best,
> >>
> >> Michael
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22044596.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22055571.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd14b9229e6c204631d4e35--

From java-user-return-38554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 15:09:18 2009
Return-Path: <java-user-return-38554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65297 invoked from network); 17 Feb 2009 15:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 15:09:18 -0000
Received: (qmail 65477 invoked by uid 500); 17 Feb 2009 15:09:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65455 invoked by uid 500); 17 Feb 2009 15:09:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65444 invoked by uid 99); 17 Feb 2009 15:09:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 07:09:11 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zzzhc.starfire@gmail.com designates 209.85.142.189 as permitted sender)
Received: from [209.85.142.189] (HELO ti-out-0910.google.com) (209.85.142.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 15:09:02 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1981236tic.11
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 07:08:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=3CyHC/7E9SKRQTini0BNEHx0msIDZ5EO6cCmcBV46zk=;
        b=w4yLQGej1q3HvKE/e2dWZ8C9bWfyXDNQq4q7H0x9moInDHCnhafbkl/WvuBVCPKX3J
         dD8IbWpT86p53XQ2bbGpUcK+coSMEKNW+OIzemTfKktHt1oKHVNLsTNSje5hBT9NK/g7
         /JQpoxq447n58TfcSO3O4RA7+H6yEuu0Ykv3Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XPetv8M7xbMeVHXPUP35l3p+kqaGrGS55xYMFKmm9Yp8weMpBMlqcZE0XnoOZIjwGV
         ewjHcPWo4MBL1//QIU2ZiMRaY/UJIOgCR7xaJwBfGnvIgNgu6Wbpc8hVMahAIoMCdC5U
         FLyFeaVIaMN23AoMcxw3IFFnrkO8PiPaM9XIU=
MIME-Version: 1.0
Received: by 10.110.53.19 with SMTP id b19mr10020929tia.34.1234883319484; Tue, 
	17 Feb 2009 07:08:39 -0800 (PST)
In-Reply-To: <359a92830902170530o77b34a13sc9e225980a5a99bf@mail.gmail.com>
References: <22044596.post@talk.nabble.com>
	 <359a92830902161253m1bfc4ad0sa86b17ed0027aa17@mail.gmail.com>
	 <22055571.post@talk.nabble.com>
	 <359a92830902170530o77b34a13sc9e225980a5a99bf@mail.gmail.com>
Date: Tue, 17 Feb 2009 23:08:39 +0800
Message-ID: <4397aa520902170708yec2f7b2k8dfb011ab27ba6ce@mail.gmail.com>
Subject: Re: Querying for a catagory
From: =?ISO-2022-JP?B?GyRCMitALhsoQg==?= <zzzhc.starfire@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f0257098d29e04631ead81
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f0257098d29e04631ead81
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Sort is helpful. Maybe you should change you index structure if you think
you need a group by.

On Tue, Feb 17, 2009 at 9:30 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Well, I can imagine several schemes, how suitable they are depends
> upon some as yet unspecified characteristics of your problem space.
>
> You don't want to iterate blindly over the responses in a
> HitCollector.collect method  unless your index is quite small (see the
> API docs for an explanation).
>
> If you don't have very many users, you could consider creating a Filter
> at startup time, one for each user with a bit set for each document
> that user has (see TermDocs/TermEnum).
>
> You could *try* FieldSelector (aka Lazy Loading) to make document
> fetching more efficient in your collect method. If you try this be sure
> that your user field is indexed. Again, depending upon your index
> characteristics this may or may not be viable.
>
> Instead of FieldSelector you could try using TermDocs/TermEnum in
> your collect method to see if a user was indexed for a particular document.
>
> You could also supply some more details about your index, e.g. number
> of documents, number of users, whether more than one user is allowed
> per document. What response times you require. What the larger problem
> you're trying to solve, that is, what use case are you trying to solve.
> Which
> is another way of asking if this is an XY problem.
>
> Perhaps wiser heads than mine can come up with something clever with
> enough details.
>
> Best
> Erick
>
> On Tue, Feb 17, 2009 at 6:47 AM, AmigoProgrammer <mgr@papaecho.com> wrote:
>
> >
> > A relevant client is one that is related to one or more documents found
> by
> > a
> > search.
> >
> > I would store client as a keyword with a document and I would like the
> > query
> > to return clients with the sum of relevant documents score. A client with
> > many low scoring documents could be as relevant as a client with few high
> > scoring documents. Basically I am looking for a 'group by'-like
> > functionality.
> >
> > Best,
> >
> > Michael
> >
> >
> > Erick Erickson wrote:
> > >
> > > What constitutes a "relevant client"? If you want
> > > to restrict the returned documents to a particular client
> > > (or even a set of clients) a simple +client:<client name>
> > > would do the trick.....
> > >
> > > Or you could create a Filter for "relevant clients".
> > >
> > > If neither of these helps, could you clarify your
> > > definition of a relevant client?
> > >
> > > Best
> > > Erick
> > >
> > >
> > > On Mon, Feb 16, 2009 at 3:00 PM, AmigoProgrammer <mgr@papaecho.com>
> > wrote:
> > >
> > >>
> > >> Hi,
> > >>
> > >> I have a number of documents that each relate to a client. I would
> like
> > >> to
> > >> use an index and queries to answer two question:
> > >> - Find relevant documents
> > >> - Find relevant clients
> > >>
> > >> The first one is straight forward.
> > >> For the second one, I am wondering. Should I iterate over the hits and
> > >> compute the most relevant clients. Or is there a clever build-in way
> of
> > >> answering the question?
> > >>
> > >> Anyone that can help me crack the nut?
> > >>
> > >> Best,
> > >>
> > >> Michael
> > >> --
> > >> View this message in context:
> > >>
> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22044596.html
> > >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> > >
> >
> > --
> > View this message in context:
> > http://www.nabble.com/Querying-for-a-catagory-tp22044596p22055571.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--001485f0257098d29e04631ead81--

From java-user-return-38555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 15:59:57 2009
Return-Path: <java-user-return-38555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99317 invoked from network); 17 Feb 2009 15:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 15:59:57 -0000
Received: (qmail 63399 invoked by uid 500); 17 Feb 2009 15:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63379 invoked by uid 500); 17 Feb 2009 15:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63368 invoked by uid 99); 17 Feb 2009 15:59:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 07:59:50 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 15:59:42 +0000
Received: by rv-out-0506.google.com with SMTP id k40so3389809rvb.5
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 07:59:20 -0800 (PST)
Received: by 10.114.202.15 with SMTP id z15mr2686883waf.67.1234886360656;
        Tue, 17 Feb 2009 07:59:20 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id y25sm12457842pod.24.2009.02.17.07.59.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 17 Feb 2009 07:59:20 -0800 (PST)
Message-Id: <53B5EA44-44E1-4232-ACD1-65B2AD4ECF01@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20090217111019.236260c8@tucholsky.experteer.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: distinct queries for search and scoring
Date: Tue, 17 Feb 2009 10:59:16 -0500
References: <20090217111019.236260c8@tucholsky.experteer.de>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Is your scoring query also doing some filtering?  If so, you could
drive the search with your scoring query, and then pass in as a filter
your second query wrapped with QueryWrapperFilter.  I think that's
effectively your last option, which should be the most efficient one.

Or, if the scoring query does not do any filtering, or you expect the
main query to be more restrictive, you could try a BooleanQuery with
the two sub-queries as AND'd clauses, where the non-scoring query has
boost 0.0 (I'm not certain that works but it seems like it should).
The downside is Lucene still does all the scoring work, and then
multiplies by 0.0, I think.  If performance is good enough I'd just go
with this?

To avoid computing that sub-score (only to throw it away) you could
make your own custom iteration through the matched docs, AND'ing
together the docIDs but then calling only on your scoring query to do
the scoring.  But that's quite a bit more work.

Mike

Morus Walter wrote:

> Hallo,
>
> I'm currently thinking about what the best solution would be for the
> following request:
>
> - a lucene index should be queried for a number of search criteria
> - the score for each result should not be the normal query score,  
> but an
>  indicator on the similarity between the matched document and some
>  other conditions that can be expressed as a query as well.
>
> The use case is something like a search for jobs (defined by arbitrary
> user input) and a scoring based on similarity to a users profile
> (basically his CV).
>
> This can certainly be done in various ways
> - get the scores from a score query; do the main search then and  
> attach
>  the scores to the results
> - do the main search first and then the score query using the results
>  of the main as a filter (the score query might need a small
>  modification to match for all documents)
> - combine the searches into one and make the scoring part for the
>  main query neglectable
> - see if it's possible to run two scorer at a time and combine the
>  results; of course one scorer would have to score documents in an
>  order defined by the other (that's just a vague idea; I didn't check
>  the low level APIs thoroughly yet; so maybe this does not work at  
> all)
> but I don't have a clear idea what the performance expectations for  
> the
> different ways might be.
>
> So before I start experimenting I'd like to ask if anyone on the list
> has ever done something like this (or thought about it) or has other
> insights that might be helpful.
>
> The indices in question are medium size (50k/200k documents; but that
> might increase up to a few millon). The main query might match a large
> part of that index (up to all documents), as we do an incremental  
> search
> where each user input results in a search even if the complete search
> criteria isn't provided yet. The number of documents having a score
> larger than 0 (that is match the score query) is usually smaller but
> might reach a few thousands.
>
> regards
> 	Morus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 16:28:31 2009
Return-Path: <java-user-return-38556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20585 invoked from network); 17 Feb 2009 16:28:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 16:28:27 -0000
Received: (qmail 9964 invoked by uid 500); 17 Feb 2009 16:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9941 invoked by uid 500); 17 Feb 2009 16:28:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9929 invoked by uid 99); 17 Feb 2009 16:28:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 08:28:20 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zzzhc.starfire@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 16:28:12 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1998869tic.11
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 08:27:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=crx6/hhvl4k3E2kPMb1W2IEGEIQ3YpHzJDFazDoVzoA=;
        b=r/CuR8gpFA2t3lcvg6AgFtChqHQC9c+LdTnT7VCaf5FN2wGl8IpS2EVQSPV4tXb0LT
         ogIjeVRNPIetfnHWlcCSECvpR0qfaNQ///iWnieuwp3iG52RokOBxdvDdJgprbFn2lVt
         +ngn2ZA1OnZT/Vle8HJUXsut2xJV/dD6sSfWc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bFp5Lkc/symGXNH55CqEFeV6khdq22Vhgfpes0y+0o3JIoRGm9AKWOC6GWMGuoCJr8
         KtaMIgfwKmX6fiVG0ajReJeNXCZg34f4wqZ54ZXXBxvGwLpHsc6ByAUqk4q6bDfFn5bu
         SHSo099f+3v0nNVEbajfeseczBzJGHFr3PL3I=
MIME-Version: 1.0
Received: by 10.110.62.4 with SMTP id k4mr2335104tia.50.1234888071318; Tue, 17 
	Feb 2009 08:27:51 -0800 (PST)
In-Reply-To: <22051332.post@talk.nabble.com>
References: <22051332.post@talk.nabble.com>
Date: Wed, 18 Feb 2009 00:27:51 +0800
Message-ID: <4397aa520902170827w12d0292cl861886b213ee1fc0@mail.gmail.com>
Subject: Re: Unique Filter on search results
From: =?ISO-2022-JP?B?GyRCMitALhsoQg==?= <zzzhc.starfire@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f42898d4121a04631fc80d
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f42898d4121a04631fc80d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Does it make sense to add another index only included UserName,Web Page Name
and other statistic fields?

On Tue, Feb 17, 2009 at 2:33 PM, selvaa
<selvaganapathi_mect@rediffmail.com>wrote:

>
> Hi,
>         I am creating a tracker for web applications. I am indexing all the
> user credentials  while  they are logging .
>         The problem is , user might be hit the same web page many times
> during the action period .
>        So my tracker application is indexing the same value for several
> times.  while getting the search with time limit (ex : jan 20 ,2009 to feb
> 20 ,2009)
>        It is giving the repetitive results , but only time pattern is
> different .
>        This is my Document Fields
>             *UserName
>             *IP
>             *DATE
>             *Web Page Name
>
>      Now how can I filter/search the indexes with unique value criteria  on
> Fields ( "UserName " & "Web Page Name" ) ?
>      I have found one Filter called Duplicate  Filter , But it is not doing
> unique field value filter condition on Search Results , it does on whole
> indexes .
>      Please help me out  from this head ache  ....
> --
> View this message in context:
> http://www.nabble.com/Unique-Filter-on-search-results-tp22051332p22051332.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485f42898d4121a04631fc80d--

From java-user-return-38557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 18:12:50 2009
Return-Path: <java-user-return-38557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4095 invoked from network); 17 Feb 2009 18:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 18:12:50 -0000
Received: (qmail 78351 invoked by uid 500); 17 Feb 2009 18:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78320 invoked by uid 500); 17 Feb 2009 18:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78307 invoked by uid 99); 17 Feb 2009 18:12:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 10:12:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 18:12:35 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.13.8/8.13.8) with ESMTP id n1HICDle030934
	for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 19:12:13 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Faceted search with OpenBitSet/SortedVIntList
Date: Tue, 17 Feb 2009 19:12:12 +0100
User-Agent: KMail/1.10.4 (Linux/2.6.27-11-generic; KDE/4.1.4; i686; ; )
References: <70422ecc0902071057m1432e817t773217a87bcedbee@mail.gmail.com> <200902151439.26859.paul.elschot@xs4all.nl> <70422ecc0902170112q319d7b86xc6b791edd017f48f@mail.gmail.com>
In-Reply-To: <70422ecc0902170112q319d7b86xc6b791edd017f48f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_93vmJDmU3XztScy"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200902171912.13336.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_93vmJDmU3XztScy
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit

On Tuesday 17 February 2009 10:12:12 Raffaella Ventaglio wrote:
> Thanks for sharing this info.
> In any case, this is not a problem for me since I have used only the "idea"
> to choose between OpenBitSet and SortedViIntList from contrib BooleanFilter,
> but I have then implemented it in my own facets manager structure, so I do
> not use the "removed" finalResult method.

It would be possible to build a similar choice criterion between
OpenBitSet and SortedVIntList into CachingWrapperFilter to chose
the data structure to be used for caching.

For example when using the same criterion as in the removed methods
there, your original problem might not have occurred at all.

In the CachingWrapperFilter in trunk the choice is left to an overridable method.

Regards,
Paul Elschot


> 
> Regards,
> Raf
> 
> On Sun, Feb 15, 2009 at 2:39 PM, Paul Elschot <paul.elschot@xs4all.nl>wrote:
> 
> >
> > Meanwhile the choice between SortedVIntList and OpenBitSet
> > has been removed from the trunk (development version),
> > that now uses OpenBitSet only:
> > https://issues.apache.org/jira/browse/LUCENE-1296
> >
> > In case there is preference to have SortedVIntList used in the
> > next lucene version (i.e. in cases when it is smaller  than
> > OpenBitSet), please comment at LUCENE-1296.
> >
> > Regards,
> > Paul Elschot
> >
> >
> >
> 

--Boundary-00=_93vmJDmU3XztScy--

From java-user-return-38558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 19:19:44 2009
Return-Path: <java-user-return-38558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47065 invoked from network); 17 Feb 2009 19:19:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 19:19:43 -0000
Received: (qmail 62879 invoked by uid 500); 17 Feb 2009 19:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62543 invoked by uid 500); 17 Feb 2009 19:19:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62532 invoked by uid 99); 17 Feb 2009 19:19:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 11:19:36 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.65] (HELO elasmtp-kukur.atl.sa.earthlink.net) (209.86.89.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 19:19:27 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=OCaqFcm9xP/LwmWy1zFHdHoKWxjljc6dLI1irts/G/Z8WYxPgkZZHOZ1UTXoojni;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.40] (helo=elwamui-milano.atl.sa.earthlink.net)
	by elasmtp-kukur.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1LZVTG-0001c2-Ot
	for java-user@lucene.apache.org; Tue, 17 Feb 2009 14:19:06 -0500
Received: from 129.34.20.19 by webmail.earthlink.net with HTTP; Tue, 17 Feb 2009 14:19:06 -0500
Message-ID: <9889702.1234898346762.JavaMail.root@elwamui-milano.atl.sa.earthlink.net>
Date: Tue, 17 Feb 2009 14:19:06 -0500 (GMT-05:00)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org
Subject: newbie seeking explanation of semantics of "Field" class
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c26093a832e8e38a5d73cdb9cb682f088116c350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.40
X-Virus-Checked: Checked by ClamAV on apache.org

R2.4 

I have been looking through the soon-to-be-superseded (by its 2nd ed.) book "Lucene In Action" (hope it's ok on this newsgroup to say I like that book); also at these two tutorials: http://darksleep.com/lucene/ and http://www.informit.com/articles/article.aspx?p=461633&seqNum=3 and also at the Lucene online docco (http://lucene.apache.org/java/2_4_0/index.html) the last of which has nothing on the topic at all! I've also tried to search http://www.nabble.com/Lucene---Java-Users-f45.html -- but there are almost 10,000 docs there on "Field." so that is too much data. 

The book is consistent with the two tutorials, but all three seem to be out of date (and the design less clear) compared to the code: http://lucene.apache.org/java/2_4_0/api/index.html 

I have copied some code and it is working for me, but I am a little uncertain how to decide what value of Field.Index and Field.Store to choose in order to get the behavior I'd like. If I read the javadocs, and decide to ignore all the "expert" items, it looks like this: 

Field.Store.NO = I'll never see that data again; I wonder why I'd do this? 

Field.Store.YES = good, the data will be stored 

Field.Store.COMPRESS = even better, stored and compressed; why would anyone do anything else? 

========

Field.Index.NO = I cannot search that data, but if I need its value for a given document (e.g., to decorate a result), I can retrieve it (use-case: maybe, the date the document was created -- but why not just make that searchable? I am having a hard time thinking of an actually useful piece of data that could go here and would not want to be one of ANALYZED or NOT_ANALYZED) 

Field.Index.ANALYZED = the normal value, I would guess, except in the special case of stuff not searchable but used to decorate results (Field.Index.NO)

Field.Index.NOT_ANALYZED = I can search for this value, but it won't get analyzed, so it is searched for as the very same value I put in (the docco suggests product numbers: any other interesting use-cases anyone can suggest?) 

========= 

thanks in advance for helping me get clearer on this!

-Paul 






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 19:49:49 2009
Return-Path: <java-user-return-38559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60034 invoked from network); 17 Feb 2009 19:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 19:49:48 -0000
Received: (qmail 5671 invoked by uid 500); 17 Feb 2009 19:49:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5648 invoked by uid 500); 17 Feb 2009 19:49:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5637 invoked by uid 99); 17 Feb 2009 19:49:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 11:49:41 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 19:49:31 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n1HJn5DZ010820
	for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 14:49:06 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <499B14B1.7010401@informatics.jax.org>
Date: Tue, 17 Feb 2009 14:49:05 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: newbie seeking explanation of semantics of "Field" class
References: <9889702.1234898346762.JavaMail.root@elwamui-milano.atl.sa.earthlink.net>
In-Reply-To: <9889702.1234898346762.JavaMail.root@elwamui-milano.atl.sa.earthlink.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.1.360522, Antispam-Engine: 2.6.1.350677, Antispam-Data: 2009.2.17.193125
X-PerlMx-Spam: Gauge=IIIIIII, Probability=8%, Report='SUPERLONG_LINE 0.05, BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Comments inline:

rolarenfan@earthlink.net wrote:
> R2.4 
>
> I have been looking through the soon-to-be-superseded (by its 2nd ed.) book "Lucene In Action" (hope it's ok on this newsgroup to say I like that book); also at these two tutorials: http://darksleep.com/lucene/ and http://www.informit.com/articles/article.aspx?p=461633&seqNum=3 and also at the Lucene online docco (http://lucene.apache.org/java/2_4_0/index.html) the last of which has nothing on the topic at all! I've also tried to search http://www.nabble.com/Lucene---Java-Users-f45.html -- but there are almost 10,000 docs there on "Field." so that is too much data. 
>
> The book is consistent with the two tutorials, but all three seem to be out of date (and the design less clear) compared to the code: http://lucene.apache.org/java/2_4_0/api/index.html 
>
> I have copied some code and it is working for me, but I am a little uncertain how to decide what value of Field.Index and Field.Store to choose in order to get the behavior I'd like. If I read the javadocs, and decide to ignore all the "expert" items, it looks like this: 
>
> Field.Store.NO = I'll never see that data again; I wonder why I'd do this?
This is useful in the cases where you have data you want to be able to 
search by, but never need to display it.

For example in my application we have complex data like:

kit<Gsfco1>
^ 
<http://www.informatics.jax.org/javawi2/servlet/WIFetch?page=alleleDetail&id=MGI:3530308>
In one of our searchable indexes we do quite a bit of transformation to 
this data, and remove all of the punctuation, etc etc.

so it turns into: kit gsfcol

This is great for searching, cause it allows us to have punctuation 
irrelevant search results, but the user simply doesn't care whatsoever.  
So at display time, we show them the unmodified, case sensitive version 
of this data, which is stored in another field.
>  
>
> Field.Store.YES = good, the data will be stored 
>
>   
Storage takes up space, so if you are ONLY going to search on a piece of 
data, and never display it, you should not store it.
> Field.Store.COMPRESS = even better, stored and compressed; why would anyone do anything else? 
>
>   
I agree.
> ========
>
> Field.Index.NO = I cannot search that data, but if I need its value for a given document (e.g., to decorate a result), I can retrieve it (use-case: maybe, the date the document was created -- but why not just make that searchable? I am having a hard time thinking of an actually useful piece of data that could go here and would not want to be one of ANALYZED or NOT_ANALYZED) 
>
>   
Correct, you use this type of data as additional information about the 
data you matched on. 
> Field.Index.ANALYZED = the normal value, I would guess, except in the special case of stuff not searchable but used to decorate results (Field.Index.NO)
>
>   
Correct.
> Field.Index.NOT_ANALYZED = I can search for this value, but it won't get analyzed, so it is searched for as the very same value I put in (the docco suggests product numbers: any other interesting use-cases anyone can suggest?) 
>
>   
Its highly useful for exact match searching.
> ========= 
>
> thanks in advance for helping me get clearer on this!
>
> -Paul 
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 19:51:00 2009
Return-Path: <java-user-return-38560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60474 invoked from network); 17 Feb 2009 19:51:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 19:51:00 -0000
Received: (qmail 11891 invoked by uid 500); 17 Feb 2009 19:50:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11771 invoked by uid 500); 17 Feb 2009 19:50:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11760 invoked by uid 99); 17 Feb 2009 19:50:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 11:50:53 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.190.230.99] (HELO mail.troja.net) (80.190.230.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 19:50:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4DE874FCA0;
	Tue, 17 Feb 2009 20:50:20 +0100 (CET)
Received: from mail.troja.net ([127.0.0.1])
 by localhost (cyca.troja.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 02246-01; Tue, 17 Feb 2009 20:49:48 +0100 (CET)
Received: from VEGA (port-83-236-62-11.dynamic.qsc.de [83.236.62.11])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTP id 931C34F831;
	Tue, 17 Feb 2009 20:49:45 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<rolarenfan@earthlink.net>
References: <9889702.1234898346762.JavaMail.root@elwamui-milano.atl.sa.earthlink.net>
Subject: RE: newbie seeking explanation of semantics of "Field" class
Date: Tue, 17 Feb 2009 20:49:47 +0100
Message-ID: <D6B472C746FF4A9B82607676A7C5C188@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmRNLSJqnhvrz5XTAieUedmc95LuQAApf+A
In-Reply-To: <9889702.1234898346762.JavaMail.root@elwamui-milano.atl.sa.earthlink.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul,

> I have copied some code and it is working for me, but I am a little
> uncertain how to decide what value of Field.Index and Field.Store to
> choose in order to get the behavior I'd like. If I read the javadocs, and
> decide to ignore all the "expert" items, it looks like this:
> 
> Field.Store.NO = I'll never see that data again; I wonder why I'd do this?

If you have the data somewhere else (like in XML) files, it makes no sense,
to store it additionally in the index. You would normally store one field
containing the filename or identifier and use it for retrieving the original
document. On the other hand, if you want to have a index-only solution, it
may be good to store the filed values in index, but this may not be needed
for all fields. E.g. you have a filed, in which you index the whole document
contents and another field, where you only index the title (with that you
can search only inside the title or in the whole documents). As the title is
part of the whole document contents, it makes no sense to additionally store
it, if it's not really needed for displaying results.

> Field.Store.YES = good, the data will be stored

Yes.

> Field.Store.COMPRESS = even better, stored and compressed; why would
> anyone do anything else?

Compressing is very contraproductive for small values (and decreases
performance). Short values like identifers and so on mostly "compress" to
larger values than before. So, only use compress, if you have large document
contents, where performance of retrieving is not important.

> ========
> 
> Field.Index.NO = I cannot search that data, but if I need its value for a
> given document (e.g., to decorate a result), I can retrieve it (use-case:
> maybe, the date the document was created -- but why not just make that
> searchable? I am having a hard time thinking of an actually useful piece
> of data that could go here and would not want to be one of ANALYZED or
> NOT_ANALYZED)

E.g. we have this here, to store the original XML document. The XML
documents does not get indexed directly, only the text contents are indexed.
For result display, I store the XML file in a stored-only field (and
compressed). By the way, you can also store binary data like images (but not
index it).

> Field.Index.ANALYZED = the normal value, I would guess, except in the
> special case of stuff not searchable but used to decorate results
> (Field.Index.NO)
> 
> Field.Index.NOT_ANALYZED = I can search for this value, but it won't get
> analyzed, so it is searched for as the very same value I put in (the docco
> suggests product numbers: any other interesting use-cases anyone can
> suggest?)

All type of identifiers or primary keys, numbers like prices, dates,...

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 20:08:55 2009
Return-Path: <java-user-return-38561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66288 invoked from network); 17 Feb 2009 20:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 20:08:55 -0000
Received: (qmail 41487 invoked by uid 500); 17 Feb 2009 20:08:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41447 invoked by uid 500); 17 Feb 2009 20:08:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41436 invoked by uid 99); 17 Feb 2009 20:08:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 12:08:47 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 20:08:37 +0000
Received: by rv-out-0506.google.com with SMTP id k40so3534474rvb.5
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 12:08:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ufkfbPCMXlTqCXIcGV2SUxj6geSZvUcZwj+gKWkAd+E=;
        b=GyJed8GCSwnaB4cLBF0FtBb/1bKuvLCNP5Cxa+jN32et0317f8rTbtwZ/T7SGwRRfc
         3ydIqLzqJ6i/pw4kmAp1vrHgCFC/e9mdq3HLPbIu4WkqKBQtltEE1AOoSr1hPkT30zpA
         jobnobM3GP/eYSGnnvFBJeW1+THe3mnqEtVNM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CEDGjInox9EnmaGU1u+YPk98yinxKc6WRA/fuU22usG4anP8kogXrT2tWiF0mJCgzL
         7rxpmAwyhpBB05Ln0oJH+gdpTgMR2qE6cRWz28+FX9T9NL6r9vY0kYtLhk7yDNqGVXf9
         VO5Yypv//3z3WUDdLRFsv6B3dkuLztolwvoBQ=
MIME-Version: 1.0
Received: by 10.141.176.6 with SMTP id d6mr569088rvp.175.1234901294433; Tue, 
	17 Feb 2009 12:08:14 -0800 (PST)
In-Reply-To: <9889702.1234898346762.JavaMail.root@elwamui-milano.atl.sa.earthlink.net>
References: <9889702.1234898346762.JavaMail.root@elwamui-milano.atl.sa.earthlink.net>
Date: Tue, 17 Feb 2009 15:08:14 -0500
Message-ID: <359a92830902171208o54bc6772nde2523a1bf3610a@mail.gmail.com>
Subject: Re: newbie seeking explanation of semantics of "Field" class
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org, rolarenfan@earthlink.net
Content-Type: multipart/alternative; boundary=000e0cd14f2afcc61e046322dcdc
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd14f2afcc61e046322dcdc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

This confused me on my first encounter, but it all makes
sense after a while....

The first thing to understand is that Store and Index are
orthogonal.That is, when you index a field that data
is placed in the inverted index and is searchable, whether
or not you store it. But it is not retrievable easily.

Conversely, when you store the data, a literal copy is
stored, no analysis is done. This preserves case,
stopwords, original word if stemming is used,
punctuation, etc.

See below for more details...

On Tue, Feb 17, 2009 at 2:19 PM, <rolarenfan@earthlink.net> wrote:

> R2.4
>
> I have been looking through the soon-to-be-superseded (by its 2nd ed.) book
> "Lucene In Action" (hope it's ok on this newsgroup to say I like that book);
> also at these two tutorials: http://darksleep.com/lucene/ and
> http://www.informit.com/articles/article.aspx?p=461633&seqNum=3 and also
> at the Lucene online docco (http://lucene.apache.org/java/2_4_0/index.html)
> the last of which has nothing on the topic at all! I've also tried to search
> http://www.nabble.com/Lucene---Java-Users-f45.html -- but there are almost
> 10,000 docs there on "Field." so that is too much data.
>
> The book is consistent with the two tutorials, but all three seem to be out
> of date (and the design less clear) compared to the code:
> http://lucene.apache.org/java/2_4_0/api/index.html
>
> I have copied some code and it is working for me, but I am a little
> uncertain how to decide what value of Field.Index and Field.Store to choose
> in order to get the behavior I'd like. If I read the javadocs, and decide to
> ignore all the "expert" items, it looks like this:
>
> Field.Store.NO = I'll never see that data again; I wonder why I'd do this?


Mostly for space reasons. Say you have a version of a document that you
really want to show the user, for instance PDFs or images of pages. We have
cases where we have images of pages in books, and OCRd data of those images.
We'll never want to show the OCR to the user, but that's all we have to
search. What we do show the user is the image of the page from the image
vault. So we don't store the OCR text, just index it.

>
>
> Field.Store.YES = good, the data will be stored


Yes, but this bloats the index. If you're not going to show the user the
field exactly as it exists, there's no reason to store it. See above.


>
>
> Field.Store.COMPRESS = even better, stored and compressed; why would anyone
> do anything else?


Because of the cost involved in decompressing it, assuming you want to store
it in the first place (see above). But assume you want to show 500 documents
at a time. Decompressing time may count.

>
>
> ========
>
> Field.Index.NO = I cannot search that data, but if I need its value for a
> given document (e.g., to decorate a result), I can retrieve it (use-case:
> maybe, the date the document was created -- but why not just make that
> searchable? I am having a hard time thinking of an actually useful piece of
> data that could go here and would not want to be one of ANALYZED or
> NOT_ANALYZED)
>

Think harder <G>.... We have an application where we store meta-data in the
document for page navigation. There's no reason to index this data because
we never search on it. We don't want to provide the users with an interface
like "search for Erick on pages 21-32", we don't think it's valuable. One
can solve this kind of problem with an external data store (say a database),
but the added complexity of a second storage mechanism is worth avoiding if
possible.


>
> Field.Index.ANALYZED = the normal value, I would guess, except in the
> special case of stuff not searchable but used to decorate results (
> Field.Index.NO)


Yep, this is the most common case in my experience.


>
>
> Field.Index.NOT_ANALYZED = I can search for this value, but it won't get
> analyzed, so it is searched for as the very same value I put in (the docco
> suggests product numbers: any other interesting use-cases anyone can
> suggest?)


Most analyzers change the stream into tokens. For instance it would be very
common to break up 1234-5678 into 1234 and 5678. Assume this is a part
number. Matching 1234 is useless. And it's even worse if your analyzer
strips out the numbers entirely. Or SSN or even a case where you don't want
to break up on whitespace. Telephone numbers. Although in truth I don't use
this very often, but it saves a world of hurt when needed

Best
Erick

>
>
> =========
>
> thanks in advance for helping me get clearer on this!
>
> -Paul
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd14f2afcc61e046322dcdc--

From java-user-return-38562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 20:50:19 2009
Return-Path: <java-user-return-38562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84522 invoked from network); 17 Feb 2009 20:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 20:50:18 -0000
Received: (qmail 87598 invoked by uid 500); 17 Feb 2009 20:50:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87577 invoked by uid 500); 17 Feb 2009 20:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87566 invoked by uid 99); 17 Feb 2009 20:50:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 12:50:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of haroldo_lucene@hotmail.com designates 65.54.246.236 as permitted sender)
Received: from [65.54.246.236] (HELO bay0-omc3-s36.bay0.hotmail.com) (65.54.246.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 20:50:01 +0000
Received: from BAY138-W25 ([64.4.49.60]) by bay0-omc3-s36.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 17 Feb 2009 12:49:40 -0800
Message-ID: <BAY138-W2593B35F97D79B6E4466DDF7B40@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_39240b80-a54e-4bd7-8c92-2ab0d9034e15_"
X-Originating-IP: [189.20.40.106]
From: Haroldo Nascimento <haroldo_lucene@hotmail.com>
To: lucene-user lucene-user <java-user@lucene.apache.org>
Subject: Identify the fields with matching only
Date: Tue, 17 Feb 2009 23:49:40 +0300
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 17 Feb 2009 20:49:40.0380 (UTC) FILETIME=[40DB85C0:01C99141]
X-Virus-Checked: Checked by ClamAV on apache.org

--_39240b80-a54e-4bd7-8c92-2ab0d9034e15_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi=2C
  I did a search and need to identify in which fields had occurred matching=
. Is possible ?=20
=20
  Thanks
_________________________________________________________________
Cansado de espa=E7o para s=F3 50 fotos? Conhe=E7a o Spaces=2C o site de rel=
acionamentos com at=E9 6=2C000 fotos!
http://www.amigosdomessenger.com.br=

--_39240b80-a54e-4bd7-8c92-2ab0d9034e15_--

From java-user-return-38563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 21:10:27 2009
Return-Path: <java-user-return-38563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92908 invoked from network); 17 Feb 2009 21:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 21:10:27 -0000
Received: (qmail 9328 invoked by uid 500); 17 Feb 2009 21:10:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9296 invoked by uid 500); 17 Feb 2009 21:10:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9284 invoked by uid 99); 17 Feb 2009 21:10:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 13:10:21 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 21:10:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LZXCQ-0007QD-Tc
	for java-user@lucene.apache.org; Tue, 17 Feb 2009 13:09:50 -0800
Message-ID: <22066404.post@talk.nabble.com>
Date: Tue, 17 Feb 2009 13:09:50 -0800 (PST)
From: AmigoProgrammer <mgr@papaecho.com>
To: java-user@lucene.apache.org
Subject: Re: Querying for a catagory
In-Reply-To: <359a92830902170530o77b34a13sc9e225980a5a99bf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mgr@papaecho.com
References: <22044596.post@talk.nabble.com> <359a92830902161253m1bfc4ad0sa86b17ed0027aa17@mail.gmail.com> <22055571.post@talk.nabble.com> <359a92830902170530o77b34a13sc9e225980a5a99bf@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I previous posts I have used document for both a file (e.g. Word or Pdf) and
a Lucene document. Let me try again:

A client can have many files but a file only has one client.

For some queries I am not interested in the individual files that match the
query, but rather in the sum of the score for matching files grouped by
clients. Hence the reference to 'group by'. 

If the index contains three matching documents A, B and C with a score of
0.2, 0.1 and 0.5 respectively. Where A and B is associated to client X and C
is associated to client Y.

The query should ideally return
Y: 0.5
X: 0.3 (sum of 0.2 and 0.1)
 
I have made a small PoC index where all files for a client is added to the
same Lucene document along with the client id as a keyword. This works fine
for the above purpose, but does not allow me to query for individual
documents. Which I am also interested in.

I haven't built the index yet, but I estimat an index of less than 100.000
documents. I hope to achieve responce times less that 2 secs.

Unsure what you mean by 'user'? 

Best,

Michael



Erick Erickson wrote:
> 
> Well, I can imagine several schemes, how suitable they are depends
> upon some as yet unspecified characteristics of your problem space.
> 
> You don't want to iterate blindly over the responses in a
> HitCollector.collect method  unless your index is quite small (see the
> API docs for an explanation).
> 
> If you don't have very many users, you could consider creating a Filter
> at startup time, one for each user with a bit set for each document
> that user has (see TermDocs/TermEnum).
> 
> You could *try* FieldSelector (aka Lazy Loading) to make document
> fetching more efficient in your collect method. If you try this be sure
> that your user field is indexed. Again, depending upon your index
> characteristics this may or may not be viable.
> 
> Instead of FieldSelector you could try using TermDocs/TermEnum in
> your collect method to see if a user was indexed for a particular
> document.
> 
> You could also supply some more details about your index, e.g. number
> of documents, number of users, whether more than one user is allowed
> per document. What response times you require. What the larger problem
> you're trying to solve, that is, what use case are you trying to solve.
> Which
> is another way of asking if this is an XY problem.
> 
> Perhaps wiser heads than mine can come up with something clever with
> enough details.
> 
> Best
> Erick
> 
> On Tue, Feb 17, 2009 at 6:47 AM, AmigoProgrammer <mgr@papaecho.com> wrote:
> 
>>
>> A relevant client is one that is related to one or more documents found
>> by
>> a
>> search.
>>
>> I would store client as a keyword with a document and I would like the
>> query
>> to return clients with the sum of relevant documents score. A client with
>> many low scoring documents could be as relevant as a client with few high
>> scoring documents. Basically I am looking for a 'group by'-like
>> functionality.
>>
>> Best,
>>
>> Michael
>>
>>
>> Erick Erickson wrote:
>> >
>> > What constitutes a "relevant client"? If you want
>> > to restrict the returned documents to a particular client
>> > (or even a set of clients) a simple +client:<client name>
>> > would do the trick.....
>> >
>> > Or you could create a Filter for "relevant clients".
>> >
>> > If neither of these helps, could you clarify your
>> > definition of a relevant client?
>> >
>> > Best
>> > Erick
>> >
>> >
>> > On Mon, Feb 16, 2009 at 3:00 PM, AmigoProgrammer <mgr@papaecho.com>
>> wrote:
>> >
>> >>
>> >> Hi,
>> >>
>> >> I have a number of documents that each relate to a client. I would
>> like
>> >> to
>> >> use an index and queries to answer two question:
>> >> - Find relevant documents
>> >> - Find relevant clients
>> >>
>> >> The first one is straight forward.
>> >> For the second one, I am wondering. Should I iterate over the hits and
>> >> compute the most relevant clients. Or is there a clever build-in way
>> of
>> >> answering the question?
>> >>
>> >> Anyone that can help me crack the nut?
>> >>
>> >> Best,
>> >>
>> >> Michael
>> >> --
>> >> View this message in context:
>> >> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22044596.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22055571.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Querying-for-a-catagory-tp22044596p22066404.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 17 21:43:07 2009
Return-Path: <java-user-return-38564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18646 invoked from network); 17 Feb 2009 21:43:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2009 21:43:07 -0000
Received: (qmail 38673 invoked by uid 500); 17 Feb 2009 21:42:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38641 invoked by uid 500); 17 Feb 2009 21:42:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38630 invoked by uid 99); 17 Feb 2009 21:42:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 13:42:58 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 21:42:47 +0000
Received: by rv-out-0506.google.com with SMTP id g9so1697766rvb.5
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 13:42:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/4mFjzctfKnHlb4pq+BIJgA9jfMK9b1a7gra3aH8hIk=;
        b=MFlLb3IRxb3CisuSZ6vWb12lRz1u37SloDjfyfGkaoStNNwBnVCyiKhQqqlXA1PbSJ
         WuFT/k1vz4B6n9Q9AkzaXuou58eRZODOhq6GYL89F6hWnD2nz1BP4chUSkDz73NTXPU+
         F4Xs+/oKh7aG1OwXKdU8RLv9uhOeaol1KehHg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=C8Y9lLWHQOewlKjy+d/akyGHQhLQ9BC9B3jN5KL4ZPPHEGiGd2EIu+0+EK4tGLyXc9
         RmcvQoDnxwPNPb+VYC0eKaHR8M5oT4UJT2b4iHh+TZLL6eUdQOPYOr5oBmdYtkJz4e3l
         DMoDPlVn121T5Tg5nfIhHfzwTzE5kA/Ue2i7U=
MIME-Version: 1.0
Received: by 10.141.115.20 with SMTP id s20mr3470676rvm.285.1234906945378; 
	Tue, 17 Feb 2009 13:42:25 -0800 (PST)
In-Reply-To: <22066404.post@talk.nabble.com>
References: <22044596.post@talk.nabble.com>
	 <359a92830902161253m1bfc4ad0sa86b17ed0027aa17@mail.gmail.com>
	 <22055571.post@talk.nabble.com>
	 <359a92830902170530o77b34a13sc9e225980a5a99bf@mail.gmail.com>
	 <22066404.post@talk.nabble.com>
Date: Tue, 17 Feb 2009 16:42:25 -0500
Message-ID: <359a92830902171342g2b45953bm45283dfae2f1e43d@mail.gmail.com>
Subject: Re: Querying for a catagory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd15534cf58950463242d2a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd15534cf58950463242d2a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

OK, I think I'm getting it, but I'm slow sometimes.

The first thing I'd try is to make sure you index the user
with each document. Then in you HitCollector.collect, use
FieldSelector to load ONLY the user ID from each document
and add the score for that doc to that user (you'll have
to keep some sort of map, the usual Java variety to record
this for different users). Run some timings on this process
to insure your performance is adequate. That keeps your
extra work to a minimum.

If that doesn't work, you could create a map of doc IDs
to users that you access in your HitCollector.collect
method to see what user to add the current score to.
This could be created by using TermDocs/TermEnum at,
say, index open time.

Since you're not talking a huge index here, this shouldn't
be to costly.

Best
Erick



On Tue, Feb 17, 2009 at 4:09 PM, AmigoProgrammer <mgr@papaecho.com> wrote:

>
> I previous posts I have used document for both a file (e.g. Word or Pdf)
> and
> a Lucene document. Let me try again:
>
> A client can have many files but a file only has one client.
>
> For some queries I am not interested in the individual files that match the
> query, but rather in the sum of the score for matching files grouped by
> clients. Hence the reference to 'group by'.
>
> If the index contains three matching documents A, B and C with a score of
> 0.2, 0.1 and 0.5 respectively. Where A and B is associated to client X and
> C
> is associated to client Y.
>
> The query should ideally return
> Y: 0.5
> X: 0.3 (sum of 0.2 and 0.1)
>
> I have made a small PoC index where all files for a client is added to the
> same Lucene document along with the client id as a keyword. This works fine
> for the above purpose, but does not allow me to query for individual
> documents. Which I am also interested in.
>
> I haven't built the index yet, but I estimat an index of less than 100.000
> documents. I hope to achieve responce times less that 2 secs.
>
> Unsure what you mean by 'user'?
>
> Best,
>
> Michael
>
>
>
> Erick Erickson wrote:
> >
> > Well, I can imagine several schemes, how suitable they are depends
> > upon some as yet unspecified characteristics of your problem space.
> >
> > You don't want to iterate blindly over the responses in a
> > HitCollector.collect method  unless your index is quite small (see the
> > API docs for an explanation).
> >
> > If you don't have very many users, you could consider creating a Filter
> > at startup time, one for each user with a bit set for each document
> > that user has (see TermDocs/TermEnum).
> >
> > You could *try* FieldSelector (aka Lazy Loading) to make document
> > fetching more efficient in your collect method. If you try this be sure
> > that your user field is indexed. Again, depending upon your index
> > characteristics this may or may not be viable.
> >
> > Instead of FieldSelector you could try using TermDocs/TermEnum in
> > your collect method to see if a user was indexed for a particular
> > document.
> >
> > You could also supply some more details about your index, e.g. number
> > of documents, number of users, whether more than one user is allowed
> > per document. What response times you require. What the larger problem
> > you're trying to solve, that is, what use case are you trying to solve.
> > Which
> > is another way of asking if this is an XY problem.
> >
> > Perhaps wiser heads than mine can come up with something clever with
> > enough details.
> >
> > Best
> > Erick
> >
> > On Tue, Feb 17, 2009 at 6:47 AM, AmigoProgrammer <mgr@papaecho.com>
> wrote:
> >
> >>
> >> A relevant client is one that is related to one or more documents found
> >> by
> >> a
> >> search.
> >>
> >> I would store client as a keyword with a document and I would like the
> >> query
> >> to return clients with the sum of relevant documents score. A client
> with
> >> many low scoring documents could be as relevant as a client with few
> high
> >> scoring documents. Basically I am looking for a 'group by'-like
> >> functionality.
> >>
> >> Best,
> >>
> >> Michael
> >>
> >>
> >> Erick Erickson wrote:
> >> >
> >> > What constitutes a "relevant client"? If you want
> >> > to restrict the returned documents to a particular client
> >> > (or even a set of clients) a simple +client:<client name>
> >> > would do the trick.....
> >> >
> >> > Or you could create a Filter for "relevant clients".
> >> >
> >> > If neither of these helps, could you clarify your
> >> > definition of a relevant client?
> >> >
> >> > Best
> >> > Erick
> >> >
> >> >
> >> > On Mon, Feb 16, 2009 at 3:00 PM, AmigoProgrammer <mgr@papaecho.com>
> >> wrote:
> >> >
> >> >>
> >> >> Hi,
> >> >>
> >> >> I have a number of documents that each relate to a client. I would
> >> like
> >> >> to
> >> >> use an index and queries to answer two question:
> >> >> - Find relevant documents
> >> >> - Find relevant clients
> >> >>
> >> >> The first one is straight forward.
> >> >> For the second one, I am wondering. Should I iterate over the hits
> and
> >> >> compute the most relevant clients. Or is there a clever build-in way
> >> of
> >> >> answering the question?
> >> >>
> >> >> Anyone that can help me crack the nut?
> >> >>
> >> >> Best,
> >> >>
> >> >> Michael
> >> >> --
> >> >> View this message in context:
> >> >>
> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22044596.html
> >> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> >>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >>
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22055571.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Querying-for-a-catagory-tp22044596p22066404.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd15534cf58950463242d2a--

From java-user-return-38565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 02:55:21 2009
Return-Path: <java-user-return-38565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71899 invoked from network); 18 Feb 2009 02:55:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 02:55:21 -0000
Received: (qmail 24403 invoked by uid 500); 18 Feb 2009 02:55:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24375 invoked by uid 500); 18 Feb 2009 02:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24364 invoked by uid 99); 18 Feb 2009 02:55:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 18:55:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 02:55:07 +0000
X-ASG-Debug-ID: 1234925686-692500400000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id B87C7321B3
	for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 18:54:46 -0800 (PST)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id lFeXB1cB1nSzMlnx for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 18:54:46 -0800 (PST)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: Hebrew and Hindi analyzers
Subject: Hebrew and Hindi analyzers
Date: Tue, 17 Feb 2009 18:54:46 -0800
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6D2C@rw-ex2003.BROADVISION.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Hebrew and Hindi analyzers
Thread-Index: AcmRdEG9VY9DATjARZ26f7F2/7belA==
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1234925686
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Are there free Hebrew and Hindi language analyzers for
lucene? I searched archive and found some discussions,
but did not see clear pointers to downloadable classes.

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 05:08:07 2009
Return-Path: <java-user-return-38566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13055 invoked from network); 18 Feb 2009 05:08:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 05:08:06 -0000
Received: (qmail 3319 invoked by uid 500); 18 Feb 2009 05:07:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3286 invoked by uid 500); 18 Feb 2009 05:07:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3275 invoked by uid 99); 18 Feb 2009 05:07:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 21:07:59 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 05:07:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LZeef-0000r3-Fm
	for java-user@lucene.apache.org; Tue, 17 Feb 2009 21:07:29 -0800
Message-ID: <22072317.post@talk.nabble.com>
Date: Tue, 17 Feb 2009 21:07:29 -0800 (PST)
From: selvaa <selvaganapathi_mect@rediffmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unique Filter on search results
In-Reply-To: <4397aa520902170827w12d0292cl861886b213ee1fc0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: selvaganapathi_mect@rediffmail.com
References: <22051332.post@talk.nabble.com> <4397aa520902170827w12d0292cl861886b213ee1fc0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It wont fit it to my requirement . then I need to maintain different
Indexer,Searcher .....It will bring mess up in my Architecture ...=20


=E9=BB=84=E6=88=90 wrote:
>=20
> Does it make sense to add another index only included UserName,Web Page
> Name
> and other statistic fields?
>=20
> On Tue, Feb 17, 2009 at 2:33 PM, selvaa
> <selvaganapathi_mect@rediffmail.com>wrote:
>=20
>>
>> Hi,
>>         I am creating a tracker for web applications. I am indexing all
>> the
>> user credentials  while  they are logging .
>>         The problem is , user might be hit the same web page many times
>> during the action period .
>>        So my tracker application is indexing the same value for several
>> times.  while getting the search with time limit (ex : jan 20 ,2009 to
>> feb
>> 20 ,2009)
>>        It is giving the repetitive results , but only time pattern is
>> different .
>>        This is my Document Fields
>>             *UserName
>>             *IP
>>             *DATE
>>             *Web Page Name
>>
>>      Now how can I filter/search the indexes with unique value criteria=
=20
>> on
>> Fields ( "UserName " & "Web Page Name" ) ?
>>      I have found one Filter called Duplicate  Filter , But it is not
>> doing
>> unique field value filter condition on Search Results , it does on whole
>> indexes .
>>      Please help me out  from this head ache  ....
>> --
>> View this message in context:
>> http://www.nabble.com/Unique-Filter-on-search-results-tp22051332p2205133=
2.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Unique-Filter-on-search=
-results-tp22051332p22072317.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 05:48:26 2009
Return-Path: <java-user-return-38567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33912 invoked from network); 18 Feb 2009 05:48:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 05:48:26 -0000
Received: (qmail 35283 invoked by uid 500); 18 Feb 2009 05:48:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35246 invoked by uid 500); 18 Feb 2009 05:48:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35235 invoked by uid 99); 18 Feb 2009 05:48:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Feb 2009 21:48:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 05:48:10 +0000
Received: by qw-out-2122.google.com with SMTP id 5so814593qwi.53
        for <java-user@lucene.apache.org>; Tue, 17 Feb 2009 21:47:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=vccUgnUcxAe1GXug3PxU7v4xhs5rAGcxK3Qi0I3d43I=;
        b=H7AwQ8dJlS+GGmrBnKFGSRZ9RXlwyVKOhrYbTiJPVeq5ieQQfmfX0Ht5jEb6+A1Gl9
         7GxMdL4gxv4WJKlgHPsODh/glTJWReD+Lmfuhfk0Etp/vyMfxCf2RfAXP6iTde/oL3Ex
         WJ28DcaKuqu1KRA3IO8LOaEGTNBTMejdQPucQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rw1N2ZrVc9PdtbI82EGC4xuDaGzKkDMgqrJv8YDGu5JgbtM/UvYQMpJ/9qAa0qlkg2
         1tX+9AQdX2gplxnzyuX8kEV68knL3r6/ozB6GmeBWUsMNm29i9gRFhIJMxLeQZzWW5n1
         I1CzTfwKbQNNLQhE2xer53YQI+LO6cDGQjEAU=
MIME-Version: 1.0
Received: by 10.229.100.13 with SMTP id w13mr13389qcn.62.1234936069466; Tue, 
	17 Feb 2009 21:47:49 -0800 (PST)
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6D2C@rw-ex2003.BROADVISION.COM>
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6D2C@rw-ex2003.BROADVISION.COM>
Date: Wed, 18 Feb 2009 00:47:49 -0500
Message-ID: <8f0ad1f30902172147s7ca918d2qc8af5ded4dd45fa@mail.gmail.com>
Subject: Re: Hebrew and Hindi analyzers
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b85cabdaad104632af5e9
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363b85cabdaad104632af5e9
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

hey i've played around with trying to get towards a reasonable gpl hebrew
analyzer for lucene but don't have anything yet... just messing during my
spare time.

in general it wasnt hard to munge the hspell perl scripts with some java
code into producing a morphological analyzer but from what I see this is
pretty useless without some disambiguation, because precision is low even
when things are written in pristine spelling, etc.

i'm not aware of some good trec-like data for hebrew to benchmark any ideas
against either, which creates some problems.

i do have the idea of trying to only solve the easier problem of
segmentation to create a reasonable search, and there's some test data i've
been playing with here:
http://www.aaai.org/Papers/Workshops/2008/WS-08-15/WS08-15-011.pdf

problem is I can't train on it (if you read the paper it explains this).

one thing i did do was upload some tokenization work here:
https://issues.apache.org/jira/browse/LUCENE-1488

this uses RBBI and should at least tokenize your hindi correctly (according
to unicode rules). it should also parse your hebrew better (but still not
really correct), but really won't give you a useful hebrew search, just
handle punctuation a bit better. it also has some practical problems that
should be fixed as mentioned in the JIRA task.

don't know if this helps...

On Tue, Feb 17, 2009 at 9:54 PM, Zhang, Lisheng <
Lisheng.Zhang@broadvision.com> wrote:

> Hi,
>
> Are there free Hebrew and Hindi language analyzers for
> lucene? I searched archive and found some discussions,
> but did not see clear pointers to downloadable classes.
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016363b85cabdaad104632af5e9--

From java-user-return-38568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 08:09:34 2009
Return-Path: <java-user-return-38568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15444 invoked from network); 18 Feb 2009 08:09:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 08:09:32 -0000
Received: (qmail 69634 invoked by uid 500); 18 Feb 2009 08:09:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69605 invoked by uid 500); 18 Feb 2009 08:09:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69594 invoked by uid 99); 18 Feb 2009 08:09:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 00:09:23 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Fang_Li@emc.com designates 128.222.32.20 as permitted sender)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 08:09:13 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id n1I88qSV002580
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 03:08:52 -0500 (EST)
Received: from mailhub.lss.emc.com (sesha.lss.emc.com [10.254.144.12]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 03:08:39 -0500
Received: from corpussmtp2.corp.emc.com (corpussmtp2.corp.emc.com [128.221.14.146])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id n1I88dMH004147
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 03:08:39 -0500 (EST)
From: Fang_Li@emc.com
Received: from CORPUSMX70C.corp.emc.com ([128.221.32.146]) by corpussmtp2.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 18 Feb 2009 03:08:38 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Subject: RE: the efficiency of creating indexes
Date: Wed, 18 Feb 2009 03:08:35 -0500
Message-ID: <07FEB1409F7A8C4FBA71A3A00ABFD043E8D8A6@CORPUSMX70C.corp.emc.com>
In-Reply-To: <284995.53700.qm@web15803.mail.cnb.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: the efficiency of creating indexes
Thread-Index: AcmP+k+8/q7LsLT0RhG9Y7n6vt4stgBoZSww
References: <284995.53700.qm@web15803.mail.cnb.yahoo.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Feb 2009 08:08:38.0283 (UTC) FILETIME=[1A8A35B0:01C991A0]
X-Virus-Checked: Checked by ClamAV on apache.org

Did you try?
The cost of index merging grows when indexes are getting bigger.
Try to limit the max document size in a segment by setting =
setMaxMergeDocs in IndexWriter.

-----Original Message-----
From: =D6=CE=BD=AD =CD=F5 [mailto:wangzhijiang999@yahoo.com.cn]=20
Sent: Monday, February 16, 2009 1:49 PM
To: java-user@lucene.apache.org
Subject: the efficiency of creating indexes

As i know, the time effciency of creating index is non-linearity with =
the size of documents. For example, if the size of indexes is 1G, the =
time cost is 2 hours, If the size of indexes is 10G, the time cost may =
be 30 hours. Who can tell me what is the reason? Any tips will be =
appreciated.


      ___________________________________________________________=20
  =
=BA=C3=CD=E6=BA=D8=BF=A8=B5=C8=C4=E3=B7=A2=A3=AC=D3=CA=CF=E4=BA=D8=BF=A8=C8=
=AB=D0=C2=C9=CF=CF=DF=A3=A1=20
http://card.mail.cn.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 08:26:51 2009
Return-Path: <java-user-return-38569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24961 invoked from network); 18 Feb 2009 08:26:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 08:26:51 -0000
Received: (qmail 92451 invoked by uid 500); 18 Feb 2009 08:26:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92283 invoked by uid 500); 18 Feb 2009 08:26:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92272 invoked by uid 99); 18 Feb 2009 08:26:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 00:26:41 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Fang_Li@emc.com designates 128.222.32.20 as permitted sender)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 08:26:32 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id n1I8QAIF003702
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 03:26:10 -0500 (EST)
Received: from mailhub.lss.emc.com (sesha.lss.emc.com [10.254.144.12]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 03:26:09 -0500
Received: from corpussmtp2.corp.emc.com (corpussmtp2.corp.emc.com [128.221.14.146])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id n1I8Q911010891
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 03:26:09 -0500 (EST)
From: Fang_Li@emc.com
Received: from CORPUSMX70C.corp.emc.com ([128.221.32.146]) by corpussmtp2.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 18 Feb 2009 03:26:08 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
x-cr-hashedpuzzle: AmZK BLtG Bay0 CZzN C/+h EljA FRnb GJCN GkL4 G4TG HEM7 InSu J4F1 LHKW Ltjr LvFT;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{E799669B-2E84-4C74-A240-BDB00B73B2D1};ZgBhAG4AZwBfAGwAaQBAAGUAbQBjAC4AYwBvAG0A;Wed, 18 Feb 2009 08:26:03 GMT;dABoAGUAIABpAG0AcABhAGMAdAAgAG8AZgAgAHQAaABvAHUAcwBhAG4AZABzACAAbwBmACAAZgBpAGUAbABkACAAaQBuACAAYQAgAHMAaQBuAGcAbABlACAAZABvAGMAdQBtAGUAbgB0AA==
x-cr-puzzleid: {E799669B-2E84-4C74-A240-BDB00B73B2D1}
Content-class: urn:content-classes:message
Subject: the impact of thousands of field in a single document
Date: Wed, 18 Feb 2009 03:26:03 -0500
Message-ID: <07FEB1409F7A8C4FBA71A3A00ABFD043E8D8BB@CORPUSMX70C.corp.emc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: the impact of thousands of field in a single document
Thread-Index: AcmRoolSIKjzBfm9SwqijaXqi44uCw==
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Feb 2009 08:26:08.0314 (UTC) FILETIME=[8C6839A0:01C991A2]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Due to requirement, we need to construct a Lucene document with tens of
thousands of Field. Did anyone try this? What's the performance penalty
comparing with one single field to store all tokens for both indexing
and searching?

Thanks,
Li=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 09:59:14 2009
Return-Path: <java-user-return-38570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67041 invoked from network); 18 Feb 2009 09:59:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 09:59:14 -0000
Received: (qmail 12891 invoked by uid 500); 18 Feb 2009 09:59:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12854 invoked by uid 500); 18 Feb 2009 09:59:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12842 invoked by uid 99); 18 Feb 2009 09:59:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 01:59:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.83.156.232] (HELO lnx503.hrz.tu-darmstadt.de) (130.83.156.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 09:58:59 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx503.hrz.tu-darmstadt.de (8.13.8/8.13.8/HRZ/PMX) with ESMTP id n1I9wbiH028618
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 10:58:37 +0100
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Phrase indexing and searching with Lucene
Date: Wed, 18 Feb 2009 10:58:37 +0100
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FD@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase indexing and searching with Lucene
Thread-Index: AcmRr3estoDp5z0YQ7Sq/KwsB+18cQ==
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX: seen v0.51
X-PMX-SPAMCHECK: outgoing mail: not checked
X-Virus-Checked: Checked by ClamAV on apache.org


Hello everybody,

In my research work, I use Lucene to index and search into text =
documents.
At present, I just index and search for single words. I want to extend =
this to phrases (or nGrams).

Could anyone please give me more details on how to do it and also point =
me to some useful references on this?

Thank you very much in advance for your help.

Best regards,
Nada Mimouni



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 10:36:57 2009
Return-Path: <java-user-return-38571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87660 invoked from network); 18 Feb 2009 10:36:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 10:36:56 -0000
Received: (qmail 51972 invoked by uid 500); 18 Feb 2009 10:36:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51942 invoked by uid 500); 18 Feb 2009 10:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51931 invoked by uid 99); 18 Feb 2009 10:36:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 02:36:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [124.153.73.149] (HELO mail.mapmyindia.com) (124.153.73.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 10:36:37 +0000
Received: (qmail 23261 invoked by uid 510); 18 Feb 2009 16:06:12 +0530
Received: from 59.178.207.251 by mail.mapmyindia.com (envelope-from <varun@mapmyindia.com>, uid 502) with qmail-scanner-1.25 
 (uvscan: v5.1.00/v5440.  
 Clear:RC:0(59.178.207.251):. 
 Processed in 5.521352 secs); 18 Feb 2009 10:36:12 -0000
Received: from triband-del-59.178.207.251.bol.net.in (HELO ?127.0.0.1?) (varun@mapmyindia.com@59.178.207.251)
  by mail.mapmyindia.com with SMTP; 18 Feb 2009 16:06:06 +0530
Message-ID: <499BE497.2060103@mapmyindia.com>
Date: Wed, 18 Feb 2009 16:06:07 +0530
From: Varun Dhussa <varun@mapmyindia.com>
Organization: CE InfoSystems (P) Ltd
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene search performance on Sun UltraSparc T2 (T5120) servers
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 090217-0, 02/17/2009), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have had a bad experience when migrating my application from Intel 
Xeon based servers to Sun UltraSparc T2 T5120 servers. Lucene fuzzy 
search just does not perform. A search which took approximately 500 ms 
takes more than 6 seconds to execute.

The index has about 100,000,000 records. So, I tried to split it into 10 
indices and used the ParallelSearcher on it, but still got similar results.

I am guessing that this is because the distance implementation used by 
Lucene requires higher clock speed and can't be parallelized much.

Please advice

-- 
Varun Dhussa
Product Architect
CE InfoSystems (P) Ltd
http://www.mapmyindia.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 10:54:58 2009
Return-Path: <java-user-return-38572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92147 invoked from network); 18 Feb 2009 10:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 10:54:58 -0000
Received: (qmail 70571 invoked by uid 500); 18 Feb 2009 10:54:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70542 invoked by uid 500); 18 Feb 2009 10:54:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70531 invoked by uid 99); 18 Feb 2009 10:54:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 02:54:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 18 Feb 2009 10:54:40 +0000
Received: (qmail 31436 invoked by uid 60001); 18 Feb 2009 10:54:19 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1234954459; bh=FL0rz64Q5B8Ww/jy9KT4KL40KdMvQYoT9p2mHKA1HQI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=C0kLY29waBcIGpjX/C1fr+RYz7RQ+cDDd+ETrncVxn42mjAE0rzVBnc5/KDrf4pev40PXitkYgQQG9ieQAyttFMSrXACkd3S26Kod7QhKWiJmR2n4V4J+qaRfOQmzZVYknLd6vbBStqZC5zhECAL9xgG2WgwxESpiyXNbxMicG4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=3Z8VUwuW/HOAQiW3jGdOdqlezOyL7Z+ZjAuezriD4qk22jLj5yTXm+8jR8hJJ+uJmsMmC3yM6zZ6t++WG74BvFVcCNQOv05vMIBgGymqhthY0xvJQZjBLScnaSWx1v1mGJBR0Q4eedOcoqXUw8XO2auGA4f0MhzmbjrV1WHkHU8=;
Message-ID: <18248.30864.qm@web26005.mail.ukl.yahoo.com>
X-YMail-OSG: dusJ3y8VM1kf.8YazI0AiB9q_HbDw1zhr8D.w0srMUz2HCjFO5yKGUPMjKS5BlFTbbXZevZqkjOh6vAYNaNNRSHXuJmiv698aHF8wnfqx2css6I67c0Swl6iD0U_VWZglXeegABC7vRox7VA1xcOak0eK7mv6yf5xNNjKvF3sQrtNynIEziLrzPgIcCQFbe_Yxl5ybeb9zwDntCW0uR0H9_80F.WJhfkz8O4
Received: from [62.189.26.100] by web26005.mail.ukl.yahoo.com via HTTP; Wed, 18 Feb 2009 10:54:18 GMT
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.289.1
References: <499BE497.2060103@mapmyindia.com>
Date: Wed, 18 Feb 2009 10:54:18 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Lucene search performance on Sun UltraSparc T2 (T5120) servers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


I was having some thoughts recently about speeding up fuzzy search.=0A=0ATh=
e current system does edit-distance on all terms A-Z, single threaded. Pref=
ix length can reduce the search space and there is a "minimum similarity" t=
hreshold but that's roughly where we are. Multithreading this to make use o=
f multiple CPUs is one option to look at but I was mainly thinking about sm=
arter ways to do the fuzzy scan:=0A=0AI had the notion that we could move t=
o a solution where a priority queue keeps the "best matches so far" and as =
you progress through the termEnum you could bail out of edit distance calcu=
lations quickly using a rough(cheap) assessment of if the current term is l=
ikely to make the cut (i.e. beat the current lowest score in the priority q=
ueue). It would make sense to populate the priority queue ASAP with terms t=
hat are most likely to be the best matches and these will be the ones that =
share a reasonable length prefix.=0AAs an example - searching for Obama~=0A=
=0A1) Create "best matches" priority queue=0A2) Scan all terms from oba to =
obz populating priority queue=0A3) Scan all terms from "a" to "oba" and "ob=
z" to "z", exiting quickly if the term fails to meet lowest score in the pr=
iority queue.=0A=0AHow we "exit quickly" and how we determine what prefix t=
o use in 2) are to be determined but the principle seems reasonable=0A=0ATh=
oughts?=0A=0A=0A=0A=0A----- Original Message ----=0AFrom: Varun Dhussa <var=
un@mapmyindia.com>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, 18 =
February, 2009 10:36:07=0ASubject: Lucene search performance on Sun UltraSp=
arc T2 (T5120) servers=0A=0AHi,=0A=0AI have had a bad experience when migra=
ting my application from Intel Xeon based servers to Sun UltraSparc T2 T512=
0 servers. Lucene fuzzy search just does not perform. A search which took a=
pproximately 500 ms takes more than 6 seconds to execute.=0A=0AThe index ha=
s about 100,000,000 records. So, I tried to split it into 10 indices and us=
ed the ParallelSearcher on it, but still got similar results.=0A=0AI am gue=
ssing that this is because the distance implementation used by Lucene requi=
res higher clock speed and can't be parallelized much.=0A=0APlease advice=
=0A=0A-- Varun Dhussa=0AProduct Architect=0ACE InfoSystems (P) Ltd=0Ahttp:/=
/www.mapmyindia.com=0A=0A=0A-----------------------------------------------=
----------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@luce=
ne.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apac=
he.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 11:01:13 2009
Return-Path: <java-user-return-38573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94230 invoked from network); 18 Feb 2009 11:01:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 11:01:11 -0000
Received: (qmail 78561 invoked by uid 500); 18 Feb 2009 11:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78406 invoked by uid 500); 18 Feb 2009 11:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78388 invoked by uid 99); 18 Feb 2009 11:01:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 03:01:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.83.156.232] (HELO lnx503.hrz.tu-darmstadt.de) (130.83.156.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 11:00:56 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx503.hrz.tu-darmstadt.de (8.13.8/8.13.8/HRZ/PMX) with ESMTP id n1IB0YKt014660
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 12:00:34 +0100
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C991B8.1F473968"
Subject: Phrase indexing and searching with Lucene
Date: Wed, 18 Feb 2009 11:57:48 +0100
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Thread-Topic: Phrase indexing and searching with Lucene
Thread-Index: AcmRt1dG0bIpy0kVSGKusE8sRkvwKwAAGT+R
References: <499BE497.2060103@mapmyindia.com> <18248.30864.qm@web26005.mail.ukl.yahoo.com>
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX: seen v0.51
X-PMX-SPAMCHECK: outgoing mail: not checked
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C991B8.1F473968
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



Hello everybody,

I use Lucene to index and search into text documents.
At present, I just index and search for single words. I want to extend =
this to phrases (or nGrams).

Could anyone please give me details on how to index phrases and then =
make a phrase search?=20

Thank you very much in advance for your help.

Nada Mimouni


------_=_NextPart_001_01C991B8.1F473968
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C991B8.1F473968--

From java-user-return-38574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 11:25:11 2009
Return-Path: <java-user-return-38574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99176 invoked from network); 18 Feb 2009 11:25:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 11:25:11 -0000
Received: (qmail 11059 invoked by uid 500); 18 Feb 2009 11:25:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10948 invoked by uid 500); 18 Feb 2009 11:25:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10937 invoked by uid 99); 18 Feb 2009 11:25:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 03:25:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 11:24:52 +0000
Received: by an-out-0708.google.com with SMTP id c37so1175341anc.5
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 03:24:31 -0800 (PST)
Received: by 10.65.234.18 with SMTP id l18mr4530005qbr.22.1234956270779;
        Wed, 18 Feb 2009 03:24:30 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id p9sm19112272qbp.4.2009.02.18.03.24.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 18 Feb 2009 03:24:30 -0800 (PST)
Message-Id: <06E3357C-2087-40B8-9383-568A7A7978F7@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <07FEB1409F7A8C4FBA71A3A00ABFD043E8D8A6@CORPUSMX70C.corp.emc.com>
Content-Type: text/plain; charset=GB2312; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: the efficiency of creating indexes
Date: Wed, 18 Feb 2009 06:24:28 -0500
References: <284995.53700.qm@web15803.mail.cnb.yahoo.com> <07FEB1409F7A8C4FBA71A3A00ABFD043E8D8A6@CORPUSMX70C.corp.emc.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


If not for merging, I believe indexing is simply linear.

Merging adds only a logarithmic (in total index size) cost.

Using as large an IndexWriter RAM buffer as you can will minimize the =20=

amount of merging.  (Also increasing mergeFactor, or decreasing =20
maxMergeMB/Docs, but these will impact search performance as well).

Mike

emc.com wrote:

> Did you try?
> The cost of index merging grows when indexes are getting bigger.
> Try to limit the max document size in a segment by setting =20
> setMaxMergeDocs in IndexWriter.
>
> -----Original Message-----
> From: =D6=CE=BD=AD =CD=F5 [mailto:wangzhijiang999@yahoo.com.cn]
> Sent: Monday, February 16, 2009 1:49 PM
> To: java-user@lucene.apache.org
> Subject: the efficiency of creating indexes
>
> As i know, the time effciency of creating index is non-linearity =20
> with the size of documents. For example, if the size of indexes is =20
> 1G, the time cost is 2 hours, If the size of indexes is 10G, the =20
> time cost may be 30 hours. Who can tell me what is the reason? Any =20
> tips will be appreciated.
>
>
>      ___________________________________________________________
>  =BA=C3=CD=E6=BA=D8=BF=A8=B5=C8=C4=E3=B7=A2=A3=AC=D3=CA=CF=E4=BA=D8=BF=A8=
=C8=AB=D0=C2=C9=CF=CF=DF=A3=A1
> http://card.mail.cn.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 12:26:23 2009
Return-Path: <java-user-return-38575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11671 invoked from network); 18 Feb 2009 12:26:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 12:26:23 -0000
Received: (qmail 80643 invoked by uid 500); 18 Feb 2009 12:26:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80594 invoked by uid 500); 18 Feb 2009 12:26:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80582 invoked by uid 99); 18 Feb 2009 12:26:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 04:26:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of listacctc@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 12:26:08 +0000
Received: by qw-out-2122.google.com with SMTP id 5so837655qwi.53
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 04:25:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=50Fqiw3cAhBGsDkl7Cdzx5A3UPnDQTs/VRmdrQMKM58=;
        b=U8T7aZe3guOy13A64kVK2mB5859TbQhbAGYQ1qJ8AJQQvOPQ8fr4JyhTCOB1nr2bIo
         VwRCdMqVpyTAf5SqG8fmQdyYESC1Qn5RsWpGWNEHvhNG6Ca4QAXmMSPTLqF+oRyfeQAb
         aBUCeQGF/WGV0ukpXXTaV/6TIImQCq5DWZkiU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=A6V7RKQJL7Be7HnvEQtpiWYHHo4eXCz84TxUXwl//hlNDcQfQWvzXYmKJU3AsMgDnq
         r2jL137bHh0HsfMXrecIDHaxbFAS1i9pF4+taGUQWeDynmd6FrfZ7zmNAUmZOWrh75B4
         ixHgjAWXiGW/N+subpRx0cP8wRhrOfZ8judMM=
Received: by 10.224.11.72 with SMTP id s8mr343545qas.42.1234959947445;
        Wed, 18 Feb 2009 04:25:47 -0800 (PST)
Received: from ?10.1.129.97? (h164-44-67-4.chubb.com [164.44.67.4])
        by mx.google.com with ESMTPS id 6sm898694qwk.47.2009.02.18.04.25.46
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 18 Feb 2009 04:25:47 -0800 (PST)
Message-ID: <499BFE42.7030708@gmail.com>
Date: Wed, 18 Feb 2009 07:25:38 -0500
From: Tod <listacctc@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Reporting indexed metadata
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a way I can ask lucene what metadata elements it knows of and
is storing in its index?


Thanks - Tod


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 13:10:56 2009
Return-Path: <java-user-return-38576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28942 invoked from network); 18 Feb 2009 13:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 13:10:56 -0000
Received: (qmail 41924 invoked by uid 500); 18 Feb 2009 13:10:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41899 invoked by uid 500); 18 Feb 2009 13:10:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41888 invoked by uid 99); 18 Feb 2009 13:10:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 05:10:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 13:10:42 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1152636ywt.5
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 05:10:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=x3E5TBphN0lngMjXWi+W7HO/osMojZu1qTEAzxv2StU=;
        b=sXdWM7IZNpm7Ee09JDSztNcEGqh4W94OSynuZTagr4t9nDzQl1ayKS8WyLTusWL2Jh
         LdwYwFu6DHsyNS78CqsR7lfoH0iJaKRnbeUYb5sSXVwi0MAcRupy8uj8h97yt9SRByou
         K8VlKWiNciGwKo79SBJIMskdNsBwg0XpJKuDA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=yGoOS5oxhYzYyA2Wt0JXjueaEpRl6qF71JQfpKh3nT9QcLZ2+zgZAoWOSK/p6zysmY
         drDMOWeuhXVeVkACxfkPOUpYD4DxyEO8Qd2qZ+0Qwnn9a/YNh5J7Cq8W9rSG43UMl/Cd
         ydgNP+WvcitSst09B8YR1pPvT7oOA7TSj7Wx4=
MIME-Version: 1.0
Received: by 10.100.242.20 with SMTP id p20mr1225235anh.75.1234962620631; Wed, 
	18 Feb 2009 05:10:20 -0800 (PST)
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
References: <499BE497.2060103@mapmyindia.com>
	 <18248.30864.qm@web26005.mail.ukl.yahoo.com>
	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Date: Wed, 18 Feb 2009 08:10:20 -0500
Message-ID: <359a92830902180510l51f85fe0p8075b4f2d5fc381e@mail.gmail.com>
Subject: Re: Phrase indexing and searching with Lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163691fea5504ca104633124f9
X-Virus-Checked: Checked by ClamAV on apache.org

--00163691fea5504ca104633124f9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Have you tried the built-in phrase processing with double quotes? e.g.
"this is a phrase"?

See the Term section at
http://lucene.apache.org/java/2_4_0/queryparsersyntax.html

Best
Erick

On Wed, Feb 18, 2009 at 5:57 AM, Nada Mimouni <
mimouni@tk.informatik.tu-darmstadt.de> wrote:

>
>
> Hello everybody,
>
> I use Lucene to index and search into text documents.
> At present, I just index and search for single words. I want to extend this
> to phrases (or nGrams).
>
> Could anyone please give me details on how to index phrases and then make a
> phrase search?
>
> Thank you very much in advance for your help.
>
> Nada Mimouni
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--00163691fea5504ca104633124f9--

From java-user-return-38577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 13:13:29 2009
Return-Path: <java-user-return-38577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29410 invoked from network); 18 Feb 2009 13:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 13:13:29 -0000
Received: (qmail 47554 invoked by uid 500); 18 Feb 2009 13:13:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47003 invoked by uid 500); 18 Feb 2009 13:13:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46991 invoked by uid 99); 18 Feb 2009 13:13:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 05:13:23 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 13:13:15 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1152858ywt.5
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 05:12:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=FbXmLjaYlQrIQgCwQqzyXl7GDMuDZVJ9uPAqzygF8dc=;
        b=v/Ft03IxjP5yQEE/Zg5fTYHgzaaypuChVORE2cx8qdJM7oYW9FSWUnHHNAmMDVnkB7
         LrPcctBlXwBHF1A0Ny8USCu9pSs1K4SlSXVvZ6jdkNX5SX6fYE3f+p7F23i0wbsrBfqP
         F/tMrV3VD1KpGbU3eqLGQ5L9Kddnqqp1OfyTs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ke7IUwo7o12AFgoGB0eG9OZMAvf9qQg/J/Ziln9GQdFFPuPXn9MbaBplNSpt/Jzk0G
         /W4D68kuQ1vDGQjy9rETPnCPpeoHiVEHO1J1cjQ9WMgk/df+xv3ujVu2uL+SGmBopV0W
         9veY3ZCUXLJcPzx7ytNB1VEIdXuBqCRT6JiYk=
MIME-Version: 1.0
Received: by 10.101.68.19 with SMTP id v19mr9640961ank.58.1234962773993; Wed, 
	18 Feb 2009 05:12:53 -0800 (PST)
In-Reply-To: <499BFE42.7030708@gmail.com>
References: <499BFE42.7030708@gmail.com>
Date: Wed, 18 Feb 2009 08:12:53 -0500
Message-ID: <359a92830902180512k20e4bafdn3c806a6e406a2db5@mail.gmail.com>
Subject: Re: Reporting indexed metadata
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e268f7469470463312d10
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e268f7469470463312d10
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I don't understand your question. Metadata about what? The
Fields in the document? The number of terms in a field?
The most frequent word in the index? in the Document?

If you elucidated the problem you're trying to solve you'd
probably get better answers....

Best
Erick

On Wed, Feb 18, 2009 at 7:25 AM, Tod <listacctc@gmail.com> wrote:

> Is there a way I can ask lucene what metadata elements it knows of and
> is storing in its index?
>
>
> Thanks - Tod
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016368e268f7469470463312d10--

From java-user-return-38578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 13:43:08 2009
Return-Path: <java-user-return-38578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52959 invoked from network); 18 Feb 2009 13:43:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 13:43:08 -0000
Received: (qmail 11590 invoked by uid 500); 18 Feb 2009 13:43:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11556 invoked by uid 500); 18 Feb 2009 13:43:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11545 invoked by uid 99); 18 Feb 2009 13:43:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 05:43:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.83.156.232] (HELO lnx503.hrz.tu-darmstadt.de) (130.83.156.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 13:42:53 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx503.hrz.tu-darmstadt.de (8.13.8/8.13.8/HRZ/PMX) with ESMTP id n1IDgUIK025968
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 14:42:31 +0100
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C991CE.BECF6C2A"
Subject: RE: Phrase indexing and searching with Lucene
Date: Wed, 18 Feb 2009 14:42:30 +0100
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7201@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7201@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Thread-Topic: Phrase indexing and searching with Lucene
Thread-Index: AcmRylaVJB7NWA6jTl+6FwD9IWr1FwAAOE4I
References: <499BE497.2060103@mapmyindia.com><18248.30864.qm@web26005.mail.ukl.yahoo.com><0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de> <359a92830902180510l51f85fe0p8075b4f2d5fc381e@mail.gmail.com>
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX: seen v0.51
X-PMX-SPAMCHECK: outgoing mail: not checked
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C991CE.BECF6C2A
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



Thank you Erick.

I need first to index phrases, the built-in phrase processing (with =
double quotes) comes in the search step. =20
Is there any difference between :=20
            1) start by indexing phrases and then make a phrase search=20
            2) index terms and then search for phrases


To make things clearer:

What I am doing now:=20
 - In the indexing step:  I am using "IndexTermGenerator" to generate =
term based indexes, one index for all queries I have and another one for =
documents (term means single word).=20
 - In the search step : Lucene matches terms in queries index with terms =
in documents index.

What I need to do:
 - Index phrases ("multi" words) in addition to terms (single words)
 - Search for both : phrases and terms


Is there any idea on how to proceed?

Regards
Nada


-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]
Sent: Wed 2/18/2009 2:10 PM
To: java-user@lucene.apache.org
Subject: Re: Phrase indexing and searching with Lucene
=20
Have you tried the built-in phrase processing with double quotes? e.g.
"this is a phrase"?

See the Term section at
http://lucene.apache.org/java/2_4_0/queryparsersyntax.html

Best
Erick

On Wed, Feb 18, 2009 at 5:57 AM, Nada Mimouni <
mimouni@tk.informatik.tu-darmstadt.de> wrote:

>
>
> Hello everybody,
>
> I use Lucene to index and search into text documents.
> At present, I just index and search for single words. I want to extend =
this
> to phrases (or nGrams).
>
> Could anyone please give me details on how to index phrases and then =
make a
> phrase search?
>
> Thank you very much in advance for your help.
>
> Nada Mimouni
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



------_=_NextPart_001_01C991CE.BECF6C2A
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C991CE.BECF6C2A--

From java-user-return-38579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 14:00:38 2009
Return-Path: <java-user-return-38579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64417 invoked from network); 18 Feb 2009 14:00:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 14:00:38 -0000
Received: (qmail 39448 invoked by uid 500); 18 Feb 2009 14:00:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39117 invoked by uid 500); 18 Feb 2009 14:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39106 invoked by uid 99); 18 Feb 2009 14:00:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 06:00:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [124.153.73.149] (HELO mail.mapmyindia.com) (124.153.73.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 14:00:21 +0000
Received: (qmail 5138 invoked by uid 510); 18 Feb 2009 19:29:55 +0530
Received: from 59.178.207.251 by mail.mapmyindia.com (envelope-from <varun@mapmyindia.com>, uid 502) with qmail-scanner-1.25 
 (uvscan: v5.1.00/v5440.  
 Clear:RC:0(59.178.207.251):. 
 Processed in 5.588503 secs); 18 Feb 2009 13:59:55 -0000
Received: from triband-del-59.178.207.251.bol.net.in (HELO ?127.0.0.1?) (varun@mapmyindia.com@59.178.207.251)
  by mail.mapmyindia.com with SMTP; 18 Feb 2009 19:29:49 +0530
Message-ID: <499C1455.5080007@mapmyindia.com>
Date: Wed, 18 Feb 2009 19:29:49 +0530
From: Varun Dhussa <varun@mapmyindia.com>
Organization: CE InfoSystems (P) Ltd
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene search performance on Sun UltraSparc T2 (T5120) servers
References: <499BE497.2060103@mapmyindia.com> <18248.30864.qm@web26005.mail.ukl.yahoo.com>
In-Reply-To: <18248.30864.qm@web26005.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 090217-0, 02/17/2009), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

The method suggested would make the speed faster, but I doubt whether it 
would be substantial on processors with slower clock speed. Keeping in 
mind that most processors are going multi-core, it would make sense to 
multi-thread the scan.

Any remarks are welcome!

Varun Dhussa
Product Architect
CE InfoSystems (P) Ltd
http://www.mapmyindia.com



mark harwood wrote:
> I was having some thoughts recently about speeding up fuzzy search.
>
> The current system does edit-distance on all terms A-Z, single threaded. Prefix length can reduce the search space and there is a "minimum similarity" threshold but that's roughly where we are. Multithreading this to make use of multiple CPUs is one option to look at but I was mainly thinking about smarter ways to do the fuzzy scan:
>
> I had the notion that we could move to a solution where a priority queue keeps the "best matches so far" and as you progress through the termEnum you could bail out of edit distance calculations quickly using a rough(cheap) assessment of if the current term is likely to make the cut (i.e. beat the current lowest score in the priority queue). It would make sense to populate the priority queue ASAP with terms that are most likely to be the best matches and these will be the ones that share a reasonable length prefix.
> As an example - searching for Obama~
>
> 1) Create "best matches" priority queue
> 2) Scan all terms from oba to obz populating priority queue
> 3) Scan all terms from "a" to "oba" and "obz" to "z", exiting quickly if the term fails to meet lowest score in the priority queue.
>
> How we "exit quickly" and how we determine what prefix to use in 2) are to be determined but the principle seems reasonable
>
> Thoughts?
>
>
>
>
> ----- Original Message ----
> From: Varun Dhussa <varun@mapmyindia.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, 18 February, 2009 10:36:07
> Subject: Lucene search performance on Sun UltraSparc T2 (T5120) servers
>
> Hi,
>
> I have had a bad experience when migrating my application from Intel Xeon based servers to Sun UltraSparc T2 T5120 servers. Lucene fuzzy search just does not perform. A search which took approximately 500 ms takes more than 6 seconds to execute.
>
> The index has about 100,000,000 records. So, I tried to split it into 10 indices and used the ParallelSearcher on it, but still got similar results.
>
> I am guessing that this is because the distance implementation used by Lucene requires higher clock speed and can't be parallelized much.
>
> Please advice
>
> -- Varun Dhussa
> Product Architect
> CE InfoSystems (P) Ltd
> http://www.mapmyindia.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>       
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 14:24:41 2009
Return-Path: <java-user-return-38580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79378 invoked from network); 18 Feb 2009 14:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 14:24:41 -0000
Received: (qmail 78210 invoked by uid 500); 18 Feb 2009 14:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77922 invoked by uid 500); 18 Feb 2009 14:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77911 invoked by uid 99); 18 Feb 2009 14:24:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 06:24:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.170 as permitted sender)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 14:24:28 +0000
Received: by gxk18 with SMTP id 18so5143304gxk.5
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 06:24:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=wC4HRX/LKA1ObfF3SA4sj2cNZfs/Rub2JH3j7lpa0bY=;
        b=v1qvgp3UX9RPTcr5j3f1Uc1X0ZTwKM3ilGTn16ctPBJryVcIWVQcbnICmJVfP0mHW9
         X57S38UjUjCV/SBq+G9qzfCkoebZC8TCcRVypYCTSnwosLvB87uEi/DGVR3hniNS2gZE
         6AKaSViPbAWbvIW0o8T/nKys9MVJ8Hj5CSYIE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tWIoDNvVkkQ48ut/dzgdOz8JEP86DQ1gJjiB/Nu4b0ccfLvPzBee77PZPvjwcoQUP4
         NDV+WoP5q9W5CgTEvB1z8ke5ZsDlYTLfcwjXWPDXz3RC843tMWdnpdZxbFhK/R4XABh4
         j9FjNWHBpCfBzkRHlU6RrHObESu2jA8YAATJM=
MIME-Version: 1.0
Received: by 10.100.251.14 with SMTP id y14mr5413450anh.139.1234967047227; 
	Wed, 18 Feb 2009 06:24:07 -0800 (PST)
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7201@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
References: <499BE497.2060103@mapmyindia.com>
	 <18248.30864.qm@web26005.mail.ukl.yahoo.com>
	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
	 <359a92830902180510l51f85fe0p8075b4f2d5fc381e@mail.gmail.com>
	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7201@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Date: Wed, 18 Feb 2009 09:24:07 -0500
Message-ID: <359a92830902180624v3dc8be06ob673fe8537e4c7be@mail.gmail.com>
Subject: Re: Phrase indexing and searching with Lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163691fefc28c7980463322c0e
X-Virus-Checked: Checked by ClamAV on apache.org

--00163691fefc28c7980463322c0e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I'm still not clear why the built-in phrase query syntax won't work. If I
index the following terms (erick, erickson, thinks, small, thoughts)
in a single field, then searching for "erick erickson" (as a phrase query,
i.e. with double quotes when sent through a query parser or constructing
a PhraseQuery yourself) will generate a hit but "erick thinks" won't
generate a hit (unless you specify slop).

"thinks small thoughts" would also generate a hit

If you're saying that you only want to match on *all* the tokens, i.e.
the only way to get a hit on the above would be to search for
"erick erickson thinks small thoughts", then you can create a
field that's UN_ANALYZED. If you do this, though, beware
that you have to do things like lower-case terms yourself when
indexing.

I have no idea what IndexTermGenerator is or what it does, but I'm
assuming that it just generates single words.

Some examples of what you put in your index and what searches
you expect to return results for your example AND searches you do
NOT want to hit that document would be a great help.

As far as searching for both, constructing a BooleanQuery with regular
TermQuerys and PhraseQuerys would work if you're constructing
your queries programmatically, or just using a Lucene query
like +termfield:word +phrasefield:"erick erickson thinks" would
work. Or, if you just require that the phrase exists you could do
it all in one field like
+field:word +field:"erick erickson thinks"



Best
Erick


On Wed, Feb 18, 2009 at 8:42 AM, Nada Mimouni <
mimouni@tk.informatik.tu-darmstadt.de> wrote:

>
>
> Thank you Erick.
>
> I need first to index phrases, the built-in phrase processing (with double
> quotes) comes in the search step.
> Is there any difference between :
>            1) start by indexing phrases and then make a phrase search
>            2) index terms and then search for phrases
>
>
> To make things clearer:
>
> What I am doing now:
>  - In the indexing step:  I am using "IndexTermGenerator" to generate term
> based indexes, one index for all queries I have and another one for
> documents (term means single word).
>  - In the search step : Lucene matches terms in queries index with terms in
> documents index.
>
> What I need to do:
>  - Index phrases ("multi" words) in addition to terms (single words)
>  - Search for both : phrases and terms
>
>
> Is there any idea on how to proceed?
>
> Regards
> Nada
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wed 2/18/2009 2:10 PM
> To: java-user@lucene.apache.org
> Subject: Re: Phrase indexing and searching with Lucene
>
> Have you tried the built-in phrase processing with double quotes? e.g.
> "this is a phrase"?
>
> See the Term section at
> http://lucene.apache.org/java/2_4_0/queryparsersyntax.html
>
> Best
> Erick
>
> On Wed, Feb 18, 2009 at 5:57 AM, Nada Mimouni <
> mimouni@tk.informatik.tu-darmstadt.de> wrote:
>
> >
> >
> > Hello everybody,
> >
> > I use Lucene to index and search into text documents.
> > At present, I just index and search for single words. I want to extend
> this
> > to phrases (or nGrams).
> >
> > Could anyone please give me details on how to index phrases and then make
> a
> > phrase search?
> >
> > Thank you very much in advance for your help.
> >
> > Nada Mimouni
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--00163691fefc28c7980463322c0e--

From java-user-return-38581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 15:21:11 2009
Return-Path: <java-user-return-38581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43958 invoked from network); 18 Feb 2009 15:21:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 15:21:11 -0000
Received: (qmail 88950 invoked by uid 500); 18 Feb 2009 15:21:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88917 invoked by uid 500); 18 Feb 2009 15:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88906 invoked by uid 99); 18 Feb 2009 15:21:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 07:21:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of christian.brennsteiner@gmail.com designates 209.85.220.168 as permitted sender)
Received: from [209.85.220.168] (HELO mail-fx0-f168.google.com) (209.85.220.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 15:20:57 +0000
Received: by fxm12 with SMTP id 12so33814fxm.5
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 07:20:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=x+GRXhmRDMu2NJddW0YGL5Az0hMOsrPtUHTXFqzbCxU=;
        b=T+lIK+6Z7SBvsW3qacPWbblC4w3ramD/Iw/mMPwfJFub6dFQ95aaggkg4ksmhrtXoV
         OwwdecxF4X1jJcP4Ut8O68uED1tvh2anlL7C55HNwQtPfZO/Uc+VoKuay/MJ5JoFJ/zi
         LI2tmJKLRAdSkh2HCl7GhyI9mkGWxg0a9aMsE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        b=Hf/vMCZ4QiJeeayoil4QiL5X82+JiSS0buopFwiDLhC7oYH9hb58oSOnO7xO7TF5PX
         tGNIDHVcoiipE7tV1KiOvQjpw/j5IL/wM3u435/pulyiajVUhDxXtwO7deB1tGVgSHqi
         Ecard1JVYgiCe8KJG1R5uiRe6ZO9zBz8CtKs8=
MIME-Version: 1.0
Sender: christian.brennsteiner@gmail.com
Received: by 10.180.244.19 with SMTP id r19mr2144824bkh.9.1234970435675; Wed, 
	18 Feb 2009 07:20:35 -0800 (PST)
Date: Wed, 18 Feb 2009 16:20:35 +0100
X-Google-Sender-Auth: 4765be9da9b8f2be
Message-ID: <6ef902470902180720v6473bc20m8aa84c1a01d147d7@mail.gmail.com>
Subject: stream of events never to know when it ends? how to index such things 
	& search
From: Christian Brennsteiner <christian@brennsteiner.at>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

dear lucene community,

i am playing around with lucene right now. and have come to very bad problem.

given environment:

a signal source gives signals with eventids ans eventdescriptions

for example EVENTID=1 and EVENTDESCRIPTION="STARTING EVENT"

those events can be running very long (e.g. one month) during this
period we will receive for example

EVENTID=1 and EVENTDESCRIPTION="EXECUTING XYZ"
10 minutes later
EVENTID=1 and EVENTDESCRIPTION="EXECUTING YZA"
10 minutes later
EVENTID=1 and EVENTDESCRIPTION="PASSED MILESTONE1"
10 minutes later
EVENTID=1 and EVENTDESCRIPTION="EXECUTING ZAB"

after e.g. 1 week we receive
EVENTID=1 and EVENTDESCRIPTION="STOPING EVENT"

what i want:
i want to be able to search e.g. which eventids are connected to "XYZ"
AND "ZAB" AND have already passed "MILESTONE1"

so my current try is to index all events by full indexing (without
storing) eventdescriptions AND stemming e.g. EXECUTING

then searching for "+XYZ +ZAB +MILESTONE1"
--> result no document since those are all seperated documents
when i search
 "XYZ ZAB MILESTONE1"
i am getting 3 times EVENTID 3
--> this is bad since when i get 1000000 of such events how do i rank them?

CONCLUSION:
my biggest problem is that my lucene document given to the index
currently is not in a final state BUT i have to index and search it
also while it is in progress.
as a result of this the ranking as i do it now has no real value since
the ranking is just based on a "line of a whole event"

QUESTION:
is there a solution within lucene to combine search results? e.g. merge them OR
is there a better workaround how i would do such updates to the index
without storing the original docmuent inside the index (since this
consumes so many space)? e.g. extracting the keywords that were stored
for the item?

any hints appreciated.

regards chris


----------
Christian Brennsteiner
Salzburg / Austria / Europe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 15:59:27 2009
Return-Path: <java-user-return-38582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66657 invoked from network); 18 Feb 2009 15:59:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 15:59:27 -0000
Received: (qmail 66727 invoked by uid 500); 18 Feb 2009 15:59:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66700 invoked by uid 500); 18 Feb 2009 15:59:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66689 invoked by uid 99); 18 Feb 2009 15:59:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 07:59:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.39] (HELO web27107.mail.ukl.yahoo.com) (217.146.182.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 18 Feb 2009 15:59:10 +0000
Received: (qmail 98549 invoked by uid 60001); 18 Feb 2009 15:58:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=ifKWriMcTJhTE0fZB5UEhyhRMuo6NhXc3vKmQlDS5Hzg1l2/eIN6LPqqsIO7LsHdsGKiwhmzszRpFI5y39GSssHpqUAR7SETYTmddum+Sw0k5jfTkHIbLjvX397lbvM4Ble0zcdKmBIu/ui1abpIonE0cZK75xMcwBT/cPdr9UA=;
X-YMail-OSG: jErfjJUVM1mTQpgRM7kddPZTlJiCZMYB5LUYItvKzM_0Oe_nnS9ZmUBY96ypdNUwC3aEHVXE2Re_Lqd8uXAnvVkRtVYmXKc6tDsQTAA30jkYUbJDlDYS1suJYj5xNwz3NXAR5SkJjBlUYqSTvCleGY1oHJDH1fNoUKLHc9RRRElOTw.qvT1RoYY6kTm8hwOGnVlkZC_p.RGZFBeU8a1hizsndN0WAHAAm5lk
Received: from [84.131.202.57] by web27107.mail.ukl.yahoo.com via HTTP; Wed, 18 Feb 2009 15:58:48 GMT
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <499BE497.2060103@mapmyindia.com> <18248.30864.qm@web26005.mail.ukl.yahoo.com>
Date: Wed, 18 Feb 2009 15:58:48 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Lucene search performance on Sun UltraSparc T2 (T5120) servers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <755490.97539.qm@web27107.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried NGram SpellChecker + Query expansion?  This is quite similar=
 to your proposal, you have your priority queue in SpellChecker=0A=0A=0A=0A=
----- Original Message ----=0A> From: mark harwood <markharw00d@yahoo.co.uk=
>=0A> To: java-user@lucene.apache.org=0A> Sent: Wednesday, 18 February, 200=
9 11:54:18=0A> Subject: Re: Lucene search performance on Sun UltraSparc T2 =
(T5120) servers=0A> =0A> =0A> I was having some thoughts recently about spe=
eding up fuzzy search.=0A> =0A> The current system does edit-distance on al=
l terms A-Z, single threaded. Prefix =0A> length can reduce the search spac=
e and there is a "minimum similarity" threshold =0A> but that's roughly whe=
re we are. Multithreading this to make use of multiple =0A> CPUs is one opt=
ion to look at but I was mainly thinking about smarter ways to do =0A> the =
fuzzy scan:=0A> =0A> I had the notion that we could move to a solution wher=
e a priority queue keeps =0A> the "best matches so far" and as you progress=
 through the termEnum you could =0A> bail out of edit distance calculations=
 quickly using a rough(cheap) assessment =0A> of if the current term is lik=
ely to make the cut (i.e. beat the current lowest =0A> score in the priorit=
y queue). It would make sense to populate the priority queue =0A> ASAP with=
 terms that are most likely to be the best matches and these will be =0A> t=
he ones that share a reasonable length prefix.=0A> As an example - searchin=
g for Obama~=0A> =0A> 1) Create "best matches" priority queue=0A> 2) Scan a=
ll terms from oba to obz populating priority queue=0A> 3) Scan all terms fr=
om "a" to "oba" and "obz" to "z", exiting quickly if the =0A> term fails to=
 meet lowest score in the priority queue.=0A> =0A> How we "exit quickly" an=
d how we determine what prefix to use in 2) are to be =0A> determined but t=
he principle seems reasonable=0A> =0A> Thoughts?=0A> =0A> =0A> =0A> =0A> --=
--- Original Message ----=0A> From: Varun Dhussa =0A> To: java-user@lucene.=
apache.org=0A> Sent: Wednesday, 18 February, 2009 10:36:07=0A> Subject: Luc=
ene search performance on Sun UltraSparc T2 (T5120) servers=0A> =0A> Hi,=0A=
> =0A> I have had a bad experience when migrating my application from Intel=
 Xeon based =0A> servers to Sun UltraSparc T2 T5120 servers. Lucene fuzzy s=
earch just does not =0A> perform. A search which took approximately 500 ms =
takes more than 6 seconds to =0A> execute.=0A> =0A> The index has about 100=
,000,000 records. So, I tried to split it into 10 indices =0A> and used the=
 ParallelSearcher on it, but still got similar results.=0A> =0A> I am guess=
ing that this is because the distance implementation used by Lucene =0A> re=
quires higher clock speed and can't be parallelized much.=0A> =0A> Please a=
dvice=0A> =0A> -- Varun Dhussa=0A> Product Architect=0A> CE InfoSystems (P)=
 Ltd=0A> http://www.mapmyindia.com=0A> =0A> =0A> --------------------------=
-------------------------------------------=0A> To unsubscribe, e-mail: jav=
a-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: j=
ava-user-help@lucene.apache.org=0A> =0A> =0A> =0A> =0A> -------------------=
--------------------------------------------------=0A> To unsubscribe, e-ma=
il: java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-=
mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 16:19:45 2009
Return-Path: <java-user-return-38583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82064 invoked from network); 18 Feb 2009 16:19:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 16:19:42 -0000
Received: (qmail 1217 invoked by uid 500); 18 Feb 2009 16:19:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1185 invoked by uid 500); 18 Feb 2009 16:19:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1174 invoked by uid 99); 18 Feb 2009 16:19:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 08:19:35 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 16:19:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 850D67FAB
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 08:19:04 -0800 (PST)
Message-Id: <6D178196-F4B2-45DD-8AF6-4DC08D1562FA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Lucene Boot Camp Training at ApacheCon Europe
Date: Wed, 18 Feb 2009 11:19:03 -0500
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Lucene Users,

For those who don't already know, I will be offering a two day Lucene  
Boot Camp training at ApacheCon Europe on March 23 and 24.  The two  
day class covers a lot of detail on how to use Lucene to build search  
applications, including the basics of searching, indexing and  
analysis, along with Lucene best practices and performance tuning.  No  
prior knowledge of Lucene is required, but it is recommended that you  
have basic Java programming skills and that you bring a laptop.

Also, if you come to the training, stay for the conference, as there  
will be several talks on the Lucene ecosystem:   See http://lucene.apache.org/#09+February+2009+-+Lucene+at+ApacheCon+Europe+2009+in+Amsterdam 
    The ApacheCon conference is the official conference of the Apache  
Software Foundation and is a great place to learn and interact with  
the developers of your favorite Apache projects.

If you have questions or aren't sure if the course is appropriate for  
you, you can email me at trainer@lucenebootcamp.com

For more info and to register, see http://www.eu.apachecon.com/c/aceu2009/sessions/197

Cheers,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 16:26:11 2009
Return-Path: <java-user-return-38584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87192 invoked from network); 18 Feb 2009 16:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 16:26:11 -0000
Received: (qmail 20694 invoked by uid 500); 18 Feb 2009 16:26:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20672 invoked by uid 500); 18 Feb 2009 16:26:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20661 invoked by uid 99); 18 Feb 2009 16:26:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 08:26:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 16:25:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id D78325B577
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 08:25:33 -0800 (PST)
Message-Id: <9422ECD7-A270-4AE4-A9C8-C2356C1DF045@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <BAY138-W2593B35F97D79B6E4466DDF7B40@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Identify the fields with matching only
Date: Wed, 18 Feb 2009 11:25:33 -0500
References: <BAY138-W2593B35F97D79B6E4466DDF7B40@phx.gbl>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

You can use the explain() method or you can use the Highlighter, but =20
both aren't perfect in this regards.  You can also look into using =20
SpanQueries, which give you positional information about where matches =20=

take place.  This would require you switching how you generate queries.

There is also a lot of discussion in the archives on this at =
http://www.lucidimagination.com/search/p:lucene?q=3Dfield+match=20
  and probably with other queries as well.

-Grant

On Feb 17, 2009, at 3:49 PM, Haroldo Nascimento wrote:

>
> Hi,
>  I did a search and need to identify in which fields had occurred =20
> matching. Is possible ?
>
>  Thanks
> _________________________________________________________________
> Cansado de espa=E7o para s=F3 50 fotos? Conhe=E7a o Spaces, o site de =20=

> relacionamentos com at=E9 6,000 fotos!
> http://www.amigosdomessenger.com.br

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) =20
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 16:32:03 2009
Return-Path: <java-user-return-38585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90354 invoked from network); 18 Feb 2009 16:32:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 16:32:03 -0000
Received: (qmail 33004 invoked by uid 500); 18 Feb 2009 16:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32973 invoked by uid 500); 18 Feb 2009 16:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32961 invoked by uid 99); 18 Feb 2009 16:31:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 08:31:55 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of haroldo_lucene@hotmail.com designates 65.54.246.210 as permitted sender)
Received: from [65.54.246.210] (HELO BAY0-OMC3-S10.bay0.hotmail.com) (65.54.246.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 16:31:46 +0000
Received: from BAY138-W22 ([64.4.49.57]) by BAY0-OMC3-S10.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 18 Feb 2009 08:31:25 -0800
Message-ID: <BAY138-W22260BBEEA68DD5E0F1D5AF7B50@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_6c96e2b7-6ed5-41eb-b3ac-1a5bdcf2e84b_"
X-Originating-IP: [189.20.40.106]
From: Haroldo Nascimento <haroldo_lucene@hotmail.com>
To: lucene-user lucene-user <java-user@lucene.apache.org>
Subject: Change the boosting in search-time
Date: Wed, 18 Feb 2009 19:31:25 +0300
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 18 Feb 2009 16:31:25.0767 (UTC) FILETIME=[57C2F570:01C991E6]
X-Virus-Checked: Checked by ClamAV on apache.org

--_6c96e2b7-6ed5-41eb-b3ac-1a5bdcf2e84b_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi=20

   I have I request in my search projetct that I do not know if it is possi=
ble to do easily:

   If occur matching exact using PharseQuery for example I must add for thi=
s boosting of this field a value of the other field of the document (exampl=
e price)=2C but if occur matching partial I must add to one weight dafault =
(1 for example).=20

=20

  I thought about duplicating all the searchalble fields in my index (index=
ing-time) and I add to the value price in boosting of first field and in se=
cond I add to the value default (1). I create the queries PhaseQuery for an=
y fields (boosting=3Dprice) e create query (TermQuery for exemplo) for othe=
r fileds (boosting =3D 1). Example:

=20

  Document 1:

   fieldName1=3DMichael Jordan (boosting =3D 1 =3D fieldboosting1)

   fieldName2=3DMichael Jordan (boosting =3D 5 =3D fieldboosting2)

   fieldSports1=3DBall Baseball (boosting =3D 1 =3D fieldboosting1)

   fieldSports2=3DBall Baseball(boosting =3D 5 =3D fieldboosting2)

   fieldCountry1=3DEUA (boosting =3D 1 =3D fieldboosting1)

   fieldCountry2=3DEUA (boosting =3D 5 =3D fieldboosting2)

   fieldboosting1=3D1

   fieldboosting2=3D5

=20

  Document 2:

   fieldName1=3DPele (boosting =3D 1 =3D fieldboosting1)

   fieldName2=3DPele (boosting =3D 5 =3Dfieldboosting2)

   fieldSports1=3DBall Football (boosting =3D 1 =3D fieldboosting1)

   fieldSports2=3DBall Football(boosting =3D 5 =3D fieldboosting2)

   fieldCountry1=3DBRA (boosting =3D 1 =3D fieldboosting1)

   fieldCountry2=3DBRA (boosting =3D 5 =3D fieldboosting2)

   fieldboosting1=3D1

   fieldboosting2=3D5

=20

  My query:

   exact search: PharseQuery: fieldName2 OR fieldSports2 OR fieldCountry2

    OR

   partial search: TermQuery: fieldName1 OR fieldSports1 OR fieldCountry1

=20

  Is possible do it without duplicated the field. The big solution is set t=
he boosting in search-time with the value other field. Es possible do it ?

=20

  Thanks

=20

  Haroldo

_________________________________________________________________
Instale a Barra de Ferramentas com Desktop Search e ganhe EMOTICONS para o =
Messenger! =C9 GR=C1TIS!
http://www.msn.com.br/emoticonpack=

--_6c96e2b7-6ed5-41eb-b3ac-1a5bdcf2e84b_--

From java-user-return-38586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 16:33:53 2009
Return-Path: <java-user-return-38586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91805 invoked from network); 18 Feb 2009 16:33:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 16:33:53 -0000
Received: (qmail 37148 invoked by uid 500); 18 Feb 2009 16:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37129 invoked by uid 500); 18 Feb 2009 16:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37118 invoked by uid 99); 18 Feb 2009 16:33:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 08:33:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 16:33:37 +0000
Received: by an-out-0708.google.com with SMTP id c37so1215741anc.5
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 08:33:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=rZpuA5R8s7CvlUcse5o0HXfYYxLdDY+0oWv8QdObbgU=;
        b=axUgMsdMpePnMs0MWuo9b1pe53V6mf+SVCEG0s9TRRAdVGoS4leUlJWH5QjQ0DLfjf
         h0pPUJ0u5HnvJEGRtdRGBS4yHh++Ox7VzYd+KETBmkIoVTJIBgwYjKNi3ijfBIL6UjPQ
         OFhNvmqTyNJ95hMtvm7AhXkc/pk14M05y/d0Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=m+cqNE73PEqdnlYxzgT1kfe4UePdD/lMOvQ+fpMlsDZ6w19t3kCZEkfQOlta3gIyKR
         RhQaS6EkrAWDCExX/cL6OqcZVaZ3d+TRY1izYQ5p395ZuBFC6x+ra7T4K1zrNAJOOaSc
         xenYTyo6rK4Vwj2ogMluvvrh1OO5XYGu83B/k=
MIME-Version: 1.0
Received: by 10.220.71.130 with SMTP id h2mr893485vcj.118.1234974796153; Wed, 
	18 Feb 2009 08:33:16 -0800 (PST)
In-Reply-To: <499BE497.2060103@mapmyindia.com>
References: <499BE497.2060103@mapmyindia.com>
Date: Wed, 18 Feb 2009 11:33:16 -0500
Message-ID: <5e76f3840902180833g60147620u4b56dba8a705a83e@mail.gmail.com>
Subject: Re: Lucene search performance on Sun UltraSparc T2 (T5120) servers
From: Glen Newton <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Could you give some configuration details:
- Solaris version
- Java VM version, heap size, and any other flags
- disk setup

You should also consider using huge pages (see
http://zzzoot.blogspot.com/2009/02/java-mysql-increased-performance-with.html)

I will also be posting performance gains using huge pages for Java
Lucene Linux large scale indexing in the next week or so...

-glen



2009/2/18 Varun Dhussa <varun@mapmyindia.com>:
> Hi,
>
> I have had a bad experience when migrating my application from Intel Xeon
> based servers to Sun UltraSparc T2 T5120 servers. Lucene fuzzy search just
> does not perform. A search which took approximately 500 ms takes more than 6
> seconds to execute.
>
> The index has about 100,000,000 records. So, I tried to split it into 10
> indices and used the ParallelSearcher on it, but still got similar results.
>
> I am guessing that this is because the distance implementation used by
> Lucene requires higher clock speed and can't be parallelized much.
>
> Please advice
>
> --
> Varun Dhussa
> Product Architect
> CE InfoSystems (P) Ltd
> http://www.mapmyindia.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 16:38:40 2009
Return-Path: <java-user-return-38587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94258 invoked from network); 18 Feb 2009 16:38:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 16:38:40 -0000
Received: (qmail 46105 invoked by uid 500); 18 Feb 2009 16:38:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46083 invoked by uid 500); 18 Feb 2009 16:38:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46072 invoked by uid 99); 18 Feb 2009 16:38:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 08:38:33 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 16:38:27 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1184252ywt.5
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 08:38:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=z/TMbBfjcOdUc0t/vbCzZtMLaHNT8kDWeYN0+L4Jn8k=;
        b=UiAuIXzdcx/HR78dWovhji0aLYFKVqLWmeJN7y+CQsKpKgLWntqZmycev2huJMGz9g
         bFBvl9q6LoPSyB1vMvv5uug5IOinQtirvf/EJvHbRGNzsE1fuhzOept54lpA7JzNs91U
         ABXF7VJRgJraHcAjP9jVtJs5EtjEJDLWWNYuA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xCOfZpu1/mYXYdiPkXGi+/thVMtvxTPBur3LnkaKGXODXzM5sEYjDI5556yeEqYs5i
         k4XT0c3F/krxc1io7dBJLNcE6knxobHrcIvfSDFRAvF2+O6Y0RufXDlb8s8v+TaUOBdR
         +rqVkUNdi0nXYz3sTuls/RTUz1bgg0+/weR0k=
MIME-Version: 1.0
Received: by 10.90.26.9 with SMTP id 9mr2697306agz.55.1234975086333; Wed, 18 
	Feb 2009 08:38:06 -0800 (PST)
In-Reply-To: <6ef902470902180720v6473bc20m8aa84c1a01d147d7@mail.gmail.com>
References: <6ef902470902180720v6473bc20m8aa84c1a01d147d7@mail.gmail.com>
Date: Wed, 18 Feb 2009 11:38:06 -0500
Message-ID: <359a92830902180838k4d59a068lfef5564038e5c434@mail.gmail.com>
Subject: Re: stream of events never to know when it ends? how to index such 
	things & search
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f62953cf930463340b94
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630f62953cf930463340b94
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

You could always sort by EVENTID, that way at least
you'd have all the events for a particular ID together
in your results. You'd have to post-filter the results to
determine whether all the necessary descriptions were
present. But I don't think this works all that well because,
as you pointed out, you may have a lot of records to
sort through so I don't think this is a very good idea...



How many events are we talking about here and what
kind of lag between an event and being able to search it
can you tolerate? I guess what I'm really asking is whether
it's possible to recreate your index "often enough" to
satisfy your users. If so, you can index multiple
descriptions in a single document, something like

doc.add("EVENTDESCRIPTION", "STARTING EVENT")
doc.add("EVENTDESCRIPTION", "XYZ")
doc.add("EVENTDESCRIPTION", "ABC")
doc.add("EVENTID", "1")
IndexWriter.addDocument(doc);


You'd have to gather all the descriptions related
to each EVENTID before you were able to index the doc.....

By manipulating the PositionIncrementGap you could also
keep searches from matching across different EVENTDESCRIPTIONs,
e.g. if you didn't want to match +STARTING +ABC you could use
SpanQueries or the proximity operator, but going into details
depends upon whether you can rebuild your index so we'll defer
that part....

You could also think about updating the document when new events
were added, but since an update is really a delete/add under the
covers you'd have to either gather enough information from what I
assume is your log or store enough information with the document to
recreate it.

How big is your index currently and what kind of throughput do you
require?

Best
Erick


On Wed, Feb 18, 2009 at 10:20 AM, Christian Brennsteiner <
christian@brennsteiner.at> wrote:

> dear lucene community,
>
> i am playing around with lucene right now. and have come to very bad
> problem.
>
> given environment:
>
> a signal source gives signals with eventids ans eventdescriptions
>
> for example EVENTID=1 and EVENTDESCRIPTION="STARTING EVENT"
>
> those events can be running very long (e.g. one month) during this
> period we will receive for example
>
> EVENTID=1 and EVENTDESCRIPTION="EXECUTING XYZ"
> 10 minutes later
> EVENTID=1 and EVENTDESCRIPTION="EXECUTING YZA"
> 10 minutes later
> EVENTID=1 and EVENTDESCRIPTION="PASSED MILESTONE1"
> 10 minutes later
> EVENTID=1 and EVENTDESCRIPTION="EXECUTING ZAB"
>
> after e.g. 1 week we receive
> EVENTID=1 and EVENTDESCRIPTION="STOPING EVENT"
>
> what i want:
> i want to be able to search e.g. which eventids are connected to "XYZ"
> AND "ZAB" AND have already passed "MILESTONE1"
>
> so my current try is to index all events by full indexing (without
> storing) eventdescriptions AND stemming e.g. EXECUTING
>
> then searching for "+XYZ +ZAB +MILESTONE1"
> --> result no document since those are all seperated documents
> when i search
>  "XYZ ZAB MILESTONE1"
> i am getting 3 times EVENTID 3
> --> this is bad since when i get 1000000 of such events how do i rank them?
>
> CONCLUSION:
> my biggest problem is that my lucene document given to the index
> currently is not in a final state BUT i have to index and search it
> also while it is in progress.
> as a result of this the ranking as i do it now has no real value since
> the ranking is just based on a "line of a whole event"
>
> QUESTION:
> is there a solution within lucene to combine search results? e.g. merge
> them OR
> is there a better workaround how i would do such updates to the index
> without storing the original docmuent inside the index (since this
> consumes so many space)? e.g. extracting the keywords that were stored
> for the item?
>
> any hints appreciated.
>
> regards chris
>
>
> ----------
> Christian Brennsteiner
> Salzburg / Austria / Europe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163630f62953cf930463340b94--

From java-user-return-38588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 16:59:57 2009
Return-Path: <java-user-return-38588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6357 invoked from network); 18 Feb 2009 16:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 16:59:57 -0000
Received: (qmail 94202 invoked by uid 500); 18 Feb 2009 16:59:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94165 invoked by uid 500); 18 Feb 2009 16:59:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94140 invoked by uid 99); 18 Feb 2009 16:59:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 08:59:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 16:59:40 +0000
Received: by wa-out-1112.google.com with SMTP id m33so1741948wag.5
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 08:59:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=AbuIizsG4i4nVzTn21pv0R2MI5e56QBUZ8cAqCLxmc4=;
        b=t1a1xNnzjQzFzJpVRBYJ35PqkrgtWc8Q/MXE4fG0ArUVdSwOpnPQ4KYmUGFrXbmnDk
         afoPEUwODC98fQnne4wrfClGQiviiGNAnLEWzlKaQo35PqU16SjBj//waSv1DMQ0dqyf
         iwDp/W28Rq45+O7hl6eQJIXjXdG3a9c8SJm7U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QSa3t6KA+5Esdk9yqHNVEeQOCpMG7R5gApr0YM5hqb1LJ+ZVnbjkDeEX9ZFhA5vYC/
         nvUuU75hs2dnS2ydMfTve8xFO/Qy8BhewrzzpwvYTehWZnZLq7AGxRsomtRBUIn88sgq
         jhJAki6k3MXIlf5NcKMWnWzSCGvzsc+zmRY0k=
MIME-Version: 1.0
Received: by 10.115.14.1 with SMTP id r1mr3250687wai.27.1234976360459; Wed, 18 
	Feb 2009 08:59:20 -0800 (PST)
In-Reply-To: <499C1455.5080007@mapmyindia.com>
References: <499BE497.2060103@mapmyindia.com>
	 <18248.30864.qm@web26005.mail.ukl.yahoo.com>
	 <499C1455.5080007@mapmyindia.com>
Date: Wed, 18 Feb 2009 08:59:20 -0800
Message-ID: <652776090902180859x5cfeda87m2d3e12e3a5b1e8e8@mail.gmail.com>
Subject: Re: Lucene search performance on Sun UltraSparc T2 (T5120) servers
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64af308456da90463345711
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64af308456da90463345711
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Fuzzy search tends to be super heavy on CPU because of the Levenstein
distance algo. We use it for a small index 60MB for spell correcting and our
QPS suffers as a result.

There was recently a discussion of a new fuzzy algorithm:
https://issues.apache.org/jira/browse/LUCENE-1513?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12661286#action_12661286

M

On Wed, Feb 18, 2009 at 5:59 AM, Varun Dhussa <varun@mapmyindia.com> wrote:

> The method suggested would make the speed faster, but I doubt whether it
> would be substantial on processors with slower clock speed. Keeping in mind
> that most processors are going multi-core, it would make sense to
> multi-thread the scan.
>
> Any remarks are welcome!
>
> Varun Dhussa
> Product Architect
> CE InfoSystems (P) Ltd
> http://www.mapmyindia.com
>
>
>
> mark harwood wrote:
>
>> I was having some thoughts recently about speeding up fuzzy search.
>>
>> The current system does edit-distance on all terms A-Z, single threaded.
>> Prefix length can reduce the search space and there is a "minimum
>> similarity" threshold but that's roughly where we are. Multithreading this
>> to make use of multiple CPUs is one option to look at but I was mainly
>> thinking about smarter ways to do the fuzzy scan:
>>
>> I had the notion that we could move to a solution where a priority queue
>> keeps the "best matches so far" and as you progress through the termEnum you
>> could bail out of edit distance calculations quickly using a rough(cheap)
>> assessment of if the current term is likely to make the cut (i.e. beat the
>> current lowest score in the priority queue). It would make sense to populate
>> the priority queue ASAP with terms that are most likely to be the best
>> matches and these will be the ones that share a reasonable length prefix.
>> As an example - searching for Obama~
>>
>> 1) Create "best matches" priority queue
>> 2) Scan all terms from oba to obz populating priority queue
>> 3) Scan all terms from "a" to "oba" and "obz" to "z", exiting quickly if
>> the term fails to meet lowest score in the priority queue.
>>
>> How we "exit quickly" and how we determine what prefix to use in 2) are to
>> be determined but the principle seems reasonable
>>
>> Thoughts?
>>
>>
>>
>>
>> ----- Original Message ----
>> From: Varun Dhussa <varun@mapmyindia.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, 18 February, 2009 10:36:07
>> Subject: Lucene search performance on Sun UltraSparc T2 (T5120) servers
>>
>> Hi,
>>
>> I have had a bad experience when migrating my application from Intel Xeon
>> based servers to Sun UltraSparc T2 T5120 servers. Lucene fuzzy search just
>> does not perform. A search which took approximately 500 ms takes more than 6
>> seconds to execute.
>>
>> The index has about 100,000,000 records. So, I tried to split it into 10
>> indices and used the ParallelSearcher on it, but still got similar results.
>>
>> I am guessing that this is because the distance implementation used by
>> Lucene requires higher clock speed and can't be parallelized much.
>>
>> Please advice
>>
>> -- Varun Dhussa
>> Product Architect
>> CE InfoSystems (P) Ltd
>> http://www.mapmyindia.com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64af308456da90463345711--

From java-user-return-38589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 17:31:50 2009
Return-Path: <java-user-return-38589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27588 invoked from network); 18 Feb 2009 17:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 17:31:50 -0000
Received: (qmail 62671 invoked by uid 500); 18 Feb 2009 17:31:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62636 invoked by uid 500); 18 Feb 2009 17:31:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62613 invoked by uid 99); 18 Feb 2009 17:31:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 09:31:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 17:31:25 +0000
Received: by qw-out-2122.google.com with SMTP id 5so878325qwi.53
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 09:31:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=OEYJ6eqgFXCYpi7Zf0q5oMYJTTiJImzY4a+NxjnXBPc=;
        b=IjkTSE9DWUerMpXdA1sbcoVdGrp5O6e4EIheFUghGhAJyL1R8f0kthr2HbDitnCL5i
         I/qgsft2ZTlTKkZLA1hpufwWGWZapCB5Y8I4A+H+G/gyYCzcYlCFnj1y3T5dxKInwH40
         6rkdCUlbL2bTRm1ty6tunAbBsiBSkNayeTWF4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=r9gWwLVjUyeEGq0J7jmIUVQCqrqzj0C75Tkl4kXy1TGZ19XUZxZkoQH/33v3PX41nE
         /JKchVGGXrp+gb2jo1Ixyc0wXK3FpFoMSQJGWzikidmlsycGAguJ0c6w6xwYg0dOtKnT
         niCDzbFxrShqWh7WgCLn9k/Yq4/aWGugB8hdg=
MIME-Version: 1.0
Received: by 10.229.74.68 with SMTP id t4mr1907531qcj.102.1234977959408; Wed, 
	18 Feb 2009 09:25:59 -0800 (PST)
In-Reply-To: <07FEB1409F7A8C4FBA71A3A00ABFD043E8D8BB@CORPUSMX70C.corp.emc.com>
References: <07FEB1409F7A8C4FBA71A3A00ABFD043E8D8BB@CORPUSMX70C.corp.emc.com>
Date: Wed, 18 Feb 2009 12:25:59 -0500
Message-ID: <c68e39170902180925n6b69914hdfa9174ac0271b41@mail.gmail.com>
Subject: Re: the impact of thousands of field in a single document
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Feb 18, 2009 at 3:26 AM,  <Fang_Li@emc.com> wrote:
> Due to requirement, we need to construct a Lucene document with tens of
> thousands of Field. Did anyone try this? What's the performance penalty
> comparing with one single field to store all tokens for both indexing
> and searching?

It's doable.
Searching performance won't suffer at all.
Retrieving stored fields (after a search) will suffer somewhat.
Indexing performance will suffer somewhat.

The main problem will be norms, which aren't sparse and take up one
byte per document per field in the index, unless you omit the norms.

-Yonik
Lucene/Solr? http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 18 19:06:59 2009
Return-Path: <java-user-return-38590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93363 invoked from network); 18 Feb 2009 19:06:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2009 19:06:59 -0000
Received: (qmail 33921 invoked by uid 500); 18 Feb 2009 19:06:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33901 invoked by uid 500); 18 Feb 2009 19:06:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33890 invoked by uid 99); 18 Feb 2009 19:06:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 11:06:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 19:06:44 +0000
X-ASG-Debug-ID: 1234983982-0ad5017d0000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id D70053338D
	for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 11:06:22 -0800 (PST)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id qERDVCmIJZ2pFZOZ for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 11:06:22 -0800 (PST)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
X-ASG-Orig-Subj: RE: Hebrew and Hindi analyzers
Subject: RE: Hebrew and Hindi analyzers
Date: Wed, 18 Feb 2009 11:06:22 -0800
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6D34@rw-ex2003.BROADVISION.COM>
In-Reply-To: <8f0ad1f30902172147s7ca918d2qc8af5ded4dd45fa@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Hebrew and Hindi analyzers
Thread-Index: AcmRjIOkX8ai5kQzRS+ibLZ2BSBSjQAb26Lg
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1234983982
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

VGhhbmtzIHZlcnkgbXVjaCBmb3IgaGVscHMhDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0t
DQpGcm9tOiBSb2JlcnQgTXVpciBbbWFpbHRvOnJjbXVpckBnbWFpbC5jb21dDQpTZW50OiBUdWVz
ZGF5LCBGZWJydWFyeSAxNywgMjAwOSA5OjQ4IFBNDQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFj
aGUub3JnDQpTdWJqZWN0OiBSZTogSGVicmV3IGFuZCBIaW5kaSBhbmFseXplcnMNCg0KDQpoZXkg
aSd2ZSBwbGF5ZWQgYXJvdW5kIHdpdGggdHJ5aW5nIHRvIGdldCB0b3dhcmRzIGEgcmVhc29uYWJs
ZSBncGwgaGVicmV3DQphbmFseXplciBmb3IgbHVjZW5lIGJ1dCBkb24ndCBoYXZlIGFueXRoaW5n
IHlldC4uLiBqdXN0IG1lc3NpbmcgZHVyaW5nIG15DQpzcGFyZSB0aW1lLg0KDQppbiBnZW5lcmFs
IGl0IHdhc250IGhhcmQgdG8gbXVuZ2UgdGhlIGhzcGVsbCBwZXJsIHNjcmlwdHMgd2l0aCBzb21l
IGphdmENCmNvZGUgaW50byBwcm9kdWNpbmcgYSBtb3JwaG9sb2dpY2FsIGFuYWx5emVyIGJ1dCBm
cm9tIHdoYXQgSSBzZWUgdGhpcyBpcw0KcHJldHR5IHVzZWxlc3Mgd2l0aG91dCBzb21lIGRpc2Ft
YmlndWF0aW9uLCBiZWNhdXNlIHByZWNpc2lvbiBpcyBsb3cgZXZlbg0Kd2hlbiB0aGluZ3MgYXJl
IHdyaXR0ZW4gaW4gcHJpc3RpbmUgc3BlbGxpbmcsIGV0Yy4NCg0KaSdtIG5vdCBhd2FyZSBvZiBz
b21lIGdvb2QgdHJlYy1saWtlIGRhdGEgZm9yIGhlYnJldyB0byBiZW5jaG1hcmsgYW55IGlkZWFz
DQphZ2FpbnN0IGVpdGhlciwgd2hpY2ggY3JlYXRlcyBzb21lIHByb2JsZW1zLg0KDQppIGRvIGhh
dmUgdGhlIGlkZWEgb2YgdHJ5aW5nIHRvIG9ubHkgc29sdmUgdGhlIGVhc2llciBwcm9ibGVtIG9m
DQpzZWdtZW50YXRpb24gdG8gY3JlYXRlIGEgcmVhc29uYWJsZSBzZWFyY2gsIGFuZCB0aGVyZSdz
IHNvbWUgdGVzdCBkYXRhIGkndmUNCmJlZW4gcGxheWluZyB3aXRoIGhlcmU6DQpodHRwOi8vd3d3
LmFhYWkub3JnL1BhcGVycy9Xb3Jrc2hvcHMvMjAwOC9XUy0wOC0xNS9XUzA4LTE1LTAxMS5wZGYN
Cg0KcHJvYmxlbSBpcyBJIGNhbid0IHRyYWluIG9uIGl0IChpZiB5b3UgcmVhZCB0aGUgcGFwZXIg
aXQgZXhwbGFpbnMgdGhpcykuDQoNCm9uZSB0aGluZyBpIGRpZCBkbyB3YXMgdXBsb2FkIHNvbWUg
dG9rZW5pemF0aW9uIHdvcmsgaGVyZToNCmh0dHBzOi8vaXNzdWVzLmFwYWNoZS5vcmcvamlyYS9i
cm93c2UvTFVDRU5FLTE0ODgNCg0KdGhpcyB1c2VzIFJCQkkgYW5kIHNob3VsZCBhdCBsZWFzdCB0
b2tlbml6ZSB5b3VyIGhpbmRpIGNvcnJlY3RseSAoYWNjb3JkaW5nDQp0byB1bmljb2RlIHJ1bGVz
KS4gaXQgc2hvdWxkIGFsc28gcGFyc2UgeW91ciBoZWJyZXcgYmV0dGVyIChidXQgc3RpbGwgbm90
DQpyZWFsbHkgY29ycmVjdCksIGJ1dCByZWFsbHkgd29uJ3QgZ2l2ZSB5b3UgYSB1c2VmdWwgaGVi
cmV3IHNlYXJjaCwganVzdA0KaGFuZGxlIHB1bmN0dWF0aW9uIGEgYml0IGJldHRlci4gaXQgYWxz
byBoYXMgc29tZSBwcmFjdGljYWwgcHJvYmxlbXMgdGhhdA0Kc2hvdWxkIGJlIGZpeGVkIGFzIG1l
bnRpb25lZCBpbiB0aGUgSklSQSB0YXNrLg0KDQpkb24ndCBrbm93IGlmIHRoaXMgaGVscHMuLi4N
Cg0KT24gVHVlLCBGZWIgMTcsIDIwMDkgYXQgOTo1NCBQTSwgWmhhbmcsIExpc2hlbmcgPA0KTGlz
aGVuZy5aaGFuZ0Bicm9hZHZpc2lvbi5jb20+IHdyb3RlOg0KDQo+IEhpLA0KPg0KPiBBcmUgdGhl
cmUgZnJlZSBIZWJyZXcgYW5kIEhpbmRpIGxhbmd1YWdlIGFuYWx5emVycyBmb3INCj4gbHVjZW5l
PyBJIHNlYXJjaGVkIGFyY2hpdmUgYW5kIGZvdW5kIHNvbWUgZGlzY3Vzc2lvbnMsDQo+IGJ1dCBk
aWQgbm90IHNlZSBjbGVhciBwb2ludGVycyB0byBkb3dubG9hZGFibGUgY2xhc3Nlcy4NCj4NCj4g
VGhhbmtzIHZlcnkgbXVjaCBmb3IgaGVscHMsIExpc2hlbmcNCj4NCj4gLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZw0KPg0KPg0KDQoNCi0tIA0KUm9iZXJ0IE11aXINCnJjbXVpckBn
bWFpbC5jb20NCg==


From java-user-return-38591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 01:55:23 2009
Return-Path: <java-user-return-38591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4795 invoked from network); 19 Feb 2009 01:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 01:55:23 -0000
Received: (qmail 83697 invoked by uid 500); 19 Feb 2009 01:55:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83663 invoked by uid 500); 19 Feb 2009 01:55:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83652 invoked by uid 99); 19 Feb 2009 01:55:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 17:55:15 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 01:55:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LZy7i-0005hG-Nv
	for java-user@lucene.apache.org; Wed, 18 Feb 2009 17:54:46 -0800
Message-ID: <22092512.post@talk.nabble.com>
Date: Wed, 18 Feb 2009 17:54:46 -0800 (PST)
From: AlexElba <ramalex1@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Lunene 2.3-2.4 switch: Scoring change
In-Reply-To: <21739867.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramalex1@yahoo.com
References: <21739867.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org




AlexElba wrote:
> 
> Hello,
> I have project which I am trying to switch from lucene 2.3.2 to 2.4 I am
> getting some strange scores
> 
> Before my code was:
> 
> Hits hits= searcher.search(query);
> Float score = hits.score(1)
> 
> and scores from hist was from 0-1; 1 was 100% match
> 
> I change code to use hit collector
> 
>   TopDocCollector collector = new TopDocCollector(999999);
>      searcher.search(query, collector);
>      ScoreDocs[] hits= collector.topDocs().scoreDocs;
>      int docId = hits[1].doc;
>      Document document = searcher.doc(docId);
>     Float score = hits[1].score
> 
> The scores from this class are from 2-12.5 for the same query.
> 
> How to change my scores to old way?
> 
>   
> 
> 
> 
> 


I fix the problem. The prblem was there queue and pushing and poping. After
some optimization of the TopDocCollector it got faster
-- 
View this message in context: http://www.nabble.com/Lunene-2.3-2.4-switch%3A-Scoring-change-tp21739867p22092512.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 01:57:34 2009
Return-Path: <java-user-return-38592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5830 invoked from network); 19 Feb 2009 01:57:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 01:57:34 -0000
Received: (qmail 85488 invoked by uid 500); 19 Feb 2009 01:57:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85464 invoked by uid 500); 19 Feb 2009 01:57:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85453 invoked by uid 99); 19 Feb 2009 01:57:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 17:57:28 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 01:57:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LZy9q-0005mX-8M
	for java-user@lucene.apache.org; Wed, 18 Feb 2009 17:56:58 -0800
Message-ID: <22092548.post@talk.nabble.com>
Date: Wed, 18 Feb 2009 17:56:58 -0800 (PST)
From: AlexElba <ramalex1@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocCollector vs Hits: TopDocCollector slowing....
In-Reply-To: <F07DD663-DC4D-449B-A468-A371534E4667@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramalex1@yahoo.com
References: <21822877.post@talk.nabble.com> <F07DD663-DC4D-449B-A468-A371534E4667@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org




Grant Ingersoll-6 wrote:
> 
> I presume they are both now slower, right?  Otherwise you wouldn't  
> mind the speedup on the bigger one.  Hits did caching and prefetched  
> things, which has it's tradeoffs.  Can you describe how you were  
> measuring the queries?  How many results were you getting?
> 
> 
> 
> -Grant
> 
> On Feb 3, 2009, at 8:37 PM, AlexElba wrote:
> 
>>
>> Hello,
>>
>> I was using lucene 2.3.2 with hits and switch to lucene 2.4.0 and  
>> now I am
>> using TopDocCollector.
>>
>> I have two queries which are running against the same index.
>> One query is returning 80bytes information other one is returning  
>> 2000bytes
>>
>> With old Hits the query which was returning smaller data was faster  
>> which
>> has bigger data was slower.
>> After I change to TopDocCollector both big and small once returning  
>> same
>> time.
>>
>> Searcher is exactly the same and queries are the same only  
>> difference is in
>> one place I was using Hits in other TopDocCollector
>>
>> Who has any idea why, and how can I fix this?
>> -- 
>> View this message in context:
>> http://www.nabble.com/TopDocCollector-vs-Hits%3A-TopDocCollector-slowing....-tp21822877p21822877.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


I fix the problem. The problem was there queue and pushing and poping they
had. After some optimization of the TopDocCollector it got much faster
-- 
View this message in context: http://www.nabble.com/TopDocCollector-vs-Hits%3A-TopDocCollector-slowing....-tp21822877p22092548.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 02:41:31 2009
Return-Path: <java-user-return-38593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34378 invoked from network); 19 Feb 2009 02:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 02:41:31 -0000
Received: (qmail 11723 invoked by uid 500); 19 Feb 2009 02:41:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11693 invoked by uid 500); 19 Feb 2009 02:41:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11682 invoked by uid 99); 19 Feb 2009 02:41:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 18:41:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.65] (HELO elasmtp-kukur.atl.sa.earthlink.net) (209.86.89.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 02:41:14 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=E1f8M89U1RDYArq3i2ZICjz6tJnPj3z3tyDDlghfFV3nBouLklDJpGcjTjL966Xl;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.36] (helo=elwamui-hybrid.atl.sa.earthlink.net)
	by elasmtp-kukur.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1LZyqK-00068i-In
	for java-user@lucene.apache.org; Wed, 18 Feb 2009 21:40:53 -0500
Received: from 141.149.41.15 by webmail.earthlink.net with HTTP; Wed, 18 Feb 2009 21:40:52 -0500
Message-ID: <8629932.1235011252558.JavaMail.root@elwamui-hybrid.atl.sa.earthlink.net>
Date: Wed, 18 Feb 2009 21:40:52 -0500 (GMT-05:00)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org
Subject: Re: newbie seeking explanation of semantics of "Field" class
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c260977222a541eb84a569610d03b249f94b62601a10902912494350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.36
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks to Erick, Matthew, and Uwe -- that does help, a lot. E.g., one bit of code I had (mostly copied) now makes more sense: 

// add this field, to allow retrieving the full-text: 
myDocument.add(new Field("contents", theFullDocumetText, Field.Store.COMPRESS, Field.Index.NO));

// add this field, to allow keyword search: 
myDocument.add(new Field("contents", theFullDocumetText, Field.Store.NO, Field.Index.ANALYZED));

Right?

-Paul 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 03:04:26 2009
Return-Path: <java-user-return-38594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39232 invoked from network); 19 Feb 2009 03:04:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 03:04:26 -0000
Received: (qmail 28718 invoked by uid 500); 19 Feb 2009 03:04:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28691 invoked by uid 500); 19 Feb 2009 03:04:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28678 invoked by uid 99); 19 Feb 2009 03:04:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 19:04:20 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Feb 2009 03:04:09 +0000
Received: (qmail 95134 invoked by uid 60001); 19 Feb 2009 03:03:48 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1235012628; bh=/lXaFQH306diWgeJeTP5yoybJISbZIEeeKGLUg1YNjg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type; b=kZub98pCGGil2bOauQyk9iCKBFEIAX/0O+k1i0OYfpvnnj4wUNhMmxssU2k4GiX7353p1etc19whrEjTQIVZskZAx2R7IoB3loOtkuR9TacmW8ErofDsaY+vMu3VGUrPh8W3zy3WaDAuFtjv5ecCK8Z647Ugolaspq34dQQmKyo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type;
  b=oZT+p9GXktpddFr9Vvsqsq7hjyEA8mrvcz6BoBtSNWpk3ydfLKd2un5117XPNG6Gu8GtS5rYM/a3SxRj62OdgQYR9UYHTU9OxzBiI1ywov59Tr+dQZ3iEFs9n//lGkMHPYIVXv5IPILTHO63gAXQU5k/QcxFfyV5QRJHRMjg8eg=;
Message-ID: <403209.93998.qm@web50305.mail.re2.yahoo.com>
X-YMail-OSG: 0O25lGEVM1ngV4c89_CyEbw1p27HtLf5s_T0tWV9LPgSPWweN6ICLlqcLPu69A3_K06kTnpdhJMAMuOHHcyQLYrOvMWN_jXiTh0estB97b_XbGnrgKChP_GI9z1Rw_BT2VctDYNnzwFx4fuFi4225JLSJgFK6PYAfav04xors8PyWbACe9CwQn6xHJJfTESzAOjmB0CDWfKeesww50YCaMhO7gl5NzU-
Received: from [116.21.245.155] by web50305.mail.re2.yahoo.com via HTTP; Wed, 18 Feb 2009 19:03:47 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.289.1
References: <8629932.1235011252558.JavaMail.root@elwamui-hybrid.atl.sa.earthlink.net>
Date: Wed, 18 Feb 2009 19:03:47 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: newbie seeking explanation of semantics of "Field" class
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-285319414-1235012627=:93998"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-285319414-1235012627=:93998
Content-Type: text/plain; charset=us-ascii

Or:
// store and index this field to allow original field content retrieval and search against it
myDocument.add(new Field("contents", theFullDocumetText, Field.Store.COMPRESS, Field.Index.ANALYZED));

Otis--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch 




________________________________
From: "rolarenfan@earthlink.net" <rolarenfan@earthlink.net>
To: java-user@lucene.apache.org
Sent: Thursday, February 19, 2009 10:40:52 AM
Subject: Re: newbie seeking explanation of semantics of "Field" class

Thanks to Erick, Matthew, and Uwe -- that does help, a lot. E.g., one bit of code I had (mostly copied) now makes more sense: 

// add this field, to allow retrieving the full-text: 
myDocument.add(new Field("contents", theFullDocumetText, Field.Store.COMPRESS, Field.Index.NO));

// add this field, to allow keyword search: 
myDocument.add(new Field("contents", theFullDocumetText, Field.Store.NO, Field.Index.ANALYZED));

Right?

-Paul 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-285319414-1235012627=:93998--

From java-user-return-38595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 03:30:34 2009
Return-Path: <java-user-return-38595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45287 invoked from network); 19 Feb 2009 03:30:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 03:30:34 -0000
Received: (qmail 43884 invoked by uid 500); 19 Feb 2009 03:30:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43849 invoked by uid 500); 19 Feb 2009 03:30:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43838 invoked by uid 99); 19 Feb 2009 03:30:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 19:30:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.86.89.66] (HELO elasmtp-spurfowl.atl.sa.earthlink.net) (209.86.89.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 03:30:17 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=twR09OP7ubSOibCdNiyITsb/KjCTfZYrWYdQPLKNpXgF0MjlBrNe8NVvGIhYmobu;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.36] (helo=elwamui-hybrid.atl.sa.earthlink.net)
	by elasmtp-spurfowl.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1LZzbo-0006Oh-Ek
	for java-user@lucene.apache.org; Wed, 18 Feb 2009 22:29:56 -0500
Received: from 141.149.41.15 by webmail.earthlink.net with HTTP; Wed, 18 Feb 2009 22:29:56 -0500
Message-ID: <2461910.1235014196372.JavaMail.root@elwamui-hybrid.atl.sa.earthlink.net>
Date: Wed, 18 Feb 2009 22:29:56 -0500 (EST)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org
Subject: what's the best practice for getting "next page" of hits?
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c26094bc83b751021ce0080852fc88aad11bea8438e0f32a48e08350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.36
X-Virus-Checked: Checked by ClamAV on apache.org

R2.4

So, I may well be missing something here, but: I use 

<pseudoCode>IndexSearcher.search(someQuery, null, count, new Sort());</pseudoCode>

to get an instance of TopFieldDocs (the "Hits" is deprecated). So far, all fine; I get a bunch of documents. Now, what is the Lucene-best-practice for getting the *next* batch of size "count"? (Didn't see this discussed anywhere, but maybe I missed it.) 

a) I could guess that my users will never want more than "N*count", for some value of N, request that right up front, and do all my own "paging" using the one TopFieldDocs instance; 

b) I could assume that (a) will be an inefficient memory and time hog, and when the user clicks "Next" (or whatever), then ... (with i starting at "1") get a new TopFieldDocs with "(++i)*count", and out of that discard the first "i*count" items? In the limit (as i => N) that uses up just as much space and memory, but does so lazily (better); 

c) some compromise of (a) and (b), where I get M*count, do my own paging, and when the user asks for the (i+1)==(M+1)-th batch, then get another M*count (maybe faster, but also maybe bigger amortized memory footprint); 

d) something else? (I'd hope for something like a search() method with some parameter saying, in effect, "such and such a range of hits" ...) 

thanks,
Paul 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 05:18:45 2009
Return-Path: <java-user-return-38596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64295 invoked from network); 19 Feb 2009 05:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 05:18:45 -0000
Received: (qmail 7289 invoked by uid 500); 19 Feb 2009 05:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7265 invoked by uid 500); 19 Feb 2009 05:18:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7254 invoked by uid 99); 19 Feb 2009 05:18:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 21:18:37 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.65] (HELO smtp112.mail.mud.yahoo.com) (209.191.84.65)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Feb 2009 05:18:28 +0000
Received: (qmail 29981 invoked from network); 19 Feb 2009 05:18:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=2uHgpUU1B5noi3qTjurVd297q3YYwEGh9FMqFmN3C9yUtFbo03rbDn+AqpiaK7mmIuIYWSMqhCuApMe6gZLhmeSLZfR2t0kYuy+XAkBo69dGxve49jdqPgeggAAs1aR50KLjK2D3GD2D5YvT0iPPuTpinuLzpzW4kVwxmVuy8qc=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp112.mail.mud.yahoo.com with SMTP; 19 Feb 2009 05:18:05 -0000
X-YMail-OSG: jbeqy24VM1lIyAOMaCYFUHRFN6mE1Cc.SPkg6SeLuyjtV7EZ7jdmLownuAhd4CchsnzzcoOhL.OtRgNUsJUIFo_zvvSSFKIqmINVk8cfh5AKSUa3DRzOwNl6FSH0OhOR9.vbpRALFeEFFun9He4SjlRCWwKHdrZcKSrjMQ9lrdsoNdSLfUQyi4yGFaDw
X-Yahoo-Newman-Property: ymail-3
Message-ID: <003e01c99251$7253f180$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>,
	<rolarenfan@earthlink.net>
References: <2461910.1235014196372.JavaMail.root@elwamui-hybrid.atl.sa.earthlink.net>
Subject: Re: what's the best practice for getting "next page" of hits?
Date: Thu, 19 Feb 2009 10:48:02 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="UTF-8";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Your solution (b) is better rather than using your own way of paging.

Do search for every page and collect the (pageno * count) results, discard 
(pageno-1 * count) and display the last count results to the User. This is 
fast and efficient.

Regards
Ganesh

----- Original Message ----- 
From: <rolarenfan@earthlink.net>
To: <java-user@lucene.apache.org>
Sent: Thursday, February 19, 2009 8:59 AM
Subject: what's the best practice for getting "next page" of hits?


> R2.4
>
> So, I may well be missing something here, but: I use
>
> <pseudoCode>IndexSearcher.search(someQuery, null, count, new 
> Sort());</pseudoCode>
>
> to get an instance of TopFieldDocs (the "Hits" is deprecated). So far, all 
> fine; I get a bunch of documents. Now, what is the Lucene-best-practice 
> for getting the *next* batch of size "count"? (Didn't see this discussed 
> anywhere, but maybe I missed it.)
>
> a) I could guess that my users will never want more than "N*count", for 
> some value of N, request that right up front, and do all my own "paging" 
> using the one TopFieldDocs instance;
>
> b) I could assume that (a) will be an inefficient memory and time hog, and 
> when the user clicks "Next" (or whatever), then ... (with i starting at 
> "1") get a new TopFieldDocs with "(++i)*count", and out of that discard 
> the first "i*count" items? In the limit (as i => N) that uses up just as 
> much space and memory, but does so lazily (better);
>
> c) some compromise of (a) and (b), where I get M*count, do my own paging, 
> and when the user asks for the (i+1)==(M+1)-th batch, then get another 
> M*count (maybe faster, but also maybe bigger amortized memory footprint);
>
> d) something else? (I'd hope for something like a search() method with 
> some parameter saying, in effect, "such and such a range of hits" ...)
>
> thanks,
> Paul
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 05:38:17 2009
Return-Path: <java-user-return-38597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77666 invoked from network); 19 Feb 2009 05:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 05:38:17 -0000
Received: (qmail 24171 invoked by uid 500); 19 Feb 2009 05:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24134 invoked by uid 500); 19 Feb 2009 05:38:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24123 invoked by uid 99); 19 Feb 2009 05:38:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 21:38:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nitdaiict8@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:38:04 +0000
Received: by rv-out-0506.google.com with SMTP id k40so375203rvb.5
        for <java-user@lucene.apache.org>; Wed, 18 Feb 2009 21:37:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=VAxQB+OJft4Yk44RnCle3ljlweCDj+sUMR9U2Zn30Vg=;
        b=m+9FrXr1Ja+h4mY/kS/qeBR7695hQDzd79k4mlUrTEAonqhUeZUViD3PeuC+6z8oU0
         82xHm93iFGdVQoyLE40DZsFKv+BLaImM15L9RwxHQbMEb9NKDOijW9JcYaYtvCR1vlFX
         i48pkyCDgt5dvkcJ5yyBS82eg1SxS3Hmh43z4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=elpWbEjuC7+oFJ4NHQf4Iahi4ihafeX27e0+T/7Zw5XKHHjozc8+xasJw8ifffwyNh
         e8odyatCqd5YKkc5jBllzZsQCAGpgHwl4+j1rpcPX2kgPp6j0dnbndjhyz1b+FfAOWNG
         Q5ZDJbLaSd7rsG3JQ7t4GJcvEn5vHJDKl/S8g=
MIME-Version: 1.0
Received: by 10.142.135.16 with SMTP id i16mr4068828wfd.250.1235021864082; 
	Wed, 18 Feb 2009 21:37:44 -0800 (PST)
Date: Thu, 19 Feb 2009 11:07:44 +0530
Message-ID: <7284f6e20902182137x1db8e463jb3f7f7d54200b7bd@mail.gmail.com>
Subject: query regarding indexing method
From: nitin gopi <nitdaiict8@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd328727f9d8b04633eef85
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd328727f9d8b04633eef85
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello all,
           I want to know what algorithm lucene uses for indexing documents.
Can I use lucene in my application with my own algorithm for indexing?

regards,
Nitin Gopi

--000e0cd328727f9d8b04633eef85--

From java-user-return-38598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 07:04:33 2009
Return-Path: <java-user-return-38598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25161 invoked from network); 19 Feb 2009 07:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 07:04:33 -0000
Received: (qmail 4030 invoked by uid 500); 19 Feb 2009 07:04:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3896 invoked by uid 500); 19 Feb 2009 07:04:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3881 invoked by uid 99); 19 Feb 2009 07:04:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Feb 2009 23:04:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [124.153.73.149] (HELO mail.mapmyindia.com) (124.153.73.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 07:04:16 +0000
Received: (qmail 1486 invoked by uid 510); 19 Feb 2009 12:33:50 +0530
Received: from 59.178.214.55 by mail.mapmyindia.com (envelope-from <varun@mapmyindia.com>, uid 502) with qmail-scanner-1.25 
 (uvscan: v5.1.00/v5440.  
 Clear:RC:0(59.178.214.55):. 
 Processed in 5.73734 secs); 19 Feb 2009 07:03:50 -0000
Received: from triband-del-59.178.214.55.bol.net.in (HELO ?127.0.0.1?) (varun@mapmyindia.com@59.178.214.55)
  by mail.mapmyindia.com with SMTP; 19 Feb 2009 12:33:44 +0530
Message-ID: <499D0451.5010504@mapmyindia.com>
Date: Thu, 19 Feb 2009 12:33:45 +0530
From: Varun Dhussa <varun@mapmyindia.com>
Organization: CE InfoSystems (P) Ltd
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene search performance on Sun UltraSparc T2 (T5120) servers
References: <499BE497.2060103@mapmyindia.com> <5e76f3840902180833g60147620u4b56dba8a705a83e@mail.gmail.com>
In-Reply-To: <5e76f3840902180833g60147620u4b56dba8a705a83e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 090218-0, 02/18/2009), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

The details are as follows:
Solaris version: Solaris 10 U5 and U6
For the Java Setup, I have tried with:
Sun JDK 1.5 (32 & 64)
Sun JDK 1.6 (32 & 64)
Heap Space: 2G from 32 bit and 4G for 64 bit (Set the same values for 
both XMS and XMX)

Disk: Tried with ZFS (U6) and UFS (U5)
I reduced the Inode density on the partition since page faults were 
happening initially. Also, the block size was 8K.
The following reports are on Solaris 10 U5 with UFS (8K block size).


The vmstat report is below:

# vmstat 3
kthr      memory            page            disk          faults      cpu
r b w   swap  free  re  mf pi po fr de sr s0 s2 -- --   in   sy   cs us 
sy id
0 0 0 43408368 29603112 13 107 4 7 6 0  0  2 -0  0  0  458  589  321  0  
0 99
0 0 0 22517072 30241872 830 7709 0 0 0 0 0 0  0  0  0 2537 30699 3899 36 
3 61
0 0 0 24666416 30483248 860 7942 0 0 0 0 0 0  0  0  0 2235 31886 3362 28 
3 69
0 0 0 24184008 30450728 791 7813 0 0 0 0 0 0  0  0  0 2335 31426 3740 33 
3 65
0 0 0 23472024 30442168 813 7822 0 0 0 0 0 0  0  0  0 2494 31312 3923 35 
3 62
0 0 0 22751768 30297240 787 7654 0 0 0 0 0 0  0  0  0 2498 31820 3892 35 
3 62
0 0 0 25385568 30527600 835 7963 0 0 0 0 0 0  0  0  0 2360 32144 3691 29 
3 68
0 0 0 22741056 30281376 787 7643 0 0 0 0 0 0  0  0  0 2249 30008 3484 37 
3 60
0 0 0 22753800 30373072 847 7923 0 0 0 0 0 0  0  0  0 2501 31375 3854 33 
3 64
0 0 0 23725600 30431312 841 8049 0 0 0 0 0 0  0  0  0 2362 32514 3752 32 
3 65
0 0 0 22743008 30256368 826 7719 0 0 0 0 0 0  0  0  0 2427 32101 3773 34 
3 63
0 0 0 23950336 30405312 818 7925 0 0 0 0 0 0  0  0  0 2337 32095 3606 31 
3 66
0 0 0 22752872 30319312 778 7486 0 0 0 0 0 0  0  0  0 2435 30277 3769 37 
3 60
0 0 0 24657848 30401408 836 7797 0 0 0 0 0 0  0  0  0 2469 31879 3770 32 
3 65
0 0 0 23460408 30331056 776 7560 0 0 0 0 0 0  0  0  0 2461 31344 3883 37 
3 60
0 0 0 22748352 30302248 792 7534 0 0 0 0 0 0  0  0  0 2424 30683 3733 36 
3 61
0 0 0 23953848 30389280 837 7868 0 0 0 0 0 0  0  0  0 2280 30710 3511 34 
3 63
0 0 0 22736592 30249672 810 7716 0 0 0 0 0 0  0  0  0 2345 30980 3593 34 
3 63
kthr      memory            page            disk          faults      cpu
r b w   swap  free  re  mf pi po fr de sr s0 s2 -- --   in   sy   cs us 
sy id
0 0 0 23951544 30400016 834 7992 0 0 0 0 0 0  0  0  0 2431 32647 3776 31 
3 66
0 0 0 21797992 30245536 812 7635 0 0 0 0 0 0  0  0  0 2402 30213 3693 39 
3 59
0 0 0 22745264 30307728 781 7539 0 0 0 0 0 0  0  0  0 2437 30744 3860 38 
3 59
0 0 0 22748536 30286456 851 7987 0 0 0 0 0 0  0  0  0 2433 32842 3678 29 
3 68
0 0 0 22747680 30297544 791 7514 0 0 0 0 0 0  0  0  0 2369 30625 3655 38 
3 59
0 0 0 23104848 30309488 793 7524 0 0 0 0 0 0  0  0  0 2566 31190 3942 36 
3 61
0 0 0 23460368 30340688 810 7784 0 0 0 0 0 0  0  0  0 2302 31430 3688 33 
3 64
0 0 0 22031344 30215504 792 7397 0 0 0 0 0 0  0  0  0 2477 30733 3850 39 
3 58
0 0 0 22744168 30277312 834 7829 0 0 0 0 0 0  0  0  0 2370 29926 3592 35 
3 63
0 0 0 24177728 30432600 806 7789 0 0 0 0 0 0  0  0  0 2379 31870 3731 32 
3 65
0 0 0 23467896 30382728 802 7810 0 0 0 0 0 0  0  0  0 2527 31866 3980 33 
3 64
0 0 0 22757912 30331080 823 7847 0 0 0 0 0 0  0  0  0 2496 31580 3871 33 
3 64
0 0 0 22043312 30215904 819 7558 0 0 0 0 0 0  0  0  0 2253 30252 3455 36 
3 61
0 0 0 22744952 30275008 793 7657 0 0 0 0 0 0  0  0  0 2499 31840 3937 36 
3 61
0 0 0 23715200 30419008 843 7906 0 0 0 0 0 0  0  0  0 2404 31741 3707 33 
3 64
0 0 0 21307184 30148472 788 7515 0 0 0 0 0 0  0  0  0 2430 31340 3819 39 
3 58
0 0 0 23459544 30332160 817 7687 0 0 0 0 0 0  0  0  0 2353 31011 3526 34 
3 63
0 0 0 23467304 30376392 819 7846 0 0 0 0 0 0  0  0  0 2522 31918 3933 32 
3 65
0 0 0 23473464 30421992 830 7854 0 0 0 0 0 0  0  0  0 2407 31714 3827 33 
3 65
kthr      memory            page            disk          faults      cpu
r b w   swap  free  re  mf pi po fr de sr s0 s2 -- --   in   sy   cs us 
sy id
0 0 0 22508648 30240256 799 7447 0 0 0 0 0 0  0  0  0 2524 30483 3911 39 
3 58
0 0 0 22737496 30276864 837 7731 0 0 0 0 0 0  0  0  0 2310 30289 3473 36 
3 61
0 0 0 22515488 30312728 792 7646 0 0 0 0 0 0  0  0  0 2472 31610 3867 35 
3 62
0 0 0 22756248 30251584 823 7669 0 0 0 0 0 0  0  0  0 2637 31413 4119 36 
3 60
0 0 0 23940168 30379336 833 7973 0 0 0 0 0 0  0  0  0 2240 32325 3472 31 
3 66
0 0 0 24184736 30455928 846 7838 0 0 0 0 0 0  0  0  0 2288 31508 3538 32 
3 65
0 0 0 22751808 30309984 776 7614 0 0 0 0 0 0  0  0  0 2480 31486 3906 36 
3 61
0 0 0 22989624 30309536 813 7626 0 0 0 0 0 0  0  0  0 2537 30347 3988 38 
3 59
0 0 0 22739224 30276936 814 7692 0 0 0 0 0 0  0  0  0 2261 31528 3409 34 
3 63
0 0 0 23236200 30350216 853 7968 0 0 0 0 0 0  0  0  0 2676 32636 4167 32 
3 65
0 0 0 24194016 30506960 836 8005 0 0 0 0 0 0  0  0  0 2222 31503 3382 30 
3 67
0 0 0 23480504 30424536 834 7848 0 0 0 0 0 0  0  0  0 2390 32039 3736 32 
3 65
0 0 0 22739048 30233176 812 7742 0 0 0 0 0 0  0  0  0 2604 31693 4029 35 
3 62
0 0 0 23461664 30358528 805 7700 0 0 0 0 0 0  0  0  0 2463 30936 3922 36 
3 61
0 0 0 22031616 30257808 796 7533 0 0 0 0 0 0  0  0  0 2226 29829 3377 37 
3 60
0 0 0 23458168 30327688 813 7773 0 0 0 0 0 0  0  0  0 2388 31519 3763 33 
3 64
0 0 0 23465184 30371904 834 7796 0 0 0 0 0 0  0  0  0 2510 32101 3933 34 
3 63
0 0 0 22513648 30312240 800 7596 0 0 0 0 0 0  0  0  0 2416 30538 3734 38 
3 59
0 0 0 22272824 30228912 802 7640 0 0 0 0 0 0  0  0  0 2292 31395 3469 34 
3 63
kthr      memory            page            disk          faults      cpu
r b w   swap  free  re  mf pi po fr de sr s0 s2 -- --   in   sy   cs us 
sy id
0 0 0 22744032 30253480 830 7758 0 0 0 0 0 0  0  0  0 2568 31896 3935 35 
3 62
0 0 0 23287696 30368432 808 7736 0 0 0 0 0 0  0  0  0 2439 30929 3844 35 
3 62
0 0 0 22038504 30253112 794 7480 0 0 0 0 0 0  0  0  0 2213 29774 3433 37 
3 60
0 0 0 24660144 30480240 846 8103 0 0 0 0 0 0  0  0  0 2548 32825 3944 30 
3 66
0 0 0 24183648 30445120 823 7895 0 0 0 0 0 0  0  0  0 2441 32699 3822 31 
3 66
0 0 0 23469136 30391744 830 7916 0 0 0 0 0 0  0  0  0 2441 31731 3813 32 
3 65
0 0 0 22516312 30289688 796 7592 0 0 0 0 0 0  0  0  0 2318 30310 3616 36 
3 61
0 0 0 23943448 30363248 821 7821 0 0 0 0 0 0  0  0  0 2355 31789 3641 31 
3 66
0 0 0 22742768 30284896 795 7602 0 0 0 0 0 0  0  0  0 2387 30608 3675 37 
3 60
0 0 0 23475456 30416136 852 7991 0 0 0 0 0 0  0  0  0 2489 32066 3871 31 
3 66
0 0 0 22756848 30233968 798 7588 0 0 0 0 0 0  0  0  0 2464 31106 3836 37 
3 60

Cooltest report said virtually nothing.

                  System Configuration

Host name                       mmiAS02
System name                     SUNW,SPARC-Enterprise-T5120
Effective UID                   0
Cooltst version                 3.0.1
OS                              Solaris
OS release                      5.10
OS version                      Generic_127127-11
Distro                          Solaris
BIOS/PROM                       OBP 4.28.0 2008/01/22 21:10
Memory                          32640 MB
Chip                            UltraSPARC-T2
MHz                             1165
Architecture                    SPARC
# of Virtual CPUs               64
  P0: 1165 MHz UltraSPARC-T2
  P1: 1165 MHz UltraSPARC-T2
  P2: 1165 MHz UltraSPARC-T2
  P3: 1165 MHz UltraSPARC-T2
  P4: 1165 MHz UltraSPARC-T2
  P5: 1165 MHz UltraSPARC-T2
  P6: 1165 MHz UltraSPARC-T2
  P7: 1165 MHz UltraSPARC-T2
  P8: 1165 MHz UltraSPARC-T2
  P9: 1165 MHz UltraSPARC-T2
  P10: 1165 MHz UltraSPARC-T2
  P11: 1165 MHz UltraSPARC-T2
  P12: 1165 MHz UltraSPARC-T2
  P13: 1165 MHz UltraSPARC-T2
  P14: 1165 MHz UltraSPARC-T2
  P15: 1165 MHz UltraSPARC-T2
  P16: 1165 MHz UltraSPARC-T2
  P17: 1165 MHz UltraSPARC-T2
  P18: 1165 MHz UltraSPARC-T2
  P19: 1165 MHz UltraSPARC-T2
  P20: 1165 MHz UltraSPARC-T2
  P21: 1165 MHz UltraSPARC-T2
  P22: 1165 MHz UltraSPARC-T2
  P23: 1165 MHz UltraSPARC-T2
  P24: 1165 MHz UltraSPARC-T2
  P25: 1165 MHz UltraSPARC-T2
  P26: 1165 MHz UltraSPARC-T2
  P27: 1165 MHz UltraSPARC-T2
  P28: 1165 MHz UltraSPARC-T2
  P29: 1165 MHz UltraSPARC-T2
  P30: 1165 MHz UltraSPARC-T2
  P31: 1165 MHz UltraSPARC-T2
  P32: 1165 MHz UltraSPARC-T2
  P33: 1165 MHz UltraSPARC-T2
  P34: 1165 MHz UltraSPARC-T2
  P35: 1165 MHz UltraSPARC-T2
  P36: 1165 MHz UltraSPARC-T2
  P37: 1165 MHz UltraSPARC-T2
  P38: 1165 MHz UltraSPARC-T2
  P39: 1165 MHz UltraSPARC-T2
  P40: 1165 MHz UltraSPARC-T2
  P41: 1165 MHz UltraSPARC-T2
  P42: 1165 MHz UltraSPARC-T2
  P43: 1165 MHz UltraSPARC-T2
  P44: 1165 MHz UltraSPARC-T2
  P45: 1165 MHz UltraSPARC-T2
  P46: 1165 MHz UltraSPARC-T2
  P47: 1165 MHz UltraSPARC-T2
  P48: 1165 MHz UltraSPARC-T2
  P49: 1165 MHz UltraSPARC-T2
  P50: 1165 MHz UltraSPARC-T2
  P51: 1165 MHz UltraSPARC-T2
  P52: 1165 MHz UltraSPARC-T2
  P53: 1165 MHz UltraSPARC-T2
  P54: 1165 MHz UltraSPARC-T2
  P55: 1165 MHz UltraSPARC-T2
  P56: 1165 MHz UltraSPARC-T2
  P57: 1165 MHz UltraSPARC-T2
  P58: 1165 MHz UltraSPARC-T2
  P59: 1165 MHz UltraSPARC-T2
  P60: 1165 MHz UltraSPARC-T2
  P61: 1165 MHz UltraSPARC-T2
  P62: 1165 MHz UltraSPARC-T2
  P63: 1165 MHz UltraSPARC-T2
OS release detail:
Solaris 10 5/08 s10s_u5wos_10 SPARC Copyright 2008 Sun Microsystems, 
Inc.  All Rights Reserved. Use is subject to license terms. Assembled 24 
March 2008

                     Workload Measurements

Observed system for             10 min
        in intervals of        10 sec
Cycles                          44768051692942
Instructions                    3980806371547
CPI                             11.25 **
FP instructions                 5821938521
Emulated FP instructions        0
FP Percentage                    0.1%
The following applies to the measurement interval with the
busiest single thread or process:
Peak thread utilization at      2009-02-13 14:36:16
  Corresponding file name      1234515976
  CPU utilization               39.4%
  Command                      java
  PID/LWPID                    16396/1
  Thread utilization           0.6%
More detail on processes and threads is in data/process.out

**Cycles per Instruction (CPI) is not comparable between UltraSPARC
T1 and T2 processors and conventional processors. Conventional
processors execute an idle loop when there is no work to do, so
CPI may be artificially low, especially when the system is
somewhat idle. The UltraSPARC T1 and T2 "park" idle threads,
consuming no energy, when there is no work to do, so CPI may
be artificially high, especially when the system is somewhat idle.

                     Advice

Floating Point                 GREEN
   Observed floating point content was not excessive for
   an UltraSPARC T1 processor. Floating point content is not
   a limitation for UltraSPARC T2.

Parallelism                    GREEN
   The observed workload has sufficient threads of execution to
   efficiently utilize the multiple cores and threads of an
   UltraSPARC T1 or UltraSPARC T2 processor.



Varun Dhussa
Product Architect
CE InfoSystems (P) Ltd
http://www.mapmyindia.com



Glen Newton wrote:
> Could you give some configuration details:
> - Solaris version
> - Java VM version, heap size, and any other flags
> - disk setup
>
> You should also consider using huge pages (see
> http://zzzoot.blogspot.com/2009/02/java-mysql-increased-performance-with.html)
>
> I will also be posting performance gains using huge pages for Java
> Lucene Linux large scale indexing in the next week or so...
>
> -glen
>
>
>
> 2009/2/18 Varun Dhussa <varun@mapmyindia.com>:
>   
>> Hi,
>>
>> I have had a bad experience when migrating my application from Intel Xeon
>> based servers to Sun UltraSparc T2 T5120 servers. Lucene fuzzy search just
>> does not perform. A search which took approximately 500 ms takes more than 6
>> seconds to execute.
>>
>> The index has about 100,000,000 records. So, I tried to split it into 10
>> indices and used the ParallelSearcher on it, but still got similar results.
>>
>> I am guessing that this is because the distance implementation used by
>> Lucene requires higher clock speed and can't be parallelized much.
>>
>> Please advice
>>
>> --
>> Varun Dhussa
>> Product Architect
>> CE InfoSystems (P) Ltd
>> http://www.mapmyindia.com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 08:15:34 2009
Return-Path: <java-user-return-38599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50765 invoked from network); 19 Feb 2009 08:15:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 08:15:34 -0000
Received: (qmail 57541 invoked by uid 500); 19 Feb 2009 08:15:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57504 invoked by uid 500); 19 Feb 2009 08:15:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57493 invoked by uid 99); 19 Feb 2009 08:15:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 00:15:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.83.156.225] (HELO lnx500.hrz.tu-darmstadt.de) (130.83.156.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 08:15:18 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx500.hrz.tu-darmstadt.de (8.13.8/8.13.8/HRZ/PMX) with ESMTP id n1J8EtoC001395
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 09:14:55 +0100
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9926A.25AAEDBA"
Subject: RE: Phrase indexing and searching with Lucene
Date: Thu, 19 Feb 2009 09:14:55 +0100
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7205@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7205@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Thread-Topic: Phrase indexing and searching with Lucene
Thread-Index: AcmR1KQuGc6UtF60SJC06zq+zJiqhwAkQXbz
References: <499BE497.2060103@mapmyindia.com><18248.30864.qm@web26005.mail.ukl.yahoo.com><0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de><359a92830902180510l51f85fe0p8075b4f2d5fc381e@mail.gmail.com><0DBCCB475CDE864F8F6086D69BFC5D9F02CE7201@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de> <359a92830902180624v3dc8be06ob673fe8537e4c7be@mail.gmail.com>
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX: seen v0.51
X-PMX-SPAMCHECK: outgoing mail: not checked
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9926A.25AAEDBA
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hello,

Thank you Erick for this detailed answer, that makes things clearer in =
my mind.

>I'm still not clear why the built-in phrase query syntax won't work.

I have programmed a set of java classes (I use Lucene classes) to index =
and search into a collection of documents for a set of queries.
To test my system, I use a corpus which consists in a collection of =
queries (n queries) and documents (m documents).=20
I started by creating one index for all queries and another one for all =
documents. Then I make the search to match between the queries index and =
documents index.
I use a trec evaluation tool to generate a file that gives all hits =
(matches) between the queryID and documentID with different scores.=20

In this first step, I just index terms, therefore the search process (as =
I have it now) looks only for term matches between the query terms and =
the documents terms.
Now I want to get better results (better matching) by adding phrases to =
terms.=20

I don't know exactly whether it makes a difference if I index phrases =
and terms (erick, erickson, thinks, small, thoughts, erick erickson, =
erickson thinks, small thoughts, erickson thoughts) and then search for =
both, or just keep the indexing process as it is (erick, erickson, =
thinks, small, thoughts) and then make a search for phrases (PhraseQuery =
: erick erickson, erickson thinks, small thoughts, erickson thoughts) =
and terms.=20
Any idea?


>Some examples of what you put in your index and what searches
>you expect to return results for your example AND searches you do
>NOT want to hit that document would be a great help.

input:=20

*Query* =20
898    Why is the sun bright?

*Documents*=20
7568  Star, large celestial body composed of gravitationally contained =
hot gases emitting electromagnetic radiation, especially light, as a =
result of nuclear reactions inside the star. The sun is a star.
7567  The sun has a magnitude of -26.7, inasmuch as it is about 10 =
billion times as bright as Sirius in the earth's sky.=20

output:=20

qID     dID     score=20
898     7568  	 0,13 (not relevant)
898 	7567 	 1     (relevant)


In this example, Lucene matches document 7567 to be relevant to he query =
(since it contains all query terms), however bright here is relative to =
Sirius (what we need is to get "sun bright").




Best=20
Nada


-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]
Sent: Wed 2/18/2009 3:24 PM
To: java-user@lucene.apache.org
Subject: Re: Phrase indexing and searching with Lucene
=20
I'm still not clear why the built-in phrase query syntax won't work. If =
I
index the following terms (erick, erickson, thinks, small, thoughts)
in a single field, then searching for "erick erickson" (as a phrase =
query,
i.e. with double quotes when sent through a query parser or constructing
a PhraseQuery yourself) will generate a hit but "erick thinks" won't
generate a hit (unless you specify slop).

"thinks small thoughts" would also generate a hit

If you're saying that you only want to match on *all* the tokens, i.e.
the only way to get a hit on the above would be to search for
"erick erickson thinks small thoughts", then you can create a
field that's UN_ANALYZED. If you do this, though, beware
that you have to do things like lower-case terms yourself when
indexing.

I have no idea what IndexTermGenerator is or what it does, but I'm
assuming that it just generates single words.

Some examples of what you put in your index and what searches
you expect to return results for your example AND searches you do
NOT want to hit that document would be a great help.

As far as searching for both, constructing a BooleanQuery with regular
TermQuerys and PhraseQuerys would work if you're constructing
your queries programmatically, or just using a Lucene query
like +termfield:word +phrasefield:"erick erickson thinks" would
work. Or, if you just require that the phrase exists you could do
it all in one field like
+field:word +field:"erick erickson thinks"



Best
Erick


On Wed, Feb 18, 2009 at 8:42 AM, Nada Mimouni <
mimouni@tk.informatik.tu-darmstadt.de> wrote:

>
>
> Thank you Erick.
>
> I need first to index phrases, the built-in phrase processing (with =
double
> quotes) comes in the search step.
> Is there any difference between :
>            1) start by indexing phrases and then make a phrase search
>            2) index terms and then search for phrases
>
>
> To make things clearer:
>
> What I am doing now:
>  - In the indexing step:  I am using "IndexTermGenerator" to generate =
term
> based indexes, one index for all queries I have and another one for
> documents (term means single word).
>  - In the search step : Lucene matches terms in queries index with =
terms in
> documents index.
>
> What I need to do:
>  - Index phrases ("multi" words) in addition to terms (single words)
>  - Search for both : phrases and terms
>
>
> Is there any idea on how to proceed?
>
> Regards
> Nada
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wed 2/18/2009 2:10 PM
> To: java-user@lucene.apache.org
> Subject: Re: Phrase indexing and searching with Lucene
>
> Have you tried the built-in phrase processing with double quotes? e.g.
> "this is a phrase"?
>
> See the Term section at
> http://lucene.apache.org/java/2_4_0/queryparsersyntax.html
>
> Best
> Erick
>
> On Wed, Feb 18, 2009 at 5:57 AM, Nada Mimouni <
> mimouni@tk.informatik.tu-darmstadt.de> wrote:
>
> >
> >
> > Hello everybody,
> >
> > I use Lucene to index and search into text documents.
> > At present, I just index and search for single words. I want to =
extend
> this
> > to phrases (or nGrams).
> >
> > Could anyone please give me details on how to index phrases and then =
make
> a
> > phrase search?
> >
> > Thank you very much in advance for your help.
> >
> > Nada Mimouni
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



------_=_NextPart_001_01C9926A.25AAEDBA
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9926A.25AAEDBA--

From java-user-return-38600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 09:48:51 2009
Return-Path: <java-user-return-38600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91246 invoked from network); 19 Feb 2009 09:48:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 09:48:51 -0000
Received: (qmail 51913 invoked by uid 500); 19 Feb 2009 09:48:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51878 invoked by uid 500); 19 Feb 2009 09:48:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51867 invoked by uid 99); 19 Feb 2009 09:48:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 01:48:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [79.170.194.127] (HELO mail.roo10.com) (79.170.194.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 09:48:36 +0000
Received: from [192.168.60.45] (78-105-13-3.dsl.cnl.uk.net [78.105.13.3])
	by mail.roo10.com (Postfix) with ESMTP id E983046100D8;
	Thu, 19 Feb 2009 09:48:13 +0000 (GMT)
Subject: Re: what's the best practice for getting "next page" of hits?
From: Joel Halbert <joel@su3analytics.com>
To: java-user@lucene.apache.org
Cc: rolarenfan@earthlink.net
In-Reply-To: <003e01c99251$7253f180$710bc30a@sv.us.sonicwall.com>
References:
	 <2461910.1235014196372.JavaMail.root@elwamui-hybrid.atl.sa.earthlink.net>
	 <003e01c99251$7253f180$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain
Organization: SU3 Analytics
Date: Thu, 19 Feb 2009 09:48:12 +0000
Message-Id: <1235036892.6381.2.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Out of interest, if the index is entirely in memory (using a RAMDir) is
there any significant different in performance between options (a) and
(b) as outlined below?

Rgs,
Joel

-----Original Message-----
From: Ganesh <emailgane@yahoo.co.in>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org, rolarenfan@earthlink.net
Subject: Re: what's the best practice for getting "next page" of hits?
Date: Thu, 19 Feb 2009 10:48:02 +0530

Your solution (b) is better rather than using your own way of paging.

Do search for every page and collect the (pageno * count) results, discard 
(pageno-1 * count) and display the last count results to the User. This is 
fast and efficient.

Regards
Ganesh

----- Original Message ----- 
From: <rolarenfan@earthlink.net>
To: <java-user@lucene.apache.org>
Sent: Thursday, February 19, 2009 8:59 AM
Subject: what's the best practice for getting "next page" of hits?


> R2.4
>
> So, I may well be missing something here, but: I use
>
> <pseudoCode>IndexSearcher.search(someQuery, null, count, new 
> Sort());</pseudoCode>
>
> to get an instance of TopFieldDocs (the "Hits" is deprecated). So far, all 
> fine; I get a bunch of documents. Now, what is the Lucene-best-practice 
> for getting the *next* batch of size "count"? (Didn't see this discussed 
> anywhere, but maybe I missed it.)
>
> a) I could guess that my users will never want more than "N*count", for 
> some value of N, request that right up front, and do all my own "paging" 
> using the one TopFieldDocs instance;
>
> b) I could assume that (a) will be an inefficient memory and time hog, and 
> when the user clicks "Next" (or whatever), then ... (with i starting at 
> "1") get a new TopFieldDocs with "(++i)*count", and out of that discard 
> the first "i*count" items? In the limit (as i => N) that uses up just as 
> much space and memory, but does so lazily (better);
>
> c) some compromise of (a) and (b), where I get M*count, do my own paging, 
> and when the user asks for the (i+1)==(M+1)-th batch, then get another 
> M*count (maybe faster, but also maybe bigger amortized memory footprint);
>
> d) something else? (I'd hope for something like a search() method with 
> some parameter saying, in effect, "such and such a range of hits" ...)
>
> thanks,
> Paul
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 10:04:26 2009
Return-Path: <java-user-return-38601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99193 invoked from network); 19 Feb 2009 10:04:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 10:04:26 -0000
Received: (qmail 77732 invoked by uid 500); 19 Feb 2009 10:04:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77693 invoked by uid 500); 19 Feb 2009 10:04:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77682 invoked by uid 99); 19 Feb 2009 10:04:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 02:04:17 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 10:04:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1La5ky-000792-3r
	for java-user@lucene.apache.org; Thu, 19 Feb 2009 02:03:48 -0800
Message-ID: <22097226.post@talk.nabble.com>
Date: Thu, 19 Feb 2009 02:03:48 -0800 (PST)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Incremental search, CachingWrapperFilter and BooleanFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all

I implemented an autocomplete functionality, which is pretty classical: a
user types in some words in an input field, and sees a list of matches in a
drop-down.

I've done it using filters (BooleanFilter, and TermsFilter + PrefixFilter),
and it's working against and index (loaded in RAM) with 3+ mio documents
with avg. time of 150-300 ms. 

The resulting filter instance looks like:

termsFilter + termsFilter + prefixFilter (the right part is left *open*)

Now I wanna try optimizing the whole thing by providing a possibility of
incremental search with the caching of a previous filter's results with
CachingWrapperFilter. 

AFAIK, you cannot modify a CWF, once it's filled. 

How a following scenario can be implemented?

- a user types 'aaa bbb' in, then adds 'ccc'. How to cache results of 'aaa
bbb' and the apply 'ccc'-filter to it and cache the new filter again?

Thanks
-- 
View this message in context: http://www.nabble.com/Incremental-search%2C-CachingWrapperFilter-and-BooleanFilter-tp22097226p22097226.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 10:54:58 2009
Return-Path: <java-user-return-38602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18742 invoked from network); 19 Feb 2009 10:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 10:54:58 -0000
Received: (qmail 33034 invoked by uid 500); 19 Feb 2009 10:54:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33005 invoked by uid 500); 19 Feb 2009 10:54:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32991 invoked by uid 99); 19 Feb 2009 10:54:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 02:54:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.83.156.232] (HELO lnx503.hrz.tu-darmstadt.de) (130.83.156.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 10:54:41 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx503.hrz.tu-darmstadt.de (8.13.8/8.13.8/HRZ/PMX) with ESMTP id n1JAsLYf002275
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 11:54:21 +0100
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Analyse TermQuery and PhraseQuery 
Date: Thu, 19 Feb 2009 11:54:20 +0100
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7207@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Analyse TermQuery and PhraseQuery 
Thread-Index: AcmSgGsoRfKxMwFbTwKBY36pi5VR5w==
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX: seen v0.51
X-PMX-SPAMCHECK: outgoing mail: not checked
X-Virus-Checked: Checked by ClamAV on apache.org



Hello,

String ws =3D " ";
String query =3D =
"The"+ws+"president"+ws+"of"+ws+"the"+ws+"USA"+ws+"is"+ws+""\Barak =
Obama\"";
Query q =3D QueryParser.parse(query, new StandardAnalyser());
Query q =3D QueryParser.parse(query, new WhitespaceAnalyser());


In this example:
- could we create a query in such a format (combine terms and phrases)?
- what will be the result of the analysis?
- what should I do to get this hits {president, USA, Barak Obama}? =20


Thank you for help.

Best=20
Nada

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 11:10:15 2009
Return-Path: <java-user-return-38603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20849 invoked from network); 19 Feb 2009 11:10:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 11:10:15 -0000
Received: (qmail 41740 invoked by uid 500); 19 Feb 2009 11:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41696 invoked by uid 500); 19 Feb 2009 11:10:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41685 invoked by uid 99); 19 Feb 2009 11:10:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 03:10:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of seidymam@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 11:10:00 +0000
Received: by fk-out-0910.google.com with SMTP id f33so300691fkf.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 03:09:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=zWOayz32bIfg8oA63NkURnmB2xM47oSH+jqfxiWDzq0=;
        b=cB2d6YWWJdrNwsPCJWimnUrtNLKmaABxkCL+a8KjdGqSP0n2gdQFFQ3BEHbZTdAhdY
         MstkqGqcG6dWw3xz/gfitkKQpuXdutG8K6PPOLg6uZaWgX8IgYWEn6tqH19Uw6JFuTxT
         4L54IuB5QkSDKwuQrn39BXQwxW0hwAQfPCH38=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=haL8ZwiwkVouGOeHVuOIT9tw0oD0w8rlpT+zFm/H726YHG1W3riDlhUCDd1zSRyffU
         I4FsSypfWaalsYX4c0LUtpkcIV7TIXmsq67GUaZaUWlSywg+PUw4RFebMr3NA6KJUFz+
         zTw6jU1h81Rab7+9SMtndbDqA0xWT7An5EOII=
MIME-Version: 1.0
Received: by 10.181.137.17 with SMTP id p17mr821660bkn.193.1235041778350; Thu, 
	19 Feb 2009 03:09:38 -0800 (PST)
Date: Thu, 19 Feb 2009 14:09:38 +0300
Message-ID: <179b305e0902190309v31a06e8fya227368ba136f4f6@mail.gmail.com>
Subject: Index Structure
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am new to lucene, and reading lucene in action book
sometimes, i better understand when somone tell me an answer than a book.
my queston is
when indexing, what actually lucene is doing?
if i have a file called test.txt  with contents " lucen is used to
index files" and i apply lucene indexing, what is the content of the
index and  what is the structure of the index?.

and if i apply lucene search, for example a query "index files", from
where lucene searches, from the index or from the test.index file

thanks a lot
seid m


-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 11:17:49 2009
Return-Path: <java-user-return-38604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23842 invoked from network); 19 Feb 2009 11:17:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 11:17:48 -0000
Received: (qmail 54985 invoked by uid 500); 19 Feb 2009 11:17:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54806 invoked by uid 500); 19 Feb 2009 11:17:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54765 invoked by uid 99); 19 Feb 2009 11:17:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 03:17:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of seidymam@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 11:17:36 +0000
Received: by bwz11 with SMTP id 11so945698bwz.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 03:17:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=CGTNbU4tft2ig+SLxgBc8MqCZMvCRvdlWSWZvAnSM5g=;
        b=twz5aonBqlGJo3YvLcaPSGDGHwTrkXfu8j3cUkUEVYeb4fraqHW0X4hvHqLI0GDqEa
         pkxH11jY8ebEl/e1QHplHoUIsv7aCr0wvdCP9JNmGjI15umV3NFZBrJVyOrCrmB3GlhS
         wewsvvEmOcJmDSvVxkXk52Yn5mx0K9/F/9k9A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=mWds0FDQzIfsL258jYgYqO/UEmOH0xSqPc4U8CggYnmRidpvPYLd0ac5sLdQbRWzVu
         NjNdyh3mmKJpnH9ZM3IE1WJyDIIb4TJslU7YYRFvXNj078c7IItk1taf9SA6Led3wNRM
         WAqt8BNuUGgLmElOh/gpaauJrSgaVjkd4BhpA=
MIME-Version: 1.0
Received: by 10.181.33.8 with SMTP id l8mr41856bkj.155.1235042235662; Thu, 19 
	Feb 2009 03:17:15 -0800 (PST)
Date: Thu, 19 Feb 2009 14:17:15 +0300
Message-ID: <179b305e0902190317r6c89f9a2y21ddf61034907d5e@mail.gmail.com>
Subject: lucene index details
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am new to lucene, and reading lucene in action book
sometimes, i better understand when somone tell me an answer than a book.
my queston is
when indexing, what actually lucene is doing?
if i have a file called test.txt  with contents " lucen is used to
index files" and i apply lucene indexing, what is the content of the
index and  what is the structure of the index?.

and if i apply lucene search, for example a query "index files", from
where lucene searches, from the index or from the test.index file

thanks a lot
seid m

-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 11:24:18 2009
Return-Path: <java-user-return-38605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25379 invoked from network); 19 Feb 2009 11:24:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 11:24:18 -0000
Received: (qmail 66382 invoked by uid 500); 19 Feb 2009 11:24:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66345 invoked by uid 500); 19 Feb 2009 11:24:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66333 invoked by uid 99); 19 Feb 2009 11:24:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 03:24:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.83.156.225] (HELO lnx500.hrz.tu-darmstadt.de) (130.83.156.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 11:23:58 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx500.hrz.tu-darmstadt.de (8.13.8/8.13.8/HRZ/PMX) with ESMTP id n1JBNc9P016312
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 12:23:38 +0100
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C99284.829DA8E7"
Subject: RE: Index Structure
Date: Thu, 19 Feb 2009 12:23:38 +0100
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7208@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7208@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Thread-Topic: Index Structure
Thread-Index: AcmSgqPx0NIlKdgwSbqV9HwqK9H/yAAAED6/
References: <179b305e0902190309v31a06e8fya227368ba136f4f6@mail.gmail.com>
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX: seen v0.51
X-PMX-SPAMCHECK: outgoing mail: not checked
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C99284.829DA8E7
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hello,

When indexing Lucene generates terms from your original text.

To see the content and the structure of the index, use "Luke" which is a =
Lucene index toolbox.
You can download it here :  http://www.getopt.org/luke/
There is a detailed description of this tool (with pretty screen-shots) =
in : "Lucene in Action" book, section 8.2.2.

Best
Nada

-----Original Message-----
From: Seid Mohammed [mailto:seidymam@gmail.com]
Sent: Thu 2/19/2009 12:09 PM
To: java-user@lucene.apache.org
Subject: Index Structure
=20
I am new to lucene, and reading lucene in action book
sometimes, i better understand when somone tell me an answer than a =
book.
my queston is
when indexing, what actually lucene is doing?
if i have a file called test.txt  with contents " lucen is used to
index files" and i apply lucene indexing, what is the content of the
index and  what is the structure of the index?.

and if i apply lucene search, for example a query "index files", from
where lucene searches, from the index or from the test.index file

thanks a lot
seid m


--=20
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C99284.829DA8E7
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C99284.829DA8E7--

From java-user-return-38606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 11:54:27 2009
Return-Path: <java-user-return-38606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31730 invoked from network); 19 Feb 2009 11:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 11:54:27 -0000
Received: (qmail 2501 invoked by uid 500); 19 Feb 2009 11:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2464 invoked by uid 500); 19 Feb 2009 11:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2453 invoked by uid 99); 19 Feb 2009 11:54:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 03:54:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [79.170.194.127] (HELO mail.roo10.com) (79.170.194.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 11:54:11 +0000
Received: from [192.168.60.45] (78-105-13-3.dsl.cnl.uk.net [78.105.13.3])
	by mail.roo10.com (Postfix) with ESMTP id DA881461021A
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 11:53:47 +0000 (GMT)
Subject: Filters - at what stage are they applied?
From: Joel Halbert <joel@su3analytics.com>
To: Lucene Users <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: SU3 Analytics
Date: Thu, 19 Feb 2009 11:53:47 +0000
Message-Id: <1235044427.9070.3.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

By way of clarification, when a filter is used with a search query, is
the filter applied only to documents that matched the search query or is
it applied to all documents in the index before the query is executed?

Rgs,

Joel



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 12:03:26 2009
Return-Path: <java-user-return-38607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34952 invoked from network); 19 Feb 2009 12:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 12:03:26 -0000
Received: (qmail 15408 invoked by uid 500); 19 Feb 2009 12:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15375 invoked by uid 500); 19 Feb 2009 12:03:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15364 invoked by uid 99); 19 Feb 2009 12:03:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 04:03:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of seidymam@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 12:03:10 +0000
Received: by bwz11 with SMTP id 11so1007936bwz.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 04:02:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=IhMpGn7NNaVjgbdbPEBRkNn4MzBca5/qCUcIHvWMTjg=;
        b=ly8MoXfK0gowEvV1c/mrSxJZR/9EufXLxg+pX9Fl3rx61IsBeC8fUCBJTFnPMnR/Fj
         mPhamWkRUToQj7kMDe+wkJwpmSEhpHNCtKiaj3ai0ZqYWfklwFYl8ucQyDEVblZBOCgL
         PVyXC77D9WTES0rKbaZmhT3KaZFlAcMEBOjs8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=QkOwnY5J4QFJDiEEbQyRmsKBebvdKeuUWb1OXfM4x/5tLF3pSNIL1pUe0A7SRP4i1r
         Nna8Kpn+TAMsN3EkLq1U15FjXJZBzMxRP0ySN44WC7qwtLSqW/xOA6kC2NVygg/WOvGv
         Rw9RkcuSDsWKTT6W8/js55RlyBR2aJTsVzvIo=
MIME-Version: 1.0
Received: by 10.181.192.11 with SMTP id u11mr3192044bkp.50.1235044969411; Thu, 
	19 Feb 2009 04:02:49 -0800 (PST)
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7208@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
References: <179b305e0902190309v31a06e8fya227368ba136f4f6@mail.gmail.com>
	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7208@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Date: Thu, 19 Feb 2009 15:02:49 +0300
Message-ID: <179b305e0902190402i170abc59p26d14459bfbcdd75@mail.gmail.com>
Subject: Re: Index Structure
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

great,
I have got it
do luke support unicode? I am trying lucene in non-english languaguage

thanks a lot
seid m

On 2/19/09, Nada Mimouni <mimouni@tk.informatik.tu-darmstadt.de> wrote:
>
> Hello,
>
> When indexing Lucene generates terms from your original text.
>
> To see the content and the structure of the index, use "Luke" which is a
> Lucene index toolbox.
> You can download it here :  http://www.getopt.org/luke/
> There is a detailed description of this tool (with pretty screen-shots) in :
> "Lucene in Action" book, section 8.2.2.
>
> Best
> Nada
>
> -----Original Message-----
> From: Seid Mohammed [mailto:seidymam@gmail.com]
> Sent: Thu 2/19/2009 12:09 PM
> To: java-user@lucene.apache.org
> Subject: Index Structure
>
> I am new to lucene, and reading lucene in action book
> sometimes, i better understand when somone tell me an answer than a book.
> my queston is
> when indexing, what actually lucene is doing?
> if i have a file called test.txt  with contents " lucen is used to
> index files" and i apply lucene indexing, what is the content of the
> index and  what is the structure of the index?.
>
> and if i apply lucene search, for example a query "index files", from
> where lucene searches, from the index or from the test.index file
>
> thanks a lot
> seid m
>
>
> --
> "RABI ZIDNI ILMA"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>


-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 12:08:24 2009
Return-Path: <java-user-return-38608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35936 invoked from network); 19 Feb 2009 12:08:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 12:08:24 -0000
Received: (qmail 21809 invoked by uid 500); 19 Feb 2009 12:08:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21777 invoked by uid 500); 19 Feb 2009 12:08:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21766 invoked by uid 99); 19 Feb 2009 12:08:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 04:08:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 12:08:09 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id D77D4109F28
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 04:07:47 -0800 (PST)
Message-Id: <3073AABA-B60E-4F28-A11B-E7AA187C2CBC@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7207@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Analyse TermQuery and PhraseQuery 
Date: Thu, 19 Feb 2009 07:07:46 -0500
References: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7207@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 19, 2009, at 5:54 AM, Nada Mimouni wrote:

>
>
> Hello,
>
> String ws = " ";
> String query = "The"+ws+"president"+ws+"of"+ws+"the"+ws+"USA"+ws 
> +"is"+ws+""\Barak Obama\"";
> Query q = QueryParser.parse(query, new StandardAnalyser());
> Query q = QueryParser.parse(query, new WhitespaceAnalyser());
>
>
> In this example:
> - could we create a query in such a format (combine terms and  
> phrases)?

Sure, why not try it?  Is it not working?

>
> - what will be the result of the analysis?

Instead of telling you the answer, I'm going to suggest you add:

System.out.println("Query: " + q);

after each of the parses and take a look at what gets printed.  That  
should tell you what you need to know.


>
> - what should I do to get this hits {president, USA, Barak Obama}?
>

You should have documents that contain the two words, plus the phrase.

I guess the question back is, do you know you have those documents and  
are not getting results?

Or, are you asking how to submit and run the query?  If that is the  
case, have a look at http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/Getting-Started-with-Lucene/


Cheers,
Grant

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 12:20:05 2009
Return-Path: <java-user-return-38609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39009 invoked from network); 19 Feb 2009 12:20:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 12:20:04 -0000
Received: (qmail 39714 invoked by uid 500); 19 Feb 2009 12:19:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39688 invoked by uid 500); 19 Feb 2009 12:19:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39663 invoked by uid 99); 19 Feb 2009 12:19:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 04:19:58 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.162.177 as permitted sender)
Received: from [209.85.162.177] (HELO el-out-1112.google.com) (209.85.162.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 12:19:49 +0000
Received: by el-out-1112.google.com with SMTP id s27so168494ele.14
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 04:19:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=9KzMd2ua4VrfnzoL4RCSh3BeziriQdcG5dD3RdHndRY=;
        b=ODqQqccDvqlYRJTreRIuEhzOGKg+b+kjrQdmSbuLGn3/j38vjq8wxQzDYB+mj8mtFB
         kFzz8Ho+K2YK59Hs5IHTGSJ8KuYCSCIK6pMyFnBh2DeRT64gvP7bca4wLDkj3gTp/Tf2
         +uCVA9NOQPegTRNaAeNdzTgoROhrGwmPNm+ak=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=VVVIiN6Ue68ox2GgnMVnTibMyCJa8LG3E1gRU4tQ0XwaUrCbe+K0Hltr7iVaFLLTKa
         atAnsfyx92RC9IcisIjEmrAKI2v6YYbFktSAIgwjXiLPYYIGqqHd17SHar6THi1SJ8eX
         EFgBiL4fgDZo3vt4vdzXi3W43m+HqIduKRprM=
MIME-Version: 1.0
Received: by 10.220.84.20 with SMTP id h20mr2127171vcl.60.1235045968384; Thu, 
	19 Feb 2009 04:19:28 -0800 (PST)
Date: Thu, 19 Feb 2009 08:19:28 -0400
Message-ID: <5d53d5770902190419g1b118a9emde06d608956afa8e@mail.gmail.com>
Subject: "Near" force in query server side?
From: Ian Vink <ianvink@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630fd293a12e60463448c6b
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630fd293a12e60463448c6b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Once my app gets the query string from the user, is there a way to tell the
query engine to only return documents where these words are at most 5 words
apart? I can't tell the user to change their query, I have to do it server
side.
Is so do I have to add anything to my index to let Lucene know about
positions of the terms when it indexes?

Thanks,
Ian Vink
http://BahaiResearch.com

--00163630fd293a12e60463448c6b--

From java-user-return-38610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 12:29:14 2009
Return-Path: <java-user-return-38610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42942 invoked from network); 19 Feb 2009 12:29:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 12:29:14 -0000
Received: (qmail 60781 invoked by uid 500); 19 Feb 2009 12:29:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60755 invoked by uid 500); 19 Feb 2009 12:29:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60744 invoked by uid 99); 19 Feb 2009 12:29:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 04:29:08 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 12:28:58 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id B9CBE5B4EF
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 04:28:35 -0800 (PST)
Message-Id: <E0A2CF94-1947-480A-B8E8-971074F0CA55@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770902190419g1b118a9emde06d608956afa8e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: "Near" force in query server side?
Date: Thu, 19 Feb 2009 07:28:34 -0500
References: <5d53d5770902190419g1b118a9emde06d608956afa8e@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

You will likely need to create n-grams from the user query and from  
that construct a sloppy PhraseQuery.

There is an n-gram Filter in the contrib/analysis package (I think it  
is called the ShingleFilter)


On Feb 19, 2009, at 7:19 AM, Ian Vink wrote:

> Once my app gets the query string from the user, is there a way to  
> tell the
> query engine to only return documents where these words are at most  
> 5 words
> apart? I can't tell the user to change their query, I have to do it  
> server
> side.
> Is so do I have to add anything to my index to let Lucene know about
> positions of the terms when it indexes?
>
> Thanks,
> Ian Vink
> http://BahaiResearch.com

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 13:26:01 2009
Return-Path: <java-user-return-38611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64621 invoked from network); 19 Feb 2009 13:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 13:26:01 -0000
Received: (qmail 38270 invoked by uid 500); 19 Feb 2009 13:25:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38238 invoked by uid 500); 19 Feb 2009 13:25:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38226 invoked by uid 99); 19 Feb 2009 13:25:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:25:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of christian.brennsteiner@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 13:25:47 +0000
Received: by bwz11 with SMTP id 11so1122022bwz.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 05:25:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:in-reply-to
         :references:date:x-google-sender-auth:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=wsHyygv3tcMasvSo4SSThWHLwQnP4wBiv5M0HhDh9QA=;
        b=K6nW6aeCInIcPmFvh6viC+PDHJ/YffUFb4uU934YSQDtsFOv1kzfXMaoebFxBmv750
         tN5jlilcW0/NFkgdOMHDueFtkF4Dstl7wAVrTC+1nvYziRCqawG+S0LtLivesL1BWUKZ
         qcp37ny+cknQS+Gl3t3sGEmJ/7wKw9cmo5y74=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=Twp7UVtPMq/BPXWUId3K3yaLQEs0QirJ0h06tUA0dMS+Ul/omxxv/KLSzUuGgwIm59
         DIaqe4CtXstBGP/Kr9WNPMwzwzEgo5YC+V5oLYz90gXZCQt4B6G1c3RxY9KqsvkAvgQw
         WzaAR+0WWDI7mpRJ6Uy4e6Mt0Y91KhPqTub2E=
MIME-Version: 1.0
Sender: christian.brennsteiner@gmail.com
Received: by 10.181.199.6 with SMTP id b6mr1144477bkq.137.1235049925748; Thu, 
	19 Feb 2009 05:25:25 -0800 (PST)
In-Reply-To: <359a92830902180838k4d59a068lfef5564038e5c434@mail.gmail.com>
References: <6ef902470902180720v6473bc20m8aa84c1a01d147d7@mail.gmail.com>
	 <359a92830902180838k4d59a068lfef5564038e5c434@mail.gmail.com>
Date: Thu, 19 Feb 2009 14:25:25 +0100
X-Google-Sender-Auth: ef719e198e2c2be7
Message-ID: <6ef902470902190525v4a9fc0eem4e5c5d4f3d65484a@mail.gmail.com>
Subject: Re: stream of events never to know when it ends? how to index such 
	things & search
From: Christian Brennsteiner <christian@brennsteiner.at>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hi erick,

nr of events are 107/sec in average with 400/sec peak and 20/sec low.
between searchable should be less than 20 minutes. we are planning to
index IN RAM only for a duration of one day MAX. per lucene process on
the operating system.

currently we need 500 M RAM for indexing one day (just storing the
eventids and indexing (without storing) highly redundant event
descriptions. collecting all eventdescriptions costs us additionally
3G ram (which is very much :-( for us.)

@PositionIncrementGap or SpanQueries or the proximity operator ...
sorry i am bloody beginner i don't really kow what you are talking
about.

a real update would be perfect... but i think from the current design
it is not possible to extract all unstemmed keywords from a HIT? or is
this possible?
update then would be:

search eventid
get hits (should be one)
extract all keywords from hit
add new information plus hits newly to the index
delete the hit.

is there a possibility to gather detailed information about the index
itself, that i can give you a detailed idea how big / and in which
condition it is?

regards chris





On Wed, Feb 18, 2009 at 5:38 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> You could always sort by EVENTID, that way at least
> you'd have all the events for a particular ID together
> in your results. You'd have to post-filter the results to
> determine whether all the necessary descriptions were
> present. But I don't think this works all that well because,
> as you pointed out, you may have a lot of records to
> sort through so I don't think this is a very good idea...
>
>
>
> How many events are we talking about here and what
> kind of lag between an event and being able to search it
> can you tolerate? I guess what I'm really asking is whether
> it's possible to recreate your index "often enough" to
> satisfy your users. If so, you can index multiple
> descriptions in a single document, something like
>
> doc.add("EVENTDESCRIPTION", "STARTING EVENT")
> doc.add("EVENTDESCRIPTION", "XYZ")
> doc.add("EVENTDESCRIPTION", "ABC")
> doc.add("EVENTID", "1")
> IndexWriter.addDocument(doc);
>
>
> You'd have to gather all the descriptions related
> to each EVENTID before you were able to index the doc.....
>
> By manipulating the PositionIncrementGap you could also
> keep searches from matching across different EVENTDESCRIPTIONs,
> e.g. if you didn't want to match +STARTING +ABC you could use
> SpanQueries or the proximity operator, but going into details
> depends upon whether you can rebuild your index so we'll defer
> that part....
>
> You could also think about updating the document when new events
> were added, but since an update is really a delete/add under the
> covers you'd have to either gather enough information from what I
> assume is your log or store enough information with the document to
> recreate it.
>
> How big is your index currently and what kind of throughput do you
> require?
>
> Best
> Erick
>
>
> On Wed, Feb 18, 2009 at 10:20 AM, Christian Brennsteiner <
> christian@brennsteiner.at> wrote:
>
>> dear lucene community,
>>
>> i am playing around with lucene right now. and have come to very bad
>> problem.
>>
>> given environment:
>>
>> a signal source gives signals with eventids ans eventdescriptions
>>
>> for example EVENTID=1 and EVENTDESCRIPTION="STARTING EVENT"
>>
>> those events can be running very long (e.g. one month) during this
>> period we will receive for example
>>
>> EVENTID=1 and EVENTDESCRIPTION="EXECUTING XYZ"
>> 10 minutes later
>> EVENTID=1 and EVENTDESCRIPTION="EXECUTING YZA"
>> 10 minutes later
>> EVENTID=1 and EVENTDESCRIPTION="PASSED MILESTONE1"
>> 10 minutes later
>> EVENTID=1 and EVENTDESCRIPTION="EXECUTING ZAB"
>>
>> after e.g. 1 week we receive
>> EVENTID=1 and EVENTDESCRIPTION="STOPING EVENT"
>>
>> what i want:
>> i want to be able to search e.g. which eventids are connected to "XYZ"
>> AND "ZAB" AND have already passed "MILESTONE1"
>>
>> so my current try is to index all events by full indexing (without
>> storing) eventdescriptions AND stemming e.g. EXECUTING
>>
>> then searching for "+XYZ +ZAB +MILESTONE1"
>> --> result no document since those are all seperated documents
>> when i search
>>  "XYZ ZAB MILESTONE1"
>> i am getting 3 times EVENTID 3
>> --> this is bad since when i get 1000000 of such events how do i rank them?
>>
>> CONCLUSION:
>> my biggest problem is that my lucene document given to the index
>> currently is not in a final state BUT i have to index and search it
>> also while it is in progress.
>> as a result of this the ranking as i do it now has no real value since
>> the ranking is just based on a "line of a whole event"
>>
>> QUESTION:
>> is there a solution within lucene to combine search results? e.g. merge
>> them OR
>> is there a better workaround how i would do such updates to the index
>> without storing the original docmuent inside the index (since this
>> consumes so many space)? e.g. extracting the keywords that were stored
>> for the item?
>>
>> any hints appreciated.
>>
>> regards chris
>>
>>
>> ----------
>> Christian Brennsteiner
>> Salzburg / Austria / Europe
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



-- 
----------
Christian Brennsteiner
Salzburg / Austria / Europe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 13:30:23 2009
Return-Path: <java-user-return-38612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67362 invoked from network); 19 Feb 2009 13:30:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 13:30:23 -0000
Received: (qmail 42280 invoked by uid 500); 19 Feb 2009 13:30:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42248 invoked by uid 500); 19 Feb 2009 13:30:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42237 invoked by uid 99); 19 Feb 2009 13:30:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:30:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of seidymam@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 13:30:09 +0000
Received: by bwz11 with SMTP id 11so1127961bwz.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 05:29:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=KYP6aSgjeQm9XDybnK2ql7n27iHKpH8KeIORngpNIHo=;
        b=G4Si7Kjl61ogBuca6wAm6dxjwER4Xr5VuKDOShxAEWDJoL/RJmawrX87cuUw/TE4XY
         IAFjIfAb3ZS/R1vJ9+JyzhCRY5Fa5mD/AJz8GvpZijN8d5tKbFbeQGDvEG5hbfoeCZcV
         MgUbUZ9v39Dw/r3Du7xcqnj2T08EpJ19IoL+s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=XHP3y9afbSfxPBQcMwLi41dRNOlTppWHjp1VM+OXUNOUZ3oHUnB57YP+PUy5saTGca
         +/m4yCyM/CHfMmxGRq251gfgv8mNhFrs3qW87FE1U10OkcjfLVZxV5tt97xaOPAZs0Sb
         fE9g1dlR4myXIjtjpzvYUZAqKbt8sr6utKuLY=
MIME-Version: 1.0
Received: by 10.181.137.17 with SMTP id p17mr886574bkn.163.1235050188938; Thu, 
	19 Feb 2009 05:29:48 -0800 (PST)
Date: Thu, 19 Feb 2009 16:29:48 +0300
Message-ID: <179b305e0902190529t496463f9jd43aa91e06928445@mail.gmail.com>
Subject: searching a sentence or paragraph
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

from lucen index, how can we search a sentence or a paragraph which
satisfy our query?

thanks a lot
seid m
-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 13:38:05 2009
Return-Path: <java-user-return-38613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72779 invoked from network); 19 Feb 2009 13:38:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 13:38:05 -0000
Received: (qmail 54505 invoked by uid 500); 19 Feb 2009 13:37:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54478 invoked by uid 500); 19 Feb 2009 13:37:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54079 invoked by uid 99); 19 Feb 2009 13:37:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:37:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.83.156.225] (HELO lnx500.hrz.tu-darmstadt.de) (130.83.156.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 13:37:44 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx500.hrz.tu-darmstadt.de (8.13.8/8.13.8/HRZ/PMX) with ESMTP id n1JDbNQW017405
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 14:37:23 +0100
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C99297.321C2D57"
Subject: RE: searching a sentence or paragraph
Date: Thu, 19 Feb 2009 14:35:01 +0100
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE720B@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE720B@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Thread-Topic: searching a sentence or paragraph
Thread-Index: AcmSljhHWwvLK+3ARhqTaezTzsNyYQAAKV1B
References: <179b305e0902190529t496463f9jd43aa91e06928445@mail.gmail.com>
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX: seen v0.51
X-PMX-SPAMCHECK: outgoing mail: not checked
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C99297.321C2D57
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable




You need to create a TermQuery or PhraseQuery with terms in your query =
depending on what result you need exactly.=20

To create PhraseQuery, try the built-in phrase processing with double =
quotes, e.g.
"this is a phrase".

See the Term section at
http://lucene.apache.org/java/2_4_0/queryparsersyntax.html

You can also have a look  at =
http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/=
Getting-Started-with-Lucene/=20

Best
Nada


-----Original Message-----
From: Seid Mohammed [mailto:seidymam@gmail.com]
Sent: Thu 2/19/2009 2:29 PM
To: java-user@lucene.apache.org
Subject: searching a sentence or paragraph
=20
from lucen index, how can we search a sentence or a paragraph which
satisfy our query?

thanks a lot
seid m
--=20
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C99297.321C2D57
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C99297.321C2D57--

From java-user-return-38614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 13:39:08 2009
Return-Path: <java-user-return-38614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73730 invoked from network); 19 Feb 2009 13:39:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 13:39:08 -0000
Received: (qmail 60848 invoked by uid 500); 19 Feb 2009 13:39:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60824 invoked by uid 500); 19 Feb 2009 13:39:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60809 invoked by uid 99); 19 Feb 2009 13:39:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:39:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 13:38:52 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id 4E73667BE4
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 22:38:31 +0900 (JST)
Message-ID: <499D60D5.30007@r.email.ne.jp>
Date: Thu, 19 Feb 2009 22:38:29 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index Structure
References: <179b305e0902190309v31a06e8fya227368ba136f4f6@mail.gmail.com>	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7208@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de> <179b305e0902190402i170abc59p26d14459bfbcdd75@mail.gmail.com>
In-Reply-To: <179b305e0902190402i170abc59p26d14459bfbcdd75@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Seid Mohammed wrote:
> great,
> I have got it
> do luke support unicode? I am trying lucene in non-english languaguage
>
>   
Of course. I can see Japanese terms without problems.

Koji



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 13:43:16 2009
Return-Path: <java-user-return-38615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76242 invoked from network); 19 Feb 2009 13:43:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 13:43:16 -0000
Received: (qmail 68709 invoked by uid 500); 19 Feb 2009 13:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68677 invoked by uid 500); 19 Feb 2009 13:43:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68666 invoked by uid 99); 19 Feb 2009 13:43:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:43:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of seidymam@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 13:43:02 +0000
Received: by bwz11 with SMTP id 11so1146056bwz.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 05:42:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=gThWRCtDw0a0zt7WRIL+wq3lnfctFu5I82jg3sFvJXQ=;
        b=ZWDMZ+C0m6r9cu4GOHl1w3IvT+9YS7fWgo68FP+8XHVRGHMY/gajnRm8iYKmLZUR/u
         eA0WucdH93vxp6TcGmbgNwAHPe+emXMvWtnNw6hCJR4mJ+0USYmMh8cMBsHJ7RGEtXid
         wTMTAjCY0+TK9iiOB1jgzU1LEflJmcyfUrN34=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=iuLrc7JnI3gM1GYO2yCmci6gIBj5vryQxyPzrtbw5C7cWk1wJyUUmRuqyKXwqoAx1m
         Mm6mfumRK97O9yI09eMRLvJM72yxQhyaJNkCMiNIDOckTsfRii81Y5mQLuGluhrFPxnw
         KSBkjTcksI62/IlDgjUocwU1cBGtomCy3EtGM=
MIME-Version: 1.0
Received: by 10.181.218.10 with SMTP id v10mr226467bkq.2.1235050961321; Thu, 
	19 Feb 2009 05:42:41 -0800 (PST)
In-Reply-To: <499D60D5.30007@r.email.ne.jp>
References: <179b305e0902190309v31a06e8fya227368ba136f4f6@mail.gmail.com>
	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7208@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
	 <179b305e0902190402i170abc59p26d14459bfbcdd75@mail.gmail.com>
	 <499D60D5.30007@r.email.ne.jp>
Date: Thu, 19 Feb 2009 16:42:41 +0300
Message-ID: <179b305e0902190542l70243613w86beabea8b4b47f0@mail.gmail.com>
Subject: Re: Index Structure
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have trioed Amharic fonts, it displays square like character, may be
there is a kind of setting for it?

Seid M

On 2/19/09, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
> Seid Mohammed wrote:
>> great,
>> I have got it
>> do luke support unicode? I am trying lucene in non-english languaguage
>>
>>
> Of course. I can see Japanese terms without problems.
>
> Koji
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 13:54:58 2009
Return-Path: <java-user-return-38616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85459 invoked from network); 19 Feb 2009 13:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 13:54:58 -0000
Received: (qmail 95673 invoked by uid 500); 19 Feb 2009 13:54:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95646 invoked by uid 500); 19 Feb 2009 13:54:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95635 invoked by uid 99); 19 Feb 2009 13:54:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:54:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 13:54:43 +0000
Received: by rv-out-0506.google.com with SMTP id k40so605129rvb.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 05:54:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=nvb5pvcI4x6hNCoGHBmWRhLjOVFAkldPhgfaS3qqXwo=;
        b=r/Fn7pJG0wLQeWOpoyX7PDK/8BSKpeTFiDCdJfa4dTbxe/VO9E7dqB0lT8Rk2aZB8A
         BWolBlW0bHsPfp3byxDwa8y+ejjE5zGxQk+4HejIlmFpRfmzPlFlpDBuDXpI+u3ENtZl
         PpEbLnp3R5qp0/T9TUs5mjOH/PzONzPNSQjYA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=j/uHdL13fkKOh8X0YJaWISqWtfC2Jp+DIQsoS/MXCQwIO6OExSqm0x0vsIcRV/2AaG
         57GHSWhBcv0oOkVZbxf0b0Y89nQBulwki4E1A21xsM3Cm6RkHOnGtyuvv4xzff8kny87
         af7PHMFj43Iua8YqKac8tWQZHF3S1sP1D/k+c=
MIME-Version: 1.0
Received: by 10.141.142.15 with SMTP id u15mr4645387rvn.16.1235051663307; Thu, 
	19 Feb 2009 05:54:23 -0800 (PST)
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7205@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
References: <499BE497.2060103@mapmyindia.com>
	 <18248.30864.qm@web26005.mail.ukl.yahoo.com>
	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
	 <359a92830902180510l51f85fe0p8075b4f2d5fc381e@mail.gmail.com>
	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7201@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
	 <359a92830902180624v3dc8be06ob673fe8537e4c7be@mail.gmail.com>
	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7205@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Date: Thu, 19 Feb 2009 08:54:23 -0500
Message-ID: <359a92830902190554g5c943903t4fdf70b364573be5@mail.gmail.com>
Subject: Re: Phrase indexing and searching with Lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd17220abb46d046345dfce
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd17220abb46d046345dfce
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

It looks to me like what you're trying to do is akin to document similarity,
which
I haven't had to delve into. But it's been discussed on the user list a few
times,
so perhaps your best bet would be to search the mail archives for that
topic.

Best
Erick

On Thu, Feb 19, 2009 at 3:14 AM, Nada Mimouni <
mimouni@tk.informatik.tu-darmstadt.de> wrote:

>
> Hello,
>
> Thank you Erick for this detailed answer, that makes things clearer in my
> mind.
>
> >I'm still not clear why the built-in phrase query syntax won't work.
>
> I have programmed a set of java classes (I use Lucene classes) to index and
> search into a collection of documents for a set of queries.
> To test my system, I use a corpus which consists in a collection of queries
> (n queries) and documents (m documents).
> I started by creating one index for all queries and another one for all
> documents. Then I make the search to match between the queries index and
> documents index.
> I use a trec evaluation tool to generate a file that gives all hits
> (matches) between the queryID and documentID with different scores.
>
> In this first step, I just index terms, therefore the search process (as I
> have it now) looks only for term matches between the query terms and the
> documents terms.
> Now I want to get better results (better matching) by adding phrases to
> terms.
>
> I don't know exactly whether it makes a difference if I index phrases and
> terms (erick, erickson, thinks, small, thoughts, erick erickson, erickson
> thinks, small thoughts, erickson thoughts) and then search for both, or just
> keep the indexing process as it is (erick, erickson, thinks, small,
> thoughts) and then make a search for phrases (PhraseQuery : erick erickson,
> erickson thinks, small thoughts, erickson thoughts) and terms.
> Any idea?
>
>
> >Some examples of what you put in your index and what searches
> >you expect to return results for your example AND searches you do
> >NOT want to hit that document would be a great help.
>
> input:
>
> *Query*
> 898    Why is the sun bright?
>
> *Documents*
> 7568  Star, large celestial body composed of gravitationally contained hot
> gases emitting electromagnetic radiation, especially light, as a result of
> nuclear reactions inside the star. The sun is a star.
> 7567  The sun has a magnitude of -26.7, inasmuch as it is about 10 billion
> times as bright as Sirius in the earth's sky.
>
> output:
>
> qID     dID     score
> 898     7568     0,13 (not relevant)
> 898     7567     1     (relevant)
>
>
> In this example, Lucene matches document 7567 to be relevant to he query
> (since it contains all query terms), however bright here is relative to
> Sirius (what we need is to get "sun bright").
>
>
>
>
> Best
> Nada
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wed 2/18/2009 3:24 PM
> To: java-user@lucene.apache.org
> Subject: Re: Phrase indexing and searching with Lucene
>
> I'm still not clear why the built-in phrase query syntax won't work. If I
> index the following terms (erick, erickson, thinks, small, thoughts)
> in a single field, then searching for "erick erickson" (as a phrase query,
> i.e. with double quotes when sent through a query parser or constructing
> a PhraseQuery yourself) will generate a hit but "erick thinks" won't
> generate a hit (unless you specify slop).
>
> "thinks small thoughts" would also generate a hit
>
> If you're saying that you only want to match on *all* the tokens, i.e.
> the only way to get a hit on the above would be to search for
> "erick erickson thinks small thoughts", then you can create a
> field that's UN_ANALYZED. If you do this, though, beware
> that you have to do things like lower-case terms yourself when
> indexing.
>
> I have no idea what IndexTermGenerator is or what it does, but I'm
> assuming that it just generates single words.
>
> Some examples of what you put in your index and what searches
> you expect to return results for your example AND searches you do
> NOT want to hit that document would be a great help.
>
> As far as searching for both, constructing a BooleanQuery with regular
> TermQuerys and PhraseQuerys would work if you're constructing
> your queries programmatically, or just using a Lucene query
> like +termfield:word +phrasefield:"erick erickson thinks" would
> work. Or, if you just require that the phrase exists you could do
> it all in one field like
> +field:word +field:"erick erickson thinks"
>
>
>
> Best
> Erick
>
>
> On Wed, Feb 18, 2009 at 8:42 AM, Nada Mimouni <
> mimouni@tk.informatik.tu-darmstadt.de> wrote:
>
> >
> >
> > Thank you Erick.
> >
> > I need first to index phrases, the built-in phrase processing (with
> double
> > quotes) comes in the search step.
> > Is there any difference between :
> >            1) start by indexing phrases and then make a phrase search
> >            2) index terms and then search for phrases
> >
> >
> > To make things clearer:
> >
> > What I am doing now:
> >  - In the indexing step:  I am using "IndexTermGenerator" to generate
> term
> > based indexes, one index for all queries I have and another one for
> > documents (term means single word).
> >  - In the search step : Lucene matches terms in queries index with terms
> in
> > documents index.
> >
> > What I need to do:
> >  - Index phrases ("multi" words) in addition to terms (single words)
> >  - Search for both : phrases and terms
> >
> >
> > Is there any idea on how to proceed?
> >
> > Regards
> > Nada
> >
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Wed 2/18/2009 2:10 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Phrase indexing and searching with Lucene
> >
> > Have you tried the built-in phrase processing with double quotes? e.g.
> > "this is a phrase"?
> >
> > See the Term section at
> > http://lucene.apache.org/java/2_4_0/queryparsersyntax.html
> >
> > Best
> > Erick
> >
> > On Wed, Feb 18, 2009 at 5:57 AM, Nada Mimouni <
> > mimouni@tk.informatik.tu-darmstadt.de> wrote:
> >
> > >
> > >
> > > Hello everybody,
> > >
> > > I use Lucene to index and search into text documents.
> > > At present, I just index and search for single words. I want to extend
> > this
> > > to phrases (or nGrams).
> > >
> > > Could anyone please give me details on how to index phrases and then
> make
> > a
> > > phrase search?
> > >
> > > Thank you very much in advance for your help.
> > >
> > > Nada Mimouni
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--000e0cd17220abb46d046345dfce--

From java-user-return-38617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 13:55:07 2009
Return-Path: <java-user-return-38617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85577 invoked from network); 19 Feb 2009 13:55:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 13:55:06 -0000
Received: (qmail 97345 invoked by uid 500); 19 Feb 2009 13:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97319 invoked by uid 500); 19 Feb 2009 13:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97308 invoked by uid 99); 19 Feb 2009 13:54:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:54:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 13:54:51 +0000
Received: by yw-out-2324.google.com with SMTP id 2so125444ywt.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 05:54:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=OEm+mpB4pwiiDdjGD39Cr2tWoOGi/tMh2bl+627PJmY=;
        b=d/7ZVjHMKMBeVkvl7yUcdQECOvY477tgO7GaAvUxZHzWKm48/GRd2Bs6mbHgL7FbTc
         wdsP1maOg44K3sqCUfOPIgPnvwSzjoL3eqg0EsTkBfcGxsPHSW7cb1mLHtPLFhe2300v
         O4fB1bQtRWtgAAPdxADrk1yK6qdREly1fCTo8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=jYelDUdm3pxIeiOzlrKFxn6Afcgu1+sOemcIiMcdxsh/6Vf0BVURqH6aWrFD4vt9wz
         t8oWVjn59fy90wSVHC6u2x+hX3nmiGsST2X76A7JF44XgvN8DuzHVFfLUyMWNjHRuqhc
         NyC23F/4PniXfCYc1SXO8lQOJ6HHHBSQolXzQ=
MIME-Version: 1.0
Received: by 10.220.77.18 with SMTP id e18mr500140vck.85.1235051669809; Thu, 
	19 Feb 2009 05:54:29 -0800 (PST)
In-Reply-To: <499D0451.5010504@mapmyindia.com>
References: <499BE497.2060103@mapmyindia.com>
	 <5e76f3840902180833g60147620u4b56dba8a705a83e@mail.gmail.com>
	 <499D0451.5010504@mapmyindia.com>
Date: Thu, 19 Feb 2009 08:54:29 -0500
Message-ID: <5e76f3840902190554l58d2e211lcedd73ecff215c2d@mail.gmail.com>
Subject: Re: Lucene search performance on Sun UltraSparc T2 (T5120) servers
From: Glen Newton <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I will look a little deeper into the information you supplied and
comment, but will suggest this on my initial cursory review:

1 - You have 32GB of memory. Using the 64bit VM, try using a 16GB or 24GB heap;
2 - Turn-on huge pages:
      -XX:+UseLargePages
      -XX:LargePageSizeInBytes=256m
3 - Turn on aggressive opts:
      -XX:+AggressiveOpts
4 - Try using bound threads:
      -XX:+UseBoundThreads
5 - Try using thread-local object allocation:
      -XX:+UseTLAB
6 -  Try Biased Locking:
      -XX:+UseBiasedLocking

I consider #1-3 most likely to help you. I would first try them
separately then in combination. #4-6 I am not sure given your hardware
(of which I am very envious!), but would try nonetheless.

 I am more used to working with quad dual core ia64 machines with 8GB
memory running Linux. And large indexes, with tests up to 1B documents
and ~700GB in size, in a single Lucene index.

Please let me know how these things help, if at all.

thanks,

Glen





2009/2/19 Varun Dhussa <varun@mapmyindia.com>:
> Hi,
>
> The details are as follows:
> Solaris version: Solaris 10 U5 and U6
> For the Java Setup, I have tried with:
> Sun JDK 1.5 (32 & 64)
> Sun JDK 1.6 (32 & 64)
> Heap Space: 2G from 32 bit and 4G for 64 bit (Set the same values for both
> XMS and XMX)
>
> Disk: Tried with ZFS (U6) and UFS (U5)
> I reduced the Inode density on the partition since page faults were
> happening initially. Also, the block size was 8K.
> The following reports are on Solaris 10 U5 with UFS (8K block size).
>
>
> The vmstat report is below:
>
> # vmstat 3
> kthr      memory            page            disk          faults      cpu
> r b w   swap  free  re  mf pi po fr de sr s0 s2 -- --   in   sy   cs us sy
> id
> 0 0 0 43408368 29603112 13 107 4 7 6 0  0  2 -0  0  0  458  589  321  0  0
> 99
> 0 0 0 22517072 30241872 830 7709 0 0 0 0 0 0  0  0  0 2537 30699 3899 36 3
> 61
> 0 0 0 24666416 30483248 860 7942 0 0 0 0 0 0  0  0  0 2235 31886 3362 28 3
> 69
> 0 0 0 24184008 30450728 791 7813 0 0 0 0 0 0  0  0  0 2335 31426 3740 33 3
> 65
> 0 0 0 23472024 30442168 813 7822 0 0 0 0 0 0  0  0  0 2494 31312 3923 35 3
> 62
> 0 0 0 22751768 30297240 787 7654 0 0 0 0 0 0  0  0  0 2498 31820 3892 35 3
> 62
> 0 0 0 25385568 30527600 835 7963 0 0 0 0 0 0  0  0  0 2360 32144 3691 29 3
> 68
> 0 0 0 22741056 30281376 787 7643 0 0 0 0 0 0  0  0  0 2249 30008 3484 37 3
> 60
> 0 0 0 22753800 30373072 847 7923 0 0 0 0 0 0  0  0  0 2501 31375 3854 33 3
> 64
> 0 0 0 23725600 30431312 841 8049 0 0 0 0 0 0  0  0  0 2362 32514 3752 32 3
> 65
> 0 0 0 22743008 30256368 826 7719 0 0 0 0 0 0  0  0  0 2427 32101 3773 34 3
> 63
> 0 0 0 23950336 30405312 818 7925 0 0 0 0 0 0  0  0  0 2337 32095 3606 31 3
> 66
> 0 0 0 22752872 30319312 778 7486 0 0 0 0 0 0  0  0  0 2435 30277 3769 37 3
> 60
> 0 0 0 24657848 30401408 836 7797 0 0 0 0 0 0  0  0  0 2469 31879 3770 32 3
> 65
> 0 0 0 23460408 30331056 776 7560 0 0 0 0 0 0  0  0  0 2461 31344 3883 37 3
> 60
> 0 0 0 22748352 30302248 792 7534 0 0 0 0 0 0  0  0  0 2424 30683 3733 36 3
> 61
> 0 0 0 23953848 30389280 837 7868 0 0 0 0 0 0  0  0  0 2280 30710 3511 34 3
> 63
> 0 0 0 22736592 30249672 810 7716 0 0 0 0 0 0  0  0  0 2345 30980 3593 34 3
> 63
> kthr      memory            page            disk          faults      cpu
> r b w   swap  free  re  mf pi po fr de sr s0 s2 -- --   in   sy   cs us sy
> id
> 0 0 0 23951544 30400016 834 7992 0 0 0 0 0 0  0  0  0 2431 32647 3776 31 3
> 66
> 0 0 0 21797992 30245536 812 7635 0 0 0 0 0 0  0  0  0 2402 30213 3693 39 3
> 59
> 0 0 0 22745264 30307728 781 7539 0 0 0 0 0 0  0  0  0 2437 30744 3860 38 3
> 59
> 0 0 0 22748536 30286456 851 7987 0 0 0 0 0 0  0  0  0 2433 32842 3678 29 3
> 68
> 0 0 0 22747680 30297544 791 7514 0 0 0 0 0 0  0  0  0 2369 30625 3655 38 3
> 59
> 0 0 0 23104848 30309488 793 7524 0 0 0 0 0 0  0  0  0 2566 31190 3942 36 3
> 61
> 0 0 0 23460368 30340688 810 7784 0 0 0 0 0 0  0  0  0 2302 31430 3688 33 3
> 64
> 0 0 0 22031344 30215504 792 7397 0 0 0 0 0 0  0  0  0 2477 30733 3850 39 3
> 58
> 0 0 0 22744168 30277312 834 7829 0 0 0 0 0 0  0  0  0 2370 29926 3592 35 3
> 63
> 0 0 0 24177728 30432600 806 7789 0 0 0 0 0 0  0  0  0 2379 31870 3731 32 3
> 65
> 0 0 0 23467896 30382728 802 7810 0 0 0 0 0 0  0  0  0 2527 31866 3980 33 3
> 64
> 0 0 0 22757912 30331080 823 7847 0 0 0 0 0 0  0  0  0 2496 31580 3871 33 3
> 64
> 0 0 0 22043312 30215904 819 7558 0 0 0 0 0 0  0  0  0 2253 30252 3455 36 3
> 61
> 0 0 0 22744952 30275008 793 7657 0 0 0 0 0 0  0  0  0 2499 31840 3937 36 3
> 61
> 0 0 0 23715200 30419008 843 7906 0 0 0 0 0 0  0  0  0 2404 31741 3707 33 3
> 64
> 0 0 0 21307184 30148472 788 7515 0 0 0 0 0 0  0  0  0 2430 31340 3819 39 3
> 58
> 0 0 0 23459544 30332160 817 7687 0 0 0 0 0 0  0  0  0 2353 31011 3526 34 3
> 63
> 0 0 0 23467304 30376392 819 7846 0 0 0 0 0 0  0  0  0 2522 31918 3933 32 3
> 65
> 0 0 0 23473464 30421992 830 7854 0 0 0 0 0 0  0  0  0 2407 31714 3827 33 3
> 65
> kthr      memory            page            disk          faults      cpu
> r b w   swap  free  re  mf pi po fr de sr s0 s2 -- --   in   sy   cs us sy
> id
> 0 0 0 22508648 30240256 799 7447 0 0 0 0 0 0  0  0  0 2524 30483 3911 39 3
> 58
> 0 0 0 22737496 30276864 837 7731 0 0 0 0 0 0  0  0  0 2310 30289 3473 36 3
> 61
> 0 0 0 22515488 30312728 792 7646 0 0 0 0 0 0  0  0  0 2472 31610 3867 35 3
> 62
> 0 0 0 22756248 30251584 823 7669 0 0 0 0 0 0  0  0  0 2637 31413 4119 36 3
> 60
> 0 0 0 23940168 30379336 833 7973 0 0 0 0 0 0  0  0  0 2240 32325 3472 31 3
> 66
> 0 0 0 24184736 30455928 846 7838 0 0 0 0 0 0  0  0  0 2288 31508 3538 32 3
> 65
> 0 0 0 22751808 30309984 776 7614 0 0 0 0 0 0  0  0  0 2480 31486 3906 36 3
> 61
> 0 0 0 22989624 30309536 813 7626 0 0 0 0 0 0  0  0  0 2537 30347 3988 38 3
> 59
> 0 0 0 22739224 30276936 814 7692 0 0 0 0 0 0  0  0  0 2261 31528 3409 34 3
> 63
> 0 0 0 23236200 30350216 853 7968 0 0 0 0 0 0  0  0  0 2676 32636 4167 32 3
> 65
> 0 0 0 24194016 30506960 836 8005 0 0 0 0 0 0  0  0  0 2222 31503 3382 30 3
> 67
> 0 0 0 23480504 30424536 834 7848 0 0 0 0 0 0  0  0  0 2390 32039 3736 32 3
> 65
> 0 0 0 22739048 30233176 812 7742 0 0 0 0 0 0  0  0  0 2604 31693 4029 35 3
> 62
> 0 0 0 23461664 30358528 805 7700 0 0 0 0 0 0  0  0  0 2463 30936 3922 36 3
> 61
> 0 0 0 22031616 30257808 796 7533 0 0 0 0 0 0  0  0  0 2226 29829 3377 37 3
> 60
> 0 0 0 23458168 30327688 813 7773 0 0 0 0 0 0  0  0  0 2388 31519 3763 33 3
> 64
> 0 0 0 23465184 30371904 834 7796 0 0 0 0 0 0  0  0  0 2510 32101 3933 34 3
> 63
> 0 0 0 22513648 30312240 800 7596 0 0 0 0 0 0  0  0  0 2416 30538 3734 38 3
> 59
> 0 0 0 22272824 30228912 802 7640 0 0 0 0 0 0  0  0  0 2292 31395 3469 34 3
> 63
> kthr      memory            page            disk          faults      cpu
> r b w   swap  free  re  mf pi po fr de sr s0 s2 -- --   in   sy   cs us sy
> id
> 0 0 0 22744032 30253480 830 7758 0 0 0 0 0 0  0  0  0 2568 31896 3935 35 3
> 62
> 0 0 0 23287696 30368432 808 7736 0 0 0 0 0 0  0  0  0 2439 30929 3844 35 3
> 62
> 0 0 0 22038504 30253112 794 7480 0 0 0 0 0 0  0  0  0 2213 29774 3433 37 3
> 60
> 0 0 0 24660144 30480240 846 8103 0 0 0 0 0 0  0  0  0 2548 32825 3944 30 3
> 66
> 0 0 0 24183648 30445120 823 7895 0 0 0 0 0 0  0  0  0 2441 32699 3822 31 3
> 66
> 0 0 0 23469136 30391744 830 7916 0 0 0 0 0 0  0  0  0 2441 31731 3813 32 3
> 65
> 0 0 0 22516312 30289688 796 7592 0 0 0 0 0 0  0  0  0 2318 30310 3616 36 3
> 61
> 0 0 0 23943448 30363248 821 7821 0 0 0 0 0 0  0  0  0 2355 31789 3641 31 3
> 66
> 0 0 0 22742768 30284896 795 7602 0 0 0 0 0 0  0  0  0 2387 30608 3675 37 3
> 60
> 0 0 0 23475456 30416136 852 7991 0 0 0 0 0 0  0  0  0 2489 32066 3871 31 3
> 66
> 0 0 0 22756848 30233968 798 7588 0 0 0 0 0 0  0  0  0 2464 31106 3836 37 3
> 60
>
> Cooltest report said virtually nothing.
>
>                 System Configuration
>
> Host name                       mmiAS02
> System name                     SUNW,SPARC-Enterprise-T5120
> Effective UID                   0
> Cooltst version                 3.0.1
> OS                              Solaris
> OS release                      5.10
> OS version                      Generic_127127-11
> Distro                          Solaris
> BIOS/PROM                       OBP 4.28.0 2008/01/22 21:10
> Memory                          32640 MB
> Chip                            UltraSPARC-T2
> MHz                             1165
> Architecture                    SPARC
> # of Virtual CPUs               64
>  P0: 1165 MHz UltraSPARC-T2
>  P1: 1165 MHz UltraSPARC-T2
>  P2: 1165 MHz UltraSPARC-T2
>  P3: 1165 MHz UltraSPARC-T2
>  P4: 1165 MHz UltraSPARC-T2
>  P5: 1165 MHz UltraSPARC-T2
>  P6: 1165 MHz UltraSPARC-T2
>  P7: 1165 MHz UltraSPARC-T2
>  P8: 1165 MHz UltraSPARC-T2
>  P9: 1165 MHz UltraSPARC-T2
>  P10: 1165 MHz UltraSPARC-T2
>  P11: 1165 MHz UltraSPARC-T2
>  P12: 1165 MHz UltraSPARC-T2
>  P13: 1165 MHz UltraSPARC-T2
>  P14: 1165 MHz UltraSPARC-T2
>  P15: 1165 MHz UltraSPARC-T2
>  P16: 1165 MHz UltraSPARC-T2
>  P17: 1165 MHz UltraSPARC-T2
>  P18: 1165 MHz UltraSPARC-T2
>  P19: 1165 MHz UltraSPARC-T2
>  P20: 1165 MHz UltraSPARC-T2
>  P21: 1165 MHz UltraSPARC-T2
>  P22: 1165 MHz UltraSPARC-T2
>  P23: 1165 MHz UltraSPARC-T2
>  P24: 1165 MHz UltraSPARC-T2
>  P25: 1165 MHz UltraSPARC-T2
>  P26: 1165 MHz UltraSPARC-T2
>  P27: 1165 MHz UltraSPARC-T2
>  P28: 1165 MHz UltraSPARC-T2
>  P29: 1165 MHz UltraSPARC-T2
>  P30: 1165 MHz UltraSPARC-T2
>  P31: 1165 MHz UltraSPARC-T2
>  P32: 1165 MHz UltraSPARC-T2
>  P33: 1165 MHz UltraSPARC-T2
>  P34: 1165 MHz UltraSPARC-T2
>  P35: 1165 MHz UltraSPARC-T2
>  P36: 1165 MHz UltraSPARC-T2
>  P37: 1165 MHz UltraSPARC-T2
>  P38: 1165 MHz UltraSPARC-T2
>  P39: 1165 MHz UltraSPARC-T2
>  P40: 1165 MHz UltraSPARC-T2
>  P41: 1165 MHz UltraSPARC-T2
>  P42: 1165 MHz UltraSPARC-T2
>  P43: 1165 MHz UltraSPARC-T2
>  P44: 1165 MHz UltraSPARC-T2
>  P45: 1165 MHz UltraSPARC-T2
>  P46: 1165 MHz UltraSPARC-T2
>  P47: 1165 MHz UltraSPARC-T2
>  P48: 1165 MHz UltraSPARC-T2
>  P49: 1165 MHz UltraSPARC-T2
>  P50: 1165 MHz UltraSPARC-T2
>  P51: 1165 MHz UltraSPARC-T2
>  P52: 1165 MHz UltraSPARC-T2
>  P53: 1165 MHz UltraSPARC-T2
>  P54: 1165 MHz UltraSPARC-T2
>  P55: 1165 MHz UltraSPARC-T2
>  P56: 1165 MHz UltraSPARC-T2
>  P57: 1165 MHz UltraSPARC-T2
>  P58: 1165 MHz UltraSPARC-T2
>  P59: 1165 MHz UltraSPARC-T2
>  P60: 1165 MHz UltraSPARC-T2
>  P61: 1165 MHz UltraSPARC-T2
>  P62: 1165 MHz UltraSPARC-T2
>  P63: 1165 MHz UltraSPARC-T2
> OS release detail:
> Solaris 10 5/08 s10s_u5wos_10 SPARC Copyright 2008 Sun Microsystems, Inc.
>  All Rights Reserved. Use is subject to license terms. Assembled 24 March
> 2008
>
>                    Workload Measurements
>
> Observed system for             10 min
>       in intervals of        10 sec
> Cycles                          44768051692942
> Instructions                    3980806371547
> CPI                             11.25 **
> FP instructions                 5821938521
> Emulated FP instructions        0
> FP Percentage                    0.1%
> The following applies to the measurement interval with the
> busiest single thread or process:
> Peak thread utilization at      2009-02-13 14:36:16
>  Corresponding file name      1234515976
>  CPU utilization               39.4%
>  Command                      java
>  PID/LWPID                    16396/1
>  Thread utilization           0.6%
> More detail on processes and threads is in data/process.out
>
> **Cycles per Instruction (CPI) is not comparable between UltraSPARC
> T1 and T2 processors and conventional processors. Conventional
> processors execute an idle loop when there is no work to do, so
> CPI may be artificially low, especially when the system is
> somewhat idle. The UltraSPARC T1 and T2 "park" idle threads,
> consuming no energy, when there is no work to do, so CPI may
> be artificially high, especially when the system is somewhat idle.
>
>                    Advice
>
> Floating Point                 GREEN
>  Observed floating point content was not excessive for
>  an UltraSPARC T1 processor. Floating point content is not
>  a limitation for UltraSPARC T2.
>
> Parallelism                    GREEN
>  The observed workload has sufficient threads of execution to
>  efficiently utilize the multiple cores and threads of an
>  UltraSPARC T1 or UltraSPARC T2 processor.
>
>
>
> Varun Dhussa
> Product Architect
> CE InfoSystems (P) Ltd
> http://www.mapmyindia.com
>
>
>
> Glen Newton wrote:
>>
>> Could you give some configuration details:
>> - Solaris version
>> - Java VM version, heap size, and any other flags
>> - disk setup
>>
>> You should also consider using huge pages (see
>>
>> http://zzzoot.blogspot.com/2009/02/java-mysql-increased-performance-with.html)
>>
>> I will also be posting performance gains using huge pages for Java
>> Lucene Linux large scale indexing in the next week or so...
>>
>> -glen
>>
>>
>>
>> 2009/2/18 Varun Dhussa <varun@mapmyindia.com>:
>>
>>>
>>> Hi,
>>>
>>> I have had a bad experience when migrating my application from Intel Xeon
>>> based servers to Sun UltraSparc T2 T5120 servers. Lucene fuzzy search
>>> just
>>> does not perform. A search which took approximately 500 ms takes more
>>> than 6
>>> seconds to execute.
>>>
>>> The index has about 100,000,000 records. So, I tried to split it into 10
>>> indices and used the ParallelSearcher on it, but still got similar
>>> results.
>>>
>>> I am guessing that this is because the distance implementation used by
>>> Lucene requires higher clock speed and can't be parallelized much.
>>>
>>> Please advice
>>>
>>> --
>>> Varun Dhussa
>>> Product Architect
>>> CE InfoSystems (P) Ltd
>>> http://www.mapmyindia.com
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 13:58:20 2009
Return-Path: <java-user-return-38618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87544 invoked from network); 19 Feb 2009 13:58:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 13:58:20 -0000
Received: (qmail 4282 invoked by uid 500); 19 Feb 2009 13:58:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4256 invoked by uid 500); 19 Feb 2009 13:58:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4245 invoked by uid 99); 19 Feb 2009 13:58:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:58:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 13:58:03 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id 4053967982
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 22:57:41 +0900 (JST)
Message-ID: <499D6555.5040201@r.email.ne.jp>
Date: Thu, 19 Feb 2009 22:57:41 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index Structure
References: <179b305e0902190309v31a06e8fya227368ba136f4f6@mail.gmail.com>	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7208@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>	 <179b305e0902190402i170abc59p26d14459bfbcdd75@mail.gmail.com>	 <499D60D5.30007@r.email.ne.jp> <179b305e0902190542l70243613w86beabea8b4b47f0@mail.gmail.com>
In-Reply-To: <179b305e0902190542l70243613w86beabea8b4b47f0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

There is no additional setting for me...

Koji

Seid Mohammed wrote:
> I have trioed Amharic fonts, it displays square like character, may be
> there is a kind of setting for it?
>
> Seid M
>
> On 2/19/09, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>   
>> Seid Mohammed wrote:
>>     
>>> great,
>>> I have got it
>>> do luke support unicode? I am trying lucene in non-english languaguage
>>>
>>>
>>>       
>> Of course. I can see Japanese terms without problems.
>>
>> Koji
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 14:00:04 2009
Return-Path: <java-user-return-38619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88284 invoked from network); 19 Feb 2009 14:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 14:00:04 -0000
Received: (qmail 8680 invoked by uid 500); 19 Feb 2009 13:59:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8652 invoked by uid 500); 19 Feb 2009 13:59:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8641 invoked by uid 99); 19 Feb 2009 13:59:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 05:59:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nitdaiict8@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 13:59:49 +0000
Received: by wf-out-1314.google.com with SMTP id 24so424080wfg.20
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 05:59:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=6mCJASmVQ8uReUOuxz56Mpr96mNAFVOR9pY9CDhEya8=;
        b=RHYQzf7Z8eAXm0VrIlIY3KYwxtI9DThlrQ1krF9t0CEiljOR+M0lO4ccpiPnHxSDbd
         HgRNoYnrTv5achSU/HyLpFzwxvwQVD7JEXfaZ/4LH4uxSHFwYhyXLaas6IoXwbGIw7yu
         Uz6iM7EN9Ropn2SDeq3XDaUMHET1kTLNT6rNU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=jnswDrf5lkEoXGBluwYo1kmgIHUgoo9Oy9aUEacI1GQmkS4Wwc2BkRdVcei4tJ1bCV
         yEqTBmnyhxLo0JKwzhECyWhqg8SqHKWFn1AdqXMAbLtP9TCiTeme2pcWvUd7HO8cemq+
         3BItZ4MWJ+M6XaWLBYyNZ2CZ0gFjH5C5MNgis=
MIME-Version: 1.0
Received: by 10.142.162.9 with SMTP id k9mr3095195wfe.282.1235051968343; Thu, 
	19 Feb 2009 05:59:28 -0800 (PST)
Date: Thu, 19 Feb 2009 19:29:28 +0530
Message-ID: <7284f6e20902190559k6bf1851y954035ab81911280@mail.gmail.com>
Subject: class used to create term document matrix in lucene
From: nitin gopi <nitdaiict8@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd150b6da2f06046345f103
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd150b6da2f06046345f103
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all
Can anybody tell me which class and its methods are used to create term
document matrix in lucene?

Regards,
Nitin

--000e0cd150b6da2f06046345f103--

From java-user-return-38620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 14:19:20 2009
Return-Path: <java-user-return-38620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2998 invoked from network); 19 Feb 2009 14:19:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 14:19:20 -0000
Received: (qmail 37963 invoked by uid 500); 19 Feb 2009 14:19:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37937 invoked by uid 500); 19 Feb 2009 14:19:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37926 invoked by uid 99); 19 Feb 2009 14:19:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 06:19:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 14:19:05 +0000
Received: by rv-out-0506.google.com with SMTP id k40so619442rvb.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 06:18:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CCA0qyfS+lvaNuHNZ/tqRqvru8YbgEAgR0jQSeW47nc=;
        b=GsGx6nISNdUUF7uZCBbLmclme08DILaeAIzZhsSVBMuviGcW4GR9ecoEheyl060Cq5
         SHni1Jm+LCj7AwoAkzF4X6uTNJCaWrwQ4hJc0ZgNXlgCekFsY/MDKk0Ymc87zag5OsUi
         D4c9atbdnAr5WL6ghQEN3O+o4xNsHC35ShgbA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RB4SLtIVCDPWLnKXJMizgUh2Ij3wKxdPoKRKMfFynnH+Vd/PlK7fxMu3VMMZMQNCi/
         CLOX4rsJGxgHf5YuKO6RCAIBKwKZLE8PxlWgINwuH8MdEnouLpwVa8McFusVZMefWDf7
         +bpvfZ+MXfQX/29bFJjKrNt65T3s1ZkmrbTro=
MIME-Version: 1.0
Received: by 10.141.210.2 with SMTP id m2mr4648416rvq.26.1235053123836; Thu, 
	19 Feb 2009 06:18:43 -0800 (PST)
In-Reply-To: <2461910.1235014196372.JavaMail.root@elwamui-hybrid.atl.sa.earthlink.net>
References: <2461910.1235014196372.JavaMail.root@elwamui-hybrid.atl.sa.earthlink.net>
Date: Thu, 19 Feb 2009 09:18:43 -0500
Message-ID: <359a92830902190618y513e5deaj88e817339476366a@mail.gmail.com>
Subject: Re: what's the best practice for getting "next page" of hits?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org, rolarenfan@earthlink.net
Content-Type: multipart/alternative; boundary=000e0cd29bf0b99abd04634636af
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29bf0b99abd04634636af
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The best practice is, well, "It Depends" (tm). First off, I wouldn't do any
caching of results unless and until you had a reasonable certainty that
you had performance issues, so <b> would by my first choice. And if
you *did* start to see performance issues, I'd look first at why the queries
were expensive rather than look at caching. And I'd be certain that
you were getting a lot of requests for pages 2-N by mining my
query logs. There's no point in putting a caching scheme in if only
10% of your queries were for subsequent pages. Or even 50% of the
queries were for subsequent pages.

The thing to remember is that every search/sort *must* score and/or sort
all the documents to catch the case that the very last
document in the index is the best match. So having a method that
only returned matches N through N+pagesize only saves the
time/memory needed to copy matches 0 through N, and each
ScoreDoc is just an int and a float. You can copy a LOT of
ScoreDocs around before you notice........

What a caching scheme *would* save is re-executing the query. But long
before I went to a caching scheme, I'd try to understand why my queries
were slow. Especially when you couple that with the fact that the
overwhelming
number of users don't page very far into the result set before changing the
query.

Form the eXtreme Programming people "Do the simplest thing
that could possibly work". I add the addendum "Then *measure* to see
what the problems are before 'fixing' anything".

FWIW
Erick


On Wed, Feb 18, 2009 at 10:29 PM, <rolarenfan@earthlink.net> wrote:

> R2.4
>
> So, I may well be missing something here, but: I use
>
> <pseudoCode>IndexSearcher.search(someQuery, null, count, new
> Sort());</pseudoCode>
>
> to get an instance of TopFieldDocs (the "Hits" is deprecated). So far, all
> fine; I get a bunch of documents. Now, what is the Lucene-best-practice for
> getting the *next* batch of size "count"? (Didn't see this discussed
> anywhere, but maybe I missed it.)
>
> a) I could guess that my users will never want more than "N*count", for
> some value of N, request that right up front, and do all my own "paging"
> using the one TopFieldDocs instance;
>
> b) I could assume that (a) will be an inefficient memory and time hog, and
> when the user clicks "Next" (or whatever), then ... (with i starting at "1")
> get a new TopFieldDocs with "(++i)*count", and out of that discard the first
> "i*count" items? In the limit (as i => N) that uses up just as much space
> and memory, but does so lazily (better);
>
> c) some compromise of (a) and (b), where I get M*count, do my own paging,
> and when the user asks for the (i+1)==(M+1)-th batch, then get another
> M*count (maybe faster, but also maybe bigger amortized memory footprint);
>
> d) something else? (I'd hope for something like a search() method with some
> parameter saying, in effect, "such and such a range of hits" ...)
>
> thanks,
> Paul
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd29bf0b99abd04634636af--

From java-user-return-38621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 14:19:29 2009
Return-Path: <java-user-return-38621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3120 invoked from network); 19 Feb 2009 14:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 14:19:29 -0000
Received: (qmail 39601 invoked by uid 500); 19 Feb 2009 14:19:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39575 invoked by uid 500); 19 Feb 2009 14:19:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39563 invoked by uid 99); 19 Feb 2009 14:19:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 06:19:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of seidymam@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 14:19:14 +0000
Received: by bwz11 with SMTP id 11so1194131bwz.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 06:18:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=szioXYxLj6uXbEPskccDosUYVulwv3Kr39jvbRql62U=;
        b=xfc4b9isZZk9ooEB6muuw1uaPR2z5tuMIrknyTOvKAiRq1gbFS4lUGWrIC0snc/Qwv
         SkjfEfavijrlokJzxTclFdSYvHTturoKn17GffkiJX4wEHBEZfXaLzdl4ASuHIK5WjJG
         nRjhNiHcWNF47F+Zsw0Z6vLFXC+qkbpS1A45o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=M/yqHOdjkkyFY09oNHuHkG3wbKyZf1MF0PQP6vaHK7xXEZ1O4bAqd5uizZZza4cWsf
         U/ZmgJM8x3IKhlM54QE1i82WmqYnzKe78WedT1fvjcgZEC4yk4xlu8kwLshizCftpeaI
         RgyQECC9T6/UOW2zV0A42BsWp8ALxGvIKkRvM=
MIME-Version: 1.0
Received: by 10.181.61.18 with SMTP id o18mr3224738bkk.66.1235053132755; Thu, 
	19 Feb 2009 06:18:52 -0800 (PST)
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE720B@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
References: <179b305e0902190529t496463f9jd43aa91e06928445@mail.gmail.com>
	 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE720B@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Date: Thu, 19 Feb 2009 17:18:52 +0300
Message-ID: <179b305e0902190618m58b7746bm8e6d8239227a572b@mail.gmail.com>
Subject: Re: searching a sentence or paragraph
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Nada,
it again works perfectly

seid m.

On 2/19/09, Nada Mimouni <mimouni@tk.informatik.tu-darmstadt.de> wrote:
>
>
>
> You need to create a TermQuery or PhraseQuery with terms in your query
> depending on what result you need exactly.
>
> To create PhraseQuery, try the built-in phrase processing with double
> quotes, e.g.
> "this is a phrase".
>
> See the Term section at
> http://lucene.apache.org/java/2_4_0/queryparsersyntax.html
>
> You can also have a look  at
> http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/Getting-Started-with-Lucene/
>
> Best
> Nada
>
>
> -----Original Message-----
> From: Seid Mohammed [mailto:seidymam@gmail.com]
> Sent: Thu 2/19/2009 2:29 PM
> To: java-user@lucene.apache.org
> Subject: searching a sentence or paragraph
>
> from lucen index, how can we search a sentence or a paragraph which
> satisfy our query?
>
> thanks a lot
> seid m
> --
> "RABI ZIDNI ILMA"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>


-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 14:30:49 2009
Return-Path: <java-user-return-38622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10371 invoked from network); 19 Feb 2009 14:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 14:30:49 -0000
Received: (qmail 58888 invoked by uid 500); 19 Feb 2009 14:30:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58857 invoked by uid 500); 19 Feb 2009 14:30:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58846 invoked by uid 99); 19 Feb 2009 14:30:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 06:30:42 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 14:30:35 +0000
Received: by rv-out-0506.google.com with SMTP id k40so626440rvb.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 06:30:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=FDjDP0RsrnnhjPl0T2qT264r8deg68cojmAccU30q/0=;
        b=jS6GrZZxOyatvCcNe32VyBpRHK9bLn3mCZqyHknW32uKMpvklBQKZU4FFdtE9I+lOw
         AUYErdgqPkYDXyHW9BgUQ5ZBi5+dgSMVWvUmfZaAFl9Th4K9r79p0NBuPctn3t9XZfQJ
         r7o1Zmz/fI+HxqBQLrNyZzjHSLC5kRyJggGbE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Xs467JCCp1/dLhEBPtOV093+PIIO34EoDAmGMI5stf2BeFvOHPLuiosaK3bNlRkklD
         8ISampq7ZK21ujPLwow1t0fFQ00yi4ZO1NCeHwH2aw2q2s5Oq8+c0PYAoSfE8kOupQFR
         BxFM/TYaqp8uEqKdhSxmHOo8dRgJdGOWeReWA=
MIME-Version: 1.0
Received: by 10.141.48.10 with SMTP id a10mr39019rvk.250.1235053815503; Thu, 
	19 Feb 2009 06:30:15 -0800 (PST)
In-Reply-To: <179b305e0902190317r6c89f9a2y21ddf61034907d5e@mail.gmail.com>
References: <179b305e0902190317r6c89f9a2y21ddf61034907d5e@mail.gmail.com>
Date: Thu, 19 Feb 2009 09:30:15 -0500
Message-ID: <359a92830902190630q74fd22bct9093657234a7abf0@mail.gmail.com>
Subject: Re: lucene index details
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2bd00f39cf90463465f6a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2bd00f39cf90463465f6a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

You have to look at Analyzers a bit here because that's what
controls what is in the index. The simplest case is a WhitespaceAnalyzer
that breaks the input stream up into tokens on any whitespace.

So, in your example and using a WhitespaceAnalyzer, you'd get
the following tokens:
lucene, is, used, to, index, files

Let's put these into a field called "text"  in a document. A document is
a little like a row in a database table. So you could have fields
"text", "filename".... In this example, "filename" has nothing
(and, in fact, doesn't even need to be present in this particular doc).

Now, parsing the query against the text field (see the query syntax)
essentially asks "does the document have the word 'index' OR the
word 'files' in the 'text' field"? (OR is the default operator).

But note that there's no magic involved here. Lucene, for instance,
doesn't know about indexing files. The examples in the book
have underlying code that opens the files, reads the data and
feeds that data through an Analyzer for indexing. That's code you
have to write yourself.


Anyway, I'd examine the examples carefully. Also, get a copy of
Luke, a program that allows you to examine the index and see what
various query parsers do. It's invaluable.

As far as the internal structure of the index, I just treat it as a black
box, but on the Wiki there are links to various explanations.

Best
Erick

On Thu, Feb 19, 2009 at 6:17 AM, Seid Mohammed <seidymam@gmail.com> wrote:

> I am new to lucene, and reading lucene in action book
> sometimes, i better understand when somone tell me an answer than a book.
> my queston is
> when indexing, what actually lucene is doing?
> if i have a file called test.txt  with contents " lucen is used to
> index files" and i apply lucene indexing, what is the content of the
> index and  what is the structure of the index?.
>
> and if i apply lucene search, for example a query "index files", from
> where lucene searches, from the index or from the test.index file
>
> thanks a lot
> seid m
>
> --
> "RABI ZIDNI ILMA"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd2bd00f39cf90463465f6a--

From java-user-return-38623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 15:04:42 2009
Return-Path: <java-user-return-38623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36549 invoked from network); 19 Feb 2009 15:04:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 15:04:42 -0000
Received: (qmail 12118 invoked by uid 500); 19 Feb 2009 15:04:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12092 invoked by uid 500); 19 Feb 2009 15:04:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12081 invoked by uid 99); 19 Feb 2009 15:04:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 07:04:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 15:04:28 +0000
Received: by rv-out-0506.google.com with SMTP id k40so647268rvb.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 07:04:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=AdRN5ViONwPVshsPp+hL91q8lo/Z/NRj8jwwLVifNYo=;
        b=dLdfTm1Dw7cin/qGldzJcqXGdg4HOUtvdEX+VZGkRy7uHKCTrhm9CG4T2rshHr/5z5
         HD5KMmFNndq5KIbx/2OmP+4cQ9t1APJM5SkEILBDgBRyMJJiMJyW9pBZNUtrW53Grgym
         KGHlr52SJHuDVoArPZuJWg05unMgOJDoFAn4g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ju/4lsm1E8NG29mfwvgG1/Snqs3egh62xgC5lcxH6FXmbQg76UfaTwEZx3mU9QcMFO
         Q4WqtP4qqOS8XtbLbaL5QE4tAuBRyDNz4Lp5+UVVjC3hg+9MFehDS+QX95rXpyy9mH+Y
         TfSgTo0wm4RuYn7EWKNmmRx9JVwVpXUdiCcAI=
MIME-Version: 1.0
Received: by 10.140.171.18 with SMTP id t18mr4663207rve.95.1235055848056; Thu, 
	19 Feb 2009 07:04:08 -0800 (PST)
In-Reply-To: <6ef902470902190525v4a9fc0eem4e5c5d4f3d65484a@mail.gmail.com>
References: <6ef902470902180720v6473bc20m8aa84c1a01d147d7@mail.gmail.com>
	 <359a92830902180838k4d59a068lfef5564038e5c434@mail.gmail.com>
	 <6ef902470902190525v4a9fc0eem4e5c5d4f3d65484a@mail.gmail.com>
Date: Thu, 19 Feb 2009 10:04:08 -0500
Message-ID: <359a92830902190704h68372b10ia83971bff472252f@mail.gmail.com>
Subject: Re: stream of events never to know when it ends? how to index such 
	things & search
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd29d8c19e92b046346d9c5
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29d8c19e92b046346d9c5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

My indexes have been much more static than yours, so I'll
defer indexing event logging recommendations to others. But as I
remember, the issue of indexing log files has been discussed
on the list before, a search of logfiles or log files in the
searchable archive might be useful.

Your problem is additionally complicated by the fact (I assume)
that you have two different indexes to worry about, the current
day in RAM and past days in FSDir? Or are you only really
worried about events for one day?

But you're right, it's expensive to reconstruct a document
from the index and there's no way to get the unstemmed
version out that I know of . I could ask, if there are a small
number of tokens (inferred from your "highly redundant")
you're bothering to stem, but that's an aside....

I wonder if you could reduce your index size by storing
an encoded version of your "redundant" event IDs. Crudely,
you could store an int for each event rather than the
text, but that depends upon whether you could absolutely
define *all* the events. Don't know if that'd help or not....

About PositionIncrementGap etc. When you call
doc.add("field", "here's some data") on the *same*
field in the *same* document, a call is made to
your Analyzer.getPositionIncrementGap. This is the
*additional* offset to add to the next token for calls
2-N. Here's an example:

doc.add("field", "first set of tokens");
doc.add("field", "second bunch of tokens");

Let's assume that you have an Analyzer that
returns 100 for gePositionIncrementGap rather
than the default of 1. Note that this is an
overridable method so you can do anything you
want.....

The term positions of the tokens will be something
like:
first - 0
set - 1
of - 2
tokens - 3
second - 103
bunch - 104
of - 105
tokens - 106


Proximity queries (see the query syntax) allow you to say,
in effect, "only match if the desired tokens are within X of each
other". SpanQueries are Querys that you programmatically
construct that can extend this idea (see the classes in the
JavaDocs).

The use here is that if I submit the query "first bunch"~10 the above
document won't match since "first" is more than 10 away from "bunch"
but "first set"~10 *will* match. The (possible) application in your
situation is if you did manage to use one document per event ID, but
did NOT want terms in searches to match across sub-events for
that ID, you could use this mechanism to insure that. Simply choose
an IncrementGap greater than the maximum number of terms in
an event description,  then when you want to search in the
description field, just use a proximity less than the IncrementGap.
It may not apply at all for you, but that's the idea.....


Sorry I can't be more help
Erick

On Thu, Feb 19, 2009 at 8:25 AM, Christian Brennsteiner <
christian@brennsteiner.at> wrote:

> hi erick,
>
> nr of events are 107/sec in average with 400/sec peak and 20/sec low.
> between searchable should be less than 20 minutes. we are planning to
> index IN RAM only for a duration of one day MAX. per lucene process on
> the operating system.
>
> currently we need 500 M RAM for indexing one day (just storing the
> eventids and indexing (without storing) highly redundant event
> descriptions. collecting all eventdescriptions costs us additionally
> 3G ram (which is very much :-( for us.)
>
> @PositionIncrementGap or SpanQueries or the proximity operator ...
> sorry i am bloody beginner i don't really kow what you are talking
> about.
>
> a real update would be perfect... but i think from the current design
> it is not possible to extract all unstemmed keywords from a HIT? or is
> this possible?
> update then would be:
>
> search eventid
> get hits (should be one)
> extract all keywords from hit
> add new information plus hits newly to the index
> delete the hit.
>
> is there a possibility to gather detailed information about the index
> itself, that i can give you a detailed idea how big / and in which
> condition it is?
>
> regards chris
>
>
>
>
>
> On Wed, Feb 18, 2009 at 5:38 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
> > You could always sort by EVENTID, that way at least
> > you'd have all the events for a particular ID together
> > in your results. You'd have to post-filter the results to
> > determine whether all the necessary descriptions were
> > present. But I don't think this works all that well because,
> > as you pointed out, you may have a lot of records to
> > sort through so I don't think this is a very good idea...
> >
> >
> >
> > How many events are we talking about here and what
> > kind of lag between an event and being able to search it
> > can you tolerate? I guess what I'm really asking is whether
> > it's possible to recreate your index "often enough" to
> > satisfy your users. If so, you can index multiple
> > descriptions in a single document, something like
> >
> > doc.add("EVENTDESCRIPTION", "STARTING EVENT")
> > doc.add("EVENTDESCRIPTION", "XYZ")
> > doc.add("EVENTDESCRIPTION", "ABC")
> > doc.add("EVENTID", "1")
> > IndexWriter.addDocument(doc);
> >
> >
> > You'd have to gather all the descriptions related
> > to each EVENTID before you were able to index the doc.....
> >
> > By manipulating the PositionIncrementGap you could also
> > keep searches from matching across different EVENTDESCRIPTIONs,
> > e.g. if you didn't want to match +STARTING +ABC you could use
> > SpanQueries or the proximity operator, but going into details
> > depends upon whether you can rebuild your index so we'll defer
> > that part....
> >
> > You could also think about updating the document when new events
> > were added, but since an update is really a delete/add under the
> > covers you'd have to either gather enough information from what I
> > assume is your log or store enough information with the document to
> > recreate it.
> >
> > How big is your index currently and what kind of throughput do you
> > require?
> >
> > Best
> > Erick
> >
> >
> > On Wed, Feb 18, 2009 at 10:20 AM, Christian Brennsteiner <
> > christian@brennsteiner.at> wrote:
> >
> >> dear lucene community,
> >>
> >> i am playing around with lucene right now. and have come to very bad
> >> problem.
> >>
> >> given environment:
> >>
> >> a signal source gives signals with eventids ans eventdescriptions
> >>
> >> for example EVENTID=1 and EVENTDESCRIPTION="STARTING EVENT"
> >>
> >> those events can be running very long (e.g. one month) during this
> >> period we will receive for example
> >>
> >> EVENTID=1 and EVENTDESCRIPTION="EXECUTING XYZ"
> >> 10 minutes later
> >> EVENTID=1 and EVENTDESCRIPTION="EXECUTING YZA"
> >> 10 minutes later
> >> EVENTID=1 and EVENTDESCRIPTION="PASSED MILESTONE1"
> >> 10 minutes later
> >> EVENTID=1 and EVENTDESCRIPTION="EXECUTING ZAB"
> >>
> >> after e.g. 1 week we receive
> >> EVENTID=1 and EVENTDESCRIPTION="STOPING EVENT"
> >>
> >> what i want:
> >> i want to be able to search e.g. which eventids are connected to "XYZ"
> >> AND "ZAB" AND have already passed "MILESTONE1"
> >>
> >> so my current try is to index all events by full indexing (without
> >> storing) eventdescriptions AND stemming e.g. EXECUTING
> >>
> >> then searching for "+XYZ +ZAB +MILESTONE1"
> >> --> result no document since those are all seperated documents
> >> when i search
> >>  "XYZ ZAB MILESTONE1"
> >> i am getting 3 times EVENTID 3
> >> --> this is bad since when i get 1000000 of such events how do i rank
> them?
> >>
> >> CONCLUSION:
> >> my biggest problem is that my lucene document given to the index
> >> currently is not in a final state BUT i have to index and search it
> >> also while it is in progress.
> >> as a result of this the ranking as i do it now has no real value since
> >> the ranking is just based on a "line of a whole event"
> >>
> >> QUESTION:
> >> is there a solution within lucene to combine search results? e.g. merge
> >> them OR
> >> is there a better workaround how i would do such updates to the index
> >> without storing the original docmuent inside the index (since this
> >> consumes so many space)? e.g. extracting the keywords that were stored
> >> for the item?
> >>
> >> any hints appreciated.
> >>
> >> regards chris
> >>
> >>
> >> ----------
> >> Christian Brennsteiner
> >> Salzburg / Austria / Europe
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
>
> --
> ----------
> Christian Brennsteiner
> Salzburg / Austria / Europe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd29d8c19e92b046346d9c5--

From java-user-return-38624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 15:41:43 2009
Return-Path: <java-user-return-38624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48948 invoked from network); 19 Feb 2009 15:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 15:41:43 -0000
Received: (qmail 9996 invoked by uid 500); 19 Feb 2009 15:41:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9967 invoked by uid 500); 19 Feb 2009 15:41:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9956 invoked by uid 99); 19 Feb 2009 15:41:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 07:41:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of seidymam@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 15:41:27 +0000
Received: by bwz11 with SMTP id 11so1307184bwz.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 07:41:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=r5X2/FFccG/25wnkFqgkSAcydTQpYFg6Rd1brs72PBo=;
        b=rngWMXpfUYFDTKWUWjQ1W27JpyK7WB5MVmZ9WedAUcPeEFN7Y6Lh+IM/clJFJ3leh/
         DpJ4dJ1UgEOA1WQ/ECn8rlfphN9+bOsYxvvowPjHNzGgM7YYw+MBzdz1hUAG+C8NlqJG
         yERQjYxkQGiNUbK/tRrb584fFlAIAVZZNjjTg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=kPFe3hqP8xCoUQ5O5z6SA+7dYv0xBxBFXGAmF3GfIb/0qzF6cPLswAhHy/dTl69LnK
         41OnDdQjSIf/Y2w9t9N+YvYV2HdtEdgKGEkd9A9/jvpQio7nLC9uODBh65URIiw/mRz+
         yL1J9JCjNJAiz1KNBczndgrH5wyIL9w/s+IQ4=
MIME-Version: 1.0
Received: by 10.181.159.17 with SMTP id l17mr3260755bko.14.1235058066995; Thu, 
	19 Feb 2009 07:41:06 -0800 (PST)
Date: Thu, 19 Feb 2009 18:41:06 +0300
Message-ID: <179b305e0902190741o556070a2q5dc8080822e1ca10@mail.gmail.com>
Subject: Indexer.Java problem
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am using netbeans on windows to test lucene.
I have added all the lib files from the /lib directory to my project library.
down the end of Indexer.java program, it states the Field.Text method
is not available
the error message is as follows
---------------------------------------------------------------------------------------------------------------

C:\backup\msc\year2sem1\JavSrc\Lucene\src\Indexer.java:18: duplicate
class: lia.meetlucene.Indexer
public class Indexer {
C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java:80:
cannot find symbol
symbol  : method Text(java.lang.String,java.io.FileReader)
location: class org.apache.lucene.document.Field
    doc.add(Field.Text("contents", new FileReader(f)));
C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java:81:
cannot find symbol
symbol  : method Keyword(java.lang.String,java.lang.String)
location: class org.apache.lucene.document.Field
    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
Note: C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java
uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
3 errors
BUILD FAILED (total time: 2 seconds)
-----------------------------------------------------------------------------------------------------------------------------------
what is wrong?
it underlines in red for the folowing code....
=========================================================
    Document doc = new Document();
    doc.add(Field.Text("contents", new FileReader(f)));
    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
    writer.addDocument(doc);
===================================================

seid m
-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 16:02:09 2009
Return-Path: <java-user-return-38625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59736 invoked from network); 19 Feb 2009 16:02:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 16:02:09 -0000
Received: (qmail 45905 invoked by uid 500); 19 Feb 2009 16:02:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45021 invoked by uid 500); 19 Feb 2009 16:02:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45010 invoked by uid 99); 19 Feb 2009 16:02:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 08:02:01 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 16:01:55 +0000
Received: by rv-out-0506.google.com with SMTP id k40so684631rvb.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 08:01:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=VIO2Wn4lG8sd0izT3oZT3jrOG7dlxssIlzbZrvAAS+o=;
        b=X7MAHyEhhl+eDxOEekmhv1arMCk4dJaKKM6b/rjKV+IYHE5vL6KNYwsq+bSbEYOpo4
         VD1ToF5WQrHPx6PeieVxdvnpBw4k7KPOfMwVi98xoT775Jg1W/7LgHtFHDb/FA4gga7Q
         mRlcCKU4/IhWT+ZQKPLw6QEmdUjjyQOfL4Lk8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vZrobu85zesQrBI44g5UcjPiFYM7nlS3JjIfQKFWNfCI1T8o8/n1PdV7RXPS+GUFyr
         +mXOTnmpsAZNTzizhhG2Axpd0bTGy3NcvfEHV0NxwQGLz53EzV2yLoBOiUBGEf6jTLuZ
         zPiMf3D10/wtPkubbybLDisp0jMOatYi+AXjw=
MIME-Version: 1.0
Received: by 10.141.176.13 with SMTP id d13mr4677626rvp.231.1235059294965; 
	Thu, 19 Feb 2009 08:01:34 -0800 (PST)
In-Reply-To: <179b305e0902190741o556070a2q5dc8080822e1ca10@mail.gmail.com>
References: <179b305e0902190741o556070a2q5dc8080822e1ca10@mail.gmail.com>
Date: Thu, 19 Feb 2009 11:01:34 -0500
Message-ID: <359a92830902190801w3c5dd50dh98641d45c666114a@mail.gmail.com>
Subject: Re: Indexer.Java problem
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd209d08d919b046347a6fd
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd209d08d919b046347a6fd
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

LIA was written for a pretty early version of Lucene, if you're using a
recent
release you need to modify the code to be compliant with that version.

Or install an older release of Lucene.

Erick

On Thu, Feb 19, 2009 at 10:41 AM, Seid Mohammed <seidymam@gmail.com> wrote:

> I am using netbeans on windows to test lucene.
> I have added all the lib files from the /lib directory to my project
> library.
> down the end of Indexer.java program, it states the Field.Text method
> is not available
> the error message is as follows
>
> ---------------------------------------------------------------------------------------------------------------
>
> C:\backup\msc\year2sem1\JavSrc\Lucene\src\Indexer.java:18: duplicate
> class: lia.meetlucene.Indexer
> public class Indexer {
>
> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java:80:
> cannot find symbol
> symbol  : method Text(java.lang.String,java.io.FileReader)
> location: class org.apache.lucene.document.Field
>    doc.add(Field.Text("contents", new FileReader(f)));
>
> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java:81:
> cannot find symbol
> symbol  : method Keyword(java.lang.String,java.lang.String)
> location: class org.apache.lucene.document.Field
>    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
> Note:
> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java
> uses or overrides a deprecated API.
> Note: Recompile with -Xlint:deprecation for details.
> 3 errors
> BUILD FAILED (total time: 2 seconds)
>
> -----------------------------------------------------------------------------------------------------------------------------------
> what is wrong?
> it underlines in red for the folowing code....
> =========================================================
>    Document doc = new Document();
>    doc.add(Field.Text("contents", new FileReader(f)));
>    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>    writer.addDocument(doc);
> ===================================================
>
> seid m
> --
> "RABI ZIDNI ILMA"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd209d08d919b046347a6fd--

From java-user-return-38626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 16:14:16 2009
Return-Path: <java-user-return-38626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65394 invoked from network); 19 Feb 2009 16:14:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 16:14:16 -0000
Received: (qmail 74295 invoked by uid 500); 19 Feb 2009 16:14:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74265 invoked by uid 500); 19 Feb 2009 16:14:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74254 invoked by uid 99); 19 Feb 2009 16:14:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 08:14:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of seidymam@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 16:14:00 +0000
Received: by bwz11 with SMTP id 11so1350232bwz.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 08:13:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=b4JnrkxI68Pq3lrl9ah1agqWEmjxFcjJZCvbfg4qNOU=;
        b=b5c+f+0W2sbM4B6pMMxxQ5z6cgN7gWnJYq/ah0uLYdWLM5g/J0GGbCxze3Q5QMBnUG
         PQc1OBmiM5bpvM0aTtQqA8mdCJ7yn8JcFOc1NsvHd4LsOZfTrrLObRZn31hhj/YM80fi
         t0c9/e/jlj3kHCi5QlHlmsHsh76p/xvzjl/Vs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Oj6nPndD/ndwiUATL4pk67TD4JJN+dY/qa/PrIC8ZhHLMqMcReTtAUhnPkOd7gXRiW
         eb1a20BlMV6TZMYMAsZR3dmPMhdG5r7T0x9ZdrhXheDX68fK3r19uyvD7yX1DsXXkWOL
         H7u7aQRj44FEhaBmy1pKcctqZaDPu7s4ZOrsA=
MIME-Version: 1.0
Received: by 10.181.134.12 with SMTP id l12mr1150193bkn.80.1235060019775; Thu, 
	19 Feb 2009 08:13:39 -0800 (PST)
In-Reply-To: <359a92830902190801w3c5dd50dh98641d45c666114a@mail.gmail.com>
References: <179b305e0902190741o556070a2q5dc8080822e1ca10@mail.gmail.com>
	 <359a92830902190801w3c5dd50dh98641d45c666114a@mail.gmail.com>
Date: Thu, 19 Feb 2009 19:13:39 +0300
Message-ID: <179b305e0902190813k9196190t99b639ab3b881e20@mail.gmail.com>
Subject: Re: Indexer.Java problem
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I better modify it, but can you give just a hint on how to modify
thanks a lot

Seid M

On 2/19/09, Erick Erickson <erickerickson@gmail.com> wrote:
> LIA was written for a pretty early version of Lucene, if you're using a
> recent
> release you need to modify the code to be compliant with that version.
>
> Or install an older release of Lucene.
>
> Erick
>
> On Thu, Feb 19, 2009 at 10:41 AM, Seid Mohammed <seidymam@gmail.com> wrote:
>
>> I am using netbeans on windows to test lucene.
>> I have added all the lib files from the /lib directory to my project
>> library.
>> down the end of Indexer.java program, it states the Field.Text method
>> is not available
>> the error message is as follows
>>
>> ---------------------------------------------------------------------------------------------------------------
>>
>> C:\backup\msc\year2sem1\JavSrc\Lucene\src\Indexer.java:18: duplicate
>> class: lia.meetlucene.Indexer
>> public class Indexer {
>>
>> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java:80:
>> cannot find symbol
>> symbol  : method Text(java.lang.String,java.io.FileReader)
>> location: class org.apache.lucene.document.Field
>>    doc.add(Field.Text("contents", new FileReader(f)));
>>
>> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java:81:
>> cannot find symbol
>> symbol  : method Keyword(java.lang.String,java.lang.String)
>> location: class org.apache.lucene.document.Field
>>    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>> Note:
>> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java
>> uses or overrides a deprecated API.
>> Note: Recompile with -Xlint:deprecation for details.
>> 3 errors
>> BUILD FAILED (total time: 2 seconds)
>>
>> -----------------------------------------------------------------------------------------------------------------------------------
>> what is wrong?
>> it underlines in red for the folowing code....
>> =========================================================
>>    Document doc = new Document();
>>    doc.add(Field.Text("contents", new FileReader(f)));
>>    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>>    writer.addDocument(doc);
>> ===================================================
>>
>> seid m
>> --
>> "RABI ZIDNI ILMA"
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 16:16:17 2009
Return-Path: <java-user-return-38627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67229 invoked from network); 19 Feb 2009 16:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 16:16:17 -0000
Received: (qmail 81820 invoked by uid 500); 19 Feb 2009 16:16:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81797 invoked by uid 500); 19 Feb 2009 16:16:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81785 invoked by uid 99); 19 Feb 2009 16:16:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 08:16:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 16:16:03 +0000
Received: by qyk13 with SMTP id 13so778809qyk.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 08:15:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=QkS8wAK4VO3A/RbSDJi+Vy5BAgBW1rEBqHh4bY2R7r8=;
        b=i8gc6CqzUVvbWouNef/jMnF2CXwpgJTigvex34O/jBk+M/jZPVIvb0Fqisb5JPyNqP
         p8LK45MSLJn9X/2W9P07isa8iS/OTRFRQ9DAAosEWwQ97Nwk4y+XXpbmX4DQfKTssdZT
         QIM3MXUr/9iUq8ajBk1vV7nXMRR7jc+77b2yc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=lQad8grnGXdpJo7YtP3rLjqHzjVeC94lPnl0rTBv0CfpDEIm4DR27AvavvzkmR4lEq
         6kUokLUCZOGsMFmAOv+Ildc5IQS3sqFTEyoquaR3TyZe/OaQhUgGeVSUlxWRUBZSjpf3
         FZA4VX0po4AwNDTovuA9qbG2wESzoXBS3Jzhc=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.229.74.85 with SMTP id t21mr2341300qcj.45.1235060142190; Thu, 
	19 Feb 2009 08:15:42 -0800 (PST)
In-Reply-To: <1235044427.9070.3.camel@bohr>
References: <1235044427.9070.3.camel@bohr>
Date: Thu, 19 Feb 2009 11:15:42 -0500
X-Google-Sender-Auth: fd2a53e8328ce2d3
Message-ID: <c68e39170902190815h463ed97dhda942a8328c6984c@mail.gmail.com>
Subject: Re: Filters - at what stage are they applied?
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Feb 19, 2009 at 6:53 AM, Joel Halbert <joel@su3analytics.com> wrote:
> By way of clarification, when a filter is used with a search query, is
> the filter applied only to documents that matched the search query or is
> it applied to all documents in the index before the query is executed?

Filters are currently applied concurrently with the scorer from the query.
They take turns skipping until they both land on the same docid, which
is a match.

See IndexSearcher.doSearch() for the actual implementation.


-Yonik
Lucene/Solr? http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 18:03:51 2009
Return-Path: <java-user-return-38628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35739 invoked from network); 19 Feb 2009 18:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 18:03:51 -0000
Received: (qmail 2600 invoked by uid 500); 19 Feb 2009 18:03:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2289 invoked by uid 500); 19 Feb 2009 18:03:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2278 invoked by uid 99); 19 Feb 2009 18:03:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 10:03:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 18:03:35 +0000
Received: by rv-out-0506.google.com with SMTP id g9so393631rvb.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 10:03:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=7sVCUaTxVsXE7p4iuxC6DMRbl6CZpQvUpVkKHV5V3jQ=;
        b=u9m7Ea9aMb8S62esHqwcfes/4JisPvUAI7UST8k2ZBoTFSzkXPd8Dk4Igv+Gu2A8+X
         FvLhsyEfQjIGn1glCQ/RxaV4uk4jyf1DNsujy/ycmfjD/FSf6lBGS62huD/5HifoPXCS
         T2/nqbR+TjhFe6A7QJhcf8Tw3UjjhSxp7Lydw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bHraTpSkWW2neMswutqfAiiDmQXHiYSGX2kdSyVpTZilVuTm0lqfHI8WPcRhEu8Hfx
         NTd/BKfWAYi6xR+gdOGDKaCIfmGNyBTSJMMfSLbqYoPyN2LzKFqhsOfxKrRrhcgLBPOk
         mDiDjLf+5LdAvbR61lQzyyf6gop/jZKbPBWsQ=
MIME-Version: 1.0
Received: by 10.141.76.21 with SMTP id d21mr3187205rvl.238.1235066594023; Thu, 
	19 Feb 2009 10:03:14 -0800 (PST)
In-Reply-To: <179b305e0902190813k9196190t99b639ab3b881e20@mail.gmail.com>
References: <179b305e0902190741o556070a2q5dc8080822e1ca10@mail.gmail.com>
	 <359a92830902190801w3c5dd50dh98641d45c666114a@mail.gmail.com>
	 <179b305e0902190813k9196190t99b639ab3b881e20@mail.gmail.com>
Date: Thu, 19 Feb 2009 13:03:13 -0500
Message-ID: <359a92830902191003u6d88e450u73d924e4e36eebd5@mail.gmail.com>
Subject: Re: Indexer.Java problem
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd50a549c5887046349595a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd50a549c5887046349595a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Unfortunately, not really. I haven't tried to get the LIA examples
working for years...

The various release notes on the Wiki, especially the 1.9 and 2.0 release
notes are probably the best place to start.

Best
Erick

On Thu, Feb 19, 2009 at 11:13 AM, Seid Mohammed <seidymam@gmail.com> wrote:

> I better modify it, but can you give just a hint on how to modify
> thanks a lot
>
> Seid M
>
> On 2/19/09, Erick Erickson <erickerickson@gmail.com> wrote:
> > LIA was written for a pretty early version of Lucene, if you're using a
> > recent
> > release you need to modify the code to be compliant with that version.
> >
> > Or install an older release of Lucene.
> >
> > Erick
> >
> > On Thu, Feb 19, 2009 at 10:41 AM, Seid Mohammed <seidymam@gmail.com>
> wrote:
> >
> >> I am using netbeans on windows to test lucene.
> >> I have added all the lib files from the /lib directory to my project
> >> library.
> >> down the end of Indexer.java program, it states the Field.Text method
> >> is not available
> >> the error message is as follows
> >>
> >>
> ---------------------------------------------------------------------------------------------------------------
> >>
> >> C:\backup\msc\year2sem1\JavSrc\Lucene\src\Indexer.java:18: duplicate
> >> class: lia.meetlucene.Indexer
> >> public class Indexer {
> >>
> >>
> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java:80:
> >> cannot find symbol
> >> symbol  : method Text(java.lang.String,java.io.FileReader)
> >> location: class org.apache.lucene.document.Field
> >>    doc.add(Field.Text("contents", new FileReader(f)));
> >>
> >>
> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java:81:
> >> cannot find symbol
> >> symbol  : method Keyword(java.lang.String,java.lang.String)
> >> location: class org.apache.lucene.document.Field
> >>    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
> >> Note:
> >>
> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene\Indexer.java
> >> uses or overrides a deprecated API.
> >> Note: Recompile with -Xlint:deprecation for details.
> >> 3 errors
> >> BUILD FAILED (total time: 2 seconds)
> >>
> >>
> -----------------------------------------------------------------------------------------------------------------------------------
> >> what is wrong?
> >> it underlines in red for the folowing code....
> >> =========================================================
> >>    Document doc = new Document();
> >>    doc.add(Field.Text("contents", new FileReader(f)));
> >>    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
> >>    writer.addDocument(doc);
> >> ===================================================
> >>
> >> seid m
> >> --
> >> "RABI ZIDNI ILMA"
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> --
> "RABI ZIDNI ILMA"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd50a549c5887046349595a--

From java-user-return-38629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 18:52:06 2009
Return-Path: <java-user-return-38629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66405 invoked from network); 19 Feb 2009 18:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 18:52:06 -0000
Received: (qmail 78468 invoked by uid 500); 19 Feb 2009 18:51:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78445 invoked by uid 500); 19 Feb 2009 18:51:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78434 invoked by uid 99); 19 Feb 2009 18:51:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 10:51:59 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_HELO_FAIL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [63.119.22.96] (HELO mx.tlcdelivers.com) (63.119.22.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 18:51:51 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx.tlcdelivers.com (Postfix) with ESMTP id B1753427C2B8
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 13:51:29 -0500 (EST)
X-Virus-Scanned: amavisd-new at 
Received: from mx.tlcdelivers.com ([127.0.0.1])
	by localhost (mx.tlcdelivers.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id juFolry2-tqO for <java-user@lucene.apache.org>;
	Thu, 19 Feb 2009 13:51:29 -0500 (EST)
Received: from Gidora (unknown [10.10.60.93])
	by mx.tlcdelivers.com (Postfix) with ESMTP id E59F9427C2BD
	for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 13:51:28 -0500 (EST)
From: "Philip Puffinburger" <ppuffinburger@tlcdelivers.com>
To: <java-user@lucene.apache.org>
References: <00cf01c99095$5eda9540$1c8fbfc0$@com>
In-Reply-To: <00cf01c99095$5eda9540$1c8fbfc0$@com>
Subject: RE: 2.3.2 -> 2.4.0 StandardTokenizer issue
Date: Thu, 19 Feb 2009 13:51:28 -0500
Message-ID: <003901c992c3$12df4570$389dd050$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1258"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcmQlV2U6dLfZUs5RhSApE6LyG1fUgCLUIVw
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Actually, WhitespaceTokenizer won't work.   Too many person names and it
won't do anything with punctuation.   Something had to have changed in
StandardTokenizer, and we need some of the 2.4 fixes/features, so we are
kind of stuck.


-----Original Message-----
From: Philip Puffinburger [mailto:ppuffinburger@tlcdelivers.com]=20
Sent: Monday, February 16, 2009 7:19 PM
To: java-user@lucene.apache.org
Subject: 2.3.2 -> 2.4.0 StandardTokenizer issue

We have our own Analyzer which has the following

=20

Public final TokenStream tokenStream(String fieldname, Reader reader) {

  TokenStream result =3D new StandardTokenizer(reader);

  result =3D new StandardFilter(result);

  result =3D new MyAccentFilter(result);

  result =3D new LowerCaseFilter(result);

  result =3D new StopFilter(result);

=20

  return result;

}

=20

In 2.3.2 if the token =91Co=ECmo=92 came through this it would get =
changed to
=91como=92 by the time it made it through the filters.    In 2.4.0 this =
isn=92t
the case.   It treats this one token as two so we get =91co=92 and =
=91mo=92.    So
instead of search =91como=92 or =91Co=ECmo=92 to get all the hits we now =
have to do
them separately.

=20

I switched to the WhitespaceTokenizer as a test and that is indexing and
searching the way we expect it, but I haven=92t looked into what we lost =
by
using that tokenizer.

=20

Were we relying on a bug to get what we wanted from StandardTokenizer or =
did
something break in 2.4.0?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 19 19:01:42 2009
Return-Path: <java-user-return-38630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69295 invoked from network); 19 Feb 2009 19:01:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2009 19:01:42 -0000
Received: (qmail 90315 invoked by uid 500); 19 Feb 2009 19:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90284 invoked by uid 500); 19 Feb 2009 19:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90273 invoked by uid 99); 19 Feb 2009 19:01:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 11:01:34 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 19:01:25 +0000
Received: by yx-out-2324.google.com with SMTP id 31so187852yxl.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 11:01:03 -0800 (PST)
Received: by 10.64.83.3 with SMTP id g3mr5432843qbb.80.1235070063367;
        Thu, 19 Feb 2009 11:01:03 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 25sm2857211qbw.35.2009.02.19.11.01.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 19 Feb 2009 11:01:02 -0800 (PST)
Message-Id: <6D865071-F781-4D32-8B5A-4DC541D6EF70@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830902191003u6d88e450u73d924e4e36eebd5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Indexer.Java problem
Date: Thu, 19 Feb 2009 14:01:02 -0500
References: <179b305e0902190741o556070a2q5dc8080822e1ca10@mail.gmail.com> <359a92830902190801w3c5dd50dh98641d45c666114a@mail.gmail.com> <179b305e0902190813k9196190t99b639ab3b881e20@mail.gmail.com> <359a92830902191003u6d88e450u73d924e4e36eebd5@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


The early access version of LIA2 (accessible at http://www.manning.com/hatcher3/) 
  has updated this example to work with recent Lucene releases (though  
it's still using deprecated APIs -- that'll be fixed before the book  
is released).

Oh actually the first chapter is a free PDF on Manning's site.

Mike

Erick Erickson wrote:

> Unfortunately, not really. I haven't tried to get the LIA examples
> working for years...
>
> The various release notes on the Wiki, especially the 1.9 and 2.0  
> release
> notes are probably the best place to start.
>
> Best
> Erick
>
> On Thu, Feb 19, 2009 at 11:13 AM, Seid Mohammed <seidymam@gmail.com>  
> wrote:
>
>> I better modify it, but can you give just a hint on how to modify
>> thanks a lot
>>
>> Seid M
>>
>> On 2/19/09, Erick Erickson <erickerickson@gmail.com> wrote:
>>> LIA was written for a pretty early version of Lucene, if you're  
>>> using a
>>> recent
>>> release you need to modify the code to be compliant with that  
>>> version.
>>>
>>> Or install an older release of Lucene.
>>>
>>> Erick
>>>
>>> On Thu, Feb 19, 2009 at 10:41 AM, Seid Mohammed <seidymam@gmail.com>
>> wrote:
>>>
>>>> I am using netbeans on windows to test lucene.
>>>> I have added all the lib files from the /lib directory to my  
>>>> project
>>>> library.
>>>> down the end of Indexer.java program, it states the Field.Text  
>>>> method
>>>> is not available
>>>> the error message is as follows
>>>>
>>>>
>> ---------------------------------------------------------------------------------------------------------------
>>>>
>>>> C:\backup\msc\year2sem1\JavSrc\Lucene\src\Indexer.java:18:  
>>>> duplicate
>>>> class: lia.meetlucene.Indexer
>>>> public class Indexer {
>>>>
>>>>
>> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene 
>> \Indexer.java:80:
>>>> cannot find symbol
>>>> symbol  : method Text(java.lang.String,java.io.FileReader)
>>>> location: class org.apache.lucene.document.Field
>>>>   doc.add(Field.Text("contents", new FileReader(f)));
>>>>
>>>>
>> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene 
>> \Indexer.java:81:
>>>> cannot find symbol
>>>> symbol  : method Keyword(java.lang.String,java.lang.String)
>>>> location: class org.apache.lucene.document.Field
>>>>   doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>>>> Note:
>>>>
>> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene 
>> \Indexer.java
>>>> uses or overrides a deprecated API.
>>>> Note: Recompile with -Xlint:deprecation for details.
>>>> 3 errors
>>>> BUILD FAILED (total time: 2 seconds)
>>>>
>>>>
>> -----------------------------------------------------------------------------------------------------------------------------------
>>>> what is wrong?
>>>> it underlines in red for the folowing code....
>>>> =========================================================
>>>>   Document doc = new Document();
>>>>   doc.add(Field.Text("contents", new FileReader(f)));
>>>>   doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>>>>   writer.addDocument(doc);
>>>> ===================================================
>>>>
>>>> seid m
>>>> --
>>>> "RABI ZIDNI ILMA"
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>
>>
>> --
>> "RABI ZIDNI ILMA"
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 20 07:46:46 2009
Return-Path: <java-user-return-38631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72228 invoked from network); 20 Feb 2009 07:46:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2009 07:46:45 -0000
Received: (qmail 33441 invoked by uid 500); 20 Feb 2009 07:46:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33417 invoked by uid 500); 20 Feb 2009 07:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33406 invoked by uid 99); 20 Feb 2009 07:46:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Feb 2009 23:46:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of christian.brennsteiner@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 07:46:30 +0000
Received: by bwz11 with SMTP id 11so2176543bwz.5
        for <java-user@lucene.apache.org>; Thu, 19 Feb 2009 23:46:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:in-reply-to
         :references:date:x-google-sender-auth:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=zK2qqw/LPsPmsHvacq/0oQC6CsCB11UKLjhemIQExng=;
        b=AYRGYsfFZgn0MZF0rhvU3T5eWric9xJ4kr3qQ+QSIlOPd4kXbWoTo4qj+z7DNQLxiq
         hihawKceFKcAVm548EQk24OwxpfDVmJ1lxpuwXvVg1XyKht8oFK4Ri+4MRXhiHosDPxv
         ib6dOtPtIDdIDf5MGlfD5F7pAdD30XvKKleUk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=JwA03v2+QilbnUqE/BOJXmald8veB3C/tuQBFqpdqWQ4zM3f8u4gwsZxzt+Hezewxt
         xlsmugzkhSw/lhWW/tpT/nu9lqsR5ysViqRkB9lIrmlSdeE3bR4QqWgQU7Li+2KQupNB
         cUPz7a3ob+l7iI6PMOi5bhGb27wvmzeWvdyPE=
MIME-Version: 1.0
Sender: christian.brennsteiner@gmail.com
Received: by 10.181.155.9 with SMTP id h9mr177624bko.176.1235115969560; Thu, 
	19 Feb 2009 23:46:09 -0800 (PST)
In-Reply-To: <359a92830902190704h68372b10ia83971bff472252f@mail.gmail.com>
References: <6ef902470902180720v6473bc20m8aa84c1a01d147d7@mail.gmail.com>
	 <359a92830902180838k4d59a068lfef5564038e5c434@mail.gmail.com>
	 <6ef902470902190525v4a9fc0eem4e5c5d4f3d65484a@mail.gmail.com>
	 <359a92830902190704h68372b10ia83971bff472252f@mail.gmail.com>
Date: Fri, 20 Feb 2009 08:46:09 +0100
X-Google-Sender-Auth: 7340b8bb878eb51b
Message-ID: <6ef902470902192346g978f3d7n254050424d736232@mail.gmail.com>
Subject: Re: stream of events never to know when it ends? how to index such 
	things & search
From: Christian Brennsteiner <christian@brennsteiner.at>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hi erick,

ram and fsdir:
we will hold every day of the 30 days (in the past) in ram. we will
start a seperate process every 1 or 2 days which holds 1-2 days. i
think that FSDir might be too slow? never tested that .... my goal is
to search 30 days with indexes about 300-700 M / day -> 21 G (max)
within one second.

from my point of view it should be easilly possible to retrieve all
unstemmed tokens from a document at least at the time you are adding
it? or am i wrong? can i prestem them? the stemmed version might use
much less space when i attach it to the current day index. all days in
the past dont need this since they can rebuild themselves with almost
complete data (small problems with events spanning over several
days... but those are rare) since 99% complete within 1 hour.

encoding might be worth (maybe top 3000 terms?) doing A dictionary. i
think ziping is not an option since the payloads are far too small.


thanks for everything
chris








On Thu, Feb 19, 2009 at 4:04 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> My indexes have been much more static than yours, so I'll
> defer indexing event logging recommendations to others. But as I
> remember, the issue of indexing log files has been discussed
> on the list before, a search of logfiles or log files in the
> searchable archive might be useful.
>
> Your problem is additionally complicated by the fact (I assume)
> that you have two different indexes to worry about, the current
> day in RAM and past days in FSDir? Or are you only really
> worried about events for one day?
>
> But you're right, it's expensive to reconstruct a document
> from the index and there's no way to get the unstemmed
> version out that I know of . I could ask, if there are a small
> number of tokens (inferred from your "highly redundant")
> you're bothering to stem, but that's an aside....
>
> I wonder if you could reduce your index size by storing
> an encoded version of your "redundant" event IDs. Crudely,
> you could store an int for each event rather than the
> text, but that depends upon whether you could absolutely
> define *all* the events. Don't know if that'd help or not....
>
> About PositionIncrementGap etc. When you call
> doc.add("field", "here's some data") on the *same*
> field in the *same* document, a call is made to
> your Analyzer.getPositionIncrementGap. This is the
> *additional* offset to add to the next token for calls
> 2-N. Here's an example:
>
> doc.add("field", "first set of tokens");
> doc.add("field", "second bunch of tokens");
>
> Let's assume that you have an Analyzer that
> returns 100 for gePositionIncrementGap rather
> than the default of 1. Note that this is an
> overridable method so you can do anything you
> want.....
>
> The term positions of the tokens will be something
> like:
> first - 0
> set - 1
> of - 2
> tokens - 3
> second - 103
> bunch - 104
> of - 105
> tokens - 106
>
>
> Proximity queries (see the query syntax) allow you to say,
> in effect, "only match if the desired tokens are within X of each
> other". SpanQueries are Querys that you programmatically
> construct that can extend this idea (see the classes in the
> JavaDocs).
>
> The use here is that if I submit the query "first bunch"~10 the above
> document won't match since "first" is more than 10 away from "bunch"
> but "first set"~10 *will* match. The (possible) application in your
> situation is if you did manage to use one document per event ID, but
> did NOT want terms in searches to match across sub-events for
> that ID, you could use this mechanism to insure that. Simply choose
> an IncrementGap greater than the maximum number of terms in
> an event description,  then when you want to search in the
> description field, just use a proximity less than the IncrementGap.
> It may not apply at all for you, but that's the idea.....
>
>
> Sorry I can't be more help
> Erick
>
> On Thu, Feb 19, 2009 at 8:25 AM, Christian Brennsteiner <
> christian@brennsteiner.at> wrote:
>
>> hi erick,
>>
>> nr of events are 107/sec in average with 400/sec peak and 20/sec low.
>> between searchable should be less than 20 minutes. we are planning to
>> index IN RAM only for a duration of one day MAX. per lucene process on
>> the operating system.
>>
>> currently we need 500 M RAM for indexing one day (just storing the
>> eventids and indexing (without storing) highly redundant event
>> descriptions. collecting all eventdescriptions costs us additionally
>> 3G ram (which is very much :-( for us.)
>>
>> @PositionIncrementGap or SpanQueries or the proximity operator ...
>> sorry i am bloody beginner i don't really kow what you are talking
>> about.
>>
>> a real update would be perfect... but i think from the current design
>> it is not possible to extract all unstemmed keywords from a HIT? or is
>> this possible?
>> update then would be:
>>
>> search eventid
>> get hits (should be one)
>> extract all keywords from hit
>> add new information plus hits newly to the index
>> delete the hit.
>>
>> is there a possibility to gather detailed information about the index
>> itself, that i can give you a detailed idea how big / and in which
>> condition it is?
>>
>> regards chris
>>
>>
>>
>>
>>
>> On Wed, Feb 18, 2009 at 5:38 PM, Erick Erickson <erickerickson@gmail.com>
>> wrote:
>> > You could always sort by EVENTID, that way at least
>> > you'd have all the events for a particular ID together
>> > in your results. You'd have to post-filter the results to
>> > determine whether all the necessary descriptions were
>> > present. But I don't think this works all that well because,
>> > as you pointed out, you may have a lot of records to
>> > sort through so I don't think this is a very good idea...
>> >
>> >
>> >
>> > How many events are we talking about here and what
>> > kind of lag between an event and being able to search it
>> > can you tolerate? I guess what I'm really asking is whether
>> > it's possible to recreate your index "often enough" to
>> > satisfy your users. If so, you can index multiple
>> > descriptions in a single document, something like
>> >
>> > doc.add("EVENTDESCRIPTION", "STARTING EVENT")
>> > doc.add("EVENTDESCRIPTION", "XYZ")
>> > doc.add("EVENTDESCRIPTION", "ABC")
>> > doc.add("EVENTID", "1")
>> > IndexWriter.addDocument(doc);
>> >
>> >
>> > You'd have to gather all the descriptions related
>> > to each EVENTID before you were able to index the doc.....
>> >
>> > By manipulating the PositionIncrementGap you could also
>> > keep searches from matching across different EVENTDESCRIPTIONs,
>> > e.g. if you didn't want to match +STARTING +ABC you could use
>> > SpanQueries or the proximity operator, but going into details
>> > depends upon whether you can rebuild your index so we'll defer
>> > that part....
>> >
>> > You could also think about updating the document when new events
>> > were added, but since an update is really a delete/add under the
>> > covers you'd have to either gather enough information from what I
>> > assume is your log or store enough information with the document to
>> > recreate it.
>> >
>> > How big is your index currently and what kind of throughput do you
>> > require?
>> >
>> > Best
>> > Erick
>> >
>> >
>> > On Wed, Feb 18, 2009 at 10:20 AM, Christian Brennsteiner <
>> > christian@brennsteiner.at> wrote:
>> >
>> >> dear lucene community,
>> >>
>> >> i am playing around with lucene right now. and have come to very bad
>> >> problem.
>> >>
>> >> given environment:
>> >>
>> >> a signal source gives signals with eventids ans eventdescriptions
>> >>
>> >> for example EVENTID=1 and EVENTDESCRIPTION="STARTING EVENT"
>> >>
>> >> those events can be running very long (e.g. one month) during this
>> >> period we will receive for example
>> >>
>> >> EVENTID=1 and EVENTDESCRIPTION="EXECUTING XYZ"
>> >> 10 minutes later
>> >> EVENTID=1 and EVENTDESCRIPTION="EXECUTING YZA"
>> >> 10 minutes later
>> >> EVENTID=1 and EVENTDESCRIPTION="PASSED MILESTONE1"
>> >> 10 minutes later
>> >> EVENTID=1 and EVENTDESCRIPTION="EXECUTING ZAB"
>> >>
>> >> after e.g. 1 week we receive
>> >> EVENTID=1 and EVENTDESCRIPTION="STOPING EVENT"
>> >>
>> >> what i want:
>> >> i want to be able to search e.g. which eventids are connected to "XYZ"
>> >> AND "ZAB" AND have already passed "MILESTONE1"
>> >>
>> >> so my current try is to index all events by full indexing (without
>> >> storing) eventdescriptions AND stemming e.g. EXECUTING
>> >>
>> >> then searching for "+XYZ +ZAB +MILESTONE1"
>> >> --> result no document since those are all seperated documents
>> >> when i search
>> >>  "XYZ ZAB MILESTONE1"
>> >> i am getting 3 times EVENTID 3
>> >> --> this is bad since when i get 1000000 of such events how do i rank
>> them?
>> >>
>> >> CONCLUSION:
>> >> my biggest problem is that my lucene document given to the index
>> >> currently is not in a final state BUT i have to index and search it
>> >> also while it is in progress.
>> >> as a result of this the ranking as i do it now has no real value since
>> >> the ranking is just based on a "line of a whole event"
>> >>
>> >> QUESTION:
>> >> is there a solution within lucene to combine search results? e.g. merge
>> >> them OR
>> >> is there a better workaround how i would do such updates to the index
>> >> without storing the original docmuent inside the index (since this
>> >> consumes so many space)? e.g. extracting the keywords that were stored
>> >> for the item?
>> >>
>> >> any hints appreciated.
>> >>
>> >> regards chris
>> >>
>> >>
>> >> ----------
>> >> Christian Brennsteiner
>> >> Salzburg / Austria / Europe
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>>
>>
>> --
>> ----------
>> Christian Brennsteiner
>> Salzburg / Austria / Europe
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



-- 
----------
Christian Brennsteiner
Salzburg / Austria / Europe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 20 11:23:09 2009
Return-Path: <java-user-return-38632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80056 invoked from network); 20 Feb 2009 11:23:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2009 11:23:09 -0000
Received: (qmail 14856 invoked by uid 500); 20 Feb 2009 11:23:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14816 invoked by uid 500); 20 Feb 2009 11:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14805 invoked by uid 99); 20 Feb 2009 11:23:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 03:23:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yusuf.aaji@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 11:22:53 +0000
Received: by fg-out-1718.google.com with SMTP id l26so1371409fgb.27
        for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 03:22:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=Qi7uhOkWo6R4TLgSGGqke9B5JwBxUJQY1pRVCGCEAdM=;
        b=wugwXINHMij+QXvY4fLvv4oWfvOCuDsZn3V/dDldfMJDJV7luf/uWz9pt+tdgajwEm
         atYCXQgaU77BJngLSGGms+HVXTSfKLqaWx7JNu1hnpMkVY8QkUH0xvaMwpvdprDvwwUW
         KQfcHCyBXUb/yaIYJNUI4LFUAD+IF5h4leyNI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=raECaYdk3JmvFoUPU/wvP2QeS1iR4xrkKAZMArwb6sTMQhmVGX66ub566cGxqfn3tq
         pITYIpiLWWLTANBeEjCJXLMAXLAScyj1RTd6vaKHIJ8oNe7wuJinCVemP8mvmCltSl7p
         ZW7q/TNEIQP8PjAS3bVdG9JJ6pbSDwIQAjIUU=
Received: by 10.86.59.18 with SMTP id h18mr989201fga.57.1235128951978;
        Fri, 20 Feb 2009 03:22:31 -0800 (PST)
Received: from ?192.168.1.101? ([94.99.108.0])
        by mx.google.com with ESMTPS id 4sm983973fgg.25.2009.02.20.03.22.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 20 Feb 2009 03:22:31 -0800 (PST)
Message-ID: <499E9273.1050307@gmail.com>
Date: Fri, 20 Feb 2009 14:22:27 +0300
From: Yusuf Aaji <yusuf.aaji@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Regarding ArabicLetterTokenizer and the StandardTokenizer - best
 of both worlds!
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Everyone,


My question is related to the arabic analysis package under: 
org.apache.lucene.analysis.ar


It is cool and it is doing a great job, but it uses a special tokenizer: 
ArabicLetterTokenizer


The problem with this tokenizer is that it fails to handle emails, urls 
and acronyms the same way the StandardTokenizer does.


Also the problem of the StandardTokenizer is that it fails to handle 
arabic diacritics right. so it splits words which shouldn't be splitted.


Arabic diacritics are: (as mentioned in the class: 
org.apache.lucene.analysis.ar.ArabicNormalizer)


FATHATAN = '\u064B';
DAMMATAN = '\u064C';
KASRATAN = '\u064D';
FATHA = '\u064E';
DAMMA = '\u064F';
KASRA = '\u0650';
SHADDA = '\u0651';
SUKUN = '\u0652';


so it is the range [\u064B-\u0652]


Is it possible to modify the StandardTokenizerImp to consider these 
diacritics as normal letters.


I guess it should be done the same way its is done for Chinese and 
Japanese in this line in the file StandardTokenizerImp.jflex


// Chinese and Japanese (but NOT Korean, which is included in [:letter:])

CJ         = 
[\u3100-\u312f\u3040-\u309F\u30A0-\u30FF\u31F0-\u31FF\u3300-\u337f\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff65-\uff9f]


so it can be something like:

AR = [\u064B-\u0652]


then modify this line also to include our new group of characters:


// From the JFlex manual: "the expression that matches everything of <a> 
not matched by <b> is !(!<a>|<b>)"
LETTER     = !(![:letter:]|{CJ}|{AR})



Am I right?! and am I going in the right direction?!! Comments are very 
welcome.


Regards..


Yusuf



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 20 12:04:17 2009
Return-Path: <java-user-return-38633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96791 invoked from network); 20 Feb 2009 12:04:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2009 12:04:17 -0000
Received: (qmail 72940 invoked by uid 500); 20 Feb 2009 12:04:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72908 invoked by uid 500); 20 Feb 2009 12:04:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72897 invoked by uid 99); 20 Feb 2009 12:04:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 04:04:09 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 12:04:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id 8A06A15D4EA
	for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 04:03:38 -0800 (PST)
Message-Id: <92B88FF6-F472-41D0-8CEC-19B4EF55C369@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <499E9273.1050307@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Regarding ArabicLetterTokenizer and the StandardTokenizer - best of both worlds!
Date: Fri, 20 Feb 2009 07:03:36 -0500
References: <499E9273.1050307@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

It's been a few years since I've worked on Arabic, but it sounds  
reasonable.  Care to submit a patch with unit tests showing the  
StandardTokenizer properly handling all Arabic characters?  http://wiki.apache.org/lucene-java/HowToContribute


On Feb 20, 2009, at 6:22 AM, Yusuf Aaji wrote:

> Hi Everyone,
>
>
> My question is related to the arabic analysis package under:  
> org.apache.lucene.analysis.ar
>
>
> It is cool and it is doing a great job, but it uses a special  
> tokenizer: ArabicLetterTokenizer
>
>
> The problem with this tokenizer is that it fails to handle emails,  
> urls and acronyms the same way the StandardTokenizer does.
>
>
> Also the problem of the StandardTokenizer is that it fails to handle  
> arabic diacritics right. so it splits words which shouldn't be  
> splitted.
>
>
> Arabic diacritics are: (as mentioned in the class:  
> org.apache.lucene.analysis.ar.ArabicNormalizer)
>
>
> FATHATAN = '\u064B';
> DAMMATAN = '\u064C';
> KASRATAN = '\u064D';
> FATHA = '\u064E';
> DAMMA = '\u064F';
> KASRA = '\u0650';
> SHADDA = '\u0651';
> SUKUN = '\u0652';
>
>
> so it is the range [\u064B-\u0652]
>
>
> Is it possible to modify the StandardTokenizerImp to consider these  
> diacritics as normal letters.
>
>
> I guess it should be done the same way its is done for Chinese and  
> Japanese in this line in the file StandardTokenizerImp.jflex
>
>
> // Chinese and Japanese (but NOT Korean, which is included in  
> [:letter:])
>
> CJ         = [\u3100-\u312f\u3040-\u309F\u30A0-\u30FF\u31F0-\u31FF 
> \u3300-\u337f\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff65-\uff9f]
>
>
> so it can be something like:
>
> AR = [\u064B-\u0652]
>
>
> then modify this line also to include our new group of characters:
>
>
> // From the JFlex manual: "the expression that matches everything of  
> <a> not matched by <b> is !(!<a>|<b>)"
> LETTER     = !(![:letter:]|{CJ}|{AR})
>
>
>
> Am I right?! and am I going in the right direction?!! Comments are  
> very welcome.
>
>
> Regards..
>
>
> Yusuf
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 20 12:33:42 2009
Return-Path: <java-user-return-38634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8380 invoked from network); 20 Feb 2009 12:33:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2009 12:33:42 -0000
Received: (qmail 98044 invoked by uid 500); 20 Feb 2009 12:33:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98010 invoked by uid 500); 20 Feb 2009 12:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97998 invoked by uid 99); 20 Feb 2009 12:33:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 04:33:35 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 12:33:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 63ABD109F2E
	for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 04:33:00 -0800 (PST)
Message-Id: <3326966C-8145-4047-B9CC-E4A130D3BC9F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <179b305e0902190618m58b7746bm8e6d8239227a572b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: searching a sentence or paragraph
Date: Fri, 20 Feb 2009 07:32:53 -0500
References: <179b305e0902190529t496463f9jd43aa91e06928445@mail.gmail.com> <0DBCCB475CDE864F8F6086D69BFC5D9F02CE720B@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de> <179b305e0902190618m58b7746bm8e6d8239227a572b@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure why using a PhraseQuery allows you to search within a  
sentence.  PhraseQuery just makes sure that the terms appear next to  
each other (or within some slop), but it isn't aware of sentence or  
paragraph boundaries.

See http://www.lucidimagination.com/search/document/6a5dfb8df2ce651b/sentence_boundary_storage



On Feb 19, 2009, at 9:18 AM, Seid Mohammed wrote:

> Thanks Nada,
> it again works perfectly
>
> seid m.
>
> On 2/19/09, Nada Mimouni <mimouni@tk.informatik.tu-darmstadt.de>  
> wrote:
>>
>>
>>
>> You need to create a TermQuery or PhraseQuery with terms in your  
>> query
>> depending on what result you need exactly.
>>
>> To create PhraseQuery, try the built-in phrase processing with double
>> quotes, e.g.
>> "this is a phrase".
>>
>> See the Term section at
>> http://lucene.apache.org/java/2_4_0/queryparsersyntax.html
>>
>> You can also have a look  at
>> http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/Getting-Started-with-Lucene/
>>
>> Best
>> Nada
>>
>>
>> -----Original Message-----
>> From: Seid Mohammed [mailto:seidymam@gmail.com]
>> Sent: Thu 2/19/2009 2:29 PM
>> To: java-user@lucene.apache.org
>> Subject: searching a sentence or paragraph
>>
>> from lucen index, how can we search a sentence or a paragraph which
>> satisfy our query?
>>
>> thanks a lot
>> seid m
>> --
>> "RABI ZIDNI ILMA"
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
> -- 
> "RABI ZIDNI ILMA"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 20 15:08:55 2009
Return-Path: <java-user-return-38635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22339 invoked from network); 20 Feb 2009 15:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2009 15:08:55 -0000
Received: (qmail 51349 invoked by uid 500); 20 Feb 2009 15:08:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51270 invoked by uid 500); 20 Feb 2009 15:08:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51252 invoked by uid 99); 20 Feb 2009 15:08:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 07:08:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 15:08:41 +0000
Received: by qyk13 with SMTP id 13so1553483qyk.5
        for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 07:08:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=6K8/9QtoBq9DgcxWfMdHLsVkw7skiYqu4HIbcGYmkb4=;
        b=XbuooVeSRrztSOXBozAsNIClKaM+sUpnQD+p6ibrRUDqbf+ZAJUWwA1j23UgvpxrZ/
         tmXbECfg2ZPNoeBzioMWWl7GvErabqc+hxrm4Rhmq7IdROCJXAJa5htW7S0ZszevriMo
         E8Pe2Sy+IuMvoQ6cisg2OhWpKCy0tJlnBfySY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SbFvWhmPxUttxeYsCgAsKIbn38WM7ygi7I4tbqKZ7wbwGrZbRMg1Bfjgg5OtToF/ZQ
         1S3PmFBPsupmdUALvVJDzvbpW0cKcXczR96Gr3HooNYhTGnmAtAQAGYjHtwAlxSIfNov
         qI3RvrE7n7dFkjlAu/U54RA02Hd/XIB/2Qn08=
MIME-Version: 1.0
Received: by 10.229.82.81 with SMTP id a17mr230745qcl.107.1235142500135; Fri, 
	20 Feb 2009 07:08:20 -0800 (PST)
In-Reply-To: <92B88FF6-F472-41D0-8CEC-19B4EF55C369@apache.org>
References: <499E9273.1050307@gmail.com>
	 <92B88FF6-F472-41D0-8CEC-19B4EF55C369@apache.org>
Date: Fri, 20 Feb 2009 10:08:20 -0500
Message-ID: <8f0ad1f30902200708p48e8694fob72ab0e7f1dad984@mail.gmail.com>
Subject: Re: Regarding ArabicLetterTokenizer and the StandardTokenizer - best 
	of both worlds!
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646d6dcf7b37c04635b0586
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646d6dcf7b37c04635b0586
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Yusuf,

You are 100% correct it is bad that this uses a custom tokenizer.

this was my motivation for attacking it from this angle:
https://issues.apache.org/jira/browse/LUCENE-1488?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel

(unfinished)

otherwise, at some point jflex rules will become insanely complex and
essentially be trying to reimplement things that unicode has already done.

even using real unicode properties for break iteration still leaves
complexities,
Ex: single quotes in hebrew and ukrainian (i see them using ` as well)

On Fri, Feb 20, 2009 at 7:03 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> It's been a few years since I've worked on Arabic, but it sounds
> reasonable.  Care to submit a patch with unit tests showing the
> StandardTokenizer properly handling all Arabic characters?
> http://wiki.apache.org/lucene-java/HowToContribute
>
>
>
> On Feb 20, 2009, at 6:22 AM, Yusuf Aaji wrote:
>
>  Hi Everyone,
>>
>>
>> My question is related to the arabic analysis package under:
>> org.apache.lucene.analysis.ar
>>
>>
>> It is cool and it is doing a great job, but it uses a special tokenizer:
>> ArabicLetterTokenizer
>>
>>
>> The problem with this tokenizer is that it fails to handle emails, urls
>> and acronyms the same way the StandardTokenizer does.
>>
>>
>> Also the problem of the StandardTokenizer is that it fails to handle
>> arabic diacritics right. so it splits words which shouldn't be splitted.
>>
>>
>> Arabic diacritics are: (as mentioned in the class:
>> org.apache.lucene.analysis.ar.ArabicNormalizer)
>>
>>
>> FATHATAN = '\u064B';
>> DAMMATAN = '\u064C';
>> KASRATAN = '\u064D';
>> FATHA = '\u064E';
>> DAMMA = '\u064F';
>> KASRA = '\u0650';
>> SHADDA = '\u0651';
>> SUKUN = '\u0652';
>>
>>
>> so it is the range [\u064B-\u0652]
>>
>>
>> Is it possible to modify the StandardTokenizerImp to consider these
>> diacritics as normal letters.
>>
>>
>> I guess it should be done the same way its is done for Chinese and
>> Japanese in this line in the file StandardTokenizerImp.jflex
>>
>>
>> // Chinese and Japanese (but NOT Korean, which is included in [:letter:])
>>
>> CJ         =
>> [\u3100-\u312f\u3040-\u309F\u30A0-\u30FF\u31F0-\u31FF\u3300-\u337f\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff65-\uff9f]
>>
>>
>> so it can be something like:
>>
>> AR = [\u064B-\u0652]
>>
>>
>> then modify this line also to include our new group of characters:
>>
>>
>> // From the JFlex manual: "the expression that matches everything of <a>
>> not matched by <b> is !(!<a>|<b>)"
>> LETTER     = !(![:letter:]|{CJ}|{AR})
>>
>>
>>
>> Am I right?! and am I going in the right direction?!! Comments are very
>> welcome.
>>
>>
>> Regards..
>>
>>
>> Yusuf
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
> Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) using
> Solr/Lucene:
> http://www.lucidimagination.com/search
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--00163646d6dcf7b37c04635b0586--

From java-user-return-38636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 20 18:01:05 2009
Return-Path: <java-user-return-38636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88094 invoked from network); 20 Feb 2009 18:01:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2009 18:01:05 -0000
Received: (qmail 86821 invoked by uid 500); 20 Feb 2009 18:00:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86794 invoked by uid 500); 20 Feb 2009 18:00:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86783 invoked by uid 99); 20 Feb 2009 18:00:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 10:00:58 -0800
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ken.williams@thomsonreuters.com designates 163.231.12.70 as permitted sender)
Received: from [163.231.12.70] (HELO mailout3-tlr.thomson.com) (163.231.12.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 18:00:48 +0000
Received: from mailout3-tlr.thomson.com (localhost [127.0.0.1])
	by mailout3-tlr.thomson.com (Switch-3.2.7/Switch-3.2.7) with ESMTP id n1KI0RWK005730
	for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 18:00:27 GMT
Received: from tlrusmneagfe04.ERF.THOMSON.COM (tlrusmneagfe04.erf.thomson.com [163.231.22.131])
	by mailout3-tlr.thomson.com (Switch-3.2.7/Switch-3.2.7) with ESMTP id n1KI0QPS005727
	for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 18:00:26 GMT
Received: from TLRUSMNEAGMBX22.ERF.THOMSON.COM ([163.231.30.224]) by tlrusmneagfe04.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 20 Feb 2009 12:00:26 -0600
Received: from 163.231.65.100 ([163.231.65.100]) by TLRUSMNEAGMBX22.ERF.THOMSON.COM ([163.231.30.212]) via Exchange Front-End Server mail.west.thomson.com ([163.231.22.145]) with Microsoft Exchange Server HTTP-DAV ;
 Fri, 20 Feb 2009 18:00:26 +0000
User-Agent: Microsoft-Entourage/12.15.0.081119
Date: Fri, 20 Feb 2009 12:00:24 -0600
Subject: Confidence scores at search time
From: Ken Williams <ken.williams@thomsonreuters.com>
To: <java-user@lucene.apache.org>
Message-ID: <C5C44BD8.1ECA1%ken.williams@thomsonreuters.com>
Thread-Topic: Confidence scores at search time
Thread-Index: AcmThRpsll0kaGT3Q02zC3+sAnYKig==
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-OriginalArrivalTime: 20 Feb 2009 18:00:26.0780 (UTC) FILETIME=[1C145DC0:01C99385]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Has there been any work done on getting confidence scores at runtime, so
that scores of documents can be compared across queries?  I found one
reference in the mailing list to some work in 2003, but couldn't find any
follow-up:

  http://osdir.com/ml/jakarta.lucene.user/2003-12/msg00093.html

Thanks.

-- 
Ken Williams
Research Scientist
The Thomson Reuters Corporation
Eagan, MN


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 20 21:03:38 2009
Return-Path: <java-user-return-38637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53807 invoked from network); 20 Feb 2009 21:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2009 21:03:38 -0000
Received: (qmail 15062 invoked by uid 500); 20 Feb 2009 21:03:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15030 invoked by uid 500); 20 Feb 2009 21:03:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15019 invoked by uid 99); 20 Feb 2009 21:03:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 13:03:31 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 21:03:22 +0000
Received: by rv-out-0506.google.com with SMTP id k40so1583853rvb.5
        for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 13:03:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=WSSDLB53UoWV1phZdDeHYknUEGxC39SzYnjQswOw0v4=;
        b=W3XYHnqVKTVT2OknN9xxaVvnRPSBrihEF5YmnCKmrSYVuNPTBVOeXe6/sDcN9c1blV
         j2xYtrfFLkrwuaRkNlOon9QiZ5yAyxqxXP+t5oos4brbeBb/zqL5kGFhBTihChCBW02K
         p3aYrXkLsLMN+niTs+E3ztDjnKrQ4y6OMCr+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=UWT5MQGjSqZPmzY0SzokLyaeJneG/zJp86FqROln2A+C98Z5mUswmeCgVgt2JNhhEP
         rTi7/CMv9YXdXZ4Y3yLcnM9m7NkHtX5BoBwgxQPeD0LoOxxFSyU/cIsXsRUp8X3PKyp/
         GALp2Mk7nAbPNEOAFtETiasW2hKvzHodpiLuM=
MIME-Version: 1.0
Received: by 10.140.163.12 with SMTP id l12mr591668rve.178.1235163781126; Fri, 
	20 Feb 2009 13:03:01 -0800 (PST)
Date: Fri, 20 Feb 2009 16:03:00 -0500
Message-ID: <e994873a0902201303y62d320aoa7d92a89fc7fac7f@mail.gmail.com>
Subject: queryNorm affect on score
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=000e0cd2e25869da1804635ffacc
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2e25869da1804635ffacc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The explanation of scores from the same document returned from 2 similar
queries differ in an unexpected way. There are 2 fields involved, 'contents'
and 'literals'. The 'literals' field has setBoost = 0. As you an see from
the explanations below, the total weight of the matching terms from the
'literal' field is 0. However, the weights produced by the matching terms in
the 'contents' field is very different, even with the same matching terms.
The reason is that the 'queryNorm' value is very different because the
'sumOfSquaredWeights' is very different. Why is this?

First query: +(+contents:sales +contents:representative) +literals:jb$1
Explanation:
32.274593  sum of:
  32.274593  sum of:
    10.336284  weight(contents:sales in 14578), product of:
      0.54963183  queryWeight(contents:sales), product of:
        2.6595461  idf(contents: sales=83179)
        0.20666377  queryNorm
      18.805832  fieldWeight(contents:sales in 14578), product of:
        7.071068  btq, product of:
          1.4142135  tf(phraseFreq=3.0)
          5.0  scorePayload(...)
        2.6595461  idf(contents: sales=83179)
        1.0  fieldNorm(field=contents, doc=14578)
    21.93831  weight(contents:representative in 14578), product of:
      0.8007395  queryWeight(contents:representative), product of:
        3.8746004  idf(contents: representative=24678)
        0.20666377  queryNorm
      27.397562  fieldWeight(contents:representative in 14578), product of:
        7.071068  btq, product of:
          1.4142135  tf(phraseFreq=2.0)
          5.0  scorePayload(...)
        3.8746004  idf(contents: representative=24678)
        1.0  fieldNorm(field=contents, doc=14578)
  0.0  weight(literals:jb$1 in 14578), product of:
    0.23816177  queryWeight(literals:jb$1), product of:
      1.1524118  idf(docFreq=375455, numDocs=436917)
      0.20666377  queryNorm
    0.0  fieldWeight(literals:jb$1 in 14578), product of:
      1.0  tf(termFreq(literals:jb$1)=1)
      1.1524118  idf(docFreq=375455, numDocs=436917)
      0.0  fieldNorm(field=literals, doc=14578)


Second query: +(+contents:sales +contents:representative) +(literals:jb$1
literals:jb$9999)
Explanation:
10.550879  sum of:
  10.550879  sum of:
    3.3790317  weight(contents:sales in 14578), product of:
      0.17967999  queryWeight(contents:sales), product of:
        2.6595461  idf(contents: sales=83179)
        0.0675604  queryNorm
      18.805832  fieldWeight(contents:sales in 14578), product of:
        7.071068  btq, product of:
          1.4142135  tf(phraseFreq=3.0)
          5.0  scorePayload(...)
        2.6595461  idf(contents: sales=83179)
        1.0  fieldNorm(field=contents, doc=14578)
    7.171847  weight(contents:representative in 14578), product of:
      0.26176953  queryWeight(contents:representative), product of:
        3.8746004  idf(contents: representative=24678)
        0.0675604  queryNorm
      27.397562  fieldWeight(contents:representative in 14578), product of:
        7.071068  btq, product of:
          1.4142135  tf(phraseFreq=2.0)
          5.0  scorePayload(...)
        3.8746004  idf(contents: representative=24678)
        1.0  fieldNorm(field=contents, doc=14578)
  0.0  product of:
    0.0  sum of:
      0.0  weight(literals:jb$1 in 14578), product of:
        0.0778574  queryWeight(literals:jb$1), product of:
          1.1524118  idf(docFreq=375455, numDocs=436917)
          0.0675604  queryNorm
        0.0  fieldWeight(literals:jb$1 in 14578), product of:
          1.0  tf(termFreq(literals:jb$1)=1)
          1.1524118  idf(docFreq=375455, numDocs=436917)
          0.0  fieldNorm(field=literals, doc=14578)
    0.5  coord(1/2)





Peter

--000e0cd2e25869da1804635ffacc--

From java-user-return-38638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 21 01:11:37 2009
Return-Path: <java-user-return-38638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39417 invoked from network); 21 Feb 2009 01:11:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2009 01:11:37 -0000
Received: (qmail 76906 invoked by uid 500); 21 Feb 2009 01:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76880 invoked by uid 500); 21 Feb 2009 01:11:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76869 invoked by uid 99); 21 Feb 2009 01:11:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 17:11:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 01:11:21 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 98C5A71C1B9; Fri, 20 Feb 2009 17:11:00 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9010971C1AA
	for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 17:11:00 -0800 (PST)
Date: Fri, 20 Feb 2009 17:11:00 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: 2.3.2 -> 2.4.0 StandardTokenizer issue
In-Reply-To: <00cf01c99095$5eda9540$1c8fbfc0$@com>
Message-ID: <Pine.LNX.4.64.0902201704150.10226@radix.cryptio.net>
References: <00cf01c99095$5eda9540$1c8fbfc0$@com>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="1171305770-845249685-1235178660=:10226"
X-Virus-Checked: Checked by ClamAV on apache.org

--1171305770-845249685-1235178660=:10226
Content-Type: TEXT/PLAIN; charset=UTF-8
Content-Transfer-Encoding: QUOTED-PRINTABLE


: In 2.3.2 if the token =91Co=ECmo=92 came through this it would get change=
d to
: =91como=92 by the time it made it through the filters.    In 2.4.0 this i=
sn=92t
: the case.   It treats this one token as two so we get =91co=92 and =91mo=
=92.    So
: instead of search =91como=92 or =91Co=ECmo=92 to get all the hits we now =
have to do
: them separately.

some changes were made to the StandardTokenizer.jflex grammer (you can svn=
=20
diff the two URLs fairly trivially) to better deal with correctly=20
identifying word characters, but from what i can tell that should have=20
reduced the number of splits, not increased them.

it's hard to tell from your email (because it was sent in the windows-1252=
=20
charset) but what exactly are the unicode characters you are putting=20
through the tokenizer (ie: "\u0030") ?  knowing where it's splitting would=
=20
help figure out what's happening.

worst case scenerio, you could probably use the StandardTokenizer from=20
2.3.2 with the rest of the 2.4 code.

this will show you exactly what changed...
svn diff http://svn.apache.org/repos/asf/lucene/java/branches/lucene_2_3/sr=
c/java/org/apache/lucene/analysis/standard/StandardTokenizerImpl.jflex http=
://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lucene/an=
alysis/standard/StandardTokenizerImpl.jflex



-Hoss


--1171305770-845249685-1235178660=:10226
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--1171305770-845249685-1235178660=:10226--

From java-user-return-38639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 21 04:17:37 2009
Return-Path: <java-user-return-38639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83383 invoked from network); 21 Feb 2009 04:17:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2009 04:17:37 -0000
Received: (qmail 63823 invoked by uid 500); 21 Feb 2009 04:17:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63794 invoked by uid 500); 21 Feb 2009 04:17:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63783 invoked by uid 99); 21 Feb 2009 04:17:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 20:17:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ppuffinburger@tlcdelivers.com designates 63.119.22.96 as permitted sender)
Received: from [63.119.22.96] (HELO mx.tlcdelivers.com) (63.119.22.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 04:17:21 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx.tlcdelivers.com (Postfix) with ESMTP id 10688427C2FA
	for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 23:17:00 -0500 (EST)
X-Virus-Scanned: amavisd-new at 
Received: from mx.tlcdelivers.com ([127.0.0.1])
	by localhost (mx.tlcdelivers.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cG1Qao47AN-Y for <java-user@lucene.apache.org>;
	Fri, 20 Feb 2009 23:16:56 -0500 (EST)
Received: from Gidora (unknown [10.1.0.4])
	by mx.tlcdelivers.com (Postfix) with ESMTP id 41E7E427C0BE
	for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 23:16:56 -0500 (EST)
From: "Philip Puffinburger" <ppuffinburger@tlcdelivers.com>
To: <java-user@lucene.apache.org>
References: <00cf01c99095$5eda9540$1c8fbfc0$@com> <Pine.LNX.4.64.0902201704150.10226@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.64.0902201704150.10226@radix.cryptio.net>
Subject: RE: 2.3.2 -> 2.4.0 StandardTokenizer issue
Date: Fri, 20 Feb 2009 23:16:54 -0500
Message-ID: <008101c993db$3adddff0$b0999fd0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcmTwVrpx6cCV9Z4QdCMGPbgzOiUSAAF8GJg
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

>some changes were made to the StandardTokenizer.jflex grammer (you can =
svn diff the two URLs fairly trivially) to better deal with correctly =
>identifying word characters, but from what i can tell that should have =
reduced the number of splits, not increased them.
>
>it's hard to tell from your email (because it was sent in the =
windows-1252
>charset) but what exactly are the unicode characters you are putting =
through the tokenizer (ie: "\u0030") ?  knowing where it's splitting =
would >help figure out what's happening.

These are the characters that of going through:

\u0043 \u006F \u0301 \u006D \u006F - C o <Combining Acute Accent> m o

It's splitting at the \u0301.

>worst case scenerio, you could probably use the StandardTokenizer from
>2.3.2 with the rest of the 2.4 code.

We've thought of that, but would be the last thing we did to get it back =
to working.

>this will show you exactly what changed...
>svn diff =
>http://svn.apache.org/repos/asf/lucene/java/branches/lucene_2_3/src/java=
/org/apache/lucene/analysis/standard/StandardTokenizerImpl.jflex =
>http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lu=
cene/analysis/standard/StandardTokenizerImpl.jflex

Thanks for the links.   I've never dealt with JFlex, so I'll have to do =
some reading to know what is going on in those files.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 21 06:53:36 2009
Return-Path: <java-user-return-38640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36892 invoked from network); 21 Feb 2009 06:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2009 06:53:36 -0000
Received: (qmail 5710 invoked by uid 500); 21 Feb 2009 06:53:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5680 invoked by uid 500); 21 Feb 2009 06:53:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5669 invoked by uid 99); 21 Feb 2009 06:53:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Feb 2009 22:53:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of seidymam@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 06:53:19 +0000
Received: by bwz11 with SMTP id 11so3412612bwz.5
        for <java-user@lucene.apache.org>; Fri, 20 Feb 2009 22:52:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=iqkvkD/PVBkXj2sAz8Igj3PqJdJECec9OFIJI+gvFeE=;
        b=ckrxJuOVQ7aJIY9qwWDOL+gizHZ+ZUXW4Xw44Z5KZ0IyMt/fcGNRGM4VtEMgxMjaTZ
         hcvnO2IgPqblOY2n9o2B21Y9EUEIcDTNOyvGhW0tITFPMLmAiLHccvCQOGPB+tq/ogvN
         yabP2jl/GhBfe10376OYCIfElAsDQwnROtHaU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=qEnAiX1Hu8A2+iTeK1LVvPSXAppXQbK7WRJ9zn1tAiv5NCweEY7+8HUb98LrIEineP
         2ZLn+/15LrnPq61ujq0gd/g34RSnkkaeOb/mEfvAZXYQ8wn8YhtS9GYbNOWhtOodPtir
         cCADSZmbwpDMprky/qyuzj8NG2UFGJQDeW1MU=
MIME-Version: 1.0
Received: by 10.181.145.7 with SMTP id x7mr583433bkn.96.1235199178622; Fri, 20 
	Feb 2009 22:52:58 -0800 (PST)
In-Reply-To: <6D865071-F781-4D32-8B5A-4DC541D6EF70@mikemccandless.com>
References: <179b305e0902190741o556070a2q5dc8080822e1ca10@mail.gmail.com>
	 <359a92830902190801w3c5dd50dh98641d45c666114a@mail.gmail.com>
	 <179b305e0902190813k9196190t99b639ab3b881e20@mail.gmail.com>
	 <359a92830902191003u6d88e450u73d924e4e36eebd5@mail.gmail.com>
	 <6D865071-F781-4D32-8B5A-4DC541D6EF70@mikemccandless.com>
Date: Sat, 21 Feb 2009 09:52:58 +0300
Message-ID: <179b305e0902202252t1e8cabdegb9b33b597a5ef5cc@mail.gmail.com>
Subject: Re: Indexer.Java problem
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

tanks erick
i have got the latest INDEXER example from lia2 working properly
thanks a lot

Seid M

On 2/19/09, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> The early access version of LIA2 (accessible at
> http://www.manning.com/hatcher3/)
>   has updated this example to work with recent Lucene releases (though
> it's still using deprecated APIs -- that'll be fixed before the book
> is released).
>
> Oh actually the first chapter is a free PDF on Manning's site.
>
> Mike
>
> Erick Erickson wrote:
>
>> Unfortunately, not really. I haven't tried to get the LIA examples
>> working for years...
>>
>> The various release notes on the Wiki, especially the 1.9 and 2.0
>> release
>> notes are probably the best place to start.
>>
>> Best
>> Erick
>>
>> On Thu, Feb 19, 2009 at 11:13 AM, Seid Mohammed <seidymam@gmail.com>
>> wrote:
>>
>>> I better modify it, but can you give just a hint on how to modify
>>> thanks a lot
>>>
>>> Seid M
>>>
>>> On 2/19/09, Erick Erickson <erickerickson@gmail.com> wrote:
>>>> LIA was written for a pretty early version of Lucene, if you're
>>>> using a
>>>> recent
>>>> release you need to modify the code to be compliant with that
>>>> version.
>>>>
>>>> Or install an older release of Lucene.
>>>>
>>>> Erick
>>>>
>>>> On Thu, Feb 19, 2009 at 10:41 AM, Seid Mohammed <seidymam@gmail.com>
>>> wrote:
>>>>
>>>>> I am using netbeans on windows to test lucene.
>>>>> I have added all the lib files from the /lib directory to my
>>>>> project
>>>>> library.
>>>>> down the end of Indexer.java program, it states the Field.Text
>>>>> method
>>>>> is not available
>>>>> the error message is as follows
>>>>>
>>>>>
>>> ---------------------------------------------------------------------------------------------------------------
>>>>>
>>>>> C:\backup\msc\year2sem1\JavSrc\Lucene\src\Indexer.java:18:
>>>>> duplicate
>>>>> class: lia.meetlucene.Indexer
>>>>> public class Indexer {
>>>>>
>>>>>
>>> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene
>>> \Indexer.java:80:
>>>>> cannot find symbol
>>>>> symbol  : method Text(java.lang.String,java.io.FileReader)
>>>>> location: class org.apache.lucene.document.Field
>>>>>   doc.add(Field.Text("contents", new FileReader(f)));
>>>>>
>>>>>
>>> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene
>>> \Indexer.java:81:
>>>>> cannot find symbol
>>>>> symbol  : method Keyword(java.lang.String,java.lang.String)
>>>>> location: class org.apache.lucene.document.Field
>>>>>   doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>>>>> Note:
>>>>>
>>> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene
>>> \Indexer.java
>>>>> uses or overrides a deprecated API.
>>>>> Note: Recompile with -Xlint:deprecation for details.
>>>>> 3 errors
>>>>> BUILD FAILED (total time: 2 seconds)
>>>>>
>>>>>
>>> -----------------------------------------------------------------------------------------------------------------------------------
>>>>> what is wrong?
>>>>> it underlines in red for the folowing code....
>>>>> =========================================================
>>>>>   Document doc = new Document();
>>>>>   doc.add(Field.Text("contents", new FileReader(f)));
>>>>>   doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>>>>>   writer.addDocument(doc);
>>>>> ===================================================
>>>>>
>>>>> seid m
>>>>> --
>>>>> "RABI ZIDNI ILMA"
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>
>>>
>>> --
>>> "RABI ZIDNI ILMA"
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 21 09:54:18 2009
Return-Path: <java-user-return-38641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11983 invoked from network); 21 Feb 2009 09:54:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2009 09:54:18 -0000
Received: (qmail 78042 invoked by uid 500); 21 Feb 2009 09:54:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78017 invoked by uid 500); 21 Feb 2009 09:54:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78006 invoked by uid 99); 21 Feb 2009 09:54:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 01:54:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 09:54:01 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0FF9430EFC12; Sat, 21 Feb 2009 02:53:37 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.193] (unknown [138.210.8.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 77ACA30EFC11
	for <java-user@lucene.apache.org>; Sat, 21 Feb 2009 02:53:31 -0700 (MST)
Message-Id: <7ED02350-076A-4587-993E-3B97D07B2B6B@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <179b305e0902190741o556070a2q5dc8080822e1ca10@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Indexer.Java problem
Date: Sat, 21 Feb 2009 04:53:30 -0500
References: <179b305e0902190741o556070a2q5dc8080822e1ca10@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

Also, the first several hits here provide the tricks to update the  
code to the latest API:

    <http://www.lucidimagination.com/search/?q=lucene+in+action+examples+update 
 >  :)

	Erik


On Feb 19, 2009, at 10:41 AM, Seid Mohammed wrote:

> I am using netbeans on windows to test lucene.
> I have added all the lib files from the /lib directory to my project  
> library.
> down the end of Indexer.java program, it states the Field.Text method
> is not available
> the error message is as follows
> ---------------------------------------------------------------------------------------------------------------
>
> C:\backup\msc\year2sem1\JavSrc\Lucene\src\Indexer.java:18: duplicate
> class: lia.meetlucene.Indexer
> public class Indexer {
> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene 
> \Indexer.java:80:
> cannot find symbol
> symbol  : method Text(java.lang.String,java.io.FileReader)
> location: class org.apache.lucene.document.Field
>    doc.add(Field.Text("contents", new FileReader(f)));
> C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene 
> \Indexer.java:81:
> cannot find symbol
> symbol  : method Keyword(java.lang.String,java.lang.String)
> location: class org.apache.lucene.document.Field
>    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
> Note: C:\backup\msc\luceninaction\LuceneInAction\src\lia\meetlucene 
> \Indexer.java
> uses or overrides a deprecated API.
> Note: Recompile with -Xlint:deprecation for details.
> 3 errors
> BUILD FAILED (total time: 2 seconds)
> -----------------------------------------------------------------------------------------------------------------------------------
> what is wrong?
> it underlines in red for the folowing code....
> =========================================================
>    Document doc = new Document();
>    doc.add(Field.Text("contents", new FileReader(f)));
>    doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>    writer.addDocument(doc);
> ===================================================
>
> seid m
> -- 
> "RABI ZIDNI ILMA"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 21 13:35:19 2009
Return-Path: <java-user-return-38642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93291 invoked from network); 21 Feb 2009 13:35:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2009 13:35:19 -0000
Received: (qmail 95979 invoked by uid 500); 21 Feb 2009 13:35:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95946 invoked by uid 500); 21 Feb 2009 13:35:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95935 invoked by uid 99); 21 Feb 2009 13:35:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 05:35:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 13:35:04 +0000
Received: by qyk13 with SMTP id 13so2165076qyk.5
        for <java-user@lucene.apache.org>; Sat, 21 Feb 2009 05:34:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=DzQLOCiMf3CltvU8TpQjvlKaKh8aA6cMNgsvctCTfak=;
        b=XqgHCP8wkhxKcQXl/lJirEjXfKaoUi2sOOuCm3jiU7dfuVWe4g5iwdF9KzVz6q99U4
         dcso2QoHH08QW81wPOx6xmRDSKHYXUVq7aIXaDnatnF0/tkokgtYNF0QoVm9JBl/g25+
         Q8rNDaF56FphJTs9mdQCPl95MrxU4I6uxEBFU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Nof67pQGZQwB9UXWNMP01Nky2dXxsyiBeQ174yii9wIlwUD/eRwg2IfxtNsDGVTmne
         wNZwS+7oq7XgJKvWCQ5PQhnMpNwW/qgbsX87gH0277zU2hOzMJxb6UxoMoKuQ4ZPGdOE
         fC1/avQqph84J4uM7AoaXVHP/F+TI5RYr5qk8=
MIME-Version: 1.0
Received: by 10.229.100.68 with SMTP id x4mr1019495qcn.1.1235223283635; Sat, 
	21 Feb 2009 05:34:43 -0800 (PST)
In-Reply-To: <008101c993db$3adddff0$b0999fd0$@com>
References: <00cf01c99095$5eda9540$1c8fbfc0$@com>
	 <Pine.LNX.4.64.0902201704150.10226@radix.cryptio.net>
	 <008101c993db$3adddff0$b0999fd0$@com>
Date: Sat, 21 Feb 2009 08:34:43 -0500
Message-ID: <8f0ad1f30902210534x4e950d6ei6d70f1d8e76e41c7@mail.gmail.com>
Subject: Re: 2.3.2 -> 2.4.0 StandardTokenizer issue
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364eed9c0a16fb04636dd591
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364eed9c0a16fb04636dd591
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

normalize your text to NFC. then it will be \u0043 \u00F3 \u006D \u006F and
will work...

On Fri, Feb 20, 2009 at 11:16 PM, Philip Puffinburger <
ppuffinburger@tlcdelivers.com> wrote:

> >some changes were made to the StandardTokenizer.jflex grammer (you can svn
> diff the two URLs fairly trivially) to better deal with correctly
> >identifying word characters, but from what i can tell that should have
> reduced the number of splits, not increased them.
> >
> >it's hard to tell from your email (because it was sent in the windows-1252
> >charset) but what exactly are the unicode characters you are putting
> through the tokenizer (ie: "\u0030") ?  knowing where it's splitting would
> >help figure out what's happening.
>
> These are the characters that of going through:
>
> \u0043 \u006F \u0301 \u006D \u006F - C o <Combining Acute Accent> m o
>
> It's splitting at the \u0301.
>
> >worst case scenerio, you could probably use the StandardTokenizer from
> >2.3.2 with the rest of the 2.4 code.
>
> We've thought of that, but would be the last thing we did to get it back to
> working.
>
> >this will show you exactly what changed...
> >svn diff >
> http://svn.apache.org/repos/asf/lucene/java/branches/lucene_2_3/src/java/org/apache/lucene/analysis/standard/StandardTokenizerImpl.jflex>
> http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lucene/analysis/standard/StandardTokenizerImpl.jflex
>
> Thanks for the links.   I've never dealt with JFlex, so I'll have to do
> some reading to know what is going on in those files.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016364eed9c0a16fb04636dd591--

From java-user-return-38643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 21 16:24:37 2009
Return-Path: <java-user-return-38643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48501 invoked from network); 21 Feb 2009 16:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2009 16:24:37 -0000
Received: (qmail 79128 invoked by uid 500); 21 Feb 2009 16:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79099 invoked by uid 500); 21 Feb 2009 16:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79088 invoked by uid 99); 21 Feb 2009 16:24:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 08:24:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ppuffinburger@tlcdelivers.com designates 63.119.22.96 as permitted sender)
Received: from [63.119.22.96] (HELO mx.tlcdelivers.com) (63.119.22.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 16:24:20 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx.tlcdelivers.com (Postfix) with ESMTP id A0B3C427C04D
	for <java-user@lucene.apache.org>; Sat, 21 Feb 2009 11:23:59 -0500 (EST)
X-Virus-Scanned: amavisd-new at wsl-mx1.tlcdelivers.com
Received: from mx.tlcdelivers.com ([127.0.0.1])
	by localhost (mx.tlcdelivers.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DYH03QALcunx for <java-user@lucene.apache.org>;
	Sat, 21 Feb 2009 11:23:57 -0500 (EST)
Received: from Gidora (c-68-33-199-178.hsd1.wv.comcast.net [68.33.199.178])
	by mx.tlcdelivers.com (Postfix) with ESMTP id 3D233427C04B
	for <java-user@lucene.apache.org>; Sat, 21 Feb 2009 11:23:57 -0500 (EST)
From: "Philip Puffinburger" <ppuffinburger@tlcdelivers.com>
To: <java-user@lucene.apache.org>
References: <00cf01c99095$5eda9540$1c8fbfc0$@com>	 <Pine.LNX.4.64.0902201704150.10226@radix.cryptio.net>	 <008101c993db$3adddff0$b0999fd0$@com> <8f0ad1f30902210534x4e950d6ei6d70f1d8e76e41c7@mail.gmail.com>
In-Reply-To: <8f0ad1f30902210534x4e950d6ei6d70f1d8e76e41c7@mail.gmail.com>
Subject: RE: 2.3.2 -> 2.4.0 StandardTokenizer issue
Date: Sat, 21 Feb 2009 11:23:53 -0500
Message-ID: <008601c99440$c9831a80$5c894f80$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcmULwQaqUl9lS1qQVq4qbQJSn/dIAAEViGw
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

That's something we can try.   I don't know how much it performance we'd =
lose doing that as our custom filter has to decompose the tokens to do =
its operations.   So instead of 0..1 conversions we'd be doing 1..2 =
conversions during indexing and searching.

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Saturday, February 21, 2009 8:35 AM
To: java-user@lucene.apache.org
Subject: Re: 2.3.2 -> 2.4.0 StandardTokenizer issue

normalize your text to NFC. then it will be \u0043 \u00F3 \u006D \u006F =
and
will work...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 21 16:52:29 2009
Return-Path: <java-user-return-38644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58524 invoked from network); 21 Feb 2009 16:52:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2009 16:52:29 -0000
Received: (qmail 5060 invoked by uid 500); 21 Feb 2009 16:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4261 invoked by uid 500); 21 Feb 2009 16:52:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4250 invoked by uid 99); 21 Feb 2009 16:52:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 08:52:21 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 16:52:13 +0000
Received: by qw-out-2122.google.com with SMTP id 5so423393qwi.53
        for <java-user@lucene.apache.org>; Sat, 21 Feb 2009 08:51:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zRpJZMaNYKCy1vcbqt5CCdy0qEUB4V1FZGOWlkclhH4=;
        b=fMzYjsBcSWE5wPn9vCMf4Qn9Jq2aU9GBkRyJtFs83gz1bIKask607B56/t7HbCsyh7
         uh6M7+ztRo/Qho/OlsIwxwaVIfCEWyDSVkr9l82fZJlOef4wPHnJtLF3yeDOx1vrBoUD
         6CpajcW2bppmLF9sTLxKGKEnunphLvw4lPG6Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PVOq/JStpRvhfVE9XghOPoXF17fhTwZaDCoMckUve+2VkMcSTmsEBm2KKdDHMw1G+m
         Yu5IfehdPca2mSdKktX8rEg665P3IyTZabgIMLfcD5g/8YzfiOur4XCHPPDykgGZ6Y5G
         cYhFkbcvbAXQdeDxL+p4VKGq7+zlfYIgWvVwg=
MIME-Version: 1.0
Received: by 10.229.85.14 with SMTP id m14mr958129qcl.64.1235235112688; Sat, 
	21 Feb 2009 08:51:52 -0800 (PST)
In-Reply-To: <008601c99440$c9831a80$5c894f80$@com>
References: <00cf01c99095$5eda9540$1c8fbfc0$@com>
	 <Pine.LNX.4.64.0902201704150.10226@radix.cryptio.net>
	 <008101c993db$3adddff0$b0999fd0$@com>
	 <8f0ad1f30902210534x4e950d6ei6d70f1d8e76e41c7@mail.gmail.com>
	 <008601c99440$c9831a80$5c894f80$@com>
Date: Sat, 21 Feb 2009 11:51:52 -0500
Message-ID: <8f0ad1f30902210851p1f36be24kd3de2cf54e0fed23@mail.gmail.com>
Subject: Re: 2.3.2 -> 2.4.0 StandardTokenizer issue
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163642749e1b1d0f04637096fd
X-Virus-Checked: Checked by ClamAV on apache.org

--00163642749e1b1d0f04637096fd
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

that was just a suggestion as a quick hack...

it still won't really fix the problem because some character + accent
combinations don't have composed forms.

even if you added entire combining diacritical marks block to the jflex
grammar, its still wrong... what needs to be supported is \p{Word_Break =
Extend} property, etc etc.


On Sat, Feb 21, 2009 at 11:23 AM, Philip Puffinburger <
ppuffinburger@tlcdelivers.com> wrote:

> That's something we can try.   I don't know how much it performance we'd
> lose doing that as our custom filter has to decompose the tokens to do its
> operations.   So instead of 0..1 conversions we'd be doing 1..2 conversions
> during indexing and searching.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Saturday, February 21, 2009 8:35 AM
> To: java-user@lucene.apache.org
> Subject: Re: 2.3.2 -> 2.4.0 StandardTokenizer issue
>
> normalize your text to NFC. then it will be \u0043 \u00F3 \u006D \u006F and
> will work...
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--00163642749e1b1d0f04637096fd--

From java-user-return-38645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 21 17:19:56 2009
Return-Path: <java-user-return-38645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65996 invoked from network); 21 Feb 2009 17:19:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2009 17:19:56 -0000
Received: (qmail 46487 invoked by uid 500); 21 Feb 2009 17:19:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46460 invoked by uid 500); 21 Feb 2009 17:19:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46449 invoked by uid 99); 21 Feb 2009 17:19:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 09:19:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ppuffinburger@tlcdelivers.com designates 63.119.22.96 as permitted sender)
Received: from [63.119.22.96] (HELO mx.tlcdelivers.com) (63.119.22.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 17:19:41 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx.tlcdelivers.com (Postfix) with ESMTP id CA82D427C2ED
	for <java-user@lucene.apache.org>; Sat, 21 Feb 2009 12:19:20 -0500 (EST)
X-Virus-Scanned: amavisd-new at wsl-mx1.tlcdelivers.com
Received: from mx.tlcdelivers.com ([127.0.0.1])
	by localhost (mx.tlcdelivers.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Qu1EgtzgTv-w for <java-user@lucene.apache.org>;
	Sat, 21 Feb 2009 12:19:20 -0500 (EST)
Received: from Gidora (c-68-33-199-178.hsd1.wv.comcast.net [68.33.199.178])
	by mx.tlcdelivers.com (Postfix) with ESMTP id 3F208427C2E8
	for <java-user@lucene.apache.org>; Sat, 21 Feb 2009 12:19:20 -0500 (EST)
From: "Philip Puffinburger" <ppuffinburger@tlcdelivers.com>
To: <java-user@lucene.apache.org>
References: <00cf01c99095$5eda9540$1c8fbfc0$@com>	 <Pine.LNX.4.64.0902201704150.10226@radix.cryptio.net>	 <008101c993db$3adddff0$b0999fd0$@com>	 <8f0ad1f30902210534x4e950d6ei6d70f1d8e76e41c7@mail.gmail.com>	 <008601c99440$c9831a80$5c894f80$@com> <8f0ad1f30902210851p1f36be24kd3de2cf54e0fed23@mail.gmail.com>
In-Reply-To: <8f0ad1f30902210851p1f36be24kd3de2cf54e0fed23@mail.gmail.com>
Subject: RE: 2.3.2 -> 2.4.0 StandardTokenizer issue
Date: Sat, 21 Feb 2009 12:19:15 -0500
Message-ID: <008a01c99448$860f8510$922e8f30$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcmURMiKwd/FeakOQfaTtheuVx2BfwAA5Kdg
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the suggestion.   We're going to go over all of this =
information/suggestions next week to see what we want to do.

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Saturday, February 21, 2009 11:52 AM
To: java-user@lucene.apache.org
Subject: Re: 2.3.2 -> 2.4.0 StandardTokenizer issue

that was just a suggestion as a quick hack...

it still won't really fix the problem because some character + accent
combinations don't have composed forms.

even if you added entire combining diacritical marks block to the jflex
grammar, its still wrong... what needs to be supported is \p{Word_Break =
=3D
Extend} property, etc etc.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 21 20:34:30 2009
Return-Path: <java-user-return-38646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46283 invoked from network); 21 Feb 2009 20:34:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2009 20:34:30 -0000
Received: (qmail 82324 invoked by uid 500); 21 Feb 2009 20:34:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82293 invoked by uid 500); 21 Feb 2009 20:34:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82282 invoked by uid 99); 21 Feb 2009 20:34:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 12:34:23 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 20:34:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LayXq-0005jY-BH
	for java-user@lucene.apache.org; Sat, 21 Feb 2009 12:33:54 -0800
Message-ID: <22140272.post@talk.nabble.com>
Date: Sat, 21 Feb 2009 12:33:54 -0800 (PST)
From: Kanterwoopy <burgerbug@web.de>
To: java-user@lucene.apache.org
Subject: How can i analyse a Lucene Query ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: burgerbug@web.de
X-Virus-Checked: Checked by ClamAV on apache.org


I have to know the words which were important that a post was found by the
searcher. What classes can i use for this ?
What does QueryScorer do ? 
Can somebody give me a short overview over my possibilities ?

-- 
View this message in context: http://www.nabble.com/How-can-i-analyse-a-Lucene-Query---tp22140272p22140272.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 22 04:26:14 2009
Return-Path: <java-user-return-38647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79668 invoked from network); 22 Feb 2009 04:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2009 04:26:14 -0000
Received: (qmail 56835 invoked by uid 500); 22 Feb 2009 04:26:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56806 invoked by uid 500); 22 Feb 2009 04:26:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56795 invoked by uid 99); 22 Feb 2009 04:26:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 20:26:08 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.89.202.182] (HELO postoffice2.aconex.com) (203.89.202.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 04:26:00 +0000
X-ASG-Debug-ID: 1235276736-44d900090000-H1Y1KX
X-Barracuda-URL: http://postoffice2.aconex.com:8000/cgi-bin/mark.cgi
Received: from postoffice.aconex.com (localhost [127.0.0.1])
	by postoffice2.aconex.com (Spam Firewall) with ESMTP id F08606F4574
	for <java-user@lucene.apache.org>; Sun, 22 Feb 2009 15:25:36 +1100 (EST)
Received: from postoffice.aconex.com (postoffice.yarra.acx [192.168.102.1]) by postoffice2.aconex.com with ESMTP id TytDfb7SI8EcMacB for <java-user@lucene.apache.org>; Sun, 22 Feb 2009 15:25:36 +1100 (EST)
Received: from [192.168.101.2] (CPE-124-190-176-55.vic.bigpond.net.au [124.190.176.55])
	by postoffice.aconex.com (Postfix) with ESMTP id D322892C0DA
	for <java-user@lucene.apache.org>; Sun, 22 Feb 2009 15:25:36 +1100 (EST)
Message-Id: <2B1D8550-6C5D-494D-9508-61D15F5CF9B8@aconex.com>
From: Paul Smith <psmith@aconex.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-17--728501122
Mime-Version: 1.0 (Apple Message framework v930.3)
X-ASG-Orig-Subj: RAID Stripe sizes - suggestions?
Subject: RAID Stripe sizes - suggestions?
Date: Sun, 22 Feb 2009 15:25:36 +1100
X-Mailer: Apple Mail (2.930.3)
X-Barracuda-Connect: postoffice.yarra.acx[192.168.102.1]
X-Barracuda-Start-Time: 1235276736
X-Barracuda-Virus-Scanned: by Aconex Staff Email Spam Firewall at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-17--728501122
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

I'm just wondering if anyone can share with us their learnings on  
optimizing their storage configurations for relatively large indexes  
(millions of documents, 10+Gb in size).  Is there a 'suggested best'  
Stripe size for RAID-10 configurations?

I did some Googling, and surprised I couldn't find much out there.  
Anyone able to share their benchmarks/experience ?

cheers,

Paul


--Apple-Mail-17--728501122--

From java-user-return-38648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 22 06:27:44 2009
Return-Path: <java-user-return-38648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19166 invoked from network); 22 Feb 2009 06:27:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2009 06:27:44 -0000
Received: (qmail 83436 invoked by uid 500); 22 Feb 2009 06:27:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83399 invoked by uid 500); 22 Feb 2009 06:27:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83388 invoked by uid 99); 22 Feb 2009 06:27:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 22:27:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 06:27:29 +0000
X-ASG-Debug-ID: 1235284026-4b0600050000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id BA3AB6B3C6
	for <java-user@lucene.apache.org>; Sat, 21 Feb 2009 22:27:06 -0800 (PST)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id DWY5u9dYLUojIe6B for <java-user@lucene.apache.org>; Sat, 21 Feb 2009 22:27:06 -0800 (PST)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: Text extraction tool for Microsoft Office 2007
Subject: Text extraction tool for Microsoft Office 2007
Date: Sat, 21 Feb 2009 22:27:06 -0800
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6D56@rw-ex2003.BROADVISION.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Text extraction tool for Microsoft Office 2007
Thread-Index: AcmUtpU6CZzDQWpESCO81rMypM/cYw==
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1235284026
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

What is the best tool (free software) to extract text from=20
Microsoft Office 2007:

Word 2007, Excel 2007, Power Point 2007

so that we can index them by lucene?

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 22 08:00:03 2009
Return-Path: <java-user-return-38649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72345 invoked from network); 22 Feb 2009 08:00:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2009 08:00:02 -0000
Received: (qmail 12900 invoked by uid 500); 22 Feb 2009 07:59:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12541 invoked by uid 500); 22 Feb 2009 07:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12530 invoked by uid 99); 22 Feb 2009 07:59:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Feb 2009 23:59:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 22 Feb 2009 07:59:47 +0000
Received: (qmail 48484 invoked by uid 60001); 22 Feb 2009 07:59:26 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1235289566; bh=R30+4CBm7sjCtHKmWxUdQJl2X/KhgEtM9deMTUc9b3Y=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type; b=cXSDziTHgBQStjB+jHFcxQ/j//12PXgDaKImFq6PuV1bqvcyD83VkmHoUzpRcN3D4+8mDeuVL5/3GUwz3FfwEL3vXrkIpDKStqFPidjWZzikwg68ZjZAZDF0Ihhs9hi5xDIHSumxjUiQIdmzIcJu6Je53EP5txHdelvw748WDu0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type;
  b=lqXx7k5yWU6/zK4o69av3GENQ25oOio9A6QrRcM3002UmGaFeX4gHBC0cQKcQfjfHWNpXOai6N7FyhcrIUwaaldBq2nymadf+rrwzbi//lrnXVQd4rx7g6ceiB9zgipklQd+gAlIGzjTrFU0Fb/f0WTGqF3qHt+7po2zyIqRGQ8=;
Message-ID: <466481.44837.qm@web50302.mail.re2.yahoo.com>
X-YMail-OSG: RSTvQNoVM1m4eCnEVgY8uGrxNX.zMdg85Hxpmoaivs72doS0DKJ23X0wNE4GqAvwXUuBnncqmBQUnuSR6EjM6F7aQDDtE8KwbjLM9p4EC8P1XhVaUmiNqN5qPjHJpBocD44qQc0t3yCLRNXib.w2IzvEGuOSVruOJibqboZDbHkeSsblAvzIjApeE0q2oK0pJ9saJC.Xvjqo3R1FIV2AFkkf9ckmw1rUf4o-
Received: from [116.22.157.137] by web50302.mail.re2.yahoo.com via HTTP; Sat, 21 Feb 2009 23:59:26 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.289.1
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6D56@rw-ex2003.BROADVISION.COM>
Date: Sat, 21 Feb 2009 23:59:26 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Text extraction tool for Microsoft Office 2007
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

POI - http://poi.apache.org/
or
Tika (it uses POI) - http://lucene.apache.org/tika

And you can use code from Lucene in Action to index the text with Lucene - http://manning.com/hatcher2 .  The code is free to download.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, February 22, 2009 2:27:06 PM
> Subject: Text extraction tool for Microsoft Office 2007
> 
> Hi,
> 
> What is the best tool (free software) to extract text from 
> Microsoft Office 2007:
> 
> Word 2007, Excel 2007, Power Point 2007
> 
> so that we can index them by lucene?
> 
> Thanks very much for helps, Lisheng
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 22 10:05:39 2009
Return-Path: <java-user-return-38650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34067 invoked from network); 22 Feb 2009 10:05:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2009 10:05:39 -0000
Received: (qmail 65561 invoked by uid 500); 22 Feb 2009 10:05:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65536 invoked by uid 500); 22 Feb 2009 10:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 75938 invoked by uid 99); 22 Feb 2009 05:55:48 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Message-Id: <F32F11CC-72BF-4F91-866C-56C4F679CD71@mronge.com>
From: Matt Ronge <mronge@mronge.com>
To: java-user@lucene.apache.org
In-Reply-To: <179b305e0902190317r6c89f9a2y21ddf61034907d5e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: lucene index details
Date: Sat, 21 Feb 2009 23:58:06 -0600
References: <179b305e0902190317r6c89f9a2y21ddf61034907d5e@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 19, 2009, at 5:17 AM, Seid Mohammed wrote:

> I am new to lucene, and reading lucene in action book
> sometimes, i better understand when somone tell me an answer than a  
> book.
> my queston is
> when indexing, what actually lucene is doing?
> if i have a file called test.txt  with contents " lucen is used to
> index files" and i apply lucene indexing, what is the content of the
> index and  what is the structure of the index?.
>
> and if i apply lucene search, for example a query "index files", from
> where lucene searches, from the index or from the test.index file


If you're interested in the structure of the Lucene index, the best  
resource is here: http://lucene.apache.org/java/2_4_0/fileformats.html  
(for the current release)

It lays out the structure in great detail, skim it over a bit, it will  
greatly help in understanding how Lucene works.
--
Matt Ronge
mronge@mronge.com
http://www.mronge.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 22 10:05:51 2009
Return-Path: <java-user-return-38651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34247 invoked from network); 22 Feb 2009 10:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2009 10:05:49 -0000
Received: (qmail 67192 invoked by uid 500); 22 Feb 2009 10:05:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67174 invoked by uid 500); 22 Feb 2009 10:05:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 76252 invoked by uid 99); 22 Feb 2009 06:01:16 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Message-Id: <2C9624C1-6801-4D26-8CB5-82D988A09D8C@mronge.com>
From: Matt Ronge <mronge@mronge.com>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770902190419g1b118a9emde06d608956afa8e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: "Near" force in query server side?
Date: Sun, 22 Feb 2009 00:03:35 -0600
References: <5d53d5770902190419g1b118a9emde06d608956afa8e@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 19, 2009, at 6:19 AM, Ian Vink wrote:

> Once my app gets the query string from the user, is there a way to  
> tell the
> query engine to only return documents where these words are at most  
> 5 words
> apart? I can't tell the user to change their query, I have to do it  
> server
> side.

I would suggest using either a phrase query with a slop, or try out  
the SpanQueries.

>
> Is so do I have to add anything to my index to let Lucene know about
> positions of the terms when it indexes?

Nope, that information is there by default.
--
Matt Ronge
mronge@mronge.com
http://www.mronge.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 22 10:21:43 2009
Return-Path: <java-user-return-38652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45334 invoked from network); 22 Feb 2009 10:21:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2009 10:21:43 -0000
Received: (qmail 70977 invoked by uid 500); 22 Feb 2009 10:21:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70944 invoked by uid 500); 22 Feb 2009 10:21:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70933 invoked by uid 99); 22 Feb 2009 10:21:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 02:21:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 10:21:28 +0000
Received: by gxk18 with SMTP id 18so4162045gxk.5
        for <java-user@lucene.apache.org>; Sun, 22 Feb 2009 02:21:06 -0800 (PST)
Received: by 10.100.216.10 with SMTP id o10mr232983ang.86.1235298066354;
        Sun, 22 Feb 2009 02:21:06 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id d12sm9482149and.44.2009.02.22.02.21.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 22 Feb 2009 02:21:06 -0800 (PST)
Message-Id: <B3BC7B23-C9F5-4D89-9B83-5DE1D2B85127@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <466481.44837.qm@web50302.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Text extraction tool for Microsoft Office 2007
Date: Sun, 22 Feb 2009 05:21:04 -0500
References: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6D56@rw-ex2003.BROADVISION.COM> <466481.44837.qm@web50302.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Also, that chapter (7) has been rewritten in the revised Lucene in  
Action (available through Manning's early access now); it's now based  
entirely on Tika.

But, note that Tika only just recently is able to extract text from  
Office 2007 (I think):

     https://issues.apache.org/jira/browse/TIKA-152

you'll have to build off of trunk or use the SNAPSHOT from Maven.

Mike

Otis Gospodnetic wrote:

>
> Hi,
>
> POI - http://poi.apache.org/
> or
> Tika (it uses POI) - http://lucene.apache.org/tika
>
> And you can use code from Lucene in Action to index the text with  
> Lucene - http://manning.com/hatcher2 .  The code is free to download.
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
>> To: java-user@lucene.apache.org
>> Sent: Sunday, February 22, 2009 2:27:06 PM
>> Subject: Text extraction tool for Microsoft Office 2007
>>
>> Hi,
>>
>> What is the best tool (free software) to extract text from
>> Microsoft Office 2007:
>>
>> Word 2007, Excel 2007, Power Point 2007
>>
>> so that we can index them by lucene?
>>
>> Thanks very much for helps, Lisheng
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 22 15:19:05 2009
Return-Path: <java-user-return-38653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53163 invoked from network); 22 Feb 2009 15:19:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2009 15:19:05 -0000
Received: (qmail 35855 invoked by uid 500); 22 Feb 2009 15:18:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35831 invoked by uid 500); 22 Feb 2009 15:18:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35820 invoked by uid 99); 22 Feb 2009 15:18:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 07:18:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 15:18:49 +0000
Received: by ey-out-2122.google.com with SMTP id d26so211552eyd.53
        for <java-user@lucene.apache.org>; Sun, 22 Feb 2009 07:18:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:x-mailer:mime-version:subject:date:cc;
        bh=m6qGN6IMTW0sXeK2r4hK0YkQ27W4Qm2bgjzczgU+v10=;
        b=hDWElsTVXG4PO0A9eW8TWS2JNFZjw/kJFuM3RzOaSOjr7olYWp8/0JvWMzj7Q21opS
         HnxxK3tnxFbmLRx/AedLJRNiQWoyKqbTSuE9/WYdjLgdfoTSdm1mG0Ug4YsrNDdozaSK
         BFou01Z9F4fuGn7K/IWpXNZVHQQKGfb05mV9I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type:x-mailer
         :mime-version:subject:date:cc;
        b=GfPEckkUMHAGMITPPHx3MxPG5KroQ39pzQACpaztC2ekYqOKXB/oLnMhSc8POrRD95
         NGfvmVq5UqDmHyONFVvD5IPH19V3X/AoBn5hxJ6uUArcENxKFVW5BvVONoor9MZXMdXC
         J1Iic0S7oA40TzPNWYdyjZ/X9oFH6PQhorEtA=
Received: by 10.210.112.1 with SMTP id k1mr2609664ebc.31.1235315907957;
        Sun, 22 Feb 2009 07:18:27 -0800 (PST)
Received: from ?10.0.1.198? (host86-133-176-110.range86-133.btcentralplus.com [86.133.176.110])
        by mx.google.com with ESMTPS id m5sm12863875gve.34.2009.02.22.07.18.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 22 Feb 2009 07:18:27 -0800 (PST)
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
Message-Id: <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: Amin Mohammed-Coleman <aminmc@gmail.com>
In-Reply-To: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
Content-Type: multipart/alternative;
	boundary=Apple-Mail-1--689320277
X-Mailer: iPhone Mail (5H11)
Mime-Version: 1.0 (iPhone Mail 5H11)
Subject: Re: Faceted Search using Lucene
Date: Sun, 22 Feb 2009 15:18:35 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1--689320277
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi

Sorry to re send this email but I was wondering if I could get some  
advice on this.

Cheers

Amin

On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com>  
wrote:

> Hi
>
> I am looking at building a faceted search using Lucene.  I know that  
> Solr comes with this built in, however I would like to try this by  
> myself (something to add to my CV!).  I have been looking around and  
> I found that you can use the IndexReader and use TermVectors.  This  
> looks ok but I'm not sure how to filter the results so that a  
> particular user can only see a subset of results.  The next option I  
> was looking at was something like
>
> Term term1 = new Term("brand", "ford");
> Term term2 = new Term("brand", "vw");
> Term[] termsArray = new Term[] { term1, term2 };un
> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>
> The only problem here is that I have to provide the brand type each  
> time a new brand is created.  Again I'm not sure how I can filter  
> the results here. It may be that I'm using the wrong api methods to  
> do this.
>
> I would be grateful if I could get some advice on this.
>
>
> Cheers
> Amin
>
> P.S.  I am basically trying to do something that displays the  
> following
>
> Personal Contact (23) Business Contact (45) and so on..
>
>
>
>
>
>

--Apple-Mail-1--689320277--

From java-user-return-38654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 22 16:12:02 2009
Return-Path: <java-user-return-38654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68179 invoked from network); 22 Feb 2009 16:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2009 16:12:02 -0000
Received: (qmail 72827 invoked by uid 500); 22 Feb 2009 16:11:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72797 invoked by uid 500); 22 Feb 2009 16:11:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72786 invoked by uid 99); 22 Feb 2009 16:11:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 08:11:55 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 16:11:46 +0000
Received: by rv-out-0506.google.com with SMTP id k40so2478222rvb.5
        for <java-user@lucene.apache.org>; Sun, 22 Feb 2009 08:11:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=iOKeKUIZf05SVJLoka6jl1Y107XLvTHi5VWkFEEJLJ0=;
        b=Dv7HlQHS06bss0BxGZKrjMRljsubL9FohCKPrzv8MQeYzr2R2Hmt6NZ0Na8T7VujBw
         LQFh9+1u1dWYC57EfHN1Ppe6NqyaKprzZAb0WtkZ4wyIQnNkaz+UAWPgp0UoSE7f26p/
         tHbvfRSLMVQhMyG7eKzvCauqwOxxVYeK5y+eQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=q0LXWHFYu/kvJJrF9Wrv+sWuj9UaDaoN8ebLEAKR66+Yk6sXv7L3xE/AKO6B/2RnqM
         QtescxHw1h2HNtoGng+l7LYKlj/MYb/qRJx2ah1duAA2m4+YE1OpfWBj7co4blONm/Vw
         mABTolgXCTREHkuc5gY+tnPOFk2uSjmbtQ7pw=
MIME-Version: 1.0
Received: by 10.141.107.13 with SMTP id j13mr1558095rvm.251.1235319085937; 
	Sun, 22 Feb 2009 08:11:25 -0800 (PST)
In-Reply-To: <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com>
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
	 <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com>
Date: Sun, 22 Feb 2009 14:11:25 -0200
Message-ID: <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
Subject: Re: Faceted Search using Lucene
From: Marcelo Ochoa <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Amin:
  Please take a look a this blog post:
http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
  Best regards, Marcelo.

On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <aminmc@gmail.com> wrote:
> Hi
>
> Sorry to re send this email but I was wondering if I could get some advice
> on this.
>
> Cheers
>
> Amin
>
> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com> wrote:
>
>> Hi
>>
>> I am looking at building a faceted search using Lucene.  I know that Solr
>> comes with this built in, however I would like to try this by myself
>> (something to add to my CV!).  I have been looking around and I found that
>> you can use the IndexReader and use TermVectors.  This looks ok but I'm not
>> sure how to filter the results so that a particular user can only see a
>> subset of results.  The next option I was looking at was something like
>>
>> Term term1 = new Term("brand", "ford");
>> Term term2 = new Term("brand", "vw");
>> Term[] termsArray = new Term[] { term1, term2 };un
>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>
>> The only problem here is that I have to provide the brand type each time a
>> new brand is created.  Again I'm not sure how I can filter the results here.
>> It may be that I'm using the wrong api methods to do this.
>>
>> I would be grateful if I could get some advice on this.
>>
>>
>> Cheers
>> Amin
>>
>> P.S.  I am basically trying to do something that displays the following
>>
>> Personal Contact (23) Business Contact (45) and so on..
>>
>>
>>
>>
>>
>>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 23 06:04:57 2009
Return-Path: <java-user-return-38655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22449 invoked from network); 23 Feb 2009 06:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2009 06:04:57 -0000
Received: (qmail 51161 invoked by uid 500); 23 Feb 2009 06:04:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51130 invoked by uid 500); 23 Feb 2009 06:04:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51119 invoked by uid 99); 23 Feb 2009 06:04:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 22:04:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vcomandur@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 06:04:43 +0000
Received: by wf-out-1314.google.com with SMTP id 24so1901877wfg.20
        for <java-user@lucene.apache.org>; Sun, 22 Feb 2009 22:04:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=s0YrO2ILX8P5rM5dMnKZhguyw9b64/msjsCS8Vrjtoo=;
        b=I81SibAe+e0hnF4cMlEDzqBp+k8P+riSmkVTaYfP45nD/8pvr68GIDFeLcLP8dEZTl
         5yHsAbTdFBOkyYRfKdsHyF7Ql1CL3ds4fu5Bzc67baO3ezx6DpEjILAlVlVyE8iAuWOK
         TxfOZGyO+oo2BGmR4oLqe4bpmyjpqYkS3BN+Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=RE9UirMdw/8CcT7H4C90MODXsiTEMSWxQQn5ui1P6CJBIdH+gDARbG6nYWWbxvL1BR
         ccVI4fxwjm0coJWQELDbuyIgwewKEpGJ7cnxkMnlFmCMD6xANT2ik/Nz0FTA05O5mrtw
         pzB9lTQirydGwIS84c2sKuSJFlSjBQZLcCFwo=
MIME-Version: 1.0
Received: by 10.142.144.9 with SMTP id r9mr1823846wfd.91.1235369063078; Sun, 
	22 Feb 2009 22:04:23 -0800 (PST)
Date: Mon, 23 Feb 2009 11:34:23 +0530
Message-ID: <a59386fa0902222204oc1cab3ejcf5acf66e86570c1@mail.gmail.com>
Subject: Question on Proximity Search in Lucene Query
From: Vasudevan Comandur <vcomandur@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2de442bdb9d04638fc617
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2de442bdb9d04638fc617
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

   I have a question on the proximity query usage in Lucene Query Syntax.

  The documentation says "W1 W2"~5 means W1 and W2 can occur within 5 words.
Here W1 & W2 represents Words.

  What happens when I give "W1 W2 W3 W4"~25 as proximity query?

   Does it treat each word pairs (W1, W2) , (W1, W3) , (W1, W4) , (W2, W3) ,
(W2, W4) , (W3, W4) can occur within 25 words?

   Looking forward to your reply.

Regards
 Vasu

--000e0cd2de442bdb9d04638fc617--

From java-user-return-38656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 23 07:21:30 2009
Return-Path: <java-user-return-38656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68458 invoked from network); 23 Feb 2009 07:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2009 07:21:27 -0000
Received: (qmail 98845 invoked by uid 500); 23 Feb 2009 07:21:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98807 invoked by uid 500); 23 Feb 2009 07:21:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98796 invoked by uid 99); 23 Feb 2009 07:21:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Feb 2009 23:21:20 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 07:21:11 +0000
Received: by nf-out-0910.google.com with SMTP id c7so338461nfi.15
        for <java-user@lucene.apache.org>; Sun, 22 Feb 2009 23:20:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=s9KoDx/mtGxuFuO1SCbBJmSRtJYefeivYeQbY7g0qpE=;
        b=sU9mKmw7vGbuklqdt2EtYV2uJbvajkqTXIWnuYQW4jRqHDfkXTnDtyp9fdcueDCCcB
         GVd5Q33SnRU2QHgl71Frt6hduDuoVxV4rknITovtUINqUvuS+pZZ0IWiHLOVFtV9yk4h
         2dyUBrh63oSQPNDanHuUJEfdfpXJI74MJ8sZQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=naVjUesMbi4+WvDboCa3m6/utg7o7QwOafbswapYS/QnX+xkEQaUpWc5zPvd0NDv5d
         /LIqgRqgtbT04YkQn9+stLz+pOkYiIq1AM75VAMnxVhikKBNF4UeHwnRCx5lfX+kE8HN
         gj2EUcQO4RTCdYFgGo1OvwaUsD7IIzfX4bqMM=
Received: by 10.210.76.4 with SMTP id y4mr3237233eba.11.1235373649876;
        Sun, 22 Feb 2009 23:20:49 -0800 (PST)
Received: from ?10.43.155.206? ([82.132.136.213])
        by mx.google.com with ESMTPS id 5sm7889015eyf.42.2009.02.22.23.20.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 22 Feb 2009 23:20:48 -0800 (PST)
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com> <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com> <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
Message-Id: <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5H11)
Mime-Version: 1.0 (iPhone Mail 5H11)
Subject: Re: Faceted Search using Lucene
Date: Mon, 23 Feb 2009 07:20:38 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Thanks just what I needed!

Cheers
Amin

On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com> wrote:

> Hi Amin:
>  Please take a look a this blog post:
> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
>  Best regards, Marcelo.
>
> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> > wrote:
>> Hi
>>
>> Sorry to re send this email but I was wondering if I could get some  
>> advice
>> on this.
>>
>> Cheers
>>
>> Amin
>>
>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com>  
>> wrote:
>>
>>> Hi
>>>
>>> I am looking at building a faceted search using Lucene.  I know  
>>> that Solr
>>> comes with this built in, however I would like to try this by myself
>>> (something to add to my CV!).  I have been looking around and I  
>>> found that
>>> you can use the IndexReader and use TermVectors.  This looks ok  
>>> but I'm not
>>> sure how to filter the results so that a particular user can only  
>>> see a
>>> subset of results.  The next option I was looking at was something  
>>> like
>>>
>>> Term term1 = new Term("brand", "ford");
>>> Term term2 = new Term("brand", "vw");
>>> Term[] termsArray = new Term[] { term1, term2 };un
>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>>
>>> The only problem here is that I have to provide the brand type  
>>> each time a
>>> new brand is created.  Again I'm not sure how I can filter the  
>>> results here.
>>> It may be that I'm using the wrong api methods to do this.
>>>
>>> I would be grateful if I could get some advice on this.
>>>
>>>
>>> Cheers
>>> Amin
>>>
>>> P.S.  I am basically trying to do something that displays the  
>>> following
>>>
>>> Personal Contact (23) Business Contact (45) and so on..
>>>
>>>
>>>
>>>
>>>
>>>
>>
>
>
>
> -- 
> Marcelo F. Ochoa
> http://marceloochoa.blogspot.com/
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Want to integrate Lucene and Oracle?
> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
> Is Oracle 11g REST ready?
> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 23 08:38:44 2009
Return-Path: <java-user-return-38657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22337 invoked from network); 23 Feb 2009 08:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2009 08:38:44 -0000
Received: (qmail 77899 invoked by uid 500); 23 Feb 2009 08:38:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77864 invoked by uid 500); 23 Feb 2009 08:38:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77842 invoked by uid 99); 23 Feb 2009 08:38:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 00:38:38 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=ASF_LIST_OPS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nitdaiict8@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 08:38:31 +0000
Received: by wf-out-1314.google.com with SMTP id 24so1950874wfg.20
        for <multiple recipients>; Mon, 23 Feb 2009 00:38:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=uOk06fa2YtpVYUdAVMMntGvLpoHZX0uQzS+lCopj8a0=;
        b=gGxZBpEtX/RxGv8RgzzH6K756Oego0zPmWg9A22jiRXvAyppSlkhRa2JNfKFD3Ww+Z
         BzZeFnhxiMYGz2brZmRKrsUZQfHQMbvR//LWUd/m0r6axFivdZaDC/IW26WGNRuBJOZz
         fdtqNT83/6alR3eVYTOLfeWeOSp7DLf9tdmLI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=SEwn9SN9Ubl+8FjL7HbaLwmKXrC5d14qDyiKSKN7M2wWSAhHxT0gwCmYEOIDh/A4qV
         baG1c5ShuSas+Z6+WL6vY2/fCYXXPJ94Q6pMygoz5yDAR4Hnw5XH5itvDZddGdHVjH74
         EGPxsVA2JIuEwZgIiNjMQA8gtrEE5SXWOLGU0=
MIME-Version: 1.0
Received: by 10.142.105.10 with SMTP id d10mr1884061wfc.71.1235378291507; Mon, 
	23 Feb 2009 00:38:11 -0800 (PST)
Date: Mon, 23 Feb 2009 14:08:11 +0530
Message-ID: <7284f6e20902230038x112fef9dj7c3bdc39975829e0@mail.gmail.com>
Subject: problem with indexing
From: nitin gopi <nitdaiict8@gmail.com>
To: java-user-help@lucene.apache.org, java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e1fcb63a8260046391ecec
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e1fcb63a8260046391ecec
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

hi all, I want to modify the indexing process lucene to suit my application.
I partially read the book LUCENE IN ACTION but it contains no information to
extract the term document matrix. I want to apply LSI to the indexed
document. Please somebody help me out.

regards
nitin

--001636e1fcb63a8260046391ecec--

From java-user-return-38658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 23 09:12:52 2009
Return-Path: <java-user-return-38658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43825 invoked from network); 23 Feb 2009 09:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2009 09:12:52 -0000
Received: (qmail 12099 invoked by uid 500); 23 Feb 2009 09:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11027 invoked by uid 500); 23 Feb 2009 09:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11016 invoked by uid 99); 23 Feb 2009 09:12:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 01:12:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.163.179.216] (HELO web36102.mail.mud.yahoo.com) (66.163.179.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Feb 2009 09:12:36 +0000
Received: (qmail 54602 invoked by uid 60001); 23 Feb 2009 09:12:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=j2/bnBi65oUEY9PELUi5O2nRx1Ji8CqNLMyzpYcjJrkCILBmKzPAVegRu2jWM1TJnBgToQp4h8UCTWSh+OQXlMPZqELsvoRPZqYTc8+twPPiUAy2kxi26iTxKmk2qvVoXCjYNzsLVGOuclVC3a/hodo9/Cu2vbafH0HnpkeGgqI=;
X-YMail-OSG: enDFoAEVM1msbq19sXAIsPUlhmSgS1Mm3R5V2Eawkjx_ud3PcXuRIDP00EgkH6sEtA7jFHObntMxIkD9Z4P6K7qpk2xxftgL6gb_0HnLk4hmRZ_kwMpVzSjn9R2obFtTZbsY9My1tSpl_HChLIpl28Nj1HTZr2SlFVbSOYRZn4r1hcyVyQr5HAGF2vpA
Received: from [193.108.44.30] by web36102.mail.mud.yahoo.com via HTTP; Mon, 23 Feb 2009 01:12:14 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.289.1
Date: Mon, 23 Feb 2009 01:12:14 -0800 (PST)
From: Mykola Peleshchyshyn <mpeleschyshyn@yahoo.com>
Subject: Range search in dependent collections
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <786143.50400.qm@web36102.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
I'm new to Lucene and I have the following problem:

I have a Users with first name, last name etc. and User Jobs (collection) with job title, start date, end date.

I need to perform search on all user fields (fist name, last name etc) and job fields (job title and optionally start date and end date).

What would be the best way to index and search this data?

Thank you,
Mykola Peleshchyshyn 


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 23 14:15:12 2009
Return-Path: <java-user-return-38659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14551 invoked from network); 23 Feb 2009 14:15:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2009 14:15:12 -0000
Received: (qmail 64058 invoked by uid 500); 23 Feb 2009 14:15:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64034 invoked by uid 500); 23 Feb 2009 14:15:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64023 invoked by uid 99); 23 Feb 2009 14:15:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 06:15:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.168 as permitted sender)
Received: from [209.85.220.168] (HELO mail-fx0-f168.google.com) (209.85.220.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 14:14:57 +0000
Received: by fxm12 with SMTP id 12so1955512fxm.5
        for <java-user@lucene.apache.org>; Mon, 23 Feb 2009 06:14:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=PC9nGmhOC7HSMPdmQG3GCAEdH47OMUW5KcC48cxzaMw=;
        b=oi4vmKUeM5+hEUj1+ZNWiMwNBgI/6KVG9vVFBI1pwepAVYwhxIKBIH2vk0UuPAdg8A
         RI22mdnVqa9Vu8RAALPXmtJ/CV5LXq9qUdBkAXyEHRYGaRpUdfh48oasDz9PPJKLtY8q
         4u3NEPpsTu7X2q650J8dsYDrEgkZkyj6IAnQ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=GiPuJ106zorXlfwwv1KtHNX7H7N0OCyqUwmuL5PDSJC1rI9Krytm9+gDjRoqM3i1H8
         zYPlmcmf72ysuziaUtCRN2sFq/ZKsM9Xc8pcia7d7lprBYLE6M0hnQUh00iNPzvEKoKd
         l9NZ7Q5m3MmaGRmLgQQ1NeXt7FGV0NpcxEnSg=
MIME-Version: 1.0
Received: by 10.181.197.1 with SMTP id z1mr1536314bkp.118.1235398477212; Mon, 
	23 Feb 2009 06:14:37 -0800 (PST)
In-Reply-To: <786143.50400.qm@web36102.mail.mud.yahoo.com>
References: <786143.50400.qm@web36102.mail.mud.yahoo.com>
Date: Mon, 23 Feb 2009 14:14:37 +0000
Message-ID: <8c4e68610902230614g4f50cb73y34edc481a22d231@mail.gmail.com>
Subject: Re: Range search in dependent collections
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


The simplest way is to flatten your data into lucene documents that
hold all relevant info for user/job combinations.  That will let you
search easily across whichever fields you want.

Your documents could look like this:

firstname: whatever
lastname: whatever
jobtitle: somejob
startdate: whenever
enddate: whenever

and searches could be something like lastname:whatever jobtitle:somejob.


--
Ian.


On Mon, Feb 23, 2009 at 9:12 AM, Mykola Peleshchyshyn
<mpeleschyshyn@yahoo.com> wrote:
> Hello,
> I'm new to Lucene and I have the following problem:
>
> I have a Users with first name, last name etc. and User Jobs (collection) with job title, start date, end date.
>
> I need to perform search on all user fields (fist name, last name etc) and job fields (job title and optionally start date and end date).
>
> What would be the best way to index and search this data?
>
> Thank you,
> Mykola Peleshchyshyn

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 23 14:50:12 2009
Return-Path: <java-user-return-38660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61449 invoked from network); 23 Feb 2009 14:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2009 14:50:11 -0000
Received: (qmail 14474 invoked by uid 500); 23 Feb 2009 14:50:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14447 invoked by uid 500); 23 Feb 2009 14:50:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14436 invoked by uid 99); 23 Feb 2009 14:50:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 06:50:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.163.179.219] (HELO web36105.mail.mud.yahoo.com) (66.163.179.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Feb 2009 14:49:54 +0000
Received: (qmail 46837 invoked by uid 60001); 23 Feb 2009 14:49:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Ty8QlBKXSq43mXamKQRpVdk1O1iJknvxsuNa0q/hBiQ3xlY+CXbAxISus87oqaHnTIKXi/rFkg3MCBp9VN3F7NG92r36vxXJfvH8bFj/m0sYrj2gjWIqr/pvihSR9MRxInHY67Ea38A/PPnzMblVC7E1yAREYEhxLpRq8DFCTPc=;
X-YMail-OSG: 0k9hWsUVM1llNMhj4pzSoMzU9txBLRyAfjrdSNwUQsmmHU6Ji6F_NykozcrosXBaE59xYhHIuoX77KCHb6nNRQURcAQFN89PV4mWdWXBAozNkA5EsARBgCsm66A6yP9TESCGc2Hw.OaJtzYQvuUhxovRQtDrJWM9hpW8ZoXupLgdCHzVnOv4YhG_8YpC2ncDoGXQcEVtjAln4d53WcR6taCJKQAa9Ro-
Received: from [193.108.44.30] by web36105.mail.mud.yahoo.com via HTTP; Mon, 23 Feb 2009 06:49:32 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.289.1
References: <786143.50400.qm@web36102.mail.mud.yahoo.com> <8c4e68610902230614g4f50cb73y34edc481a22d231@mail.gmail.com>
Date: Mon, 23 Feb 2009 06:49:32 -0800 (PST)
From: Mykola Peleshchyshyn <mpeleschyshyn@yahoo.com>
Subject: Re: Range search in dependent collections
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <579219.46313.qm@web36105.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

What about the case with several jobs? I.e.:

firstname: whatever
lastname: whatever

jobtitle1: somejob
startdate1: whenever
enddate1: whenever
.............................................
jobtitleN: somejob
startdateN: whenever
enddateN: whenever



----- Original Message ----
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, February 23, 2009 4:14:37 PM
Subject: Re: Range search in dependent collections

Hi


The simplest way is to flatten your data into lucene documents that
hold all relevant info for user/job combinations.  That will let you
search easily across whichever fields you want.

Your documents could look like this:

firstname: whatever
lastname: whatever
jobtitle: somejob
startdate: whenever
enddate: whenever

and searches could be something like lastname:whatever jobtitle:somejob.


--
Ian.


On Mon, Feb 23, 2009 at 9:12 AM, Mykola Peleshchyshyn
<mpeleschyshyn@yahoo.com> wrote:
> Hello,
> I'm new to Lucene and I have the following problem:
>
> I have a Users with first name, last name etc. and User Jobs (collection) with job title, start date, end date.
>
> I need to perform search on all user fields (fist name, last name etc) and job fields (job title and optionally start date and end date).
>
> What would be the best way to index and search this data?
>
> Thank you,
> Mykola Peleshchyshyn

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 23 15:10:46 2009
Return-Path: <java-user-return-38661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81675 invoked from network); 23 Feb 2009 15:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2009 15:10:46 -0000
Received: (qmail 46626 invoked by uid 500); 23 Feb 2009 15:10:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46334 invoked by uid 500); 23 Feb 2009 15:10:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46323 invoked by uid 99); 23 Feb 2009 15:10:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 07:10:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 15:10:32 +0000
Received: by bwz11 with SMTP id 11so5095347bwz.5
        for <java-user@lucene.apache.org>; Mon, 23 Feb 2009 07:10:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=G/Ktd/46E1XBlfrJSIOZUxGaHhCyq/u3AjFCywGuaUI=;
        b=xVfwbNxvh5IZcxLo24PlKcvCQiBSebycgLG2oP2JfpdK1JwpHeyBxsrKHc70kmE1Pp
         tiVFoQokfyL5rMBhbbeKIMhHHMJt6nj7XBDxyY+FC5eeiJL6CVeqHRHJ6oufOTPTeuUX
         XVk+hRI/MK2PuGZ0GVNtpmWV+o2t9MoRQIVvk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=F2V68K2K7aE52q1JUpwx2ReRD0/JAlmmpX7N1VaMd0HD6y6Z5JXVbvGNlWF9HZCkFI
         y2Bcs30BWjmAYBnTFFkoM98axwbY2ytnmi4FUTmND9/v1Joi4eJmH6wknhElNJrjBG+/
         thQjGNsOqV5lEQPbLNiioTCRDLlwcwm7FfSm0=
MIME-Version: 1.0
Received: by 10.181.60.14 with SMTP id n14mr1558311bkk.79.1235401810624; Mon, 
	23 Feb 2009 07:10:10 -0800 (PST)
In-Reply-To: <579219.46313.qm@web36105.mail.mud.yahoo.com>
References: <786143.50400.qm@web36102.mail.mud.yahoo.com>
	 <8c4e68610902230614g4f50cb73y34edc481a22d231@mail.gmail.com>
	 <579219.46313.qm@web36105.mail.mud.yahoo.com>
Date: Mon, 23 Feb 2009 15:10:10 +0000
Message-ID: <8c4e68610902230710l5cdbe591s645c2e3adc0ce558@mail.gmail.com>
Subject: Re: Range search in dependent collections
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Just repeat the first and last names in each document.  How many users
and jobs are you talking about?  Lucene will cope unless the numbers
are extremely large.

Note that I'm not claiming this is necessarily the "best" way, just
the simplest which is often, but not always, the best.


--
Ian.

On Mon, Feb 23, 2009 at 2:49 PM, Mykola Peleshchyshyn
<mpeleschyshyn@yahoo.com> wrote:
> What about the case with several jobs? I.e.:
>
> firstname: whatever
> lastname: whatever
>
> jobtitle1: somejob
> startdate1: whenever
> enddate1: whenever
> .............................................
> jobtitleN: somejob
> startdateN: whenever
> enddateN: whenever
>
>
>
> ----- Original Message ----
> From: Ian Lea <ian.lea@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, February 23, 2009 4:14:37 PM
> Subject: Re: Range search in dependent collections
>
> Hi
>
>
> The simplest way is to flatten your data into lucene documents that
> hold all relevant info for user/job combinations.  That will let you
> search easily across whichever fields you want.
>
> Your documents could look like this:
>
> firstname: whatever
> lastname: whatever
> jobtitle: somejob
> startdate: whenever
> enddate: whenever
>
> and searches could be something like lastname:whatever jobtitle:somejob.
>
>
> --
> Ian.
>
>
> On Mon, Feb 23, 2009 at 9:12 AM, Mykola Peleshchyshyn
> <mpeleschyshyn@yahoo.com> wrote:
>> Hello,
>> I'm new to Lucene and I have the following problem:
>>
>> I have a Users with first name, last name etc. and User Jobs (collection) with job title, start date, end date.
>>
>> I need to perform search on all user fields (fist name, last name etc) and job fields (job title and optionally start date and end date).
>>
>> What would be the best way to index and search this data?
>>
>> Thank you,
>> Mykola Peleshchyshyn

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 23 16:14:17 2009
Return-Path: <java-user-return-38662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61788 invoked from network); 23 Feb 2009 16:14:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2009 16:14:17 -0000
Received: (qmail 88451 invoked by uid 500); 23 Feb 2009 16:14:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88421 invoked by uid 500); 23 Feb 2009 16:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88410 invoked by uid 99); 23 Feb 2009 16:14:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 08:14:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dckorah@gmail.com designates 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 16:14:01 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1595341tic.11
        for <java-user@lucene.apache.org>; Mon, 23 Feb 2009 08:13:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=zwzMNAAZnafvT/Hr38W6x8E1ZllpN/lB07yqbdnAxzo=;
        b=xAwWmJpfTXPFTF90bAar5Ug5TBbGGKDEzi3KqWB5y4CwmZTrWctVjLUARBQ5GFSIAX
         AEGWYf2xJYDHABWH9cDtXuZ/YzaYq5c2gN7fxEkcvjx934ma5FnXXWMleGRJff+ESetu
         yLVVhK9zfwNRY7t7eq9biZbXc+FP1vXlXtEAY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=qA5pM0XTrc0GKoENlqkBfXOjz45PWBqsspR3YksCHxGfl/HMWMj5kveCkqVsz62xvP
         bGQNREGpV7rwWFB5w+Yn9HVx9ZVYsfq1USinCX7QmYK0bwIWl/X4Wu3Wc4wLsyK6a2oK
         x/xjuT2PnZFT4Y6btewyRIw/gZ/Outa0BxfJk=
MIME-Version: 1.0
Received: by 10.110.69.5 with SMTP id r5mr6023006tia.36.1235405619047; Mon, 23 
	Feb 2009 08:13:39 -0800 (PST)
Date: Mon, 23 Feb 2009 16:13:39 +0000
Message-ID: <926b35870902230813m610087fh67ae5d3afec15c17@mail.gmail.com>
Subject: Field Normalisation in Query across two indexes
From: Dino Korah <dckorah@gmail.com>
To: lucene list <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=0016e652de5613ac3704639849de
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e652de5613ac3704639849de
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Guys,

I have a question on normalisation.
I am using a prehistoric version of lucene; 2.0.0

Context: http://markmail.org/message/z5lcz2htjvqsscam

I have these two scenario with indexes.
One:
2 indexes; One with documents that has a field "field_one" instantiated as
TOKENIZED and then setOmitNorms(true).
Second index with the same field "field_one" instantiated TOKENIZED and then
setBoost(boost_factor);

Two:
2 indexes; One with field "field_one" instantiated as TOKENIZED and then
setOmitNorms(true).
Second index with the same field "field_one", but some of them are as first
index and some were instantiated TOKENIZED and then setBoost(boost_factor);
A mix of the two types.

If I am to load these two indexes into an IndexReader and query on the field
"field_one" would there be any issues that I should expect?

Any advice is much appreciated.

Cheerio

--0016e652de5613ac3704639849de--

From java-user-return-38663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 23 19:17:30 2009
Return-Path: <java-user-return-38663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59650 invoked from network); 23 Feb 2009 19:17:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2009 19:17:30 -0000
Received: (qmail 38740 invoked by uid 500); 23 Feb 2009 19:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38707 invoked by uid 500); 23 Feb 2009 19:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38696 invoked by uid 99); 23 Feb 2009 19:17:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 11:17:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 19:17:13 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 137A771C537; Mon, 23 Feb 2009 11:16:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 0C18471C535
	for <java-user@lucene.apache.org>; Mon, 23 Feb 2009 11:16:52 -0800 (PST)
Date: Mon, 23 Feb 2009 11:16:51 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Phrase indexing and searching with Lucene
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Message-ID: <Pine.LNX.4.64.0902231115520.28366@radix.cryptio.net>
References: <499BE497.2060103@mapmyindia.com> <18248.30864.qm@web26005.mail.ukl.yahoo.com>
 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE71FF@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: Phrase indexing and searching with Lucene
: References: <499BE497.2060103@mapmyindia.com>
:     <18248.30864.qm@web26005.mail.ukl.yahoo.com>

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 00:17:00 2009
Return-Path: <java-user-return-38664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10001 invoked from network); 24 Feb 2009 00:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 00:17:00 -0000
Received: (qmail 19273 invoked by uid 500); 24 Feb 2009 00:16:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19243 invoked by uid 500); 24 Feb 2009 00:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19231 invoked by uid 99); 24 Feb 2009 00:16:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 16:16:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [8.7.216.163] (HELO mta1.evaultmail.com) (8.7.216.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 00:16:43 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AvwCAJfKoknR+dAJgWdsb2JhbACCRSuRcAEBFiLAXYQRBg
X-IronPort-AV: E=Sophos;i="4.38,256,1233561600"; 
   d="scan'208,217";a="32163964"
Received: from mail.seagateservices.com ([209.249.208.9])
  by smtp1.seagateservices.com with ESMTP; 23 Feb 2009 16:16:22 -0800
Received: from SSV-MAILBOXES.corp.ssv.com ([10.100.70.40]) by
 ssv-mail-hub.corp.ssv.com ([10.100.70.35]) with mapi; Mon, 23 Feb 2009
 16:16:35 -0800
From: An Hong <An.Hong@i365.com>
To: lucene-user <java-user@lucene.apache.org>
Date: Mon, 23 Feb 2009 16:16:19 -0800
Subject: IndexWriter.rollback() logic question
Thread-Topic: IndexWriter.rollback() logic question
Thread-Index: AcmWFR3plf3xRd7vT7OmszDgZCfU4A==
Message-ID: <00F7CD19355DE347B74AFBF8871AF0DD01752942D1@SSV-MAILBOXES.corp.ssv.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_00F7CD19355DE347B74AFBF8871AF0DD01752942D1SSVMAILBOXESc_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_00F7CD19355DE347B74AFBF8871AF0DD01752942D1SSVMAILBOXESc_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

A question about IndexWriter.rollback() logic.  Its javadoc says that it "C=
lose the IndexWriter without committing any of the changes that have occurr=
ed since it was opened."  So if I do
1.  Open  IndexWriter
2.  Add doc1
3.  Commit (successfully)
4.  Add doc2
5.  PrepareCommit()
6.  Rollback()

Is doc1 in the index?  If not, I wonder how come rollback() does not roll b=
ack to the last successful commit() state instead?
Thanks,
An


--_000_00F7CD19355DE347B74AFBF8871AF0DD01752942D1SSVMAILBOXESc_--

From java-user-return-38665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 00:19:19 2009
Return-Path: <java-user-return-38665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10469 invoked from network); 24 Feb 2009 00:19:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 00:19:19 -0000
Received: (qmail 25996 invoked by uid 500); 24 Feb 2009 00:19:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25975 invoked by uid 500); 24 Feb 2009 00:19:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25964 invoked by uid 99); 24 Feb 2009 00:19:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 16:19:12 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [8.7.216.163] (HELO mta1.evaultmail.com) (8.7.216.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 00:19:04 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ah4DAMPLoknR+dAJgWdsb2JhbACCRSyRcAEBFiLAW4QRBg
X-IronPort-AV: E=Sophos;i="4.38,256,1233561600"; 
   d="scan'208,217";a="32163995"
Received: from mail.seagateservices.com ([209.249.208.9])
  by smtp1.seagateservices.com with ESMTP; 23 Feb 2009 16:18:44 -0800
Received: from SSV-MAILBOXES.corp.ssv.com ([10.100.70.40]) by
 ssv-mail-hub.corp.ssv.com ([10.100.70.35]) with mapi; Mon, 23 Feb 2009
 16:18:57 -0800
From: An Hong <An.Hong@i365.com>
To: lucene-user <java-user@lucene.apache.org>
Date: Mon, 23 Feb 2009 16:18:42 -0800
Subject: Upgrading an old index to 2.4 format
Thread-Topic: Upgrading an old index to 2.4 format
Thread-Index: AcmWFXK7aTd7kT87RsODPlxCYag8tA==
Message-ID: <00F7CD19355DE347B74AFBF8871AF0DD01752942D4@SSV-MAILBOXES.corp.ssv.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_00F7CD19355DE347B74AFBF8871AF0DD01752942D4SSVMAILBOXESc_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_00F7CD19355DE347B74AFBF8871AF0DD01752942D4SSVMAILBOXESc_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


I've several existing indexes in 2.1 file format.  If these indexes have mu=
ltiple segments and have not been optimized, a call to IndexWriter.optimize=
() should create a newly merged segment of the latest 2.4 file format.  Is =
this true?  And, is there a way to force a file format upgrade on a 2.1 ind=
ex that's already in optimized state?
Thanks,
An


--_000_00F7CD19355DE347B74AFBF8871AF0DD01752942D4SSVMAILBOXESc_--

From java-user-return-38666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 01:23:50 2009
Return-Path: <java-user-return-38666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30815 invoked from network); 24 Feb 2009 01:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 01:23:50 -0000
Received: (qmail 76790 invoked by uid 500); 24 Feb 2009 01:23:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76768 invoked by uid 500); 24 Feb 2009 01:23:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76757 invoked by uid 99); 24 Feb 2009 01:23:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 17:23:43 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 01:23:34 +0000
Received: by qw-out-2122.google.com with SMTP id 5so752299qwi.53
        for <java-user@lucene.apache.org>; Mon, 23 Feb 2009 17:23:12 -0800 (PST)
Received: by 10.224.80.193 with SMTP id u1mr6351093qak.104.1235438592228;
        Mon, 23 Feb 2009 17:23:12 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 5sm1443446qwh.29.2009.02.23.17.23.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 23 Feb 2009 17:23:11 -0800 (PST)
Message-Id: <C2BF7599-3E27-4620-92AB-F5E75D4126FB@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <00F7CD19355DE347B74AFBF8871AF0DD01752942D1@SSV-MAILBOXES.corp.ssv.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: IndexWriter.rollback() logic question
Date: Mon, 23 Feb 2009 20:23:10 -0500
References: <00F7CD19355DE347B74AFBF8871AF0DD01752942D1@SSV-MAILBOXES.corp.ssv.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


The javadoc is not right -- I just committed a fix.

rollback() discards all changes since the last commit, or since the  
IndexWriter was opened (if commit hasn't been called).

So in your case, doc1 is in the index but doc2 is not.

You can also call rollback() not having called prepareCommit().

Mike

An Hong wrote:

> A question about IndexWriter.rollback() logic.  Its javadoc says  
> that it "Close the IndexWriter without committing any of the changes  
> that have occurred since it was opened."  So if I do
> 1.  Open  IndexWriter
> 2.  Add doc1
> 3.  Commit (successfully)
> 4.  Add doc2
> 5.  PrepareCommit()
> 6.  Rollback()
>
> Is doc1 in the index?  If not, I wonder how come rollback() does not  
> roll back to the last successful commit() state instead?
> Thanks,
> An
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 01:27:39 2009
Return-Path: <java-user-return-38667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32684 invoked from network); 24 Feb 2009 01:27:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 01:27:39 -0000
Received: (qmail 83851 invoked by uid 500); 24 Feb 2009 01:27:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83824 invoked by uid 500); 24 Feb 2009 01:27:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83813 invoked by uid 99); 24 Feb 2009 01:27:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 17:27:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 01:27:23 +0000
Received: by yw-out-2324.google.com with SMTP id 2so765435ywt.5
        for <java-user@lucene.apache.org>; Mon, 23 Feb 2009 17:27:01 -0800 (PST)
Received: by 10.100.120.15 with SMTP id s15mr5023855anc.112.1235438821803;
        Mon, 23 Feb 2009 17:27:01 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c14sm10399228ana.21.2009.02.23.17.27.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 23 Feb 2009 17:27:01 -0800 (PST)
Message-Id: <D357DAFB-7B1F-4179-8686-F77DC6461A17@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <00F7CD19355DE347B74AFBF8871AF0DD01752942D4@SSV-MAILBOXES.corp.ssv.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Upgrading an old index to 2.4 format
Date: Mon, 23 Feb 2009 20:26:59 -0500
References: <00F7CD19355DE347B74AFBF8871AF0DD01752942D4@SSV-MAILBOXES.corp.ssv.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


That is true.

Good question on converting an already optimized index... I haven't  
tested this, and it's somewhat roundabout, but you may be able to open  
an IndexWriter, then call setUseCompoundFile with the opposite of what  
your index presently has, run optimize, set that back, and run  
optimize again.  I think it should work.

You could also add and then delete a single doc, then call optimize.

Mike

An Hong wrote:

>
> I've several existing indexes in 2.1 file format.  If these indexes  
> have multiple segments and have not been optimized, a call to  
> IndexWriter.optimize() should create a newly merged segment of the  
> latest 2.4 file format.  Is this true?  And, is there a way to force  
> a file format upgrade on a 2.1 index that's already in optimized  
> state?
> Thanks,
> An
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 02:07:12 2009
Return-Path: <java-user-return-38668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54874 invoked from network); 24 Feb 2009 02:07:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 02:07:11 -0000
Received: (qmail 11532 invoked by uid 500); 24 Feb 2009 02:07:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11494 invoked by uid 500); 24 Feb 2009 02:07:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11483 invoked by uid 99); 24 Feb 2009 02:07:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 18:07:04 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [8.7.216.163] (HELO mta1.evaultmail.com) (8.7.216.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 02:06:54 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AvwCAGDkoknR+dAJgWdsb2JhbACCRiuRcAEBFiLAQIQRBg
X-IronPort-AV: E=Sophos;i="4.38,256,1233561600"; 
   d="scan'208,217";a="32165575"
Received: from mail.seagateservices.com ([209.249.208.9])
  by smtp1.seagateservices.com with ESMTP; 23 Feb 2009 18:06:32 -0800
Received: from SSV-MAILBOXES.corp.ssv.com ([10.100.70.40]) by
 ssv-mail-hub.corp.ssv.com ([10.100.70.35]) with mapi; Mon, 23 Feb 2009
 18:06:46 -0800
From: An Hong <An.Hong@i365.com>
To: lucene-user <java-user@lucene.apache.org>
Date: Mon, 23 Feb 2009 18:06:30 -0800
Subject: IndexWriter 2-phase commit usage
Thread-Topic: IndexWriter 2-phase commit usage
Thread-Index: AcmWJIJZdZ6aKz3MTyy6cuqsu0INpg==
Message-ID: <00F7CD19355DE347B74AFBF8871AF0DD0175294318@SSV-MAILBOXES.corp.ssv.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_00F7CD19355DE347B74AFBF8871AF0DD0175294318SSVMAILBOXESc_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_00F7CD19355DE347B74AFBF8871AF0DD0175294318SSVMAILBOXESc_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm having trouble applying IndexWriter 2-phase commit to make a transactio=
n involving two different indexes.  The scenario,

 1.  Open index1
 2.  Open index2
 3.  Make change1 to index1
 4.  Make change2 to index2
 5.  index1.prepareCommit() successfully flushes
 6.  index2.prepareCommit() successfully flushes
 7.  index1.commit() successfully (segmentN file written)
 8.  index2.commit()
If step 8 fails, how can I roll back step 7 w/o implementing my own undo lo=
gic?  I want to make change1 and change2 a single transaction.
Thanks,
An

--_000_00F7CD19355DE347B74AFBF8871AF0DD0175294318SSVMAILBOXESc_--

From java-user-return-38669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 02:15:55 2009
Return-Path: <java-user-return-38669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59100 invoked from network); 24 Feb 2009 02:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 02:15:55 -0000
Received: (qmail 19668 invoked by uid 500); 24 Feb 2009 02:15:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19633 invoked by uid 500); 24 Feb 2009 02:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19622 invoked by uid 99); 24 Feb 2009 02:15:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Feb 2009 18:15:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of appler@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 02:15:41 +0000
Received: by rv-out-0506.google.com with SMTP id k40so3455799rvb.5
        for <java-user@lucene.apache.org>; Mon, 23 Feb 2009 18:15:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=HNsepKPskJlhMwfR0bXSSLIyqw3A++/ieHO5T1f23S8=;
        b=Uj660nVF3wl8R2X18LjjOt5vBQaEQ5R/Yw49CDw5Z+dQeN+s8A06BGnO58QpCv2ww3
         APosybb1W3F0gvLJSyEBYLbjP2SiBl0EPfWI1pkfUchLMR5A+7/5nTCyVoN5g7cm7hg8
         Ec6HclSZ6AY2QgFYgD9kyRGxTL0cZ29jWK1W0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=TupTK1ZnHsvv+SPAh4O2wwFgC6rwyFtWfTcDd9H1mdoxxzVongYzQc62hFtUbT7/0h
         IUnLREoBL2p5phQo0JWMUq5TSaCNPy7DVrsEZZlwCrKdEBlgBKaIokPI00XAW8eG4bmu
         VOJK8202U8U5flMVst7AHjB3g/3nBN/NsnbyE=
MIME-Version: 1.0
Received: by 10.140.201.8 with SMTP id y8mr2301408rvf.126.1235441720225; Mon, 
	23 Feb 2009 18:15:20 -0800 (PST)
Date: Tue, 24 Feb 2009 11:15:20 +0900
Message-ID: <48b708490902231815o75d19c2ci48dd75f166769e70@mail.gmail.com>
Subject: Why is the constructor of TopFieldDocs not public?
From: Cheolgoo Kang <appler@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm subclassing MultiSearcher and writing a customized searcher on my own.

The search( Weight, Filter, int, Sort ) method on MultiSearcher should
return TopFieldDocs, but I cannot instantiate one cause TopFieldDocs
constructor is declared as package-private. (TopFieldDocs itself is
public!)

Is there any reason the constructor of TopFieldDocs has no modifier declaration?

- Cheolgoo Kang

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 09:50:21 2009
Return-Path: <java-user-return-38670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41393 invoked from network); 24 Feb 2009 09:50:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 09:50:21 -0000
Received: (qmail 33967 invoked by uid 500); 24 Feb 2009 09:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33937 invoked by uid 500); 24 Feb 2009 09:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33926 invoked by uid 99); 24 Feb 2009 09:50:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 01:50:14 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Fang_Li@emc.com designates 128.222.32.20 as permitted sender)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 09:50:04 +0000
Received: from hop04-l1d11-si02.isus.emc.com (HOP04-L1D11-SI02.isus.emc.com [10.254.111.55])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id n1O9ngLL022811
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 04:49:43 -0500 (EST)
From: Fang_Li@emc.com
Received: from mailhub.lss.emc.com (numailhub.lss.emc.com [10.254.144.16]) by hop04-l1d11-si02.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 04:49:37 -0500
Received: from corpussmtp2.corp.emc.com (corpussmtp2.corp.emc.com [128.221.14.146])
	by mailhub.lss.emc.com (Switch-3.3.2/Switch-3.3.2) with ESMTP id n1O9nbNd013905
	for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 04:49:37 -0500
Received: from CORPUSMX70C.corp.emc.com ([128.221.32.147]) by corpussmtp2.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 24 Feb 2009 04:49:37 -0500
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexWriter 2-phase commit usage
Date: Tue, 24 Feb 2009 04:49:34 -0500
Message-ID: <07FEB1409F7A8C4FBA71A3A00ABFD043EE8F75@CORPUSMX70C.corp.emc.com>
In-Reply-To: <00F7CD19355DE347B74AFBF8871AF0DD0175294318@SSV-MAILBOXES.corp.ssv.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexWriter 2-phase commit usage
Thread-Index: AcmWJIJZdZ6aKz3MTyy6cuqsu0INpgAP5snA
References: <00F7CD19355DE347B74AFBF8871AF0DD0175294318@SSV-MAILBOXES.corp.ssv.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2009 09:49:37.0236 (UTC) FILETIME=[346F9140:01C99665]
X-EMM-EM: Active
X-Virus-Checked: Checked by ClamAV on apache.org

The prepareCommit should do most real works, so the chance
index2.commit() failure should be slim.

I think it's very hard to compensate the changes already committed.
One solution is that you create separate indexes for each transaction
and merge them later.

Merging can fail, but the transaction still fulfill ACID.



-----Original Message-----
From: An Hong [mailto:An.Hong@i365.com]=20
Sent: Tuesday, February 24, 2009 10:07 AM
To: lucene-user
Subject: IndexWriter 2-phase commit usage

I'm having trouble applying IndexWriter 2-phase commit to make a
transaction involving two different indexes.  The scenario,

 1.  Open index1
 2.  Open index2
 3.  Make change1 to index1
 4.  Make change2 to index2
 5.  index1.prepareCommit() successfully flushes
 6.  index2.prepareCommit() successfully flushes
 7.  index1.commit() successfully (segmentN file written)
 8.  index2.commit()
If step 8 fails, how can I roll back step 7 w/o implementing my own undo
logic?  I want to make change1 and change2 a single transaction.
Thanks,
An

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 10:29:48 2009
Return-Path: <java-user-return-38671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63770 invoked from network); 24 Feb 2009 10:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 10:29:48 -0000
Received: (qmail 65585 invoked by uid 500); 24 Feb 2009 10:29:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65553 invoked by uid 500); 24 Feb 2009 10:29:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65542 invoked by uid 99); 24 Feb 2009 10:29:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 02:29:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.217] (HELO web26006.mail.ukl.yahoo.com) (217.12.10.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Feb 2009 10:29:32 +0000
Received: (qmail 73269 invoked by uid 60001); 24 Feb 2009 10:29:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1235471351; bh=2R2kCshz/3EiFG9J7mDivkc60zBGbhEkxbWgSQAP1Ug=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=xhBKg+yHqZ4T+QC/FHXfs2mUeWXtea2cRRBtAg6/a70Edj4JSd4xJvRfwp/zU7zBATfb4ZPwrKQS8l1L9PEzft3vWplgKOJDGeH2eqi4eLpRXUvgjKqUiHkRe2nZAoOWFvpN1To+ViaNCXgzwVFTEKhpdiHLTdppwwSxs78OCw8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=TIpRr4911zyMT2g/CGjVUrn+9Az0p3QZi1KHWa84nQW5qpTJHWlSYGGCdR5h7UpqJoAVTEVuZ48bURdPCgyzY4O4pGSh0D8BNBMJI6UbNFZJjVbQpeC+UOYESCqstSsd4qkKmp4cjGxc1ia50YvQ+CqvL9lpjK/eeZZSVAGNuGg=;
Message-ID: <22051.72982.qm@web26006.mail.ukl.yahoo.com>
X-YMail-OSG: W.GFpqMVM1njVw5aeD0B3_YhaLfX5zuJXr.YF5CXWKmSeb9a3pHNtPg9O2UrXPeJLfSVpqVqD.JsHsB_He10RdIUMJ_qsVwWi2VMuMPPDTwr_iSONeCQWbWoN2Vpa0lGrMf7lOTzxWQpuLDplECf9FOEsHq1hzxFyh.wJbD3mhtzF_9XZdXiQvOPVtccGElG.f1Usx0A3jAA19WlTeB8hsUASb3Q
Received: from [194.106.34.5] by web26006.mail.ukl.yahoo.com via HTTP; Tue, 24 Feb 2009 10:29:10 GMT
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.289.1
References: <00F7CD19355DE347B74AFBF8871AF0DD0175294318@SSV-MAILBOXES.corp.ssv.com> <07FEB1409F7A8C4FBA71A3A00ABFD043EE8F75@CORPUSMX70C.corp.emc.com>
Date: Tue, 24 Feb 2009 10:29:10 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: IndexWriter 2-phase commit usage
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


As suggested, the window for failure here is very small. The commit is effe=
ctively an atomic single file rename operation to make the new segments fil=
e visible.=0AHowever, should there be a failure between 2 commits the new d=
eletion policy logic should help you recover to prior commit points. See he=
re for some discussion/Junit examples:=0A=0Ahttps://issues.apache.org/jira/=
browse/LUCENE-1449=0A=0ACheers=0AMark=0A=0A=0A=0A----- Original Message ---=
-=0AFrom: "Fang_Li@emc.com" <Fang_Li@emc.com>=0ATo: java-user@lucene.apache=
.org=0ASent: Tuesday, 24 February, 2009 9:49:34=0ASubject: RE: IndexWriter =
2-phase commit usage=0A=0AThe prepareCommit should do most real works, so t=
he chance=0Aindex2.commit() failure should be slim.=0A=0AI think it's very =
hard to compensate the changes already committed.=0AOne solution is that yo=
u create separate indexes for each transaction=0Aand merge them later.=0A=
=0AMerging can fail, but the transaction still fulfill ACID.=0A=0A=0A=0A---=
--Original Message-----=0AFrom: An Hong [mailto:An.Hong@i365.com] =0ASent: =
Tuesday, February 24, 2009 10:07 AM=0ATo: lucene-user=0ASubject: IndexWrite=
r 2-phase commit usage=0A=0AI'm having trouble applying IndexWriter 2-phase=
 commit to make a=0Atransaction involving two different indexes.  The scena=
rio,=0A=0A1.  Open index1=0A2.  Open index2=0A3.  Make change1 to index1=0A=
4.  Make change2 to index2=0A5.  index1.prepareCommit() successfully flushe=
s=0A6.  index2.prepareCommit() successfully flushes=0A7.  index1.commit() s=
uccessfully (segmentN file written)=0A8.  index2.commit()=0AIf step 8 fails=
, how can I roll back step 7 w/o implementing my own undo=0Alogic?  I want =
to make change1 and change2 a single transaction.=0AThanks,=0AAn=0A=0A-----=
----------------------------------------------------------------=0ATo unsub=
scribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional co=
mmands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 10:36:58 2009
Return-Path: <java-user-return-38672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65564 invoked from network); 24 Feb 2009 10:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 10:36:57 -0000
Received: (qmail 74512 invoked by uid 500); 24 Feb 2009 10:36:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74488 invoked by uid 500); 24 Feb 2009 10:36:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74477 invoked by uid 99); 24 Feb 2009 10:36:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 02:36:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.83.156.225] (HELO lnx500.hrz.tu-darmstadt.de) (130.83.156.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 10:36:41 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx500.hrz.tu-darmstadt.de (8.13.8/8.13.8/HRZ/PMX) with ESMTP id n1OAaHpw021334
	for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 11:36:18 +0100
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Lucene indexes
Date: Tue, 24 Feb 2009 11:36:17 +0100
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7210@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene indexes
Thread-Index: AcmWa7m4FEfMjhgIRkqnIJkLwOiolg==
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX: seen v0.51
X-PMX-SPAMCHECK: outgoing mail: not checked
X-Virus-Checked: Checked by ClamAV on apache.org


Hello everybody,

1) What is the difference between :
- inverted index
- nextword index
- common index

2) Which one(s) is(are) supported by Lucene?=20

3) Which class(es) create this(those) index(es)?


Thank you in advance for your help.
Nada Mimouni

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 12:05:56 2009
Return-Path: <java-user-return-38673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83817 invoked from network); 24 Feb 2009 12:05:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 12:05:56 -0000
Received: (qmail 47369 invoked by uid 500); 24 Feb 2009 12:05:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47336 invoked by uid 500); 24 Feb 2009 12:05:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47325 invoked by uid 99); 24 Feb 2009 12:05:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 04:05:48 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 12:05:39 +0000
Received: by yw-out-2324.google.com with SMTP id 2so826147ywt.5
        for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 04:05:16 -0800 (PST)
Received: by 10.151.41.21 with SMTP id t21mr6322622ybj.101.1235477116082;
        Tue, 24 Feb 2009 04:05:16 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id e27sm17562676elf.7.2009.02.24.04.05.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 24 Feb 2009 04:05:15 -0800 (PST)
Message-Id: <EB457592-8B28-4F93-8C1A-643926AF064C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <22051.72982.qm@web26006.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: IndexWriter 2-phase commit usage
Date: Tue, 24 Feb 2009 07:05:12 -0500
References: <00F7CD19355DE347B74AFBF8871AF0DD0175294318@SSV-MAILBOXES.corp.ssv.com> <07FEB1409F7A8C4FBA71A3A00ABFD043EE8F75@CORPUSMX70C.corp.emc.com> <22051.72982.qm@web26006.mail.ukl.yahoo.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


prepareCommit does almost all the work, right up until writing a new  
segments_N file with all of its contents *except* the final checksum  
at the end of the file.  Readers that try to open the index at this  
point will see an invalid checksum and will fallback to the previous  
segments_(N-1).  Then, commit simply writes the checksum, closes &  
syncs the segments_N.  Lucene doesn't rename files anymore (it's  
proven to be problematic on some platforms, eg Windows).

In the next (2.9) release of Lucene, you can pass IndexWriter an  
arbitrary IndexCommit to open, which effectively lets you rollback to  
any commit in the index.  Ie, it's more powerful than rollback() which  
reverts changes in memory since the last commit or open.

Of course, you'll have to use a deletion policy that keeps more than  
one commit in the index.  You can list all commits with  
IndexReader.listCommits.

It may also be useful to use prepareCommit(String) to save arbitrary  
String metadata into the commit, which you can then use later to tell  
them apart.

Mike

mark harwood wrote:

>
> As suggested, the window for failure here is very small. The commit  
> is effectively an atomic single file rename operation to make the  
> new segments file visible.
> However, should there be a failure between 2 commits the new  
> deletion policy logic should help you recover to prior commit  
> points. See here for some discussion/Junit examples:
>
> https://issues.apache.org/jira/browse/LUCENE-1449
>
> Cheers
> Mark
>
>
>
> ----- Original Message ----
> From: "Fang_Li@emc.com" <Fang_Li@emc.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, 24 February, 2009 9:49:34
> Subject: RE: IndexWriter 2-phase commit usage
>
> The prepareCommit should do most real works, so the chance
> index2.commit() failure should be slim.
>
> I think it's very hard to compensate the changes already committed.
> One solution is that you create separate indexes for each transaction
> and merge them later.
>
> Merging can fail, but the transaction still fulfill ACID.
>
>
>
> -----Original Message-----
> From: An Hong [mailto:An.Hong@i365.com]
> Sent: Tuesday, February 24, 2009 10:07 AM
> To: lucene-user
> Subject: IndexWriter 2-phase commit usage
>
> I'm having trouble applying IndexWriter 2-phase commit to make a
> transaction involving two different indexes.  The scenario,
>
> 1.  Open index1
> 2.  Open index2
> 3.  Make change1 to index1
> 4.  Make change2 to index2
> 5.  index1.prepareCommit() successfully flushes
> 6.  index2.prepareCommit() successfully flushes
> 7.  index1.commit() successfully (segmentN file written)
> 8.  index2.commit()
> If step 8 fails, how can I roll back step 7 w/o implementing my own  
> undo
> logic?  I want to make change1 and change2 a single transaction.
> Thanks,
> An
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 12:06:08 2009
Return-Path: <java-user-return-38674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83979 invoked from network); 24 Feb 2009 12:06:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 12:06:07 -0000
Received: (qmail 49109 invoked by uid 500); 24 Feb 2009 12:05:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49095 invoked by uid 500); 24 Feb 2009 12:05:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49084 invoked by uid 99); 24 Feb 2009 12:05:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 04:05:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 12:05:45 +0000
Received: by gxk18 with SMTP id 18so6604644gxk.5
        for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 04:05:23 -0800 (PST)
Received: by 10.151.11.19 with SMTP id o19mr1612030ybi.97.1235477123777;
        Tue, 24 Feb 2009 04:05:23 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id e27sm17562676elf.7.2009.02.24.04.05.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 24 Feb 2009 04:05:23 -0800 (PST)
Message-Id: <EE24BC45-2D4E-4A1E-90B5-635A319D8502@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48b708490902231815o75d19c2ci48dd75f166769e70@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Why is the constructor of TopFieldDocs not public?
Date: Tue, 24 Feb 2009 07:05:19 -0500
References: <48b708490902231815o75d19c2ci48dd75f166769e70@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Good question.  Are you hitting any other package-private issues in  
creating your own searcher?  (Seems likely you may).

TopDocs, in contrast, has a public ctor.

If there are no objections I'll switch it to public...

Mike

Cheolgoo Kang wrote:

> I'm subclassing MultiSearcher and writing a customized searcher on  
> my own.
>
> The search( Weight, Filter, int, Sort ) method on MultiSearcher should
> return TopFieldDocs, but I cannot instantiate one cause TopFieldDocs
> constructor is declared as package-private. (TopFieldDocs itself is
> public!)
>
> Is there any reason the constructor of TopFieldDocs has no modifier  
> declaration?
>
> - Cheolgoo Kang
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 12:53:46 2009
Return-Path: <java-user-return-38675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98487 invoked from network); 24 Feb 2009 12:53:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 12:53:46 -0000
Received: (qmail 91098 invoked by uid 500); 24 Feb 2009 12:53:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91061 invoked by uid 500); 24 Feb 2009 12:53:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91050 invoked by uid 99); 24 Feb 2009 12:53:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 04:53:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of seidymam@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 12:53:33 +0000
Received: by fg-out-1718.google.com with SMTP id l26so85414fgb.27
        for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 04:53:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=iYRZ5VgZJ5d9h0ad8gk8ERgUfs/L54CmCty0CFY9b44=;
        b=Y5b+sdtxYbR+VU7u4gwv7JsI4k+b4EfZyRjxyeeG/XU/kwIHhGzMIUJAoccRI14ONz
         +lF10jV6vaLUMxRoWJUvgRFuvun9hDbXZQcWZnpg5okHtBiLgQdj9MD9GHrDKrhtkdjV
         XLGQSjCWkatmqdFrQhS4DEAvgfguZ0Q2lZvEI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=G4lC2rUYHGdZYVed66tV7CiEsz/zYGXKiG3dPQlqmIz+v7ILEYul/7XY8cicBsITpZ
         g0+ebuCWVpUAcavRYUq1tdLIMjOU18A9f5jNh+6Jy/urHGmJSnDzKO/gcbHy8ofbIFZF
         zMMmYfbOBgWGnOqPwP8c+bDYBJLDQOnvFkD+Q=
MIME-Version: 1.0
Received: by 10.86.99.9 with SMTP id w9mr3705951fgb.12.1235479991943; Tue, 24 
	Feb 2009 04:53:11 -0800 (PST)
Date: Tue, 24 Feb 2009 15:53:11 +0300
Message-ID: <179b305e0902240453r22b6335axe0ce63f653b6fcdf@mail.gmail.com>
Subject: Pylucene
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I like python's text scripting capability.
for that I have read pylucene and some of the samples taken from
lucene in action book works fine.
my question is, I have language specific tools such as analyzer,
toknizer done for Amharic Language in java-lucene.
how can I use these tools just in pylucene?
can I add simply the classes to the pylucene package or what else?
thanks

Seid M



-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 13:00:16 2009
Return-Path: <java-user-return-38676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99598 invoked from network); 24 Feb 2009 13:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 13:00:16 -0000
Received: (qmail 2123 invoked by uid 500); 24 Feb 2009 13:00:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2101 invoked by uid 500); 24 Feb 2009 13:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2083 invoked by uid 99); 24 Feb 2009 13:00:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 05:00:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 12:59:56 +0000
Received: by gxk18 with SMTP id 18so6653046gxk.5
        for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 04:59:34 -0800 (PST)
Received: by 10.151.101.20 with SMTP id d20mr5850865ybm.88.1235480374320;
        Tue, 24 Feb 2009 04:59:34 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id o27sm17680437ele.13.2009.02.24.04.59.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 24 Feb 2009 04:59:33 -0800 (PST)
Message-Id: <11E875E6-760D-4444-9EAC-6520E222F2DD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <179b305e0902240453r22b6335axe0ce63f653b6fcdf@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Pylucene
Date: Tue, 24 Feb 2009 07:59:32 -0500
References: <179b305e0902240453r22b6335axe0ce63f653b6fcdf@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you re-ask this on pylucene-dev@lucene.apache.org?

Mike

Seid Mohammed wrote:

> I like python's text scripting capability.
> for that I have read pylucene and some of the samples taken from
> lucene in action book works fine.
> my question is, I have language specific tools such as analyzer,
> toknizer done for Amharic Language in java-lucene.
> how can I use these tools just in pylucene?
> can I add simply the classes to the pylucene package or what else?
> thanks
>
> Seid M
>
>
>
> -- 
> "RABI ZIDNI ILMA"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 13:13:57 2009
Return-Path: <java-user-return-38677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2674 invoked from network); 24 Feb 2009 13:13:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 13:13:57 -0000
Received: (qmail 19476 invoked by uid 500); 24 Feb 2009 13:13:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19444 invoked by uid 500); 24 Feb 2009 13:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19433 invoked by uid 99); 24 Feb 2009 13:13:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 05:13:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 13:13:44 +0000
Received: by an-out-0708.google.com with SMTP id c37so830796anc.5
        for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 05:13:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TiRilWMdo/R1QTSCATAUBu6qwnGR8pq0XnLvCRFFNQg=;
        b=uxR3NmK/REAF5GIjNrMVbqe2btpKXqSAq3BRRVqkWx+CfdE1tNT/O5wdGeWEEq0Bep
         4u1UD8uQ51IcDJnexmshP7HHPr5yk6nt0BwMRF4Ef0aexSl27NV6tn25iJsVGdM5iC/n
         EdzK80RKprVy5xT2aWz0P1kACeeANqsCNzZac=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IAxo8i6urMY/GRiFxwNf7xNw2qJoxBIZb51ppg0lnbPJ9lhSaJ4DL+d3lOCNmczUdu
         n9My8u8cGMutf+2oyZ7qOjkHpmWGN+UxvDvhEgcjcZ+U2K+VBEKNQ1mU7YR/DCjX9TSP
         pPKAJn1OwoLTyIPzCVQtSg+HsImesV9+nkUgs=
MIME-Version: 1.0
Received: by 10.220.81.5 with SMTP id v5mr782019vck.103.1235481203102; Tue, 24 
	Feb 2009 05:13:23 -0800 (PST)
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7210@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
References: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7210@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Date: Tue, 24 Feb 2009 08:13:23 -0500
Message-ID: <359a92830902240513k31a9921ck5c38074886ad2fe0@mail.gmail.com>
Subject: Re: Lucene indexes
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64769743cd4550463a9e2b6
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64769743cd4550463a9e2b6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I have to ask why do you care? Which is another way of asking
what problem you're trying to solve that you think this information
would help with. As far as I know Lucene is an inverted index,
period. You use IndexWriter to create it.

Really the best way to get a sense for which classes to use is to work
through some of the examples in Lucene In Action or on the website.

This may help as far as the structure of the index is concerned:
http://lucene.apache.org/java/2_4_0/fileformats.html

Best
Erick

On Tue, Feb 24, 2009 at 5:36 AM, Nada Mimouni <
mimouni@tk.informatik.tu-darmstadt.de> wrote:

>
> Hello everybody,
>
> 1) What is the difference between :
> - inverted index
> - nextword index
> - common index
>
> 2) Which one(s) is(are) supported by Lucene?
>
> 3) Which class(es) create this(those) index(es)?
>
>
> Thank you in advance for your help.
> Nada Mimouni
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64769743cd4550463a9e2b6--

From java-user-return-38678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 14:22:58 2009
Return-Path: <java-user-return-38678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42311 invoked from network); 24 Feb 2009 14:22:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 14:22:57 -0000
Received: (qmail 32023 invoked by uid 500); 24 Feb 2009 14:22:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31997 invoked by uid 500); 24 Feb 2009 14:22:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31986 invoked by uid 99); 24 Feb 2009 14:22:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 06:22:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.83.156.225] (HELO lnx500.hrz.tu-darmstadt.de) (130.83.156.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 14:22:43 +0000
Received: from callisto.tk.informatik.tu-darmstadt.de (callisto.tk.informatik.tu-darmstadt.de [130.83.163.139])
	by lnx500.hrz.tu-darmstadt.de (8.13.8/8.13.8/HRZ/PMX) with ESMTP id n1OEMKHB003341
	for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 15:22:20 +0100
	(envelope-from mimouni@tk.informatik.tu-darmstadt.de)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C9968B.4D655988"
Subject: RE: Lucene indexes
Date: Tue, 24 Feb 2009 15:22:19 +0100
Message-ID: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7213@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7213@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Thread-Topic: Lucene indexes
Thread-Index: AcmWgcUX9q2OdcvySkGchTupoWNinwAB1PxK
References: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7210@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de> <359a92830902240513k31a9921ck5c38074886ad2fe0@mail.gmail.com>
From: "Nada Mimouni" <mimouni@tk.informatik.tu-darmstadt.de>
To: <java-user@lucene.apache.org>
X-PMX: seen v0.51
X-PMX-SPAMCHECK: outgoing mail: not checked
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9968B.4D655988
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Thank you Erick.

I am totally aware that Lucene uses inverted index (class: IndexWriter).
I have read in the literature about new efficient indexes that are =
created to handle phrases indexing, so I wondered if there are some =
updates or new classes added to Lucene for that reason.

The problem that I am trying to solve is : How to index phrases (rather =
than phrase querying)?=20
I have a Questions/Answers corpus, the architecture I am using for IR =
creates one index for questions and another one for answers (based on =
single terms) and then matches between them.
I want to index phrases in addition to single terms (for both questions =
and answers) and then make a search for all terms and phrases in the =
questions index.=20

If you have any idea how I can solve this problem of indexing phrases, =
it would be of great help.=20

Nada Mimouni



-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]
Sent: Tue 2/24/2009 2:13 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene indexes
=20
I have to ask why do you care? Which is another way of asking
what problem you're trying to solve that you think this information
would help with. As far as I know Lucene is an inverted index,
period. You use IndexWriter to create it.

Really the best way to get a sense for which classes to use is to work
through some of the examples in Lucene In Action or on the website.

This may help as far as the structure of the index is concerned:
http://lucene.apache.org/java/2_4_0/fileformats.html

Best
Erick

On Tue, Feb 24, 2009 at 5:36 AM, Nada Mimouni <
mimouni@tk.informatik.tu-darmstadt.de> wrote:

>
> Hello everybody,
>
> 1) What is the difference between :
> - inverted index
> - nextword index
> - common index
>
> 2) Which one(s) is(are) supported by Lucene?
>
> 3) Which class(es) create this(those) index(es)?
>
>
> Thank you in advance for your help.
> Nada Mimouni
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



------_=_NextPart_001_01C9968B.4D655988
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C9968B.4D655988--

From java-user-return-38679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 16:13:26 2009
Return-Path: <java-user-return-38679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2415 invoked from network); 24 Feb 2009 16:13:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 16:13:26 -0000
Received: (qmail 462 invoked by uid 500); 24 Feb 2009 16:13:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 437 invoked by uid 500); 24 Feb 2009 16:13:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 413 invoked by uid 99); 24 Feb 2009 16:13:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 08:13:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.150] (HELO web30807.mail.mud.yahoo.com) (68.142.200.150)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Feb 2009 16:13:10 +0000
Received: (qmail 83243 invoked by uid 60001); 24 Feb 2009 16:12:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=kp583XxSs15j8ysIowzQ8QuOhD4QBmSdNXY6v6PfOh+AjI81DkzrP0B85juDN5rNjZK8QVsRidWuYToUSdXXtN5qi5ijLn6enHlO5oZO2zozKD8qKFpOfwwPJlTCl1VdmtMjNw0SDNSm9S9BnAEoAS0uiV02wf78nRzrQryOHfw=;
X-YMail-OSG: hIQOUO4VM1nULQF_DzxtZ81PnMMwbpXIGbjnRz8hUrk7Gw5WSlpMj9GkKH1MdzaGCOX3DkG9AH.sKFLHAvpLH86qNxatPYDZXyy9GKjzxpUR9bKIFeWfTZGyHvkCMyqepUwaMJb9VslUbGanuwEsoNx.PV5tx_EVMeBjG8hPzdC3FoQ.4mz60qeZmCSKrNB3y2AV8D_PSxDhaUwuV77kfZJZn9RHZf0-
Received: from [66.31.30.224] by web30807.mail.mud.yahoo.com via HTTP; Tue, 24 Feb 2009 08:12:47 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.260.1
References: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7210@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de> <359a92830902240513k31a9921ck5c38074886ad2fe0@mail.gmail.com> <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7213@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Date: Tue, 24 Feb 2009 08:12:47 -0800 (PST)
From: Shashi Kant <shashi_kant@yahoo.com>
Reply-To: Shashi Kant <skant@sloan.mit.edu>
Subject: Re: Lucene indexes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <246785.82933.qm@web30807.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Nada,

You might want to consider writing a custom tokenizer which will allow you to generate tokens based on your needs (other than whitespace).
Another option would be to look at SpanQuery or SpanNearQuery which would help with the kind of problem you are trying to solve (assuming I understand you correctly).

HTH,
Shashi




----- Original Message ----
From: Nada Mimouni <mimouni@tk.informatik.tu-darmstadt.de>
To: java-user@lucene.apache.org
Sent: Tuesday, February 24, 2009 9:22:19 AM
Subject: RE: Lucene indexes

Thank you Erick.

I am totally aware that Lucene uses inverted index (class: IndexWriter).
I have read in the literature about new efficient indexes that are created to handle phrases indexing, so I wondered if there are some updates or new classes added to Lucene for that reason.

The problem that I am trying to solve is : How to index phrases (rather than phrase querying)? 
I have a Questions/Answers corpus, the architecture I am using for IR creates one index for questions and another one for answers (based on single terms) and then matches between them.
I want to index phrases in addition to single terms (for both questions and answers) and then make a search for all terms and phrases in the questions index. 

If you have any idea how I can solve this problem of indexing phrases, it would be of great help. 

Nada Mimouni



-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]
Sent: Tue 2/24/2009 2:13 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene indexes

I have to ask why do you care? Which is another way of asking
what problem you're trying to solve that you think this information
would help with. As far as I know Lucene is an inverted index,
period. You use IndexWriter to create it.

Really the best way to get a sense for which classes to use is to work
through some of the examples in Lucene In Action or on the website.

This may help as far as the structure of the index is concerned:
http://lucene.apache.org/java/2_4_0/fileformats.html

Best
Erick

On Tue, Feb 24, 2009 at 5:36 AM, Nada Mimouni <
mimouni@tk.informatik.tu-darmstadt.de> wrote:

>
> Hello everybody,
>
> 1) What is the difference between :
> - inverted index
> - nextword index
> - common index
>
> 2) Which one(s) is(are) supported by Lucene?
>
> 3) Which class(es) create this(those) index(es)?
>
>
> Thank you in advance for your help.
> Nada Mimouni
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 17:14:16 2009
Return-Path: <java-user-return-38680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29685 invoked from network); 24 Feb 2009 17:14:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 17:14:16 -0000
Received: (qmail 7731 invoked by uid 500); 24 Feb 2009 17:14:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7698 invoked by uid 500); 24 Feb 2009 17:14:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7687 invoked by uid 99); 24 Feb 2009 17:14:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 09:14:08 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=RCVD_NUMERIC_HELO,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of linhon@tudou.com)
Received: from [121.9.240.3] (HELO mxpool3.tudou.com) (121.9.240.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 17:13:58 +0000
Received: from tudou.com (unknown [116.228.214.22])
	by mxpool3.tudou.com (Postfix) with ESMTP id 8697227EC58
	for <java-user@lucene.apache.org>; Wed, 25 Feb 2009 01:13:36 +0800 (CST)
Received: from 58.246.204.148 ([58.246.204.148]) by exchange2.corp.tudou.com ([10.5.3.50]) with Microsoft Exchange Server HTTP-DAV ; Tue, 24 Feb 2009 17:13:34 +0000
Received: from leibnitz-laptop by exchange2.corp.tudou.com; 25 Feb 2009 01:13:35 +0800
Subject: Re: How to compute the simlarity of a web page?
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
From: Linhon <linhon@tudou.com>
To: java-user@lucene.apache.org
In-Reply-To: <F56F6B71-0CFA-4409-A394-2D6673F8876A@apache.org>
References: <21970680.post@talk.nabble.com> <F56F6B71-0CFA-4409-A394-2D6673F8876A@apache.org>
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 25 Feb 2009 01:13:35 +0800
Message-ID: <1235495615.7985.3.camel@localhost>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
X-Virus-Checked: Checked by ClamAV on apache.org

wow,it sounds very nice,thank you:)

=E5=9C=A8 2009-02-16=E4=B8=80=E7=9A=84 22:08 -0500=EF=BC=8CGrant =
Ingersoll=E5=86=99=E9=81=93=EF=BC=9A
> Hmmm, you might be able to do the following:
>=20
> Create a document in a memory index containing the web page
> Create a query from the keywords
> Do a search with the query against the memory index and see the score.
>=20
> Alternatively, you could use the corpus statistics plus to create a =20
> term vector from the document (as if it were a member of the =20
> collection) and then do the cosine calculation of that document with =20
> your query (which you also calculated the weights for based on your =20
> collections stats)
>=20
> Last, it sounds like you are essentially describing a categorization =20
> task.  Have a look at some categorization software (for instance, =20
> Mahout can do Naive Bayes categorization or some alternatives).
>=20
> Of course, I might be missing something in understanding what you are  =

> asking, so feel free to give a shout back to discuss.
>=20
> HTH,
> Grant
>=20
> On Feb 12, 2009, at 1:31 AM, renavatior wrote:
>=20
> >
> > I am doing some research in vertical search? Therefore, i defined =
some
> > weights of several keywords in my corpus expressing a certain
> > theme,later,how can i use these to compute the similarity with the =20
> > given web
> > page(passed by url to the compute method).I saw the source code of
> > Similarity.java in Lucene,but i do not know how to use the method =20
> > such as
> > TF,IDF,and so on.
> > i will really appreciate it if anyone can give me some advice,thanks =
=20
> > in
> > advance.
> > --=20
> > View this message in context: =
http://www.nabble.com/How-to-compute-the-simlarity-of-a-web-page--tp21970=
680p21970680.html
> > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>=20
> Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) =20
> using Solr/Lucene:
> http://www.lucidimagination.com/search
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

*******************************************************************
This e-mail is confidential. It may also be legally privileged.
If you are not the addressee you may not copy, forward, disclose
or use any part of it. If you have received this message in error,
please delete it and all copies from your system and notify the
sender immediately by return e-mail.

Internet communications cannot be guaranteed to be timely,
secure, error or virus-free. The sender does not accept liability
for any errors or omissions.
*******************************************************************
"SAVE PAPER - THINK BEFORE YOU PRINT!"=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 20:32:40 2009
Return-Path: <java-user-return-38681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57163 invoked from network); 24 Feb 2009 20:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 20:32:40 -0000
Received: (qmail 55068 invoked by uid 500); 24 Feb 2009 20:32:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55038 invoked by uid 500); 24 Feb 2009 20:32:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55027 invoked by uid 99); 24 Feb 2009 20:32:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 12:32:32 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 20:32:23 +0000
Received: by fg-out-1718.google.com with SMTP id l26so149273fgb.27
        for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 12:32:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=OKjCzjCDZ0BfsqrtadIJS+Ek3le2iAinFxJhx8U22wM=;
        b=DoxJpXS/3YMM5WBgT49pAHB4K/J5aeQb98vKbf697YEFmdob7ojgkIT/B97cT4ms/e
         ieYGZegYm90vKEhUd6Uf6VARbmEWAs+24VfS9Jj0BjaKyKjpXa4lRo/1rYUubU4NyYJv
         BI6/6rC3cFSNfgBb0QE4ttcS6LOiSMHs2ZFto=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hib2Z2mMRUCfVXNY6c+/ARKY6r7mWuQqqIMc0pap+MpY67uEsAKhH8Rs60ahd0KbAf
         ocHx+XjugBI873bVTT/yfQeOqdrf4XTGxA25Z0iqEVa4z0ArEiXqyXxTzHaGYKSGmvre
         9ILib0pihBjpjTtUBG62UHwo4gRWWyulBWbdM=
MIME-Version: 1.0
Received: by 10.86.89.20 with SMTP id m20mr31709fgb.71.1235507521163; Tue, 24 
	Feb 2009 12:32:01 -0800 (PST)
In-Reply-To: <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
	 <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com>
	 <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
	 <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
Date: Tue, 24 Feb 2009 20:32:01 +0000
Message-ID: <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com>
Subject: Re: Faceted Search using Lucene
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=000e0cd248e6ea91a50463b0022f
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd248e6ea91a50463b0022f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi
I have been able to get the code working for my scenario, however I have a
question and I was wondering if I could get some help.  I have a list of
IndexSearchers which are used in a MultiSearcher class.  I use the
indexsearchers to get each indexreader and put them into a MultiIndexReader.

IndexReader[] readers = new IndexReader[searchables.length];

for (int i =0 ; i < searchables.length;i++) {

IndexSearcher indexSearcher = (IndexSearcher)searchables[i];

readers[i] = indexSearcher.getIndexReader();

    IndexReader newReader = readers[i].reopen();

if (newReader != readers[i]) {

readers[i].close();

}

readers[i] = newReader;



}

 multiReader = new MultiReader(readers);

OpenBitSetFacetHitCounter facetHitCounter = new OpenBitSetFacetHitCounter();

IndexSearcher indexSearcher = new IndexSearcher(multiReader);


I then use the indexseacher to do the facet stuff.  I end the code with
closing the multireader.  This is causing problems in another method where I
do some other search as the indexreaders are closed.  Is it ok to not close
the multiindexreader or should I do some additional checks in the other
method to see if the indexreader is closed?



Cheers


P.S. Hope that made sense...!


On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
> Thanks just what I needed!
>
> Cheers
> Amin
>
>
> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com> wrote:
>
>  Hi Amin:
>>  Please take a look a this blog post:
>> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
>>  Best regards, Marcelo.
>>
>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <aminmc@gmail.com>
>> wrote:
>>
>>> Hi
>>>
>>> Sorry to re send this email but I was wondering if I could get some
>>> advice
>>> on this.
>>>
>>> Cheers
>>>
>>> Amin
>>>
>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com>
>>> wrote:
>>>
>>>  Hi
>>>>
>>>> I am looking at building a faceted search using Lucene.  I know that
>>>> Solr
>>>> comes with this built in, however I would like to try this by myself
>>>> (something to add to my CV!).  I have been looking around and I found
>>>> that
>>>> you can use the IndexReader and use TermVectors.  This looks ok but I'm
>>>> not
>>>> sure how to filter the results so that a particular user can only see a
>>>> subset of results.  The next option I was looking at was something like
>>>>
>>>> Term term1 = new Term("brand", "ford");
>>>> Term term2 = new Term("brand", "vw");
>>>> Term[] termsArray = new Term[] { term1, term2 };un
>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>>>
>>>> The only problem here is that I have to provide the brand type each time
>>>> a
>>>> new brand is created.  Again I'm not sure how I can filter the results
>>>> here.
>>>> It may be that I'm using the wrong api methods to do this.
>>>>
>>>> I would be grateful if I could get some advice on this.
>>>>
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>> P.S.  I am basically trying to do something that displays the following
>>>>
>>>> Personal Contact (23) Business Contact (45) and so on..
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>
>>
>> --
>> Marcelo F. Ochoa
>> http://marceloochoa.blogspot.com/
>> http://marcelo.ochoa.googlepages.com/home
>> ______________
>> Want to integrate Lucene and Oracle?
>>
>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>> Is Oracle 11g REST ready?
>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--000e0cd248e6ea91a50463b0022f--

From java-user-return-38682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 20:49:00 2009
Return-Path: <java-user-return-38682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63642 invoked from network); 24 Feb 2009 20:48:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 20:48:59 -0000
Received: (qmail 77205 invoked by uid 500); 24 Feb 2009 20:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76948 invoked by uid 500); 24 Feb 2009 20:48:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76937 invoked by uid 99); 24 Feb 2009 20:48:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 12:48:52 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 20:48:42 +0000
Received: by fg-out-1718.google.com with SMTP id l26so151347fgb.27
        for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 12:48:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TT7pXdeHDN000Hh8Fd52W2bBGzvEyjLxJlXvHTJB6O0=;
        b=B7EddrrwJd6OH/lx9+wo/H++sxHCupo1rNt7mm91bnga4gsLGjoKxmjNaQ4stE1DN2
         m1OK6bEDPAb70hWPD1+PwfmOrsuI00HKil91i7+xeFj3v0ieTldFyKtliyORfjlbqkPE
         vRCHmhbEnzUY0xqU5kQmVX2+kp8QuaWsGGLzQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=A6lULmSfEJb+QQLk0/MdTWUlKoG8efpAXZEMgRvRWBsc2ZCLbD8WbpfayT6sdiw7fn
         MKQN+LDYyoNfhC1+I+nMI4qrMDOD2UdbAUvfPfEcICwuzclcBE8xa8o/uzki5yWmjbbI
         SfatVWTtGQdZ5htKRejAUlBUcrH6NibrrZm/4=
MIME-Version: 1.0
Received: by 10.86.74.4 with SMTP id w4mr84158fga.69.1235508500646; Tue, 24 
	Feb 2009 12:48:20 -0800 (PST)
In-Reply-To: <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com>
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
	 <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com>
	 <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
	 <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
	 <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com>
Date: Tue, 24 Feb 2009 20:48:20 +0000
Message-ID: <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com>
Subject: Re: Faceted Search using Lucene
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=000e0cd28e9c4c4a860463b03da4
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd28e9c4c4a860463b03da4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The reason for the indexreader.reopen is because I have a webapp which
enables users to upload files and then search for the documents.  If I don't
reopen i'm concerned that the facet hit counter won't be updated.

On Tue, Feb 24, 2009 at 8:32 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
> I have been able to get the code working for my scenario, however I have a
> question and I was wondering if I could get some help.  I have a list of
> IndexSearchers which are used in a MultiSearcher class.  I use the
> indexsearchers to get each indexreader and put them into a MultiIndexReader.
>
> IndexReader[] readers = new IndexReader[searchables.length];
>
> for (int i =0 ; i < searchables.length;i++) {
>
> IndexSearcher indexSearcher = (IndexSearcher)searchables[i];
>
> readers[i] = indexSearcher.getIndexReader();
>
>     IndexReader newReader = readers[i].reopen();
>
> if (newReader != readers[i]) {
>
> readers[i].close();
>
> }
>
> readers[i] = newReader;
>
>
>
> }
>
>  multiReader = new MultiReader(readers);
>
> OpenBitSetFacetHitCounter facetHitCounter = newOpenBitSetFacetHitCounter();
>
> IndexSearcher indexSearcher = new IndexSearcher(multiReader);
>
>
> I then use the indexseacher to do the facet stuff.  I end the code with
> closing the multireader.  This is causing problems in another method where I
> do some other search as the indexreaders are closed.  Is it ok to not close
> the multiindexreader or should I do some additional checks in the other
> method to see if the indexreader is closed?
>
>
>
> Cheers
>
>
> P.S. Hope that made sense...!
>
>
> On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:
>
>> Hi
>>
>> Thanks just what I needed!
>>
>> Cheers
>> Amin
>>
>>
>> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com> wrote:
>>
>>  Hi Amin:
>>>  Please take a look a this blog post:
>>>
>>> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
>>>  Best regards, Marcelo.
>>>
>>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <aminmc@gmail.com>
>>> wrote:
>>>
>>>> Hi
>>>>
>>>> Sorry to re send this email but I was wondering if I could get some
>>>> advice
>>>> on this.
>>>>
>>>> Cheers
>>>>
>>>> Amin
>>>>
>>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com>
>>>> wrote:
>>>>
>>>>  Hi
>>>>>
>>>>> I am looking at building a faceted search using Lucene.  I know that
>>>>> Solr
>>>>> comes with this built in, however I would like to try this by myself
>>>>> (something to add to my CV!).  I have been looking around and I found
>>>>> that
>>>>> you can use the IndexReader and use TermVectors.  This looks ok but I'm
>>>>> not
>>>>> sure how to filter the results so that a particular user can only see a
>>>>> subset of results.  The next option I was looking at was something like
>>>>>
>>>>> Term term1 = new Term("brand", "ford");
>>>>> Term term2 = new Term("brand", "vw");
>>>>> Term[] termsArray = new Term[] { term1, term2 };un
>>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>>>>
>>>>> The only problem here is that I have to provide the brand type each
>>>>> time a
>>>>> new brand is created.  Again I'm not sure how I can filter the results
>>>>> here.
>>>>> It may be that I'm using the wrong api methods to do this.
>>>>>
>>>>> I would be grateful if I could get some advice on this.
>>>>>
>>>>>
>>>>> Cheers
>>>>> Amin
>>>>>
>>>>> P.S.  I am basically trying to do something that displays the following
>>>>>
>>>>> Personal Contact (23) Business Contact (45) and so on..
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>>> --
>>> Marcelo F. Ochoa
>>> http://marceloochoa.blogspot.com/
>>> http://marcelo.ochoa.googlepages.com/home
>>> ______________
>>> Want to integrate Lucene and Oracle?
>>>
>>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>>> Is Oracle 11g REST ready?
>>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>

--000e0cd28e9c4c4a860463b03da4--

From java-user-return-38683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 22:36:21 2009
Return-Path: <java-user-return-38683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36407 invoked from network); 24 Feb 2009 22:36:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 22:36:21 -0000
Received: (qmail 22154 invoked by uid 500); 24 Feb 2009 22:36:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22133 invoked by uid 500); 24 Feb 2009 22:36:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22121 invoked by uid 99); 24 Feb 2009 22:36:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 14:36:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 22:36:05 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 244F071C2D0; Tue, 24 Feb 2009 14:35:43 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 221E071C2B1
	for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 14:35:43 -0800 (PST)
Date: Tue, 24 Feb 2009 14:35:43 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Lucene indexes
In-Reply-To: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7213@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
Message-ID: <Pine.LNX.4.64.0902241428410.29397@radix.cryptio.net>
References: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7210@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
 <359a92830902240513k31a9921ck5c38074886ad2fe0@mail.gmail.com>
 <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7213@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The problem that I am trying to solve is : How to index phrases (rather 
: than phrase querying)? I have a Questions/Answers corpus, the 
: architecture I am using for IR creates one index for questions and 
: another one for answers (based on single terms) and then matches between 
: them. I want to index phrases in addition to single terms (for both 
: questions and answers) and then make a search for all terms and phrases 
: in the questions index.

can you elaborate a little on what you mean by "index phrases" ... 
specificly what is it you want to be able to to do, that you don't think 
you can do with a PhraseQuery?

my best guess, reading between the lines, is that want to discover
documents in your "answers" index that might correlate to documents in 
your "questions" index based on a high overlap of phrases -- i'm also 
guessing (reading between the lines) that you realize you can use things 
like TermEnum and TermDocs to find terms in common btween both indexes, 
and which documents contain those terms

if my guesses are correct, indexing using ShingleFilter might be of use to 
you -- Shingling is (lucene specific?) vernacular for word based ngrams, 
and by indexing in this way you can get "terms" consisting of multiple 
successive "words" when indexing, and then match things up that way.

as someone else mentioned, you can also use other custom Tokenization if 
you have a better definition of a "phrase" then just a sequence of 
successive words (ie: index whole sentences as a single term, etc...)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 24 23:13:40 2009
Return-Path: <java-user-return-38684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58198 invoked from network); 24 Feb 2009 23:13:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2009 23:13:40 -0000
Received: (qmail 75845 invoked by uid 500); 24 Feb 2009 23:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75813 invoked by uid 500); 24 Feb 2009 23:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75802 invoked by uid 99); 24 Feb 2009 23:13:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 15:13:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Feb 2009 23:13:23 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id n1OND1lq015303
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 24 Feb 2009 18:13:02 -0500
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.340.0; Tue, 24 Feb 2009 18:13:01 -0500
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Tue, 24 Feb 2009 18:13:01 -0500
x-mimeole: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene indexes
Date: Tue, 24 Feb 2009 18:13:01 -0500
Message-ID: <9294E20AED46934EA459020706463F94011EF110@SUEXCL-02.ad.syr.edu>
In-Reply-To: <Pine.LNX.4.64.0902241428410.29397@radix.cryptio.net>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Lucene indexes
Thread-Index: AcmW0FN9dXkYPDf2SL2szWouRfC07wAAWK+A
References: <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7210@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de> <359a92830902240513k31a9921ck5c38074886ad2fe0@mail.gmail.com> <0DBCCB475CDE864F8F6086D69BFC5D9F02CE7213@CALLISTO.ntdom.tk.informatik.tu-darmstadt.de> <Pine.LNX.4.64.0902241428410.29397@radix.cryptio.net>
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Feb 2009 23:13:01.0796 (UTC) FILETIME=[7097B240:01C996D5]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2009-02-24_12:2009-02-10,2009-02-24,2009-02-24 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/24/2009 at 5:36 PM, Chris Hostetter wrote:
> Shingling is (lucene specific?) vernacular for word based ngrams

"Shingle" is not a Lucene-specific term - here's an entry, e.g., from an
IBM "Glossary of terms for enterprise search" at
<http://publib.boulder.ibm.com/infocenter/discover/v8r5m0/index.jsp?topi
c=3D/com.ibm.discovery.es.common.doc/standard/iiysgloss.htm>:

-----
shingle

    A string of consecutive tokens (words) that are taken from a
sentence. For example, from "This is a very short sentence.", the 3-word
shingles (or trigrams) are:

    This is a
    is a very
    a very short
    very short sentence

    Shingles can be used in statistical linguistics. For example, if two
different texts have a lot of common shingles, the texts are probably
related somehow.
-----

The earliest usage I can find is Andrei Broder et al.'s 1997 report
"Syntactic Clustering of the Web":

http://www.hpl.hp.com/techreports/Compaq-DEC/SRC-TN-1997-015.pdf

I first saw the term in Broder's 2000 paper "Identifying and Filtering
Near-Duplicate Documents":=20

http://www.cs.princeton.edu/courses/archive/spring05/cos598E/bib/CPM%202
000.pdf

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 25 14:45:38 2009
Return-Path: <java-user-return-38685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92843 invoked from network); 25 Feb 2009 14:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2009 14:45:38 -0000
Received: (qmail 89701 invoked by uid 500); 25 Feb 2009 14:45:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89674 invoked by uid 500); 25 Feb 2009 14:45:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89663 invoked by uid 99); 25 Feb 2009 14:45:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 06:45:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of appler@gmail.com designates 209.85.217.170 as permitted sender)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 14:45:23 +0000
Received: by gxk18 with SMTP id 18so132749gxk.5
        for <java-user@lucene.apache.org>; Wed, 25 Feb 2009 06:45:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=7oJ+C4iMb1xnIAh07gpqCdSx0ozSmQxOpMMj0D+FVU4=;
        b=kmWyWPC1jSIrClOqKuuWMo11F9L3JLSH4qzRmtlitF3Yfjfbf/tK9kHBOBtKOxnfjT
         I7a/2Rv1gBIQqxh4ck84STsI/viBgpgurCZ628kkcIi2mo0b9kH0ge3UO0vYZtikXd8s
         NMWtTDjisFCcgGUEtNQ4/ClHI5hTtUXjlBDoE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=F8hYVbFI281fReS1Z711oRacL9ywcvwz2f8z+qOWD/ZxXEqW++LITdHE9kA3EWMraW
         sJcMEtndjsdLSxaS+sNOBWYnJbLkFiWve236X8RSHswTMOsOTdEgPNXJWKI8enMq6kI2
         XxsMzNTpqvgf8cog8jjO0Y/6wvduA22i0Nvuk=
MIME-Version: 1.0
Received: by 10.142.241.15 with SMTP id o15mr90445wfh.104.1235573102714; Wed, 
	25 Feb 2009 06:45:02 -0800 (PST)
In-Reply-To: <EE24BC45-2D4E-4A1E-90B5-635A319D8502@mikemccandless.com>
References: <48b708490902231815o75d19c2ci48dd75f166769e70@mail.gmail.com>
	 <EE24BC45-2D4E-4A1E-90B5-635A319D8502@mikemccandless.com>
Date: Wed, 25 Feb 2009 23:45:02 +0900
Message-ID: <48b708490902250645w114d8d6fga1debcb7fba52e75@mail.gmail.com>
Subject: Re: Why is the constructor of TopFieldDocs not public?
From: Cheolgoo Kang <appler@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Here are two package-private issues I've met. But I could find
workarounds on these issues easily.

o.a.l.search.FieldDocSortedHitQueue
o.a.l.search.HitQueue

I think any of package-private methods of those two class should be public.

- Cheolgoo Kang



On Tue, Feb 24, 2009 at 9:05 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Good question. =A0Are you hitting any other package-private issues in cre=
ating
> your own searcher? =A0(Seems likely you may).
>
> TopDocs, in contrast, has a public ctor.
>
> If there are no objections I'll switch it to public...
>
> Mike
>
> Cheolgoo Kang wrote:
>
>> I'm subclassing MultiSearcher and writing a customized searcher on my ow=
n.
>>
>> The search( Weight, Filter, int, Sort ) method on MultiSearcher should
>> return TopFieldDocs, but I cannot instantiate one cause TopFieldDocs
>> constructor is declared as package-private. (TopFieldDocs itself is
>> public!)
>>
>> Is there any reason the constructor of TopFieldDocs has no modifier
>> declaration?
>>
>> - Cheolgoo Kang
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 25 16:00:04 2009
Return-Path: <java-user-return-38686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43316 invoked from network); 25 Feb 2009 16:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2009 16:00:04 -0000
Received: (qmail 37504 invoked by uid 500); 25 Feb 2009 15:59:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36703 invoked by uid 500); 25 Feb 2009 15:59:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36692 invoked by uid 99); 25 Feb 2009 15:59:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 07:59:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of haroldo_lucene@hotmail.com designates 65.54.246.229 as permitted sender)
Received: from [65.54.246.229] (HELO bay0-omc3-s29.bay0.hotmail.com) (65.54.246.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 15:59:48 +0000
Received: from BAY138-W16 ([64.4.49.51]) by bay0-omc3-s29.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 25 Feb 2009 07:59:28 -0800
Message-ID: <BAY138-W1691BD9FA9C7D2BCCC25D1F7AC0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_1fdcf4f6-2b48-48d2-9e2f-4fc374ddfd53_"
X-Originating-IP: [189.20.40.106]
From: Haroldo Nascimento <haroldo_lucene@hotmail.com>
To: lucene-user lucene-user <java-user@lucene.apache.org>
Subject: Change boosting in search-time with field
Date: Wed, 25 Feb 2009 18:59:27 +0300
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 25 Feb 2009 15:59:28.0483 (UTC) FILETIME=[09DCE330:01C99762]
X-Virus-Checked: Checked by ClamAV on apache.org

--_1fdcf4f6-2b48-48d2-9e2f-4fc374ddfd53_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


 Hi=2C
  Is possible to apply the value of a field in boosting of the document in =
search-time ? In idexing-time is possible=2C but a need change de boosting =
when the search is exact and partial.
  Thanks.
  Haroldo
_________________________________________________________________
Confira v=EDdeos com not=EDcias do NY Times=2C gols direto do Lance=2C vide=
ocassetadas e muito mais no MSN Video!
http://video.msn.com/?mkt=3Dpt-br=

--_1fdcf4f6-2b48-48d2-9e2f-4fc374ddfd53_--

From java-user-return-38687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 25 16:39:51 2009
Return-Path: <java-user-return-38687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63045 invoked from network); 25 Feb 2009 16:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2009 16:39:50 -0000
Received: (qmail 94171 invoked by uid 500); 25 Feb 2009 16:39:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94135 invoked by uid 500); 25 Feb 2009 16:39:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94124 invoked by uid 99); 25 Feb 2009 16:39:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 08:39:42 -0800
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ken.williams@thomsonreuters.com designates 163.231.12.68 as permitted sender)
Received: from [163.231.12.68] (HELO mailout3-tlr.thomson.com) (163.231.12.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 16:39:31 +0000
Received: from mailout3-tlr.thomson.com (localhost [127.0.0.1])
	by mailout3-tlr.thomson.com (Switch-3.2.7/Switch-3.2.7) with ESMTP id n1PGd9Fe029567
	for <java-user@lucene.apache.org>; Wed, 25 Feb 2009 16:39:09 GMT
Received: from TLRUSMNEAGFE02.ERF.THOMSON.COM (tlrusmneagfe02.erf.thomson.com [163.231.22.129])
	by mailout3-tlr.thomson.com (Switch-3.2.7/Switch-3.2.7) with ESMTP id n1PGcr1g029314
	for <java-user@lucene.apache.org>; Wed, 25 Feb 2009 16:39:09 GMT
Received: from TLRUSMNEAGMBX22.ERF.THOMSON.COM ([163.231.30.224]) by TLRUSMNEAGFE02.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 25 Feb 2009 10:38:58 -0600
Received: from 163.231.65.100 ([163.231.65.100]) by TLRUSMNEAGMBX22.ERF.THOMSON.COM ([163.231.30.212]) via Exchange Front-End Server mail.west.thomson.com ([163.231.22.145]) with Microsoft Exchange Server HTTP-DAV ;
 Wed, 25 Feb 2009 16:38:58 +0000
User-Agent: Microsoft-Entourage/12.15.0.081119
Date: Wed, 25 Feb 2009 10:38:56 -0600
Subject: Re: Confidence scores at search time
From: Ken Williams <ken.williams@thomsonreuters.com>
To: <java-user@lucene.apache.org>
Message-ID: <C5CAD040.1EEEF%ken.williams@thomsonreuters.com>
Thread-Topic: Confidence scores at search time
Thread-Index: AcmThRpsll0kaGT3Q02zC3+sAnYKigD4nKXs
In-Reply-To: <C5C44BD8.1ECA1%ken.williams@thomsonreuters.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-OriginalArrivalTime: 25 Feb 2009 16:38:58.0843 (UTC) FILETIME=[8EB51EB0:01C99767]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I didn't get a response to this - not sure whether the question was
ill-posed, or too-frequently-asked, or just not interesting.  But if anyone
could take a stab at it or let me know a different place to look, I'd really
appreciate it.

Thanks,

 -Ken


On 2/20/09 12:00 PM, "Ken Williams" <ken.williams@thomsonreuters.com> wrote:

> Hi,
> 
> Has there been any work done on getting confidence scores at runtime, so
> that scores of documents can be compared across queries?  I found one
> reference in the mailing list to some work in 2003, but couldn't find any
> follow-up:
> 
>   http://osdir.com/ml/jakarta.lucene.user/2003-12/msg00093.html
> 
> Thanks.

-- 
Ken Williams
Research Scientist
The Thomson Reuters Corporation
Eagan, MN


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 25 19:47:30 2009
Return-Path: <java-user-return-38688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71478 invoked from network); 25 Feb 2009 19:47:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2009 19:47:30 -0000
Received: (qmail 35379 invoked by uid 500); 25 Feb 2009 19:47:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35355 invoked by uid 500); 25 Feb 2009 19:47:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35344 invoked by uid 99); 25 Feb 2009 19:47:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 11:47:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.177.145.93] (HELO prxy.net) (209.177.145.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 19:47:12 +0000
X-Scanned-By: RAE MPP/ClamAV http://raeinternet.com/mpp
X-Scanned-By: This message was scanned by MPP Free Edition (www.messagepartners.com)!
Received: from [75.26.171.160] (account ken@krugler.org HELO [192.168.1.103])
  by prxy.net (CommuniGate Pro SMTP 4.2.10)
  with ESMTP-TLS id 100132281 for java-user@lucene.apache.org; Wed, 25 Feb 2009 11:46:49 -0800
Mime-Version: 1.0
Message-Id: <p06240808c5cb4e845f9d@[192.168.1.103]>
In-Reply-To: <1235495615.7985.3.camel@localhost>
References: <21970680.post@talk.nabble.com>
 <F56F6B71-0CFA-4409-A394-2D6673F8876A@apache.org>
 <1235495615.7985.3.camel@localhost>
Date: Wed, 25 Feb 2009 11:46:11 -0800
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: How to compute the simlarity of a web page?
Content-Type: text/plain; charset="iso-8859-1" ; format="flowed"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=46WIW, we did something similar with our vertical=20
crawl for Krugle. For each web page, we'd=20
generate a TreeMap of terms/frequencies. Then=20
we'd calculate the angle between this term vector=20
representation, and a target term vector we=20
generated by analyzing many "good" pages.

Since we were using Nutch, we'd use this score to=20
adjust the OPIC weights for the outlinks, thus=20
focusing the crawl on pages referenced by what we=20
considered to be "good" pages. Though the way=20
Nutch used OPIC made it highly susceptible to=20
spammy link farms, so you'd need to add code to=20
guard against that if you take this approach.

Note that most of the work here will be in=20
analyzing the results and then tuning your target=20
term vector - e.g. which terms (stop words) do=20
you ignore, should you use unit vectors (all=20
frequencies set to 1), what set of data do you=20
use to generate the target term vector, etc.

Something we didn't do, which seemed valuable,=20
would be to use phrases vs. single terms, along=20
the lines of Amazon's SIPs (statistically=20
improbable phrases).

-- Ken


>=E7=F0 2009-02-16=E0=CD=ECI 22:08 -0500=C5CGrant Ingersoll=E9 =EC=BC=C5F
>>  Hmmm, you might be able to do the following:
>  >
>  > Create a document in a memory index containing the web page
>>  Create a query from the keywords
>  > Do a search with the query against the memory index and see the score.
>  >
>  > Alternatively, you could use the corpus statistics plus to create a 
>>  term vector from the document (as if it were a member of the 
>>  collection) and then do the cosine calculation of that document with 
>>  your query (which you also calculated the weights for based on your
>  > collections stats)
>  >
>  > Last, it sounds like you are essentially describing a categorization 
>>  task.  Have a look at some categorization software (for instance,
>  > Mahout can do Naive Bayes categorization or some alternatives).
>  >
>  > Of course, I might be missing something in understanding what you are 
>>  asking, so feel free to give a shout back to discuss.
>  >
>>  HTH,
>>  Grant
>>
>>  On Feb 12, 2009, at 1:31 AM, renavatior wrote:
>>
>>  >
>  > > I am doing some research in vertical search? Therefore, i defined som=
e
>>  > weights of several keywords in my corpus expressing a certain
>>  > theme,later,how can i use these to compute the similarity with the 
>>  > given web
>>  > page(passed by url to the compute method).I saw the source code of
>>  > Similarity.java in Lucene,but i do not know how to use the method 
>>  > such as
>>  > TF,IDF,and so on.
>>  > i will really appreciate it if anyone can give me some advice,thanks
>  > > in
>>  > advance.
>>  > --
>>  > View this message in context:=20
>>http://www.nabble.com/How-to-compute-the-simlarity-of-a-web-page--tp219706=
80p21970680.html
>>  > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>  >
>>  >
>>  > ---------------------------------------------------------------------
>>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >
>>
>>  --------------------------
>>  Grant Ingersoll
>>  http://www.lucidimagination.com/
>>
>>  Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) 
>>  using Solr/Lucene:
>>  http://www.lucidimagination.com/search
>>
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>*******************************************************************
>This e-mail is confidential. It may also be legally privileged.
>If you are not the addressee you may not copy, forward, disclose
>or use any part of it. If you have received this message in error,
>please delete it and all copies from your system and notify the
>sender immediately by return e-mail.
>
>Internet communications cannot be guaranteed to be timely,
>secure, error or virus-free. The sender does not accept liability
>for any errors or omissions.
>*******************************************************************
>"SAVE PAPER - THINK BEFORE YOU PRINT!"
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org


-- 
Ken Krugler
+1 530-210-6378

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 25 20:52:48 2009
Return-Path: <java-user-return-38689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11090 invoked from network); 25 Feb 2009 20:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2009 20:52:47 -0000
Received: (qmail 19075 invoked by uid 500); 25 Feb 2009 20:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19047 invoked by uid 500); 25 Feb 2009 20:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19035 invoked by uid 99); 25 Feb 2009 20:52:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 12:52:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of williamstw@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 20:52:33 +0000
Received: by rv-out-0506.google.com with SMTP id k40so325393rvb.5
        for <java-user@lucene.apache.org>; Wed, 25 Feb 2009 12:52:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=ST+n0AERnfsoX9n7NnBa2eTiXTu+oZqOknASDtUKxv0=;
        b=riEIotp4qfDxACdneyPpKa1DhZysTr6wEg4GR6D6qN3RU9CsoAtbw4q5JT/UZfrTSD
         CDRm2xEYk6nAqOdJaakMW44F5l6ZEMVtv2ZGDbHeuLdaPNmJere4sLWAyBUA9SSCaosI
         MspFr9vepdEDfAMnOqlXlPRT68k0kawk8eERo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=w20yS0j28quGhBsj8pQBMlN+RIw8GxxIXQswFEksdCVNs5Fdl9U+ibb0gBhxPGoc3a
         eLeVey5OL/PflJUgIiDqyY2mrceY9bxPqq3g7Y0qBRsZ0G+421uYBgvg+2ozX8TlTGb6
         KnetumqyyJ4D+y5XzKNd4vLABagZrvn9v/U9c=
MIME-Version: 1.0
Received: by 10.141.212.5 with SMTP id o5mr226774rvq.11.1235595133751; Wed, 25 
	Feb 2009 12:52:13 -0800 (PST)
Date: Wed, 25 Feb 2009 15:52:13 -0500
Message-ID: <499888440902251252r45471a35yeda3a7f8726f03af@mail.gmail.com>
Subject: term position in phrase query using queryparser
From: Tim Williams <williamstw@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a syntax to set the term position in a query built with
queryparser?  For example, I would like something like:

PhraseQuery q = new PhraseQuery();
q.add(t1, 0);
q.add(t2, 0);
q.setSlop(0);

As I understand it, the slop defaults to 0, but I don't know how to
search for basically two tokens at the same term position using the
queryparser syntax.

Thanks,
--tim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 01:30:30 2009
Return-Path: <java-user-return-38690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83575 invoked from network); 26 Feb 2009 01:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 01:30:30 -0000
Received: (qmail 71604 invoked by uid 500); 26 Feb 2009 01:30:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71576 invoked by uid 500); 26 Feb 2009 01:30:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71565 invoked by uid 99); 26 Feb 2009 01:30:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 17:30:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vivextra@gmail.com designates 209.85.219.157 as permitted sender)
Received: from [209.85.219.157] (HELO mail-ew0-f157.google.com) (209.85.219.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 01:30:13 +0000
Received: by ewy1 with SMTP id 1so491593ewy.5
        for <java-user@lucene.apache.org>; Wed, 25 Feb 2009 17:29:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ihAl6wx16IAGqL0gZiBlo4yqXtqz1xaj8EWbfiIQwWU=;
        b=H5K+6TlkT+GIjfqWndWlFS6SoggL5dHsc+MborjCU81UC+MEEyffHlk6557INUw0Pg
         IcZJ7T62BkzjlJZS8gg58vcrAuIzGwHCLpDijyT2H3TKm+hbWjzU7Jw09PIAGRCJeoWe
         QjsSQTRDp9fYHATPdme5ZmJwsQicaHJqQe3pc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=pI/90h4A9MNZYS536n8A6ul++KyvATb0S+6u8BWzwlhGhlaH8d+g7FN2R5W7Aiv2Wd
         8OvDwudGl81uYPgpJscBKnx2pcUtKRAOsAmEsGgkhHLuAWeWGFvddtIBnU8l0r39Hylv
         YZ3UEN8OeFMrwzrwTWAN98UB/NIYMy7j6nx4I=
MIME-Version: 1.0
Received: by 10.210.38.17 with SMTP id l17mr385442ebl.29.1235611792809; Wed, 
	25 Feb 2009 17:29:52 -0800 (PST)
In-Reply-To: <dbd9700a0901030804q5bbc4bcdob5b57f0b83ed8875@mail.gmail.com>
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
	 <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
	 <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
	 <c68e39170901021409s5149fe60j372c99a1367f18aa@mail.gmail.com>
	 <9ac0c6aa0901021426o34d7dbd5h546c759c5afb8949@mail.gmail.com>
	 <dbd9700a0901021539s43a62f0fj8daf0bfffb7b0086@mail.gmail.com>
	 <9ac0c6aa0901030555p1ee7b9dbt7a308f6bc6103394@mail.gmail.com>
	 <dbd9700a0901030804q5bbc4bcdob5b57f0b83ed8875@mail.gmail.com>
Date: Wed, 25 Feb 2009 17:29:52 -0800
Message-ID: <a206fb7e0902251729p4d4683dn3f65e7abcca2e047@mail.gmail.com>
Subject: Re: background merge hit exception
From: vivek sar <vivextra@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

  We ran into the same issue (corrupted index) using Lucene 2.4.0.
There was no outage or system reboot - not sure how could it get
corrupted. Here is the exception,

Caused by: java.io.IOException: background merge hit exception:
_io5:c66777491 _nh9:c10656736 _taq:c2021563 _s8m:c1421051
_uh5:c2065961 _r0y:c1124653 _s4s:c2477731 _t6w:c4340938 _ucx:c8018451
_xkb:c13842776 _xkd:c3394 _xke:c3379 _xkg:c1231 _xkh:c1252 _xkj:c1680
_xkk:c1689 into _xkl [optimize]
        at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:22=
58)
        at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:21=
94)
        at com.packetmotion.manager.query.fulltext.index.Indexer.optimizeMa=
sterIndex(Indexer.java:887)
        at com.packetmotion.manager.query.fulltext.index.Indexer.createNewI=
ndexPartition(Indexer.java:783)
        at com.packetmotion.manager.query.fulltext.index.Indexer.indexByDev=
ice(Indexer.java:582)
        at com.packetmotion.manager.query.fulltext.index.Indexer.indexData(=
Indexer.java:440)
        at com.packetmotion.manager.query.fulltext.index.Indexer$$FastClass=
ByCGLIB$$97fb7e9b.invoke(<generated>)
        at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
        at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedI=
nterceptor.intercept(Cglib2AopProxy.java:628)
        at com.packetmotion.manager.query.fulltext.index.Indexer$$EnhancerB=
yCGLIB$$ebbe3914.indexData(<generated>)
        at com.packetmotion.manager.query.fulltext.index.IndexerJob$1.run(I=
ndexerJob.java:38)
        ... 8 more
Caused by: java.lang.IndexOutOfBoundsException: Index: 51, Size: 26
        at java.util.ArrayList.RangeCheck(ArrayList.java:547)
        at java.util.ArrayList.get(ArrayList.java:322)
        at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:265=
)
        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:185)
        at org.apache.lucene.index.SegmentReader.document(SegmentReader.jav=
a:729)
        at org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.=
java:359)
        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:1=
39)
        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java=
:4226)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(Concurr=
entMergeScheduler.java:205)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run=
(ConcurrentMergeScheduler.java:260)


I ran the checkIndex tool to fix the corrupted index. Here is its output,


Opening index @ /opt/ps_manager/apps/conf/index/MasterIndex

Segments file=3Dsegments_1587 numSegments=3D18 version=3DFORMAT_HAS_PROX [L=
ucene 2.4]
  1 of 18: name=3D_io5 docCount=3D66777491
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D6,680.574
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [30 fields]
    test: terms, freq, prox...OK [368415 terms; 1761057989 terms/docs
pairs; 2095636359 tokens]
    test: stored fields.......OK [66777491 total field count; avg 1
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  2 of 18: name=3D_nh9 docCount=3D10656736
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D1,058.869
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [30 fields]
    test: terms, freq, prox...OK [118964 terms; 278176718 terms/docs
pairs; 329825350 tokens]
    test: stored fields.......OK [10656736 total field count; avg 1
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  3 of 18: name=3D_taq docCount=3D2021563
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D208.544
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [30 fields]
    test: terms, freq, prox...OK [145494 terms; 54131697 terms/docs
pairs; 65411701 tokens]
    test: stored fields.......OK [2021563 total field count; avg 1
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  4 of 18: name=3D_s8m docCount=3D1421051
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D162.443
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [30 fields]
    test: terms, freq, prox...OK [210276 terms; 42491363 terms/docs
pairs; 53054214 tokens]
    test: stored fields.......OK [1421051 total field count; avg 1
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  5 of 18: name=3D_uh5 docCount=3D2065961
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D229.394
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [30 fields]
    test: terms, freq, prox...OK [126789 terms; 60416663 terms/docs
pairs; 75120265 tokens]
    test: stored fields.......OK [2065964 total field count; avg 1
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  6 of 18: name=3D_r0y docCount=3D1124653
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D115.792
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [26 fields]
    test: terms, freq, prox...FAILED
    WARNING: fixIndex() would remove reference to this segment; full except=
ion:
java.lang.RuntimeException: term desthost:wir docFreq=3D6 !=3D num docs
seen 0 + num docs deleted 0
        at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:47=
5)
        at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:676)

  7 of 18: name=3D_s4s docCount=3D2477731
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D230.698
    no deletions
    test: open reader.........PuTTYPuTTYOK
    test: fields, norms.......OK [25 fields]
    test: terms, freq, prox...OK [90327 terms; 60212096 terms/docs
pairs; 72740383 tokens]
    test: stored fields.......OK [2477731 total field count; avg 1
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  8 of 18: name=3D_t6w docCount=3D4340938
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D451.389
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [26 fields]
    test: terms, freq, prox...OK [157817 terms; 121753990 terms/docs
pairs; 151141568 tokens]
    test: stored fields.......OK [4340938 total field count; avg 1
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  9 of 18: name=3D_ucx docCount=3D8018451
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D845.968
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [26 fields]
    test: terms, freq, prox...OK [410057 terms; 227617455 terms/docs
pairs; 283398975 tokens]
    test: stored fields.......OK [8018451 total field count; avg 1
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  10 of 18: name=3D_xl9 docCount=3D13891933
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D1,408.881
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [26 fields]
    test: terms, freq, prox...OK [535226 terms; 376394493 terms/docs
pairs; 465003060 tokens]
    test: stored fields.......OK [13891933 total field count; avg 1
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  11 of 18: name=3D_xlb docCount=3D3521
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D0.411
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [25 fields]
    test: terms, freq, prox...OK [2070 terms; 108496 terms/docs pairs;
136365 tokens]
    test: stored fields.......OK [3521 total field count; avg 1 fields per =
doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  12 of 18: name=3D_xlc docCount=3D3529
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D0.412
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [22 fields]
    test: terms, freq, prox...OK [2214 terms; 108633 terms/docs pairs;
136384 tokens]
    test: stored fields.......OK [3529 total field count; avg 1 fields per =
doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  13 of 18: name=3D_xle docCount=3D1401
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D0.188
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [21 fields]
    test: terms, freq, prox...OK [1854 terms; 48703 terms/docs pairs;
62221 tokens]
    test: stored fields.......OK [1401 total field count; avg 1 fields per =
doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  14 of 18: name=3D_xlf docCount=3D1399
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D0.188
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [21 fields]
    test: terms, freq, prox...OK [1763 terms; 48910 terms/docs pairs;
63035 tokens]
    test: stored fields.......OK [1399 total field count; avg 1 fields per =
doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  15 of 18: name=3D_xlh docCount=3D1727
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D0.24
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [21 fields]
    test: terms, freq, prox...OK [2318 terms; 62596 terms/docs pairs;
80688 tokens]
    test: stored fields.......OK [1727 total field count; avg 1 fields per =
doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  16 of 18: name=3D_xli docCount=3D1716
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D0.237
    no deletions
    test: open reader.........OK
     test: fields, norms.......OK [21 fields]
    test: terms, freq, prox...OK [2264 terms; 61867 terms/docs pairs;
79497 tokens]
    test: stored fields.......OK [1716 total field count; avg 1 fields per =
doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  17 of 18: name=3D_xlk docCount=3D2921
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D0.364
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [25 fields]
    test: terms, freq, prox...OK [2077 terms; 96536 terms/docs pairs;
123166 tokens]
    test: stored fields.......OK [2921 total field count; avg 1 fields per =
doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

  18 of 18: name=3D_xll docCount=3D3876
    compound=3Dtrue
    hasProx=3Dtrue
    numFiles=3D1
    size (MB)=3D0.476
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [21 fields]
    test: terms, freq, prox...OK [2261 terms; 130104 terms/docs pairs;
166867 tokens]
    test: stored fields.......OK [3876 total field count; avg 1 fields per =
doc]
    test: term vectors........OK [0 total vector count; avg 0
term/freq vector fields per doc]

WARNING: 1 broken segments (containing 1124653 documents) detected
WARNING: 1124653 documents will be lost

NOTE: will write new segments file in 5 seconds; this will remove
1124653 docs from the index. THIS IS YOUR LAST CHANCE TO CTRL+C!
  5...
  4...
  3...
  2...
  1...
Writing...
OK
Wrote new segments file "segments_1588"


Any ideas how would the index get corrupted?

Thanks,
-vivek


On Sat, Jan 3, 2009 at 8:04 AM, Brian Whitman <brian@echonest.com> wrote:
>>
>>
>> It's very strange that CheckIndex -fix did not resolve the issue. =A0Aft=
er
>> fixing it, if you re-run CheckIndex on the index do you still see that
>> original one broken segment present? =A0CheckIndex should have removed
>> reference to that one segment.
>>
>
> I just ran it again, and it detected the same error and claimed to fix it=
. I
> then shut down the solr server (I wasn't sure if this would be an issue),
> ran it a third time (where it again found and claimed to fix the error),
> then a fourth where it did not find any problems, and now the optimize()
> call on the running server does not throw the merge exception.
>
> =A0Did this corruption happen only once? =A0(You mentioned hitting dups i=
n
> the past...
>> but did you also see corruption too?)
>
>
> Not that we know of, but it's very likely we never noticed. (The only rea=
son
> I discovered this was our commits were taking 20-40x longer on this index
> than others)
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 06:49:30 2009
Return-Path: <java-user-return-38691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20060 invoked from network); 26 Feb 2009 06:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 06:49:29 -0000
Received: (qmail 88840 invoked by uid 500); 26 Feb 2009 06:49:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88409 invoked by uid 500); 26 Feb 2009 06:49:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88398 invoked by uid 99); 26 Feb 2009 06:49:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 22:49:21 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 06:49:10 +0000
Received: by wa-out-1112.google.com with SMTP id m33so218156wag.5
        for <java-user@lucene.apache.org>; Wed, 25 Feb 2009 22:48:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Z9Hcz5GJgtEyDrKQ4TE7WIhs7IoQHrb0iXVmAin5ePk=;
        b=GP0bq5ckYIvLNh/YLy290IOjDovzMPAxJ2xFoHYGolwuiTEbzG/xM0G+cBwgNjbm9/
         z41QDKgBXuv0hyEacI44C8bw8OxhPo5nZb9g2bKDKuo3uA+630vKAfziUYwPgR4D82O/
         mGtoOX26vI7pS9Z0/rvIeiVZFg1fiCj7Zh8Aw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QZvizodxdJZTYXoDid+wkd9AK7X6yvtBHw2aHN3Sa1UYUKmRjKSW7Ve6VwdZV7j5mD
         FVckSIB1hhEZayvjCbYsJ6ULrRotoe/EbPl0KjV7EeO1bUeKlA2KiXxgO19R3M+eozBX
         9750MrCzL8YeunoNGtyNaZxN8cyTaTUc5f83c=
MIME-Version: 1.0
Received: by 10.115.107.5 with SMTP id j5mr508453wam.158.1235630929575; Wed, 
	25 Feb 2009 22:48:49 -0800 (PST)
In-Reply-To: <C5CAD040.1EEEF%ken.williams@thomsonreuters.com>
References: <C5C44BD8.1ECA1%ken.williams@thomsonreuters.com>
	 <C5CAD040.1EEEF%ken.williams@thomsonreuters.com>
Date: Wed, 25 Feb 2009 22:48:49 -0800
Message-ID: <652776090902252248s11cda5f0qc9a3bea40b00f8f9@mail.gmail.com>
Subject: Re: Confidence scores at search time
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64f683aa17da70463ccbeb8
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64f683aa17da70463ccbeb8
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Ken,

I found this post on the Lucene documentation page:
http://wiki.apache.org/lucene-java/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03

In practice you sometimes need to have a cut-off or boost factor post tf-idf
scoring. The way I've been going about it is by picking values and seeing if
the results are better.
I'm sure there is a deep information theory problem there.

M

On Wed, Feb 25, 2009 at 8:38 AM, Ken Williams <
ken.williams@thomsonreuters.com> wrote:

> Hi all,
>
> I didn't get a response to this - not sure whether the question was
> ill-posed, or too-frequently-asked, or just not interesting.  But if anyone
> could take a stab at it or let me know a different place to look, I'd
> really
> appreciate it.
>
> Thanks,
>
>  -Ken
>
>
> On 2/20/09 12:00 PM, "Ken Williams" <ken.williams@thomsonreuters.com>
> wrote:
>
> > Hi,
> >
> > Has there been any work done on getting confidence scores at runtime, so
> > that scores of documents can be compared across queries?  I found one
> > reference in the mailing list to some work in 2003, but couldn't find any
> > follow-up:
> >
> >   http://osdir.com/ml/jakarta.lucene.user/2003-12/msg00093.html
> >
> > Thanks.
>
> --
> Ken Williams
> Research Scientist
> The Thomson Reuters Corporation
> Eagan, MN
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64f683aa17da70463ccbeb8--

From java-user-return-38692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 07:56:24 2009
Return-Path: <java-user-return-38692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59879 invoked from network); 26 Feb 2009 07:56:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 07:56:24 -0000
Received: (qmail 44522 invoked by uid 500); 26 Feb 2009 07:56:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44491 invoked by uid 500); 26 Feb 2009 07:56:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44480 invoked by uid 99); 26 Feb 2009 07:56:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Feb 2009 23:56:15 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 07:56:07 +0000
Received: by wa-out-1112.google.com with SMTP id m33so231516wag.5
        for <java-user@lucene.apache.org>; Wed, 25 Feb 2009 23:55:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CbY+r/2p7gNgyJVzzHouDgpBM8unDimNmMUeldwilu0=;
        b=vCpsUBwtr7tOadLDYvwU9w/n/6UfXScbzcZmjh5kpwjGVE7xn9bWJ7j0iIEKU/1fvG
         6I+zFuGlPn7ppK2LWJFgayuFW/WhHR8feNKc/WVU0CkXQl1PMXbz0BQuwgVSzmGdYQtN
         1BX1KSEDKuXCFtU1IFM7kXhqJ5PIOvyGMGLj8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qtpqrDlF7gklbdamuGqjD0QdFoBvL+C1T06dJh1F97Aec8iiRifJlkV3wO/E4KDiiu
         ittfQBxsmsacnsjAumitQuBSNyNLocoATsLwpUamd8f3zJL11tdXPH30+pJiZ01M6jod
         V/iZ/a687FicCFVRSazC4dDrvbRqbWrp6sKqU=
MIME-Version: 1.0
Received: by 10.114.169.20 with SMTP id r20mr537428wae.110.1235634946676; Wed, 
	25 Feb 2009 23:55:46 -0800 (PST)
In-Reply-To: <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com>
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
	 <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com>
	 <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
	 <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
	 <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com>
	 <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com>
Date: Wed, 25 Feb 2009 23:55:46 -0800
Message-ID: <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com>
Subject: Re: Faceted Search using Lucene
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646d60011966b0463cdaeec
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646d60011966b0463cdaeec
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

If another thread is executing a query with the handle to one of readers[i]
you're going to kill it since the IndexReader is now closed.
Just don't call the IndexReader#close() method. If nothing is pointing at
the readers they should be garbage collected. Also, you might
want to warm up your new IndexSearcher before you switch to it, meaning run
a few queries on it before you swap the old one out.

M



On Tue, Feb 24, 2009 at 12:48 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> The reason for the indexreader.reopen is because I have a webapp which
> enables users to upload files and then search for the documents.  If I
> don't
> reopen i'm concerned that the facet hit counter won't be updated.
>
> On Tue, Feb 24, 2009 at 8:32 PM, Amin Mohammed-Coleman <aminmc@gmail.com
> >wrote:
>
> > Hi
> > I have been able to get the code working for my scenario, however I have
> a
> > question and I was wondering if I could get some help.  I have a list of
> > IndexSearchers which are used in a MultiSearcher class.  I use the
> > indexsearchers to get each indexreader and put them into a
> MultiIndexReader.
> >
> > IndexReader[] readers = new IndexReader[searchables.length];
> >
> > for (int i =0 ; i < searchables.length;i++) {
> >
> > IndexSearcher indexSearcher = (IndexSearcher)searchables[i];
> >
> > readers[i] = indexSearcher.getIndexReader();
> >
> >     IndexReader newReader = readers[i].reopen();
> >
> > if (newReader != readers[i]) {
> >
> > readers[i].close();
> >
> > }
> >
> > readers[i] = newReader;
> >
> >
> >
> > }
> >
> >  multiReader = new MultiReader(readers);
> >
> > OpenBitSetFacetHitCounter facetHitCounter =
> newOpenBitSetFacetHitCounter();
> >
> > IndexSearcher indexSearcher = new IndexSearcher(multiReader);
> >
> >
> > I then use the indexseacher to do the facet stuff.  I end the code with
> > closing the multireader.  This is causing problems in another method
> where I
> > do some other search as the indexreaders are closed.  Is it ok to not
> close
> > the multiindexreader or should I do some additional checks in the other
> > method to see if the indexreader is closed?
> >
> >
> >
> > Cheers
> >
> >
> > P.S. Hope that made sense...!
> >
> >
> > On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <aminmc@gmail.com
> >wrote:
> >
> >> Hi
> >>
> >> Thanks just what I needed!
> >>
> >> Cheers
> >> Amin
> >>
> >>
> >> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com>
> wrote:
> >>
> >>  Hi Amin:
> >>>  Please take a look a this blog post:
> >>>
> >>>
> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
> >>>  Best regards, Marcelo.
> >>>
> >>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <
> aminmc@gmail.com>
> >>> wrote:
> >>>
> >>>> Hi
> >>>>
> >>>> Sorry to re send this email but I was wondering if I could get some
> >>>> advice
> >>>> on this.
> >>>>
> >>>> Cheers
> >>>>
> >>>> Amin
> >>>>
> >>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com>
> >>>> wrote:
> >>>>
> >>>>  Hi
> >>>>>
> >>>>> I am looking at building a faceted search using Lucene.  I know that
> >>>>> Solr
> >>>>> comes with this built in, however I would like to try this by myself
> >>>>> (something to add to my CV!).  I have been looking around and I found
> >>>>> that
> >>>>> you can use the IndexReader and use TermVectors.  This looks ok but
> I'm
> >>>>> not
> >>>>> sure how to filter the results so that a particular user can only see
> a
> >>>>> subset of results.  The next option I was looking at was something
> like
> >>>>>
> >>>>> Term term1 = new Term("brand", "ford");
> >>>>> Term term2 = new Term("brand", "vw");
> >>>>> Term[] termsArray = new Term[] { term1, term2 };un
> >>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
> >>>>>
> >>>>> The only problem here is that I have to provide the brand type each
> >>>>> time a
> >>>>> new brand is created.  Again I'm not sure how I can filter the
> results
> >>>>> here.
> >>>>> It may be that I'm using the wrong api methods to do this.
> >>>>>
> >>>>> I would be grateful if I could get some advice on this.
> >>>>>
> >>>>>
> >>>>> Cheers
> >>>>> Amin
> >>>>>
> >>>>> P.S.  I am basically trying to do something that displays the
> following
> >>>>>
> >>>>> Personal Contact (23) Business Contact (45) and so on..
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>
> >>>
> >>>
> >>> --
> >>> Marcelo F. Ochoa
> >>> http://marceloochoa.blogspot.com/
> >>> http://marcelo.ochoa.googlepages.com/home
> >>> ______________
> >>> Want to integrate Lucene and Oracle?
> >>>
> >>>
> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
> >>> Is Oracle 11g REST ready?
> >>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >
>

--00163646d60011966b0463cdaeec--

From java-user-return-38693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 08:41:37 2009
Return-Path: <java-user-return-38693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86099 invoked from network); 26 Feb 2009 08:41:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 08:41:36 -0000
Received: (qmail 82905 invoked by uid 500); 26 Feb 2009 08:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82882 invoked by uid 500); 26 Feb 2009 08:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82871 invoked by uid 99); 26 Feb 2009 08:41:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 00:41:29 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.220.168 as permitted sender)
Received: from [209.85.220.168] (HELO mail-fx0-f168.google.com) (209.85.220.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 08:41:18 +0000
Received: by fxm12 with SMTP id 12so480122fxm.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 00:40:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8s2VBLzfMR0ZHPjyU6kIf6kGOeMivlvK9Xojp5wn61k=;
        b=qn/ObY2EQqIuyv26p/oDAi4gPuKGyDIzy160AS1v2IzhHvcrAPD74URKRew1h+Alc8
         hPseOpDq4ujQz6kpL/gFgMTcC2beJUph88XGlJvlfp2ir/b+QrgD3Lk2kPJ3Mde0FHRR
         VRxpn5FzRukWl7djQHmlEekrx1lwWm4vvmVHw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=pNsPI1Goj7gxUeTM/dXg2Fa+KziJ42px1o26xljEqMDoYBKsEMOyOZt2pw/gSZmSGH
         MSTiKmqcRuFvNlnYT9BnFFejIWoAnFC6qxs6fthiIJ6fT/472xaj1NXqGzy3ShqD8+de
         D0HNFpXlhf2GVjgB8dg6N9sG7K+dZcY1jlVc0=
MIME-Version: 1.0
Received: by 10.181.55.2 with SMTP id h2mr372527bkk.52.1235637657684; Thu, 26 
	Feb 2009 00:40:57 -0800 (PST)
In-Reply-To: <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com>
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
	 <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com>
	 <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
	 <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
	 <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com>
	 <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com>
	 <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com>
Date: Thu, 26 Feb 2009 08:40:57 +0000
Message-ID: <6f4104d80902260040m31319cd8w5de6ba36b56e1d5d@mail.gmail.com>
Subject: Re: Faceted Search using Lucene
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f7d272a84a130463ce4fdf
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f7d272a84a130463ce4fdf
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

Thanks for your reply.  I have modified the code to the following:

public Map<String, Long> getFacetHitCount(String searchTerm) {

QueryParser queryParser =
newMultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
analyzer);

Query baseQuery = null;

try {

if (!StringUtils.isBlank(searchTerm)) {

baseQuery = queryParser.parse(searchTerm);

LOGGER.debug("Search Term '" + searchTerm +"' ----> Lucene Query '" +
baseQuery.toString() +"'");

} else {

LOGGER.debug("No base query. Using default, which is going to check for all
documents of every type.");

}

} catch (ParseException e1) {

throw new RuntimeException(e1);

}

Map<String, Query> subQueries = constructDocTypeSubQueriesMap();

 Map<String,Long> facetHitCount = new HashMap<String, Long>();

MultiReader multiReader = null;

try {

Searchable[] searchables = this.searchers.toArray(new Searchable[]
{}).clone();

IndexReader[] readers = new IndexReader[searchables.length];

for (int i =0 ; i < searchables.length;i++) {

IndexSearcher indexSearcher = (IndexSearcher)searchables[i];

readers[i] = indexSearcher.getIndexReader();

Directory directory = readers[i].directory();

IndexReader indexReader = IndexReader.open(directory);

readers[i] = indexReader;

}

multiReader = new MultiReader(readers);

OpenBitSetFacetHitCounter facetHitCounter = new OpenBitSetFacetHitCounter();

IndexSearcher indexSearcher = new IndexSearcher(multiReader);

if (baseQuery != null) {

facetHitCounter.setBaseQuery(baseQuery);

}

facetHitCounter.setSearcher(indexSearcher);

facetHitCounter.setSubQueries(subQueries);

facetHitCount= facetHitCounter.getFacetHitCounts();

LOGGER.debug("Document Type Facet Hit Count '" + facetHitCount + "'");

} catch (Exception e) {

throw new IllegalStateException(e);

} finally {

try {

multiReader.close();

LOGGER.debug("Closed multi reader.");

} catch (IOException e) {

throw new IllegalStateException(e);

}

}

return facetHitCount;

}


Does this make sense?  I am new to lucene and working on a complete search
solution so I would be grateful for any advice on what is best practice.


Cheers





On Thu, Feb 26, 2009 at 7:55 AM, Michael Stoppelman <stopman@gmail.com>wrote:

> If another thread is executing a query with the handle to one of readers[i]
> you're going to kill it since the IndexReader is now closed.
> Just don't call the IndexReader#close() method. If nothing is pointing at
> the readers they should be garbage collected. Also, you might
> want to warm up your new IndexSearcher before you switch to it, meaning run
> a few queries on it before you swap the old one out.
>
> M
>
>
>
> On Tue, Feb 24, 2009 at 12:48 PM, Amin Mohammed-Coleman <aminmc@gmail.com
> >wrote:
>
> > The reason for the indexreader.reopen is because I have a webapp which
> > enables users to upload files and then search for the documents.  If I
> > don't
> > reopen i'm concerned that the facet hit counter won't be updated.
> >
> > On Tue, Feb 24, 2009 at 8:32 PM, Amin Mohammed-Coleman <aminmc@gmail.com
> > >wrote:
> >
> > > Hi
> > > I have been able to get the code working for my scenario, however I
> have
> > a
> > > question and I was wondering if I could get some help.  I have a list
> of
> > > IndexSearchers which are used in a MultiSearcher class.  I use the
> > > indexsearchers to get each indexreader and put them into a
> > MultiIndexReader.
> > >
> > > IndexReader[] readers = new IndexReader[searchables.length];
> > >
> > > for (int i =0 ; i < searchables.length;i++) {
> > >
> > > IndexSearcher indexSearcher = (IndexSearcher)searchables[i];
> > >
> > > readers[i] = indexSearcher.getIndexReader();
> > >
> > >     IndexReader newReader = readers[i].reopen();
> > >
> > > if (newReader != readers[i]) {
> > >
> > > readers[i].close();
> > >
> > > }
> > >
> > > readers[i] = newReader;
> > >
> > >
> > >
> > > }
> > >
> > >  multiReader = new MultiReader(readers);
> > >
> > > OpenBitSetFacetHitCounter facetHitCounter =
> > newOpenBitSetFacetHitCounter();
> > >
> > > IndexSearcher indexSearcher = new IndexSearcher(multiReader);
> > >
> > >
> > > I then use the indexseacher to do the facet stuff.  I end the code with
> > > closing the multireader.  This is causing problems in another method
> > where I
> > > do some other search as the indexreaders are closed.  Is it ok to not
> > close
> > > the multiindexreader or should I do some additional checks in the other
> > > method to see if the indexreader is closed?
> > >
> > >
> > >
> > > Cheers
> > >
> > >
> > > P.S. Hope that made sense...!
> > >
> > >
> > > On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <
> aminmc@gmail.com
> > >wrote:
> > >
> > >> Hi
> > >>
> > >> Thanks just what I needed!
> > >>
> > >> Cheers
> > >> Amin
> > >>
> > >>
> > >> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com>
> > wrote:
> > >>
> > >>  Hi Amin:
> > >>>  Please take a look a this blog post:
> > >>>
> > >>>
> >
> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
> > >>>  Best regards, Marcelo.
> > >>>
> > >>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <
> > aminmc@gmail.com>
> > >>> wrote:
> > >>>
> > >>>> Hi
> > >>>>
> > >>>> Sorry to re send this email but I was wondering if I could get some
> > >>>> advice
> > >>>> on this.
> > >>>>
> > >>>> Cheers
> > >>>>
> > >>>> Amin
> > >>>>
> > >>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com>
> > >>>> wrote:
> > >>>>
> > >>>>  Hi
> > >>>>>
> > >>>>> I am looking at building a faceted search using Lucene.  I know
> that
> > >>>>> Solr
> > >>>>> comes with this built in, however I would like to try this by
> myself
> > >>>>> (something to add to my CV!).  I have been looking around and I
> found
> > >>>>> that
> > >>>>> you can use the IndexReader and use TermVectors.  This looks ok but
> > I'm
> > >>>>> not
> > >>>>> sure how to filter the results so that a particular user can only
> see
> > a
> > >>>>> subset of results.  The next option I was looking at was something
> > like
> > >>>>>
> > >>>>> Term term1 = new Term("brand", "ford");
> > >>>>> Term term2 = new Term("brand", "vw");
> > >>>>> Term[] termsArray = new Term[] { term1, term2 };un
> > >>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
> > >>>>>
> > >>>>> The only problem here is that I have to provide the brand type each
> > >>>>> time a
> > >>>>> new brand is created.  Again I'm not sure how I can filter the
> > results
> > >>>>> here.
> > >>>>> It may be that I'm using the wrong api methods to do this.
> > >>>>>
> > >>>>> I would be grateful if I could get some advice on this.
> > >>>>>
> > >>>>>
> > >>>>> Cheers
> > >>>>> Amin
> > >>>>>
> > >>>>> P.S.  I am basically trying to do something that displays the
> > following
> > >>>>>
> > >>>>> Personal Contact (23) Business Contact (45) and so on..
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>
> > >>>
> > >>>
> > >>> --
> > >>> Marcelo F. Ochoa
> > >>> http://marceloochoa.blogspot.com/
> > >>> http://marcelo.ochoa.googlepages.com/home
> > >>> ______________
> > >>> Want to integrate Lucene and Oracle?
> > >>>
> > >>>
> >
> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
> > >>> Is Oracle 11g REST ready?
> > >>>
> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
> > >>>
> > >>> ---------------------------------------------------------------------
> > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>
> > >>>
> > >
> >
>

--001485f7d272a84a130463ce4fdf--

From java-user-return-38694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 10:25:24 2009
Return-Path: <java-user-return-38694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49955 invoked from network); 26 Feb 2009 10:25:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 10:25:24 -0000
Received: (qmail 81543 invoked by uid 500); 26 Feb 2009 10:25:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81517 invoked by uid 500); 26 Feb 2009 10:25:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81496 invoked by uid 99); 26 Feb 2009 10:25:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 02:25:13 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_NEUTRAL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 10:25:02 +0000
Received: by gxk18 with SMTP id 18so1206659gxk.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 02:24:40 -0800 (PST)
Received: by 10.151.147.17 with SMTP id z17mr1586390ybn.52.1235643880193;
        Thu, 26 Feb 2009 02:24:40 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id n26sm2199816ele.2.2009.02.26.02.24.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 26 Feb 2009 02:24:39 -0800 (PST)
Message-Id: <759B2A6C-48A3-4EF9-876C-8DDDCFC60AB3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Faceted Search using Lucene
Date: Thu, 26 Feb 2009 05:24:38 -0500
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com> <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com> <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com> <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com> <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com> <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com> <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually, it's best to use IndexReader.incRef/decRef to track the  
IndexReader.

You should not rely on GC to close your IndexReader since this can  
easily tie up resources (eg open file descriptors) for too long.

Mike

Michael Stoppelman wrote:

> If another thread is executing a query with the handle to one of  
> readers[i]
> you're going to kill it since the IndexReader is now closed.
> Just don't call the IndexReader#close() method. If nothing is  
> pointing at
> the readers they should be garbage collected. Also, you might
> want to warm up your new IndexSearcher before you switch to it,  
> meaning run
> a few queries on it before you swap the old one out.
>
> M
>
>
>
> On Tue, Feb 24, 2009 at 12:48 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> The reason for the indexreader.reopen is because I have a webapp  
>> which
>> enables users to upload files and then search for the documents.   
>> If I
>> don't
>> reopen i'm concerned that the facet hit counter won't be updated.
>>
>> On Tue, Feb 24, 2009 at 8:32 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>> wrote:
>>
>>> Hi
>>> I have been able to get the code working for my scenario, however  
>>> I have
>> a
>>> question and I was wondering if I could get some help.  I have a  
>>> list of
>>> IndexSearchers which are used in a MultiSearcher class.  I use the
>>> indexsearchers to get each indexreader and put them into a
>> MultiIndexReader.
>>>
>>> IndexReader[] readers = new IndexReader[searchables.length];
>>>
>>> for (int i =0 ; i < searchables.length;i++) {
>>>
>>> IndexSearcher indexSearcher = (IndexSearcher)searchables[i];
>>>
>>> readers[i] = indexSearcher.getIndexReader();
>>>
>>>    IndexReader newReader = readers[i].reopen();
>>>
>>> if (newReader != readers[i]) {
>>>
>>> readers[i].close();
>>>
>>> }
>>>
>>> readers[i] = newReader;
>>>
>>>
>>>
>>> }
>>>
>>> multiReader = new MultiReader(readers);
>>>
>>> OpenBitSetFacetHitCounter facetHitCounter =
>> newOpenBitSetFacetHitCounter();
>>>
>>> IndexSearcher indexSearcher = new IndexSearcher(multiReader);
>>>
>>>
>>> I then use the indexseacher to do the facet stuff.  I end the code  
>>> with
>>> closing the multireader.  This is causing problems in another method
>> where I
>>> do some other search as the indexreaders are closed.  Is it ok to  
>>> not
>> close
>>> the multiindexreader or should I do some additional checks in the  
>>> other
>>> method to see if the indexreader is closed?
>>>
>>>
>>>
>>> Cheers
>>>
>>>
>>> P.S. Hope that made sense...!
>>>
>>>
>>> On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>> wrote:
>>>
>>>> Hi
>>>>
>>>> Thanks just what I needed!
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>>
>>>> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com>
>> wrote:
>>>>
>>>> Hi Amin:
>>>>> Please take a look a this blog post:
>>>>>
>>>>>
>> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
>>>>> Best regards, Marcelo.
>>>>>
>>>>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <
>> aminmc@gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Hi
>>>>>>
>>>>>> Sorry to re send this email but I was wondering if I could get  
>>>>>> some
>>>>>> advice
>>>>>> on this.
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>> Amin
>>>>>>
>>>>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman  
>>>>>> <aminmc@gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>> Hi
>>>>>>>
>>>>>>> I am looking at building a faceted search using Lucene.  I  
>>>>>>> know that
>>>>>>> Solr
>>>>>>> comes with this built in, however I would like to try this by  
>>>>>>> myself
>>>>>>> (something to add to my CV!).  I have been looking around and  
>>>>>>> I found
>>>>>>> that
>>>>>>> you can use the IndexReader and use TermVectors.  This looks  
>>>>>>> ok but
>> I'm
>>>>>>> not
>>>>>>> sure how to filter the results so that a particular user can  
>>>>>>> only see
>> a
>>>>>>> subset of results.  The next option I was looking at was  
>>>>>>> something
>> like
>>>>>>>
>>>>>>> Term term1 = new Term("brand", "ford");
>>>>>>> Term term2 = new Term("brand", "vw");
>>>>>>> Term[] termsArray = new Term[] { term1, term2 };un
>>>>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>>>>>>
>>>>>>> The only problem here is that I have to provide the brand type  
>>>>>>> each
>>>>>>> time a
>>>>>>> new brand is created.  Again I'm not sure how I can filter the
>> results
>>>>>>> here.
>>>>>>> It may be that I'm using the wrong api methods to do this.
>>>>>>>
>>>>>>> I would be grateful if I could get some advice on this.
>>>>>>>
>>>>>>>
>>>>>>> Cheers
>>>>>>> Amin
>>>>>>>
>>>>>>> P.S.  I am basically trying to do something that displays the
>> following
>>>>>>>
>>>>>>> Personal Contact (23) Business Contact (45) and so on..
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Marcelo F. Ochoa
>>>>> http://marceloochoa.blogspot.com/
>>>>> http://marcelo.ochoa.googlepages.com/home
>>>>> ______________
>>>>> Want to integrate Lucene and Oracle?
>>>>>
>>>>>
>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>>>>> Is Oracle 11g REST ready?
>>>>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 11:14:17 2009
Return-Path: <java-user-return-38695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65430 invoked from network); 26 Feb 2009 11:14:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 11:14:17 -0000
Received: (qmail 48171 invoked by uid 500); 26 Feb 2009 11:14:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48148 invoked by uid 500); 26 Feb 2009 11:14:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48136 invoked by uid 99); 26 Feb 2009 11:14:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 03:14:08 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.220.168 as permitted sender)
Received: from [209.85.220.168] (HELO mail-fx0-f168.google.com) (209.85.220.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 11:13:59 +0000
Received: by fxm12 with SMTP id 12so561806fxm.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 03:13:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Wt3soM5QO4lSGUCi+VeD7XgtracNstPK0wxvHtrqwW0=;
        b=WABRvrSw9V1U+ye5ESKX6G2UZMCMEMFfyY8FhveIZsQ8FpAFjlk+CoXerKLI+ah6k3
         uEuIhOmmcXjZS1+25dPThL4r6jz5yiur9OtCCQlhOJttVB+Y5NycKsQV7aToVEJXqmRn
         zR53yTS9JfM+2CjpVLTMkMB3GPxsrnIqXSQMU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vtBujhmV2OzRXEis0QQS1p02kMNgUKjdi9KRMRXGQKhKSWwRTw64fMOYkn4Z1ClYQK
         fasTOucrgy6idq+LkEBY8tp4KNC5BrzX/zLghj7wJymnRKs/t6BeqfM1y1lcNPRr/PHV
         unNISApdutNL0qdwu4g3jr+7eaRADbagDN/vA=
MIME-Version: 1.0
Received: by 10.181.154.16 with SMTP id g16mr409550bko.179.1235646817693; Thu, 
	26 Feb 2009 03:13:37 -0800 (PST)
In-Reply-To: <759B2A6C-48A3-4EF9-876C-8DDDCFC60AB3@mikemccandless.com>
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
	 <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com>
	 <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
	 <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
	 <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com>
	 <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com>
	 <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com>
	 <759B2A6C-48A3-4EF9-876C-8DDDCFC60AB3@mikemccandless.com>
Date: Thu, 26 Feb 2009 11:13:37 +0000
Message-ID: <6f4104d80902260313w1836ca10kb50bd1131029c694@mail.gmail.com>
Subject: Re: Faceted Search using Lucene
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d64531a2eff70463d0712d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d64531a2eff70463d0712d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

Thanks for your reply.  Without sound completely ...silly...how do i go
abouts using the methods you mentioned...

Cheers
Amin

On Thu, Feb 26, 2009 at 10:24 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Actually, it's best to use IndexReader.incRef/decRef to track the
> IndexReader.
>
> You should not rely on GC to close your IndexReader since this can easily
> tie up resources (eg open file descriptors) for too long.
>
> Mike
>
>
> Michael Stoppelman wrote:
>
>  If another thread is executing a query with the handle to one of
>> readers[i]
>> you're going to kill it since the IndexReader is now closed.
>> Just don't call the IndexReader#close() method. If nothing is pointing at
>> the readers they should be garbage collected. Also, you might
>> want to warm up your new IndexSearcher before you switch to it, meaning
>> run
>> a few queries on it before you swap the old one out.
>>
>> M
>>
>>
>>
>> On Tue, Feb 24, 2009 at 12:48 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>> >wrote:
>>
>>  The reason for the indexreader.reopen is because I have a webapp which
>>> enables users to upload files and then search for the documents.  If I
>>> don't
>>> reopen i'm concerned that the facet hit counter won't be updated.
>>>
>>> On Tue, Feb 24, 2009 at 8:32 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>
>>>> wrote:
>>>>
>>>
>>>  Hi
>>>> I have been able to get the code working for my scenario, however I have
>>>>
>>> a
>>>
>>>> question and I was wondering if I could get some help.  I have a list of
>>>> IndexSearchers which are used in a MultiSearcher class.  I use the
>>>> indexsearchers to get each indexreader and put them into a
>>>>
>>> MultiIndexReader.
>>>
>>>>
>>>> IndexReader[] readers = new IndexReader[searchables.length];
>>>>
>>>> for (int i =0 ; i < searchables.length;i++) {
>>>>
>>>> IndexSearcher indexSearcher = (IndexSearcher)searchables[i];
>>>>
>>>> readers[i] = indexSearcher.getIndexReader();
>>>>
>>>>   IndexReader newReader = readers[i].reopen();
>>>>
>>>> if (newReader != readers[i]) {
>>>>
>>>> readers[i].close();
>>>>
>>>> }
>>>>
>>>> readers[i] = newReader;
>>>>
>>>>
>>>>
>>>> }
>>>>
>>>> multiReader = new MultiReader(readers);
>>>>
>>>> OpenBitSetFacetHitCounter facetHitCounter =
>>>>
>>> newOpenBitSetFacetHitCounter();
>>>
>>>>
>>>> IndexSearcher indexSearcher = new IndexSearcher(multiReader);
>>>>
>>>>
>>>> I then use the indexseacher to do the facet stuff.  I end the code with
>>>> closing the multireader.  This is causing problems in another method
>>>>
>>> where I
>>>
>>>> do some other search as the indexreaders are closed.  Is it ok to not
>>>>
>>> close
>>>
>>>> the multiindexreader or should I do some additional checks in the other
>>>> method to see if the indexreader is closed?
>>>>
>>>>
>>>>
>>>> Cheers
>>>>
>>>>
>>>> P.S. Hope that made sense...!
>>>>
>>>>
>>>> On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <
>>>> aminmc@gmail.com
>>>> wrote:
>>>>
>>>>  Hi
>>>>>
>>>>> Thanks just what I needed!
>>>>>
>>>>> Cheers
>>>>> Amin
>>>>>
>>>>>
>>>>> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com>
>>>>>
>>>> wrote:
>>>
>>>>
>>>>> Hi Amin:
>>>>>
>>>>>> Please take a look a this blog post:
>>>>>>
>>>>>>
>>>>>>
>>> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
>>>
>>>> Best regards, Marcelo.
>>>>>>
>>>>>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <
>>>>>>
>>>>> aminmc@gmail.com>
>>>
>>>> wrote:
>>>>>>
>>>>>>  Hi
>>>>>>>
>>>>>>> Sorry to re send this email but I was wondering if I could get some
>>>>>>> advice
>>>>>>> on this.
>>>>>>>
>>>>>>> Cheers
>>>>>>>
>>>>>>> Amin
>>>>>>>
>>>>>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com>
>>>>>>> wrote:
>>>>>>>
>>>>>>> Hi
>>>>>>>
>>>>>>>>
>>>>>>>> I am looking at building a faceted search using Lucene.  I know that
>>>>>>>> Solr
>>>>>>>> comes with this built in, however I would like to try this by myself
>>>>>>>> (something to add to my CV!).  I have been looking around and I
>>>>>>>> found
>>>>>>>> that
>>>>>>>> you can use the IndexReader and use TermVectors.  This looks ok but
>>>>>>>>
>>>>>>> I'm
>>>
>>>> not
>>>>>>>> sure how to filter the results so that a particular user can only
>>>>>>>> see
>>>>>>>>
>>>>>>> a
>>>
>>>> subset of results.  The next option I was looking at was something
>>>>>>>>
>>>>>>> like
>>>
>>>>
>>>>>>>> Term term1 = new Term("brand", "ford");
>>>>>>>> Term term2 = new Term("brand", "vw");
>>>>>>>> Term[] termsArray = new Term[] { term1, term2 };un
>>>>>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>>>>>>>
>>>>>>>> The only problem here is that I have to provide the brand type each
>>>>>>>> time a
>>>>>>>> new brand is created.  Again I'm not sure how I can filter the
>>>>>>>>
>>>>>>> results
>>>
>>>> here.
>>>>>>>> It may be that I'm using the wrong api methods to do this.
>>>>>>>>
>>>>>>>> I would be grateful if I could get some advice on this.
>>>>>>>>
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>> Amin
>>>>>>>>
>>>>>>>> P.S.  I am basically trying to do something that displays the
>>>>>>>>
>>>>>>> following
>>>
>>>>
>>>>>>>> Personal Contact (23) Business Contact (45) and so on..
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>
>>>>>> --
>>>>>> Marcelo F. Ochoa
>>>>>> http://marceloochoa.blogspot.com/
>>>>>> http://marcelo.ochoa.googlepages.com/home
>>>>>> ______________
>>>>>> Want to integrate Lucene and Oracle?
>>>>>>
>>>>>>
>>>>>>
>>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>>>
>>>> Is Oracle 11g REST ready?
>>>>>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d64531a2eff70463d0712d--

From java-user-return-38696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 11:52:48 2009
Return-Path: <java-user-return-38696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77027 invoked from network); 26 Feb 2009 11:52:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 11:52:45 -0000
Received: (qmail 5787 invoked by uid 500); 26 Feb 2009 11:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5571 invoked by uid 500); 26 Feb 2009 11:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5560 invoked by uid 99); 26 Feb 2009 11:52:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 03:52:37 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 11:52:26 +0000
Received: by el-out-1112.google.com with SMTP id s27so460019ele.14
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 03:52:04 -0800 (PST)
Received: by 10.90.72.3 with SMTP id u3mr622114aga.87.1235649124548;
        Thu, 26 Feb 2009 03:52:04 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 38sm4246235agd.21.2009.02.26.03.52.03
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 26 Feb 2009 03:52:03 -0800 (PST)
Message-Id: <51A760D4-5EF9-482F-BD0A-023FE204D158@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a206fb7e0902251729p4d4683dn3f65e7abcca2e047@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: background merge hit exception
Date: Thu, 26 Feb 2009 06:52:02 -0500
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com> <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com> <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com> <c68e39170901021409s5149fe60j372c99a1367f18aa@mail.gmail.com> <9ac0c6aa0901021426o34d7dbd5h546c759c5afb8949@mail.gmail.com> <dbd9700a0901021539s43a62f0fj8daf0bfffb7b0086@mail.gmail.com> <9ac0c6aa0901030555p1ee7b9dbt7a308f6bc6103394@mail.gmail.com> <dbd9700a0901030804q5bbc4bcdob5b57f0b83ed8875@mail.gmail.com> <a206fb7e0902251729p4d4683dn3f65e7abcca2e047@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


The exception you hit during optimize indicates some corruption in the
stored fields file (_X.fdt).  Then, the exception hit during
CheckIndex was different -- the postings entry (_r0y.frq) for term
"desthost:wir" was supposed to have 6 entries but had 0.

Did "CheckIndex -fix" allow you to optimize successfully?  In which
case, both of these different corruptions were in the same segment
(_r0y) that CheckIndex removed.

Was this index fully created with 2.4.0 or a prior release?

Which exact JRE was used to create/write to this index?  And which one
was used for searching it?

How often do you hit this?  Is it repeatable?

It's remotely possible you have bad hardware (RAM, hard drive)

Most likely it's gone... but if somehow I could get access to that bad
segment, I could try to dig.

vivek sar wrote:

> Hi,
>
>  We ran into the same issue (corrupted index) using Lucene 2.4.0.
> There was no outage or system reboot - not sure how could it get
> corrupted. Here is the exception,
>
> Caused by: java.io.IOException: background merge hit exception:
> _io5:c66777491 _nh9:c10656736 _taq:c2021563 _s8m:c1421051
> _uh5:c2065961 _r0y:c1124653 _s4s:c2477731 _t6w:c4340938 _ucx:c8018451
> _xkb:c13842776 _xkd:c3394 _xke:c3379 _xkg:c1231 _xkh:c1252 _xkj:c1680
> _xkk:c1689 into _xkl [optimize]
>        at  
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2258)
>        at  
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2194)
>        at  
> com 
> .packetmotion 
> .manager 
> .query.fulltext.index.Indexer.optimizeMasterIndex(Indexer.java:887)
>        at  
> com 
> .packetmotion 
> .manager 
> .query.fulltext.index.Indexer.createNewIndexPartition(Indexer.java: 
> 783)
>        at  
> com 
> .packetmotion 
> .manager.query.fulltext.index.Indexer.indexByDevice(Indexer.java:582)
>        at  
> com 
> .packetmotion 
> .manager.query.fulltext.index.Indexer.indexData(Indexer.java:440)
>        at com.packetmotion.manager.query.fulltext.index.Indexer$ 
> $FastClassByCGLIB$$97fb7e9b.invoke(<generated>)
>        at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
>        at org.springframework.aop.framework.Cglib2AopProxy 
> $DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:628)
>        at com.packetmotion.manager.query.fulltext.index.Indexer$ 
> $EnhancerByCGLIB$$ebbe3914.indexData(<generated>)
>        at com.packetmotion.manager.query.fulltext.index.IndexerJob 
> $1.run(IndexerJob.java:38)
>        ... 8 more
> Caused by: java.lang.IndexOutOfBoundsException: Index: 51, Size: 26
>        at java.util.ArrayList.RangeCheck(ArrayList.java:547)
>        at java.util.ArrayList.get(ArrayList.java:322)
>        at  
> org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:265)
>        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java: 
> 185)
>        at  
> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:729)
>        at  
> org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java: 
> 359)
>        at  
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:139)
>        at  
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4226)
>        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java: 
> 3877)
>        at  
> org 
> .apache 
> .lucene 
> .index 
> .ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:205)
>        at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:260)
>
>
> I ran the checkIndex tool to fix the corrupted index. Here is its  
> output,
>
>
> Opening index @ /opt/ps_manager/apps/conf/index/MasterIndex
>
> Segments file=segments_1587 numSegments=18 version=FORMAT_HAS_PROX  
> [Lucene 2.4]
>  1 of 18: name=_io5 docCount=66777491
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=6,680.574
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [368415 terms; 1761057989 terms/docs
> pairs; 2095636359 tokens]
>    test: stored fields.......OK [66777491 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  2 of 18: name=_nh9 docCount=10656736
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=1,058.869
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [118964 terms; 278176718 terms/docs
> pairs; 329825350 tokens]
>    test: stored fields.......OK [10656736 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  3 of 18: name=_taq docCount=2021563
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=208.544
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [145494 terms; 54131697 terms/docs
> pairs; 65411701 tokens]
>    test: stored fields.......OK [2021563 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  4 of 18: name=_s8m docCount=1421051
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=162.443
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [210276 terms; 42491363 terms/docs
> pairs; 53054214 tokens]
>    test: stored fields.......OK [1421051 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  5 of 18: name=_uh5 docCount=2065961
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=229.394
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [126789 terms; 60416663 terms/docs
> pairs; 75120265 tokens]
>    test: stored fields.......OK [2065964 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  6 of 18: name=_r0y docCount=1124653
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=115.792
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [26 fields]
>    test: terms, freq, prox...FAILED
>    WARNING: fixIndex() would remove reference to this segment; full  
> exception:
> java.lang.RuntimeException: term desthost:wir docFreq=6 != num docs
> seen 0 + num docs deleted 0
>        at  
> org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:475)
>        at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:676)
>
>  7 of 18: name=_s4s docCount=2477731
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=230.698
>    no deletions
>    test: open reader.........PuTTYPuTTYOK
>    test: fields, norms.......OK [25 fields]
>    test: terms, freq, prox...OK [90327 terms; 60212096 terms/docs
> pairs; 72740383 tokens]
>    test: stored fields.......OK [2477731 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  8 of 18: name=_t6w docCount=4340938
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=451.389
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [26 fields]
>    test: terms, freq, prox...OK [157817 terms; 121753990 terms/docs
> pairs; 151141568 tokens]
>    test: stored fields.......OK [4340938 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  9 of 18: name=_ucx docCount=8018451
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=845.968
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [26 fields]
>    test: terms, freq, prox...OK [410057 terms; 227617455 terms/docs
> pairs; 283398975 tokens]
>    test: stored fields.......OK [8018451 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  10 of 18: name=_xl9 docCount=13891933
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=1,408.881
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [26 fields]
>    test: terms, freq, prox...OK [535226 terms; 376394493 terms/docs
> pairs; 465003060 tokens]
>    test: stored fields.......OK [13891933 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  11 of 18: name=_xlb docCount=3521
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.411
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [25 fields]
>    test: terms, freq, prox...OK [2070 terms; 108496 terms/docs pairs;
> 136365 tokens]
>    test: stored fields.......OK [3521 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  12 of 18: name=_xlc docCount=3529
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.412
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [22 fields]
>    test: terms, freq, prox...OK [2214 terms; 108633 terms/docs pairs;
> 136384 tokens]
>    test: stored fields.......OK [3529 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  13 of 18: name=_xle docCount=1401
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.188
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [1854 terms; 48703 terms/docs pairs;
> 62221 tokens]
>    test: stored fields.......OK [1401 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  14 of 18: name=_xlf docCount=1399
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.188
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [1763 terms; 48910 terms/docs pairs;
> 63035 tokens]
>    test: stored fields.......OK [1399 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  15 of 18: name=_xlh docCount=1727
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.24
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [2318 terms; 62596 terms/docs pairs;
> 80688 tokens]
>    test: stored fields.......OK [1727 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  16 of 18: name=_xli docCount=1716
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.237
>    no deletions
>    test: open reader.........OK
>     test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [2264 terms; 61867 terms/docs pairs;
> 79497 tokens]
>    test: stored fields.......OK [1716 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  17 of 18: name=_xlk docCount=2921
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.364
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [25 fields]
>    test: terms, freq, prox...OK [2077 terms; 96536 terms/docs pairs;
> 123166 tokens]
>    test: stored fields.......OK [2921 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  18 of 18: name=_xll docCount=3876
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.476
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [2261 terms; 130104 terms/docs pairs;
> 166867 tokens]
>    test: stored fields.......OK [3876 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
> WARNING: 1 broken segments (containing 1124653 documents) detected
> WARNING: 1124653 documents will be lost
>
> NOTE: will write new segments file in 5 seconds; this will remove
> 1124653 docs from the index. THIS IS YOUR LAST CHANCE TO CTRL+C!
>  5...
>  4...
>  3...
>  2...
>  1...
> Writing...
> OK
> Wrote new segments file "segments_1588"
>
>
> Any ideas how would the index get corrupted?
>
> Thanks,
> -vivek
>
>
> On Sat, Jan 3, 2009 at 8:04 AM, Brian Whitman <brian@echonest.com>  
> wrote:
>>>
>>>
>>> It's very strange that CheckIndex -fix did not resolve the issue.   
>>> After
>>> fixing it, if you re-run CheckIndex on the index do you still see  
>>> that
>>> original one broken segment present?  CheckIndex should have removed
>>> reference to that one segment.
>>>
>>
>> I just ran it again, and it detected the same error and claimed to  
>> fix it. I
>> then shut down the solr server (I wasn't sure if this would be an  
>> issue),
>> ran it a third time (where it again found and claimed to fix the  
>> error),
>> then a fourth where it did not find any problems, and now the  
>> optimize()
>> call on the running server does not throw the merge exception.
>>
>>  Did this corruption happen only once?  (You mentioned hitting dups  
>> in
>> the past...
>>> but did you also see corruption too?)
>>
>>
>> Not that we know of, but it's very likely we never noticed. (The  
>> only reason
>> I discovered this was our commits were taking 20-40x longer on this  
>> index
>> than others)
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 11:58:47 2009
Return-Path: <java-user-return-38697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79543 invoked from network); 26 Feb 2009 11:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 11:58:46 -0000
Received: (qmail 21515 invoked by uid 500); 26 Feb 2009 11:58:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21479 invoked by uid 500); 26 Feb 2009 11:58:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21468 invoked by uid 99); 26 Feb 2009 11:58:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 03:58:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 11:58:30 +0000
Received: by el-out-1112.google.com with SMTP id s27so461809ele.14
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 03:58:08 -0800 (PST)
Received: by 10.150.178.9 with SMTP id a9mr1727637ybf.244.1235649488760;
        Thu, 26 Feb 2009 03:58:08 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id p27sm3630582ele.18.2009.02.26.03.58.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 26 Feb 2009 03:58:07 -0800 (PST)
Message-Id: <09EB1BD8-5723-4A6B-B374-61845A45ED79@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a206fb7e0902251729p4d4683dn3f65e7abcca2e047@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: background merge hit exception
Date: Thu, 26 Feb 2009 06:58:05 -0500
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com> <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com> <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com> <c68e39170901021409s5149fe60j372c99a1367f18aa@mail.gmail.com> <9ac0c6aa0901021426o34d7dbd5h546c759c5afb8949@mail.gmail.com> <dbd9700a0901021539s43a62f0fj8daf0bfffb7b0086@mail.gmail.com> <9ac0c6aa0901030555p1ee7b9dbt7a308f6bc6103394@mail.gmail.com> <dbd9700a0901030804q5bbc4bcdob5b57f0b83ed8875@mail.gmail.com> <a206fb7e0902251729p4d4683dn3f65e7abcca2e047@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Also: what sorts of stored fields are you storing?  Binary?   
Compressed?  Text with unicode characters?  Roughly how many stored  
fields per document?

Mike

vivek sar wrote:

> Hi,
>
>  We ran into the same issue (corrupted index) using Lucene 2.4.0.
> There was no outage or system reboot - not sure how could it get
> corrupted. Here is the exception,
>
> Caused by: java.io.IOException: background merge hit exception:
> _io5:c66777491 _nh9:c10656736 _taq:c2021563 _s8m:c1421051
> _uh5:c2065961 _r0y:c1124653 _s4s:c2477731 _t6w:c4340938 _ucx:c8018451
> _xkb:c13842776 _xkd:c3394 _xke:c3379 _xkg:c1231 _xkh:c1252 _xkj:c1680
> _xkk:c1689 into _xkl [optimize]
>        at  
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2258)
>        at  
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2194)
>        at  
> com 
> .packetmotion 
> .manager 
> .query.fulltext.index.Indexer.optimizeMasterIndex(Indexer.java:887)
>        at  
> com 
> .packetmotion 
> .manager 
> .query.fulltext.index.Indexer.createNewIndexPartition(Indexer.java: 
> 783)
>        at  
> com 
> .packetmotion 
> .manager.query.fulltext.index.Indexer.indexByDevice(Indexer.java:582)
>        at  
> com 
> .packetmotion 
> .manager.query.fulltext.index.Indexer.indexData(Indexer.java:440)
>        at com.packetmotion.manager.query.fulltext.index.Indexer$ 
> $FastClassByCGLIB$$97fb7e9b.invoke(<generated>)
>        at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
>        at org.springframework.aop.framework.Cglib2AopProxy 
> $DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:628)
>        at com.packetmotion.manager.query.fulltext.index.Indexer$ 
> $EnhancerByCGLIB$$ebbe3914.indexData(<generated>)
>        at com.packetmotion.manager.query.fulltext.index.IndexerJob 
> $1.run(IndexerJob.java:38)
>        ... 8 more
> Caused by: java.lang.IndexOutOfBoundsException: Index: 51, Size: 26
>        at java.util.ArrayList.RangeCheck(ArrayList.java:547)
>        at java.util.ArrayList.get(ArrayList.java:322)
>        at  
> org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:265)
>        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java: 
> 185)
>        at  
> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:729)
>        at  
> org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java: 
> 359)
>        at  
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:139)
>        at  
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4226)
>        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java: 
> 3877)
>        at  
> org 
> .apache 
> .lucene 
> .index 
> .ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:205)
>        at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:260)
>
>
> I ran the checkIndex tool to fix the corrupted index. Here is its  
> output,
>
>
> Opening index @ /opt/ps_manager/apps/conf/index/MasterIndex
>
> Segments file=segments_1587 numSegments=18 version=FORMAT_HAS_PROX  
> [Lucene 2.4]
>  1 of 18: name=_io5 docCount=66777491
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=6,680.574
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [368415 terms; 1761057989 terms/docs
> pairs; 2095636359 tokens]
>    test: stored fields.......OK [66777491 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  2 of 18: name=_nh9 docCount=10656736
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=1,058.869
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [118964 terms; 278176718 terms/docs
> pairs; 329825350 tokens]
>    test: stored fields.......OK [10656736 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  3 of 18: name=_taq docCount=2021563
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=208.544
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [145494 terms; 54131697 terms/docs
> pairs; 65411701 tokens]
>    test: stored fields.......OK [2021563 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  4 of 18: name=_s8m docCount=1421051
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=162.443
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [210276 terms; 42491363 terms/docs
> pairs; 53054214 tokens]
>    test: stored fields.......OK [1421051 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  5 of 18: name=_uh5 docCount=2065961
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=229.394
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [30 fields]
>    test: terms, freq, prox...OK [126789 terms; 60416663 terms/docs
> pairs; 75120265 tokens]
>    test: stored fields.......OK [2065964 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  6 of 18: name=_r0y docCount=1124653
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=115.792
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [26 fields]
>    test: terms, freq, prox...FAILED
>    WARNING: fixIndex() would remove reference to this segment; full  
> exception:
> java.lang.RuntimeException: term desthost:wir docFreq=6 != num docs
> seen 0 + num docs deleted 0
>        at  
> org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:475)
>        at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:676)
>
>  7 of 18: name=_s4s docCount=2477731
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=230.698
>    no deletions
>    test: open reader.........PuTTYPuTTYOK
>    test: fields, norms.......OK [25 fields]
>    test: terms, freq, prox...OK [90327 terms; 60212096 terms/docs
> pairs; 72740383 tokens]
>    test: stored fields.......OK [2477731 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  8 of 18: name=_t6w docCount=4340938
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=451.389
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [26 fields]
>    test: terms, freq, prox...OK [157817 terms; 121753990 terms/docs
> pairs; 151141568 tokens]
>    test: stored fields.......OK [4340938 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  9 of 18: name=_ucx docCount=8018451
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=845.968
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [26 fields]
>    test: terms, freq, prox...OK [410057 terms; 227617455 terms/docs
> pairs; 283398975 tokens]
>    test: stored fields.......OK [8018451 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  10 of 18: name=_xl9 docCount=13891933
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=1,408.881
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [26 fields]
>    test: terms, freq, prox...OK [535226 terms; 376394493 terms/docs
> pairs; 465003060 tokens]
>    test: stored fields.......OK [13891933 total field count; avg 1
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  11 of 18: name=_xlb docCount=3521
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.411
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [25 fields]
>    test: terms, freq, prox...OK [2070 terms; 108496 terms/docs pairs;
> 136365 tokens]
>    test: stored fields.......OK [3521 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  12 of 18: name=_xlc docCount=3529
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.412
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [22 fields]
>    test: terms, freq, prox...OK [2214 terms; 108633 terms/docs pairs;
> 136384 tokens]
>    test: stored fields.......OK [3529 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  13 of 18: name=_xle docCount=1401
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.188
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [1854 terms; 48703 terms/docs pairs;
> 62221 tokens]
>    test: stored fields.......OK [1401 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  14 of 18: name=_xlf docCount=1399
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.188
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [1763 terms; 48910 terms/docs pairs;
> 63035 tokens]
>    test: stored fields.......OK [1399 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  15 of 18: name=_xlh docCount=1727
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.24
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [2318 terms; 62596 terms/docs pairs;
> 80688 tokens]
>    test: stored fields.......OK [1727 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  16 of 18: name=_xli docCount=1716
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.237
>    no deletions
>    test: open reader.........OK
>     test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [2264 terms; 61867 terms/docs pairs;
> 79497 tokens]
>    test: stored fields.......OK [1716 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  17 of 18: name=_xlk docCount=2921
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.364
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [25 fields]
>    test: terms, freq, prox...OK [2077 terms; 96536 terms/docs pairs;
> 123166 tokens]
>    test: stored fields.......OK [2921 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
>  18 of 18: name=_xll docCount=3876
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=0.476
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [21 fields]
>    test: terms, freq, prox...OK [2261 terms; 130104 terms/docs pairs;
> 166867 tokens]
>    test: stored fields.......OK [3876 total field count; avg 1  
> fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0
> term/freq vector fields per doc]
>
> WARNING: 1 broken segments (containing 1124653 documents) detected
> WARNING: 1124653 documents will be lost
>
> NOTE: will write new segments file in 5 seconds; this will remove
> 1124653 docs from the index. THIS IS YOUR LAST CHANCE TO CTRL+C!
>  5...
>  4...
>  3...
>  2...
>  1...
> Writing...
> OK
> Wrote new segments file "segments_1588"
>
>
> Any ideas how would the index get corrupted?
>
> Thanks,
> -vivek
>
>
> On Sat, Jan 3, 2009 at 8:04 AM, Brian Whitman <brian@echonest.com>  
> wrote:
>>>
>>>
>>> It's very strange that CheckIndex -fix did not resolve the issue.   
>>> After
>>> fixing it, if you re-run CheckIndex on the index do you still see  
>>> that
>>> original one broken segment present?  CheckIndex should have removed
>>> reference to that one segment.
>>>
>>
>> I just ran it again, and it detected the same error and claimed to  
>> fix it. I
>> then shut down the solr server (I wasn't sure if this would be an  
>> issue),
>> ran it a third time (where it again found and claimed to fix the  
>> error),
>> then a fourth where it did not find any problems, and now the  
>> optimize()
>> call on the running server does not throw the merge exception.
>>
>>  Did this corruption happen only once?  (You mentioned hitting dups  
>> in
>> the past...
>>> but did you also see corruption too?)
>>
>>
>> Not that we know of, but it's very likely we never noticed. (The  
>> only reason
>> I discovered this was our commits were taking 20-40x longer on this  
>> index
>> than others)
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 12:07:54 2009
Return-Path: <java-user-return-38698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82137 invoked from network); 26 Feb 2009 12:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 12:07:54 -0000
Received: (qmail 37955 invoked by uid 500); 26 Feb 2009 12:07:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37934 invoked by uid 500); 26 Feb 2009 12:07:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37923 invoked by uid 99); 26 Feb 2009 12:07:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 04:07:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.219.157 as permitted sender)
Received: from [209.85.219.157] (HELO mail-ew0-f157.google.com) (209.85.219.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 12:07:39 +0000
Received: by ewy1 with SMTP id 1so590948ewy.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 04:07:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=WOjrHqBwvAWhMS/4384OAAxoBCA4ppmYppmtVcV6YaA=;
        b=UsGa/ExJ0aoI262F0olyrPqzV/TFE484SNRgwlmddThaT5vLxoKFDEpeJmMW5OrBU3
         0KFT+5inAXoPnAvdKAwani9JqRvGBOLWI6BuTr6h9D/fHQtW5S2nycZFiY6phwedgudQ
         7xsmP50Eg9K81MS0ZFKtOpugZAZg+Kx85ojos=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=GXtH/q+wwZp3ous3dLwwCJzDcM3EctiRZwL0AJRkZjXY8Llrq3kVFfWKmPkYs+O2tr
         i9pDqcbHD1AkWGLNe9bcRfliwwI70KLFDJXtkz4wpA6Z9NDvUzoQtrM68ERth4XX3uIs
         cK3uBrm3VEp8D1dcF97dhZMJWefSIKhoKqVqk=
MIME-Version: 1.0
Received: by 10.210.36.10 with SMTP id j10mr861106ebj.31.1235650038964; Thu, 
	26 Feb 2009 04:07:18 -0800 (PST)
Date: Thu, 26 Feb 2009 14:07:18 +0200
Message-ID: <d36c28c30902260407v3c73df2au2f773ca0ff33189c@mail.gmail.com>
Subject: Merging two tokenized fields
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c0e22a3a46a0463d131bc
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c0e22a3a46a0463d131bc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

I have two indexes, each has a tokenized field and I would like to combine
them both into one field in a new index.
How can it be done?
(Is it a good approach or is it better to hold them as untokenized text and
only when I create the new index, then to tokenize it?)

Many thanks,
Liat

--0015174c0e22a3a46a0463d131bc--

From java-user-return-38699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 12:18:20 2009
Return-Path: <java-user-return-38699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84195 invoked from network); 26 Feb 2009 12:18:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 12:18:20 -0000
Received: (qmail 47973 invoked by uid 500); 26 Feb 2009 12:18:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47941 invoked by uid 500); 26 Feb 2009 12:18:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47930 invoked by uid 99); 26 Feb 2009 12:18:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 04:18:12 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oren.liat@gmail.com designates 209.85.219.157 as permitted sender)
Received: from [209.85.219.157] (HELO mail-ew0-f157.google.com) (209.85.219.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 12:18:06 +0000
Received: by ewy1 with SMTP id 1so593220ewy.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 04:17:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=1iV0ndnL7+37EWm5wYlJaG/TZ2r009alypG30FN26yQ=;
        b=r3dSLplJEfOH1wdK33g+PNhgXVLDuwEcrv0Pzul7HhdDljOSD3N1jZFwlxEDZqKRHQ
         x5+DCIcoWIz4i7FRw0hqOgX/jCFcSDIwcYsLF+PJxwH4Q+7JvyjV6YgG/01UWqKbudSi
         VH7ppuCzSdFHRoL1BwL8TY1JQwb9tN7npCKvM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vxE8KFkbd80wmxvxJ4mMBFkuvEiKqfm9FUlH/zYCoiw5KmyC6aIabgb2rFdho/XG4f
         q+YM7h3duLBXhaegW/iAorepoEqSSJew18TZgZgveZ8cmNNKxw/eHXjkXEpcVn//16Yf
         3DvJVT3LV9n8aTHxwVCYPm35wgnOq/ynGRnlg=
MIME-Version: 1.0
Received: by 10.210.105.2 with SMTP id d2mr458898ebc.20.1235650664904; Thu, 26 
	Feb 2009 04:17:44 -0800 (PST)
In-Reply-To: <d36c28c30902260414v6bb5d801me31c99dbd9989c2e@mail.gmail.com>
References: <d36c28c30902260414v6bb5d801me31c99dbd9989c2e@mail.gmail.com>
Date: Thu, 26 Feb 2009 14:17:44 +0200
Message-ID: <d36c28c30902260417t6551e38as2c42d51a9d891f81@mail.gmail.com>
Subject: Merging two tokenized fields
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174bdc98f2b8c40463d15614
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174bdc98f2b8c40463d15614
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

  Hi,

I have two indexes, each has a tokenized field and I would like to combine
them both into one field in a new index.
How can it be done?
(Is it a good approach or is it better to hold them as untokenized text and
only when I create the new index, then to tokenize it?)

Many thanks,
Liat

--0015174bdc98f2b8c40463d15614--

From java-user-return-38700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 13:00:10 2009
Return-Path: <java-user-return-38700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3763 invoked from network); 26 Feb 2009 13:00:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 13:00:10 -0000
Received: (qmail 5089 invoked by uid 500); 26 Feb 2009 13:00:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5062 invoked by uid 500); 26 Feb 2009 13:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5051 invoked by uid 99); 26 Feb 2009 13:00:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 05:00:01 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_IMAGE_ONLY_28,HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.46.51.80] (HELO SG2EHSOBE006.bigfish.com) (207.46.51.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 12:59:51 +0000
Received: from mail161-sin-R.bigfish.com (10.3.40.3) by
 SG2EHSOBE006.bigfish.com (10.3.40.26) with Microsoft SMTP Server id
 8.1.340.0; Thu, 26 Feb 2009 12:59:26 +0000
Received: from mail161-sin (localhost.localdomain [127.0.0.1])	by
 mail161-sin-R.bigfish.com (Postfix) with ESMTP id 2FD32210222	for
 <java-user@lucene.apache.org>; Thu, 26 Feb 2009 12:59:27 +0000 (UTC)
X-BigFish: VPS-39(zz62a3L14ffOaf6W1b0aM1c30Rzzzz5bd2i2b06iz2dh54h6bh34h61h)
X-Spam-TCS-SCL: 0:0
Received: by mail161-sin (MessageSwitch) id 1235653163565931_7158; Thu, 26 Feb
 2009 12:59:23 +0000 (UCT)
Received: from phmag01.lawson.com (unknown [221.121.120.101])	by
 mail161-sin.bigfish.com (Postfix) with ESMTP id 6C3FF1390050	for
 <java-user@lucene.apache.org>; Thu, 26 Feb 2009 12:59:23 +0000 (UTC)
To: java-user@lucene.apache.org
Subject: contains functionality in Lucene
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OFC8C78F8D.A27FE2DD-ON48257569.00470B5A-48257569.00475B62@lawson.com>
From: <Joseph.Syjuco@ph.lawson.com>
Date: Thu, 26 Feb 2009 20:59:21 +0800
X-MIMETrack: Serialize by Router on PHMAG01/Server/Lawson(Release 6.5.6FP1|April 24, 2007) at
 02/26/2009 08:59:23 PM,
	Serialize complete at 02/26/2009 08:59:23 PM
Content-Type: multipart/related; boundary="=_related 00475B5F48257569_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_related 00475B5F48257569_=
Content-Type: multipart/alternative;
	boundary="=_alternative 00475B5F48257569_="

--=_alternative 00475B5F48257569_=
Content-Type: text/plain; charset="US-ASCII"

Hi all,

We have a business requirement that needs Lucene to search similar to 
contains (of SQL) such that we can have something like *ucen*  which 
should return lucene and lucent ... unfortunately wildcards are not 
allowed at the start of the search keyword - how should I go about this? 
Is this possible in Lucene? Is this advisable (some forums suggest this is 
a huge performance hit)?

Thanks for all the help


"XP is making a bet. It is betting that it is better to do a simple thing 
today and pay a little more tomorrow to change it if it needs it, than to 
do a more complicated thing today that may never be used anyway" - Extreme 
Programming Explained, Embrace Change

Best Regards, 

Joseph F. Syjuco 
Team Lead 
M3 Alpha - e-Commerce 
__________________________________ 
Lawson PSSC, Inc. 
4th Floor, One World Square Building 
Upper McKinley Road, Taguig City 1634 
Philippines 

Work: +63 (2) 976-3600 loc 79396
Mobile: +63 (917) 855-3436
Web: http://www.lawson.com 
Email: joseph.syjuco@lawson.com 


-------------------- Internet e-Mail Disclaimer --------------------
This e-mail and any files transmitted with it are confidential and 
intended solely for the use of the individual or entity to which they are 
addressed. If you are not the intended recipient you are notified that any 
use, disclosure, copying or distribution of the information is prohibited. 
In such case, you should destroy this message and kindly notify the sender 
by reply e-mail. The views expressed in this e-mail and any attachments 
are personal and, unless stated explicitly, do not represent the views of 
Lawson Software, Inc. 
--=_alternative 00475B5F48257569_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2 face="sans-serif">Hi all,</font>
<br>
<br><font size=2 face="sans-serif">We have a business requirement that
needs Lucene to search similar to contains (of SQL) such that we can have
something like *ucen* &nbsp;which should return lucene and lucent ... unfortunately
wildcards are not allowed at the start of the search keyword - how should
I go about this? &nbsp;Is this possible in Lucene? Is this advisable (some
forums suggest this is a huge performance hit)?</font>
<br>
<br><font size=2 face="sans-serif">Thanks for all the help<br>
</font><font size=3><br>
</font>
<p><font size=3><i>&quot;XP is making a bet. It is betting that it is better
to do a simple thing today and pay a little more tomorrow to change it
if it needs it, than to do a more complicated thing today that may never
be used anyway&quot; - Extreme Programming Explained, Embrace Change</i><br>
<br>
Best Regards, <br>
</font><img src=cid:_1_0711AD1C0711A7AC00475B5D48257569><font size=2 face="Arial"><b><br>
Joseph F. Syjuco</b> <br>
Team Lead <br>
M3 Alpha - e-Commerce <br>
__________________________________ <br>
Lawson PSSC, Inc. <br>
4th Floor, One World Square Building <br>
Upper McKinley Road, Taguig City 1634 <br>
Philippines</font><font size=3> <br>
</font><font size=1 face="Arial"><br>
Work: +63 (2) 976-3600 loc 79396<br>
Mobile: +63 (917) 855-3436<br>
Web: </font><a href=http://www.lawson.com/><font size=1 color=blue face="Arial"><u>http://www.lawson.com</u></font></a><font size=1 face="Arial">
<br>
Email: </font><a href=mailto:joseph.syjuco@lawson.com><font size=1 color=blue face="Arial"><u>joseph.syjuco@lawson.com</u></font></a><font size=1 face="Arial">
</font><font size=3><br>
<br>
</font>
<p><font size=1 color=#a9a9a9 face="Arial"><b>-------------------- Internet
e-Mail Disclaimer --------------------</b></font>
<p><font size=1 color=#a9a9a9 face="Arial">This e-mail and any files transmitted
with it are confidential and intended solely for the use of the individual
or entity to which they are addressed. If you are not the intended recipient
you are notified that any use, disclosure, copying or distribution of the
information is prohibited. In such case, you should destroy this message
and kindly notify the sender by reply e-mail. The views expressed in this
e-mail and any attachments are personal and, unless stated explicitly,
do not represent the views of Lawson Software, Inc. </font>
--=_alternative 00475B5F48257569_=--

--=_related 00475B5F48257569_=--

From java-user-return-38701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 13:10:52 2009
Return-Path: <java-user-return-38701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7292 invoked from network); 26 Feb 2009 13:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 13:10:52 -0000
Received: (qmail 27090 invoked by uid 500); 26 Feb 2009 13:10:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27063 invoked by uid 500); 26 Feb 2009 13:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27052 invoked by uid 99); 26 Feb 2009 13:10:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 05:10:44 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_NEUTRAL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.170] (HELO mail-gx0-f170.google.com) (209.85.217.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 13:10:33 +0000
Received: by gxk18 with SMTP id 18so1342889gxk.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 05:10:11 -0800 (PST)
Received: by 10.150.143.12 with SMTP id q12mr1833548ybd.105.1235653811381;
        Thu, 26 Feb 2009 05:10:11 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id p27sm3775129ele.18.2009.02.26.05.10.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 26 Feb 2009 05:10:10 -0800 (PST)
Message-Id: <CB86E6E4-41B8-4A70-96BA-F4FA7E944E7B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6f4104d80902260313w1836ca10kb50bd1131029c694@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Faceted Search using Lucene
Date: Thu, 26 Feb 2009 08:10:08 -0500
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com> <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com> <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com> <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com> <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com> <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com> <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com> <759B2A6C-48A3-4EF9-876C-8DDDCFC60AB3@mikemccandless.com> <6f4104d80902260313w1836ca10kb50bd1131029c694@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


See below -- this is an excerpt from the upcoming Lucene in Action
revision (chapter 10).

It's a simple class.  Use it like this for searching:

   IndexSearcher searcher = manager.get();
   try {
     searcher.search(...).
     ...render results...
   } finally {
     manager.release(searcher);
     searcher = null;
   }

When you want to reopen (application dependent), call maybeReopen.
Subclass and define the warm() method if needed.

NOTE: this hasn't yet been heavily tested (I just quickly revised it  
to use
incRef/decRef).

Mike

import java.io.IOException;
import java.util.HashMap;

import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.store.Directory;

/** Utility class to get/refresh searchers when you are
  *  using multiple threads. */

public class SearcherManager {

   private IndexSearcher currentSearcher;                         //A
   private Directory dir;

   public SearcherManager(Directory dir) throws IOException {
     this.dir = dir;
     currentSearcher = new IndexSearcher(IndexReader.open(dir));  //B
   }

   public void warm(IndexSearcher searcher) {}                    //C

   public void maybeReopen() throws IOException {                 //D
     long currentVersion =  
currentSearcher.getIndexReader().getVersion();
     if (IndexReader.getCurrentVersion(dir) != currentVersion) {
       IndexReader newReader =  
currentSearcher.getIndexReader().reopen();
       assert newReader != currentSearcher.getIndexReader();
       IndexSearcher newSearcher = new IndexSearcher(newReader);
       warm(newSearcher);
       swapSearcher(newSearcher);
     }
   }

   public synchronized IndexSearcher get() {                      //E
     currentSearcher.getIndexReader().incRef();
     return currentSearcher;
   }

   public synchronized void release(IndexSearcher searcher)       //F
     throws IOException {
     searcher.getIndexReader().decRef();
   }

   private synchronized void swapSearcher(IndexSearcher newSearcher) //G
       throws IOException {
     release(currentSearcher);
     currentSearcher = newSearcher;
   }
}

/*
#A Current IndexSearcher
#B Create initial searcher
#C Implement in subclass to warm new searcher
#D Call this to reopen searcher if index changed
#E Returns current searcher
#F Release searcher
#G Swaps currentSearcher to new searcher
*/

Mike

Amin Mohammed-Coleman wrote:

> Hi
>
> Thanks for your reply.  Without sound completely ...silly...how do i  
> go
> abouts using the methods you mentioned...
>
> Cheers
> Amin
>
> On Thu, Feb 26, 2009 at 10:24 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Actually, it's best to use IndexReader.incRef/decRef to track the
>> IndexReader.
>>
>> You should not rely on GC to close your IndexReader since this can  
>> easily
>> tie up resources (eg open file descriptors) for too long.
>>
>> Mike
>>
>>
>> Michael Stoppelman wrote:
>>
>> If another thread is executing a query with the handle to one of
>>> readers[i]
>>> you're going to kill it since the IndexReader is now closed.
>>> Just don't call the IndexReader#close() method. If nothing is  
>>> pointing at
>>> the readers they should be garbage collected. Also, you might
>>> want to warm up your new IndexSearcher before you switch to it,  
>>> meaning
>>> run
>>> a few queries on it before you swap the old one out.
>>>
>>> M
>>>
>>>
>>>
>>> On Tue, Feb 24, 2009 at 12:48 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>> wrote:
>>>
>>> The reason for the indexreader.reopen is because I have a webapp  
>>> which
>>>> enables users to upload files and then search for the documents.   
>>>> If I
>>>> don't
>>>> reopen i'm concerned that the facet hit counter won't be updated.
>>>>
>>>> On Tue, Feb 24, 2009 at 8:32 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>
>>>>> wrote:
>>>>>
>>>>
>>>> Hi
>>>>> I have been able to get the code working for my scenario,  
>>>>> however I have
>>>>>
>>>> a
>>>>
>>>>> question and I was wondering if I could get some help.  I have a  
>>>>> list of
>>>>> IndexSearchers which are used in a MultiSearcher class.  I use the
>>>>> indexsearchers to get each indexreader and put them into a
>>>>>
>>>> MultiIndexReader.
>>>>
>>>>>
>>>>> IndexReader[] readers = new IndexReader[searchables.length];
>>>>>
>>>>> for (int i =0 ; i < searchables.length;i++) {
>>>>>
>>>>> IndexSearcher indexSearcher = (IndexSearcher)searchables[i];
>>>>>
>>>>> readers[i] = indexSearcher.getIndexReader();
>>>>>
>>>>>  IndexReader newReader = readers[i].reopen();
>>>>>
>>>>> if (newReader != readers[i]) {
>>>>>
>>>>> readers[i].close();
>>>>>
>>>>> }
>>>>>
>>>>> readers[i] = newReader;
>>>>>
>>>>>
>>>>>
>>>>> }
>>>>>
>>>>> multiReader = new MultiReader(readers);
>>>>>
>>>>> OpenBitSetFacetHitCounter facetHitCounter =
>>>>>
>>>> newOpenBitSetFacetHitCounter();
>>>>
>>>>>
>>>>> IndexSearcher indexSearcher = new IndexSearcher(multiReader);
>>>>>
>>>>>
>>>>> I then use the indexseacher to do the facet stuff.  I end the  
>>>>> code with
>>>>> closing the multireader.  This is causing problems in another  
>>>>> method
>>>>>
>>>> where I
>>>>
>>>>> do some other search as the indexreaders are closed.  Is it ok  
>>>>> to not
>>>>>
>>>> close
>>>>
>>>>> the multiindexreader or should I do some additional checks in  
>>>>> the other
>>>>> method to see if the indexreader is closed?
>>>>>
>>>>>
>>>>>
>>>>> Cheers
>>>>>
>>>>>
>>>>> P.S. Hope that made sense...!
>>>>>
>>>>>
>>>>> On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <
>>>>> aminmc@gmail.com
>>>>> wrote:
>>>>>
>>>>> Hi
>>>>>>
>>>>>> Thanks just what I needed!
>>>>>>
>>>>>> Cheers
>>>>>> Amin
>>>>>>
>>>>>>
>>>>>> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com>
>>>>>>
>>>>> wrote:
>>>>
>>>>>
>>>>>> Hi Amin:
>>>>>>
>>>>>>> Please take a look a this blog post:
>>>>>>>
>>>>>>>
>>>>>>>
>>>> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
>>>>
>>>>> Best regards, Marcelo.
>>>>>>>
>>>>>>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <
>>>>>>>
>>>>>> aminmc@gmail.com>
>>>>
>>>>> wrote:
>>>>>>>
>>>>>>> Hi
>>>>>>>>
>>>>>>>> Sorry to re send this email but I was wondering if I could  
>>>>>>>> get some
>>>>>>>> advice
>>>>>>>> on this.
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>>
>>>>>>>> Amin
>>>>>>>>
>>>>>>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com 
>>>>>>>> >
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>> Hi
>>>>>>>>
>>>>>>>>>
>>>>>>>>> I am looking at building a faceted search using Lucene.  I  
>>>>>>>>> know that
>>>>>>>>> Solr
>>>>>>>>> comes with this built in, however I would like to try this  
>>>>>>>>> by myself
>>>>>>>>> (something to add to my CV!).  I have been looking around  
>>>>>>>>> and I
>>>>>>>>> found
>>>>>>>>> that
>>>>>>>>> you can use the IndexReader and use TermVectors.  This looks  
>>>>>>>>> ok but
>>>>>>>>>
>>>>>>>> I'm
>>>>
>>>>> not
>>>>>>>>> sure how to filter the results so that a particular user can  
>>>>>>>>> only
>>>>>>>>> see
>>>>>>>>>
>>>>>>>> a
>>>>
>>>>> subset of results.  The next option I was looking at was something
>>>>>>>>>
>>>>>>>> like
>>>>
>>>>>
>>>>>>>>> Term term1 = new Term("brand", "ford");
>>>>>>>>> Term term2 = new Term("brand", "vw");
>>>>>>>>> Term[] termsArray = new Term[] { term1, term2 };un
>>>>>>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>>>>>>>>
>>>>>>>>> The only problem here is that I have to provide the brand  
>>>>>>>>> type each
>>>>>>>>> time a
>>>>>>>>> new brand is created.  Again I'm not sure how I can filter the
>>>>>>>>>
>>>>>>>> results
>>>>
>>>>> here.
>>>>>>>>> It may be that I'm using the wrong api methods to do this.
>>>>>>>>>
>>>>>>>>> I would be grateful if I could get some advice on this.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>> P.S.  I am basically trying to do something that displays the
>>>>>>>>>
>>>>>>>> following
>>>>
>>>>>
>>>>>>>>> Personal Contact (23) Business Contact (45) and so on..
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Marcelo F. Ochoa
>>>>>>> http://marceloochoa.blogspot.com/
>>>>>>> http://marcelo.ochoa.googlepages.com/home
>>>>>>> ______________
>>>>>>> Want to integrate Lucene and Oracle?
>>>>>>>
>>>>>>>
>>>>>>>
>>>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>>>>
>>>>> Is Oracle 11g REST ready?
>>>>>>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 13:34:49 2009
Return-Path: <java-user-return-38702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20006 invoked from network); 26 Feb 2009 13:34:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 13:34:49 -0000
Received: (qmail 80688 invoked by uid 500); 26 Feb 2009 13:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80669 invoked by uid 500); 26 Feb 2009 13:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80658 invoked by uid 99); 26 Feb 2009 13:34:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 05:34:41 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 13:34:35 +0000
Received: by yw-out-2324.google.com with SMTP id 2so355652ywt.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 05:34:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=kBunt1QvzHIUZ052EpBgHiOgiE2+uQtjtQPEeEQ81/c=;
        b=HjnXTZ7OuIdkTHaifzK2hXY8qiQpFQnb2Uv9+ZFdrzaW7ZlvgQI0SR/NoRhM2Toe3+
         gZNoJ9G3aizD/ln3nsFsdUFaZGxIEer9qCxcluXxSWDY0Pj2OmyHSCJXoGzKW+BBzwL/
         qe+CwfklxPzqw+OBpH9CE/TyBB0vk05iCPQcE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qbj7UNJGN/ezukbRC0a5ru6cy9HxKRUjr+IUSc9Mdxk46aIOpHONrht5eneayoDDz8
         aKwDd3Qik7l80ibgYJ+KGF9NRWk3nU1K6PVc7tbXkQpUerxGpNmRzjtwOIfvd2GMwiVF
         r0eRe9m2STFZfZu2PVepSqUMoBwzx+IZwQJTw=
MIME-Version: 1.0
Received: by 10.220.44.212 with SMTP id b20mr593328vcf.116.1235655253981; Thu, 
	26 Feb 2009 05:34:13 -0800 (PST)
In-Reply-To: <d36c28c30902260407v3c73df2au2f773ca0ff33189c@mail.gmail.com>
References: <d36c28c30902260407v3c73df2au2f773ca0ff33189c@mail.gmail.com>
Date: Thu, 26 Feb 2009 08:34:13 -0500
Message-ID: <359a92830902260534u32b92a37i60578d1e054916ea@mail.gmail.com>
Subject: Re: Merging two tokenized fields
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6468f687a79640463d2680f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6468f687a79640463d2680f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Reconstructing a field from an index is
1> slow
2> lossy (what about stemmed words? stopwords? )

UNLESS you have stored the data (Field.Store.YES/COMPRESS),
in which case you can just get the field from each index and put it
in the new one. Tokenization has little to do with this although you
could get a similar effect with untokenized fields but why would you
want to?

I assume you have a way to uniquely identify the documents that you
want to combine, relying on the Lucene doc ID is fragile....

If possible, your best bet would be to reconstruct the new index
from the source you used to create the original indexes.

Maybe a higher-level problem statement would help generate
more suggestions.

Best
Erick

On Thu, Feb 26, 2009 at 7:07 AM, liat oren <oren.liat@gmail.com> wrote:

> Hi,
>
> I have two indexes, each has a tokenized field and I would like to combine
> them both into one field in a new index.
> How can it be done?
> (Is it a good approach or is it better to hold them as untokenized text and
> only when I create the new index, then to tokenize it?)
>
> Many thanks,
> Liat
>

--0016e6468f687a79640463d2680f--

From java-user-return-38703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 13:36:24 2009
Return-Path: <java-user-return-38703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21642 invoked from network); 26 Feb 2009 13:36:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 13:36:24 -0000
Received: (qmail 86316 invoked by uid 500); 26 Feb 2009 13:36:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86291 invoked by uid 500); 26 Feb 2009 13:36:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86280 invoked by uid 99); 26 Feb 2009 13:36:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 05:36:16 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 13:36:05 +0000
Received: by yw-out-2324.google.com with SMTP id 2so356095ywt.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 05:35:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=JWEmjiVQ/L4lxs7hBGjJidiozpigqO8UtXqVRZhxAXg=;
        b=ic27azpmQWTUJyXgFj3BV3Hc+cxINjuHzLYdmoxoJiqM2fOp+XhuydISQ34R1VVE71
         d7/E0ks79vm2gznFV9RHbo5wgDJ303eojuCaa8xC1dpNu9LGzmKIDnjNDd68fMtZmmCX
         ncXZBNZuHcTpyzLLopG4div+EuKNky6noTzhY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=m7tOssdNydSUMjNGcJ4xaRuWHs1Vy/7Ji++M/aicdVFMBvyeVtWmtKMDlAF6pLNt9Q
         ZHT67G6P9M3DIsuU9BU2YTJSsu1Uy24nwVohEYzVycfNj7DobnC43cp92ukOKsgnLQpn
         qUgqJn0dNd+jwbYBuDQZQwYzJ8RCrD9XyM9xk=
MIME-Version: 1.0
Received: by 10.100.227.6 with SMTP id z6mr1435313ang.111.1235655343584; Thu, 
	26 Feb 2009 05:35:43 -0800 (PST)
In-Reply-To: <CB86E6E4-41B8-4A70-96BA-F4FA7E944E7B@mikemccandless.com>
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
	 <D033740B-C1ED-496B-A2A3-AFB5F2DC3546@gmail.com>
	 <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
	 <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
	 <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com>
	 <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com>
	 <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com>
	 <759B2A6C-48A3-4EF9-876C-8DDDCFC60AB3@mikemccandless.com>
	 <6f4104d80902260313w1836ca10kb50bd1131029c694@mail.gmail.com>
	 <CB86E6E4-41B8-4A70-96BA-F4FA7E944E7B@mikemccandless.com>
Date: Thu, 26 Feb 2009 13:35:43 +0000
Message-ID: <6f4104d80902260535o1089df30kaca56cd1c7c030b@mail.gmail.com>
Subject: Re: Faceted Search using Lucene
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636284800d1b4d00463d26da6
X-Virus-Checked: Checked by ClamAV on apache.org

--001636284800d1b4d00463d26da6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

Thanks for your help.  I will modify my facet search and my other code to
use the recommendations.   Would it be ok to get a review of the completed
code?  I just want to make sure that I'm not doing anything that may cause
any problems (threading, memory).

Cheers

On Thu, Feb 26, 2009 at 1:10 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> See below -- this is an excerpt from the upcoming Lucene in Action
> revision (chapter 10).
>
> It's a simple class.  Use it like this for searching:
>
>  IndexSearcher searcher = manager.get();
>  try {
>    searcher.search(...).
>    ...render results...
>  } finally {
>    manager.release(searcher);
>    searcher = null;
>  }
>
> When you want to reopen (application dependent), call maybeReopen.
> Subclass and define the warm() method if needed.
>
> NOTE: this hasn't yet been heavily tested (I just quickly revised it to use
> incRef/decRef).
>
> Mike
>
> import java.io.IOException;
> import java.util.HashMap;
>
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.store.Directory;
>
> /** Utility class to get/refresh searchers when you are
>  *  using multiple threads. */
>
> public class SearcherManager {
>
>  private IndexSearcher currentSearcher;                         //A
>  private Directory dir;
>
>  public SearcherManager(Directory dir) throws IOException {
>    this.dir = dir;
>    currentSearcher = new IndexSearcher(IndexReader.open(dir));  //B
>  }
>
>  public void warm(IndexSearcher searcher) {}                    //C
>
>  public void maybeReopen() throws IOException {                 //D
>    long currentVersion = currentSearcher.getIndexReader().getVersion();
>    if (IndexReader.getCurrentVersion(dir) != currentVersion) {
>      IndexReader newReader = currentSearcher.getIndexReader().reopen();
>      assert newReader != currentSearcher.getIndexReader();
>      IndexSearcher newSearcher = new IndexSearcher(newReader);
>      warm(newSearcher);
>      swapSearcher(newSearcher);
>    }
>  }
>
>  public synchronized IndexSearcher get() {                      //E
>    currentSearcher.getIndexReader().incRef();
>    return currentSearcher;
>  }
>
>  public synchronized void release(IndexSearcher searcher)       //F
>    throws IOException {
>    searcher.getIndexReader().decRef();
>  }
>
>  private synchronized void swapSearcher(IndexSearcher newSearcher) //G
>      throws IOException {
>    release(currentSearcher);
>    currentSearcher = newSearcher;
>  }
> }
>
> /*
> #A Current IndexSearcher
> #B Create initial searcher
> #C Implement in subclass to warm new searcher
> #D Call this to reopen searcher if index changed
> #E Returns current searcher
> #F Release searcher
> #G Swaps currentSearcher to new searcher
> */
>
> Mike
>
>
> Amin Mohammed-Coleman wrote:
>
>  Hi
>>
>> Thanks for your reply.  Without sound completely ...silly...how do i go
>> abouts using the methods you mentioned...
>>
>> Cheers
>> Amin
>>
>> On Thu, Feb 26, 2009 at 10:24 AM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>
>>> Actually, it's best to use IndexReader.incRef/decRef to track the
>>> IndexReader.
>>>
>>> You should not rely on GC to close your IndexReader since this can easily
>>> tie up resources (eg open file descriptors) for too long.
>>>
>>> Mike
>>>
>>>
>>> Michael Stoppelman wrote:
>>>
>>> If another thread is executing a query with the handle to one of
>>>
>>>> readers[i]
>>>> you're going to kill it since the IndexReader is now closed.
>>>> Just don't call the IndexReader#close() method. If nothing is pointing
>>>> at
>>>> the readers they should be garbage collected. Also, you might
>>>> want to warm up your new IndexSearcher before you switch to it, meaning
>>>> run
>>>> a few queries on it before you swap the old one out.
>>>>
>>>> M
>>>>
>>>>
>>>>
>>>> On Tue, Feb 24, 2009 at 12:48 PM, Amin Mohammed-Coleman <
>>>> aminmc@gmail.com
>>>>
>>>>> wrote:
>>>>>
>>>>
>>>> The reason for the indexreader.reopen is because I have a webapp which
>>>>
>>>>> enables users to upload files and then search for the documents.  If I
>>>>> don't
>>>>> reopen i'm concerned that the facet hit counter won't be updated.
>>>>>
>>>>> On Tue, Feb 24, 2009 at 8:32 PM, Amin Mohammed-Coleman <
>>>>> aminmc@gmail.com
>>>>>
>>>>>  wrote:
>>>>>>
>>>>>>
>>>>> Hi
>>>>>
>>>>>> I have been able to get the code working for my scenario, however I
>>>>>> have
>>>>>>
>>>>>>  a
>>>>>
>>>>>  question and I was wondering if I could get some help.  I have a list
>>>>>> of
>>>>>> IndexSearchers which are used in a MultiSearcher class.  I use the
>>>>>> indexsearchers to get each indexreader and put them into a
>>>>>>
>>>>>>  MultiIndexReader.
>>>>>
>>>>>
>>>>>> IndexReader[] readers = new IndexReader[searchables.length];
>>>>>>
>>>>>> for (int i =0 ; i < searchables.length;i++) {
>>>>>>
>>>>>> IndexSearcher indexSearcher = (IndexSearcher)searchables[i];
>>>>>>
>>>>>> readers[i] = indexSearcher.getIndexReader();
>>>>>>
>>>>>>  IndexReader newReader = readers[i].reopen();
>>>>>>
>>>>>> if (newReader != readers[i]) {
>>>>>>
>>>>>> readers[i].close();
>>>>>>
>>>>>> }
>>>>>>
>>>>>> readers[i] = newReader;
>>>>>>
>>>>>>
>>>>>>
>>>>>> }
>>>>>>
>>>>>> multiReader = new MultiReader(readers);
>>>>>>
>>>>>> OpenBitSetFacetHitCounter facetHitCounter =
>>>>>>
>>>>>>  newOpenBitSetFacetHitCounter();
>>>>>
>>>>>
>>>>>> IndexSearcher indexSearcher = new IndexSearcher(multiReader);
>>>>>>
>>>>>>
>>>>>> I then use the indexseacher to do the facet stuff.  I end the code
>>>>>> with
>>>>>> closing the multireader.  This is causing problems in another method
>>>>>>
>>>>>>  where I
>>>>>
>>>>>  do some other search as the indexreaders are closed.  Is it ok to not
>>>>>>
>>>>>>  close
>>>>>
>>>>>  the multiindexreader or should I do some additional checks in the
>>>>>> other
>>>>>> method to see if the indexreader is closed?
>>>>>>
>>>>>>
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>>
>>>>>> P.S. Hope that made sense...!
>>>>>>
>>>>>>
>>>>>> On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <
>>>>>> aminmc@gmail.com
>>>>>> wrote:
>>>>>>
>>>>>> Hi
>>>>>>
>>>>>>>
>>>>>>> Thanks just what I needed!
>>>>>>>
>>>>>>> Cheers
>>>>>>> Amin
>>>>>>>
>>>>>>>
>>>>>>> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com>
>>>>>>>
>>>>>>>  wrote:
>>>>>>
>>>>>
>>>>>
>>>>>>  Hi Amin:
>>>>>>>
>>>>>>>  Please take a look a this blog post:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
>>>>>
>>>>>  Best regards, Marcelo.
>>>>>>
>>>>>>>
>>>>>>>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <
>>>>>>>>
>>>>>>>>  aminmc@gmail.com>
>>>>>>>
>>>>>>
>>>>>  wrote:
>>>>>>
>>>>>>>
>>>>>>>> Hi
>>>>>>>>
>>>>>>>>>
>>>>>>>>> Sorry to re send this email but I was wondering if I could get some
>>>>>>>>> advice
>>>>>>>>> on this.
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>>
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>> Hi
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> I am looking at building a faceted search using Lucene.  I know
>>>>>>>>>> that
>>>>>>>>>> Solr
>>>>>>>>>> comes with this built in, however I would like to try this by
>>>>>>>>>> myself
>>>>>>>>>> (something to add to my CV!).  I have been looking around and I
>>>>>>>>>> found
>>>>>>>>>> that
>>>>>>>>>> you can use the IndexReader and use TermVectors.  This looks ok
>>>>>>>>>> but
>>>>>>>>>>
>>>>>>>>>>  I'm
>>>>>>>>>
>>>>>>>>
>>>>>  not
>>>>>>
>>>>>>> sure how to filter the results so that a particular user can only
>>>>>>>>>> see
>>>>>>>>>>
>>>>>>>>>>  a
>>>>>>>>>
>>>>>>>>
>>>>>  subset of results.  The next option I was looking at was something
>>>>>>
>>>>>>>
>>>>>>>>>>  like
>>>>>>>>>
>>>>>>>>
>>>>>
>>>>>>  Term term1 = new Term("brand", "ford");
>>>>>>>>>> Term term2 = new Term("brand", "vw");
>>>>>>>>>> Term[] termsArray = new Term[] { term1, term2 };un
>>>>>>>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>>>>>>>>>
>>>>>>>>>> The only problem here is that I have to provide the brand type
>>>>>>>>>> each
>>>>>>>>>> time a
>>>>>>>>>> new brand is created.  Again I'm not sure how I can filter the
>>>>>>>>>>
>>>>>>>>>>  results
>>>>>>>>>
>>>>>>>>
>>>>>  here.
>>>>>>
>>>>>>> It may be that I'm using the wrong api methods to do this.
>>>>>>>>>>
>>>>>>>>>> I would be grateful if I could get some advice on this.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Cheers
>>>>>>>>>> Amin
>>>>>>>>>>
>>>>>>>>>> P.S.  I am basically trying to do something that displays the
>>>>>>>>>>
>>>>>>>>>>  following
>>>>>>>>>
>>>>>>>>
>>>>>
>>>>>>  Personal Contact (23) Business Contact (45) and so on..
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>> --
>>>>>>>> Marcelo F. Ochoa
>>>>>>>> http://marceloochoa.blogspot.com/
>>>>>>>> http://marcelo.ochoa.googlepages.com/home
>>>>>>>> ______________
>>>>>>>> Want to integrate Lucene and Oracle?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>>>>>
>>>>>  Is Oracle 11g REST ready?
>>>>>>
>>>>>>>
>>>>>>>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636284800d1b4d00463d26da6--

From java-user-return-38704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 13:37:06 2009
Return-Path: <java-user-return-38704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22466 invoked from network); 26 Feb 2009 13:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 13:37:04 -0000
Received: (qmail 89071 invoked by uid 500); 26 Feb 2009 13:36:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89045 invoked by uid 500); 26 Feb 2009 13:36:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89034 invoked by uid 99); 26 Feb 2009 13:36:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 05:36:57 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_IMAGE_ONLY_32,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 13:36:47 +0000
Received: by yw-out-2324.google.com with SMTP id 2so356095ywt.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 05:36:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=jqwWgaMGAq/oIZUGBQayCk3HZivuh0OEZ5G4ylFNnsw=;
        b=Sl4MdBC1qgKjROUKnO/hvGS2/QIf6KBXKodPtOqULsIkj1zWaCZP85P5erGxK7bSdI
         ltM2NzNHrrjeBUz79/vBA+jzIxcWuUKfKmHkvrW7lBeZQ5EMg32RBZ9nj2/ORhSNZzsr
         IiD5CvA3ND+s3K4Zwp4SlWvekwXg08qS2J904=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iAW2ZIvb9OheAvIbK40r+rKVsQg5GSINg1WmdrHRb3z8Km2Xh0rYmoDesDFY45jtKX
         2eFZnOwHiLeD4IpAkacmv/8KX56NAgS1waUwUgfnay9Kt3eNfdYJnyNp3WrBTUT1ku32
         MGZzYPuFeBZMoQix3UGo1pg5+Ksnjv3ZtScpA=
MIME-Version: 1.0
Received: by 10.220.100.139 with SMTP id y11mr579889vcn.117.1235655386129; 
	Thu, 26 Feb 2009 05:36:26 -0800 (PST)
In-Reply-To: <OFC8C78F8D.A27FE2DD-ON48257569.00470B5A-48257569.00475B62@lawson.com>
References: <OFC8C78F8D.A27FE2DD-ON48257569.00470B5A-48257569.00475B62@lawson.com>
Date: Thu, 26 Feb 2009 08:36:26 -0500
Message-ID: <359a92830902260536u2a260b38if4e03bf029847b9d@mail.gmail.com>
Subject: Re: contains functionality in Lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e646544e5ae4fb0463d27017
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e646544e5ae4fb0463d27017
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

There is an option to turn leading wildcards on, see QueryParser.

All the usual caveats about TooManyClauses apply....

Best
Erick

On Thu, Feb 26, 2009 at 7:59 AM, <Joseph.Syjuco@ph.lawson.com> wrote:

>
> Hi all,
>
> We have a business requirement that needs Lucene to search similar to
> contains (of SQL) such that we can have something like *ucen*  which should
> return lucene and lucent ... unfortunately wildcards are not allowed at the
> start of the search keyword - how should I go about this?  Is this possible
> in Lucene? Is this advisable (some forums suggest this is a huge performance
> hit)?
>
> Thanks for all the help
>
>  *"XP is making a bet. It is betting that it is better to do a simple
> thing today and pay a little more tomorrow to change it if it needs it, than
> to do a more complicated thing today that may never be used anyway" -
> Extreme Programming Explained, Embrace Change*
>
> Best Regards,
> *
> Joseph F. Syjuco*
> Team Lead
> M3 Alpha - e-Commerce
> __________________________________
> Lawson PSSC, Inc.
> 4th Floor, One World Square Building
> Upper McKinley Road, Taguig City 1634
> Philippines
>
> Work: +63 (2) 976-3600 loc 79396
> Mobile: +63 (917) 855-3436
> Web: *http://www.lawson.com* <http://www.lawson.com/>
> Email: *joseph.syjuco@lawson.com* <joseph.syjuco@lawson.com>
>
>  *-------------------- Internet e-Mail Disclaimer --------------------*
>
> This e-mail and any files transmitted with it are confidential and intended
> solely for the use of the individual or entity to which they are addressed.
> If you are not the intended recipient you are notified that any use,
> disclosure, copying or distribution of the information is prohibited. In
> such case, you should destroy this message and kindly notify the sender by
> reply e-mail. The views expressed in this e-mail and any attachments are
> personal and, unless stated explicitly, do not represent the views of Lawson
> Software, Inc.
>

--0016e646544e5ae4fb0463d27017--

From java-user-return-38705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 13:39:51 2009
Return-Path: <java-user-return-38705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24702 invoked from network); 26 Feb 2009 13:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 13:39:51 -0000
Received: (qmail 96924 invoked by uid 500); 26 Feb 2009 13:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96901 invoked by uid 500); 26 Feb 2009 13:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96890 invoked by uid 99); 26 Feb 2009 13:39:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 05:39:44 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.219.157 as permitted sender)
Received: from [209.85.219.157] (HELO mail-ew0-f157.google.com) (209.85.219.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 13:39:36 +0000
Received: by ewy1 with SMTP id 1so618559ewy.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 05:39:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=LFZBisBDnU3LAnt0mMABEeSV+eAfGU5zN1Me1Mfvh4o=;
        b=gp6whynD5JaZ9vxDfEe/moaNvCjsCAbd9hcaGdhz/A91lIVvLIlHVfXV9AXOF7OEcg
         7OAm64Ap8BFVGjDFnItZ4M7sF+nWF0XZkLXcRkSsnINBRnW67SYMuotoaKEQsjINeCPl
         be5p8KGx3rsXt2seCYNfLnF56rXX/ptxN3PxE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=pUtWMXOG4tMXKg9gEDw3bkx8mP76li7qOtd+SmsZNi9Gq70KBfuCYXhl7qSClFfERH
         0DAu3hE4ySsZYN5tmbRqssDxBNtW6F8APjt/dpQcW7H5M6UbsZSw3Ou2rFTgwzLPkDWL
         KNpiAq/i0tgA7dueHZFpdhUsR+co4dluLfwTo=
MIME-Version: 1.0
Received: by 10.110.26.8 with SMTP id 8mr1900061tiz.27.1235655551971; Thu, 26 
	Feb 2009 05:39:11 -0800 (PST)
In-Reply-To: <926b35870902230813m610087fh67ae5d3afec15c17@mail.gmail.com>
References: <926b35870902230813m610087fh67ae5d3afec15c17@mail.gmail.com>
Date: Thu, 26 Feb 2009 13:39:11 +0000
Message-ID: <926b35870902260539m6f0948d6if81b135b56137074@mail.gmail.com>
Subject: Re: Field Normalisation in Query across two indexes
From: Dino Korah <dckorah@gmail.com>
To: lucene list <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=001485f07c083d72ea0463d27a48
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f07c083d72ea0463d27a48
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Would any one please help me with this.

Thanks

On 23/02/2009, Dino Korah <dckorah@gmail.com> wrote:
>
> Guys,
>
> I have a question on normalisation.
> I am using a prehistoric version of lucene; 2.0.0
>
> Context: http://markmail.org/message/z5lcz2htjvqsscam
>
> I have these two scenario with indexes.
> One:
> 2 indexes; One with documents that has a field "field_one" instantiated a=
s
> TOKENIZED and then setOmitNorms(true).
> Second index with the same field "field_one" instantiated TOKENIZED and
> then setBoost(boost_factor);
>
> Two:
> 2 indexes; One with field "field_one" instantiated as TOKENIZED and then
> setOmitNorms(true).
> Second index with the same field "field_one", but some of them are as fir=
st
> index and some were instantiated TOKENIZED and then setBoost(boost_factor=
);
> A mix of the two types.
>
> If I am to load these two indexes into an IndexReader and query on the
> field "field_one" would there be any issues that I should expect?
>
> Any advice is much appreciated.
>
> Cheerio
>
>
>


--=20
d i n o    k o r a h
Tel: +44 7956 66 52 83
---------------------------
51=C2=B021'50.5902"N   0=C2=B06'11.8116"W

--001485f07c083d72ea0463d27a48--

From java-user-return-38706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 14:35:04 2009
Return-Path: <java-user-return-38706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61242 invoked from network); 26 Feb 2009 14:35:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 14:35:01 -0000
Received: (qmail 12392 invoked by uid 500); 26 Feb 2009 14:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12367 invoked by uid 500); 26 Feb 2009 14:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12355 invoked by uid 99); 26 Feb 2009 14:34:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 06:34:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 209.85.220.168 as permitted sender)
Received: from [209.85.220.168] (HELO mail-fx0-f168.google.com) (209.85.220.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 14:34:44 +0000
Received: by fxm12 with SMTP id 12so672384fxm.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 06:34:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=k+sfHLQow3jOnxO1Hz+j4807NwxegrOQR/QDG3HpsXQ=;
        b=gB92JddG1MwYT3oih9OnLEYp7ONfWde7/c97GT85dw37eCFdQGUy+D1+i6DG96vHSp
         pngXKFl3TV7Y7kMjgg/n5jznvvNjRy7/KFxpMLrgCFFUltqxgNqCBfCeoLYq2ZyUM7Gs
         K1QJTc578TEJRaXjNnWhUb/IzmbyJWobi2x4w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=yFFVHDSiuo3yx7Iap3EoL5eA7BpU2XgUUM7JP7jerUr4HyWFKsrTUzeovT4n1MEL+J
         +/Lkve5j6nmCJvIxrtwDk+hXyKOFiEyxRHQC4t7RKQyUpzDban+utnPWqPfB7DxPdrZ3
         9rdx+pD4duGIpL1G3b3JDt4unaQSVcV9hL3Lc=
MIME-Version: 1.0
Received: by 10.181.201.18 with SMTP id d18mr477140bkq.72.1235658863752; Thu, 
	26 Feb 2009 06:34:23 -0800 (PST)
In-Reply-To: <359a92830902260536u2a260b38if4e03bf029847b9d@mail.gmail.com>
References: <OFC8C78F8D.A27FE2DD-ON48257569.00470B5A-48257569.00475B62@lawson.com>
	 <359a92830902260536u2a260b38if4e03bf029847b9d@mail.gmail.com>
Date: Thu, 26 Feb 2009 16:34:23 +0200
Message-ID: <2ffb6d060902260634n29d64218nb00db66c1ede5da1@mail.gmail.com>
Subject: Re: contains functionality in Lucene
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You can generate n-grams: for example when you index "lucene" you
create tokens "luce", "ucen", "cene".

It will increase term count (and index size), however on search you
will simply search for a single term, which will be extremely fast.

It depends how may documents you have, size of each document, your
query rate, expected latency, hardware...

On Thu, Feb 26, 2009 at 15:36, Erick Erickson <erickerickson@gmail.com> wro=
te:
> There is an option to turn leading wildcards on, see QueryParser.
>
> All the usual caveats about TooManyClauses apply....
>
> Best
> Erick
>
> On Thu, Feb 26, 2009 at 7:59 AM, <Joseph.Syjuco@ph.lawson.com> wrote:
>
>>
>> Hi all,
>>
>> We have a business requirement that needs Lucene to search similar to
>> contains (of SQL) such that we can have something like *ucen* =C2=A0whic=
h should
>> return lucene and lucent ... unfortunately wildcards are not allowed at =
the
>> start of the search keyword - how should I go about this? =C2=A0Is this =
possible
>> in Lucene? Is this advisable (some forums suggest this is a huge perform=
ance
>> hit)?
>>
>> Thanks for all the help
>>
>> =C2=A0*"XP is making a bet. It is betting that it is better to do a simp=
le
>> thing today and pay a little more tomorrow to change it if it needs it, =
than
>> to do a more complicated thing today that may never be used anyway" -
>> Extreme Programming Explained, Embrace Change*
>>
>> Best Regards,
>> *
>> Joseph F. Syjuco*
>> Team Lead
>> M3 Alpha - e-Commerce
>> __________________________________
>> Lawson PSSC, Inc.
>> 4th Floor, One World Square Building
>> Upper McKinley Road, Taguig City 1634
>> Philippines
>>
>> Work: +63 (2) 976-3600 loc 79396
>> Mobile: +63 (917) 855-3436
>> Web: *http://www.lawson.com* <http://www.lawson.com/>
>> Email: *joseph.syjuco@lawson.com* <joseph.syjuco@lawson.com>
>>
>> =C2=A0*-------------------- Internet e-Mail Disclaimer -----------------=
---*
>>
>> This e-mail and any files transmitted with it are confidential and inten=
ded
>> solely for the use of the individual or entity to which they are address=
ed.
>> If you are not the intended recipient you are notified that any use,
>> disclosure, copying or distribution of the information is prohibited. In
>> such case, you should destroy this message and kindly notify the sender =
by
>> reply e-mail. The views expressed in this e-mail and any attachments are
>> personal and, unless stated explicitly, do not represent the views of La=
wson
>> Software, Inc.
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 16:30:03 2009
Return-Path: <java-user-return-38707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20561 invoked from network); 26 Feb 2009 16:30:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 16:30:02 -0000
Received: (qmail 82169 invoked by uid 500); 26 Feb 2009 16:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82097 invoked by uid 500); 26 Feb 2009 16:29:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82063 invoked by uid 99); 26 Feb 2009 16:29:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 08:29:49 -0800
X-ASF-Spam-Status: No, hits=-0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport4.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 16:29:41 +0000
X-SBRS: None
X-MID: 124608756
Received: from fmd3tj001.fda.gov ([10.160.10.76])
  by ironport4.fda.gov with ESMTP; 26 Feb 2009 11:29:19 -0500
Received: from FMD3VS012.fda.gov ([10.160.10.62]) by FMD3TJ001.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 26 Feb 2009 11:29:19 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9982F.5F578C60"
Subject: Use of scanned documents for text extraction and indexing
Date: Thu, 26 Feb 2009 11:29:18 -0500
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73BA1@FMD3VS012.fda.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Use of scanned documents for text extraction and indexing
Thread-Index: AcmYL15OTkWBXK3XTUiPFlpEw7EhmA==
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <solr-user@lucene.apache.org>,
	<java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Feb 2009 16:29:19.0619 (UTC) FILETIME=[5FE04D30:01C9982F]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9982F.5F578C60
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi All:

Is there any study / research done on using scanned paper documents as
images (may be PDF), and then use some OCR or other technique for
extracting text, and the resultant index quality?


Thanks in advance,
Sithu D Sudarsan

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu



------_=_NextPart_001_01C9982F.5F578C60--

From java-user-return-38708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 16:37:12 2009
Return-Path: <java-user-return-38708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23533 invoked from network); 26 Feb 2009 16:37:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 16:37:12 -0000
Received: (qmail 99366 invoked by uid 500); 26 Feb 2009 16:37:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99330 invoked by uid 500); 26 Feb 2009 16:37:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99319 invoked by uid 99); 26 Feb 2009 16:37:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 08:37:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 16:36:56 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 10CD57B312
	for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 08:36:33 -0800 (PST)
Message-Id: <7DF0A8D2-5204-48AA-B3B8-57763D18B96A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <C5CAD040.1EEEF%ken.williams@thomsonreuters.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Confidence scores at search time
Date: Thu, 26 Feb 2009 11:36:33 -0500
References: <C5CAD040.1EEEF%ken.williams@thomsonreuters.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know of anyone doing work on it in the Lucene community.   My  
understanding to date is that it is not really worth trying, but that  
may in fact be an outdated view.  I haven't stayed up on the  
literature on this subject, so background info on what you are  
interested in would be helpful.

Digging around in the archives a bit more, I come up with some more  
relevant emails: http://www.lucidimagination.com/search/?q=comparing+scores+across+searches#/ 
p:lucene,solr/s:email

What is the bigger problem that you are trying to solve?  That is, you  
imply that score comparison is the solution, but you haven't said the  
problem you are trying to solve.

Cheers,
Grant


On Feb 25, 2009, at 11:38 AM, Ken Williams wrote:

> Hi all,
>
> I didn't get a response to this - not sure whether the question was
> ill-posed, or too-frequently-asked, or just not interesting.  But if  
> anyone
> could take a stab at it or let me know a different place to look,  
> I'd really
> appreciate it.
>
> Thanks,
>
> -Ken
>
>
> On 2/20/09 12:00 PM, "Ken Williams"  
> <ken.williams@thomsonreuters.com> wrote:
>
>> Hi,
>>
>> Has there been any work done on getting confidence scores at  
>> runtime, so
>> that scores of documents can be compared across queries?  I found one
>> reference in the mailing list to some work in 2003, but couldn't  
>> find any
>> follow-up:
>>
>>  http://osdir.com/ml/jakarta.lucene.user/2003-12/msg00093.html
>>
>> Thanks.
>
> -- 
> Ken Williams
> Research Scientist
> The Thomson Reuters Corporation
> Eagan, MN
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 17:07:52 2009
Return-Path: <java-user-return-38709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44399 invoked from network); 26 Feb 2009 17:07:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 17:07:52 -0000
Received: (qmail 78892 invoked by uid 500); 26 Feb 2009 17:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78869 invoked by uid 500); 26 Feb 2009 17:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78857 invoked by uid 99); 26 Feb 2009 17:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 09:07:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.169.31.14] (HELO barclaysglobal.com) (206.169.31.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 17:07:36 +0000
Received: from ([69.52.49.7])
	by mail-rc-01.barclaysglobal.com with ESMTP  id 5502113.68881086;
	Thu, 26 Feb 2009 09:07:52 -0800
Received: from calnte2k731-Outbound.insidelive.net ([69.52.73.81]) by calntapp027.insidelive.net with InterScan Messaging Security Suite; Thu, 26 Feb 2009 09:06:58 -0800
Received: from calnte2k046.insidelive.net ([69.52.111.37]) by calnte2k731-Outbound.insidelive.net with Microsoft SMTPSVC(6.0.3790.3959); Thu, 26 Feb 2009 09:06:57 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
Subject: Simple Java Object Search
Date: Thu, 26 Feb 2009 09:06:57 -0800
Message-ID: <D68D2A3FDCA01044B4819908E328CA6425E9C5@calnte2k046.insidelive.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Simple Java Object Search
Thread-Index: AcmYNKF9up9FBBdUSUCWG/GqPiEiEQ==
From: "Ambati, Ravi BGI SF" <Ravi.Ambati@barclaysglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Feb 2009 17:06:57.0723 (UTC) FILETIME=[A1CFA0B0:01C99834]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
All,

I have a list of java objects and would like to index the contents of
those objects. And would like to update the index whenever list of
objects is changed.

The big question is when users searches for something in index, I would
like to get all the objects that matached that search string.=20

Would somebody help me in this?

Thanks,
Ravi Ambati

=20
--
=20
This message and any attachments are confidential, proprietary, and may =
be privileged. If this message was misdirected, Barclays Global =
Investors (BGI) does not waive any confidentiality or privilege. If you =
are not the intended recipient, please notify us immediately and destroy =
the message without disclosing its contents to anyone. Any distribution, =
use or copying of this e-mail or the information it contains by other =
than an intended recipient is unauthorized. The views and opinions =
expressed in this e-mail message are the author's own and may not =
reflect the views and opinions of BGI, unless the author is authorized =
by BGI to express such views or opinions on its behalf. All email sent =
to or from this address is subject to electronic storage and review by =
BGI. Although BGI operates anti-virus programs, it does not accept =
responsibility for any damage whatsoever caused by viruses being passed.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 17:12:08 2009
Return-Path: <java-user-return-38710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46001 invoked from network); 26 Feb 2009 17:12:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 17:12:05 -0000
Received: (qmail 85802 invoked by uid 500); 26 Feb 2009 17:11:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85475 invoked by uid 500); 26 Feb 2009 17:11:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85464 invoked by uid 99); 26 Feb 2009 17:11:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 09:11:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of garthpatil@gmail.com designates 209.85.162.181 as permitted sender)
Received: from [209.85.162.181] (HELO el-out-1112.google.com) (209.85.162.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 17:11:50 +0000
Received: by el-out-1112.google.com with SMTP id s27so577660ele.14
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 09:11:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=vwIfIt549rt7OFJFSjqrq1F18qs3WPW+uzq7Ry6J0Nc=;
        b=QhbSG7JbXDDcf+W0IGKts16OYToZzdESbKxfT/TLJ9vJEVpWRIuksrUz22WijXj2Zh
         3o29fDZMuVqcq4WLwVBOhxD5UkW2twzlXgw5Nbbf6qCZUlLxEFn25kJ49TljHhMSPtMI
         CdkX/53zF883oYTj41jqKW84Rs6KrcuNy8NVg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=uANW3c0OcCFRfhcC/lZJbd1uHwGMuJuZVgGhtwEKZetx+Y5g//8gMhd8m/7bpjRVGT
         fPERgHWNIUgboQKuOjCVB5ZMNHP1axAr6RTNe/6imhWcr0unESclxpCIgGCpQ8KhifRw
         4KBqKi8sTJnGcowtx7y7+dbY81VujjFMzdC7g=
MIME-Version: 1.0
Received: by 10.151.106.4 with SMTP id i4mr2188730ybm.99.1235668289691; Thu, 
	26 Feb 2009 09:11:29 -0800 (PST)
In-Reply-To: <D68D2A3FDCA01044B4819908E328CA6425E9C5@calnte2k046.insidelive.net>
References: <D68D2A3FDCA01044B4819908E328CA6425E9C5@calnte2k046.insidelive.net>
Date: Thu, 26 Feb 2009 09:11:29 -0800
Message-ID: <82d376ab0902260911neb786feyfe2f0963582a0131@mail.gmail.com>
Subject: Re: Simple Java Object Search
From: Garth Patil <garthpatil@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Sure:
http://lucene.apache.org/java/2_4_0/gettingstarted.html

On Thu, Feb 26, 2009 at 9:06 AM, Ambati, Ravi BGI SF
<Ravi.Ambati@barclaysglobal.com> wrote:
>
> All,
>
> I have a list of java objects and would like to index the contents of
> those objects. And would like to update the index whenever list of
> objects is changed.
>
> The big question is when users searches for something in index, I would
> like to get all the objects that matached that search string.
>
> Would somebody help me in this?
>
> Thanks,
> Ravi Ambati
>
>
> --
>
> This message and any attachments are confidential, proprietary, and may b=
e privileged. If this message was misdirected, Barclays Global Investors (B=
GI) does not waive any confidentiality or privilege. If you are not the int=
ended recipient, please notify us immediately and destroy the message witho=
ut disclosing its contents to anyone. Any distribution, use or copying of t=
his e-mail or the information it contains by other than an intended recipie=
nt is unauthorized. The views and opinions expressed in this e-mail message=
 are the author's own and may not reflect the views and opinions of BGI, un=
less the author is authorized by BGI to express such views or opinions on i=
ts behalf. All email sent to or from this address is subject to electronic =
storage and review by BGI. Although BGI operates anti-virus programs, it do=
es not accept responsibility for any damage whatsoever caused by viruses be=
ing passed.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 17:17:07 2009
Return-Path: <java-user-return-38711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48450 invoked from network); 26 Feb 2009 17:17:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 17:17:07 -0000
Received: (qmail 97068 invoked by uid 500); 26 Feb 2009 17:16:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97043 invoked by uid 500); 26 Feb 2009 17:16:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97032 invoked by uid 99); 26 Feb 2009 17:16:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 09:16:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.169.76.14] (HELO barclaysglobal.com) (206.169.76.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 17:16:48 +0000
Received: from ([69.52.49.7])
	by mail-sf-01.barclaysglobal.com with ESMTP  id 5502112.13243046;
	Thu, 26 Feb 2009 09:15:56 -0800
Received: from calnte2k731-Outbound.insidelive.net ([69.52.73.81]) by calntapp027.insidelive.net with InterScan Messaging Security Suite; Thu, 26 Feb 2009 09:15:55 -0800
Received: from calnte2k046.insidelive.net ([69.52.111.37]) by calnte2k731-Outbound.insidelive.net with Microsoft SMTPSVC(6.0.3790.3959); Thu, 26 Feb 2009 09:15:54 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
Importance: normal
Priority: normal
Subject: RE: Simple Java Object Search
Date: Thu, 26 Feb 2009 09:15:54 -0800
Message-ID: <D68D2A3FDCA01044B4819908E328CA6425E9C6@calnte2k046.insidelive.net>
In-Reply-To: <82d376ab0902260911neb786feyfe2f0963582a0131@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Simple Java Object Search
Thread-Index: AcmYNWeTEqtgLJ4+SAKWkM2/RiuFewAAC3XQ
References: <D68D2A3FDCA01044B4819908E328CA6425E9C5@calnte2k046.insidelive.net> <82d376ab0902260911neb786feyfe2f0963582a0131@mail.gmail.com>
From: "Ambati, Ravi BGI SF" <Ravi.Ambati@barclaysglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Feb 2009 17:15:54.0916 (UTC) FILETIME=[E200C640:01C99835]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
Hi,

Getting started shows how to index files. It does not have an example of
how to index how to index a list of objects. I was able to create an
index for the list of objects.

How do I retrieve a list of objects that match the query ?=20


		// Create Index
            Directory directory =3D new RAMDirectory();
            Analyzer analyzer =3D new StandardAnalyzer();
            IndexWriter iwriter =3D null;
            try {
                iwriter =3D new IndexWriter(directory, analyzer, true);

                iwriter.setMaxFieldLength(250000);

                EventList<TestObject> list =3D =
getAllBaskets(basketCache);
                for (TestObject obj : list) {
                    Document document =3D new Document();
                    document.add(new Field("basketName",
basket.getName(), Field.Store.YES, Field.Index.TOKENIZED));
                    document
                            .add(new Field("borrower",
basket.getBorrowerCode(), Field.Store.YES, Field.Index.TOKENIZED));
                    document.add(new Field("description",
basket.getDescription(), Field.Store.YES,
                            Field.Index.TOKENIZED));
                    document.add(new Field("id", new
Long(basket.getId()).toString(), Field.Store.YES,
                            Field.Index.TOKENIZED));
                    iwriter.addDocument(document);
                }
                iwriter.optimize();
                iwriter.close();

                // Now search the index:
                IndexSearcher isearcher =3D new =
IndexSearcher(directory);
                // Parse a simple query that searches for "text":
                QueryParser parser =3D new QueryParser("basketName",
analyzer);
                Query query =3D parser.parse(searchBox.getText());
                Hits hits =3D isearcher.search(query);
                // Iterate through the results:
                List<Long> basketIds =3D new ArrayList<Long>();
                for (int i =3D 0; i < hits.length(); i++) {
                    Document hitDoc =3D hits.doc(i);
                }


                isearcher.close();
                directory.close();=20

-----Original Message-----
From: Garth Patil [mailto:garthpatil@gmail.com]=20
Sent: Thursday, February 26, 2009 9:11 AM
To: java-user@lucene.apache.org
Subject: Re: Simple Java Object Search

Sure:
http://lucene.apache.org/java/2_4_0/gettingstarted.html

On Thu, Feb 26, 2009 at 9:06 AM, Ambati, Ravi BGI SF
<Ravi.Ambati@barclaysglobal.com> wrote:
>
> All,
>
> I have a list of java objects and would like to index the contents of=20
> those objects. And would like to update the index whenever list of=20
> objects is changed.
>
> The big question is when users searches for something in index, I=20
> would like to get all the objects that matached that search string.
>
> Would somebody help me in this?
>
> Thanks,
> Ravi Ambati
>
>
> --
>
> This message and any attachments are confidential, proprietary, and
may be privileged. If this message was misdirected, Barclays Global
Investors (BGI) does not waive any confidentiality or privilege. If you
are not the intended recipient, please notify us immediately and destroy
the message without disclosing its contents to anyone. Any distribution,
use or copying of this e-mail or the information it contains by other
than an intended recipient is unauthorized. The views and opinions
expressed in this e-mail message are the author's own and may not
reflect the views and opinions of BGI, unless the author is authorized
by BGI to express such views or opinions on its behalf. All email sent
to or from this address is subject to electronic storage and review by
BGI. Although BGI operates anti-virus programs, it does not accept
responsibility for any damage whatsoever caused by viruses being passed.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


=20
--
=20
This message and any attachments are confidential, proprietary, and may =
be privileged. If this message was misdirected, Barclays Global =
Investors (BGI) does not waive any confidentiality or privilege. If you =
are not the intended recipient, please notify us immediately and destroy =
the message without disclosing its contents to anyone. Any distribution, =
use or copying of this e-mail or the information it contains by other =
than an intended recipient is unauthorized. The views and opinions =
expressed in this e-mail message are the author's own and may not =
reflect the views and opinions of BGI, unless the author is authorized =
by BGI to express such views or opinions on its behalf. All email sent =
to or from this address is subject to electronic storage and review by =
BGI. Although BGI operates anti-virus programs, it does not accept =
responsibility for any damage whatsoever caused by viruses being passed.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 18:45:50 2009
Return-Path: <java-user-return-38712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15966 invoked from network); 26 Feb 2009 18:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 18:45:50 -0000
Received: (qmail 63301 invoked by uid 500); 26 Feb 2009 18:45:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63277 invoked by uid 500); 26 Feb 2009 18:45:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63266 invoked by uid 99); 26 Feb 2009 18:45:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 10:45:42 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 18:45:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LclEQ-0001K6-UW
	for java-user@lucene.apache.org; Thu, 26 Feb 2009 10:45:14 -0800
Message-ID: <22230841.post@talk.nabble.com>
Date: Thu, 26 Feb 2009 10:45:14 -0800 (PST)
From: Chetan Shah <chetankrshah@gmail.com>
To: java-user@lucene.apache.org
Subject: TermsFilter Usage Question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: chetankrshah@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Why is this code not returning any results?

            //Create the query and search
            QueryParser queryParser = new QueryParser("contents", new
StandardAnalyzer());
            Query query = queryParser.parse(searchCriteria);
                                               
            Term aTerm = new Term("categoryType");
            TermsFilter categoryFilter = new TermsFilter();      
            aTerm = aTerm.createTerm("xyz");
            categoryFilter.addTerm(aTerm);
                         
            TopDocs topDocs = indexSearcher.search(query, categoryFilter,
Constants.MAX_HITS);
            /** above line works if I null the filter **/

            ScoreDoc scoreDoc[] = topDocs.scoreDocs;
            int numDocs = scoreDoc.length;
            if (numDocs > 0) results = scoreDoc;   


If I do this for the line /**works...*// I get valid results.
TopDocs topDocs = indexSearcher.search(query, null, Constants.MAX_HITS);

The field "categoryType" is stored in the index. and I have confirmed via
Luke that "xyz" value is stored in the "categoryType" field.

Would highly appreciate if you can let me know what am I doing wrong here.
-- 
View this message in context: http://www.nabble.com/TermsFilter-Usage-Question-tp22230841p22230841.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 18:58:20 2009
Return-Path: <java-user-return-38713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20317 invoked from network); 26 Feb 2009 18:58:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 18:58:20 -0000
Received: (qmail 84114 invoked by uid 500); 26 Feb 2009 18:58:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84083 invoked by uid 500); 26 Feb 2009 18:58:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84072 invoked by uid 99); 26 Feb 2009 18:58:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 10:58:12 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 18:58:04 +0000
Received: by nf-out-0910.google.com with SMTP id c7so233697nfi.15
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 10:57:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=MIYM+X4qG3kgdmR2B8KCA9r81nncyrNmFobatc2uH8c=;
        b=Wr587bgjiLnH4lrAYVyxe3fm3qnGfFes08L7fmQGMLQYnF7ZGZ336iMT7KzpTUHNhT
         eSQr1KYW4jltu8CFYX/SAdYykqEPZlXx2LyxCcTs8HDjQ0IX1dstxfJVUCMJODLMklWH
         FBoLzTTNql+0BY9wCKGp6H/iPQAIfQzrO+jUY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tkk8feZTBRylFEAAf+5lOJjWYS1LXjCi4kgropJQKdnY7jHMQ8mKnmOLjFzl1CEbwM
         4M3mGvAf03Hg9NXsRz/zZfJjN+aOyZI3Ck97P1rcCyvVzSGU4KPF5aoT70Bt8zF0bsi2
         kMUyTltKeWlWtvh0/AGzgvxMo7rRcFBwvw8lw=
MIME-Version: 1.0
Received: by 10.220.45.131 with SMTP id e3mr825313vcf.89.1235674662734; Thu, 
	26 Feb 2009 10:57:42 -0800 (PST)
In-Reply-To: <D68D2A3FDCA01044B4819908E328CA6425E9C6@calnte2k046.insidelive.net>
References: <D68D2A3FDCA01044B4819908E328CA6425E9C5@calnte2k046.insidelive.net>
	 <82d376ab0902260911neb786feyfe2f0963582a0131@mail.gmail.com>
	 <D68D2A3FDCA01044B4819908E328CA6425E9C6@calnte2k046.insidelive.net>
Date: Thu, 26 Feb 2009 13:57:42 -0500
Message-ID: <359a92830902261057l6688230w4af5fb3b192aee99@mail.gmail.com>
Subject: Re: Simple Java Object Search
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64705265489690463d6edc2
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64705265489690463d6edc2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

This looks pretty good, the search is always looking in
your "basketName" field unless the searchBox.getText() returns
something like "field:value".

What behavior are you seeing (or not seeing that you expect)?

You might try creating your index as an FSDirectory
then getting a copy of Luke to examine it and run some
test queries through, that often helps a lot. Query
lucene luke

Best
Erick

On Thu, Feb 26, 2009 at 12:15 PM, Ambati, Ravi BGI SF <
Ravi.Ambati@barclaysglobal.com> wrote:

>
> Hi,
>
> Getting started shows how to index files. It does not have an example of
> how to index how to index a list of objects. I was able to create an
> index for the list of objects.
>
> How do I retrieve a list of objects that match the query ?
>
>
>                // Create Index
>            Directory directory = new RAMDirectory();
>            Analyzer analyzer = new StandardAnalyzer();
>            IndexWriter iwriter = null;
>            try {
>                iwriter = new IndexWriter(directory, analyzer, true);
>
>                iwriter.setMaxFieldLength(250000);
>
>                EventList<TestObject> list = getAllBaskets(basketCache);
>                for (TestObject obj : list) {
>                    Document document = new Document();
>                    document.add(new Field("basketName",
> basket.getName(), Field.Store.YES, Field.Index.TOKENIZED));
>                    document
>                            .add(new Field("borrower",
> basket.getBorrowerCode(), Field.Store.YES, Field.Index.TOKENIZED));
>                    document.add(new Field("description",
> basket.getDescription(), Field.Store.YES,
>                            Field.Index.TOKENIZED));
>                    document.add(new Field("id", new
> Long(basket.getId()).toString(), Field.Store.YES,
>                            Field.Index.TOKENIZED));
>                    iwriter.addDocument(document);
>                }
>                iwriter.optimize();
>                iwriter.close();
>
>                // Now search the index:
>                IndexSearcher isearcher = new IndexSearcher(directory);
>                // Parse a simple query that searches for "text":
>                QueryParser parser = new QueryParser("basketName",
> analyzer);
>                Query query = parser.parse(searchBox.getText());
>                Hits hits = isearcher.search(query);
>                // Iterate through the results:
>                List<Long> basketIds = new ArrayList<Long>();
>                for (int i = 0; i < hits.length(); i++) {
>                    Document hitDoc = hits.doc(i);
>                }
>
>
>                isearcher.close();
>                directory.close();
>
> -----Original Message-----
> From: Garth Patil [mailto:garthpatil@gmail.com]
> Sent: Thursday, February 26, 2009 9:11 AM
> To: java-user@lucene.apache.org
> Subject: Re: Simple Java Object Search
>
> Sure:
> http://lucene.apache.org/java/2_4_0/gettingstarted.html
>
> On Thu, Feb 26, 2009 at 9:06 AM, Ambati, Ravi BGI SF
> <Ravi.Ambati@barclaysglobal.com> wrote:
> >
> > All,
> >
> > I have a list of java objects and would like to index the contents of
> > those objects. And would like to update the index whenever list of
> > objects is changed.
> >
> > The big question is when users searches for something in index, I
> > would like to get all the objects that matached that search string.
> >
> > Would somebody help me in this?
> >
> > Thanks,
> > Ravi Ambati
> >
> >
> > --
> >
> > This message and any attachments are confidential, proprietary, and
> may be privileged. If this message was misdirected, Barclays Global
> Investors (BGI) does not waive any confidentiality or privilege. If you
> are not the intended recipient, please notify us immediately and destroy
> the message without disclosing its contents to anyone. Any distribution,
> use or copying of this e-mail or the information it contains by other
> than an intended recipient is unauthorized. The views and opinions
> expressed in this e-mail message are the author's own and may not
> reflect the views and opinions of BGI, unless the author is authorized
> by BGI to express such views or opinions on its behalf. All email sent
> to or from this address is subject to electronic storage and review by
> BGI. Although BGI operates anti-virus programs, it does not accept
> responsibility for any damage whatsoever caused by viruses being passed.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> --
>
> This message and any attachments are confidential, proprietary, and may be
> privileged. If this message was misdirected, Barclays Global Investors (BGI)
> does not waive any confidentiality or privilege. If you are not the intended
> recipient, please notify us immediately and destroy the message without
> disclosing its contents to anyone. Any distribution, use or copying of this
> e-mail or the information it contains by other than an intended recipient is
> unauthorized. The views and opinions expressed in this e-mail message are
> the author's own and may not reflect the views and opinions of BGI, unless
> the author is authorized by BGI to express such views or opinions on its
> behalf. All email sent to or from this address is subject to electronic
> storage and review by BGI. Although BGI operates anti-virus programs, it
> does not accept responsibility for any damage whatsoever caused by viruses
> being passed.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64705265489690463d6edc2--

From java-user-return-38714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 19:12:36 2009
Return-Path: <java-user-return-38714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25188 invoked from network); 26 Feb 2009 19:12:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 19:12:36 -0000
Received: (qmail 11567 invoked by uid 500); 26 Feb 2009 19:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11317 invoked by uid 500); 26 Feb 2009 19:12:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11305 invoked by uid 99); 26 Feb 2009 19:12:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 11:12:28 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.157 as permitted sender)
Received: from [209.85.219.157] (HELO mail-ew0-f157.google.com) (209.85.219.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 19:12:21 +0000
Received: by ewy1 with SMTP id 1so932418ewy.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 11:11:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=WLbYbE1O94CSE9Z9y1LJMKhKyKK12l42rbnsuoxQFDg=;
        b=pNMB5f6h+nCcweysfBo/PlSptAA+SKa1Y4/+SrfIUxjgnL6vByLEmKvaYaX3SKGFGV
         S693z2yOl2mavLHmufyBLXARYZj5VVr+siOtrZlc+KrR5WdHAwi2GCeMJVButGnLqCe9
         ybfwrTt5cDz44u067IHKun8GK15vUMBZVVP5Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jrXoCCzu5Dghd7nH2KWY+z2ryBFcS4xzLw8Kd1vk7o31lHdgXoXkIc96ZEw0uHm0mC
         AVX05I7Q+1EXLRWqTPvrcLpPxKle6Uh9zxCqIplzF+urWz3LWDJJtRqVBbONIiv+OHNu
         ju0Jdai0xje7Up3bzW15Tt0hWNWiLedKfkcVI=
MIME-Version: 1.0
Received: by 10.220.98.202 with SMTP id r10mr842051vcn.67.1235675519044; Thu, 
	26 Feb 2009 11:11:59 -0800 (PST)
In-Reply-To: <22230841.post@talk.nabble.com>
References: <22230841.post@talk.nabble.com>
Date: Thu, 26 Feb 2009 14:11:58 -0500
Message-ID: <359a92830902261111n27d0aae4q6c38048e9351ce51@mail.gmail.com>
Subject: Re: TermsFilter Usage Question
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e645fad05ecd680463d7204b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e645fad05ecd680463d7204b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Probably a silly question, but are you *also* sure that you
have documents with catetoryType:xyz AND the
values you are asking for in searchCriteria? I'd guess
that you could also check this out in Luke with a simple
+contests:blah +categoryType:xyz as a quick
sanity check.

The other thing it'd be interesting to do is prove that categoryFilter
had some bits turned on in its BitSet (or DocIdSet).

Best
Erick

On Thu, Feb 26, 2009 at 1:45 PM, Chetan Shah <chetankrshah@gmail.com> wrote:

>
> Why is this code not returning any results?
>
>            //Create the query and search
>            QueryParser queryParser = new QueryParser("contents", new
> StandardAnalyzer());
>            Query query = queryParser.parse(searchCriteria);
>
>            Term aTerm = new Term("categoryType");
>            TermsFilter categoryFilter = new TermsFilter();
>            aTerm = aTerm.createTerm("xyz");
>            categoryFilter.addTerm(aTerm);
>
>            TopDocs topDocs = indexSearcher.search(query, categoryFilter,
> Constants.MAX_HITS);
>            /** above line works if I null the filter **/
>
>            ScoreDoc scoreDoc[] = topDocs.scoreDocs;
>            int numDocs = scoreDoc.length;
>            if (numDocs > 0) results = scoreDoc;
>
>
> If I do this for the line /**works...*// I get valid results.
> TopDocs topDocs = indexSearcher.search(query, null, Constants.MAX_HITS);
>
> The field "categoryType" is stored in the index. and I have confirmed via
> Luke that "xyz" value is stored in the "categoryType" field.
>
> Would highly appreciate if you can let me know what am I doing wrong here.
> --
> View this message in context:
> http://www.nabble.com/TermsFilter-Usage-Question-tp22230841p22230841.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e645fad05ecd680463d7204b--

From java-user-return-38715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 19:19:33 2009
Return-Path: <java-user-return-38715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27893 invoked from network); 26 Feb 2009 19:19:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 19:19:32 -0000
Received: (qmail 25080 invoked by uid 500); 26 Feb 2009 19:19:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25055 invoked by uid 500); 26 Feb 2009 19:19:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25034 invoked by uid 99); 26 Feb 2009 19:19:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 11:19:25 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 19:19:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Lcll1-000382-Gy
	for java-user@lucene.apache.org; Thu, 26 Feb 2009 11:18:55 -0800
Message-ID: <22231524.post@talk.nabble.com>
Date: Thu, 26 Feb 2009 11:18:55 -0800 (PST)
From: Chetan Shah <chetankrshah@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermsFilter Usage Question
In-Reply-To: <359a92830902261111n27d0aae4q6c38048e9351ce51@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: chetankrshah@gmail.com
References: <22230841.post@talk.nabble.com> <359a92830902261111n27d0aae4q6c38048e9351ce51@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yep. I searchcriteria and the category type value exists for a given
document. 
-- 
View this message in context: http://www.nabble.com/TermsFilter-Usage-Question-tp22230841p22231524.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 19:21:01 2009
Return-Path: <java-user-return-38716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28142 invoked from network); 26 Feb 2009 19:21:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 19:21:01 -0000
Received: (qmail 29325 invoked by uid 500); 26 Feb 2009 19:20:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29303 invoked by uid 500); 26 Feb 2009 19:20:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29292 invoked by uid 99); 26 Feb 2009 19:20:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 11:20:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 19:20:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LclmT-0003E8-5o
	for java-user@lucene.apache.org; Thu, 26 Feb 2009 11:20:26 -0800
Message-ID: <22231549.post@talk.nabble.com>
Date: Thu, 26 Feb 2009 11:20:25 -0800 (PST)
From: Chetan Shah <chetankrshah@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermsFilter Usage Question
In-Reply-To: <22230841.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: chetankrshah@gmail.com
References: <22230841.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Shooot........... The category type was stored by the not indexed! :teeth: 
The moment I flipped the flag of categoryType field to analyzed. I was able
to pull the results.
-- 
View this message in context: http://www.nabble.com/TermsFilter-Usage-Question-tp22230841p22231549.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 20:21:59 2009
Return-Path: <java-user-return-38717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54270 invoked from network); 26 Feb 2009 20:21:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 20:21:59 -0000
Received: (qmail 9969 invoked by uid 500); 26 Feb 2009 20:21:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9944 invoked by uid 500); 26 Feb 2009 20:21:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9933 invoked by uid 99); 26 Feb 2009 20:21:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 12:21:50 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 20:21:38 +0000
Received: by bwz11 with SMTP id 11so941755bwz.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 12:21:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=SJKkQm/zvhRDSbA3FbJ+ddvChJwa88rYtDCcezkEdYk=;
        b=RuS/zUxZcAOBYSu5UUDApQgWXrnDxaRLxaxRERHnK6HeqbK5n0cY9VM2JMm1HgJJJW
         RGUVE4qaGrtKyPWCmquVGBXSjSXX/LRVAM3RiHtPmFm3KUayNHt0sDMCp47cDQ7xUnG+
         Q3kMhuOUOKXpSbPfzlePULNioCB724X3zIOaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MKtgJIoueyxA4QNcz2i/J5ABElC9hMKmfyAo8BOl4EXfxrW8N53neHzBwH2AkcpFQt
         5Ns2gOSqQX4oQMtT1A3zRcUU1Eg7NEFK++WB6Zg6Gq4ygMYC4bvDYrxXR7TrbuKd+F1W
         NP+ZDFmySWRhH/jLtBDaHLaCXl+hxcXsQ33AA=
MIME-Version: 1.0
Received: by 10.181.193.15 with SMTP id v15mr569931bkp.168.1235679677637; Thu, 
	26 Feb 2009 12:21:17 -0800 (PST)
In-Reply-To: <6f4104d80902260535o1089df30kaca56cd1c7c030b@mail.gmail.com>
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
	 <126142c0902220811i112ca72fh8ea999249d93962@mail.gmail.com>
	 <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
	 <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com>
	 <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com>
	 <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com>
	 <759B2A6C-48A3-4EF9-876C-8DDDCFC60AB3@mikemccandless.com>
	 <6f4104d80902260313w1836ca10kb50bd1131029c694@mail.gmail.com>
	 <CB86E6E4-41B8-4A70-96BA-F4FA7E944E7B@mikemccandless.com>
	 <6f4104d80902260535o1089df30kaca56cd1c7c030b@mail.gmail.com>
Date: Thu, 26 Feb 2009 20:21:17 +0000
Message-ID: <6f4104d80902261221yb027e0obeb2cfaf6c2458e3@mail.gmail.com>
Subject: Re: Faceted Search using Lucene
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d9a13b3de5c40463d81869
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d9a13b3de5c40463d81869
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi
I have modified my search code.  Here is the following:
[code]

 public Summary[] search(SearchRequest searchRequest)
throwsSearchExecutionException {

String searchTerm = searchRequest.getSearchTerm();

if (StringUtils.isBlank(searchTerm)) {

throw new SearchExecutionException("Search string cannot be empty. There
will be too many results to process.");

}

List<Summary> summaryList = new ArrayList<Summary>();

StopWatch stopWatch = new StopWatch("searchStopWatch");

stopWatch.start();

MultiSearcher multiSearcher = null;

List<IndexSearcher> indexSearchers = new ArrayList<IndexSearcher>();

boolean refreshSearchers = false;

try {

LOGGER.debug("Ensuring all index readers are up to date...");

for (IndexSearcher indexSearcher: searchers) {

 IndexReader reader = indexSearcher.getIndexReader();

 reader.incRef();

 Directory directory = reader.directory();



 long currentVersion = reader.getVersion();

 if (IndexReader.getCurrentVersion(directory) != currentVersion) {

 IndexReader newReader = reader.reopen();

 if (newReader != reader) {

 reader.decRef();

 refreshSearchers = true;

 }

 reader = newReader;

 }

 IndexSearcher indexSearch = new IndexSearcher(reader);

 indexSearchers.add(indexSearch);

}

if (refreshSearchers) {

searchers.clear();

searchers = new ArrayList<IndexSearcher>(indexSearchers);

}

LOGGER.debug("All Index Searchers are up to date. No of index searchers '" +
indexSearchers.size() +"'");

 multiSearcher = new MultiSearcher(searchers.toArray(new IndexSearcher[]
{}));

PerFieldAnalyzerWrapper analyzerWrapper = new PerFieldAnalyzerWrapper(
analyzer);

analyzerWrapper.addAnalyzer(FieldNameEnum.TYPE.getDescription(),
newKeywordAnalyzer());

QueryParser queryParser =
newMultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
analyzerWrapper);

 Query query = queryParser.parse(searchTerm);

LOGGER.debug("Search Term '" + searchTerm +"' ----> Lucene Query '" +
query.toString() +"'");

 Sort sort = null;

sort = applySortIfApplicable(searchRequest);

 Filter[] filters =applyFiltersIfApplicable(searchRequest);

 ChainedFilter chainedFilter = null;

if (filters != null) {

chainedFilter = new ChainedFilter(filters, ChainedFilter.OR);

}

TopDocs topDocs = multiSearcher.search(query,chainedFilter ,100,sort);

ScoreDoc[] scoreDocs = topDocs.scoreDocs;

LOGGER.debug("total number of hits for [" + query.toString() + " ] = "+topDocs.
totalHits);

 for (ScoreDoc scoreDoc : scoreDocs) {

final Document doc = multiSearcher.doc(scoreDoc.doc);

float score = scoreDoc.score;

final BaseDocument baseDocument = new BaseDocument(doc, score);

Summary documentSummary = new DocumentSummaryImpl(baseDocument);

summaryList.add(documentSummary);

}

multiSearcher.close();

} catch (Exception e) {

throw new IllegalStateException(e);

}

stopWatch.stop();

 LOGGER.debug("total time taken for document seach: " +
stopWatch.getTotalTimeMillis() + " ms");

return summaryList.toArray(new Summary[] {});

}

 [/code]

Just some background:

There is a list of indexsearchers that are injected via Spring.  These
searchers are configured again by Spring.  As you can see the multisearcher
is a local variable.  I then have a variable that checks if a indexreader is
not up to date.  When this is set to true the indexsearchers are refreshed.

I would be grateful on your thoughts.


On Thu, Feb 26, 2009 at 1:35 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
> Thanks for your help.  I will modify my facet search and my other code to
> use the recommendations.   Would it be ok to get a review of the completed
> code?  I just want to make sure that I'm not doing anything that may cause
> any problems (threading, memory).
>
> Cheers
>
>
> On Thu, Feb 26, 2009 at 1:10 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> See below -- this is an excerpt from the upcoming Lucene in Action
>> revision (chapter 10).
>>
>> It's a simple class.  Use it like this for searching:
>>
>>  IndexSearcher searcher = manager.get();
>>  try {
>>    searcher.search(...).
>>    ...render results...
>>  } finally {
>>    manager.release(searcher);
>>    searcher = null;
>>  }
>>
>> When you want to reopen (application dependent), call maybeReopen.
>> Subclass and define the warm() method if needed.
>>
>> NOTE: this hasn't yet been heavily tested (I just quickly revised it to
>> use
>> incRef/decRef).
>>
>> Mike
>>
>> import java.io.IOException;
>> import java.util.HashMap;
>>
>> import org.apache.lucene.search.IndexSearcher;
>> import org.apache.lucene.index.IndexReader;
>> import org.apache.lucene.store.Directory;
>>
>> /** Utility class to get/refresh searchers when you are
>>  *  using multiple threads. */
>>
>> public class SearcherManager {
>>
>>  private IndexSearcher currentSearcher;                         //A
>>  private Directory dir;
>>
>>  public SearcherManager(Directory dir) throws IOException {
>>    this.dir = dir;
>>    currentSearcher = new IndexSearcher(IndexReader.open(dir));  //B
>>  }
>>
>>  public void warm(IndexSearcher searcher) {}                    //C
>>
>>  public void maybeReopen() throws IOException {                 //D
>>    long currentVersion = currentSearcher.getIndexReader().getVersion();
>>    if (IndexReader.getCurrentVersion(dir) != currentVersion) {
>>      IndexReader newReader = currentSearcher.getIndexReader().reopen();
>>      assert newReader != currentSearcher.getIndexReader();
>>      IndexSearcher newSearcher = new IndexSearcher(newReader);
>>      warm(newSearcher);
>>      swapSearcher(newSearcher);
>>    }
>>  }
>>
>>  public synchronized IndexSearcher get() {                      //E
>>    currentSearcher.getIndexReader().incRef();
>>    return currentSearcher;
>>  }
>>
>>  public synchronized void release(IndexSearcher searcher)       //F
>>    throws IOException {
>>    searcher.getIndexReader().decRef();
>>  }
>>
>>  private synchronized void swapSearcher(IndexSearcher newSearcher) //G
>>      throws IOException {
>>    release(currentSearcher);
>>    currentSearcher = newSearcher;
>>  }
>> }
>>
>> /*
>> #A Current IndexSearcher
>> #B Create initial searcher
>> #C Implement in subclass to warm new searcher
>> #D Call this to reopen searcher if index changed
>> #E Returns current searcher
>> #F Release searcher
>> #G Swaps currentSearcher to new searcher
>> */
>>
>> Mike
>>
>>
>> Amin Mohammed-Coleman wrote:
>>
>>  Hi
>>>
>>> Thanks for your reply.  Without sound completely ...silly...how do i go
>>> abouts using the methods you mentioned...
>>>
>>> Cheers
>>> Amin
>>>
>>> On Thu, Feb 26, 2009 at 10:24 AM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>
>>>> Actually, it's best to use IndexReader.incRef/decRef to track the
>>>> IndexReader.
>>>>
>>>> You should not rely on GC to close your IndexReader since this can
>>>> easily
>>>> tie up resources (eg open file descriptors) for too long.
>>>>
>>>> Mike
>>>>
>>>>
>>>> Michael Stoppelman wrote:
>>>>
>>>> If another thread is executing a query with the handle to one of
>>>>
>>>>> readers[i]
>>>>> you're going to kill it since the IndexReader is now closed.
>>>>> Just don't call the IndexReader#close() method. If nothing is pointing
>>>>> at
>>>>> the readers they should be garbage collected. Also, you might
>>>>> want to warm up your new IndexSearcher before you switch to it, meaning
>>>>> run
>>>>> a few queries on it before you swap the old one out.
>>>>>
>>>>> M
>>>>>
>>>>>
>>>>>
>>>>> On Tue, Feb 24, 2009 at 12:48 PM, Amin Mohammed-Coleman <
>>>>> aminmc@gmail.com
>>>>>
>>>>>> wrote:
>>>>>>
>>>>>
>>>>> The reason for the indexreader.reopen is because I have a webapp which
>>>>>
>>>>>> enables users to upload files and then search for the documents.  If I
>>>>>> don't
>>>>>> reopen i'm concerned that the facet hit counter won't be updated.
>>>>>>
>>>>>> On Tue, Feb 24, 2009 at 8:32 PM, Amin Mohammed-Coleman <
>>>>>> aminmc@gmail.com
>>>>>>
>>>>>>  wrote:
>>>>>>>
>>>>>>>
>>>>>> Hi
>>>>>>
>>>>>>> I have been able to get the code working for my scenario, however I
>>>>>>> have
>>>>>>>
>>>>>>>  a
>>>>>>
>>>>>>  question and I was wondering if I could get some help.  I have a list
>>>>>>> of
>>>>>>> IndexSearchers which are used in a MultiSearcher class.  I use the
>>>>>>> indexsearchers to get each indexreader and put them into a
>>>>>>>
>>>>>>>  MultiIndexReader.
>>>>>>
>>>>>>
>>>>>>> IndexReader[] readers = new IndexReader[searchables.length];
>>>>>>>
>>>>>>> for (int i =0 ; i < searchables.length;i++) {
>>>>>>>
>>>>>>> IndexSearcher indexSearcher = (IndexSearcher)searchables[i];
>>>>>>>
>>>>>>> readers[i] = indexSearcher.getIndexReader();
>>>>>>>
>>>>>>>  IndexReader newReader = readers[i].reopen();
>>>>>>>
>>>>>>> if (newReader != readers[i]) {
>>>>>>>
>>>>>>> readers[i].close();
>>>>>>>
>>>>>>> }
>>>>>>>
>>>>>>> readers[i] = newReader;
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> }
>>>>>>>
>>>>>>> multiReader = new MultiReader(readers);
>>>>>>>
>>>>>>> OpenBitSetFacetHitCounter facetHitCounter =
>>>>>>>
>>>>>>>  newOpenBitSetFacetHitCounter();
>>>>>>
>>>>>>
>>>>>>> IndexSearcher indexSearcher = new IndexSearcher(multiReader);
>>>>>>>
>>>>>>>
>>>>>>> I then use the indexseacher to do the facet stuff.  I end the code
>>>>>>> with
>>>>>>> closing the multireader.  This is causing problems in another method
>>>>>>>
>>>>>>>  where I
>>>>>>
>>>>>>  do some other search as the indexreaders are closed.  Is it ok to not
>>>>>>>
>>>>>>>  close
>>>>>>
>>>>>>  the multiindexreader or should I do some additional checks in the
>>>>>>> other
>>>>>>> method to see if the indexreader is closed?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Cheers
>>>>>>>
>>>>>>>
>>>>>>> P.S. Hope that made sense...!
>>>>>>>
>>>>>>>
>>>>>>> On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <
>>>>>>> aminmc@gmail.com
>>>>>>> wrote:
>>>>>>>
>>>>>>> Hi
>>>>>>>
>>>>>>>>
>>>>>>>> Thanks just what I needed!
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>> Amin
>>>>>>>>
>>>>>>>>
>>>>>>>> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com>
>>>>>>>>
>>>>>>>>  wrote:
>>>>>>>
>>>>>>
>>>>>>
>>>>>>>  Hi Amin:
>>>>>>>>
>>>>>>>>  Please take a look a this blog post:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
>>>>>>
>>>>>>  Best regards, Marcelo.
>>>>>>>
>>>>>>>>
>>>>>>>>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <
>>>>>>>>>
>>>>>>>>>  aminmc@gmail.com>
>>>>>>>>
>>>>>>>
>>>>>>  wrote:
>>>>>>>
>>>>>>>>
>>>>>>>>> Hi
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Sorry to re send this email but I was wondering if I could get
>>>>>>>>>> some
>>>>>>>>>> advice
>>>>>>>>>> on this.
>>>>>>>>>>
>>>>>>>>>> Cheers
>>>>>>>>>>
>>>>>>>>>> Amin
>>>>>>>>>>
>>>>>>>>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>>>>>>> >
>>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>> Hi
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>> I am looking at building a faceted search using Lucene.  I know
>>>>>>>>>>> that
>>>>>>>>>>> Solr
>>>>>>>>>>> comes with this built in, however I would like to try this by
>>>>>>>>>>> myself
>>>>>>>>>>> (something to add to my CV!).  I have been looking around and I
>>>>>>>>>>> found
>>>>>>>>>>> that
>>>>>>>>>>> you can use the IndexReader and use TermVectors.  This looks ok
>>>>>>>>>>> but
>>>>>>>>>>>
>>>>>>>>>>>  I'm
>>>>>>>>>>
>>>>>>>>>
>>>>>>  not
>>>>>>>
>>>>>>>>  sure how to filter the results so that a particular user can only
>>>>>>>>>>> see
>>>>>>>>>>>
>>>>>>>>>>>  a
>>>>>>>>>>
>>>>>>>>>
>>>>>>  subset of results.  The next option I was looking at was something
>>>>>>>
>>>>>>>>
>>>>>>>>>>>  like
>>>>>>>>>>
>>>>>>>>>
>>>>>>
>>>>>>>  Term term1 = new Term("brand", "ford");
>>>>>>>>>>> Term term2 = new Term("brand", "vw");
>>>>>>>>>>> Term[] termsArray = new Term[] { term1, term2 };un
>>>>>>>>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>>>>>>>>>>
>>>>>>>>>>> The only problem here is that I have to provide the brand type
>>>>>>>>>>> each
>>>>>>>>>>> time a
>>>>>>>>>>> new brand is created.  Again I'm not sure how I can filter the
>>>>>>>>>>>
>>>>>>>>>>>  results
>>>>>>>>>>
>>>>>>>>>
>>>>>>  here.
>>>>>>>
>>>>>>>>  It may be that I'm using the wrong api methods to do this.
>>>>>>>>>>>
>>>>>>>>>>> I would be grateful if I could get some advice on this.
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Cheers
>>>>>>>>>>> Amin
>>>>>>>>>>>
>>>>>>>>>>> P.S.  I am basically trying to do something that displays the
>>>>>>>>>>>
>>>>>>>>>>>  following
>>>>>>>>>>
>>>>>>>>>
>>>>>>
>>>>>>>  Personal Contact (23) Business Contact (45) and so on..
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>> --
>>>>>>>>> Marcelo F. Ochoa
>>>>>>>>> http://marceloochoa.blogspot.com/
>>>>>>>>> http://marcelo.ochoa.googlepages.com/home
>>>>>>>>> ______________
>>>>>>>>> Want to integrate Lucene and Oracle?
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>>>>>>
>>>>>>  Is Oracle 11g REST ready?
>>>>>>>
>>>>>>>>
>>>>>>>>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>
>>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--0016e6d9a13b3de5c40463d81869--

From java-user-return-38718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 20:24:15 2009
Return-Path: <java-user-return-38718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54981 invoked from network); 26 Feb 2009 20:24:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 20:24:15 -0000
Received: (qmail 12406 invoked by uid 500); 26 Feb 2009 20:24:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12378 invoked by uid 500); 26 Feb 2009 20:24:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12367 invoked by uid 99); 26 Feb 2009 20:24:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 12:24:07 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 20:23:58 +0000
Received: by bwz11 with SMTP id 11so942939bwz.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 12:23:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zH3oDup2N9kwakJBrvfANsv5meHLLWI/ZSVfSSzlcog=;
        b=GRbLWCvMxg97pZeRMGZb0XqV3szc/PWB2IAHva7UwmzF81IOxT9jRZq7RMCPtGI5tG
         H8Tov4dnW8IR996dEFKUafbH+cAPYn/35Mf4vXnm+RpIUaQxBL2cMilmBt9bOFM1S2Rx
         Lm3NOZCUQfEfCoCcFUewaLk+0w/h857IKFnxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XQaDnNyPUF33GK6AtZlC85YAotz+sGvsfS50RP8wp0qlz1RTjmq+kdIppblEMAOwDK
         O9+RhCvox0pU3aHAruEvjis5I0jb2w5sj2Umxh/RVRUCOlmPybK86XVeF3MzsdifW3rr
         nbm0IVsYkpvo8/z5cAR7e8JwysSRk9FLDPW80=
MIME-Version: 1.0
Received: by 10.180.247.17 with SMTP id u17mr289221bkh.59.1235679816002; Thu, 
	26 Feb 2009 12:23:36 -0800 (PST)
In-Reply-To: <6f4104d80902261221yb027e0obeb2cfaf6c2458e3@mail.gmail.com>
References: <6f4104d80902161237j65f7cc6aqa31c3c5adce171b3@mail.gmail.com>
	 <2AED2269-EACC-4350-BE32-B47AE7DAD9A6@gmail.com>
	 <6f4104d80902241232i2e0dc7bdp3e0e85a26c10617c@mail.gmail.com>
	 <6f4104d80902241248l522b8cbfgfaac78c16c20596d@mail.gmail.com>
	 <652776090902252355s33279391k7fc757ff4a062557@mail.gmail.com>
	 <759B2A6C-48A3-4EF9-876C-8DDDCFC60AB3@mikemccandless.com>
	 <6f4104d80902260313w1836ca10kb50bd1131029c694@mail.gmail.com>
	 <CB86E6E4-41B8-4A70-96BA-F4FA7E944E7B@mikemccandless.com>
	 <6f4104d80902260535o1089df30kaca56cd1c7c030b@mail.gmail.com>
	 <6f4104d80902261221yb027e0obeb2cfaf6c2458e3@mail.gmail.com>
Date: Thu, 26 Feb 2009 20:23:35 +0000
Message-ID: <6f4104d80902261223k756e00b3p814ed51e7b683213@mail.gmail.com>
Subject: Re: Faceted Search using Lucene
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c59a047d2e7b0463d820f7
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c59a047d2e7b0463d820f7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Forgot to mention that the previous code that i sent was related to facet
search.  This is a general search method I have implemented (they can
probably be combined...).

On Thu, Feb 26, 2009 at 8:21 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
> I have modified my search code.  Here is the following:
> [code]
>
>  public Summary[] search(SearchRequest searchRequest)  throwsSearchExecutionException {
>
> String searchTerm = searchRequest.getSearchTerm();
>
> if (StringUtils.isBlank(searchTerm)) {
>
> throw new SearchExecutionException("Search string cannot be empty. There
> will be too many results to process.");
>
> }
>
> List<Summary> summaryList = new ArrayList<Summary>();
>
> StopWatch stopWatch = new StopWatch("searchStopWatch");
>
> stopWatch.start();
>
> MultiSearcher multiSearcher = null;
>
> List<IndexSearcher> indexSearchers = new ArrayList<IndexSearcher>();
>
> boolean refreshSearchers = false;
>
> try {
>
> LOGGER.debug("Ensuring all index readers are up to date...");
>
> for (IndexSearcher indexSearcher: searchers) {
>
>  IndexReader reader = indexSearcher.getIndexReader();
>
>  reader.incRef();
>
>  Directory directory = reader.directory();
>
>
>
>  long currentVersion = reader.getVersion();
>
>  if (IndexReader.getCurrentVersion(directory) != currentVersion) {
>
>  IndexReader newReader = reader.reopen();
>
>  if (newReader != reader) {
>
>  reader.decRef();
>
>  refreshSearchers = true;
>
>  }
>
>  reader = newReader;
>
>  }
>
>  IndexSearcher indexSearch = new IndexSearcher(reader);
>
>  indexSearchers.add(indexSearch);
>
> }
>
> if (refreshSearchers) {
>
> searchers.clear();
>
> searchers = new ArrayList<IndexSearcher>(indexSearchers);
>
> }
>
> LOGGER.debug("All Index Searchers are up to date. No of index searchers '"+ indexSearchers.size() +
> "'");
>
>  multiSearcher = new MultiSearcher(searchers.toArray(new IndexSearcher[]
> {}));
>
> PerFieldAnalyzerWrapper analyzerWrapper = new PerFieldAnalyzerWrapper(
> analyzer);
>
> analyzerWrapper.addAnalyzer(FieldNameEnum.TYPE.getDescription(), newKeywordAnalyzer());
>
> QueryParser queryParser = newMultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
> analyzerWrapper);
>
>  Query query = queryParser.parse(searchTerm);
>
> LOGGER.debug("Search Term '" + searchTerm +"' ----> Lucene Query '" +
> query.toString() +"'");
>
>  Sort sort = null;
>
> sort = applySortIfApplicable(searchRequest);
>
>  Filter[] filters =applyFiltersIfApplicable(searchRequest);
>
>  ChainedFilter chainedFilter = null;
>
> if (filters != null) {
>
> chainedFilter = new ChainedFilter(filters, ChainedFilter.OR);
>
> }
>
> TopDocs topDocs = multiSearcher.search(query,chainedFilter ,100,sort);
>
> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>
> LOGGER.debug("total number of hits for [" + query.toString() + " ] = "+topDocs.
> totalHits);
>
>  for (ScoreDoc scoreDoc : scoreDocs) {
>
> final Document doc = multiSearcher.doc(scoreDoc.doc);
>
> float score = scoreDoc.score;
>
> final BaseDocument baseDocument = new BaseDocument(doc, score);
>
> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>
> summaryList.add(documentSummary);
>
> }
>
> multiSearcher.close();
>
> } catch (Exception e) {
>
> throw new IllegalStateException(e);
>
> }
>
> stopWatch.stop();
>
>  LOGGER.debug("total time taken for document seach: " +
> stopWatch.getTotalTimeMillis() + " ms");
>
> return summaryList.toArray(new Summary[] {});
>
> }
>
>  [/code]
>
> Just some background:
>
> There is a list of indexsearchers that are injected via Spring.  These
> searchers are configured again by Spring.  As you can see the multisearcher
> is a local variable.  I then have a variable that checks if a indexreader is
> not up to date.  When this is set to true the indexsearchers are refreshed.
>
> I would be grateful on your thoughts.
>
>
> On Thu, Feb 26, 2009 at 1:35 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:
>
>> Hi
>>
>> Thanks for your help.  I will modify my facet search and my other code to
>> use the recommendations.   Would it be ok to get a review of the completed
>> code?  I just want to make sure that I'm not doing anything that may cause
>> any problems (threading, memory).
>>
>> Cheers
>>
>>
>> On Thu, Feb 26, 2009 at 1:10 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>>
>>> See below -- this is an excerpt from the upcoming Lucene in Action
>>> revision (chapter 10).
>>>
>>> It's a simple class.  Use it like this for searching:
>>>
>>>  IndexSearcher searcher = manager.get();
>>>  try {
>>>    searcher.search(...).
>>>    ...render results...
>>>  } finally {
>>>    manager.release(searcher);
>>>    searcher = null;
>>>  }
>>>
>>> When you want to reopen (application dependent), call maybeReopen.
>>> Subclass and define the warm() method if needed.
>>>
>>> NOTE: this hasn't yet been heavily tested (I just quickly revised it to
>>> use
>>> incRef/decRef).
>>>
>>> Mike
>>>
>>> import java.io.IOException;
>>> import java.util.HashMap;
>>>
>>> import org.apache.lucene.search.IndexSearcher;
>>> import org.apache.lucene.index.IndexReader;
>>> import org.apache.lucene.store.Directory;
>>>
>>> /** Utility class to get/refresh searchers when you are
>>>  *  using multiple threads. */
>>>
>>> public class SearcherManager {
>>>
>>>  private IndexSearcher currentSearcher;                         //A
>>>  private Directory dir;
>>>
>>>  public SearcherManager(Directory dir) throws IOException {
>>>    this.dir = dir;
>>>    currentSearcher = new IndexSearcher(IndexReader.open(dir));  //B
>>>  }
>>>
>>>  public void warm(IndexSearcher searcher) {}                    //C
>>>
>>>  public void maybeReopen() throws IOException {                 //D
>>>    long currentVersion = currentSearcher.getIndexReader().getVersion();
>>>    if (IndexReader.getCurrentVersion(dir) != currentVersion) {
>>>      IndexReader newReader = currentSearcher.getIndexReader().reopen();
>>>      assert newReader != currentSearcher.getIndexReader();
>>>      IndexSearcher newSearcher = new IndexSearcher(newReader);
>>>      warm(newSearcher);
>>>      swapSearcher(newSearcher);
>>>    }
>>>  }
>>>
>>>  public synchronized IndexSearcher get() {                      //E
>>>    currentSearcher.getIndexReader().incRef();
>>>    return currentSearcher;
>>>  }
>>>
>>>  public synchronized void release(IndexSearcher searcher)       //F
>>>    throws IOException {
>>>    searcher.getIndexReader().decRef();
>>>  }
>>>
>>>  private synchronized void swapSearcher(IndexSearcher newSearcher) //G
>>>      throws IOException {
>>>    release(currentSearcher);
>>>    currentSearcher = newSearcher;
>>>  }
>>> }
>>>
>>> /*
>>> #A Current IndexSearcher
>>> #B Create initial searcher
>>> #C Implement in subclass to warm new searcher
>>> #D Call this to reopen searcher if index changed
>>> #E Returns current searcher
>>> #F Release searcher
>>> #G Swaps currentSearcher to new searcher
>>> */
>>>
>>> Mike
>>>
>>>
>>> Amin Mohammed-Coleman wrote:
>>>
>>>  Hi
>>>>
>>>> Thanks for your reply.  Without sound completely ...silly...how do i go
>>>> abouts using the methods you mentioned...
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>> On Thu, Feb 26, 2009 at 10:24 AM, Michael McCandless <
>>>> lucene@mikemccandless.com> wrote:
>>>>
>>>>
>>>>> Actually, it's best to use IndexReader.incRef/decRef to track the
>>>>> IndexReader.
>>>>>
>>>>> You should not rely on GC to close your IndexReader since this can
>>>>> easily
>>>>> tie up resources (eg open file descriptors) for too long.
>>>>>
>>>>> Mike
>>>>>
>>>>>
>>>>> Michael Stoppelman wrote:
>>>>>
>>>>> If another thread is executing a query with the handle to one of
>>>>>
>>>>>> readers[i]
>>>>>> you're going to kill it since the IndexReader is now closed.
>>>>>> Just don't call the IndexReader#close() method. If nothing is pointing
>>>>>> at
>>>>>> the readers they should be garbage collected. Also, you might
>>>>>> want to warm up your new IndexSearcher before you switch to it,
>>>>>> meaning
>>>>>> run
>>>>>> a few queries on it before you swap the old one out.
>>>>>>
>>>>>> M
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Tue, Feb 24, 2009 at 12:48 PM, Amin Mohammed-Coleman <
>>>>>> aminmc@gmail.com
>>>>>>
>>>>>>> wrote:
>>>>>>>
>>>>>>
>>>>>> The reason for the indexreader.reopen is because I have a webapp which
>>>>>>
>>>>>>> enables users to upload files and then search for the documents.  If
>>>>>>> I
>>>>>>> don't
>>>>>>> reopen i'm concerned that the facet hit counter won't be updated.
>>>>>>>
>>>>>>> On Tue, Feb 24, 2009 at 8:32 PM, Amin Mohammed-Coleman <
>>>>>>> aminmc@gmail.com
>>>>>>>
>>>>>>>  wrote:
>>>>>>>>
>>>>>>>>
>>>>>>> Hi
>>>>>>>
>>>>>>>> I have been able to get the code working for my scenario, however I
>>>>>>>> have
>>>>>>>>
>>>>>>>>  a
>>>>>>>
>>>>>>>  question and I was wondering if I could get some help.  I have a
>>>>>>>> list of
>>>>>>>> IndexSearchers which are used in a MultiSearcher class.  I use the
>>>>>>>> indexsearchers to get each indexreader and put them into a
>>>>>>>>
>>>>>>>>  MultiIndexReader.
>>>>>>>
>>>>>>>
>>>>>>>> IndexReader[] readers = new IndexReader[searchables.length];
>>>>>>>>
>>>>>>>> for (int i =0 ; i < searchables.length;i++) {
>>>>>>>>
>>>>>>>> IndexSearcher indexSearcher = (IndexSearcher)searchables[i];
>>>>>>>>
>>>>>>>> readers[i] = indexSearcher.getIndexReader();
>>>>>>>>
>>>>>>>>  IndexReader newReader = readers[i].reopen();
>>>>>>>>
>>>>>>>> if (newReader != readers[i]) {
>>>>>>>>
>>>>>>>> readers[i].close();
>>>>>>>>
>>>>>>>> }
>>>>>>>>
>>>>>>>> readers[i] = newReader;
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> }
>>>>>>>>
>>>>>>>> multiReader = new MultiReader(readers);
>>>>>>>>
>>>>>>>> OpenBitSetFacetHitCounter facetHitCounter =
>>>>>>>>
>>>>>>>>  newOpenBitSetFacetHitCounter();
>>>>>>>
>>>>>>>
>>>>>>>> IndexSearcher indexSearcher = new IndexSearcher(multiReader);
>>>>>>>>
>>>>>>>>
>>>>>>>> I then use the indexseacher to do the facet stuff.  I end the code
>>>>>>>> with
>>>>>>>> closing the multireader.  This is causing problems in another method
>>>>>>>>
>>>>>>>>  where I
>>>>>>>
>>>>>>>  do some other search as the indexreaders are closed.  Is it ok to
>>>>>>>> not
>>>>>>>>
>>>>>>>>  close
>>>>>>>
>>>>>>>  the multiindexreader or should I do some additional checks in the
>>>>>>>> other
>>>>>>>> method to see if the indexreader is closed?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>>
>>>>>>>>
>>>>>>>> P.S. Hope that made sense...!
>>>>>>>>
>>>>>>>>
>>>>>>>> On Mon, Feb 23, 2009 at 7:20 AM, Amin Mohammed-Coleman <
>>>>>>>> aminmc@gmail.com
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>> Hi
>>>>>>>>
>>>>>>>>>
>>>>>>>>> Thanks just what I needed!
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On 22 Feb 2009, at 16:11, Marcelo Ochoa <marcelo.ochoa@gmail.com>
>>>>>>>>>
>>>>>>>>>  wrote:
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>  Hi Amin:
>>>>>>>>>
>>>>>>>>>  Please take a look a this blog post:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>> http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html
>>>>>>>
>>>>>>>  Best regards, Marcelo.
>>>>>>>>
>>>>>>>>>
>>>>>>>>>> On Sun, Feb 22, 2009 at 1:18 PM, Amin Mohammed-Coleman <
>>>>>>>>>>
>>>>>>>>>>  aminmc@gmail.com>
>>>>>>>>>
>>>>>>>>
>>>>>>>  wrote:
>>>>>>>>
>>>>>>>>>
>>>>>>>>>> Hi
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Sorry to re send this email but I was wondering if I could get
>>>>>>>>>>> some
>>>>>>>>>>> advice
>>>>>>>>>>> on this.
>>>>>>>>>>>
>>>>>>>>>>> Cheers
>>>>>>>>>>>
>>>>>>>>>>> Amin
>>>>>>>>>>>
>>>>>>>>>>> On 16 Feb 2009, at 20:37, Amin Mohammed-Coleman <
>>>>>>>>>>> aminmc@gmail.com>
>>>>>>>>>>> wrote:
>>>>>>>>>>>
>>>>>>>>>>> Hi
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>> I am looking at building a faceted search using Lucene.  I know
>>>>>>>>>>>> that
>>>>>>>>>>>> Solr
>>>>>>>>>>>> comes with this built in, however I would like to try this by
>>>>>>>>>>>> myself
>>>>>>>>>>>> (something to add to my CV!).  I have been looking around and I
>>>>>>>>>>>> found
>>>>>>>>>>>> that
>>>>>>>>>>>> you can use the IndexReader and use TermVectors.  This looks ok
>>>>>>>>>>>> but
>>>>>>>>>>>>
>>>>>>>>>>>>  I'm
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>  not
>>>>>>>>
>>>>>>>>>  sure how to filter the results so that a particular user can only
>>>>>>>>>>>> see
>>>>>>>>>>>>
>>>>>>>>>>>>  a
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>  subset of results.  The next option I was looking at was something
>>>>>>>>
>>>>>>>>>
>>>>>>>>>>>>  like
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>
>>>>>>>>  Term term1 = new Term("brand", "ford");
>>>>>>>>>>>> Term term2 = new Term("brand", "vw");
>>>>>>>>>>>> Term[] termsArray = new Term[] { term1, term2 };un
>>>>>>>>>>>> int[] docFreqs = indexSearcher.docFreqs(termsArray);
>>>>>>>>>>>>
>>>>>>>>>>>> The only problem here is that I have to provide the brand type
>>>>>>>>>>>> each
>>>>>>>>>>>> time a
>>>>>>>>>>>> new brand is created.  Again I'm not sure how I can filter the
>>>>>>>>>>>>
>>>>>>>>>>>>  results
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>  here.
>>>>>>>>
>>>>>>>>>  It may be that I'm using the wrong api methods to do this.
>>>>>>>>>>>>
>>>>>>>>>>>> I would be grateful if I could get some advice on this.
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Cheers
>>>>>>>>>>>> Amin
>>>>>>>>>>>>
>>>>>>>>>>>> P.S.  I am basically trying to do something that displays the
>>>>>>>>>>>>
>>>>>>>>>>>>  following
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>
>>>>>>>>  Personal Contact (23) Business Contact (45) and so on..
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>> --
>>>>>>>>>> Marcelo F. Ochoa
>>>>>>>>>> http://marceloochoa.blogspot.com/
>>>>>>>>>> http://marcelo.ochoa.googlepages.com/home
>>>>>>>>>> ______________
>>>>>>>>>> Want to integrate Lucene and Oracle?
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>>>>>>>
>>>>>>>  Is Oracle 11g REST ready?
>>>>>>>>
>>>>>>>>>
>>>>>>>>>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>

--001636c59a047d2e7b0463d820f7--

From java-user-return-38719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 26 21:59:53 2009
Return-Path: <java-user-return-38719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7771 invoked from network); 26 Feb 2009 21:59:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2009 21:59:53 -0000
Received: (qmail 36731 invoked by uid 500); 26 Feb 2009 21:59:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36667 invoked by uid 500); 26 Feb 2009 21:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36637 invoked by uid 99); 26 Feb 2009 21:59:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 13:59:40 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 21:59:31 +0000
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8+Sun/8.13.8) with ESMTP id n1QLx2Qr022085;
	Thu, 26 Feb 2009 13:59:06 -0800 (PST)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <Sithu.Sudarsan@fda.hhs.gov>
Cc: <java-user@lucene.apache.org>, <solr-user@lucene.apache.org>
References: <F8A04958BB57B64096F9BE6B9572564304C73BA1@FMD3VS012.fda.gov>
Subject: RE: Use of scanned documents for text extraction and indexing
Date: Thu, 26 Feb 2009 13:59:01 -0800
Message-ID: <7029152537264371B78BF483752A6322@campus.net.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmYL15OTkWBXK3XTUiPFlpEw7EhmAADK5AA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73BA1@FMD3VS012.fda.gov>
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

There is quite a bit of litterature available on this topic. This paper
presents a summary. Nothing immediately applicable I'm afraid.

Retrieving OCR Text: A survey of current approaches
Steven M. Beitzel, Eric C. Jensen, David A Grossman
Illinois Institute of Technology

It lists a number of other papers that are easy to find online. Let me know
what you find, I'm interested in this too.

--Renaud

 

-----Original Message-----
From: Sudarsan, Sithu D. [mailto:Sithu.Sudarsan@fda.hhs.gov] 
Sent: Thursday, February 26, 2009 8:29 AM
To: solr-user@lucene.apache.org; java-user@lucene.apache.org
Subject: Use of scanned documents for text extraction and indexing


Hi All:

Is there any study / research done on using scanned paper documents as
images (may be PDF), and then use some OCR or other technique for extracting
text, and the resultant index quality?


Thanks in advance,
Sithu D Sudarsan

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 06:20:55 2009
Return-Path: <java-user-return-38720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96506 invoked from network); 27 Feb 2009 06:20:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 06:20:53 -0000
Received: (qmail 68875 invoked by uid 500); 27 Feb 2009 06:20:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68842 invoked by uid 500); 27 Feb 2009 06:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68831 invoked by uid 99); 27 Feb 2009 06:20:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Feb 2009 22:20:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of seidymam@gmail.com designates 209.85.218.167 as permitted sender)
Received: from [209.85.218.167] (HELO mail-bw0-f167.google.com) (209.85.218.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 06:20:39 +0000
Received: by bwz11 with SMTP id 11so1145763bwz.5
        for <java-user@lucene.apache.org>; Thu, 26 Feb 2009 22:20:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=ubZ/SI8ZE6VGaWw0IVV6egAxC9RezKZ+VEfz+O+T1LE=;
        b=X3FgwP4JLFrqFA6bcP2lBi6tDCAu8i4nav02ATRYyFSfSIJIV3x0yDxSH1mowtgp8Q
         JpZ8o4rmLerV/l3g4K1ROfWyWM0rOb3GadNND4uYLfUpMEHhgCxVOAFAFr/1fgAzqiDJ
         MYGLV4LyB3xjSirTMO5JRytCiNHg1Ft4LfHJM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=mjJht5QO/Mb6qSi4TiglSbIguS1GhZIouHFkEAQcdZsh7F/mr+TEY+1RZZeNXYkFvE
         ycmqfKF64IQWIUHKGrl2sEIivht0czs4YzntrmZVMe92Pyvs5io4LawdBp6uK1rLek/M
         azkzIANlWueCED/Djncl39LgHp5pnGv/M+jVo=
MIME-Version: 1.0
Received: by 10.181.139.10 with SMTP id r10mr755229bkn.11.1235715617905; Thu, 
	26 Feb 2009 22:20:17 -0800 (PST)
Date: Fri, 27 Feb 2009 09:20:17 +0300
Message-ID: <179b305e0902262220u5b80dff2xf0a17124c9543e23@mail.gmail.com>
Subject: How to run Lucene in Action TestCase Examples
From: Seid Mohammed <seidymam@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am using, Netbeans and want to run some of the Junit test examples from there
I have added the Test programs to a test packages in the project
window and try to run it
but it fails to run.
I have also included libs to the libraries

thanks a lot
Seid M.
-- 
"RABI ZIDNI ILMA"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 08:04:37 2009
Return-Path: <java-user-return-38721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53656 invoked from network); 27 Feb 2009 08:04:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 08:04:37 -0000
Received: (qmail 48495 invoked by uid 500); 27 Feb 2009 08:04:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48460 invoked by uid 500); 27 Feb 2009 08:04:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48449 invoked by uid 99); 27 Feb 2009 08:04:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 00:04:29 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 08:04:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LcxhO-0000dx-Mh
	for java-user@lucene.apache.org; Fri, 27 Feb 2009 00:03:58 -0800
Message-ID: <22241132.post@talk.nabble.com>
Date: Fri, 27 Feb 2009 00:03:58 -0800 (PST)
From: rviper <starzer@it-fabrik.at>
To: java-user@lucene.apache.org
Subject: ThreadLocal / Memory Problems with Analyzer class
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: starzer@it-fabrik.at
X-Virus-Checked: Checked by ClamAV on apache.org


hi,

environment: lucene 2.4, jdk 1.6

i'm using quartz jobs to schedule indexing tasks; currently i'm creating a
new instance of an analyzer each time i open the index; after some time i'm
getting a out of memory;

Analyzer Class:
private ThreadLocal tokenStreams;

since the analyzer class is using a thread local -> should i reuse an
analyzer (e.g singleton pattern) in this case (quartz job reusing threads
(=tread pool) -> thread local data never gets freed)...)?

Mem dump:

Class name                                                                                
| Shallow Heap | Retained Heap | Percentage 
--------------------------------------------------------------------------------------------------------------------------------------
org.quartz.simpl.SimpleThreadPool$WorkerThread @ 0xb4e8070 
QuartzScheduler_Worker-3 Thread|          120 |    55.914.144 |     21,65% 
|- java.lang.ThreadLocal$ThreadLocalMap @ 0xdf32a20                                       
|           24 |    55.913.760 |     21,65% 
|  '- java.lang.ThreadLocal$ThreadLocalMap$Entry[16384] @ 0x163a61b8                      
|       65.552 |    55.913.736 |     21,65% 
|     |- java.lang.ThreadLocal$ThreadLocalMap$Entry @ 0xe090ca8                           
|           32 |         9.608 |      0,00% 
|     |  |- org.apache.lucene.analysis.StopAnalyzer$SavedStreams @ 0xe090cc8              
|           24 |         9.560 |      0,00% 
|     |  |  |- org.apache.lucene.analysis.LowerCaseTokenizer @ 0xe090ce0                  
|           32 |         8.520 |      0,00% 
......
......

thanks

-- 
View this message in context: http://www.nabble.com/ThreadLocal---Memory-Problems-with-Analyzer-class-tp22241132p22241132.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 08:20:31 2009
Return-Path: <java-user-return-38722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65088 invoked from network); 27 Feb 2009 08:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 08:20:30 -0000
Received: (qmail 82687 invoked by uid 500); 27 Feb 2009 08:20:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82194 invoked by uid 500); 27 Feb 2009 08:20:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82183 invoked by uid 99); 27 Feb 2009 08:20:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 00:20:23 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 08:20:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Lcxwn-0001Cb-RA
	for java-user@lucene.apache.org; Fri, 27 Feb 2009 00:19:53 -0800
Message-ID: <22241327.post@talk.nabble.com>
Date: Fri, 27 Feb 2009 00:19:53 -0800 (PST)
From: rviper <starzer@it-fabrik.at>
To: java-user@lucene.apache.org
Subject: Re: ThreadLocal / Memory Problems with Analyzer class
In-Reply-To: <22241132.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: starzer@it-fabrik.at
References: <22241132.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


ok, also see https://issues.apache.org/jira/browse/LUCENE-1186


-- 
View this message in context: http://www.nabble.com/ThreadLocal---Memory-Problems-with-Analyzer-class-tp22241132p22241327.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 11:44:00 2009
Return-Path: <java-user-return-38723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85415 invoked from network); 27 Feb 2009 11:43:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 11:43:59 -0000
Received: (qmail 35574 invoked by uid 500); 27 Feb 2009 11:43:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35533 invoked by uid 500); 27 Feb 2009 11:43:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35522 invoked by uid 99); 27 Feb 2009 11:43:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 03:43:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 27 Feb 2009 11:43:36 +0000
Received: (qmail invoked by alias); 27 Feb 2009 11:43:15 -0000
Received: from unknown (EHLO msrvcn04) [82.113.106.144]
  by mail.gmx.net (mp060) with SMTP; 27 Feb 2009 12:43:15 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/JwE0pDnbJ7CroDH1G3QqQdsourdrMunvf6/npk9
	eT91Vpn6OcYYmG
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: TopDocCollector
Date: Fri, 27 Feb 2009 12:43:19 +0100
Message-ID: <DEF79D71A17E4B18B298A663912B5171@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmY0HcFttO6vmaySSiZJ2+ZrGGbow==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.64
X-Virus-Checked: Checked by ClamAV on apache.org

Looking into TopDocCollector code, I have some questions:

* How can a hit have a score of <=0?
* What happens if the first hit has the highest score of all hits? It seems
that topDocs whould then contain only this doc!?

public void collect(int doc, float score) {
57     if (score > 0.0f) {
58       totalHits++;
59       if (hq.size() < numHits || score >= minScore) {
60         hq.insert(new ScoreDoc(doc, score));
61         minScore = ((ScoreDoc)hq.top()).score; // maintain minScore
62 }
63     }
64   }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 12:20:12 2009
Return-Path: <java-user-return-38724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1885 invoked from network); 27 Feb 2009 12:20:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 12:20:12 -0000
Received: (qmail 75662 invoked by uid 500); 27 Feb 2009 12:20:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74712 invoked by uid 500); 27 Feb 2009 12:19:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74614 invoked by uid 99); 27 Feb 2009 12:19:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 04:19:59 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 12:19:50 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 4C5207B327;
	Fri, 27 Feb 2009 04:19:29 -0800 (PST)
Message-Id: <480217ED-BB25-40F8-B668-29013644BE20@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-1059--268069057
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: ApacheCon Lucene Meetup
Date: Fri, 27 Feb 2009 07:19:28 -0500
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1059--268069057
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

If you're in or around Amsterdam during the week of ApacheCon (Mar  
23-27), check out the Lucene Meetup we are organizing: http://wiki.apache.org/lucene-java/LuceneMeetupMarch2009


--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


--Apple-Mail-1059--268069057--

From java-user-return-38725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 12:57:11 2009
Return-Path: <java-user-return-38725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28719 invoked from network); 27 Feb 2009 12:57:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 12:57:11 -0000
Received: (qmail 27772 invoked by uid 500); 27 Feb 2009 12:57:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27747 invoked by uid 500); 27 Feb 2009 12:57:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 56587 invoked by uid 99); 27 Feb 2009 05:57:16 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mr.double_b@gmx.de designates 213.165.64.20 as permitted sender)
X-Authenticated: #3246020
X-Provags-ID: V01U2FsdGVkX1+OIfk+4GKOCSALltSMDH39hzslQ4x9224YQNmxqz
	XZmkYVDl5XcXeX
Message-ID: <49A7809B.9070104@gmx.de>
Date: Fri, 27 Feb 2009 06:56:43 +0100
From: Bastian Buch <mr.double_b@gmx.de>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: solr-user@lucene.apache.org
CC: Sithu.Sudarsan@fda.hhs.gov, java-user@lucene.apache.org
Subject: Re: Use of scanned documents for text extraction and indexing
References: <F8A04958BB57B64096F9BE6B9572564304C73BA1@FMD3VS012.fda.gov> <7029152537264371B78BF483752A6322@campus.net.ucsf.edu>
In-Reply-To: <7029152537264371B78BF483752A6322@campus.net.ucsf.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.5600000000000001
X-Virus-Checked: Checked by ClamAV on apache.org

You can use Tesseract, an openSource OCR Engine owned from Google. Its 
native C Code and to use it in Java you should use JNI or direct process 
creation. There is no PDF support, but you can use imagemagick to 
convert those docs on the fly. The engine scan documents line by line 
without trying to resolve "text-boxes", which is a problem with 
1-n-column texts. But with some image preprocessing you can also solve this.


Cheers Bastian.

http://bastian-buch.de


Renaud Waldura schrieb:

> There is quite a bit of litterature available on this topic. This paper
> presents a summary. Nothing immediately applicable I'm afraid.
>
> Retrieving OCR Text: A survey of current approaches
> Steven M. Beitzel, Eric C. Jensen, David A Grossman
> Illinois Institute of Technology
>
> It lists a number of other papers that are easy to find online. Let me know
> what you find, I'm interested in this too.
>
> --Renaud
>
>  
>
> -----Original Message-----
> From: Sudarsan, Sithu D. [mailto:Sithu.Sudarsan@fda.hhs.gov] 
> Sent: Thursday, February 26, 2009 8:29 AM
> To: solr-user@lucene.apache.org; java-user@lucene.apache.org
> Subject: Use of scanned documents for text extraction and indexing
>
>
> Hi All:
>
> Is there any study / research done on using scanned paper documents as
> images (may be PDF), and then use some OCR or other technique for extracting
> text, and the resultant index quality?
>
>
> Thanks in advance,
> Sithu D Sudarsan
>
> sithu.sudarsan@fda.hhs.gov
> sdsudarsan@ualr.edu
>
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 13:53:27 2009
Return-Path: <java-user-return-38726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72067 invoked from network); 27 Feb 2009 13:53:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 13:53:27 -0000
Received: (qmail 11642 invoked by uid 500); 27 Feb 2009 13:53:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11619 invoked by uid 500); 27 Feb 2009 13:53:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11608 invoked by uid 99); 27 Feb 2009 13:53:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 05:53:20 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 13:53:12 +0000
Received: by an-out-0708.google.com with SMTP id c37so706292anc.5
        for <java-user@lucene.apache.org>; Fri, 27 Feb 2009 05:52:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=GqsRmgBS/NQzZ3rbM2roD6m/V+vl6Qg1YolfT7Ebxuw=;
        b=GwmXKV4EqNfHzFiGkAMtUoJE+/aH31pIHAeyx3SASRNK9EX8D5EyrSNcgxDZSQYvO3
         oBnXneo9RQ22iJg8sWqBUvjwuvWLBigyJIDF9AAB7uPi8ymECbcUYayep1jCyAgmsFXw
         tBQAi9dqyjDm1xhuLeUHAoXpe0KPkxtq2O+I8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=snDrogj//A2xsrhWbezhBksSVBVT0yqWvER8JfWjXtu5TVVIbsaGG1YkolV9znP1C/
         FTTMNUTRDH225DDFgGjUr3v/fCHbwBukFRA2114t5r7KeR6IxtFi8r0/NS/80o6Fqded
         q9sL0d/iA7srNu21teul4wTZ+DiejM5lAv70k=
MIME-Version: 1.0
Received: by 10.220.46.17 with SMTP id h17mr993454vcf.9.1235742771363; Fri, 27 
	Feb 2009 05:52:51 -0800 (PST)
In-Reply-To: <179b305e0902262220u5b80dff2xf0a17124c9543e23@mail.gmail.com>
References: <179b305e0902262220u5b80dff2xf0a17124c9543e23@mail.gmail.com>
Date: Fri, 27 Feb 2009 08:52:51 -0500
Message-ID: <359a92830902270552u6fa61834u6903dde71667a61@mail.gmail.com>
Subject: Re: How to run Lucene in Action TestCase Examples
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b7c6cebc1b10463e6c8a4
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363b7c6cebc1b10463e6c8a4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I have no clue about netbeans, but I *do* know that you'll need
to provide more details than "it fails" to get any meaningful
help. What version of JUnit? Lucene? NetBeans? what
error messages/stack traces?

Imagine you were trying to respond to your own email knowing
nothing except what you wrote and I think you'll see the problem....

I've done this from Eclipse just fine.

Best
Erick

On Fri, Feb 27, 2009 at 1:20 AM, Seid Mohammed <seidymam@gmail.com> wrote:

> I am using, Netbeans and want to run some of the Junit test examples from
> there
> I have added the Test programs to a test packages in the project
> window and try to run it
> but it fails to run.
> I have also included libs to the libraries
>
> thanks a lot
> Seid M.
> --
> "RABI ZIDNI ILMA"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016363b7c6cebc1b10463e6c8a4--

From java-user-return-38727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 14:16:17 2009
Return-Path: <java-user-return-38727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92188 invoked from network); 27 Feb 2009 14:16:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 14:16:16 -0000
Received: (qmail 46857 invoked by uid 500); 27 Feb 2009 14:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46831 invoked by uid 500); 27 Feb 2009 14:16:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46820 invoked by uid 99); 27 Feb 2009 14:16:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 06:16:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 14:16:02 +0000
Received: by rv-out-0506.google.com with SMTP id k40so1734712rvb.5
        for <java-user@lucene.apache.org>; Fri, 27 Feb 2009 06:15:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=JtZKhrMkUibDSJkuJLBaUcjzFPzAHuRwgw3JsxyebbU=;
        b=V2e9glVU+nObzyDzR80KBCPK6sl6QJAawn+1xmSGWD2Ej8Fp28ImbD4sGFOjjj1HnP
         +VcUzQfXTVgoXP7MTWMwo4EArTavplIQW9rt+IjkKsxHObK9s4G9aoMukNFz+21swq44
         j8Z5q1UVH86PEkkcMDTm5/S13al22XhroSBg8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g67ps6iT7Fr7cULOPzz6FGSUVm4UW+DeYjn22BX5QVGZ3yuboD0Fwe8NJgOL8Arz+G
         Seu0raZ2ztELCDC68QYxii/QU03KDe0/piHf/ctn/yB1Z8y33ye5jQeyBx0gtYbcglID
         drEmFAqkNS9hMsFdHAwEQ25kNap04kv7oGdPs=
MIME-Version: 1.0
Received: by 10.141.20.7 with SMTP id x7mr1248045rvi.14.1235744142078; Fri, 27 
	Feb 2009 06:15:42 -0800 (PST)
In-Reply-To: <e994873a0902201303y62d320aoa7d92a89fc7fac7f@mail.gmail.com>
References: <e994873a0902201303y62d320aoa7d92a89fc7fac7f@mail.gmail.com>
Date: Fri, 27 Feb 2009 09:15:42 -0500
Message-ID: <e994873a0902270615y60f3920ame48cda52d9668475@mail.gmail.com>
Subject: Re: queryNorm affect on score
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=000e0cd1b08c9f34890463e71a09
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1b08c9f34890463e71a09
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Any comments about this? Is this just the way queryNorm works or is this a
bug?

Thanks,
Peter

On Fri, Feb 20, 2009 at 4:03 PM, Peter Keegan <peterlkeegan@gmail.com>wrote:

>
> The explanation of scores from the same document returned from 2 similar
> queries differ in an unexpected way. There are 2 fields involved, 'contents'
> and 'literals'. The 'literals' field has setBoost = 0. As you an see from
> the explanations below, the total weight of the matching terms from the
> 'literal' field is 0. However, the weights produced by the matching terms in
> the 'contents' field is very different, even with the same matching terms.
> The reason is that the 'queryNorm' value is very different because the
> 'sumOfSquaredWeights' is very different. Why is this?
>
> First query: +(+contents:sales +contents:representative) +literals:jb$1
> Explanation:
> 32.274593  sum of:
>   32.274593  sum of:
>     10.336284  weight(contents:sales in 14578), product of:
>       0.54963183  queryWeight(contents:sales), product of:
>         2.6595461  idf(contents: sales=83179)
>         0.20666377  queryNorm
>       18.805832  fieldWeight(contents:sales in 14578), product of:
>         7.071068  btq, product of:
>           1.4142135  tf(phraseFreq=3.0)
>           5.0  scorePayload(...)
>         2.6595461  idf(contents: sales=83179)
>         1.0  fieldNorm(field=contents, doc=14578)
>     21.93831  weight(contents:representative in 14578), product of:
>       0.8007395  queryWeight(contents:representative), product of:
>         3.8746004  idf(contents: representative=24678)
>         0.20666377  queryNorm
>       27.397562  fieldWeight(contents:representative in 14578), product of:
>         7.071068  btq, product of:
>           1.4142135  tf(phraseFreq=2.0)
>           5.0  scorePayload(...)
>         3.8746004  idf(contents: representative=24678)
>         1.0  fieldNorm(field=contents, doc=14578)
>   0.0  weight(literals:jb$1 in 14578), product of:
>     0.23816177  queryWeight(literals:jb$1), product of:
>       1.1524118  idf(docFreq=375455, numDocs=436917)
>       0.20666377  queryNorm
>     0.0  fieldWeight(literals:jb$1 in 14578), product of:
>       1.0  tf(termFreq(literals:jb$1)=1)
>       1.1524118  idf(docFreq=375455, numDocs=436917)
>       0.0  fieldNorm(field=literals, doc=14578)
>
>
> Second query: +(+contents:sales +contents:representative) +(literals:jb$1
> literals:jb$9999)
> Explanation:
> 10.550879  sum of:
>   10.550879  sum of:
>     3.3790317  weight(contents:sales in 14578), product of:
>       0.17967999  queryWeight(contents:sales), product of:
>         2.6595461  idf(contents: sales=83179)
>         0.0675604  queryNorm
>       18.805832  fieldWeight(contents:sales in 14578), product of:
>         7.071068  btq, product of:
>           1.4142135  tf(phraseFreq=3.0)
>           5.0  scorePayload(...)
>         2.6595461  idf(contents: sales=83179)
>         1.0  fieldNorm(field=contents, doc=14578)
>     7.171847  weight(contents:representative in 14578), product of:
>       0.26176953  queryWeight(contents:representative), product of:
>         3.8746004  idf(contents: representative=24678)
>         0.0675604  queryNorm
>       27.397562  fieldWeight(contents:representative in 14578), product of:
>         7.071068  btq, product of:
>           1.4142135  tf(phraseFreq=2.0)
>           5.0  scorePayload(...)
>         3.8746004  idf(contents: representative=24678)
>         1.0  fieldNorm(field=contents, doc=14578)
>   0.0  product of:
>     0.0  sum of:
>       0.0  weight(literals:jb$1 in 14578), product of:
>         0.0778574  queryWeight(literals:jb$1), product of:
>           1.1524118  idf(docFreq=375455, numDocs=436917)
>           0.0675604  queryNorm
>         0.0  fieldWeight(literals:jb$1 in 14578), product of:
>           1.0  tf(termFreq(literals:jb$1)=1)
>           1.1524118  idf(docFreq=375455, numDocs=436917)
>           0.0  fieldNorm(field=literals, doc=14578)
>     0.5  coord(1/2)
>
>
>
>
>
> Peter
>

--000e0cd1b08c9f34890463e71a09--

From java-user-return-38728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 16:27:14 2009
Return-Path: <java-user-return-38728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78259 invoked from network); 27 Feb 2009 16:27:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 16:27:14 -0000
Received: (qmail 71282 invoked by uid 500); 27 Feb 2009 16:27:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70939 invoked by uid 500); 27 Feb 2009 16:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70928 invoked by uid 99); 27 Feb 2009 16:27:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 08:27:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Ray.Lukas@idearc.com designates 151.138.253.25 as permitted sender)
Received: from [151.138.253.25] (HELO dfw2w2ssmtp6.idearc.com) (151.138.253.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 16:26:56 +0000
Received: from dfw2w2smail8.na1.vis.verizon.com ([158.95.223.63]) by dfw2w2ssmtp6.idearc.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Feb 2009 10:21:43 -0600
Received: from dfw2w2smail5.na1.vis.verizon.com ([158.95.223.25]) by dfw2w2smail8.na1.vis.verizon.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Feb 2009 10:26:34 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Query against newly created index.. Do not work
Date: Fri, 27 Feb 2009 10:26:33 -0600
Message-ID: <6165226BDD41964D80E23DDFF26DD5C70B0BBC4D@dfw2w2smail5.na1.vis.verizon.com>
In-Reply-To: <359a92830902261111n27d0aae4q6c38048e9351ce51@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query against newly created index.. Do not work
Thread-Index: AcmYRi+L5G1aGW9tSLGWFCOyh3RnUgAsadgg
References: <22230841.post@talk.nabble.com> <359a92830902261111n27d0aae4q6c38048e9351ce51@mail.gmail.com>
From: "Lukas, Ray" <Ray.Lukas@idearc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Feb 2009 16:26:34.0931 (UTC) FILETIME=[2820A830:01C998F8]
X-Virus-Checked: Checked by ClamAV on apache.org

=20

I can now create indexes with Nutch, and see them in Luke.. this is
fantastic news, well for me it is beyond fantastic..=20
Now I would like to (need to) query them, and to that end I wrote the
following code segment.

		int maxHits =3D 1000;
		NutchBean nutchBean =3D new NutchBean(nutchConf);
		Query nutchQuery =3D Query.parse(nutchSearchTerm,
nutchConf);
		Hits nutchHits =3D nutchBean.search(nutchQuery, maxHits);
		return nutchHits.getLength();

In Luke if I do a query string like:

title:credit union

I receive 6 hits. The code above returns zero hits. I think that I am
doing this correctly, indeed coping this code directly from the WIKI
(thanks Chaz for giving us this)..=20

searcher.dir, and plugin.folders inside of nutch-site.xml are correctly
set.

<property>
  <name>searcher.dir</name>
  <value>outputDir</value>
  <description>
 	 Path to root of crawl. =20
  </description>
</property>
<property>
  <name>plugin.folders</name>
  <value>plugins</value>
  <description>
	Directories where nutch plugins are located.
  </description>
</property>

Any ideas? Oh and thanks for any help, of course..=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 16:40:00 2009
Return-Path: <java-user-return-38729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85495 invoked from network); 27 Feb 2009 16:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 16:39:59 -0000
Received: (qmail 92796 invoked by uid 500); 27 Feb 2009 16:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92771 invoked by uid 500); 27 Feb 2009 16:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92760 invoked by uid 99); 27 Feb 2009 16:39:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 08:39:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 16:39:43 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1122051qwi.53
        for <java-user@lucene.apache.org>; Fri, 27 Feb 2009 08:39:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=xjcjDt9DnI4iKp9t7cswfpDp/lg+HMd70g2Bj/E61Ps=;
        b=Zmp2qSq7qDkyV4No1ni7CRCPoyJVtfER3vsoeK5D4nBL8Yg/qHVXbMnT9MJ9tBvGRm
         Ko9fIcZlw4CNohsGDBXOAW+LrAzd65CFMhQQUNzf118dPHGIHXtXWyl5xnPCaFHdZMRR
         93xGjuL/Mdne0cMchlvOL6bWXx2aFri+v9O0M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=PymW+5MexFhHfugseNWTjN1yuHJmdD4TahH/avCnlvgXmKgmrhzemRhshsjiRknyAm
         zhjingk41ZPGHgCspdsZc2wic3FKLLY/A/vzTuMZXk72ijm5WryT/Jj+6jyoDXlHr+Tw
         U4lypzndFt6I8W7AITbMikGZT9JHjb0Dteoko=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.229.110.13 with SMTP id l13mr1944157qcp.4.1235752758365; Fri, 
	27 Feb 2009 08:39:18 -0800 (PST)
In-Reply-To: <e994873a0902270615y60f3920ame48cda52d9668475@mail.gmail.com>
References: <e994873a0902201303y62d320aoa7d92a89fc7fac7f@mail.gmail.com>
	 <e994873a0902270615y60f3920ame48cda52d9668475@mail.gmail.com>
Date: Fri, 27 Feb 2009 11:39:18 -0500
X-Google-Sender-Auth: 5b34de94252cba83
Message-ID: <c68e39170902270839j9ad2490n19665e7d3650e917@mail.gmail.com>
Subject: Re: queryNorm affect on score
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Feb 27, 2009 at 9:15 AM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Any comments about this? Is this just the way queryNorm works or is this a
> bug?

That's just the way it works... since it's applied to all clauses, it
really just changes the range of scores returned, not relative
ordering of documents or anything.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 17:44:42 2009
Return-Path: <java-user-return-38730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20258 invoked from network); 27 Feb 2009 17:44:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 17:44:42 -0000
Received: (qmail 15290 invoked by uid 500); 27 Feb 2009 17:44:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15260 invoked by uid 500); 27 Feb 2009 17:44:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15249 invoked by uid 99); 27 Feb 2009 17:44:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 09:44:35 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 17:44:27 +0000
Received: by rv-out-0506.google.com with SMTP id k40so1866392rvb.5
        for <java-user@lucene.apache.org>; Fri, 27 Feb 2009 09:44:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/61KwL+PE5t29zlgA9PzKS9tRp2PeUENbDApQI9uITs=;
        b=wY3cUQm2R5ihKsozuvV0BbHkxJxq3fxpGiN+PKK+yYeJ10RhNk+TDv/F7z/+NlxNAc
         v/B7FDWy85PjtC3+cKUBCJOoBtfXdwALeu8b82uNjiLgXTxnihWwtJtShnBTdxAB1BGr
         ruNCif9bvgvHeJCFuEMltnbfXDe3m/vrq0khQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=njnUtPi+8FKaKp5Jb7vA8xPoE83FbU2kD++zgheGwr7sYRG93siy2/+DGduNj5F5Xn
         PlDyXWFLt0m9ubKSqsYgeweDJO6y0xtVUmkTrHF3SIudClYI14LLONe5KANEzrz2eokr
         ILm8k3xvqEzG0wdlDy4TGypdcxTfbYIIdHbtM=
MIME-Version: 1.0
Received: by 10.141.42.10 with SMTP id u10mr1304829rvj.241.1235756647327; Fri, 
	27 Feb 2009 09:44:07 -0800 (PST)
In-Reply-To: <c68e39170902270839j9ad2490n19665e7d3650e917@mail.gmail.com>
References: <e994873a0902201303y62d320aoa7d92a89fc7fac7f@mail.gmail.com>
	 <e994873a0902270615y60f3920ame48cda52d9668475@mail.gmail.com>
	 <c68e39170902270839j9ad2490n19665e7d3650e917@mail.gmail.com>
Date: Fri, 27 Feb 2009 12:44:07 -0500
Message-ID: <e994873a0902270944u4a122e6cmbceebf64ae7c1085@mail.gmail.com>
Subject: Re: queryNorm affect on score
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org, yonik@lucidimagination.com
Content-Type: multipart/alternative; boundary=000e0cd20a54fe26fd0463ea0326
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd20a54fe26fd0463ea0326
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Got it. This is another example of why scores can't be compared between
(even similar) queries.
 (we don't)

Thanks.

On Fri, Feb 27, 2009 at 11:39 AM, Yonik Seeley
<yonik@lucidimagination.com>wrote:

> On Fri, Feb 27, 2009 at 9:15 AM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > Any comments about this? Is this just the way queryNorm works or is this
> a
> > bug?
>
> That's just the way it works... since it's applied to all clauses, it
> really just changes the range of scores returned, not relative
> ordering of documents or anything.
>
> -Yonik
> http://www.lucidimagination.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd20a54fe26fd0463ea0326--

From java-user-return-38731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 21:02:59 2009
Return-Path: <java-user-return-38731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18909 invoked from network); 27 Feb 2009 21:02:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 21:02:59 -0000
Received: (qmail 20765 invoked by uid 500); 27 Feb 2009 21:02:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20738 invoked by uid 500); 27 Feb 2009 21:02:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20727 invoked by uid 99); 27 Feb 2009 21:02:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 13:02:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.219.157 as permitted sender)
Received: from [209.85.219.157] (HELO mail-ew0-f157.google.com) (209.85.219.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 21:02:42 +0000
Received: by ewy1 with SMTP id 1so1600429ewy.5
        for <java-user@lucene.apache.org>; Fri, 27 Feb 2009 13:02:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=XwMRU5jHL2XZGBhoas8h9+TnuC9kJIaSBxPreAgIk4Q=;
        b=DlZbqlL/9RzS3epscI1kseDoANsVHBqPU8FhRP+n6UKdGws1E65tbc58NduTKkqgd7
         HGLe7/50TgLPX/Rpkyuipse7VlvZ5ICtXUhWw2Kb4d+8n3WN1/XpVv4in4MMxUzeNOln
         bu5LbqJ83hSeHlQQJEdjdJXP9BiZ9panfO0z8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MHMYOAs4EhC5aGFfrus/wVOgMBIE6ix9f3dLL5DWd0iOcyjRUrQPO/HGiScrniT0Oi
         k1FNT2/X7H2xqekfbXZiHyUtSqREuvD4xKbVWdnLYgSd/Y1Ejelwivyop3g9wBPN+nep
         qPsUKAXHMNQ0ZilmfcBFUxpjj5tWzdgPrc21Q=
MIME-Version: 1.0
Received: by 10.210.33.3 with SMTP id g3mr757379ebg.13.1235768542746; Fri, 27 
	Feb 2009 13:02:22 -0800 (PST)
In-Reply-To: <359a92830902260534u32b92a37i60578d1e054916ea@mail.gmail.com>
References: <d36c28c30902260407v3c73df2au2f773ca0ff33189c@mail.gmail.com>
	 <359a92830902260534u32b92a37i60578d1e054916ea@mail.gmail.com>
Date: Fri, 27 Feb 2009 16:02:22 -0500
Message-ID: <d36c28c30902271302w31dc542bm611b0a167c554a25@mail.gmail.com>
Subject: Re: Merging two tokenized fields
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c198203d8fe0463ecc9a9
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c198203d8fe0463ecc9a9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks for your answer - I will store both texts (I have my own objects' ids
that i use to identify the documents) and will index the text after the
merge.

Thank you,
Liat

2009/2/26 Erick Erickson <erickerickson@gmail.com>

> Reconstructing a field from an index is
> 1> slow
> 2> lossy (what about stemmed words? stopwords? )
>
> UNLESS you have stored the data (Field.Store.YES/COMPRESS),
> in which case you can just get the field from each index and put it
> in the new one. Tokenization has little to do with this although you
> could get a similar effect with untokenized fields but why would you
> want to?
>
> I assume you have a way to uniquely identify the documents that you
> want to combine, relying on the Lucene doc ID is fragile....
>
> If possible, your best bet would be to reconstruct the new index
> from the source you used to create the original indexes.
>
> Maybe a higher-level problem statement would help generate
> more suggestions.
>
> Best
> Erick
>
> On Thu, Feb 26, 2009 at 7:07 AM, liat oren <oren.liat@gmail.com> wrote:
>
> > Hi,
> >
> > I have two indexes, each has a tokenized field and I would like to
> combine
> > them both into one field in a new index.
> > How can it be done?
> > (Is it a good approach or is it better to hold them as untokenized text
> and
> > only when I create the new index, then to tokenize it?)
> >
> > Many thanks,
> > Liat
> >
>

--0015174c198203d8fe0463ecc9a9--

From java-user-return-38732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 23:17:12 2009
Return-Path: <java-user-return-38732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93468 invoked from network); 27 Feb 2009 23:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 23:17:12 -0000
Received: (qmail 96112 invoked by uid 500); 27 Feb 2009 23:17:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96081 invoked by uid 500); 27 Feb 2009 23:17:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96069 invoked by uid 99); 27 Feb 2009 23:17:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 15:17:04 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.172] (HELO mail-fx0-f172.google.com) (209.85.220.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 23:16:56 +0000
Received: by fxm20 with SMTP id 20so684406fxm.5
        for <java-user@lucene.apache.org>; Fri, 27 Feb 2009 15:16:34 -0800 (PST)
Received: by 10.223.126.69 with SMTP id b5mr3772943fas.107.1235776593982;
        Fri, 27 Feb 2009 15:16:33 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id f7sm2801595nfh.13.2009.02.27.15.16.31
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 27 Feb 2009 15:16:32 -0800 (PST)
Message-Id: <F44D16A2-F50F-4E73-AC52-5173616FBBAA@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <DEF79D71A17E4B18B298A663912B5171@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: TopDocCollector
Date: Fri, 27 Feb 2009 18:16:29 -0500
References: <DEF79D71A17E4B18B298A663912B5171@msrvcn04>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


<spring@gmx.eu> <spring@gmx.eu> wrote:

> Looking into TopDocCollector code, I have some questions:
>
> * How can a hit have a score of <=0?

I'm not sure...

> * What happens if the first hit has the highest score of all hits?  
> It seems
> that topDocs whould then contain only this doc!?

That works fine, because hq.size() is still less than numHits.  So  
nomatter what, the first numHits hits will be added to the queue.

> public void collect(int doc, float score) {
> 57     if (score > 0.0f) {
> 58       totalHits++;
> 59       if (hq.size() < numHits || score >= minScore) {
> 60         hq.insert(new ScoreDoc(doc, score));
> 61         minScore = ((ScoreDoc)hq.top()).score; // maintain minScore
> 62 }
> 63     }
> 64   }

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 23:27:23 2009
Return-Path: <java-user-return-38733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95208 invoked from network); 27 Feb 2009 23:27:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 23:27:23 -0000
Received: (qmail 5112 invoked by uid 500); 27 Feb 2009 23:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4155 invoked by uid 500); 27 Feb 2009 23:27:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4144 invoked by uid 99); 27 Feb 2009 23:27:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 15:27:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 23:27:05 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1284092qwi.53
        for <java-user@lucene.apache.org>; Fri, 27 Feb 2009 15:26:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=drPHazakfuszDu519+9O2eg1c/F2Ef7+BMG7kdciMv0=;
        b=ZUYyJkyztINFruhqwD9TtYOP+/DyFDzVts9I3+EU0vDfVRbwd6VNlF9sG5IK37XEas
         bvlmH9Yj/uxlZk3X97+RDOLsNV5q/F5gAfb7yzFUMPMqGadYS8EMhx0jeq9GyuCAifhE
         azF03+pLRJecAfb68s5F2W1pSRMhhjF8c30Rc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=G+7XLBX+fx89oC3K8FbIHkDs13D2Q79Y2LDYbioOtDxFgDECgHjL3FZc80GoX4vpfB
         1iDVQGdBSTPHCu/7ZCU6augLX9iamfqYq3wXRmQywC7fzqaRQNbUPgR3CrHo5GF/gLYL
         rLaGnOwU27VK25HtdUCpTGz2igUzgWxk1FOz4=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.229.84.72 with SMTP id i8mr2364887qcl.63.1235777204939; Fri, 
	27 Feb 2009 15:26:44 -0800 (PST)
In-Reply-To: <DEF79D71A17E4B18B298A663912B5171@msrvcn04>
References: <DEF79D71A17E4B18B298A663912B5171@msrvcn04>
Date: Fri, 27 Feb 2009 18:26:44 -0500
X-Google-Sender-Auth: f0c23ecacc5fb03e
Message-ID: <c68e39170902271526s71416f11tcae58a6bc5618aee@mail.gmail.com>
Subject: Re: TopDocCollector
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Feb 27, 2009 at 6:43 AM,  <spring@gmx.eu> wrote:
> Looking into TopDocCollector code, I have some questions:
>
> * How can a hit have a score of <=0?

A function query, or a negative boost would do it.
Solr has always allowed all scores through w/o screening out <=0


-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 27 23:33:59 2009
Return-Path: <java-user-return-38734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97910 invoked from network); 27 Feb 2009 23:33:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2009 23:33:59 -0000
Received: (qmail 9510 invoked by uid 500); 27 Feb 2009 23:33:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9483 invoked by uid 500); 27 Feb 2009 23:33:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9472 invoked by uid 99); 27 Feb 2009 23:33:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 15:33:51 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Feb 2009 23:33:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LdCCo-0000ZZ-9o
	for java-user@lucene.apache.org; Fri, 27 Feb 2009 15:33:22 -0800
Message-ID: <22256503.post@talk.nabble.com>
Date: Fri, 27 Feb 2009 15:33:22 -0800 (PST)
From: tolkienGR <akuromail@gmail.com>
To: java-user@lucene.apache.org
Subject: How build Lucene in Action examples
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: akuromail@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi !!!
I'm new in Lucene.I started reading Lucene in action (first edition) , i
downloaded the code from 
http://www.manning.com/hatcher2/ .
I read somewhere that that code with written in an old of lucene and i
should download the code from the new version from here:
http://www.manning.com/hatcher3/
And so i did...
I still have some problem.For example in the file Searcher.java i get this
error:
Directory fsDir = new FSDirectory(indexDir, null); <-- cannot find sybol
construct FSDirectory(... )

I also tried FSDirectory.getDirecory(indexDir, null);

I have tried many versions of Lucene.Any help????Please!!!!!
Thanks
-- 
View this message in context: http://www.nabble.com/How-build-Lucene-in-Action-examples-tp22256503p22256503.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 08:18:15 2009
Return-Path: <java-user-return-38735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17694 invoked from network); 28 Feb 2009 08:18:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 08:18:14 -0000
Received: (qmail 45770 invoked by uid 500); 28 Feb 2009 08:18:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45742 invoked by uid 500); 28 Feb 2009 08:18:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45731 invoked by uid 99); 28 Feb 2009 08:18:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 00:18:06 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 08:17:56 +0000
Received: by wa-out-1112.google.com with SMTP id m33so765244wag.5
        for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 00:17:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=YdirdB00HtfiqD4iHarhsJvl7ID3ImGVOdXxM/iVMXY=;
        b=msuo40L8IkDWAkbXp088az+BGnK+mPsOyKbn8T3jHZsCp3izvgtqEHt1pVp57CYiC5
         2ZTWoaTKuZp2BQERe9voFO7KB4wqu0h9PbNT01JfyZgUYJ9HvHHHkF9Iy0jXq2bYxRb+
         KHOo+nJdBMF561Wsw1DHUt6oA1iv6Qt+TGUIk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ot9A56XWgX804CsdCU1QXQkGStRmef4wY0SSvcFqx9416UAc/11CK/jr1Ghz4I1ZR2
         lb3W+jfxzv3wJJ0O8vVFADiVfV2IqoYySJor+db7uSv6N+ODNYnq+folbh4qiEeX92yD
         HeEagWHckg/vNoq3vyfh/UmjqljWgtz4HN3QA=
MIME-Version: 1.0
Received: by 10.114.161.11 with SMTP id j11mr1580314wae.24.1235809054786; Sat, 
	28 Feb 2009 00:17:34 -0800 (PST)
In-Reply-To: <652776090902252248s11cda5f0qc9a3bea40b00f8f9@mail.gmail.com>
References: <C5C44BD8.1ECA1%ken.williams@thomsonreuters.com>
	 <C5CAD040.1EEEF%ken.williams@thomsonreuters.com>
	 <652776090902252248s11cda5f0qc9a3bea40b00f8f9@mail.gmail.com>
Date: Sat, 28 Feb 2009 00:17:34 -0800
Message-ID: <652776090902280017g397f7891wad6d439cc83ac40b@mail.gmail.com>
Subject: Re: Confidence scores at search time
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f9a4aeb883a70463f63722
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f9a4aeb883a70463f63722
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I was just reading the Similarity javadocs (
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarity.html#formula_queryNorm)
and I thought this might be relevant to your issue.

>From the javadoc:
*queryNorm(q) * is a normalizing factor used to make scores between queries
comparable. This factor does not affect document ranking (since all ranked
documents are multiplied by the same factor), but rather just attempts to
make scores from different queries (or even different indexes) comparable.
This is a search time factor computed by the Similarity in effect at search
time.

M

On Wed, Feb 25, 2009 at 10:48 PM, Michael Stoppelman <stopman@gmail.com>wrote:

> Hi Ken,
>
> I found this post on the Lucene documentation page:
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03
>
> In practice you sometimes need to have a cut-off or boost factor post
> tf-idf scoring. The way I've been going about it is by picking values and
> seeing if the results are better.
> I'm sure there is a deep information theory problem there.
>
> M
>
> On Wed, Feb 25, 2009 at 8:38 AM, Ken Williams <
> ken.williams@thomsonreuters.com> wrote:
>
>> Hi all,
>>
>> I didn't get a response to this - not sure whether the question was
>> ill-posed, or too-frequently-asked, or just not interesting.  But if
>> anyone
>> could take a stab at it or let me know a different place to look, I'd
>> really
>> appreciate it.
>>
>> Thanks,
>>
>>  -Ken
>>
>>
>> On 2/20/09 12:00 PM, "Ken Williams" <ken.williams@thomsonreuters.com>
>> wrote:
>>
>> > Hi,
>> >
>> > Has there been any work done on getting confidence scores at runtime, so
>> > that scores of documents can be compared across queries?  I found one
>> > reference in the mailing list to some work in 2003, but couldn't find
>> any
>> > follow-up:
>> >
>> >   http://osdir.com/ml/jakarta.lucene.user/2003-12/msg00093.html
>> >
>> > Thanks.
>>
>> --
>> Ken Williams
>> Research Scientist
>> The Thomson Reuters Corporation
>> Eagan, MN
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--001485f9a4aeb883a70463f63722--

From java-user-return-38736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 08:23:56 2009
Return-Path: <java-user-return-38736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19666 invoked from network); 28 Feb 2009 08:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 08:23:56 -0000
Received: (qmail 52217 invoked by uid 500); 28 Feb 2009 08:23:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52192 invoked by uid 500); 28 Feb 2009 08:23:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52181 invoked by uid 99); 28 Feb 2009 08:23:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 00:23:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 08:23:39 +0000
Received: by rv-out-0506.google.com with SMTP id k40so2308008rvb.5
        for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 00:23:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type;
        bh=x62atJyv0Mli6gsZcRK3WTkcyZWuGtBcmnF4QDShb6k=;
        b=YoP5dcmsEp5nJ1KyteXC2An5ofK0cUh/nuu+T+VCHOATyonMe7o6+tB6b+za6EQc42
         bHaR3nOeo+O4KDyQnQZiAKV3VD1MnJEGfXKPDPbVCz5ANkFHyCONO1X8pc+swPGAvog0
         ucgcZAUulg7cKwJp+r6Es0Nwt475PLbMtLf8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=qnJrf6AooLKVnGUMzn1q93D9oj5GVcUcQWotZ35n2dGi0J9jIdYg4IP/NkHCGfVb/X
         9PYSpVGdv5wPGDzTY8BipNZbgp/XAakCB5GblWWTnOtnYOQVeFHGB/nA7qHAAil7hY9d
         AjJL1GUfTAcuvt86e9MCL9NnvKaD5yDKNLOXY=
MIME-Version: 1.0
Received: by 10.114.89.1 with SMTP id m1mr1563736wab.188.1235809397968; Sat, 
	28 Feb 2009 00:23:17 -0800 (PST)
In-Reply-To: <e994873a0902270944u4a122e6cmbceebf64ae7c1085@mail.gmail.com>
References: <e994873a0902201303y62d320aoa7d92a89fc7fac7f@mail.gmail.com>
	 <e994873a0902270615y60f3920ame48cda52d9668475@mail.gmail.com>
	 <c68e39170902270839j9ad2490n19665e7d3650e917@mail.gmail.com>
	 <e994873a0902270944u4a122e6cmbceebf64ae7c1085@mail.gmail.com>
Date: Sat, 28 Feb 2009 00:23:17 -0800
Message-ID: <652776090902280023k768d5eaft14e82744ead1637a@mail.gmail.com>
Subject: Re: queryNorm affect on score
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Cc: yonik@lucidimagination.com
Content-Type: multipart/alternative; boundary=0016364c68b52d0ee50463f64c1d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364c68b52d0ee50463f64c1d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I guess I don't really understand this comment in the similarity java doc
then:

http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarity.html#formula_queryNorm

*queryNorm(q) * is a normalizing factor used to make scores between queries
comparable.

:/.

M

On Fri, Feb 27, 2009 at 9:44 AM, Peter Keegan <peterlkeegan@gmail.com>wrote:

> Got it. This is another example of why scores can't be compared between
> (even similar) queries.
>  (we don't)
>
> Thanks.
>
> On Fri, Feb 27, 2009 at 11:39 AM, Yonik Seeley
> <yonik@lucidimagination.com>wrote:
>
> > On Fri, Feb 27, 2009 at 9:15 AM, Peter Keegan <peterlkeegan@gmail.com>
> > wrote:
> > > Any comments about this? Is this just the way queryNorm works or is
> this
> > a
> > > bug?
> >
> > That's just the way it works... since it's applied to all clauses, it
> > really just changes the range of scores returned, not relative
> > ordering of documents or anything.
> >
> > -Yonik
> > http://www.lucidimagination.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--0016364c68b52d0ee50463f64c1d--

From java-user-return-38737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 11:23:43 2009
Return-Path: <java-user-return-38737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7772 invoked from network); 28 Feb 2009 11:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 11:23:43 -0000
Received: (qmail 30365 invoked by uid 500); 28 Feb 2009 11:23:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30312 invoked by uid 500); 28 Feb 2009 11:23:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30301 invoked by uid 99); 28 Feb 2009 11:23:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 03:23:34 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 11:23:24 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9847D30EFC16; Sat, 28 Feb 2009 04:23:03 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.193] (unknown [138.210.8.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 29D6930EFC13
	for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 04:23:02 -0700 (MST)
Message-Id: <753AF2DD-817C-4DFE-B3C8-2CEFBEAF742E@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <22256503.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: How build Lucene in Action examples
Date: Sat, 28 Feb 2009 06:23:00 -0500
References: <22256503.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

Please post questions/issues related to Lucene in Action to Manning's  
Author Online forum at:

    <http://www.manning-sandbox.com/forum.jspa?forumID=451>

Thanks,
	Erik


On Feb 27, 2009, at 6:33 PM, tolkienGR wrote:

>
> Hi !!!
> I'm new in Lucene.I started reading Lucene in action (first  
> edition) , i
> downloaded the code from
> http://www.manning.com/hatcher2/ .
> I read somewhere that that code with written in an old of lucene and i
> should download the code from the new version from here:
> http://www.manning.com/hatcher3/
> And so i did...
> I still have some problem.For example in the file Searcher.java i  
> get this
> error:
> Directory fsDir = new FSDirectory(indexDir, null); <-- cannot find  
> sybol
> construct FSDirectory(... )
>
> I also tried FSDirectory.getDirecory(indexDir, null);
>
> I have tried many versions of Lucene.Any help????Please!!!!!
> Thanks
> -- 
> View this message in context: http://www.nabble.com/How-build-Lucene-in-Action-examples-tp22256503p22256503.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 12:48:48 2009
Return-Path: <java-user-return-38738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51595 invoked from network); 28 Feb 2009 12:48:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 12:48:47 -0000
Received: (qmail 70077 invoked by uid 500); 28 Feb 2009 12:48:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70047 invoked by uid 500); 28 Feb 2009 12:48:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70036 invoked by uid 99); 28 Feb 2009 12:48:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 04:48:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Feb 2009 12:48:32 +0000
Received: (qmail invoked by alias); 28 Feb 2009 12:48:09 -0000
Received: from e178080065.adsl.alicedsl.de (EHLO msrvcn04) [85.178.80.65]
  by mail.gmx.net (mp038) with SMTP; 28 Feb 2009 13:48:09 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+maW0WvH6mKUCYdb5SyAk6SpbnZEt9XcSLsxBWTQ
	nNKm4v+6c19afP
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <DEF79D71A17E4B18B298A663912B5171@msrvcn04> <F44D16A2-F50F-4E73-AC52-5173616FBBAA@mikemccandless.com>
Subject: RE: TopDocCollector
Date: Sat, 28 Feb 2009 13:48:09 +0100
Message-ID: <9D445B20E053456EBA30EA62BDA8B1E4@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmZMYWPJ3g36U4dSJqbd2xVnVvHEwAcPQ+A
In-Reply-To: <F44D16A2-F50F-4E73-AC52-5173616FBBAA@mikemccandless.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.73
X-Virus-Checked: Checked by ClamAV on apache.org

> That works fine, because hq.size() is still less than numHits.  So  
> nomatter what, the first numHits hits will be added to the queue.
> 
> > public void collect(int doc, float score) {
> > 57     if (score > 0.0f) {
> > 59       if (hq.size() < numHits || score >= minScore) {

Oh damned... it's an || not an &&...
Sorry for the question ;)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 12:52:03 2009
Return-Path: <java-user-return-38739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52809 invoked from network); 28 Feb 2009 12:52:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 12:52:03 -0000
Received: (qmail 72732 invoked by uid 500); 28 Feb 2009 12:51:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72703 invoked by uid 500); 28 Feb 2009 12:51:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72692 invoked by uid 99); 28 Feb 2009 12:51:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 04:51:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Feb 2009 12:51:47 +0000
Received: (qmail invoked by alias); 28 Feb 2009 12:51:27 -0000
Received: from e178080065.adsl.alicedsl.de (EHLO msrvcn04) [85.178.80.65]
  by mail.gmx.net (mp065) with SMTP; 28 Feb 2009 13:51:27 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/mdnQMunLminJhIZwfq/2PUgzR3K3PcnD4bZ2h05
	RsgzUDs5WidAzM
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <DEF79D71A17E4B18B298A663912B5171@msrvcn04> <c68e39170902271526s71416f11tcae58a6bc5618aee@mail.gmail.com>
Subject: RE: TopDocCollector
Date: Sat, 28 Feb 2009 13:51:27 +0100
Message-ID: <67C7E3261EDD40B48BB0B7C4666DDEF7@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmZMu9cHJ6uwQY0T1uBI7OeFCYN3AAb+hRg
In-Reply-To: <c68e39170902271526s71416f11tcae58a6bc5618aee@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.84
X-Virus-Checked: Checked by ClamAV on apache.org

> > * How can a hit have a score of <=0?
> 
> A function query, or a negative boost would do it.

Ah ok.

> Solr has always allowed all scores through w/o screening out <=0

Why?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 14:04:36 2009
Return-Path: <java-user-return-38740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87768 invoked from network); 28 Feb 2009 14:04:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 14:04:35 -0000
Received: (qmail 91362 invoked by uid 500); 28 Feb 2009 14:04:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91335 invoked by uid 500); 28 Feb 2009 14:04:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91324 invoked by uid 99); 28 Feb 2009 14:04:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 06:04:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 14:04:21 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1460297qwi.53
        for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 06:04:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=Nu1zaaxS/sWxbKoimZ6BraWYNXHjjPQHUijwkj9GRhY=;
        b=r5GJLtAvZsc/NGMVCDXbKKSRo4yN3AL+UV+ZDyxzVnsAoBGj/rXB4UVAIqdP/7USRA
         DgKtQssF9f7NjciwDymGL1hL7Yw5FJShDVZnMq78c5dr09gWYzbyM4jp21rEmSiYgTKl
         ZgaHP3OhcXGVJhjyJZXmuo2vjIcjq1tWdsPsQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=pxfL58bk3XV8VJ3T+aDkW/oniaaBdf65Wn0gn7OkHfuHqtWsPxTKCo6dZ3wLhDzeOw
         SEmku8Khz50MpjKLJR1sjDtAALQ+Vdw18zsDlQLqMSx5a0167aXFfNqCt50oNaaWcqL6
         w8F/p1Tu+dgiq9PfBHD+Z3QGC7Sz9ihxBLYls=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.229.80.21 with SMTP id r21mr2445662qck.80.1235829840749; Sat, 
	28 Feb 2009 06:04:00 -0800 (PST)
In-Reply-To: <67C7E3261EDD40B48BB0B7C4666DDEF7@msrvcn04>
References: <DEF79D71A17E4B18B298A663912B5171@msrvcn04>
	 <c68e39170902271526s71416f11tcae58a6bc5618aee@mail.gmail.com>
	 <67C7E3261EDD40B48BB0B7C4666DDEF7@msrvcn04>
Date: Sat, 28 Feb 2009 09:04:00 -0500
X-Google-Sender-Auth: 64e05f6ae26f8b3d
Message-ID: <c68e39170902280604u280036e0q4fd0bf186629f26b@mail.gmail.com>
Subject: Re: TopDocCollector
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, Feb 28, 2009 at 7:51 AM,  <spring@gmx.eu> wrote:
>> Solr has always allowed all scores through w/o screening out <=0
>
> Why?

Partially historical... due to some limitations in Lucene back when
Solr was first written (like undesired score normalization), Solr
interfaces with Lucene search at the hit collector level and
 there never seemed like a good reason to screen out scores <= 0.  It
made all the more sense when function query came along.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 17:36:32 2009
Return-Path: <java-user-return-38741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83392 invoked from network); 28 Feb 2009 17:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 17:36:32 -0000
Received: (qmail 13413 invoked by uid 500); 28 Feb 2009 17:36:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13379 invoked by uid 500); 28 Feb 2009 17:36:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13367 invoked by uid 99); 28 Feb 2009 17:36:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 09:36:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 17:36:17 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 70DCF71C464; Sat, 28 Feb 2009 09:35:56 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 2BE7071C461;
	Sat, 28 Feb 2009 09:35:56 -0800 (PST)
Date: Sat, 28 Feb 2009 09:35:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
cc: yonik@lucidimagination.com
Subject: Re: queryNorm affect on score
In-Reply-To: <652776090902280023k768d5eaft14e82744ead1637a@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0902280928580.14725@radix.cryptio.net>
References: <e994873a0902201303y62d320aoa7d92a89fc7fac7f@mail.gmail.com> 
 <e994873a0902270615y60f3920ame48cda52d9668475@mail.gmail.com> 
 <c68e39170902270839j9ad2490n19665e7d3650e917@mail.gmail.com> 
 <e994873a0902270944u4a122e6cmbceebf64ae7c1085@mail.gmail.com>
 <652776090902280023k768d5eaft14e82744ead1637a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I guess I don't really understand this comment in the similarity java doc
: then:
: 
: http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarity.html#formula_queryNorm
: 
: *queryNorm(q) * is a normalizing factor used to make scores between queries
: comparable.

that comment should probably be removed ... in situations where you 
deal with simple query types, and matching query structures, the queryNorm 
*can* be used to make scores semi-comparable.

To be 100% correct about what the queryNorm does in all cases: it 
normalizes each of the constituent values that are used in the score 
computation relative to the other constituent values.  the main value I've 
seen from it is that it prevents a loss of floating point accuracy that 
can result from addition/multiplication of large values.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 19:08:15 2009
Return-Path: <java-user-return-38742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36765 invoked from network); 28 Feb 2009 19:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 19:08:15 -0000
Received: (qmail 77142 invoked by uid 500); 28 Feb 2009 19:08:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77108 invoked by uid 500); 28 Feb 2009 19:08:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77097 invoked by uid 99); 28 Feb 2009 19:08:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 11:08:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Feb 2009 19:07:58 +0000
Received: (qmail invoked by alias); 28 Feb 2009 19:07:37 -0000
Received: from e179037111.adsl.alicedsl.de (EHLO msrvcn04) [85.179.37.111]
  by mail.gmx.net (mp007) with SMTP; 28 Feb 2009 20:07:37 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19lfFNkbKBl2MGZuvhkqG7utYwIdLumkKDvp1fuW2
	s2zrKR62L3w2wI
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Merging database index with fulltext index
Date: Sat, 28 Feb 2009 20:07:37 +0100
Message-ID: <C1D21FF670A64C9385A00CAC692755D1@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmZ187V6IH/T9rGRbm9ga5DH8foRw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.67
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

what is the best approach to merge a database index with a lucene fulltext
index? Both databases store a unique ID per doc. This is the join criteria.

requirements:

* both resultsets may be very big (100.000 and much more)
* the merged resultset must be sorted by database index and/or relevance
* optional paging the merged resultset, a page has a size of 1000 docs max.

example:

select a, b from dbtable where c = 'foo' and content='bar' order by
relevance, a desc, d

I would split this into:

database: select ID, a, b from dbtable where c = 'foo' order by a desc, d
lucene: content:bar (sort:relevance)
merge: loop over the lucene resultset and add the db record into a new list
if the ID matches.

If the resultset must be paged:

database: select ID from dbtable where c = 'foo' order by a desc, d
lucene: content:bar (sort:relevance)
merge: loop over the lucene resultset and add the db record into a new list
if the ID matches.
page 1: select a,b from dbtable where ID IN (list of the ID's of page 1)
page 2: select a,b from dbtable where ID IN (list of the ID's of page 2)
...


Is there a better way?

Thank you.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 20:03:22 2009
Return-Path: <java-user-return-38743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49884 invoked from network); 28 Feb 2009 20:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 20:03:22 -0000
Received: (qmail 16050 invoked by uid 500); 28 Feb 2009 20:03:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15217 invoked by uid 500); 28 Feb 2009 20:03:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15023 invoked by uid 99); 28 Feb 2009 20:03:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 12:03:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 20:03:05 +0000
Received: by rv-out-0506.google.com with SMTP id k40so2628449rvb.5
        for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 12:02:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=FJOM2tviQKOqlCWgdsFg+qzERdGciSrvx54B4E7ZqCk=;
        b=TJGERsRRHC0mH0KI5mAfpiOceYK5VH0GXhX2VSktjyCNzSnjoS/vvWshpit1ZUSJp6
         WwI4JoGnDxoWfK4e/Ac1Sg5wKjBH/SjusBENoJVxBTLqy2XlGsJcbO/U0ognIquBs9VK
         WrNc+946QUcEp8tMj/lcw2PddOKx9b3UbE6es=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=s2x2wWNhb7g26Kq2ZGleDtTuPILWd8aN1vLbhyKVVXY0EmRUc7VjG7Hg8he2H3rMW7
         xetOlVNlTBIXT+rOWokzc66ngOOYD780HsFipfRvoMnjn7t1LdklHeSYpaK/5GJkpCzw
         8iy076PtYbLpV3IBN/0RF9ReAwki7K7EUseyY=
MIME-Version: 1.0
Received: by 10.141.66.16 with SMTP id t16mr1946813rvk.103.1235851363864; Sat, 
	28 Feb 2009 12:02:43 -0800 (PST)
In-Reply-To: <Pine.LNX.4.64.0902280928580.14725@radix.cryptio.net>
References: <e994873a0902201303y62d320aoa7d92a89fc7fac7f@mail.gmail.com>
	 <e994873a0902270615y60f3920ame48cda52d9668475@mail.gmail.com>
	 <c68e39170902270839j9ad2490n19665e7d3650e917@mail.gmail.com>
	 <e994873a0902270944u4a122e6cmbceebf64ae7c1085@mail.gmail.com>
	 <652776090902280023k768d5eaft14e82744ead1637a@mail.gmail.com>
	 <Pine.LNX.4.64.0902280928580.14725@radix.cryptio.net>
Date: Sat, 28 Feb 2009 15:02:43 -0500
Message-ID: <e994873a0902281202t3492e7c2q87cf1c51dbeb5a40@mail.gmail.com>
Subject: Re: queryNorm affect on score
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd156a489cf5e0464001191
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd156a489cf5e0464001191
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

> in situations where you  deal with simple query types, and matching query
structures, the queryNorm
> *can* be used to make scores semi-comparable.

Hmm. My example used matching query structures. The only difference was a
single term in a field with zero weight that didn't exist in the matching
document. But one score was 3X the other.

Peter

On Sat, Feb 28, 2009 at 12:35 PM, Chris Hostetter
<hossman_lucene@fucit.org>wrote:

>
> : I guess I don't really understand this comment in the similarity java doc
> : then:
> :
> :
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarity.html#formula_queryNorm
> :
> : *queryNorm(q) * is a normalizing factor used to make scores between
> queries
> : comparable.
>
> that comment should probably be removed ... in situations where you
> deal with simple query types, and matching query structures, the queryNorm
> *can* be used to make scores semi-comparable.
>
> To be 100% correct about what the queryNorm does in all cases: it
> normalizes each of the constituent values that are used in the score
> computation relative to the other constituent values.  the main value I've
> seen from it is that it prevents a loss of floating point accuracy that
> can result from addition/multiplication of large values.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd156a489cf5e0464001191--

From java-user-return-38744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 20:04:18 2009
Return-Path: <java-user-return-38744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49951 invoked from network); 28 Feb 2009 20:04:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 20:04:18 -0000
Received: (qmail 16975 invoked by uid 500); 28 Feb 2009 20:04:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16949 invoked by uid 500); 28 Feb 2009 20:04:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16938 invoked by uid 99); 28 Feb 2009 20:04:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 12:04:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 20:04:03 +0000
Received: by rv-out-0506.google.com with SMTP id k40so2628827rvb.5
        for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 12:03:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=+uLSec5ldXirADvo5QXYhNxYQJN6459u7+slCTiCaL8=;
        b=Mz/vWDxFIO352S/ySVjAr9s04fegkat35UeFoyILBHS2eqLKVlnRXMsJQXhVnCWpQo
         COtrMRWRvvhpRWdsUUhnLyLMyu4nyhZZdSYgCsL3hNUmkV1LuY68A98eUxuZu/DgyqEk
         PvCoefHRPOTM80+SuVcnJNNMgUPYU7tsJ15v0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RQSu6eLtjgdMcjDWTYSjcTY20IMexRatgCNHTKFSPCn3F2mn4W6GKo+u1i0A1gOSm8
         Gpf4fxLSZnKeOvUtu5DQRqyFJYbvbcJr6rwrfESD678Tq+cnAthuvKHfL9TIT7TyejMX
         FKrYKrQlPSZX2dUeTcEDDpxeOcBDYNoi5Yvao=
MIME-Version: 1.0
Received: by 10.141.210.13 with SMTP id m13mr1945874rvq.181.1235851422106; 
	Sat, 28 Feb 2009 12:03:42 -0800 (PST)
In-Reply-To: <C1D21FF670A64C9385A00CAC692755D1@msrvcn04>
References: <C1D21FF670A64C9385A00CAC692755D1@msrvcn04>
Date: Sat, 28 Feb 2009 12:03:42 -0800
Message-ID: <6e3ae6310902281203h305a421dkb5d96122ec21dee3@mail.gmail.com>
Subject: Re: Merging database index with fulltext index
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd29b320286780464001548
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29b320286780464001548
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I feel this may not be a good example. Since you can easily index field c,
a, d and let Lucene to handle the filter "c = 'foo'" and the order by
clause"order by a desc, d"

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Sat, Feb 28, 2009 at 11:07 AM, <spring@gmx.eu> wrote:

> Hi,
>
> what is the best approach to merge a database index with a lucene fulltext
> index? Both databases store a unique ID per doc. This is the join criteria.
>
> requirements:
>
> * both resultsets may be very big (100.000 and much more)
> * the merged resultset must be sorted by database index and/or relevance
> * optional paging the merged resultset, a page has a size of 1000 docs max.
>
> example:
>
> select a, b from dbtable where c = 'foo' and content='bar' order by
> relevance, a desc, d
>
> I would split this into:
>
> database: select ID, a, b from dbtable where c = 'foo' order by a desc, d
> lucene: content:bar (sort:relevance)
> merge: loop over the lucene resultset and add the db record into a new list
> if the ID matches.
>
> If the resultset must be paged:
>
> database: select ID from dbtable where c = 'foo' order by a desc, d
> lucene: content:bar (sort:relevance)
> merge: loop over the lucene resultset and add the db record into a new list
> if the ID matches.
> page 1: select a,b from dbtable where ID IN (list of the ID's of page 1)
> page 2: select a,b from dbtable where ID IN (list of the ID's of page 2)
> ...
>
>
> Is there a better way?
>
> Thank you.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd29b320286780464001548--

From java-user-return-38745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 20:47:40 2009
Return-Path: <java-user-return-38745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57911 invoked from network); 28 Feb 2009 20:47:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 20:47:40 -0000
Received: (qmail 45860 invoked by uid 500); 28 Feb 2009 20:47:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45832 invoked by uid 500); 28 Feb 2009 20:47:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45821 invoked by uid 99); 28 Feb 2009 20:47:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 12:47:33 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 20:47:26 +0000
Received: by yw-out-2324.google.com with SMTP id 2so1010148ywt.5
        for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 12:47:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=azkLu2Ng4thdR3FGUJtLiXuQjWggiFnjD50MuKg91wk=;
        b=IZAPITXmrHDM8lY1I3UaI7FuQoi9DSX/2v8or8lqJp+4Aj8GzYickhxbBSQm8I/T33
         kMrRP3oXNaPzQbokPhi47Yn18wqBf8nupqmQNMkAeMTPKgUuKI/xQSYlZg5c0S3sPBGo
         zf0tZIEtXmqNdZaanMLcyDeKZEovTSJi3MunQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Oq970KL4jSaBgUkc+4+Bdq2tPc93HmvB1YVL6QM1BYZjjiA8MfDFur6yGElfJW9Yn3
         JZxgf09OOmXy+m103ML7x50yuIef0zKqSFtKN1tIJkIFXtBS3fz8WYXOCfyM+LX/Axsf
         PjYaahKG7T0FSjArzfJ/nXLVipaaLnssD3+E8=
MIME-Version: 1.0
Received: by 10.220.44.194 with SMTP id b2mr1328425vcf.83.1235854025674; Sat, 
	28 Feb 2009 12:47:05 -0800 (PST)
In-Reply-To: <C1D21FF670A64C9385A00CAC692755D1@msrvcn04>
References: <C1D21FF670A64C9385A00CAC692755D1@msrvcn04>
Date: Sat, 28 Feb 2009 15:47:05 -0500
Message-ID: <359a92830902281247r7647dfc3t175ce42925a79ba0@mail.gmail.com>
Subject: Re: Merging database index with fulltext index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e646047631cf7a046400b0fa
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e646047631cf7a046400b0fa
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I'll second Chris's comment and ask whether you've considered
denormalizing your data into Lucene and sticking exclusively
with Lucene?

Contrariwise, look for anything by Marcelo Ochoa on the user list
about embedding Lucene in Oracle (which I confess I haven't looked
into at all, but seems interesting).

Best
Erick

On Sat, Feb 28, 2009 at 2:07 PM, <spring@gmx.eu> wrote:

> Hi,
>
> what is the best approach to merge a database index with a lucene fulltext
> index? Both databases store a unique ID per doc. This is the join criteria.
>
> requirements:
>
> * both resultsets may be very big (100.000 and much more)
> * the merged resultset must be sorted by database index and/or relevance
> * optional paging the merged resultset, a page has a size of 1000 docs max.
>
> example:
>
> select a, b from dbtable where c = 'foo' and content='bar' order by
> relevance, a desc, d
>
> I would split this into:
>
> database: select ID, a, b from dbtable where c = 'foo' order by a desc, d
> lucene: content:bar (sort:relevance)
> merge: loop over the lucene resultset and add the db record into a new list
> if the ID matches.
>
> If the resultset must be paged:
>
> database: select ID from dbtable where c = 'foo' order by a desc, d
> lucene: content:bar (sort:relevance)
> merge: loop over the lucene resultset and add the db record into a new list
> if the ID matches.
> page 1: select a,b from dbtable where ID IN (list of the ID's of page 1)
> page 2: select a,b from dbtable where ID IN (list of the ID's of page 2)
> ...
>
>
> Is there a better way?
>
> Thank you.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e646047631cf7a046400b0fa--

From java-user-return-38746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 20:59:58 2009
Return-Path: <java-user-return-38746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60300 invoked from network); 28 Feb 2009 20:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 20:59:58 -0000
Received: (qmail 51018 invoked by uid 500); 28 Feb 2009 20:59:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50987 invoked by uid 500); 28 Feb 2009 20:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50976 invoked by uid 99); 28 Feb 2009 20:59:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 12:59:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Feb 2009 20:59:44 +0000
Received: (qmail invoked by alias); 28 Feb 2009 20:59:21 -0000
Received: from e178112183.adsl.alicedsl.de (EHLO msrvcn04) [85.178.112.183]
  by mail.gmx.net (mp039) with SMTP; 28 Feb 2009 21:59:21 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18jKbx2XGQjtQW4+XAu+tE5AdWbPLLt2fvCd38e27
	kTre9MDRMIJUyq
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <C1D21FF670A64C9385A00CAC692755D1@msrvcn04> <6e3ae6310902281203h305a421dkb5d96122ec21dee3@mail.gmail.com>
Subject: RE: Merging database index with fulltext index
Date: Sat, 28 Feb 2009 21:59:20 +0100
Message-ID: <8C052CA599AC4C2A82A98CFA5BDFF249@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmZ373t1mEEqI93SBOnl/zpUfObCAAB146A
In-Reply-To: <6e3ae6310902281203h305a421dkb5d96122ec21dee3@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.8100000000000001
X-Virus-Checked: Checked by ClamAV on apache.org

> I feel this may not be a good example. 

It was a very simple example. 

The real database query is very complex and joins serveral tables.
It would be an absolute nightmare to copy all these tables into lucene and
keep both in sync.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 21:01:22 2009
Return-Path: <java-user-return-38747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61362 invoked from network); 28 Feb 2009 21:01:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 21:01:22 -0000
Received: (qmail 54441 invoked by uid 500); 28 Feb 2009 21:01:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54414 invoked by uid 500); 28 Feb 2009 21:01:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54403 invoked by uid 99); 28 Feb 2009 21:01:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 13:01:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Feb 2009 21:01:06 +0000
Received: (qmail invoked by alias); 28 Feb 2009 21:00:45 -0000
Received: from e178112183.adsl.alicedsl.de (EHLO msrvcn04) [85.178.112.183]
  by mail.gmx.net (mp062) with SMTP; 28 Feb 2009 22:00:45 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19llsFHwE9l3t8Bggh54LhlRoKxPxt+MvDBRJ6h7A
	CDg3kF4yg3tyr/
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <C1D21FF670A64C9385A00CAC692755D1@msrvcn04> <359a92830902281247r7647dfc3t175ce42925a79ba0@mail.gmail.com>
Subject: RE: Merging database index with fulltext index
Date: Sat, 28 Feb 2009 22:00:44 +0100
Message-ID: <8A1FE5163D2042A69CCEF6EBF83651D5@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmZ5cncRgKKPgIFStagM7BmIlP6sAAAaL7g
In-Reply-To: <359a92830902281247r7647dfc3t175ce42925a79ba0@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.77
X-Virus-Checked: Checked by ClamAV on apache.org

> Contrariwise, look for anything by Marcelo Ochoa on the user list
> about embedding Lucene in Oracle (which I confess I haven't looked
> into at all, but seems interesting).

I know this lucene-oracle text cartridge.
But my solution has to work with any of the big databases (MS, IBM, Oracle).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 21:09:26 2009
Return-Path: <java-user-return-38748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63871 invoked from network); 28 Feb 2009 21:09:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 21:09:26 -0000
Received: (qmail 62650 invoked by uid 500); 28 Feb 2009 21:09:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62620 invoked by uid 500); 28 Feb 2009 21:09:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62609 invoked by uid 99); 28 Feb 2009 21:09:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 13:09:18 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 21:09:11 +0000
Received: by rv-out-0506.google.com with SMTP id k40so2653266rvb.5
        for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 13:08:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Hr94UO4vVlGAldLY+mCNmgtzbBEaF2o9dMNnDX8Y9fw=;
        b=IUTKBFUhSPZae+4aGRTn+egWbvmV7EY3DYAREoDdU5cMiQkl90XXZlufjvhwloybrN
         K0wNQ5qIiqr/JExLq3p5cF9oqrhvtGg12FfKCATfXtM8r8PShLqdVnDTjk2z3nfk7Px1
         4chAgQR0cVNNcQr5e8wr0RKVlTgksAlFy0wDA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ju46xObMquqYTA1YaUZKqLht7eBL/geEthpof+2N1Smq29sM8rNbKYVHA+LiVDp6Ti
         5Gvb/lliE4kGmYoco3+7MA0s12XDhVrd15iWPvcC50F/rr0D30fvzU4w6YKc2o4DtdNl
         xZ4G0dqmaXHeFtfI9cMW0DNQdCPv2lIxBJThM=
MIME-Version: 1.0
Received: by 10.141.114.19 with SMTP id r19mr1979974rvm.24.1235855331597; Sat, 
	28 Feb 2009 13:08:51 -0800 (PST)
In-Reply-To: <8A1FE5163D2042A69CCEF6EBF83651D5@msrvcn04>
References: <C1D21FF670A64C9385A00CAC692755D1@msrvcn04>
	 <359a92830902281247r7647dfc3t175ce42925a79ba0@mail.gmail.com>
	 <8A1FE5163D2042A69CCEF6EBF83651D5@msrvcn04>
Date: Sat, 28 Feb 2009 13:08:51 -0800
Message-ID: <6e3ae6310902281308y57e5ffa4j96614750dfb2aaf1@mail.gmail.com>
Subject: Re: Merging database index with fulltext index
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd29cb0089f1c046400fea9
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29cb0089f1c046400fea9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Actually you can use DBSight(disclaimer:I work on it) to collect the data
and keep them in sync.
The free version has most the features and doesn't have size limit.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!


On Sat, Feb 28, 2009 at 1:00 PM, <spring@gmx.eu> wrote:

> > Contrariwise, look for anything by Marcelo Ochoa on the user list
> > about embedding Lucene in Oracle (which I confess I haven't looked
> > into at all, but seems interesting).
>
> I know this lucene-oracle text cartridge.
> But my solution has to work with any of the big databases (MS, IBM,
> Oracle).
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd29cb0089f1c046400fea9--

From java-user-return-38749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 21:46:03 2009
Return-Path: <java-user-return-38749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81043 invoked from network); 28 Feb 2009 21:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 21:46:02 -0000
Received: (qmail 90053 invoked by uid 500); 28 Feb 2009 21:45:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90017 invoked by uid 500); 28 Feb 2009 21:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90005 invoked by uid 99); 28 Feb 2009 21:45:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 13:45:55 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 21:45:44 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 659FB3B9A8
	for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 13:45:22 -0800 (PST)
Message-Id: <693D1F34-A070-4EA7-81A1-B77F5832A91B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <652776090902280017g397f7891wad6d439cc83ac40b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Confidence scores at search time
Date: Sat, 28 Feb 2009 16:45:21 -0500
References: <C5C44BD8.1ECA1%ken.williams@thomsonreuters.com> <C5CAD040.1EEEF%ken.williams@thomsonreuters.com> <652776090902252248s11cda5f0qc9a3bea40b00f8f9@mail.gmail.com> <652776090902280017g397f7891wad6d439cc83ac40b@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Personally, I have my doubts about this actually working and I think  
others do too.  It's in there in Lucene, but I don't know if it makes  
sense.  Logically speaking, I just don't see how it makes sense to  
compare different queries results, but maybe I'm just short-sighted.   
I'd certainly welcome some references to research on the "why" part of  
it.


On Feb 28, 2009, at 3:17 AM, Michael Stoppelman wrote:

> I was just reading the Similarity javadocs (
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarity.html#formula_queryNorm)
> and I thought this might be relevant to your issue.
>
> From the javadoc:
> *queryNorm(q) * is a normalizing factor used to make scores between  
> queries
> comparable. This factor does not affect document ranking (since all  
> ranked
> documents are multiplied by the same factor), but rather just  
> attempts to
> make scores from different queries (or even different indexes)  
> comparable.
> This is a search time factor computed by the Similarity in effect at  
> search
> time.
>
> M
>
> On Wed, Feb 25, 2009 at 10:48 PM, Michael Stoppelman <stopman@gmail.com 
> >wrote:
>
>> Hi Ken,
>>
>> I found this post on the Lucene documentation page:
>> http://wiki.apache.org/lucene-java/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03
>>
>> In practice you sometimes need to have a cut-off or boost factor post
>> tf-idf scoring. The way I've been going about it is by picking  
>> values and
>> seeing if the results are better.
>> I'm sure there is a deep information theory problem there.
>>
>> M
>>
>> On Wed, Feb 25, 2009 at 8:38 AM, Ken Williams <
>> ken.williams@thomsonreuters.com> wrote:
>>
>>> Hi all,
>>>
>>> I didn't get a response to this - not sure whether the question was
>>> ill-posed, or too-frequently-asked, or just not interesting.  But if
>>> anyone
>>> could take a stab at it or let me know a different place to look,  
>>> I'd
>>> really
>>> appreciate it.
>>>
>>> Thanks,
>>>
>>> -Ken
>>>
>>>
>>> On 2/20/09 12:00 PM, "Ken Williams"  
>>> <ken.williams@thomsonreuters.com>
>>> wrote:
>>>
>>>> Hi,
>>>>
>>>> Has there been any work done on getting confidence scores at  
>>>> runtime, so
>>>> that scores of documents can be compared across queries?  I found  
>>>> one
>>>> reference in the mailing list to some work in 2003, but couldn't  
>>>> find
>>> any
>>>> follow-up:
>>>>
>>>>  http://osdir.com/ml/jakarta.lucene.user/2003-12/msg00093.html
>>>>
>>>> Thanks.
>>>
>>> --
>>> Ken Williams
>>> Research Scientist
>>> The Thomson Reuters Corporation
>>> Eagan, MN
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 23:03:03 2009
Return-Path: <java-user-return-38750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11918 invoked from network); 28 Feb 2009 23:03:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 23:03:03 -0000
Received: (qmail 23611 invoked by uid 500); 28 Feb 2009 23:02:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23580 invoked by uid 500); 28 Feb 2009 23:02:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23569 invoked by uid 99); 28 Feb 2009 23:02:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 15:02:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 23:02:48 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1565700qwi.53
        for <java-user@lucene.apache.org>; Sat, 28 Feb 2009 15:02:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=dnGg0FUG8vVYXkXn5CyiW0jiY4gI3pyfmkLPLp9V88U=;
        b=Qx3w7po/PxBFDojL/4uWs0qrcB/LIRXraNojFeSTQsaZtP7Qvu9RRZE0Kxn2ktaNX2
         h57S8OZCwCNhOI6MVMjNG75CON5gOrAEXDYS5bd4hTUKtDtlMZSqv1W0qxViADsdVcRQ
         2NgYnVAcNPWtru88K0F+FObcV6CNWKHaysGMA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=LdipYQAAndlXFeAPtlON3W2WH9VHSGQwqXif9rtQnJbN6aXRy9OoUbrh+6PRnv9lri
         NqEx07WkU/Nv+sPyw9QbMXR/s8XmfbPjLKhIT7UAdK3jXhu2qWoj844HRPbVaxLZ/+MH
         IY7qC6kbxR6gcxGTzNyh3t5sYBszLZkABeoas=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.229.100.4 with SMTP id w4mr2556599qcn.11.1235862147095; Sat, 
	28 Feb 2009 15:02:27 -0800 (PST)
In-Reply-To: <e994873a0902281202t3492e7c2q87cf1c51dbeb5a40@mail.gmail.com>
References: <e994873a0902201303y62d320aoa7d92a89fc7fac7f@mail.gmail.com>
	 <e994873a0902270615y60f3920ame48cda52d9668475@mail.gmail.com>
	 <c68e39170902270839j9ad2490n19665e7d3650e917@mail.gmail.com>
	 <e994873a0902270944u4a122e6cmbceebf64ae7c1085@mail.gmail.com>
	 <652776090902280023k768d5eaft14e82744ead1637a@mail.gmail.com>
	 <Pine.LNX.4.64.0902280928580.14725@radix.cryptio.net>
	 <e994873a0902281202t3492e7c2q87cf1c51dbeb5a40@mail.gmail.com>
Date: Sat, 28 Feb 2009 18:02:27 -0500
X-Google-Sender-Auth: 1129a8f8b3e8e50b
Message-ID: <c68e39170902281502h5a710eceud47db881ce29d060@mail.gmail.com>
Subject: Re: queryNorm affect on score
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, Feb 28, 2009 at 3:02 PM, Peter Keegan <peterlkeegan@gmail.com> wrot=
e:
>> in situations where you =A0deal with simple query types, and matching qu=
ery
> structures, the queryNorm
>> *can* be used to make scores semi-comparable.
>
> Hmm. My example used matching query structures. The only difference was a
> single term in a field with zero weight that didn't exist in the matching
> document. But one score was 3X the other.

But the zero boost was an index-time boost, and the queryNorm takes
into account query-time boosts and idfs.  You might get closer to what
you expect with a query time boost of 0.0f

The other thing affecting the score is the coord factor - the fact
that fewer of the optional terms matched (1/2) lowers the score.  The
coordination factor can be disabled on any BooleanQuery.

If you do both of the above, I *think* you would get the same scores
for this specific example.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 28 23:07:56 2009
Return-Path: <java-user-return-38751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13028 invoked from network); 28 Feb 2009 23:07:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2009 23:07:56 -0000
Received: (qmail 27030 invoked by uid 500); 28 Feb 2009 23:07:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26999 invoked by uid 500); 28 Feb 2009 23:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26988 invoked by uid 99); 28 Feb 2009 23:07:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Feb 2009 15:07:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Feb 2009 23:07:42 +0000
Received: (qmail invoked by alias); 28 Feb 2009 23:07:18 -0000
Received: from e178064099.adsl.alicedsl.de (EHLO msrvcn04) [85.178.64.99]
  by mail.gmx.net (mp005) with SMTP; 01 Mar 2009 00:07:18 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/H75R0PWTH75YjHNv6otrkt1gBvKgiVo+zA5ihdU
	RbxmtanQxgDXMC
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <C1D21FF670A64C9385A00CAC692755D1@msrvcn04> <359a92830902281247r7647dfc3t175ce42925a79ba0@mail.gmail.com> <8A1FE5163D2042A69CCEF6EBF83651D5@msrvcn04> <6e3ae6310902281308y57e5ffa4j96614750dfb2aaf1@mail.gmail.com>
Subject: RE: Merging database index with fulltext index
Date: Sat, 28 Feb 2009 22:33:51 +0100
Message-ID: <0D61FDAB3C994CFB97356D02CBDBA29E@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcmZ6NRM9mm5l3JSTeKIMpFjAHrAqAAAoNhQ
In-Reply-To: <6e3ae6310902281308y57e5ffa4j96614750dfb2aaf1@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.77
X-Virus-Checked: Checked by ClamAV on apache.org

> Actually you can use DBSight(disclaimer:I work on it) to 
> collect the data
> and keep them in sync.

Hm... it fulltext-indexes a database?
It supports document content outside the database (custom crawler)?
What query-syntax it supports? 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


